---
title: Découpage (DirectComposition)
description: Cette rubrique décrit la prise en charge de Microsoft DirectComposition pour les éléments visuels de découpage.
ms.assetid: B6E0D8F5-B6B9-40CC-B079-850AC8F2D538
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4feb537dfb41053dd1099eca7f122b3284dce95
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104383795"
---
# <a name="clipping-directcomposition"></a><span data-ttu-id="948a8-103">Découpage (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="948a8-103">Clipping (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="948a8-104">Pour les applications sur Windows 10, nous vous recommandons d’utiliser des API Windows. UI. composition au lieu de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="948a8-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="948a8-105">Pour plus d’informations, consultez [moderniser votre application de bureau à l’aide de la couche visuelle](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="948a8-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="948a8-106">Le découpage permet d’afficher uniquement une partie d’une arborescence visuelle ou visuelle en limitant le rendu de l’arborescence ou du visuel à une zone rectangulaire particulière.</span><span class="sxs-lookup"><span data-stu-id="948a8-106">Clipping provides a way to reveal only a portion of a visual or visual tree by limiting the rendering of the visual or tree to a particular rectangular area.</span></span> <span data-ttu-id="948a8-107">Cette rubrique décrit la prise en charge de Microsoft DirectComposition pour les éléments visuels de découpage.</span><span class="sxs-lookup"><span data-stu-id="948a8-107">This topic describes Microsoft DirectComposition support for clipping visuals.</span></span> <span data-ttu-id="948a8-108">Il comprend les sections suivantes :</span><span class="sxs-lookup"><span data-stu-id="948a8-108">It includes the following sections:</span></span>

-   [<span data-ttu-id="948a8-109">Rectangle de découpage</span><span class="sxs-lookup"><span data-stu-id="948a8-109">Clip rectangle</span></span>](#clip-rectangle)
-   [<span data-ttu-id="948a8-110">Clip, objet</span><span class="sxs-lookup"><span data-stu-id="948a8-110">Clip object</span></span>](#clip-object)
-   [<span data-ttu-id="948a8-111">Rectangle de découpage animé</span><span class="sxs-lookup"><span data-stu-id="948a8-111">Animated clip rectangle</span></span>](#animated-clip-rectangle)
-   [<span data-ttu-id="948a8-112">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="948a8-112">Related topics</span></span>](#related-topics)

## <a name="clip-rectangle"></a><span data-ttu-id="948a8-113">Rectangle de découpage</span><span class="sxs-lookup"><span data-stu-id="948a8-113">Clip rectangle</span></span>

<span data-ttu-id="948a8-114">Un objet visuel a une propriété de clip qui définit une zone rectangulaire, ou un *rectangle de découpage*, dans le contenu de la bitmap du visuel.</span><span class="sxs-lookup"><span data-stu-id="948a8-114">A visual object has a Clip property that defines a rectangular region, or *clip rectangle*, within the visual's bitmap content.</span></span> <span data-ttu-id="948a8-115">Lorsque l’élément visuel est rendu à l’écran, seule la partie du contenu de la bitmap qui se trouve à l’intérieur du rectangle de découpage est dessinée à l’écran, tandis que le contenu qui s’étend hors du rectangle de découpage est coupé (non dessiné).</span><span class="sxs-lookup"><span data-stu-id="948a8-115">When the visual is rendered to the screen, only the portion of the bitmap content that is inside the clip rectangle is drawn on the screen, while the content that extends outside the clip rectangle is clipped (not drawn).</span></span> <span data-ttu-id="948a8-116">Par défaut, la propriété Clip comprend tout le contenu de la bitmap.</span><span class="sxs-lookup"><span data-stu-id="948a8-116">By default, the Clip property includes all bitmap content.</span></span>

<span data-ttu-id="948a8-117">La propriété de découpage d’un élément visuel s’applique à tous les éléments visuels enfants et descendants.</span><span class="sxs-lookup"><span data-stu-id="948a8-117">A visual's Clip property applies to all child and descendent visuals.</span></span> <span data-ttu-id="948a8-118">En d’autres termes, tout contenu enfant ou descendant qui se trouve en dehors des limites du rectangle de découpage du parent est également coupé.</span><span class="sxs-lookup"><span data-stu-id="948a8-118">In other words, any child or descendent content that falls outside the bounds of the parent's clip rectangle is also clipped.</span></span>

<span data-ttu-id="948a8-119">DirectComposition applique la propriété Clip avant d’appliquer les propriétés de transformation OffsetX, OffsetY et 2D, mais après l’application des propriétés Effect et 3D Transform.</span><span class="sxs-lookup"><span data-stu-id="948a8-119">DirectComposition applies the Clip property before applying the OffsetX, OffsetY, and 2D Transform properties, but after applying the Effect and 3D Transform properties.</span></span> <span data-ttu-id="948a8-120">Cela signifie que les transformations 2D, les offsets et les décalages, affectent à la fois le contenu visuel et le rectangle de découpage.</span><span class="sxs-lookup"><span data-stu-id="948a8-120">This means that 2D Transforms, OffsetX, and OffsetY, will affect both the visual content, and the clip rectangle.</span></span> <span data-ttu-id="948a8-121">Alors que les transformations et les effets 3D ne s’appliquent pas au rectangle de découpage.</span><span class="sxs-lookup"><span data-stu-id="948a8-121">Whereas 3D transforms and effects will not apply to the clip rectangle.</span></span>

<span data-ttu-id="948a8-122">Par exemple, lors de l’application d’un décalage ou d’une transformation 2D, le rectangle de découpage est affecté par la matrice de transformation.</span><span class="sxs-lookup"><span data-stu-id="948a8-122">For example, when applying an offset or 2D transform, the clip rectangle is affected by the transformation matrix.</span></span> <span data-ttu-id="948a8-123">Par conséquent, l’ajout d’un décalage et d’une rotation 2D (45 degrés) avec un rectangle de découpage arrondi se traduira par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="948a8-123">So adding an offset and a 2D rotate (45 degrees) along with a rounded corner clip rectangle will result in this:</span></span>

![Diagramme montrant l’effet d’une transformation 2D sur un rectangle de découpage.](images/clipping2dtransform.png)

<span data-ttu-id="948a8-125">Lors de l’application d’une transformation 3D « au sein » du rectangle de découpage, le rectangle de découpage n’est pas affecté par la matrice de transformation.</span><span class="sxs-lookup"><span data-stu-id="948a8-125">When applying a 3D transformation “within” the clip rectangle, the clip rectangle is not affected by the transformation matrix.</span></span> <span data-ttu-id="948a8-126">Même lors de l’application d’une rotation autour de l’axe Z (de la même façon que l’exemple précédent), le diagramme suivant est le résultat :</span><span class="sxs-lookup"><span data-stu-id="948a8-126">Even when applying a rotation around the Z axis (effectively the same as the previous example), the following diagram is the result:</span></span>

![Diagramme montrant qu’une transformation 3D n’affecte pas l’élément Rectangle (rotation visuelle dans le clip).](images/clipping3dtransform.png)

<span data-ttu-id="948a8-128">Notez que le visuel pivoté dans le clip, car la matrice 3D n’est pas appliquée au clip lui-même.</span><span class="sxs-lookup"><span data-stu-id="948a8-128">Note that the visual rotated within the clip because the 3D matrix is not applied to the clip itself.</span></span>

<span data-ttu-id="948a8-129">Si la propriété Clip est définie sur un rectangle vide, l’élément visuel est entièrement coupé ; autrement dit, le visuel est inclus dans l’arborescence d’éléments visuels, mais il n’affiche rien.</span><span class="sxs-lookup"><span data-stu-id="948a8-129">If the Clip property is set to an empty rectangle, the visual is fully clipped; that is, the visual is included in the visual tree, but it does not render anything.</span></span> <span data-ttu-id="948a8-130">Si vous ne souhaitez pas inclure un visuel particulier dans une composition, supprimez l’élément visuel de l’arborescence d’éléments visuels au lieu de définir un rectangle de découpage vide.</span><span class="sxs-lookup"><span data-stu-id="948a8-130">If you do not want to include a particular visual in a composition, remove the visual from the visual tree instead of setting an empty clip rectangle.</span></span> <span data-ttu-id="948a8-131">La suppression des résultats visuels améliore les performances.</span><span class="sxs-lookup"><span data-stu-id="948a8-131">Removing the visual results in better performance.</span></span>

<span data-ttu-id="948a8-132">Vous définissez la propriété clip d’un élément visuel à l’aide de la méthode [**IDCompositionVisual :: SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) .</span><span class="sxs-lookup"><span data-stu-id="948a8-132">You set the Clip property of a visual by using the [**IDCompositionVisual::SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) method.</span></span> <span data-ttu-id="948a8-133">Cette méthode comprend des surcharges qui vous permettent de définir la valeur de la propriété clip sur un rectangle statique ou un objet clip.</span><span class="sxs-lookup"><span data-stu-id="948a8-133">This method includes overloads that enable you to set the value of the Clip property to a static rectangle or to a clip object.</span></span> <span data-ttu-id="948a8-134">Utilisez un rectangle statique si vous n’avez pas besoin de modifier les dimensions du rectangle de découpage pendant la durée de vie de l’élément visuel.</span><span class="sxs-lookup"><span data-stu-id="948a8-134">Use a static rectangle if you do not need to change the dimensions of the clip rectangle during the lifetime of the visual.</span></span> <span data-ttu-id="948a8-135">Si vous avez besoin de modifier les dimensions ou d’animer le rectangle de découpage, utilisez un objet clip.</span><span class="sxs-lookup"><span data-stu-id="948a8-135">If you do need to change the dimensions or animate the clip rectangle, use a clip object.</span></span>

## <a name="clip-object"></a><span data-ttu-id="948a8-136">Clip, objet</span><span class="sxs-lookup"><span data-stu-id="948a8-136">Clip object</span></span>

<span data-ttu-id="948a8-137">Un objet clip est un objet COM (Component Object Model) qui représente un rectangle de découpage.</span><span class="sxs-lookup"><span data-stu-id="948a8-137">A clip object is a Component Object Model (COM) object that represents a clip rectangle.</span></span> <span data-ttu-id="948a8-138">Vous créez un objet clip à l’aide de la méthode [**IDCompositionDevice :: CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) , puis vous utilisez l’interface [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) de l’objet pour définir les propriétés de l’objet.</span><span class="sxs-lookup"><span data-stu-id="948a8-138">You create a clip object by using the [**IDCompositionDevice::CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) method, and then use the object's [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) interface to set the properties of the object.</span></span> <span data-ttu-id="948a8-139">Un objet clip nouvellement créé a les valeurs minimales possibles pour les propriétés Left et Top, ainsi que les valeurs maximales possibles pour les propriétés Right et Bottom, ce qui en fait un objet de non-op.</span><span class="sxs-lookup"><span data-stu-id="948a8-139">A newly created clip object has the minimum possible values for the Left and Top properties, and the maximum possible values for the Right and Bottom properties, effectively making it a no-op clip object.</span></span> <span data-ttu-id="948a8-140">En d’autres termes, l’objet représente un rectangle de découpage qui inclut la totalité du contenu de la bitmap d’un visuel.</span><span class="sxs-lookup"><span data-stu-id="948a8-140">In other words, the object represents a clip rectangle that would include the entire bitmap content of a visual.</span></span>

<span data-ttu-id="948a8-141">Un objet clip comprend un ensemble de propriétés qui vous permettent de spécifier des angles arrondis pour l’objet clip.</span><span class="sxs-lookup"><span data-stu-id="948a8-141">A clip object includes a set of properties that enable you to specify rounded corners for the clip object.</span></span> <span data-ttu-id="948a8-142">Les propriétés vous permettent de définir le rayon x et le rayon y de chaque angle de l’objet de découpage.</span><span class="sxs-lookup"><span data-stu-id="948a8-142">The properties enable you to set the x radius and y radius of each corner of the clipping object.</span></span>

## <a name="animated-clip-rectangle"></a><span data-ttu-id="948a8-143">Rectangle de découpage animé</span><span class="sxs-lookup"><span data-stu-id="948a8-143">Animated clip rectangle</span></span>

<span data-ttu-id="948a8-144">Vous pouvez animer un rectangle de découpage en appliquant des objets d’animation aux propriétés gauche, haut, droite et inférieure d’un objet clip.</span><span class="sxs-lookup"><span data-stu-id="948a8-144">You can animate a clip rectangle by applying animation objects to the Left, Top, Right, and Bottom properties of a clip object.</span></span> <span data-ttu-id="948a8-145">Utilisez la méthode surchargée [**IDCompositionVisual :: SetClip (IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) pour appliquer le rectangle de découpage animé à la propriété clip d’un élément visuel.</span><span class="sxs-lookup"><span data-stu-id="948a8-145">Use the [**IDCompositionVisual::SetClip(IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) overloaded method to apply the animated clip rectangle to the Clip property of a visual.</span></span>

<span data-ttu-id="948a8-146">Pour plus d’informations sur les objets d’animation, consultez [animation](animation.md).</span><span class="sxs-lookup"><span data-stu-id="948a8-146">For more information about animation objects, see [Animation](animation.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="948a8-147">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="948a8-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="948a8-148">Concepts DirectComposition</span><span class="sxs-lookup"><span data-stu-id="948a8-148">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> <dt>

[<span data-ttu-id="948a8-149">Comment découper un objet Rectangle</span><span class="sxs-lookup"><span data-stu-id="948a8-149">How to Clip with a Rectangle Clip Object</span></span>](how-to--set-the-clip-rectangle-for-a-visual.md)
</dt> </dl>

 

 
