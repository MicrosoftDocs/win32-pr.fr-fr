---
title: Animation (DirectComposition)
description: Cette rubrique décrit les principes fondamentaux de l’animation Microsoft DirectComposition.
ms.assetid: 65DA3971-97C0-4B59-BC67-287AAEAAE340
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f7462a10fd83b45c1b90450fdde806ef306a2f6
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/10/2020
ms.locfileid: "106511726"
---
# <a name="animation-directcomposition"></a><span data-ttu-id="0ae41-103">Animation (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="0ae41-103">Animation (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="0ae41-104">Pour les applications sur Windows 10, nous vous recommandons d’utiliser des API Windows. UI. composition au lieu de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="0ae41-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="0ae41-105">Pour plus d’informations, consultez [moderniser votre application de bureau à l’aide de la couche visuelle](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="0ae41-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="0ae41-106">Cette rubrique décrit les principes fondamentaux de l’animation Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="0ae41-106">This topic discusses the basics of Microsoft DirectComposition animation.</span></span> <span data-ttu-id="0ae41-107">Elle contient les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="0ae41-107">It contains the following topics:</span></span>

-   [<span data-ttu-id="0ae41-108">Qu’est-ce qu’une animation ?</span><span class="sxs-lookup"><span data-stu-id="0ae41-108">What is an animation?</span></span>](#what-is-an-animation)
-   [<span data-ttu-id="0ae41-109">Propriétés qui peuvent être animées</span><span class="sxs-lookup"><span data-stu-id="0ae41-109">Properties that can be animated</span></span>](#properties-that-can-be-animated)
-   [<span data-ttu-id="0ae41-110">Fonctions d’animation</span><span class="sxs-lookup"><span data-stu-id="0ae41-110">Animation functions</span></span>](#animation-functions)
-   [<span data-ttu-id="0ae41-111">Segments d’animation</span><span class="sxs-lookup"><span data-stu-id="0ae41-111">Animation segments</span></span>](#animation-segments)
    -   [<span data-ttu-id="0ae41-112">Segment cubique</span><span class="sxs-lookup"><span data-stu-id="0ae41-112">Cubic segment</span></span>](#cubic-segment)
    -   [<span data-ttu-id="0ae41-113">Segment sinusoïdal</span><span class="sxs-lookup"><span data-stu-id="0ae41-113">Sinusoidal segment</span></span>](#sinusoidal-segment)
    -   [<span data-ttu-id="0ae41-114">Répéter le segment</span><span class="sxs-lookup"><span data-stu-id="0ae41-114">Repeat segment</span></span>](#repeat-segment)
    -   [<span data-ttu-id="0ae41-115">Segment de fin</span><span class="sxs-lookup"><span data-stu-id="0ae41-115">End segment</span></span>](#end-segment)
-   [<span data-ttu-id="0ae41-116">Compatibilité avec le gestionnaire d’animations Windows</span><span class="sxs-lookup"><span data-stu-id="0ae41-116">Compatibility with Windows Animation Manager</span></span>](#compatibility-with-windows-animation-manager)
-   [<span data-ttu-id="0ae41-117">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0ae41-117">Related topics</span></span>](#related-topics)

## <a name="what-is-an-animation"></a><span data-ttu-id="0ae41-118">Qu’est-ce qu’une animation ?</span><span class="sxs-lookup"><span data-stu-id="0ae41-118">What is an animation?</span></span>

<span data-ttu-id="0ae41-119">L' *animation* est une illusion optique créée en apportant rapidement des modifications incrémentielles à un visuel pendant une période de temps, tout en redessinant le visuel après chaque modification.</span><span class="sxs-lookup"><span data-stu-id="0ae41-119">*Animation* is an optical illusion created by quickly making incremental changes to a visual over a period of time while redrawing the visual after each change is made.</span></span> <span data-ttu-id="0ae41-120">Étant donné que les redessins se produisent rapidement, le cerveau perçoit les modifications incrémentielles sous la forme d’une seule scène changeante, tout comme dans un film ou une vidéo d’action en direct.</span><span class="sxs-lookup"><span data-stu-id="0ae41-120">Because the redraws occur quickly, the brain perceives the incremental changes as a single changing scene, just as in a movie or video of live action.</span></span>

<span data-ttu-id="0ae41-121">Le tableau suivant décrit quelques-unes des façons classiques d’utiliser l’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-121">The following table describes some of the typical ways of using animation.</span></span>

| <span data-ttu-id="0ae41-122">Animation</span><span class="sxs-lookup"><span data-stu-id="0ae41-122">Animation</span></span>                 | <span data-ttu-id="0ae41-123">Description</span><span class="sxs-lookup"><span data-stu-id="0ae41-123">Description</span></span>                                                                                                                                                                                                                                          |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0ae41-124">Défilement</span><span class="sxs-lookup"><span data-stu-id="0ae41-124">Scrolling</span></span>                 | <span data-ttu-id="0ae41-125">Utilisez l’animation pour ajouter des fonctionnalités telles que le dynamisme d’émulation physique à un contrôle de liste de défilement.</span><span class="sxs-lookup"><span data-stu-id="0ae41-125">Use animation to add features like physics-emulating momentum to a scrolling list control.</span></span>                                                                                                                                                           |
| <span data-ttu-id="0ae41-126">Transitions de scènes</span><span class="sxs-lookup"><span data-stu-id="0ae41-126">Scene transitions</span></span>         | <span data-ttu-id="0ae41-127">Utilisez l’animation pour créer des transitions de scène de navigation qui assurent la continuité entre les tâches d’un Workflow.</span><span class="sxs-lookup"><span data-stu-id="0ae41-127">Use animation to create navigational scene transitions that provide continuity between tasks in a workflow.</span></span> <span data-ttu-id="0ae41-128">Les transitions de scène de navigation fournissent un contexte qui montre à l’utilisateur où ils se trouvent, où ils se trouvent et où ils doivent aller à la suite.</span><span class="sxs-lookup"><span data-stu-id="0ae41-128">Navigational scene transitions provide context that shows the user where they have been, where they are, and where they need to go next.</span></span> |
| <span data-ttu-id="0ae41-129">Interactions entre les fenêtres</span><span class="sxs-lookup"><span data-stu-id="0ae41-129">Cross-window interactions</span></span> | <span data-ttu-id="0ae41-130">Animez des éléments d’interface utilisateur d’applications différentes d’une manière qui donne la perception d’une continuité transparente entre elles pour aider l’utilisateur à effectuer des tâches qui impliquent le basculement d’une application à une autre.</span><span class="sxs-lookup"><span data-stu-id="0ae41-130">Animate UI elements of different applications in a way that gives the perception of seamless continuity between them to help the user complete tasks that involve switching from one application to another.</span></span>                                         |



 

## <a name="properties-that-can-be-animated"></a><span data-ttu-id="0ae41-131">Propriétés qui peuvent être animées</span><span class="sxs-lookup"><span data-stu-id="0ae41-131">Properties that can be animated</span></span>

<span data-ttu-id="0ae41-132">Dans DirectComposition, vous animez un visuel en appliquant une animation à des propriétés individuelles des objets qui définissent l’objet visuel.</span><span class="sxs-lookup"><span data-stu-id="0ae41-132">In DirectComposition, you animate a visual by applying animation to individual properties of the objects that define the visual.</span></span> <span data-ttu-id="0ae41-133">Par exemple, si vous souhaitez déplacer un visuel horizontalement sur l’écran, vous devez appliquer une animation à la propriété OffsetX de l’visuel.</span><span class="sxs-lookup"><span data-stu-id="0ae41-133">For example, if you want to move a visual horizontally across the screen, you would apply animation to the OffsetX property of the visual.</span></span> <span data-ttu-id="0ae41-134">De même, si vous souhaitez effectuer une rotation 2D animée simple d’un visuel, vous devez appliquer une animation à la propriété angle d’un objet de transformation 2D, puis appliquer l’objet de transformation 2D à la propriété transformer du visuel.</span><span class="sxs-lookup"><span data-stu-id="0ae41-134">Similarly, if you wanted to do a simple animated 2D rotation of a visual, you would apply animation to the Angle property of a 2D transform object, and then apply the 2D transform object to the Transform property of the visual.</span></span>

<span data-ttu-id="0ae41-135">DirectComposition vous permet d’appliquer une animation à toute propriété d’objet qui prend une valeur scalaire.</span><span class="sxs-lookup"><span data-stu-id="0ae41-135">DirectComposition enables you to apply animation to any object property that takes a scalar value.</span></span> <span data-ttu-id="0ae41-136">Vous pouvez appliquer des animations simultanées à plusieurs propriétés et à plusieurs objets.</span><span class="sxs-lookup"><span data-stu-id="0ae41-136">You can apply simultaneous animations to multiple properties and multiple objects.</span></span>

<span data-ttu-id="0ae41-137">DirectComposition exécute les animations sur un thread séparé.</span><span class="sxs-lookup"><span data-stu-id="0ae41-137">DirectComposition runs animations on a separate thread.</span></span> <span data-ttu-id="0ae41-138">Vous pouvez démarrer une animation ou un ensemble d’animations, puis effectuer d’autres tâches sur vos threads d’application, ou même placer les threads en mode veille, tandis que le moteur de composition exécute les animations à la fréquence d’images appropriée.</span><span class="sxs-lookup"><span data-stu-id="0ae41-138">You can start an animation or set of animations and then do other work on your application threads, or even put threads to sleep, while the composition engine runs the animations at the appropriate frame rate.</span></span>

## <a name="animation-functions"></a><span data-ttu-id="0ae41-139">Fonctions d’animation</span><span class="sxs-lookup"><span data-stu-id="0ae41-139">Animation functions</span></span>

<span data-ttu-id="0ae41-140">DirectComposition anime une propriété d’objet en fonction d’une fonction d’animation que vous définissez.</span><span class="sxs-lookup"><span data-stu-id="0ae41-140">DirectComposition animates an object property based on an animation function that you define.</span></span> <span data-ttu-id="0ae41-141">Une *fonction d’animation* est une construction qui spécifie le mode de modification de la valeur d’une propriété d’objet sur une période donnée.</span><span class="sxs-lookup"><span data-stu-id="0ae41-141">An *animation function* is a construct that specifies how the value of an object property changes over a period of time.</span></span> <span data-ttu-id="0ae41-142">Par exemple, vous pouvez définir une fonction d’animation qui modifie la valeur d’une propriété de 1 à 360 au cours de 4 secondes.</span><span class="sxs-lookup"><span data-stu-id="0ae41-142">For example, you could define an animation function that changes the value of a property from 1 to 360 over the course of 4 seconds.</span></span> <span data-ttu-id="0ae41-143">Ensuite, si vous appliquez la fonction d’animation à la propriété angle d’un objet de transformation de rotation 2D, puis appliquez l’objet de transformation à la propriété de transformation d’un visuel, la fonction d’animation fait pivoter l’objet visuel dans un cercle entier pendant 4 secondes.</span><span class="sxs-lookup"><span data-stu-id="0ae41-143">Then, if you apply the animation function to the Angle property of a 2D rotate transform object, and then apply the transform object to the Transform property of a visual, the animation function would rotate the visual in a full circle over the course of 4 seconds.</span></span>

<span data-ttu-id="0ae41-144">Une fonction d’animation est représentée par un *objet d’animation* créé par un appel à la méthode [**IDCompositionDevice :: CreateAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) .</span><span class="sxs-lookup"><span data-stu-id="0ae41-144">An animation function is represented by an *animation object* created by a call to the [**IDCompositionDevice::CreateAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) method.</span></span> <span data-ttu-id="0ae41-145">Vous créez une fonction d’animation à l’aide des méthodes de l’interface [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) d’un objet d’animation pour ajouter des *segments d’animation*, un à la fois, au tableau qui définit la fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-145">You create an animation function by using the methods of an animation object's [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) interface to append *animation segments*, one at a time, to the array that defines the animation function.</span></span> <span data-ttu-id="0ae41-146">Lorsque vous ajoutez un segment, vous spécifiez un décalage de base zéro qui marque l’heure de début du segment, par rapport au début de la fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-146">When appending a segment, you specify a zero-based offset that marks the begin time of the segment, relative to the beginning of the animation function.</span></span> <span data-ttu-id="0ae41-147">Les segments d’animation doivent être ajoutés dans l’ordre de plus en plus élevé des heures de début.</span><span class="sxs-lookup"><span data-stu-id="0ae41-147">Animation segments must be appended in increasing order of begin times.</span></span> <span data-ttu-id="0ae41-148">Toute tentative d’ajout d’un segment d’animation dont l’heure de début est antérieure ou égale à un segment précédent échoue.</span><span class="sxs-lookup"><span data-stu-id="0ae41-148">Attempting to append an animation segment whose begin time is before or equal to a preceding segment will fail.</span></span> <span data-ttu-id="0ae41-149">Une fonction d’animation peut avoir une heure de fin spécifiée, indiquant à quel moment la fonction doit se terminer.</span><span class="sxs-lookup"><span data-stu-id="0ae41-149">An animation function can have a specified end time, indicating when the function should conclude.</span></span>

<span data-ttu-id="0ae41-150">Sauf spécification contraire, une fonction d’animation démarre lorsque le Gestionnaire de fenêtrage (DWM) reçoit la commande pour exécuter l’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-150">Unless otherwise specified, an animation function starts when the Desktop Window Manager (DWM) receives the command to execute the animation.</span></span> <span data-ttu-id="0ae41-151">Chaque segment s’exécute jusqu’à ce que l’heure de début du segment suivant soit atteinte.</span><span class="sxs-lookup"><span data-stu-id="0ae41-151">Each segment runs until the begin time of the next segment is reached.</span></span> <span data-ttu-id="0ae41-152">Toutes les modifications discontinues qui se produisent dans la valeur de la propriété animée entre les segments sont considérées comme des modifications discrètes.</span><span class="sxs-lookup"><span data-stu-id="0ae41-152">Any discontinuous changes that occur in the animated property value between segments are considered to be discrete changes.</span></span>

<span data-ttu-id="0ae41-153">Vous appliquez une fonction d’animation à une propriété en affectant à la valeur de propriété le pointeur [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) de l’objet d’animation qui représente la fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-153">You apply an animation function to a property by setting the property value to the [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) pointer of the animation object that represents the animation function.</span></span> <span data-ttu-id="0ae41-154">Le même objet d’animation peut être appliqué à plusieurs propriétés du même objet, ainsi qu’aux propriétés d’autres objets créés par le même appareil.</span><span class="sxs-lookup"><span data-stu-id="0ae41-154">The same animation object can be applied to multiple properties of the same object, as well as to the properties of other objects created by the same device.</span></span>

## <a name="animation-segments"></a><span data-ttu-id="0ae41-155">Segments d’animation</span><span class="sxs-lookup"><span data-stu-id="0ae41-155">Animation segments</span></span>

<span data-ttu-id="0ae41-156">Les segments d’animation sont les définitions de minuterie fondamentales d’une fonction d’animation. Il s’agit des primitives à partir desquelles les fonctions d’animation plus complexes et de niveau supérieur sont générées.</span><span class="sxs-lookup"><span data-stu-id="0ae41-156">Animation segments are the fundamental timing definitions of an animation function; they are the primitives from which more complex and higher level animation functions are built.</span></span> <span data-ttu-id="0ae41-157">Un segment d’animation est construit à partir d’une série de paramètres qui décrivent la fonction et l’heure à laquelle le segment commence, par rapport au début de la fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-157">An animation segment is constructed from a series of parameters that describe the function and the time when the segment begins, relative to the beginning of the animation function.</span></span> <span data-ttu-id="0ae41-158">Pour chaque segment, le temps (*t*) progresse le long de l’axe horizontal et commence à *t* = 0.</span><span class="sxs-lookup"><span data-stu-id="0ae41-158">For every segment, time (*t*) progresses along the horizontal axis and begins at *t* = 0.</span></span>

### <a name="cubic-segment"></a><span data-ttu-id="0ae41-159">Segment cubique</span><span class="sxs-lookup"><span data-stu-id="0ae41-159">Cubic segment</span></span>

<span data-ttu-id="0ae41-160">La synchronisation d’un segment cubique est définie par un polynôme cubique.</span><span class="sxs-lookup"><span data-stu-id="0ae41-160">The timing of a cubic segment is defined by a cubic polynomial.</span></span> <span data-ttu-id="0ae41-161">Pour une entrée de temps donnée (*t*), la valeur de sortie est donnée par l’équation suivante :</span><span class="sxs-lookup"><span data-stu-id="0ae41-161">For a given time input (*t*), the output value is given by the following equation:</span></span>

<span data-ttu-id="0ae41-162">*x*(*t*) = *à*³ + *BT*² + *CT*  +  *d*</span><span class="sxs-lookup"><span data-stu-id="0ae41-162">*x*(*t*) = *at*³ + *bt*² + *ct* + *d*</span></span>

<span data-ttu-id="0ae41-163">Le diagramme suivant montre une fonction d’animation qui contient deux segments cubiques.</span><span class="sxs-lookup"><span data-stu-id="0ae41-163">The following diagram shows an animation function that contains of two cubic segments.</span></span> <span data-ttu-id="0ae41-164">Le premier segment passe d’une valeur comprise entre 0 et 16 sur 4 secondes, et la seconde modifie la valeur de façon linéaire de 16 à 0 au cours des 4 secondes suivantes.</span><span class="sxs-lookup"><span data-stu-id="0ae41-164">The first segment transitions a value from 0 to 16 over 4 seconds, and the second changes the value linearly from 16 to 0 over the next 4 seconds.</span></span> <span data-ttu-id="0ae41-165">La première transition se produit le long de ce polynôme cubique :</span><span class="sxs-lookup"><span data-stu-id="0ae41-165">The first transition occurs along this cubic polynomial:</span></span>

<span data-ttu-id="0ae41-166">*x*(*t*) = *t*³-6 *t*² + 12 *t*</span><span class="sxs-lookup"><span data-stu-id="0ae41-166">*x*(*t*) = *t*³ - 6 *t*² + 12 *t*</span></span>

<span data-ttu-id="0ae41-167">et la deuxième transition se produit le long de celle-ci :</span><span class="sxs-lookup"><span data-stu-id="0ae41-167">and the second transition occurs along this one:</span></span>

<span data-ttu-id="0ae41-168">*x*(*t*) =-4 *t* + 16</span><span class="sxs-lookup"><span data-stu-id="0ae41-168">*x*(*t*) = - 4 *t* + 16</span></span>

![diagramme d’une fonction d’animation avec deux segments cubiques](images/cubicsegment.png)

<span data-ttu-id="0ae41-170">Vous ajoutez un segment cubique à une fonction d’animation à l’aide de la méthode [**IDCompositionAnimation :: AddCubic**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) .</span><span class="sxs-lookup"><span data-stu-id="0ae41-170">You add a cubic segment to an animation function by using the [**IDCompositionAnimation::AddCubic**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) method.</span></span>

### <a name="sinusoidal-segment"></a><span data-ttu-id="0ae41-171">Segment sinusoïdal</span><span class="sxs-lookup"><span data-stu-id="0ae41-171">Sinusoidal segment</span></span>

<span data-ttu-id="0ae41-172">La synchronisation d’un segment sinusoïdal est définie par l’équation suivante :</span><span class="sxs-lookup"><span data-stu-id="0ae41-172">The timing of a sinusoidal segment is defined by the following equation:</span></span>

<span data-ttu-id="0ae41-173">*x*(*t*) = *écart*  +  *amplitude* \* Sin (*t* \* *Frequency* \* 2 \* pi + *phase* \* PI/180.0)</span><span class="sxs-lookup"><span data-stu-id="0ae41-173">*x*(*t*) = *Bias* + *Amplitude* \* sin(*t*\**Frequency*\*2\*PI + *Phase*\*PI/180.0)</span></span>

<span data-ttu-id="0ae41-174">Vous ajoutez un segment sinusoïdal à une fonction d’animation à l’aide de la méthode [**IDCompositionAnimation :: AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) .</span><span class="sxs-lookup"><span data-stu-id="0ae41-174">You add a sinusoidal segment to an animation function by using the [**IDCompositionAnimation::AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) method.</span></span>

### <a name="repeat-segment"></a><span data-ttu-id="0ae41-175">Répéter le segment</span><span class="sxs-lookup"><span data-stu-id="0ae41-175">Repeat segment</span></span>

<span data-ttu-id="0ae41-176">Un segment repeat répète une partie précédente spécifiée d’une fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-176">A repeat segment repeats a specified preceding portion of an animation function.</span></span> <span data-ttu-id="0ae41-177">Un segment REPEAT fait en sorte que la partie spécifiée de la fonction d’animation boucle indéfiniment jusqu’à ce que le segment suivant soit rencontré ou que la terminaison spécifiée de l’animation soit atteinte.</span><span class="sxs-lookup"><span data-stu-id="0ae41-177">A repeat segment causes the specified portion of the animation function to loop indefinitely until the next segment is encountered or the specified end of the animation is reached.</span></span> <span data-ttu-id="0ae41-178">La partie précédente d’une animation est constituée d’autres segments, y compris d’autres segments de répétition.</span><span class="sxs-lookup"><span data-stu-id="0ae41-178">The preceding portion of an animation is made of other segments, including other repeat segments.</span></span> <span data-ttu-id="0ae41-179">Un segment REPEAT ne peut pas être utilisé en tant que premier segment dans une fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-179">A repeat segment cannot be used as the first segment in an animation function.</span></span>

<span data-ttu-id="0ae41-180">Le diagramme suivant montre une fonction d’animation qui comprend deux segments cubiques d’une durée de 4 secondes chacune, suivis d’un segment de répétition qui dure 12 secondes.</span><span class="sxs-lookup"><span data-stu-id="0ae41-180">The following diagram shows an animation function that consists two cubic segments of 4 seconds duration each, followed by a repeat segment that lasts 12 seconds.</span></span> <span data-ttu-id="0ae41-181">Le segment REPEAT commence 8 secondes dans l’animation et répète les 6 secondes précédentes de l’animation deux fois jusqu’à ce que le segment de fin soit atteint à 20 secondes.</span><span class="sxs-lookup"><span data-stu-id="0ae41-181">The repeat segment begins 8 seconds into the animation and repeats the previous 6 seconds of the animation two times until the end segment is reached at 20 seconds.</span></span>

![diagramme d’une fonction d’animation qui contient deux segments cubiques et un segment de répétition](images/repeatsegment.png)

<span data-ttu-id="0ae41-183">Pour ajouter un segment REPEAT à une fonction d’animation, utilisez la méthode [**IDCompositionAnimation :: AddRepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) .</span><span class="sxs-lookup"><span data-stu-id="0ae41-183">To add a repeat segment to an animation function, use the [**IDCompositionAnimation::AddRepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) method.</span></span>

### <a name="end-segment"></a><span data-ttu-id="0ae41-184">Segment de fin</span><span class="sxs-lookup"><span data-stu-id="0ae41-184">End segment</span></span>

<span data-ttu-id="0ae41-185">Après avoir construit une fonction d’animation à partir de segments, vous pouvez ajouter un segment de fin pour faire en sorte que la fonction d’animation se termine à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="0ae41-185">After constructing an animation function from segments, you can append an end segment to cause the animation function to end at a particular time.</span></span> <span data-ttu-id="0ae41-186">Si vous n’ajoutez pas de segment de fin, le dernier segment de la fonction d’animation s’exécute indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="0ae41-186">If you do not append an end segment, the final segment of the animation function runs indefinitely.</span></span>

<span data-ttu-id="0ae41-187">Vous ajoutez un segment de fin en appelant la méthode [**IDCompositionAnimation :: end**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) , en spécifiant un offset à partir du début de la fonction d’animation qui indique le point de terminaison de la fonction.</span><span class="sxs-lookup"><span data-stu-id="0ae41-187">You append an end segment by calling the [**IDCompositionAnimation::End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) method, specifying an offset from the beginning of the animation function which indicates the function's end point.</span></span> <span data-ttu-id="0ae41-188">Le décalage doit être supérieur au décalage de début du segment précédent.</span><span class="sxs-lookup"><span data-stu-id="0ae41-188">The offset must be greater than the beginning offset of the preceding segment.</span></span> <span data-ttu-id="0ae41-189">En outre, un segment de fin ne peut pas être utilisé comme première primitive dans une fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-189">Also, an end segment cannot be used as the first primitive in an animation function.</span></span>

<span data-ttu-id="0ae41-190">Lorsque vous appelez [**end**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), vous spécifiez également une valeur finale pour la propriété animée.</span><span class="sxs-lookup"><span data-stu-id="0ae41-190">When you call [**End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), you also specify a final value for the property being animated.</span></span> <span data-ttu-id="0ae41-191">La propriété est définie sur la valeur finale spécifiée au moment où le point de terminaison de la fonction d’animation est atteint.</span><span class="sxs-lookup"><span data-stu-id="0ae41-191">The property is set to the specified final value at the moment when the end point of the animation function is reached.</span></span>

<span data-ttu-id="0ae41-192">Après avoir ajouté un segment de fin, vous ne pouvez pas ajouter d’autres segments à la fonction d’animation.</span><span class="sxs-lookup"><span data-stu-id="0ae41-192">After appending an end segment, you cannot append any other segments to the animation function.</span></span> <span data-ttu-id="0ae41-193">Autrement dit, tous les appels de méthode sur l’objet d’animation échouent sauf [**IDCompositionAnimation :: Reset**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span><span class="sxs-lookup"><span data-stu-id="0ae41-193">That is, all method calls on the animation object fail except [**IDCompositionAnimation::Reset**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span></span> <span data-ttu-id="0ae41-194">L’appel de **Reset** retourne l’objet d’animation à l’État Clean dans lequel la fonction d’animation ne contient aucun segment. à partir de là, vous pouvez ajouter de nouveau des segments.</span><span class="sxs-lookup"><span data-stu-id="0ae41-194">Calling **Reset** returns the animation object to clean state in which the animation function contains no segments, at which point you can once again add segments.</span></span>

## <a name="compatibility-with-windows-animation-manager"></a><span data-ttu-id="0ae41-195">Compatibilité avec le gestionnaire d’animations Windows</span><span class="sxs-lookup"><span data-stu-id="0ae41-195">Compatibility with Windows Animation Manager</span></span>

<span data-ttu-id="0ae41-196">Windows animation Manager (animation Windows) génère des primitives d’animation dans un format compatible avec l’API DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="0ae41-196">Windows Animation Manager (Windows Animation) outputs animation primitives in a format that is compatible with the DirectComposition API.</span></span> <span data-ttu-id="0ae41-197">Cela signifie que DirectComposition peut créer des animations basées sur les primitives d’animation créées par l’animation Windows.</span><span class="sxs-lookup"><span data-stu-id="0ae41-197">This means that DirectComposition can create animations based on animation primitives created by Windows Animation.</span></span>

<span data-ttu-id="0ae41-198">Pour plus d’informations, consultez [Windows animation Manager](/windows/desktop/UIAnimation/-main-portal), la méthode [**IUIAnimationVariable2 :: GetCurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) et [Managing DirectComposition animation with Windows animation Manager v2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span><span class="sxs-lookup"><span data-stu-id="0ae41-198">For more information, see [Windows Animation Manager](/windows/desktop/UIAnimation/-main-portal), the [**IUIAnimationVariable2::GetCurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) method, and [Managing DirectComposition Animation with Windows Animation Manager v2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span></span>

## <a name="related-topics"></a><span data-ttu-id="0ae41-199">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0ae41-199">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0ae41-200">Concepts DirectComposition</span><span class="sxs-lookup"><span data-stu-id="0ae41-200">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 
