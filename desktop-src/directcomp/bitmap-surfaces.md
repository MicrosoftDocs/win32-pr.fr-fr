---
title: Objets bitmap
description: Cette rubrique décrit les types de contenu de bitmap que DirectComposition prend en charge.
ms.assetid: BC32CF76-D5E4-4B25-AFD5-42E8DABFA0D0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c390778fef1ee7ad96c90a8b7706fa635f3615ff
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104382723"
---
# <a name="bitmap-objects"></a><span data-ttu-id="354ca-103">Objets bitmap</span><span class="sxs-lookup"><span data-stu-id="354ca-103">Bitmap objects</span></span>

> [!NOTE]
> <span data-ttu-id="354ca-104">Pour les applications sur Windows 10, nous vous recommandons d’utiliser des API Windows. UI. composition au lieu de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="354ca-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="354ca-105">Pour plus d’informations, consultez [moderniser votre application de bureau à l’aide de la couche visuelle](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="354ca-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="354ca-106">Microsoft DirectComposition est un moteur de composition d’images bitmap.</span><span class="sxs-lookup"><span data-stu-id="354ca-106">Microsoft DirectComposition is a bitmap compositing engine.</span></span> <span data-ttu-id="354ca-107">Elle permet aux développeurs d’applications de combiner plusieurs bitmaps et de les manipuler de différentes façons pour obtenir des effets visuels et des animations intéressants dans une interface utilisateur d’application.</span><span class="sxs-lookup"><span data-stu-id="354ca-107">It enables application developers to combine multiple bitmaps and manipulate them in various ways to achieve interesting visual effects and animations in an application UI.</span></span> <span data-ttu-id="354ca-108">Cette rubrique décrit les types de contenu de bitmap que DirectComposition prend en charge.</span><span class="sxs-lookup"><span data-stu-id="354ca-108">This topic describes the types of bitmap content that DirectComposition supports.</span></span>

-   [<span data-ttu-id="354ca-109">Contenu de la bitmap</span><span class="sxs-lookup"><span data-stu-id="354ca-109">Bitmap content</span></span>](#bitmap-content)
    -   [<span data-ttu-id="354ca-110">Bitmaps de mémoire vidéo</span><span class="sxs-lookup"><span data-stu-id="354ca-110">Video memory bitmaps</span></span>](#video-memory-bitmaps)
    -   [<span data-ttu-id="354ca-111">Bitmaps de fenêtre</span><span class="sxs-lookup"><span data-stu-id="354ca-111">Window bitmaps</span></span>](#window-bitmaps)
    -   [<span data-ttu-id="354ca-112">Association d’un contenu bitmap à un visuel</span><span class="sxs-lookup"><span data-stu-id="354ca-112">Associating bitmap content with a visual</span></span>](#associating-bitmap-content-with-a-visual)
    -   [<span data-ttu-id="354ca-113">Canal alpha</span><span class="sxs-lookup"><span data-stu-id="354ca-113">Alpha channel</span></span>](#alpha-channel)
-   [<span data-ttu-id="354ca-114">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="354ca-114">Related topics</span></span>](#related-topics)

## <a name="bitmap-content"></a><span data-ttu-id="354ca-115">Contenu de la bitmap</span><span class="sxs-lookup"><span data-stu-id="354ca-115">Bitmap content</span></span>

<span data-ttu-id="354ca-116">Les applications fournissent à DirectComposition le contenu de la bitmap à composer et à animer en créant des objets visuels, puis en définissant la [propriété de contenu](basic-concepts.md) de ces objets.</span><span class="sxs-lookup"><span data-stu-id="354ca-116">Applications provide DirectComposition with the bitmap content to compose and animate by creating visual objects and then setting the [Content property](basic-concepts.md) of those objects.</span></span> <span data-ttu-id="354ca-117">DirectComposition n’offre aucun service de pixellisation.</span><span class="sxs-lookup"><span data-stu-id="354ca-117">DirectComposition does not offer any rasterization services.</span></span> <span data-ttu-id="354ca-118">Une application doit utiliser d’autres bibliothèques logicielles ou de pixellisation avec accélération matérielle, telles que [Direct2D](../direct2d/direct2d-portal.md) ou [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) , pour remplir les bitmaps à composer.</span><span class="sxs-lookup"><span data-stu-id="354ca-118">An application must use some other software-based or hardware-accelerated rasterization library such as [Direct2D](../direct2d/direct2d-portal.md) or [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) to populate the bitmaps that are to be composed.</span></span> <span data-ttu-id="354ca-119">Après la composition, DirectComposition passe le contenu de la bitmap composée à [Gestionnaire de fenêtrage (DWM)](/windows/desktop/dwm/dwm-overview) pour le rendu à l’écran.</span><span class="sxs-lookup"><span data-stu-id="354ca-119">After composing, DirectComposition passes composed bitmap content to [Desktop Window Manager (DWM)](/windows/desktop/dwm/dwm-overview) for rendering to the screen.</span></span>

<span data-ttu-id="354ca-120">**Types de contenu**   de bitmap pris en charge Microsoft DirectComposition prend en charge les types de bitmaps suivants :</span><span class="sxs-lookup"><span data-stu-id="354ca-120">**Supported types of bitmap content** Microsoft DirectComposition supports the following kinds of bitmaps:</span></span>

-   [<span data-ttu-id="354ca-121">Bitmaps de mémoire vidéo</span><span class="sxs-lookup"><span data-stu-id="354ca-121">Video memory bitmaps</span></span>](#video-memory-bitmaps)
-   [<span data-ttu-id="354ca-122">Bitmaps de fenêtre</span><span class="sxs-lookup"><span data-stu-id="354ca-122">Window bitmaps</span></span>](#window-bitmaps)

### <a name="video-memory-bitmaps"></a><span data-ttu-id="354ca-123">Bitmaps de mémoire vidéo</span><span class="sxs-lookup"><span data-stu-id="354ca-123">Video memory bitmaps</span></span>

<span data-ttu-id="354ca-124">Une image bitmap de mémoire vidéo est pixellisée dans le matériel à l’aide des méthodes Microsoft DirectX (y compris le modèle d’interopérabilité DX vers GDI).</span><span class="sxs-lookup"><span data-stu-id="354ca-124">A video memory bitmap is rasterized in hardware by using Microsoft DirectX methods (including the DX-to-GDI interop model).</span></span> <span data-ttu-id="354ca-125">Il est associé à des surfaces partagées interprocessus qui sont visibles par l’application appelante et à DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="354ca-125">It is backed by cross-process shared surfaces that are visible to the calling application and to DirectComposition.</span></span> <span data-ttu-id="354ca-126">Une image bitmap de mémoire vidéo n’est pas sujette à rupture car l’application ne peut lire que les surfaces à partir desquelles DirectComposition les textures.</span><span class="sxs-lookup"><span data-stu-id="354ca-126">A video memory bitmap is not subject to tearing because the application can only read from the surfaces that DirectComposition textures from.</span></span>

### <a name="video-content"></a><span data-ttu-id="354ca-127">Contenu vidéo</span><span class="sxs-lookup"><span data-stu-id="354ca-127">Video content</span></span>

<span data-ttu-id="354ca-128">Les applications peuvent utiliser DirectComposition pour composer des images vidéo qui utilisent des chaînes de permutation sans fenêtre DirectX qui sont liées à une surface DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="354ca-128">Applications can use DirectComposition to compose video frames that use DirectX windowless swap chains that are bound to a DirectComposition surface.</span></span> <span data-ttu-id="354ca-129">D’un point de vue conceptuel, DirectComposition traite le contenu vidéo comme une séquence de bitmaps.</span><span class="sxs-lookup"><span data-stu-id="354ca-129">Conceptually, DirectComposition treats video content as a sequence of bitmaps.</span></span> <span data-ttu-id="354ca-130">DirectComposition ne permet pas de présenter des images vidéo.</span><span class="sxs-lookup"><span data-stu-id="354ca-130">DirectComposition does not provide a means of presenting video frames.</span></span>

<span data-ttu-id="354ca-131">DirectComposition prend en charge les chaînes d’échange sans fenêtre DirectX, c’est-à-dire les chaînes de permutation qui ne sont pas liées à une fenêtre particulière, et permet à deux applications différentes de partager des chaînes d’échange sans fenêtre à travers les limites du processus.</span><span class="sxs-lookup"><span data-stu-id="354ca-131">DirectComposition supports DirectX windowless swap chains—that is, swap chains that are not bound to a particular window—and enables two different applications to share windowless swap chains across process boundaries.</span></span> <span data-ttu-id="354ca-132">Le partage de chaînes d’échange sans fenêtre permet aux scénarios vidéo où la chaîne de permutation est créée dans un processus et est utilisée avec DirectComposition dans un deuxième processus.</span><span class="sxs-lookup"><span data-stu-id="354ca-132">Sharing windowless swap chains enables video scenarios where the swap chain is created in one process and is used with DirectComposition in a second process.</span></span> <span data-ttu-id="354ca-133">Les chaînes d’échange sans fenêtre sont créées à l’aide de la méthode [**IDXGIFactory2 :: CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) .</span><span class="sxs-lookup"><span data-stu-id="354ca-133">Windowless swap chains are created using the [**IDXGIFactory2::CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) method.</span></span>

<span data-ttu-id="354ca-134">Pour plus d’informations sur les chaînes de permutation DirectX, consultez [vue d’ensemble de dxgi](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="354ca-134">For more information about DirectX swap chains, see [DXGI Overview](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

### <a name="stereo-content"></a><span data-ttu-id="354ca-135">Contenu stéréo</span><span class="sxs-lookup"><span data-stu-id="354ca-135">Stereo content</span></span>

<span data-ttu-id="354ca-136">D’un point de vue conceptuel, une chaîne de permutation stéréo se compose de surfaces d’infrastructure Microsoft DirectX Graphics (DXGI) qui représentent les canaux gauche et droit du contenu stéréo 3D.</span><span class="sxs-lookup"><span data-stu-id="354ca-136">Conceptually, a stereo swap chain consists of Microsoft DirectX Graphics Infrastructure (DXGI) surfaces that represent the left and right channels for stereo 3D content.</span></span> <span data-ttu-id="354ca-137">Lorsqu’une chaîne de permutation stéréo est utilisée comme ressource bitmap pour un visuel, DirectComposition compose en stéréo.</span><span class="sxs-lookup"><span data-stu-id="354ca-137">When a stereo swap chain is used as the bitmap resource for a visual, DirectComposition composes in stereo.</span></span> <span data-ttu-id="354ca-138">Tout le contenu non stéréo (contenu mono) est considéré comme ayant le même contenu de canal de gauche et de droite. autrement dit, le même contenu de bitmap est utilisé pour les deux canaux.</span><span class="sxs-lookup"><span data-stu-id="354ca-138">All non-stereo content (mono content) is considered to have identical left and right channel content; that is, the same bitmap content is used for both channels.</span></span> <span data-ttu-id="354ca-139">DirectComposition compose tout le contenu de gauche et tout le contenu approprié séparément.</span><span class="sxs-lookup"><span data-stu-id="354ca-139">DirectComposition composes all left content and all right content separately.</span></span> <span data-ttu-id="354ca-140">Si le périphérique d’affichage ne prend pas en charge la stéréo, DirectComposition traite le canal stéréo gauche ou droit (en fonction de l’application) en tant que contenu mono et compose à l’aide de ces données uniquement pour la ressource bitmap.</span><span class="sxs-lookup"><span data-stu-id="354ca-140">If the display device is not stereo capable, DirectComposition treats the left or right stereo channel (depending on the application) as mono content and composes using only that data for the bitmap resource.</span></span>

<span data-ttu-id="354ca-141">DirectComposition ne prend pas en charge la création ou la manipulation de contenu stéréo et ne peut pas promouvoir une chaîne de permutation mono vers une paire stéréo.</span><span class="sxs-lookup"><span data-stu-id="354ca-141">DirectComposition does not support creating or manipulating stereo content, and cannot promote a mono swap chain to a stereo pair.</span></span> <span data-ttu-id="354ca-142">Une application doit effectuer ces tâches avant de présenter le contenu stéréo DirectX à DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="354ca-142">An application must perform these tasks before presenting DirectX stereo content to DirectComposition.</span></span> <span data-ttu-id="354ca-143">En outre, une application doit fournir les décalages de canal droit et gauche pour la perception de profondeur ; DirectComposition ne peut pas ajuster les décalages de canaux gauche et droit pour modifier la profondeur perçue du contenu stéréo DirectX.</span><span class="sxs-lookup"><span data-stu-id="354ca-143">Also, an application must provide the left and right channel offsets for depth perception; DirectComposition cannot adjust the left and right channel offsets to modify the perceived depth of DirectX stereo content.</span></span>

<span data-ttu-id="354ca-144">Le contenu stéréo DirectX est composé et conservé dans le DWM quand un matériel à capacité stéréo est disponible.</span><span class="sxs-lookup"><span data-stu-id="354ca-144">DirectX stereo content is composed and persisted to DWM when stereo-capable hardware is available.</span></span>

### <a name="window-bitmaps"></a><span data-ttu-id="354ca-145">Bitmaps de fenêtre</span><span class="sxs-lookup"><span data-stu-id="354ca-145">Window bitmaps</span></span>

<span data-ttu-id="354ca-146">Une « image bitmap Windows » n’est pas une image bitmap réelle, mais est un espace réservé que DirectComposition remplace en temps réel par des pixellisations de fenêtres enfants ou de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="354ca-146">A "window bitmap" is not a real bitmap, but is a placeholder that DirectComposition replaces in real time with rasterizations of layered top-level or child windows.</span></span> <span data-ttu-id="354ca-147">Une image bitmap de fenêtre est semblable à une miniature DWM, à ceci près qu’une miniature peut contenir des contributions de nombreuses fenêtres, telles que des fenêtres non enfants détenues, alors qu’une image bitmap de fenêtre DirectComposition est toujours une représentation d’une seule fenêtre et de ses enfants.</span><span class="sxs-lookup"><span data-stu-id="354ca-147">A window bitmap is similar to a DWM thumbnail, except that a thumbnail can contain contributions from many windows, such as owned non-child windows, whereas a DirectComposition window bitmap is always a representation of just one window and its children.</span></span>

<span data-ttu-id="354ca-148">Étant donné que DirectComposition a accès aux surfaces de redirection de toutes les fenêtres et à toutes les arborescences d’éléments visuels, il peut réutiliser le contenu d’une fenêtre dans plusieurs arborescences visuelles.</span><span class="sxs-lookup"><span data-stu-id="354ca-148">Because DirectComposition has access to the redirection surfaces of all windows and all visual trees, it can reuse the content from one window in multiple visual trees.</span></span> <span data-ttu-id="354ca-149">La fenêtre doit être superposée, car une fenêtre non superposée n’a pas de surface de redirection dédiée et, par conséquent, sa pixellisation n’est pas toujours disponible pour DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="354ca-149">The window must be layered because a non-layered window does not have a dedicated redirection surface and, therefore, its rasterization is not always available to DirectComposition.</span></span>

<span data-ttu-id="354ca-150">Pour utiliser une image bitmap de fenêtre, une application associe un visuel à un handle de fenêtre (HWND).</span><span class="sxs-lookup"><span data-stu-id="354ca-150">To use a window bitmap, an application associates a visual with a window handle (HWND).</span></span> <span data-ttu-id="354ca-151">Ensuite, DirectComposition re-compose le visuel chaque fois que le contenu de la fenêtre change, y compris lorsque le contenu change suite à des modifications apportées aux arborescences d’éléments visuels associées à la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="354ca-151">Afterward, DirectComposition re-composes the visual whenever the contents of the window change, including when the contents change as a result of changes to the visual trees associated with the window.</span></span> <span data-ttu-id="354ca-152">En d’autres termes, comme les miniatures DWM, les bitmaps de fenêtre DirectComposition sont « dynamiques ».</span><span class="sxs-lookup"><span data-stu-id="354ca-152">In other words, like DWM thumbnails, DirectComposition window bitmaps are "live".</span></span>

### <a name="associating-bitmap-content-with-a-visual"></a><span data-ttu-id="354ca-153">Association d’un contenu bitmap à un visuel</span><span class="sxs-lookup"><span data-stu-id="354ca-153">Associating bitmap content with a visual</span></span>

<span data-ttu-id="354ca-154">Pour les trois types de bitmaps, une application peut associer la même bitmap à plusieurs visuels, ce qui signifie qu’une allocation de mémoire unique peut être utilisée pour afficher le même contenu plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="354ca-154">For all three kinds of bitmaps, an application can associate the same bitmap with multiple visuals, which means that a single memory allocation can be used to display the same content several times.</span></span>

### <a name="alpha-channel"></a><span data-ttu-id="354ca-155">Canal alpha</span><span class="sxs-lookup"><span data-stu-id="354ca-155">Alpha channel</span></span>

<span data-ttu-id="354ca-156">Toutes les bitmaps ont un format 32 bits par pixel (BPP), qui comprend huit bits pour la transparence par pixel.</span><span class="sxs-lookup"><span data-stu-id="354ca-156">All bitmaps have a 32 bits per pixel (BPP) format, which includes eight bits for per-pixel transparency.</span></span> <span data-ttu-id="354ca-157">Toutefois, une application peut spécifier la manière dont DirectComposition doit utiliser le canal alpha.</span><span class="sxs-lookup"><span data-stu-id="354ca-157">However, an application can specify how DirectComposition should consume the alpha channel.</span></span> <span data-ttu-id="354ca-158">En particulier, DirectComposition peut respecter le canal alpha, ou il peut ignorer l’ensemble d’alpha, auquel cas la bitmap est considérée comme étant entièrement opaque.</span><span class="sxs-lookup"><span data-stu-id="354ca-158">In particular, DirectComposition can respect the alpha channel, or it can ignore alpha altogether, in which case the bitmap is considered to be fully opaque.</span></span>

<span data-ttu-id="354ca-159">Un mode Alpha supplémentaire ignore le canal alpha, mais traite les valeurs rouge, vert et bleu comme des valeurs alpha par canal au lieu de l’interprétation normale de ces canaux comme des intensités de couleur.</span><span class="sxs-lookup"><span data-stu-id="354ca-159">An additional alpha mode ignores the alpha channel, but treats the red, green, and blue values as per-channel alpha values instead of the normal interpretation of those channels as color intensities.</span></span> <span data-ttu-id="354ca-160">Ce mode est utile pour le rendu ClearType, qui nécessite des informations de couverture de sous-pixel.</span><span class="sxs-lookup"><span data-stu-id="354ca-160">This mode is useful for ClearType rendering, which requires sub-pixel coverage information.</span></span> <span data-ttu-id="354ca-161">Pour utiliser le mode Alpha par canal, une application doit d’abord utiliser [Direct2D](../direct2d/direct2d-portal.md) et [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) pour écrire des données de couverture de sous-pixel dans une image bitmap.</span><span class="sxs-lookup"><span data-stu-id="354ca-161">To use the per-channel alpha mode, an application must first use [Direct2D](../direct2d/direct2d-portal.md) and [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) to write sub-pixel coverage data to a bitmap.</span></span> <span data-ttu-id="354ca-162">Ensuite, l’application doit définir le mode Alpha correct et spécifier une couleur de texte lorsqu’elle associe l’image bitmap à un visuel.</span><span class="sxs-lookup"><span data-stu-id="354ca-162">Next the application must set the correct alpha mode and specify a text color when it associates the bitmap with a visual.</span></span> <span data-ttu-id="354ca-163">DirectComposition fusionne la couleur du texte avec les données de couverture, ce qui produit une fusion ClearType sur l’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="354ca-163">DirectComposition blends the text color with the coverage data, which produces ClearType blending against the background.</span></span>

<span data-ttu-id="354ca-164">Dans les situations où l’algorithme ClearType n’est pas applicable, par exemple si l’image bitmap n’est pas alignée sur les pixels et alignée sur l’axe, ou si elle doit être dessinée sur une surface intermédiaire, DirectComposition peut utiliser les données de couverture de sous-pixel dans le bitmap pour produire une pixellisation en nuances de gris à la place, automatiquement et sans coût supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="354ca-164">In situations where the ClearType algorithm is not applicable, such as if the bitmap is not pixel-aligned and axis-aligned, or if it needs to be drawn to an intermediate surface, DirectComposition can use the subpixel coverage data in the bitmap to produce a grayscale rasterization instead, automatically and at no additional cost.</span></span>

<span data-ttu-id="354ca-165">Pour plus d’informations, consultez la description du paramètre *alphaMode* de la fonction [**IDCompositionDevice :: CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) ou [**IDCompositionDevice :: CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) .</span><span class="sxs-lookup"><span data-stu-id="354ca-165">For more information, see the description of the *alphaMode* parameter of the [**IDCompositionDevice::CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) or [**IDCompositionDevice::CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="354ca-166">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="354ca-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="354ca-167">Concepts DirectComposition</span><span class="sxs-lookup"><span data-stu-id="354ca-167">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 