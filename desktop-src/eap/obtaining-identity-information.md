---
title: Obtention des informations d’identité
description: Le fournisseur qui implémente le protocole d’authentification peut également fournir une interface de fonction qui obtient des informations d’identification initiales pour l’utilisateur demandant l’authentification.
ms.assetid: 773c9fdb-c810-4cea-afed-df6484a9c9c9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bb9519da9d66937fd25245fe78f12ef34c3c0ad8
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104031081"
---
# <a name="obtaining-identity-information"></a><span data-ttu-id="eb2bf-103">Obtention des informations d’identité</span><span class="sxs-lookup"><span data-stu-id="eb2bf-103">Obtaining Identity Information</span></span>

<span data-ttu-id="eb2bf-104">Le fournisseur qui implémente le protocole d’authentification peut également fournir une interface de fonction qui obtient des informations d’identification initiales pour l’utilisateur demandant l’authentification.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-104">The vendor that implements the authentication protocol may also provide a function interface that obtains initial identifying information for the user requesting authentication.</span></span>

<span data-ttu-id="eb2bf-105">Le fournisseur doit implémenter les fonctions suivantes.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-105">The vendor should implement the following functions.</span></span>

-   [<span data-ttu-id="eb2bf-106">**RasEapGetIdentity**</span><span class="sxs-lookup"><span data-stu-id="eb2bf-106">**RasEapGetIdentity**</span></span>](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity)
-   [<span data-ttu-id="eb2bf-107">**RasEapFreeMemory**</span><span class="sxs-lookup"><span data-stu-id="eb2bf-107">**RasEapFreeMemory**</span></span>](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory)

<span data-ttu-id="eb2bf-108">Ces fonctions peuvent être implémentées dans la même DLL que le protocole d’authentification ou dans une DLL distincte.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-108">These functions may be implemented in the same DLL as the authentication protocol, or in a separate DLL.</span></span> <span data-ttu-id="eb2bf-109">En outre, la DLL qui implémente les fonctions d’identité peut prendre en charge plusieurs protocoles d’authentification.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-109">Also, the DLL that implements the identity functions may support more than one authentication protocol.</span></span> <span data-ttu-id="eb2bf-110">Le chemin d’accès à la DLL pour ces fonctions est stocké dans la valeur du registre de l' [ \_ \_ \_ identité du valueName EAP RAS](authentication-protocol-registry-values.md) , sous la clé du protocole d’authentification.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-110">The path to the DLL for these functions is stored in the [RAS\_EAP\_VALUENAME\_IDENTITY](authentication-protocol-registry-values.md) registry value, under the key for the authentication protocol.</span></span> <span data-ttu-id="eb2bf-111">Pour plus d’informations sur la création de cette valeur de Registre, consultez la page [installation d’EAP](eap-installation.md).</span><span class="sxs-lookup"><span data-stu-id="eb2bf-111">For more information about creating this registry value, see [EAP Installation](eap-installation.md).</span></span>

<span data-ttu-id="eb2bf-112">La fonction [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) affiche généralement une interface utilisateur (IU) pour obtenir les informations d’identité de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-112">The [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) function typically displays a user interface (UI) to obtain identity information for the user.</span></span> <span data-ttu-id="eb2bf-113">Toutefois, si le paramètre *dwFlags* contient l’indicateur \_ non interactif de l’indicateur EAP RAS \_ \_ \_ , **RasEapGetIdentity** ne doit pas afficher d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-113">However, if the *dwFlags* parameter contains the RAS\_EAP\_FLAG\_NON\_INTERACTIVE flag, **RasEapGetIdentity** should not display a UI.</span></span>

<span data-ttu-id="eb2bf-114">Si [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) affiche une interface utilisateur, l’interface utilisateur doit prendre en charge les messages de [**\_ commande WM**](../menurc/wm-command.md) où la valeur de [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85))(*wParam*) est égale à IDCANCEL.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-114">If [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) does display a UI, the UI must support [**WM\_COMMAND**](../menurc/wm-command.md) messages where the value of [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85))(*wParam*) is equal to IDCANCEL.</span></span>

<span data-ttu-id="eb2bf-115">Le service d’authentification appelle [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) si la valeur NAMEDLG de l' [ \_ \_ \_ appel \_ du valueName EAP RAS](authentication-protocol-registry-values.md) qui se trouve dans le registre pour cet EAP est définie sur zéro.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-115">The authentication service calls [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) if the [RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG](authentication-protocol-registry-values.md) value that is in the registry for this EAP is set to zero.</span></span> <span data-ttu-id="eb2bf-116">Si \_ \_ le nom d’appel d’accès distant EAP \_ \_ NAMEDLG n’est pas présent, s’il est présent et qu’il est défini sur un, le service d’authentification affiche la boîte de dialogue nom d’utilisateur système standard.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-116">If RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG is not present, or is present and is set to one, the authentication service displays the standard system user name dialog box.</span></span>

<span data-ttu-id="eb2bf-117">En plus de l’appel de NAMEDLG d’appel d’accès distant \_ EAP \_ \_ \_ , le fournisseur EAP peut créer une valeur associée, [RAS \_ EAP \_ valueName \_ Invoke \_ PWDDLG](authentication-protocol-registry-values.md), dans le registre.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-117">In addition to RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG, the EAP vendor may create a related value, [RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG](authentication-protocol-registry-values.md), in the registry.</span></span> <span data-ttu-id="eb2bf-118">Si cette valeur est présente et définie à zéro, le service n’affiche pas la boîte de dialogue de mot de passe système standard.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-118">If this value is present and is set to zero, the service will not display the standard system password dialog.</span></span> <span data-ttu-id="eb2bf-119">Cette valeur est utile lors de l’implémentation d’une méthode biométrique telle qu’une analyse d’empreintes digitales pour authentifier l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-119">This value is useful when implementing a biometric method such as a fingerprint scan to authenticate the user.</span></span> <span data-ttu-id="eb2bf-120">Si les valeurs PWDDLG des appels NAMEDLG et RAS du valueName EAP de l’appel d’accès distant EAP \_ \_ \_ \_ \_ \_ \_ \_ sont égales à zéro, une interface utilisateur d’identité peut être utilisée pour obtenir à la fois l’identité et les informations biométriques.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-120">If both the RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG and RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG values are zero, an identity UI could be used to obtain both the identity and biometric information.</span></span> <span data-ttu-id="eb2bf-121">Toutefois, si seul \_ l’appel de l’appel de méthode d’accès distant EAP \_ \_ \_ PWDDLG est égal à zéro, le service d’authentification n’appellera pas [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity).</span><span class="sxs-lookup"><span data-stu-id="eb2bf-121">However, if only RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG is zero, the authentication service will not call [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity).</span></span> <span data-ttu-id="eb2bf-122">Dans ce cas, vous pouvez utiliser l' [interface utilisateur interactive](interactive-user-interface.md) pour obtenir les informations biométriques.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-122">In this case, you could use the [interactive user interface](interactive-user-interface.md) to obtain the biometric information.</span></span>

<span data-ttu-id="eb2bf-123">Pour plus d’informations sur ces valeurs de Registre, consultez [valeurs de Registre du protocole d’authentification](authentication-protocol-registry-values.md).</span><span class="sxs-lookup"><span data-stu-id="eb2bf-123">For more information on these registry values, see [Authentication Protocol Registry Values](authentication-protocol-registry-values.md).</span></span>

<span data-ttu-id="eb2bf-124">Les informations obtenues par [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) sont transmises au protocole d’authentification lors de l’appel à [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="eb2bf-124">The information obtained by [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) is passed to the authentication protocol during the call to [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)).</span></span> <span data-ttu-id="eb2bf-125">Les informations sont référencées par les membres **pszIdentity** et **pUserData** de la [**structure \_ \_ d’entrée EAP PPP**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) .</span><span class="sxs-lookup"><span data-stu-id="eb2bf-125">The information is pointed to by the **pszIdentity** and **pUserData** members of the [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) structure.</span></span> <span data-ttu-id="eb2bf-126">Pour enregistrer ces informations dans le registre sur l’ordinateur client, le protocole d’authentification doit renvoyer les informations dans le paramètre *pEapOutput* de [**RasEapMakeMessage**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="eb2bf-126">To save this information in the registry on the client computer, the authentication protocol should return the information in the *pEapOutput* parameter of [**RasEapMakeMessage**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)).</span></span>

<span data-ttu-id="eb2bf-127">Après l’appel à [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)), le service d’authentification appelle [**RasEapFreeMemory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) pour libérer la mémoire occupée par ces données.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-127">After the call to [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)), the authentication service calls [**RasEapFreeMemory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) to free the memory occupied by this data.</span></span> <span data-ttu-id="eb2bf-128">Par conséquent, le protocole d’authentification doit copier les informations dans une mémoire tampon de mémoire privée pendant l’appel à **RasEapBegin**.</span><span class="sxs-lookup"><span data-stu-id="eb2bf-128">Therefore, the authentication protocol should copy the information into a private memory buffer during the call to **RasEapBegin**.</span></span>

 

 