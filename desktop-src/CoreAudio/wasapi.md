---
description: À propos de WASAPI
ms.assetid: 452b9725-b0b9-4888-bbb5-a23e0067e840
title: À propos de WASAPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f869319f3100b797e58c7b43597869c9767ac037
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103950670"
---
# <a name="about-wasapi"></a><span data-ttu-id="8c540-103">À propos de WASAPI</span><span class="sxs-lookup"><span data-stu-id="8c540-103">About WASAPI</span></span>

<span data-ttu-id="8c540-104">L’API de session audio Windows (WASAPI) permet aux applications clientes de gérer le flux de données audio entre l’application et un [périphérique de point de terminaison audio](audio-endpoint-devices.md).</span><span class="sxs-lookup"><span data-stu-id="8c540-104">The Windows Audio Session API (WASAPI) enables client applications to manage the flow of audio data between the application and an [audio endpoint device](audio-endpoint-devices.md).</span></span>

<span data-ttu-id="8c540-105">Les fichiers d’en-tête Audioclient. h et Audiopolicy. h définissent les interfaces WASAPI.</span><span class="sxs-lookup"><span data-stu-id="8c540-105">Header files Audioclient.h and Audiopolicy.h define the WASAPI interfaces.</span></span>

<span data-ttu-id="8c540-106">Chaque flux audio est membre d’une [session audio](audio-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="8c540-106">Every audio stream is a member of an [audio session](audio-sessions.md).</span></span> <span data-ttu-id="8c540-107">Grâce à l’abstraction de session, un client WASAPI peut identifier un flux audio en tant que membre d’un groupe de flux audio associés.</span><span class="sxs-lookup"><span data-stu-id="8c540-107">Through the session abstraction, a WASAPI client can identify an audio stream as a member of a group of related audio streams.</span></span> <span data-ttu-id="8c540-108">Le système peut gérer tous les flux de la session en tant qu’unité unique.</span><span class="sxs-lookup"><span data-stu-id="8c540-108">The system can manage all of the streams in the session as a single unit.</span></span>

<span data-ttu-id="8c540-109">Le moteur audio est le [composant audio en mode utilisateur](user-mode-audio-components.md) par le biais duquel les applications partagent l’accès à un périphérique de point de terminaison audio.</span><span class="sxs-lookup"><span data-stu-id="8c540-109">The audio engine is the [user-mode audio component](user-mode-audio-components.md) through which applications share access to an audio endpoint device.</span></span> <span data-ttu-id="8c540-110">Le moteur audio transporte des données audio entre une mémoire tampon de point de terminaison et un périphérique de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="8c540-110">The audio engine transports audio data between an endpoint buffer and an endpoint device.</span></span> <span data-ttu-id="8c540-111">Pour lire un flux audio via un périphérique de point de terminaison de rendu, une application écrit périodiquement des données audio dans une mémoire tampon de point de terminaison de rendu.</span><span class="sxs-lookup"><span data-stu-id="8c540-111">To play an audio stream through a rendering endpoint device, an application periodically writes audio data to a rendering endpoint buffer.</span></span> <span data-ttu-id="8c540-112">Le moteur audio mélange les flux de données des différentes applications.</span><span class="sxs-lookup"><span data-stu-id="8c540-112">The audio engine mixes the streams from the various applications.</span></span> <span data-ttu-id="8c540-113">Pour enregistrer un flux audio à partir d’un périphérique de point de terminaison de capture, une application lit régulièrement les données audio à partir d’une mémoire tampon de point de terminaison de capture.</span><span class="sxs-lookup"><span data-stu-id="8c540-113">To record an audio stream from a capture endpoint device, an application periodically reads audio data from a capture endpoint buffer.</span></span>

<span data-ttu-id="8c540-114">WASAPI se compose de plusieurs interfaces.</span><span class="sxs-lookup"><span data-stu-id="8c540-114">WASAPI consists of several interfaces.</span></span> <span data-ttu-id="8c540-115">La première est l’interface [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) .</span><span class="sxs-lookup"><span data-stu-id="8c540-115">The first of these is the [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) interface.</span></span> <span data-ttu-id="8c540-116">Pour accéder aux interfaces WASAPI, un client obtient d’abord une référence à l’interface **IAudioClient** d’un périphérique de point de terminaison audio en appelant la méthode [**IMMDevice :: Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) avec l' *IID* de paramètre défini sur **REFIID** IID \_ IAudioClient.</span><span class="sxs-lookup"><span data-stu-id="8c540-116">To access the WASAPI interfaces, a client first obtains a reference to the **IAudioClient** interface of an audio endpoint device by calling the [**IMMDevice::Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) method with parameter *iid* set to **REFIID** IID\_IAudioClient.</span></span> <span data-ttu-id="8c540-117">Le client appelle la méthode [**IAudioClient :: Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) pour initialiser un flux sur un appareil de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="8c540-117">The client calls the [**IAudioClient::Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) method to initialize a stream on an endpoint device.</span></span> <span data-ttu-id="8c540-118">Après l’initialisation d’un flux, le client peut obtenir des références aux autres interfaces WASAPI en appelant la méthode [**IAudioClient :: GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) .</span><span class="sxs-lookup"><span data-stu-id="8c540-118">After initializing a stream, the client can obtain references to the other WASAPI interfaces by calling the [**IAudioClient::GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) method.</span></span>

<span data-ttu-id="8c540-119">La plupart des méthodes de WASAPI renvoient le code d’erreur AUDCLNT \_ E \_ Device \_ invalidé si le périphérique de point de terminaison audio utilisé par une application cliente n’est plus valide.</span><span class="sxs-lookup"><span data-stu-id="8c540-119">Many of the methods in WASAPI return error code AUDCLNT\_E\_DEVICE\_INVALIDATED if the audio endpoint device that a client application is using becomes invalid.</span></span> <span data-ttu-id="8c540-120">Souvent, l’application peut récupérer à partir de cette erreur.</span><span class="sxs-lookup"><span data-stu-id="8c540-120">Frequently, the application can recover from this error.</span></span> <span data-ttu-id="8c540-121">Pour plus d’informations, consultez [récupération à partir d’une erreur de Invalid-Device](recovering-from-an-invalid-device-error.md).</span><span class="sxs-lookup"><span data-stu-id="8c540-121">For more information, see [Recovering from an Invalid-Device Error](recovering-from-an-invalid-device-error.md).</span></span>

<span data-ttu-id="8c540-122">WASAPI implémente les interfaces suivantes.</span><span class="sxs-lookup"><span data-stu-id="8c540-122">WASAPI implements the following interfaces.</span></span>



| <span data-ttu-id="8c540-123">Interface</span><span class="sxs-lookup"><span data-stu-id="8c540-123">Interface</span></span>                                            | <span data-ttu-id="8c540-124">Description</span><span class="sxs-lookup"><span data-stu-id="8c540-124">Description</span></span>                                                                                                                                                     |
|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8c540-125">**IAudioCaptureClient**</span><span class="sxs-lookup"><span data-stu-id="8c540-125">**IAudioCaptureClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiocaptureclient)   | <span data-ttu-id="8c540-126">Permet à un client de lire des données d’entrée à partir d’une mémoire tampon de point de terminaison de capture.</span><span class="sxs-lookup"><span data-stu-id="8c540-126">Enables a client to read input data from a capture endpoint buffer.</span></span>                                                                                             |
| [<span data-ttu-id="8c540-127">**IAudioClient**</span><span class="sxs-lookup"><span data-stu-id="8c540-127">**IAudioClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient)                 | <span data-ttu-id="8c540-128">Permet à un client de créer et d’initialiser un flux audio entre une application audio et le moteur audio ou la mémoire tampon matérielle d’un périphérique de point de terminaison audio.</span><span class="sxs-lookup"><span data-stu-id="8c540-128">Enables a client to create and initialize an audio stream between an audio application and the audio engine or the hardware buffer of an audio endpoint device.</span></span> |
| [<span data-ttu-id="8c540-129">**IAudioClock**</span><span class="sxs-lookup"><span data-stu-id="8c540-129">**IAudioClock**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclock)                   | <span data-ttu-id="8c540-130">Permet à un client de surveiller le débit de données d’un flux et la position actuelle dans le flux.</span><span class="sxs-lookup"><span data-stu-id="8c540-130">Enables a client to monitor a stream's data rate and the current position in the stream.</span></span>                                                                        |
| [<span data-ttu-id="8c540-131">**IAudioRenderClient**</span><span class="sxs-lookup"><span data-stu-id="8c540-131">**IAudioRenderClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiorenderclient)     | <span data-ttu-id="8c540-132">Permet à un client d’écrire des données de sortie dans une mémoire tampon de point de terminaison de rendu.</span><span class="sxs-lookup"><span data-stu-id="8c540-132">Enables a client to write output data to a rendering endpoint buffer.</span></span>                                                                                           |
| [<span data-ttu-id="8c540-133">**IAudioSessionControl**</span><span class="sxs-lookup"><span data-stu-id="8c540-133">**IAudioSessionControl**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessioncontrol) | <span data-ttu-id="8c540-134">Permet à un client de configurer les paramètres de contrôle pour une session audio et de surveiller les événements de la session.</span><span class="sxs-lookup"><span data-stu-id="8c540-134">Enables a client to configure the control parameters for an audio session and to monitor events in the session.</span></span>                                                 |
| [<span data-ttu-id="8c540-135">**IAudioSessionManager**</span><span class="sxs-lookup"><span data-stu-id="8c540-135">**IAudioSessionManager**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionmanager) | <span data-ttu-id="8c540-136">Permet à un client d’accéder aux contrôles de session et aux contrôles de volume pour les sessions audio à processus croisé et spécifiques au processus.</span><span class="sxs-lookup"><span data-stu-id="8c540-136">Enables a client to access the session controls and volume controls for both cross-process and process-specific audio sessions.</span></span>                                 |
| [<span data-ttu-id="8c540-137">**IAudioStreamVolume**</span><span class="sxs-lookup"><span data-stu-id="8c540-137">**IAudioStreamVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume)     | <span data-ttu-id="8c540-138">Permet à un client de contrôler et de surveiller les niveaux de volume de tous les canaux dans un flux audio.</span><span class="sxs-lookup"><span data-stu-id="8c540-138">Enables a client to control and monitor the volume levels for all of the channels in an audio stream.</span></span>                                                           |
| [<span data-ttu-id="8c540-139">**IChannelAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="8c540-139">**IChannelAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume)   | <span data-ttu-id="8c540-140">Permet à un client de contrôler les niveaux de volume de tous les canaux de la session audio à laquelle le flux appartient.</span><span class="sxs-lookup"><span data-stu-id="8c540-140">Enables a client to control the volume levels for all of the channels in the audio session that the stream belongs to.</span></span>                                          |
| [<span data-ttu-id="8c540-141">**ISimpleAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="8c540-141">**ISimpleAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume)     | <span data-ttu-id="8c540-142">Permet à un client de contrôler le niveau de volume principal d’une session audio.</span><span class="sxs-lookup"><span data-stu-id="8c540-142">Enables a client to control the master volume level of an audio session.</span></span>                                                                                        |



 

<span data-ttu-id="8c540-143">Les clients WASAPI qui requièrent une notification des événements liés à la session doivent implémenter l’interface suivante.</span><span class="sxs-lookup"><span data-stu-id="8c540-143">WASAPI clients that require notification of session-related events should implement the following interface.</span></span>



| <span data-ttu-id="8c540-144">Interface</span><span class="sxs-lookup"><span data-stu-id="8c540-144">Interface</span></span>                                          | <span data-ttu-id="8c540-145">Description</span><span class="sxs-lookup"><span data-stu-id="8c540-145">Description</span></span>                                                                                                            |
|----------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8c540-146">**IAudioSessionEvents**</span><span class="sxs-lookup"><span data-stu-id="8c540-146">**IAudioSessionEvents**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) | <span data-ttu-id="8c540-147">Fournit des notifications d’événements liés à la session, tels que les modifications apportées au niveau du volume, au nom complet et à l’état de session.</span><span class="sxs-lookup"><span data-stu-id="8c540-147">Provides notifications of session-related events such as changes in the volume level, display name, and session state.</span></span> |



 

## <a name="related-topics"></a><span data-ttu-id="8c540-148">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="8c540-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8c540-149">Gestion de flux</span><span class="sxs-lookup"><span data-stu-id="8c540-149">Stream Management</span></span>](stream-management.md)
</dt> <dt>

[<span data-ttu-id="8c540-150">**Guide de référence de programmation**</span><span class="sxs-lookup"><span data-stu-id="8c540-150">**Programming Reference**</span></span>](programming-reference.md)
</dt> </dl>

 

 



