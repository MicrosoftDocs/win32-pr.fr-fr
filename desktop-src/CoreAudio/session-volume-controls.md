---
description: Contrôles du volume de session
ms.assetid: e6d112f9-08c9-4d95-b37b-267beebd0d7f
title: Contrôles du volume de session
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: add29b18b39c942c54926190ef9c0f85e447bb88
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103861301"
---
# <a name="session-volume-controls"></a><span data-ttu-id="59c33-103">Contrôles du volume de session</span><span class="sxs-lookup"><span data-stu-id="59c33-103">Session Volume Controls</span></span>

<span data-ttu-id="59c33-104">Comme expliqué précédemment, les clients WASAPI peuvent contrôler individuellement le niveau de volume de chaque [session audio](audio-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="59c33-104">As explained previously, WASAPI clients can individually control the volume level of each [audio session](audio-sessions.md).</span></span> <span data-ttu-id="59c33-105">WASAPI applique le paramètre de volume pour une session uniformément à tous les flux de la session.</span><span class="sxs-lookup"><span data-stu-id="59c33-105">WASAPI applies the volume setting for a session uniformly to all of the streams in the session.</span></span> <span data-ttu-id="59c33-106">Chaque niveau de volume est une valeur comprise entre 0,0 et 1,0, où 0,0 indique un silence et 1,0 indique un volume complet (aucune atténuation).</span><span class="sxs-lookup"><span data-stu-id="59c33-106">Each volume level is a value in the range 0.0 to 1.0, where 0.0 indicates silence and 1.0 indicates full volume (no attenuation).</span></span>

<span data-ttu-id="59c33-107">Un client crée implicitement une session en affectant le premier flux à cette session.</span><span class="sxs-lookup"><span data-stu-id="59c33-107">A client implicitly creates a session by assigning the first stream to that session.</span></span> <span data-ttu-id="59c33-108">Le niveau de volume par défaut de la nouvelle session est 1,0.</span><span class="sxs-lookup"><span data-stu-id="59c33-108">The default volume level of the new session is 1.0.</span></span> <span data-ttu-id="59c33-109">Comme nous l’avons vu précédemment, l’utilisateur peut ajuster le niveau de volume de la session par le biais de l’interface utilisateur d’un programme de contrôle (par exemple, sndvol) qui est un client WASAPI.</span><span class="sxs-lookup"><span data-stu-id="59c33-109">As discussed previously, the user can adjust the volume level of the session through the user interface of a control program (for example, Sndvol) that is a WASAPI client.</span></span> <span data-ttu-id="59c33-110">Les paramètres de contrôle sont persistants.</span><span class="sxs-lookup"><span data-stu-id="59c33-110">The control settings are persistent.</span></span>

<span data-ttu-id="59c33-111">En plus des paramètres de volume contrôlés par le client, le système applique ses propres paramètres de volume aux sessions.</span><span class="sxs-lookup"><span data-stu-id="59c33-111">In addition to the client-controlled volume settings, the system applies its own volume settings to sessions.</span></span> <span data-ttu-id="59c33-112">Ces paramètres sont basés sur la stratégie audio et changent dynamiquement en réponse aux modifications apportées aux flux qui composent la combinaison audio globale.</span><span class="sxs-lookup"><span data-stu-id="59c33-112">These settings are based on audio policy and change dynamically in response to changes in the streams that make up the global audio mix.</span></span> <span data-ttu-id="59c33-113">Pour plus d’informations sur la stratégie audio, consultez [composants audio en mode utilisateur](user-mode-audio-components.md).</span><span class="sxs-lookup"><span data-stu-id="59c33-113">For more information about audio policy, see [User-Mode Audio Components](user-mode-audio-components.md).</span></span>

<span data-ttu-id="59c33-114">Le logiciel système qui implémente le contrôle du volume pour chaque flux multiplie les échantillons PCM dans le flux par le niveau de volume effectif.</span><span class="sxs-lookup"><span data-stu-id="59c33-114">The system software that implements the volume control for each stream multiplies the PCM samples in the stream by the effective volume level.</span></span> <span data-ttu-id="59c33-115">Le niveau de volume effectif est le résultat de la multiplication des paramètres du volume du client et du système.</span><span class="sxs-lookup"><span data-stu-id="59c33-115">The effective volume level is the result of multiplying the client and system volume settings.</span></span> <span data-ttu-id="59c33-116">Ainsi, la modification qui en résulte dans l’amplitude du signal est une combinaison linéaire des niveaux du client et du volume système.</span><span class="sxs-lookup"><span data-stu-id="59c33-116">Thus, the resulting change in signal amplitude is a linear combination of the client and system volume levels.</span></span> <span data-ttu-id="59c33-117">Par exemple, si le niveau de volume client est 0,8 et que le niveau de volume système est 0,5, le niveau de volume effectif est (0,8)<sup>.</sup> (0,5) = 0,4.</span><span class="sxs-lookup"><span data-stu-id="59c33-117">For example, if the client volume level is 0.8 and the system volume level is 0.5, the effective volume level is (0.8)<sup>.</sup>(0.5) = 0.4.</span></span>

<span data-ttu-id="59c33-118">Notez que le bruit perçu n’est pas linéaire en ce qui concerne l’amplitude du signal.</span><span class="sxs-lookup"><span data-stu-id="59c33-118">Note that perceived loudness is not linear with respect to signal amplitude.</span></span> <span data-ttu-id="59c33-119">Au lieu de cela, le niveau sonore varie approximativement en tant que logarithme du volume v :</span><span class="sxs-lookup"><span data-stu-id="59c33-119">Instead, loudness varies approximately as the logarithm of the volume level v:</span></span>

<span data-ttu-id="59c33-120">intensité sonore en décibels = 20<sup>.</sup> log ₁ ₀ (v)</span><span class="sxs-lookup"><span data-stu-id="59c33-120">loudness in decibels = 20<sup>.</sup>log₁₀(v)</span></span>

<span data-ttu-id="59c33-121">Par conséquent, la définition de v = 0,5 atténue le volume d’origine du signal d’origine (le signal avant l’application du niveau de volume) par 6 décibels, le paramètre v = 0,25 atténue le signal par 12 décibels, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="59c33-121">Thus, setting v = 0.5 attenuates the loudness of the original signal (the signal before the volume level is applied) by 6 decibels, setting v = 0.25 attenuates the signal by 12 decibels, and so on.</span></span> <span data-ttu-id="59c33-122">Un volume niveau v = 1,0, correspondant à 0 décibels, ne modifie pas le niveau de signal d’origine.</span><span class="sxs-lookup"><span data-stu-id="59c33-122">A volume level v = 1.0, corresponding to 0 decibels, does not alter the original signal level.</span></span>

<span data-ttu-id="59c33-123">Les applications audio avec des interfaces utilisateur pour contrôler le niveau de volume affichent généralement des curseurs qui génèrent des modifications de l’intensité perçue qui sont proportionnelles aux modifications de la position du curseur.</span><span class="sxs-lookup"><span data-stu-id="59c33-123">Audio applications with user interfaces for controlling the volume level typically display sliders that generate changes in perceived loudness that are linearly proportional to changes in slider position.</span></span> <span data-ttu-id="59c33-124">Pour produire une relation linéaire entre la position de curseur et le bruit perçus, l’application doit définir une relation non linéaire entre le niveau de volume v et la position du curseur.</span><span class="sxs-lookup"><span data-stu-id="59c33-124">To produce a linear relationship between perceived loudness and slider position, the application must define a nonlinear relationship between the volume level v and the slider position.</span></span> <span data-ttu-id="59c33-125">Pour plus d’informations, consultez [contrôles de volume à cônes audio](audio-tapered-volume-controls.md).</span><span class="sxs-lookup"><span data-stu-id="59c33-125">For more information, see [Audio-Tapered Volume Controls](audio-tapered-volume-controls.md).</span></span>

<span data-ttu-id="59c33-126">Comme expliqué précédemment, le programme de contrôle de volume système, sndvol, affiche des curseurs de volume pour les sessions audio qui sont lues sur chaque périphérique de rendu audio.</span><span class="sxs-lookup"><span data-stu-id="59c33-126">As explained previously, the system volume-control program, Sndvol, displays volume sliders for the audio sessions that are playing on each audio rendering device.</span></span> <span data-ttu-id="59c33-127">Ces curseurs s’affichent dans la zone de groupe intitulée **applications** dans la fenêtre SndVol.</span><span class="sxs-lookup"><span data-stu-id="59c33-127">These sliders appear in the group box labeled **Applications** in the SndVol window.</span></span> <span data-ttu-id="59c33-128">En règle générale, chaque session contient tous les flux de lecture à partir d’une fenêtre d’application particulière.</span><span class="sxs-lookup"><span data-stu-id="59c33-128">Typically, each session contains all of the playback streams from a particular application window.</span></span> <span data-ttu-id="59c33-129">À travers les curseurs de la fenêtre sndvol, les utilisateurs contrôlent les niveaux de volume des applications audio individuelles.</span><span class="sxs-lookup"><span data-stu-id="59c33-129">Through the sliders in the Sndvol window, users control the volume levels of individual audio applications.</span></span>

<span data-ttu-id="59c33-130">En règle générale, une application doit assigner tous ses flux de lecture à la même session audio.</span><span class="sxs-lookup"><span data-stu-id="59c33-130">As a general rule, an application should assign all of its playback streams to the same audio session.</span></span> <span data-ttu-id="59c33-131">WASAPI n’empêche pas une application de distribuer ses flux de lecture entre plusieurs sessions.</span><span class="sxs-lookup"><span data-stu-id="59c33-131">WASAPI does not prevent an application from distributing its playback streams among multiple sessions.</span></span> <span data-ttu-id="59c33-132">Toutefois, la prolifération résultante des curseurs de volume dans sndvol peut dérouter les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="59c33-132">However, the resulting proliferation of volume sliders in Sndvol might confuse users.</span></span>

<span data-ttu-id="59c33-133">En guise d’option, une fenêtre d’application peut afficher un curseur de volume.</span><span class="sxs-lookup"><span data-stu-id="59c33-133">As an option, an application window can display a volume slider.</span></span> <span data-ttu-id="59c33-134">Le curseur application doit refléter l’état du curseur sndvol correspondant à tout moment.</span><span class="sxs-lookup"><span data-stu-id="59c33-134">The application slider should reflect the state of the corresponding Sndvol slider at all times.</span></span> <span data-ttu-id="59c33-135">Ainsi, si l’utilisateur modifie le niveau de volume en déplaçant le curseur dans la fenêtre de l’application, le curseur correspondant dans la fenêtre sndvol doit se déplacer de pair avec le curseur de l’application.</span><span class="sxs-lookup"><span data-stu-id="59c33-135">Thus, if the user changes the volume level by moving the slider in the application window, then the corresponding slider in the Sndvol window should move in unison with the application slider.</span></span> <span data-ttu-id="59c33-136">De même, si l’utilisateur déplace le curseur sndvol, le curseur application doit se déplacer de pair avec le curseur sndvol.</span><span class="sxs-lookup"><span data-stu-id="59c33-136">Similarly, if the user moves the Sndvol slider, then the application slider should move in unison with the Sndvol slider.</span></span>

<span data-ttu-id="59c33-137">Pour prendre en charge ce comportement, WASAPI implémente l’interface [**ISimpleAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume) .</span><span class="sxs-lookup"><span data-stu-id="59c33-137">To support this behavior, WASAPI implements the [**ISimpleAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume) interface.</span></span> <span data-ttu-id="59c33-138">Lorsque l’utilisateur déplace le curseur application, l’application appelle la méthode [**ISimpleAudioVolume :: SetMasterVolume**](/windows/desktop/api/Audioclient/nf-audioclient-isimpleaudiovolume-setmastervolume) pour ajuster le niveau de volume de la session en conséquence.</span><span class="sxs-lookup"><span data-stu-id="59c33-138">When the user moves the application slider, the application calls the [**ISimpleAudioVolume::SetMasterVolume**](/windows/desktop/api/Audioclient/nf-audioclient-isimpleaudiovolume-setmastervolume) method to adjust the session volume level accordingly.</span></span> <span data-ttu-id="59c33-139">Sndvol surveille les modifications de volume effectuées via cette méthode et reflète les modifications apportées aux curseurs de volume qu’il affiche.</span><span class="sxs-lookup"><span data-stu-id="59c33-139">Sndvol monitors volume changes made through this method and reflects the changes in the volume sliders that it displays.</span></span> <span data-ttu-id="59c33-140">En outre, une application peut recevoir des notifications de modifications du volume de session que l’utilisateur effectue via sndvol.</span><span class="sxs-lookup"><span data-stu-id="59c33-140">In addition, an application can receive notifications of session volume changes that the user makes through Sndvol.</span></span> <span data-ttu-id="59c33-141">À cet effet, l’application implémente une interface [**IAudioSessionEvents**](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) et inscrit l’interface auprès de WASAPI.</span><span class="sxs-lookup"><span data-stu-id="59c33-141">For this purpose, the application implements an [**IAudioSessionEvents**](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) interface and registers the interface with WASAPI.</span></span> <span data-ttu-id="59c33-142">Ensuite, chaque fois que l’utilisateur modifie le niveau de volume de session via sndvol, l’application reçoit un appel de notification via la méthode [**IAudioSessionEvents :: OnSimpleVolumeChanged**](/windows/desktop/api/Audiopolicy/nf-audiopolicy-iaudiosessionevents-onsimplevolumechanged) .</span><span class="sxs-lookup"><span data-stu-id="59c33-142">Thereafter, each time the user changes the session volume level through Sndvol, the application receives a notification call through the [**IAudioSessionEvents::OnSimpleVolumeChanged**](/windows/desktop/api/Audiopolicy/nf-audiopolicy-iaudiosessionevents-onsimplevolumechanged) method.</span></span> <span data-ttu-id="59c33-143">Pour obtenir un exemple de code qui implémente une interface **IAudioSessionEvents** , consultez [événements de session audio](audio-session-events.md).</span><span class="sxs-lookup"><span data-stu-id="59c33-143">For a code example that implements an **IAudioSessionEvents** interface, see [Audio Session Events](audio-session-events.md).</span></span> <span data-ttu-id="59c33-144">Pour obtenir un exemple de code qui inscrit une interface **IAudioSessionEvents** , consultez [événements audio pour les applications audio héritées](audio-events-for-legacy-audio-applications.md).</span><span class="sxs-lookup"><span data-stu-id="59c33-144">For a code example that registers an **IAudioSessionEvents** interface, see [Audio Events for Legacy Audio Applications](audio-events-for-legacy-audio-applications.md).</span></span>

<span data-ttu-id="59c33-145">L’interface **ISimpleAudioVolume** applique le même niveau de volume uniformément à tous les canaux dans une session audio.</span><span class="sxs-lookup"><span data-stu-id="59c33-145">The **ISimpleAudioVolume** interface applies the same volume level uniformly to all of the channels in an audio session.</span></span> <span data-ttu-id="59c33-146">Bien que cette interface réponde aux exigences de contrôle de volume de la plupart des applications, certaines applications peuvent nécessiter des fonctionnalités de contrôle de volume plus spécialisées.</span><span class="sxs-lookup"><span data-stu-id="59c33-146">Although this interface should satisfy the volume-control requirements of most applications, a few applications might require more specialized volume-control capabilities.</span></span> <span data-ttu-id="59c33-147">L’interface [**IAudioStreamVolume**](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume) contrôle le volume d’un flux individuel dans une session par rapport aux autres flux de la session.</span><span class="sxs-lookup"><span data-stu-id="59c33-147">The [**IAudioStreamVolume**](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume) interface controls the volume of an individual stream in a session relative to the other streams in the session.</span></span> <span data-ttu-id="59c33-148">**IAudioStreamVolume** permet également à un client de contrôler individuellement les niveaux de volume de tous les canaux dans le flux.</span><span class="sxs-lookup"><span data-stu-id="59c33-148">**IAudioStreamVolume** also enables a client to individually control the volume levels of all the channels in the stream.</span></span> <span data-ttu-id="59c33-149">Par exemple, une application peut utiliser cette fonctionnalité pour obtenir des effets audio tels que la simulation du mouvement spatial d’une source audio en panoramique de gauche à droite.</span><span class="sxs-lookup"><span data-stu-id="59c33-149">For example, an application might use this capability to achieve audio effects such as simulating spatial movement of an audio source by panning from left to right.</span></span> <span data-ttu-id="59c33-150">Une autre interface spécialisée, [**IChannelAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume), contrôle les niveaux de volume des canaux individuels dans une session.</span><span class="sxs-lookup"><span data-stu-id="59c33-150">Another specialized interface, [**IChannelAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume), controls the volume levels of the individual channels in a session.</span></span> <span data-ttu-id="59c33-151">Par exemple, une application peut utiliser **IChannelAudioVolume** pour implémenter des contrôles d’équilibre pour un système de son Stereophonic.</span><span class="sxs-lookup"><span data-stu-id="59c33-151">For example, an application might use **IChannelAudioVolume** to implement balance controls for a stereophonic sound system.</span></span>

<span data-ttu-id="59c33-152">Les curseurs de volume de la zone **applications** dans sndvol reflètent uniquement les modifications de volume effectuées via l’interface **ISimpleAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="59c33-152">The volume sliders in the **Applications** box in Sndvol reflect only volume changes that are made through the **ISimpleAudioVolume** interface.</span></span> <span data-ttu-id="59c33-153">Ils ne reflètent pas les modifications de volume effectuées par le biais des interfaces **IAudioStreamVolume** et **IChannelAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="59c33-153">They do not reflect volume changes that are made through the **IAudioStreamVolume** and **IChannelAudioVolume** interfaces.</span></span> <span data-ttu-id="59c33-154">Bien que certaines applications puissent permettre aux utilisateurs de contrôler directement ou indirectement les paramètres de volume via **IAudioStreamVolume** et **IChannelAudioVolume**, les développeurs doivent éviter de présenter des curseurs d’application pour ces paramètres de volume que les utilisateurs sont susceptibles de confondre avec les curseurs de volume dans sndvol.</span><span class="sxs-lookup"><span data-stu-id="59c33-154">Although some applications might enable users to directly or indirectly control volume settings through **IAudioStreamVolume** and **IChannelAudioVolume**, developers should avoid presenting application sliders for these volume settings that users are likely to confuse with the volume sliders in Sndvol.</span></span> <span data-ttu-id="59c33-155">Dans le cas contraire, un utilisateur peut déplacer un curseur d’application en attendant que la modification soit reflétée dans un curseur sndvol et se déformer quand aucune modification n’est apportée.</span><span class="sxs-lookup"><span data-stu-id="59c33-155">Otherwise, a user might move an application slider expecting to see the change reflected in a Sndvol slider and become confused when no such change occurs.</span></span> <span data-ttu-id="59c33-156">Les développeurs peuvent éviter ce problème grâce à une conception d’interface utilisateur attentive.</span><span class="sxs-lookup"><span data-stu-id="59c33-156">Developers can avoid this problem through careful user interface design.</span></span>

<span data-ttu-id="59c33-157">Le niveau de volume effectif de n’importe quel canal dans le mixage secondaire de session, tel qu’il est entendu aux orateurs, est le produit des quatre facteurs de niveau de volume suivants :</span><span class="sxs-lookup"><span data-stu-id="59c33-157">The effective volume level of any channel in the session submix, as heard at the speakers, is the product of the following four volume-level factors:</span></span>

-   <span data-ttu-id="59c33-158">Niveaux de volume par canal des flux de la session, que les clients peuvent contrôler via les méthodes dans l’interface **IAudioStreamVolume** .</span><span class="sxs-lookup"><span data-stu-id="59c33-158">The per-channel volume levels of the streams in the session, which clients can control through the methods in the **IAudioStreamVolume** interface.</span></span>
-   <span data-ttu-id="59c33-159">Niveau de volume par canal de la session, que les clients peuvent contrôler via les méthodes dans l’interface **IChannelAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="59c33-159">The per-channel volume level of the session, which clients can control through the methods in the **IChannelAudioVolume** interface.</span></span>
-   <span data-ttu-id="59c33-160">Niveau de volume principal de la session, que les clients peuvent contrôler via les méthodes dans l’interface **ISimpleAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="59c33-160">The master volume level of the session, which clients can control through the methods in the **ISimpleAudioVolume** interface.</span></span>
-   <span data-ttu-id="59c33-161">Niveau de volume basé sur la stratégie de la session, que le système modifie dynamiquement à mesure que la combinaison globale change.</span><span class="sxs-lookup"><span data-stu-id="59c33-161">The policy-based volume level of the session, which the system dynamically modifies as the global mix changes.</span></span>

<span data-ttu-id="59c33-162">Chacun des quatre facteurs de niveau volume de la liste précédente est une valeur comprise entre 0,0 et 1,0, où 0,0 indique un silence et 1,0 indique un volume complet (aucune atténuation).</span><span class="sxs-lookup"><span data-stu-id="59c33-162">Each of the four volume-level factors in the preceding list is a value in the range 0.0 to 1.0, where 0.0 indicates silence and 1.0 indicates full volume (no attenuation).</span></span> <span data-ttu-id="59c33-163">Le niveau de volume effectif est également une valeur comprise entre 0,0 et 1,0.</span><span class="sxs-lookup"><span data-stu-id="59c33-163">The effective volume level is also a value in the range 0.0 to 1.0.</span></span>

<span data-ttu-id="59c33-164">Le moteur audio applique le niveau de volume effectif pour chaque canal aux canaux dans un flux de données avant de mélanger le flux avec les autres flux dans la session audio.</span><span class="sxs-lookup"><span data-stu-id="59c33-164">The audio engine applies the effective volume level for each channel to the channels in a stream before mixing the stream with the other streams in the audio session.</span></span> <span data-ttu-id="59c33-165">Si des valeurs d’échantillon d’un canal dépassent 0 décibels après que le moteur audio les a multiplié par le niveau de volume effectif, le moteur découpe les exemples avant de les ajouter au mixage de la session.</span><span class="sxs-lookup"><span data-stu-id="59c33-165">If any sample values in a channel exceed 0 decibels after the audio engine has multiplied them by the effective volume level, the engine clips the samples before adding them to the session submix.</span></span>

## <a name="related-topics"></a><span data-ttu-id="59c33-166">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="59c33-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="59c33-167">Contrôles de volume</span><span class="sxs-lookup"><span data-stu-id="59c33-167">Volume Controls</span></span>](volume-controls.md)
</dt> </dl>

 

 



