---
description: Périphériques de point de terminaison audio
ms.assetid: 773714fb-3b00-4f03-988f-05c5835f87cf
title: Périphériques de point de terminaison audio
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c14d21aa174e34f8cb4ddab520819446a0e0ec89
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103950836"
---
# <a name="audio-endpoint-devices"></a><span data-ttu-id="ffa6e-103">Périphériques de point de terminaison audio</span><span class="sxs-lookup"><span data-stu-id="ffa6e-103">Audio Endpoint Devices</span></span>

<span data-ttu-id="ffa6e-104">Le terme « *appareil de point de terminaison* » fait référence à un périphérique matériel qui se trouve à une extrémité d’un chemin de données qui est à l’origine ou se termine au niveau d’un programme d’application.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-104">The term *endpoint device* refers to a hardware device that lies at one end of a data path that originates or terminates at an application program.</span></span> <span data-ttu-id="ffa6e-105">Voici quelques exemples d’appareils de point de terminaison audio : les haut-parleurs, les casques, les microphones et les lecteurs de CD.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-105">Examples of audio endpoint devices are speakers, headphones, microphones, and CD players.</span></span> <span data-ttu-id="ffa6e-106">Les données audio qui se déplacent sur le chemin de données peuvent traverser un certain nombre de composants logiciels et matériels au cours de leur trajet entre l’application et l’appareil de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-106">The audio data that moves along the data path might traverse a number of software and hardware components during its journey between the application and endpoint device.</span></span> <span data-ttu-id="ffa6e-107">Bien que ces composants soient essentiels au fonctionnement du périphérique de point de terminaison, ils ont tendance à être invisibles pour les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-107">Although these components are essential to the operation of the endpoint device, they tend to be invisible to users.</span></span> <span data-ttu-id="ffa6e-108">Les utilisateurs sont plus susceptibles de penser en termes d’appareils de point de terminaison qu’ils manipulent directement plutôt qu’en termes d’appareils sur les cartes audio que les appareils de point de terminaison connectent ou en termes de composants logiciels qui traitent les flux audio qui circulent vers et à partir de ces adaptateurs.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-108">Users are more likely to think in terms of endpoint devices that they directly manipulate rather than in terms of the devices on audio adapters that the endpoint devices plug into or in terms of the software components that process the audio streams that flow to and from these adapters.</span></span>

<span data-ttu-id="ffa6e-109">Pour éviter toute confusion avec les appareils de point de terminaison, cette documentation fait référence à un appareil sur une carte audio en tant que *périphérique adaptateur*.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-109">To avoid confusion with endpoint devices, this documentation refers to a device on an audio adapter as an *adapter device*.</span></span>

<span data-ttu-id="ffa6e-110">Le diagramme suivant illustre la différence entre les périphériques de point de terminaison audio et les périphériques d’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-110">The following diagram shows how audio endpoint devices differ from adapter devices.</span></span>

![exemples d’appareils de point de terminaison audio et d’adaptateurs](images/devices.jpg)

<span data-ttu-id="ffa6e-112">Dans le diagramme ci-dessus, voici quelques exemples d’appareils de point de terminaison :</span><span class="sxs-lookup"><span data-stu-id="ffa6e-112">In the preceding diagram, the following are examples of endpoint devices:</span></span>

-   <span data-ttu-id="ffa6e-113">Haut-parleurs</span><span class="sxs-lookup"><span data-stu-id="ffa6e-113">Speakers</span></span>
-   <span data-ttu-id="ffa6e-114">Microphone</span><span class="sxs-lookup"><span data-stu-id="ffa6e-114">Microphone</span></span>
-   <span data-ttu-id="ffa6e-115">Périphérique d’entrée auxiliaire</span><span class="sxs-lookup"><span data-stu-id="ffa6e-115">Auxiliary input device</span></span>

<span data-ttu-id="ffa6e-116">Voici quelques exemples de périphériques d’adaptateur :</span><span class="sxs-lookup"><span data-stu-id="ffa6e-116">The following are examples of adapter devices:</span></span>

-   <span data-ttu-id="ffa6e-117">Appareil de sortie Wave (contient le convertisseur numérique-analogique)</span><span class="sxs-lookup"><span data-stu-id="ffa6e-117">Wave output device (contains digital-to-analog converter)</span></span>
-   <span data-ttu-id="ffa6e-118">Périphérique de contrôle de sortie (contient les contrôles volume et muet)</span><span class="sxs-lookup"><span data-stu-id="ffa6e-118">Output controls device (contains volume and mute controls)</span></span>
-   <span data-ttu-id="ffa6e-119">Périphérique d’entrée Wave (contient un convertisseur analogique-numérique)</span><span class="sxs-lookup"><span data-stu-id="ffa6e-119">Wave input device (contains analog-to-digital converter)</span></span>
-   <span data-ttu-id="ffa6e-120">Périphérique de contrôle d’entrée (contient le contrôle du volume et le multiplexeur)</span><span class="sxs-lookup"><span data-stu-id="ffa6e-120">Input controls device (contains volume control and multiplexer)</span></span>

<span data-ttu-id="ffa6e-121">En règle générale, les interfaces utilisateur des applications audio font référence aux périphériques de point de terminaison audio, et non aux périphériques d’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-121">Typically, the user interfaces of audio applications refer to audio endpoint devices, not to adapter devices.</span></span> <span data-ttu-id="ffa6e-122">Windows Vista simplifie la conception d’applications conviviales en prenant directement en charge l’abstraction des appareils de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-122">Windows Vista simplifies the design of user-friendly applications by directly supporting the endpoint device abstraction.</span></span>

<span data-ttu-id="ffa6e-123">Certains périphériques de point de terminaison peuvent se connecter de façon permanente à un périphérique d’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-123">Some endpoint devices might permanently connect to an adapter device.</span></span> <span data-ttu-id="ffa6e-124">Par exemple, un ordinateur peut contenir des appareils internes tels qu’un lecteur de CD, un microphone ou des haut-parleurs intégrés dans le châssis du système.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-124">For example, a computer might contain internal devices such as a CD player, a microphone, or speakers that are integrated into the system chassis.</span></span> <span data-ttu-id="ffa6e-125">En règle générale, l’utilisateur ne supprime pas physiquement ces appareils de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-125">Typically, the user does not physically remove these endpoint devices.</span></span>

<span data-ttu-id="ffa6e-126">D’autres périphériques de point de terminaison peuvent se connecter à une carte audio par le biais de prises audio.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-126">Other endpoint devices might connect to an audio adapter through audio jacks.</span></span> <span data-ttu-id="ffa6e-127">L’utilisateur se connecte et déconnecte ces périphériques externes.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-127">The user plugs in and unplugs these external devices.</span></span> <span data-ttu-id="ffa6e-128">Par exemple, un périphérique de point de terminaison audio, tel qu’un microphone externe ou un casque, se trouve à une extrémité d’un câble dont l’autre se connecte à un Jack sur un appareil d’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-128">For example, an audio endpoint device such as an external microphone or headphones lies at one end of a cable whose other end plugs into a jack on an adapter device.</span></span>

<span data-ttu-id="ffa6e-129">L’adaptateur communique avec le processeur système via un bus système (en général, PCI ou PCI Express) ou un bus externe (USB ou IEEE 1394) qui prend en charge Plug-and-Play (PnP).</span><span class="sxs-lookup"><span data-stu-id="ffa6e-129">The adapter communicates with the system processor through a system bus (typically, PCI or PCI Express) or external bus (USB or IEEE 1394) that supports Plug and Play (PnP).</span></span> <span data-ttu-id="ffa6e-130">Au cours de l’énumération des appareils, le gestionnaire de Plug-and-Play identifie les périphériques de la carte audio et inscrit ces périphériques pour qu’ils soient disponibles pour une utilisation par le système d’exploitation et par les applications.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-130">During device enumeration, the Plug and Play manager identifies the devices in the audio adapter and registers those devices to make them available for use by the operating system and by applications.</span></span>

<span data-ttu-id="ffa6e-131">Contrairement à la connexion entre un adaptateur et un bus externe comme USB ou le bus IEEE 1394, la connexion entre un périphérique de point de terminaison et un périphérique d’adaptateur ne prend pas en charge la détection de périphérique PnP.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-131">Unlike the connection between an adapter and an external bus such as USB or the IEEE 1394 bus, the connection between an endpoint device and an adapter device does not support PnP device detection.</span></span> <span data-ttu-id="ffa6e-132">Toutefois, certains adaptateurs audio prennent en charge la détection de la *présence du Jack*: lorsqu’un plug est inséré ou supprimé d’une prise Jack, le matériel génère une interruption pour informer le pilote de l’adaptateur de la modification de la configuration matérielle.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-132">However, some audio adapters support *jack-presence detection*: when a plug is inserted into or removed from a jack, the hardware generates an interrupt to notify the adapter driver of the change in the hardware configuration.</span></span> <span data-ttu-id="ffa6e-133">Le gestionnaire des points de terminaison de Windows Vista peut exploiter cette fonctionnalité matérielle pour informer les applications des périphériques de point de terminaison présents à tout moment.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-133">The endpoint manager in Windows Vista can exploit this hardware capability to notify applications which endpoint devices are present at any time.</span></span> <span data-ttu-id="ffa6e-134">De cette façon, l’opération du gestionnaire de points de terminaison est analogue à celle du gestionnaire de Plug-and-Play, qui effectue le suivi des périphériques d’adaptateur présents dans le système.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-134">In this way, the operation of the endpoint manager is analogous to that of the Plug and Play manager, which keeps track of the adapter devices that are present in the system.</span></span>

<span data-ttu-id="ffa6e-135">Dans Windows Vista, le système audio effectue le suivi des appareils de point de terminaison et des périphériques d’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-135">In Windows Vista, the audio system keeps track of both endpoint devices and adapter devices.</span></span> <span data-ttu-id="ffa6e-136">Le gestionnaire des points de terminaison inscrit les appareils de point de terminaison et le gestionnaire de Plug-and-Play inscrit les périphériques d’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-136">The endpoint manager registers endpoint devices and the Plug and Play manager registers adapter devices.</span></span> <span data-ttu-id="ffa6e-137">L’inscription des appareils de point de terminaison permet aux applications conviviales de permettre aux utilisateurs de faire référence aux appareils de point de terminaison que les utilisateurs manipulent directement au lieu de faire référence à des appareils d’adaptateur qui peuvent être masqués à l’intérieur du châssis de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-137">Registering endpoint devices makes it easier for user-friendly applications to enable users to refer to the endpoint devices that users directly manipulate instead of referring to adapter devices that might be hidden inside the computer chassis.</span></span> <span data-ttu-id="ffa6e-138">Les appareils de point de terminaison signalés par le système d’exploitation effectuent fidèlement le suivi des modifications dynamiques dans la configuration du matériel audio qui a la détection de la présence de la prise en forme.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-138">The endpoint devices that are reported by the operating system faithfully track dynamic changes in the configuration of audio hardware that has jack-presence detection.</span></span> <span data-ttu-id="ffa6e-139">Lorsqu’un périphérique de point de terminaison reste branché, le système énumère ce périphérique.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-139">While an endpoint device remains plugged in, the system enumerates that device.</span></span> <span data-ttu-id="ffa6e-140">Lorsque l’utilisateur déconnecte un périphérique de point de terminaison, le système cesse de l’énumérer.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-140">When the user unplugs an endpoint device, the system ceases to enumerate it.</span></span>

<span data-ttu-id="ffa6e-141">Dans les versions antérieures de Windows, y compris Windows 98, Windows Me, Windows 2000 et Windows XP, le système présente explicitement uniquement les périphériques PnP aux applications.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-141">In earlier versions of Windows, including Windows 98, Windows Me, Windows 2000, and Windows XP, the system explicitly presents only PnP devices to applications.</span></span> <span data-ttu-id="ffa6e-142">Ainsi, les applications doivent déduire l’existence d’appareils de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-142">Thus, applications must infer the existence of endpoint devices.</span></span> <span data-ttu-id="ffa6e-143">Un système d’exploitation qui ne dispose pas d’une prise en charge explicite des appareils de point de terminaison oblige les applications clientes à effectuer eux-mêmes ce travail.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-143">An operating system that lacks explicit support for endpoint devices forces client applications to do more of the work themselves.</span></span> <span data-ttu-id="ffa6e-144">Par exemple, une application de capture audio doit effectuer les étapes suivantes pour activer la capture à partir d’un microphone externe :</span><span class="sxs-lookup"><span data-stu-id="ffa6e-144">For example, an audio capture application must perform the following steps to enable capturing from an external microphone:</span></span>

1.  <span data-ttu-id="ffa6e-145">Énumérer tous les périphériques de capture audio (périphériques d’adaptateur) précédemment enregistrés par le Gestionnaire PnP.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-145">Enumerate all the audio capture devices (these are adapter devices) that were previously registered by the PnP manager.</span></span>
2.  <span data-ttu-id="ffa6e-146">Après avoir sélectionné un périphérique de capture, ouvrez un flux de capture sur l’appareil en appelant la fonction **waveInOpen** ou en utilisant l’API **DirectSoundCapture** ou DirectShow.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-146">After selecting a capture device, open a capture stream on the device by either calling the **waveInOpen** function or by using the **DirectSoundCapture** or DirectShow API.</span></span>
3.  <span data-ttu-id="ffa6e-147">Appelez la fonction mixerOpen et utilisez les autres fonctions **mixerXxx** pour rechercher une ligne de \_ microphone MIXERLINE COMPONENTTYPE \_ src \_ qui correspond au périphérique de capture ouvert à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-147">Call the mixerOpen function and use the other **mixerXxx** functions to look for a MIXERLINE\_COMPONENTTYPE\_SRC\_MICROPHONE line that corresponds to the capture device opened in step 2.</span></span> <span data-ttu-id="ffa6e-148">Il s’agit d’une hypothèse éclairée.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-148">This is an educated guess.</span></span>
4.  <span data-ttu-id="ffa6e-149">Débloquez le chemin de données à partir du microphone.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-149">Unblock the data path from the microphone.</span></span> <span data-ttu-id="ffa6e-150">Si le chemin d’accès aux données comprend un nœud muet, le client doit désactiver la sourdine du signal à partir du microphone.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-150">If the data path includes a mute node, then the client must disable muting of the signal from the microphone.</span></span> <span data-ttu-id="ffa6e-151">Si l’appareil de capture contient un multiplexeur pour la sélection parmi plusieurs entrées, le client doit sélectionner l’entrée microphone.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-151">If the capture device contains a multiplexer for selecting from among several inputs, then the client must select the microphone input.</span></span>

<span data-ttu-id="ffa6e-152">Ce processus est sujet aux erreurs, car le logiciel qui effectue ces opérations peut échouer s’il rencontre une configuration matérielle que ses concepteurs n’ont pas anticipées ou pour lesquelles il n’a pas été testé.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-152">This process is error-prone because the software that performs these operations might fail if it encounters a hardware configuration that its designers did not anticipate or for which it was not tested.</span></span>

<span data-ttu-id="ffa6e-153">Dans Windows Vista, qui prend en charge les appareils de point de terminaison, le processus de connexion au même appareil de point de terminaison est bien plus simple :</span><span class="sxs-lookup"><span data-stu-id="ffa6e-153">In Windows Vista, which supports endpoint devices, the process of connecting to the same endpoint device is much simpler:</span></span>

1.  <span data-ttu-id="ffa6e-154">Sélectionnez un microphone dans une collection d’appareils de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-154">Select a microphone from a collection of endpoint devices.</span></span>
2.  <span data-ttu-id="ffa6e-155">Activez une interface de capture audio sur ce microphone.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-155">Activate an audio-capture interface on that microphone.</span></span>

<span data-ttu-id="ffa6e-156">Le système d’exploitation effectue toutes les tâches nécessaires pour identifier et activer l’appareil de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-156">The operating system does all the work necessary to identify and enable the endpoint device.</span></span> <span data-ttu-id="ffa6e-157">Par exemple, si le chemin d’accès aux données du microphone comprend un multiplexeur, le système sélectionne automatiquement l’entrée du microphone dans le multiplexeur.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-157">For example, if the data path from the microphone includes a multiplexer, the system automatically selects the microphone input to the multiplexer.</span></span>

<span data-ttu-id="ffa6e-158">Le comportement du sous-système audio est plus fiable et déterministe si les applications, au lieu d’implémenter leurs propres algorithmes d’identification de point de terminaison, peuvent reléguer la tâche d’identification des appareils de point de terminaison au système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-158">The behavior of the audio subsystem is more reliable and deterministic if applications, instead of implementing their own endpoint-identification algorithms, can relegate the task of identifying endpoint devices to the operating system.</span></span> <span data-ttu-id="ffa6e-159">Les fournisseurs de logiciels n’ont plus besoin de vérifier que leurs algorithmes d’identification de point de terminaison fonctionnent correctement avec tous les périphériques et configurations matériels audio disponibles. ils peuvent simplement s’appuyer sur le système d’exploitation pour identifier les points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-159">Software vendors no longer need to verify that their endpoint-identification algorithms work correctly with all available audio hardware devices and configurations—they can simply rely on the operating system for endpoint identification.</span></span> <span data-ttu-id="ffa6e-160">De même, les fournisseurs de matériel n’ont plus besoin de vérifier que chaque application cliente appropriée peut facilement identifier tout périphérique de point de terminaison connecté à son adaptateur audio. il n’a besoin que de vérifier que le système d’exploitation peut identifier un périphérique de point de terminaison connecté à son adaptateur audio.</span><span class="sxs-lookup"><span data-stu-id="ffa6e-160">Similarly, hardware vendors no longer need to verify that every relevant client application can readily identify any endpoint device that is connected to their audio adapter—they need only to verify that the operating system can identify an endpoint device that is connected to their audio adapter.</span></span>

<span data-ttu-id="ffa6e-161">Les rubriques suivantes fournissent des informations supplémentaires sur les périphériques de point de terminaison audio :</span><span class="sxs-lookup"><span data-stu-id="ffa6e-161">The following topics provide additional information about audio endpoint devices:</span></span>

-   [<span data-ttu-id="ffa6e-162">À propos de l’API MMDevice</span><span class="sxs-lookup"><span data-stu-id="ffa6e-162">About MMDevice API</span></span>](mmdevice-api.md)
-   [<span data-ttu-id="ffa6e-163">Énumération des périphériques audio</span><span class="sxs-lookup"><span data-stu-id="ffa6e-163">Enumerating Audio Devices</span></span>](enumerating-audio-devices.md)
-   [<span data-ttu-id="ffa6e-164">Chaînes ID du point de terminaison</span><span class="sxs-lookup"><span data-stu-id="ffa6e-164">Endpoint ID Strings</span></span>](endpoint-id-strings.md)
-   [<span data-ttu-id="ffa6e-165">Propriétés de l’appareil</span><span class="sxs-lookup"><span data-stu-id="ffa6e-165">Device Properties</span></span>](device-properties.md)
-   [<span data-ttu-id="ffa6e-166">Événements de l’appareil</span><span class="sxs-lookup"><span data-stu-id="ffa6e-166">Device Events</span></span>](device-events.md)
-   [<span data-ttu-id="ffa6e-167">Rôles d’appareil</span><span class="sxs-lookup"><span data-stu-id="ffa6e-167">Device Roles</span></span>](device-roles.md)
-   [<span data-ttu-id="ffa6e-168">Formats d’appareil</span><span class="sxs-lookup"><span data-stu-id="ffa6e-168">Device Formats</span></span>](device-formats.md)

## <a name="related-topics"></a><span data-ttu-id="ffa6e-169">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="ffa6e-169">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ffa6e-170">Guide de programmation</span><span class="sxs-lookup"><span data-stu-id="ffa6e-170">Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 



