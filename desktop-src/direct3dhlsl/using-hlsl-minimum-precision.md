---
title: Utilisation de la précision minimale HLSL
description: À compter de Windows 8, les pilotes graphiques peuvent implémenter des types de données scalaires HLSL de précision minimale à l’aide d’une précision supérieure ou égale à la précision de bit spécifiée.
ms.assetid: 422B0C45-5CEB-4235-AD05-62D36C36CFC6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de7f66f35aef3e870edb4e8564a280be89ce34be
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103728165"
---
# <a name="using-hlsl-minimum-precision"></a><span data-ttu-id="0a164-103">Utilisation de la précision minimale HLSL</span><span class="sxs-lookup"><span data-stu-id="0a164-103">Using HLSL minimum precision</span></span>

<span data-ttu-id="0a164-104">À compter de Windows 8, les pilotes graphiques peuvent implémenter des [types de données scalaires HLSL](dx-graphics-hlsl-scalar.md) de précision minimale à l’aide d’une précision supérieure ou égale à la précision de bit spécifiée.</span><span class="sxs-lookup"><span data-stu-id="0a164-104">Starting with Windows 8, graphics drivers can implement minimum precision [HLSL scalar data types](dx-graphics-hlsl-scalar.md) by using any precision greater than or equal to their specified bit precision.</span></span> <span data-ttu-id="0a164-105">Lorsque votre code de nuanceur de précision minimale HLSL est utilisé sur le matériel qui implémente la précision minimale HLSL, vous utilisez moins de bande passante de mémoire et vous utilisez donc moins de puissance système.</span><span class="sxs-lookup"><span data-stu-id="0a164-105">When your HLSL minimum precision shader code is used on hardware that implements HLSL minimum precision, you use less memory bandwidth and as a result you also use less system power.</span></span>

<span data-ttu-id="0a164-106">Vous pouvez interroger la prise en charge de précision minimale que le pilote Graphics fournit en appelant [**ID3D11Device :: CheckFeatureSupport**](/windows/desktop/api/d3d11/nf-d3d11-id3d11device-checkfeaturesupport) avec la valeur de [**\_ \_ \_ \_ \_ prise en charge de l’outil nuanceur min précision de la fonctionnalité d3d11**](/windows/desktop/api/d3d11/ne-d3d11-d3d11_feature) .</span><span class="sxs-lookup"><span data-stu-id="0a164-106">You can query for the minimum precision support that the graphics driver provides by calling [**ID3D11Device::CheckFeatureSupport**](/windows/desktop/api/d3d11/nf-d3d11-id3d11device-checkfeaturesupport) with the [**D3D11\_FEATURE\_SHADER\_MIN\_PRECISION\_SUPPORT**](/windows/desktop/api/d3d11/ne-d3d11-d3d11_feature) value.</span></span> <span data-ttu-id="0a164-107">Pour plus d’informations, consultez [prise en charge de la précision minimale HLSL](/windows/desktop/direct3d11/direct3d-11-1-features).</span><span class="sxs-lookup"><span data-stu-id="0a164-107">For more info, see [HLSL minimum precision support](/windows/desktop/direct3d11/direct3d-11-1-features).</span></span>

-   [<span data-ttu-id="0a164-108">Déclarer des variables avec des types de données de précision minimale</span><span class="sxs-lookup"><span data-stu-id="0a164-108">Declare variables with minimum precision data types</span></span>](#declare-variables-with-minimum-precision-data-types)
-   [<span data-ttu-id="0a164-109">Test de votre code de nuanceur de précision minimal</span><span class="sxs-lookup"><span data-stu-id="0a164-109">Testing your minimum precision shader code</span></span>](#testing-your-minimum-precision-shader-code)
-   [<span data-ttu-id="0a164-110">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0a164-110">Related topics</span></span>](#related-topics)

## <a name="declare-variables-with-minimum-precision-data-types"></a><span data-ttu-id="0a164-111">Déclarer des variables avec des types de données de précision minimale</span><span class="sxs-lookup"><span data-stu-id="0a164-111">Declare variables with minimum precision data types</span></span>

<span data-ttu-id="0a164-112">Pour utiliser la précision minimale dans le code du nuanceur HLSL, déclarez des variables individuelles avec des types tels que **min16float** (**min16float4** pour un vecteur), **min16int**, **min10float**, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="0a164-112">To use minimum precision in HLSL shader code, declare individual variables with types like **min16float** (**min16float4** for a vector), **min16int**, **min10float**, and so on.</span></span> <span data-ttu-id="0a164-113">Avec ces variables, votre code de nuanceur indique qu’il n’a pas besoin de plus de précision que ce que les variables indiquent.</span><span class="sxs-lookup"><span data-stu-id="0a164-113">With these variables, your shader code indicates that it doesn’t require more precision than what the variables indicate.</span></span> <span data-ttu-id="0a164-114">Mais le matériel peut ignorer les indicateurs de précision minimale et s’exécuter avec une précision de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="0a164-114">But hardware can ignore the minimum precision indicators and run at full 32-bit precision.</span></span> <span data-ttu-id="0a164-115">Lorsque votre code de nuanceur est utilisé sur du matériel qui tire parti de la précision minimale, vous utilisez moins de bande passante de mémoire et, par conséquent, vous utilisez moins de puissance système tant que votre code de nuanceur n’attend pas une précision supérieure à celle spécifiée.</span><span class="sxs-lookup"><span data-stu-id="0a164-115">When your shader code is used on hardware that takes advantage of minimum precision, you use less memory bandwidth and as a result you also use less system power as long as your shader code doesn’t expect more precision than it specified.</span></span>

<span data-ttu-id="0a164-116">Vous n’avez pas besoin de créer plusieurs nuanceurs qui n’utilisent pas la précision minimale.</span><span class="sxs-lookup"><span data-stu-id="0a164-116">You don't need to author multiple shaders that do and don't use minimum precision.</span></span> <span data-ttu-id="0a164-117">Au lieu de cela, créez des nuanceurs avec une précision minimale, et les variables de précision minimale se comportent à une précision de 32 bits complète si le pilote graphique signale qu’il ne prend pas en charge de précision minimale.</span><span class="sxs-lookup"><span data-stu-id="0a164-117">Instead, create shaders with minimum precision, and the minimum precision variables behave at full 32-bit precision if the graphics driver reports that it doesn't support any minimum precision.</span></span> <span data-ttu-id="0a164-118">Les nuanceurs de précision minimale HLSL ne fonctionnent pas sur les systèmes d’exploitation antérieurs à Windows 8. par conséquent, si vous envisagez de cibler des systèmes d’exploitation antérieurs, vous devez créer plusieurs nuanceurs, certains d’entre eux et d’autres qui n’utilisent pas la précision minimale.</span><span class="sxs-lookup"><span data-stu-id="0a164-118">HLSL minimum precision shaders don't work on operating systems earlier than Windows 8 so if you plan to target earlier operating systems, you'll need to author multiple shaders, some that do and others that don't use minimum precision.</span></span>

> [!Note]  
> <span data-ttu-id="0a164-119">N’effectuez pas de commutations de données entre différents niveaux de précision au sein d’un nuanceur, car ces types de conversions sont inutiles et réduisent les performances.</span><span class="sxs-lookup"><span data-stu-id="0a164-119">Don't make data switches between different precision levels within a shader because these types of conversions are wasteful and reduce performance.</span></span> <span data-ttu-id="0a164-120">L’exception est que les constantes de nuanceur sont toujours 32 bits, mais les fournisseurs peuvent concevoir du matériel graphique qui peut librement passer à la plus basse précision que la lecture des instructions HLSL peut utiliser.</span><span class="sxs-lookup"><span data-stu-id="0a164-120">The exception is that shader constants are still always 32 bit, but vendors can design graphics hardware that can freely down-convert to whatever lower precision the HLSL instruction reading might use.</span></span>

 

<span data-ttu-id="0a164-121">À l’aide de la précision minimale, vous pouvez contrôler la précision des calculs dans différentes parties de votre code de nuanceur.</span><span class="sxs-lookup"><span data-stu-id="0a164-121">By using minimum precision, you can control the precision of computations in various parts of your shader code.</span></span>

<span data-ttu-id="0a164-122">Les règles de précision minimale HLSL sont similaires à C/C++, où les types dans une expression déterminent la précision de l’opération, et non le type dans lequel les types sont finalement écrits.</span><span class="sxs-lookup"><span data-stu-id="0a164-122">The rules for HLSL minimum precision are similar to C/C++, where the types in an expression determine the precision of the operation, not the type being eventually written to.</span></span>

## <a name="testing-your-minimum-precision-shader-code"></a><span data-ttu-id="0a164-123">Test de votre code de nuanceur de précision minimal</span><span class="sxs-lookup"><span data-stu-id="0a164-123">Testing your minimum precision shader code</span></span>

<span data-ttu-id="0a164-124">Le rastériseur de référence ([**\_ référence de \_ type \_ de pilote D3D**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) vous donne une idée approximative de la façon dont la précision minimale de votre code de nuanceur HLSL se comporte en quantifiant chaque instruction HLSL sur la précision spécifiée.</span><span class="sxs-lookup"><span data-stu-id="0a164-124">The reference rasterizer ([**D3D\_DRIVER\_TYPE\_REFERENCE**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) gives you a rough idea of how minimum precision in your HLSL shader code behaves by quantizing each HLSL instruction to the specified precision.</span></span> <span data-ttu-id="0a164-125">Cela vous permet de découvrir du code qui peut accidentellement reposer sur une précision supérieure à la précision minimale.</span><span class="sxs-lookup"><span data-stu-id="0a164-125">This helps you discover code that might accidentally rely on more than the minimum precision.</span></span> <span data-ttu-id="0a164-126">Le rastériseur de référence ne s’exécute pas plus rapidement lorsque votre code de nuanceur HLSL utilise une précision minimale, mais vous pouvez l’utiliser pour vérifier l’exactitude de votre code.</span><span class="sxs-lookup"><span data-stu-id="0a164-126">The reference rasterizer doesn’t run any faster when your HLSL shader code uses minimum precision, but you can use it to verify the correctness of your code.</span></span> <span data-ttu-id="0a164-127">[Warp](/windows/desktop/direct3d11/overviews-direct3d-11-devices-create-warp) ([**\_ type de pilote D3D \_ \_ Warp**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) ne prend pas en charge l’utilisation de la précision minimale dans le code du nuanceur HLSL. WARP s’exécute uniquement avec une précision de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="0a164-127">[WARP](/windows/desktop/direct3d11/overviews-direct3d-11-devices-create-warp) ([**D3D\_DRIVER\_TYPE\_WARP**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) doesn’t support using minimum precision in HLSL shader code; WARP just runs at full 32-bit precision.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0a164-128">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0a164-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0a164-129">Guide de programmation pour HLSL</span><span class="sxs-lookup"><span data-stu-id="0a164-129">Programming Guide for HLSL</span></span>](dx-graphics-hlsl-pguide.md)
</dt> </dl>

 

 