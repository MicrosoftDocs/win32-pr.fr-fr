---
title: À propos des menus
description: Cette rubrique traite des menus.
ms.assetid: fd0b26f1-93cd-421b-9097-8502ab7681e9
keywords:
- ressources, menus
- menus, à propos de
- sous-menus
- barres de menus
- menus de niveau supérieur
- menus contextuels
- menus déroulants
- menus, niveau supérieur
- menus, fenêtres contextuelles
- menus, liste déroulante
- noms de menu
- menus, raccourci
- menus, fenêtre
- menus, système
- menus, contrôle
- menus contextuels
- Menu Fenêtre
- Menu système
- Menu de contrôle
- identificateurs d’aide
- poignées de menu
- éléments de menu
- éléments de commande
- identificateurs d’élément de menu
- position de l’élément de menu
- sélection d’éléments de menu
- effacement des éléments de menu
- menus owner-drawn
- menus, owner-drawn
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ed5d42eb42aaaaa16eef0b5b118adcfe0f91156e
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104381852"
---
# <a name="about-menus"></a><span data-ttu-id="71c20-132">À propos des menus</span><span class="sxs-lookup"><span data-stu-id="71c20-132">About Menus</span></span>

<span data-ttu-id="71c20-133">Un *menu* est une liste d’éléments qui spécifient des options ou des groupes d’options (un sous-menu) pour une application.</span><span class="sxs-lookup"><span data-stu-id="71c20-133">A *menu* is a list of items that specify options or groups of options (a submenu) for an application.</span></span> <span data-ttu-id="71c20-134">Le fait de cliquer sur un élément de menu ouvre un sous-menu ou provoque l’exécution d’une commande par l’application.</span><span class="sxs-lookup"><span data-stu-id="71c20-134">Clicking a menu item opens a submenu or causes the application to carry out a command.</span></span> <span data-ttu-id="71c20-135">Cette section fournit des informations sur les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="71c20-135">This section provides information on the following topics:</span></span>

-   [<span data-ttu-id="71c20-136">Menus et barres de menus</span><span class="sxs-lookup"><span data-stu-id="71c20-136">Menu Bars and Menus</span></span>](#menu-bars-and-menus)
    -   [<span data-ttu-id="71c20-137">Menus contextuels</span><span class="sxs-lookup"><span data-stu-id="71c20-137">Shortcut Menus</span></span>](#shortcut-menus)
    -   [<span data-ttu-id="71c20-138">Menu fenêtre</span><span class="sxs-lookup"><span data-stu-id="71c20-138">The Window Menu</span></span>](#the-window-menu)
    -   [<span data-ttu-id="71c20-139">Identificateur d’aide</span><span class="sxs-lookup"><span data-stu-id="71c20-139">Help Identifier</span></span>](#help-identifier)
-   [<span data-ttu-id="71c20-140">Accès au clavier à des menus</span><span class="sxs-lookup"><span data-stu-id="71c20-140">Keyboard Access to Menus</span></span>](#keyboard-access-to-menus)
    -   [<span data-ttu-id="71c20-141">Interface clavier standard</span><span class="sxs-lookup"><span data-stu-id="71c20-141">Standard Keyboard Interface</span></span>](#standard-keyboard-interface)
    -   [<span data-ttu-id="71c20-142">Touches d’accès au menu</span><span class="sxs-lookup"><span data-stu-id="71c20-142">Menu Access Keys</span></span>](#menu-access-keys)
    -   [<span data-ttu-id="71c20-143">Touches de raccourci du menu</span><span class="sxs-lookup"><span data-stu-id="71c20-143">Menu Shortcut Keys</span></span>](#menu-shortcut-keys)
-   [<span data-ttu-id="71c20-144">Création de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-144">Menu Creation</span></span>](#menu-creation)
    -   [<span data-ttu-id="71c20-145">Ressources de modèle de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-145">Menu Template Resources</span></span>](#menu-template-resources)
    -   [<span data-ttu-id="71c20-146">Modèle de menu en mémoire</span><span class="sxs-lookup"><span data-stu-id="71c20-146">Menu Template in Memory</span></span>](#menu-template-in-memory)
    -   [<span data-ttu-id="71c20-147">Poignées de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-147">Menu Handles</span></span>](#menu-handles)
    -   [<span data-ttu-id="71c20-148">Fonctions de création de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-148">Menu Creation Functions</span></span>](#menu-creation-functions)
    -   [<span data-ttu-id="71c20-149">Affichage du menu</span><span class="sxs-lookup"><span data-stu-id="71c20-149">Menu Display</span></span>](#menu-display)
    -   [<span data-ttu-id="71c20-150">Menus de la classe de fenêtre</span><span class="sxs-lookup"><span data-stu-id="71c20-150">Window Class Menus</span></span>](#window-class-menus)
-   [<span data-ttu-id="71c20-151">Éléments de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-151">Menu Items</span></span>](#menu-items)
    -   [<span data-ttu-id="71c20-152">Éléments de commande et éléments qui ouvrent des sous-menus</span><span class="sxs-lookup"><span data-stu-id="71c20-152">Command Items and Items that Open Submenus</span></span>](#command-items-and-items-that-open-submenus)
    -   [<span data-ttu-id="71c20-153">Identificateur d’élément de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-153">Menu-Item Identifier</span></span>](#menu-item-identifier)
    -   [<span data-ttu-id="71c20-154">Position de l’élément de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-154">Menu-Item Position</span></span>](#menu-item-position)
    -   [<span data-ttu-id="71c20-155">Accès par programmation aux éléments de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-155">Accessing Menu Items Programmatically</span></span>](#accessing-menu-items-programmatically)
    -   [<span data-ttu-id="71c20-156">Éléments de menu par défaut</span><span class="sxs-lookup"><span data-stu-id="71c20-156">Default Menu Items</span></span>](#default-menu-items)
    -   [<span data-ttu-id="71c20-157">Éléments de menu sélectionnés et désactivés</span><span class="sxs-lookup"><span data-stu-id="71c20-157">Selected and Clear Menu Items</span></span>](#selected-and-clear-menu-items)
    -   [<span data-ttu-id="71c20-158">Éléments de menu activé, grisé et désactivé</span><span class="sxs-lookup"><span data-stu-id="71c20-158">Enabled, Grayed, and Disabled Menu Items</span></span>](#enabled-grayed-and-disabled-menu-items)
    -   [<span data-ttu-id="71c20-159">Éléments de menu en surbrillance</span><span class="sxs-lookup"><span data-stu-id="71c20-159">Highlighted Menu Items</span></span>](#highlighted-menu-items)
    -   [<span data-ttu-id="71c20-160">Éléments de menu owner-drawn</span><span class="sxs-lookup"><span data-stu-id="71c20-160">Owner-Drawn Menu Items</span></span>](#owner-drawn-menu-items)
    -   [<span data-ttu-id="71c20-161">Séparateurs d’éléments de menu et sauts de ligne</span><span class="sxs-lookup"><span data-stu-id="71c20-161">Menu Item Separators and Line Breaks</span></span>](#menu-item-separators-and-line-breaks)
-   [<span data-ttu-id="71c20-162">Messages utilisés avec les menus</span><span class="sxs-lookup"><span data-stu-id="71c20-162">Messages Used with Menus</span></span>](#messages-used-with-menus)
-   [<span data-ttu-id="71c20-163">Destruction de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-163">Menu Destruction</span></span>](#menu-destruction)

## <a name="menu-bars-and-menus"></a><span data-ttu-id="71c20-164">Menus et barres de menus</span><span class="sxs-lookup"><span data-stu-id="71c20-164">Menu Bars and Menus</span></span>

<span data-ttu-id="71c20-165">Un menu est organisé dans une hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="71c20-165">A menu is arranged in a hierarchy.</span></span> <span data-ttu-id="71c20-166">Au niveau supérieur de la hiérarchie se trouve la *barre de menus*. qui contient une liste de *menus*, qui peuvent à leur tour contenir des *sous-menus*.</span><span class="sxs-lookup"><span data-stu-id="71c20-166">At the top level of the hierarchy is the *menu bar*; which contains a list of *menus*, which in turn can contain *submenus*.</span></span> <span data-ttu-id="71c20-167">Une barre de menus est parfois appelée *menu de niveau supérieur*, tandis que les menus et les sous-menus sont également appelés *menus contextuels*.</span><span class="sxs-lookup"><span data-stu-id="71c20-167">A menu bar is sometimes called a *top-level menu*, and the menus and submenus are also known as *pop-up menus*.</span></span>

<span data-ttu-id="71c20-168">Un élément de menu peut soit exécuter une commande, soit ouvrir un sous-menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-168">A menu item can either carry out a command or open a submenu.</span></span> <span data-ttu-id="71c20-169">Un élément qui exécute une commande est appelé un *élément de commande* ou une *commande*.</span><span class="sxs-lookup"><span data-stu-id="71c20-169">An item that carries out a command is called a *command item* or a *command*.</span></span>

<span data-ttu-id="71c20-170">Un élément de la barre de menus ouvre presque toujours un menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-170">An item on the menu bar almost always opens a menu.</span></span> <span data-ttu-id="71c20-171">Les barres de menus contiennent rarement des éléments de commande.</span><span class="sxs-lookup"><span data-stu-id="71c20-171">Menu bars rarely contain command items.</span></span> <span data-ttu-id="71c20-172">Un menu ouvert à partir de la barre de menus descend de la barre de menus et est parfois appelé un *menu déroulant*.</span><span class="sxs-lookup"><span data-stu-id="71c20-172">A menu opened from the menu bar drops down from the menu bar and is sometimes called a *drop-down menu*.</span></span> <span data-ttu-id="71c20-173">Lorsqu’un menu déroulant s’affiche, il est attaché à la barre de menus.</span><span class="sxs-lookup"><span data-stu-id="71c20-173">When a drop-down menu is displayed, it is attached to the menu bar.</span></span> <span data-ttu-id="71c20-174">Un élément de menu de la barre de menus qui ouvre un menu déroulant est également appelé un *nom de menu*.</span><span class="sxs-lookup"><span data-stu-id="71c20-174">A menu item on the menu bar that opens a drop-down menu is also called a *menu name*.</span></span>

<span data-ttu-id="71c20-175">Les noms de menu d’une barre de menus représentent les principales catégories de commandes fournies par une application.</span><span class="sxs-lookup"><span data-stu-id="71c20-175">The menu names on a menu bar represent the main categories of commands that an application provides.</span></span> <span data-ttu-id="71c20-176">La sélection d’un nom de menu dans la barre de menus ouvre généralement un menu dont les éléments de menu correspondent aux commandes d’une catégorie.</span><span class="sxs-lookup"><span data-stu-id="71c20-176">Selecting a menu name from the menu bar typically opens a menu whose menu items correspond to the commands in a category.</span></span> <span data-ttu-id="71c20-177">Par exemple, une barre de menus peut contenir un nom de menu de **fichier** qui, lorsque l’utilisateur clique dessus, active un menu avec des éléments de menu tels que **nouveau**, **ouvrir** et **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="71c20-177">For example, a menu bar might contain a **File** menu name that, when clicked by the user, activates a menu with menu items such as **New**, **Open**, and **Save**.</span></span> <span data-ttu-id="71c20-178">Pour obtenir des informations sur une barre de menus, appelez [**GetMenuBarInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenubarinfo).</span><span class="sxs-lookup"><span data-stu-id="71c20-178">To get information about a menu bar, call [**GetMenuBarInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenubarinfo).</span></span>

<span data-ttu-id="71c20-179">Seule une fenêtre superposée ou contextuelle peut contenir une barre de menus ; une fenêtre enfant ne peut pas en contenir une.</span><span class="sxs-lookup"><span data-stu-id="71c20-179">Only an overlapped or pop-up window can contain a menu bar; a child window cannot contain one.</span></span> <span data-ttu-id="71c20-180">Si la fenêtre a une barre de titre, le système positionne la barre de menus juste en dessous.</span><span class="sxs-lookup"><span data-stu-id="71c20-180">If the window has a title bar, the system positions the menu bar just below it.</span></span> <span data-ttu-id="71c20-181">Une barre de menus est toujours visible.</span><span class="sxs-lookup"><span data-stu-id="71c20-181">A menu bar is always visible.</span></span> <span data-ttu-id="71c20-182">Toutefois, un sous-menu n’est pas visible jusqu’à ce que l’utilisateur sélectionne un élément de menu qui l’active.</span><span class="sxs-lookup"><span data-stu-id="71c20-182">A submenu is not visible, however, until the user selects a menu item that activates it.</span></span> <span data-ttu-id="71c20-183">Pour plus d’informations sur les fenêtres superposées et les fenêtres indépendantes, consultez [types de fenêtre](/windows/desktop/winmsg/window-features).</span><span class="sxs-lookup"><span data-stu-id="71c20-183">For more information about overlapped and pop-up windows, see [Window Types](/windows/desktop/winmsg/window-features).</span></span>

<span data-ttu-id="71c20-184">Chaque menu doit avoir une fenêtre propriétaire.</span><span class="sxs-lookup"><span data-stu-id="71c20-184">Each menu must have an owner window.</span></span> <span data-ttu-id="71c20-185">Le système envoie des messages à la fenêtre propriétaire d’un menu lorsque l’utilisateur sélectionne le menu ou choisit un élément dans le menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-185">The system sends messages to a menu's owner window when the user selects the menu or chooses an item from the menu.</span></span>

<span data-ttu-id="71c20-186">Cette section décrit les rubriques suivantes.</span><span class="sxs-lookup"><span data-stu-id="71c20-186">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="71c20-187">Menus contextuels</span><span class="sxs-lookup"><span data-stu-id="71c20-187">Shortcut Menus</span></span>](#shortcut-menus)
-   [<span data-ttu-id="71c20-188">Menu fenêtre</span><span class="sxs-lookup"><span data-stu-id="71c20-188">The Window Menu</span></span>](#the-window-menu)
-   [<span data-ttu-id="71c20-189">Identificateur d’aide</span><span class="sxs-lookup"><span data-stu-id="71c20-189">Help Identifier</span></span>](#help-identifier)

### <a name="shortcut-menus"></a><span data-ttu-id="71c20-190">Menus contextuels</span><span class="sxs-lookup"><span data-stu-id="71c20-190">Shortcut Menus</span></span>

<span data-ttu-id="71c20-191">Le système fournit également des *menus contextuels*.</span><span class="sxs-lookup"><span data-stu-id="71c20-191">The system also provides *shortcut menus*.</span></span> <span data-ttu-id="71c20-192">Un menu contextuel n’est pas attaché à la barre de menus ; elle peut apparaître n’importe où sur l’écran.</span><span class="sxs-lookup"><span data-stu-id="71c20-192">A shortcut menu is not attached to the menu bar; it can appear anywhere on the screen.</span></span> <span data-ttu-id="71c20-193">Une application associe généralement un menu contextuel à une partie d’une fenêtre, telle que la zone cliente, ou à un objet spécifique, tel qu’une icône.</span><span class="sxs-lookup"><span data-stu-id="71c20-193">An application typically associates a shortcut menu with a portion of a window, such as the client area, or with a specific object, such as an icon.</span></span> <span data-ttu-id="71c20-194">C’est la raison pour laquelle ces menus sont également appelés *menus contextuels*.</span><span class="sxs-lookup"><span data-stu-id="71c20-194">For this reason, these menus are also called *context menus*.</span></span>

<span data-ttu-id="71c20-195">Un menu contextuel reste masqué jusqu’à ce que l’utilisateur l’active, en général en cliquant avec le bouton droit sur une sélection, une barre d’outils ou un bouton de la barre des tâches.</span><span class="sxs-lookup"><span data-stu-id="71c20-195">A shortcut menu remains hidden until the user activates it, typically by right-clicking a selection, a toolbar, or a taskbar button.</span></span> <span data-ttu-id="71c20-196">Le menu s’affiche généralement à la position du point d’insertion ou du curseur de la souris.</span><span class="sxs-lookup"><span data-stu-id="71c20-196">The menu is usually displayed at the position of the caret or mouse cursor.</span></span>

### <a name="the-window-menu"></a><span data-ttu-id="71c20-197">Menu fenêtre</span><span class="sxs-lookup"><span data-stu-id="71c20-197">The Window Menu</span></span>

<span data-ttu-id="71c20-198">Le menu **fenêtre** (également appelé menu **système** ou menu **contrôle** ) est un menu contextuel défini et géré presque exclusivement par le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="71c20-198">The **Window** menu (also known as the **System** menu or **Control** menu) is a pop-up menu defined and managed almost exclusively by the operating system.</span></span> <span data-ttu-id="71c20-199">L’utilisateur peut ouvrir le menu fenêtre en cliquant sur l’icône d’application dans la barre de titre ou en cliquant avec le bouton droit n’importe où dans la barre de titre.</span><span class="sxs-lookup"><span data-stu-id="71c20-199">The user can open the window menu by clicking the application icon on the title bar or by right-clicking anywhere on the title bar.</span></span>

<span data-ttu-id="71c20-200">Le menu **fenêtre** fournit un ensemble standard d’éléments de menu que l’utilisateur peut choisir pour modifier la taille ou la position d’une fenêtre, ou fermer l’application.</span><span class="sxs-lookup"><span data-stu-id="71c20-200">The **Window** menu provides a standard set of menu items that the user can choose to change a window's size or position, or close the application.</span></span> <span data-ttu-id="71c20-201">Les éléments du menu fenêtre peuvent être ajoutés, supprimés et modifiés, mais la plupart des applications utilisent simplement l’ensemble standard d’éléments de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-201">Items on the window menu can be added, deleted, and modified, but most applications just use the standard set of menu items.</span></span> <span data-ttu-id="71c20-202">Une fenêtre superposée, contextuelle ou enfant peut avoir un menu fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-202">An overlapped, pop-up, or child window can have a window menu.</span></span> <span data-ttu-id="71c20-203">Il est rare qu’une fenêtre Overlapped ou contextuelle n’inclue pas de menu fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-203">It is uncommon for an overlapped or pop-up window not to include a window menu.</span></span>

<span data-ttu-id="71c20-204">Quand l’utilisateur choisit une commande dans le menu **fenêtre** , le système envoie un message [**WM \_ SYSCOMMAND**](wm-syscommand.md) à la fenêtre propriétaire du menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-204">When the user chooses a command from the **Window** menu, the system sends a [**WM\_SYSCOMMAND**](wm-syscommand.md) message to the menu's owner window.</span></span> <span data-ttu-id="71c20-205">Dans la plupart des applications, la procédure de fenêtre ne traite pas les messages du menu fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-205">In most applications, the window procedure does not process messages from the window menu.</span></span> <span data-ttu-id="71c20-206">Au lieu de cela, il transmet simplement les messages à la fonction [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) pour le traitement par défaut du message par le système.</span><span class="sxs-lookup"><span data-stu-id="71c20-206">Instead, it simply passes the messages to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function for system-default processing of the message.</span></span> <span data-ttu-id="71c20-207">Si une application ajoute une commande au menu fenêtre, la procédure de fenêtre doit traiter la commande.</span><span class="sxs-lookup"><span data-stu-id="71c20-207">If an application adds a command to the window menu, the window procedure must process the command.</span></span>

<span data-ttu-id="71c20-208">Une application peut utiliser la fonction [**GetSystemMenu**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) pour créer une copie du menu de la fenêtre par défaut à modifier.</span><span class="sxs-lookup"><span data-stu-id="71c20-208">An application can use the [**GetSystemMenu**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) function to create a copy of the default window menu to modify.</span></span> <span data-ttu-id="71c20-209">Toute fenêtre qui n’utilise pas la fonction **GetSystemMenu** pour faire de sa propre copie du menu fenêtre reçoit le menu fenêtre standard.</span><span class="sxs-lookup"><span data-stu-id="71c20-209">Any window that does not use the **GetSystemMenu** function to make its own copy of the window menu receives the standard window menu.</span></span>

### <a name="help-identifier"></a><span data-ttu-id="71c20-210">Identificateur d’aide</span><span class="sxs-lookup"><span data-stu-id="71c20-210">Help Identifier</span></span>

<span data-ttu-id="71c20-211">Le menu, le menu, le sous-menu et le menu contextuel associés à chaque barre de menus sont des identificateurs d’aide.</span><span class="sxs-lookup"><span data-stu-id="71c20-211">Associated with each menu bar, menu, submenu, and shortcut menu is a help identifier.</span></span> <span data-ttu-id="71c20-212">Si l’utilisateur appuie sur la touche F1 alors que le menu est actif, cette valeur est envoyée à la fenêtre propriétaire dans le cadre d’un message d' [**\_ aide WM**](../shell/wm-help.md) .</span><span class="sxs-lookup"><span data-stu-id="71c20-212">If the user presses the F1 key while the menu is active, this value is sent to the owner window as part of a [**WM\_HELP**](../shell/wm-help.md) message.</span></span>

## <a name="keyboard-access-to-menus"></a><span data-ttu-id="71c20-213">Accès au clavier à des menus</span><span class="sxs-lookup"><span data-stu-id="71c20-213">Keyboard Access to Menus</span></span>

<span data-ttu-id="71c20-214">Le système fournit une interface clavier standard pour les menus.</span><span class="sxs-lookup"><span data-stu-id="71c20-214">The system provides a standard keyboard interface for menus.</span></span> <span data-ttu-id="71c20-215">Vous pouvez améliorer cette interface en fournissant des clés d’accès mnémoniques et des touches de raccourci (Accélérateur) pour vos éléments de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-215">You can enhance this interface by providing mnemonic access keys and shortcut (accelerator) keys for your menu items.</span></span>

<span data-ttu-id="71c20-216">Les rubriques suivantes décrivent l’interface clavier standard, les touches d’accès rapide et les touches de raccourci :</span><span class="sxs-lookup"><span data-stu-id="71c20-216">The following topics describe the standard keyboard interface, access keys, and shortcut keys:</span></span>

-   [<span data-ttu-id="71c20-217">Interface clavier standard</span><span class="sxs-lookup"><span data-stu-id="71c20-217">Standard Keyboard Interface</span></span>](#standard-keyboard-interface)
-   [<span data-ttu-id="71c20-218">Touches d’accès au menu</span><span class="sxs-lookup"><span data-stu-id="71c20-218">Menu Access Keys</span></span>](#menu-access-keys)
-   [<span data-ttu-id="71c20-219">Touches de raccourci du menu</span><span class="sxs-lookup"><span data-stu-id="71c20-219">Menu Shortcut Keys</span></span>](#menu-shortcut-keys)

### <a name="standard-keyboard-interface"></a><span data-ttu-id="71c20-220">Interface clavier standard</span><span class="sxs-lookup"><span data-stu-id="71c20-220">Standard Keyboard Interface</span></span>

<span data-ttu-id="71c20-221">Le système est conçu pour fonctionner avec ou sans souris ou autre dispositif de pointage.</span><span class="sxs-lookup"><span data-stu-id="71c20-221">The system is designed to work with or without a mouse or other pointing device.</span></span> <span data-ttu-id="71c20-222">Étant donné que le système fournit une interface clavier standard, l’utilisateur peut utiliser le clavier pour sélectionner les éléments de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-222">Because the system provides a standard keyboard interface, the user can use the keyboard to select menu items.</span></span> <span data-ttu-id="71c20-223">Cette interface de clavier n’a pas besoin de code spécial.</span><span class="sxs-lookup"><span data-stu-id="71c20-223">This keyboard interface does not need special code.</span></span> <span data-ttu-id="71c20-224">Une application reçoit un message de commande si l’utilisateur sélectionne un élément de menu par le biais du clavier ou à l’aide d’une souris.</span><span class="sxs-lookup"><span data-stu-id="71c20-224">An application receives a command message whether the user selects a menu item through the keyboard or by using a mouse.</span></span> <span data-ttu-id="71c20-225">L’interface clavier standard traite les séquences de touches suivantes.</span><span class="sxs-lookup"><span data-stu-id="71c20-225">The standard keyboard interface processes the following keystrokes.</span></span>



| <span data-ttu-id="71c20-226">Séquence de touches</span><span class="sxs-lookup"><span data-stu-id="71c20-226">Keystroke</span></span>              | <span data-ttu-id="71c20-227">Action</span><span class="sxs-lookup"><span data-stu-id="71c20-227">Action</span></span>                                                                                                                                                                                                                                   |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="71c20-228">Caractère alphabétique</span><span class="sxs-lookup"><span data-stu-id="71c20-228">Alphabetical character</span></span> | <span data-ttu-id="71c20-229">Sélectionne le premier élément de menu avec le caractère spécifié comme clé d’accès.</span><span class="sxs-lookup"><span data-stu-id="71c20-229">Selects the first menu item with the specified character as its access key.</span></span> <span data-ttu-id="71c20-230">Si l’élément sélectionné appelle un menu, le menu s’affiche et le premier élément est mis en surbrillance.</span><span class="sxs-lookup"><span data-stu-id="71c20-230">If the selected item invokes a menu, the menu is displayed and the first item is highlighted.</span></span> <span data-ttu-id="71c20-231">Dans le cas contraire, l’élément de menu est choisi.</span><span class="sxs-lookup"><span data-stu-id="71c20-231">Otherwise, the menu item is chosen.</span></span>                            |
| <span data-ttu-id="71c20-232">Alt</span><span class="sxs-lookup"><span data-stu-id="71c20-232">ALT</span></span>                    | <span data-ttu-id="71c20-233">Active ou désactive le mode de barre de menus.</span><span class="sxs-lookup"><span data-stu-id="71c20-233">Toggles in and out of menu bar mode.</span></span>                                                                                                                                                                                                     |
| <span data-ttu-id="71c20-234">ALT + BARRE D’ESPACE</span><span class="sxs-lookup"><span data-stu-id="71c20-234">ALT+SPACEBAR</span></span>           | <span data-ttu-id="71c20-235">Affiche le menu fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-235">Displays the window menu.</span></span>                                                                                                                                                                                                                |
| <span data-ttu-id="71c20-236">ENTRÉE</span><span class="sxs-lookup"><span data-stu-id="71c20-236">ENTER</span></span>                  | <span data-ttu-id="71c20-237">Active un menu et sélectionne le premier élément de menu si un menu est associé à un élément.</span><span class="sxs-lookup"><span data-stu-id="71c20-237">Activates a menu and selects the first menu item if an item has a menu associated with it.</span></span> <span data-ttu-id="71c20-238">Dans le cas contraire, cette séquence de touches choisit l’élément comme si l’utilisateur avait relâché le bouton de la souris pendant que l’élément était sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-238">Otherwise, this keystroke chooses the item as if the user released the mouse button while the item was selected.</span></span>                              |
| <span data-ttu-id="71c20-239">ÉCHAP</span><span class="sxs-lookup"><span data-stu-id="71c20-239">ESC</span></span>                    | <span data-ttu-id="71c20-240">Quitte le mode de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-240">Exits menu mode.</span></span>                                                                                                                                                                                                                         |
| <span data-ttu-id="71c20-241">Gauche</span><span class="sxs-lookup"><span data-stu-id="71c20-241">LEFT ARROW</span></span>             | <span data-ttu-id="71c20-242">Effectue un cycle vers l’élément de menu de niveau supérieur précédent.</span><span class="sxs-lookup"><span data-stu-id="71c20-242">Cycles to the previous top-level menu item.</span></span> <span data-ttu-id="71c20-243">Les éléments de menu de niveau supérieur incluent les noms de menu et le menu fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-243">Top-level menu items include menu names and the window menu.</span></span> <span data-ttu-id="71c20-244">Si l’élément sélectionné est dans un menu, la colonne précédente du menu est sélectionnée ou l’élément de menu de niveau supérieur précédent est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-244">If the selected item is in a menu, the previous column in the menu is selected or the previous top-level menu item is selected.</span></span> |
| <span data-ttu-id="71c20-245">Flèche droite</span><span class="sxs-lookup"><span data-stu-id="71c20-245">RIGHT ARROW</span></span>            | <span data-ttu-id="71c20-246">Fonctionne comme la touche de direction gauche, sauf dans la direction opposée.</span><span class="sxs-lookup"><span data-stu-id="71c20-246">Works like the LEFT ARROW key, except in the opposite direction.</span></span> <span data-ttu-id="71c20-247">Dans les menus, cette séquence de touches avance d’une colonne ; Lorsque l’élément actuellement sélectionné se trouve dans la colonne située à l’extrême droite, le menu suivant est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-247">In menus, this keystroke moves forward one column; when the currently selected item is in the far-right column, the next menu is selected.</span></span>                              |
| <span data-ttu-id="71c20-248">FLÈCHES haut ou bas</span><span class="sxs-lookup"><span data-stu-id="71c20-248">UP or DOWN ARROWS</span></span>      | <span data-ttu-id="71c20-249">Active un menu quand vous appuyez sur un nom de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-249">Activates a menu when pressed in a menu name.</span></span> <span data-ttu-id="71c20-250">Quand vous appuyez sur un menu, la touche de direction haut sélectionne l’élément précédent. la touche de direction bas sélectionne l’élément suivant.</span><span class="sxs-lookup"><span data-stu-id="71c20-250">When pressed in a menu, the UP ARROW keystroke selects the previous item; the DOWN ARROW keystroke selects the next item.</span></span>                                                                  |



 

### <a name="menu-access-keys"></a><span data-ttu-id="71c20-251">Touches d’accès au menu</span><span class="sxs-lookup"><span data-stu-id="71c20-251">Menu Access Keys</span></span>

<span data-ttu-id="71c20-252">L’interface clavier standard pour les menus peut être améliorée en ajoutant des touches d’accès (mnémoniques) aux éléments de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-252">The standard keyboard interface for menus can be enhanced by adding access keys (mnemonics) to menu items.</span></span> <span data-ttu-id="71c20-253">Une touche d’accès est une lettre soulignée dans le texte d’un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-253">An access key is an underlined letter in the text of a menu item.</span></span> <span data-ttu-id="71c20-254">Lorsqu’un menu est actif, l’utilisateur peut sélectionner un élément de menu en appuyant sur la touche qui correspond à la lettre soulignée de l’élément.</span><span class="sxs-lookup"><span data-stu-id="71c20-254">When a menu is active, the user can select a menu item by pressing the key that corresponds to the item's underlined letter.</span></span> <span data-ttu-id="71c20-255">L’utilisateur rend la barre de menus active en appuyant sur la touche ALT pour mettre en surbrillance le premier élément de la barre de menus.</span><span class="sxs-lookup"><span data-stu-id="71c20-255">The user makes the menu bar active by pressing the ALT key to highlight the first item on the menu bar.</span></span> <span data-ttu-id="71c20-256">Un menu est actif lorsqu’il est affiché.</span><span class="sxs-lookup"><span data-stu-id="71c20-256">A menu is active when it is displayed.</span></span>

<span data-ttu-id="71c20-257">Pour créer une touche d’accès pour un élément de menu, faites précéder tout caractère de la chaîne de texte de l’élément d’une esperluette.</span><span class="sxs-lookup"><span data-stu-id="71c20-257">To create an access key for a menu item, precede any character in the item's text string with an ampersand.</span></span> <span data-ttu-id="71c20-258">Par exemple, la chaîne de texte « &Move » amène le système à souligner la lettre « M ».</span><span class="sxs-lookup"><span data-stu-id="71c20-258">For example, the text string "&Move" causes the system to underline the letter "M".</span></span>

### <a name="menu-shortcut-keys"></a><span data-ttu-id="71c20-259">Touches de raccourci du menu</span><span class="sxs-lookup"><span data-stu-id="71c20-259">Menu Shortcut Keys</span></span>

<span data-ttu-id="71c20-260">En plus de disposer d’une touche d’accès rapide, un élément de menu peut être associé à une touche de raccourci.</span><span class="sxs-lookup"><span data-stu-id="71c20-260">In addition to having an access key, a menu item can have a shortcut key associated with it.</span></span> <span data-ttu-id="71c20-261">Une touche de raccourci est différente d’une touche d’accès rapide, car il n’est pas nécessaire que le menu soit actif pour que la touche de raccourci fonctionne.</span><span class="sxs-lookup"><span data-stu-id="71c20-261">A shortcut key is different from an access key, because the menu does not have to be active for the shortcut key to work.</span></span> <span data-ttu-id="71c20-262">En outre, une touche d’accès rapide est *toujours* associée à un élément de menu, tandis qu’une touche de raccourci est *généralement* (mais n’a pas besoin d’être) associée à un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-262">Also, an access key is *always* associated with a menu item, while an shortcut key is *usually* (but does not have to be) associated with a menu item.</span></span>

<span data-ttu-id="71c20-263">Le texte qui identifie la touche de raccourci est ajouté à la chaîne de texte de l’élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-263">Text that identifies the shortcut key is added to the menu-item text string.</span></span> <span data-ttu-id="71c20-264">Le texte du raccourci s’affiche à droite du nom de l’élément de menu, après une barre oblique inverse et un caractère de tabulation ( \\ t).</span><span class="sxs-lookup"><span data-stu-id="71c20-264">The shortcut text appears to the right of the menu item name, after a backslash and tab character (\\t).</span></span> <span data-ttu-id="71c20-265">Par exemple, « &fermer \\ tAlt + F4 » représente une commande close avec la combinaison de touches ALT + F4 comme touche de raccourci et avec la lettre « C » comme clé d’accès.</span><span class="sxs-lookup"><span data-stu-id="71c20-265">For example, "&Close\\tAlt+F4" represents a Close command with the ALT+F4 key combination as its shortcut key and with the letter "C" as its access key.</span></span> <span data-ttu-id="71c20-266">Pour plus d’informations, consultez [accélérateurs clavier](keyboard-accelerators.md).</span><span class="sxs-lookup"><span data-stu-id="71c20-266">For more information, see [Keyboard Accelerators](keyboard-accelerators.md).</span></span>

## <a name="menu-creation"></a><span data-ttu-id="71c20-267">Création de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-267">Menu Creation</span></span>

<span data-ttu-id="71c20-268">Vous pouvez créer un menu à l’aide d’un modèle de menu ou de fonctions de création de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-268">You can create a menu using either a menu template or menu creation functions.</span></span> <span data-ttu-id="71c20-269">Les modèles de menu sont généralement définis en tant que ressources.</span><span class="sxs-lookup"><span data-stu-id="71c20-269">Menu templates are typically defined as resources.</span></span> <span data-ttu-id="71c20-270">Les ressources de modèle de menu peuvent être chargées explicitement ou affectées comme menu par défaut pour une classe de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-270">Menu-template resources can be loaded explicitly or assigned as the default menu for a window class.</span></span> <span data-ttu-id="71c20-271">Vous pouvez également créer dynamiquement des ressources de modèle de menu dans la mémoire.</span><span class="sxs-lookup"><span data-stu-id="71c20-271">You can also create menu-template resources dynamically in memory.</span></span>

<span data-ttu-id="71c20-272">Les rubriques suivantes décrivent la création de menus en détail :</span><span class="sxs-lookup"><span data-stu-id="71c20-272">The following topics describe menu creation in detail:</span></span>

-   [<span data-ttu-id="71c20-273">Ressources de modèle de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-273">Menu Template Resources</span></span>](#menu-template-resources)
-   [<span data-ttu-id="71c20-274">Modèle de menu en mémoire</span><span class="sxs-lookup"><span data-stu-id="71c20-274">Menu Template in Memory</span></span>](#menu-template-in-memory)
-   [<span data-ttu-id="71c20-275">Poignées de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-275">Menu Handles</span></span>](#menu-handles)
-   [<span data-ttu-id="71c20-276">Fonctions de création de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-276">Menu Creation Functions</span></span>](#menu-creation-functions)
-   [<span data-ttu-id="71c20-277">Affichage du menu</span><span class="sxs-lookup"><span data-stu-id="71c20-277">Menu Display</span></span>](#menu-display)
-   [<span data-ttu-id="71c20-278">Menus de la classe de fenêtre</span><span class="sxs-lookup"><span data-stu-id="71c20-278">Window Class Menus</span></span>](#window-class-menus)

### <a name="menu-template-resources"></a><span data-ttu-id="71c20-279">Ressources de modèle de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-279">Menu Template Resources</span></span>

<span data-ttu-id="71c20-280">La plupart des applications créent des menus à l’aide des ressources de modèle de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-280">Most applications create menus using menu-template resources.</span></span> <span data-ttu-id="71c20-281">Un *modèle de menu* définit un menu, y compris les éléments de la barre de menus et tous les menus.</span><span class="sxs-lookup"><span data-stu-id="71c20-281">A *menu template* defines a menu, including the items in the menu bar and all menus.</span></span> <span data-ttu-id="71c20-282">Pour plus d’informations sur la création d’une ressource de modèle de menu, consultez la documentation fournie avec vos outils de développement.</span><span class="sxs-lookup"><span data-stu-id="71c20-282">For information about creating a menu-template resource, see the documentation included with your development tools.</span></span>

<span data-ttu-id="71c20-283">Après avoir créé une ressource de modèle de menu et l’avoir ajoutée au fichier exécutable (. exe) de votre application, vous pouvez utiliser la fonction [**LoadMenu**](/windows/desktop/api/Winuser/nf-winuser-loadmenua) pour charger la ressource en mémoire.</span><span class="sxs-lookup"><span data-stu-id="71c20-283">After you create a menu-template resource and add it to your application's executable (.exe) file, you can use the [**LoadMenu**](/windows/desktop/api/Winuser/nf-winuser-loadmenua) function to load the resource into memory.</span></span> <span data-ttu-id="71c20-284">Cette fonction retourne un handle au menu, que vous pouvez ensuite assigner à une fenêtre à l’aide de la fonction [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) .</span><span class="sxs-lookup"><span data-stu-id="71c20-284">This function returns a handle to the menu, which you can then assign to a window by using the [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) function.</span></span> <span data-ttu-id="71c20-285">Vous pouvez assigner un menu à n’importe quelle fenêtre qui n’est pas une fenêtre enfant.</span><span class="sxs-lookup"><span data-stu-id="71c20-285">You can assign a menu to any window that is not a child window.</span></span>

<span data-ttu-id="71c20-286">L’implémentation de menus en tant que ressources rend une application plus facile à localiser pour une utilisation dans plusieurs pays/régions.</span><span class="sxs-lookup"><span data-stu-id="71c20-286">Implementing menus as resources makes an application easier to localize for use in multiple countries/regions.</span></span> <span data-ttu-id="71c20-287">Seul le fichier de définition de ressource doit être localisé pour chaque langue, et non le code source de l’application.</span><span class="sxs-lookup"><span data-stu-id="71c20-287">Only the resource-definition file needs to be localized for each language, not the application's source code.</span></span>

### <a name="menu-template-in-memory"></a><span data-ttu-id="71c20-288">Modèle de menu en mémoire</span><span class="sxs-lookup"><span data-stu-id="71c20-288">Menu Template in Memory</span></span>

<span data-ttu-id="71c20-289">Un menu peut être créé à partir d’un modèle de menu qui est généré en mémoire au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="71c20-289">A menu can be created from a menu template that is built in memory at run time.</span></span> <span data-ttu-id="71c20-290">Par exemple, une application qui permet à un utilisateur de personnaliser son menu peut créer un modèle de menu en mémoire basé sur les préférences de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="71c20-290">For example, an application that allows a user to customize its menu might create a menu template in memory based on the user's preferences.</span></span> <span data-ttu-id="71c20-291">L’application peut ensuite enregistrer le modèle dans un fichier ou dans le registre pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="71c20-291">The application could then save the template in a file or in the registry for future use.</span></span> <span data-ttu-id="71c20-292">Pour créer un menu à partir d’un modèle en mémoire, utilisez la fonction [**LoadMenuIndirect**](/windows/desktop/api/Winuser/nf-winuser-loadmenuindirecta) .</span><span class="sxs-lookup"><span data-stu-id="71c20-292">To create a menu from a template in memory, use the [**LoadMenuIndirect**](/windows/desktop/api/Winuser/nf-winuser-loadmenuindirecta) function.</span></span> <span data-ttu-id="71c20-293">Pour obtenir une description des formats de modèle de menu, consultez [ressources de modèle de menu](#menu-template-resources).</span><span class="sxs-lookup"><span data-stu-id="71c20-293">For descriptions of menu-template formats, see [Menu Template Resources](#menu-template-resources).</span></span>

<span data-ttu-id="71c20-294">Un modèle de menu standard se compose d’une structure [**MENUITEMTEMPLATEHEADER**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplateheader) suivie d’une ou de plusieurs structures [**MENUITEMTEMPLATE**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplate) .</span><span class="sxs-lookup"><span data-stu-id="71c20-294">A standard menu template consists of a [**MENUITEMTEMPLATEHEADER**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplateheader) structure followed by one or more [**MENUITEMTEMPLATE**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplate) structures.</span></span>

<span data-ttu-id="71c20-295">Un modèle de menu étendu se compose d’une structure d' [**\_ \_ en-tête de modèle menuex**](menuex-template-header.md) suivie d’une ou de plusieurs structures d' [**\_ \_ élément de modèle menuex**](menuex-template-item.md) .</span><span class="sxs-lookup"><span data-stu-id="71c20-295">An extended menu template consists of a [**MENUEX\_TEMPLATE\_HEADER**](menuex-template-header.md) structure followed by one or more [**MENUEX\_TEMPLATE\_ITEM**](menuex-template-item.md) structures.</span></span>

### <a name="menu-handles"></a><span data-ttu-id="71c20-296">Poignées de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-296">Menu Handles</span></span>

<span data-ttu-id="71c20-297">Le système génère un handle unique pour chaque menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-297">The system generates a unique handle to each menu.</span></span> <span data-ttu-id="71c20-298">Un *descripteur de menu* est une valeur du type **HMENU** .</span><span class="sxs-lookup"><span data-stu-id="71c20-298">A *menu handle* is a value of the **HMENU** type.</span></span> <span data-ttu-id="71c20-299">Une application doit spécifier un handle de menu dans la plupart des fonctions de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-299">An application must specify a menu handle in many of the menu functions.</span></span> <span data-ttu-id="71c20-300">Vous recevez un handle vers une barre de menus lorsque vous créez le menu ou chargez une ressource de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-300">You receive a handle to a menu bar when you create the menu or load a menu resource.</span></span>

<span data-ttu-id="71c20-301">Pour récupérer un handle vers la barre de menus d’un menu qui a été créé ou chargé, utilisez la fonction [**GetMenu**](/windows/desktop/api/Winuser/nf-winuser-getmenu) .</span><span class="sxs-lookup"><span data-stu-id="71c20-301">To retrieve a handle to the menu bar for a menu that has been created or loaded, use the [**GetMenu**](/windows/desktop/api/Winuser/nf-winuser-getmenu) function.</span></span> <span data-ttu-id="71c20-302">Pour récupérer un handle du sous-menu associé à un élément de menu, utilisez la fonction [**GetSubMenu**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) ou [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="71c20-302">To retrieve a handle to the submenu associated with a menu item, use the [**GetSubMenu**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) or [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span> <span data-ttu-id="71c20-303">Pour récupérer un handle d’un menu fenêtre, utilisez la fonction [**GetSystemMenu**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) .</span><span class="sxs-lookup"><span data-stu-id="71c20-303">To retrieve a handle to a window menu, use the [**GetSystemMenu**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) function.</span></span>

### <a name="menu-creation-functions"></a><span data-ttu-id="71c20-304">Fonctions de création de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-304">Menu Creation Functions</span></span>

<span data-ttu-id="71c20-305">À l’aide des fonctions de création de menu, vous pouvez créer des menus au moment de l’exécution ou ajouter des éléments de menu à des menus existants.</span><span class="sxs-lookup"><span data-stu-id="71c20-305">Using menu creation functions, you can create menus at run time or add menu items to existing menus.</span></span> <span data-ttu-id="71c20-306">Vous pouvez utiliser la fonction [**CreateMenu**](/windows/desktop/api/Winuser/nf-winuser-createmenu) pour créer une barre de menus vide et la fonction [**CreatePopupMenu**](/windows/desktop/api/Winuser/nf-winuser-createpopupmenu) pour créer un menu vide.</span><span class="sxs-lookup"><span data-stu-id="71c20-306">You can use the [**CreateMenu**](/windows/desktop/api/Winuser/nf-winuser-createmenu) function to create an empty menu bar and the [**CreatePopupMenu**](/windows/desktop/api/Winuser/nf-winuser-createpopupmenu) function to create an empty menu.</span></span> <span data-ttu-id="71c20-307">Vous pouvez enregistrer certaines informations de paramètres pour un menu à l’aide de la structure [**MENUINFO**](/windows/win32/api/winuser/ns-winuser-menuinfo) .</span><span class="sxs-lookup"><span data-stu-id="71c20-307">You can save certain settings information for a menu by using the [**MENUINFO**](/windows/win32/api/winuser/ns-winuser-menuinfo) structure.</span></span> <span data-ttu-id="71c20-308">Pour obtenir ou récupérer les paramètres d’un menu, utilisez [**GetMenuInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuinfo) ou [**SetMenuInfo**](/windows/desktop/api/Winuser/nf-winuser-setmenuinfo).</span><span class="sxs-lookup"><span data-stu-id="71c20-308">To get or retrieve the settings of a menu, use [**GetMenuInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuinfo) or [**SetMenuInfo**](/windows/desktop/api/Winuser/nf-winuser-setmenuinfo).</span></span> <span data-ttu-id="71c20-309">Pour ajouter des éléments à un menu, utilisez la fonction [**InsertMenuItem**](/windows/desktop/api/Winuser/nf-winuser-insertmenuitema) .</span><span class="sxs-lookup"><span data-stu-id="71c20-309">To add items to a menu, use the [**InsertMenuItem**](/windows/desktop/api/Winuser/nf-winuser-insertmenuitema) function.</span></span> <span data-ttu-id="71c20-310">Les anciennes fonctions [**AppendMenu**](/windows/desktop/api/Winuser/nf-winuser-appendmenua) et [**InsertMenu**](/windows/desktop/api/Winuser/nf-winuser-insertmenua) sont toujours prises en charge, mais **InsertMenuItem** doit être utilisé pour les nouvelles applications.</span><span class="sxs-lookup"><span data-stu-id="71c20-310">The older [**AppendMenu**](/windows/desktop/api/Winuser/nf-winuser-appendmenua) and [**InsertMenu**](/windows/desktop/api/Winuser/nf-winuser-insertmenua) functions are still supported, but **InsertMenuItem** should be used for new applications.</span></span>

### <a name="menu-display"></a><span data-ttu-id="71c20-311">Affichage du menu</span><span class="sxs-lookup"><span data-stu-id="71c20-311">Menu Display</span></span>

<span data-ttu-id="71c20-312">Une fois qu’un menu a été chargé ou créé, il doit être assigné à une fenêtre pour que le système puisse l’afficher.</span><span class="sxs-lookup"><span data-stu-id="71c20-312">After a menu has been loaded or created, it must be assigned to a window before the system can display it.</span></span> <span data-ttu-id="71c20-313">Vous pouvez assigner un menu en définissant un menu de classe.</span><span class="sxs-lookup"><span data-stu-id="71c20-313">You can assign a menu by defining a class menu.</span></span> <span data-ttu-id="71c20-314">Pour plus d’informations, consultez menus de la [classe de fenêtre](#window-class-menus).</span><span class="sxs-lookup"><span data-stu-id="71c20-314">For more information, see [Window Class Menus](#window-class-menus).</span></span> <span data-ttu-id="71c20-315">Vous pouvez également assigner un menu à une fenêtre en spécifiant un handle vers le menu comme paramètre *HMENU* de la fonction [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) ou [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , ou en appelant la fonction [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) .</span><span class="sxs-lookup"><span data-stu-id="71c20-315">You can also assign a menu to a window by specifying a handle to the menu as the *hMenu* parameter of the [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, or by calling the [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) function.</span></span>

<span data-ttu-id="71c20-316">Pour afficher un menu contextuel, utilisez la fonction [**TrackPopupMenuEx**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) .</span><span class="sxs-lookup"><span data-stu-id="71c20-316">To display a shortcut menu use the [**TrackPopupMenuEx**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) function.</span></span> <span data-ttu-id="71c20-317">Les menus contextuels, également appelés menus contextuels flottants ou menus contextuels, s’affichent généralement lorsque le message [**WM \_ CONTEXTMENU**](wm-contextmenu.md) est traité.</span><span class="sxs-lookup"><span data-stu-id="71c20-317">Shortcut menus, also called floating pop-up menus or context menus, are typically displayed when the [**WM\_CONTEXTMENU**](wm-contextmenu.md) message is processed.</span></span>

<span data-ttu-id="71c20-318">Vous pouvez assigner un menu à n’importe quelle fenêtre qui n’est pas une fenêtre enfant.</span><span class="sxs-lookup"><span data-stu-id="71c20-318">You can assign a menu to any window that is not a child window.</span></span>

<span data-ttu-id="71c20-319">L’ancienne fonction [**TrackPopupMenu**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenu) est toujours prise en charge, mais les nouvelles applications doivent utiliser la fonction [**TrackPopupMenuEx**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) .</span><span class="sxs-lookup"><span data-stu-id="71c20-319">The older [**TrackPopupMenu**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenu) function is still supported, but new applications should use the [**TrackPopupMenuEx**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) function.</span></span>

### <a name="window-class-menus"></a><span data-ttu-id="71c20-320">Menus de la classe de fenêtre</span><span class="sxs-lookup"><span data-stu-id="71c20-320">Window Class Menus</span></span>

<span data-ttu-id="71c20-321">Vous pouvez spécifier un menu par défaut, appelé *menu de classe,* quand vous inscrivez une classe de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-321">You can specify a default menu, called a *class menu,* when you register a window class.</span></span> <span data-ttu-id="71c20-322">Pour ce faire, vous assignez le nom de la ressource de modèle de menu au membre **lpszMenuName** de la structure [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) utilisée pour inscrire la classe.</span><span class="sxs-lookup"><span data-stu-id="71c20-322">To do so, you assign the name of the menu-template resource to the **lpszMenuName** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure used to register the class.</span></span>

<span data-ttu-id="71c20-323">Par défaut, chaque fenêtre est assignée au menu classe pour sa classe de fenêtre. vous n’avez donc pas besoin de charger explicitement le menu et de l’assigner à chaque fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-323">By default, every window is assigned the class menu for its window class so you do not need to explicitly load the menu and assign it to each window.</span></span> <span data-ttu-id="71c20-324">Vous pouvez remplacer le menu classe en spécifiant un autre handle de menu dans un appel à la fonction [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="71c20-324">You can override the class menu by specifying a different menu handle in a call to the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span> <span data-ttu-id="71c20-325">Vous pouvez également modifier le menu d’une fenêtre après qu’il a été créé à l’aide de la fonction [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) .</span><span class="sxs-lookup"><span data-stu-id="71c20-325">You can also change a window's menu after it is created by using the [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) function.</span></span> <span data-ttu-id="71c20-326">Pour plus d’informations, consultez [classes de fenêtre](/windows/desktop/winmsg/window-classes).</span><span class="sxs-lookup"><span data-stu-id="71c20-326">For more information, see [Window Classes](/windows/desktop/winmsg/window-classes).</span></span>

## <a name="menu-items"></a><span data-ttu-id="71c20-327">Éléments de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-327">Menu Items</span></span>

<span data-ttu-id="71c20-328">Les rubriques suivantes décrivent ce que fait le système lorsque l’utilisateur choisit un élément de menu et comment une application peut contrôler l’apparence et les fonctionnalités d’un élément :</span><span class="sxs-lookup"><span data-stu-id="71c20-328">The following topics discuss what the system does when the user chooses a menu item, and the ways an application can control an item's appearance and functionality:</span></span>

-   [<span data-ttu-id="71c20-329">Éléments de commande et éléments qui ouvrent des sous-menus</span><span class="sxs-lookup"><span data-stu-id="71c20-329">Command Items and Items that Open Submenus</span></span>](#command-items-and-items-that-open-submenus)
-   [<span data-ttu-id="71c20-330">Identificateur d’élément de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-330">Menu-Item Identifier</span></span>](#menu-item-identifier)
-   [<span data-ttu-id="71c20-331">Position de l’élément de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-331">Menu-Item Position</span></span>](#menu-item-position)
-   [<span data-ttu-id="71c20-332">Accès par programmation aux éléments de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-332">Accessing Menu Items Programmatically</span></span>](#accessing-menu-items-programmatically)
-   [<span data-ttu-id="71c20-333">Éléments de menu par défaut</span><span class="sxs-lookup"><span data-stu-id="71c20-333">Default Menu Items</span></span>](#default-menu-items)
-   [<span data-ttu-id="71c20-334">Éléments de menu sélectionnés et désactivés</span><span class="sxs-lookup"><span data-stu-id="71c20-334">Selected and Clear Menu Items</span></span>](#selected-and-clear-menu-items)
-   [<span data-ttu-id="71c20-335">Éléments de menu activé, grisé et désactivé</span><span class="sxs-lookup"><span data-stu-id="71c20-335">Enabled, Grayed, and Disabled Menu Items</span></span>](#enabled-grayed-and-disabled-menu-items)
-   [<span data-ttu-id="71c20-336">Éléments de menu en surbrillance</span><span class="sxs-lookup"><span data-stu-id="71c20-336">Highlighted Menu Items</span></span>](#highlighted-menu-items)
-   [<span data-ttu-id="71c20-337">Éléments de menu owner-drawn</span><span class="sxs-lookup"><span data-stu-id="71c20-337">Owner-Drawn Menu Items</span></span>](#owner-drawn-menu-items)
-   [<span data-ttu-id="71c20-338">Séparateurs d’éléments de menu et sauts de ligne</span><span class="sxs-lookup"><span data-stu-id="71c20-338">Menu Item Separators and Line Breaks</span></span>](#menu-item-separators-and-line-breaks)

### <a name="command-items-and-items-that-open-submenus"></a><span data-ttu-id="71c20-339">Éléments de commande et éléments qui ouvrent des sous-menus</span><span class="sxs-lookup"><span data-stu-id="71c20-339">Command Items and Items that Open Submenus</span></span>

<span data-ttu-id="71c20-340">Quand l’utilisateur choisit un élément de commande, le système envoie un message de commande à la fenêtre qui possède le menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-340">When the user chooses a command item, the system sends a command message to the window that owns the menu.</span></span> <span data-ttu-id="71c20-341">Si l’élément de commande se trouve dans le menu fenêtre, le système envoie le message [**WM \_ SYSCOMMAND**](wm-syscommand.md) .</span><span class="sxs-lookup"><span data-stu-id="71c20-341">If the command item is on the window menu, the system sends the [**WM\_SYSCOMMAND**](wm-syscommand.md) message.</span></span> <span data-ttu-id="71c20-342">Dans le cas contraire, il envoie le message de [**\_ commande WM**](wm-command.md) .</span><span class="sxs-lookup"><span data-stu-id="71c20-342">Otherwise, it sends the [**WM\_COMMAND**](wm-command.md) message.</span></span>

<span data-ttu-id="71c20-343">Associé à chaque élément de menu qui ouvre un sous-menu est un handle vers le sous-menu correspondant.</span><span class="sxs-lookup"><span data-stu-id="71c20-343">Associated with each menu item that opens a submenu is a handle to the corresponding submenu.</span></span> <span data-ttu-id="71c20-344">Lorsque l’utilisateur pointe sur ce type d’élément, le système ouvre le sous-menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-344">When the user points to such an item, the system opens the submenu.</span></span> <span data-ttu-id="71c20-345">Aucun message de commande n’est envoyé à la fenêtre propriétaire.</span><span class="sxs-lookup"><span data-stu-id="71c20-345">No command message is sent to the owner window.</span></span> <span data-ttu-id="71c20-346">Toutefois, le système envoie un message [**WM \_ INITMENUPOPUP**](wm-initmenupopup.md) à la fenêtre propriétaire avant d’afficher le sous-menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-346">However, the system sends a [**WM\_INITMENUPOPUP**](wm-initmenupopup.md) message to the owner window before displaying the submenu.</span></span> <span data-ttu-id="71c20-347">Vous pouvez obtenir un handle vers le sous-menu associé à un élément à l’aide de la fonction [**GetSubMenu**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) ou [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="71c20-347">You can get a handle to the submenu associated with an item by using the [**GetSubMenu**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) or [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span>

<span data-ttu-id="71c20-348">Une barre de menus contient généralement des noms de menu, mais elle peut également contenir des éléments de commande.</span><span class="sxs-lookup"><span data-stu-id="71c20-348">A menu bar typically contains menu names, but it can also contain command items.</span></span> <span data-ttu-id="71c20-349">Un sous-menu contient généralement des éléments de commande, mais il peut également contenir des éléments qui ouvrent des sous-menus imbriqués.</span><span class="sxs-lookup"><span data-stu-id="71c20-349">A submenu typically contains command items, but it can also contain items that open nested submenus.</span></span> <span data-ttu-id="71c20-350">En ajoutant ces éléments aux sous-menus, vous pouvez imbriquer des menus à n’importe quelle profondeur.</span><span class="sxs-lookup"><span data-stu-id="71c20-350">By adding such items to submenus, you can nest menus to any depth.</span></span> <span data-ttu-id="71c20-351">Pour fournir une indication visuelle pour l’utilisateur, le système affiche automatiquement une petite flèche à droite du texte d’un élément de menu qui ouvre un sous-menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-351">To provide a visual cue for the user, the system automatically displays a small arrow to the right of the text of a menu item that opens a submenu.</span></span>

### <a name="menu-item-identifier"></a><span data-ttu-id="71c20-352">Identificateur de Menu-Item</span><span class="sxs-lookup"><span data-stu-id="71c20-352">Menu-Item Identifier</span></span>

<span data-ttu-id="71c20-353">Le associé à chaque élément de menu est un entier unique défini par l’application, appelé *identificateur d’élément de menu*.</span><span class="sxs-lookup"><span data-stu-id="71c20-353">Associated with each menu item is a unique, application-defined integer, called a *menu-item identifier*.</span></span> <span data-ttu-id="71c20-354">Quand l’utilisateur choisit un élément de commande dans un menu, le système envoie l’identificateur de l’élément à la fenêtre propriétaire dans le cadre d’un message de [**\_ commande WM**](wm-command.md) .</span><span class="sxs-lookup"><span data-stu-id="71c20-354">When the user chooses a command item from a menu, the system sends the item's identifier to the owner window as part of a [**WM\_COMMAND**](wm-command.md) message.</span></span> <span data-ttu-id="71c20-355">La procédure de fenêtre examine l’identificateur pour déterminer la source du message et traite le message en conséquence.</span><span class="sxs-lookup"><span data-stu-id="71c20-355">The window procedure examines the identifier to determine the source of the message, and processes the message accordingly.</span></span> <span data-ttu-id="71c20-356">En outre, vous pouvez spécifier un élément de menu à l’aide de son identificateur lorsque vous appelez des fonctions de menu. par exemple, pour activer ou désactiver un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-356">In addition, you can specify a menu item using its identifier when you call menu functions; for example, to enable or disable a menu item.</span></span>

<span data-ttu-id="71c20-357">Les éléments de menu qui ouvrent des sous-menus ont des identificateurs de la même façon que les éléments de commande.</span><span class="sxs-lookup"><span data-stu-id="71c20-357">Menu items that open submenus have identifiers just as command items do.</span></span> <span data-ttu-id="71c20-358">Toutefois, le système n’envoie pas de message de commande quand un tel élément est sélectionné à partir d’un menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-358">However, the system does not send a command message when such an item is selected from a menu.</span></span> <span data-ttu-id="71c20-359">Au lieu de cela, le système ouvre le sous-menu associé à l’élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-359">Instead, the system opens the submenu associated with the menu item.</span></span>

<span data-ttu-id="71c20-360">Pour récupérer l’identificateur de l’élément de menu à une position spécifiée, utilisez la fonction [**GetMenuItemID**](/windows/desktop/api/Winuser/nf-winuser-getmenuitemid) ou [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="71c20-360">To retrieve the identifier of the menu item at a specified position, use the [**GetMenuItemID**](/windows/desktop/api/Winuser/nf-winuser-getmenuitemid) or [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span>

### <a name="menu-item-position"></a><span data-ttu-id="71c20-361">Position Menu-Item</span><span class="sxs-lookup"><span data-stu-id="71c20-361">Menu-Item Position</span></span>

<span data-ttu-id="71c20-362">En plus d’avoir un identificateur unique, chaque élément de menu dans une barre de menus ou un menu a une valeur de position unique.</span><span class="sxs-lookup"><span data-stu-id="71c20-362">In addition to having a unique identifier, each menu item in a menu bar or menu has a unique position value.</span></span> <span data-ttu-id="71c20-363">L’élément le plus à gauche dans une barre de menus, ou l’élément supérieur d’un menu, a la position zéro.</span><span class="sxs-lookup"><span data-stu-id="71c20-363">The leftmost item in a menu bar, or the top item in a menu, has position zero.</span></span> <span data-ttu-id="71c20-364">La valeur de position est incrémentée pour les éléments de menu suivants.</span><span class="sxs-lookup"><span data-stu-id="71c20-364">The position value is incremented for subsequent menu items.</span></span> <span data-ttu-id="71c20-365">Le système assigne une valeur de position à tous les éléments d’un menu, y compris les séparateurs.</span><span class="sxs-lookup"><span data-stu-id="71c20-365">The system assigns a position value to all items in a menu, including separators.</span></span> <span data-ttu-id="71c20-366">L’illustration suivante montre les valeurs de position des éléments dans une barre de menus et dans un menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-366">The following illustration shows the position values of items in a menu bar and in a menu.</span></span>

![barre de menus et menu](images/csemn-01.png)

<span data-ttu-id="71c20-368">Lors de l’appel d’une fonction de menu qui modifie ou récupère des informations sur un élément de menu spécifique, vous pouvez spécifier l’élément à l’aide de son identificateur ou de sa position.</span><span class="sxs-lookup"><span data-stu-id="71c20-368">When calling a menu function that modifies or retrieves information about a specific menu item, you can specify the item using either its identifier or its position.</span></span> <span data-ttu-id="71c20-369">Pour plus d'informations, consultez la section suivante.</span><span class="sxs-lookup"><span data-stu-id="71c20-369">For more information, see the next section.</span></span>

### <a name="accessing-menu-items-programmatically"></a><span data-ttu-id="71c20-370">Accès par programmation aux éléments de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-370">Accessing Menu Items Programmatically</span></span>

<span data-ttu-id="71c20-371">La plupart des fonctions de menu vous permettent de spécifier un élément de menu par position ou par commande.</span><span class="sxs-lookup"><span data-stu-id="71c20-371">Most menu functions allow you to specify a menu item either by position or by command.</span></span> <span data-ttu-id="71c20-372">Certaines fonctions utilisent les indicateurs **MF \_ BYPOSITION** et **MF \_ BYCOMMAND** pour indiquer l’algorithme de recherche ; d’autres ont un paramètre *fByPosition* explicite.</span><span class="sxs-lookup"><span data-stu-id="71c20-372">Some functions use the **MF\_BYPOSITION** and **MF\_BYCOMMAND** flags to indicate the search algorithm; others have an explicit *fByPosition* parameter.</span></span> <span data-ttu-id="71c20-373">Si vous spécifiez l’élément de menu par position, le numéro d’élément est un index de base zéro dans le menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-373">If you specify the menu item by position, the item number is a zero-based index into the menu.</span></span> <span data-ttu-id="71c20-374">Si vous spécifiez l’élément de menu par commande, le menu et ses sous-menus font l’objet d’une recherche sur un élément dont l’identificateur de menu est égal au numéro d’élément fourni.</span><span class="sxs-lookup"><span data-stu-id="71c20-374">If you specify the menu item by command, the menu and its submenus are searched for an item whose menu identifier equals the item number provided.</span></span> <span data-ttu-id="71c20-375">Si plusieurs éléments de la hiérarchie de menus correspondent au numéro d’élément, il n’est pas spécifié, lequel est utilisé.</span><span class="sxs-lookup"><span data-stu-id="71c20-375">If more than one item in the menu hierarchy matches the item number, it is unspecified which one is used.</span></span> <span data-ttu-id="71c20-376">Si vos menus contiennent des identificateurs de menu en double, vous devez utiliser des opérations de menu basées sur la position pour éviter cette ambiguïté.</span><span class="sxs-lookup"><span data-stu-id="71c20-376">If your menus contain duplicate menu identifiers, you should use position-based menu operations to avoid this ambiguity.</span></span>

### <a name="default-menu-items"></a><span data-ttu-id="71c20-377">Éléments de menu par défaut</span><span class="sxs-lookup"><span data-stu-id="71c20-377">Default Menu Items</span></span>

<span data-ttu-id="71c20-378">Un sous-menu peut contenir un élément de menu par défaut.</span><span class="sxs-lookup"><span data-stu-id="71c20-378">A submenu can contain one default menu item.</span></span> <span data-ttu-id="71c20-379">Quand l’utilisateur ouvre un sous-menu en double-cliquant sur, le système envoie un message de commande à la fenêtre propriétaire du menu et ferme le menu comme si l’élément de commande par défaut avait été choisi.</span><span class="sxs-lookup"><span data-stu-id="71c20-379">When the user opens a submenu by double-clicking, the system sends a command message to the menu's owner window and closes the menu as if the default command item had been chosen.</span></span> <span data-ttu-id="71c20-380">S’il n’y a pas d’élément de commande par défaut, le sous-menu reste ouvert.</span><span class="sxs-lookup"><span data-stu-id="71c20-380">If there is no default command item, the submenu remains open.</span></span> <span data-ttu-id="71c20-381">Pour récupérer et définir l’élément par défaut d’un sous-menu, utilisez les fonctions [**GetMenuDefaultItem**](/windows/desktop/api/Winuser/nf-winuser-getmenudefaultitem) et [**SetMenuDefaultItem**](/windows/desktop/api/Winuser/nf-winuser-setmenudefaultitem) .</span><span class="sxs-lookup"><span data-stu-id="71c20-381">To retrieve and set the default item for a submenu, use the [**GetMenuDefaultItem**](/windows/desktop/api/Winuser/nf-winuser-getmenudefaultitem) and [**SetMenuDefaultItem**](/windows/desktop/api/Winuser/nf-winuser-setmenudefaultitem) functions.</span></span>

### <a name="selected-and-clear-menu-items"></a><span data-ttu-id="71c20-382">Éléments de menu sélectionnés et désactivés</span><span class="sxs-lookup"><span data-stu-id="71c20-382">Selected and Clear Menu Items</span></span>

<span data-ttu-id="71c20-383">Un élément de menu peut être sélectionné ou désactivé.</span><span class="sxs-lookup"><span data-stu-id="71c20-383">A menu item can be either selected or clear.</span></span> <span data-ttu-id="71c20-384">Le système affiche une bitmap à côté des éléments de menu sélectionnés pour indiquer leur état sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-384">The system displays a bitmap next to selected menu items to indicate their selected state.</span></span> <span data-ttu-id="71c20-385">Le système n’affiche pas de bitmap en regard des éléments clairs, sauf si une image bitmap « Clear » définie par l’application est spécifiée.</span><span class="sxs-lookup"><span data-stu-id="71c20-385">The system does not display a bitmap next to clear items, unless an application-defined "clear" bitmap is specified.</span></span> <span data-ttu-id="71c20-386">Seuls les éléments de menu d’un menu peuvent être sélectionnés ; les éléments d’une barre de menus ne peuvent pas être sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="71c20-386">Only menu items in a menu can be selected; items in a menu bar cannot be selected.</span></span>

<span data-ttu-id="71c20-387">En règle générale, les applications vérifient ou décochent un élément de menu pour indiquer si une option est activée.</span><span class="sxs-lookup"><span data-stu-id="71c20-387">Applications typically check or clear a menu item to indicate whether an option is in effect.</span></span> <span data-ttu-id="71c20-388">Par exemple, supposons qu’une application possède une barre d’outils que l’utilisateur peut afficher ou masquer à l’aide d’une commande de **barre d’outils** dans un menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-388">For example, suppose an application has a toolbar that the user can show or hide by using a **Toolbar** command on a menu.</span></span> <span data-ttu-id="71c20-389">Quand la barre d’outils est masquée, l’élément de menu de la **barre d’outils** est vide.</span><span class="sxs-lookup"><span data-stu-id="71c20-389">When the toolbar is hidden, the **Toolbar** menu item is clear.</span></span> <span data-ttu-id="71c20-390">Lorsque l’utilisateur choisit la commande, l’application vérifie l’élément de menu et affiche la barre d’outils.</span><span class="sxs-lookup"><span data-stu-id="71c20-390">When the user chooses the command, the application checks the menu item and shows the toolbar.</span></span>

<span data-ttu-id="71c20-391">Un attribut coche détermine si un élément de menu est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-391">A check mark attribute controls whether a menu item is selected.</span></span> <span data-ttu-id="71c20-392">Vous pouvez définir l’attribut de coche d’un élément de menu à l’aide de la fonction [**CheckMenuItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) .</span><span class="sxs-lookup"><span data-stu-id="71c20-392">You can set a menu item's check mark attribute by using the [**CheckMenuItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) function.</span></span> <span data-ttu-id="71c20-393">Vous pouvez utiliser la fonction [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) pour déterminer si un élément de menu est actuellement sélectionné ou effacé.</span><span class="sxs-lookup"><span data-stu-id="71c20-393">You can use the [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) function to determine whether a menu item is currently selected or cleared.</span></span>

<span data-ttu-id="71c20-394">Au lieu de [**CheckMenuItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) et [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate), vous pouvez utiliser les fonctions [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) et [**SetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-setmenuiteminfoa) pour récupérer et définir l’état d’activation d’un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-394">Instead of [**CheckMenuItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) and [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate), you can use the [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) and [**SetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-setmenuiteminfoa) functions to retrieve and set the check state of a menu item.</span></span>

<span data-ttu-id="71c20-395">Parfois, un groupe d’éléments de menu correspond à un ensemble d’options s’excluant mutuellement.</span><span class="sxs-lookup"><span data-stu-id="71c20-395">Sometimes, a group of menu items corresponds to a set of mutually exclusive options.</span></span> <span data-ttu-id="71c20-396">Dans ce cas, vous pouvez indiquer l’option sélectionnée à l’aide d’un élément de menu Radio sélectionné (semblable à un contrôle de case d’option).</span><span class="sxs-lookup"><span data-stu-id="71c20-396">In this case, you can indicate the selected option by using a selected radio menu item (analogous to a radio button control).</span></span> <span data-ttu-id="71c20-397">Les éléments de radio sélectionnés sont affichés avec une image bitmap au lieu d’une bitmap de coche.</span><span class="sxs-lookup"><span data-stu-id="71c20-397">Selected radio items are displayed with a bullet bitmap instead of a check mark bitmap.</span></span> <span data-ttu-id="71c20-398">Pour vérifier un élément de menu et en faire un élément radio, utilisez la fonction [**CheckMenuRadioItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuradioitem) .</span><span class="sxs-lookup"><span data-stu-id="71c20-398">To check a menu item and make it a radio item, use the [**CheckMenuRadioItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuradioitem) function.</span></span>

<span data-ttu-id="71c20-399">Par défaut, le système affiche une image bitmap en regard des éléments de menu sélectionnés et aucune bitmap en regard de éléments de menu effacés.</span><span class="sxs-lookup"><span data-stu-id="71c20-399">By default, the system displays a check mark or bullet bitmap next to selected menu items and no bitmap next to cleared menu items.</span></span> <span data-ttu-id="71c20-400">Toutefois, vous pouvez utiliser la fonction [**SetMenuItemBitmaps**](/windows/desktop/api/Winuser/nf-winuser-setmenuitembitmaps) pour associer des bitmaps sélectionnées et effacées définies par l’application à un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-400">However, you can use the [**SetMenuItemBitmaps**](/windows/desktop/api/Winuser/nf-winuser-setmenuitembitmaps) function to associate application-defined selected and cleared bitmaps with a menu item.</span></span> <span data-ttu-id="71c20-401">Le système utilise ensuite les bitmaps spécifiées pour indiquer l’état sélectionné ou effacé de l’élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-401">The system then uses the specified bitmaps to indicate the menu item's selected or cleared state.</span></span>

<span data-ttu-id="71c20-402">Les bitmaps définies par l’application associées à un élément de menu doivent avoir la même taille que la bitmap de coche par défaut, dont les dimensions peuvent varier en fonction de la résolution de l’écran.</span><span class="sxs-lookup"><span data-stu-id="71c20-402">Application-defined bitmaps associated with a menu item must be the same size as the default check mark bitmap, the dimensions of which may vary depending on screen resolution.</span></span> <span data-ttu-id="71c20-403">Pour récupérer les dimensions correctes, utilisez la fonction [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) .</span><span class="sxs-lookup"><span data-stu-id="71c20-403">To retrieve the correct dimensions, use the [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) function.</span></span> <span data-ttu-id="71c20-404">Vous pouvez créer plusieurs ressources bitmap pour différentes résolutions d’écran. Créez une ressource bitmap et mettez-la à l’échelle, si nécessaire ; ou créez une bitmap au moment de l’exécution et dessinez-y une image.</span><span class="sxs-lookup"><span data-stu-id="71c20-404">You can create multiple bitmap resources for different screen resolutions; create one bitmap resource and scale it, if necessary; or create a bitmap at run time and draw an image in it.</span></span> <span data-ttu-id="71c20-405">Les bitmaps peuvent être de type monochrome ou couleur.</span><span class="sxs-lookup"><span data-stu-id="71c20-405">The bitmaps may be either monochrome or color.</span></span> <span data-ttu-id="71c20-406">Toutefois, étant donné que les éléments de menu sont inversés lorsqu’ils sont mis en surbrillance, l’apparence de certaines bitmaps de couleurs inversées peut être indésirable.</span><span class="sxs-lookup"><span data-stu-id="71c20-406">However, because menu items are inverted when highlighted, the appearance of certain inverted color bitmaps may be undesirable.</span></span> <span data-ttu-id="71c20-407">Pour plus d’informations, consultez [bitmaps](/windows/desktop/gdi/bitmaps).</span><span class="sxs-lookup"><span data-stu-id="71c20-407">For more information, see [Bitmaps](/windows/desktop/gdi/bitmaps).</span></span>

### <a name="enabled-grayed-and-disabled-menu-items"></a><span data-ttu-id="71c20-408">Éléments de menu activé, grisé et désactivé</span><span class="sxs-lookup"><span data-stu-id="71c20-408">Enabled, Grayed, and Disabled Menu Items</span></span>

<span data-ttu-id="71c20-409">Un élément de menu peut être activé, grisé ou désactivé.</span><span class="sxs-lookup"><span data-stu-id="71c20-409">A menu item can be enabled, grayed, or disabled.</span></span> <span data-ttu-id="71c20-410">Par défaut, un élément de menu est activé.</span><span class="sxs-lookup"><span data-stu-id="71c20-410">By default, a menu item is enabled.</span></span> <span data-ttu-id="71c20-411">Quand l’utilisateur choisit un élément de menu activé, le système envoie un message de commande à la fenêtre propriétaire ou affiche le sous-menu correspondant, selon le type d’élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-411">When the user chooses an enabled menu item, the system sends a command message to the owner window or displays the corresponding submenu, depending on what kind of menu item it is.</span></span>

<span data-ttu-id="71c20-412">Lorsque les éléments de menu ne sont pas disponibles pour l’utilisateur, ils doivent être grisés ou désactivés.</span><span class="sxs-lookup"><span data-stu-id="71c20-412">When menu items are not available to the user, they should be grayed or disabled.</span></span> <span data-ttu-id="71c20-413">Les éléments de menu grisés et désactivés ne peuvent pas être choisis.</span><span class="sxs-lookup"><span data-stu-id="71c20-413">Grayed and disabled menu items cannot be chosen.</span></span> <span data-ttu-id="71c20-414">Un élément désactivé se présente comme un élément activé.</span><span class="sxs-lookup"><span data-stu-id="71c20-414">A disabled item looks just like an enabled item.</span></span> <span data-ttu-id="71c20-415">Lorsque l’utilisateur clique sur un élément désactivé, l’élément n’est pas sélectionné et rien ne se produit.</span><span class="sxs-lookup"><span data-stu-id="71c20-415">When the user clicks on a disabled item, the item is not selected, and nothing happens.</span></span> <span data-ttu-id="71c20-416">Les éléments désactivés peuvent être utiles dans, par exemple, un didacticiel qui présente un menu qui semble actif mais non.</span><span class="sxs-lookup"><span data-stu-id="71c20-416">Disabled items can be useful in, for example, a tutorial that presents a menu that looks active but isn't.</span></span>

<span data-ttu-id="71c20-417">Une application grise un élément de menu non disponible pour fournir à l’utilisateur un signal visuel indiquant qu’une commande n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="71c20-417">An application grays an unavailable menu item to provide a visual cue to the user that a command is not available.</span></span> <span data-ttu-id="71c20-418">Vous pouvez utiliser un élément grisé quand une action n’est pas appropriée (par exemple, vous pouvez griser la commande **Imprimer** dans le menu **fichier** quand aucune imprimante n’est installée sur le système).</span><span class="sxs-lookup"><span data-stu-id="71c20-418">You can use a grayed item when an action is not appropriate (for example, you can gray the **Print** command in the **File** menu when the system does not have a printer installed).</span></span>

<span data-ttu-id="71c20-419">La fonction [**EnableMenuItem**](/windows/desktop/api/Winuser/nf-winuser-enablemenuitem) active, grise ou désactive un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-419">The [**EnableMenuItem**](/windows/desktop/api/Winuser/nf-winuser-enablemenuitem) function enables, grays, or disables a menu item.</span></span> <span data-ttu-id="71c20-420">Pour déterminer si un élément de menu est activé, grisé ou désactivé, utilisez la fonction [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="71c20-420">To determine whether a menu item is enabled, grayed, or disabled, use the [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span>

<span data-ttu-id="71c20-421">Au lieu de [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa), vous pouvez également utiliser la fonction [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) pour déterminer si un élément de menu est activé, grisé ou désactivé.</span><span class="sxs-lookup"><span data-stu-id="71c20-421">Instead of [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa), you can also use the [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) function to determine whether a menu item is enabled, grayed, or disabled.</span></span>

### <a name="highlighted-menu-items"></a><span data-ttu-id="71c20-422">Éléments de menu en surbrillance</span><span class="sxs-lookup"><span data-stu-id="71c20-422">Highlighted Menu Items</span></span>

<span data-ttu-id="71c20-423">Le système met automatiquement en surbrillance les éléments de menu des menus lorsque l’utilisateur les sélectionne.</span><span class="sxs-lookup"><span data-stu-id="71c20-423">The system automatically highlights menu items on menus as the user selects them.</span></span> <span data-ttu-id="71c20-424">Toutefois, la mise en surbrillance peut être ajoutée ou supprimée explicitement d’un nom de menu dans la barre de menus à l’aide de la fonction [**HiliteMenuItem**](/windows/desktop/api/Winuser/nf-winuser-hilitemenuitem) .</span><span class="sxs-lookup"><span data-stu-id="71c20-424">However, highlighting can be explicitly added or removed from a menu name on the menu bar by using the [**HiliteMenuItem**](/windows/desktop/api/Winuser/nf-winuser-hilitemenuitem) function.</span></span> <span data-ttu-id="71c20-425">Cette fonction n’a aucun effet sur les éléments de menu des menus.</span><span class="sxs-lookup"><span data-stu-id="71c20-425">This function has no effect on menu items on menus.</span></span> <span data-ttu-id="71c20-426">Quand **HiliteMenuItem** est utilisé pour mettre en surbrillance un nom de menu, le nom apparaît uniquement comme étant sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-426">When **HiliteMenuItem** is used to highlight a menu name, though, the name only appears to be selected.</span></span> <span data-ttu-id="71c20-427">Si l’utilisateur appuie sur la touche entrée, l’élément mis en surbrillance n’est pas sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-427">If the user presses the ENTER key, the highlighted item is not chosen.</span></span> <span data-ttu-id="71c20-428">Cette fonctionnalité peut être utile dans, par exemple, une application de formation qui illustre l’utilisation de menus.</span><span class="sxs-lookup"><span data-stu-id="71c20-428">This feature might be useful in, for example, a training application that demonstrates the use of menus.</span></span>

### <a name="owner-drawn-menu-items"></a><span data-ttu-id="71c20-429">Owner-Drawn les éléments de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-429">Owner-Drawn Menu Items</span></span>

<span data-ttu-id="71c20-430">Une application peut contrôler complètement l’apparence d’un élément de menu à l’aide d’un *élément owner-drawn*.</span><span class="sxs-lookup"><span data-stu-id="71c20-430">An application can completely control the appearance of a menu item by using an *owner-drawn item*.</span></span> <span data-ttu-id="71c20-431">Les éléments owner-drawn nécessitent une application pour assumer la responsabilité totale pour le dessin des États sélectionnés (en surbrillance), sélectionnés et désélectionnés.</span><span class="sxs-lookup"><span data-stu-id="71c20-431">Owner-drawn items require an application to take total responsibility for drawing selected (highlighted), selected, and cleared states.</span></span> <span data-ttu-id="71c20-432">Par exemple, si une application a fourni un menu police, elle peut dessiner chaque élément de menu à l’aide de la police correspondante ; l’élément pour roman est dessiné avec le chiffre romain, l’élément en italique est dessiné en italique, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="71c20-432">For example, if an application provided a font menu, it could draw each menu item by using the corresponding font; the item for Roman would be drawn with roman, the item for Italic would be drawn in italic, and so on.</span></span> <span data-ttu-id="71c20-433">Pour plus d’informations, consultez [création d' Owner-Drawn éléments de menu](using-menus.md).</span><span class="sxs-lookup"><span data-stu-id="71c20-433">For more information, see [Creating Owner-Drawn Menu Items](using-menus.md).</span></span>

### <a name="menu-item-separators-and-line-breaks"></a><span data-ttu-id="71c20-434">Séparateurs d’éléments de menu et sauts de ligne</span><span class="sxs-lookup"><span data-stu-id="71c20-434">Menu Item Separators and Line Breaks</span></span>

<span data-ttu-id="71c20-435">Le système fournit un type spécial d’élément de menu, appelé *séparateur*, qui apparaît sous forme de ligne horizontale.</span><span class="sxs-lookup"><span data-stu-id="71c20-435">The system provides a special type of menu item, called a *separator*, that appears as a horizontal line.</span></span> <span data-ttu-id="71c20-436">Vous pouvez utiliser un séparateur pour diviser un menu en groupes d’éléments associés.</span><span class="sxs-lookup"><span data-stu-id="71c20-436">You can use a separator to divide a menu into groups of related items.</span></span> <span data-ttu-id="71c20-437">Un séparateur ne peut pas être utilisé dans une barre de menus et l’utilisateur ne peut pas sélectionner de séparateur.</span><span class="sxs-lookup"><span data-stu-id="71c20-437">A separator cannot be used in a menu bar, and the user cannot select a separator.</span></span>

<span data-ttu-id="71c20-438">Quand une barre de menus contient plus de noms de menu qu’une seule ligne, le système encapsule la barre de menus en la divisant automatiquement en deux lignes ou plus.</span><span class="sxs-lookup"><span data-stu-id="71c20-438">When a menu bar contains more menu names than will fit on one line, the system wraps the menu bar by automatically breaking it into two or more lines.</span></span> <span data-ttu-id="71c20-439">Vous pouvez faire en sorte qu’un saut de ligne se produise au niveau d’un élément spécifique d’une barre de menus en affectant l’indicateur de type **\_ MENUBREAK MFT** à l’élément.</span><span class="sxs-lookup"><span data-stu-id="71c20-439">You can cause a line break to occur at a specific item on a menu bar by assigning the **MFT\_MENUBREAK** type flag to the item.</span></span> <span data-ttu-id="71c20-440">Le système place cet élément et tous les éléments suivants sur une nouvelle ligne.</span><span class="sxs-lookup"><span data-stu-id="71c20-440">The system places that item and all subsequent items on a new line.</span></span>

<span data-ttu-id="71c20-441">Quand un menu contient plus d’éléments que ne peut en contenir une colonne, le menu est tronqué.</span><span class="sxs-lookup"><span data-stu-id="71c20-441">When a menu contains more items than will fit in one column, the menu will be truncated.</span></span> <span data-ttu-id="71c20-442">Vous pouvez faire en sorte qu’un saut de colonne se produise au niveau d’un élément spécifique d’un menu en affectant l’indicateur de type **\_ MENUBREAK MFT** à l’élément ou en utilisant l’option MENUBREAK dans l’instruction [MenuItem](/windows/desktop/menurc/menuitem-statement) .</span><span class="sxs-lookup"><span data-stu-id="71c20-442">You can cause a column break to occur at a specific item in a menu by assigning the **MFT\_MENUBREAK** type flag to the item or using the MENUBREAK option in the [MENUITEM](/windows/desktop/menurc/menuitem-statement) statement.</span></span> <span data-ttu-id="71c20-443">Le système place cet élément et tous les éléments suivants dans une nouvelle colonne.</span><span class="sxs-lookup"><span data-stu-id="71c20-443">The system places that item and all subsequent items in a new column.</span></span> <span data-ttu-id="71c20-444">L’indicateur de type **\_ MENUBARBREAK MFT** a le même effet, sauf qu’une ligne verticale apparaît entre la nouvelle colonne et l’ancien.</span><span class="sxs-lookup"><span data-stu-id="71c20-444">The **MFT\_MENUBARBREAK** type flag has the same effect, except that a vertical line appears between the new column and the old.</span></span>

<span data-ttu-id="71c20-445">Si vous utilisez les fonctions [**AppendMenu**](/windows/desktop/api/Winuser/nf-winuser-appendmenua), [**InsertMenu**](/windows/desktop/api/Winuser/nf-winuser-insertmenua)ou [**ModifyMenu**](/windows/desktop/api/Winuser/nf-winuser-modifymenua) pour assigner des sauts de ligne, vous devez assigner les indicateurs de type **MF \_ MENUBREAK** ou **MF \_ MENUBARBREAK**.</span><span class="sxs-lookup"><span data-stu-id="71c20-445">If you use the [**AppendMenu**](/windows/desktop/api/Winuser/nf-winuser-appendmenua), [**InsertMenu**](/windows/desktop/api/Winuser/nf-winuser-insertmenua), or [**ModifyMenu**](/windows/desktop/api/Winuser/nf-winuser-modifymenua) functions to assign line breaks, you should assign the type flags **MF\_MENUBREAK** or **MF\_MENUBARBREAK**.</span></span>

## <a name="messages-used-with-menus"></a><span data-ttu-id="71c20-446">Messages utilisés avec les menus</span><span class="sxs-lookup"><span data-stu-id="71c20-446">Messages Used with Menus</span></span>

<span data-ttu-id="71c20-447">Le système signale une activité liée au menu en envoyant des messages à la procédure de fenêtre de la fenêtre qui possède le menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-447">The system reports menu-related activity by sending messages to the window procedure of the window that owns the menu.</span></span> <span data-ttu-id="71c20-448">Le système envoie une série de messages lorsque l’utilisateur sélectionne des éléments dans la barre de menus ou clique avec le bouton droit de la souris pour afficher un menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="71c20-448">The system sends a series of messages when the user selects items on the menu bar or clicks the right mouse button to display a shortcut menu.</span></span>

<span data-ttu-id="71c20-449">Lorsque l’utilisateur active un élément dans la barre de menus, la fenêtre propriétaire reçoit d’abord un message [**WM \_ SYSCOMMAND**](wm-syscommand.md) .</span><span class="sxs-lookup"><span data-stu-id="71c20-449">When the user activates an item on the menu bar, the owner window first receives a [**WM\_SYSCOMMAND**](wm-syscommand.md) message.</span></span> <span data-ttu-id="71c20-450">Ce message comprend un indicateur qui indique si l’utilisateur a activé le menu à l’aide du clavier ( \_ menu SC) ou de la souris (SC \_ MOUSEMENU).</span><span class="sxs-lookup"><span data-stu-id="71c20-450">This message includes a flag that indicates whether the user activated the menu by using the keyboard (SC\_KEYMENU) or the mouse (SC\_MOUSEMENU).</span></span> <span data-ttu-id="71c20-451">Pour plus d’informations, consultez [accès clavier aux menus](#keyboard-access-to-menus).</span><span class="sxs-lookup"><span data-stu-id="71c20-451">For more information, see [Keyboard Access to Menus](#keyboard-access-to-menus).</span></span>

<span data-ttu-id="71c20-452">Ensuite, avant d’afficher des menus, le système envoie le message [**WM \_ INITMENU**](wm-initmenu.md) à la procédure de fenêtre afin qu’une application puisse modifier les menus avant que l’utilisateur ne les voit.</span><span class="sxs-lookup"><span data-stu-id="71c20-452">Next, before displaying any menus, the system sends the [**WM\_INITMENU**](wm-initmenu.md) message to the window procedure so that an application can modify the menus before the user sees them.</span></span> <span data-ttu-id="71c20-453">Le système envoie le message **WM \_ INITMENU** une seule fois par activation de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-453">The system sends the **WM\_INITMENU** message only once per menu activation.</span></span>

<span data-ttu-id="71c20-454">Quand l’utilisateur pointe sur un élément de menu qui ouvre un sous-menu, le système envoie la fenêtre propriétaire du message [**WM \_ INITMENUPOPUP**](wm-initmenupopup.md) avant d’afficher le sous-menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-454">When the user points to a menu item that opens a submenu, the system sends the owner window the [**WM\_INITMENUPOPUP**](wm-initmenupopup.md) message before displaying the submenu.</span></span> <span data-ttu-id="71c20-455">Ce message donne à l’application la possibilité de modifier le sous-menu avant qu’il ne s’affiche.</span><span class="sxs-lookup"><span data-stu-id="71c20-455">This message gives the application an opportunity to modify the submenu before it is displayed.</span></span>

<span data-ttu-id="71c20-456">Chaque fois que l’utilisateur déplace la mise en surbrillance d’un élément à un autre, le système envoie un message [**WM \_ MENUSELECT**](wm-menuselect.md) à la procédure de fenêtre de la fenêtre propriétaire du menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-456">Each time the user moves the highlighting from one item to another, the system sends a [**WM\_MENUSELECT**](wm-menuselect.md) message to the window procedure of the menu's owner window.</span></span> <span data-ttu-id="71c20-457">Ce message identifie l’élément de menu actuellement sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-457">This message identifies the currently selected menu item.</span></span> <span data-ttu-id="71c20-458">De nombreuses applications fournissent une zone d’informations en bas de leurs fenêtres principales et utilisent ce message pour afficher des informations supplémentaires sur l’élément de menu sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-458">Many applications provide an information area at the bottom of their main windows and use this message to display additional information about the selected menu item.</span></span>

<span data-ttu-id="71c20-459">Quand l’utilisateur choisit un élément de commande dans un menu, le système envoie un message de [**\_ commande WM**](wm-command.md) à la procédure de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-459">When the user chooses a command item from a menu, the system sends a [**WM\_COMMAND**](wm-command.md) message to the window procedure.</span></span> <span data-ttu-id="71c20-460">Le mot de poids faible du paramètre *wParam* du message de **\_ commande WM** contient l’identificateur de l’élément choisi.</span><span class="sxs-lookup"><span data-stu-id="71c20-460">The low-order word of the **WM\_COMMAND** message's *wParam* parameter contains the identifier of the chosen item.</span></span> <span data-ttu-id="71c20-461">La procédure de fenêtre doit examiner l’identificateur et traiter le message en conséquence.</span><span class="sxs-lookup"><span data-stu-id="71c20-461">The window procedure should examine the identifier and process the message accordingly.</span></span>

<span data-ttu-id="71c20-462">Vous pouvez enregistrer les informations d’un menu à l’aide de la structure [**MENUINFO**](/windows/win32/api/winuser/ns-winuser-menuinfo) .</span><span class="sxs-lookup"><span data-stu-id="71c20-462">You can save information for a menu using the [**MENUINFO**](/windows/win32/api/winuser/ns-winuser-menuinfo) structure.</span></span> <span data-ttu-id="71c20-463">Si le menu est défini avec un **MENUINFO**. **dwStyle** valeur de MNS \_ NOTIFYBYPOS, le système envoie [**WM \_ MENUCOMMAND**](wm-menucommand.md) à la place de la [**\_ commande WM**](wm-command.md) lorsqu’un élément est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="71c20-463">If the menu is defined with a **MENUINFO**.**dwStyle** value of MNS\_NOTIFYBYPOS, the system sends [**WM\_MENUCOMMAND**](wm-menucommand.md) instead of the [**WM\_COMMAND**](wm-command.md) when an item is selected.</span></span> <span data-ttu-id="71c20-464">Cela vous permet d’accéder aux informations contenues dans la structure **MENUINFO** et de fournir l’index de l’élément sélectionné directement.</span><span class="sxs-lookup"><span data-stu-id="71c20-464">This allows you to access the information in the **MENUINFO** structure and also provides the index of the selected item directly.</span></span>

<span data-ttu-id="71c20-465">Tous les menus ne sont pas accessibles par le biais de la barre de menus d’une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-465">Not all menus are accessible through a window's menu bar.</span></span> <span data-ttu-id="71c20-466">De nombreuses applications affichent des menus contextuels lorsque l’utilisateur clique avec le bouton droit de la souris à un emplacement spécifique.</span><span class="sxs-lookup"><span data-stu-id="71c20-466">Many applications display shortcut menus when the user clicks the right mouse button at a specific location.</span></span> <span data-ttu-id="71c20-467">De telles applications doivent traiter le message [**WM \_ CONTEXTMENU**](wm-contextmenu.md) et afficher un menu contextuel, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="71c20-467">Such applications should process the [**WM\_CONTEXTMENU**](wm-contextmenu.md) message and display a shortcut menu, if appropriate.</span></span> <span data-ttu-id="71c20-468">Si une application n’affiche pas de menu contextuel, elle doit passer le message **WM \_ CONTEXTMENU** à la fonction [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) pour le traitement par défaut.</span><span class="sxs-lookup"><span data-stu-id="71c20-468">If an application does not display a shortcut menu, it should pass the **WM\_CONTEXTMENU** message to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function for default processing.</span></span>

<span data-ttu-id="71c20-469">Le message [**WM \_ MENURBUTTONUP**](wm-menurbuttonup.md) est envoyé lorsque l’utilisateur relâche le bouton droit de la souris alors que le curseur se trouve sur un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-469">The [**WM\_MENURBUTTONUP**](wm-menurbuttonup.md) message is sent when the user releases the right mouse button while the cursor is on a menu item.</span></span> <span data-ttu-id="71c20-470">Ce message est fourni afin que les applications puissent afficher un menu contextuel ou un menu contextuel pour un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-470">This message is provided so that applications can display a context-sensitive or shortcut menu for a menu item.</span></span>

<span data-ttu-id="71c20-471">Il y a quelques messages qui impliquent uniquement des menus de glisser-déplacer.</span><span class="sxs-lookup"><span data-stu-id="71c20-471">There are a few messages that only involve drag-and-drop menus.</span></span> <span data-ttu-id="71c20-472">Le [**\_ MENUGETOBJECT WM**](wm-menugetobject.md) est envoyé au propriétaire d’un menu glisser-déplacer lorsque le curseur de la souris entre dans un élément de menu ou se déplace du centre d’un élément vers le haut ou le bas d’un élément.</span><span class="sxs-lookup"><span data-stu-id="71c20-472">The [**WM\_MENUGETOBJECT**](wm-menugetobject.md) is sent to the owner of a drag-and-drop menu when the mouse cursor enters a menu item or moves from the center of an item to the top or the bottom of an item.</span></span> <span data-ttu-id="71c20-473">Le message [**WM \_ MENUDRAG**](wm-menudrag.md) est envoyé lorsque l’utilisateur fait glisser un élément de menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-473">The [**WM\_MENUDRAG**](wm-menudrag.md) message is sent when the user actually drags a menu item.</span></span>

<span data-ttu-id="71c20-474">Lorsqu’un menu déroulant ou un sous-menu a été détruit, le système envoie un message [**WM \_ UNINITMENUPOPUP**](wm-uninitmenupopup.md) .</span><span class="sxs-lookup"><span data-stu-id="71c20-474">When a drop-down menu or a submenu has been destroyed, the system sends a [**WM\_UNINITMENUPOPUP**](wm-uninitmenupopup.md) message.</span></span>

## <a name="menu-destruction"></a><span data-ttu-id="71c20-475">Destruction de menu</span><span class="sxs-lookup"><span data-stu-id="71c20-475">Menu Destruction</span></span>

<span data-ttu-id="71c20-476">Si un menu est affecté à une fenêtre et que cette fenêtre est détruite, le système détruit automatiquement le menu et ses sous-menus, libérant ainsi la poignée du menu et la mémoire occupée par le menu.</span><span class="sxs-lookup"><span data-stu-id="71c20-476">If a menu is assigned to a window and that window is destroyed, the system automatically destroys the menu and its submenus, freeing the menu's handle and the memory occupied by the menu.</span></span> <span data-ttu-id="71c20-477">Le système ne détruit pas automatiquement un menu qui n’est pas assigné à une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="71c20-477">The system does not automatically destroy a menu that is not assigned to a window.</span></span> <span data-ttu-id="71c20-478">Une application doit détruire le menu non assigné en appelant la fonction [**DestroyMenu**](/windows/desktop/api/Winuser/nf-winuser-destroymenu) .</span><span class="sxs-lookup"><span data-stu-id="71c20-478">An application must destroy the unassigned menu by calling the [**DestroyMenu**](/windows/desktop/api/Winuser/nf-winuser-destroymenu) function.</span></span> <span data-ttu-id="71c20-479">Dans le cas contraire, le menu continue d’exister en mémoire même après la fermeture de l’application.</span><span class="sxs-lookup"><span data-stu-id="71c20-479">Otherwise, the menu continues to exist in memory even after the application closes.</span></span> <span data-ttu-id="71c20-480">Pour terminer le menu actif du thread appelant, utilisez [**EndMenu**](/windows/desktop/api/Winuser/nf-winuser-endmenu).</span><span class="sxs-lookup"><span data-stu-id="71c20-480">To end the calling thread's active menu, use [**EndMenu**](/windows/desktop/api/Winuser/nf-winuser-endmenu).</span></span> <span data-ttu-id="71c20-481">Si une plateforme ne prend pas en charge **EndMenu**, envoyez au propriétaire du menu actif un message [**WM \_ CANCELMODE**](/windows/desktop/winmsg/wm-cancelmode) .</span><span class="sxs-lookup"><span data-stu-id="71c20-481">If a platform does not support **EndMenu**, send the owner of the active menu a [**WM\_CANCELMODE**](/windows/desktop/winmsg/wm-cancelmode) message.</span></span>

 

 