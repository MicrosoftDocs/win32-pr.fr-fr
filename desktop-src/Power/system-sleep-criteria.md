---
description: Tant que le système détermine l’activité de l’utilisateur ou de l’application, il n’entre pas en mode veille.
ms.assetid: 83c9394a-1813-405a-802a-0623e5de50d3
title: Critères de veille du système
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90950b980ec1e0fa06171d7a57d76b410534f96
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103756567"
---
# <a name="system-sleep-criteria"></a><span data-ttu-id="5f3a2-103">Critères de veille du système</span><span class="sxs-lookup"><span data-stu-id="5f3a2-103">System Sleep Criteria</span></span>

<span data-ttu-id="5f3a2-104">Tant que le système détermine l’activité de l’utilisateur ou de l’application, il n’entre pas en mode veille.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-104">As long as the system determines that there is user or application activity, it will not enter sleep.</span></span> <span data-ttu-id="5f3a2-105">Le système peut détecter certaines activités, telles que les entrées d’utilisateur ou les communications réseau.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-105">The system can detect certain activities, such as user input or network communications.</span></span> <span data-ttu-id="5f3a2-106">Toutefois, il existe d’autres activités que le système ne peut pas détecter.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-106">However, there are other activities that the system cannot detect.</span></span> <span data-ttu-id="5f3a2-107">Par exemple, une application de présentation requiert l’affichage de l’écran.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-107">For example, a presentation application requires the screen for display.</span></span> <span data-ttu-id="5f3a2-108">Toutefois, il peut sembler que l’application est inactive pendant la présentation, provoquant ainsi l’arrêt de l’affichage par le système.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-108">However, it may appear that the application is idle during the presentation, causing the system to turn off the display.</span></span>

<span data-ttu-id="5f3a2-109">Pour informer le système que votre application est occupée, utilisez la fonction [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) .</span><span class="sxs-lookup"><span data-stu-id="5f3a2-109">To notify the system that your application is busy, use the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function.</span></span> <span data-ttu-id="5f3a2-110">Cette fonction empêche le système d’entrer en mode veille ou de désactiver l’affichage pendant que l’application est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-110">This function prevents the system from entering sleep or turning off the display while the application is running.</span></span>

<span data-ttu-id="5f3a2-111">Les applications de présentation et multimédias doivent appeler la fonction [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) avec l' **\_ affichage es \_ requis** pour que le système sache qu’il ne doit pas mettre le périphérique d’affichage en veille.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-111">Presentation and multimedia applications must call the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function with **ES\_DISPLAY\_REQUIRED** so that the system will know that it should not put the display device to sleep.</span></span> <span data-ttu-id="5f3a2-112">Les applications de gestion des événements, telles que les outils de gestion des télécopies entrantes, doivent appeler **SetThreadExecutionState** avec le **\_ système es \_ requis**, gérer l’événement, puis effacer l’indicateur afin que le système puisse revenir en mode veille.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-112">Event-handling applications, such as tools for managing incoming faxes, must call **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, handle the event, and then clear the flag so the system can return to sleep.</span></span> <span data-ttu-id="5f3a2-113">Notez que la plupart des applications de productivité n’ont pas besoin d’utiliser **SetThreadExecutionState** , car le système peut généralement déterminer l’activité par entrée d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-113">Note that most productivity applications do not need to use **SetThreadExecutionState** because the system can usually determine activity by user input.</span></span>

<span data-ttu-id="5f3a2-114">Pour maintenir le temps depuis la dernière entrée utilisateur, le système utilise un minuteur d’affichage inactif et un minuteur d’inactivité du système.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-114">To maintain the time since the last user input, the system uses a display idle timer and a system idle timer.</span></span> <span data-ttu-id="5f3a2-115">Le système compare les temps d’inactivité aux valeurs configurées dans le mode de gestion de l’alimentation.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-115">The system compares the idle timers to the values configured in the power plan.</span></span> <span data-ttu-id="5f3a2-116">Si la valeur du minuteur d’inactivité de l’affichage est supérieure à la valeur du délai d’attente d’affichage et qu’aucun thread n’a demandé l’affichage en appelant [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) avec l' **\_ affichage es \_ requis**, le système met hors tension l’affichage.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-116">If the display idle timer value is greater than the display time-out value, and no threads have requested the display by calling [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) with **ES\_DISPLAY\_REQUIRED**, the system powers off the display.</span></span> <span data-ttu-id="5f3a2-117">De même, si le délai d’inactivité du système est supérieur à la valeur du délai d’attente du système et qu’aucune application n’a demandé le système en appelant **SetThreadExecutionState** avec le **\_ système es \_ requis**, le système passe en mode veille.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-117">Similarly, if the system idle timer is greater than the system time-out value and no applications have requested the system by calling **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, the system enters sleep.</span></span>

<span data-ttu-id="5f3a2-118">Le système gère le nombre d’applications qui ont appelé [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span><span class="sxs-lookup"><span data-stu-id="5f3a2-118">The system maintains a count of applications that have called [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span></span> <span data-ttu-id="5f3a2-119">Le système effectue le suivi de chaque thread qui appelle **SetThreadExecutionState** et ajuste le compteur en conséquence.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-119">The system tracks each thread that calls **SetThreadExecutionState** and adjusts the counter accordingly.</span></span> <span data-ttu-id="5f3a2-120">Si ce compteur atteint zéro et qu’il n’y a pas d’entrée utilisateur, le système passe en mode veille.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-120">If this counter reaches zero and there has not been any user input, the system enters sleep.</span></span>

<span data-ttu-id="5f3a2-121">Si la puissance est faible, une application peut demander l’intervention de l’utilisateur ou demander que le système s’interrompt.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-121">If power is low, an application can request user intervention or request that the system suspend itself.</span></span> <span data-ttu-id="5f3a2-122">Vous pouvez suspendre le fonctionnement du système à l’aide de la fonction [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) .</span><span class="sxs-lookup"><span data-stu-id="5f3a2-122">You can suspend system operation by using the [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) function.</span></span>

<span data-ttu-id="5f3a2-123">Si le système sort de veille automatiquement ([PBT \_ APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), aucun minuteur n’est pertinent.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-123">If the system wakes automatically ([PBT\_APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), none of the timers are relevant.</span></span> <span data-ttu-id="5f3a2-124">Pour plus d’informations, consultez [événements de mise en éveil du système](system-wake-up-events.md).</span><span class="sxs-lookup"><span data-stu-id="5f3a2-124">For more information, see [System Wake-up Events](system-wake-up-events.md).</span></span>

## <a name="entering-sleep"></a><span data-ttu-id="5f3a2-125">Entrée en mode veille</span><span class="sxs-lookup"><span data-stu-id="5f3a2-125">Entering Sleep</span></span>

<span data-ttu-id="5f3a2-126">Lorsque le système passe en mode veille, il conserve automatiquement l’état de l’ensemble du système et de toutes les applications.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-126">When the system enters sleep, it will automatically preserve the state of the entire system and all applications.</span></span> <span data-ttu-id="5f3a2-127">Par conséquent, la plupart des applications n’ont pas besoin d’effectuer d’action particulière.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-127">Therefore, most applications do not need to take any special action.</span></span> <span data-ttu-id="5f3a2-128">Les applications qui doivent effectuer des actions spécifiques avant que les transitions système puissent s’inscrire aux événements d’alimentation.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-128">Applications that need to perform specific actions before the system transitions can register for power events.</span></span>

<span data-ttu-id="5f3a2-129">Lorsque le système envoie un événement [PBT \_ APMSUSPEND](pbt-apmsuspend.md) , chaque application dispose de deux secondes pour effectuer toutes les actions nécessaires avant que le système ne démarre la transition vers le mode veille.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-129">When the system sends a [PBT\_APMSUSPEND](pbt-apmsuspend.md) event, each application has two seconds to perform any necessary actions before the system starts the transition to sleep.</span></span> <span data-ttu-id="5f3a2-130">Les applications doivent limiter l’action qu’elles prennent en réponse à cet événement pour s’assurer qu’elles terminent toutes les opérations dans le temps alloué.</span><span class="sxs-lookup"><span data-stu-id="5f3a2-130">Applications must limit what action they take in response to this event to ensure that they complete all operations in the time allotted.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5f3a2-131">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="5f3a2-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5f3a2-132">À propos de la gestion de l’alimentation</span><span class="sxs-lookup"><span data-stu-id="5f3a2-132">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="5f3a2-133">Événements de mise en éveil du système</span><span class="sxs-lookup"><span data-stu-id="5f3a2-133">System Wake-up Events</span></span>](system-wake-up-events.md)
</dt> </dl>

 

 



