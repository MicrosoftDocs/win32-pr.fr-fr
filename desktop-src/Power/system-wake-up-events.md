---
description: Votre application peut restaurer un ordinateur qui se trouve dans un état de veille à l’état de fonctionnement à l’aide d’un minuteur planifié ou d’un événement d’appareil.
ms.assetid: b7326b09-0829-4e76-80d0-e4ecdf7f556e
title: Événements de mise en éveil du système
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f13332305ef023d932f2912f7299aa12cd402733
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106531937"
---
# <a name="system-wake-up-events"></a><span data-ttu-id="a3148-103">Événements de mise en éveil du système</span><span class="sxs-lookup"><span data-stu-id="a3148-103">System Wake-up Events</span></span>

<span data-ttu-id="a3148-104">Les informations suivantes s’appliquent aux éveils de [veille (S3) et de mise en veille prolongée (S4)](/windows-hardware/drivers/kernel/system-sleeping-states).</span><span class="sxs-lookup"><span data-stu-id="a3148-104">The following information applies to wakes from [sleep (S3) and hibernate (S4)](/windows-hardware/drivers/kernel/system-sleeping-states).</span></span> <span data-ttu-id="a3148-105">Pour les réveils à partir de la mise en veille moderne (mode faible consommation S0), reportez-vous aux [transitions de inactif à actif](/windows-hardware/design/device-experiences/transition-from-idle-to-active).</span><span class="sxs-lookup"><span data-stu-id="a3148-105">For wakes from Modern Standby (S0 Low Power Idle), please refer to [transitions from idle to active](/windows-hardware/design/device-experiences/transition-from-idle-to-active).</span></span>

<span data-ttu-id="a3148-106">Votre application peut restaurer un ordinateur qui se trouve dans un état de veille à l’état de fonctionnement à l’aide d’un minuteur planifié ou d’un événement d’appareil.</span><span class="sxs-lookup"><span data-stu-id="a3148-106">Your application can restore a computer that is in a sleep state to the working state by using a scheduled timer or a device event.</span></span> <span data-ttu-id="a3148-107">C’est ce qu’on appelle un *événement de mise en éveil*.</span><span class="sxs-lookup"><span data-stu-id="a3148-107">This is known as a *wake-up event*.</span></span> <span data-ttu-id="a3148-108">Utilisez un [objet de minuteur](/windows/desktop/Sync/waitable-timer-objects) qui peut être utilisé pour spécifier l’heure à laquelle le système doit sortir de veille.</span><span class="sxs-lookup"><span data-stu-id="a3148-108">Use a [waitable timer object](/windows/desktop/Sync/waitable-timer-objects) to specify the time at which the system should wake.</span></span> <span data-ttu-id="a3148-109">Pour créer l’objet, utilisez la fonction [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="a3148-109">To create the object, use the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) function.</span></span> <span data-ttu-id="a3148-110">Pour définir le minuteur, utilisez la fonction [**SetWaitableTimer**](/windows/desktop/api/synchapi/nf-synchapi-setwaitabletimer) .</span><span class="sxs-lookup"><span data-stu-id="a3148-110">To set the timer, use the [**SetWaitableTimer**](/windows/desktop/api/synchapi/nf-synchapi-setwaitabletimer) function.</span></span> <span data-ttu-id="a3148-111">Le paramètre *pDueTime* spécifie à quel moment la minuterie sera signalée.</span><span class="sxs-lookup"><span data-stu-id="a3148-111">The *pDueTime* parameter specifies when the timer will be signaled.</span></span> <span data-ttu-id="a3148-112">Pour spécifier que le système doit sortir de veille quand le minuteur est signalé, affectez la valeur **true** au paramètre *fResume* .</span><span class="sxs-lookup"><span data-stu-id="a3148-112">To specify that the system should wake when the timer is signaled, set the *fResume* parameter to **TRUE**.</span></span>

<span data-ttu-id="a3148-113">Lorsque le système sort automatiquement du mode veille en raison d’un événement (autre que le commutateur d’alimentation ou l’activité utilisateur), le système définit automatiquement un délai d’inactivité sans assistance à au moins 2 minutes.</span><span class="sxs-lookup"><span data-stu-id="a3148-113">When the system wakes automatically because of an event (other than power switch or user activity), the system automatically sets an unattended idle timer to at least 2 minutes.</span></span> <span data-ttu-id="a3148-114">Ce minuteur donne aux applications suffisamment de temps pour appeler la fonction [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) pour indiquer qu’elles sont occupées.</span><span class="sxs-lookup"><span data-stu-id="a3148-114">This timer gives applications sufficient time to call the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function to indicate that they are busy.</span></span> <span data-ttu-id="a3148-115">Cette fois, permet au système de revenir rapidement à l’état de veille une fois que l’ordinateur n’est plus nécessaire.</span><span class="sxs-lookup"><span data-stu-id="a3148-115">This time enables the system to return to the sleep state quickly after the computer is no longer required.</span></span> <span data-ttu-id="a3148-116">Les critères suivants déterminent si le système revient à l’état de veille :</span><span class="sxs-lookup"><span data-stu-id="a3148-116">The following criteria determine whether the system returns to the sleep state:</span></span>

-   <span data-ttu-id="a3148-117">Si le système sort de veille automatiquement (c’est-à-dire qu’aucune activité utilisateur n’est présente), il s’arrête dès que le minuteur inactif sans assistance expire, en supposant qu’aucune application n’a appelé [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) pour indiquer que le système est requis.</span><span class="sxs-lookup"><span data-stu-id="a3148-117">If the system wakes automatically (that is, no user activity is present), it shuts down as soon as the unattended idle timer expires, assuming that no applications have called [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) to indicate that the system is required.</span></span>
-   <span data-ttu-id="a3148-118">Les réveils basés sur un appareil déclenchent la minuterie d’inactivité sans assistance par défaut, sauf si le pilote de périphérique indique la présence de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a3148-118">Device-based wakes trigger the unattended idle timer by default unless the device driver indicates user presence.</span></span> <span data-ttu-id="a3148-119">Si le pilote indique la présence de l’utilisateur, la minuterie d’inactivité du système est utilisée.</span><span class="sxs-lookup"><span data-stu-id="a3148-119">If the driver indicates user presence, then the system idle timer is used.</span></span>
-   <span data-ttu-id="a3148-120">Si le système sort de veille automatiquement, mais que l’utilisateur fournit une nouvelle entrée pendant que l’événement est géré, le système ne repasse pas automatiquement en mode veille en fonction de la minuterie d’inactivité en mode sans assistance.</span><span class="sxs-lookup"><span data-stu-id="a3148-120">If the system wakes automatically, but the user provides new input while the event is handled, the system does not automatically return to sleep based on the unattended idle timer.</span></span> <span data-ttu-id="a3148-121">Au lieu de cela, le système revient en mode veille en fonction du minuteur d’inactivité du système.</span><span class="sxs-lookup"><span data-stu-id="a3148-121">Instead, the system returns to sleep based on the system idle timer.</span></span>
-   <span data-ttu-id="a3148-122">Si le système sort de veille en raison de l’activité de l’utilisateur, le système ne repasse pas automatiquement en mode veille en fonction de la minuterie d’inactivité en mode sans assistance.</span><span class="sxs-lookup"><span data-stu-id="a3148-122">If the system wakes due to user activity, the system does not automatically return to sleep based on the unattended idle timer.</span></span> <span data-ttu-id="a3148-123">Au lieu de cela, le système revient en mode veille en fonction du minuteur d’inactivité du système.</span><span class="sxs-lookup"><span data-stu-id="a3148-123">Instead the system returns to sleep based on the system idle timer.</span></span>

<span data-ttu-id="a3148-124">Lorsque le système sort automatiquement, il diffuse l’événement [PBT \_ APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md) à toutes les applications.</span><span class="sxs-lookup"><span data-stu-id="a3148-124">When the system wakes automatically, it broadcasts the [PBT\_APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md) event to all applications.</span></span> <span data-ttu-id="a3148-125">Étant donné que l’utilisateur n’est pas présent, la plupart des applications ne doivent rien faire.</span><span class="sxs-lookup"><span data-stu-id="a3148-125">Because the user is not present, most applications should do nothing.</span></span> <span data-ttu-id="a3148-126">Les applications de gestion des événements, telles que les serveurs de télécopie, doivent gérer leurs événements.</span><span class="sxs-lookup"><span data-stu-id="a3148-126">Event-handling applications, such as fax servers, should handle their events.</span></span> <span data-ttu-id="a3148-127">Pour déterminer si le système est dans cet État, appelez la fonction [**IsSystemResumeAutomatic**](/windows/desktop/api/Winbase/nf-winbase-issystemresumeautomatic) .</span><span class="sxs-lookup"><span data-stu-id="a3148-127">To determine whether the system is in this state, call the [**IsSystemResumeAutomatic**](/windows/desktop/api/Winbase/nf-winbase-issystemresumeautomatic) function.</span></span> <span data-ttu-id="a3148-128">Lorsque le système sort automatiquement, l’affichage n’est pas automatiquement activé.</span><span class="sxs-lookup"><span data-stu-id="a3148-128">When the system wakes automatically, the display is not automatically turned on.</span></span>

<span data-ttu-id="a3148-129">Si le système sort de veille en raison de l’activité de l’utilisateur, le système diffuse d’abord l’événement [PBT \_ APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md) suivi d’un événement [ \_ APMRESUMESUSPEND PBT](pbt-apmresumesuspend.md) .</span><span class="sxs-lookup"><span data-stu-id="a3148-129">If the system wakes due to user activity, the system will first broadcast the [PBT\_APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md) event followed by a [PBT\_APMRESUMESUSPEND](pbt-apmresumesuspend.md) event.</span></span> <span data-ttu-id="a3148-130">En outre, le système active l’affichage.</span><span class="sxs-lookup"><span data-stu-id="a3148-130">In addition, the system will turn on the display.</span></span> <span data-ttu-id="a3148-131">Votre application doit rouvrir les fichiers qu’elle a fermés lorsque le système est passé en mode veille et se prépare à l’entrée utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a3148-131">Your application should reopen files that it closed when the system entered sleep and prepare for user input.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a3148-132">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="a3148-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a3148-133">À propos de la gestion de l’alimentation</span><span class="sxs-lookup"><span data-stu-id="a3148-133">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="a3148-134">Critères de veille du système</span><span class="sxs-lookup"><span data-stu-id="a3148-134">System Sleep Criteria</span></span>](system-sleep-criteria.md)
</dt> </dl>

 

 
