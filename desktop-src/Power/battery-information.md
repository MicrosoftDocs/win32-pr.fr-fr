---
description: Les batteries peuvent fournir de la puissance pour les ordinateurs portables et les ordinateurs qui s’exécutent sur un onduleur.
ms.assetid: 3580b37d-611c-46b4-9300-4943833d6852
title: Informations sur la batterie
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a4f9838a2a95db037b9655f116f07e3cf2e072d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106518256"
---
# <a name="battery-information"></a><span data-ttu-id="722e6-103">Informations sur la batterie</span><span class="sxs-lookup"><span data-stu-id="722e6-103">Battery Information</span></span>

<span data-ttu-id="722e6-104">Les batteries peuvent fournir de la puissance pour les ordinateurs portables et les ordinateurs qui s’exécutent sur un onduleur.</span><span class="sxs-lookup"><span data-stu-id="722e6-104">Batteries can provide power for portable computers and computers running on an uninterruptible power supply (UPS).</span></span> <span data-ttu-id="722e6-105">Sur ces ordinateurs, le système d’exploitation fournit des informations sur l’état de la batterie afin que les applications puissent fournir des fonctions utiles à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="722e6-105">On these computers, the operating system provides information on the state of the battery so applications can provide useful functions for the user.</span></span> <span data-ttu-id="722e6-106">(Certains anciens systèmes de batterie non standard et onduleurs ne sont pas pris en charge.)</span><span class="sxs-lookup"><span data-stu-id="722e6-106">(Some older nonstandard battery systems and UPSs are not supported.)</span></span>

<span data-ttu-id="722e6-107">Notez que cette vue d’ensemble suppose que vous êtes familiarisé avec la [gestion des appareils](/windows/desktop/DevIO/device-management).</span><span class="sxs-lookup"><span data-stu-id="722e6-107">Note that this overview assumes you are familiar with [device management](/windows/desktop/DevIO/device-management).</span></span>

<span data-ttu-id="722e6-108">Pour obtenir des informations sur l’état de la batterie, utilisez la fonction [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) , qui retourne des informations générales sur toutes les sources d’alimentation du système.</span><span class="sxs-lookup"><span data-stu-id="722e6-108">To obtain information about the battery status, use the [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) function, which returns general information about all power sources in the system.</span></span> <span data-ttu-id="722e6-109">Vous devez utiliser **GetSystemPowerStatus** dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="722e6-109">You should use **GetSystemPowerStatus** whenever possible.</span></span>

<span data-ttu-id="722e6-110">Dans certains cas, toutefois, des informations détaillées sur chaque batterie sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="722e6-110">In some cases, however, detailed information about each individual battery is necessary.</span></span> <span data-ttu-id="722e6-111">À cet effet, chaque unité de batterie expose une interface IOCTL.</span><span class="sxs-lookup"><span data-stu-id="722e6-111">For this purpose, each battery device exposes an IOCTL interface.</span></span> <span data-ttu-id="722e6-112">Les opérations IOCTL suivantes sont effectuées à l’aide de la fonction [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) :</span><span class="sxs-lookup"><span data-stu-id="722e6-112">The following IOCTL operations are performed using the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function:</span></span>

<dl>

[<span data-ttu-id="722e6-113">**\_ \_ informations sur les requêtes de batterie IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="722e6-113">**IOCTL\_BATTERY\_QUERY\_INFORMATION**</span></span>](ioctl-battery-query-information.md)  
[<span data-ttu-id="722e6-114">**État de la \_ requête de batterie IOCTL \_ \_**</span><span class="sxs-lookup"><span data-stu-id="722e6-114">**IOCTL\_BATTERY\_QUERY\_STATUS**</span></span>](ioctl-battery-query-status.md)  
[<span data-ttu-id="722e6-115">**\_ \_ balise de requête de batterie IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="722e6-115">**IOCTL\_BATTERY\_QUERY\_TAG**</span></span>](ioctl-battery-query-tag.md)  
[<span data-ttu-id="722e6-116">**\_ \_ informations sur le jeu de batteries IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="722e6-116">**IOCTL\_BATTERY\_SET\_INFORMATION**</span></span>](ioctl-battery-set-information.md)  
</dl>

<span data-ttu-id="722e6-117">Pour utiliser cette interface, une application doit suivre plusieurs étapes.</span><span class="sxs-lookup"><span data-stu-id="722e6-117">To use this interface, an application must follow several steps.</span></span> <span data-ttu-id="722e6-118">Tout d’abord, il doit utiliser des routines de configuration pour énumérer tous les appareils qui ont une interface de classe de batterie.</span><span class="sxs-lookup"><span data-stu-id="722e6-118">First, it must use setup routines to enumerate all devices that have a battery class interface.</span></span> <span data-ttu-id="722e6-119">Notez que ces appareils représentent les ports de la batterie, pas les batteries réelles présentes dans le système.</span><span class="sxs-lookup"><span data-stu-id="722e6-119">Note that these devices represent the battery ports, not actual batteries present in the system.</span></span> <span data-ttu-id="722e6-120">L’application doit ensuite ouvrir un descripteur sur chaque appareil afin de pouvoir utiliser la fonction [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) pour envoyer des requêtes à l’appareil, puis acquérir des balises pour toutes les batteries insérées.</span><span class="sxs-lookup"><span data-stu-id="722e6-120">The application must then open a handle to each device so it can use the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function to send requests to the device, and then acquire tags for any batteries that are inserted.</span></span> <span data-ttu-id="722e6-121">Une fois ces étapes terminées, l’application peut envoyer des requêtes à chaque périphérique de batterie.</span><span class="sxs-lookup"><span data-stu-id="722e6-121">After completing these steps, the application can send queries to each battery device.</span></span>

## <a name="battery-tags"></a><span data-ttu-id="722e6-122">Étiquettes de batterie</span><span class="sxs-lookup"><span data-stu-id="722e6-122">Battery Tags</span></span>

<span data-ttu-id="722e6-123">Étant donné que chaque unité de batterie représente un emplacement dans lequel une batterie peut être insérée, il doit exister un moyen de déterminer à quel moment la batterie est retirée, remplacée, remplacée ou modifiée d’une autre façon.</span><span class="sxs-lookup"><span data-stu-id="722e6-123">Because each battery device represents a slot into which a battery can be inserted, there must be a way to determine when the battery is removed and reinserted, replaced, or changed in any other way.</span></span> <span data-ttu-id="722e6-124">Pour ce faire, une étiquette est affectée à chaque batterie d’un emplacement particulier.</span><span class="sxs-lookup"><span data-stu-id="722e6-124">To do this, each battery in a particular slot is assigned a tag.</span></span> <span data-ttu-id="722e6-125">Cette balise doit être utilisée pour toutes les requêtes pour obtenir des informations.</span><span class="sxs-lookup"><span data-stu-id="722e6-125">This tag must be used for all queries for information.</span></span> <span data-ttu-id="722e6-126">Si la balise fournie par l’application ne correspond pas à la batterie, la requête échoue, indiquant à l’application que la batterie a changé d’une certaine façon.</span><span class="sxs-lookup"><span data-stu-id="722e6-126">If the tag provided by the application does not match the battery, the query fails, indicating to the application that the battery has changed in some way.</span></span> <span data-ttu-id="722e6-127">Pour mener à bien la requête, une nouvelle balise de batterie est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="722e6-127">To successfully complete the query, a new battery tag is required.</span></span> <span data-ttu-id="722e6-128">Obtenez la balise à l’aide de l’opération de [**\_ \_ \_ balise de requête de batterie IOCTL**](ioctl-battery-query-tag.md) .</span><span class="sxs-lookup"><span data-stu-id="722e6-128">Acquire the tag using the [**IOCTL\_BATTERY\_QUERY\_TAG**](ioctl-battery-query-tag.md) operation.</span></span> <span data-ttu-id="722e6-129">Si une batterie est présente dans cet emplacement, la balise retournée peut être transmise à l’une des autres IOCTL de la batterie pour exécuter d’autres fonctions.</span><span class="sxs-lookup"><span data-stu-id="722e6-129">If a battery is present in that slot, the tag returned can be passed to any of the other battery IOCTLs to perform other functions.</span></span> <span data-ttu-id="722e6-130">Sur un système à plusieurs batteries, chaque unité de batterie émet des étiquettes de batterie indépendamment, de sorte que la balise de deux appareils distincts peut parfois être identique.</span><span class="sxs-lookup"><span data-stu-id="722e6-130">On a multi-battery system, each battery device (slot) issues battery tags independently, so the tag from two separate devices could at times be identical.</span></span>

<span data-ttu-id="722e6-131">Une modification dans la balise de batterie ne signifie pas nécessairement que la batterie a été retirée, réinsérée ou remplacée.</span><span class="sxs-lookup"><span data-stu-id="722e6-131">A change in the battery tag does not necessarily mean that the battery was removed and reinserted or replaced.</span></span> <span data-ttu-id="722e6-132">Une nouvelle balise peut être générée si une modification est apportée à une des données qui seraient normalement statiques.</span><span class="sxs-lookup"><span data-stu-id="722e6-132">A new tag can be generated if there is a change in any of the data that would normally be static.</span></span> <span data-ttu-id="722e6-133">Par exemple, lorsqu’une batterie est chargée, la dernière capacité entièrement facturée a peut-être changé.</span><span class="sxs-lookup"><span data-stu-id="722e6-133">For example, when a battery is done charging, the last fully charged capacity may have changed.</span></span> <span data-ttu-id="722e6-134">La balise peut également changer si la communication de la batterie a été temporairement perdue ou si une notification incorrecte a été signalée par le BIOS.</span><span class="sxs-lookup"><span data-stu-id="722e6-134">The tag can also change if battery communication was temporarily lost or if there was an improper notification from the BIOS.</span></span> <span data-ttu-id="722e6-135">Sur certains systèmes, la balise de batterie peut être mise à jour chaque fois que l’État AC change.</span><span class="sxs-lookup"><span data-stu-id="722e6-135">On some systems, the battery tag may be updated whenever the AC status changes.</span></span> <span data-ttu-id="722e6-136">Ce comportement est dû à une caractéristique du système de batterie et n’est pas courant.</span><span class="sxs-lookup"><span data-stu-id="722e6-136">This behavior is due to a characteristic of the battery system and isn't common.</span></span>

<span data-ttu-id="722e6-137">Chaque fois que la balise de batterie est mise à jour, la batterie doit être traitée comme s’il s’agissait d’une nouvelle batterie et toutes les données mises en cache doivent être relues.</span><span class="sxs-lookup"><span data-stu-id="722e6-137">Whenever the battery tag is updated, the battery should be treated as if it were a new battery and all cached data should be re-read.</span></span> <span data-ttu-id="722e6-138">Si une application doit savoir si la même batterie physique est présente, elle doit vérifier la valeur de **BatteryUniqueID** dans la mémoire tampon de sortie [**des \_ \_ \_ informations de requête de batterie IOCTL**](ioctl-battery-query-information.md) lorsqu’elle est appelée avec le niveau d’informations **BatteryUniqueID** .</span><span class="sxs-lookup"><span data-stu-id="722e6-138">If an application needs to know if the same physical battery is present, it should check the value of **BatteryUniqueID** in the output buffer of [**IOCTL\_BATTERY\_QUERY\_INFORMATION**](ioctl-battery-query-information.md) when called with the **BatteryUniqueID** information level.</span></span>

## <a name="related-topics"></a><span data-ttu-id="722e6-139">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="722e6-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="722e6-140">À propos de la gestion de l’alimentation</span><span class="sxs-lookup"><span data-stu-id="722e6-140">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="722e6-141">Énumération des unités de batterie</span><span class="sxs-lookup"><span data-stu-id="722e6-141">Enumerating Battery Devices</span></span>](enumerating-battery-devices.md)
</dt> </dl>

 

 
