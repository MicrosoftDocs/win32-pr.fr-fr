---
title: Arbitrage de filtre
description: L’arbitrage de filtre est la logique intégrée à la plateforme de filtrage Windows (WFP) qui est utilisée pour déterminer comment les filtres interagissent entre eux lors de la prise de décisions de filtrage du trafic réseau.
ms.assetid: d097f307-113e-4dc3-ad59-ddfb85061583
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9fd7df778d1c24b7480de3321e7a1ec126d8e642
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103727005"
---
# <a name="filter-arbitration"></a><span data-ttu-id="1a366-103">Arbitrage de filtre</span><span class="sxs-lookup"><span data-stu-id="1a366-103">Filter Arbitration</span></span>

<span data-ttu-id="1a366-104">L’arbitrage de filtre est la logique intégrée à la plateforme de filtrage Windows (WFP) qui est utilisée pour déterminer comment les filtres interagissent entre eux lors de la prise de décisions de filtrage du trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="1a366-104">Filter arbitration is the logic built into the Windows Filtering Platform (WFP) that is used to determine how filters interact with each other when making network traffic filtering decisions.</span></span>

## <a name="filter-arbitration-behaviors"></a><span data-ttu-id="1a366-105">Comportements d’arbitrage de filtre</span><span class="sxs-lookup"><span data-stu-id="1a366-105">Filter Arbitration Behaviors</span></span>

<span data-ttu-id="1a366-106">Les comportements suivants caractérisent le système d’arbitrage de filtre :</span><span class="sxs-lookup"><span data-stu-id="1a366-106">The following behaviors characterize the filter arbitration system:</span></span>

-   <span data-ttu-id="1a366-107">Tout le trafic peut être inspecté.</span><span class="sxs-lookup"><span data-stu-id="1a366-107">All traffic can be inspected.</span></span> <span data-ttu-id="1a366-108">Aucun trafic ne peut contourner des filtres au niveau d’une couche donnée.</span><span class="sxs-lookup"><span data-stu-id="1a366-108">No traffic can bypass filters at a given layer.</span></span>
-   <span data-ttu-id="1a366-109">Le trafic peut être bloqué par un filtre de légende via un **veto** , même si un filtre de priorité plus élevé l’a autorisé.</span><span class="sxs-lookup"><span data-stu-id="1a366-109">Traffic can be blocked by a callout filter via a **Veto** even if a higher priority filter has permitted it.</span></span>
-   <span data-ttu-id="1a366-110">Plusieurs fournisseurs peuvent inspecter le trafic au niveau de la même couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-110">Multiple providers can inspect traffic at the same layer.</span></span> <span data-ttu-id="1a366-111">Par exemple, un pare-feu suivi de filtres d’identification (IDS) de système de détection d’intrusion ou IPsec, suivis de la qualité de service (QoS), peut examiner le trafic au niveau de la même couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-111">For example, firewall followed by intrusion-detection system (IDS) filters, or IPsec followed by Quality of Service (QoS) filters may all examine the traffic at the same layer.</span></span>

## <a name="filtering-model"></a><span data-ttu-id="1a366-112">Modèle de filtrage</span><span class="sxs-lookup"><span data-stu-id="1a366-112">Filtering Model</span></span>

<span data-ttu-id="1a366-113">Chaque couche de filtre est divisée en sous-couches classées par priorité (également appelées pondération).</span><span class="sxs-lookup"><span data-stu-id="1a366-113">Each filter layer is divided into sub-layers ordered by priority (also called weight).</span></span> <span data-ttu-id="1a366-114">Le trafic réseau parcourt les sous-couches de la priorité la plus élevée à la priorité la plus basse.</span><span class="sxs-lookup"><span data-stu-id="1a366-114">Network traffic traverses sub-layers from the highest priority to the lowest priority.</span></span> <span data-ttu-id="1a366-115">Les sous-couches sont créées et gérées par les développeurs à l’aide de l’API WFP.</span><span class="sxs-lookup"><span data-stu-id="1a366-115">Sub-layers are created and managed by the developers using the WFP API.</span></span>

<span data-ttu-id="1a366-116">Dans chaque sous-couche, les filtres sont classés par poids.</span><span class="sxs-lookup"><span data-stu-id="1a366-116">Within each sub-layer, filters are ordered by weight.</span></span> <span data-ttu-id="1a366-117">Le trafic réseau est indiqué pour faire correspondre les filtres du poids le plus élevé au poids le plus bas.</span><span class="sxs-lookup"><span data-stu-id="1a366-117">Network traffic is indicated to matching filters from highest weight to lowest weight.</span></span>

<span data-ttu-id="1a366-118">L’algorithme d’arbitrage de filtre est appliqué à toutes les sous-couches d’une couche et la décision de filtrage finale est prise après l’évaluation de toutes les sous-couches.</span><span class="sxs-lookup"><span data-stu-id="1a366-118">The filter arbitration algorithm is applied to all sub-layers within a layer and the final filtering decision is made after all sub-layers have been evaluated.</span></span> <span data-ttu-id="1a366-119">Cela fournit une capacité de correspondance multiple.</span><span class="sxs-lookup"><span data-stu-id="1a366-119">This provides for multiple matching capability.</span></span>

<span data-ttu-id="1a366-120">Dans une sous-couche, l’arbitrage de filtre est exécuté comme suit :</span><span class="sxs-lookup"><span data-stu-id="1a366-120">Within a sub-layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="1a366-121">Calculez la liste des filtres correspondants classés par ordre décroissant, du plus élevé au plus bas.</span><span class="sxs-lookup"><span data-stu-id="1a366-121">Compute the list of matching filters ordered by weight from highest to lowest.</span></span>
-   <span data-ttu-id="1a366-122">Évaluer les filtres correspondants dans l’ordre jusqu’à ce qu’un « autoriser » ou un « bloc » soit renvoyé (les filtres peuvent également retourner « continuer ») ou jusqu’à épuisement de la liste.</span><span class="sxs-lookup"><span data-stu-id="1a366-122">Evaluate matching filters in order until a "Permit" or a "Block" is returned (filters can also return "Continue") or until the list is exhausted.</span></span>
-   <span data-ttu-id="1a366-123">Ignore les filtres restants et retourne l’action à partir du dernier filtre évalué.</span><span class="sxs-lookup"><span data-stu-id="1a366-123">Skip the remaining filters and return the action from the last evaluated filter.</span></span>

<span data-ttu-id="1a366-124">Dans une couche, l’arbitrage de filtre est exécuté comme suit :</span><span class="sxs-lookup"><span data-stu-id="1a366-124">Within a layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="1a366-125">Effectuez un arbitrage de filtre à chaque sous-couche, dans l’ordre, de la priorité la plus basse à la priorité la plus basse.</span><span class="sxs-lookup"><span data-stu-id="1a366-125">Perform filter arbitration at every sub-layer in order from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="1a366-126">Évaluer toutes les sous-couches même si une sous-couche de priorité supérieure a décidé de bloquer le trafic.</span><span class="sxs-lookup"><span data-stu-id="1a366-126">Evaluate all sub-layers even if a higher priority sub-layer has decided to block the traffic.</span></span>
-   <span data-ttu-id="1a366-127">Retournez l’action résultante en fonction des règles de stratégie décrites dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="1a366-127">Return the resulting action based on the policy rules described in the following section.</span></span>

<span data-ttu-id="1a366-128">Le diagramme ci-dessous illustre un exemple de configuration de sous-couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-128">The diagram below illustrates a sample sub-layer configuration.</span></span> <span data-ttu-id="1a366-129">Les zones externes représentent des couches.</span><span class="sxs-lookup"><span data-stu-id="1a366-129">The outer boxes represent layers.</span></span> <span data-ttu-id="1a366-130">Les zones internes représentent des sous-couches qui contiennent des filtres.</span><span class="sxs-lookup"><span data-stu-id="1a366-130">The inner boxes represent sub-layers that contain filters.</span></span> <span data-ttu-id="1a366-131">Le caractère générique ( \* ) dans un filtre signifie que tout le trafic correspond au filtre.</span><span class="sxs-lookup"><span data-stu-id="1a366-131">The wildcard (\*) in a filter means all traffic matches the filter.</span></span>

![exemple de configuration de la sous-couche](images/fwp-sub-config2.png)

<span data-ttu-id="1a366-133">La seule façon d’ignorer un filtre est qu’un filtre de poids supérieur a autorisé ou bloqué le trafic au sein de la même sous-couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-133">The only way for a filter to be bypassed is if a higher weight filter has permitted or blocked the traffic within the same sub-layer.</span></span> <span data-ttu-id="1a366-134">À l’inverse, pour s’assurer qu’un filtre voit toujours tout le trafic au sein d’une couche, vous pouvez ajouter une sous-couche qui contient un filtre unique qui correspond à tout le trafic.</span><span class="sxs-lookup"><span data-stu-id="1a366-134">Conversely, one way of ensuring that a filter always sees all traffic within a layer is to add a sub-layer that contains a single filter that matches all traffic.</span></span>

## <a name="configurable-override-policy"></a><span data-ttu-id="1a366-135">Stratégie de remplacement configurable</span><span class="sxs-lookup"><span data-stu-id="1a366-135">Configurable Override Policy</span></span>

<span data-ttu-id="1a366-136">Les règles décrites ci-dessous régissent les décisions d’arbitrage au sein d’une couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-136">The rules described below govern the arbitration decisions within a layer.</span></span> <span data-ttu-id="1a366-137">Ces règles sont utilisées par le moteur de filtre pour décider de l’une des actions de sous-couche qui est appliquée au trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="1a366-137">These rules are used by the filter engine to decide which one of the sub-layer actions is applied to the network traffic.</span></span>

<span data-ttu-id="1a366-138">La stratégie de base est la suivante.</span><span class="sxs-lookup"><span data-stu-id="1a366-138">The basic policy is as follows.</span></span>

-   <span data-ttu-id="1a366-139">Les actions sont évaluées dans l’ordre de priorité des sous-couches, de la priorité la plus élevée à la priorité la plus basse.</span><span class="sxs-lookup"><span data-stu-id="1a366-139">Actions are evaluated in priority order of sub-layers from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="1a366-140">« Block » remplace « permit ».</span><span class="sxs-lookup"><span data-stu-id="1a366-140">"Block" overrides "Permit".</span></span>
-   <span data-ttu-id="1a366-141">« Block » est final (ne peut pas être substitué) et arrête l’évaluation.</span><span class="sxs-lookup"><span data-stu-id="1a366-141">"Block" is final (cannot be overridden) and stops the evaluation.</span></span> <span data-ttu-id="1a366-142">Le paquet est rejeté.</span><span class="sxs-lookup"><span data-stu-id="1a366-142">The packet is discarded.</span></span>

<span data-ttu-id="1a366-143">La stratégie de base ne prend pas en charge le scénario d’une exception qui n’est pas remplacée par un pare-feu.</span><span class="sxs-lookup"><span data-stu-id="1a366-143">The basic policy does not support the scenario of an exception not overridden by a firewall.</span></span> <span data-ttu-id="1a366-144">Voici quelques exemples typiques de ce type de scénario :</span><span class="sxs-lookup"><span data-stu-id="1a366-144">Typical examples of this type of scenario are:</span></span>

-   <span data-ttu-id="1a366-145">Le port d’administration à distance doit être ouvert même en présence d’un pare-feu tiers.</span><span class="sxs-lookup"><span data-stu-id="1a366-145">Remote administration port required to be opened even in the presence of a third-party firewall.</span></span>
-   <span data-ttu-id="1a366-146">Les composants qui requièrent l’ouverture de ports pour fonctionner (par exemple, Universal Plug-and-Play UPnP).</span><span class="sxs-lookup"><span data-stu-id="1a366-146">Components that require ports to be opened in order to function (for example, Universal Plug and Play UPnP).</span></span> <span data-ttu-id="1a366-147">Si l’administrateur a explicitement activé le composant, le pare-feu ne doit pas bloquer le trafic en mode silencieux.</span><span class="sxs-lookup"><span data-stu-id="1a366-147">If the administrator has explicitly enabled the component, the firewall should not silently block the traffic.</span></span>

<span data-ttu-id="1a366-148">Afin de prendre en charge les scénarios ci-dessus, une décision de filtrage doit être rendue plus difficile à remplacer qu’une autre décision de filtrage en gérant l’autorisation de remplacement d’action.</span><span class="sxs-lookup"><span data-stu-id="1a366-148">In order to support the above scenarios, a filtering decision must be made more difficult to override than another filtering decision by managing the action override permission.</span></span> <span data-ttu-id="1a366-149">Cette autorisation est implémentée en tant qu’indicateur d' **\_ écriture d' \_ action \_ FWPS Right** et est définie pour chaque filtre.</span><span class="sxs-lookup"><span data-stu-id="1a366-149">This permission is implemented as the **FWPS\_RIGHT\_ACTION\_WRITE** flag and it is set on a per-filter basis.</span></span>

<span data-ttu-id="1a366-150">L’algorithme d’évaluation gère l’action en cours (« autoriser » ou « bloquer »), ainsi que l’indicateur d' **\_ écriture d' \_ action \_ FWPS à droite** .</span><span class="sxs-lookup"><span data-stu-id="1a366-150">The evaluation algorithm maintains the current action ("Permit" or "Block") along with the **FWPS\_RIGHT\_ACTION\_WRITE** flag.</span></span> <span data-ttu-id="1a366-151">L’indicateur détermine si une sous-couche de priorité inférieure est autorisée à remplacer l’action.</span><span class="sxs-lookup"><span data-stu-id="1a366-151">The flag controls whether a lower priority sub-layer is allowed to override the action.</span></span> <span data-ttu-id="1a366-152">En définissant ou en réinitialisant l’indicateur d' **\_ écriture d' \_ action \_ FWPS à droite** dans la structure [FWPS \_ classifier \_ OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) , un fournisseur régit la façon dont les actions peuvent ou ne peuvent pas être remplacées.</span><span class="sxs-lookup"><span data-stu-id="1a366-152">By setting or resetting the **FWPS\_RIGHT\_ACTION\_WRITE** flag in the [FWPS\_CLASSIFY\_OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) structure, a provider governs how actions can or cannot be overridden.</span></span> <span data-ttu-id="1a366-153">Si l’indicateur est défini, il indique que l’action peut être substituée.</span><span class="sxs-lookup"><span data-stu-id="1a366-153">If the flag is set, it indicates that the action can be overridden.</span></span> <span data-ttu-id="1a366-154">Si l’indicateur est absent, l’action ne peut pas être substituée.</span><span class="sxs-lookup"><span data-stu-id="1a366-154">If the flag is absent, the action cannot be overridden.</span></span>



| <span data-ttu-id="1a366-155">Action</span><span class="sxs-lookup"><span data-stu-id="1a366-155">Action</span></span> | <span data-ttu-id="1a366-156">Autoriser le remplacement (l' \_ écriture d’action FWPS Right \_ \_ est définie)</span><span class="sxs-lookup"><span data-stu-id="1a366-156">Allow override (FWPS\_RIGHT\_ACTION\_WRITE is set)</span></span> | <span data-ttu-id="1a366-157">Description</span><span class="sxs-lookup"><span data-stu-id="1a366-157">Description</span></span>                                                                                                          |
|--------|----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1a366-158">Permit</span><span class="sxs-lookup"><span data-stu-id="1a366-158">Permit</span></span> | <span data-ttu-id="1a366-159">Oui</span><span class="sxs-lookup"><span data-stu-id="1a366-159">Yes</span></span>                                                | <span data-ttu-id="1a366-160">Le trafic peut être bloqué sur une autre sous-couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-160">The traffic can be blocked at another sub-layer.</span></span> <span data-ttu-id="1a366-161">C’est ce qu’on appelle une autorisation souple.</span><span class="sxs-lookup"><span data-stu-id="1a366-161">This is called a soft permit.</span></span><br/>                            |
| <span data-ttu-id="1a366-162">Permit</span><span class="sxs-lookup"><span data-stu-id="1a366-162">Permit</span></span> | <span data-ttu-id="1a366-163">Non</span><span class="sxs-lookup"><span data-stu-id="1a366-163">No</span></span>                                                 | <span data-ttu-id="1a366-164">Le trafic peut être bloqué sur une autre sous-couche uniquement par un **refus** de la légende.</span><span class="sxs-lookup"><span data-stu-id="1a366-164">The traffic can be blocked at another sub-layer only by a callout **Veto**.</span></span> <span data-ttu-id="1a366-165">C’est ce qu’on appelle une autorisation dure.</span><span class="sxs-lookup"><span data-stu-id="1a366-165">This is called a hard permit.</span></span><br/> |
| <span data-ttu-id="1a366-166">Bloquer</span><span class="sxs-lookup"><span data-stu-id="1a366-166">Block</span></span>  | <span data-ttu-id="1a366-167">Oui</span><span class="sxs-lookup"><span data-stu-id="1a366-167">Yes</span></span>                                                | <span data-ttu-id="1a366-168">Le trafic peut être autorisé sur une autre sous-couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-168">The traffic can be permitted at another sub-layer.</span></span> <span data-ttu-id="1a366-169">C’est ce qu’on appelle un bloc souple.</span><span class="sxs-lookup"><span data-stu-id="1a366-169">This is called a soft block.</span></span><br/>                           |
| <span data-ttu-id="1a366-170">Bloquer</span><span class="sxs-lookup"><span data-stu-id="1a366-170">Block</span></span>  | <span data-ttu-id="1a366-171">Non</span><span class="sxs-lookup"><span data-stu-id="1a366-171">No</span></span>                                                 | <span data-ttu-id="1a366-172">Le trafic ne peut pas être autorisé sur une autre sous-couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-172">The traffic cannot be permitted at another sub-layer.</span></span> <span data-ttu-id="1a366-173">C’est ce qu’on appelle un bloc Hard.</span><span class="sxs-lookup"><span data-stu-id="1a366-173">This is called a hard block.</span></span><br/>                        |



 

<span data-ttu-id="1a366-174">L’action de filtre peut être définie en définissant le membre de **type** dans la structure [**FWPM \_ ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) sur le **\_ \_ bloc d’action fwp** ou l' **\_ \_ autorisation d’action fwp**.</span><span class="sxs-lookup"><span data-stu-id="1a366-174">The filter action can be set by setting the **type** member in the structure [**FWPM\_ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) to either **FWP\_ACTION\_BLOCK** or **FWP\_ACTION\_PERMIT**.</span></span> <span data-ttu-id="1a366-175">En même temps que le type d’action, un filtre expose également l’indicateur de filtre FWPM indicateur de l' **\_ \_ \_ \_ action effacer \_ le droit**.</span><span class="sxs-lookup"><span data-stu-id="1a366-175">Along with the action type, a filter also exposes the flag **FWPM\_FILTER\_FLAG\_CLEAR\_ACTION\_RIGHT**.</span></span> <span data-ttu-id="1a366-176">Si cet indicateur est désactivé, le type d’action est difficile et ne peut pas être substitué, sauf lorsqu’une autorisation dure est remplacée par un **veto** comme expliqué plus tard, sinon il est soft qui peut être remplacé par une action de haute priorité.</span><span class="sxs-lookup"><span data-stu-id="1a366-176">If this flag is cleared, then the action type is hard and cannot be overridden except when a hard permit is overridden by a **Veto** as explained later on, else it is soft which can be overridden by high priority action.</span></span>

<span data-ttu-id="1a366-177">Le tableau suivant répertorie le comportement par défaut pour les actions de filtre et de légende.</span><span class="sxs-lookup"><span data-stu-id="1a366-177">The following table lists the default behavior for filter and callout actions.</span></span>

| <span data-ttu-id="1a366-178">Action</span><span class="sxs-lookup"><span data-stu-id="1a366-178">Action</span></span>         | <span data-ttu-id="1a366-179">Comportement par défaut</span><span class="sxs-lookup"><span data-stu-id="1a366-179">Default Behavior</span></span> |
|----------------|------------------|
| <span data-ttu-id="1a366-180">Autorisation de filtre</span><span class="sxs-lookup"><span data-stu-id="1a366-180">Filter permit</span></span>  | <span data-ttu-id="1a366-181">Autorisation souple</span><span class="sxs-lookup"><span data-stu-id="1a366-181">Soft permit</span></span>      |
| <span data-ttu-id="1a366-182">Autorisation de la légende</span><span class="sxs-lookup"><span data-stu-id="1a366-182">Callout permit</span></span> | <span data-ttu-id="1a366-183">Autorisation souple</span><span class="sxs-lookup"><span data-stu-id="1a366-183">Soft permit</span></span>      |
| <span data-ttu-id="1a366-184">Filtrer le bloc</span><span class="sxs-lookup"><span data-stu-id="1a366-184">Filter block</span></span>   | <span data-ttu-id="1a366-185">Bloc matériel</span><span class="sxs-lookup"><span data-stu-id="1a366-185">Hard block</span></span>       |
| <span data-ttu-id="1a366-186">Bloc de légende</span><span class="sxs-lookup"><span data-stu-id="1a366-186">Callout block</span></span>  | <span data-ttu-id="1a366-187">Bloc souple</span><span class="sxs-lookup"><span data-stu-id="1a366-187">Soft block</span></span>       |



 

<span data-ttu-id="1a366-188">Un **veto** est une action « bloquer » renvoyée par le filtre lorsque l’indicateur d' **\_ écriture d' \_ action \_ FWPS à droite** a été réinitialisé avant d’appeler le filtre.</span><span class="sxs-lookup"><span data-stu-id="1a366-188">A **Veto** is a "Block" action returned by the filter when the **FWPS\_RIGHT\_ACTION\_WRITE** flag was reset prior to calling the filter.</span></span> <span data-ttu-id="1a366-189">Un **veto** bloquera le trafic autorisé avec une autorisation matérielle.</span><span class="sxs-lookup"><span data-stu-id="1a366-189">A **Veto** will block traffic that was permitted with a hard permit.</span></span>

<span data-ttu-id="1a366-190">Lorsqu’un **veto** est émis, il s’agit d’une indication de conflit dans la configuration.</span><span class="sxs-lookup"><span data-stu-id="1a366-190">When a **Veto** is issued, it is an indication of conflict in the configuration.</span></span> <span data-ttu-id="1a366-191">Les actions suivantes sont prises pour atténuer le conflit.</span><span class="sxs-lookup"><span data-stu-id="1a366-191">The following actions are taken to mitigate the conflict.</span></span>

-   <span data-ttu-id="1a366-192">Le trafic est bloqué.</span><span class="sxs-lookup"><span data-stu-id="1a366-192">The traffic is blocked.</span></span>
-   <span data-ttu-id="1a366-193">Un événement d’audit est généré.</span><span class="sxs-lookup"><span data-stu-id="1a366-193">An audit event is generated.</span></span>
-   <span data-ttu-id="1a366-194">Une notification est générée.</span><span class="sxs-lookup"><span data-stu-id="1a366-194">A notification is generated.</span></span>
    > [!Note]  
    > <span data-ttu-id="1a366-195">La notification est reçue par toutes les entités qui y sont abonnés.</span><span class="sxs-lookup"><span data-stu-id="1a366-195">The notification is received by all entities that have subscribed to it.</span></span> <span data-ttu-id="1a366-196">Cela inclut généralement le pare-feu (afin de détecter les mal-configurations) ou les applications (afin de détecter si leur filtre particulier est remplacé).</span><span class="sxs-lookup"><span data-stu-id="1a366-196">This will typically include the firewall (in order to detect mis-configurations), or applications (in order to detect if their particular filter is overridden).</span></span>

     

    > [!Note]  
    > <span data-ttu-id="1a366-197">Aucune interface utilisateur (IU) obligatoire n’est instanciée lorsqu’un filtre d’autorisation dure est substitué.</span><span class="sxs-lookup"><span data-stu-id="1a366-197">There is no mandatory user interface (UI) instantiated when a "Hard Permit" filter is overridden.</span></span> <span data-ttu-id="1a366-198">Les notifications du remplacement sont envoyées à n’importe quel fournisseur inscrit pour les recevoir, ce qui permet aux pare-feu ou aux applications qui ont créé les filtres d’autorisation d’afficher l’interface utilisateur qui demande l’action de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1a366-198">The notifications of the override are sent to any provider that registered to receive them, which allows firewalls, or the applications that created the "Permit" filters, to show UI asking for user action.</span></span> <span data-ttu-id="1a366-199">Il n’y a aucune valeur dans la notification de l’interface utilisateur de la plateforme pour ces événements de remplacement, car les éditeurs de logiciels indépendants qui ne veulent pas bloquer de manière silencieuse peuvent le faire en s’inscrivant à un emplacement différent dans WFP, ou (moins privilégié) gérer toute leur logique dans un pilote d’appel sortant.</span><span class="sxs-lookup"><span data-stu-id="1a366-199">There is no value in having a platform UI notification for these override events since firewall ISVs that do not want to silently block can do so by registering at a different place in WFP, or (less preferred) handle all their logic in a call-out driver.</span></span> <span data-ttu-id="1a366-200">Les éditeurs de logiciels indépendants (ISV) qui envisagent d’inviter les utilisateurs sont d’une bonne idée de posséder l’expérience utilisateur et de créer leur propre interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1a366-200">ISVs that do think prompting users is a good idea will want to own the user experience and create their own UI.</span></span>

     

<span data-ttu-id="1a366-201">Le comportement d’atténuation décrit ci-dessus permet de s’assurer qu’un filtre d’autorisation « dure » n’est pas silencieusement remplacé par un filtre « bloquer » et qu’il couvre le scénario dans lequel un port d’administration à distance n’est pas autorisé à être bloqué par le pare-feu.</span><span class="sxs-lookup"><span data-stu-id="1a366-201">The mitigation behavior described above ensures that a "Hard Permit" filter is not silently overridden by a "Block" filter, and covers the scenario where a remote administration port is not allowed to be blocked by the firewall.</span></span> <span data-ttu-id="1a366-202">Afin de remplacer silencieusement les filtres de « disque dur », un pare-feu doit ajouter ses filtres dans une sous-couche de priorité supérieure.</span><span class="sxs-lookup"><span data-stu-id="1a366-202">In order to silently override "Hard Permit" filters a firewall has to add its filters within a higher priority sub-layer.</span></span>

> [!Note]  
> <span data-ttu-id="1a366-203">Étant donné qu’il n’y a pas d’arbitrage inter-couche, le trafic autorisé avec « autorisation matérielle » peut toujours être bloqué sur une autre couche.</span><span class="sxs-lookup"><span data-stu-id="1a366-203">Since there is no cross-layer arbitration, traffic permitted with "Hard Permit" may still be blocked at another layer.</span></span> <span data-ttu-id="1a366-204">Il incombe à l’auteur de la stratégie de s’assurer que le trafic est autorisé au niveau de chaque couche, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="1a366-204">It is the responsibility of the policy author to ensure that traffic is permitted at each layer if necessary.</span></span>

 

<span data-ttu-id="1a366-205">Les applications utilisateur qui demandent des ports à ouvrir ajoutent des filtres remplaçables à une sous-couche basse priorité.</span><span class="sxs-lookup"><span data-stu-id="1a366-205">User applications requesting ports to be opened add overridable filters to a low priority sub-layer.</span></span> <span data-ttu-id="1a366-206">Le pare-feu peut s’abonner au filtre ajouter des événements de notification et ajouter un filtre correspondant après la validation de l’utilisateur (ou de la stratégie).</span><span class="sxs-lookup"><span data-stu-id="1a366-206">The firewall can subscribe to the filter add notification events and add a matching filter after user (or policy) validation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1a366-207">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="1a366-207">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1a366-208">Affectation de poids de filtre</span><span class="sxs-lookup"><span data-stu-id="1a366-208">Filter Weight Assignment</span></span>](filter-weight-assignment.md)
</dt> </dl>

 

