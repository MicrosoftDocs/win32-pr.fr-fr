---
title: Opération WFP
description: La plateforme de filtrage Windows (WFP) effectue ses tâches en intégrant les couches, les filtres, les shims et les légendes des entités de base suivantes.
ms.assetid: bf88ace7-1160-434b-9be0-3f9db6aa2e87
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44e7a7d38bd0de5b1f549e2187c414644bf68442
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "106509254"
---
# <a name="wfp-operation"></a><span data-ttu-id="e0ae7-103">Opération WFP</span><span class="sxs-lookup"><span data-stu-id="e0ae7-103">WFP Operation</span></span>

<span data-ttu-id="e0ae7-104">La plateforme de filtrage Windows (WFP) effectue ses tâches en intégrant les entités de base suivantes : *couches*, *filtres*, *shims* et *légendes*.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-104">Windows Filtering Platform (WFP) performs its tasks by integrating the following basic entities: *Layers*, *Filters*, *Shims*, and *Callouts*.</span></span>

## <a name="layers"></a><span data-ttu-id="e0ae7-105">Calques</span><span class="sxs-lookup"><span data-stu-id="e0ae7-105">Layers</span></span>

<span data-ttu-id="e0ae7-106">Une *couche* est un conteneur géré par le moteur de filtre dont la fonction est d’organiser les filtres en ensembles.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-106">A *layer* is a container managed by the filter engine whose function is to organize filters into sets.</span></span> <span data-ttu-id="e0ae7-107">Une couche n’est pas un module de la pile réseau.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-107">A layer is not a module in the network stack.</span></span> <span data-ttu-id="e0ae7-108">Chaque couche possède un schéma qui définit le type de filtres qui peuvent y être ajoutés.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-108">Each layer has a schema that defines the type of filters that can be added to it.</span></span> <span data-ttu-id="e0ae7-109">Pour plus d’informations, consultez [conditions de filtrage disponibles à chaque couche de filtrage](filtering-conditions-available-at-each-filtering-layer.md) .</span><span class="sxs-lookup"><span data-stu-id="e0ae7-109">See [Filtering Conditions Available at Each Filtering Layer](filtering-conditions-available-at-each-filtering-layer.md) for more information.</span></span>

<span data-ttu-id="e0ae7-110">Les couches peuvent contenir des sous-couches pour gérer les exigences de filtre conflictuelles telles que « bloquer les ports TCP au-dessus de 1024 » et « ouvrir le port 1080 ».</span><span class="sxs-lookup"><span data-stu-id="e0ae7-110">Layers may contain sub-layers to manage conflicting filter requirements such as "Block TCP ports above 1024" and "Open port 1080".</span></span> <span data-ttu-id="e0ae7-111">Les règles de gestion des conflits de filtrage sont déterminées par l' [arbitrage de filtre](filter-arbitration.md).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-111">The rules for managing filtering conflicts are determined by [Filter Arbitration](filter-arbitration.md).</span></span>

<span data-ttu-id="e0ae7-112">WFP contient un ensemble de [sous-couches intégrées](management-filtering-sublayer-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-112">WFP contains a set of [built-in sub-layers](management-filtering-sublayer-identifiers.md).</span></span> <span data-ttu-id="e0ae7-113">Chaque couche hérite de toutes les sous-couches intégrées.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-113">Every layer inherits all the built-in sub-layers.</span></span> <span data-ttu-id="e0ae7-114">Les utilisateurs peuvent également ajouter leurs propres sous-couches.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-114">Users can also add their own sub-layers.</span></span>

<span data-ttu-id="e0ae7-115">La liste des couches du moteur de filtre est fournie dans la rubrique de la section de référence [**filtrage des identificateurs de couche**](management-filtering-layer-identifiers-.md).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-115">The list of filter engine layers is provided in the reference section topic [**Filtering Layer Identifiers**](management-filtering-layer-identifiers-.md).</span></span>

## <a name="filters"></a><span data-ttu-id="e0ae7-116">Filtres</span><span class="sxs-lookup"><span data-stu-id="e0ae7-116">Filters</span></span>

<span data-ttu-id="e0ae7-117">Un *filtre* est une règle qui correspond à des paquets entrants ou sortants.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-117">A *filter* is a rule that is matched against incoming or outgoing packets.</span></span> <span data-ttu-id="e0ae7-118">La règle indique au moteur de filtrage ce qu’il doit faire avec le paquet, y compris pour appeler un module de légende pour l’inspection Poussée des paquets ou du flux.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-118">The rule tells the filtering engine what to do with the packet, including to call a callout module for deep packet or stream inspection.</span></span> <span data-ttu-id="e0ae7-119">Par exemple, un filtre peut spécifier « bloquer le trafic avec un port TCP supérieur à 1024 » ou « appeler des ID pour tout le trafic qui n’est pas sécurisé ».</span><span class="sxs-lookup"><span data-stu-id="e0ae7-119">For example, a filter may specify "Block traffic with a TCP port greater than 1024" or "Call out to IDS for all traffic that is not secured."</span></span>

<span data-ttu-id="e0ae7-120">Un filtre au moment du démarrage est un filtre appliqué au démarrage dès que le pilote de pile TCP/IP (tcpip.sys) démarre.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-120">A boot-time filter is a filter that is enforced at boot-time as soon as the TCP/IP stack driver (tcpip.sys) starts.</span></span> <span data-ttu-id="e0ae7-121">Un filtre au moment du démarrage est désactivé au démarrage de BFE.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-121">A boot-time filter is disabled when BFE starts.</span></span> <span data-ttu-id="e0ae7-122">Un filtre est marqué comme au moment du démarrage en définissant l’indicateur de [**\_ filtre FWPM \_ \_ BOOTTIME**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) lorsque [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) est appelé.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-122">A filter is marked as boot-time by setting the [**FWPM\_FILTER\_FLAG\_BOOTTIME**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) flag when [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) is invoked.</span></span>

<span data-ttu-id="e0ae7-123">Un filtre au moment de l’exécution est un filtre appliqué après le démarrage de BFE.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-123">A run-time filter is a filter that is enforced after BFE starts.</span></span> <span data-ttu-id="e0ae7-124">Un filtre au moment de l’exécution peut être statique, dynamique ou persistant en fonction de la façon dont il a été créé.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-124">A run-time filter can be static, dynamic, or persistent depending on the way it was created.</span></span> <span data-ttu-id="e0ae7-125">Pour plus d’informations sur les différents types de filtres au moment de l’exécution et leur durée de vie, consultez [gestion des objets](object-management.md) .</span><span class="sxs-lookup"><span data-stu-id="e0ae7-125">See [Object Management](object-management.md) for more information on the different types of run-time filters and their lifetime.</span></span>

## <a name="shims"></a><span data-ttu-id="e0ae7-126">Shims</span><span class="sxs-lookup"><span data-stu-id="e0ae7-126">Shims</span></span>

<span data-ttu-id="e0ae7-127">Un *shim* est un composant en mode noyau qui prend des décisions de filtrage en classifiant les couches du moteur de filtre.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-127">A *shim* is a kernel-mode component that makes filtering decisions by classifying against the filter engine layers.</span></span> <span data-ttu-id="e0ae7-128">Chaque shim est classé par rapport à une ou plusieurs couches.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-128">Each shim classifies against one or more layers.</span></span> <span data-ttu-id="e0ae7-129">Par exemple, le shim de module de couche transport est classé par rapport à la couche de transport entrante, à la couche de transport sortant et aux couches de connexion ALE et de Receive-Accept pour le premier paquet d’un Workflow.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-129">For example, the Transport Layer Module shim classifies against the Inbound Transport layer, the Outbound Transport layer, and the ALE Connect and Receive-Accept layers for the first packet of a flow.</span></span>

<span data-ttu-id="e0ae7-130">Dans la mesure où les paquets, les flux et les événements traversent la pile réseau, les shims les analysent pour extraire les conditions et valeurs de la valeur, puis appellent le moteur de filtre pour les évaluer par rapport aux filtres d’une couche donnée.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-130">As packets, streams, and events traverse the network stack, the shims parse them to extract the classifiable conditions and values, and then call into the filter engine to evaluate them against the filters in a given layer.</span></span> <span data-ttu-id="e0ae7-131">Le moteur de filtre peut appeler un ou plusieurs appels dans le cadre de la classification.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-131">The filter engine may invoke one or more callouts as part of the classification.</span></span> <span data-ttu-id="e0ae7-132">Les shims effectuent le déplacement réel des paquets, des flux et des événements en fonction du résultat de la classification effectuée par le moteur de filtre.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-132">The shims do the actual dropping of packets, streams, and events based on the result of the classification performed by the filter engine.</span></span>

## <a name="callouts"></a><span data-ttu-id="e0ae7-133">Légendes</span><span class="sxs-lookup"><span data-stu-id="e0ae7-133">Callouts</span></span>

<span data-ttu-id="e0ae7-134">Une *légende* est un ensemble de fonctions exposées par un pilote et utilisée pour un filtrage spécialisé.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-134">A *callout* is a set of functions exposed by a driver and used for specialized filtering.</span></span> <span data-ttu-id="e0ae7-135">Ils sont utilisés pour effectuer une analyse et une manipulation des paquets, tels que l’analyse antivirus, le contrôle parental recherche de contenu inapproprié, l’analyse des données de paquets pour les outils de surveillance.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-135">They are used to perform analysis and manipulation of the packets, such as virus scan, parental controls scan for inappropriate content, packet data parsing for monitoring tools.</span></span> <span data-ttu-id="e0ae7-136">Certains appels, tels que le pilote de traduction d’adresses réseau (NAT), sont intégrés au système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-136">Some callouts, such as the Network Address Translation (NAT) driver, are built into the operating system.</span></span> <span data-ttu-id="e0ae7-137">D’autres, telles qu’une légende de contrôle parental HTTP ou la légende système de détection d’intrusion (IDS), peuvent être fournies par des éditeurs de logiciels indépendants (ISV).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-137">Others, such as an HTTP Parental Control callout or the Intrusion Detection System (IDS) callout, can be provided by independent software vendors (ISVs).</span></span> <span data-ttu-id="e0ae7-138">Les fonctions de légende sont appelées par le moteur de filtre lorsqu’un filtre de légende correspondant est mis en correspondance au niveau d’une couche donnée.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-138">The callout functions are invoked by the filter engine when a corresponding callout filter is matched at a given layer.</span></span>

<span data-ttu-id="e0ae7-139">Les légendes peuvent être inscrites sur n’importe quelle couche WFP en mode noyau.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-139">Callouts can be registered at any of the kernel-mode WFP layers.</span></span> <span data-ttu-id="e0ae7-140">Les légendes peuvent retourner une action (« bloquer », « autoriser » et, lors de l’inspection des flux de données, « différer », « nécessiter plus de données », « supprimer la connexion ») et peuvent modifier et sécuriser le trafic réseau entrant et sortant.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-140">Callouts can return an action ("Block", "Permit", and, when performing stream inspection, "Defer", "Need more data", "Drop connection") and can modify and secure inbound and outbound network traffic.</span></span>

<span data-ttu-id="e0ae7-141">Une fois qu’une légende est inscrite auprès du moteur de filtre, elle peut recevoir le trafic réseau à traiter.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-141">Once a callout is registered with the filter engine, it can receive network traffic to process.</span></span> <span data-ttu-id="e0ae7-142">Le trafic peut être des paquets, des flux ou des événements en fonction de la couche.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-142">The traffic may be packets, streams, or events depending on the layer.</span></span> <span data-ttu-id="e0ae7-143">Un agent de pare-feu ou d’application provoque le transfert du trafic vers une légende en ajoutant un filtre dont l’action est « légende » et dont l’ID de légende est l’identificateur de cette légende.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-143">An application or firewall agent causes traffic to be passed to a callout by adding a filter whose action is "Callout" and whose callout ID is that callout's identifier.</span></span> <span data-ttu-id="e0ae7-144">Les légendes peuvent indiquer au moteur de filtre de retourner « bloquer » ou « autoriser » au shim.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-144">Callouts can instruct the filter engine to return "Block" or "Permit" to the shim.</span></span> <span data-ttu-id="e0ae7-145">Les légendes peuvent également retourner « continuer » pour permettre à d’autres filtres de traiter le paquet.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-145">Callouts can also return "Continue" to allow other filters to process the packet.</span></span>

<span data-ttu-id="e0ae7-146">Plusieurs légendes peuvent être exposées par un pilote de légende.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-146">Multiple callouts may be exposed by one callout driver.</span></span>

<span data-ttu-id="e0ae7-147">Une légende doit être ajoutée (avec [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) et enregistrée (avec [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)) avant de pouvoir être utilisée.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-147">A callout needs to be added (with [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) and registered (with [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)) before it can be used.</span></span> <span data-ttu-id="e0ae7-148">Un appel à **FwpmCalloutAdd0** est requis avant la création de filtres qui font référence à la légende.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-148">A call to **FwpmCalloutAdd0** is required before the creation of filters that reference the callout.</span></span> <span data-ttu-id="e0ae7-149">Un appel à FwpsCalloutRegister est nécessaire pour que la protection de code à plateforme puisse appeler la légende lorsque les filtres de légende sont mis en correspondance.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-149">A call to FwpsCalloutRegister is required before WFP can invoke the callout when the callout filters are matched.</span></span> <span data-ttu-id="e0ae7-150">Par défaut, les filtres qui font référence à des appels qui ont été ajoutés mais n’ont pas encore été enregistrés avec le moteur de filtre sont traités comme des filtres de « bloc ».</span><span class="sxs-lookup"><span data-stu-id="e0ae7-150">By default filters that reference callouts that have been added but have not yet registered with the filter engine are treated as "Block" filters.</span></span> <span data-ttu-id="e0ae7-151">L’ordre d’appel de **FwpmCalloutAdd0** et de FwpsCalloutRegister n’a pas d’importance.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-151">The order of calling **FwpmCalloutAdd0** and FwpsCalloutRegister does not matter.</span></span> <span data-ttu-id="e0ae7-152">Une légende persistante doit être ajoutée une seule fois et doit être enregistrée chaque fois que le pilote qui implémente la légende démarre (par exemple, après un redémarrage).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-152">A persistent callout needs to be added just once and needs to be registered every time the driver that implements the callout starts (for example, after a reboot).</span></span>

## <a name="classification"></a><span data-ttu-id="e0ae7-153">classification ;</span><span class="sxs-lookup"><span data-stu-id="e0ae7-153">Classification</span></span>

<span data-ttu-id="e0ae7-154">La classification est le processus qui consiste à appliquer des filtres au trafic réseau (paquet, flux ou événement) afin de déterminer le résultat « autoriser » ou « bloquer » pour ce trafic.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-154">Classification is the process of applying filters to network traffic (packet, stream, or event) in order to determine a result of "Permit" or "Block" for that traffic.</span></span> <span data-ttu-id="e0ae7-155">Pour un paquet, un flux ou un événement, il existe un seul appel de classification par couche.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-155">For one packet, stream, or event there is one classification call per layer.</span></span>

<span data-ttu-id="e0ae7-156">Pendant la classification, les propriétés (par exemple, adresse source) du paquet, du flux ou de l’événement sont comparées aux conditions de filtre définies sur les filtres de la couche où la classification est appelée.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-156">During classification, the properties (for example, source address) of the packet, stream, or event are compared with filter conditions set on filters at the layer where the classification is invoked.</span></span> <span data-ttu-id="e0ae7-157">Lorsque des correspondances sont trouvées, l’algorithme d' [arbitrage de filtre](filter-arbitration.md) est utilisé pour déterminer le résultat du processus de classification.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-157">When matches are found, the [Filter Arbitration](filter-arbitration.md) algorithm is used to determines the result of the classification process.</span></span>

<span data-ttu-id="e0ae7-158">Une demande de classification est déclenchée par un shim.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-158">A classification request is triggered by a shim.</span></span>

<span data-ttu-id="e0ae7-159">Les actions de classification peuvent être :</span><span class="sxs-lookup"><span data-stu-id="e0ae7-159">Classification actions could be either:</span></span>

-   <span data-ttu-id="e0ae7-160">Permit</span><span class="sxs-lookup"><span data-stu-id="e0ae7-160">Permit</span></span>
-   <span data-ttu-id="e0ae7-161">Bloquer</span><span class="sxs-lookup"><span data-stu-id="e0ae7-161">Block</span></span>
-   <span data-ttu-id="e0ae7-162">Légende</span><span class="sxs-lookup"><span data-stu-id="e0ae7-162">Callout</span></span>
    -   <span data-ttu-id="e0ae7-163">Permit</span><span class="sxs-lookup"><span data-stu-id="e0ae7-163">Permit</span></span>
    -   <span data-ttu-id="e0ae7-164">Bloquer</span><span class="sxs-lookup"><span data-stu-id="e0ae7-164">Block</span></span>
    -   <span data-ttu-id="e0ae7-165">Continuer</span><span class="sxs-lookup"><span data-stu-id="e0ae7-165">Continue</span></span>
    -   <span data-ttu-id="e0ae7-166">Fenêtres</span><span class="sxs-lookup"><span data-stu-id="e0ae7-166">Defer</span></span>
    -   <span data-ttu-id="e0ae7-167">Besoin de plus de données</span><span class="sxs-lookup"><span data-stu-id="e0ae7-167">Need more data</span></span>
    -   <span data-ttu-id="e0ae7-168">Supprimer la connexion</span><span class="sxs-lookup"><span data-stu-id="e0ae7-168">Drop connection</span></span>

## <a name="wfp-operation"></a><span data-ttu-id="e0ae7-169">Opération WFP</span><span class="sxs-lookup"><span data-stu-id="e0ae7-169">WFP Operation</span></span>

<span data-ttu-id="e0ae7-170">Au moment du démarrage, dès que le pilote de pile TCP/IP (tcpip.sys) démarre, le moteur de filtre en mode noyau applique la stratégie de sécurité du système par le biais des filtres au moment du démarrage.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-170">At boot-time, as soon as the TCP/IP stack driver (tcpip.sys) starts, the kernel-mode filter engine enforces the security policy of the system through boot-time filters.</span></span>

<span data-ttu-id="e0ae7-171">Une fois que le moteur de filtrage de base (BFE) démarre en mode utilisateur, les filtres persistants sont ajoutés à la plateforme, les filtres de démarrage sont désactivés et les notifications sont envoyées aux pilotes de légende qui s’abonnent à l’aide de [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-171">Once the Base Filtering Engine (BFE) starts in user mode, persistent filters are added to the platform, boot-time filters are disabled, and notifications are sent to those callout drivers that subscribed using [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span></span> <span data-ttu-id="e0ae7-172">Les notifications sont distribuées immédiatement après l’initialisation de la BFE.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-172">The notifications are dispatched immediately after the BFE initialization is completed.</span></span> <span data-ttu-id="e0ae7-173">La plateforme est maintenant prête pour l’enregistrement des légendes et pour l’ajout d’objets au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-173">The platform is now ready for callouts to be registered and for run-time objects to be added.</span></span>

<span data-ttu-id="e0ae7-174">La transition du temps de démarrage au mode de filtrage persistant peut être de quelques secondes, voire plus sur une machine lente.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-174">The transition from boot-time to persistent filters could be several seconds, or even longer on a slow machine.</span></span> <span data-ttu-id="e0ae7-175">Il est atomique. par conséquent, si un fournisseur a à la fois le temps de démarrage et un filtre persistant, aucune fenêtre n’est jamais appliquée.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-175">It is atomic, so if a provider has both a boot-time and a persistent filter, there will never be a window when neither is in effect.</span></span>

<span data-ttu-id="e0ae7-176">Après le démarrage de BFE, les filtres d’exécution peuvent être ajoutés par des agents de pare-feu ou par des solutions de pare-feu personnalisées.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-176">After BFE starts, run-time filters can be added by firewall agents, or by custom firewall solutions.</span></span> <span data-ttu-id="e0ae7-177">BFE traite ces filtres et les envoie à la couche appropriée du moteur de filtre pour la mise en œuvre.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-177">BFE processes these filters and sends them to the appropriate filter engine layer for enforcement.</span></span> <span data-ttu-id="e0ae7-178">BFE accepte également les paramètres d’authentification et envoie ces paramètres aux modules de génération de clé IPsec (IKE/AuthIP).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-178">BFE also accepts authentication settings and sends these settings to the IPsec keying modules (IKE/AuthIP).</span></span> <span data-ttu-id="e0ae7-179">Pour plus d’informations, consultez [configuration IPSec](ipsec-configuration.md) .</span><span class="sxs-lookup"><span data-stu-id="e0ae7-179">See [IPsec Configuration](ipsec-configuration.md) for more information.</span></span>

<span data-ttu-id="e0ae7-180">À tout moment, des filtres et des paramètres d’authentification peuvent être ajoutés, supprimés ou modifiés dans le système par le biais de l’interface RPC exposée par le BFE.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-180">At any time, filters and authentication settings can be added, removed or changed in the system through the RPC interface exposed by the BFE.</span></span> <span data-ttu-id="e0ae7-181">Les sous-couches et les modules de légende peuvent également être ajoutés ou supprimés.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-181">Sub-layers and callout modules can likewise be added or removed.</span></span>

<span data-ttu-id="e0ae7-182">Data Flow :</span><span class="sxs-lookup"><span data-stu-id="e0ae7-182">Data flow:</span></span>

1.  <span data-ttu-id="e0ae7-183">Un paquet arrive dans la pile réseau.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-183">A packet comes into the network stack.</span></span>
2.  <span data-ttu-id="e0ae7-184">La pile réseau détecte et appelle un shim.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-184">The network stack finds and calls a shim.</span></span>
3.  <span data-ttu-id="e0ae7-185">Le shim appelle le processus de classification au niveau d’une couche particulière.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-185">The shim invokes the classification process at a particular layer.</span></span>
4.  <span data-ttu-id="e0ae7-186">Pendant la classification, les filtres sont mis en correspondance et l’action résultante est effectuée.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-186">During classification, filters are matched and the resultant action is taken.</span></span> <span data-ttu-id="e0ae7-187">(Voir [arbitrage de filtre](filter-arbitration.md).)</span><span class="sxs-lookup"><span data-stu-id="e0ae7-187">(See [Filter Arbitration](filter-arbitration.md).)</span></span>
5.  <span data-ttu-id="e0ae7-188">Si des filtres de légende sont mis en correspondance au cours du processus de classification, les légendes correspondantes sont appelées.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-188">If any callout filters are matched during the classification process, the corresponding callouts are invoked.</span></span>
6.  <span data-ttu-id="e0ae7-189">Le shim agit sur la décision de filtrage finale (par exemple, déposer le paquet).</span><span class="sxs-lookup"><span data-stu-id="e0ae7-189">The shim acts on the final filtering decision (for example, drop the packet).</span></span>

<span data-ttu-id="e0ae7-190">Le trafic de données sortant suit un modèle similaire.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-190">Outbound data flow follows a similar pattern.</span></span>

<span data-ttu-id="e0ae7-191">Les rubriques suivantes décrivent plus en détail le fonctionnement de la protection des plateformes.</span><span class="sxs-lookup"><span data-stu-id="e0ae7-191">The following topics further describe the operation of the WFP.</span></span>

-   [<span data-ttu-id="e0ae7-192">Flux de paquets TCP</span><span class="sxs-lookup"><span data-stu-id="e0ae7-192">TCP Packet Flows</span></span>](tcp-packet-flows.md)
-   [<span data-ttu-id="e0ae7-193">Flux de paquets UDP</span><span class="sxs-lookup"><span data-stu-id="e0ae7-193">UDP Packet Flows</span></span>](udp-packet-flows.md)
-   [<span data-ttu-id="e0ae7-194">Arbitrage de filtre</span><span class="sxs-lookup"><span data-stu-id="e0ae7-194">Filter Arbitration</span></span>](filter-arbitration.md)

## <a name="related-topics"></a><span data-ttu-id="e0ae7-195">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="e0ae7-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e0ae7-196">Modèle objet</span><span class="sxs-lookup"><span data-stu-id="e0ae7-196">Object Model</span></span>](object-model.md)
</dt> <dt>

[<span data-ttu-id="e0ae7-197">Gestion des objets</span><span class="sxs-lookup"><span data-stu-id="e0ae7-197">Object Management</span></span>](object-management.md)
</dt> </dl>

 

 