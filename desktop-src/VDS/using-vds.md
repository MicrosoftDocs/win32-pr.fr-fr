---
description: Utilisation de VDS
ms.assetid: aa4be499-625d-4dbd-828c-4a55ff2dba2c
title: Utilisation de VDS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c648c5cc2507c4819f98367c367099248a0e723f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104210422"
---
# <a name="using-vds"></a><span data-ttu-id="102f4-103">Utilisation de VDS</span><span class="sxs-lookup"><span data-stu-id="102f4-103">Using VDS</span></span>

<span data-ttu-id="102f4-104">\[À compter de Windows 8 et de Windows Server 2012, l’interface com du [service de disque virtuel](virtual-disk-service-portal.md) est remplacée par l' [API de gestion de stockage Windows](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span><span class="sxs-lookup"><span data-stu-id="102f4-104">\[Beginning with Windows 8 and Windows Server 2012, the [Virtual Disk Service](virtual-disk-service-portal.md) COM interface is superseded by the [Windows Storage Management API](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span></span>

<span data-ttu-id="102f4-105">VDS fournit une interface pour les scripts et le développement d’interface graphique utilisateur qui permet de simplifier les activités effectuées par un administrateur Windows Server qui gère un ensemble hétérogène de systèmes de stockage, en migrant les données entre différentes configurations matérielles dans le temps.</span><span class="sxs-lookup"><span data-stu-id="102f4-105">VDS supplies an interface for scripting and GUI development that can simplify the activities that are performed by a Windows server administrator who manages a heterogeneous set of storage systems, migrating data across different hardware configurations over time.</span></span> <span data-ttu-id="102f4-106">Si vous n’êtes pas familiarisé avec les objets utilisés dans le développement VDS, consultez le [modèle d’objet VDS](vds-object-model.md).</span><span class="sxs-lookup"><span data-stu-id="102f4-106">If you are unfamiliar with the objects that are used in VDS development, see the [VDS Object Model](vds-object-model.md).</span></span>

<span data-ttu-id="102f4-107">Quelques points avant de commencer :</span><span class="sxs-lookup"><span data-stu-id="102f4-107">A few points before you begin:</span></span>

-   <span data-ttu-id="102f4-108">Bien que VDS comprenne un fournisseur de logiciels, vous devez acheter un fournisseur de matériel et le matériel associé séparément pour tirer parti des opérations du fournisseur de matériel.</span><span class="sxs-lookup"><span data-stu-id="102f4-108">While VDS includes a software provider, you must purchase a hardware provider and the associated hardware separately to take advantage of the hardware provider operations.</span></span> <span data-ttu-id="102f4-109">Pour obtenir des instructions d’installation, consultez la documentation fournie par le fabricant du matériel.</span><span class="sxs-lookup"><span data-stu-id="102f4-109">For installation instructions, see the documentation that is provided by the hardware manufacturer.</span></span>
-   <span data-ttu-id="102f4-110">Certaines opérations nécessitent des volumes au format NTFS.</span><span class="sxs-lookup"><span data-stu-id="102f4-110">Some operations require NTFS-formatted volumes.</span></span> <span data-ttu-id="102f4-111">Par exemple, lorsque vous montez un volume sur un répertoire existant, le volume qui contient le répertoire doit être formaté avec NTFS.</span><span class="sxs-lookup"><span data-stu-id="102f4-111">For example, when you mount a volume on an existing directory, the volume that contains the directory must be formatted with NTFS.</span></span> <span data-ttu-id="102f4-112">Les autres systèmes de fichiers ne prennent pas en charge cette opération.</span><span class="sxs-lookup"><span data-stu-id="102f4-112">Other file systems do not support this operation.</span></span> <span data-ttu-id="102f4-113">Pour plus d’informations sur les opérations qui requièrent NTFS, consultez chaque page de méthode dans [référence VDS](vds-reference.md).</span><span class="sxs-lookup"><span data-stu-id="102f4-113">For information about operations that require NTFS, see each method page in [VDS Reference](vds-reference.md).</span></span>

## <a name="programming-languages"></a><span data-ttu-id="102f4-114">Langages de programmation</span><span class="sxs-lookup"><span data-stu-id="102f4-114">Programming Languages</span></span>

<span data-ttu-id="102f4-115">Utilisez n’importe quel langage de programmation adapté au développement avec COM, tel que le langage C ou C++.</span><span class="sxs-lookup"><span data-stu-id="102f4-115">Use any programming language that is suitable for development with COM, such as the C language or C++.</span></span>

## <a name="security"></a><span data-ttu-id="102f4-116">Sécurité</span><span class="sxs-lookup"><span data-stu-id="102f4-116">Security</span></span>

<span data-ttu-id="102f4-117">Le pare-feu Windows est activé par défaut.</span><span class="sxs-lookup"><span data-stu-id="102f4-117">Windows Firewall is enabled by default.</span></span> <span data-ttu-id="102f4-118">Cela peut entraîner l’échec de l’authentification pour les interfaces de rappel, telles que [**IVdsAdviseSink**](/windows/desktop/api/Vds/nn-vds-ivdsadvisesink), qui peuvent être exécutées à distance.</span><span class="sxs-lookup"><span data-stu-id="102f4-118">This can cause authentication to fail for callback interfaces, such as [**IVdsAdviseSink**](/windows/desktop/api/Vds/nn-vds-ivdsadvisesink), that can be executed remotely.</span></span> <span data-ttu-id="102f4-119">Si le pare-feu Windows est activé sur le client ou sur le serveur, vous devez ajouter gestion des volumes à distance sous l’onglet **exceptions** du pare-feu Windows.</span><span class="sxs-lookup"><span data-stu-id="102f4-119">If Windows Firewall is enabled on either the client or the server, you must add Remote Volume Management to the **Exceptions** tab in Windows Firewall.</span></span>

<span data-ttu-id="102f4-120">**Windows Server 2003 :** Dans Windows Server 2003 avec Service Pack 2 (SP2) et Windows Server 2003 avec Service Pack 1 (SP1), si le pare-feu Windows est activé sur le client ou sur le serveur et si le serveur est configuré pour utiliser l’authentification NTLM, vous devez ajouter les paramètres suivants à l’onglet **exceptions** du pare-feu Windows pour l’ordinateur approprié.</span><span class="sxs-lookup"><span data-stu-id="102f4-120">**Windows Server 2003:** In Windows Server 2003 with Service Pack 2 (SP2) and Windows Server 2003 with Service Pack 1 (SP1), if Windows Firewall is enabled on either the client or the server and if the server is configured to use NTLM authentication, you must add the following settings to the **Exceptions** tab in Windows Firewall for the appropriate computer.</span></span>

| <span data-ttu-id="102f4-121">Computer</span><span class="sxs-lookup"><span data-stu-id="102f4-121">Computer</span></span>                 | <span data-ttu-id="102f4-122">Paramètres d’exceptions</span><span class="sxs-lookup"><span data-stu-id="102f4-122">Exceptions settings</span></span>                                                                 |
|--------------------------|-------------------------------------------------------------------------------------|
| <span data-ttu-id="102f4-123">Ordinateur client (local)</span><span class="sxs-lookup"><span data-stu-id="102f4-123">Client computer (local)</span></span>  | <span data-ttu-id="102f4-124">Dmremote.exe</span><span class="sxs-lookup"><span data-stu-id="102f4-124">Dmremote.exe</span></span><br/> <span data-ttu-id="102f4-125">Mmc.exe</span><span class="sxs-lookup"><span data-stu-id="102f4-125">Mmc.exe</span></span><br/> <span data-ttu-id="102f4-126">Vdsldr.exe</span><span class="sxs-lookup"><span data-stu-id="102f4-126">Vdsldr.exe</span></span><br/> <span data-ttu-id="102f4-127">TCP 135</span><span class="sxs-lookup"><span data-stu-id="102f4-127">TCP 135</span></span><br/> |
| <span data-ttu-id="102f4-128">Ordinateur serveur (distant)</span><span class="sxs-lookup"><span data-stu-id="102f4-128">Server computer (remote)</span></span> | <span data-ttu-id="102f4-129">Dmadmin.exe</span><span class="sxs-lookup"><span data-stu-id="102f4-129">Dmadmin.exe</span></span><br/> <span data-ttu-id="102f4-130">Vds.exe</span><span class="sxs-lookup"><span data-stu-id="102f4-130">Vds.exe</span></span><br/> <span data-ttu-id="102f4-131">TCP 135</span><span class="sxs-lookup"><span data-stu-id="102f4-131">TCP 135</span></span><br/>                        |



 

<span data-ttu-id="102f4-132">Notez que le pare-feu Windows n’est pas activé par défaut tant que Windows Server 2003 avec SP1 n’est pas installé.</span><span class="sxs-lookup"><span data-stu-id="102f4-132">Note that Windows Firewall is not enabled by default until Windows Server 2003 with SP1.</span></span>

<span data-ttu-id="102f4-133">Une application qui utilise VDS doit s’exécuter sous le compte d’opérateur de sauvegarde ou de groupe administrateurs.</span><span class="sxs-lookup"><span data-stu-id="102f4-133">An application that is using VDS must run under the Backup Operator or Administrators group account.</span></span> <span data-ttu-id="102f4-134">Sans le privilège approprié, une application peut créer un objet de chargeur de service, mais l’objet ne chargera pas VDS.</span><span class="sxs-lookup"><span data-stu-id="102f4-134">Without the appropriate privilege, an application can create a service loader object, but the object will not load VDS.</span></span> <span data-ttu-id="102f4-135">Au lieu de cela, il retourne une erreur indiquant que l’accès à VDS est refusé.</span><span class="sxs-lookup"><span data-stu-id="102f4-135">Instead, it returns an error indicating that access to VDS is denied.</span></span>

<span data-ttu-id="102f4-136">Si le réseau utilise l’authentification NTLM, l’ordinateur client doit autoriser l’accès anonyme.</span><span class="sxs-lookup"><span data-stu-id="102f4-136">If the network uses NTLM authentication, the client computer should allow anonymous access.</span></span> <span data-ttu-id="102f4-137">Dans ce cas, si l’ordinateur client exécute un système d’exploitation Windows Server, l’accès anonyme est activé par défaut.</span><span class="sxs-lookup"><span data-stu-id="102f4-137">In this case, if the client computer is running a Windows Server operating system, anonymous access is enabled by default.</span></span> <span data-ttu-id="102f4-138">S’il exécute un système d’exploitation client Windows, l’accès anonyme doit être activé à l’aide de Dcomcnfg.exe.</span><span class="sxs-lookup"><span data-stu-id="102f4-138">If it is running a Windows Client operating system, anonymous access must be enabled using Dcomcnfg.exe.</span></span>

## <a name="configuration-and-query-operations"></a><span data-ttu-id="102f4-139">Opérations de configuration et de requête</span><span class="sxs-lookup"><span data-stu-id="102f4-139">Configuration and Query Operations</span></span>

<span data-ttu-id="102f4-140">Les opérations de configuration et de requête sont délimitées par l’ordinateur, le fournisseur, le sous-système ou le Pack le plus pertinent.</span><span class="sxs-lookup"><span data-stu-id="102f4-140">Configuration and query operations are scoped by the most relevant computer, provider, subsystem, or pack.</span></span> <span data-ttu-id="102f4-141">Les requêtes traversent uniquement un fournisseur ou un niveau de la hiérarchie de liaison.</span><span class="sxs-lookup"><span data-stu-id="102f4-141">Queries traverse only one provider or one level of the binding hierarchy.</span></span> <span data-ttu-id="102f4-142">Pour générer une vue complète, l’appelant doit interroger chaque niveau.</span><span class="sxs-lookup"><span data-stu-id="102f4-142">To build a full view, the caller must query across and down each level.</span></span> <span data-ttu-id="102f4-143">La liste suivante comprend des exemples :</span><span class="sxs-lookup"><span data-stu-id="102f4-143">The following list includes examples:</span></span>

-   <span data-ttu-id="102f4-144">Pour afficher tous les disques d’un ordinateur, les appelants doivent effectuer une requête sur tous les fournisseurs de logiciels pour les disques revendiqués par ces fournisseurs.</span><span class="sxs-lookup"><span data-stu-id="102f4-144">To view all disks on a computer, callers must query across all software providers for the disks that are claimed by those providers.</span></span>
-   <span data-ttu-id="102f4-145">Pour déterminer les disques qui contribuent à un volume à pile logicielle, les appelants déterminent d’abord les plex contributeurs, puis interrogent les extensions de disque pour chaque Plex.</span><span class="sxs-lookup"><span data-stu-id="102f4-145">To determine which disks contribute to a software-stacked volume, callers first determine the contributing plexes and then query for the disk extents for each plex.</span></span>
-   <span data-ttu-id="102f4-146">Pour afficher tous les lecteurs attachés à un sous-système donné, les appelants doivent interroger le sous-système.</span><span class="sxs-lookup"><span data-stu-id="102f4-146">To view all the drives that are attached to a given subsystem, callers must query the subsystem.</span></span>
-   <span data-ttu-id="102f4-147">Pour afficher tous les numéros d’unités logiques qui sont exposés par un sous-système donné, les appelants doivent interroger le sous-système.</span><span class="sxs-lookup"><span data-stu-id="102f4-147">To view all the LUNs that are exposed by a given subsystem, callers must query the subsystem.</span></span>
-   <span data-ttu-id="102f4-148">Pour afficher l’ensemble du stockage sur un réseau SAN ou un cluster, les appelants doivent interroger chaque ordinateur pour tous les fournisseurs de matériel, interroger chaque fournisseur pour tous les sous-systèmes, puis interroger chaque sous-système.</span><span class="sxs-lookup"><span data-stu-id="102f4-148">To view all storage on a SAN or a cluster, callers must query each computer for all hardware providers, query each provider for all subsystems, and then query each subsystem.</span></span>

<span data-ttu-id="102f4-149">Alors que chaque requête individuelle ne retourne pas de doublons, les requêtes répétées sur les ordinateurs ou parmi les fournisseurs peuvent accumuler les doublons.</span><span class="sxs-lookup"><span data-stu-id="102f4-149">While each individual query will not return duplicates, repeated queries across computers or across providers can accumulate duplicates.</span></span> <span data-ttu-id="102f4-150">Les appelants doivent implémenter n’importe quel filtrage.</span><span class="sxs-lookup"><span data-stu-id="102f4-150">Callers must implement any filtering.</span></span> <span data-ttu-id="102f4-151">Notez également que les applications de gestion SAN peuvent utiliser le Active Directory ou un référentiel pour rendre persistantes les informations de configuration. Il n’est peut-être pas nécessaire d’interroger chaque ordinateur.</span><span class="sxs-lookup"><span data-stu-id="102f4-151">Note also that SAN management applications can use the Active Directory or a repository to persist configuration information; it might not be necessary to query each computer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="102f4-152">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="102f4-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="102f4-153">Service Disque virtuel</span><span class="sxs-lookup"><span data-stu-id="102f4-153">Virtual Disk Service</span></span>](virtual-disk-service-portal.md)
</dt> <dt>

[<span data-ttu-id="102f4-154">Modèle d’objet VDS</span><span class="sxs-lookup"><span data-stu-id="102f4-154">VDS Object Model</span></span>](vds-object-model.md)
</dt> <dt>

[<span data-ttu-id="102f4-155">Référence VDS</span><span class="sxs-lookup"><span data-stu-id="102f4-155">VDS Reference</span></span>](vds-reference.md)
</dt> </dl>

 

