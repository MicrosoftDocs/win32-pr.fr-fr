---
description: Un objet de performance est une entité pour laquelle les données de performances sont disponibles.
ms.assetid: 97b9c9ec-e758-4928-b3fa-90d220bca5fb
title: Conception d’objets et de compteurs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9556882f5dd6c323697d9d41fa80727895550a5d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103952010"
---
# <a name="object-and-counter-design"></a><span data-ttu-id="20c2d-103">Conception d’objets et de compteurs</span><span class="sxs-lookup"><span data-stu-id="20c2d-103">Object and Counter Design</span></span>

<span data-ttu-id="20c2d-104">Un objet de performance est une entité pour laquelle les données de performances sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="20c2d-104">A performance object is an entity for which performance data is available.</span></span> <span data-ttu-id="20c2d-105">Les compteurs de performances définissent le type de données disponibles pour un objet de performance.</span><span class="sxs-lookup"><span data-stu-id="20c2d-105">Performance counters define the type of data that is available for a performance object.</span></span> <span data-ttu-id="20c2d-106">Une application peut fournir des informations pour plusieurs objets de performance.</span><span class="sxs-lookup"><span data-stu-id="20c2d-106">An application can provide information for multiple performance objects.</span></span> <span data-ttu-id="20c2d-107">Les objets de performance peuvent contenir des compteurs d’instance unique ou des compteurs à instances multiples.</span><span class="sxs-lookup"><span data-stu-id="20c2d-107">Performance objects can contain either single instance counters or multiple instance counters.</span></span> <span data-ttu-id="20c2d-108">Un objet d’instance unique retourne un ensemble unique de valeurs de compteur.</span><span class="sxs-lookup"><span data-stu-id="20c2d-108">A single instance object returns a single set of counter values.</span></span>

<span data-ttu-id="20c2d-109">Un objet à instances multiples retourne une instance de l’objet pour chaque occurrence de l’objet que l’application contrôle.</span><span class="sxs-lookup"><span data-stu-id="20c2d-109">A multiple instance object returns an instance of the object for each occurrence of the object that the application controls.</span></span> <span data-ttu-id="20c2d-110">Par exemple, une application SCSI peut définir un objet lecteur avec deux compteurs, tels que les octets lus et les octets écrits.</span><span class="sxs-lookup"><span data-stu-id="20c2d-110">For example, a SCSI application could define a drive object with two counters, such as Bytes Read and Bytes Written.</span></span> <span data-ttu-id="20c2d-111">Lorsque le consommateur interroge l’objet, la DLL de performance retourne une instance de l’objet pour chaque lecteur que l’application contrôle.</span><span class="sxs-lookup"><span data-stu-id="20c2d-111">When the consumer queries the object, the performance DLL returns an instance of the object for each drive that the application controls.</span></span>

<span data-ttu-id="20c2d-112">Après avoir décidé si votre objet prend en charge une seule instance ou plusieurs instances, vous devez choisir le type de compteurs que vous souhaitez donner à l’objet.</span><span class="sxs-lookup"><span data-stu-id="20c2d-112">After deciding if your object supports a single instance or multiple instances, you need to decide on the type of counters that you want the object to provide.</span></span> <span data-ttu-id="20c2d-113">Par exemple, vous pouvez fournir des valeurs de compteur qui s’affichent sous forme de valeurs brutes, de taux ou de pourcentages.</span><span class="sxs-lookup"><span data-stu-id="20c2d-113">For example, you can provide counter values that are displayed as raw values, as rates, or as percentages.</span></span>

<span data-ttu-id="20c2d-114">Pour obtenir la liste des types de compteurs prédéfinis que vous devez choisir, consultez la section types de compteurs du [Kit de déploiement de Windows Server 2003](/previous-versions/windows/it-pro/windows-server-2003/cc776490(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="20c2d-114">For a list of predefined counter types that you should choose from, see the Counter Types section of the [Windows Server 2003 Deployment Kit](/previous-versions/windows/it-pro/windows-server-2003/cc776490(v=ws.10)).</span></span> <span data-ttu-id="20c2d-115">Selon le type de compteur, vous pouvez simplement fournir les données brutes, ou vous devrez peut-être également fournir des informations de temps et de fréquence et des données de compteur supplémentaires utilisées par le consommateur pour calculer une valeur affichable.</span><span class="sxs-lookup"><span data-stu-id="20c2d-115">Depending on the counter type, you may simply provide the raw data, or you may also have to provide time and frequency information and additional counter data used by the consumer to calculate a displayable value.</span></span>

<span data-ttu-id="20c2d-116">La méthode que vous utilisez pour collecter les données peut être aussi simple que l’incrémentation d’un compteur chaque fois qu’une routine particulière de l’application est appelée, ou il peut impliquer des calculs longs.</span><span class="sxs-lookup"><span data-stu-id="20c2d-116">The method you use to collect the data can be as simple as incrementing a counter each time a particular routine in the application is called, or it can involve time-consuming calculations.</span></span> <span data-ttu-id="20c2d-117">Les compteurs et les minuteurs doivent s’incrémenter et ne jamais être effacés.</span><span class="sxs-lookup"><span data-stu-id="20c2d-117">Counters and timers should increment and never be cleared.</span></span> <span data-ttu-id="20c2d-118">Les compteurs peuvent être encapsulés, à condition qu’ils ne soient pas encapsulés deux fois par le consommateur.</span><span class="sxs-lookup"><span data-stu-id="20c2d-118">Counters can wrap, as long as they do not wrap twice between being sampled by the consumer.</span></span> <span data-ttu-id="20c2d-119">Votre application peut collecter et stocker des données pendant leur exécution normale, à condition qu’elles n’affectent pas ses performances.</span><span class="sxs-lookup"><span data-stu-id="20c2d-119">Your application can collect and store data during its normal execution, as long as it does not affect its performance.</span></span>

<span data-ttu-id="20c2d-120">Pour certains types de données, il peut être plus efficace ou plus approprié de collecter les données à la demande.</span><span class="sxs-lookup"><span data-stu-id="20c2d-120">For some types of data, it may be more efficient or appropriate to collect the data on demand.</span></span> <span data-ttu-id="20c2d-121">Dans ce cas, la DLL de performance doit communiquer à l’application que les données ont été demandées.</span><span class="sxs-lookup"><span data-stu-id="20c2d-121">In this situation, the performance DLL must communicate to the application that the data has been requested.</span></span> <span data-ttu-id="20c2d-122">Pour les données coûteuses à collecter (en termes de temps processeur ou d’utilisation de la mémoire), envisagez de collecter des données uniquement lorsque le consommateur demande des données **coûteuses** .</span><span class="sxs-lookup"><span data-stu-id="20c2d-122">For data that is expensive to collect (in terms of processor time or memory usage), consider collecting data only when the consumer requests **Costly** data.</span></span> <span data-ttu-id="20c2d-123">Cela permet à un consommateur de demander régulièrement des données pour tous les compteurs qui ne sont pas coûteux.</span><span class="sxs-lookup"><span data-stu-id="20c2d-123">This allows a consumer to routinely request data for all counters that are not costly.</span></span> <span data-ttu-id="20c2d-124">Les données peuvent être demandées uniquement lorsque cela est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="20c2d-124">The data can be requested only when needed.</span></span> <span data-ttu-id="20c2d-125">L’outil performance ne collecte pas de données **coûteuses** .</span><span class="sxs-lookup"><span data-stu-id="20c2d-125">The Performance tool does not collect **Costly** data.</span></span>

 

 
