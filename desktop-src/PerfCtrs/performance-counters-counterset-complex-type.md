---
description: Définit une liste de compteurs logiquement liés.
ms.assetid: d094146a-389e-4053-8ee5-acd29254e817
title: Type complexe counterSet
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- kbSyntax
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: e753fab4308f1e981ab06e9470742ace46840a39
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106521567"
---
# <a name="counterset-complex-type"></a><span data-ttu-id="64b68-103">Type complexe counterSet</span><span class="sxs-lookup"><span data-stu-id="64b68-103">counterSet Complex Type</span></span>

<span data-ttu-id="64b68-104">Définit une liste de compteurs logiquement liés.</span><span class="sxs-lookup"><span data-stu-id="64b68-104">Defines a list of counters that are logically related.</span></span>

``` syntax
<xs:complexType name="counterSet">
    <xs:sequence>
        <xs:element name="structs"
            type="man:structs"
            minOccurs="0"
            maxOccurs="1"
         />
        <xs:element name="counter"
            type="man:counter"
            minOccurs="1"
            maxOccurs="unbounded"
         />
    </xs:sequence>
    <xs:attribute name="symbol"
        type="man:CSymbolType"
        use="required"
     />
    <xs:attribute name="guid"
        type="man:GUIDType"
        use="required"
     />
    <xs:attribute name="uri"
        type="xs:anyURI"
        use="required"
     />
    <xs:attribute name="name"
        use="required"
    >
        <xs:simpleType>
            <xs:restriction
                base="xs:string"
            >
                <xs:maxLength
                    value="1023"
                 />
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="description"
        type="xs:string"
        use="required"
     />
    <xs:attribute name="instances"
        use="optional"
        default="single"
    >
        <xs:simpleType>
            <xs:restriction
                base="xs:string"
            >
                <xs:enumeration
                    value="single"
                 />
                <xs:enumeration
                    value="multiple"
                 />
                <xs:enumeration
                    value="globalAggregate"
                 />
                <xs:enumeration
                    value="multipleAggregate"
                 />
                <xs:enumeration
                    value="globalAggregateHistory"
                 />
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
</xs:complexType>
```

## <a name="child-elements"></a><span data-ttu-id="64b68-105">Éléments enfants</span><span class="sxs-lookup"><span data-stu-id="64b68-105">Child elements</span></span>



| <span data-ttu-id="64b68-106">Élément</span><span class="sxs-lookup"><span data-stu-id="64b68-106">Element</span></span>     | <span data-ttu-id="64b68-107">Type</span><span class="sxs-lookup"><span data-stu-id="64b68-107">Type</span></span>                                                             | <span data-ttu-id="64b68-108">Description</span><span class="sxs-lookup"><span data-stu-id="64b68-108">Description</span></span>                                                                                            |
|-------------|------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64b68-109">**)**</span><span class="sxs-lookup"><span data-stu-id="64b68-109">**counter**</span></span> | [<span data-ttu-id="64b68-110">**homme : compteur**</span><span class="sxs-lookup"><span data-stu-id="64b68-110">**man:counter**</span></span>](performance-counters-counter-complex-type.md) | <span data-ttu-id="64b68-111">Définit un compteur fourni par le fournisseur.</span><span class="sxs-lookup"><span data-stu-id="64b68-111">Defines a counter that the provider provides.</span></span><br/>                                               |
| <span data-ttu-id="64b68-112">**structs**</span><span class="sxs-lookup"><span data-stu-id="64b68-112">**structs**</span></span> | [<span data-ttu-id="64b68-113">**homme : structs**</span><span class="sxs-lookup"><span data-stu-id="64b68-113">**man:structs**</span></span>](performance-counters-structs-complex-type.md) | <span data-ttu-id="64b68-114">Liste d’éléments de struct qui contiennent des valeurs pour les compteurs définis dans cet ensemble de compteurs.</span><span class="sxs-lookup"><span data-stu-id="64b68-114">A list of struct elements that contain values for the counters defined in this counter set.</span></span><br/> |



## <a name="attributes"></a><span data-ttu-id="64b68-115">Attributs</span><span class="sxs-lookup"><span data-stu-id="64b68-115">Attributes</span></span>



| <span data-ttu-id="64b68-116">Nom</span><span class="sxs-lookup"><span data-stu-id="64b68-116">Name</span></span>        | <span data-ttu-id="64b68-117">Type</span><span class="sxs-lookup"><span data-stu-id="64b68-117">Type</span></span>                                                                    | <span data-ttu-id="64b68-118">Description</span><span class="sxs-lookup"><span data-stu-id="64b68-118">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-------------|-------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64b68-119">description</span><span class="sxs-lookup"><span data-stu-id="64b68-119">description</span></span> | <span data-ttu-id="64b68-120">**xs:string**</span><span class="sxs-lookup"><span data-stu-id="64b68-120">**xs:string**</span></span>                                                           | <span data-ttu-id="64b68-121">Brève description de l’ensemble de compteurs.</span><span class="sxs-lookup"><span data-stu-id="64b68-121">A short description of the counter set.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="64b68-122">guid</span><span class="sxs-lookup"><span data-stu-id="64b68-122">guid</span></span>        | [<span data-ttu-id="64b68-123">**homme : GUIDType**</span><span class="sxs-lookup"><span data-stu-id="64b68-123">**man:GUIDType**</span></span>](performance-counters-guidtype-simple-type.md)       | <span data-ttu-id="64b68-124">GUID qui identifie de façon unique l’ensemble de compteurs.</span><span class="sxs-lookup"><span data-stu-id="64b68-124">A GUID that uniquely identifies the counter set.</span></span> <span data-ttu-id="64b68-125">L’inscription de l’ensemble de compteurs échoue si le GUID est déjà inscrit.</span><span class="sxs-lookup"><span data-stu-id="64b68-125">The counter set registration fails if the GUID is already registered.</span></span> <span data-ttu-id="64b68-126">Pour mettre à jour un ensemble de compteurs inscrit, vous devez d’abord désinstaller l’ensemble de compteurs, puis l’inscrire de nouveau.</span><span class="sxs-lookup"><span data-stu-id="64b68-126">To update a counter set that is registered, you must first uninstall the counter set and then register it again.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="64b68-127">instances</span><span class="sxs-lookup"><span data-stu-id="64b68-127">instances</span></span>   |                                                                         | <span data-ttu-id="64b68-128">Détermine si l’ensemble de compteurs peut contenir plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="64b68-128">Determines whether the counter set can contain multiple instances.</span></span> <span data-ttu-id="64b68-129">La liste suivante répertorie les valeurs possibles :</span><span class="sxs-lookup"><span data-stu-id="64b68-129">The following lists the possible values:</span></span><br/> <dl> <span data-ttu-id="64b68-130"><dt><span id="single"></span><span id="SINGLE"></span>Single</dt></span><span class="sxs-lookup"><span data-stu-id="64b68-130"><dt><span id="single"></span><span id="SINGLE"></span>single</dt></span></span> <dd> <span data-ttu-id="64b68-131">Définit un ensemble de compteurs dans lequel une seule instance des compteurs de l’ensemble de compteurs peut exister.</span><span class="sxs-lookup"><span data-stu-id="64b68-131">Defines a counter set where only one instance of the counters in the counter set can exist.</span></span> <span data-ttu-id="64b68-132">Spécifiez cette valeur si les compteurs fournissent des mesures à l’ensemble du système, telles que la mémoire physique.</span><span class="sxs-lookup"><span data-stu-id="64b68-132">Specify this value if the counters provide system-wide measurements, such as physical memory.</span></span> <span data-ttu-id="64b68-133">Il s’agit de la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="64b68-133">This is the default.</span></span><br/> </dd> <span data-ttu-id="64b68-134"><dt><span id="multiple"></span><span id="MULTIPLE"></span>plusieurs</dt></span><span class="sxs-lookup"><span data-stu-id="64b68-134"><dt><span id="multiple"></span><span id="MULTIPLE"></span>multiple</dt></span></span> <dd> <span data-ttu-id="64b68-135">Définit un ensemble de compteurs où plusieurs instances des compteurs de l’ensemble de compteurs peuvent exister.</span><span class="sxs-lookup"><span data-stu-id="64b68-135">Defines a counter set where multiple instances of the counters in the counter set can exist.</span></span> <span data-ttu-id="64b68-136">Spécifiez cette valeur si les compteurs fournissent des mesures par instance, telles que le temps processeur par processus.</span><span class="sxs-lookup"><span data-stu-id="64b68-136">Specify this value if the counters provide per-instance measurements, such as processor time per process.</span></span><br/> </dd> <span data-ttu-id="64b68-137"><dt><span id="globalAggregate"></span><span id="globalaggregate"></span><span id="GLOBALAGGREGATE"></span>globalAggregate</dt></span><span class="sxs-lookup"><span data-stu-id="64b68-137"><dt><span id="globalAggregate"></span><span id="globalaggregate"></span><span id="GLOBALAGGREGATE"></span>globalAggregate</dt></span></span> <dd> <span data-ttu-id="64b68-138">Définit un ensemble de compteurs d’instance unique où les compteurs de l’ensemble de compteurs doivent être agrégés à partir de différentes sources actives.</span><span class="sxs-lookup"><span data-stu-id="64b68-138">Defines a single instance counter set where the counters in the counter set must be aggregated from various active sources.</span></span> <span data-ttu-id="64b68-139">Par exemple, vous pouvez créer un ensemble de compteurs contenant un compteur qui compte le nombre de lectures sur le disque d’un disque dur.</span><span class="sxs-lookup"><span data-stu-id="64b68-139">For example, you could create a counter set that contains a counter that counts the number of disk reads for a hard disk.</span></span> <span data-ttu-id="64b68-140">Si l’ordinateur a trois disques durs et qu’un consommateur demande le nombre de lectures sur le disque, PERFLIB obtient le nombre de lectures sur chaque disque et additionne leurs valeurs individuelles.</span><span class="sxs-lookup"><span data-stu-id="64b68-140">If the computer has three hard disks and a consumer queries for the number of disk reads, PERFLIB will obtain the number of reads from each disk and sum their individual values.</span></span> <br/> </dd> <span data-ttu-id="64b68-141"><dt><span id="multipleAggregate"></span><span id="multipleaggregate"></span><span id="MULTIPLEAGGREGATE"></span>multipleAggregate</dt></span><span class="sxs-lookup"><span data-stu-id="64b68-141"><dt><span id="multipleAggregate"></span><span id="multipleaggregate"></span><span id="MULTIPLEAGGREGATE"></span>multipleAggregate</dt></span></span> <dd> <span data-ttu-id="64b68-142">Définit un ensemble de compteurs d’instances multiples dans lequel les compteurs de l’ensemble de compteurs doivent être agrégés sur toutes les instances de ce compteur.</span><span class="sxs-lookup"><span data-stu-id="64b68-142">Defines a multiple instance counter set where the counters in the counter set must be aggregated across all instances of that counter.</span></span> <span data-ttu-id="64b68-143">Par exemple, vous pouvez créer un ensemble de compteurs pour une application multithread qui contient un compteur qui mesure les performances des threads (chaque thread ferait référence à une instance de l’ensemble de compteurs).</span><span class="sxs-lookup"><span data-stu-id="64b68-143">For example, you could create a counter set for a multi-threaded application that contains a counter that measures thread performance (each thread would refer to an instance of the counter set).</span></span> <span data-ttu-id="64b68-144">Lorsqu’un consommateur interroge le compteur temps total d’exécution des threads, PERFLIB totalise la durée d’exécution totale du thread à partir de chaque instance.</span><span class="sxs-lookup"><span data-stu-id="64b68-144">When a consumer queries the total thread execution time counter, PERFLIB will sum the total thread execution time from each instance.</span></span><br/> </dd> <span data-ttu-id="64b68-145"><dt><span id="globalAggregateHistory"></span><span id="globalaggregatehistory"></span><span id="GLOBALAGGREGATEHISTORY"></span>globalAggregateHistory</dt></span><span class="sxs-lookup"><span data-stu-id="64b68-145"><dt><span id="globalAggregateHistory"></span><span id="globalaggregatehistory"></span><span id="GLOBALAGGREGATEHISTORY"></span>globalAggregateHistory</dt></span></span> <dd> <span data-ttu-id="64b68-146">Définit un ensemble de compteurs d’instance unique dont les valeurs de compteur sont mises en cache pendant la durée de vie du consommateur.</span><span class="sxs-lookup"><span data-stu-id="64b68-146">Defines a single instance counter set whose counter values are cached for the lifetime of the consumer.</span></span> <span data-ttu-id="64b68-147">Notez que tous les compteurs de l’ensemble de compteurs sont mis en cache.</span><span class="sxs-lookup"><span data-stu-id="64b68-147">Note that all counters in the counter set are cached.</span></span> <span data-ttu-id="64b68-148">Pour mettre en cache uniquement des compteurs spécifiques, Décorez ces compteurs avec l’attribut historique.</span><span class="sxs-lookup"><span data-stu-id="64b68-148">To cache only specific counters, decorate those counters with the history attribute.</span></span><br/> <span data-ttu-id="64b68-149">À l’aide de l’exemple de lecture sur le disque de globalAggregate, toutes les valeurs de compteur dans l’ensemble de compteurs sont mises en cache.</span><span class="sxs-lookup"><span data-stu-id="64b68-149">Using the disk read example from globalAggregate, all counter values in the counter set would be cached.</span></span> <span data-ttu-id="64b68-150">Si un disque n’est pas disponible, la dernière valeur mise en cache pour le nombre total d’octets lus par ce disque serait toujours disponible pour l’application consommateur.</span><span class="sxs-lookup"><span data-stu-id="64b68-150">If one disk became unavailable, the last cached value for total bytes read by that disk would still be available to the consumer application.</span></span><br/> </dd> </dl> |
| <span data-ttu-id="64b68-151">name</span><span class="sxs-lookup"><span data-stu-id="64b68-151">name</span></span>        |                                                                         | <span data-ttu-id="64b68-152">Nom complet de l’ensemble de compteurs.</span><span class="sxs-lookup"><span data-stu-id="64b68-152">The display name of the counter set.</span></span> <span data-ttu-id="64b68-153">Doit être inférieur à 1 024 caractères.</span><span class="sxs-lookup"><span data-stu-id="64b68-153">Must be less than 1,024 characters.</span></span> <span data-ttu-id="64b68-154">Cette valeur respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="64b68-154">The name is case-sensitive.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="64b68-155">symbole</span><span class="sxs-lookup"><span data-stu-id="64b68-155">symbol</span></span>      | [<span data-ttu-id="64b68-156">**homme : CSymbolType**</span><span class="sxs-lookup"><span data-stu-id="64b68-156">**man:CSymbolType**</span></span>](performance-counters-csymboltype-simple-type.md) | <span data-ttu-id="64b68-157">Nom symbolique qui identifie l’ensemble de compteurs.</span><span class="sxs-lookup"><span data-stu-id="64b68-157">A symbolic name that identifies the counter set.</span></span> <span data-ttu-id="64b68-158">L’outil [CTRPP](ctrpp.md) crée une variable GUID que vous pouvez utiliser lors de l’appel de fonctions qui requièrent le GUID de l’ensemble de compteurs (par exemple, [**PerfCreateInstance**](/windows/desktop/api/Perflib/nf-perflib-perfcreateinstance)).</span><span class="sxs-lookup"><span data-stu-id="64b68-158">The [CTRPP](ctrpp.md) tool creates a GUID variable that you can use when calling functions that require the counter set GUID (for example, [**PerfCreateInstance**](/windows/desktop/api/Perflib/nf-perflib-perfcreateinstance)).</span></span> <span data-ttu-id="64b68-159">Le nom de la variable est de la forme *SymbolicName* GUID.</span><span class="sxs-lookup"><span data-stu-id="64b68-159">The variable name is of the form, *symbolicname* Guid.</span></span> <br/> <span data-ttu-id="64b68-160">Si vous incluez l’argument **-prefix** lors de l’appel de [CTRPP](ctrpp.md), la chaîne de préfixe est ajoutée au début du nom symbolique.</span><span class="sxs-lookup"><span data-stu-id="64b68-160">If you include the **-prefix** argument when calling [CTRPP](ctrpp.md), the prefix string is added to the beginning of the symbolic name.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="64b68-161">URI</span><span class="sxs-lookup"><span data-stu-id="64b68-161">uri</span></span>         | <span data-ttu-id="64b68-162">**xs:anyURI**</span><span class="sxs-lookup"><span data-stu-id="64b68-162">**xs:anyURI**</span></span>                                                           | <span data-ttu-id="64b68-163">Identificateur de ressource uniforme unique qui permet aux utilisateurs d’accéder aux compteurs de l’ensemble de compteurs à partir de n’importe quel emplacement.</span><span class="sxs-lookup"><span data-stu-id="64b68-163">A unique uniform resource identifier that lets users access the counters in the counter set from any location.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |



## <a name="requirements"></a><span data-ttu-id="64b68-164">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="64b68-164">Requirements</span></span>



| <span data-ttu-id="64b68-165">Condition requise</span><span class="sxs-lookup"><span data-stu-id="64b68-165">Requirement</span></span> | <span data-ttu-id="64b68-166">Valeur</span><span class="sxs-lookup"><span data-stu-id="64b68-166">Value</span></span> |
|-------------------------------------|------------------------------------------------------|
| <span data-ttu-id="64b68-167">Client minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="64b68-167">Minimum supported client</span></span><br/> | <span data-ttu-id="64b68-168">Applications de \[ Bureau Windows Vista uniquement\]</span><span class="sxs-lookup"><span data-stu-id="64b68-168">Windows Vista \[desktop apps only\]</span></span><br/>       |
| <span data-ttu-id="64b68-169">Serveur minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="64b68-169">Minimum supported server</span></span><br/> | <span data-ttu-id="64b68-170">Applications de bureau Windows Server 2008 \[ uniquement\]</span><span class="sxs-lookup"><span data-stu-id="64b68-170">Windows Server 2008 \[desktop apps only\]</span></span><br/> |



 

 




