---
description: Bien que les fournisseurs soient encouragés à utiliser des noms d’instance uniques, ce n’est pas le cas de tous les fournisseurs.
ms.assetid: 3c8fcb8d-2ea4-4b24-b649-7bd375c1133d
title: Gestion des noms d’instance en double
ms.topic: article
ms.date: 08/17/2020
ms.openlocfilehash: 220e5d7d0181a79c1d1415486cc946d484e11952
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106518477"
---
# <a name="handling-duplicate-instance-names"></a><span data-ttu-id="61f56-103">Gestion des noms d’instance en double</span><span class="sxs-lookup"><span data-stu-id="61f56-103">Handling Duplicate Instance Names</span></span>

<span data-ttu-id="61f56-104">Bien que les fournisseurs soient fortement encouragés à utiliser des noms d’instance uniques, tous les fournisseurs ne le font pas.</span><span class="sxs-lookup"><span data-stu-id="61f56-104">Although providers are strongly encouraged to use unique instance names, not all providers do.</span></span> <span data-ttu-id="61f56-105">La Convention d’affichage des noms d’instance en double consiste à ajouter un `#` caractère et un numéro de série au nom de l’instance, à l’exception de la première occurrence du nom.</span><span class="sxs-lookup"><span data-stu-id="61f56-105">The convention for displaying duplicate instance names is to append a `#` character and a serial number to the instance name, except for the first occurrence of the name.</span></span> <span data-ttu-id="61f56-106">Par exemple, s’il existe trois instances de `svchost` dans un exemple, les trois noms s’affichent sous la forme `svchost` , `svchost#1` et `svchost#2` .</span><span class="sxs-lookup"><span data-stu-id="61f56-106">For example, if there are three instances of `svchost` in a sample, the three names are displayed as `svchost`, `svchost#1`, and `svchost#2`.</span></span>

<span data-ttu-id="61f56-107">Malheureusement, cette Convention ne résout pas complètement le problème.</span><span class="sxs-lookup"><span data-stu-id="61f56-107">Unfortunately, this convention does not completely resolve the issue.</span></span> <span data-ttu-id="61f56-108">Les numéros de série sont attribués en fonction de l’ordre dans lequel un nom d’instance particulier apparaît dans un exemple, et cet ordre peut être incohérent de l’exemple à l’exemple.</span><span class="sxs-lookup"><span data-stu-id="61f56-108">Serial numbers are assigned based on the order in which a particular instance name appears in a sample, and this order may be inconsistent from sample to sample.</span></span> <span data-ttu-id="61f56-109">Par exemple, l’exemple A peut voir `svchost` (pid 100), `svchost#1` (PID 200) et `svchost#2` (PID 300).</span><span class="sxs-lookup"><span data-stu-id="61f56-109">For example, sample A might see `svchost` (PID 100), `svchost#1` (PID 200), and `svchost#2` (PID 300).</span></span> <span data-ttu-id="61f56-110">Ensuite, si le svchost avec PID 100 s’arrête, l’exemple suivant peut voir `svchost` (pid 200) et `svchost#1` (PID 300).</span><span class="sxs-lookup"><span data-stu-id="61f56-110">Then if the svchost with PID 100 shuts down, the next sample would see `svchost` (PID 200) and `svchost#1` (PID 300).</span></span> <span data-ttu-id="61f56-111">La logique de correspondance de base tenterait de faire correspondre les statistiques de l’exemple A `svchost#1` (du pid 200) aux statistiques de l’exemple b `svchost#1` (du PID 300), ce qui entraînera des résultats non valides pour l’exemple b. des erreurs se produisent quand une nouvelle instance non unique s’affiche dans un exemple ou lorsqu’une instance non unique s’arrête dans un échantillon (sauf si l’instance ajoutée</span><span class="sxs-lookup"><span data-stu-id="61f56-111">Basic matching logic would try to match sample A's `svchost#1` statistics (from PID 200) against sample B's `svchost#1` statistics (from PID 300), resulting in invalid results for sample B. Errors occur when a new non-unique instance shows up in a sample or when a non-unique instance stops showing up in a sample (unless the added/removed instance was the last one).</span></span>

## <a name="process-counterset"></a><span data-ttu-id="61f56-112">Process CounterSet</span><span class="sxs-lookup"><span data-stu-id="61f56-112">Process counterset</span></span>

<span data-ttu-id="61f56-113">Ce problème est particulièrement problématique pour le `Process` CounterSet, car il utilise uniquement le nom de l’exe du processus comme nom d’instance, même si le nom de l’exe n’est pas unique.</span><span class="sxs-lookup"><span data-stu-id="61f56-113">This issue is especially problematic for the `Process` counterset because it uses only the process's EXE name as the instance name even though the EXE name is not unique.</span></span> <span data-ttu-id="61f56-114">Impossible de modifier le comportement par défaut du `Process` CounterSet sur Windows en raison de problèmes de compatibilité.</span><span class="sxs-lookup"><span data-stu-id="61f56-114">The default behavior of the `Process` counterset on Windows cannot be changed due to compatibility issues.</span></span>

<span data-ttu-id="61f56-115">Vous pouvez modifier le comportement des `Process` countersets et `Thread` pour utiliser des noms d’instance uniques en définissant les `ProcessNameFormat` valeurs de `ThreadNameFormat` Registre ou sous la `HKLM\System\CurrentControlSet\Services\Perfproc\Performance` clé de registre.</span><span class="sxs-lookup"><span data-stu-id="61f56-115">You can alter the behavior of the `Process` and `Thread` countersets to use unique instance names by setting the `ProcessNameFormat` or `ThreadNameFormat` registry values under the `HKLM\System\CurrentControlSet\Services\Perfproc\Performance` registry key.</span></span>

> [!CAUTION]
> <span data-ttu-id="61f56-116">L’activation de noms d’instance uniques pour le `Process` CounterSet peut entraîner un comportement incorrect de certains programmes, car de nombreux programmes attendent un modèle d’attribution de noms non unique.</span><span class="sxs-lookup"><span data-stu-id="61f56-116">Enabling unique instance names for the `Process` counterset may cause some programs to behave incorrectly, since many programs expect the non-unique naming pattern.</span></span> <span data-ttu-id="61f56-117">Par exemple, un programme qui recherche une instance avec un nom d’EXE connu spécifique ne pourra plus trouver cette instance après avoir activé des noms d’instance uniques.</span><span class="sxs-lookup"><span data-stu-id="61f56-117">For example, a program that is looking for an instance with a specific well-known EXE name will no longer be able to find that instance after enabling unique instance names.</span></span>

<span data-ttu-id="61f56-118">Le type de Registre pour ces valeurs est `REG_DWORD` .</span><span class="sxs-lookup"><span data-stu-id="61f56-118">The registry type for these values is `REG_DWORD`.</span></span> <span data-ttu-id="61f56-119">La définition de la valeur sur `2` ajoute l’identificateur de processus (PID) au nom d’instance de processus et l’identificateur de thread (TID) au nom d’instance de thread.</span><span class="sxs-lookup"><span data-stu-id="61f56-119">Setting the value to `2` appends the process identifier (PID) to the process instance name and the thread identifier (TID) to the thread instance name.</span></span> <span data-ttu-id="61f56-120">Pour désactiver cette fonctionnalité, définissez la valeur sur 1 ou supprimez la valeur.</span><span class="sxs-lookup"><span data-stu-id="61f56-120">To disable this feature, set the value to 1 or delete the value.</span></span>
