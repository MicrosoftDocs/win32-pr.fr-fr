---
description: Le format des données récupérées par la fonction RegQueryValueEx commence par une structure d’en-tête de longueur fixe, un \_ bloc de données perf \_ .
ms.assetid: a68fa617-834c-4ad9-b922-fac3a648ad75
title: Format des données de performances
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88029634594843a50fd6010993eb6517dce831f7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104565552"
---
# <a name="performance-data-format"></a><span data-ttu-id="09587-103">Format des données de performances</span><span class="sxs-lookup"><span data-stu-id="09587-103">Performance Data Format</span></span>

<span data-ttu-id="09587-104">Le format des données récupérées par la fonction [**RegQueryValueEx**](/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa) commence par une structure d’en-tête de longueur fixe, un [**\_ \_ bloc de données perf**](/windows/desktop/api/Winperf/ns-winperf-perf_data_block).</span><span class="sxs-lookup"><span data-stu-id="09587-104">The format of the data retrieved by the [**RegQueryValueEx**](/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa) function begins with a fixed-length header structure, [**PERF\_DATA\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_data_block).</span></span> <span data-ttu-id="09587-105">La structure de **\_ \_ bloc de données perf** décrit le système et les données de performances.</span><span class="sxs-lookup"><span data-stu-id="09587-105">The **PERF\_DATA\_BLOCK** structure describes the system and the performance data.</span></span> <span data-ttu-id="09587-106">La structure de **\_ \_ bloc de données perf** est suivie d’un nombre variable d’éléments de données d’objet de longueur variable.</span><span class="sxs-lookup"><span data-stu-id="09587-106">The **PERF\_DATA\_BLOCK** structure is followed by variable number of variable-length object data items.</span></span> <span data-ttu-id="09587-107">L’en-tête de chaque élément objet contient le décalage de l’élément objet suivant dans la liste.</span><span class="sxs-lookup"><span data-stu-id="09587-107">The header of each object item contains the offset of the next object item in the list.</span></span> <span data-ttu-id="09587-108">Le diagramme suivant illustre la structure de données de performances de base.</span><span class="sxs-lookup"><span data-stu-id="09587-108">The following diagram shows the basic performance data structure.</span></span>

![structure des données de performances](images/perfdata.png)

<span data-ttu-id="09587-110">Il existe deux formats pour les éléments de données d’objet : un qui prend en charge plusieurs instances et l’autre qui ne prend pas en charge plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="09587-110">There are two formats for the object data items: one that supports multiple instances, and the other that does not support multiple instances.</span></span>

<span data-ttu-id="09587-111">Chaque bloc d’éléments de données d’objet contient une structure de [**\_ \_ type d’objet perf**](/windows/desktop/api/Winperf/ns-winperf-perf_object_type) , qui décrit les données de performances de l’objet.</span><span class="sxs-lookup"><span data-stu-id="09587-111">Each object data item block contains a [**PERF\_OBJECT\_TYPE**](/windows/desktop/api/Winperf/ns-winperf-perf_object_type) structure, which describes the performance data for the object.</span></span> <span data-ttu-id="09587-112">La structure du **\_ \_ type d’objet perf** est suivie d’une liste de structures de [**définition de \_ compteur \_ de performances**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) , une pour chaque compteur défini pour l’objet.</span><span class="sxs-lookup"><span data-stu-id="09587-112">The **PERF\_OBJECT\_TYPE** structure is followed by a list of [**PERF\_COUNTER\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) structures, one for each counter defined for the object.</span></span> <span data-ttu-id="09587-113">Pour un objet avec une seule instance, la liste des structures de **\_ \_ définition de compteur de performances** est suivie d’une structure de [**\_ \_ bloc de compteur de performances**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) unique, suivie des données de compteur.</span><span class="sxs-lookup"><span data-stu-id="09587-113">For an object with only one instance, the list of **PERF\_COUNTER\_DEFINITION** structures is followed by a single [**PERF\_COUNTER\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) structure, followed by the counter data.</span></span> <span data-ttu-id="09587-114">Chaque structure de **\_ \_ définition de compteur de performances** contient le décalage à partir du début de la structure de **\_ \_ bloc de compteur de performances** vers les données de compteur correspondantes.</span><span class="sxs-lookup"><span data-stu-id="09587-114">Each **PERF\_COUNTER\_DEFINITION** structure contains the offset from the start of the **PERF\_COUNTER\_BLOCK** structure to the corresponding counter data.</span></span> <span data-ttu-id="09587-115">Le diagramme suivant illustre la structure d’un objet de performance qui ne prend pas en charge plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="09587-115">The following diagram shows the structure of a performance object that does not support multiple instances.</span></span>

![structure de l’objet de performance qui ne prend pas en charge plusieurs instances](images/perfnoinst.png)

<span data-ttu-id="09587-117">Pour un type d’objet qui prend en charge plusieurs instances, la liste des structures de [**\_ \_ définition de compteur de performances**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) est suivie d’une liste de blocs d’informations d’instance (une pour chaque instance).</span><span class="sxs-lookup"><span data-stu-id="09587-117">For an object type that supports multiple instances, the list of [**PERF\_COUNTER\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) structures is followed by a list of instance information blocks (one for each instance).</span></span> <span data-ttu-id="09587-118">Chaque bloc d’informations d’instance contient une structure de [**\_ \_ définition d’instance perf**](/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition) , le nom de l’instance et une structure de [**bloc de \_ compteur \_ de performances**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) .</span><span class="sxs-lookup"><span data-stu-id="09587-118">Each instance information block contains a [**PERF\_INSTANCE\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition) structure, the name of the instance, and a [**PERF\_COUNTER\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) structure.</span></span> <span data-ttu-id="09587-119">Le diagramme suivant illustre la structure d’un objet de performance qui prend en charge deux instances.</span><span class="sxs-lookup"><span data-stu-id="09587-119">The following diagram shows the structure of a performance object that supports two instances.</span></span>

![structure d’un objet de performance qui prend en charge deux instances](images/perfinst.png)

<span data-ttu-id="09587-121">Pour obtenir un exemple qui utilise les décalages, consultez [affichage des noms d’objet, d’instance et de compteur](displaying-object-instance-and-counter-names.md).</span><span class="sxs-lookup"><span data-stu-id="09587-121">For an example that uses the offsets, see [Displaying Object, Instance, and Counter Names](displaying-object-instance-and-counter-names.md).</span></span>

 

 
