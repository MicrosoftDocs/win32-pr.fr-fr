---
description: Guide du développeur pour la version redistribuable de XAudio 2.9
ms.assetid: ''
title: Guide du développeur pour la version redistribuable de XAudio 2.9
ms.topic: article
ms.date: 10/17/2019
ms.openlocfilehash: a87c2dc44179f2c189270dfa91d2cf2696ea98a7
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/05/2021
ms.locfileid: "103953504"
---
# <a name="developer-guide-for-redistributable-version-of-xaudio-29"></a><span data-ttu-id="40a8b-103">Guide du développeur pour la version redistribuable de XAudio 2.9</span><span class="sxs-lookup"><span data-stu-id="40a8b-103">Developer guide for redistributable version of XAudio 2.9</span></span>

<span data-ttu-id="40a8b-104">Une version de XAudio 2,9 est disponible sous forme de [package NuGet](/nuget/what-is-nuget).</span><span class="sxs-lookup"><span data-stu-id="40a8b-104">A version of XAudio 2.9 is available as a [NuGet package](/nuget/what-is-nuget).</span></span> <span data-ttu-id="40a8b-105">Les développeurs peuvent redistribuer cette version de XAudio 2,9 avec leurs applications.</span><span class="sxs-lookup"><span data-stu-id="40a8b-105">Developers can redistribute this version of XAudio 2.9 with their apps.</span></span> <span data-ttu-id="40a8b-106">Cela permet à une application d’utiliser XAudio 2,9 sur des versions antérieures de Windows qui n’incluent pas XAudio 2,9 dans le cadre de l’image du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="40a8b-106">This allows an app to use XAudio 2.9 on older versions of Windows that do no not include XAudio 2.9 as part of the operating system image.</span></span> <span data-ttu-id="40a8b-107">L’utilisation de ce package redistribuable est préférable à la redistribution de XAudio 2,7 à partir du kit de développement logiciel (SDK) DirectX, car XAudio 2,7 n’a pas été mis à jour depuis 2010.</span><span class="sxs-lookup"><span data-stu-id="40a8b-107">Use of this redistributable is preferred over redistributing XAudio 2.7 from the DirectX SDK, as XAudio 2.7 has not been updated since 2010.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="40a8b-108">Plateformes prises en charge</span><span class="sxs-lookup"><span data-stu-id="40a8b-108">Supported platforms</span></span>

<span data-ttu-id="40a8b-109">Le package NuGet XAudio 2,9 (*Microsoft. XAudio2. Redist. \* . nupkg*) comprend une version 32 bits et une version 64 bits d’une dll qui implémente l’API XAudio 2,9.</span><span class="sxs-lookup"><span data-stu-id="40a8b-109">The XAudio 2.9 NuGet package (*Microsoft.XAudio2.Redist.\*.nupkg*) includes a 32-bit and a 64-bit version of a DLL that implements the XAudio 2.9 API.</span></span> <span data-ttu-id="40a8b-110">La DLL est appelée XAUDIO2 \_9REDIST.DLL.</span><span class="sxs-lookup"><span data-stu-id="40a8b-110">The DLL is called XAUDIO2\_9REDIST.DLL.</span></span> <span data-ttu-id="40a8b-111">Cette DLL fonctionnera sur Windows 7 SP1, Windows 8, Windows 8.1 et Windows 10.</span><span class="sxs-lookup"><span data-stu-id="40a8b-111">This DLL will work on Windows 7 SP1, Windows 8, Windows 8.1 and Windows 10.</span></span>

<span data-ttu-id="40a8b-112">Lorsque la DLL est utilisée sur un système Windows 10, elle vérifie le numéro de version de la \_9.DLL XAUDIO2 qui fait partie du système d’exploitation, et si le système d’exploitation est plus récent, elle délègue tous les appels d’API à XAUDIO2 \_9.DLL dans le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="40a8b-112">When the DLL is used on a Windows 10 system, it checks the version number of the XAUDIO2\_9.DLL that is part of the operating system, and if the operating system is newer, it will delegate all API calls to XAUDIO2\_9.DLL in the operating system.</span></span> <span data-ttu-id="40a8b-113">Cela garantit que les applications utilisent toujours la dernière version de XAudio 2,9 qui est disponible sur la plateforme actuelle.</span><span class="sxs-lookup"><span data-stu-id="40a8b-113">This ensures that apps always use the latest version of XAudio 2.9 that is available on the current platform.</span></span>

<span data-ttu-id="40a8b-114">La DLL n’est pas destinée à Xbox One.</span><span class="sxs-lookup"><span data-stu-id="40a8b-114">The DLL is not intended for Xbox One.</span></span> <span data-ttu-id="40a8b-115">S’il est utilisé sur Xbox 1, la DLL délègue toujours tous les appels d’API à XAUDIO2 \_9.DLL dans le système d’exploitation Xbox One.</span><span class="sxs-lookup"><span data-stu-id="40a8b-115">If used on Xbox One, the DLL will always delegate all API calls to XAUDIO2\_9.DLL in the Xbox One operating system.</span></span>

<span data-ttu-id="40a8b-116">La DLL n’est pas destinée aux applications UWP.</span><span class="sxs-lookup"><span data-stu-id="40a8b-116">The DLL is not intended for UWP apps.</span></span> <span data-ttu-id="40a8b-117">Les applications UWP doivent utiliser le \_9.DLL XAUDIO2 qui fait partie du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="40a8b-117">UWP apps should use the XAUDIO2\_9.DLL that is part of the operating system.</span></span>

## <a name="installing-the-nuget-package"></a><span data-ttu-id="40a8b-118">Installation du package Nuget</span><span class="sxs-lookup"><span data-stu-id="40a8b-118">Installing the NuGet package</span></span>

<span data-ttu-id="40a8b-119">Le moyen le plus simple d’installer le package NuGet consiste à utiliser le [Gestionnaire de package NuGet](/nuget/consume-packages/install-use-packages-visual-studio) dans Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="40a8b-119">The easiest way to install the NuGet package is to use the [NuGet Package Manager](/nuget/consume-packages/install-use-packages-visual-studio) in Microsoft Visual Studio.</span></span> <span data-ttu-id="40a8b-120">Dans ce cas, votre fichier projet Visual Studio est automatiquement mis à jour pour inclure *Microsoft. XAudio2. Redist. targets*.</span><span class="sxs-lookup"><span data-stu-id="40a8b-120">If you do this, your Visual Studio project file will be automatically updated to include *Microsoft.XAudio2.Redist.targets*.</span></span> <span data-ttu-id="40a8b-121">Le fichier *. targets* ajoute le dossier include avec les fichiers d’en-tête pour le XAudio2 à votre collection de chemins d’accès Include de projet.</span><span class="sxs-lookup"><span data-stu-id="40a8b-121">The *.targets* file adds the Include folder with the header files for the XAudio2 to your collection of project include paths.</span></span> <span data-ttu-id="40a8b-122">Le fichier *. targets* va également créer votre. DLL ou. EXE Link avec XAUDIO2REDIST. LIB et XAPOBASEREDIST. LIB.</span><span class="sxs-lookup"><span data-stu-id="40a8b-122">The *.targets* file will also make your .DLL or .EXE link with XAUDIO2REDIST.LIB and XAPOBASEREDIST.LIB.</span></span>

<span data-ttu-id="40a8b-123">Bibliothèque XAPOBASEREDIST. LIB n’est nécessaire que si vous envisagez de impement un objet de traitement XAudio personnalisé (XAPO) et vous pouvez le supprimer de *Microsoft. XAudio2. Redist. targets* s’il n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="40a8b-123">The library XAPOBASEREDIST.LIB is only needed if you intend to impement a custom XAudio Processing Object (XAPO) and you can remove it from the *Microsoft.XAudio2.Redist.targets* if it is unused.</span></span>

<span data-ttu-id="40a8b-124">Vous pouvez également utiliser d’autres outils pour extraire le contenu du package NuGet, ou même renommer l’extension de fichier en. zip et extraire les fichiers avec n’importe quel outil ZIP Extractor.</span><span class="sxs-lookup"><span data-stu-id="40a8b-124">You can also use other tools to extract the contents of the NuGet package, or even rename the file extension to .zip and extract the files with any ZIP extractor tool.</span></span>

## <a name="compiling-your-app"></a><span data-ttu-id="40a8b-125">Compilation de votre application</span><span class="sxs-lookup"><span data-stu-id="40a8b-125">Compiling your app</span></span>

### <a name="choosing-which-headers-to-include"></a><span data-ttu-id="40a8b-126">Choix des en-têtes à inclure</span><span class="sxs-lookup"><span data-stu-id="40a8b-126">Choosing which headers to include</span></span>

<span data-ttu-id="40a8b-127">Le package NuGet XAudio 2,9 inclut les mêmes fichiers d’en-tête XAudio2 que ceux inclus dans le kit de développement logiciel (SDK) Windows 10.</span><span class="sxs-lookup"><span data-stu-id="40a8b-127">The XAudio 2.9 NuGet package includes the same XAudio2 header files that are included in the Windows 10 SDK.</span></span> <span data-ttu-id="40a8b-128">Toutefois, les fichiers d’en-tête ont subi des ajustements pour s’assurer que vous pouvez les utiliser tout en ciblant explicitement toutes les [plateformes prises en charge](#supported-platforms), y compris les versions antérieures de Windows.</span><span class="sxs-lookup"><span data-stu-id="40a8b-128">However, the header files have had some adjustments to them to make sure that you can use them while explicitly targeting all [supported platforms](#supported-platforms), including older versions of Windows.</span></span>

<span data-ttu-id="40a8b-129">Si vous [Installez le package NuGet](#installing-the-nuget-package) à l’aide du gestionnaire de package nuget dans Microsoft Visual Studio, le chemin d’accès aux fichiers d’en-tête est placé devant le chemin d’accès aux fichiers d’en-tête SDK Windows.</span><span class="sxs-lookup"><span data-stu-id="40a8b-129">If you [install the NuGet package](#installing-the-nuget-package) using the NuGet Package Manager in Microsoft Visual Studio then the path to the header files is placed in front of the path to the Windows SDK header files.</span></span> <span data-ttu-id="40a8b-130">Cela signifie que si le code de votre projet comprend XAUDIO2. En-tête H, il récupère l’en-tête multiplateforme du package NuGet.</span><span class="sxs-lookup"><span data-stu-id="40a8b-130">That means that if code in your project includes the XAUDIO2.H header, it will pick up the cross-platform header from the NuGet package.</span></span> <span data-ttu-id="40a8b-131">Il s’agit normalement du comportement souhaité.</span><span class="sxs-lookup"><span data-stu-id="40a8b-131">This is normally the desired behavior.</span></span>

<span data-ttu-id="40a8b-132">Vous devez être prudent si vous ajoutez manuellement le chemin d’accès aux en-têtes include dans le projet, comme si vous les spécifiez dans le mauvais ordre, vous risquez d’avoir des XAUDIO2 spécifiques à la version du système d’exploitation [. H](/windows/win32/api/xaudio2/) à inclure à partir de la SDK Windows, plutôt que la version multiplateforme de XAUDIO2. H.</span><span class="sxs-lookup"><span data-stu-id="40a8b-132">You should be careful if adding the path to the include headers manually to the project, as specifying them in the wrong order can cause the OS-version specific [XAUDIO2.H](/windows/win32/api/xaudio2/) to be included from the Windows SDK, rather than the cross-platform version of XAUDIO2.H.</span></span>

<span data-ttu-id="40a8b-133">Pour que l’inclusion des en-têtes soit moins sujette aux erreurs, le package NuGet contient une version de chaque en-tête avec « Redist » ajouté.</span><span class="sxs-lookup"><span data-stu-id="40a8b-133">To make the inclusion of headers less error-prone, the NuGet package contains a version of each header with "REDIST" appended to it.</span></span> <span data-ttu-id="40a8b-134">Par exemple, en plus de XAUDIO2. H, le package NuGet comprend également XAUDIO2REDIST. H.</span><span class="sxs-lookup"><span data-stu-id="40a8b-134">For example, in addition to XAUDIO2.H, the NuGet package also includes XAUDIO2REDIST.H.</span></span> <span data-ttu-id="40a8b-135">Si vous préférez, votre code peut inclure directement XAUDIO2REDIST. H pour éliminer toute ambiguïté relative au fichier d’en-tête utilisé.</span><span class="sxs-lookup"><span data-stu-id="40a8b-135">If you prefer, your code can directly include XAUDIO2REDIST.H to eliminate any ambiguity about which header file is being used.</span></span> <span data-ttu-id="40a8b-136">Lors de l’inclusion du Redist. Version H d’un fichier d’en-tête, l’ordre dans lequel les répertoires de fichiers include sont répertoriés dans le fichier projet n’a pas d’importance.</span><span class="sxs-lookup"><span data-stu-id="40a8b-136">When including the -REDIST.H version of a header file, the order in which the include file directories are listed in the project file do not matter.</span></span>

<span data-ttu-id="40a8b-137">Notez que si votre application est également en cours de compilation pour Xbox One, vous devez continuer à inclure XAUDIO2. H lors de la compilation pour Xbox One, comme certaines API de Xbox One spécifiques sont exclues de XAUDIO2REDIST. H.</span><span class="sxs-lookup"><span data-stu-id="40a8b-137">Note that if your app is also being compiled for Xbox One, you should continue to include XAUDIO2.H when compiling for Xbox One, as some Xbox One-specific APIs are excluded from XAUDIO2REDIST.H.</span></span> <span data-ttu-id="40a8b-138">Ce package NuGet n’est pas destiné à Xbox One.</span><span class="sxs-lookup"><span data-stu-id="40a8b-138">This NuGet package is not intended for Xbox One.</span></span>

### <a name="loading-the-dll"></a><span data-ttu-id="40a8b-139">Chargement de la DLL</span><span class="sxs-lookup"><span data-stu-id="40a8b-139">Loading the DLL</span></span>

<span data-ttu-id="40a8b-140">Nous vous recommandons de lier votre application à XAUDIO2REDIST. LIB et installent XAUDIO2 \_9REDIST.DLL dans le même dossier que le fichier exécutable de votre application.</span><span class="sxs-lookup"><span data-stu-id="40a8b-140">We recommend that you link your app with XAUDIO2REDIST.LIB and install XAUDIO2\_9REDIST.DLL in the same folder as your app's executable.</span></span> <span data-ttu-id="40a8b-141">Cela entraîne le \_ chargement de XAUDIO29REDIST.DLL dès le lancement de votre fichier exécutable.</span><span class="sxs-lookup"><span data-stu-id="40a8b-141">This will cause XAUDIO2\_9REDIST.DLL to be loaded as soon as your executable is launched.</span></span> <span data-ttu-id="40a8b-142">Toutefois, si vous préférez, vous pouvez utiliser [**LoadLibraryEx**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryexw) et [**GETPROCADDRESS**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) pour charger XAUDIO2 \_9REDIST.DLL à la demande.</span><span class="sxs-lookup"><span data-stu-id="40a8b-142">However, if you prefer, you may use [**LoadLibraryEx**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryexw) and [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) to load XAUDIO2\_9REDIST.DLL on demand.</span></span> <span data-ttu-id="40a8b-143">Il s’agit d’une bonne solution si votre application n’a pas toujours besoin d’utiliser les API XAudio2.</span><span class="sxs-lookup"><span data-stu-id="40a8b-143">This is a good solution if your app does not always need to use the XAudio2 APIs.</span></span> <span data-ttu-id="40a8b-144">Toutefois, si vous procédez ainsi, vous devez garder le XAUDIO2 \_9REDIST.DLL chargé jusqu’à ce que l’application se termine, car la tentative de déchargement de la dll peut provoquer un blocage si un thread d’arrière-plan exécute toujours du code dans la dll.</span><span class="sxs-lookup"><span data-stu-id="40a8b-144">But if you do this, you should keep the XAUDIO2\_9REDIST.DLL loaded until the app exits, as attempting to unload the DLL can cause a crash if a background thread is still executing code in the DLL.</span></span>

<span data-ttu-id="40a8b-145">Contrairement à l’ancien XAudio 2,7, il n’est pas possible d’utiliser CoCreateInstance pour charger la DLL.</span><span class="sxs-lookup"><span data-stu-id="40a8b-145">Unlike the older XAudio 2.7, it is not possible to use CoCreateInstance to load the DLL.</span></span>

### <a name="verifying-the-dll-signature"></a><span data-ttu-id="40a8b-146">Vérification de la signature de la DLL</span><span class="sxs-lookup"><span data-stu-id="40a8b-146">Verifying the DLL signature</span></span>

<span data-ttu-id="40a8b-147">Le XAUDIO2 \_9REDIST.DLL binaire est signé par Microsoft à l’aide d’une signature SHA-2.</span><span class="sxs-lookup"><span data-stu-id="40a8b-147">The XAUDIO2\_9REDIST.DLL binary is signed by Microsoft using a SHA-2 signature.</span></span> <span data-ttu-id="40a8b-148">Tout code qui tente de valider la signature, par exemple, les modules anti-triche pour les jeux, doit donc prendre en charge SHA-2.</span><span class="sxs-lookup"><span data-stu-id="40a8b-148">Any code that attempts to validate the signature, e.g., anti-cheat modules for games, therefore needs to support SHA-2.</span></span> <span data-ttu-id="40a8b-149">Notez que Windows 7 SP1 n’a pas pris en charge SHA-2 à l’origine et requiert une mise à jour pour ajouter cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="40a8b-149">Note that Windows 7 SP1 did not originally support SHA-2 and requires an update to add that functionality.</span></span> <span data-ttu-id="40a8b-150">La mise à jour est disponible en tant que [KB4474419](https://support.microsoft.com/help/4474419/sha-2-code-signing-support-update).</span><span class="sxs-lookup"><span data-stu-id="40a8b-150">The update is available as [KB4474419](https://support.microsoft.com/help/4474419/sha-2-code-signing-support-update).</span></span>

## <a name="testing"></a><span data-ttu-id="40a8b-151">Test</span><span class="sxs-lookup"><span data-stu-id="40a8b-151">Testing</span></span>

### <a name="spatial-sound-in-newer-versions-of-windows-10"></a><span data-ttu-id="40a8b-152">Son spatial dans les versions plus récentes de Windows 10</span><span class="sxs-lookup"><span data-stu-id="40a8b-152">Spatial sound in newer versions of Windows 10</span></span>

<span data-ttu-id="40a8b-153">À compter de la mise à jour Windows 10 1903, XAudio 2,9 utilise automatiquement le [son Surround virtuel](#spatial-sound-and-virtual-surround), si certaines conditions sont satisfaites.</span><span class="sxs-lookup"><span data-stu-id="40a8b-153">Starting with the Windows 10 1903 update, XAudio 2.9 automatically uses [virtual surround sound](#spatial-sound-and-virtual-surround), if certain conditions are satisfied.</span></span> <span data-ttu-id="40a8b-154">Nous vous recommandons de tester les jeux qui génèrent du son multicanal sur Windows 10 1903 (ou une version ultérieure) pour vérifier que le jeu semble comme prévu.</span><span class="sxs-lookup"><span data-stu-id="40a8b-154">We recommend testing game that generate multi-channel sound on Windows 10 1903 (or newer) to verify that the game sounds as expected.</span></span>

#### <a name="enabling-spatial-sound"></a><span data-ttu-id="40a8b-155">Activation du son spatial</span><span class="sxs-lookup"><span data-stu-id="40a8b-155">Enabling spatial sound</span></span>

<span data-ttu-id="40a8b-156">L’utilisateur peut activer un format de son spatial en cliquant avec le bouton droit sur l’icône de haut-parleur dans la barre d’état système Windows.</span><span class="sxs-lookup"><span data-stu-id="40a8b-156">The user can enable a spatial sound format by right-clicking on the speaker icon in the Windows system tray.</span></span> 

<span data-ttu-id="40a8b-157">XAudio 2,9 utilise uniquement le format de son spatial sélectionné si le processus qui utilise l’API XAudio2 est reconnu en tant que jeu par la barre de jeux Windows.</span><span class="sxs-lookup"><span data-stu-id="40a8b-157">XAudio 2.9 will only use the user's selected spatial sound format if the process that is using the XAudio2 API is recognized as a game by the Windows Game Bar.</span></span> <span data-ttu-id="40a8b-158">Pendant le développement, il est possible que le processus ne soit pas encore reconnu en tant que jeu par la barre de jeux.</span><span class="sxs-lookup"><span data-stu-id="40a8b-158">During development, it is possible that the process is not yet recognized as a game by the Game Bar.</span></span> <span data-ttu-id="40a8b-159">Pour modifier cette valeur, utilisez le raccourci clavier Win + G pour afficher la barre de jeux pendant que le jeu est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="40a8b-159">To change this, use the Win+G keyboard short-cut to bring up the Game Bar while the game is running.</span></span> <span data-ttu-id="40a8b-160">Cliquez ensuite sur l’icône « Paramètres », puis cochez la case « n’oubliez pas qu’il s’agit d’un jeu ».</span><span class="sxs-lookup"><span data-stu-id="40a8b-160">Then click on the "Settings" icon and check the checkbox that says, "Remember that this is a game".</span></span>

#### <a name="opting-out-from-spatial-sound"></a><span data-ttu-id="40a8b-161">Désactivation du son spatial</span><span class="sxs-lookup"><span data-stu-id="40a8b-161">Opting out from spatial sound</span></span>

<span data-ttu-id="40a8b-162">Il existe un moyen de refuser à XAudio2 d’utiliser l’encodeur de son spatial en spécifiant certaines valeurs pour le paramètre [**AUDIO_STREAM_CATEGORY**](/windows/win32/api/audiosessiontypes/ne-audiosessiontypes-audio_stream_category) dans [**IXAudio2 :: CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span><span class="sxs-lookup"><span data-stu-id="40a8b-162">There is a way to opt out from having XAudio2 use the spatial sound encoder by specifying certain values for the [**AUDIO_STREAM_CATEGORY**](/windows/win32/api/audiosessiontypes/ne-audiosessiontypes-audio_stream_category) parameter in [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span></span> 

<span data-ttu-id="40a8b-163">Le son spatial est activé pour les catégories suivantes :</span><span class="sxs-lookup"><span data-stu-id="40a8b-163">Spatial sound is enabled for these categories:</span></span>

* <span data-ttu-id="40a8b-164">AudioCategory_ForegroundOnlyMedia</span><span class="sxs-lookup"><span data-stu-id="40a8b-164">AudioCategory_ForegroundOnlyMedia</span></span>
* <span data-ttu-id="40a8b-165">AudioCategory_GameEffects</span><span class="sxs-lookup"><span data-stu-id="40a8b-165">AudioCategory_GameEffects</span></span>
* <span data-ttu-id="40a8b-166">AudioCategory_GameMedia</span><span class="sxs-lookup"><span data-stu-id="40a8b-166">AudioCategory_GameMedia</span></span>
* <span data-ttu-id="40a8b-167">AudioCategory_Movie</span><span class="sxs-lookup"><span data-stu-id="40a8b-167">AudioCategory_Movie</span></span>
* <span data-ttu-id="40a8b-168">AudioCategory_Media</span><span class="sxs-lookup"><span data-stu-id="40a8b-168">AudioCategory_Media</span></span>

<span data-ttu-id="40a8b-169">Le son spatial n’est pas activé si l’une des catégories suivantes est spécifiée :</span><span class="sxs-lookup"><span data-stu-id="40a8b-169">Spatial sound is not enabled if any of the following categories are specified:</span></span>

* <span data-ttu-id="40a8b-170">AudioCategory_Other</span><span class="sxs-lookup"><span data-stu-id="40a8b-170">AudioCategory_Other</span></span>
* <span data-ttu-id="40a8b-171">AudioCategory_Communications</span><span class="sxs-lookup"><span data-stu-id="40a8b-171">AudioCategory_Communications</span></span>
* <span data-ttu-id="40a8b-172">AudioCategory_Alerts</span><span class="sxs-lookup"><span data-stu-id="40a8b-172">AudioCategory_Alerts</span></span>
* <span data-ttu-id="40a8b-173">AudioCategory_SoundEffects</span><span class="sxs-lookup"><span data-stu-id="40a8b-173">AudioCategory_SoundEffects</span></span>
* <span data-ttu-id="40a8b-174">AudioCategory_GameChat</span><span class="sxs-lookup"><span data-stu-id="40a8b-174">AudioCategory_GameChat</span></span>
* <span data-ttu-id="40a8b-175">AudioCategory_Speech</span><span class="sxs-lookup"><span data-stu-id="40a8b-175">AudioCategory_Speech</span></span>

### <a name="error-handling"></a><span data-ttu-id="40a8b-176">Gestion des erreurs</span><span class="sxs-lookup"><span data-stu-id="40a8b-176">Error handling</span></span>

<span data-ttu-id="40a8b-177">Il est important de vérifier que le jeu peut traiter une modification du périphérique audio, par exemple lorsque les écouteurs sont branchés ou débranchés.</span><span class="sxs-lookup"><span data-stu-id="40a8b-177">It is important to test that you game can handle a change in audio device, for example, when headphones are plugged in, or unplugged.</span></span> <span data-ttu-id="40a8b-178">Ce test doit être testé avec un casque qui prend uniquement en charge le taux d’échantillonnage de 44,1 kHz.</span><span class="sxs-lookup"><span data-stu-id="40a8b-178">This should be tested with headphones that only support 44.1 kHz sampling rate.</span></span> <span data-ttu-id="40a8b-179">De nombreux casques et casques USB de bas de gamme prennent uniquement en charge 44,1 kHz.</span><span class="sxs-lookup"><span data-stu-id="40a8b-179">Many low-end USB headphones and Bluetooth headsets only support 44.1 kHz.</span></span> <span data-ttu-id="40a8b-180">La transition entre le taux d’échantillonnage de 48 kHz et le taux d’échantillonnage de 44,1 kHz peut provoquer une erreur même lorsque la fonctionnalité de [point de terminaison audio virtuel](#virtual-audio-endpoint) est utilisée.</span><span class="sxs-lookup"><span data-stu-id="40a8b-180">The transition between 48 kHz sampling rate and 44.1 kHz sampling rate can cause an error even when the [virtual audio endpoint](#virtual-audio-endpoint) feature is used.</span></span> <span data-ttu-id="40a8b-181">L’erreur ne se produira pas si le casque prend également en charge 48 kHz.</span><span class="sxs-lookup"><span data-stu-id="40a8b-181">The error will not happen if the headphones also support 48 kHz.</span></span> <span data-ttu-id="40a8b-182">Notez que la fonctionnalité de point de terminaison audio virtuel n’est pas disponible sur Windows 7 SP1.</span><span class="sxs-lookup"><span data-stu-id="40a8b-182">Note that the virtual audio endpoint feature is not available on Windows 7 SP1.</span></span>

<span data-ttu-id="40a8b-183">Le code d’erreur retourné par XAudio 2,9 lorsqu’il ne peut pas récupérer automatiquement à partir d’une modification du point de terminaison audio est le [ \_ périphérique XAUDIO2 E \_ \_ invalidée](xaudio2-error-codes.md).</span><span class="sxs-lookup"><span data-stu-id="40a8b-183">The error code returned by XAudio 2.9 when it cannot automatically recover from a change in audio endpoint is [XAUDIO2\_E\_DEVICE\_INVALIDATED](xaudio2-error-codes.md).</span></span> <span data-ttu-id="40a8b-184">Toutefois, nous recommandons que les applications ne codent pas de façon irréversible une dépendance sur le code d’erreur ayant une valeur spécifique.</span><span class="sxs-lookup"><span data-stu-id="40a8b-184">However, we recommend that apps do not hard-code a dependency on the error code having a specific value.</span></span>

<span data-ttu-id="40a8b-185">Pour être informé de l’erreur, l’application doit implémenter l’interface [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) et fournir un pointeur vers cette interface en appelant la méthode [**IXAudio2 :: RegisterForCallbacks**](xaudio2-callbacks.md) .</span><span class="sxs-lookup"><span data-stu-id="40a8b-185">To be notified of the error, the app should implement the [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) interface and provide a pointer to that interface by invoking the [**IXAudio2::RegisterForCallbacks**](xaudio2-callbacks.md) method.</span></span> <span data-ttu-id="40a8b-186">L’implémentation de l’application de [**IXAudio2EngineCallback :: OnCriticalError**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) sera appelée par l’API XAudio2 si une erreur se produit pendant la lecture.</span><span class="sxs-lookup"><span data-stu-id="40a8b-186">The app's implementation of the [**IXAudio2EngineCallback::OnCriticalError**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) will be invoked by the XAudio2 API if an error occurs during playback.</span></span>

<span data-ttu-id="40a8b-187">Notez que [**IXAudio2EngineCallback :: OnCriticalError**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) n’est pas nécessairement appelé si le pipeline audio est suspendu.</span><span class="sxs-lookup"><span data-stu-id="40a8b-187">Note that [**IXAudio2EngineCallback::OnCriticalError**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) is not necessarily invoked if the audio pipeline is paused.</span></span> <span data-ttu-id="40a8b-188">Par exemple, si l’utilisateur minimise l’application ou si l’application est interrompue pour une raison quelconque, la lecture audio peut être suspendue.</span><span class="sxs-lookup"><span data-stu-id="40a8b-188">For example, if the user minimizes the app, or the app gets suspended for any reason, audio playback might be paused.</span></span> <span data-ttu-id="40a8b-189">Si la modification du périphérique audio se produit pendant cette période, l’erreur est renvoyée uniquement quand l’application appelle [**IXAudio2 :: StartEngine**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2-startengine) et/ou appelle [**IXAudio2SourceVoice :: Start**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-start).</span><span class="sxs-lookup"><span data-stu-id="40a8b-189">If the change in audio device happens during this time, the error is only returned when the app invokes [**IXAudio2::StartEngine**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2-startengine) and/or invokes [**IXAudio2SourceVoice::Start**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-start).</span></span> <span data-ttu-id="40a8b-190">Si la lecture peut être interrompue avec votre application, vous devez tester la modification du périphérique audio pendant que la lecture est suspendue, afin de vérifier que l’application peut toujours effectuer une récupération à partir de cette situation.</span><span class="sxs-lookup"><span data-stu-id="40a8b-190">If playback can be paused with your app, you should test changing the audio device while the playback is paused, to verify that the app still can recover from this situation.</span></span>

## <a name="xaudio-29-api-differences-compared-to-xaudio-27"></a><span data-ttu-id="40a8b-191">Différences de l’API XAudio 2,9 par rapport à XAudio 2,7</span><span class="sxs-lookup"><span data-stu-id="40a8b-191">XAudio 2.9 API differences compared to XAudio 2.7</span></span>

<span data-ttu-id="40a8b-192">Cette section fournit un résumé de certaines des différences d’API entre XAudio 2,7 et la version redistribuable de XAudio 2,9.</span><span class="sxs-lookup"><span data-stu-id="40a8b-192">This section provides a summary of some of the API differences between XAudio 2.7 and the redistributable version of XAudio 2.9.</span></span>

### <a name="supported-formats"></a><span data-ttu-id="40a8b-193">Formats pris en charge</span><span class="sxs-lookup"><span data-stu-id="40a8b-193">Supported formats</span></span>

<span data-ttu-id="40a8b-194">XAudio 2,9 prend en charge ces formats d’entrée sur le PC :</span><span class="sxs-lookup"><span data-stu-id="40a8b-194">XAudio 2.9 supports these input formats on PC:</span></span>

* <span data-ttu-id="40a8b-195">PCM 16 bits linéaire</span><span class="sxs-lookup"><span data-stu-id="40a8b-195">Linear 16-bit PCM</span></span>
* <span data-ttu-id="40a8b-196">PCM linéaire 32 bits</span><span class="sxs-lookup"><span data-stu-id="40a8b-196">Linear 32-bit Float PCM</span></span>
* <span data-ttu-id="40a8b-197">ADPCM 16 bits</span><span class="sxs-lookup"><span data-stu-id="40a8b-197">16-bit ADPCM</span></span>
* <span data-ttu-id="40a8b-198">xWMA</span><span class="sxs-lookup"><span data-stu-id="40a8b-198">xWMA</span></span>

<span data-ttu-id="40a8b-199">Le format XMA est pris en charge uniquement sur Xbox One.</span><span class="sxs-lookup"><span data-stu-id="40a8b-199">The XMA format is only supported on Xbox One.</span></span>

### <a name="preferred-cpu-core"></a><span data-ttu-id="40a8b-200">Noyau de processeur préféré</span><span class="sxs-lookup"><span data-stu-id="40a8b-200">Preferred CPU core</span></span>

<span data-ttu-id="40a8b-201">Il est possible de spécifier le noyau de processeur XAudio 2,9 à utiliser pour son thread de traitement audio.</span><span class="sxs-lookup"><span data-stu-id="40a8b-201">It is possible to specify which CPU core XAudio 2.9 should use for its audio processing thread.</span></span> <span data-ttu-id="40a8b-202">Toutefois, il est généralement préférable de laisser XAudio 2,9 choisir cette valeur seule.</span><span class="sxs-lookup"><span data-stu-id="40a8b-202">However, it is usually preferred to let XAudio 2.9 choose this value by itself.</span></span> <span data-ttu-id="40a8b-203">Pour ce faire, définissez le paramètre **XAudio2Processor** dans l’appel à [**XAudio2Create**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2create) sur XAUDIO2 \_ utiliser \_ le \_ processeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="40a8b-203">This is done by setting the **XAudio2Processor** parameter in the call to [**XAudio2Create**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2create) to XAUDIO2\_USE\_DEFAULT\_PROCESSOR.</span></span> 

<span data-ttu-id="40a8b-204">XAudio 2,9 choisit un cœur de processeur différent sur le Xbox d’un ordinateur.</span><span class="sxs-lookup"><span data-stu-id="40a8b-204">XAudio 2.9 will choose a different CPU core on Xbox One than on PC.</span></span> <span data-ttu-id="40a8b-205">La méthode IXAudio2Extension :: GetProcessor peut être utilisée pour déterminer le cœur de processeur XAudio2 choisi.</span><span class="sxs-lookup"><span data-stu-id="40a8b-205">The IXAudio2Extension::GetProcessor method can be used to determine which CPU core XAudio2 has chosen.</span></span>

### <a name="virtual-audio-endpoint"></a><span data-ttu-id="40a8b-206">Point de terminaison audio virtuel</span><span class="sxs-lookup"><span data-stu-id="40a8b-206">Virtual audio endpoint</span></span>

<span data-ttu-id="40a8b-207">XAudio 2,9 utilise un point de terminaison audio virtuel par défaut lorsqu’il s’exécute sur Windows 8 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="40a8b-207">XAudio 2.9 will use a virtual audio endpoint by default, when running on Windows 8 or later.</span></span> <span data-ttu-id="40a8b-208">Cela signifie que si le point de terminaison audio par défaut change alors que XAudio 2,9 est utilisé, il tentera de basculer automatiquement vers le nouveau point de terminaison audio.</span><span class="sxs-lookup"><span data-stu-id="40a8b-208">This means that if the default audio endpoint changes while XAudio 2.9 is used, it will attempt to automatically switch to the new audio endpoint.</span></span> <span data-ttu-id="40a8b-209">C’est le cas, par exemple, lorsque le point de terminaison audio par défaut est une paire de casques connectés sur USB, puis que l’utilisateur déconnecte le casque.</span><span class="sxs-lookup"><span data-stu-id="40a8b-209">An example of when this can happen when the default audio endpoint is a pair of headphones that are connected over USB, and then the user unplugs the headphones.</span></span> <span data-ttu-id="40a8b-210">Les intervenants sont alors le nouveau point de terminaison audio par défaut.</span><span class="sxs-lookup"><span data-stu-id="40a8b-210">This will cause the speakers to be the new default audio endpoint.</span></span>

<span data-ttu-id="40a8b-211">Si l’application spécifie un format audio spécifique lors de l’appel de [**IXAudio2 :: CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice), il est possible que xaudio 2,9 exécute ce commutateur.</span><span class="sxs-lookup"><span data-stu-id="40a8b-211">If the app specifies a specific audio format when invoking [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice), it may not be possible for XAudio 2.9 to perform this switch.</span></span> <span data-ttu-id="40a8b-212">Par exemple, si l’application a spécifié que la voix de mastérisation utilise un taux d’échantillonnage de 48 kHz et que le nouveau périphérique audio ne prend en charge que 44,1 kHz, le commutateur automatique échoue et XAudio 2,9 signale l’erreur d' [ \_ \_ \_ invalidation de l’appareil XAUDIO2 E](xaudio2-error-codes.md) .</span><span class="sxs-lookup"><span data-stu-id="40a8b-212">For example, if the app specified that the Mastering Voice shall use a 48 kHz sampling rate and the new audio device only supports 44.1 kHz, then the automatic switch will fail, and XAudio 2.9 will report the [XAUDIO2\_E\_DEVICE\_INVALIDATED](xaudio2-error-codes.md) error.</span></span>

<span data-ttu-id="40a8b-213">L’application peut refuser l’utilisation du point de terminaison audio virtuel en passant l’indicateur [**XAUDIO2 \_ aucun \_ \_ \_ client audio virtuel**](xaudio2-boundary-values-and-flags.md) à [**IXAudio2 :: CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span><span class="sxs-lookup"><span data-stu-id="40a8b-213">It is possible for the app to opt out of using the virtual audio endpoint by passing in the [**XAUDIO2\_NO\_VIRTUAL\_AUDIO\_CLIENT**](xaudio2-boundary-values-and-flags.md) flag to [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span></span>

<span data-ttu-id="40a8b-214">Les points de terminaison audio virtuels ne sont pas disponibles sur Windows 7 SP1.</span><span class="sxs-lookup"><span data-stu-id="40a8b-214">Virtual audio endpoints are not available on Windows 7 SP1.</span></span> <span data-ttu-id="40a8b-215">L' **indicateur \_ XAUDIO2 \_ aucun \_ \_ client audio virtuel** n’a aucun effet sur Windows 7 SP1.</span><span class="sxs-lookup"><span data-stu-id="40a8b-215">The **XAUDIO2\_NO\_VIRTUAL\_AUDIO\_CLIENT** flag has no effect on Windows 7 SP1.</span></span>

### <a name="audio-categories"></a><span data-ttu-id="40a8b-216">Catégories audio</span><span class="sxs-lookup"><span data-stu-id="40a8b-216">Audio categories</span></span>

<span data-ttu-id="40a8b-217">L’application doit spécifier une catégorie pour son flux audio.</span><span class="sxs-lookup"><span data-stu-id="40a8b-217">The app should specify a category for its audio stream.</span></span> <span data-ttu-id="40a8b-218">Pour ce faire, vous fournissez une valeur de l’énumération AudioCategory lors de l’appel de la méthode [**IXAudio2 :: CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) .</span><span class="sxs-lookup"><span data-stu-id="40a8b-218">This is done by providing a value from the AudioCategory enumeration when invoking the [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) method.</span></span> <span data-ttu-id="40a8b-219">Par exemple, AudioCategory_GameEffects.</span><span class="sxs-lookup"><span data-stu-id="40a8b-219">For example, AudioCategory_GameEffects.</span></span> <span data-ttu-id="40a8b-220">La catégorie audio peut affecter la façon dont Windows traite le son ou la manière dont il représente le flux audio dans le panneau de contrôle du volume.</span><span class="sxs-lookup"><span data-stu-id="40a8b-220">The audio category can affect how Windows processes the sound or how it represents the audio stream in the volume control panel.</span></span> <span data-ttu-id="40a8b-221">La catégorie audio affecte également si le [son Surround virtuel](#spatial-sound-and-virtual-surround) est automatiquement activé.</span><span class="sxs-lookup"><span data-stu-id="40a8b-221">The audio category also affects if [virtual surround sound](#spatial-sound-and-virtual-surround) is automatically enabled.</span></span>

### <a name="duration-of-audio-processing-quantum"></a><span data-ttu-id="40a8b-222">Durée du quantum de traitement audio</span><span class="sxs-lookup"><span data-stu-id="40a8b-222">Duration of audio processing quantum</span></span>

<span data-ttu-id="40a8b-223">Sur la plupart des PC, XAudio 2,9 traite les données audio en segments de 10 millisecondes.</span><span class="sxs-lookup"><span data-stu-id="40a8b-223">On most PCs, XAudio 2.9 processes audio in 10 millisecond chunks.</span></span> <span data-ttu-id="40a8b-224">C’est ce que l’on appelle le quantum de traitement.</span><span class="sxs-lookup"><span data-stu-id="40a8b-224">This is called the processing quantum.</span></span> <span data-ttu-id="40a8b-225">Toutefois, la durée de ce Quantum peut être différente de 10 millisecondes sur un matériel.</span><span class="sxs-lookup"><span data-stu-id="40a8b-225">However, the duration of this quantum may be different than 10 milliseconds on some hardware.</span></span> <span data-ttu-id="40a8b-226">Les applications qui doivent connaître le quantum exact peuvent appeler la méthode IXAudio2Extension :: GetProcessingQuantum pour récupérer la valeur.</span><span class="sxs-lookup"><span data-stu-id="40a8b-226">Apps that need to know the exact quantum can invoke the IXAudio2Extension::GetProcessingQuantum method to retrieve the value.</span></span>

### <a name="spatial-sound-and-virtual-surround"></a><span data-ttu-id="40a8b-227">Son spatial et son Surround virtuel</span><span class="sxs-lookup"><span data-stu-id="40a8b-227">Spatial sound and virtual surround</span></span>

<span data-ttu-id="40a8b-228">À compter de la mise à jour Windows 10 1903, XAudio 2,9 utilise automatiquement le son Surround virtuel, si certaines conditions sont satisfaites.</span><span class="sxs-lookup"><span data-stu-id="40a8b-228">Starting with the Windows 10 1903 update, XAudio 2.9 automatically uses virtual surround sound, if certain conditions are satisfied.</span></span> <span data-ttu-id="40a8b-229">Nous vous recommandons de tester les jeux qui génèrent du son multicanal sur Windows 10 1903 (ou une version ultérieure) pour vérifier que le jeu semble comme prévu.</span><span class="sxs-lookup"><span data-stu-id="40a8b-229">We recommend testing game that generate multi-channel sound on Windows 10 1903 (or newer) to verify that the game sounds as expected.</span></span> <span data-ttu-id="40a8b-230">Pour plus d’informations sur la façon de tester cette fonctionnalité, consultez la section [test du son spatial](#spatial-sound-in-newer-versions-of-windows-10) .</span><span class="sxs-lookup"><span data-stu-id="40a8b-230">See the [testing spatial sound](#spatial-sound-in-newer-versions-of-windows-10) section for a discussion about how to test this feature.</span></span>

<span data-ttu-id="40a8b-231">Normalement, XAudio 2,9 effectue un repli sur tout l’audio multicanal pour qu’il corresponde au nombre « physique » de canaux audio pris en charge par le point de terminaison audio.</span><span class="sxs-lookup"><span data-stu-id="40a8b-231">Normally, XAudio 2.9 performs a folds down any multi-channel audio to match the "physical" number of audio channels that are supported by the audio endpoint.</span></span> <span data-ttu-id="40a8b-232">Par exemple, si le jeu fournit une source audio de canal 7,1, mais que le son est joué sur un casque, XAudio 2,9 replie le canal audio 7,1 en stéréo, à l’aide d’une matrice de pliage standard de l’industrie.</span><span class="sxs-lookup"><span data-stu-id="40a8b-232">For example, if the game provides a 7.1 channel audio source, but the sound is played on headphones, XAudio 2.9 will fold down the 7.1 channel audio into stereo, using an industry standard fold-down matrix.</span></span> <span data-ttu-id="40a8b-233">Si le PC est connecté à un point de terminaison Audio HDMI, le canal audio 7,1 est transmis tel quel via la connexion HDMI.</span><span class="sxs-lookup"><span data-stu-id="40a8b-233">If the PC is connected to a HDMI audio endpoint, then the 7.1 channel audio will be transmitted as-is over the HDMI connection.</span></span>

<span data-ttu-id="40a8b-234">Windows 10 ajoute la prise en charge de l’audio spatial, à l’aide d’un encodeur centralisé qui encode le contenu audio dans un format de [son spatial](../coreaudio/spatial-sound.md) sélectionné par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="40a8b-234">Windows 10 adds support for spatial audio, using a centralized encoder that encodes audio into a user-selected [spatial sound](../coreaudio/spatial-sound.md) format.</span></span> <span data-ttu-id="40a8b-235">Windows 10 est fourni avec un format de son spatial appelé Windows Sonic.</span><span class="sxs-lookup"><span data-stu-id="40a8b-235">Windows 10 comes included with a spatial sound format called Windows Sonic.</span></span> <span data-ttu-id="40a8b-236">D’autres formats, tels que Dolby Atmos pour casque, peuvent être téléchargés à partir du Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="40a8b-236">Other formats, such as Dolby Atmos for Headphones, can be downloaded from the Microsoft Store.</span></span> <span data-ttu-id="40a8b-237">Certains des formats de son spatial, tels que Windows Sonic et Dolby Atmos pour casque, sont conçus pour être utilisés sur des points de terminaison audio stéréo.</span><span class="sxs-lookup"><span data-stu-id="40a8b-237">Some of the spatial sound formats, such as Windows Sonic and Dolby Atmos for Headphones, are designed to be used on stereo audio endpoints.</span></span> <span data-ttu-id="40a8b-238">Ces formats pliez le bruit surround au stéréo à l’aide d’algorithmes propriétaires qui obtiennent un effet sonore surround « virtuel ».</span><span class="sxs-lookup"><span data-stu-id="40a8b-238">These formats fold down surround sound to stereo using proprietary algorithms that achieve a "virtual" surround sound effect.</span></span> <span data-ttu-id="40a8b-239">En d’autres termes, l’écouteur peut percevoir un son à partir de différentes positions dans l’espace 3D, même quand il ne s’agit que de porter un casque ou d’écouter sur une seule paire de haut-parleurs stéréo.</span><span class="sxs-lookup"><span data-stu-id="40a8b-239">In other words, the listener can perceive sound appearing from different positions in 3D space even while only wearing headphones, or while listening on a single pair of stereo speakers.</span></span>

<span data-ttu-id="40a8b-240">Des effets similaires peuvent être obtenus à l’aide des API [X3DAudio](x3daudio.md) incluses avec xaudio 2,9.</span><span class="sxs-lookup"><span data-stu-id="40a8b-240">Similar effects can be achieved using the [X3DAudio](x3daudio.md) APIs that are included with XAudio 2.9.</span></span> <span data-ttu-id="40a8b-241">La principale différence réside dans le fait que X3DAudio exige que le développeur de l’application le programme de manière explicite pour le son 3D, alors que le son Surround virtuel est appliqué automatiquement à toute source de son basée sur un canal tradional.</span><span class="sxs-lookup"><span data-stu-id="40a8b-241">The main difference is that X3DAudio requires the app developer to explicitly program for 3D audio, whereas virtual surround sound is applied automatically to any tradional channel-based sound source.</span></span>

<span data-ttu-id="40a8b-242">Sur Windows 10 1903 et versions ultérieures, les jeux qui utilisent XAudio 2,9 utilisent le format de son spatial à l’ensemble du système que l’utilisateur a activé sur le point de terminaison audio, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="40a8b-242">On Windows 10 1903, and newer, games that use XAudio 2.9 will use the system-wide spatial sound format that the user has enabled on the audio endpoint, if any.</span></span> <span data-ttu-id="40a8b-243">Cela signifie que XAudio 2,9 n’effectuera pas le repli habituel du son surround en stéréo.</span><span class="sxs-lookup"><span data-stu-id="40a8b-243">This means that XAudio 2.9 will not perform the usual fold-down of surround sound to stereo.</span></span> <span data-ttu-id="40a8b-244">Au lieu de cela, le signal sonore surround est remis à l’encodeur de son spatial (par exemple, Windows Sonic) pour obtenir un effet sonore surround virtuel.</span><span class="sxs-lookup"><span data-stu-id="40a8b-244">Instead, the surround sound signal will be delivered to the spatial sound encoder (e.g., Windows Sonic) to achieve a virtual surround sound effect.</span></span>

### <a name="createhrtfapo"></a><span data-ttu-id="40a8b-245">CreateHrtfApo</span><span class="sxs-lookup"><span data-stu-id="40a8b-245">CreateHrtfApo</span></span>

<span data-ttu-id="40a8b-246">La fonction [**CreateHrtfApo**](/windows/desktop/api/HrtfApoApi/nf-hrtfapoapi-createhrtfapo) est disponible uniquement sur Windows 10.</span><span class="sxs-lookup"><span data-stu-id="40a8b-246">The [**CreateHrtfApo**](/windows/desktop/api/HrtfApoApi/nf-hrtfapoapi-createhrtfapo) function is only available on Windows 10.</span></span> <span data-ttu-id="40a8b-247">Elle n’est pas implémentée dans le package redistribuable XAudio 2,9.</span><span class="sxs-lookup"><span data-stu-id="40a8b-247">It is not implemented in the XAudio 2.9 redistributable.</span></span>
