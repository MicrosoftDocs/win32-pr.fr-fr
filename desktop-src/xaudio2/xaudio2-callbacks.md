---
description: XAudio2 peut appeler des fonctions fournies par le client pour le notifier de façon asynchrone de certains événements qui se produisent dans le thread de traitement audio.
ms.assetid: 4fbd4229-f7ac-33b3-b4b7-f09150a60598
title: Rappels XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ee191ad8c15d238a065c837c6fb192befbe7a51
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104320901"
---
# <a name="xaudio2-callbacks"></a><span data-ttu-id="83411-103">Rappels XAudio2</span><span class="sxs-lookup"><span data-stu-id="83411-103">XAudio2 Callbacks</span></span>

<span data-ttu-id="83411-104">XAudio2 peut appeler des fonctions fournies par le client pour le notifier de façon asynchrone de certains événements qui se produisent dans le thread de traitement audio.</span><span class="sxs-lookup"><span data-stu-id="83411-104">XAudio2 can call functions provided by the client to notify it asynchronously of certain events taking place in the audio processing thread.</span></span> <span data-ttu-id="83411-105">Ces rappels peuvent être globaux ou spécifiques à une voix source donnée.</span><span class="sxs-lookup"><span data-stu-id="83411-105">These callbacks can be global or specific to a given source voice.</span></span> <span data-ttu-id="83411-106">Pour recevoir des rappels de moteur globaux, le client doit fournir une instance d’une classe qui implémente l’interface [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) lors de l’initialisation de XAudio2.</span><span class="sxs-lookup"><span data-stu-id="83411-106">To receive global engine callbacks, the client must provide an instance of a class implementing the [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) interface when initializing XAudio2.</span></span> <span data-ttu-id="83411-107">Pour recevoir des rappels vocaux sources, le client doit fournir une instance d’une classe qui implémente l’interface [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) lors de la création de voix source.</span><span class="sxs-lookup"><span data-stu-id="83411-107">To receive source voice callbacks, the client must provide an instance of a class implementing the [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) interface when creating source voices.</span></span> <span data-ttu-id="83411-108">Pour plus d’informations, consultez **IXAudio2EngineCallback** et **IXAudio2VoiceCallback**.</span><span class="sxs-lookup"><span data-stu-id="83411-108">For more details, see **IXAudio2EngineCallback** and **IXAudio2VoiceCallback**.</span></span>

<span data-ttu-id="83411-109">Vous devez implémenter les rappels avec précaution pour éviter de provoquer des interruptions dans l’audio.</span><span class="sxs-lookup"><span data-stu-id="83411-109">You must implement callbacks carefully to avoid causing breaks in the audio.</span></span> <span data-ttu-id="83411-110">À chaque fois qu’un rappel est en cours d’exécution, XAudio2 ne peut pas générer de données audio.</span><span class="sxs-lookup"><span data-stu-id="83411-110">Whenever a callback is running, XAudio2 cannot generate any audio.</span></span> <span data-ttu-id="83411-111">Des retards de plus de quelques millisecondes peuvent entraîner un problème audio.</span><span class="sxs-lookup"><span data-stu-id="83411-111">Delays of more than a few milliseconds can cause an audio problem.</span></span> <span data-ttu-id="83411-112">Les retards de cette nature génèrent également la sortie du débogueur.</span><span class="sxs-lookup"><span data-stu-id="83411-112">Delays of this nature also generate debugger output.</span></span> <span data-ttu-id="83411-113">Cela indique des problèmes de performances potentiels.</span><span class="sxs-lookup"><span data-stu-id="83411-113">This indicates potential performance issues.</span></span> <span data-ttu-id="83411-114">Au minimum, les fonctions de rappel ne doivent pas effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="83411-114">At a minimum, callback functions must not do the following:</span></span>

-   <span data-ttu-id="83411-115">Accéder au disque dur ou à un autre stockage permanent</span><span class="sxs-lookup"><span data-stu-id="83411-115">Access the hard disk or other permanent storage</span></span>
-   <span data-ttu-id="83411-116">Effectuer des appels d’API coûteux ou bloquants</span><span class="sxs-lookup"><span data-stu-id="83411-116">Make expensive or blocking API calls</span></span>
-   <span data-ttu-id="83411-117">Synchroniser avec d’autres parties du code client</span><span class="sxs-lookup"><span data-stu-id="83411-117">Synchronize with other parts of client code</span></span>
-   <span data-ttu-id="83411-118">Exiger une utilisation importante du processeur</span><span class="sxs-lookup"><span data-stu-id="83411-118">Require significant CPU usage</span></span>

<span data-ttu-id="83411-119">Si la conception du client requiert un rappel pour déclencher des actions telles que celles indiquées précédemment, le rappel doit signaler un thread client différent pour effectuer le travail.</span><span class="sxs-lookup"><span data-stu-id="83411-119">If the client design requires a callback to trigger actions such as those listed previously, the callback should signal a different client thread to do the work.</span></span> <span data-ttu-id="83411-120">Vous pouvez le faire avec un mécanisme **SetEvent** simple ou des mécanismes plus sophistiqués comme une file d’attente de commandes non bloquante qui est consommée par un autre thread.</span><span class="sxs-lookup"><span data-stu-id="83411-120">You can do this with a simple **SetEvent** mechanism or more sophisticated mechanisms like a nonblocking command queue that is consumed by another thread.</span></span>

## <a name="ixaudio2enginecallback"></a><span data-ttu-id="83411-121">IXAudio2EngineCallback</span><span class="sxs-lookup"><span data-stu-id="83411-121">IXAudio2EngineCallback</span></span>

<span data-ttu-id="83411-122">La classe [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) contient des méthodes qui notifient le client lorsque certains événements se produisent dans le moteur XAudio2.</span><span class="sxs-lookup"><span data-stu-id="83411-122">The [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) class contains methods that notify the client when certain events happen in the XAudio2 engine.</span></span> <span data-ttu-id="83411-123">Ces méthodes doivent être implémentées par le client XAudio2.</span><span class="sxs-lookup"><span data-stu-id="83411-123">These methods should be implemented by the XAudio2 client.</span></span> <span data-ttu-id="83411-124">XAudio2 appelle ces méthodes au moyen d’un pointeur d’interface fourni par le client à l’aide de la méthode [**IXAudio2 :: RegisterForCallbacks**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-registerforcallbacks) .</span><span class="sxs-lookup"><span data-stu-id="83411-124">XAudio2 calls these methods by means of an interface pointer provided by the client using the [**IXAudio2::RegisterForCallbacks**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-registerforcallbacks) method.</span></span> <span data-ttu-id="83411-125">Toutes ces méthodes retournent **void**, plutôt qu’un **HRESULT**.</span><span class="sxs-lookup"><span data-stu-id="83411-125">All these methods return **void**, rather than an **HRESULT**.</span></span>

## <a name="ixaudio2voicecallback"></a><span data-ttu-id="83411-126">IXAudio2VoiceCallback</span><span class="sxs-lookup"><span data-stu-id="83411-126">IXAudio2VoiceCallback</span></span>

<span data-ttu-id="83411-127">La classe [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) contient des méthodes qui informent le client lorsque certains événements se produisent dans une voix source XAudio2 spécifique.</span><span class="sxs-lookup"><span data-stu-id="83411-127">The [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) class contains methods that notify the client when certain events happen in a specific XAudio2 source voice.</span></span> <span data-ttu-id="83411-128">XAudio2 appelle ces méthodes au moyen d’un pointeur d’interface fourni par le client dans [**IXAudio2 :: CreateSourceVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice).</span><span class="sxs-lookup"><span data-stu-id="83411-128">XAudio2 calls these methods by means of an interface pointer provided by the client in [**IXAudio2::CreateSourceVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice).</span></span> <span data-ttu-id="83411-129">Comme avec [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback), ces méthodes doivent être implémentées par le client XAudio2 et retourner **void** plutôt qu’un **HRESULT**.</span><span class="sxs-lookup"><span data-stu-id="83411-129">As with [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback), these methods should be implemented by the XAudio2 client, and return **void** rather than an **HRESULT**.</span></span>

<span data-ttu-id="83411-130">Comme mentionné précédemment, il est essentiel que les implémentations fournies par le client de ces rappels retournent aussi rapidement que possible, de préférence en quelques millisecondes.</span><span class="sxs-lookup"><span data-stu-id="83411-130">As mentioned previously, it is crucial that the client-provided implementations of these callbacks return as quickly as possible, preferably within a millisecond.</span></span> <span data-ttu-id="83411-131">Les rappels sont exécutés dans le thread de traitement audio, et tout le traitement est interrompu jusqu’à ce que le rappel soit retourné.</span><span class="sxs-lookup"><span data-stu-id="83411-131">The callbacks are executed in the audio processing thread, and all processing is interrupted until the callback returns.</span></span> <span data-ttu-id="83411-132">Un délai dans un rappel peut facilement entraîner un problème audio.</span><span class="sxs-lookup"><span data-stu-id="83411-132">A delay in a callback can easily cause an audio problem.</span></span>

## <a name="related-topics"></a><span data-ttu-id="83411-133">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="83411-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="83411-134">Rappels</span><span class="sxs-lookup"><span data-stu-id="83411-134">Callbacks</span></span>](callbacks.md)
</dt> <dt>

[<span data-ttu-id="83411-135">Guide de programmation XAudio2</span><span class="sxs-lookup"><span data-stu-id="83411-135">XAudio2 Programming Guide</span></span>](programming-guide.md)
</dt> <dt>

[<span data-ttu-id="83411-136">Procédure : utiliser des rappels de voix source</span><span class="sxs-lookup"><span data-stu-id="83411-136">How to: Use Source Voice Callbacks</span></span>](how-to--use-source-voice-callbacks.md)
</dt> <dt>

[<span data-ttu-id="83411-137">Procédure : utiliser des rappels de moteur</span><span class="sxs-lookup"><span data-stu-id="83411-137">How to: Use Engine Callbacks</span></span>](how-to--use-engine-callbacks.md)
</dt> <dt>

[<span data-ttu-id="83411-138">Procédure : diffuser un son en continu à partir du disque</span><span class="sxs-lookup"><span data-stu-id="83411-138">How to: Stream a Sound from Disk</span></span>](how-to--stream-a-sound-from-disk.md)
</dt> </dl>

 

 
