---
description: Les voix XAudio2 peuvent effectuer des conversions automatiques de taux d’échantillonnage si leur taux d’échantillonnage d’entrée diffère du taux d’échantillonnage d’entrée de leurs voix de sortie.
ms.assetid: be34ce62-6552-45e2-a247-830ab55ea9ec
title: Conversions de taux d’échantillonnage XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d437a45f9e896826bedc1418382fb257201722d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104210800"
---
# <a name="xaudio2-sample-rate-conversions"></a><span data-ttu-id="e6c16-103">Conversions de taux d’échantillonnage XAudio2</span><span class="sxs-lookup"><span data-stu-id="e6c16-103">XAudio2 Sample Rate Conversions</span></span>

<span data-ttu-id="e6c16-104">Les voix XAudio2 peuvent effectuer des conversions automatiques de taux d’échantillonnage si leur taux d’échantillonnage d’entrée diffère du taux d’échantillonnage d’entrée de leurs voix de sortie.</span><span class="sxs-lookup"><span data-stu-id="e6c16-104">XAudio2 voices can perform automatic sample rate conversions if their input sample rate is different from the input sample rate of their output voices.</span></span>

<span data-ttu-id="e6c16-105">Les conversions de taux d’échantillonnage suivent les règles suivantes :</span><span class="sxs-lookup"><span data-stu-id="e6c16-105">Sample rate conversions follow these rules:</span></span>

-   <span data-ttu-id="e6c16-106">Le taux d’échantillonnage des entrées vocales est fixe.</span><span class="sxs-lookup"><span data-stu-id="e6c16-106">Voice input sample rate is fixed.</span></span>

    <span data-ttu-id="e6c16-107">Les voix peuvent uniquement gérer le taux d’échantillonnage d’entrée spécifié lors de leur création.</span><span class="sxs-lookup"><span data-stu-id="e6c16-107">Voices can only handle the input sample rate specified when they were created.</span></span> <span data-ttu-id="e6c16-108">Pour les [**voix de mastérisation**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2masteringvoice) et les voix de [**mixage secondaire**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2submixvoice), le taux d’échantillonnage d’entrée est spécifié avec l’argument *InputSampleRate* pour les fonctions [**IXAudio2 :: CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) et [**IXAudio2 :: CreateSubmixVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsubmixvoice) .</span><span class="sxs-lookup"><span data-stu-id="e6c16-108">For [**mastering voices**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2masteringvoice) and [**submix voices**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2submixvoice), the input sample rate is specified with the *InputSampleRate* argument to the [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) and [**IXAudio2::CreateSubmixVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsubmixvoice) functions.</span></span> <span data-ttu-id="e6c16-109">Pour les voix source, le taux d’échantillonnage d’entrée de la voix est spécifié par l’argument pSourceFormat à la fonction [**IXAudio2 :: CreateSourceVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice) .</span><span class="sxs-lookup"><span data-stu-id="e6c16-109">For source voices, the input sample rate of the voice is specified by the pSourceFormat argument to the [**IXAudio2::CreateSourceVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice) function.</span></span>

-   <span data-ttu-id="e6c16-110">Toutes les voix de sortie de la voix doivent avoir le même taux d’échantillonnage d’entrée.</span><span class="sxs-lookup"><span data-stu-id="e6c16-110">All of a voice's output voices must have the same input sample rate.</span></span>

    <span data-ttu-id="e6c16-111">Les voix peuvent passer de leur taux d’échantillonnage d’entrée à n’importe quel taux d’échantillonnage de sortie, mais toutes les voix de sortie de la voix doivent avoir le même taux d’échantillonnage d’entrée.</span><span class="sxs-lookup"><span data-stu-id="e6c16-111">Voices can convert from their input sample rate to any output sample rate, but all of the voice's output voices must have the same input sample rate.</span></span> <span data-ttu-id="e6c16-112">Par exemple, une voix peut sortir d’un nombre quelconque de voix, avec un taux d’échantillonnage d’entrée de 22 kHz.</span><span class="sxs-lookup"><span data-stu-id="e6c16-112">For example, a voice could output to any number of voices with an input sample rate of 22 kHz.</span></span> <span data-ttu-id="e6c16-113">Toutefois, si cette même voix avait plusieurs voix de sortie, chacune ayant un taux d’échantillonnage d’entrée différent, le graphique audio n’est pas valide.</span><span class="sxs-lookup"><span data-stu-id="e6c16-113">However, if that same voice had several output voices, each of which had a different input sample rate, the audio graph would not be valid.</span></span>

-   <span data-ttu-id="e6c16-114">Le traitement de la conversion de taux d’échantillonnage se produit uniquement lorsque cela est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="e6c16-114">Sample rate conversion processing only occurs when necessary.</span></span>

    <span data-ttu-id="e6c16-115">La conversion de données audio en un taux d’échantillonnage différent entraîne une charge de traitement plus importante, qu’il est préférable d’éviter.</span><span class="sxs-lookup"><span data-stu-id="e6c16-115">Converting audio data to a different sample rate incurs more processing overhead, which it is preferable to avoid.</span></span> <span data-ttu-id="e6c16-116">Si le taux d’échantillonnage d’entrée de la voix correspond au taux d’échantillonnage d’entrée de ses voix en sortie, cette conversion n’est pas effectuée et le temps de traitement est raccourci.</span><span class="sxs-lookup"><span data-stu-id="e6c16-116">If a voice's input sample rate matches the input sample rate of its output voices, this conversion is not done and processing time is shortened.</span></span>

-   <span data-ttu-id="e6c16-117">Le taux d’échantillonnage de sortie peut varier au cours de la vie d’une voix.</span><span class="sxs-lookup"><span data-stu-id="e6c16-117">Output sample rate can vary over the life of a voice.</span></span>

    <span data-ttu-id="e6c16-118">Le taux d’échantillonnage de sortie d’une voix n’est pas fixe.</span><span class="sxs-lookup"><span data-stu-id="e6c16-118">The output sample rate of a voice is not fixed.</span></span> <span data-ttu-id="e6c16-119">Tant que toutes ses voix en sortie ont le même taux d’échantillonnage d’entrée, le graphique audio est valide.</span><span class="sxs-lookup"><span data-stu-id="e6c16-119">As long as all of its output voices have the same input sample rate, the audio graph will be valid.</span></span> <span data-ttu-id="e6c16-120">Si une voix est transformée en sortie vers de nouvelles voix avec un taux d’échantillonnage d’entrée différent, la voix est convertie en taux d’échantillonnage des nouvelles voix.</span><span class="sxs-lookup"><span data-stu-id="e6c16-120">If a voice is changed to output to new voices with a different input sample rate, the voice will convert to the input sample rate of the new voices.</span></span>

<span data-ttu-id="e6c16-121">Dans certains scénarios, il est nécessaire d’ajouter une voix de mixage secondaire pour effectuer une conversion de taux d’échantillonnage entre les voix.</span><span class="sxs-lookup"><span data-stu-id="e6c16-121">There are some scenarios in which it is necessary to add a submix voice to perform sample rate conversion between voices.</span></span> <span data-ttu-id="e6c16-122">Si une voix a besoin d’une sortie vers des voix avec différents taux d’échantillonnage d’entrée, une seule des voix peut être une sortie directe de la voix d’origine.</span><span class="sxs-lookup"><span data-stu-id="e6c16-122">If a voice needs to output to voices with various input sample rates, only one of the voices can be a direct output of the original voice.</span></span> <span data-ttu-id="e6c16-123">Étant donné que toutes les voix de sortie de la voix doivent avoir le même taux d’échantillonnage d’entrée, les autres voix reçoivent indirectement la sortie.</span><span class="sxs-lookup"><span data-stu-id="e6c16-123">Because all of a voice's output voices must have the same input sample rate, the other voices receive output indirectly.</span></span> <span data-ttu-id="e6c16-124">Il doit y avoir une voix de mixage secondaire avec la fréquence d’échantillonnage d’entrée appropriée qui est comprise entre la voix d’origine et la voix de sortie prévue.</span><span class="sxs-lookup"><span data-stu-id="e6c16-124">There must be a submix voice with the correct input sample rate that comes between the original voice and the intended output voice.</span></span>

<span data-ttu-id="e6c16-125">Par exemple, considérez une voix source avec un taux d’échantillonnage d’entrée de 22 kHz, qui doit sortir sur une voix de mixage secondaire avec un taux d’échantillonnage d’entrée de 11 kHz et une voix de mastérisation avec un taux d’échantillonnage d’entrée de 44,1 kHz.</span><span class="sxs-lookup"><span data-stu-id="e6c16-125">For example, consider a source voice with an input sample rate of 22 kHz, which needs to output to a submix voice with an input sample rate of 11 kHz and a mastering voice with an input sample rate of 44.1 kHz.</span></span> <span data-ttu-id="e6c16-126">Étant donné que les deux voix de sortie ont des taux d’échantillonnage d’entrée différents, vous devez insérer plus de voix de mixage secondaire entre la voix d’origine et les voix de sortie prévues.</span><span class="sxs-lookup"><span data-stu-id="e6c16-126">Because the two output voices have different input sample rates, you need to insert more submix voices between the original voice and its intended output voices.</span></span> <span data-ttu-id="e6c16-127">Pour préserver la fidélité de la voix source et éviter les conversions coûteuses inutiles vers des taux d’échantillonnage plus élevés, vous devez insérer deux voix de mixage secondaire avec des taux d’entrée d’échantillonnage de 22 kHz dans le graphique.</span><span class="sxs-lookup"><span data-stu-id="e6c16-127">To maintain the fidelity of the source voice and avoid unnecessary expensive conversions to higher sample rates, you need to insert two submix voices with 22 khz sample input rates into the graph.</span></span> <span data-ttu-id="e6c16-128">Une voix de mixage secondaire s’affiche à 11 kHz à la voix du mixage secondaire avec l’effet de réverbération, et l’autre voix du mixage secondaire est sortie vers la voix de mastérisation à 44,1 kHz.</span><span class="sxs-lookup"><span data-stu-id="e6c16-128">One submix voice would output at 11 khz to the submix voice with the reverb effect, and the other submix voice would output to the mastering voice at 44.1 khz.</span></span>

## <a name="examples-of-sample-rate-conversion-in-audio-graphs"></a><span data-ttu-id="e6c16-129">Exemples de conversion de taux d’échantillonnage dans les graphiques audio</span><span class="sxs-lookup"><span data-stu-id="e6c16-129">Examples of Sample Rate Conversion in Audio Graphs</span></span>

<span data-ttu-id="e6c16-130">Toutes les voix ont le même taux d’entrée d’échantillonnage ; aucune conversion de taux d’échantillonnage n’est effectuée dans le graphique audio.</span><span class="sxs-lookup"><span data-stu-id="e6c16-130">All voices have the same sample input rate; no sample rate conversion is done in the audio graph.</span></span>![aucune conversion de taux d’échantillonnage n’est effectuée dans le graphique audio.](images/xaudio2-sample-rate-conversions-1.png)

<span data-ttu-id="e6c16-132">Toutes les voix ont le même taux d’entrée d’échantillonnage, à l’exception de la voix de mastérisation ; la conversion de taux d’échantillonnage est effectuée uniquement sur les données qui sont dirigées vers la voix de mastérisation.</span><span class="sxs-lookup"><span data-stu-id="e6c16-132">All voices have the same sample input rate except the mastering voice; sample rate conversion is only performed on data going to the mastering voice.</span></span> ![la conversion de taux d’échantillonnage est effectuée uniquement sur les données qui sont dirigées vers la voix de mastérisation.](images/xaudio2-sample-rate-conversions-2.png)

<span data-ttu-id="e6c16-134">Les voix ont des taux d’entrée différents et nécessitent davantage de voix de mixage secondaire pour effectuer des conversions de taux d’échantillonnage ; la conversion de taux d’échantillonnage est effectuée à plusieurs endroits dans le graphique audio.</span><span class="sxs-lookup"><span data-stu-id="e6c16-134">Voices have different sample input rates and require more submix voices to perform sample rate conversions; sample rate conversion is performed in multiple places in the audio graph.</span></span> ![la conversion de taux d’échantillonnage est effectuée à plusieurs endroits dans le graphique audio.](images/xaudio2-sample-rate-conversions-3.png)

## <a name="related-topics"></a><span data-ttu-id="e6c16-136">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="e6c16-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e6c16-137">Voix</span><span class="sxs-lookup"><span data-stu-id="e6c16-137">Voices</span></span>](voices.md)
</dt> <dt>

[<span data-ttu-id="e6c16-138">Guide de programmation XAudio2</span><span class="sxs-lookup"><span data-stu-id="e6c16-138">XAudio2 Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 
