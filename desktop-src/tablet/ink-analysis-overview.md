---
description: Les API InkAnalysis fournissent aux développeurs Tablet PC des outils puissants pour examiner l’entrée manuscrite par programmation. L’API classe l’encre dans des catégories significatives, telles que des mots, des lignes, des paragraphes et des dessins.
ms.assetid: d9521a8c-f61a-40ea-8603-e8afbba75a4e
title: Présentation de l’analyse de l’encre
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e383d16c01cd9475d4c54587b4b5fb4c09791a0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104525311"
---
# <a name="ink-analysis-overview"></a><span data-ttu-id="85204-104">Présentation de l’analyse de l’encre</span><span class="sxs-lookup"><span data-stu-id="85204-104">Ink Analysis Overview</span></span>

<span data-ttu-id="85204-105">Les API InkAnalysis fournissent aux développeurs Tablet PC des outils puissants pour examiner l’entrée manuscrite par programmation.</span><span class="sxs-lookup"><span data-stu-id="85204-105">The InkAnalysis APIs provide Tablet PC developers with powerful tools to programmatically examine ink input.</span></span> <span data-ttu-id="85204-106">L’API classe l’encre dans des catégories significatives, telles que des mots, des lignes, des paragraphes et des dessins.</span><span class="sxs-lookup"><span data-stu-id="85204-106">The API classifies ink into meaningful categories such as words, lines, paragraphs, and drawings.</span></span>

<span data-ttu-id="85204-107">Vous pouvez utiliser chaque classification de plusieurs façons, y compris pour améliorer les résultats de la reconnaissance de l’écriture manuscrite.</span><span class="sxs-lookup"><span data-stu-id="85204-107">You can use each classification in a variety of ways, including improving recognition results for handwriting.</span></span>

## <a name="ink-analysis-basics"></a><span data-ttu-id="85204-108">Notions de base de l’analyse d’encre</span><span class="sxs-lookup"><span data-stu-id="85204-108">Ink Analysis Basics</span></span>

<span data-ttu-id="85204-109">Cette section présente la technologie d’analyse des encres de la plateforme Tablet PC et explique quand et comment l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="85204-109">This section introduces the Tablet PC Platform ink analysis technology and explains when and how to use it.</span></span>

<span data-ttu-id="85204-110">Les API InkAnalysis combinent efficacement deux technologies distinctes mais complémentaires : la reconnaissance de l’écriture manuscrite et la classification de la disposition.</span><span class="sxs-lookup"><span data-stu-id="85204-110">The InkAnalysis APIs effectively combine two distinct but complimentary technologies: handwriting recognition and layout classification.</span></span> <span data-ttu-id="85204-111">La combinaison de ces deux technologies donne des résultats plus élevés que les parties.</span><span class="sxs-lookup"><span data-stu-id="85204-111">Combining these two technologies gives definitively greater results than the parts taken alone.</span></span>

<span data-ttu-id="85204-112">La reconnaissance de l’écriture manuscrite est l’analyse de calcul de l’encre numérique manuscrite pour retourner une interprétation basée sur des caractères dans une langue donnée.</span><span class="sxs-lookup"><span data-stu-id="85204-112">Handwriting recognition is the computational analysis of handwritten digital ink to return character-based interpretation in a given language.</span></span> <span data-ttu-id="85204-113">Autrement dit, la reconnaissance de l’écriture manuscrite indique comment l’ordinateur lit l’écriture manuscrite d’une personne.</span><span class="sxs-lookup"><span data-stu-id="85204-113">That is, handwriting recognition is how the computer "reads" a person's handwriting.</span></span>

<span data-ttu-id="85204-114">L’analyse de l’encre peut être divisée en une classification de l’encre et une analyse de la disposition.</span><span class="sxs-lookup"><span data-stu-id="85204-114">Ink Analysis can be further broken down into ink classification and layout analysis.</span></span> <span data-ttu-id="85204-115">La classification d’encre est la Division de calcul de l’encre en unités sémantiquement significatives, telles que les paragraphes, les lignes, les mots et les dessins.</span><span class="sxs-lookup"><span data-stu-id="85204-115">Ink classification is the computational division of ink into semantically meaningful units such as paragraphs, lines, words, and drawings.</span></span> <span data-ttu-id="85204-116">L’analyse de la disposition est l’examen de calcul de l’entrée d’encre pour déterminer la position de l’encre sur la surface d’encrage et la façon dont les traits sont liés l’un à l’autre de manière spatiale et même sémantique.</span><span class="sxs-lookup"><span data-stu-id="85204-116">Layout analysis is the computational examination of ink input to determine the position of the ink on the inking surface and how the strokes relate to each other spatially and even semantically.</span></span> <span data-ttu-id="85204-117">Par exemple, l’analyse de la disposition peut vous indiquer qu’un élément d’encre particulier est une annotation ou un appel.</span><span class="sxs-lookup"><span data-stu-id="85204-117">For example, layout analysis can tell you that a particular piece of ink is an annotation or a call out.</span></span>

### <a name="recognition"></a><span data-ttu-id="85204-118">Reconnaissance</span><span class="sxs-lookup"><span data-stu-id="85204-118">Recognition</span></span>

<span data-ttu-id="85204-119">Un exemple de la façon dont la combinaison de reconnaissance avec l’analyse d’encre dans l’API InkAnalysis permet au développeur d’améliorer les résultats de la reconnaissance.</span><span class="sxs-lookup"><span data-stu-id="85204-119">One example of how the combination of recognition with ink analysis in the InkAnalysis API helps the developer is the improvement in recognition results.</span></span> <span data-ttu-id="85204-120">Les moteurs de reconnaissance de l’écriture manuscrite Tablet PC ont été principalement conçus pour reconnaître une seule ligne horizontale d’encre.</span><span class="sxs-lookup"><span data-stu-id="85204-120">The Tablet PC handwriting recognition engines have been primarily designed to recognize a single horizontal line of ink.</span></span> <span data-ttu-id="85204-121">Toutefois, les gens ont tendance à écrire plusieurs lignes lorsqu’ils prennent des notes, et il n’est pas garanti que ces lignes soient horizontales par rapport à la page.</span><span class="sxs-lookup"><span data-stu-id="85204-121">However, people tend to write multiple lines when taking notes, and those lines are not guaranteed to be horizontal in relation to the page.</span></span> <span data-ttu-id="85204-122">Avec l’API InkAnalysis, l’encre est prétraitée par l’analyseur d’encre avant d’être envoyée au module de reconnaissance.</span><span class="sxs-lookup"><span data-stu-id="85204-122">With the InkAnalysis API, ink is preprocessed by the ink analyzer before being sent to the recognizer.</span></span> <span data-ttu-id="85204-123">L’encre analysée est transformée en horizontale avant d’être reconnue, ce qui améliore les résultats de la reconnaissance.</span><span class="sxs-lookup"><span data-stu-id="85204-123">The analyzed ink is transformed to horizontal before being recognized, improving the recognition results.</span></span>

<span data-ttu-id="85204-124">Les autres avantages à la reconnaissance sont dérivés en faisant en sorte que l’analyseur d’encre corrige les informations d’ordre de trait incorrectes avant d’envoyer l’encre au module de reconnaissance.</span><span class="sxs-lookup"><span data-stu-id="85204-124">Other benefits to recognition are derived by having the ink analyzer correct incorrect stroke order information before sending the ink to the recognizer.</span></span> <span data-ttu-id="85204-125">En outre, les résultats de la reconnaissance sont à présent disponibles de manière sélective.</span><span class="sxs-lookup"><span data-stu-id="85204-125">Further, recognition results are now available in a selective manner.</span></span> <span data-ttu-id="85204-126">Autrement dit, le développeur peut rapidement récupérer les résultats de la reconnaissance pour un mot, une ligne ou un paragraphe unique dans un appel.</span><span class="sxs-lookup"><span data-stu-id="85204-126">That is, the developer can quickly retrieve the recognition results for a single word, line, or paragraph in one call.</span></span>

### <a name="ink-classification"></a><span data-ttu-id="85204-127">Classification d’encre</span><span class="sxs-lookup"><span data-stu-id="85204-127">Ink Classification</span></span>

<span data-ttu-id="85204-128">Il existe, bien sûr, un grand nombre de scénarios dans lesquels vous pouvez conserver les données d’encre intactes, plutôt que de les convertir immédiatement en texte.</span><span class="sxs-lookup"><span data-stu-id="85204-128">There are, of course, a variety of scenarios in which you may to keep the ink data intact, rather than converting it immediately to text.</span></span> <span data-ttu-id="85204-129">L’analyse de l’encre offre également des avantages.</span><span class="sxs-lookup"><span data-stu-id="85204-129">Ink analysis provides benefits here as well.</span></span> <span data-ttu-id="85204-130">Plus précisément, les API InkAnalysis offrent la possibilité de fractionner les traits d’encre selon qu’ils écrivent ou dessinent.</span><span class="sxs-lookup"><span data-stu-id="85204-130">Specifically, the InkAnalysis APIs provide the ability to split ink strokes according to whether they are writing or drawings.</span></span> <span data-ttu-id="85204-131">Les traits d’encre classés comme écrits sont ceux qui composent un mot ou des caractères.</span><span class="sxs-lookup"><span data-stu-id="85204-131">Ink strokes that are classified as writing are those that make up a word or characters.</span></span> <span data-ttu-id="85204-132">Tous les autres traits sont des dessins.</span><span class="sxs-lookup"><span data-stu-id="85204-132">All other strokes are drawings.</span></span> <span data-ttu-id="85204-133">Vous disposez ainsi d’une nouvelle façon d’accéder aux données manuscrites, ce qui permet de créer de nouveaux scénarios utilisateur.</span><span class="sxs-lookup"><span data-stu-id="85204-133">This provides you with a new way to access ink data, enabling new user scenarios.</span></span> <span data-ttu-id="85204-134">Par exemple, vous pouvez implémenter la sélection de sorte qu’elle soit différente selon le type de trait sur lequel l’utilisateur appuie ; Si un utilisateur appuie sur un trait d’écriture, l’application sélectionne tout le jeu de traits qui composent le mot, si l’utilisateur appuie sur un des de dessin, l’application sélectionne uniquement ce trait.</span><span class="sxs-lookup"><span data-stu-id="85204-134">For instance, you may implement selection so that it is different based on which type of stroke the user taps on; if a user taps a writing stroke, the application selects the entire set of strokes that compose the word, if the user taps a drawing stoke, the application selects only that stroke.</span></span>

### <a name="layout-analysis"></a><span data-ttu-id="85204-135">Analyse de la disposition</span><span class="sxs-lookup"><span data-stu-id="85204-135">Layout Analysis</span></span>

<span data-ttu-id="85204-136">L’analyse de la disposition utile va bien au-delà de la répartition relativement simple de l’encre en composants d’écriture et de dessin.</span><span class="sxs-lookup"><span data-stu-id="85204-136">Useful layout analysis actually goes far beyond the relatively simple breakdown of ink into writing and drawing components.</span></span>

<span data-ttu-id="85204-137">L’analyse de l’encre comprend également une décomposition plus détaillée des traits d’écriture et de dessin.</span><span class="sxs-lookup"><span data-stu-id="85204-137">Ink analysis also includes a richer breakdown of the writing and drawing strokes.</span></span> <span data-ttu-id="85204-138">À titre d’exemple très simple, prenez un blob d’encre comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="85204-138">As a very simple example, take a blob of ink as shown in the following illustration.</span></span>

![deux simples lignes d’écriture manuscrite](images/12e7a221-59c1-4d69-b7aa-67f2caebe375.jpg)

<span data-ttu-id="85204-140">Une fois que la plateforme a analysé ces traits, elle retourne une représentation sous forme d’arborescence de ces traits, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="85204-140">After the platform has analyzed these strokes, it returns a tree representation of these strokes as shown in the following illustration.</span></span> <span data-ttu-id="85204-141">Pour ce cas simple, l’arborescence contient uniquement des informations sur les paragraphes, les lignes et les mots, mais la richesse de cette arborescence augmente à mesure que la complexité du document manuscrit augmente.</span><span class="sxs-lookup"><span data-stu-id="85204-141">For this simple case, the tree contains only paragraph, line, and word information, but the richness of this tree increases as the complexity of the ink document increases.</span></span>

![représentation sous forme d’arborescence de la racine, du paragraphe, des lignes et des mots](images/be5a7635-0abc-45ad-bcb5-98fddee5e148.jpg)

<span data-ttu-id="85204-143">Étant donné que ces informations sont maintenant séparées en unités gérables, vous pouvez désormais créer des fonctionnalités plus puissantes.</span><span class="sxs-lookup"><span data-stu-id="85204-143">Because this information is now separated into manageable units, you can now create more powerful features.</span></span> <span data-ttu-id="85204-144">Par exemple, l’application peut étendre la fonctionnalité dans laquelle l’utilisateur appuie pour sélectionner un mot dans une fonctionnalité dans laquelle l’utilisateur appuie une fois pour sélectionner le mot, appuie deux fois pour sélectionner la ligne entière, et appuie trois fois pour sélectionner le paragraphe entier.</span><span class="sxs-lookup"><span data-stu-id="85204-144">As an example, the application can extend the feature in which the user taps to select a word into a feature in which the user taps once to select the word, taps twice to select the entire line, and taps three times to select the entire paragraph.</span></span> <span data-ttu-id="85204-145">En tirant parti de la structure arborescente retournée par l’opération d’analyse, l’application peut relier la zone taraudé à un trait dans l’arbre.</span><span class="sxs-lookup"><span data-stu-id="85204-145">By leveraging the tree structure returned by the analysis operation, the application can relate the tapped area back to a stroke in the tree.</span></span> <span data-ttu-id="85204-146">Une fois que l’application a trouvé un trait, elle peut remonter l’arborescence pour déterminer comment et quels traits voisins sélectionner.</span><span class="sxs-lookup"><span data-stu-id="85204-146">After the application finds a stroke, it can walk up the tree to determine how and which neighboring strokes to select.</span></span>

<span data-ttu-id="85204-147">La sélection d’une ligne entière est un exemple simpliste des avantages de l’analyse de l’encre, mais les possibilités deviennent intéressantes quand l’un d’eux prend en compte les différents types de structures hiérarchiques que l’analyseur d’encre peut détecter :</span><span class="sxs-lookup"><span data-stu-id="85204-147">Selecting an entire line is a simplistic example of the benefits of ink analysis, but the possibilities become great when one considers the different types of hierarchical structures the ink analyzer is capable of detecting:</span></span>

-   <span data-ttu-id="85204-148">Listes triées et non triées</span><span class="sxs-lookup"><span data-stu-id="85204-148">Ordered and unordered lists</span></span>
-   <span data-ttu-id="85204-149">Formes</span><span class="sxs-lookup"><span data-stu-id="85204-149">Shapes</span></span>
-   <span data-ttu-id="85204-150">Commentaires annotés écrits en ligne avec le texte</span><span class="sxs-lookup"><span data-stu-id="85204-150">Annotative comments written inline with the text</span></span>

<span data-ttu-id="85204-151">Les types de fonctionnalités varient d’une application à l’autres et sont basés sur les exigences et les moteurs d’analyse et de reconnaissance des encres disponibles.</span><span class="sxs-lookup"><span data-stu-id="85204-151">The types of features vary from application to application and are based on requirements and the available ink analysis and recognition engines.</span></span>

### <a name="key-ink-analysis-features"></a><span data-ttu-id="85204-152">Fonctionnalités d’analyse de l’encre de clé</span><span class="sxs-lookup"><span data-stu-id="85204-152">Key Ink Analysis Features</span></span>

<span data-ttu-id="85204-153">Les fonctionnalités clés de l’API InkAnalysis incluent les fonctionnalités suivantes :</span><span class="sxs-lookup"><span data-stu-id="85204-153">The key capabilities of the InkAnalysis API include the following features:</span></span>

-   <span data-ttu-id="85204-154">Analyse incrémentielle</span><span class="sxs-lookup"><span data-stu-id="85204-154">Incremental Analysis</span></span>
-   <span data-ttu-id="85204-155">Persistance</span><span class="sxs-lookup"><span data-stu-id="85204-155">Persistence</span></span>
-   <span data-ttu-id="85204-156">Proxy de données</span><span class="sxs-lookup"><span data-stu-id="85204-156">Data Proxy</span></span>
-   <span data-ttu-id="85204-157">Rapprochement</span><span class="sxs-lookup"><span data-stu-id="85204-157">Reconciliation</span></span>
-   <span data-ttu-id="85204-158">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="85204-158">Extensibility</span></span>

### <a name="incremental-analysis"></a><span data-ttu-id="85204-159">Analyse incrémentielle</span><span class="sxs-lookup"><span data-stu-id="85204-159">Incremental Analysis</span></span>

<span data-ttu-id="85204-160">Lorsque les utilisateurs finaux travaillent avec de l’encre, ils le considèrent généralement comme l’écriture manuscrite.</span><span class="sxs-lookup"><span data-stu-id="85204-160">When end users work with ink, they usually treat it like handwriting.</span></span> <span data-ttu-id="85204-161">L’encre est continuellement sujette à des opérations de modification telles que l’ajout de nouvelles encres, la suppression de l’encre existante et la modification des propriétés de l’encre, toutes effectuées de la même façon que l’écriture manuscrite est continuellement modifiée.</span><span class="sxs-lookup"><span data-stu-id="85204-161">The ink is continually subject to editing operations such as the addition of new ink, deletion of existing ink, and the modification of ink properties, all done in the same way that handwriting is continually edited.</span></span> <span data-ttu-id="85204-162">Ces opérations de modification affectent les résultats de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="85204-162">These editing operations affect the analysis results.</span></span> <span data-ttu-id="85204-163">Lorsque des modifications se produisent, elles peuvent généralement être isolées dans des sections du document à des moments précis dans le temps.</span><span class="sxs-lookup"><span data-stu-id="85204-163">When edits occur, they can usually be isolated to sections of the document at specific points in time.</span></span> <span data-ttu-id="85204-164">Par exemple, supposons qu’un utilisateur écrive cinq lignes d’encre.</span><span class="sxs-lookup"><span data-stu-id="85204-164">For example, assume a user writes five lines of ink.</span></span> <span data-ttu-id="85204-165">La méthode standard utilisée par les applications pour analyser l’encre est d’attendre que l’utilisateur ait fini d’écrire les cinq lignes d’encre, par exemple un paragraphe, puis d’analyser les résultats, de manière synchrone ou asynchrone.</span><span class="sxs-lookup"><span data-stu-id="85204-165">The standard way that applications analyze ink is to wait until the user has finished writing all five lines of ink—a paragraph, for instance—and then analyze the results, either synchronously or asynchronously.</span></span>

<span data-ttu-id="85204-166">Vous pouvez optimiser le temps total passé à analyser ces cinq lignes en isolant les zones qui sont analysées au fur et à mesure de leur écriture, puis en réanalysant uniquement les parties des résultats qui ont changé.</span><span class="sxs-lookup"><span data-stu-id="85204-166">You can optimize the overall time spent analyzing these five lines by isolating the areas that are analyzed as they are being written, and then reanalyzing only the parts of the results that have changed.</span></span> <span data-ttu-id="85204-167">Une fois la première ligne analysée, elle ne sera jamais reconnue à moins qu’elle ne soit modifiée par l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="85204-167">After the first line is analyzed, it will never be recognized again unless it is modified by the end user.</span></span> <span data-ttu-id="85204-168">La reconnaissance de la deuxième ligne est traitée comme une opération de reconnaissance indépendante.</span><span class="sxs-lookup"><span data-stu-id="85204-168">Recognition of the second line is treated as an independent recognition operation.</span></span>

<span data-ttu-id="85204-169">Cette approche incrémentielle fonctionne bien au niveau de la ligne pour les opérations de reconnaissance, mais elle doit fonctionner à un niveau plus élevé pour l’opération d’analyse de l’encre.</span><span class="sxs-lookup"><span data-stu-id="85204-169">This incremental approach works well at the line level for the recognition operations, but it needs to work at a higher level for the ink analysis operation.</span></span> <span data-ttu-id="85204-170">Étant donné que l’analyseur d’encre peut détecter différentes classifications de niveau supérieur pour ces cinq lignes d’encre (par exemple, il peut s’agir d’un paragraphe standard ou de cinq éléments dans une liste), l’approche incrémentielle de l’analyseur d’encre est qu’il doit analyser ces structures plus élevées.</span><span class="sxs-lookup"><span data-stu-id="85204-170">Because the ink analyzer can detect different higher level classifications for these five lines of ink (for example, it could be a standard paragraph or five items in a list), the incremental approach for the ink analyzer is that it has to analyze these higher structures.</span></span> <span data-ttu-id="85204-171">Autrement dit, une fois que l’analyseur d’encre classe la première ligne d’encre comme une ligne, il vérifie qu’il s’agit toujours d’une ligne lorsqu’il classe la deuxième ligne.</span><span class="sxs-lookup"><span data-stu-id="85204-171">That is to say, after the ink analyzer classifies the first line of ink as a line, it double-checks that it is still a line when it classifies the second line.</span></span> <span data-ttu-id="85204-172">Toutefois, l’analyseur d’encre isole cette double vérification du paragraphe et ignore le premier paragraphe lors de l’analyse d’un deuxième paragraphe, en traitant le deuxième paragraphe comme une opération d’analyseur d’encre indépendante.</span><span class="sxs-lookup"><span data-stu-id="85204-172">However, the ink analyzer isolates this double-checking to the paragraph and ignores the first paragraph when analyzing a second paragraph, treating the second paragraph as an independent ink analyzer operation.</span></span> <span data-ttu-id="85204-173">Cette approche incrémentielle de l’analyse économise considérablement le temps de traitement lorsque de grandes quantités d’encre existent déjà dans l’application.</span><span class="sxs-lookup"><span data-stu-id="85204-173">This incremental approach to analysis dramatically saves processing time when large amounts of ink already exist in the application.</span></span>

### <a name="persistence"></a><span data-ttu-id="85204-174">Persistance</span><span class="sxs-lookup"><span data-stu-id="85204-174">Persistence</span></span>

<span data-ttu-id="85204-175">L’analyse incrémentielle fonctionne bien au sein d’une session ou d’une instance donnée d’un objet [**InkAnalyzer**](inkanalyzer.md) .</span><span class="sxs-lookup"><span data-stu-id="85204-175">Incremental analysis works well within a given session or instance of an [**InkAnalyzer**](inkanalyzer.md) object.</span></span> <span data-ttu-id="85204-176">Toutefois, les API de la plateforme Tablet PC de première génération ne peuvent pas effectuer une analyse incrémentielle une fois que l’encre est conservée sur le disque.</span><span class="sxs-lookup"><span data-stu-id="85204-176">However, the first generation Tablet PC Platform APIs cannot perform incremental analysis after the ink is persisted to disk.</span></span> <span data-ttu-id="85204-177">L’API InkAnalysis permet d’enregistrer l’encre sur le disque avec une forme persistante des résultats de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="85204-177">The InkAnalysis API enables saving ink to disk along with a persisted form of the analysis results.</span></span> <span data-ttu-id="85204-178">Les résultats de l’analyse peuvent être chargés lorsque l’encre est chargée et peuvent être injectées dans une nouvelle instance d’un **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="85204-178">The analysis results can be loaded when the ink is loaded and can be injected into a new instance of an **InkAnalyzer**.</span></span> <span data-ttu-id="85204-179">Une nouvelle instance de l’objet **InkAnalyzer** a ensuite le même état de résultats qu’auparavant et peut désormais accepter toutes les modifications en tant que modifications incrémentielles apportées à l’état existant, au lieu d’analyser de nouveau tous les éléments.</span><span class="sxs-lookup"><span data-stu-id="85204-179">A new instance of the **InkAnalyzer** object then has the same results state it previously had and can now accept any modifications as incremental changes to the existing state, rather than analyzing everything again.</span></span>

### <a name="data-proxy"></a><span data-ttu-id="85204-180">Proxy de données</span><span class="sxs-lookup"><span data-stu-id="85204-180">Data Proxy</span></span>

<span data-ttu-id="85204-181">De nombreuses applications ont déjà une sorte de structure de document existante dans leurs applications. par exemple, un graphique ou une base de données.</span><span class="sxs-lookup"><span data-stu-id="85204-181">Many applications already have some sort of existing document structure in their applications; for instance, a graph or a database.</span></span> <span data-ttu-id="85204-182">Le [**InkAnalyzer**](inkanalyzer.md) présente également les résultats sous forme structurée, dans une arborescence d’objets [**ContextNode**](icontextnode.md) .</span><span class="sxs-lookup"><span data-stu-id="85204-182">The [**InkAnalyzer**](inkanalyzer.md) also presents results in a structured form, in a tree of [**ContextNode**](icontextnode.md) objects.</span></span> <span data-ttu-id="85204-183">La structure **InkAnalyzer** et la structure existante de l’application doivent interagir dans deux directions : les résultats sont extraits du **InkAnalyzer** dans l’application et l’État fait l’objet d’un push à partir de l’application dans le **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="85204-183">The **InkAnalyzer** structure and the application's existing structure need to interoperate in two directions: results are pulled from the **InkAnalyzer** into the application and state is pushed from the application into the **InkAnalyzer**.</span></span>

<span data-ttu-id="85204-184">Si vous extrayez les résultats de [**InkAnalyzer**](inkanalyzer.md) dans la structure de l’application, c’est tout ce qui était nécessaire, c’est relativement simple.</span><span class="sxs-lookup"><span data-stu-id="85204-184">If pulling the results from the [**InkAnalyzer**](inkanalyzer.md) into the application's structure were all that was needed, it would be relatively simple.</span></span> <span data-ttu-id="85204-185">Les applications parcourent l’arborescence des résultats et copient (intègrent) tous les éléments des résultats dont ils ont besoin dans leur structure de données existante.</span><span class="sxs-lookup"><span data-stu-id="85204-185">Applications would iterate through the results tree and copy (integrate) all pieces of the results they need into their existing data structure.</span></span> <span data-ttu-id="85204-186">Toutefois, étant donné que de nombreuses applications horizontales nécessitent une analyse incrémentielle et une persistance sur le disque, le problème devient bidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="85204-186">However, because many horizontal applications require incremental analysis and persistence to disk, the problem becomes two-directional.</span></span> <span data-ttu-id="85204-187">L’État (résultats passés) doit être extrait de la structure de l’application et envoyé dans le **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="85204-187">State (past results) needs to be pulled from the application's structure and pushed into the **InkAnalyzer**.</span></span>

<span data-ttu-id="85204-188">Pour répondre à cette exigence, [**InkAnalyzer**](inkanalyzer.md) contient une série d’événements qu’il déclenche au moment approprié pendant une opération d’analyse afin de permettre aux applications de renvoyer la requête de données à leurs structures existantes.</span><span class="sxs-lookup"><span data-stu-id="85204-188">To meet this requirement, the [**InkAnalyzer**](inkanalyzer.md) contains a series of events that it raises at the appropriate time during an analysis operation to allow applications to proxy the request for data back to their existing structures.</span></span> <span data-ttu-id="85204-189">Ces événements sont déclenchés uniquement pour les objets [**ContextNode**](icontextnode.md) requis par l’opération incrémentielle.</span><span class="sxs-lookup"><span data-stu-id="85204-189">These events are raised only for those [**ContextNode**](icontextnode.md) objects required by the incremental operation.</span></span>

### <a name="reconciliation"></a><span data-ttu-id="85204-190">Rapprochement</span><span class="sxs-lookup"><span data-stu-id="85204-190">Reconciliation</span></span>

<span data-ttu-id="85204-191">La plupart des applications souhaiteront analyser l’encre en arrière-plan pour limiter au minimum les interruptions de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="85204-191">Most applications will want to analyze the ink in the background to keep user interface interruptions to a minimum.</span></span> <span data-ttu-id="85204-192">L’analyse de l’encre en arrière-plan provoque des problèmes, toutefois, si l’utilisateur modifie l’encre (ou l’encre voisine) en cours d’analyse.</span><span class="sxs-lookup"><span data-stu-id="85204-192">Analyzing ink in the background causes problems, however, if the user changes the ink (or neighboring ink) that is being analyzed.</span></span> <span data-ttu-id="85204-193">Par exemple, si l’utilisateur supprime l’encre pendant l’opération d’arrière-plan, la structure résultante reflète l’état du document lorsque l’opération d’arrière-plan a démarré, plutôt qu’à la fin.</span><span class="sxs-lookup"><span data-stu-id="85204-193">For example, if the user deletes the ink during the background operation, the resulting structure would reflect the state of the document when the background operation started, rather than when it was completed.</span></span>

<span data-ttu-id="85204-194">Pour aider les applications, le [**InkAnalyzer**](inkanalyzer.md) rapproche les différences dans l’état du document entre le début et la fin de l’opération d’analyse.</span><span class="sxs-lookup"><span data-stu-id="85204-194">To assist applications, the [**InkAnalyzer**](inkanalyzer.md) reconciles the differences in document state between the beginning and end of the analysis operation.</span></span> <span data-ttu-id="85204-195">Les modifications apportées par l’utilisateur ou l’application pendant l’exécution de l’analyse en arrière-plan remplacent toujours les résultats calculés en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="85204-195">Changes made by the user or application while the analysis is running in the background always override the results calculated in the background.</span></span> <span data-ttu-id="85204-196">Après le rapprochement, seules les parties de la structure de résultats qui ne sont pas en conflit avec les modifications de document sont signalées, et les traits conflictuels sont marqués pour une analyse ultérieure.</span><span class="sxs-lookup"><span data-stu-id="85204-196">After reconciliation, only the parts of the results structure that do not conflict with document changes are reported, and the conflicting strokes are tagged for future analysis.</span></span> <span data-ttu-id="85204-197">Lors de la prochaine exécution de l’opération d’analyse en arrière-plan, les résultats sont recalculés en fonction du nouvel État.</span><span class="sxs-lookup"><span data-stu-id="85204-197">The next time the background analysis operation is run, the results are recalculated based on the new state.</span></span>

<span data-ttu-id="85204-198">Le diagramme suivant illustre ce processus.</span><span class="sxs-lookup"><span data-stu-id="85204-198">The following diagram shows this process.</span></span> <span data-ttu-id="85204-199">L’heure est exprimée de façon linéaire de haut en bas dans le diagramme.</span><span class="sxs-lookup"><span data-stu-id="85204-199">Time is expressed linearly from top to bottom in the diagram.</span></span>

![processus de rapprochement des modifications de l’état des documents lors de l’opération d’analyse](images/6323e0b5-b6b3-4adc-8c73-da3fad5b4bc2.jpg)

1.  <span data-ttu-id="85204-201">Au moment 1 (T1), l’application collecte de l’encre auprès de l’utilisateur final, y compris tout type de modification de l’encre, comme l’ajout, la suppression ou la modification.</span><span class="sxs-lookup"><span data-stu-id="85204-201">At time 1 (t1), the application is collecting ink from the end-user, including any kind of ink modification, such as adding, removing, or modifying.</span></span>
2.  <span data-ttu-id="85204-202">À T2, l’application appelle l’opération d’analyse en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="85204-202">At t2, the application invokes the background analysis operation.</span></span> <span data-ttu-id="85204-203">Le [**InkAnalyzer**](inkanalyzer.md) détermine l’encre qui n’a pas de résultats et l’encre qui doit être vérifiée.</span><span class="sxs-lookup"><span data-stu-id="85204-203">The [**InkAnalyzer**](inkanalyzer.md) determines what ink does not have results and what ink needs to be double-checked.</span></span> <span data-ttu-id="85204-204">Il copie les données d’encre nécessaires pour permettre l’exécution indépendante du thread d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="85204-204">It copies the needed ink data to allow the background thread to execute independently.</span></span>
3.  <span data-ttu-id="85204-205">À T3, [**InkAnalyzer**](inkanalyzer.md) retourne l’exécution du thread d’interface utilisateur à l’application.</span><span class="sxs-lookup"><span data-stu-id="85204-205">At t3, the [**InkAnalyzer**](inkanalyzer.md) returns the user interface thread execution to the application.</span></span> <span data-ttu-id="85204-206">Le **InkAnalyzer** crée un deuxième thread, le thread d’analyse en arrière-plan, et les moteurs d’analyse et de reconnaissance des entrées manuscrites analysent les données d’encre copiées.</span><span class="sxs-lookup"><span data-stu-id="85204-206">The **InkAnalyzer** creates a second thread, the background analysis thread, and the ink analysis and recognition engines analyze the copied ink data.</span></span>
4.  <span data-ttu-id="85204-207">Pendant que l’opération d’analyse se produit sur le deuxième thread d’arrière-plan, l’utilisateur final continue à modifier le document, en ajoutant et en supprimant les données de trait, aux T4 et T5.</span><span class="sxs-lookup"><span data-stu-id="85204-207">While the analysis operation is occurring on the second background thread, the end user continues to edit the document, adding and removing stroke data, at t4 and t5.</span></span> <span data-ttu-id="85204-208">Ces modifications peuvent être en conflit avec le travail en cours de traitement en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="85204-208">These edits can conflict with the work that is being process in the background.</span></span>
5.  <span data-ttu-id="85204-209">Sur T6, le thread d’arrière-plan a terminé l’opération d’analyse et les résultats sont prêts.</span><span class="sxs-lookup"><span data-stu-id="85204-209">At t6, the background thread has finished the analysis operation, and results are ready.</span></span> <span data-ttu-id="85204-210">Avant que le [**InkAnalyzer**](inkanalyzer.md) ne communique les résultats à l’application, il exécute un algorithme de réconciliation pour déterminer si les modifications apportées par l’utilisateur lors du calcul de l’opération d’analyse (T4 et T5) sont en conflit avec les résultats.</span><span class="sxs-lookup"><span data-stu-id="85204-210">Before the [**InkAnalyzer**](inkanalyzer.md) communicates the results to the application, it runs a reconciliation algorithm to determine if the user edits made while the analysis operation was being calculated (t4 and t5) conflict with the results.</span></span> <span data-ttu-id="85204-211">Si des collisions sont détectées, les traits conflictuels sont signalés pour une nouvelle analyse, qui se produit la prochaine fois que l’application appelle l’opération d’analyse en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="85204-211">If any collisions are detected, the colliding strokes are flagged for re-analysis, which occurs the next time the application invokes the background analysis operation.</span></span>
6.  <span data-ttu-id="85204-212">Enfin, sur T7, avec toutes les collisions détectées, le [**InkAnalyzer**](inkanalyzer.md) présente les résultats à l’application.</span><span class="sxs-lookup"><span data-stu-id="85204-212">Finally, at t7, with all the collisions detected, the [**InkAnalyzer**](inkanalyzer.md) presents the results to the application.</span></span>

### <a name="extensibility"></a><span data-ttu-id="85204-213">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="85204-213">Extensibility</span></span>

<span data-ttu-id="85204-214">Les API InkAnalysis permettent l’utilisation de nouveaux types de moteurs d’analyse par les applications, de manière à empêcher l’application d’avoir à réécrire tous les avantages de l’API InkAnalysis, y compris la réconciliation, le proxy de données, la persistance et l’analyse incrémentielle.</span><span class="sxs-lookup"><span data-stu-id="85204-214">The InkAnalysis APIs allow new types of analysis engines to be used by applications, in such a way as to prevent the application from having to rewrite all of the benefits of the InkAnalysis API, including reconciliation, data proxy, persistence, and incremental analysis.</span></span>

## <a name="related-topics"></a><span data-ttu-id="85204-215">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="85204-215">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="85204-216">[Microsoft. Ink](/previous-versions/dotnet/netframework-3.5/ms581553(v=vs.90))</span><span class="sxs-lookup"><span data-stu-id="85204-216">[Microsoft.Ink](/previous-versions/dotnet/netframework-3.5/ms581553(v=vs.90))</span></span>
</dt> <dt>

[<span data-ttu-id="85204-217">Référence de l’analyse de l’encre</span><span class="sxs-lookup"><span data-stu-id="85204-217">Ink Analysis Reference</span></span>](ink-analysis-reference.md)
</dt> </dl>

 

 
