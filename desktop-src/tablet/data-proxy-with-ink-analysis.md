---
description: Comme mentionné dans vue d’ensemble de l’analyse de l’encre, la technologie d’analyse des encres gère en interne un modèle de document basé sur les arborescences pour contenir les résultats d’analyse et les relations.
ms.assetid: 33ba9292-3bc7-41ba-a602-e2fc94cd3a57
title: Proxy de données avec analyse de l’encre
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52717b955625e67f50c20703dd0e84449aa1037f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103868298"
---
# <a name="data-proxy-with-ink-analysis"></a><span data-ttu-id="e3e3e-103">Proxy de données avec analyse de l’encre</span><span class="sxs-lookup"><span data-stu-id="e3e3e-103">Data Proxy with Ink Analysis</span></span>

<span data-ttu-id="e3e3e-104">Comme mentionné dans [vue d’ensemble](ink-analysis-overview.md)de l’analyse de l’encre, la technologie d’analyse des encres gère en interne un modèle de document basé sur les arborescences pour contenir les résultats d’analyse et les relations.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-104">As mentioned in [Ink Analysis Overview](ink-analysis-overview.md), the ink analysis technology internally maintains a tree-based document model to contain analysis results and relationships.</span></span> <span data-ttu-id="e3e3e-105">Si votre application a déjà un magasin de documents établi différent, vous devrez utiliser les fonctionnalités d’analyse de l’encre conçues pour effectuer un proxy de données entre différents modèles de document.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-105">If your application already has an established document store that is different, you will need to make use of the ink analysis features designed to proxy data between disparate document models.</span></span>

## <a name="types-of-data-proxy"></a><span data-ttu-id="e3e3e-106">Types de proxy de données</span><span class="sxs-lookup"><span data-stu-id="e3e3e-106">Types of Data Proxy</span></span>

<span data-ttu-id="e3e3e-107">Les fonctionnalités de proxy de données permettent à votre application d’effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="e3e3e-107">The data proxy features enable your application to:</span></span>

-   <span data-ttu-id="e3e3e-108">Intégrer les données de résultats d’analyse dans un modèle de document existant.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-108">Integrate analysis results data back into an existing document model.</span></span>
-   <span data-ttu-id="e3e3e-109">Communiquez les résultats précédents (ou l’État) dans le [**InkAnalyzer**](inkanalyzer.md).</span><span class="sxs-lookup"><span data-stu-id="e3e3e-109">Communicate previous results (or state) back into the [**InkAnalyzer**](inkanalyzer.md).</span></span>
-   <span data-ttu-id="e3e3e-110">Communiquer l’état de non-encre dans le [**InkAnalyzer**](inkanalyzer.md).</span><span class="sxs-lookup"><span data-stu-id="e3e3e-110">Communicate non-ink state into the [**InkAnalyzer**](inkanalyzer.md).</span></span>
-   <span data-ttu-id="e3e3e-111">Communiquez uniquement l’ensemble minimal de données (à la fois l’état précédent et non-Ink) nécessaire pour terminer l’opération d’analyse.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-111">Communicate only the minimum set of data (both previous and non-ink state) needed to complete the analysis operation.</span></span>
-   <span data-ttu-id="e3e3e-112">Mettez facilement à jour le modèle de document d’application interne avec les résultats d’analyse.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-112">Easily update the internal application document model with analysis results.</span></span>

<span data-ttu-id="e3e3e-113">Il existe deux approches de base pour le proxy de données d’analyse d’encre.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-113">There are two basic approaches to ink analysis data proxy.</span></span> <span data-ttu-id="e3e3e-114">Les différences définissent les détails du moment et de la façon dont la synchronisation entre les modèles de document se produit.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-114">The differences lay in the details of when and how the synchronization between the document models occurs.</span></span> <span data-ttu-id="e3e3e-115">La première approche, mise à jour synchrone, requiert la modification du modèle de document d’analyse d’encre au fur et à mesure que des modifications se produisent dans le document de l’application.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-115">The first approach, synchronous update, requires the modification of the ink analysis document model as changes occur in the application document.</span></span> <span data-ttu-id="e3e3e-116">La deuxième approche, mise à jour à la demande, requiert uniquement les données affectées par les modifications apportées au modèle de document de l’application à passer au [**InkAnalyzer**](inkanalyzer.md).</span><span class="sxs-lookup"><span data-stu-id="e3e3e-116">The second approach, on-demand update, requires only the data affected by changes to the application document model to be passed to the [**InkAnalyzer**](inkanalyzer.md).</span></span> <span data-ttu-id="e3e3e-117">Autrement dit, seules les données des parties du modèle de document d’analyse d’encre qui se trouvent dans la même zone que les modifications apportées au document de l’application doivent être passées au **InkAnalyzer** comme il en a besoin.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-117">That is, only the data for the parts of the Ink Analysis document model that are in the same area as modifications to the application document need be passed to the **InkAnalyzer** as it needs them.</span></span>

### <a name="synchronous-update"></a><span data-ttu-id="e3e3e-118">Mise à jour synchrone</span><span class="sxs-lookup"><span data-stu-id="e3e3e-118">Synchronous Update</span></span>

<span data-ttu-id="e3e3e-119">L’approche de mise à jour synchrone requiert la modification (création et suppression) des nœuds dans la collection d’objets [**ContextNode**](icontextnode.md) de l’objet [**InkAnalyzer**](inkanalyzer.md) à mesure qu’ils se produisent dans le document de l’application.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-119">The synchronous update approach requires the modification (creation and deletion) of nodes in the [**InkAnalyzer**](inkanalyzer.md) object's collection of [**ContextNode**](icontextnode.md) objects as they occur in the application document.</span></span> <span data-ttu-id="e3e3e-120">Par exemple, chaque fois qu’un mot de texte est ajouté à l’application, un **ContextNode** de type **TextWord** correspondant est créé dans le **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-120">For example, each time a text word is added to the application, a corresponding **TextWord** styled **ContextNode** is created in the **InkAnalyzer**.</span></span> <span data-ttu-id="e3e3e-121">Si l’emplacement du texte dans la page change, l’emplacement du **ContextNode** correspondant est mis à jour en même temps.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-121">If the location of the text word on the page changes, then the location of the corresponding **ContextNode** is updated at the same time.</span></span> <span data-ttu-id="e3e3e-122">Cette méthode est moins efficace en termes de ressources de calcul que la méthode à la demande, car chaque modification de document implique une mise à jour du **InkAnalyzer**, même si la modification n’affecte pas l’encre en cours d’analyse.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-122">This method is less efficient in terms of computing resources than the on-demand method because every document change involves an update to the **InkAnalyzer**, even if the change does not affect the ink being analyzed.</span></span>

<span data-ttu-id="e3e3e-123">L’exemple suivant est destiné à illustrer le fonctionnement de la mise à jour synchrone.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-123">The following example is meant to show how synchronous update works.</span></span> <span data-ttu-id="e3e3e-124">Imaginez une application qui a un modèle de document existant.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-124">Imagine an application that has an existing document model.</span></span> <span data-ttu-id="e3e3e-125">Lorsque l’utilisateur final apporte une modification au document, telle que l’ajout d’un nouveau texte, la modification est traitée comme suit :</span><span class="sxs-lookup"><span data-stu-id="e3e3e-125">When the end-user makes a change to the document, such as adding new text, the change is processed as follows:</span></span>

1.  <span data-ttu-id="e3e3e-126">L’utilisateur final crée les nouvelles données.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-126">The end user creates the new data.</span></span>
2.  <span data-ttu-id="e3e3e-127">L’application détermine la façon de traiter les données, de les stocker et de les restituer.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-127">The application determines how to process the data, stores it, and renders it.</span></span>
3.  <span data-ttu-id="e3e3e-128">Pour des raisons pratiques, les étapes suivantes se produisent simultanément.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-128">For practical purposes, the following steps take place simultaneously.</span></span>
    1.  <span data-ttu-id="e3e3e-129">L’application place les données dans son modèle de document.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-129">The application places the data into its document model.</span></span>
    2.  <span data-ttu-id="e3e3e-130">L’application crée un [**InkAnalyzer**](inkanalyzer.md) et le met à jour.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-130">The application creates an [**InkAnalyzer**](inkanalyzer.md) and updates it.</span></span> <span data-ttu-id="e3e3e-131">Cela permet de s’assurer que le **InkAnalyzer** dispose toujours des informations les plus récentes.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-131">Doing this simultaneously assures that the **InkAnalyzer** always has the most recent information.</span></span>
    3.  <span data-ttu-id="e3e3e-132">L’application appelle [**BackgroundAnalyze**](iinkanalyzer-backgroundanalyze.md) sur [**InkAnalyzer**](inkanalyzer.md) pour commencer l’analyse.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-132">The application calls [**BackgroundAnalyze**](iinkanalyzer-backgroundanalyze.md) on the [**InkAnalyzer**](inkanalyzer.md) to begin analysis.</span></span>
4.  <span data-ttu-id="e3e3e-133">Une série d’événements est déclenchée si la modification implique une entrée manuscrite et que le [**InkAnalyzer**](inkanalyzer.md) détermine de nouveaux résultats.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-133">A series of events is fired if the change involves ink and the [**InkAnalyzer**](inkanalyzer.md) determines new results.</span></span> <span data-ttu-id="e3e3e-134">Un événement est déclenché pour chaque modification apportée à la collection d’objets [**ContextNode**](icontextnode.md) dans le **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-134">One event is fired for each change made to the collection of [**ContextNode**](icontextnode.md) objects in the **InkAnalyzer**.</span></span> <span data-ttu-id="e3e3e-135">Ces événements sont les suivants : [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md), [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md), [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md), [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md), [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md), [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md)et [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md).</span><span class="sxs-lookup"><span data-stu-id="e3e3e-135">These events include [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md), [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md), [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md), [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md), [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md), [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md), and [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md).</span></span> <span data-ttu-id="e3e3e-136">L’application gère ces événements pour replacer les résultats de l’opération d’analyse dans le modèle de document, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-136">The application handles these events to proxy the results of the analysis operation back into the document model as appropriate.</span></span>
5.  <span data-ttu-id="e3e3e-137">L’application met à jour la disposition du document, en extrayant les nouvelles données du modèle de document.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-137">The application updates the layout of the document, pulling the new data from the document model.</span></span>
6.  <span data-ttu-id="e3e3e-138">Les nouvelles données sont restituées à l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-138">The new data is rendered back to the end user.</span></span>

### <a name="on-demand-update"></a><span data-ttu-id="e3e3e-139">Mise à jour à la demande</span><span class="sxs-lookup"><span data-stu-id="e3e3e-139">On-Demand Update</span></span>

<span data-ttu-id="e3e3e-140">L’approche à la demande nécessite uniquement que les données soient transmises pour les objets [**ContextNode**](icontextnode.md) qui sont dans les zones en cours d’analyse.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-140">The on-demand approach only requires the data to be passed for those [**ContextNode**](icontextnode.md) objects that are in the areas that are being analyzed.</span></span> <span data-ttu-id="e3e3e-141">Les objets **ContextNode** nécessaires sont extraits du modèle de document de l’application juste après l’appel de l’opération d’analyse, et à nouveau juste avant de rapprocher les résultats.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-141">The needed **ContextNode** objects are extracted from the application's document model just after the analysis operation is invoked, and again just prior to reconciling the results.</span></span> <span data-ttu-id="e3e3e-142">Bien qu’elles soient plus compliquées à implémenter que les mises à jour synchrones, cette approche permet d’obtenir de meilleurs résultats en matière de performances.</span><span class="sxs-lookup"><span data-stu-id="e3e3e-142">While more complicated to implement than synchronous updates, this approach yields better performance results.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e3e3e-143">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="e3e3e-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e3e3e-144">Présentation de l’analyse de l’encre</span><span class="sxs-lookup"><span data-stu-id="e3e3e-144">Ink Analysis Overview</span></span>](ink-analysis-overview.md)
</dt> <dt>

[<span data-ttu-id="e3e3e-145">**InkAnalyzer, classe (C++)**</span><span class="sxs-lookup"><span data-stu-id="e3e3e-145">**InkAnalyzer Class (C++)**</span></span>](inkanalyzer.md)
</dt> <dt>

<span data-ttu-id="e3e3e-146">[**Microsoft. Ink. InkAnalyzer**](/previous-versions/ms583671(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="e3e3e-146">[**Microsoft.Ink.InkAnalyzer**](/previous-versions/ms583671(v=vs.100))</span></span>
</dt> <dt>

<span data-ttu-id="e3e3e-147">[**Microsoft. Ink. ContextNode**](/previous-versions/ms551996(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="e3e3e-147">[**Microsoft.Ink.ContextNode**](/previous-versions/ms551996(v=vs.100))</span></span>
</dt> </dl>

 

 
