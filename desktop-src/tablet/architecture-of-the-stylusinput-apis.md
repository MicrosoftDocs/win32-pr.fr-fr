---
description: Les API StylusInput vous permettent d’interagir avec le flux de données de stylet de tablette. Pour interagir avec le flux de données, ajoutez un objet RealTimeStylus à votre application, puis ajoutez des plug-ins à l’objet RealTimeStylus.
ms.assetid: 88bab0ab-df9f-4813-9a9f-9a137813f0b4
title: Architecture des API StylusInput
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: eeda6a6a0269e8306aed6a6b6de4c1bbe33bc46f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104115782"
---
# <a name="architecture-of-the-stylusinput-apis"></a><span data-ttu-id="78f0d-104">Architecture des API StylusInput</span><span class="sxs-lookup"><span data-stu-id="78f0d-104">Architecture of the StylusInput APIs</span></span>

<span data-ttu-id="78f0d-105">Les API StylusInput vous permettent d’interagir avec le flux de données de stylet de tablette.</span><span class="sxs-lookup"><span data-stu-id="78f0d-105">The StylusInput APIs allow you to interact with the tablet pen data stream.</span></span> <span data-ttu-id="78f0d-106">Pour interagir avec le flux de données, ajoutez un objet [**RealTimeStylus**](realtimestylus-class.md) à votre application, puis ajoutez des plug-ins à l’objet **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="78f0d-106">To interact with the data stream add a [**RealTimeStylus**](realtimestylus-class.md) object to your application, and add plug-ins to the **RealTimeStylus** object.</span></span>

<span data-ttu-id="78f0d-107">Deux plug-ins sont fournis dans les API StylusInput.</span><span class="sxs-lookup"><span data-stu-id="78f0d-107">Two plug-ins are provided in the StylusInput APIs.</span></span> <span data-ttu-id="78f0d-108">L’objet [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) implémente l’interface [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-108">The [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object implements the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) interface.</span></span> <span data-ttu-id="78f0d-109">L’objet **DynamicRenderer** restitue l’encre en temps réel, lors de son dessin.</span><span class="sxs-lookup"><span data-stu-id="78f0d-109">The **DynamicRenderer** object renders the ink in real time, as it is being drawn.</span></span> <span data-ttu-id="78f0d-110">L’objet [**GestureRecognizer**](gesturerecognizer-class.md) implémente les interfaces **IStylusSyncPlugin** et [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-110">The [**GestureRecognizer**](gesturerecognizer-class.md) object implements the **IStylusSyncPlugin** and [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interfaces.</span></span> <span data-ttu-id="78f0d-111">L’objet **GestureRecognizer** reconnaît les gestes d’application.</span><span class="sxs-lookup"><span data-stu-id="78f0d-111">The **GestureRecognizer** object recognizes application gestures.</span></span>

## <a name="definitions"></a><span data-ttu-id="78f0d-112">Définitions</span><span class="sxs-lookup"><span data-stu-id="78f0d-112">Definitions</span></span>

<span data-ttu-id="78f0d-113">Les termes suivants sont utilisés dans les sections décrivant les API StylusInput :</span><span class="sxs-lookup"><span data-stu-id="78f0d-113">The following terms are used in the sections describing the StylusInput APIs:</span></span>

<span data-ttu-id="78f0d-114">Plug-in synchrone</span><span class="sxs-lookup"><span data-stu-id="78f0d-114">Synchronous plug-in</span></span>

<span data-ttu-id="78f0d-115">Classe qui implémente l’interface [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-115">A class that implements the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) interface.</span></span> <span data-ttu-id="78f0d-116">Les plug-ins synchrones sont généralement appelés directement par l’objet [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-116">Synchronous plug-ins are generally called directly by the [**RealTimeStylus**](realtimestylus-class.md) object.</span></span>

<span data-ttu-id="78f0d-117">Plug-in asynchrone</span><span class="sxs-lookup"><span data-stu-id="78f0d-117">Asynchronous plug-in</span></span>

<span data-ttu-id="78f0d-118">Classe qui implémente l’interface [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-118">A class that implements the [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interface.</span></span> <span data-ttu-id="78f0d-119">Les plug-ins asynchrones sont généralement appelés sur le thread d’interface utilisateur de l’application.</span><span class="sxs-lookup"><span data-stu-id="78f0d-119">Asynchronous plug-ins are generally called on the application's user interface (UI) thread.</span></span>

<span data-ttu-id="78f0d-120">Collection de plug-ins synchrone</span><span class="sxs-lookup"><span data-stu-id="78f0d-120">Synchronous plug-in collection</span></span>

<span data-ttu-id="78f0d-121">Collection [StylusSyncPluginCollection](/previous-versions/ms824788(v=msdn.10)) , qui est une collection ordonnée d’objets [IStylusSyncPlugin](/previous-versions/ms824751(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-121">A [StylusSyncPluginCollection](/previous-versions/ms824788(v=msdn.10)) collection, which is an ordered collection of [IStylusSyncPlugin](/previous-versions/ms824751(v=msdn.10)) objects.</span></span> <span data-ttu-id="78f0d-122">Une collection de plug-ins synchrone fait généralement référence à la collection assignée à la propriété [SyncPluginCollection](/previous-versions/ms824833(v=msdn.10)) d’un objet [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-122">A synchronous plug-in collection usually refers to the collection assigned to the [SyncPluginCollection](/previous-versions/ms824833(v=msdn.10)) property of a [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) object.</span></span> <span data-ttu-id="78f0d-123">Seuls les plug-ins synchrones peuvent être ajoutés à une collection de plug-ins synchrone.</span><span class="sxs-lookup"><span data-stu-id="78f0d-123">Only synchronous plug-ins may be added to a synchronous plug-in collection.</span></span>

<span data-ttu-id="78f0d-124">Collection de plug-ins asynchrone</span><span class="sxs-lookup"><span data-stu-id="78f0d-124">Asynchronous plug-in collection</span></span>

<span data-ttu-id="78f0d-125">Collection [StylusAsyncPluginCollection](/previous-versions/ms824808(v=msdn.10)) , qui est une collection ordonnée d’objets [IStylusAsyncPlugin](/previous-versions/ms824768(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-125">A [StylusAsyncPluginCollection](/previous-versions/ms824808(v=msdn.10)) collection, which is an ordered collection of [IStylusAsyncPlugin](/previous-versions/ms824768(v=msdn.10)) objects.</span></span> <span data-ttu-id="78f0d-126">Une collection de plug-ins asynchrone fait généralement référence à la collection assignée à la propriété [AsyncPluginCollection](/previous-versions/ms824831(v=msdn.10)) d’un objet [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-126">An asynchronous plug-in collection usually refers to the collection assigned to the [AsyncPluginCollection](/previous-versions/ms824831(v=msdn.10)) property of a [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) object.</span></span> <span data-ttu-id="78f0d-127">Seuls les plug-ins asynchrones peuvent être ajoutés à une collection de plug-ins asynchrone.</span><span class="sxs-lookup"><span data-stu-id="78f0d-127">Only asynchronous plug-ins may be added to an asynchronous plug-in collection.</span></span>

## <a name="synchronous-and-asynchronous-plug-ins"></a><span data-ttu-id="78f0d-128">Plug-ins synchrones et asynchrones</span><span class="sxs-lookup"><span data-stu-id="78f0d-128">Synchronous and Asynchronous Plug-ins</span></span>

<span data-ttu-id="78f0d-129">L’objet [**RealTimeStylus**](realtimestylus-class.md) est conçu pour fournir un accès en temps réel au flux de données à partir d’un stylet.</span><span class="sxs-lookup"><span data-stu-id="78f0d-129">The [**RealTimeStylus**](realtimestylus-class.md) object is designed to provide real-time access to the data stream from a tablet pen.</span></span> <span data-ttu-id="78f0d-130">Créez ou utilisez des plug-ins synchrones pour les tâches qui nécessitent un accès en temps réel au flux de données et qui font l’objet d’une indemande de calcul, comme pour le filtrage de paquets.</span><span class="sxs-lookup"><span data-stu-id="78f0d-130">Create or use synchronous plug-ins for tasks that require real-time access to the data stream and are computationally undemanding, such as for packet filtering.</span></span> <span data-ttu-id="78f0d-131">Créez ou utilisez des plug-ins asynchrones pour les tâches qui ne nécessitent pas d’accès en temps réel au flux de données, par exemple pour créer et stocker des traits dans un objet [**InkDisp**](inkdisp-class.md) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-131">Create or use asynchronous plug-ins for tasks that do not require real-time access to the data stream, such as for creating and storing strokes in an [**InkDisp**](inkdisp-class.md) object.</span></span>

<span data-ttu-id="78f0d-132">Certaines tâches peuvent nécessiter un calcul exigeant un accès en temps réel au flux de données, par exemple la reconnaissance de mouvement à multitrait.</span><span class="sxs-lookup"><span data-stu-id="78f0d-132">Certain tasks may be computationally demanding yet require real-time access to the data stream, such as multistroke gesture recognition.</span></span> <span data-ttu-id="78f0d-133">Pour répondre à ces besoins, les API StylusInput fournissent un modèle [**RealTimeStylus**](realtimestylus-class.md) monté en cascade qui vous permet d’utiliser deux objets **RealTimeStylus** , chacun s’exécutant sur son propre thread.</span><span class="sxs-lookup"><span data-stu-id="78f0d-133">To address these needs, the StylusInput APIs provide a cascaded [**RealTimeStylus**](realtimestylus-class.md) model that allows you to use two **RealTimeStylus** objects, each running on its own thread.</span></span> <span data-ttu-id="78f0d-134">Pour plus d’informations sur le modèle **RealTimeStylus** monté en cascade, consultez [le modèle RealTimeStylus monté en cascade](the-cascaded-realtimestylus-model.md).</span><span class="sxs-lookup"><span data-stu-id="78f0d-134">For more information about the cascaded **RealTimeStylus** model, see [The Cascaded RealTimeStylus Model](the-cascaded-realtimestylus-model.md).</span></span>

<span data-ttu-id="78f0d-135">Pour plus d’informations sur l’utilisation et la création de plug-ins, consultez [utilisation des API StylusInput](working-with-the-stylusinput-apis.md).</span><span class="sxs-lookup"><span data-stu-id="78f0d-135">For more information about using and creating plug-ins, see [Working with the StylusInput APIs](working-with-the-stylusinput-apis.md).</span></span>

## <a name="the-tablet-pen-data-stream"></a><span data-ttu-id="78f0d-136">Flux de données du stylet de tablette</span><span class="sxs-lookup"><span data-stu-id="78f0d-136">The Tablet Pen Data Stream</span></span>

<span data-ttu-id="78f0d-137">L’objet [**RealTimeStylus**](realtimestylus-class.md) possède deux files d’attente internes qui contiennent les données du stylet de tablette, la file d’attente d’entrée et la file d’attente de sortie.</span><span class="sxs-lookup"><span data-stu-id="78f0d-137">The [**RealTimeStylus**](realtimestylus-class.md) object has two internal queues that carry the tablet pen data, the input queue and the output queue.</span></span> <span data-ttu-id="78f0d-138">Les données de stylet sont converties en instances des classes de l’espace de noms [Microsoft. StylusInput. PluginData](/previous-versions/ms823992(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-138">The pen data is converted into instances of the classes in the [Microsoft.StylusInput.PluginData](/previous-versions/ms823992(v=msdn.10)) namespace.</span></span> <span data-ttu-id="78f0d-139">La liste suivante décrit comment l’objet **RealTimeStylus** gère les données du stylet de tablette :</span><span class="sxs-lookup"><span data-stu-id="78f0d-139">The following list describes how the **RealTimeStylus** object handles the tablet pen data:</span></span>

<span data-ttu-id="78f0d-140">L’objet [**RealTimeStylus**](realtimestylus-class.md) recherche d’abord les objets de données de plug-in dans sa file d’attente d’entrée, puis à partir du flux de données de stylet de tablette.</span><span class="sxs-lookup"><span data-stu-id="78f0d-140">The [**RealTimeStylus**](realtimestylus-class.md) object checks for plug-in data objects first on its input queue and then from the tablet pen data stream.</span></span>

<span data-ttu-id="78f0d-141">L’objet [**RealTimeStylus**](realtimestylus-class.md) envoie un objet de données de plug-in aux objets dans sa collection de plug-ins synchrone.</span><span class="sxs-lookup"><span data-stu-id="78f0d-141">The [**RealTimeStylus**](realtimestylus-class.md) object sends one plug-in data object to the objects in its synchronous plug-in collection.</span></span> <span data-ttu-id="78f0d-142">Chaque plug-in synchrone peut ajouter des données à la file d’attente d’entrée ou de sortie.</span><span class="sxs-lookup"><span data-stu-id="78f0d-142">Each synchronous plug-in can add data to either the input or output queue.</span></span>

<span data-ttu-id="78f0d-143">Une fois que l’objet de données de plug-in a été envoyé à tous les membres de la collection de plug-ins synchrone, l’objet de données de plug-in est placé dans la file d’attente de sortie de l’objet [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-143">After the plug-in data object has been sent to all members of the synchronous plug-in collection, the plug-in data object is placed on the [**RealTimeStylus**](realtimestylus-class.md) object's output queue.</span></span>

<span data-ttu-id="78f0d-144">L’objet [**RealTimeStylus**](realtimestylus-class.md) recherche ensuite l’objet de données de plug-in suivant à traiter.</span><span class="sxs-lookup"><span data-stu-id="78f0d-144">The [**RealTimeStylus**](realtimestylus-class.md) object then checks for the next plug-in data object to process.</span></span>

<span data-ttu-id="78f0d-145">Alors que la file d’attente de sortie de l’objet [**RealTimeStylus**](realtimestylus-class.md) contient des données, l’objet **RealTimeStylus** envoie un objet de données de plug-in à partir de sa file d’attente de sortie aux objets de sa collection de plug-ins asynchrone.</span><span class="sxs-lookup"><span data-stu-id="78f0d-145">While the [**RealTimeStylus**](realtimestylus-class.md) object's output queue contains data, the **RealTimeStylus** object sends one plug-in data object from its output queue to the objects in its asynchronous plug-in collection.</span></span> <span data-ttu-id="78f0d-146">Chaque plug-in asynchrone peut ajouter des données à la file d’attente d’entrée ou de sortie.</span><span class="sxs-lookup"><span data-stu-id="78f0d-146">Each asynchronous plug-in can add data to either the input or output queue.</span></span> <span data-ttu-id="78f0d-147">Toutefois, étant donné que les plug-ins asynchrones s’exécutent sur le thread d’interface utilisateur, les données sont ajoutées à la file d’attente par rapport aux données de stylet actuelles que l’objet **RealTimeStylus** traite, et non par rapport aux données traitées par le plug-in asynchrone.</span><span class="sxs-lookup"><span data-stu-id="78f0d-147">However, because the asynchronous plug-ins run on the UI thread, the data is added to the queue in relation to the current pen data the **RealTimeStylus** object is processing, and not in relation to the data that the asynchronous plug-in is processing.</span></span>

<span data-ttu-id="78f0d-148">Le diagramme suivant illustre le déroulement des données du stylet de tablette par le biais de l’objet [**RealTimeStylus**](realtimestylus-class.md) et de ses collections de plug-ins.</span><span class="sxs-lookup"><span data-stu-id="78f0d-148">The following diagram illustrates the flow of tablet pen data through the [**RealTimeStylus**](realtimestylus-class.md) object and its plug-in collections.</span></span>

![Flow des données du stylet de tablette via l’objet RealTimeStylus et ses collections de plug-in](images/5a698bc9-833b-4b24-9fa2-70be0ca61032.gif)

<span data-ttu-id="78f0d-150">Dans ce diagramme, les cercles étiquetés « A » et « B » représentent des données de stylet de tablette qui ont déjà été ajoutées à la file d’attente de sortie de l’objet [**RealTimeStylus**](realtimestylus-class.md) et qui n’ont pas encore été envoyées à la collection de plug-ins asynchrone.</span><span class="sxs-lookup"><span data-stu-id="78f0d-150">In this diagram, the circles labeled "A" and "B" represent tablet pen data that has already been added to the [**RealTimeStylus**](realtimestylus-class.md) object's output queue and that has not yet been sent to the asynchronous plug-in collection.</span></span> <span data-ttu-id="78f0d-151">Le cercle intitulé « C » représente les données du stylet de tablette que l’objet **RealTimeStylus** est en train de traiter.</span><span class="sxs-lookup"><span data-stu-id="78f0d-151">The circle labeled "C" represents the tablet pen data that the **RealTimeStylus** object is currently processing.</span></span> <span data-ttu-id="78f0d-152">Il est envoyé à la collection de plug-ins synchrone et placé dans la file d’attente de sortie.</span><span class="sxs-lookup"><span data-stu-id="78f0d-152">It is sent to the synchronous plug-in collection and placed on the output queue.</span></span> <span data-ttu-id="78f0d-153">Le cercle vide représente la position dans la file d’attente de sortie où les futures données de stylet du Tablet PC sont ajoutées.</span><span class="sxs-lookup"><span data-stu-id="78f0d-153">The empty circle represents the position in the output queue where future tablet pen data is added.</span></span>

<span data-ttu-id="78f0d-154">Pour plus d’informations sur la façon dont des données spécifiques sont ajoutées à la file d’attente et traitées, consultez [données de plug-in et classe RealTimeStylus](plug-in-data-and-the-realtimestylus-class.md).</span><span class="sxs-lookup"><span data-stu-id="78f0d-154">For more information about how specific data is added to the queue and processed, see [Plug-in Data and the RealTimeStylus Class](plug-in-data-and-the-realtimestylus-class.md).</span></span>

## <a name="the-stylusinput-apis"></a><span data-ttu-id="78f0d-155">API StylusInput</span><span class="sxs-lookup"><span data-stu-id="78f0d-155">The StylusInput APIs</span></span>

<span data-ttu-id="78f0d-156">Les API StylusInput résident principalement dans les espaces de noms [Microsoft. StylusInput](/previous-versions/ms824750(v=msdn.10)) et [Microsoft. StylusInput. PluginData](/previous-versions/ms823992(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-156">The StylusInput APIs reside primarily in the [Microsoft.StylusInput](/previous-versions/ms824750(v=msdn.10)) and [Microsoft.StylusInput.PluginData](/previous-versions/ms823992(v=msdn.10)) namespaces.</span></span> <span data-ttu-id="78f0d-157">Toutefois, les API StylusInput référencent également certaines classes dans l’espace de noms [Microsoft. Ink](/previous-versions/ms826516(v=msdn.10)) , telles que la classe [Tablet](/previous-versions/ms827783(v=msdn.10)) , la collection [TabletPropertyDescriptionCollection](/previous-versions/ms827760(v=msdn.10)) , et les énumérations [ApplicationGesture](/previous-versions/ms827547(v=msdn.10)) et [SystemGesture](/previous-versions/ms827134(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="78f0d-157">However, the StylusInput APIs also reference some classes in the [Microsoft.Ink](/previous-versions/ms826516(v=msdn.10)) namespace, such as the [Tablet](/previous-versions/ms827783(v=msdn.10)) class, the [TabletPropertyDescriptionCollection](/previous-versions/ms827760(v=msdn.10)) collection, and the [ApplicationGesture](/previous-versions/ms827547(v=msdn.10)) and [SystemGesture](/previous-versions/ms827134(v=msdn.10)) enumerations.</span></span>

## <a name="related-topics"></a><span data-ttu-id="78f0d-158">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="78f0d-158">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="78f0d-159">[**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="78f0d-159">[**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85))</span></span>
</dt> <dt>

[<span data-ttu-id="78f0d-160">**GestureRecognizer**</span><span class="sxs-lookup"><span data-stu-id="78f0d-160">**GestureRecognizer**</span></span>](gesturerecognizer-class.md)
</dt> <dt>

[<span data-ttu-id="78f0d-161">**Participent**</span><span class="sxs-lookup"><span data-stu-id="78f0d-161">**RealTimeStylus**</span></span>](realtimestylus-class.md)
</dt> <dt>

[<span data-ttu-id="78f0d-162">**IStylusAsyncPlugin**</span><span class="sxs-lookup"><span data-stu-id="78f0d-162">**IStylusAsyncPlugin**</span></span>](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin)
</dt> <dt>

[<span data-ttu-id="78f0d-163">**IStylusSyncPlugin**</span><span class="sxs-lookup"><span data-stu-id="78f0d-163">**IStylusSyncPlugin**</span></span>](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin)
</dt> <dt>

[<span data-ttu-id="78f0d-164">Utilisation des API StylusInput</span><span class="sxs-lookup"><span data-stu-id="78f0d-164">Working with the StylusInput APIs</span></span>](working-with-the-stylusinput-apis.md)
</dt> <dt>

[<span data-ttu-id="78f0d-165">Modèle RealTimeStylus monté en cascade</span><span class="sxs-lookup"><span data-stu-id="78f0d-165">The Cascaded RealTimeStylus Model</span></span>](the-cascaded-realtimestylus-model.md)
</dt> </dl>

 

 
