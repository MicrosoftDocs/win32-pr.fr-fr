---
description: L’arrière-plan de la fenêtre est la couleur ou le motif utilisé pour remplir la zone cliente avant le début du dessin d’une fenêtre.
ms.assetid: d0613f9b-e65b-4de2-887d-2b642d36b22d
title: Arrière-plan de fenêtre
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32d567b0bdc38866cd9332ff8ed399bfb23f53c8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103864321"
---
# <a name="window-background"></a><span data-ttu-id="faefd-103">Arrière-plan de fenêtre</span><span class="sxs-lookup"><span data-stu-id="faefd-103">Window Background</span></span>

<span data-ttu-id="faefd-104">L’arrière-plan de la fenêtre est la couleur ou le motif utilisé pour remplir la zone cliente avant le début du dessin d’une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="faefd-104">The window background is the color or pattern used to fill the client area before a window begins drawing.</span></span> <span data-ttu-id="faefd-105">L’arrière-plan de la fenêtre couvre tout ce qui se trouvait à l’écran avant le déplacement de la fenêtre, en effaçant les images existantes et en empêchant la nouvelle sortie de l’application d’être mélangée à des informations non liées.</span><span class="sxs-lookup"><span data-stu-id="faefd-105">The window background covers whatever was on the screen before the window was moved there, erasing existing images and preventing the application's new output from being mixed with unrelated information.</span></span>

<span data-ttu-id="faefd-106">Le système peint l’arrière-plan d’une fenêtre ou donne à la fenêtre la possibilité de le faire en lui envoyant un message [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) quand l’application appelle [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span><span class="sxs-lookup"><span data-stu-id="faefd-106">The system paints the background for a window or gives the window the opportunity to do so by sending it a [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message when the application calls [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span></span> <span data-ttu-id="faefd-107">Si une application ne traite pas le message, mais la transmet à [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), le système efface l’arrière-plan en le remplissant avec le modèle dans le pinceau d’arrière-plan spécifié par la classe de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="faefd-107">If an application does not process the message but passes it to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), the system erases the background by filling it with the pattern in the background brush specified by the window's class.</span></span> <span data-ttu-id="faefd-108">Si le pinceau n’est pas valide ou si la classe n’a pas de pinceau d’arrière-plan, le système définit le membre **fErase** dans la structure [**PAINTSTRUCT,**](/windows/win32/api/winuser/ns-winuser-paintstruct) que **BeginPaint** retourne, mais n’effectue aucune autre action.</span><span class="sxs-lookup"><span data-stu-id="faefd-108">If the brush is not valid or the class has no background brush, the system sets the **fErase** member in the [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure that **BeginPaint** returns, but carries out no other action.</span></span> <span data-ttu-id="faefd-109">L’application a ensuite une deuxième chance de dessiner l’arrière-plan de la fenêtre, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="faefd-109">The application then has a second chance to draw the window background, if necessary.</span></span>

<span data-ttu-id="faefd-110">S’il traite [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md), l’application doit utiliser le paramètre *wParam* du message pour dessiner l’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="faefd-110">If it processes [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md), the application should use the message's *wParam* parameter to draw the background.</span></span> <span data-ttu-id="faefd-111">Ce paramètre contient un handle vers le contexte de périphérique d’affichage pour la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="faefd-111">This parameter contains a handle to the display device context for the window.</span></span> <span data-ttu-id="faefd-112">Une fois l’arrière-plan dessiné, l’application doit retourner une valeur différente de zéro.</span><span class="sxs-lookup"><span data-stu-id="faefd-112">After drawing the background, the application should return a nonzero value.</span></span> <span data-ttu-id="faefd-113">Cela garantit que [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) ne définit pas par erreur le membre **fErase** de la structure [**PAINTSTRUCT,**](/windows/win32/api/winuser/ns-winuser-paintstruct) sur une valeur différente de zéro (ce qui indique que l’arrière-plan doit être effacé) lorsque l’application traite le message de [**\_ peinture WM**](wm-paint.md) suivant.</span><span class="sxs-lookup"><span data-stu-id="faefd-113">This ensures that [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) does not erroneously set the **fErase** member of the [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure to a nonzero value (indicating the background should be erased) when the application processes the subsequent [**WM\_PAINT**](wm-paint.md) message.</span></span>

<span data-ttu-id="faefd-114">Une application peut définir un pinceau d’arrière-plan de classe en assignant une poignée de pinceau ou une valeur de couleur système au membre **hbrBackground** de la structure [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) lors de l’inscription de la classe avec la fonction [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="faefd-114">An application can define a class background brush by assigning a brush handle or a system color value to the **hbrBackground** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure when registering the class with the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="faefd-115">La fonction [**GetStockObject**](/windows/desktop/api/Wingdi/nf-wingdi-getstockobject) ou [**CreateSolidBrush**](/windows/desktop/api/Wingdi/nf-wingdi-createsolidbrush) peut être utilisée pour créer une poignée de pinceau.</span><span class="sxs-lookup"><span data-stu-id="faefd-115">The [**GetStockObject**](/windows/desktop/api/Wingdi/nf-wingdi-getstockobject) or [**CreateSolidBrush**](/windows/desktop/api/Wingdi/nf-wingdi-createsolidbrush) function can be used to create a brush handle.</span></span> <span data-ttu-id="faefd-116">Une valeur de couleur système peut être l’une des valeurs définies pour la fonction [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) .</span><span class="sxs-lookup"><span data-stu-id="faefd-116">A system color value can be one of those defined for the [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) function.</span></span> <span data-ttu-id="faefd-117">(La valeur doit être augmentée d’une unité avant d’être assignée au membre.)</span><span class="sxs-lookup"><span data-stu-id="faefd-117">(The value must be increased by one before it is assigned to the member.)</span></span>

<span data-ttu-id="faefd-118">Une application peut traiter le message [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) même si un pinceau d’arrière-plan de classe est défini.</span><span class="sxs-lookup"><span data-stu-id="faefd-118">An application can process the [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message even though a class background brush is defined.</span></span> <span data-ttu-id="faefd-119">C’est généralement le cas dans les applications qui permettent à l’utilisateur de modifier la couleur ou le motif d’arrière-plan d’une fenêtre spécifiée sans affecter les autres fenêtres de la classe.</span><span class="sxs-lookup"><span data-stu-id="faefd-119">This is typical in applications that enable the user to change the window background color or pattern for a specified window without affecting other windows in the class.</span></span> <span data-ttu-id="faefd-120">Dans ce cas, l’application ne doit pas passer le message à [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="faefd-120">In such cases, the application must not pass the message to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>

<span data-ttu-id="faefd-121">Il n’est pas nécessaire qu’une application aligne les pinceaux, car le système dessine le pinceau à l’aide de l’origine de la fenêtre comme point de référence.</span><span class="sxs-lookup"><span data-stu-id="faefd-121">It is not necessary for an application to align brushes, because the system draws the brush using the window origin as the point of reference.</span></span> <span data-ttu-id="faefd-122">À partir de cela, l’utilisateur peut déplacer la fenêtre sans affecter l’alignement des pinceaux de motif.</span><span class="sxs-lookup"><span data-stu-id="faefd-122">Given this, the user can move the window without affecting the alignment of pattern brushes.</span></span>

 

 
