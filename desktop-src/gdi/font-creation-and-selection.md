---
description: La boîte de dialogue police commune simplifie le processus de création et de sélection des polices.
ms.assetid: 7183be25-a8e4-47a0-a34a-63eadf6ca10d
title: Création et sélection de polices
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 37b4a70a1a49fc318ca69998d97e15fca838668d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104991248"
---
# <a name="font-creation-and-selection"></a><span data-ttu-id="c1815-103">Création et sélection de polices</span><span class="sxs-lookup"><span data-stu-id="c1815-103">Font Creation and Selection</span></span>

<span data-ttu-id="c1815-104">La boîte de dialogue **police** commune simplifie le processus de création et de sélection des polices.</span><span class="sxs-lookup"><span data-stu-id="c1815-104">The **Font** common dialog box simplifies the process of creating and selecting fonts.</span></span> <span data-ttu-id="c1815-105">En initialisant la structure [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) et en appelant la fonction [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) , une application peut prendre en charge la même interface de sélection de polices qui nécessitait auparavant de nombreuses lignes de code personnalisé.</span><span class="sxs-lookup"><span data-stu-id="c1815-105">By initializing the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure and calling the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) function, an application can support the same font-selection interface that previously required many lines of custom code.</span></span> <span data-ttu-id="c1815-106">(Pour plus d’informations sur la boîte de dialogue **police** commune, consultez Bibliothèque de boîtes de [dialogue communes](../dlgbox/common-dialog-box-library.md).)</span><span class="sxs-lookup"><span data-stu-id="c1815-106">(For more information about the **Font** common dialog box, see [Common Dialog Box Library](../dlgbox/common-dialog-box-library.md).)</span></span>

## <a name="selection-by-the-user"></a><span data-ttu-id="c1815-107">Sélection par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="c1815-107">Selection by the User</span></span>

<span data-ttu-id="c1815-108">La plupart des opérations de création et de sélection de polices impliquent l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c1815-108">Most font creation and selection operations involve the user.</span></span> <span data-ttu-id="c1815-109">Par exemple, les applications de traitement de texte permettent à l’utilisateur de sélectionner des polices uniques pour les titres, les notes de bas de page et le corps de texte.</span><span class="sxs-lookup"><span data-stu-id="c1815-109">For example, word processing applications let the user select unique fonts for headings, footnotes, and body text.</span></span> <span data-ttu-id="c1815-110">Une fois que l’utilisateur a sélectionné une police à l’aide de la boîte de dialogue **police** et qu’il appuie sur le bouton **OK** , la fonction [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) initialise les membres d’une structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) avec les attributs de la police demandée.</span><span class="sxs-lookup"><span data-stu-id="c1815-110">After the user selects a font by using the **Font** dialog box and presses the **OK** button, the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) function initializes the members of a [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure with the attributes of the requested font.</span></span> <span data-ttu-id="c1815-111">Pour utiliser cette police pour les opérations de sortie de texte, une application doit d’abord créer une police logique, puis sélectionner cette police dans son contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="c1815-111">To use this font for text-output operations, an application must first create a logical font and then select that font into its device context.</span></span> <span data-ttu-id="c1815-112">Une *police logique* est une description fournie par l’application d’une police idéale.</span><span class="sxs-lookup"><span data-stu-id="c1815-112">A *logical font* is an application-supplied description of an ideal font.</span></span> <span data-ttu-id="c1815-113">Un développeur peut créer une police logique en appelant les fonctions [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta) ou [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) .</span><span class="sxs-lookup"><span data-stu-id="c1815-113">A developer can create a logical font by calling the [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta) or the [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) functions.</span></span> <span data-ttu-id="c1815-114">Dans ce cas, l’application appelle [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) et fournit un pointeur vers la structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) initialisée par [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta).</span><span class="sxs-lookup"><span data-stu-id="c1815-114">In this case, the application would call [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) and supply a pointer to the [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure initialized by [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta).</span></span> <span data-ttu-id="c1815-115">En général, il est plus efficace d’appeler **CreateFontIndirect** , car [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta) requiert plusieurs paramètres alors que **CreateFontIndirect** requiert un seul pointeur vers **LOGFONT**.</span><span class="sxs-lookup"><span data-stu-id="c1815-115">In general, it is more efficient to call **CreateFontIndirect** because [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta) requires several parameters while **CreateFontIndirect** requires only one pointer to **LOGFONT**.</span></span>

<span data-ttu-id="c1815-116">Avant qu’une application puisse réellement commencer à dessiner du texte avec une police logique, elle doit trouver la correspondance la plus proche des polices stockées en interne sur l’appareil et les polices dont les ressources ont été chargées dans le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="c1815-116">Before an application can actually begin drawing text with a logical font, it must find the closest match from the fonts stored internally on the device and the fonts whose resources have been loaded into the operating system.</span></span> <span data-ttu-id="c1815-117">Les polices stockées sur l’appareil ou dans le système d’exploitation sont appelées des *polices physiques*.</span><span class="sxs-lookup"><span data-stu-id="c1815-117">The fonts stored on the device or in the operating system are called *physical fonts*.</span></span> <span data-ttu-id="c1815-118">Le processus de recherche de la police physique qui correspond le mieux à une police logique spécifiée est appelé mappage de polices.</span><span class="sxs-lookup"><span data-stu-id="c1815-118">The process of finding the physical font that most closely matches a specified logical font is called font mapping.</span></span> <span data-ttu-id="c1815-119">Ce processus se produit lorsqu’une application appelle la fonction [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) et fournit un handle identifiant une police logique.</span><span class="sxs-lookup"><span data-stu-id="c1815-119">This process occurs when an application calls the [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) function and supplies a handle identifying a logical font.</span></span> <span data-ttu-id="c1815-120">Le mappage des polices est effectué à l’aide d’un algorithme interne qui compare les attributs de la police logique demandée aux attributs des polices physiques disponibles.</span><span class="sxs-lookup"><span data-stu-id="c1815-120">Font mapping is performed by using an internal algorithm that compares the attributes of the requested logical font against the attributes of available physical fonts.</span></span> <span data-ttu-id="c1815-121">Lorsque l’algorithme du mappeur de polices termine sa recherche et détermine la correspondance la plus proche possible, la fonction [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject) retourne et l’application peut commencer à dessiner du texte avec la nouvelle police.</span><span class="sxs-lookup"><span data-stu-id="c1815-121">When the font mapper algorithm completes its search and determines the closest possible match, the [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject) function returns and the application can begin drawing text with the new font.</span></span>

<span data-ttu-id="c1815-122">La fonction [**SetMapperFlags**](/windows/desktop/api/Wingdi/nf-wingdi-setmapperflags) spécifie si l’algorithme du mappeur de polices recherche uniquement les polices physiques dont les proportions correspondent à l’appareil physique.</span><span class="sxs-lookup"><span data-stu-id="c1815-122">The [**SetMapperFlags**](/windows/desktop/api/Wingdi/nf-wingdi-setmapperflags) function specifies whether the font mapper algorithm searches only for physical fonts with aspect ratios that match the physical device.</span></span> <span data-ttu-id="c1815-123">Les proportions pour un appareil sont le rapport formé par la largeur et la hauteur d’un pixel sur cet appareil.</span><span class="sxs-lookup"><span data-stu-id="c1815-123">The aspect ratio for a device is the ratio formed by the width and the height of a pixel on that device.</span></span>

<span data-ttu-id="c1815-124">La police système (également appelée Shell ou police par défaut) est la police utilisée pour le texte dans les barres de titre, les menus et les boîtes de dialogue.</span><span class="sxs-lookup"><span data-stu-id="c1815-124">The system font (also known as the shell or default font) is the font used for text in the title bars, menus, and dialog boxes.</span></span>

## <a name="special-font-selection-considerations"></a><span data-ttu-id="c1815-125">Considérations spéciales relatives à la sélection des polices</span><span class="sxs-lookup"><span data-stu-id="c1815-125">Special Font Selection Considerations</span></span>

<span data-ttu-id="c1815-126">Bien que la plupart des opérations de sélection de police impliquent l’utilisateur, il y a des cas où cela n’est pas vrai.</span><span class="sxs-lookup"><span data-stu-id="c1815-126">Although most font selection operations involve the user, there are some instances where this is not true.</span></span> <span data-ttu-id="c1815-127">Par exemple, un développeur peut vouloir utiliser une police unique dans une application pour dessiner du texte dans une fenêtre de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c1815-127">For example, a developer may want to use a unique font in an application to draw text in a control window.</span></span> <span data-ttu-id="c1815-128">Pour sélectionner une police appropriée, l’application doit être en mesure de déterminer les polices disponibles, de créer une police logique décrivant l’une de ces polices disponibles, puis de sélectionner cette police dans le contexte de périphérique approprié.</span><span class="sxs-lookup"><span data-stu-id="c1815-128">To select an appropriate font, the application must be able to determine what fonts are available, create a logical font that describes one of these available fonts, and then select that font into the appropriate device context.</span></span>

<span data-ttu-id="c1815-129">Une application peut énumérer les polices disponibles à l’aide des fonctions [**EnumFonts**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontsa) ou [**EnumFontFamilies**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesa) .</span><span class="sxs-lookup"><span data-stu-id="c1815-129">An application can enumerate the available fonts by using the [**EnumFonts**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontsa) or [**EnumFontFamilies**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesa) functions.</span></span> <span data-ttu-id="c1815-130">[**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa) est recommandé, car il énumère tous les styles associés à un nom de famille.</span><span class="sxs-lookup"><span data-stu-id="c1815-130">[**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa) is recommended because it enumerates all the styles associated with a family name.</span></span> <span data-ttu-id="c1815-131">Cela peut être utile pour les polices avec des styles nombreux ou inhabituels et pour les polices qui traversent les bordures internationales.</span><span class="sxs-lookup"><span data-stu-id="c1815-131">This can be useful for fonts with many or unusual styles and for fonts that cross international borders.</span></span>

<span data-ttu-id="c1815-132">Une fois qu’une application a énuméré les polices disponibles et localisé une correspondance appropriée, elle doit utiliser les valeurs retournées par la fonction d’énumération font pour initialiser les membres d’une structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) .</span><span class="sxs-lookup"><span data-stu-id="c1815-132">Once an application has enumerated the available fonts and located an appropriate match, it should use the values returned by the font enumeration function to initialize the members of a [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure.</span></span> <span data-ttu-id="c1815-133">Il peut ensuite appeler la fonction [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) , en lui transmettant un pointeur vers la structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) initialisée.</span><span class="sxs-lookup"><span data-stu-id="c1815-133">Then it can call the [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) function, passing to it a pointer to the initialized [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure.</span></span> <span data-ttu-id="c1815-134">Si la fonction [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) est réussie, l’application peut ensuite sélectionner la police logique en appelant la fonction [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) .</span><span class="sxs-lookup"><span data-stu-id="c1815-134">If the [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) function is successful, the application can then select the logical font by calling the [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) function.</span></span> <span data-ttu-id="c1815-135">Lors de l’initialisation des membres de la structure **LOGFONT** , veillez à spécifier un jeu de caractères spécifique dans le membre **lfCharSet** .</span><span class="sxs-lookup"><span data-stu-id="c1815-135">When initializing the members of the **LOGFONT** structure, be sure to specify a specific character set in the **lfCharSet** member.</span></span> <span data-ttu-id="c1815-136">Ce membre est important dans le processus de mappage des polices et les résultats seront incohérents si ce membre n’est pas correctement initialisé.</span><span class="sxs-lookup"><span data-stu-id="c1815-136">This member is important in the font mapping process and the results will be inconsistent if this member is not initialized correctly.</span></span> <span data-ttu-id="c1815-137">Si vous spécifiez un nom de police dans le membre **lfFaceName** de la structure **LOGFONT** , assurez-vous que la valeur **lfCharSet** correspond au jeu de caractères de la police spécifiée dans **lfFaceName**.</span><span class="sxs-lookup"><span data-stu-id="c1815-137">If you specify a typeface name in the **lfFaceName** member of the **LOGFONT** structure, make sure that the **lfCharSet** value matches the character set of the typeface specified in **lfFaceName**.</span></span> <span data-ttu-id="c1815-138">Par exemple, si vous souhaitez sélectionner une police telle que MS Mincho, **lfCharSet** doit être défini sur la valeur prédéfinie SHIFTJIS \_ CharSet.</span><span class="sxs-lookup"><span data-stu-id="c1815-138">For example, if you want to select a font such as MS Mincho, **lfCharSet** must be set to the predefined value SHIFTJIS\_CHARSET.</span></span>

<span data-ttu-id="c1815-139">Les polices pour de nombreuses langues d’Extrême-Orient ont deux noms de police : un nom en anglais et un nom localisé.</span><span class="sxs-lookup"><span data-stu-id="c1815-139">The fonts for many East Asian languages have two typeface names: an English name and a localized name.</span></span> <span data-ttu-id="c1815-140">[**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta)et [**CreateFontIndirectEx**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirectexa) prennent le nom de la police localisée pour les paramètres régionaux du système qui correspondent à la langue, mais ils prennent le nom de police en anglais pour tous les autres paramètres régionaux système.</span><span class="sxs-lookup"><span data-stu-id="c1815-140">[**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta), and [**CreateFontIndirectEx**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirectexa) take the localized typeface name for a system locale that matches the language, but they take the English typeface name for all other system locales.</span></span> <span data-ttu-id="c1815-141">La meilleure méthode consiste à essayer un nom et, en cas d’échec, à essayer l’autre.</span><span class="sxs-lookup"><span data-stu-id="c1815-141">The best method is to try one name and, on failure, try the other.</span></span> <span data-ttu-id="c1815-142">Notez que [**EnumFonts**](/windows/win32/api/wingdi/nf-wingdi-enumfontsa), [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa)et [**EnumFontFamiliesEx**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesexa) retournent le nom de police anglais si les paramètres régionaux système ne correspondent pas à la langue de la police.</span><span class="sxs-lookup"><span data-stu-id="c1815-142">Note that [**EnumFonts**](/windows/win32/api/wingdi/nf-wingdi-enumfontsa), [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa), and [**EnumFontFamiliesEx**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesexa) return the English typeface name if the system locale does not match the language of the font.</span></span> <span data-ttu-id="c1815-143">À compter de Windows 2000, ce n’est plus un problème, car le mappeur de polices pour [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta)et [**CreateFontIndirectEx**](/windows/win32/api/wingdi/nf-wingdi-createfontindirectexa) reconnaît le nom de la police, quels que soient les paramètres régionaux.</span><span class="sxs-lookup"><span data-stu-id="c1815-143">Starting with Windows 2000, this is no longer a problem because the font mapper for [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta), and [**CreateFontIndirectEx**](/windows/win32/api/wingdi/nf-wingdi-createfontindirectexa) recognizes either typeface name, regardless of locale.</span></span>

 

 
