---
description: En règle générale, les entrées de la palette système que le système réserve pour les couleurs statiques ne peuvent pas être modifiées.
ms.assetid: be258151-36cc-42ba-8005-ff9d8e59b894
title: Palette système et couleurs statiques
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 537bdc87fecdd055334b83a56b0a53f9999be94c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104973083"
---
# <a name="system-palette-and-static-colors"></a><span data-ttu-id="582d2-103">Palette système et couleurs statiques</span><span class="sxs-lookup"><span data-stu-id="582d2-103">System Palette and Static Colors</span></span>

<span data-ttu-id="582d2-104">En règle générale, les entrées de la palette système que le système réserve pour les couleurs statiques ne peuvent pas être modifiées.</span><span class="sxs-lookup"><span data-stu-id="582d2-104">Ordinarily, the system palette entries that the system reserves for static colors cannot be changed.</span></span> <span data-ttu-id="582d2-105">Une application peut remplacer ce comportement par défaut à l’aide de la fonction [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) pour réduire le nombre d’entrées de couleur statique et, par conséquent, augmenter le nombre d’entrées de palette système inutilisées.</span><span class="sxs-lookup"><span data-stu-id="582d2-105">An application can override this default behavior by using the [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) function to reduce the number of static color entries and, thereby, increase the number of unused system palette entries.</span></span> <span data-ttu-id="582d2-106">Toutefois, étant donné que la modification des couleurs statiques peut avoir un effet immédiat et spectaculaire sur toutes les fenêtres à l’écran, une application ne doit pas appeler **SetSystemPaletteUse**, sauf si elle a une fenêtre agrandie et le focus d’entrée.</span><span class="sxs-lookup"><span data-stu-id="582d2-106">However, because changing the static colors can have an immediate and dramatic effect on all windows on the display, an application should not call **SetSystemPaletteUse**, unless it has a maximized window and the input focus.</span></span>

<span data-ttu-id="582d2-107">Quand une application appelle [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) avec la \_ valeur nostatique SYSPAL, le système libère toutes les entrées sauf deux des entrées réservées, ce qui permet à ces entrées de recevoir de nouvelles valeurs de couleur lorsque l’application réalise par la suite sa palette logique.</span><span class="sxs-lookup"><span data-stu-id="582d2-107">When an application calls [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) with the SYSPAL\_NOSTATIC value, the system frees all but two of the reserved entries, allowing those entries to receive new color values when the application subsequently realizes its logical palette.</span></span> <span data-ttu-id="582d2-108">Les deux autres entrées de couleur statiques restent réservées et sont définies en blanc et noir.</span><span class="sxs-lookup"><span data-stu-id="582d2-108">The remaining two static color entries remain reserved and are set to white and black.</span></span> <span data-ttu-id="582d2-109">Une application peut restaurer les entrées réservées en appelant **SetSystemPaletteUse** avec la \_ valeur statique SYSPAL.</span><span class="sxs-lookup"><span data-stu-id="582d2-109">An application can restore the reserved entries by calling **SetSystemPaletteUse** with the SYSPAL\_STATIC value.</span></span> <span data-ttu-id="582d2-110">Il peut découvrir l’utilisation actuelle de la palette système à l’aide de la fonction [**GetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteuse) .</span><span class="sxs-lookup"><span data-stu-id="582d2-110">It can discover the current system palette usage by using the [**GetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteuse) function.</span></span>

<span data-ttu-id="582d2-111">En outre, après avoir défini l’utilisation de la palette système sur SYSPAL \_ Nostatic, l’application doit immédiatement réaliser sa palette logique, appeler la fonction [**GetSysColor**](/windows/win32/api/winuser/nf-winuser-getsyscolor) pour enregistrer les paramètres de couleur système actuels, appeler la fonction [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) pour définir les couleurs système sur des valeurs raisonnables en utilisant le noir et le blanc, et enfin envoyer le message [**WM \_ SYSCOLORCHANGE**](wm-syscolorchange.md) à d’autres fenêtres de niveau supérieur pour les autoriser</span><span class="sxs-lookup"><span data-stu-id="582d2-111">Furthermore, after setting the system palette usage to SYSPAL\_NOSTATIC, the application must immediately realize its logical palette, call the [**GetSysColor**](/windows/win32/api/winuser/nf-winuser-getsyscolor) function to save the current system color settings, call the [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) function to set the system colors to reasonable values using black and white, and finally send the [**WM\_SYSCOLORCHANGE**](wm-syscolorchange.md) message to other top-level windows to allow them to be redrawn with the new system colors.</span></span> <span data-ttu-id="582d2-112">Quand vous définissez des couleurs système en noir et blanc, l’application doit s’assurer que les éléments adjacents ou qui se chevauchent, tels que les cadres de fenêtre et les bordures, sont respectivement en noir et blanc.</span><span class="sxs-lookup"><span data-stu-id="582d2-112">When setting system colors using black and white, the application should make sure adjacent or overlapping items, such as window frames and borders, are set to black and white, respectively.</span></span>

<span data-ttu-id="582d2-113">Avant que l’application perde le focus d’entrée, ferme sa fenêtre ou se termine, elle doit immédiatement appeler [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) avec la \_ valeur statique SYSPAL, réaliser sa palette logique, restaurer les couleurs système à leurs valeurs précédentes et envoyer le message [**WM \_ SYSCOLORCHANGE**](wm-syscolorchange.md) .</span><span class="sxs-lookup"><span data-stu-id="582d2-113">Before the application loses the input focus, closes its window, or terminates, it must immediately call [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) with the SYSPAL\_STATIC value, realize its logical palette, restore the system colors to their previous values, and send the [**WM\_SYSCOLORCHANGE**](wm-syscolorchange.md) message.</span></span> <span data-ttu-id="582d2-114">Le système envoie un message de [**\_ peinture WM**](wm-paint.md) à toute fenêtre affectée par une modification de couleur système.</span><span class="sxs-lookup"><span data-stu-id="582d2-114">The system sends a [**WM\_PAINT**](wm-paint.md) message to any window that is affected by a system color change.</span></span> <span data-ttu-id="582d2-115">Les applications qui ont des pinceaux utilisant les couleurs système existantes doivent supprimer ces pinceaux et les recréer à l’aide des nouvelles couleurs système.</span><span class="sxs-lookup"><span data-stu-id="582d2-115">Applications that have brushes using the existing system colors should delete those brushes and re-create them using the new system colors.</span></span>

 

 
