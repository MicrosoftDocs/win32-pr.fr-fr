---
description: Une bitmap indépendante du périphérique (DIB, Device-Independent Bitmap) contient une table des couleurs.
ms.assetid: 56b39a3d-48a4-4620-9652-ec41ea4d6423
title: Device-Independent des bitmaps
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1aa35201a9a27c2d16a5a18b0125d25a3938890c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104114683"
---
# <a name="device-independent-bitmaps"></a><span data-ttu-id="1ca04-103">Device-Independent des bitmaps</span><span class="sxs-lookup"><span data-stu-id="1ca04-103">Device-Independent Bitmaps</span></span>

<span data-ttu-id="1ca04-104">Une bitmap indépendante du périphérique (DIB, Device-Independent Bitmap) contient une *table des couleurs*.</span><span class="sxs-lookup"><span data-stu-id="1ca04-104">A device-independent bitmap (DIB) contains a *color table*.</span></span> <span data-ttu-id="1ca04-105">Une table des couleurs décrit comment les valeurs de pixel correspondent aux valeurs de couleur *RVB* , qui décrivent les couleurs produites en émettant de la lumière.</span><span class="sxs-lookup"><span data-stu-id="1ca04-105">A color table describes how pixel values correspond to *RGB* color values, which describe colors that are produced by emitting light.</span></span> <span data-ttu-id="1ca04-106">Par conséquent, un DIB peut obtenir le schéma de couleurs approprié sur n’importe quel appareil.</span><span class="sxs-lookup"><span data-stu-id="1ca04-106">Thus, a DIB can achieve the proper color scheme on any device.</span></span> <span data-ttu-id="1ca04-107">Un DIB contient les informations de couleur et de dimension suivantes :</span><span class="sxs-lookup"><span data-stu-id="1ca04-107">A DIB contains the following color and dimension information:</span></span>

-   <span data-ttu-id="1ca04-108">Format de couleur de l’appareil sur lequel l’image rectangulaire a été créée.</span><span class="sxs-lookup"><span data-stu-id="1ca04-108">The color format of the device on which the rectangular image was created.</span></span>
-   <span data-ttu-id="1ca04-109">Résolution de l’appareil sur lequel l’image rectangulaire a été créée.</span><span class="sxs-lookup"><span data-stu-id="1ca04-109">The resolution of the device on which the rectangular image was created.</span></span>
-   <span data-ttu-id="1ca04-110">Palette de l’appareil sur lequel l’image a été créée.</span><span class="sxs-lookup"><span data-stu-id="1ca04-110">The palette for the device on which the image was created.</span></span>
-   <span data-ttu-id="1ca04-111">Tableau de bits qui mappe des triplets rouge, vert et bleu ( [**RVB**](/windows/desktop/api/Wingdi/nf-wingdi-rgb) ) aux pixels de l’image rectangulaire.</span><span class="sxs-lookup"><span data-stu-id="1ca04-111">An array of bits that maps red, green, blue ( [**RGB**](/windows/desktop/api/Wingdi/nf-wingdi-rgb) ) triplets to pixels in the rectangular image.</span></span>
-   <span data-ttu-id="1ca04-112">Identificateur de compression de données qui indique le schéma de compression de données (le cas échéant) utilisé pour réduire la taille du tableau de bits.</span><span class="sxs-lookup"><span data-stu-id="1ca04-112">A data-compression identifier that indicates the data compression scheme (if any) used to reduce the size of the array of bits.</span></span>

<span data-ttu-id="1ca04-113">Les informations de couleur et de dimension sont stockées dans une structure [**BITMAPINFO,**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) , qui se compose d’une structure [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) suivie de deux structures [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) ou plus.</span><span class="sxs-lookup"><span data-stu-id="1ca04-113">The color and dimension information is stored in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure, which consists of a [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) structure followed by two or more [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures.</span></span> <span data-ttu-id="1ca04-114">La structure **BITMAPINFOHEADER** spécifie les dimensions du rectangle de pixels, décrit la technologie de couleur de l’appareil et identifie les schémas de compression utilisés pour réduire la taille de l’image bitmap.</span><span class="sxs-lookup"><span data-stu-id="1ca04-114">The **BITMAPINFOHEADER** structure specifies the dimensions of the pixel rectangle, describes the device's color technology, and identifies the compression schemes used to reduce the size of the bitmap.</span></span> <span data-ttu-id="1ca04-115">Les structures **RGBQUAD** identifient les couleurs qui apparaissent dans le rectangle de pixels.</span><span class="sxs-lookup"><span data-stu-id="1ca04-115">The **RGBQUAD** structures identify the colors that appear in the pixel rectangle.</span></span>

<span data-ttu-id="1ca04-116">Il existe deux types de DIB :</span><span class="sxs-lookup"><span data-stu-id="1ca04-116">There are two varieties of DIBs:</span></span>

-   <span data-ttu-id="1ca04-117">DIB ascendant, dans lequel l’origine se trouve dans le coin inférieur gauche.</span><span class="sxs-lookup"><span data-stu-id="1ca04-117">A bottom-up DIB, in which the origin lies at the lower-left corner.</span></span>
-   <span data-ttu-id="1ca04-118">DIB descendant, dans lequel l’origine se trouve dans l’angle supérieur gauche.</span><span class="sxs-lookup"><span data-stu-id="1ca04-118">A top-down DIB, in which the origin lies at the upper-left corner.</span></span>

<span data-ttu-id="1ca04-119">Si la hauteur d’un DIB, comme indiqué par le membre **Height** de la structure d’en-tête d’informations bitmap, est une valeur positive, il s’agit d’un DIB ascendant ; Si la hauteur est une valeur négative, il s’agit d’un DIB descendant.</span><span class="sxs-lookup"><span data-stu-id="1ca04-119">If the height of a DIB, as indicated by the **Height** member of the bitmap information header structure, is a positive value, it is a bottom-up DIB; if the height is a negative value, it is a top-down DIB.</span></span> <span data-ttu-id="1ca04-120">Les DIB descendants ne peuvent pas être compressés.</span><span class="sxs-lookup"><span data-stu-id="1ca04-120">Top-down DIBs cannot be compressed.</span></span>

<span data-ttu-id="1ca04-121">Le format de couleur est spécifié en termes de nombre de plans de couleur et de bits de couleur.</span><span class="sxs-lookup"><span data-stu-id="1ca04-121">The color format is specified in terms of a count of color planes and color bits.</span></span> <span data-ttu-id="1ca04-122">Le nombre de plans de couleur est toujours 1 ; le nombre de bits de couleur est 1 pour les images bitmap monochrome, 4 pour les bitmaps VGA et 8, 16, 24 ou 32 pour les bitmaps sur d’autres appareils couleur.</span><span class="sxs-lookup"><span data-stu-id="1ca04-122">The count of color planes is always 1; the count of color bits is 1 for monochrome bitmaps, 4 for VGA bitmaps, and 8, 16, 24, or 32 for bitmaps on other color devices.</span></span> <span data-ttu-id="1ca04-123">Une application récupère le nombre de bits de couleur utilisés par un affichage (ou une imprimante) particulier en appelant la fonction [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , en spécifiant BITSPIXEL comme deuxième argument.</span><span class="sxs-lookup"><span data-stu-id="1ca04-123">An application retrieves the number of color bits that a particular display (or printer) uses by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying BITSPIXEL as the second argument.</span></span>

<span data-ttu-id="1ca04-124">La résolution d’un périphérique d’affichage est spécifiée en pixels par mètre.</span><span class="sxs-lookup"><span data-stu-id="1ca04-124">The resolution of a display device is specified in pixels-per-meter.</span></span> <span data-ttu-id="1ca04-125">Une application peut récupérer la résolution horizontale pour un affichage vidéo, ou imprimante, en suivant ce processus en trois étapes.</span><span class="sxs-lookup"><span data-stu-id="1ca04-125">An application can retrieve the horizontal resolution for a video display, or printer, by following this three-step process.</span></span>

1.  <span data-ttu-id="1ca04-126">Appelez la fonction [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , en spécifiant HORZRES comme deuxième argument.</span><span class="sxs-lookup"><span data-stu-id="1ca04-126">Call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying HORZRES as the second argument.</span></span>
2.  <span data-ttu-id="1ca04-127">Appelez [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) une deuxième fois, en spécifiant HORZSIZE comme deuxième argument.</span><span class="sxs-lookup"><span data-stu-id="1ca04-127">Call [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) a second time, specifying HORZSIZE as the second argument.</span></span>
3.  <span data-ttu-id="1ca04-128">Divise la première valeur de retour par la deuxième valeur de retour.</span><span class="sxs-lookup"><span data-stu-id="1ca04-128">Divide the first return value by the second return value.</span></span>

<span data-ttu-id="1ca04-129">L’application peut récupérer la résolution verticale en utilisant le même processus en trois étapes avec des paramètres différents : VERTRES à la place de HORZRES et VERTSIZE à la place de HORZSIZE.</span><span class="sxs-lookup"><span data-stu-id="1ca04-129">The application can retrieve the vertical resolution by using the same three-step process with different parameters: VERTRES in place of HORZRES, and VERTSIZE in place of HORZSIZE.</span></span>

<span data-ttu-id="1ca04-130">La palette est représentée par un tableau de structures [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) qui spécifient les composants d’intensité rouge, vert et bleu pour chaque couleur dans la palette de couleurs d’un périphérique d’affichage.</span><span class="sxs-lookup"><span data-stu-id="1ca04-130">The palette is represented by an array of [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures that specify the red, green, and blue intensity components for each color in a display device's color palette.</span></span> <span data-ttu-id="1ca04-131">Chaque index de couleurs du tableau de palette est mappé à un pixel spécifique dans la zone rectangulaire associée à l’image bitmap.</span><span class="sxs-lookup"><span data-stu-id="1ca04-131">Each color index in the palette array maps to a specific pixel in the rectangular region associated with the bitmap.</span></span> <span data-ttu-id="1ca04-132">La taille de ce tableau, en bits, est équivalente à la largeur du rectangle, en pixels, multipliée par la hauteur du rectangle, en pixels, multipliée par le nombre de bits de couleur de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="1ca04-132">The size of this array, in bits, is equivalent to the width of the rectangle, in pixels, multiplied by the height of the rectangle, in pixels, multiplied by the count of color bits for the device.</span></span> <span data-ttu-id="1ca04-133">Une application peut récupérer la taille de la palette de l’appareil en appelant la fonction [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , en spécifiant NUMCOLORS comme deuxième argument.</span><span class="sxs-lookup"><span data-stu-id="1ca04-133">An application can retrieve the size of the device's palette by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying NUMCOLORS as the second argument.</span></span>

<span data-ttu-id="1ca04-134">Windows prend en charge la compression du tableau palette pour les DIB 8-bpp et 4-BPP de bas en haut.</span><span class="sxs-lookup"><span data-stu-id="1ca04-134">Windows supports the compression of the palette array for 8-bpp and 4-bpp bottom-up DIBs.</span></span> <span data-ttu-id="1ca04-135">Ces tableaux peuvent être compressés à l’aide du schéma d’encodage de longueur d’exécution (RLE).</span><span class="sxs-lookup"><span data-stu-id="1ca04-135">These arrays can be compressed by using the run-length encoding (RLE) scheme.</span></span> <span data-ttu-id="1ca04-136">Le schéma RLE utilise des valeurs de 2 octets, le premier octet spécifiant le nombre de pixels consécutifs qui utilisent un index de couleurs et le deuxième octet spécifiant l’index.</span><span class="sxs-lookup"><span data-stu-id="1ca04-136">The RLE scheme uses 2-byte values, the first byte specifying the number of consecutive pixels that use a color index and the second byte specifying the index.</span></span> <span data-ttu-id="1ca04-137">Pour plus d’informations sur la compression des bitmaps, consultez la description des structures [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)et [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) .</span><span class="sxs-lookup"><span data-stu-id="1ca04-137">For more information about bitmap compression, see the description of the [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header), and [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structures.</span></span>

<span data-ttu-id="1ca04-138">Une application peut créer un DIB à partir d’un DDB en initialisant les structures requises et en appelant la fonction [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) .</span><span class="sxs-lookup"><span data-stu-id="1ca04-138">An application can create a DIB from a DDB by initializing the required structures and calling the [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) function.</span></span> <span data-ttu-id="1ca04-139">Pour déterminer si un appareil prend en charge cette fonction, appelez la fonction [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , en spécifiant RC \_ di \_ bitmap comme indicateur RasterCaps.</span><span class="sxs-lookup"><span data-stu-id="1ca04-139">To determine whether a device supports this function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DI\_BITMAP as the RASTERCAPS flag.</span></span>

<span data-ttu-id="1ca04-140">Une application qui doit copier une image bitmap peut utiliser [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) pour copier tous les pixels d’une image bitmap source vers une bitmap de destination, à l’exception de ces pixels qui correspondent à la couleur transparente.</span><span class="sxs-lookup"><span data-stu-id="1ca04-140">An application that needs to copy a bitmap can use [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) to copy all pixels in a source bitmap to a destination bitmap except those pixels that match the transparent color.</span></span>

<span data-ttu-id="1ca04-141">Une application peut utiliser un DIB pour définir des pixels sur le périphérique d’affichage en appelant la fonction [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) ou [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) .</span><span class="sxs-lookup"><span data-stu-id="1ca04-141">An application can use a DIB to set pixels on the display device by calling the [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) or the [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) function.</span></span> <span data-ttu-id="1ca04-142">Pour déterminer si un appareil prend en charge la fonction **SetDIBitsToDevice** , appelez la fonction [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , en spécifiant RC \_ DIBTODEV comme indicateur RasterCaps.</span><span class="sxs-lookup"><span data-stu-id="1ca04-142">To determine whether a device supports the **SetDIBitsToDevice** function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DIBTODEV as the RASTERCAPS flag.</span></span> <span data-ttu-id="1ca04-143">Spécifiez RC \_ STRETCHDIB comme indicateur RasterCaps pour déterminer si l’appareil prend en charge **StretchDIBits**.</span><span class="sxs-lookup"><span data-stu-id="1ca04-143">Specify RC\_STRETCHDIB as the RASTERCAPS flag to determine if the device supports **StretchDIBits**.</span></span>

<span data-ttu-id="1ca04-144">Une application qui doit simplement afficher un DIB préexistant peut utiliser la fonction [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) .</span><span class="sxs-lookup"><span data-stu-id="1ca04-144">An application that simply needs to display a pre-existing DIB can use the [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) function.</span></span> <span data-ttu-id="1ca04-145">Par exemple, une application de feuille de calcul peut ouvrir des graphiques existants et les afficher dans une fenêtre à l’aide de la fonction **SetDIBitsToDevice** .</span><span class="sxs-lookup"><span data-stu-id="1ca04-145">For example, a spreadsheet application can open existing charts and display them in a window by using the **SetDIBitsToDevice** function.</span></span> <span data-ttu-id="1ca04-146">Toutefois, pour redessiner à plusieurs reprises une bitmap dans une fenêtre, l’application doit utiliser la fonction [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) .</span><span class="sxs-lookup"><span data-stu-id="1ca04-146">To repeatedly redraw a bitmap in a window, however, the application should use the [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function.</span></span> <span data-ttu-id="1ca04-147">Par exemple, une application multimédia qui combine des graphiques animés avec du son peut tirer parti de l’appel de la fonction **BitBlt** , car elle s’exécute plus rapidement que **SetDIBitsToDevice**.</span><span class="sxs-lookup"><span data-stu-id="1ca04-147">For example, a multimedia application that combines animated graphics with sound would benefit from calling the **BitBlt** function because it executes faster than **SetDIBitsToDevice**.</span></span>

 

 
