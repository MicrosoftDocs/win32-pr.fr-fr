---
description: La plupart des dessins effectués au cours du traitement du \_ message WM Paint sont asynchrones. autrement dit, il y a un délai entre le moment où une partie de la fenêtre est invalidée et l’heure à laquelle WM \_ Paint est envoyé.
ms.assetid: c4eac615-6526-4ca6-854b-b4a598da13a4
title: Dessin synchrone et asynchrone
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a80dd5d5d63cbe10d19ec98e9f5dc9ae9163c18a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103952840"
---
# <a name="synchronous-and-asynchronous-drawing"></a><span data-ttu-id="1dcac-103">Dessin synchrone et asynchrone</span><span class="sxs-lookup"><span data-stu-id="1dcac-103">Synchronous and Asynchronous Drawing</span></span>

<span data-ttu-id="1dcac-104">La plupart des dessins effectués au cours du traitement du message [**WM \_ Paint**](wm-paint.md) sont asynchrones. autrement dit, il y a un délai entre le moment où une partie de la fenêtre est invalidée et l’heure à laquelle WM \_ Paint est envoyé.</span><span class="sxs-lookup"><span data-stu-id="1dcac-104">Most drawing carried out during processing of the [**WM\_PAINT**](wm-paint.md) message is asynchronous; that is, there is a delay between the time a portion of the window is invalidated and the time WM\_PAINT is sent.</span></span> <span data-ttu-id="1dcac-105">Pendant ce laps de temps, l’application récupère généralement les messages de la file d’attente et effectue d’autres tâches.</span><span class="sxs-lookup"><span data-stu-id="1dcac-105">During the delay, the application typically retrieves messages from the queue and carries out other tasks.</span></span> <span data-ttu-id="1dcac-106">La raison du retard est que le système traite généralement le dessin dans une fenêtre comme une opération de faible priorité et fonctionne comme si les messages d’entrée d’utilisateur et les messages qui peuvent affecter la position ou la taille d’une fenêtre seront traités avant la \_ peinture WM.</span><span class="sxs-lookup"><span data-stu-id="1dcac-106">The reason for the delay is that the system generally treats drawing in a window as a low-priority operation and works as though user-input messages and messages that may affect the position or size of a window will be processed before WM\_PAINT .</span></span>

<span data-ttu-id="1dcac-107">Dans certains cas, il est nécessaire qu’une application dessine de manière synchrone autrement dit, dessinez dans la fenêtre juste après l’invalidation d’une partie de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="1dcac-107">In some cases, it is necessary for an application to draw synchronously that is, draw in the window immediately after invalidating a portion of the window.</span></span> <span data-ttu-id="1dcac-108">Une application classique dessine sa fenêtre principale immédiatement après avoir créé la fenêtre pour signaler à l’utilisateur que l’application a démarré avec succès.</span><span class="sxs-lookup"><span data-stu-id="1dcac-108">A typical application draws its main window immediately after creating the window to signal the user that the application has started successfully.</span></span> <span data-ttu-id="1dcac-109">Le système dessine des fenêtres de contrôle de façon synchrone, telles que des boutons, car ces fenêtres servent de point de vue pour les entrées utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1dcac-109">The system draws some control windows synchronously, such as buttons, because such windows serve as the focus for user input.</span></span> <span data-ttu-id="1dcac-110">Bien qu’une fenêtre avec une routine de dessin simple puisse être dessinée de façon synchrone, tout ce dessin doit être fait rapidement et ne doit pas interférer avec la capacité de l’application à répondre à l’entrée utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1dcac-110">Although any window with a simple drawing routine can be drawn synchronously, all such drawing should be done quickly and should not interfere with the application's ability to respond to user input.</span></span>

<span data-ttu-id="1dcac-111">Les fonctions [**UpdateWindow**](/windows/desktop/api/Winuser/nf-winuser-updatewindow) et [**RedrawWindow**](/windows/desktop/api/Winuser/nf-winuser-redrawwindow) permettent un dessin synchrone.</span><span class="sxs-lookup"><span data-stu-id="1dcac-111">The [**UpdateWindow**](/windows/desktop/api/Winuser/nf-winuser-updatewindow) and [**RedrawWindow**](/windows/desktop/api/Winuser/nf-winuser-redrawwindow) functions allow for synchronous drawing.</span></span> <span data-ttu-id="1dcac-112">**UpdateWindow** envoie un message de [**\_ peinture WM**](wm-paint.md) directement à la fenêtre si la région de mise à jour n’est pas vide.</span><span class="sxs-lookup"><span data-stu-id="1dcac-112">**UpdateWindow** sends a [**WM\_PAINT**](wm-paint.md) message directly to the window if the update region is not empty.</span></span> <span data-ttu-id="1dcac-113">**RedrawWindow** envoie également un message **WM \_ Paint** , mais donne à l’application un contrôle accru sur la façon de dessiner la fenêtre, par exemple s’il faut dessiner la zone non cliente et l’arrière-plan de la fenêtre, ou s’il faut envoyer le message, que la région de mise à jour soit vide ou non.</span><span class="sxs-lookup"><span data-stu-id="1dcac-113">**RedrawWindow** also sends a **WM\_PAINT** message, but gives the application greater control over how to draw the window, such as whether to draw the nonclient area and window background or whether to send the message regardless of whether the update region is empty.</span></span> <span data-ttu-id="1dcac-114">Ces fonctions envoient le message de **\_ peinture WM** directement à la fenêtre, quel que soit le nombre d’autres messages dans la file d’attente des messages d’application.</span><span class="sxs-lookup"><span data-stu-id="1dcac-114">These functions send the **WM\_PAINT** message directly to the window, regardless of the number of other messages in the application message queue.</span></span>

<span data-ttu-id="1dcac-115">Toute fenêtre nécessitant des opérations de dessin longues doit être dessinée de façon asynchrone pour empêcher que les messages en attente soient bloqués lorsque la fenêtre est dessinée.</span><span class="sxs-lookup"><span data-stu-id="1dcac-115">Any window requiring time-consuming drawing operations should be drawn asynchronously to prevent pending messages from being blocked as the window is drawn.</span></span> <span data-ttu-id="1dcac-116">En outre, toute application qui invalide fréquemment de petites parties d’une fenêtre doit permettre à ces parties non valides d’être consolidées en un seul message de [**\_ peinture WM**](wm-paint.md) asynchrone, plutôt qu’une série de messages **WM de \_ peinture** synchrone.</span><span class="sxs-lookup"><span data-stu-id="1dcac-116">Also, any application that frequently invalidates small portions of a window should allow these invalid portions to consolidate into a single asynchronous [**WM\_PAINT**](wm-paint.md) message, rather than a series of synchronous **WM\_PAINT** messages.</span></span>

 

 



