---
description: En utilisant un contexte de périphérique de classe, une application peut utiliser un contexte de périphérique d’affichage unique pour chaque fenêtre appartenant à une classe spécifiée.
ms.assetid: fc76abbf-68da-47f2-8145-4fad806297b4
title: Affichage de la classe contextes de périphérique
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5e5a4cc0268d948e1a6f95050409698217e3f13e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104972763"
---
# <a name="class-display-device-contexts"></a><span data-ttu-id="097cf-103">Affichage de la classe contextes de périphérique</span><span class="sxs-lookup"><span data-stu-id="097cf-103">Class Display Device Contexts</span></span>

<span data-ttu-id="097cf-104">En utilisant un *contexte de périphérique de classe*, une application peut utiliser un contexte de périphérique d’affichage unique pour chaque fenêtre appartenant à une classe spécifiée.</span><span class="sxs-lookup"><span data-stu-id="097cf-104">By using a *class device context*, an application can use a single display device context for every window belonging to a specified class.</span></span> <span data-ttu-id="097cf-105">Les contextes de périphérique de classe sont souvent utilisés avec les fenêtres de contrôle qui sont dessinées à l’aide des mêmes valeurs d’attribut.</span><span class="sxs-lookup"><span data-stu-id="097cf-105">Class device contexts are often used with control windows that are drawn using the same attribute values.</span></span> <span data-ttu-id="097cf-106">À l’instar des contextes de périphérique privé, les contextes de périphérique de classe réduisent le temps nécessaire pour préparer un contexte de périphérique pour le dessin.</span><span class="sxs-lookup"><span data-stu-id="097cf-106">Like private device contexts, class device contexts minimize the time required to prepare a device context for drawing.</span></span>

<span data-ttu-id="097cf-107">Le système fournit un contexte de périphérique de classe pour une fenêtre s’il appartient à une classe de fenêtre avec le \_ style cs CLASSDC.</span><span class="sxs-lookup"><span data-stu-id="097cf-107">The system supplies a class device context for a window if it belongs to a window class having the CS\_CLASSDC style.</span></span> <span data-ttu-id="097cf-108">Le système crée le contexte de périphérique lors de la création de la première fenêtre appartenant à la classe, puis utilise le même contexte de périphérique pour toutes les fenêtres créées par la suite dans la classe.</span><span class="sxs-lookup"><span data-stu-id="097cf-108">The system creates the device context when creating the first window belonging to the class and then uses the same device context for all subsequently created windows in the class.</span></span> <span data-ttu-id="097cf-109">Initialement, le contexte de périphérique de la classe a les mêmes valeurs par défaut pour les attributs qu’un contexte de périphérique courant, mais l’application peut les modifier à tout moment.</span><span class="sxs-lookup"><span data-stu-id="097cf-109">Initially, the class device context has the same default values for attributes as a common device context, but the application can modify these at any time.</span></span> <span data-ttu-id="097cf-110">Le système conserve toutes les modifications, à l’exception de la région de découpage et de l’origine de l’appareil, jusqu’à ce que la dernière fenêtre de la classe ait été détruite.</span><span class="sxs-lookup"><span data-stu-id="097cf-110">The system preserves all changes, except for the clipping region and device origin, until the last window in the class has been destroyed.</span></span> <span data-ttu-id="097cf-111">Une modification apportée à une fenêtre s’applique à toutes les fenêtres de cette classe.</span><span class="sxs-lookup"><span data-stu-id="097cf-111">A change made for one window applies to all windows in that class.</span></span>

<span data-ttu-id="097cf-112">Une application peut récupérer le descripteur du contexte de périphérique de la classe à l’aide de la fonction [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) à tout moment après la création de la première fenêtre.</span><span class="sxs-lookup"><span data-stu-id="097cf-112">An application can retrieve the handle to the class device context by using the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) function any time after the first window has been created.</span></span> <span data-ttu-id="097cf-113">L’application peut conserver et utiliser le handle sans le libérer, car le contexte de périphérique de la classe ne fait pas partie du cache de contexte de périphérique d’affichage.</span><span class="sxs-lookup"><span data-stu-id="097cf-113">The application can keep and use the handle without releasing it because the class device context is not part of the display device context cache.</span></span> <span data-ttu-id="097cf-114">Si l’application crée une autre fenêtre dans la même classe de fenêtre, l’application doit récupérer à nouveau le contexte de périphérique de la classe.</span><span class="sxs-lookup"><span data-stu-id="097cf-114">If the application creates another window in the same window class, the application must retrieve the class device context again.</span></span> <span data-ttu-id="097cf-115">La récupération du contexte de périphérique définit l’origine de l’appareil et la région de découpage appropriées pour la nouvelle fenêtre.</span><span class="sxs-lookup"><span data-stu-id="097cf-115">Retrieving the device context sets the correct device origin and clipping region for the new window.</span></span> <span data-ttu-id="097cf-116">Une fois que l’application a récupéré la classe du contexte de périphérique pour une nouvelle fenêtre de la classe, le contexte de périphérique ne peut plus être utilisé pour dessiner dans la fenêtre d’origine sans la récupérer pour cette fenêtre.</span><span class="sxs-lookup"><span data-stu-id="097cf-116">After the application retrieves the class device context for a new window in the class, the device context can no longer be used to draw in the original window without again retrieving it for that window.</span></span> <span data-ttu-id="097cf-117">En général, chaque fois qu’il doit dessiner dans une fenêtre, une application doit récupérer explicitement le contexte de périphérique de la classe pour la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="097cf-117">In general, each time it must draw in a window, an application must explicitly retrieve the class device context for the window.</span></span>

<span data-ttu-id="097cf-118">Les applications qui utilisent des contextes de périphérique de classe doivent toujours appeler [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) lors du traitement d’un message de [**\_ peinture WM**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="097cf-118">Applications that use class device contexts should always call [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) when processing a [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="097cf-119">La fonction définit l’origine de l’appareil et la région de découpage appropriées pour la fenêtre et intègre la région de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="097cf-119">The function sets the correct device origin and clipping region for the window, and incorporates the update region.</span></span> <span data-ttu-id="097cf-120">L’application doit également appeler [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) pour restaurer le signe insertion si **BeginPaint** le rend HID.</span><span class="sxs-lookup"><span data-stu-id="097cf-120">The application should also call [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) to restore the caret if **BeginPaint** hid it.</span></span> <span data-ttu-id="097cf-121">**EndPaint** n’a aucun autre effet sur un contexte de périphérique de classe.</span><span class="sxs-lookup"><span data-stu-id="097cf-121">**EndPaint** has no other effect on a class device context.</span></span>

<span data-ttu-id="097cf-122">Le système transmet le contexte de périphérique de la classe lors de l’envoi du message [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) à l’application, ce qui permet aux valeurs d’attribut actuelles d’affecter tout dessin effectué par l’application ou le système lors du traitement de ce message.</span><span class="sxs-lookup"><span data-stu-id="097cf-122">The system passes the class device context when sending the [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message to the application, permitting the current attribute values to affect any drawing carried out by the application or the system when processing this message.</span></span> <span data-ttu-id="097cf-123">Comme c’est le cas avec une fenêtre ayant un contexte de périphérique privé, une application peut utiliser [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) pour forcer le système à retourner un contexte de périphérique courant pour la fenêtre qui a un contexte de périphérique de classe.</span><span class="sxs-lookup"><span data-stu-id="097cf-123">As it could with a window having a private device context, an application can use [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) to force the system to return a common device context for the window that has a class device context.</span></span>

<span data-ttu-id="097cf-124">L’utilisation de contextes de périphérique de classe n’est pas recommandée.</span><span class="sxs-lookup"><span data-stu-id="097cf-124">Using class device contexts is not recommended.</span></span>

 

 
