---
description: Les bitmaps dépendantes de l’appareil (DDB) sont décrites à l’aide d’une structure unique, la structure BITMAP.
ms.assetid: 63ff9cd6-cd07-4085-b166-268e4d9b7aad
title: Device-Dependent des bitmaps
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 92a3de2c59509c71b38f9981df330b3b28effa26
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104114682"
---
# <a name="device-dependent-bitmaps"></a><span data-ttu-id="f957d-103">Device-Dependent des bitmaps</span><span class="sxs-lookup"><span data-stu-id="f957d-103">Device-Dependent Bitmaps</span></span>

<span data-ttu-id="f957d-104">Les bitmaps dépendantes de l’appareil (DDB) sont décrites à l’aide d’une structure unique, la structure [**bitmap**](/windows/win32/api/wingdi/ns-wingdi-bitmap) .</span><span class="sxs-lookup"><span data-stu-id="f957d-104">Device-dependent bitmaps (DDBs) are described by using a single structure, the [**BITMAP**](/windows/win32/api/wingdi/ns-wingdi-bitmap) structure.</span></span> <span data-ttu-id="f957d-105">Les membres de cette structure spécifient la largeur et la hauteur d’une zone rectangulaire, en pixels ; largeur du tableau qui mappe les entrées de la palette d’appareils aux pixels ; et le format de couleur de l’appareil, en termes de plans de couleur et de bits par pixel.</span><span class="sxs-lookup"><span data-stu-id="f957d-105">The members of this structure specify the width and height of a rectangular region, in pixels; the width of the array that maps entries from the device palette to pixels; and the device's color format, in terms of color planes and bits per pixel.</span></span> <span data-ttu-id="f957d-106">Une application peut récupérer le format de couleur d’un appareil en appelant la fonction [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) et en spécifiant les constantes appropriées.</span><span class="sxs-lookup"><span data-stu-id="f957d-106">An application can retrieve the color format of a device by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function and specifying the appropriate constants.</span></span> <span data-ttu-id="f957d-107">Notez qu’une DDB ne contient pas de valeurs de couleur ; au lieu de cela, les couleurs sont dans un format dépendant du périphérique.</span><span class="sxs-lookup"><span data-stu-id="f957d-107">Note that a DDB does not contain color values; instead, the colors are in a device-dependent format.</span></span> <span data-ttu-id="f957d-108">Pour plus d’informations, consultez [couleur dans les bitmaps](color-in-bitmaps.md).</span><span class="sxs-lookup"><span data-stu-id="f957d-108">For more information, see [Color in Bitmaps](color-in-bitmaps.md).</span></span> <span data-ttu-id="f957d-109">Étant donné que chaque périphérique peut avoir son propre ensemble de couleurs, une DDB créée pour un périphérique peut ne pas s’afficher correctement sur un autre appareil.</span><span class="sxs-lookup"><span data-stu-id="f957d-109">Because each device can have its own set of colors, a DDB created for one device may not display well on a different device.</span></span>

<span data-ttu-id="f957d-110">Pour utiliser une DDB dans un contexte de périphérique, elle doit avoir l’organisation de couleur de ce contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="f957d-110">To use a DDB in a device context, it must have the color organization of that device context.</span></span> <span data-ttu-id="f957d-111">Par conséquent, un DDB est souvent appelé *bitmap compatible* et il offre généralement de meilleures performances GDI qu’un dib.</span><span class="sxs-lookup"><span data-stu-id="f957d-111">Thus, a DDB is often called a *compatible bitmap* and it usually has better GDI performance than a DIB.</span></span> <span data-ttu-id="f957d-112">Par exemple, pour créer une image bitmap pour la mémoire vidéo, il est préférable d’utiliser une image bitmap compatible avec le même format de couleur que l’affichage principal.</span><span class="sxs-lookup"><span data-stu-id="f957d-112">For example, to create a bitmap for video memory, it is best to use a compatible bitmap with the same color format as the primary display.</span></span> <span data-ttu-id="f957d-113">Une fois dans la mémoire vidéo, le rendu sur la bitmap et son affichage à l’écran sont beaucoup plus rapides qu’à partir d’une surface de mémoire système ou directement d’un DIB.</span><span class="sxs-lookup"><span data-stu-id="f957d-113">Once in video memory, rendering to the bitmap and displaying it to the screen are significantly faster than from a system memory surface or directly from a DIB.</span></span>

<span data-ttu-id="f957d-114">En plus d’activer de meilleures performances GDI, les bitmaps compatibles sont utilisées pour capturer des images (voir [capture d’une image](capturing-an-image.md) ) et pour créer des bitmaps au moment de l’exécution pour les menus, consultez « Création de l’image bitmap » dans (voir [utilisation de menus](../menurc/using-menus.md) ).</span><span class="sxs-lookup"><span data-stu-id="f957d-114">In addition to enabling better GDI performance, compatible bitmaps are used to capture images (see [Capturing an Image](capturing-an-image.md) ) and to create bitmaps at run time for menus see "Creating the Bitmap" in (see [Using Menus](../menurc/using-menus.md) ).</span></span>

<span data-ttu-id="f957d-115">Pour transférer une image bitmap entre des appareils avec une organisation de couleurs différente, utilisez [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) pour convertir l’image bitmap compatible en dib et appelez [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) ou [**STRETCHDIBITS**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) pour afficher le fichier DIB sur le deuxième appareil.</span><span class="sxs-lookup"><span data-stu-id="f957d-115">To transfer a bitmap between devices with different color organization, use [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) to convert the compatible bitmap to a DIB and call [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) or [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) to display the DIB to the second device.</span></span>

<span data-ttu-id="f957d-116">Il existe deux types de DDB : Ignorable et ne peut pas être ignoré.</span><span class="sxs-lookup"><span data-stu-id="f957d-116">There are two types of DDBs: discardable and nondiscardable.</span></span> <span data-ttu-id="f957d-117">Une DDB pouvant être ignorée est une bitmap que le système ignore si l’image bitmap n’est pas sélectionnée dans un contrôleur de réseau et si la mémoire système est insuffisante.</span><span class="sxs-lookup"><span data-stu-id="f957d-117">A discardable DDB is a bitmap that the system discards if the bitmap is not selected into a DC and if system memory is low.</span></span> <span data-ttu-id="f957d-118">La fonction [**CreateDiscardableBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-creatediscardablebitmap) crée des bitmaps supprimables.</span><span class="sxs-lookup"><span data-stu-id="f957d-118">The [**CreateDiscardableBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-creatediscardablebitmap) function creates discardable bitmaps.</span></span> <span data-ttu-id="f957d-119">Les fonctions [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap)et [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect) créent des bitmaps qui ne sont pas ignorables.</span><span class="sxs-lookup"><span data-stu-id="f957d-119">The [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap), and [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect) functions create nondiscardable bitmaps.</span></span>

<span data-ttu-id="f957d-120">Une application peut créer un DDB à partir d’un DIB en initialisant les structures requises et en appelant la fonction [**CreateDIBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createdibitmap) .</span><span class="sxs-lookup"><span data-stu-id="f957d-120">An application can create a DDB from a DIB by initializing the required structures and calling the [**CreateDIBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createdibitmap) function.</span></span> <span data-ttu-id="f957d-121">La spécification de l' \_ initialisation CBM dans l’appel à **CreateDIBitmap** équivaut à appeler la fonction [**CREATECOMPATIBLEBITMAP**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) pour créer un DDB au format de l’appareil, puis à appeler la fonction [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) pour convertir les bits DIB en DDB.</span><span class="sxs-lookup"><span data-stu-id="f957d-121">Specifying CBM\_INIT in the call to **CreateDIBitmap** is equivalent to calling the [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) function to create a DDB in the format of the device and then calling the [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) function to translate the DIB bits to the DDB.</span></span> <span data-ttu-id="f957d-122">Pour déterminer si un appareil prend en charge la fonction **SetDIBits** , appelez la fonction [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , en spécifiant RC \_ di \_ bitmap comme indicateur RasterCaps.</span><span class="sxs-lookup"><span data-stu-id="f957d-122">To determine whether a device supports the **SetDIBits** function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DI\_BITMAP as the RASTERCAPS flag.</span></span>

 

 
