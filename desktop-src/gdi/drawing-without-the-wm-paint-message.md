---
description: Bien que les applications exécutent la plupart des opérations de dessin pendant le \_ traitement du message de peinture WM, il est parfois plus efficace pour une application de dessiner directement dans une fenêtre sans compter sur le \_ message WM Paint.
ms.assetid: 2d015879-58d2-4cbe-b1cc-445f2e8fd316
title: Dessin sans le message WM_PAINT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66695e85b700de6f62366dedb6fe082f410d4385
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103863646"
---
# <a name="drawing-without-the-wm_paint-message"></a><span data-ttu-id="1623b-103">Dessin sans le \_ message WM Paint</span><span class="sxs-lookup"><span data-stu-id="1623b-103">Drawing Without the WM\_PAINT Message</span></span>

<span data-ttu-id="1623b-104">Bien que les applications exécutent la plupart des opérations de dessin pendant le traitement du message de [**\_ peinture WM**](wm-paint.md) , il est parfois plus efficace pour une application de dessiner directement dans une fenêtre sans compter sur le message **WM \_ Paint** .</span><span class="sxs-lookup"><span data-stu-id="1623b-104">Although applications carry out most drawing operations while the [**WM\_PAINT**](wm-paint.md) message is processing, it is sometimes more efficient for an application to draw directly in a window without relying on the **WM\_PAINT** message.</span></span> <span data-ttu-id="1623b-105">Cela peut être utile lorsque l’utilisateur a besoin d’un retour immédiat, par exemple lors de la sélection de texte et du déplacement ou du dimensionnement d’un objet.</span><span class="sxs-lookup"><span data-stu-id="1623b-105">This can be useful when the user needs immediate feedback, such as when selecting text and dragging or sizing an object.</span></span> <span data-ttu-id="1623b-106">Dans ce cas, l’application se dessine généralement lors du traitement des messages du clavier ou de la souris.</span><span class="sxs-lookup"><span data-stu-id="1623b-106">In such cases, the application usually draws while processing keyboard or mouse messages.</span></span>

<span data-ttu-id="1623b-107">Pour dessiner dans une fenêtre sans utiliser un message [**WM \_ Paint**](wm-paint.md) , l’application utilise la fonction [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) ou [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) pour récupérer un contexte de périphérique d’affichage pour la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="1623b-107">To draw in a window without using a [**WM\_PAINT**](wm-paint.md) message, the application uses the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) or [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function to retrieve a display device context for the window.</span></span> <span data-ttu-id="1623b-108">Avec le contexte de périphérique d’affichage, l’application peut dessiner dans la fenêtre et éviter toute intrusion dans d’autres fenêtres.</span><span class="sxs-lookup"><span data-stu-id="1623b-108">With the display device context, the application can draw in the window and avoid intruding into other windows.</span></span> <span data-ttu-id="1623b-109">Lorsque l’application a terminé le dessin, elle appelle la fonction [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) pour libérer le contexte de périphérique d’affichage en vue d’une utilisation par d’autres applications.</span><span class="sxs-lookup"><span data-stu-id="1623b-109">When the application has finished drawing, it calls the [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function to release the display device context for use by other applications.</span></span>

<span data-ttu-id="1623b-110">Quand vous dessinez sans utiliser un message [**WM \_ Paint**](wm-paint.md) , l’application n’invalide généralement pas la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="1623b-110">When drawing without using a [**WM\_PAINT**](wm-paint.md) message, the application usually does not invalidate the window.</span></span> <span data-ttu-id="1623b-111">Au lieu de cela, il se dessine de manière à ce qu’il puisse facilement restaurer la fenêtre et supprimer le dessin.</span><span class="sxs-lookup"><span data-stu-id="1623b-111">Instead, it draws in such a fashion that it can easily restore the window and remove the drawing.</span></span> <span data-ttu-id="1623b-112">Par exemple, quand l’utilisateur sélectionne du texte ou un objet, l’application dessine généralement la sélection en inversant tout ce qui se trouve déjà dans la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="1623b-112">For example, when the user selects text or an object, the application typically draws the selection by inverting whatever is already in the window.</span></span> <span data-ttu-id="1623b-113">L’application peut supprimer la sélection et restaurer le contenu d’origine de la fenêtre en l’inverse simplement.</span><span class="sxs-lookup"><span data-stu-id="1623b-113">The application can remove the selection and restore the original contents of the window by simply inverting again.</span></span>

<span data-ttu-id="1623b-114">L’application est chargée de gérer attentivement les modifications apportées à la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="1623b-114">The application is responsible for carefully managing any changes it makes to the window.</span></span> <span data-ttu-id="1623b-115">En particulier, si une application dessine une sélection et qu’un message de [**\_ peinture WM**](wm-paint.md) intermédiaire se produit, l’application doit s’assurer que tout dessin effectué pendant le message n’endommage pas la sélection.</span><span class="sxs-lookup"><span data-stu-id="1623b-115">In particular, if an application draws a selection and an intervening [**WM\_PAINT**](wm-paint.md) message occurs, the application must ensure that any drawing done during the message does not corrupt the selection.</span></span> <span data-ttu-id="1623b-116">Pour éviter cela, de nombreuses applications suppriment la sélection, effectuent des opérations de dessin habituelles, puis restaurent la sélection lorsque le dessin est terminé.</span><span class="sxs-lookup"><span data-stu-id="1623b-116">To avoid this, many applications remove the selection, carry out usual drawing operations, and then restore the selection when drawing is complete.</span></span>

 

 



