---
description: Une application obtient un DC d’affichage en appelant la fonction BeginPaint, GetDC ou GetDCEx et en identifiant la fenêtre dans laquelle la sortie correspondante s’affiche.
ms.assetid: 8f952d68-ee52-4e63-9f09-80a14c755d31
title: Afficher les contextes de périphérique
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 41d0eeb3055209ad99a6a50fd129f9f9c064bf52
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103754445"
---
# <a name="display-device-contexts"></a><span data-ttu-id="61579-103">Afficher les contextes de périphérique</span><span class="sxs-lookup"><span data-stu-id="61579-103">Display Device Contexts</span></span>

<span data-ttu-id="61579-104">Une application obtient un DC d’affichage en appelant la fonction [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc)ou [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) et en identifiant la fenêtre dans laquelle la sortie correspondante s’affiche.</span><span class="sxs-lookup"><span data-stu-id="61579-104">An application obtains a display DC by calling the [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), or [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function and identifying the window in which the corresponding output will appear.</span></span> <span data-ttu-id="61579-105">En règle générale, une application obtient un contrôleur de domaine d’affichage uniquement lorsqu’il doit le dessiner dans la zone cliente.</span><span class="sxs-lookup"><span data-stu-id="61579-105">Typically, an application obtains a display DC only when it must draw in the client area.</span></span> <span data-ttu-id="61579-106">Toutefois, il est possible d’obtenir un [contexte de périphérique Windows](#window-device-contexts) en appelant la fonction [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc) .</span><span class="sxs-lookup"><span data-stu-id="61579-106">However, one may obtain a [window device context](#window-device-contexts) by calling the [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc) function.</span></span> <span data-ttu-id="61579-107">Une fois l’application terminée, elle doit libérer le DC en appelant la fonction [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) ou [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) .</span><span class="sxs-lookup"><span data-stu-id="61579-107">When the application is finished drawing, it must release the DC by calling the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) or [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function.</span></span>

<span data-ttu-id="61579-108">Il existe cinq types de contrôleurs de contrôleur pour les affichages vidéo :</span><span class="sxs-lookup"><span data-stu-id="61579-108">There are five types of DCs for video displays:</span></span>

-   <span data-ttu-id="61579-109">Classe</span><span class="sxs-lookup"><span data-stu-id="61579-109">Class</span></span>
-   <span data-ttu-id="61579-110">Courant</span><span class="sxs-lookup"><span data-stu-id="61579-110">Common</span></span>
-   <span data-ttu-id="61579-111">Privées</span><span class="sxs-lookup"><span data-stu-id="61579-111">Private</span></span>
-   <span data-ttu-id="61579-112">Fenêtre</span><span class="sxs-lookup"><span data-stu-id="61579-112">Window</span></span>
-   <span data-ttu-id="61579-113">Parent</span><span class="sxs-lookup"><span data-stu-id="61579-113">Parent</span></span>

## <a name="class-device-contexts"></a><span data-ttu-id="61579-114">Contextes de périphérique de classe</span><span class="sxs-lookup"><span data-stu-id="61579-114">Class Device Contexts</span></span>

<span data-ttu-id="61579-115">Les *contextes de périphérique de classe* sont pris en charge uniquement pour la compatibilité avec les versions 16 bits de Windows.</span><span class="sxs-lookup"><span data-stu-id="61579-115">*Class device contexts* are supported strictly for compatibility with 16-bit versions of Windows.</span></span> <span data-ttu-id="61579-116">Quand vous écrivez votre application, évitez d’utiliser le contexte de périphérique de la classe ; Utilisez un contexte de périphérique privé à la place.</span><span class="sxs-lookup"><span data-stu-id="61579-116">When writing your application, avoid using the class device context; use a private device context instead.</span></span>

## <a name="common-device-contexts"></a><span data-ttu-id="61579-117">Contextes de périphérique courants</span><span class="sxs-lookup"><span data-stu-id="61579-117">Common Device Contexts</span></span>

<span data-ttu-id="61579-118">Les *contextes de périphérique courants* affichent les contrôleurs de réseau qui sont conservés dans un cache spécial par le système.</span><span class="sxs-lookup"><span data-stu-id="61579-118">*Common device contexts* are display DCs maintained in a special cache by the system.</span></span> <span data-ttu-id="61579-119">Les contextes de périphérique courants sont utilisés dans les applications qui effectuent des opérations de dessin peu fréquentes.</span><span class="sxs-lookup"><span data-stu-id="61579-119">Common device contexts are used in applications that perform infrequent drawing operations.</span></span> <span data-ttu-id="61579-120">Avant que le système retourne le handle de contrôleur de réseau, il initialise le contexte de périphérique courant avec les objets, les attributs et les modes par défaut.</span><span class="sxs-lookup"><span data-stu-id="61579-120">Before the system returns the DC handle, it initializes the common device context with default objects, attributes, and modes.</span></span> <span data-ttu-id="61579-121">Toutes les opérations de dessin effectuées par l’application utilisent ces valeurs par défaut, sauf si l’une des fonctions GDI est appelée pour sélectionner un nouvel objet, modifier les attributs d’un objet existant ou sélectionner un nouveau mode.</span><span class="sxs-lookup"><span data-stu-id="61579-121">Any drawing operations performed by the application use these defaults unless one of the GDI functions is called to select a new object, change the attributes of an existing object, or select a new mode.</span></span>

<span data-ttu-id="61579-122">Étant donné qu’il n’existe qu’un nombre limité de contextes d’appareil communs, une application doit les libérer une fois le dessin terminé.</span><span class="sxs-lookup"><span data-stu-id="61579-122">Because only a limited number of common device contexts exist, an application should release them after it has finished drawing.</span></span> <span data-ttu-id="61579-123">Lorsque l’application libère un contexte de périphérique courant, toute modification apportée aux données par défaut est perdue.</span><span class="sxs-lookup"><span data-stu-id="61579-123">When the application releases a common device context, any changes to the default data are lost.</span></span>

## <a name="private-device-contexts"></a><span data-ttu-id="61579-124">Contextes de périphérique privé</span><span class="sxs-lookup"><span data-stu-id="61579-124">Private Device Contexts</span></span>

<span data-ttu-id="61579-125">Les *contextes d’appareil privé* sont des contrôleurs de contrôle d’affichage qui, contrairement aux contextes de périphérique courants, conservent les modifications apportées aux données par défaut même après leur publication par une application.</span><span class="sxs-lookup"><span data-stu-id="61579-125">*Private device contexts* are display DCs that, unlike common device contexts, retain any changes to the default data even after an application releases them.</span></span> <span data-ttu-id="61579-126">Les contextes d’appareil privé sont utilisés dans les applications qui effectuent de nombreuses opérations de dessin, telles que les applications de conception assistée par ordinateur (CAO), les applications de publication de bureau, les applications de dessin et de peinture, etc.</span><span class="sxs-lookup"><span data-stu-id="61579-126">Private device contexts are used in applications that perform numerous drawing operations such as computer-aided design (CAD) applications, desktop-publishing applications, drawing and painting applications, and so on.</span></span> <span data-ttu-id="61579-127">Les contextes de périphérique privé ne font pas partie de la mémoire cache du système et ne doivent donc pas être libérés après utilisation.</span><span class="sxs-lookup"><span data-stu-id="61579-127">Private device contexts are not part of the system cache and therefore need not be released after use.</span></span> <span data-ttu-id="61579-128">Le système supprime automatiquement un contexte de périphérique privé une fois que la dernière fenêtre de cette classe a été détruite.</span><span class="sxs-lookup"><span data-stu-id="61579-128">The system automatically removes a private device context after the last window of that class has been destroyed.</span></span>

<span data-ttu-id="61579-129">Une application crée un contexte de périphérique privé en spécifiant tout d’abord le \_ style de classe de fenêtre CS OWNDC lorsqu’il initialise le membre **style** de la structure [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) et appelle la fonction [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="61579-129">An application creates a private device context by first specifying the CS\_OWNDC window-class style when it initializes the **style** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure and calls the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="61579-130">(Pour plus d’informations sur les classes de fenêtre, consultez [classes de fenêtre](../winmsg/window-classes.md).)</span><span class="sxs-lookup"><span data-stu-id="61579-130">(For more information about window classes, see [Window Classes](../winmsg/window-classes.md).)</span></span>

<span data-ttu-id="61579-131">Après la création d’une fenêtre avec le \_ style cs OWNDC, une application peut appeler la fonction [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex)ou [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) une fois pour obtenir un handle identifiant un contexte de périphérique privé.</span><span class="sxs-lookup"><span data-stu-id="61579-131">After creating a window with the CS\_OWNDC style, an application can call the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex), or [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) function once to obtain a handle identifying a private device context.</span></span> <span data-ttu-id="61579-132">L’application peut continuer à utiliser ce handle (et le contrôleur de service associé) jusqu’à ce qu’il supprime la fenêtre créée avec cette classe.</span><span class="sxs-lookup"><span data-stu-id="61579-132">The application can continue using this handle (and the associated DC) until it deletes the window created with this class.</span></span> <span data-ttu-id="61579-133">Toute modification apportée aux objets graphiques et à leurs attributs, ou aux modes graphiques, est conservée par le système jusqu’à ce que la fenêtre soit supprimée.</span><span class="sxs-lookup"><span data-stu-id="61579-133">Any changes to graphic objects and their attributes, or graphic modes are retained by the system until the window is deleted.</span></span>

## <a name="window-device-contexts"></a><span data-ttu-id="61579-134">Contextes de périphérique Windows</span><span class="sxs-lookup"><span data-stu-id="61579-134">Window Device Contexts</span></span>

<span data-ttu-id="61579-135">Un *contexte de périphérique de fenêtre* permet à une application de dessiner n’importe où dans une fenêtre, y compris la zone non cliente.</span><span class="sxs-lookup"><span data-stu-id="61579-135">A *window device context* enables an application to draw anywhere in a window, including the nonclient area.</span></span> <span data-ttu-id="61579-136">Les contextes de périphérique Windows sont généralement utilisés par les applications qui traitent les messages [**WM \_ NCPAINT**](wm-ncpaint.md) et [**WM \_ NCACTIVATE**](../winmsg/wm-ncactivate.md) pour Windows avec des zones non clientes personnalisées.</span><span class="sxs-lookup"><span data-stu-id="61579-136">Window device contexts are typically used by applications that process the [**WM\_NCPAINT**](wm-ncpaint.md) and [**WM\_NCACTIVATE**](../winmsg/wm-ncactivate.md) messages for windows with custom nonclient areas.</span></span> <span data-ttu-id="61579-137">L’utilisation d’un contexte de périphérique Windows n’est pas recommandée à d’autres fins.</span><span class="sxs-lookup"><span data-stu-id="61579-137">Using a window device context is not recommended for any other purpose.</span></span> <span data-ttu-id="61579-138">Pour plus d’informations, consultez [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc).</span><span class="sxs-lookup"><span data-stu-id="61579-138">For more information; see [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc).</span></span>

## <a name="parent-device-contexts"></a><span data-ttu-id="61579-139">Contextes de périphérique parent</span><span class="sxs-lookup"><span data-stu-id="61579-139">Parent Device Contexts</span></span>

<span data-ttu-id="61579-140">Un *contexte de périphérique parent* permet à une application de réduire le temps nécessaire pour configurer la zone de découpage pour une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="61579-140">A *parent device context* enables an application to minimize the time necessary to set up the clipping region for a window.</span></span> <span data-ttu-id="61579-141">Une application utilise généralement des contextes d’appareil parent pour accélérer le dessin des fenêtres de contrôle sans nécessiter un contexte de périphérique ou de classe privé.</span><span class="sxs-lookup"><span data-stu-id="61579-141">An application typically uses parent device contexts to speed up drawing for control windows without requiring a private or class device context.</span></span> <span data-ttu-id="61579-142">Par exemple, le système utilise des contextes de périphérique parent pour le bouton de commande et les contrôles d’édition.</span><span class="sxs-lookup"><span data-stu-id="61579-142">For example, the system uses parent device contexts for push button and edit controls.</span></span> <span data-ttu-id="61579-143">Les contextes de périphérique parent sont destinés à être utilisés uniquement avec les fenêtres enfants, jamais avec des fenêtres contextuelles ou de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="61579-143">Parent device contexts are intended for use with child windows only, never with top-level or pop-up windows.</span></span> <span data-ttu-id="61579-144">Pour plus d’informations, consultez [contextes de périphérique d’affichage parent](parent-display-device-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="61579-144">For more information; see [Parent Display Device Contexts](parent-display-device-contexts.md).</span></span>

 

 
