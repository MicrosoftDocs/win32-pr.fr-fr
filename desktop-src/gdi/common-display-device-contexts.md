---
description: Un contexte de périphérique courant est utilisé pour le dessin dans la zone cliente de la fenêtre.
ms.assetid: 63c4f775-b1a3-4f7c-808b-81c596f26353
title: Contextes de périphérique d’affichage courants
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 890b0235784ec1ed11c8ce3a553244629a008d75
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103951559"
---
# <a name="common-display-device-contexts"></a><span data-ttu-id="cd7d9-103">Contextes de périphérique d’affichage courants</span><span class="sxs-lookup"><span data-stu-id="cd7d9-103">Common Display Device Contexts</span></span>

<span data-ttu-id="cd7d9-104">Un *contexte de périphérique courant* est utilisé pour le dessin dans la zone cliente de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-104">A *common device context* is used for drawing in the client area of the window.</span></span> <span data-ttu-id="cd7d9-105">Le système fournit par défaut un contexte de périphérique commun pour toute fenêtre dont la classe de fenêtre ne spécifie pas explicitement un style de contexte de périphérique d’affichage.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-105">The system provides a common device context by default for any window whose window class does not explicitly specify a display device context style.</span></span> <span data-ttu-id="cd7d9-106">Les contextes de périphérique courants sont généralement utilisés avec des fenêtres qui peuvent être dessinées sans modification étendue des attributs de contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-106">Common device contexts are typically used with windows that can be drawn without extensive changes to the device context attributes.</span></span> <span data-ttu-id="cd7d9-107">Les contextes de périphérique courants sont pratiques, car ils ne nécessitent pas de ressources mémoire ou système supplémentaires, mais ils peuvent être gênants si l’application doit configurer de nombreux attributs avant de les utiliser.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-107">Common device contexts are convenient because they do not require additional memory or system resources, but they can be inconvenient if the application must set up many attributes before using them.</span></span>

<span data-ttu-id="cd7d9-108">Le système récupère tous les contextes de périphérique courants à partir du cache de contexte de périphérique d’affichage.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-108">The system retrieves all common device contexts from the display device context cache.</span></span> <span data-ttu-id="cd7d9-109">Une application peut récupérer un contexte de périphérique commun immédiatement après la création de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-109">An application can retrieve a common device context immediately after the window is created.</span></span> <span data-ttu-id="cd7d9-110">Étant donné que le contexte de périphérique commun provient du cache, l’application doit toujours libérer le contexte de périphérique dès que possible après le dessin.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-110">Because the common device context is from the cache, the application must always release the device context as soon as possible after drawing.</span></span> <span data-ttu-id="cd7d9-111">Une fois le contexte de périphérique commun libéré, il n’est plus valide et l’application ne doit pas essayer de le dessiner.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-111">After the common device context is released, it is no longer valid and the application must not attempt to draw with it.</span></span> <span data-ttu-id="cd7d9-112">Pour redessiner, l’application doit récupérer un nouveau contexte de périphérique courant et continuer à récupérer et à libérer un contexte de périphérique courant chaque fois qu’elle est dessinée dans la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-112">To draw again, the application must retrieve a new common device context, and continue to retrieve and release a common device context each time it draws in the window.</span></span> <span data-ttu-id="cd7d9-113">Si l’application récupère le handle de contexte de périphérique à l’aide de la fonction [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) , elle doit utiliser la fonction [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) pour libérer le handle.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-113">If the application retrieves the device context handle by using the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) function, it must use the [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function to release the handle.</span></span> <span data-ttu-id="cd7d9-114">De même, pour chaque fonction [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) , l’application doit utiliser une fonction [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) correspondante.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-114">Similarly, for each [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) function, the application must use a corresponding [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) function.</span></span>

<span data-ttu-id="cd7d9-115">Lorsque l’application récupère le contexte de périphérique, le système ajuste l’origine pour qu’elle s’aligne avec l’angle supérieur gauche de la zone cliente.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-115">When the application retrieves the device context, the system adjusts the origin so that it aligns with the upper left corner of the client area.</span></span> <span data-ttu-id="cd7d9-116">Il définit également la zone de découpage afin que la sortie vers le contexte de périphérique soit découpée vers la zone cliente.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-116">It also sets the clipping region so that output to the device context is clipped to the client area.</span></span> <span data-ttu-id="cd7d9-117">Toute sortie qui apparaîtrait autrement en dehors de la zone cliente est découpée.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-117">Any output that would otherwise appear outside the client area is clipped.</span></span> <span data-ttu-id="cd7d9-118">Si l’application récupère le contexte de périphérique courant à l’aide de [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), le système comprend également la région de mise à jour dans la zone de découpage pour restreindre davantage la sortie.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-118">If the application retrieves the common device context by using [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), the system also includes the update region in the clipping region to further restrict the output.</span></span>

<span data-ttu-id="cd7d9-119">Quand une application libère un contexte de périphérique courant, le système restaure les valeurs par défaut pour les attributs du contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-119">When an application releases a common device context, the system restores the default values for the attributes of the device context.</span></span> <span data-ttu-id="cd7d9-120">Une application qui modifie des valeurs d’attribut doit le faire à chaque fois qu’elle récupère un contexte de périphérique commun.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-120">An application that modifies attribute values must do so each time it retrieves a common device context.</span></span> <span data-ttu-id="cd7d9-121">Le fait de libérer le contexte de périphérique libère tous les objets de dessin que l’application y a peut-être sélectionnés, de sorte que l’application n’a pas besoin de libérer ces objets avant de libérer le contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-121">Releasing the device context releases any drawing objects the application may have selected into it, so the application need not release these objects before releasing the device context.</span></span> <span data-ttu-id="cd7d9-122">Dans tous les cas, une application ne doit jamais supposer que le contexte de périphérique commun conserve les sélections non par défaut après sa libération.</span><span class="sxs-lookup"><span data-stu-id="cd7d9-122">In all cases, an application must never assume that the common device context retains nondefault selections after being released.</span></span>

 

 



