---
description: Dans le cadre de l’abstraction de l’appareil téléphonique définie par TSPI, l’interface TAPI et le fournisseur de services doivent tout d’abord subir l’initialisation de base.
ms.assetid: cd8bb328-fbd0-409c-8471-34ad4c2c8d93
title: Initialisation du SPI de téléphone
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1d0c54e313c2be3846aeb604217f5324ec0d8a8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106530645"
---
# <a name="phone-spi-initialization"></a><span data-ttu-id="cd6c4-103">Initialisation du SPI de téléphone</span><span class="sxs-lookup"><span data-stu-id="cd6c4-103">Phone SPI Initialization</span></span>

<span data-ttu-id="cd6c4-104">Dans le cadre de l’abstraction de l’appareil téléphonique définie par TSPI, l’interface TAPI et le fournisseur de services doivent tout d’abord subir l’initialisation de base.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-104">As part of the phone device abstraction defined by TSPI, TAPI and the service provider must first undergo basic initialization.</span></span> <span data-ttu-id="cd6c4-105">Cette initialisation de base est effectuée à la fois pour les moitiés de ligne et de téléphone de l’interface par le même ensemble d’étapes.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-105">This basic initialization is accomplished both for the line and phone halves of the interface by the same set of steps.</span></span> <span data-ttu-id="cd6c4-106">La première de ces étapes est la négociation de version d’interface.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-106">The first of these steps is interface version negotiation.</span></span> <span data-ttu-id="cd6c4-107">Pour ce faire, TAPI appelle la fonction [**TSPI \_ lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) .</span><span class="sxs-lookup"><span data-stu-id="cd6c4-107">TAPI performs this by calling the [**TSPI\_lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) function.</span></span> <span data-ttu-id="cd6c4-108">Cette fonction est généralement utilisée pour négocier pour le compte d’un périphérique de ligne individuel ; des appareils de ligne différents au sein du même fournisseur de services peuvent fonctionner selon différentes versions d’interface.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-108">This function is usually used to negotiate on behalf of an individual line device; different line devices within the same service provider may operate according to different interface versions.</span></span> <span data-ttu-id="cd6c4-109">L’interface TAPI transmet une valeur d’identificateur d’appareil réservée spéciale, [**initialiser la \_ négociation**](initialize-negotiation.md), pour indiquer qu’elle négocie une version d’interface globale pour les fonctions d’initialisation qui affectent l’ensemble du fournisseur de services, à la fois pour les lignes et les téléphones.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-109">TAPI passes a special reserved device identifier value, [**INITIALIZE\_NEGOTIATION**](initialize-negotiation.md), to indicate that it is negotiating an overall interface version for initialization functions that affect the entire service provider, both for lines and phones.</span></span>

<span data-ttu-id="cd6c4-110">Le résultat de cette négociation est passé aux procédures suivantes jusqu’à ce qu’un appareil téléphonique soit ouvert.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-110">The result of this negotiation is passed to subsequent procedures until a phone device is opened.</span></span> <span data-ttu-id="cd6c4-111">À ce moment-là, l’appareil téléphonique est validé dans une version d’interface particulière.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-111">At that time, the phone device becomes committed to a particular interface version.</span></span> <span data-ttu-id="cd6c4-112">Cette version de l’interface est implicite jusqu’à la fermeture du téléphone et n’a pas besoin d’être transmise aux fonctions suivantes qui fonctionnent sur un téléphone ouvert.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-112">This interface version is implicit until the phone is closed, and does not need to be passed to subsequent functions that operate on an opened phone.</span></span>

<span data-ttu-id="cd6c4-113">À la suite de la négociation de version d’interface globale, TAPI appelle la fonction [**TSPI \_ providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) .</span><span class="sxs-lookup"><span data-stu-id="cd6c4-113">Following overall interface version negotiation, TAPI calls the [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) function.</span></span> <span data-ttu-id="cd6c4-114">Cette fonction initialise le fournisseur de services, en lui donnant également les paramètres requis pour l’opération suivante.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-114">This function initializes the service provider, also giving it parameters required for subsequent operation.</span></span> <span data-ttu-id="cd6c4-115">Ces paramètres sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="cd6c4-115">These parameters include the following:</span></span>

-   <span data-ttu-id="cd6c4-116">*dwPermanentProviderID*: spécifie l’identificateur permanent du fournisseur de services initialisé, unique au sein des fournisseurs de services sur ce système.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-116">*dwPermanentProviderID*: Specifies the permanent identifier of the service provider being initialized, unique within the service providers on this system.</span></span>
-   <span data-ttu-id="cd6c4-117">*dwLineDeviceIDBase*: spécifie l’identificateur d’appareil le plus bas pour les appareils en ligne pris en charge par ce fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-117">*dwLineDeviceIDBase*: Specifies the lowest device identifier for the line devices supported by this service provider.</span></span>
-   <span data-ttu-id="cd6c4-118">*dwPhoneDeviceIDBase*: spécifie l’identificateur d’appareil le plus bas pour les appareils téléphoniques pris en charge par ce fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-118">*dwPhoneDeviceIDBase*: Specifies the lowest device identifier for the phone devices supported by this service provider.</span></span> <span data-ttu-id="cd6c4-119">Les appareils de la classe de l’appareil téléphonique téléphonique sont identifiés par des entiers à partir de zéro.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-119">Devices of the telephony phone device class are identified by integers starting from zero.</span></span> <span data-ttu-id="cd6c4-120">Cette plage d’identificateurs est contiguë sur la plage complète des appareils téléphoniques.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-120">This range of identifiers is contiguous across the full range of phone devices.</span></span> <span data-ttu-id="cd6c4-121">Étant donné qu’il peut y avoir plusieurs fournisseurs de services gérant des appareils téléphoniques dans un même système, chaque fournisseur de services obtient une partie contiguë de la plage totale.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-121">Because there may be multiple service providers managing phone devices in a single system, each service provider gets a contiguous portion of the total range.</span></span> <span data-ttu-id="cd6c4-122">Ce paramètre indique au fournisseur de services la valeur la plus faible dans sa partie de la plage.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-122">This parameter tells the service provider the lowest value in its portion of the range.</span></span> <span data-ttu-id="cd6c4-123">Le fournisseur de services, plutôt que TAPI, est chargé de mapper cette plage de variables à ses propres identificateurs d’appareil internes.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-123">The service provider, rather than TAPI, is responsible for mapping this variable range to its own internal device identifiers.</span></span> <span data-ttu-id="cd6c4-124">Cela permet au fournisseur du fournisseur de services de disposer d’une flexibilité suffisante pour utiliser les identificateurs d’appareil dans les extensions spécifiques à l’appareil, si besoin.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-124">This gives the service-provider vendor sufficient flexibility to use device identifiers in device-specific extensions if it wants.</span></span> <span data-ttu-id="cd6c4-125">Étant donné que le fournisseur de services sait quels identificateurs d’appareil apparaissent dans les paramètres et les structures de données définis par TAPI, il peut utiliser des identificateurs d’appareil cohérents dans les paramètres d’extension et les structures de données spécifiques à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-125">Because the service provider knows what device identifiers appear in TAPI-defined parameters and data structures, it can use consistent device identifiers in device-specific extension parameters and data structures.</span></span>
-   <span data-ttu-id="cd6c4-126">*dwNumLines*: spécifie le nombre d’appareils de ligne que ce fournisseur de services prend en charge.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-126">*dwNumLines*: Specifies how many line devices this service provider supports.</span></span>
-   <span data-ttu-id="cd6c4-127">*dwNumPhones*: spécifie le nombre d’appareils téléphoniques pris en charge par ce fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-127">*dwNumPhones*: Specifies how many phone devices this service provider supports.</span></span>
-   <span data-ttu-id="cd6c4-128">*lpfnCompletionProc*: spécifie la procédure que le fournisseur de services appelle pour signaler l’achèvement de toutes les procédures de fonctionnement asynchrones sur les appareils de ligne et de téléphone.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-128">*lpfnCompletionProc*: Specifies the procedure the service provider calls to report completion of all asynchronously operating procedures on line and phone devices.</span></span>

<span data-ttu-id="cd6c4-129">Après [**TSPI \_ providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit), les opérations normales, telles que l’ouverture de téléphones, peuvent être effectuées.</span><span class="sxs-lookup"><span data-stu-id="cd6c4-129">Following [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit), normal operations such as opening phones can be carried out.</span></span>

 

 
