---
description: Cette section contient la liste des messages dans l’interface TSPI (Telephony Service Provider Interface).
ms.assetid: 3d8bf980-81d6-49db-954f-af72458365dc
title: Messages TSPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f5772a1ccb0c07f03b2a17348ecf5e4834bb97a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106535567"
---
# <a name="tspi-messages"></a><span data-ttu-id="2c382-103">Messages TSPI</span><span class="sxs-lookup"><span data-stu-id="2c382-103">TSPI Messages</span></span>

<span data-ttu-id="2c382-104">Cette section contient la liste des messages dans l’interface TSPI (Telephony Service Provider Interface).</span><span class="sxs-lookup"><span data-stu-id="2c382-104">This section contains a list of the messages in the Telephony Service Provider Interface (TSPI).</span></span> <span data-ttu-id="2c382-105">Ces messages sont utilisés pour notifier l’interface TAPI de l’occurrence d’événements asynchrones qui se produisent spontanément au sein du fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="2c382-105">These messages are used to notify TAPI of the occurrence of asynchronous events that spontaneously occur within the service provider.</span></span> <span data-ttu-id="2c382-106">Le fournisseur de services transmet ces événements à l’interface TAPI en appelant une fonction de rappel [**LINEEVENT**](/windows/win32/api/tspi/nc-tspi-lineevent) ou [**PHONEEVENT**](/windows/desktop/api/tspi/nc-tspi-phoneevent) , selon que le fournisseur de services signale ou non un événement sur une ligne, un appel ou un appareil téléphonique.</span><span class="sxs-lookup"><span data-stu-id="2c382-106">The service provider passes these events to TAPI by calling a [**LINEEVENT**](/windows/win32/api/tspi/nc-tspi-lineevent) or [**PHONEEVENT**](/windows/desktop/api/tspi/nc-tspi-phoneevent) callback function, depending on whether the service provider is reporting an event on a line, call, or phone device.</span></span> <span data-ttu-id="2c382-107">La procédure **LINEEVENT** pour signaler des événements qui se produisent sur une ligne ou un appel est fournie au fournisseur de services au moment où la ligne est ouverte à l’aide de la fonction [**TSPI \_ lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) .</span><span class="sxs-lookup"><span data-stu-id="2c382-107">The **LINEEVENT** procedure for reporting events occurring on a line or call is supplied to the service provider at the time the line is opened with the [**TSPI\_lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) function.</span></span> <span data-ttu-id="2c382-108">La procédure **PHONEEVENT** pour signaler les événements qui se produisent sur un téléphone est fournie avec la fonction [**TSPI \_ phoneOpen**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen) .</span><span class="sxs-lookup"><span data-stu-id="2c382-108">The **PHONEEVENT** procedure for reporting events occurring on a phone is supplied with the [**TSPI\_phoneOpen**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen) function.</span></span>

<span data-ttu-id="2c382-109">Ces événements spontanés ne sont pas sollicités par l’interface TAPI dans le sens où ils ne constituent pas une réponse directe à une demande.</span><span class="sxs-lookup"><span data-stu-id="2c382-109">These spontaneous events are unsolicited by TAPI in the sense that they are not a direct response to any request.</span></span> <span data-ttu-id="2c382-110">Ces événements diffèrent de ceux qui signalent la fin des requêtes effectuées par l’interface TAPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-110">These events contrast with those reporting completion of requests made by TAPI.</span></span> <span data-ttu-id="2c382-111">Ces événements d’achèvement sont signalés par le biais de la fonction de rappel d' [**\_ achèvement asynchrone**](/windows/win32/api/tspi/nc-tspi-async_completion) .</span><span class="sxs-lookup"><span data-stu-id="2c382-111">Such completion events are reported through the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback function.</span></span>

<span data-ttu-id="2c382-112">Les profils de paramètre des procédures événementielles spontanées incluent des paramètres qui identifient l’objet approprié pour lequel l’événement est signalé (téléphone, ligne ou appel).</span><span class="sxs-lookup"><span data-stu-id="2c382-112">The parameter profiles for the spontaneous event procedures include parameters that identify the relevant object for which the event is being reported (phone, line, or call).</span></span> <span data-ttu-id="2c382-113">L’identification se présente sous la forme d’un handle opaque dont l’interprétation exacte n’est pas publiée par TSPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-113">The identification is in the form of an opaque handle whose exact interpretation is not published by TSPI.</span></span> <span data-ttu-id="2c382-114">L’interface TAPI détermine en interne la relation entre ces handles opaques et les structures de données utilisées pour représenter les appareils.</span><span class="sxs-lookup"><span data-stu-id="2c382-114">TAPI internally determines the relationship between these opaque handles and whatever data structures it used to represent the devices.</span></span>

<span data-ttu-id="2c382-115">Le profil de paramètre des procédures événementielles spontanées comprend également un paramètre de message identifiant le type du message.</span><span class="sxs-lookup"><span data-stu-id="2c382-115">The parameter profile for spontaneous event procedures also includes a message parameter identifying the type of the message.</span></span> <span data-ttu-id="2c382-116">Chaque type de message a une définition correspondante qui détermine les descripteurs inclus, ainsi que d’autres paramètres et leurs significations.</span><span class="sxs-lookup"><span data-stu-id="2c382-116">Each message type has a corresponding definition that determines the handles that are included, along with other parameters and their meanings.</span></span> <span data-ttu-id="2c382-117">Il existe une forte correspondance entre les messages qui s’affichent au niveau du TSPI et ceux qui apparaissent au niveau de l’interface TAPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-117">There is a very strong correspondence between the messages appearing at the TSPI level and those that appear at the TAPI level.</span></span> <span data-ttu-id="2c382-118">Il s’agit des règles générales de correspondance :</span><span class="sxs-lookup"><span data-stu-id="2c382-118">These are the general rules of correspondence:</span></span>

-   <span data-ttu-id="2c382-119">L’ensemble de messages est quasiment identique.</span><span class="sxs-lookup"><span data-stu-id="2c382-119">The set of messages is nearly identical.</span></span> <span data-ttu-id="2c382-120">Lorsque les messages correspondent, le même nom et la même valeur de message sont utilisés au niveau TSPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-120">Where messages correspond, the same message name and value is used at the TSPI level.</span></span>
-   <span data-ttu-id="2c382-121">Les handles qui s’affichent au niveau TSPI sont les types opaques définis par la spécification TSPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-121">Handles appearing at the TSPI level are the opaque types defined by the TSPI specification.</span></span> <span data-ttu-id="2c382-122">Ces types (et leur interprétation) diffèrent de ceux au niveau de l’interface TAPI, bien qu’ils fassent référence à la même classe de périphérique.</span><span class="sxs-lookup"><span data-stu-id="2c382-122">These types (and their interpretation) differ from those at the TAPI level, although they refer to the same class of device.</span></span> <span data-ttu-id="2c382-123">Par exemple, lorsqu’un message TAPI inclut un handle HLINE, le message TSPI correspondant inclut généralement un handle [**HTAPILINE**](htapiline.md) .</span><span class="sxs-lookup"><span data-stu-id="2c382-123">For example, where a TAPI message includes an HLINE handle, the corresponding TSPI message would typically include an [**HTAPILINE**](htapiline.md) handle.</span></span>
-   <span data-ttu-id="2c382-124">Aucune donnée *dwCallbackInstance* n’est passée au rappel.</span><span class="sxs-lookup"><span data-stu-id="2c382-124">There is no *dwCallbackInstance* data passed to the callback.</span></span>
-   <span data-ttu-id="2c382-125">Les paramètres *dwParam1*, *dwParam2* et *dwParam3* sont généralement identiques aux paramètres correspondants pour le message TAPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-125">The *dwParam1*, *dwParam2*, and *dwParam3* parameters are usually identical to the corresponding parameters for the TAPI message.</span></span>
-   <span data-ttu-id="2c382-126">Les messages orientés ligne et orientés appel sont passés à une procédure de rappel différente des messages orientés vers le téléphone.</span><span class="sxs-lookup"><span data-stu-id="2c382-126">Line-oriented and call-oriented messages are passed to a different callback procedure than phone-oriented messages.</span></span>

<span data-ttu-id="2c382-127">Pour chaque message, cette section répertorie les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="2c382-127">For each message, this section lists the following items:</span></span>

-   <span data-ttu-id="2c382-128">L’objectif du message</span><span class="sxs-lookup"><span data-stu-id="2c382-128">The purpose of the message</span></span>
-   <span data-ttu-id="2c382-129">Procédure de rappel à laquelle ce message est passé</span><span class="sxs-lookup"><span data-stu-id="2c382-129">The callback procedure to which this message is passed</span></span>
-   <span data-ttu-id="2c382-130">Description des paramètres du message</span><span class="sxs-lookup"><span data-stu-id="2c382-130">A description of the message parameters</span></span>
-   <span data-ttu-id="2c382-131">Commentaires facultatifs sur l’utilisation du message</span><span class="sxs-lookup"><span data-stu-id="2c382-131">Optional comments about using the message</span></span>
-   <span data-ttu-id="2c382-132">Références facultatives à d’autres fonctions, messages et structures de données</span><span class="sxs-lookup"><span data-stu-id="2c382-132">Optional references to other functions, messages, and data structures</span></span>
-   <span data-ttu-id="2c382-133">Commentaires facultatifs comparant ce message à l’interface TAPI</span><span class="sxs-lookup"><span data-stu-id="2c382-133">Optional comments comparing this message to the TAPI interface</span></span>

<span data-ttu-id="2c382-134">Certains messages sont utilisés pour notifier à l’interface TAPI une modification de l’état d’un objet.</span><span class="sxs-lookup"><span data-stu-id="2c382-134">Certain messages are used to notify TAPI about a change in an object's status.</span></span> <span data-ttu-id="2c382-135">Ces messages fournissent le descripteur d’objet opaque opaque et une indication de l’élément d’état modifié.</span><span class="sxs-lookup"><span data-stu-id="2c382-135">These messages provide the TAPI opaque object handle and an indication of which status item has changed.</span></span> <span data-ttu-id="2c382-136">TAPI peut ensuite appeler une fonction « obtenir l’État » appropriée de l’objet pour obtenir l’état complet de l’objet.</span><span class="sxs-lookup"><span data-stu-id="2c382-136">TAPI can subsequently call an appropriate "get status" function of the object to obtain the object's full status.</span></span>

<span data-ttu-id="2c382-137">Lorsqu’un événement se produit, un message peut ou non être envoyé à l’interface TAPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-137">When an event occurs, a message may or may not be sent to TAPI.</span></span> <span data-ttu-id="2c382-138">Pour certains types d’événements, tels que les changements d’État, TAPI spécifie un ensemble de modifications d’État qui l’intéressent.</span><span class="sxs-lookup"><span data-stu-id="2c382-138">For some event types, such as status changes, TAPI specifies a set of status changes in which it is interested.</span></span> <span data-ttu-id="2c382-139">Le fournisseur de services est invité à limiter les événements de message de modification d’État qu’il signale à ceux inclus dans cet ensemble.</span><span class="sxs-lookup"><span data-stu-id="2c382-139">The service provider is advised to limit the status-change message events it reports to those included in this set.</span></span> <span data-ttu-id="2c382-140">Le fournisseur de services n’est pas tenu de respecter cette limite.</span><span class="sxs-lookup"><span data-stu-id="2c382-140">The service provider is not required to adhere to this limit.</span></span> <span data-ttu-id="2c382-141">En d’autres termes, il peut signaler plus de modifications que ce qui est strictement nécessaire.</span><span class="sxs-lookup"><span data-stu-id="2c382-141">In other words, it may report more changes than are strictly necessary.</span></span> <span data-ttu-id="2c382-142">Toutefois, il doit essayer d’observer la limite pour des raisons de performances.</span><span class="sxs-lookup"><span data-stu-id="2c382-142">However, it should try to observe the limit for performance reasons.</span></span>

<span data-ttu-id="2c382-143">Le message de réponse de ligne \_ n’est pas utilisé au niveau TSPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-143">The LINE\_REPLY message is not used at the TSPI level.</span></span> <span data-ttu-id="2c382-144">La fin d’une requête asynchrone est signalée à l’aide du rappel d' [**\_ achèvement asynchrone**](/windows/win32/api/tspi/nc-tspi-async_completion) .</span><span class="sxs-lookup"><span data-stu-id="2c382-144">Completion of an asynchronous request is reported using the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback.</span></span>

<span data-ttu-id="2c382-145">Le \_ message de réponse téléphonique n’est pas utilisé au niveau TSPI.</span><span class="sxs-lookup"><span data-stu-id="2c382-145">The PHONE\_REPLY message is not used at the TSPI level.</span></span> <span data-ttu-id="2c382-146">La fin d’une requête asynchrone est signalée à l’aide du rappel d' [**\_ achèvement asynchrone**](/windows/win32/api/tspi/nc-tspi-async_completion) .</span><span class="sxs-lookup"><span data-stu-id="2c382-146">Completion of an asynchronous request is reported using the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback.</span></span>

<span data-ttu-id="2c382-147">Pour plus d'informations, consultez les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="2c382-147">For more information see the following topics:</span></span>

-   [<span data-ttu-id="2c382-148">Messages du périphérique de ligne TSPI</span><span class="sxs-lookup"><span data-stu-id="2c382-148">TSPI Line Device Messages</span></span>](tspi-line-device-messages.md)
-   [<span data-ttu-id="2c382-149">Messages de l’appareil TSPI Phone</span><span class="sxs-lookup"><span data-stu-id="2c382-149">TSPI Phone Device Messages</span></span>](tspi-phone-device-messages.md)

 

 
