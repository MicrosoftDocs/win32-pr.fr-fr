---
description: Une opération qui se termine de façon asynchrone effectue une partie de son traitement dans l’appel de fonction effectué par l’application et le reste de celle-ci dans un thread d’exécution indépendant après que TAPI 2. x a retourné l’appel de fonction.
ms.assetid: 37b544e4-6413-4741-b8b6-ec676ce4ca97
title: Fonctions asynchrones
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 135e792a4b1d6a25a4f49fbb2abe2c19ce3071ad
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106521830"
---
# <a name="asynchronous-functions"></a><span data-ttu-id="a392c-103">Fonctions asynchrones</span><span class="sxs-lookup"><span data-stu-id="a392c-103">Asynchronous Functions</span></span>

<span data-ttu-id="a392c-104">Une opération qui se termine de façon asynchrone effectue une partie de son traitement dans l’appel de fonction effectué par l’application et le reste de celle-ci dans un thread d’exécution indépendant après que TAPI 2. x a retourné l’appel de fonction.</span><span class="sxs-lookup"><span data-stu-id="a392c-104">An operation that completes asynchronously performs part of its processing in the function call made by the application and the remainder of it in an independent execution thread after TAPI 2.x has returned from the function call.</span></span> <span data-ttu-id="a392c-105">Pour garantir l’achèvement du traitement de l’appel, le fournisseur de services Vector la requête vers une autre entité active du système (par exemple, un serveur LAN, un matériel de complément, un commutateur ou un réseau), puis retourne à l’application.</span><span class="sxs-lookup"><span data-stu-id="a392c-105">To ensure completion of the call's processing, the service provider vectors the request to another active entity in the system—such as a LAN server, add-in hardware, a switch, or a network—and then returns to the application.</span></span> <span data-ttu-id="a392c-106">À ce stade, un résultat d’erreur négatif ou un identificateur de demande positif est retourné à l’application.</span><span class="sxs-lookup"><span data-stu-id="a392c-106">At this time, either a negative error result or a positive request identifier is returned to the application.</span></span>

<span data-ttu-id="a392c-107">Au moment de la saisie semi-automatique asynchrone (le fournisseur de services a reçu une interruption du matériel, ce qui signifie qu’un message doit être remis), le fournisseur de services appelle TAPISRV et signale que «l’événement *X* vient de se produire.</span><span class="sxs-lookup"><span data-stu-id="a392c-107">At the time of asynchronous completion (the service provider has received an interrupt from the hardware, meaning that a message must be delivered), the service provider calls TAPISRV and reports that "Event *X* has just taken place.</span></span> <span data-ttu-id="a392c-108">Remettre un message approprié à toutes les applications concernées.»</span><span class="sxs-lookup"><span data-stu-id="a392c-108">Deliver an appropriate message to all concerned applications."</span></span> <span data-ttu-id="a392c-109">Quand TAPISRV reçoit ce message, il transfère le message à la bibliothèque de liens dynamiques TAPI, dans le processus de l’application, qui à son tour publie un message de fenêtre, signale un handle d’événement ou publie sur un port de terminaison d’e/s, en fonction du schéma de notification de message sélectionné par l’application dans [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) ou [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span><span class="sxs-lookup"><span data-stu-id="a392c-109">When TAPISRV receives this message, it forwards the message to the TAPI dynamic-link library, in the application's process, which in turn posts a window message, signals an event handle, or posts to an I/O completion port, according to the message notification scheme selected by the application in [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) or [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span></span>

<span data-ttu-id="a392c-110">Lorsque la partie asynchrone de l’opération est terminée, un message de [**\_ réponse**](./line-reply.md) à la ligne (ou à la [**\_ réponse du téléphone**](./phone-reply.md)) est envoyé à l’application.</span><span class="sxs-lookup"><span data-stu-id="a392c-110">When the asynchronous portion of the operation completes, a [**LINE\_REPLY**](./line-reply.md) (or [**PHONE\_REPLY**](./phone-reply.md)) message is sent to the application.</span></span> <span data-ttu-id="a392c-111">Ce message contient, comme l’un de ses paramètres, l’identificateur de demande retourné par l’appel de fonction.</span><span class="sxs-lookup"><span data-stu-id="a392c-111">This message contains, as one of its parameters, the request identifier returned by the function call.</span></span> <span data-ttu-id="a392c-112">Cet identificateur de demande permet à l’application de déterminer la demande d’origine qui est terminée.</span><span class="sxs-lookup"><span data-stu-id="a392c-112">This request identifier allows the application to determine which original request has completed.</span></span> <span data-ttu-id="a392c-113">(Les applications doivent mémoriser les identificateurs de demande de toutes leurs demandes en cours afin que les messages de réponse puissent être gérés correctement.) Un deuxième paramètre du message de réponse à la ligne \_ (ou de la \_ réponse du téléphone) est la valeur de retour asynchrone.</span><span class="sxs-lookup"><span data-stu-id="a392c-113">(Applications should remember the request identifiers of all their requests in progress so that reply messages can be properly handled.) A second parameter to the LINE\_REPLY (or PHONE\_REPLY) message is the asynchronous return value.</span></span> <span data-ttu-id="a392c-114">Il s’agit d’une valeur négative (pour une erreur) ou de zéro si l’opération s’est terminée correctement.</span><span class="sxs-lookup"><span data-stu-id="a392c-114">This is either a negative value (for an error) or zero if the operation completed successfully.</span></span> <span data-ttu-id="a392c-115">Pour les opérations asynchrones, toutes les valeurs de retour peuvent être retournées dans le cadre du retour de la fonction ou en tant que paramètre *dwParam2* dans le message de réponse de ligne \_ ou de \_ réponse téléphonique.</span><span class="sxs-lookup"><span data-stu-id="a392c-115">For asynchronous operations, any of the return values may be returned as part of the function return or as the *dwParam2* parameter in the LINE\_REPLY or PHONE\_REPLY message.</span></span> <span data-ttu-id="a392c-116">La valeur 0, qui indique une réussite, est retournée uniquement dans le \_ message de réponse de ligne, et jamais comme valeur de retour de la fonction.</span><span class="sxs-lookup"><span data-stu-id="a392c-116">The value 0, which indicates success, will only be returned in the LINE\_REPLY message, and never as the function's return value.</span></span>

<span data-ttu-id="a392c-117">Les fonctions Initialize ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) et [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) indiquent à TAPI comment envoyer ces messages à l’application.</span><span class="sxs-lookup"><span data-stu-id="a392c-117">The initialize functions ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) and [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) tell TAPI how to send these messages to the application.</span></span>

> [!Note]  
> <span data-ttu-id="a392c-118">Dans certains cas, si une application multithread appelle une fonction asynchrone à partir d’un thread autre que le thread à partir duquel l’application a initialisé la ligne ou le périphérique téléphonique, l’application peut recevoir le message de [**\_ réponse de ligne**](./line-reply.md) ou de [**\_ réponse téléphonique**](./phone-reply.md) avant le retour de la fonction asynchrone.</span><span class="sxs-lookup"><span data-stu-id="a392c-118">In some cases, if a multithreaded application calls an asynchronous function from a thread other than the thread from which the application initialized the line or phone device, the application may receive the [**LINE\_REPLY**](./line-reply.md) or [**PHONE\_REPLY**](./phone-reply.md) message before the asynchronous function has returned.</span></span> <span data-ttu-id="a392c-119">Dans ce cas, l’application doit enregistrer les paramètres du message et attendre le retour de la fonction asynchrone et l’identificateur de la demande est connu avant le traitement du message.</span><span class="sxs-lookup"><span data-stu-id="a392c-119">In such cases, the application should save the message parameters and wait until the asynchronous function returns and the request identifier is known before processing the message.</span></span>

 

 

 
