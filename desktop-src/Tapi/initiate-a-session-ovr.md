---
description: Les informations principales fournies par une application pour initier une session de communication sont le type d’adresse, le type de média ou les types, ainsi que l’adresse de destination.
ms.assetid: 65e53587-0e40-411b-8d6c-d6adfc9d1e6c
title: Initier une session
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9e925ba90460b88c85a9aab1624923acdbc4572a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103863857"
---
# <a name="initiate-a-session"></a><span data-ttu-id="3633f-103">Initier une session</span><span class="sxs-lookup"><span data-stu-id="3633f-103">Initiate a Session</span></span>

<span data-ttu-id="3633f-104">Les informations principales fournies par une application pour initier une session de communication sont le [type d’adresse](address-type-ovr.md), le type de [média](media-type-ovr.md) ou les types, ainsi que l' [adresse](address-ovr.md)de destination.</span><span class="sxs-lookup"><span data-stu-id="3633f-104">The primary pieces of information an application supplies to initiate a communications session are the [address type](address-type-ovr.md), the [media type](media-type-ovr.md) or types, and the destination [address](address-ovr.md).</span></span>

<span data-ttu-id="3633f-105">L’adresse de destination peut nécessiter une [traduction d’adresse](#address-translation) pour placer les informations entrées par un utilisateur dans le format approprié pour un type d’adresse donné.</span><span class="sxs-lookup"><span data-stu-id="3633f-105">The destination address may require [address translation](#address-translation) to put the information entered by a user into the proper format for a given address type.</span></span> <span data-ttu-id="3633f-106">Par exemple, un numéro de téléphone qui se trouvait dans un carnet d’adresses électronique au format [canonique](address-ovr.md) nécessitera [un format de](address-ovr.md) traduction.</span><span class="sxs-lookup"><span data-stu-id="3633f-106">For example, a phone number that was in an electronic address book in [canonical](address-ovr.md) format will require translation to [dialable](address-ovr.md) format.</span></span>

<span data-ttu-id="3633f-107">Certaines sessions peuvent nécessiter des paramètres d’installation spéciaux, s’ils sont pris en charge par le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="3633f-107">Some sessions may require special setup parameters, if supported by the service provider.</span></span> <span data-ttu-id="3633f-108">Par exemple, un TSP RNIS peut transmettre des informations sur l’utilisateur, et certains MSP requièrent des informations sur la direction du flux de média.</span><span class="sxs-lookup"><span data-stu-id="3633f-108">For example, an ISDN TSP can transmit user-user information, and some MSPs require information about media stream direction.</span></span> <span data-ttu-id="3633f-109">Consultez les [informations de session](session-information-ovr.md) pour consulter les données qui peuvent être définies ou obtenues concernant une session.</span><span class="sxs-lookup"><span data-stu-id="3633f-109">Please see [Session Information](session-information-ovr.md) for a review of data that may be set or obtained concerning a session.</span></span>

<span data-ttu-id="3633f-110">Une fois qu’une session a été lancée, l’interface TAPI informe l’application de la progression de l’appel à l’aide du mécanisme de notification d’événements configuré pendant l’initialisation.</span><span class="sxs-lookup"><span data-stu-id="3633f-110">Once a session has been initiated, TAPI will inform the application of call progress using the event notification mechanism set up during initialization.</span></span>

<span data-ttu-id="3633f-111">**TAPI 2. x :** Les applications initient une session à l’aide de la fonction [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) .</span><span class="sxs-lookup"><span data-stu-id="3633f-111">**TAPI 2.x:** Applications initiate a session using the [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) function.</span></span> <span data-ttu-id="3633f-112">La fonction [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) est utilisée pour effectuer la traduction d’adresses, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="3633f-112">The [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) function is used to perform address translation, if required.</span></span>

<span data-ttu-id="3633f-113">Les paramètres d’appel peuvent être stockés dans la structure de données [**LINECALLPARAMS**](/windows/win32/api/tapi/ns-tapi-linecallparams) , et un pointeur vers cette structure est ensuite utilisé en tant que paramètre de [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall).</span><span class="sxs-lookup"><span data-stu-id="3633f-113">Call setup parameters can be stored in the [**LINECALLPARAMS**](/windows/win32/api/tapi/ns-tapi-linecallparams) data structure, and a pointer to this structure is then used as a parameter of [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall).</span></span> <span data-ttu-id="3633f-114">Si aucune structure **LINECALLPARAMS** n’est fournie à **lineMakeCall**, un appel de niveau vocal par défaut est demandé avec un ensemble de valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="3633f-114">If no **LINECALLPARAMS** structure is supplied to **lineMakeCall**, a default POTS voice-grade call is requested with a set of default values.</span></span>

<span data-ttu-id="3633f-115">Si la session est correctement configurée, un descripteur d’appel avec [des privilèges](privilege-ovr.md) de *propriétaire* est renvoyé à l’application et TAPI envoie la ligne d’application [**\_ CALLSTATE**](./line-callstate.md) des messages avec les informations relatives à la progression de l’appel.</span><span class="sxs-lookup"><span data-stu-id="3633f-115">If the session is set up successfully, a call handle with *owner* [privileges](privilege-ovr.md) is returned to the application and TAPI sends the application [**LINE\_CALLSTATE**](./line-callstate.md) messages with information concerning the call's progress.</span></span> <span data-ttu-id="3633f-116">Les applications utilisent généralement ces messages pour afficher les rapports d’État à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="3633f-116">Applications typically use these messages to display status reports to the user.</span></span>

<span data-ttu-id="3633f-117">**TAPI 3. x :** Les applications initient une session de communication en appelant la méthode [**ITAddress :: createCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) sur une adresse qui gère le type d’adresse et le type de média requis.</span><span class="sxs-lookup"><span data-stu-id="3633f-117">**TAPI 3.x:** Applications initiate a communications session by invoking the [**ITAddress::CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) method on an address capable of handling the address type and media type required.</span></span> <span data-ttu-id="3633f-118">Si l’adresse expose l’interface [**ITTerminalSupport**](/windows/win32/api/tapi3if/nn-tapi3if-itterminalsupport) , les terminaux sont sélectionnés sur les flux de médias de l’objet d’appel.</span><span class="sxs-lookup"><span data-stu-id="3633f-118">If the address exposes the [**ITTerminalSupport**](/windows/win32/api/tapi3if/nn-tapi3if-itterminalsupport) interface, terminals are selected onto the media streams of the call object.</span></span> <span data-ttu-id="3633f-119">Pour obtenir une illustration de ce processus, consultez l’exemple de code [Make a Call](make-a-call.md) .</span><span class="sxs-lookup"><span data-stu-id="3633f-119">See the [Make a Call](make-a-call.md) code example for an illustration of this process.</span></span>

<span data-ttu-id="3633f-120">Les paramètres d’appel peuvent être stockés ou modifiés à l’aide des méthodes exposées par l’interface [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) .</span><span class="sxs-lookup"><span data-stu-id="3633f-120">Call setup parameters can be stored or changed using methods exposed by the [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) interface.</span></span>

<span data-ttu-id="3633f-121">Si la session est correctement configurée, TAPI retourne un pointeur d’interface [**ITBasicCallControl**](/windows/desktop/api/tapi3if/nn-tapi3if-itbasiccallcontrol) qui peut être utilisé pour d’autres opérations de session, ou pour obtenir un pointeur d’interface [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) qui peut être utilisé pour acquérir des informations de session supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="3633f-121">If the session is set up successfully, TAPI returns an [**ITBasicCallControl**](/windows/desktop/api/tapi3if/nn-tapi3if-itbasiccallcontrol) interface pointer that can be used for further session operations, or to obtain an [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) interface pointer that can be used to acquire additional session information.</span></span> <span data-ttu-id="3633f-122">L’interface [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) traite les événements d’état d’appel TAPI.</span><span class="sxs-lookup"><span data-stu-id="3633f-122">The [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) interface processes TAPI call state events.</span></span>

> [!Note]  
> <span data-ttu-id="3633f-123">L’interface TAPI ne doit pas être utilisée pour les transmissions de télécopie.</span><span class="sxs-lookup"><span data-stu-id="3633f-123">TAPI should not be used for fax transmissions.</span></span> <span data-ttu-id="3633f-124">Utilisez plutôt les fonctions disponibles via MAPI, l’API de messagerie Microsoft.</span><span class="sxs-lookup"><span data-stu-id="3633f-124">Instead, use the functions available through MAPI, the Microsoft Messaging API.</span></span>

 

## <a name="address-translation"></a><span data-ttu-id="3633f-125">Traduction d’adresses</span><span class="sxs-lookup"><span data-stu-id="3633f-125">Address Translation</span></span>

<span data-ttu-id="3633f-126">Une application d’utilisateur final ou de serveur peut stocker des adresses dans un format qui n’est pas compatible avec les besoins d’un fournisseur de services donné.</span><span class="sxs-lookup"><span data-stu-id="3633f-126">An end-user or server application may store addresses in a format that is not compatible with the needs of a given service provider.</span></span> <span data-ttu-id="3633f-127">Par exemple, un numéro de téléphone peut être stocké dans un carnet d’adresses électronique au [format canonique](address-ovr.md), mais la plupart des fournisseurs de services qui gèrent les numéros de téléphone requièrent le [format de numérotation](address-ovr.md).</span><span class="sxs-lookup"><span data-stu-id="3633f-127">For example, a phone number may be stored in an electronic address book in [canonical format](address-ovr.md), but most service providers that handle phone numbers require the [dialable format](address-ovr.md).</span></span>

<span data-ttu-id="3633f-128">L’interface TAPI fournit des opérations de traduction d’adresses qui aident une application à présenter le type d’adresse correct à un TSP.</span><span class="sxs-lookup"><span data-stu-id="3633f-128">TAPI supplies address translation operations that assist an application in presenting the correct address type to a TSP.</span></span> <span data-ttu-id="3633f-129">Le fournisseur de services spécifie à TAPI les types d’adresses qu’il prend en charge et n’a pas besoin d’inclure une forme de traduction d’adresse.</span><span class="sxs-lookup"><span data-stu-id="3633f-129">The service provider specifies to TAPI which address types it supports, and need not include any form of address translation.</span></span>

<span data-ttu-id="3633f-130">**TAPI 2. x :** Consultez [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress).</span><span class="sxs-lookup"><span data-stu-id="3633f-130">**TAPI 2.x:** See [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress).</span></span>

<span data-ttu-id="3633f-131">**TAPI 3 :** Consultez [**ITAddressTranslation**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslation), [**ITAddressTranslationInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslationinfo).</span><span class="sxs-lookup"><span data-stu-id="3633f-131">**TAPI 3:** See [**ITAddressTranslation**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslation), [**ITAddressTranslationInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslationinfo).</span></span>

## <a name="toll-lists"></a><span data-ttu-id="3633f-132">Listes de péage</span><span class="sxs-lookup"><span data-stu-id="3633f-132">Toll Lists</span></span>

<span data-ttu-id="3633f-133">À certains emplacements de Amérique du Nord, tous les appels téléphoniques placés dans le code de la zone locale sont des appels locaux.</span><span class="sxs-lookup"><span data-stu-id="3633f-133">In some locations in North America, all telephone calls placed to the local area code are local calls.</span></span> <span data-ttu-id="3633f-134">Dans d’autres emplacements, certains appels placés dans le code de la zone locale sont de longue distance et ont besoin d’un préfixe « 1 » à composer.</span><span class="sxs-lookup"><span data-stu-id="3633f-134">In other locations, some calls placed to the local area code are long distance, and need a "1" prefix to be dialed.</span></span> <span data-ttu-id="3633f-135">Les trois premiers chiffres de l’adresse (le préfixe) déterminent si un appel dans le code de la zone locale est un appel payant.</span><span class="sxs-lookup"><span data-stu-id="3633f-135">The first three digits of the address (the prefix) determine whether or not a call within the local area code is a toll call.</span></span>

<span data-ttu-id="3633f-136">Une *liste de numéros de téléphone* est une liste de préfixes dans le code de la zone locale dont les adresses doivent être numérotées en tant qu’adresses longues et sont facturées à long terme.</span><span class="sxs-lookup"><span data-stu-id="3633f-136">A *toll list* is a list of prefixes in the local area code whose addresses must be dialed as long-distance addresses, and are assessed long-distance charges.</span></span>

<span data-ttu-id="3633f-137">Les listes de péages ne sont pas pertinentes pour les fournisseurs de services ou pour les applications qui n’accèdent pas à un réseau téléphonique.</span><span class="sxs-lookup"><span data-stu-id="3633f-137">Toll lists are not relevant to service providers, or to applications that do not access a telephone network.</span></span>

<span data-ttu-id="3633f-138">**TAPI 2. x :** Consultez [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) (LINETRANSLATERESULT \_ INTOLLLIST et LINETRANSLATERESULT \_ NOTINTOLLLIST bits dans la structure [**LINETRANSLATEOUTPUT**](/windows/win32/api/tapi/ns-tapi-linetranslateoutput) ), [**lineSetTollList**](/windows/win32/api/tapi/nf-tapi-linesettolllist).</span><span class="sxs-lookup"><span data-stu-id="3633f-138">**TAPI 2.x:** See [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) (LINETRANSLATERESULT\_INTOLLLIST and LINETRANSLATERESULT\_NOTINTOLLLIST bits in the [**LINETRANSLATEOUTPUT**](/windows/win32/api/tapi/ns-tapi-linetranslateoutput) structure), [**lineSetTollList**](/windows/win32/api/tapi/nf-tapi-linesettolllist).</span></span>

<span data-ttu-id="3633f-139">**TAPI 3 :** Consultez [**ITAddressTranslation :: TranslateAddress**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslation-translateaddress), [**ITAddressTranslationInfo :: obtenir \_ TranslationResults**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslationinfo-get_translationresults).</span><span class="sxs-lookup"><span data-stu-id="3633f-139">**TAPI 3:** See [**ITAddressTranslation::TranslateAddress**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslation-translateaddress), [**ITAddressTranslationInfo::get\_TranslationResults**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslationinfo-get_translationresults).</span></span>

 

 
