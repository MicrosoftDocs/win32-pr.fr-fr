---
description: En savoir plus sur le contrôle de version TSPI. Au fil du temps, différentes versions de TAPI, d’applications et de fournisseurs de services peuvent être générées.
ms.assetid: 994fad0e-5958-4d93-8952-9db2bbe01f44
title: Contrôle de version TSPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e0a0663a1fcc685df8643c634ec627f669aafe8
ms.sourcegitcommit: 6fc8a7419bd01787cf6a1c52c355a4a2d1aec471
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/10/2021
ms.locfileid: "111989234"
---
# <a name="tspi-versioning"></a><span data-ttu-id="d81b0-104">Contrôle de version TSPI</span><span class="sxs-lookup"><span data-stu-id="d81b0-104">TSPI Versioning</span></span>

<span data-ttu-id="d81b0-105">Au fil du temps, différentes versions de TAPI, d’applications et de fournisseurs de services peuvent être générées.</span><span class="sxs-lookup"><span data-stu-id="d81b0-105">Over time, different versions of TAPI, applications, and service providers may be produced.</span></span> <span data-ttu-id="d81b0-106">Ces nouvelles versions peuvent créer de nouvelles définitions, telles que des nouvelles fonctionnalités, de nouveaux membres dans les structures de données et de nouveaux champs de bits.</span><span class="sxs-lookup"><span data-stu-id="d81b0-106">These new versions can make new definitions, such as for new features, new members in data structures, and new bit fields.</span></span> <span data-ttu-id="d81b0-107">Les numéros de version sont donc nécessaires pour indiquer comment interpréter diverses structures de données.</span><span class="sxs-lookup"><span data-stu-id="d81b0-107">Version numbers are therefore necessary to indicate how to interpret various data structures.</span></span>

<span data-ttu-id="d81b0-108">Pour permettre une interopérabilité optimale des différentes versions des applications, des versions de l’interface TAPI elle-même et des versions des fournisseurs de services par différents fournisseurs, Microsoft Telephony fournit un mécanisme de négociation de version simple pour les applications.</span><span class="sxs-lookup"><span data-stu-id="d81b0-108">To allow optimal interoperability of different versions of applications, versions of TAPI itself, and versions of service providers by different vendors, Microsoft Telephony provides a simple version negotiation mechanism for applications.</span></span> <span data-ttu-id="d81b0-109">Il existe deux versions différentes qui doivent être approuvées par l’interface TAPI et le fournisseur de services de téléphonie pour chaque périphérique de ligne.</span><span class="sxs-lookup"><span data-stu-id="d81b0-109">There are two different versions that need to be agreed on by TAPI and the telephony service provider for each line device.</span></span> <span data-ttu-id="d81b0-110">Le premier est le numéro de version du SPI de téléphonie de base et supplémentaire, appelé version de l' *interface TSPI*.</span><span class="sxs-lookup"><span data-stu-id="d81b0-110">The first is the version number for the Basic and Supplementary Telephony SPI, referred to as the *TSPI interface version*.</span></span> <span data-ttu-id="d81b0-111">L’autre est pour les extensions spécifiques au fournisseur, le cas échéant, et est appelée version de l' *extension*.</span><span class="sxs-lookup"><span data-stu-id="d81b0-111">The other is for provider-specific extensions, if any, and is referred to as the *extension version*.</span></span> <span data-ttu-id="d81b0-112">Le format des structures de données et des types de données utilisés par les fonctionnalités de base et supplémentaires de TSPI est défini par la version de TSPI, tandis que la version d’extension détermine le format des structures de données définies par les extensions spécifiques au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="d81b0-112">The format of the data structures and datatypes used by TSPI's Basic and Supplementary features is defined by the TSPI version, while the extension version determines the format of data structures defined by the vendor-specific extensions.</span></span>

<span data-ttu-id="d81b0-113">Ces deux types de négociation de version sont gérés par deux procédures différentes : [**TSPI \_ lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) est utilisé pour négocier la version de l’interface TSPI, et [**TSPI \_ lineNegotiateExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiateextversion) est utilisé pour négocier la version de l’extension.</span><span class="sxs-lookup"><span data-stu-id="d81b0-113">These two types of version negotiation are handled by two different procedures: [**TSPI\_lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) is used to negotiate the TSPI interface version, and [**TSPI\_lineNegotiateExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiateextversion) is used to negotiate the extension version.</span></span> <span data-ttu-id="d81b0-114">La négociation de version d’extension peut être ignorée si les extensions ne sont pas souhaitées.</span><span class="sxs-lookup"><span data-stu-id="d81b0-114">Extension version negotiation can be skipped if extensions are not wanted.</span></span> <span data-ttu-id="d81b0-115">Si ces plages entrées pendant la négociation se chevauchent, le fournisseur de services doit retourner une valeur dans la partie chevauchante de la plage en tant que résultat de la négociation.</span><span class="sxs-lookup"><span data-stu-id="d81b0-115">If these ranges input during negotiation overlap, the service provider must return a value within the overlapping portion of the range as the result of the negotiation.</span></span> <span data-ttu-id="d81b0-116">En règle générale, il doit s’agir de la valeur la plus élevée possible.</span><span class="sxs-lookup"><span data-stu-id="d81b0-116">Usually, this should be the highest possible value.</span></span> <span data-ttu-id="d81b0-117">Si les plages ne se chevauchent pas, les deux parties sont incompatibles et la fonction retourne une erreur.</span><span class="sxs-lookup"><span data-stu-id="d81b0-117">If the ranges do not overlap, the two parties are incompatible and the function returns an error.</span></span>

<span data-ttu-id="d81b0-118">Les résultats d’une négociation indiquent simplement que le fournisseur de services est disposé à fonctionner à un numéro de version particulier, mais ne valide pas le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="d81b0-118">Results of a negotiation simply indicate that the service provider is willing to operate at a particular version number, but do not commit the service provider to doing so.</span></span> <span data-ttu-id="d81b0-119">Par exemple, TAPI peut renégocier pour déterminer une version idéale après avoir négocié une version possible.</span><span class="sxs-lookup"><span data-stu-id="d81b0-119">For example, TAPI can renegotiate to determine an ideal version after having negotiated a possible version.</span></span> <span data-ttu-id="d81b0-120">La version de l’interface TSPI n’est validée que lorsqu’une ligne est ouverte à l’aide de [**TSPI \_ lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) et qu’elle survivent jusqu’à la fermeture de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="d81b0-120">The TSPI interface version is only committed when a line is opened using [**TSPI\_lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) and survives until the device is closed.</span></span> <span data-ttu-id="d81b0-121">La version de l’extension est validée lorsque la fonction [**TSPI \_ lineSelectExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_lineselectextversion) est appelée, et survit jusqu’à ce que la sélection soit annulée en sélectionnant extension version zéro.</span><span class="sxs-lookup"><span data-stu-id="d81b0-121">The extension version is committed when the [**TSPI\_lineSelectExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_lineselectextversion) function is called, and survives until the selection is canceled by selecting extension version zero.</span></span>

<span data-ttu-id="d81b0-122">La sélection de la version de l’extension peut se produire plusieurs fois, y compris lorsqu’une version d’extension est en vigueur.</span><span class="sxs-lookup"><span data-stu-id="d81b0-122">Extension version selection can happen many times, including while an extension version is in effect.</span></span> <span data-ttu-id="d81b0-123">Étant donné que le fournisseur de services est validé dans la version de l’extension, sa plage de versions prises en charge est limitée à cette version de l’extension.</span><span class="sxs-lookup"><span data-stu-id="d81b0-123">Because the service provider is committed to the extension version, its range of supported versions narrows to exactly that extension version.</span></span> <span data-ttu-id="d81b0-124">Par exemple, considérez un fournisseur de services qui est normalement compatible avec les versions d’extension 1,0 à 5,5.</span><span class="sxs-lookup"><span data-stu-id="d81b0-124">For example, consider a service provider that is normally compatible with extension versions 1.0 through 5.5.</span></span> <span data-ttu-id="d81b0-125">Si la version 3,0 est activée alors qu’un appelant tente de négocier une version comprise dans la plage 1,0 à 5,5, la négociation retourne 3,0.</span><span class="sxs-lookup"><span data-stu-id="d81b0-125">If version 3.0 is in effect while a caller attempts to negotiate a version within the range 1.0 to 5.5, the negotiation returns 3.0.</span></span>

<span data-ttu-id="d81b0-126">Étant donné que TAPI négocie la version, vous pouvez mettre à niveau un fournisseur de services vers les nouvelles versions de l’interface sans avoir besoin de mettre à niveau l’interface TAPI.</span><span class="sxs-lookup"><span data-stu-id="d81b0-126">Because TAPI negotiates the version, you can upgrade a service provider to new versions of the interface without requiring that TAPI also be upgraded.</span></span> <span data-ttu-id="d81b0-127">De même, TAPI peut être mis à niveau, tout en continuant à utiliser votre ancien fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="d81b0-127">Similarly, TAPI can be upgraded, yet still use your older service provider.</span></span>

 

 
