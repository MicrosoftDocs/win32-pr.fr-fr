---
description: L’état de la session ou de l’appel indique l’état actuel d’une session, par exemple &\# 0034 ; offre&\# 0034 ; ou &\# 0034 ; connecté. &\# 0034 ; La gestion correcte des informations d’État est essentielle au bon fonctionnement de la plupart des applications TAPI.
ms.assetid: a6a49b77-4e9b-4f23-bfe6-26f26549b18f
title: State
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88fb9c482fcb9e432b5bfb5d36f77cd09f538086
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106542021"
---
# <a name="state"></a><span data-ttu-id="e3632-103">State</span><span class="sxs-lookup"><span data-stu-id="e3632-103">State</span></span>

<span data-ttu-id="e3632-104">L’état de la session ou de l’appel indique l’état actuel d’une session, par exemple « offre » ou « connecté ».</span><span class="sxs-lookup"><span data-stu-id="e3632-104">Session or call state indicates the current status of a session, such as "offering" or "connected."</span></span> <span data-ttu-id="e3632-105">La gestion correcte des informations d’État est essentielle au bon fonctionnement de la plupart des applications TAPI.</span><span class="sxs-lookup"><span data-stu-id="e3632-105">Proper handling of state information is vital to the proper functioning of most TAPI applications.</span></span> <span data-ttu-id="e3632-106">Par exemple, l’opération de réponse ne peut être effectuée que sur une session proposée, mais un transfert échoue si la session est dans cet État.</span><span class="sxs-lookup"><span data-stu-id="e3632-106">For example, the answer operation can be performed only on an offered session, but a transfer will fail if the session is in that state.</span></span>

<span data-ttu-id="e3632-107">L’état d’une session change suite à des événements.</span><span class="sxs-lookup"><span data-stu-id="e3632-107">A session's state changes as a result of events.</span></span> <span data-ttu-id="e3632-108">Les événements peuvent être sollicités ou non.</span><span class="sxs-lookup"><span data-stu-id="e3632-108">Events can be solicited or unsolicited.</span></span> <span data-ttu-id="e3632-109">Les *événements sollicités* sont provoqués par l’application qui contrôle la session, par exemple lorsqu’elle appelle une opération de session TAPI.</span><span class="sxs-lookup"><span data-stu-id="e3632-109">*Solicited events* are caused by the application controlling the session, such as when it invokes a TAPI session operation.</span></span> <span data-ttu-id="e3632-110">Les *événements non sollicités* sont provoqués par le commutateur, le réseau téléphonique, l’utilisateur qui appuie sur les boutons du téléphone local ou les actions du tiers distant.</span><span class="sxs-lookup"><span data-stu-id="e3632-110">*Unsolicited events* are caused by the switch, the telephone network, the user pressing buttons on the local phone, or the actions of the remote party.</span></span>

<span data-ttu-id="e3632-111">Chaque fois qu’un fournisseur de services détecte un changement d’état de session, il signale la modification à l’interface TAPI et TAPI envoie une notification d’événement à toutes les applications propriétaire et moniteur.</span><span class="sxs-lookup"><span data-stu-id="e3632-111">Whenever a service provider detects a session state change, it reports the change to TAPI and TAPI issues an event notification to all owner and monitor applications.</span></span> <span data-ttu-id="e3632-112">L’application doit réagir à ces notifications de manière appropriée.</span><span class="sxs-lookup"><span data-stu-id="e3632-112">The application must react to these notifications appropriately.</span></span> <span data-ttu-id="e3632-113">Pour plus d’informations sur le contrôle des événements signalés à une application, consultez notification d’événements sous [initialisation TAPI](tapi-initialization.md) .</span><span class="sxs-lookup"><span data-stu-id="e3632-113">Please see Event Notification under [TAPI Initialization](tapi-initialization.md) for information on controlling which events are reported to an application.</span></span>

<span data-ttu-id="e3632-114">Une application doit toujours traiter les notifications d’événements d’État.</span><span class="sxs-lookup"><span data-stu-id="e3632-114">An application should always process state event notifications.</span></span> <span data-ttu-id="e3632-115">Les transitions d’état valides pour une configuration physique peuvent être non valides pour une autre.</span><span class="sxs-lookup"><span data-stu-id="e3632-115">State transitions valid for one physical configuration may be invalid for another.</span></span> <span data-ttu-id="e3632-116">Par exemple, considérez une ligne qui se termine physiquement à la fois sur l’ordinateur et sur un autre ensemble de téléphones, en créant une configuration de ligne de tiers entre l’ordinateur et l’ensemble de téléphones.</span><span class="sxs-lookup"><span data-stu-id="e3632-116">For example, consider a line that physically terminates both at the computer and at a separate phone set, creating a party line configuration between the computer and the phone set.</span></span> <span data-ttu-id="e3632-117">Une application en cours d’exécution sur l’ordinateur peut ne pas connaître les activités de l’ensemble de téléphones.</span><span class="sxs-lookup"><span data-stu-id="e3632-117">An application running on the computer may not know about phone set activities.</span></span> <span data-ttu-id="e3632-118">Autrement dit, la ligne peut être utilisée sans que le fournisseur de services en ait connaissance.</span><span class="sxs-lookup"><span data-stu-id="e3632-118">That is, the line may be in use without the service provider being aware of it.</span></span> <span data-ttu-id="e3632-119">Une application qui tente d’effectuer un appel sortant aboutit à l’allocation d’une apparence d’appel à partir de l’interface TAPI, mais cela se traduit par le partage de l’appel actif sur la ligne.</span><span class="sxs-lookup"><span data-stu-id="e3632-119">An application that attempts to make an outgoing call will succeed in allocating a call appearance from TAPI, but this results in sharing the active call on the line.</span></span> <span data-ttu-id="e3632-120">L’envoi aveugle d’une chaîne de numérotation DTMF sans vérification préalable d’une tonalité peut ne pas aboutir à un comportement intentionnel (ou poli).</span><span class="sxs-lookup"><span data-stu-id="e3632-120">Blindly sending a DTMF dial string without first checking for a dial tone may not result in intended (or polite) behavior.</span></span>

<span data-ttu-id="e3632-121">Une application ne doit pas supposer une progression rigide d’un État à un autre.</span><span class="sxs-lookup"><span data-stu-id="e3632-121">An application should not assume a rigid progression from one state to another.</span></span> <span data-ttu-id="e3632-122">Les événements d’État arrivent et sont transférés de manière asynchrone et les notifications peuvent ne pas être reçues dans un ordre prévisible.</span><span class="sxs-lookup"><span data-stu-id="e3632-122">State events arrive and are forwarded asynchronously and notifications may not be received in a predictable order.</span></span> <span data-ttu-id="e3632-123">Par conséquent, les notifications d’état d’appel doivent être affichées pour indiquer à l’application le nouvel état de l’appel au lieu de signaler les transitions entre deux États.</span><span class="sxs-lookup"><span data-stu-id="e3632-123">Therefore, call-state notifications should be viewed as telling the application the call's new state instead of as reporting the transitions between two states.</span></span>

<span data-ttu-id="e3632-124">Tous les fournisseurs de services de téléphonie doivent fournir ces informations.</span><span class="sxs-lookup"><span data-stu-id="e3632-124">All telephony service providers must supply this information.</span></span>

<span data-ttu-id="e3632-125">\* \* TAPI 2. x : \* \*[**lineGetCallStatus**](/windows/win32/api/tapi/nf-tapi-linegetcallstatus), [**lineGetCallInfo**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo), [**\_ CALLSTATE**](./line-callstate.md) , LINECALLSTATE, [ \_ constantes](./linecallstate--constants.md)</span><span class="sxs-lookup"><span data-stu-id="e3632-125">\*\*TAPI 2.x:  \*\*[**lineGetCallStatus**](/windows/win32/api/tapi/nf-tapi-linegetcallstatus), [**lineGetCallInfo**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo), [**LINE\_CALLSTATE**](./line-callstate.md) message, [LINECALLSTATE\_ Constants](./linecallstate--constants.md)</span></span>

<span data-ttu-id="e3632-126">**TAPI 3. x : **[**ITCallInfo :: obten \_ CallInfoLong**](/windows/desktop/api/tapi3if/nf-tapi3if-itcallinfo-get_callinfolong) (** CIL \_ CALLID** membre de [**CALLINFO \_ long**](/windows/desktop/api/Tapi3if/ne-tapi3if-callinfo_long)), [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) notification, [**Call \_ State**](/windows/desktop/api/Tapi3if/ne-tapi3if-call_state) Enumerator</span><span class="sxs-lookup"><span data-stu-id="e3632-126">**TAPI 3.x:  **[**ITCallInfo::get\_CallInfoLong**](/windows/desktop/api/tapi3if/nf-tapi3if-itcallinfo-get_callinfolong) (** CIL\_CALLID** member of [**CALLINFO\_LONG**](/windows/desktop/api/Tapi3if/ne-tapi3if-callinfo_long)), [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) notification, [**CALL\_STATE**](/windows/desktop/api/Tapi3if/ne-tapi3if-call_state) enumerator</span></span>

 

 
