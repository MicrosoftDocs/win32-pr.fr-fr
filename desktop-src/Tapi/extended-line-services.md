---
description: Les services de ligne étendus (ou services de ligne spécifiques au périphérique) incluent toutes les extensions définies par le fournisseur de services pour TSPI.
ms.assetid: 23519d23-27bd-422e-b3c4-00e0d0d93f9e
title: Services de ligne étendus
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dbc1ce08d25633d33fd518d8686271c198ca5034
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106517702"
---
# <a name="extended-line-services"></a><span data-ttu-id="2996a-103">Services de ligne étendus</span><span class="sxs-lookup"><span data-stu-id="2996a-103">Extended Line Services</span></span>

<span data-ttu-id="2996a-104">Les services de ligne étendus (ou services de ligne spécifiques au périphérique) incluent toutes les extensions définies par le fournisseur de services pour TSPI.</span><span class="sxs-lookup"><span data-stu-id="2996a-104">Extended line services (or device-specific line services) include all service-provider defined extensions to TSPI.</span></span> <span data-ttu-id="2996a-105">TSPI définit un mécanisme qui permet aux fournisseurs de fournisseurs de services d’étendre le SPI de téléphonie à l’aide d’extensions spécifiques à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="2996a-105">TSPI defines a mechanism that enables service-provider vendors to extend the Telephony SPI using device-specific extensions.</span></span> <span data-ttu-id="2996a-106">TSPI définit uniquement le mécanisme d’extension, ce qui permet d’accéder aux extensions spécifiques à l’appareil, mais TSPI ne définit pas leur comportement.</span><span class="sxs-lookup"><span data-stu-id="2996a-106">TSPI only defines the extension mechanism, and by doing so provides access to device-specific extensions, but TSPI does not define their behavior.</span></span> <span data-ttu-id="2996a-107">Le comportement est entièrement défini par le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="2996a-107">Behavior is completely defined by the service provider.</span></span>

<span data-ttu-id="2996a-108">Le SPI de téléphonie se compose de définitions de constantes, de structures de données, de fonctions et de messages de rappel scalaires et d’indicateurs de bits.</span><span class="sxs-lookup"><span data-stu-id="2996a-108">The Telephony SPI consists of scalar and bit flag constant definitions, data structures, functions, and callback messages.</span></span> <span data-ttu-id="2996a-109">Les procédures définies permettent à un fournisseur d’étendre la plupart de ces méthodes comme suit.</span><span class="sxs-lookup"><span data-stu-id="2996a-109">Procedures are defined that enable a vendor to extend most of these as follows.</span></span>

<span data-ttu-id="2996a-110">Pour les constantes de données scalaires extensible, un fournisseur de fournisseurs de services peut définir de nouvelles valeurs dans une plage spécifiée.</span><span class="sxs-lookup"><span data-stu-id="2996a-110">For extensible scalar data constants, a service-provider vendor can define new values in a specified range.</span></span> <span data-ttu-id="2996a-111">Étant donné que la plupart des constantes de données sont des **DWORD** s, en général, la plage comprise entre 0X00000000 et 0x7FFFFFFF est réservée aux extensions futures courantes, tandis que 0X80000000 à 0xFFFFFFFF sont disponibles pour les extensions spécifiques au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="2996a-111">As most data constants are **DWORD** s, typically the range 0x00000000 through 0x7FFFFFFF is reserved for common future extensions, while 0x80000000 through 0xFFFFFFFF are available for vendor-specific extensions.</span></span> <span data-ttu-id="2996a-112">L’hypothèse est qu’un fournisseur définit des valeurs qui sont des extensions naturelles des types de données définis par TSPI.</span><span class="sxs-lookup"><span data-stu-id="2996a-112">The assumption is that a vendor would define values that are natural extensions of the datatypes defined by TSPI.</span></span>

<span data-ttu-id="2996a-113">Pour les constantes de données d’indicateur de bit extensible, un fournisseur de fournisseurs de services peut définir de nouvelles valeurs pour les bits spécifiés.</span><span class="sxs-lookup"><span data-stu-id="2996a-113">For extensible bit flag data constants, a service-provider vendor can define new values for specified bits.</span></span> <span data-ttu-id="2996a-114">Comme la plupart des constantes d’indicateur de bits sont des **DWORD** s, un nombre spécifique de bits inférieurs est réservé pour les extensions communes, tandis que les bits supérieurs restants sont disponibles pour les extensions spécifiques au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="2996a-114">As most bit flag constants are **DWORD** s, typically a specific number of the lower bits are reserved for common extensions while the remaining upper bits are available for vendor-specific extensions.</span></span> <span data-ttu-id="2996a-115">Les indicateurs binaires communs sont assignés de bit zéro vers le haut ; les extensions spécifiques au fournisseur doivent être affectées de bit 31.</span><span class="sxs-lookup"><span data-stu-id="2996a-115">Common bit flags are assigned from bit zero up; vendor-specific extensions should be assigned from bit 31 down.</span></span> <span data-ttu-id="2996a-116">Cela offre une flexibilité maximale pour assigner des positions de bits aux extensions communes et aux extensions spécifiques au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="2996a-116">This provides maximum flexibility in assigning bit positions to common extensions versus vendor-specific extensions.</span></span> <span data-ttu-id="2996a-117">Un fournisseur est censé définir de nouvelles valeurs qui sont des extensions naturelles des indicateurs binaires définis par TSPI.</span><span class="sxs-lookup"><span data-stu-id="2996a-117">A vendor is expected to define new values that are natural extensions of the bit flags defined by TSPI.</span></span>

<span data-ttu-id="2996a-118">Les structures de données extensibles ont un champ de taille variable qui est réservé à une utilisation spécifique à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="2996a-118">Extensible data structures have a variably sized field that is reserved for device-specific use.</span></span> <span data-ttu-id="2996a-119">Une taille variable, le fournisseur de services décide de la quantité d’informations et de l’interprétation.</span><span class="sxs-lookup"><span data-stu-id="2996a-119">Being variably sized, the service provider decides the amount of information and the interpretation.</span></span> <span data-ttu-id="2996a-120">Un fournisseur qui définit un champ spécifique à l’appareil est supposé créer ces extensions naturelles de la structure de données d’origine définies par TSPI.</span><span class="sxs-lookup"><span data-stu-id="2996a-120">A vendor that defines a device-specific field is expected to make these natural extensions of the original data structure defined by TSPI.</span></span>

<span data-ttu-id="2996a-121">Deux fonctions, [**TSPI \_ LineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) et [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature), et quatre messages associés, [**line \_ DEVSPECIFIC**](/previous-versions/windows/desktop/legacy/ms725225(v=vs.85)), [**line \_ CALLDEVSPECIFIC**](line-calldevspecific.md), [**line \_**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85))DEVSPECIFICFEATURE et [**line \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md), offrent un mécanisme d’extension spécifique au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="2996a-121">Two functions, [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) and [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature), and four related messages, [**LINE\_DEVSPECIFIC**](/previous-versions/windows/desktop/legacy/ms725225(v=vs.85)), [**LINE\_CALLDEVSPECIFIC**](line-calldevspecific.md), [**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)), and [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md), offer a vendor-specific extension mechanism.</span></span> <span data-ttu-id="2996a-122">L’opération **TSPI \_ lineDevSpecific** et les \_ messages DEVSPECIFIC et Line CALLDEVSPECIFIC de ligne associés \_ permettent à l’application cliente Tapi32.dll d’accéder à des fonctionnalités de ligne, d’adresse ou d’appel spécifiques à l’appareil qui ne sont pas disponibles dans les services de téléphonie de base ou supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="2996a-122">The **TSPI\_lineDevSpecific** operation and associated LINE\_DEVSPECIFIC and LINE\_CALLDEVSPECIFIC messages allow the Tapi32.dll client application to access device-specific line, address, or call features that are unavailable in the Basic or Supplementary Telephony services.</span></span> <span data-ttu-id="2996a-123">Le profil de paramètre de la fonction [**TSPI \_ lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) est générique dans le fait que peu d’interprétation des paramètres est effectuée par TSPI.</span><span class="sxs-lookup"><span data-stu-id="2996a-123">The parameter profile of the [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) function is generic in that little interpretation of the parameters is made by TSPI.</span></span> <span data-ttu-id="2996a-124">Les paramètres de gestion des appareils ont des significations définies par TSPI et sont traduits correctement entre l’application et le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="2996a-124">Device-handle parameters have TSPI-defined meanings and are translated appropriately between the application and the service provider.</span></span> <span data-ttu-id="2996a-125">Les paramètres génériques sont simplement transmis sans modification.</span><span class="sxs-lookup"><span data-stu-id="2996a-125">Generic parameters are simply passed through unmodified.</span></span> <span data-ttu-id="2996a-126">L’interprétation des paramètres génériques est définie par le fournisseur de services et doit être comprise par toutes les applications qui les utilisent.</span><span class="sxs-lookup"><span data-stu-id="2996a-126">The interpretation of the generic parameters is defined by the service provider and must be understood by any applications that use them.</span></span> <span data-ttu-id="2996a-127">Une application qui s’appuie sur des extensions spécifiques à l’appareil ne fonctionne généralement pas avec d’autres fournisseurs de services.</span><span class="sxs-lookup"><span data-stu-id="2996a-127">An application that relies on device-specific extensions generally does not work with other service providers.</span></span> <span data-ttu-id="2996a-128">Toutefois, les applications écrites entièrement dans les services de téléphonie de base et supplémentaires doivent fonctionner avec le fournisseur de services étendu.</span><span class="sxs-lookup"><span data-stu-id="2996a-128">However, applications written entirely to the Basic and Supplementary Telephony services should work with the extended service provider.</span></span>

<span data-ttu-id="2996a-129">L’implémentation TAPI des fonctions et messages spécifiques à l’appareil est « directe ».</span><span class="sxs-lookup"><span data-stu-id="2996a-129">The TAPI implementation of the device-specific functions and messages is "pass-through."</span></span> <span data-ttu-id="2996a-130">L’interface TAPI n’examine pas et ne modifie pas les paramètres et mémoires tampons génériques spécifiques à l’appareil, mais elle mappe les valeurs de handle opaques au niveau de l’application (utilisées au niveau de l’interface TAPI) aux valeurs de handle opaques au niveau du fournisseur de service (utilisées au niveau de TSPI).</span><span class="sxs-lookup"><span data-stu-id="2996a-130">TAPI does not examine or modify the generic device-specific parameters and buffers, but it does map application-level opaque handle values (used at the TAPI level) to service-provider-level opaque handle values (used at the TSPI level).</span></span>

<span data-ttu-id="2996a-131">En ce qui concerne la traduction des handles, la nature directe des parties génériques des extensions spécifiques à l’appareil a une conséquence importante.</span><span class="sxs-lookup"><span data-stu-id="2996a-131">Regarding handle translation, the passthrough nature of the generic parts of device-specific extensions has an important consequence.</span></span> <span data-ttu-id="2996a-132">Un fournisseur de services n’a aucun moyen de lier les descripteurs utilisés au niveau du TSPI à ceux du niveau TAPI, sauf en les passant par les paramètres et les champs du handle prédéfini.</span><span class="sxs-lookup"><span data-stu-id="2996a-132">A service provider has no way to relate the handles used at the TSPI level to those at the TAPI level except by passing them through the predefined handle parameters and fields.</span></span> <span data-ttu-id="2996a-133">Tout handle placé dans la zone d’extension générique n’est pas traduit par l’interface TAPI, car il est transmis entre l’application et le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="2996a-133">Any handle put into the generic extension area is untranslated by TAPI as it is passed between application and service provider.</span></span> <span data-ttu-id="2996a-134">Le concepteur d’une extension de fournisseur de service ne doit généralement pas définir des extensions qui transmettent des handles de cette façon.</span><span class="sxs-lookup"><span data-stu-id="2996a-134">The designer of a service-provider extension should generally not define extensions that pass handles in this way.</span></span>

<span data-ttu-id="2996a-135">L’approche appropriée lors de la définition d’une extension spécifique à l’appareil qui doit faire référence à des appareils spécifiques sans utiliser de handles consiste à faire référence à ces appareils à l’aide de leur identification d’appareil absolue.</span><span class="sxs-lookup"><span data-stu-id="2996a-135">The appropriate approach when defining a device-specific extension that must refer to specific devices without using handles is to refer to them using their absolute device identification.</span></span> <span data-ttu-id="2996a-136">L’identificateur d’appareil utilisé lors de l’ouverture d’une ligne au niveau de l’interface TAPI, par exemple, est strictement la même valeur que celle utilisée au niveau TSPI pour ouvrir la ligne.</span><span class="sxs-lookup"><span data-stu-id="2996a-136">The device identifier used in opening a line at the TAPI level, for example, is strictly the same value that is used at the TSPI level to open the line.</span></span> <span data-ttu-id="2996a-137">De même, un tuple (identificateur de périphérique de ligne, identificateur d’adresse) qui identifie de façon unique une adresse au niveau TAPI utilise les mêmes valeurs pour identifier la même chose au niveau du TSPI.</span><span class="sxs-lookup"><span data-stu-id="2996a-137">Similarly, a (line device identifier, address identifier) tuple that uniquely identifies an address at the TAPI level uses the same values to identify the same thing at the TSPI level.</span></span>

<span data-ttu-id="2996a-138">Pour plus de commodité, une fonction d’échappement plus spécialisée est également fournie.</span><span class="sxs-lookup"><span data-stu-id="2996a-138">For convenience, a more specialized escape function is also provided.</span></span> <span data-ttu-id="2996a-139">Il est similaire à [**TSPI \_ lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific), mais il place l’interprétation sur certains paramètres.</span><span class="sxs-lookup"><span data-stu-id="2996a-139">It is similar to [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific), but places interpretation on some of the parameters.</span></span> <span data-ttu-id="2996a-140">La fonction [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) et les messages Line [**\_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) et [**line \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) associés permettent à l’interface TAPI d’émuler les enfoncements du bouton sur le téléphone de la ligne.</span><span class="sxs-lookup"><span data-stu-id="2996a-140">The [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) function and associated [**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) and [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) messages allow TAPI to emulate button presses at the line's feature phone.</span></span> <span data-ttu-id="2996a-141">Comme les téléphones et les significations de leurs boutons sont spécifiques au fournisseur, l’appel des fonctionnalités à l’aide de **TSPI \_ lineDevSpecificFeature** est également spécifique au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="2996a-141">As feature phones and the meanings of their buttons are vendor-specific, feature invocation using **TSPI\_lineDevSpecificFeature** is also vendor specific.</span></span>

<span data-ttu-id="2996a-142">Pour résumer, la fonction [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) est une fonction d’échappement spécifique à l’appareil qui permet d’envoyer des fonctionnalités de commutation au commutateur.</span><span class="sxs-lookup"><span data-stu-id="2996a-142">To summarize, the [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) function is a device-specific escape function to allow sending switch features to the switch.</span></span> <span data-ttu-id="2996a-143">La [**ligne \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) message est un message spécifique à l’appareil envoyé au rappel de l’application en tant qu’indication des fonctionnalités liées aux appels envoyées au commutateur.</span><span class="sxs-lookup"><span data-stu-id="2996a-143">The [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) message is a device-specific message sent to the application's callback as an indication of call-related features sent to the switch.</span></span> <span data-ttu-id="2996a-144">[**Ligne \_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) est un message spécifique à l’appareil envoyé au rappel de l’application en tant qu’indication des fonctionnalités liées aux lignes envoyées au commutateur.</span><span class="sxs-lookup"><span data-stu-id="2996a-144">[**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) is a device-specific message sent to the application's callback as an indication of line-related features sent to the switch.</span></span>

<span data-ttu-id="2996a-145">Il n’existe pas de registre central pour les identificateurs de fabricant.</span><span class="sxs-lookup"><span data-stu-id="2996a-145">There is no central registry for manufacturer identifiers.</span></span> <span data-ttu-id="2996a-146">Au lieu de cela, un générateur d’identificateur unique appelé Extidgen.exe est mis à disposition dans le cadre de TSPI.</span><span class="sxs-lookup"><span data-stu-id="2996a-146">Instead a unique identifier generator called Extidgen.exe is made available as part of TSPI.</span></span> <span data-ttu-id="2996a-147">Le fournisseur qui conçoit un ensemble d’extensions spécifiques à l’appareil utilise cet utilitaire pour obtenir un identificateur unique pour ces extensions.</span><span class="sxs-lookup"><span data-stu-id="2996a-147">The vendor that designs a set of device-specific extensions uses this utility to obtain a unique identifier for those extensions.</span></span>

 

 
