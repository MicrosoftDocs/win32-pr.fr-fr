---
description: Avec la fonction lineSetTerminal, l’application peut contrôler ou supprimer le routage d’événements de bas niveau spécifiés (échangés entre le commutateur et la station) sur un appareil.
ms.assetid: 36658d83-0ea4-4f62-b2e5-c0f6d6569d0d
title: Routage d’événements
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df6749969faf89ac0212c19049fe02c9dad57a96
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106514024"
---
# <a name="event-routing"></a><span data-ttu-id="f2252-103">Routage d’événements</span><span class="sxs-lookup"><span data-stu-id="f2252-103">Event Routing</span></span>

<span data-ttu-id="f2252-104">Avec la fonction [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) , l’application peut contrôler ou supprimer le routage d’événements de bas niveau spécifiés (échangés entre le commutateur et la station) sur un appareil.</span><span class="sxs-lookup"><span data-stu-id="f2252-104">With the [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) function, the application can control or suppress the routing of specified low-level events (exchanged between the switch and the station) to a device.</span></span> <span data-ttu-id="f2252-105">Avec **lineSetTerminal**, l’application spécifie le périphérique terminal auquel ces événements (tels que Line, Address ou Call Media-Stream Events) sont routés.</span><span class="sxs-lookup"><span data-stu-id="f2252-105">With **lineSetTerminal**, the application specifies the terminal device to which these events (such as line, address, or call media-stream events) are routed.</span></span>

<span data-ttu-id="f2252-106">Le routage des différentes classes d’événements peut être contrôlé individuellement, ce qui permet de spécifier des terminaux distincts pour chaque classe d’événements.</span><span class="sxs-lookup"><span data-stu-id="f2252-106">The routing of the different classes of events can be individually controlled, allowing separate terminals to be specified for each event class.</span></span> <span data-ttu-id="f2252-107">Les classes d’événements incluent les lampes, les boutons, les affichages, les sonneries, les hookswitch et les flux de médias.</span><span class="sxs-lookup"><span data-stu-id="f2252-107">Event classes include lamps, buttons, display, ringer, hookswitch, and media stream.</span></span>

<span data-ttu-id="f2252-108">Par exemple, le flux multimédia d’un appel (vocal, par exemple) peut être envoyé à n’importe quel périphérique de transducteur si le fournisseur de services et le matériel sont capables de le faire.</span><span class="sxs-lookup"><span data-stu-id="f2252-108">For example, the media stream of a call (voice, for example) can be sent to any transducer device if the service provider and the hardware is capable of doing so.</span></span> <span data-ttu-id="f2252-109">En général, un *transducteur* est le même que celui qui est appelé appareil *hookswitch* dans TAPI, qui a un microphone et un haut-parleur.</span><span class="sxs-lookup"><span data-stu-id="f2252-109">In general, a *transducer* means the same as what is referred to as a *hookswitch* device in TAPI, something that has a microphone and a speaker.</span></span> <span data-ttu-id="f2252-110">Les événements de sonnerie du commutateur sur le téléphone peuvent être mappés dans une alerte visuelle sur l’écran de l’ordinateur ou ils peuvent être acheminés vers un appareil téléphonique.</span><span class="sxs-lookup"><span data-stu-id="f2252-110">Ring events from the switch to the phone can be mapped into a visual alert on the computer's screen or they can be routed to a phone device.</span></span> <span data-ttu-id="f2252-111">Les événements de lampe et les événements d’affichage peuvent être ignorés ou acheminés vers un appareil téléphonique (qui semble se comporter comme un ensemble de téléphones normal).</span><span class="sxs-lookup"><span data-stu-id="f2252-111">Lamp events and display events can be ignored or routed to a phone device (which appears to behave as a normal phone set).</span></span> <span data-ttu-id="f2252-112">Enfin, l’appui sur un bouton sur un appareil téléphonique peut ou non être passé à la ligne.</span><span class="sxs-lookup"><span data-stu-id="f2252-112">Finally, button presses at a phone device may or may not be passed to the line.</span></span> <span data-ttu-id="f2252-113">Dans tous les cas, ce routage de signaux de bas niveau à partir de la ligne n’affecte pas le fonctionnement de la partie ligne de l’interface TAPI, qui mappe toujours les événements de bas niveau à leur équivalent fonctionnel.</span><span class="sxs-lookup"><span data-stu-id="f2252-113">In any case, this routing of low-level signals from the line does not affect the operation of the line portion of TAPI, which always maps low-level events to their functional equivalent.</span></span> <span data-ttu-id="f2252-114">Pour déterminer les terminaux disponibles sur un appareil de ligne (et leurs fonctionnalités), consultez les fonctionnalités de l’appareil en ligne avec [**lineGetDevCaps**](/windows/desktop/api/Tapi/nf-tapi-linegetdevcaps).</span><span class="sxs-lookup"><span data-stu-id="f2252-114">To determine the terminals a line device has available (and their capabilities), consult the line device's capabilities with [**lineGetDevCaps**](/windows/desktop/api/Tapi/nf-tapi-linegetdevcaps).</span></span>

<span data-ttu-id="f2252-115">Supposons à l’origine que l’application a supprimé le routage de tous les événements (avec [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal)) et que l’utilisateur sélectionne un casque comme périphérique d’e/s actuel.</span><span class="sxs-lookup"><span data-stu-id="f2252-115">Assume initially that the application has suppressed the routing of all events (with [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal)), and the user selects a headset as the current I/O device.</span></span> <span data-ttu-id="f2252-116">Un appel entrant envoie un [**message \_ CALLSTATE de ligne**](line-callstate.md) et un message de [**ligne \_ LINEDEVSTATE**](line-linedevstate.md) avec l’indication de la *sonnerie* .</span><span class="sxs-lookup"><span data-stu-id="f2252-116">An incoming call sends a [**LINE\_CALLSTATE**](line-callstate.md) message, and a [**LINE\_LINEDEVSTATE**](line-linedevstate.md) message with the *ringing* indication.</span></span> <span data-ttu-id="f2252-117">Étant donné que le routage de tous les événements est supprimé, les événements Ring ne sont pas routés vers le téléphone, donc la sonnerie est supprimée.</span><span class="sxs-lookup"><span data-stu-id="f2252-117">Because routing of all events is suppressed, ring events are not routed to the phone, so ringing is suppressed.</span></span> <span data-ttu-id="f2252-118">Au lieu de cela, l’application avertit l’utilisateur qu’une boîte de dialogue contextuelle et un bip système s’affichent dans le casque.</span><span class="sxs-lookup"><span data-stu-id="f2252-118">Instead, the application notifies the user with a pop-up dialog box and a system beep in the headset.</span></span>

<span data-ttu-id="f2252-119">L’utilisateur décide de répondre à l’appel.</span><span class="sxs-lookup"><span data-stu-id="f2252-119">The user decides to answer the call.</span></span> <span data-ttu-id="f2252-120">Étant donné que le périphérique d’e/s actuel de l’utilisateur est le casque, l’application de téléphonie appelle [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) sur l’appel entrant pour acheminer le média de l’appel au casque et répondre à l’appel.</span><span class="sxs-lookup"><span data-stu-id="f2252-120">Because the user's current I/O device is the headset, the telephony application invokes [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) on the incoming call to route the call's media to the headset and answer the call.</span></span> <span data-ttu-id="f2252-121">L’application peut également appeler **lineSetTerminal** pour acheminer la lampe et afficher des événements d’informations sur l’ensemble de téléphones pour qu’elle se comporte comme d’habitude.</span><span class="sxs-lookup"><span data-stu-id="f2252-121">The application may also invoke **lineSetTerminal** to route lamp and display information events to the phone set so that it will behave as usual.</span></span>

<span data-ttu-id="f2252-122">À titre d’exemple, supposons qu’un appel entrant est une alerte sur l’ordinateur de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f2252-122">As a second example, assume that an incoming call is alerting at the user's computer.</span></span> <span data-ttu-id="f2252-123">Au lieu de sélectionner l’option de réponse avec la souris, l’utilisateur décide de simplement sélectionner le téléphone du téléphone pour répondre à l’appel.</span><span class="sxs-lookup"><span data-stu-id="f2252-123">Instead of selecting the answer option with the mouse, the user decides to just pick up the phone's handset to answer the call.</span></span> <span data-ttu-id="f2252-124">L’État offhook sur le téléphone envoie un message à l’application.</span><span class="sxs-lookup"><span data-stu-id="f2252-124">The offhook status at the phone sends a message to the application.</span></span> <span data-ttu-id="f2252-125">L’application peut interpréter cet État comme une demande de la manière dont l’utilisateur sélectionne le téléphone pour effectuer la conversation.</span><span class="sxs-lookup"><span data-stu-id="f2252-125">The application can interpret this status as a request by the user to select the phone handset to conduct the conversation.</span></span> <span data-ttu-id="f2252-126">L’application appelle ensuite [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) pour acheminer les données de la voix sur l’appel vers l’ensemble téléphonique.</span><span class="sxs-lookup"><span data-stu-id="f2252-126">The application then invokes [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) to route the voice data on the call to the phone set.</span></span>

 

 



