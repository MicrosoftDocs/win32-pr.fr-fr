---
description: Pour qu’une application puisse utiliser l’une des fonctions de téléphone supplémentaires TAPIs 30, elle a besoin d’une connexion à TAPI, par l’intermédiaire de laquelle elle peut recevoir des messages.
ms.assetid: c0211f64-4f73-4348-ae49-9a898d3aa093
title: Initialisation et arrêt
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6831b8cfda84ac564450caec554191198fd4c21f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106518977"
---
# <a name="initialization-and-shutdown"></a><span data-ttu-id="8cd86-103">Initialisation et arrêt</span><span class="sxs-lookup"><span data-stu-id="8cd86-103">Initialization and Shutdown</span></span>

<span data-ttu-id="8cd86-104">Pour qu’une application puisse utiliser les 30 fonctions de téléphone supplémentaires de TAPI, elle a besoin d’une connexion à l’interface TAPI, par l’intermédiaire de laquelle elle peut recevoir des messages.</span><span class="sxs-lookup"><span data-stu-id="8cd86-104">For an application to use any of TAPI's 30 supplementary phone functions, it needs a connection to TAPI, through which it can receive messages.</span></span> <span data-ttu-id="8cd86-105">L’application établit cette connexion à l’aide de la fonction [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) .</span><span class="sxs-lookup"><span data-stu-id="8cd86-105">The application establishes this connection using the [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function.</span></span> <span data-ttu-id="8cd86-106">Dans cette fonction, l’application spécifie le mécanisme de notification par lequel TAPI informe l’application des modifications de l’état du téléphone et de l’achèvement asynchrone des fonctions de téléphone.</span><span class="sxs-lookup"><span data-stu-id="8cd86-106">In this function, the application specifies the notification mechanism by which TAPI informs the application of changes in the state of the phone and of asynchronous completion of phone functions.</span></span>

<span data-ttu-id="8cd86-107">La fonction [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) retourne deux informations à l’application : un handle d' *application* et le nombre d’appareils téléphoniques.</span><span class="sxs-lookup"><span data-stu-id="8cd86-107">The [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function returns two pieces of information to the application: an *application handle*, and the number of phone devices.</span></span> <span data-ttu-id="8cd86-108">Le descripteur d’application représente l’utilisation de l’application TAPI.</span><span class="sxs-lookup"><span data-stu-id="8cd86-108">The application handle represents the application's usage of TAPI.</span></span> <span data-ttu-id="8cd86-109">Les fonctions TAPI qui utilisent des handles téléphoniques n’ont pas besoin du descripteur d’application, car ce descripteur est dérivé du descripteur téléphonique spécifié.</span><span class="sxs-lookup"><span data-stu-id="8cd86-109">The TAPI functions that use phone handles do not require the application handle, as this handle is derived from the specified phone handle.</span></span>

<span data-ttu-id="8cd86-110">La deuxième information retournée par [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) est le nombre d’appareils téléphoniques disponibles pour l’interface TAPI.</span><span class="sxs-lookup"><span data-stu-id="8cd86-110">The second piece of information returned by [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) is the number of phone devices available to TAPI.</span></span> <span data-ttu-id="8cd86-111">Les appareils téléphoniques sont identifiés par leur identificateur d’appareil (*ID d’appareil*).</span><span class="sxs-lookup"><span data-stu-id="8cd86-111">Phone devices are identified by their device identifier (*device ID*).</span></span> <span data-ttu-id="8cd86-112">Les identificateurs d’appareil valides sont compris entre zéro et le nombre d’appareils téléphoniques moins un.</span><span class="sxs-lookup"><span data-stu-id="8cd86-112">Valid device identifiers range from zero to the number of phone devices minus one.</span></span> <span data-ttu-id="8cd86-113">Par exemple, si **phoneInitializeEx** signale qu’il y a deux appareils téléphoniques dans un système, les identificateurs de périphérique téléphonique valides sont 0 et 1.</span><span class="sxs-lookup"><span data-stu-id="8cd86-113">For example, if **phoneInitializeEx** reports that there are two phone devices in a system, then valid phone device identifiers are 0 and 1.</span></span> <span data-ttu-id="8cd86-114">Une fois qu’une application a fini d’utiliser les fonctions de téléphonie de TAPI, elle appelle [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), en transmettant son handle d’application pour arrêter son utilisation de l’interface TAPI.</span><span class="sxs-lookup"><span data-stu-id="8cd86-114">After an application is finished using the phone functions of TAPI, it invokes [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), passing its application handle to shut down its usage of TAPI.</span></span> <span data-ttu-id="8cd86-115">Cela permet à TAPI de libérer toutes les ressources affectées à l’application.</span><span class="sxs-lookup"><span data-stu-id="8cd86-115">This allows TAPI to free any resources assigned to the application.</span></span>

<span data-ttu-id="8cd86-116">Les applications ne doivent pas appeler [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) sans ouvrir par la suite un téléphone (au moins pour la surveillance).</span><span class="sxs-lookup"><span data-stu-id="8cd86-116">Applications should not invoke [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) without subsequently opening a phone (at least for monitoring).</span></span> <span data-ttu-id="8cd86-117">Si l’application n’analyse pas et n’utilise pas d’appareils, elle doit appeler [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) afin que les ressources de mémoire allouées par la bibliothèque de liens dynamiques TAPI puissent être libérées si elles ne sont pas nécessaires, et la bibliothèque elle-même peut être déchargée de la mémoire alors qu’elle n’est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8cd86-117">If the application is not monitoring and not using any devices, it should call [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) so that memory resources allocated by the TAPI dynamic-link library can be released if unneeded, and the library itself can be unloaded from memory while not needed.</span></span>

<span data-ttu-id="8cd86-118">[**PhoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) et [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) fonctionnent de manière synchrone.</span><span class="sxs-lookup"><span data-stu-id="8cd86-118">Both [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) and [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) operate synchronously.</span></span> <span data-ttu-id="8cd86-119">Autrement dit, ces fonctions retournent une indication de réussite ou d’échec et ne retournent jamais d’identificateur de demande asynchrone.</span><span class="sxs-lookup"><span data-stu-id="8cd86-119">That is, these functions either return a success or failure indication, and never return an asynchronous request identifier.</span></span>

 

 



