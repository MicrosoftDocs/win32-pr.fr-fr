---
title: Authentification des connexions à distance
description: Windows Remote Management assure la sécurité de la communication entre les ordinateurs en prenant en charge plusieurs méthodes standard d’authentification et de chiffrement des messages.
ms.assetid: 97a13b07-ae7a-4d2f-8841-77a22c91b204
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 0e9aa125f2ccf5d8c224eee645a6dba1ec2fd96e
ms.sourcegitcommit: 25c6d442ab55cbf0e065398a006b1d409349fffd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/27/2020
ms.locfileid: "104030943"
---
# <a name="authentication-for-remote-connections"></a><span data-ttu-id="4bbae-103">Authentification des connexions à distance</span><span class="sxs-lookup"><span data-stu-id="4bbae-103">Authentication for Remote Connections</span></span>

<span data-ttu-id="4bbae-104">Windows Remote Management assure la sécurité de la communication entre les ordinateurs en prenant en charge plusieurs méthodes standard d’authentification et de chiffrement des messages.</span><span class="sxs-lookup"><span data-stu-id="4bbae-104">Windows Remote Management maintains security for communication between computers by supporting several standard methods of authentication and message encryption.</span></span>

## <a name="default-group-access"></a><span data-ttu-id="4bbae-105">Accès au groupe par défaut</span><span class="sxs-lookup"><span data-stu-id="4bbae-105">Default Group Access</span></span>

<span data-ttu-id="4bbae-106">Pendant l’installation, WinRM crée le groupe **local \_ \_ WinRMRemoteWMIUsers**.</span><span class="sxs-lookup"><span data-stu-id="4bbae-106">During setup, WinRM creates the local group **WinRMRemoteWMIUsers\_\_**.</span></span> <span data-ttu-id="4bbae-107">WinRM limite ensuite l’accès à distance à n’importe quel utilisateur qui n’est pas membre du groupe d’administration local ou du groupe **WinRMRemoteWMIUsers \_ \_** .</span><span class="sxs-lookup"><span data-stu-id="4bbae-107">WinRM then restricts remote access to any user that is not a member of either the local administration group or the **WinRMRemoteWMIUsers\_\_** group.</span></span> <span data-ttu-id="4bbae-108">Vous pouvez ajouter un utilisateur local, un utilisateur de domaine ou un groupe de domaines à **WinRMRemoteWMIUsers \_ \_** en tapant **net localgroup WinRMRemoteWMIUsers \_ \_ /Add <domain> \\ <username>** à l’invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="4bbae-108">You can add a local user, domain user, or domain group to **WinRMRemoteWMIUsers\_\_** by typing **net localgroup WinRMRemoteWMIUsers\_\_ /add <domain>\\<username>** at the command prompt.</span></span> <span data-ttu-id="4bbae-109">Si vous le souhaitez, vous pouvez utiliser la stratégie de groupe pour ajouter un utilisateur au groupe.</span><span class="sxs-lookup"><span data-stu-id="4bbae-109">Optionally, you can use the Group Policy to add a user to the group.</span></span>

## <a name="default-authentication-settings"></a><span data-ttu-id="4bbae-110">Paramètres d’authentification par défaut</span><span class="sxs-lookup"><span data-stu-id="4bbae-110">Default Authentication Settings</span></span>

<span data-ttu-id="4bbae-111">Les informations d’identification par défaut, le nom d’utilisateur et le mot de passe, sont les informations d’identification du compte d’utilisateur connecté qui exécute le script.</span><span class="sxs-lookup"><span data-stu-id="4bbae-111">The default credentials, user name, and password, are the credentials for the logged-on user account that runs the script.</span></span>

<span data-ttu-id="4bbae-112">**Pour passer à un autre compte sur un ordinateur distant**</span><span class="sxs-lookup"><span data-stu-id="4bbae-112">**To change to another account on a remote computer**</span></span>

1.  <span data-ttu-id="4bbae-113">Spécifiez les informations d’identification dans un objet [**ConnectionOptions**](connectionoptions.md) ou [**IWSManConnectionOptions**](/windows/desktop/api/WSManDisp/nn-wsmandisp-iwsmanconnectionoptions) et fournissez-les à l’appel [**CreateSession**](wsman-createsession.md) .</span><span class="sxs-lookup"><span data-stu-id="4bbae-113">Specify the credentials in a [**ConnectionOptions**](connectionoptions.md) or [**IWSManConnectionOptions**](/windows/desktop/api/WSManDisp/nn-wsmandisp-iwsmanconnectionoptions) object and supply that to the [**CreateSession**](wsman-createsession.md) call.</span></span>
2.  <span data-ttu-id="4bbae-114">Définissez **WSManFlagCredUserNamePassword** dans le paramètre *Flags* de l’appel [**CreateSession**](wsman-createsession.md) .</span><span class="sxs-lookup"><span data-stu-id="4bbae-114">Set the **WSManFlagCredUserNamePassword** in the *flags* parameter in the [**CreateSession**](wsman-createsession.md) call.</span></span>

<span data-ttu-id="4bbae-115">La liste suivante contient une liste de ce qui se produit lorsqu’un script ou une application s’exécute sous les informations d’identification par défaut :</span><span class="sxs-lookup"><span data-stu-id="4bbae-115">The following list contains a list of what occurs when a script or application runs under the default credentials:</span></span>

-   <span data-ttu-id="4bbae-116">[*Kerberos*](windows-remote-management-glossary.md) est la méthode d’authentification par défaut lorsque le client se trouve dans un domaine et que la chaîne de destination distante ne fait pas partie des éléments suivants : localhost, 127.0.0.1 ou \[ :: 1 \] .</span><span class="sxs-lookup"><span data-stu-id="4bbae-116">[*Kerberos*](windows-remote-management-glossary.md) is the default method of authentication when the client is in a domain and the remote destination string is not one of the following: localhost, 127.0.0.1, or \[::1\].</span></span>
-   <span data-ttu-id="4bbae-117">[*Negotiate*](windows-remote-management-glossary.md) est la méthode par défaut lorsque le client n’est pas dans un domaine, mais que la chaîne de destination distante est l’une des suivantes : localhost, 127.0.0.1 ou \[ :: 1 \] .</span><span class="sxs-lookup"><span data-stu-id="4bbae-117">[*Negotiate*](windows-remote-management-glossary.md) is the default method when the client is not in a domain, but the remote destination string is one of the following: localhost, 127.0.0.1, or \[::1\].</span></span>

<span data-ttu-id="4bbae-118">Si vous fournissez des informations d’identification explicites avec un objet [**ConnectionOptions**](connectionoptions.md) , Negotiate est la méthode par défaut.</span><span class="sxs-lookup"><span data-stu-id="4bbae-118">If you supply explicit credentials with a [**ConnectionOptions**](connectionoptions.md) object, Negotiate is the default method.</span></span> <span data-ttu-id="4bbae-119">L’authentification par négociation détermine si la méthode d’authentification en cours est Kerberos ou NTLM, selon que les ordinateurs se trouvent dans un domaine ou un groupe de travail.</span><span class="sxs-lookup"><span data-stu-id="4bbae-119">Negotiate authentication determines whether the ongoing authentication method is Kerberos or NTLM, depending on whether the computers are in a domain or workgroup.</span></span> <span data-ttu-id="4bbae-120">Si vous vous connectez à un ordinateur cible distant à l’aide d’un compte local, le compte doit être préfixé avec le nom de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="4bbae-120">If connecting to a remote target computer using a local account, then the account should be prefixed with the computer name.</span></span> <span data-ttu-id="4bbae-121">Par exemple, myComputer \\ myUsername.</span><span class="sxs-lookup"><span data-stu-id="4bbae-121">For example, myComputer\\myUsername.</span></span>

<span data-ttu-id="4bbae-122">Si vous spécifiez l’authentification Negotiate, Digest ou de base et que vous ne parvenez pas à fournir un objet [**ConnectionOptions**](connectionoptions.md) , vous recevrez une erreur indiquant que des informations d’identification explicites sont requises.</span><span class="sxs-lookup"><span data-stu-id="4bbae-122">If you specify Negotiate, Digest, or Basic authentication and fail to supply a [**ConnectionOptions**](connectionoptions.md) object, then you will receive an error indicating that explicit credentials are required.</span></span> <span data-ttu-id="4bbae-123">Si le protocole HTTPs n’est pas le transport, l’ordinateur distant cible doit être configuré dans la liste des ordinateurs hôtes approuvés.</span><span class="sxs-lookup"><span data-stu-id="4bbae-123">If HTTPS is not the transport, then the target remote computer must be configured in the list of trusted host computers.</span></span>

<span data-ttu-id="4bbae-124">Pour plus d’informations sur les types d’authentification activés dans les paramètres de configuration par défaut, consultez [installation et configuration de Windows Remote Management](installation-and-configuration-for-windows-remote-management.md).</span><span class="sxs-lookup"><span data-stu-id="4bbae-124">For more information about the authentication types that are enabled in the default configuration settings, see [Installation and Configuration for Windows Remote Management](installation-and-configuration-for-windows-remote-management.md).</span></span>

## <a name="basic-authentication"></a><span data-ttu-id="4bbae-125">Authentification de base</span><span class="sxs-lookup"><span data-stu-id="4bbae-125">Basic Authentication</span></span>

<span data-ttu-id="4bbae-126">Pour établir explicitement l’authentification de [*base*](windows-remote-management-glossary.md) dans l’appel à [**WSMan. CreateSession**](wsman-createsession.md), définissez les indicateurs **WSManFlagUseBasic** et **WSManFlagCredUserNamePassword** dans le paramètre *Flags* .</span><span class="sxs-lookup"><span data-stu-id="4bbae-126">To explicitly establish [*Basic*](windows-remote-management-glossary.md) authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseBasic** and **WSManFlagCredUserNamePassword** flags in the *flags* parameter.</span></span> <span data-ttu-id="4bbae-127">L’authentification de base est désactivée dans les paramètres de configuration par défaut pour le client WinRM et le serveur WinRM.</span><span class="sxs-lookup"><span data-stu-id="4bbae-127">Basic authentication is disabled in the default configuration settings for both the WinRM client and the WinRM server.</span></span>

## <a name="digest-authentication"></a><span data-ttu-id="4bbae-128">Authentification Digest</span><span class="sxs-lookup"><span data-stu-id="4bbae-128">Digest Authentication</span></span>

<span data-ttu-id="4bbae-129">Pour établir explicitement l’authentification [*Digest*](windows-remote-management-glossary.md) dans l’appel à [**WSMan. CreateSession**](wsman-createsession.md), définissez l’indicateur **WSManFlagUseDigest** dans le paramètre *Flags* .</span><span class="sxs-lookup"><span data-stu-id="4bbae-129">To explicitly establish [*Digest*](windows-remote-management-glossary.md) authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseDigest** flag in the *flags* parameter.</span></span> <span data-ttu-id="4bbae-130">Digest n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="4bbae-130">Digest is not supported.</span></span> <span data-ttu-id="4bbae-131">Elle ne peut pas être configurée pour le composant serveur WinRM.</span><span class="sxs-lookup"><span data-stu-id="4bbae-131">It cannot be configured, for the WinRM server component.</span></span>

## <a name="negotiate-authentication"></a><span data-ttu-id="4bbae-132">Négocier l’authentification</span><span class="sxs-lookup"><span data-stu-id="4bbae-132">Negotiate Authentication</span></span>

<span data-ttu-id="4bbae-133">Pour établir explicitement l’authentification par [*négociation*](windows-remote-management-glossary.md) , également appelée authentification intégrée de Windows, dans l’appel à [**WSMan. CreateSession**](wsman-createsession.md), définissez l’indicateur **WSManFlagUseNegotiate** dans le paramètre *Flags* .</span><span class="sxs-lookup"><span data-stu-id="4bbae-133">To explicitly establish [*Negotiate*](windows-remote-management-glossary.md) authentication, also known as Windows Integrated Authentication, in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseNegotiate** flag in the *flags* parameter.</span></span>

<span data-ttu-id="4bbae-134">Le [contrôle de compte d’utilisateur (UAC)](https://support.microsoft.com/help/922708/how-to-use-user-account-control-uac-in-windows-vista) affecte l’accès au service WinRM.</span><span class="sxs-lookup"><span data-stu-id="4bbae-134">[User Account Control (UAC)](https://support.microsoft.com/help/922708/how-to-use-user-account-control-uac-in-windows-vista) affects access to the WinRM service.</span></span> <span data-ttu-id="4bbae-135">Lorsque l’authentification Negotiate est utilisée dans un groupe de travail, seul le compte administrateur intégré peut accéder au service.</span><span class="sxs-lookup"><span data-stu-id="4bbae-135">When Negotiate authentication is used in a workgroup, only the built-in Administrator account can access the service.</span></span> <span data-ttu-id="4bbae-136">Pour autoriser tous les comptes du groupe administrateurs à accéder au service, définissez la valeur de Registre suivante :</span><span class="sxs-lookup"><span data-stu-id="4bbae-136">To allow all accounts in the Administrators group to access the service, set the following registry value:</span></span>

<span data-ttu-id="4bbae-137">**HKEY \_ Logiciel de l' \_ ordinateur local** \\  \\ **Microsoft** \\ **Windows** \\ **CurrentVersion** \\ **Policies** \\ **System** \\ **LocalAccountTokenFilterPolicy** = 1</span><span class="sxs-lookup"><span data-stu-id="4bbae-137">**HKEY\_LOCAL\_MACHINE**\\**SOFTWARE**\\**Microsoft**\\**Windows**\\**CurrentVersion**\\**Policies**\\**System**\\**LocalAccountTokenFilterPolicy** = 1</span></span>

## <a name="kerberos-authentication"></a><span data-ttu-id="4bbae-138">Authentification Kerberos</span><span class="sxs-lookup"><span data-stu-id="4bbae-138">Kerberos Authentication</span></span>

<span data-ttu-id="4bbae-139">Pour établir explicitement l’authentification [*Kerberos*](windows-remote-management-glossary.md) dans l’appel à [**WSMan. CreateSession**](wsman-createsession.md), définissez l’indicateur **WSManFlagUseKerberos** dans le paramètre *Flags* .</span><span class="sxs-lookup"><span data-stu-id="4bbae-139">To explicitly establish [*Kerberos*](windows-remote-management-glossary.md) authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseKerberos** flag in the *flags* parameter.</span></span> <span data-ttu-id="4bbae-140">Le client et le serveur doivent tous les deux être joints à un domaine.</span><span class="sxs-lookup"><span data-stu-id="4bbae-140">Both the client and the server computers must be joined to a domain.</span></span> <span data-ttu-id="4bbae-141">Si vous utilisez Kerberos comme méthode d’authentification, vous ne pouvez pas utiliser une adresse IP dans l’appel à [**WSMan. CreateSession**](wsman-createsession.md) ou [**IWSMan :: CreateSession**](/windows/desktop/api/WSManDisp/nf-wsmandisp-iwsman-createsession).</span><span class="sxs-lookup"><span data-stu-id="4bbae-141">If you use Kerberos as the authentication method, you cannot use an IP address in the call to [**WSMan.CreateSession**](wsman-createsession.md) or [**IWSMan::CreateSession**](/windows/desktop/api/WSManDisp/nf-wsmandisp-iwsman-createsession).</span></span>

## <a name="client-certificate-based-authentication"></a><span data-ttu-id="4bbae-142">Authentification par certificat client</span><span class="sxs-lookup"><span data-stu-id="4bbae-142">Client Certificate-based Authentication</span></span>

<span data-ttu-id="4bbae-143">Pour établir l’authentification par certificat client dans l’appel à [**WSMan. CreateSession**](wsman-createsession.md), définissez l’indicateur **WSManFlagUseClientCertificate** dans le paramètre *Flags* .</span><span class="sxs-lookup"><span data-stu-id="4bbae-143">To establish client certificate-based authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseClientCertificate** flag in the *flags* parameter.</span></span>

<span data-ttu-id="4bbae-144">Vous devez d’abord activer l’authentification par certificat à la fois sur le client et le service à l’aide de l’outil en ligne de commande WinRM.</span><span class="sxs-lookup"><span data-stu-id="4bbae-144">You must first enable certificate authentication on both the client and service by using the Winrm command line tool.</span></span> <span data-ttu-id="4bbae-145">Pour plus d’informations, consultez [activation des options d’authentification](#enabling-or-disabling-authentication-options).</span><span class="sxs-lookup"><span data-stu-id="4bbae-145">For more information, see [Enabling Authentication Options](#enabling-or-disabling-authentication-options).</span></span> <span data-ttu-id="4bbae-146">Vous devez également créer une entrée dans la table CertMapping sur l’ordinateur serveur WinRM.</span><span class="sxs-lookup"><span data-stu-id="4bbae-146">You must also create an entry in the CertMapping table on the WinRM server computer.</span></span> <span data-ttu-id="4bbae-147">Cela établit un mappage entre un ou plusieurs certificats et un compte local.</span><span class="sxs-lookup"><span data-stu-id="4bbae-147">This establishes a mapping between one or more certificates and a local account.</span></span> <span data-ttu-id="4bbae-148">Une fois le certificat utilisé pour l’authentification et l’autorisation, le compte local correspondant est utilisé pour les opérations effectuées par le service WinRM.</span><span class="sxs-lookup"><span data-stu-id="4bbae-148">After the certificate has been used for authentication and authorization, the corresponding local account is used for operations performed by the WinRM service.</span></span>

<span data-ttu-id="4bbae-149">Le mappage peut être créé pour un URI de ressource spécifique.</span><span class="sxs-lookup"><span data-stu-id="4bbae-149">The mapping can be created for a specific resource URI.</span></span> <span data-ttu-id="4bbae-150">Pour plus d’informations, notamment sur la création d’une entrée de table CertMapping, tapez **WinRM Help CertMapping** à l’invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="4bbae-150">To learn more, including how to create a CertMapping table entry, type **winrm help certmapping** at the command prompt.</span></span>

> [!Note]  
> <span data-ttu-id="4bbae-151">La taille maximale du certificat utilisable par WinRM dans ce contexte est de 16 Ko.</span><span class="sxs-lookup"><span data-stu-id="4bbae-151">The maximum size certificate usable by WinRM in this context is 16KB.</span></span>

 

## <a name="enabling-or-disabling-authentication-options"></a><span data-ttu-id="4bbae-152">Activation ou désactivation des options d’authentification</span><span class="sxs-lookup"><span data-stu-id="4bbae-152">Enabling or Disabling Authentication Options</span></span>

<span data-ttu-id="4bbae-153">L’option d’authentification par défaut lors de l’installation du système est Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4bbae-153">The default authentication option at system installation is Kerberos.</span></span> <span data-ttu-id="4bbae-154">Pour plus d’informations, consultez [installation et configuration de Windows Remote Management](installation-and-configuration-for-windows-remote-management.md).</span><span class="sxs-lookup"><span data-stu-id="4bbae-154">For more information, see [Installation and Configuration for Windows Remote Management](installation-and-configuration-for-windows-remote-management.md).</span></span>

<span data-ttu-id="4bbae-155">Si votre script ou votre application requiert une méthode d’authentification spécifique qui n’est pas activée, vous devez modifier la configuration pour activer ce type d’authentification.</span><span class="sxs-lookup"><span data-stu-id="4bbae-155">If your script or application requires a specific authentication method that is not enabled, you must change the configuration to enable this type of authentication.</span></span> <span data-ttu-id="4bbae-156">Cette modification peut être effectuée à l’aide de l’outil de ligne de commande **WinRM** ou de stratégie de groupe pour l' **objet Windows Remote Management stratégie de groupe**.</span><span class="sxs-lookup"><span data-stu-id="4bbae-156">This change can be made using the **Winrm** command-line tool or through Group Policy for the **Windows Remote Management Group Policy Object**.</span></span> <span data-ttu-id="4bbae-157">Vous pouvez également choisir de désactiver certaines méthodes d’authentification.</span><span class="sxs-lookup"><span data-stu-id="4bbae-157">You may also choose to disable certain methods of authentication.</span></span>

<span data-ttu-id="4bbae-158">**Pour activer ou désactiver l’authentification avec l’outil WinRM**</span><span class="sxs-lookup"><span data-stu-id="4bbae-158">**To enable or disable authentication with the Winrm tool**</span></span>

1.  <span data-ttu-id="4bbae-159">Pour définir la configuration du client WinRM, utilisez la commande **winrm set** et spécifiez le client.</span><span class="sxs-lookup"><span data-stu-id="4bbae-159">To set the configuration for the WinRM client, use the **Winrm Set** command and specify the client.</span></span> <span data-ttu-id="4bbae-160">Par exemple, la commande suivante désactive l’authentification Digest pour le client.</span><span class="sxs-lookup"><span data-stu-id="4bbae-160">For example, the following command disables digest authentication for the client.</span></span>

    <span data-ttu-id="4bbae-161">**winrm set winrm/config/client/auth @ {Digest = "false"}**</span><span class="sxs-lookup"><span data-stu-id="4bbae-161">**winrm set winrm/config/client/auth @{Digest="false"}**</span></span>

2.  <span data-ttu-id="4bbae-162">Pour définir la configuration du serveur WinRM, utilisez la commande **winrm set** et spécifiez le service.</span><span class="sxs-lookup"><span data-stu-id="4bbae-162">To set the configuration for the WinRM server, use the **Winrm Set** command and specify the service.</span></span> <span data-ttu-id="4bbae-163">Par exemple, la commande suivante active l’authentification Kerberos pour le service.</span><span class="sxs-lookup"><span data-stu-id="4bbae-163">For example, the following command enables Kerberos authentication for the service.</span></span>

    <span data-ttu-id="4bbae-164">**winrm set winrm/config/service/auth @ {Kerberos = "true"}**</span><span class="sxs-lookup"><span data-stu-id="4bbae-164">**winrm set winrm/config/service/auth @{Kerberos="true"}**</span></span>

## <a name="related-topics"></a><span data-ttu-id="4bbae-165">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="4bbae-165">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4bbae-166">À propos de Windows Remote Management</span><span class="sxs-lookup"><span data-stu-id="4bbae-166">About Windows Remote Management</span></span>](about-windows-remote-management.md)
</dt> <dt>

[<span data-ttu-id="4bbae-167">**WSMan. CreateSession**</span><span class="sxs-lookup"><span data-stu-id="4bbae-167">**WSMan.CreateSession**</span></span>](wsman-createsession.md)
</dt> <dt>

[<span data-ttu-id="4bbae-168">Utilisation de Windows Remote Management</span><span class="sxs-lookup"><span data-stu-id="4bbae-168">Using Windows Remote Management</span></span>](using-windows-remote-management.md)
</dt> </dl>

 

 




