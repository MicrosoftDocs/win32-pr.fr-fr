---
title: Conditions d’inactivité de la tâche
description: Une tâche peut être gérée de plusieurs façons lorsque l’ordinateur entre dans un état d’inactivité. Cela comprend la définition d’un déclencheur inactif ou la définition des conditions d’inactivité pour le démarrage de la tâche.
ms.assetid: 1e480681-b77a-48fe-a732-dd1591eaa08d
keywords:
- conditions d’inactivité Planificateur de tâches
- conditions d’inactivité Planificateur de tâches, discussion
- création de déclencheurs inactifs Planificateur de tâches
- déclencheurs inactifs Planificateur de tâches
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 501be9b73e3ec355b998697fb5e87c5163224b71
ms.sourcegitcommit: 857e701bbd35004661bb047e1f24622af9ff1dd7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/19/2020
ms.locfileid: "103734668"
---
# <a name="task-idle-conditions"></a><span data-ttu-id="48f88-108">Conditions d’inactivité de la tâche</span><span class="sxs-lookup"><span data-stu-id="48f88-108">Task idle conditions</span></span>

<span data-ttu-id="48f88-109">Une tâche peut être gérée de plusieurs façons lorsque l’ordinateur entre dans un état d’inactivité.</span><span class="sxs-lookup"><span data-stu-id="48f88-109">A task can be handled in several ways when the computer enters an idle state.</span></span> <span data-ttu-id="48f88-110">Cela comprend la définition d’un déclencheur inactif ou la définition des conditions d’inactivité pour le démarrage de la tâche.</span><span class="sxs-lookup"><span data-stu-id="48f88-110">This includes defining an idle trigger or setting the idle conditions for when the task starts.</span></span>

## <a name="detecting-the-idle-state"></a><span data-ttu-id="48f88-111">Détection de l’état inactif</span><span class="sxs-lookup"><span data-stu-id="48f88-111">Detecting the idle state</span></span>

<span data-ttu-id="48f88-112">Dans Windows 7, le Planificateur de tâches vérifie que l’ordinateur est en état d’inactivité toutes les 15 minutes.</span><span class="sxs-lookup"><span data-stu-id="48f88-112">In Windows 7, the Task Scheduler verifies that the computer is in an idle state every 15 minutes.</span></span> <span data-ttu-id="48f88-113">Planificateur de tâches recherche un état inactif à l’aide de deux critères : absence de l’utilisateur et consommation de ressources insuffisante.</span><span class="sxs-lookup"><span data-stu-id="48f88-113">Task Scheduler checks for an idle state using two criteria: user absence, and a lack of resource consumption.</span></span> <span data-ttu-id="48f88-114">L’utilisateur est considéré comme absent s’il n’y a pas d’entrée de clavier ou de souris pendant cette période.</span><span class="sxs-lookup"><span data-stu-id="48f88-114">The user is considered absent if there is no keyboard or mouse input during this period of time.</span></span> <span data-ttu-id="48f88-115">L’ordinateur est considéré comme inactif si tous les processeurs et tous les disques étaient inactifs pendant plus de 90% du dernier intervalle de détection.</span><span class="sxs-lookup"><span data-stu-id="48f88-115">The computer is considered idle if all the processors and all the disks were idle for more than 90% of the last detection interval.</span></span> <span data-ttu-id="48f88-116">(Une exception serait pour n’importe quelle application de type de présentation qui définit les ES \_ AFFICHER l' \_ indicateur obligatoire.</span><span class="sxs-lookup"><span data-stu-id="48f88-116">(An exception would be for any presentation type application that sets the ES\_DISPLAY\_REQUIRED flag.</span></span> <span data-ttu-id="48f88-117">Cet indicateur force la planification des tâches à ne pas considérer le système comme étant inactif, quelle que soit l’activité de l’utilisateur ou la consommation des ressources.)</span><span class="sxs-lookup"><span data-stu-id="48f88-117">This flag forces Task Schedule to not consider the system as being idle, regardless of user activity or resource consumption.)</span></span>

<span data-ttu-id="48f88-118">Dans Windows 7, Planificateur de tâches considère qu’un processeur est inactif même lorsque les threads de faible priorité (priorité de thread < normale) s’exécutent.</span><span class="sxs-lookup"><span data-stu-id="48f88-118">In Windows 7, Task Scheduler considers a processor as idle even when low priority threads (thread priority < normal) execute.</span></span>

<span data-ttu-id="48f88-119">Dans Windows 7, lorsque le Planificateur de tâches détecte que l’ordinateur est inactif, le service attend uniquement l’entrée utilisateur pour marquer la fin de l’état inactif.</span><span class="sxs-lookup"><span data-stu-id="48f88-119">In Windows 7, when the Task Scheduler detects that the computer is idle, the service waits only for user input to mark the end of the idle state.</span></span>

<span data-ttu-id="48f88-120">Dans Windows 8, Planificateur de tâches effectue les mêmes vérifications générales d’absence et de consommation des ressources.</span><span class="sxs-lookup"><span data-stu-id="48f88-120">In Windows 8, Task Scheduler performs the same general user absence and resource consumption checks.</span></span> <span data-ttu-id="48f88-121">Toutefois, Planificateur de tâches s’appuie sur le sous-système d’alimentation du système d’exploitation pour détecter la présence de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="48f88-121">However, Task Scheduler relies on the operating system power subsystem to detect user presence.</span></span> <span data-ttu-id="48f88-122">Par défaut, l’utilisateur est considéré comme absent après quatre minutes, sans clavier ou entrée de souris.</span><span class="sxs-lookup"><span data-stu-id="48f88-122">By default, the user is considered absent after four minutes of no keyboard or mouse input.</span></span> <span data-ttu-id="48f88-123">L’heure de vérification de la consommation des ressources est raccourcie à 10 minutes lorsque l’utilisateur est présent.</span><span class="sxs-lookup"><span data-stu-id="48f88-123">The resource consumption verification time is shortened to 10 minute intervals when the user is present.</span></span> <span data-ttu-id="48f88-124">Lorsque l’utilisateur est absent, la durée de la vérification est réduite à 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="48f88-124">When the user is away, the verification time is shortened to 30 second intervals.</span></span> <span data-ttu-id="48f88-125">Planificateur de tâches effectue des vérifications de la consommation des ressources supplémentaires pour les événements suivants :</span><span class="sxs-lookup"><span data-stu-id="48f88-125">Task Scheduler makes additional resource consumption checks for the following events:</span></span>

-   <span data-ttu-id="48f88-126">État de présence de l’utilisateur modifié</span><span class="sxs-lookup"><span data-stu-id="48f88-126">User presence state changed</span></span>
-   <span data-ttu-id="48f88-127">Source d’alimentation AC/DC modifiée</span><span class="sxs-lookup"><span data-stu-id="48f88-127">AC/DC power source changed</span></span>
-   <span data-ttu-id="48f88-128">Niveau de batterie modifié (uniquement sur les batteries)</span><span class="sxs-lookup"><span data-stu-id="48f88-128">Battery level changed (only when on batteries)</span></span>

<span data-ttu-id="48f88-129">Lorsque l’un des événements ci-dessus se produit, Planificateur de tâches teste l’ordinateur en cas d’inactivité depuis la dernière heure de vérification.</span><span class="sxs-lookup"><span data-stu-id="48f88-129">When any of the events above happens, Task Scheduler tests the computer for idleness since the last verification time.</span></span> <span data-ttu-id="48f88-130">En pratique, cela signifie que Planificateur de tâches pouvez déclarer le système comme inactif immédiatement après la détection de l’absence de l’utilisateur, si les autres conditions ont été remplies depuis la dernière heure de vérification.</span><span class="sxs-lookup"><span data-stu-id="48f88-130">In practice, this means that Task Scheduler may declare the system as idle immediately after user absence is detected, if the other conditions have been met since the last verification time.</span></span>

<span data-ttu-id="48f88-131">Dans Windows 8, les seuils d’UC et d’e/s sont définis sur 80%.</span><span class="sxs-lookup"><span data-stu-id="48f88-131">In Windows 8, the CPU and IO thresholds are set to 80%.</span></span>

<span data-ttu-id="48f88-132">Lors de la détection de l’état inactif dans Windows 8 Server, Planificateur de tâches ne prend pas en compte la présence ou l’absence d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="48f88-132">When detecting the idle state in Windows 8 Server, Task Scheduler does not take user presence or absence into account.</span></span> <span data-ttu-id="48f88-133">Pour marquer la fin de l’état inactif, Planificateur de tâches révise la consommation des ressources une fois en 90 minutes.</span><span class="sxs-lookup"><span data-stu-id="48f88-133">To mark the end of the idle state, Task Scheduler revises the resource consumption once in 90 minutes.</span></span>

## <a name="defining-an-idle-trigger"></a><span data-ttu-id="48f88-134">Définition d’un déclencheur inactif</span><span class="sxs-lookup"><span data-stu-id="48f88-134">Defining an idle trigger</span></span>

<span data-ttu-id="48f88-135">Une tâche peut être démarrée lorsque l’ordinateur passe à l’état inactif en définissant un déclencheur inactif.</span><span class="sxs-lookup"><span data-stu-id="48f88-135">A task can be started when the computer enters an idle state by defining an idle trigger.</span></span>

<span data-ttu-id="48f88-136">Un déclencheur inactif déclenche une action de tâche uniquement si l’ordinateur entre dans un état d’inactivité après la limite de démarrage du déclencheur.</span><span class="sxs-lookup"><span data-stu-id="48f88-136">An idle trigger will only trigger a task action if the computer enters an idle state after the start boundary of the trigger.</span></span>

<span data-ttu-id="48f88-137">Une application peut définir un déclencheur inactif à l’aide de l’interface [**IIdleTrigger**](/windows/win32/api/taskschd/nn-taskschd-iidletrigger) .</span><span class="sxs-lookup"><span data-stu-id="48f88-137">An application can define an idle trigger by using the [**IIdleTrigger**](/windows/win32/api/taskschd/nn-taskschd-iidletrigger) interface.</span></span>

<span data-ttu-id="48f88-138">En cas de lecture ou d’écriture de code XML, le déclencheur inactif est spécifié par l’élément [**IdleTrigger**](taskschedulerschema-idletrigger-triggergroup-element.md) du schéma planificateur de tâches.</span><span class="sxs-lookup"><span data-stu-id="48f88-138">If reading or writing XML, the idle trigger is specified by the [**IdleTrigger**](taskschedulerschema-idletrigger-triggergroup-element.md) element of the Task Scheduler schema.</span></span>

## <a name="task-settings-for-idle-conditions"></a><span data-ttu-id="48f88-139">Paramètres de tâche pour les conditions d’inactivité</span><span class="sxs-lookup"><span data-stu-id="48f88-139">Task settings for idle conditions</span></span>

<span data-ttu-id="48f88-140">Les paramètres de tâche peuvent être utilisés pour définir la manière dont le Planificateur de tâches gère la tâche lorsque l’ordinateur entre dans un état d’inactivité.</span><span class="sxs-lookup"><span data-stu-id="48f88-140">The task settings can be used to define how the Task Scheduler handles the task when the computer enters an idle state.</span></span>

<span data-ttu-id="48f88-141">Les illustrations suivantes fournissent trois chronologies possibles qui montrent comment ces différentes conditions d’inactivité sont liées les unes aux autres.</span><span class="sxs-lookup"><span data-stu-id="48f88-141">The following illustrations provide three possible timelines that show how these different idle conditions relate to each other.</span></span> <span data-ttu-id="48f88-142">N’oubliez pas que les illustrations démarrent lorsque le déclencheur de tâche est activé ou lorsque la tâche est démarrée à la demande (sans demander à [Ignorer les contraintes de tâche existantes](/windows/win32/api/taskschd/ne-taskschd-task_run_flags)).</span><span class="sxs-lookup"><span data-stu-id="48f88-142">Be aware that the illustrations start when the task trigger is activated or when the task is started on demand (without requesting to [ignore the existing task constraints](/windows/win32/api/taskschd/ne-taskschd-task_run_flags)).</span></span>

> [!NOTE]
> <span data-ttu-id="48f88-143">Les paramètres *Duration* et *WaitTimeout* sont déconseillés.</span><span class="sxs-lookup"><span data-stu-id="48f88-143">The *Duration* and *WaitTimeout* settings are deprecated.</span></span> <span data-ttu-id="48f88-144">Elles sont toujours présentes dans l’interface utilisateur Planificateur de tâches et leurs méthodes d’interface peuvent toujours retourner des valeurs valides, mais elles ne sont plus utilisées.</span><span class="sxs-lookup"><span data-stu-id="48f88-144">They're still present in the Task Scheduler user interface, and their interface methods may still return valid values, but they're no longer used.</span></span>

![chronologie des conditions d’inactivité](images/idle-conditions2.png)

<span data-ttu-id="48f88-146">La liste suivante décrit les conditions d’inactivité.</span><span class="sxs-lookup"><span data-stu-id="48f88-146">The following list describes the idle conditions.</span></span>
- <span data-ttu-id="48f88-147">Démarrage inactif : heure à laquelle l’ordinateur passe à l’état inactif.</span><span class="sxs-lookup"><span data-stu-id="48f88-147">Idle start: The time when the computer enters the idle state.</span></span>
- <span data-ttu-id="48f88-148">Idle end : heure à laquelle l’ordinateur passe de l’état inactif.</span><span class="sxs-lookup"><span data-stu-id="48f88-148">Idle end: The time when the computer transitions out of the idle state.</span></span> <span data-ttu-id="48f88-149">N’oubliez pas que la durée d’inactivité de l’ordinateur est indépendante de la durée d’inactivité décrite précédemment.</span><span class="sxs-lookup"><span data-stu-id="48f88-149">Be aware that the amount of time the computer is in the idle state is independent of the idle duration time that was described previously.</span></span>

<span data-ttu-id="48f88-150">L’attente et la durée d’inactivité sont dépréciées.</span><span class="sxs-lookup"><span data-stu-id="48f88-150">Idle wait and Idle duration have been deprecated.</span></span>
- <span data-ttu-id="48f88-151">Attente d’inactivité : durée pendant laquelle l’Planificateur de tâches attend qu’un état inactif se produise après l’activation d’un déclencheur de tâche ou après le démarrage de la tâche à la demande.</span><span class="sxs-lookup"><span data-stu-id="48f88-151">Idle wait: The amount of time that the Task Scheduler will wait for an idle state to occur after a task trigger is activated or after the task is started on demand.</span></span>
- <span data-ttu-id="48f88-152">Durée d’inactivité : durée pendant laquelle vous souhaitez que l’ordinateur soit inactif avant de démarrer la tâche.</span><span class="sxs-lookup"><span data-stu-id="48f88-152">Idle duration: The amount of time you want the computer to have been idle before starting the task.</span></span>

<span data-ttu-id="48f88-153">Par exemple, si une tâche est définie sur Démarrer uniquement si l’ordinateur est inactif pendant 30 minutes et que la tâche attend que l’ordinateur soit inactif pendant 10 minutes, la tâche est lancée dans les 5 minutes seulement si l’ordinateur a été inactif pendant 25 minutes avant l’activation du déclencheur.</span><span class="sxs-lookup"><span data-stu-id="48f88-153">For example, if a task is set to start only if the computer is idle for 30 minutes, and the task waits for the computer to be idle for 10 minutes, then the task will launch in 5 minutes only if the computer has been idle for 25 minutes prior to the time the trigger was activated.</span></span> <span data-ttu-id="48f88-154">La tâche ne démarrera pas si l’ordinateur passe à l’état inactif 5 minutes après l’activation du déclencheur.</span><span class="sxs-lookup"><span data-stu-id="48f88-154">The task will not start if the computer enters an idle state 5 minutes after the trigger is activated.</span></span>

<span data-ttu-id="48f88-155">Par défaut, une propriété [**DisallowStartIfOnBatteries**](/windows/desktop/api/taskschd/nf-taskschd-itasksettings-get_disallowstartifonbatteries) de la tâche a la valeur true, ce qui signifie que le service Planificateur de tâches n’exécutera pas les tâches qui sont déclenchées par un déclencheur inactif (ou un déclencheur avec des conditions d’inactivité) lorsqu’un ordinateur fonctionne sur batterie.</span><span class="sxs-lookup"><span data-stu-id="48f88-155">By default, a task [**DisallowStartIfOnBatteries**](/windows/desktop/api/taskschd/nf-taskschd-itasksettings-get_disallowstartifonbatteries) property is set to true, which means the Task Scheduler service will not run tasks that are triggered by an idle trigger (or a trigger with idle conditions) when a computer is running on battery power.</span></span> <span data-ttu-id="48f88-156">Vous pouvez modifier ce comportement en affectant à la propriété **DisallowStartIfOnBatteries** la valeur false.</span><span class="sxs-lookup"><span data-stu-id="48f88-156">You can change this behavior by setting the **DisallowStartIfOnBatteries** property to false.</span></span>

<span data-ttu-id="48f88-157">Si une tâche est déclenchée par un déclencheur inactif, la propriété [**WaitTimeout**](/windows/desktop/api/taskschd/nf-taskschd-iidlesettings-get_waittimeout) de l’interface [**IIdleSettings**](/windows/desktop/api/taskschd/nn-taskschd-iidlesettings) ([**IdleSettings**](idlesettings.md) pour l’écriture de scripts) est ignorée.</span><span class="sxs-lookup"><span data-stu-id="48f88-157">If a task is triggered by an idle trigger, then the [**WaitTimeout**](/windows/desktop/api/taskschd/nf-taskschd-iidlesettings-get_waittimeout) property of the [**IIdleSettings**](/windows/desktop/api/taskschd/nn-taskschd-iidlesettings) interface ([**IdleSettings**](idlesettings.md) for scripting) is ignored.</span></span>

<span data-ttu-id="48f88-158">Les applications peuvent contrôler les conditions d’inactivité en définissant les propriétés dans les interfaces [**IIdleSettings**](/windows/desktop/api/taskschd/nn-taskschd-iidlesettings) et [**IIdleTrigger**](/windows/win32/api/taskschd/nn-taskschd-iidletrigger) .</span><span class="sxs-lookup"><span data-stu-id="48f88-158">Applications can control the idle conditions by setting the properties in the [**IIdleSettings**](/windows/desktop/api/taskschd/nn-taskschd-iidlesettings) and [**IIdleTrigger**](/windows/win32/api/taskschd/nn-taskschd-iidletrigger) interfaces.</span></span>

<span data-ttu-id="48f88-159">En cas de lecture ou d’écriture de code XML, ces conditions sont spécifiées dans l’élément [**Settings**](taskschedulerschema-settings-tasktype-element.md) du schéma planificateur de tâches.</span><span class="sxs-lookup"><span data-stu-id="48f88-159">If reading or writing XML, these conditions are specified in the [**Settings**](taskschedulerschema-settings-tasktype-element.md) element of the Task Scheduler schema.</span></span>

## <a name="cycling-idle-condition"></a><span data-ttu-id="48f88-160">Condition d’inactivité du cycle</span><span class="sxs-lookup"><span data-stu-id="48f88-160">Cycling idle condition</span></span>

<span data-ttu-id="48f88-161">Si l’ordinateur est dans un état inactif et qu’il est hors de l’état inactif, vous pouvez arrêter et redémarrer la tâche à l’aide des conditions d’inactivité suivantes.</span><span class="sxs-lookup"><span data-stu-id="48f88-161">If the computer is cycling in and out of the idle state, you can terminate and restart the task using the following idle conditions.</span></span> <span data-ttu-id="48f88-162">Pour terminer et redémarrer une tâche, les propriétés et les éléments doivent avoir la valeur true :</span><span class="sxs-lookup"><span data-stu-id="48f88-162">To terminate and restart a task, both properties and elements must be set to True:</span></span>

-   <span data-ttu-id="48f88-163">Pour mettre fin à la tâche lorsque la condition d’inactivité se termine, affectez la valeur true à la propriété [**StopOnIdleEnd**](/windows/desktop/api/taskschd/nf-taskschd-iidlesettings-get_stoponidleend) ou à l’élément [**StopOnIdleEnd**](taskschedulerschema-terminateonidleend-idlesettingstype-element.md) .</span><span class="sxs-lookup"><span data-stu-id="48f88-163">To terminate the task when the idle condition ends, set the [**StopOnIdleEnd**](/windows/desktop/api/taskschd/nf-taskschd-iidlesettings-get_stoponidleend) property or the [**StopOnIdleEnd**](taskschedulerschema-terminateonidleend-idlesettingstype-element.md) element to True.</span></span>
-   <span data-ttu-id="48f88-164">Pour redémarrer la tâche lorsque l’ordinateur est de nouveau recycle dans la condition d’inactivité, définissez la propriété [**RestartOnIdle**](/windows/desktop/api/taskschd/nf-taskschd-iidlesettings-get_restartonidle) ou l’élément [**RestartOnIdle**](taskschedulerschema-restartonidle-idlesettingstype-element.md) sur true.</span><span class="sxs-lookup"><span data-stu-id="48f88-164">To restart the task when the computer cycles into the idle condition again, set the [**RestartOnIdle**](/windows/desktop/api/taskschd/nf-taskschd-iidlesettings-get_restartonidle) property or the [**RestartOnIdle**](taskschedulerschema-restartonidle-idlesettingstype-element.md) element to True.</span></span>
