---
title: interopérabilité 32 bits et 64 bits
description: Les applications de technologie d’assistance doivent communiquer à travers les limites de processus pour obtenir des informations sur l’interface utilisateur auprès des serveurs Microsoft Active Accessibility et des fournisseurs UI Automation de Microsoft.
ms.assetid: 8b46daed-4fd9-430c-bb4d-24be9c8015b5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6897082db00e27d77d90e5fc72d5f229834ce760
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103728437"
---
# <a name="32-bit-and-64-bit-interoperability"></a><span data-ttu-id="22e48-103">interopérabilité 32 bits et 64 bits</span><span class="sxs-lookup"><span data-stu-id="22e48-103">32-bit and 64-bit Interoperability</span></span>

<span data-ttu-id="22e48-104">Les applications de technologie d’assistance doivent communiquer à travers les limites de processus pour obtenir des informations sur l’interface utilisateur auprès des serveurs Microsoft Active Accessibility et des fournisseurs UI Automation de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="22e48-104">Assistive technology applications need to communicate across process boundaries to get UI information from Microsoft Active Accessibility servers and Microsoft UI Automation providers.</span></span> <span data-ttu-id="22e48-105">Cette rubrique décrit les principaux problèmes de communication entre processus que vous devez garder à l’esprit lors du développement d’applications d’accessibilité Windows.</span><span class="sxs-lookup"><span data-stu-id="22e48-105">This topic describes the main interprocess communication issues that you need to keep in mind when developing Windows accessibility applications.</span></span>

<span data-ttu-id="22e48-106">Lorsque les applications utilisent l’API d’automatisation Windows, les composants d’exécution de Microsoft Active Accessibility et UI Automation gèrent automatiquement tous les problèmes et les complexités liés à l’exécution des communications interprocessus (IPC), y compris les problèmes d’interopérabilité impliqués lorsqu’un processus est 32 bits et l’autre à 64 bits.</span><span class="sxs-lookup"><span data-stu-id="22e48-106">When applications use the Windows Automation API, the Microsoft Active Accessibility and UI Automation run-time components automatically handle all of the issues and complexities involved in performing interprocess communications (IPC), including the interoperability issues involved when one process is 32-bits and the other is 64-bits.</span></span> <span data-ttu-id="22e48-107">Microsoft reconnaît qu’il est possible qu’une application de technologie d’assistance doive utiliser une certaine forme d’IPC au lieu de l’API d’automatisation de Windows pour communiquer avec un fournisseur Microsoft Active Accessibility Server ou UI Automation.</span><span class="sxs-lookup"><span data-stu-id="22e48-107">Microsoft recognizes that there are occasions when an assistive technology application may need to use some form of IPC instead of the Windows Automation API to communicate with a Microsoft Active Accessibility server or UI Automation provider.</span></span> <span data-ttu-id="22e48-108">Dans ces cas, Microsoft vous recommande d’utiliser des messages DCOM ou Windows (ceux dont la valeur est inférieure à celle de l' **\_ utilisateur WM**) pour communiquer avec d’autres processus.</span><span class="sxs-lookup"><span data-stu-id="22e48-108">On these occasions, Microsoft recommends that you use DCOM or Windows messages (those with values less than that of **WM\_USER**) to communicate with other processes.</span></span> <span data-ttu-id="22e48-109">À l’instar de l’API Windows Automation, les messages DCOM et Windows gèrent automatiquement tous les problèmes IPC, y compris l’interopérabilité 32 bits sur 64 bits.</span><span class="sxs-lookup"><span data-stu-id="22e48-109">Like the Windows Automation API, DCOM and Windows messages automatically handle all IPC issues for you, including 32-bit to 64-bit interoperability.</span></span>

<span data-ttu-id="22e48-110">Lorsque l’API Windows Automation, DCOM et les messages Windows ne sont pas une option, gardez à l’esprit les points suivants lors de l’implémentation de la méthode IPC choisie :</span><span class="sxs-lookup"><span data-stu-id="22e48-110">When the Windows Automation API, DCOM, and Windows messages are not an option, keep the following issues in mind when implementing your chosen IPC method:</span></span>

-   <span data-ttu-id="22e48-111">Mémoire partagée : lors de l’utilisation de la mémoire partagée, sachez qu’une structure dans un processus 32 bits peut avoir une taille et une disposition différentes de la même structure dans un processus 64 bits.</span><span class="sxs-lookup"><span data-stu-id="22e48-111">Shared Memory—When using shared memory, be aware that a structure in a 32-bit process may have a different size and layout than the same structure in a 64-bit process.</span></span> <span data-ttu-id="22e48-112">Cela est particulièrement vrai pour les structures qui contiennent des pointeurs ou des handles.</span><span class="sxs-lookup"><span data-stu-id="22e48-112">This is especially true for structures that contain pointers or handles.</span></span>
-   <span data-ttu-id="22e48-113">Troncation de pointeur : bien qu’une application 32 bits puisse utiliser le type de données **LongLong** pour stocker une valeur 64 bits, il existe des cas où il n’existe aucun élément d’API Windows qui permet à l’application 32 bits de recevoir une valeur 64 bits d’un processus 64 bits ou d’envoyer une valeur de 64 bits à un processus 64 bits.</span><span class="sxs-lookup"><span data-stu-id="22e48-113">Pointer Truncation—Although a 32-bit application can use the **LONGLONG** data type to store a 64-bit value, there are instances where no Windows API element exists that would enable the 32-bit application to receive a 64-bit value from a 64-bit process, or to send a 64-bit value to a 64-bit process.</span></span> <span data-ttu-id="22e48-114">Par exemple, les fonctions [**GetWindowLongPtr**](/windows/desktop/api/winuser/nf-winuser-getwindowlongptra) et [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) tronquent toutes les valeurs de pointeur, laissant l’application 32 bits avec une valeur inutile.</span><span class="sxs-lookup"><span data-stu-id="22e48-114">For example, the [**GetWindowLongPtr**](/windows/desktop/api/winuser/nf-winuser-getwindowlongptra) and [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) functions truncate all pointer values, leaving the 32-bit application with a useless value.</span></span>
-   <span data-ttu-id="22e48-115">Handles : comme les handles Kernel32 et User32 ne sont significatifs que de 32 bits dans les processus 32 bits et 64 bits, ils peuvent être transférés entre les processus sans problème.</span><span class="sxs-lookup"><span data-stu-id="22e48-115">Handles—Because kernel32 and user32 handles are only 32-bit significant in both 32-bit and 64-bit processes, they can be transferred between processes without a problem.</span></span> <span data-ttu-id="22e48-116">Toutefois, certains éléments que Windows définit comme handles sont simplement des pointeurs encapsulés (par exemple, **HTREEITEM**).</span><span class="sxs-lookup"><span data-stu-id="22e48-116">However, some items that Windows defines as handles are really just wrapped pointers (for example, **HTREEITEM**).</span></span> <span data-ttu-id="22e48-117">Ces « handles » seront tronqués s’ils sont passés d’un processus 64 bits à un processus 32 bits.</span><span class="sxs-lookup"><span data-stu-id="22e48-117">These "handles" will be truncated if they are passed from a 64-bit process to a 32-bit process.</span></span>
-   <span data-ttu-id="22e48-118">[WinEvent](winevents-infrastructure.md) Fonctions de raccordement : pour inscrire une fonction de raccordement dans le contexte avec un processus serveur 32 bits, la fonction de raccordement doit résider dans une DLL 32 bits.</span><span class="sxs-lookup"><span data-stu-id="22e48-118">[WinEvent](winevents-infrastructure.md) Hook Functions—To register an in-context hook function with a 32-bit server process, the hook function must reside in a 32-bit DLL.</span></span> <span data-ttu-id="22e48-119">De même, pour inscrire une fonction de raccordement dans le contexte avec un processus serveur 64 bits, la fonction de raccordement doit résider dans une DLL 64 bits.</span><span class="sxs-lookup"><span data-stu-id="22e48-119">Similarly, to register an in-context hook function with a 64-bit server process, the hook function must reside in a 64-bit DLL.</span></span> <span data-ttu-id="22e48-120">Si une application de technologie d’assistance tente d’enregistrer une fonction de raccordement dans le contexte avec un serveur qui a une profondeur de bits différente, les événements sont toujours remis à la fonction de raccordement, mais ils sont remis hors contexte.</span><span class="sxs-lookup"><span data-stu-id="22e48-120">If an assistive technology application attempts to register an in-context hook function with a server that has a different bit-depth, events will still be delivered to the hook function, but they will be delivered out-of-context.</span></span> <span data-ttu-id="22e48-121">Pour plus d’informations, consultez WinEvents et [fonctions de raccordement en contexte et hors](in-context-and-out-of-context-hook-functions.md)contexte.</span><span class="sxs-lookup"><span data-stu-id="22e48-121">For more information, see WinEvents and [In-Context and Out-of-Context Hook Functions](in-context-and-out-of-context-hook-functions.md).</span></span>

<span data-ttu-id="22e48-122">Pour plus d’informations sur l’interopérabilité 32 bits et 64 bits, consultez [interopérabilité des processus](/windows/desktop/WinProg64/process-interoperability).</span><span class="sxs-lookup"><span data-stu-id="22e48-122">For more information about 32-bit and 64-bit interoperability, see [Process Interoperability](/windows/desktop/WinProg64/process-interoperability).</span></span>

## <a name="related-topics"></a><span data-ttu-id="22e48-123">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="22e48-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="22e48-124">Vue d’ensemble de l’API Windows Automation</span><span class="sxs-lookup"><span data-stu-id="22e48-124">Windows Automation API Overview</span></span>](windows-automation-api-overview.md)
</dt> </dl>

 

 