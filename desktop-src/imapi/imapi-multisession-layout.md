---
title: Présentation de la multisession IMAPi
description: IMAPi offre aux développeurs d’applications la possibilité de créer des images de système de fichiers ISO 9660 et UDF et de les graver sur CD, DVD et Blu-Ray \ 8482 ; support optique.
ms.assetid: 691fdc3a-e762-4d6d-9980-e2d9227100a5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2581672fac78d23a0d2f4e2bc36ee4227adbca1d
ms.sourcegitcommit: af9983bab40fe0b042f177ce7ca79f2eb0f9d0e8
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/06/2021
ms.locfileid: "104553981"
---
# <a name="imapi-multisession-layout"></a><span data-ttu-id="9d0fd-103">Présentation de la multisession IMAPi</span><span class="sxs-lookup"><span data-stu-id="9d0fd-103">IMAPI Multisession Layout</span></span>

<span data-ttu-id="9d0fd-104">IMAPi offre aux développeurs d’applications la possibilité de créer des images de système de fichiers ISO 9660 et UDF et de les graver sur CD, DVD et disques Blu-Ray™ support optique.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-104">IMAPI provides application developers with the ability to create ISO 9660 and UDF file system images and burn them onto CD, DVD and Blu-Ray™ optical media.</span></span> <span data-ttu-id="9d0fd-105">Avec Windows 7, IMAPi offre une prise en charge supplémentaire de la gravure multisession sur un DVD et un disque Blu-Ray™ des médias réinscriptibles.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-105">With Windows 7, IMAPI provides additional support for multisession burning on DVD and Blu-Ray™ rewritable media.</span></span>

<span data-ttu-id="9d0fd-106">La documentation suivante détaille la disposition du disque que IMAPi utilise pour implémenter la multisession.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-106">The following documentation details the disc layout that IMAPI utilizes to implement multisession.</span></span> <span data-ttu-id="9d0fd-107">Ces informations doivent être utilisées pour garantir l’interopérabilité entre IMAPi et d’autres logiciels de gravure, ainsi que pour permettre aux développeurs de ce logiciel de créer des images de disque multisession compatibles IMAPi.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-107">This information should be used to ensure interoperability between IMAPI and other burning software as well as allow the developers of this software to create IMAPI-compatible multisession disc images.</span></span>

> [!Note]  
> <span data-ttu-id="9d0fd-108">Pour obtenir un exemple détaillant la création d’un disque multisession, consultez [création d’un disque multisession](creating-a-multisession-disc.md).</span><span class="sxs-lookup"><span data-stu-id="9d0fd-108">For an example detailing the creation of a multisession disc, see [Creating a Multisession Disc](creating-a-multisession-disc.md).</span></span>

 

## <a name="multisession-on-sequential-media"></a><span data-ttu-id="9d0fd-109">Multisession sur un support séquentiel</span><span class="sxs-lookup"><span data-stu-id="9d0fd-109">Multisession on Sequential Media</span></span>

<span data-ttu-id="9d0fd-110">L’implémentation IMAPi de multisession sur un support séquentiel est prise en charge pour une utilisation avec des médias CD-R, CD-RW, DVD-R, DVD + R et Blu-Ray™.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-110">The IMAPI implementation of multisession on sequential media is supported for use with CD-R, CD-RW, DVD-R, DVD+R and Blu-Ray™ media.</span></span> <span data-ttu-id="9d0fd-111">IMAPi utilise le mode d’enregistrement de session à la fois pour CD-RW, et par conséquent, dans ce scénario, le format est considéré comme un type de média séquentiel.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-111">IMAPI uses the Session-At-Once recording mode for CD-RW, and as a result, in this scenario, the format is considered a sequential media type.</span></span>

<span data-ttu-id="9d0fd-112">Dans un scénario impliquant la multisession sur un support séquentiel à l’aide de UDF, IMAPi écrit les structures d’ancrage (point de déscripteur de volume d’ancrage UDF-AVDP), les structures de volume (séquence de descripteur de volume UDF-VDS) et les structures de métadonnées du système de fichiers (descripteur de fichier UDF-FSD) au début de chaque nouvelle</span><span class="sxs-lookup"><span data-stu-id="9d0fd-112">In a scenario involving multisession on sequential media using UDF, IMAPI writes out the anchor structures (UDF Anchor Volume Descriptor Pointer - AVDP), volume structures (UDF Volume Descriptor Sequence - VDS) , and the file system metadata structures (UDF File Set Descriptor - FSD) at the start of every new session as outlined in the following diagram:</span></span>

![Diagramme qui affiche la structure de métadonnées du système de fichiers avec le point de montage « Import/F S » indiqué par une flèche rouge à l’ancre de la session physique 2.](images/multises1.png)

> [!Note]  
> <span data-ttu-id="9d0fd-114">Cette figure illustre la disposition du disque IMAPi lors de l’utilisation de UDF 2,50 avec des métadonnées redondantes.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-114">This figure illustrates the IMAPI disc layout when using UDF 2.50 with redundant metadata.</span></span>

 

<span data-ttu-id="9d0fd-115">Les données stockées sur un support enregistré de manière séquentielle consistent en plusieurs sessions physiques.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-115">The data stored on sequentially recorded media consists of a number of physical sessions.</span></span> <span data-ttu-id="9d0fd-116">Chaque session contient un système de fichiers complet représentant les données utilisateur sous la forme d’un ensemble de fichiers organisés dans des répertoires.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-116">Each session contains a complete file system representing user data as a set of files organized in directories.</span></span> <span data-ttu-id="9d0fd-117">Les métadonnées du système de fichiers se composent d’un certain nombre de structures de données organisées de façon hiérarchique.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-117">The file system metadata consists of a number of hierarchically organized data structures.</span></span> <span data-ttu-id="9d0fd-118">En haut de la hiérarchie points d’ancrage AVDP situés aux adresses de blocs logiques prédéfinies (LBAs).</span><span class="sxs-lookup"><span data-stu-id="9d0fd-118">At the top of the hierarchy reside anchor structures (AVDP) located at pre-defined Logical Block Addresses (LBAs).</span></span> <span data-ttu-id="9d0fd-119">Les structures d’ancrage spécifient les emplacements des structures de niveau suivant qui n’ont pas d’adresses prédéfinies.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-119">The anchor structures specify the locations of the next level structures which do not have predefined addresses.</span></span> <span data-ttu-id="9d0fd-120">Le niveau suivant de hiérarchie après les structures d’ancrage contient les structures de volume (VDS) qui décrivent les propriétés du volume et référencent les structures de métadonnées du système de fichiers (FSD), qui décrivent à leur tour les fichiers et répertoires individuels.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-120">The next level of hierarchy after anchor structures contains the volume structures (VDS) that describe the properties of the volume and referencing the file system metadata structures (FSD), which in turn describe individual files and directories.</span></span>

## <a name="multisession-on-rewritable-media"></a><span data-ttu-id="9d0fd-121">Multisession sur un support réinscriptible</span><span class="sxs-lookup"><span data-stu-id="9d0fd-121">Multisession on Rewritable Media</span></span>

<span data-ttu-id="9d0fd-122">L’approche pour les médias séquentiels décrits dans la section précédente est incompatible avec les médias réinscriptibles (non séquentiels).</span><span class="sxs-lookup"><span data-stu-id="9d0fd-122">The approach for sequential media outlined in the previous section is incompatible with rewritable (non-sequential) media.</span></span> <span data-ttu-id="9d0fd-123">Ces formats multimédias sont les suivants : DVD-RW, DVD + RW, DVD-RAM, Blu-ray™ réinscriptible et d’autres médias inscriptibles aléatoires, tels que les disques Iomega REV.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-123">These media formats include DVD-RW, DVD+RW, DVD-RAM, Blu-Ray™ rewritable and other random writable media, such as Iomega REV disks.</span></span> <span data-ttu-id="9d0fd-124">Les médias réinscriptibles ne prennent pas en charge le concept de sessions physiques correspondant aux sessions logiques, qui sont des incréments individuels validés par une application de mastérisation.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-124">Rewritable media does not support the concept of physical sessions corresponding to logical sessions, which are individual increments committed by a mastering application.</span></span> <span data-ttu-id="9d0fd-125">Une seule session physique est exposée, qui est une zone commençant au début du disque représentant la zone adressable entière qui a le potentiel de contenir plusieurs sessions logiques.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-125">Only a single physical session is exposed, which is an area starting at the beginning of the disc representing the entire addressable area that has the potential to contain multiple logical sessions.</span></span>

> [!Note]  
> <span data-ttu-id="9d0fd-126">Bien que DVD-RW soit une exception dans la mesure où il prend en charge le concept de session physique en mode séquentiel, cette fonctionnalité n’est actuellement pas prise en charge par IMAPi.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-126">While DVD-RW is an exception in that it supports the concept of a physical session in the Sequential mode, this capability is currently not supported by IMAPI.</span></span>

 

<span data-ttu-id="9d0fd-127">Pour résoudre l’absence de mappage un-à-un entre les sessions physiques et logiques dans les formats réinscriptibles, IMAPi met à jour de manière sélective les structures d’ancrage (AVDP) de la *première* session logique pour pointer vers les nouvelles structures de volume (VDS) et les structures de métadonnées du système de fichiers (FSD) au début de la *dernière* session logique, comme indiqué</span><span class="sxs-lookup"><span data-stu-id="9d0fd-127">To address the lack of one-to-one mapping between physical and logical sessions on rewritable formats, IMAPI selectively updates the anchor structures (AVDP) in the *first* logical session to point to the new volume structures (VDS) and file system metadata structures (FSD) at the beginning of the *last* logical session as outlined in the following diagram:</span></span>

![Diagramme qui affiche la structure de métadonnées du système de fichiers avec le point de montage « Import/F S » indiqué par une flèche rouge à l’ancre de la session logique 1.](images/multises2.png)

> [!Note]  
> <span data-ttu-id="9d0fd-129">Cette figure illustre la disposition du disque IMAPi lors de l’utilisation de UDF 2,50 avec des métadonnées redondantes.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-129">This figure illustrates the IMAPI disc layout when using UDF 2.50 with redundant metadata.</span></span>

 

<span data-ttu-id="9d0fd-130">Lors de l’ajout d’une nouvelle session logique à un disque réinscriptible, IMAPi détermine d’abord la fin de la dernière session logique en analysant les métadonnées de volume (VDS).</span><span class="sxs-lookup"><span data-stu-id="9d0fd-130">When adding a new logical session to a rewritable disc, IMAPI first determines the end of the last logical session by analyzing the volume metadata (VDS).</span></span> <span data-ttu-id="9d0fd-131">IMAPi ajoute ensuite la nouvelle session logique, terminée avec les nouvelles (AVDP), le volume (VDS) et les structures de métadonnées du système de fichiers (FSD), physiquement contiguës à la session logique enregistrée précédemment.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-131">IMAPI then adds the new logical session, complete with new anchor (AVDP), volume (VDS) and file system metadata structures (FSD), physically contiguous with the previously recorded logical session.</span></span> <span data-ttu-id="9d0fd-132">La dernière étape nécessite que les structures d’ancrage (AVDP) au début de la première session logique soient mises à jour pour pointer vers les structures de volume (VDS) de la *nouvelle* session logique.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-132">The final step requires that the anchor structures (AVDP) at the beginning of the first logical session are updated to point to the volume structures (VDS) in the *new* logical session.</span></span> <span data-ttu-id="9d0fd-133">Le résultat opérationnel est le même que dans le cas d’un média séquentiel.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-133">The operational result is the same as with sequential media.</span></span>

## <a name="additional-recommendations"></a><span data-ttu-id="9d0fd-134">Autres recommandations</span><span class="sxs-lookup"><span data-stu-id="9d0fd-134">Additional Recommendations</span></span>

-   <span data-ttu-id="9d0fd-135">**Disposition de la partition**</span><span class="sxs-lookup"><span data-stu-id="9d0fd-135">**Partition Layout**</span></span>

    <span data-ttu-id="9d0fd-136">Pour obtenir une compatibilité IMAPi, il est recommandé que les développeurs de logiciels de gravure tiers utilisent les dispositions de disque décrites dans cette documentation.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-136">To achieve IMAPI compatiblity, it is recommended that third-party burning software developers use the disc layouts outlined in this documentation.</span></span> <span data-ttu-id="9d0fd-137">Les développeurs doivent éviter les mises en page avec des partitions de système de fichiers occupant la totalité du disque, car cela nécessite l’enregistrement d’applications pour localiser l’espace libre dans les partitions existantes chaque fois que des données doivent être ajoutées au disque. Souvent, les applications d’enregistrement réalisent cela en utilisant des marqueurs propriétaires sur le disque pour indiquer la quantité d’espace réellement occupée par les données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-137">Developers should avoid layouts with file system partitions occupying the entire disc, as this requires recording applications to locate free space within existing partitions whenever data needs to be appended to the disc. Oftentimes, the recording applications accomplish this by utilizing proprietary markers on the disc to indicate how much space is actually occupied by user data.</span></span> <span data-ttu-id="9d0fd-138">Ces dispositions de disque ne sont pas compatibles avec IMAPi, car les marqueurs propriétaires ne sont pas reconnus en dehors de l’application pour laquelle ils ont été créés.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-138">Such disc layouts are incompatible with IMAPI as the proprietary markers are not recognized outside of the application they were created for.</span></span>

-   <span data-ttu-id="9d0fd-139">**Type de partition UDF**</span><span class="sxs-lookup"><span data-stu-id="9d0fd-139">**UDF Partition Type**</span></span>

    <span data-ttu-id="9d0fd-140">IMAPi utilise le type de partition UDF **en lecture seule** dans son implémentation de multisession sur un média réinscriptible.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-140">IMAPI uses the **Read-Only** UDF partition type in its implementation of multisession on rewritable media.</span></span> <span data-ttu-id="9d0fd-141">Les développeurs de logiciels de gravure tiers doivent utiliser le type de partition UDF **en lecture seule** pour obtenir une compatibilité avec la gravure maître Windows via IMAPI.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-141">Developers of third-party burning software should use the **Read-Only** UDF partition type to achieve compatiblity with Windows mastered burning via IMAPI.</span></span> <span data-ttu-id="9d0fd-142">Si un autre type de partition UDF, tel que **réinscriptible** , est utilisé, IMAPI ne peut pas assurer la prise en charge de la maîtrise.</span><span class="sxs-lookup"><span data-stu-id="9d0fd-142">If another UDF partition type such as **Rewritable** is used, IMAPI cannot provide mastering support.</span></span>

## <a name="related-topics"></a><span data-ttu-id="9d0fd-143">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="9d0fd-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9d0fd-144">Création d’un disque multisession</span><span class="sxs-lookup"><span data-stu-id="9d0fd-144">Creating a Multisession Disc</span></span>](creating-a-multisession-disc.md)
</dt> <dt>

[<span data-ttu-id="9d0fd-145">**IMultisessionRandomWrite**</span><span class="sxs-lookup"><span data-stu-id="9d0fd-145">**IMultisessionRandomWrite**</span></span>](/windows/desktop/api/imapi2/nn-imapi2-imultisessionrandomwrite)
</dt> </dl>

 

 




