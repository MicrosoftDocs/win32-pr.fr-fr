---
title: Déconnexion en cours
description: Lorsqu’une application cliente RAS démarre une opération de connexion, l’appel de RasDial reçoit un handle de connexion HRASCONN pour identifier la connexion.
ms.assetid: a0fddc69-44bb-4bb0-ae57-ebecbe85cbe9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 859a3751bcbaf7d95927cdf6d14de859ddcc731e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104031777"
---
# <a name="disconnecting"></a><span data-ttu-id="524e1-103">Déconnexion en cours</span><span class="sxs-lookup"><span data-stu-id="524e1-103">Disconnecting</span></span>

<span data-ttu-id="524e1-104">Lorsqu’une application cliente RAS démarre une opération de connexion, l’appel de [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) reçoit un handle de connexion **HRASCONN** pour identifier la connexion.</span><span class="sxs-lookup"><span data-stu-id="524e1-104">When a RAS client application starts a connection operation, the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) call receives an **HRASCONN** connection handle to identify the connection.</span></span> <span data-ttu-id="524e1-105">Si le handle retourné n’est pas **null**, le client doit finalement appeler la fonction [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa) pour mettre fin à la connexion.</span><span class="sxs-lookup"><span data-stu-id="524e1-105">If the returned handle is not **NULL**, the client must eventually call the [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa) function to end the connection.</span></span> <span data-ttu-id="524e1-106">Si une erreur se produit pendant l’opération de connexion, le client doit appeler **RasHangUp** même si la connexion n’a jamais été établie.</span><span class="sxs-lookup"><span data-stu-id="524e1-106">If an error occurs during the connection operation, the client must call **RasHangUp** even though the connection was never established.</span></span>

<span data-ttu-id="524e1-107">L’application qui appelle [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa) ne doit pas se fermer immédiatement, car le gestionnaire de connexions d’accès à distance a besoin de temps pour terminer correctement la connexion.</span><span class="sxs-lookup"><span data-stu-id="524e1-107">The application that calls [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa) should not exit immediately because the Remote Access Connection Manager needs time to properly terminate the connection.</span></span> <span data-ttu-id="524e1-108">Au lieu de cela, l’application doit attendre que la fonction [**RasGetConnectStatus**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa) retourne un \_ handle non valide d’erreur \_ , indiquant que la connexion a été supprimée.</span><span class="sxs-lookup"><span data-stu-id="524e1-108">Instead, the application should wait until the [**RasGetConnectStatus**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa) function returns ERROR\_INVALID\_HANDLE, indicating that the connection has been deleted.</span></span>

<span data-ttu-id="524e1-109">Une application cliente RAS peut avoir besoin de mettre fin à une connexion même si elle n’a pas le descripteur renvoyé par [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala).</span><span class="sxs-lookup"><span data-stu-id="524e1-109">A RAS client application might need to end a connection even though it does not have the handle returned by [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala).</span></span> <span data-ttu-id="524e1-110">Par exemple, l’application qui a appelé **rasdial** peut avoir été quittée après l’établissement de la connexion.</span><span class="sxs-lookup"><span data-stu-id="524e1-110">For example, the application that called **RasDial** might have exited after the connection was successfully established.</span></span> <span data-ttu-id="524e1-111">Dans ce cas, l’application de déconnexion peut utiliser la fonction [**RasEnumConnections**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa) pour récupérer toutes les connexions en cours.</span><span class="sxs-lookup"><span data-stu-id="524e1-111">In this case, the disconnecting application can use the [**RasEnumConnections**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa) function to get all the current connections.</span></span> <span data-ttu-id="524e1-112">Pour chaque connexion, **RasEnumConnections** retourne une structure [**RASCONN**](/previous-versions/windows/desktop/legacy/aa376725(v=vs.85)) qui contient le descripteur de connexion **HRASCONN** et le nom de l’entrée de l’annuaire téléphonique ou le numéro de téléphone spécifié lors du démarrage de l’opération de connexion.</span><span class="sxs-lookup"><span data-stu-id="524e1-112">For each connection, **RasEnumConnections** returns a [**RASCONN**](/previous-versions/windows/desktop/legacy/aa376725(v=vs.85)) structure that contains the **HRASCONN** connection handle and the phone-book entry name or phone number specified when the connection operation was started.</span></span> <span data-ttu-id="524e1-113">Ces informations peuvent être utilisées pour afficher une liste des connexions à partir desquelles l’utilisateur peut sélectionner la connexion à la fin.</span><span class="sxs-lookup"><span data-stu-id="524e1-113">This information can be used to display a list of connections from which the user can select the connection to end.</span></span>

 

 