---
title: À propos de l’administration du serveur et du port RAS
description: Les fonctions d’administration du serveur RAS obtiennent des informations sur un serveur RAS spécifié et ses ports. Ces fonctions sont également utilisées pour mettre fin à une connexion sur un port de serveur RAS spécifié.
ms.assetid: eedac23e-d716-451e-b08b-594398656bb5
keywords:
- Administration RAS RRAS, administration du serveur et du port
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cb9d3cc520efa6bbb492e8d9e967d423548f96a
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/23/2019
ms.locfileid: "104462619"
---
# <a name="about-ras-server-and-port-administration"></a><span data-ttu-id="8be2b-105">À propos de l’administration du serveur et du port RAS</span><span class="sxs-lookup"><span data-stu-id="8be2b-105">About RAS Server and Port Administration</span></span>

<span data-ttu-id="8be2b-106">Les fonctions d’administration du serveur RAS obtiennent des informations sur un serveur RAS spécifié et ses ports.</span><span class="sxs-lookup"><span data-stu-id="8be2b-106">The RAS server administration functions get information about a specified RAS server and its ports.</span></span> <span data-ttu-id="8be2b-107">Ces fonctions sont également utilisées pour mettre fin à une connexion sur un port de serveur RAS spécifié.</span><span class="sxs-lookup"><span data-stu-id="8be2b-107">These functions are also used to terminate a connection on a specified RAS server port.</span></span>

<span data-ttu-id="8be2b-108">La fonction [**MprAdminServerGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) retourne une structure [**MPR \_ Server \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) qui contient des informations sur la configuration d’un serveur RAS.</span><span class="sxs-lookup"><span data-stu-id="8be2b-108">The [**MprAdminServerGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) function returns a [**MPR\_SERVER\_0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) structure that contains information about the configuration of a RAS server.</span></span> <span data-ttu-id="8be2b-109">Les informations retournées incluent le nombre de ports actuellement disponibles pour les connexions, le nombre de ports en cours d’utilisation et le numéro de version du serveur.</span><span class="sxs-lookup"><span data-stu-id="8be2b-109">The returned information includes the number of ports currently available for connections, the number of ports currently in use, and the server version number.</span></span>

<span data-ttu-id="8be2b-110">La fonction [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) récupère un tableau de structures [**du \_ port RAS \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) .</span><span class="sxs-lookup"><span data-stu-id="8be2b-110">The [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) function retrieves an array of [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structures.</span></span> <span data-ttu-id="8be2b-111">Chaque structure contient des informations sur l’un des ports configurés sur un serveur RAS.</span><span class="sxs-lookup"><span data-stu-id="8be2b-111">Each structure contains information for one of the ports configured on a RAS server.</span></span> <span data-ttu-id="8be2b-112">Les informations de chaque port incluent :</span><span class="sxs-lookup"><span data-stu-id="8be2b-112">The information for each port includes:</span></span>

-   <span data-ttu-id="8be2b-113">Nom du port</span><span class="sxs-lookup"><span data-stu-id="8be2b-113">The name of the port</span></span>
-   <span data-ttu-id="8be2b-114">Informations sur l’appareil attaché au port</span><span class="sxs-lookup"><span data-stu-id="8be2b-114">Information about the device attached to the port</span></span>
-   <span data-ttu-id="8be2b-115">Si le serveur RAS associé au port est un serveur Windows NT/Windows 2000</span><span class="sxs-lookup"><span data-stu-id="8be2b-115">Whether the RAS server associated with the port is a Windows NT/Windows 2000 Server</span></span>
-   <span data-ttu-id="8be2b-116">Si le port est en cours d’utilisation et, si c’est le cas, des informations sur la connexion ;</span><span class="sxs-lookup"><span data-stu-id="8be2b-116">Whether the port is currently in use and, if it is, information about the connection</span></span>

<span data-ttu-id="8be2b-117">Pour obtenir les ports utilisés par une connexion spécifique, transmettez [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) un handle à cette connexion dans le paramètre *hConnection* .</span><span class="sxs-lookup"><span data-stu-id="8be2b-117">To obtain the ports in use by a specific connection, pass [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) a handle to that connection in the *hConnection* parameter.</span></span> <span data-ttu-id="8be2b-118">Pour obtenir un descripteur d’une connexion, utilisez la fonction [**MprAdminConnectionEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) .</span><span class="sxs-lookup"><span data-stu-id="8be2b-118">To obtain a handle to a connection, use the [**MprAdminConnectionEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) function.</span></span> <span data-ttu-id="8be2b-119">Sinon, si vous avez implémenté une [dll d’administration RAS](ras-administration-dll.md), les fonctions [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) et [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) reçoivent un handle pour chaque nouvelle connexion au moment où la connexion est établie.</span><span class="sxs-lookup"><span data-stu-id="8be2b-119">Alternatively, if you have implemented a [RAS Administration DLL](ras-administration-dll.md), the [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) functions receive a handle to each new connection at the time the connection is established.</span></span>

<span data-ttu-id="8be2b-120">Vous pouvez appeler la fonction [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) pour obtenir des informations supplémentaires sur un port spécifié sur un serveur RAS.</span><span class="sxs-lookup"><span data-stu-id="8be2b-120">You can call the [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function to get additional information about a specified port on a RAS server.</span></span> <span data-ttu-id="8be2b-121">Cette fonction retourne une structure de [**\_ port RAS \_ 1**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) qui contient une structure de [**\_ port RAS \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) et des informations supplémentaires sur l’état actuel du port.</span><span class="sxs-lookup"><span data-stu-id="8be2b-121">This function returns a [**RAS\_PORT\_1**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) structure that contains a [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structure and additional information about the current state of the port.</span></span> <span data-ttu-id="8be2b-122">La fonction [**RasAdminPortGetInfo**](rasadminportgetinfo.md) retourne également un tableau de structures de [**\_ paramètres RAS**](ras-parameters-str.md) qui décrivent les valeurs de toutes les clés spécifiques au média associées au port.</span><span class="sxs-lookup"><span data-stu-id="8be2b-122">The [**RasAdminPortGetInfo**](rasadminportgetinfo.md) function also returns an array of [**RAS\_PARAMETERS**](ras-parameters-str.md) structures that describe the values of any media-specific keys associated with the port.</span></span> <span data-ttu-id="8be2b-123">Une structure de **\_ paramètres RAS** utilise une valeur de l’énumération de [**\_ \_ format params**](ras-params-format-str.md) des paramètres d’accès distant pour indiquer le format de la valeur pour chaque clé spécifique au média.</span><span class="sxs-lookup"><span data-stu-id="8be2b-123">A **RAS\_PARAMETERS** structure uses a value from the [**RAS\_PARAMS\_FORMAT**](ras-params-format-str.md) enumeration to indicate the format of the value for each media-specific key.</span></span>

<span data-ttu-id="8be2b-124">La fonction [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) retourne également une structure de [**\_ \_ statistiques de port RAS**](ras-port-statistics-str.md) qui contient différents compteurs de statistiques pour la connexion actuelle, le cas échéant, sur le port.</span><span class="sxs-lookup"><span data-stu-id="8be2b-124">The [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function also returns a [**RAS\_PORT\_STATISTICS**](ras-port-statistics-str.md) structure that contains various statistic counters for the current connection, if any, on the port.</span></span> <span data-ttu-id="8be2b-125">Pour un port qui fait partie d’une connexion à liaisons multiples, **MprAdminPortGetInfo** retourne des statistiques pour le port individuel et des statistiques cumulatives pour tous les ports impliqués dans la connexion.</span><span class="sxs-lookup"><span data-stu-id="8be2b-125">For a port that is part of a multilink connection, **MprAdminPortGetInfo** returns statistics for the individual port and cumulative statistics for all ports involved in the connection.</span></span> <span data-ttu-id="8be2b-126">Vous pouvez utiliser la fonction [**MprAdminPortClearStats**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) pour réinitialiser les compteurs des statistiques du port.</span><span class="sxs-lookup"><span data-stu-id="8be2b-126">You can use the [**MprAdminPortClearStats**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) function to reset the statistic counters for the port.</span></span> <span data-ttu-id="8be2b-127">La fonction [**MprAdminPortDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) déconnecte un port en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="8be2b-127">The [**MprAdminPortDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) function disconnects a port that is in use.</span></span>

<span data-ttu-id="8be2b-128">Utilisez la fonction [**MprAdminBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) pour libérer de la mémoire allouée par les fonctions [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) et [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) .</span><span class="sxs-lookup"><span data-stu-id="8be2b-128">Use the [**MprAdminBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) function to free memory allocated by the [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) and [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) functions.</span></span> <span data-ttu-id="8be2b-129">Utilisez la fonction [**MprAdminGetErrorString**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) pour obtenir une chaîne qui décrit un code d’erreur RAS renvoyé par l’une des fonctions d’administration de serveur RAS (RasAdmin).</span><span class="sxs-lookup"><span data-stu-id="8be2b-129">Use the [**MprAdminGetErrorString**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) function to get a string that describes a RAS error code returned by one of the RAS server administration (RasAdmin) functions.</span></span>

 

 




