---
title: À propos des dll d’administration RAS
description: La DLL d’administration RAS exporte les fonctions que le serveur RAS appelle chaque fois qu’un utilisateur tente de se connecter ou de se déconnecter.
ms.assetid: c15c6e2d-3bb6-4583-9ac3-19528feb863f
keywords:
- Administration RAS RRAS, DLL d’administration RAS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1cb170e8cfa331ab9591aa509772c6f6a743fa49
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/23/2019
ms.locfileid: "104507743"
---
# <a name="about-ras-administration-dlls"></a><span data-ttu-id="c564d-104">À propos des dll d’administration RAS</span><span class="sxs-lookup"><span data-stu-id="c564d-104">About RAS administration DLLs</span></span>

<span data-ttu-id="c564d-105">La DLL d’administration RAS exporte les fonctions que le serveur RAS appelle chaque fois qu’un utilisateur tente de se connecter ou de se déconnecter.</span><span class="sxs-lookup"><span data-stu-id="c564d-105">The RAS Administration DLL exports functions that the RAS server calls whenever a user tries to connect or disconnect.</span></span> <span data-ttu-id="c564d-106">Voici quelques-unes des utilisations possibles d’une DLL d’administration RAS :</span><span class="sxs-lookup"><span data-stu-id="c564d-106">Here are some of the possible uses for a RAS administration DLL:</span></span>

-   <span data-ttu-id="c564d-107">Décidez s’il faut autoriser un utilisateur à se connecter au serveur.</span><span class="sxs-lookup"><span data-stu-id="c564d-107">Decide whether to allow a user to connect to the server.</span></span> <span data-ttu-id="c564d-108">La DLL d’administration peut fournir une vérification de sécurité en plus de l’authentification utilisateur RAS standard.</span><span class="sxs-lookup"><span data-stu-id="c564d-108">The administration DLL can provide a security check in addition to the standard RAS user authentication.</span></span>
-   <span data-ttu-id="c564d-109">Enregistrez l’heure à laquelle chaque utilisateur se connecte et se déconnecte du serveur.</span><span class="sxs-lookup"><span data-stu-id="c564d-109">Record the time that each user connects to and disconnects from the server.</span></span> <span data-ttu-id="c564d-110">Cela peut être utile à des fins de facturation ou d’audit.</span><span class="sxs-lookup"><span data-stu-id="c564d-110">This can be useful for billing or auditing purposes.</span></span>
-   <span data-ttu-id="c564d-111">Attribuez une adresse IP à chaque utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c564d-111">Assign an IP address to each user.</span></span> <span data-ttu-id="c564d-112">Cela est utile pour la sécurité, car cette fonctionnalité est utilisée pour mapper la connexion d’un utilisateur à un ordinateur spécifique.</span><span class="sxs-lookup"><span data-stu-id="c564d-112">This is useful for security, because this feature is used to map a user's connection to a specific computer.</span></span>

<span data-ttu-id="c564d-113">L’emplacement de la DLL d’administration RAS est spécifié dans le registre ; consultez [configuration du registre des dll d’administration RAS](ras-administration-dll-registry-setup.md).</span><span class="sxs-lookup"><span data-stu-id="c564d-113">The location of the RAS Administration DLL is specified in the registry; see [RAS Administration DLL Registry Setup](ras-administration-dll-registry-setup.md).</span></span>

<span data-ttu-id="c564d-114">RAS prend en charge plusieurs DLL d’administration.</span><span class="sxs-lookup"><span data-stu-id="c564d-114">RAS supports multiple Administration DLLs.</span></span> <span data-ttu-id="c564d-115">Le registre prend en charge plusieurs emplacements de DLL.</span><span class="sxs-lookup"><span data-stu-id="c564d-115">The registry supports multiple DLL locations.</span></span> <span data-ttu-id="c564d-116">RAS appelle les fonctions dans les dll dans l’ordre dans lequel les dll sont répertoriées dans le registre ; consultez [configuration du registre des dll d’administration RAS](ras-administration-dll-registry-setup.md).</span><span class="sxs-lookup"><span data-stu-id="c564d-116">RAS calls the functions in the DLLs in the order in which the DLLs are listed in the registry; see [RAS Administration DLL Registry Setup](ras-administration-dll-registry-setup.md).</span></span>

<span data-ttu-id="c564d-117">**Serveur Windows 2000 :** RAS ne prend pas en charge plusieurs dll.</span><span class="sxs-lookup"><span data-stu-id="c564d-117">**Windows 2000 Server:** RAS does not support multiple DLLs.</span></span>

<span data-ttu-id="c564d-118">Une DLL d’administration RAS doit implémenter et exporter toutes les fonctions suivantes :</span><span class="sxs-lookup"><span data-stu-id="c564d-118">A RAS administration DLL must implement and export all of the following functions:</span></span>

[<span data-ttu-id="c564d-119">**MprAdminAcceptNewLink**</span><span class="sxs-lookup"><span data-stu-id="c564d-119">**MprAdminAcceptNewLink**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink)

[<span data-ttu-id="c564d-120">**MprAdminInitializeDll**</span><span class="sxs-lookup"><span data-stu-id="c564d-120">**MprAdminInitializeDll**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininitializedll)

[<span data-ttu-id="c564d-121">**MprAdminLinkHangupNotification**</span><span class="sxs-lookup"><span data-stu-id="c564d-121">**MprAdminLinkHangupNotification**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminlinkhangupnotification)

[<span data-ttu-id="c564d-122">**MprAdminTerminateDll**</span><span class="sxs-lookup"><span data-stu-id="c564d-122">**MprAdminTerminateDll**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminterminatedll)

<span data-ttu-id="c564d-123">En outre, la DLL d’administration RAS doit implémenter et exporter</span><span class="sxs-lookup"><span data-stu-id="c564d-123">In addition, the RAS administration DLL must implement and export either</span></span>

<span data-ttu-id="c564d-124">[**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) et</span><span class="sxs-lookup"><span data-stu-id="c564d-124">[**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and</span></span>

[<span data-ttu-id="c564d-125">**MprAdminConnectionHangupNotification**</span><span class="sxs-lookup"><span data-stu-id="c564d-125">**MprAdminConnectionHangupNotification**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification)

<span data-ttu-id="c564d-126">ou</span><span class="sxs-lookup"><span data-stu-id="c564d-126">or</span></span>

<span data-ttu-id="c564d-127">[**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) et</span><span class="sxs-lookup"><span data-stu-id="c564d-127">[**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) and</span></span>

[<span data-ttu-id="c564d-128">**MprAdminConnectionHangupNotification2**</span><span class="sxs-lookup"><span data-stu-id="c564d-128">**MprAdminConnectionHangupNotification2**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification2)

<span data-ttu-id="c564d-129">Si toutes les fonctions requises ne sont pas implémentées, RAS ne peut pas démarrer.</span><span class="sxs-lookup"><span data-stu-id="c564d-129">If all of the required functions are not implemented, RAS fails to start.</span></span>

<span data-ttu-id="c564d-130">**Serveur Windows 2000 :** Une DLL d’administration doit implémenter les fonctions [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) et [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) .</span><span class="sxs-lookup"><span data-stu-id="c564d-130">**Windows 2000 Server:** An administration DLL must implement the [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) and [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) functions.</span></span> <span data-ttu-id="c564d-131">Si la DLL implémente l’une de ces fonctions, elle doit également implémenter l’autre.</span><span class="sxs-lookup"><span data-stu-id="c564d-131">If the DLL implements one of these functions it must implement the other as well.</span></span>

<span data-ttu-id="c564d-132">RAS appelle la fonction [**MprAdminInitializeDll**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininitializedll) lorsque le service Routage et accès distant démarre pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="c564d-132">RAS calls the [**MprAdminInitializeDll**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininitializedll) function when the Routing and Remote Access Service first starts up.</span></span> <span data-ttu-id="c564d-133">La fonction **MprAdminInitializeDll** permet à la dll d’administration d’effectuer toute initialisation nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c564d-133">The **MprAdminInitializeDll** function provides an opportunity for the administration DLL to do any necessary initialization.</span></span> <span data-ttu-id="c564d-134">De même, RAS appelle le service [**MprAdminTerminateDll**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminterminatedll) lorsque le service de routage et d’accès distant s’arrête.</span><span class="sxs-lookup"><span data-stu-id="c564d-134">Similarly, RAS calls the [**MprAdminTerminateDll**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminterminatedll) service when the Routing and Remote Access Service shuts down.</span></span> <span data-ttu-id="c564d-135">Cette fonction permet à la DLL d’administration d’effectuer tout nettoyage nécessaire avant de quitter.</span><span class="sxs-lookup"><span data-stu-id="c564d-135">This function allows the administration DLL to perform any necessary cleanup before exiting.</span></span>

<span data-ttu-id="c564d-136">Les fonctions [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) et [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) permettent à la dll d’auditer les connexions utilisateur au serveur.</span><span class="sxs-lookup"><span data-stu-id="c564d-136">The [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) functions enable the DLL to audit user connections to the server.</span></span> <span data-ttu-id="c564d-137">Un serveur RAS appelle la fonction **MprAdminAcceptNewConnection** chaque fois qu’un utilisateur tente de se connecter.</span><span class="sxs-lookup"><span data-stu-id="c564d-137">A RAS server calls the **MprAdminAcceptNewConnection** function whenever a user tries to connect.</span></span> <span data-ttu-id="c564d-138">Cette fonction permet d’empêcher l’utilisateur de se connecter.</span><span class="sxs-lookup"><span data-stu-id="c564d-138">This function makes it possible to prevent the user from connecting.</span></span> <span data-ttu-id="c564d-139">La fonction **MprAdminAcceptNewConnection** peut également générer des entrées de journal pour la facturation ou l’audit.</span><span class="sxs-lookup"><span data-stu-id="c564d-139">The **MprAdminAcceptNewConnection** function could also generate log entries for billing or auditing.</span></span> <span data-ttu-id="c564d-140">Lorsque l’utilisateur se déconnecte, le serveur RAS appelle la fonction **MprAdminConnectionHangupNotification** , qui peut consigner l’heure à laquelle l’utilisateur s’est déconnecté.</span><span class="sxs-lookup"><span data-stu-id="c564d-140">When the user disconnects, the RAS server calls the **MprAdminConnectionHangupNotification** function, which can log the time at which the user disconnected.</span></span>

<span data-ttu-id="c564d-141">Les fonctions [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) et [**MprAdminConnectionHangupNotification2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification2) sont similaires à **MprAdminAcceptNewConnection** et [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification).</span><span class="sxs-lookup"><span data-stu-id="c564d-141">The [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) and [**MprAdminConnectionHangupNotification2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification2) functions are similar to **MprAdminAcceptNewConnection** and [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification).</span></span> <span data-ttu-id="c564d-142">Toutefois, lorsque RAS appelle les fonctions **MprAdminAcceptNewConnection2** et **MprAdminConnectionHangupNotification2** , Ras passe dans un paramètre supplémentaire de type [**RAS \_ Connection \_ 2**](/windows/desktop/api/Mprapi/ns-mprapi-ras_connection_2).</span><span class="sxs-lookup"><span data-stu-id="c564d-142">However, when RAS calls the **MprAdminAcceptNewConnection2** and **MprAdminConnectionHangupNotification2** functions, RAS passes in an additional parameter of type [**RAS\_CONNECTION\_2**](/windows/desktop/api/Mprapi/ns-mprapi-ras_connection_2).</span></span>

<span data-ttu-id="c564d-143">RAS prend en charge plusieurs DLL d’administration.</span><span class="sxs-lookup"><span data-stu-id="c564d-143">RAS supports multiple Administration DLLs.</span></span> <span data-ttu-id="c564d-144">L’utilisateur à accès à distance est autorisé à se connecter uniquement si l’implémentation de la fonction [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) ou [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) dans chacune des dll accepte la connexion.</span><span class="sxs-lookup"><span data-stu-id="c564d-144">The remote-access user is allowed to connect only if the implementation of the [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) or [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) function in each of the DLLs accepts the connection.</span></span> <span data-ttu-id="c564d-145">En d’autres termes, chaque DLL doit accepter la connexion afin que l’utilisateur soit autorisé à se connecter.</span><span class="sxs-lookup"><span data-stu-id="c564d-145">In other words, every DLL must accept the connection in order for the user to be allowed to connect.</span></span>

<span data-ttu-id="c564d-146">Il est possible qu’une seule connexion RAS utilise plusieurs liens lors de la connexion à un serveur RAS.</span><span class="sxs-lookup"><span data-stu-id="c564d-146">It is possible for a single RAS connection to use multiple links when connecting to a RAS server.</span></span> <span data-ttu-id="c564d-147">Les fonctions [**MprAdminAcceptNewLink**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) et [**MprAdminLinkHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminlinkhangupnotification) permettent à la dll d’administration de gérer des liens individuels dans une connexion.</span><span class="sxs-lookup"><span data-stu-id="c564d-147">The [**MprAdminAcceptNewLink**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) and [**MprAdminLinkHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminlinkhangupnotification) functions make it possible for the Administration DLL to manage individual links in a connection.</span></span> <span data-ttu-id="c564d-148">RAS appelle **MprAdminAcceptNewLink** chaque fois qu’un nouveau lien est établi pour une connexion.</span><span class="sxs-lookup"><span data-stu-id="c564d-148">RAS calls **MprAdminAcceptNewLink** whenever a new link is established for a connection.</span></span> <span data-ttu-id="c564d-149">Étant donné que toutes les connexions impliquent au moins un lien, RAS appelle toujours **MprAdminAcceptNewLink** une fois immédiatement après le retour de [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) ou [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) , à condition que [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) ou [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) ait accepté la connexion.</span><span class="sxs-lookup"><span data-stu-id="c564d-149">Because all connections involve at least one link, RAS always calls **MprAdminAcceptNewLink** once immediately after [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) or [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) returns, provided that [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) or [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) accepted the connection.</span></span> <span data-ttu-id="c564d-150">RAS appelle **MprAdminLinkHangupNotification** chaque fois qu’un lien pour une connexion est arrêté.</span><span class="sxs-lookup"><span data-stu-id="c564d-150">RAS calls **MprAdminLinkHangupNotification** whenever a link for a connection is shutdown.</span></span>

<span data-ttu-id="c564d-151">Étant donné que RAS prend en charge plusieurs DLL d’administration, l’utilisateur à accès à distance est autorisé à se connecter uniquement si l’implémentation de la fonction [**MprAdminAcceptNewLink**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) dans chacune des dll accepte la connexion.</span><span class="sxs-lookup"><span data-stu-id="c564d-151">Because RAS supports multiple Administration DLLs, the remote-access user is allowed to connect only if the implementation of the [**MprAdminAcceptNewLink**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) function in each of the DLLs accepts the connection.</span></span> <span data-ttu-id="c564d-152">En d’autres termes, chaque DLL doit accepter le lien pour pouvoir établir le lien.</span><span class="sxs-lookup"><span data-stu-id="c564d-152">In other words, every DLL must accept the link in order for the link to be established.</span></span>

<span data-ttu-id="c564d-153">Une fois qu’un utilisateur a été authentifié par le serveur RAS, il appelle la fonction [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) pour obtenir une adresse IP pour le client distant.</span><span class="sxs-lookup"><span data-stu-id="c564d-153">After the RAS server has authenticated a user, it calls the [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) function to get an IP address for the remote client.</span></span> <span data-ttu-id="c564d-154">Cette fonction fournit un autre modèle pour le mappage d’une adresse IP à un utilisateur d’accès à distance.</span><span class="sxs-lookup"><span data-stu-id="c564d-154">This function provides an alternate scheme for mapping an IP address to a dial-in user.</span></span> <span data-ttu-id="c564d-155">Si **MprAdminGetIpAddressForUser** n’est pas implémenté, un serveur RAS associe l’utilisateur distant à une adresse IP qui est sélectionnée à partir d’un pool statique d’adresses IP, ou celle sélectionnée par un serveur DHCP (Dynamic Host Configuration Protocol).</span><span class="sxs-lookup"><span data-stu-id="c564d-155">If **MprAdminGetIpAddressForUser** is not implemented, a RAS server associates the remote user with an IP address that is selected from a static pool of IP addresses, or one selected by a Dynamic Host Configuration Protocol (DHCP) server.</span></span> <span data-ttu-id="c564d-156">La fonction **MprAdminGetIpAddressForUser** permet à la dll de remplacer cette adresse IP par défaut et de spécifier une adresse IP spécifique pour chaque utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c564d-156">The **MprAdminGetIpAddressForUser** function allows the DLL to override this default IP address and specify a particular IP address for each user.</span></span> <span data-ttu-id="c564d-157">La fonction **MprAdminGetIpAddressForUser** peut définir un indicateur qui force RAS à appeler la fonction [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) lorsque l’utilisateur se déconnecte.</span><span class="sxs-lookup"><span data-stu-id="c564d-157">The **MprAdminGetIpAddressForUser** function can set a flag that causes RAS to call the [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) function when the user disconnects.</span></span> <span data-ttu-id="c564d-158">La DLL peut ensuite utiliser **MprAdminReleaseIpAddress** pour mettre à jour son mappage utilisateur-adresse IP.</span><span class="sxs-lookup"><span data-stu-id="c564d-158">The DLL can then use **MprAdminReleaseIpAddress** to update its user-to-IP-address mapping.</span></span>

<span data-ttu-id="c564d-159">RAS prend en charge plusieurs DLL d’administration, mais il appelle uniquement les fonctions [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) et [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) dans la première dll qui les implémente et les exporte.</span><span class="sxs-lookup"><span data-stu-id="c564d-159">RAS supports multiple Administration DLLs, but it calls the [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) and [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) functions only in the first DLL that implements and export them.</span></span> <span data-ttu-id="c564d-160">RAS ignore les implémentations de ces fonctions dans les autres dll.</span><span class="sxs-lookup"><span data-stu-id="c564d-160">RAS ignores implementations of these functions in the other DLLs.</span></span> <span data-ttu-id="c564d-161">RAS vérifie les dll de ces fonctions dans l’ordre dans lequel elles sont répertoriées dans le [Registre](ras-administration-dll-registry-setup.md).</span><span class="sxs-lookup"><span data-stu-id="c564d-161">RAS checks the DLLs for these functions in the order in which they are listed in the [registry](ras-administration-dll-registry-setup.md).</span></span>

<span data-ttu-id="c564d-162">RAS sérialise les appels dans la DLL d’administration.</span><span class="sxs-lookup"><span data-stu-id="c564d-162">RAS serializes calls into the administration DLL.</span></span> <span data-ttu-id="c564d-163">Un appel à l’une des fonctions de la DLL pour un client RAS donné ne devance pas un appel à cette fonction pour un autre client RAS. RAS n’appelle pas la fonction pour l’autre client tant que l’appel initial n’est pas terminé.</span><span class="sxs-lookup"><span data-stu-id="c564d-163">A call into one of the DLL's functions for a given RAS client does not preempt a call to that function for a different RAS client; RAS does not call the function for the other client until the initial call is complete.</span></span> <span data-ttu-id="c564d-164">En outre, la sérialisation s’étend à certains groupes de fonctions.</span><span class="sxs-lookup"><span data-stu-id="c564d-164">Furthermore, serialization extends to certain groups of functions.</span></span> <span data-ttu-id="c564d-165">Les fonctions d’adresse IP sont sérialisées en tant que groupe ; un appel dans [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) ou [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) bloque les appels dans les deux fonctions jusqu’à ce que l’appel initial soit retourné.</span><span class="sxs-lookup"><span data-stu-id="c564d-165">The IP address functions are serialized as a group; a call into either [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) or [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) blocks calls into both functions until the initial call has returned.</span></span> <span data-ttu-id="c564d-166">[**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) et [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) sont également sérialisés en tant que groupe.</span><span class="sxs-lookup"><span data-stu-id="c564d-166">[**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) are also serialized as a group.</span></span>

<span data-ttu-id="c564d-167">RAS exécute les fonctions qui attribuent des adresses IP en un seul processus. les fonctions pour les notifications de connexion et de déconnexion sont exécutées dans un autre processus.</span><span class="sxs-lookup"><span data-stu-id="c564d-167">RAS executes the functions that assign IP addresses in one process; the functions for connection and disconnection notifications are executed in another process.</span></span> <span data-ttu-id="c564d-168">Par conséquent, la DLL ne dépend pas des données partagées entre ces deux ensembles de fonctions.</span><span class="sxs-lookup"><span data-stu-id="c564d-168">Consequently, the DLL does not depend on shared data between these two sets of functions.</span></span>

<span data-ttu-id="c564d-169">N’appelez aucune des fonctions d' [administration RAS](ras-administration-functions.md) ou des [fonctions d’administration de l’utilisateur RAS](ras-user-administration-functions.md) à partir d’une fonction de légende.</span><span class="sxs-lookup"><span data-stu-id="c564d-169">Do not call any of the [RAS Administration Functions](ras-administration-functions.md) or [RAS User Administration Functions](ras-user-administration-functions.md) from inside a callout function.</span></span> <span data-ttu-id="c564d-170">Les appels à ces fonctions ne sont pas retournés lorsqu’ils sont effectués à partir d’une fonction de légende.</span><span class="sxs-lookup"><span data-stu-id="c564d-170">Calls to these functions will not return when made from within a callout function.</span></span>

<span data-ttu-id="c564d-171">Le serveur RAS consigne une erreur dans le journal des événements système si une erreur se produit lors de la tentative de chargement d’une DLL d’administration RAS ou lors de l’appel de l’une des fonctions de la DLL.</span><span class="sxs-lookup"><span data-stu-id="c564d-171">The RAS server logs an error in the system event log if an error occurs when it tries to load a RAS administration DLL or when calling one of the DLL's functions.</span></span> <span data-ttu-id="c564d-172">Cela peut se produire, par exemple, si la DLL spécifiait un nom incorrect pour une fonction exportée, ou si elle n’incluait pas le nom de la fonction dans le fichier DEF.</span><span class="sxs-lookup"><span data-stu-id="c564d-172">This can happen, for example, if the DLL specified the wrong name for an exported function, or if it did not include the function name in the DEF file.</span></span> <span data-ttu-id="c564d-173">L’entrée dans le journal des événements indique la raison de l’échec.</span><span class="sxs-lookup"><span data-stu-id="c564d-173">The entry in the event log indicates the reason for the failure.</span></span>

<span data-ttu-id="c564d-174">**Windows 2000/NT :** Plusieurs DLL d’administration ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="c564d-174">**Windows 2000/NT:** Multiple administration DLLs are not supported.</span></span>

 

 




