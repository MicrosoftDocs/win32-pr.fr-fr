---
title: Fonctionnement des fonctions de gestion de routeur
description: Les sections suivantes décrivent les différents types de fonctions de gestion de routeur et ce que vous devez savoir pour les utiliser efficacement.
ms.assetid: 2f6831f2-39be-43b1-80bd-9a36c0f8a2af
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: be4b1891bc55b80a18a6d0dd928044da1e0e9709
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "106509461"
---
# <a name="understanding-router-management-functions"></a><span data-ttu-id="e4bb0-103">Fonctionnement des fonctions de gestion de routeur</span><span class="sxs-lookup"><span data-stu-id="e4bb0-103">Understanding Router Management Functions</span></span>

<span data-ttu-id="e4bb0-104">Les sections suivantes décrivent les différents types de fonctions de gestion de routeur et ce que vous devez savoir pour les utiliser efficacement.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-104">The following sections discuss the different types of router management functions and what you should know to use them effectively.</span></span>

<span data-ttu-id="e4bb0-105">Toutes les fonctions de gestion de routeur requièrent des privilèges d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-105">All router management functions require administrator privileges.</span></span> <span data-ttu-id="e4bb0-106">Un utilisateur du groupe utilisateurs avec pouvoir ne dispose pas des privilèges suffisants pour utiliser les fonctions de gestion de routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-106">A user in the Power User group does not have sufficient privileges to use the router management functions.</span></span>

## <a name="the-different-classes-of-router-management-functions"></a><span data-ttu-id="e4bb0-107">Les différentes classes de fonctions de gestion de routeur</span><span class="sxs-lookup"><span data-stu-id="e4bb0-107">The Different Classes of Router Management Functions</span></span>

<span data-ttu-id="e4bb0-108">Les fonctions de gestion de routeur peuvent être divisées en fonctions d’administration et fonctions de configuration.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-108">The router management functions can be divided up into the administration functions and the configuration functions.</span></span> <span data-ttu-id="e4bb0-109">Les [fonctions d’administration](router-administration-functions.md) ont un préfixe MprAdmin et les [fonctions de configuration](router-configuration-functions.md) ont un préfixe MprConfig.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-109">The [administration functions](router-administration-functions.md) have a prefix of MprAdmin and the [configuration functions](router-configuration-functions.md) have a prefix of MprConfig.</span></span> <span data-ttu-id="e4bb0-110">Malgré l’attribution de noms, les deux ensembles de fonctions sont utilisés pour la gestion de routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-110">Despite the naming, both sets of functions are used for router management.</span></span> <span data-ttu-id="e4bb0-111">Les fonctions MprAdmin fonctionnent directement sur le routeur en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-111">The MprAdmin functions operate directly on the running router.</span></span> <span data-ttu-id="e4bb0-112">Les fonctions MprConfig ont des fonctionnalités similaires, mais fonctionnent sur la configuration du routeur stockée dans le registre.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-112">The MprConfig functions have similar functionality, but operate on the router configuration stored in the registry.</span></span> <span data-ttu-id="e4bb0-113">Les deux types de fonctions passent des [blocs d’informations](router-information-functions.md).</span><span class="sxs-lookup"><span data-stu-id="e4bb0-113">Both types of functions pass [information blocks](router-information-functions.md).</span></span>

<span data-ttu-id="e4bb0-114">Les fonctions de gestion de routeur peuvent également être divisées en fonction des composants du routeur qu’ils gèrent : les interfaces, les gestionnaires de routeur ou les clients du gestionnaire de routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-114">The router management functions can also be divided up based on what components of the router they manage: interfaces, router managers, or router manager clients.</span></span>

<span data-ttu-id="e4bb0-115">Les [fonctions](router-interface-functions.md) de l’interface du routeur ont un préfixe MprAdminInterface ou MprConfigInterface.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-115">The [router interface functions](router-interface-functions.md) have a prefix of either MprAdminInterface or MprConfigInterface.</span></span> <span data-ttu-id="e4bb0-116">Utilisez ces fonctions pour accéder aux interfaces.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-116">Use these functions to access interfaces.</span></span> <span data-ttu-id="e4bb0-117">Les [fonctions du gestionnaire de routeur](router-manager-transport-functions.md) ont le préfixe MprAdminTransport ou MprConfigTransport.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-117">The [router manager functions](router-manager-transport-functions.md) have a prefix of MprAdminTransport or MprConfigTransport.</span></span> <span data-ttu-id="e4bb0-118">Utilisez ces fonctions pour accéder aux gestionnaires de routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-118">Use these functions to access the router managers.</span></span> <span data-ttu-id="e4bb0-119">Enfin, les [fonctions du client du gestionnaire de routeur](router-manager-client-interfacetransport-functions.md) ont un préfixe MprAdminInterfaceTransport ou MprConfigInterfaceTransport.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-119">Lastly, the [router manager client functions](router-manager-client-interfacetransport-functions.md) have a prefix of MprAdminInterfaceTransport or MprConfigInterfaceTransport.</span></span> <span data-ttu-id="e4bb0-120">Utilisez ces fonctions pour accéder aux clients qui s’exécutent sur le routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-120">Use these functions to access the clients running on the router.</span></span>

<span data-ttu-id="e4bb0-121">Les [fonctions MprAdminMib](/windows/desktop/RRAS/about-router-management-with-mib)sont un sous-ensemble de fonctions MprAdmin.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-121">A subset of MprAdmin functions are the [MprAdminMib functions](/windows/desktop/RRAS/about-router-management-with-mib).</span></span> <span data-ttu-id="e4bb0-122">Ils fonctionnent également sur l’itinéraire en cours d’exécution seul.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-122">These also operate on the running route alone.</span></span> <span data-ttu-id="e4bb0-123">Toutefois, ces fonctions ne transmettent pas de blocs d’informations.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-123">However, these functions do not pass information blocks.</span></span> <span data-ttu-id="e4bb0-124">Ces fonctions offrent une plus grande souplesse au concepteur de protocoles, en particulier pour la récupération des informations de non-configuration, telles que les statistiques.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-124">These functions provide additional flexibility to the protocol designer, especially for retrieving non-configuration information, such as statistics.</span></span>

## <a name="ensuring-that-changes-occur-immediately-and-are-persistent"></a><span data-ttu-id="e4bb0-125">S’assurer que les modifications se produisent immédiatement et sont persistantes</span><span class="sxs-lookup"><span data-stu-id="e4bb0-125">Ensuring that Changes Occur Immediately and are Persistent</span></span>

<span data-ttu-id="e4bb0-126">Un développeur peut apporter des modifications à la configuration du routeur directement à l’aide des [fonctions de configuration du routeur](router-configuration-functions.md).</span><span class="sxs-lookup"><span data-stu-id="e4bb0-126">A developer can make changes to the router configuration directly using the [router configuration functions](router-configuration-functions.md).</span></span> <span data-ttu-id="e4bb0-127">Toutefois, toutes les modifications apportées à la configuration ne prennent pas effet tant que le routeur n’est pas redémarré, car il s’agit de la seule fois où DIM lit la configuration dans le registre.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-127">However, any changes made to the configuration do not take effect until the router is restarted, since this is the only time that DIM reads the configuration from the registry.</span></span>

<span data-ttu-id="e4bb0-128">Un développeur peut apporter des modifications au routeur en cours d’exécution à l’aide des [fonctions d’administration du routeur](router-administration-functions.md).</span><span class="sxs-lookup"><span data-stu-id="e4bb0-128">A developer can make changes to the running router by using the [router administration functions](router-administration-functions.md).</span></span> <span data-ttu-id="e4bb0-129">Toutefois, ces modifications ne sont pas persistantes : dans la mesure où elles n’ont pas été écrites dans le registre, elles sont perdues si le routeur est redémarré.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-129">However, these changes are not persistent: since they have not been written to the registry, they are lost if the router is restarted.</span></span>

<span data-ttu-id="e4bb0-130">Pour apporter des modifications immédiates et persistantes, un développeur doit utiliser les fonctions d’administration de routeur et de configuration de routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-130">In order to make changes that are both immediate and persistent, a developer needs to use both the router administration and the router configuration functions.</span></span> <span data-ttu-id="e4bb0-131">Si le routeur n’est pas en cours d’exécution, le développeur doit uniquement appeler les fonctions de configuration de routeur appropriées.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-131">If the router is not running, the developer need only call the appropriate router configuration functions.</span></span>

<span data-ttu-id="e4bb0-132">Pour interroger les informations du routeur en cours d’exécution, utilisez les fonctions d’administration du routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-132">For querying information from the running router, use the router administration functions.</span></span> <span data-ttu-id="e4bb0-133">Si le routeur n’est pas en cours d’exécution, interrogez les informations à l’aide des fonctions de configuration du routeur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-133">If the router is not running, query information using the router configuration functions.</span></span>

<span data-ttu-id="e4bb0-134">Les fonctions [**MprAdminInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacecreate) et [**MprAdminInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacesetinfo) prennent en charge la structure [**MPR \_ interface \_ 2**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_2) .</span><span class="sxs-lookup"><span data-stu-id="e4bb0-134">The [**MprAdminInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacecreate) and [**MprAdminInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacesetinfo) functions support the [**MPR\_INTERFACE\_2**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_2) structure.</span></span> <span data-ttu-id="e4bb0-135">Toutefois, [**MprConfigInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacecreate) et [**MprConfigInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacesetinfo) ne le font pas.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-135">However, [**MprConfigInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacecreate) and [**MprConfigInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacesetinfo) do not.</span></span> <span data-ttu-id="e4bb0-136">Pour créer une interface de connexion à la demande qui est persistante après un redémarrage, appelez **MprAdminInterfaceCreate** avec l' **\_ interface MPR \_ 2**, puis appelez **MprConfigInterfaceCreate** avec [**MPR \_ interface \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_0) ou [**MPR \_ interface \_ 1**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_1).</span><span class="sxs-lookup"><span data-stu-id="e4bb0-136">In order to create a demand-dial interface that is persistent after a reboot, call **MprAdminInterfaceCreate** with **MPR\_INTERFACE\_2**, then call **MprConfigInterfaceCreate** with [**MPR\_INTERFACE\_0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_0) or [**MPR\_INTERFACE\_1**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_1).</span></span> <span data-ttu-id="e4bb0-137">De même, pour apporter des modifications persistantes à une interface de connexion à la demande, appelez **MprAdminInterfaceSetInfo** avec l' **\_ interface MPR \_ 2**, puis appelez **MprConfigInterfaceSetInfo** avec **MPR \_ interface \_ 0** ou **MPR \_ interface \_ 1**.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-137">Similarly, to make persistent changes to a demand-dial interface, call **MprAdminInterfaceSetInfo** with **MPR\_INTERFACE\_2**, then call **MprConfigInterfaceSetInfo** with **MPR\_INTERFACE\_0** or **MPR\_INTERFACE\_1**.</span></span>

## <a name="using-router-administration-and-configuration-functions-remotely"></a><span data-ttu-id="e4bb0-138">Utilisation des fonctions d’administration et de configuration de routeur à distance</span><span class="sxs-lookup"><span data-stu-id="e4bb0-138">Using Router Administration and Configuration Functions Remotely</span></span>

<span data-ttu-id="e4bb0-139">La plupart des fonctions d’administration et de configuration de routeur peuvent être appelées sur un ordinateur autre que celui qui est administré.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-139">Most of the router administration and configuration functions can be called on a computer other than the one being administered.</span></span> <span data-ttu-id="e4bb0-140">Ces fonctions prennent comme paramètre, un handle vers le service de routeur ou la configuration à administrer.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-140">These functions take as a parameter, a handle to the router service or configuration to administer.</span></span> <span data-ttu-id="e4bb0-141">Les fonctions d’administration utilisent RPC (appel de procédure distante) pour communiquer avec le service de routage spécifié par le descripteur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-141">The administration functions use RPC (Remote Procedure Call) to communicate with the routing service specified by the handle.</span></span> <span data-ttu-id="e4bb0-142">Les fonctions de configuration écrivent et lisent dans le registre de l’ordinateur spécifié par le descripteur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-142">The configuration functions write to and read from the registry of the computer specified by the handle.</span></span>

<span data-ttu-id="e4bb0-143">Pour administrer le service de routage sur un ordinateur distant, appelez d’abord [**MprAdminIsServiceRunning**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminisservicerunning) pour vérifier que le service est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-143">To administer the routing service on a remote machine first call [**MprAdminIsServiceRunning**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminisservicerunning) to verify that the service is running.</span></span> <span data-ttu-id="e4bb0-144">Appelez ensuite [**MprAdminServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminserverconnect) pour obtenir le descripteur.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-144">Then call [**MprAdminServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminserverconnect) to obtain the handle.</span></span> <span data-ttu-id="e4bb0-145">Si le service de routeur n’est pas en cours d’exécution sur l’ordinateur distant, tous les appels d’administration de routeur (MprAdmin) échouent.</span><span class="sxs-lookup"><span data-stu-id="e4bb0-145">If the router service is not running on the remote machine, all router administration (MprAdmin) calls fail.</span></span>

<span data-ttu-id="e4bb0-146">Pour apporter des modifications à la configuration du routeur sur un ordinateur distant, obtenez un handle en appelant la fonction [**MprConfigServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfigserverconnect) .</span><span class="sxs-lookup"><span data-stu-id="e4bb0-146">To make changes to the router configuration on a remote machine obtain a handle by calling the [**MprConfigServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfigserverconnect) function.</span></span>

 

 