---
title: Réception des notifications de modifications
description: De nombreux clients peuvent simultanément mettre à jour la table de routage, et les clients doivent être avertis lorsque des modifications sont apportées aux informations de routage.
ms.assetid: d42e16e2-32b2-4178-967b-e937730b3cca
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bacd8d1d0329cf29be82a890be30b602b9330249
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104379828"
---
# <a name="receiving-notification-of-changes"></a><span data-ttu-id="b76fb-103">Réception des notifications de modifications</span><span class="sxs-lookup"><span data-stu-id="b76fb-103">Receiving Notification of Changes</span></span>

<span data-ttu-id="b76fb-104">De nombreux clients peuvent simultanément mettre à jour la table de routage, et les clients doivent être avertis lorsque des modifications sont apportées aux informations de routage.</span><span class="sxs-lookup"><span data-stu-id="b76fb-104">Many clients can simultaneously update the routing table, and clients must be notified when changes to routing information occur.</span></span> <span data-ttu-id="b76fb-105">Par exemple, un client qui n’est pas averti des modifications apportées à la table de routage par un autre client peut annoncer des informations d’itinéraire obsolètes.</span><span class="sxs-lookup"><span data-stu-id="b76fb-105">For example, a client that is not notified of another client's changes to the routing table could advertise outdated route information.</span></span> <span data-ttu-id="b76fb-106">Cela peut empêcher les clients de programmation de s’inscrire auprès du gestionnaire de tables de routage pour être informé des modifications apportées à la table de routage.</span><span class="sxs-lookup"><span data-stu-id="b76fb-106">This can be prevented by programming clients to register with the routing table manager to be notified of changes in the routing table.</span></span> <span data-ttu-id="b76fb-107">Le gestionnaire de table de routage envoie des notifications de modifications à tous les clients qui s’inscrivent pour les recevoir.</span><span class="sxs-lookup"><span data-stu-id="b76fb-107">The routing table manager sends notifications of changes to all clients that register to receive them.</span></span>

<span data-ttu-id="b76fb-108">La notification de modification s’applique uniquement aux destinations.</span><span class="sxs-lookup"><span data-stu-id="b76fb-108">Change notification applies only to destinations.</span></span> <span data-ttu-id="b76fb-109">Il n’existe aucun moyen d’interroger le gestionnaire de table de routage à la recherche de modifications apportées à un itinéraire particulier.</span><span class="sxs-lookup"><span data-stu-id="b76fb-109">There is no way to query the routing table manager for changes to a particular route.</span></span>

<span data-ttu-id="b76fb-110">Lorsqu’une modification est apportée à l’un des itinéraires vers une destination, le gestionnaire de tables de routage envoie une notification indiquant qu’une modification s’est produite.</span><span class="sxs-lookup"><span data-stu-id="b76fb-110">When a change is made to one of the routes to a destination, the routing table manager sends out a notification that a change has occurred.</span></span> <span data-ttu-id="b76fb-111">Cette notification est envoyée uniquement aux clients qui se sont inscrits auprès du gestionnaire de tables de routage pour le type de modification qui s’est produit.</span><span class="sxs-lookup"><span data-stu-id="b76fb-111">This notification goes only to those clients that have registered with the routing table manager for the type of change that has occurred.</span></span> <span data-ttu-id="b76fb-112">Toutes les modifications apportées aux informations de routage dans le gestionnaire de tables de routage se produisent dans une ou plusieurs vues, et les messages de notification de modification peuvent être demandés dans n’importe quel sous-ensemble de vues prises en charge.</span><span class="sxs-lookup"><span data-stu-id="b76fb-112">All changes to routing information in the routing table manager occur in one or more views, and change notification messages can be requested in any subset of supported views.</span></span>

<span data-ttu-id="b76fb-113">Il existe actuellement trois types de notifications de modifications pour lesquelles un client peut s’inscrire :</span><span class="sxs-lookup"><span data-stu-id="b76fb-113">There are currently three types of change notifications for which a client can register:</span></span>

-   <span data-ttu-id="b76fb-114">Notification de toute modification apportée aux itinéraires pour la destination.</span><span class="sxs-lookup"><span data-stu-id="b76fb-114">Notification of any change to the routes for the destination.</span></span> <span data-ttu-id="b76fb-115">Cette demande est effectuée à l’aide de l' \_ indicateur de modification de \_ type \_ tout.</span><span class="sxs-lookup"><span data-stu-id="b76fb-115">This request is made using the RTM\_CHANGE\_TYPE\_ALL flag.</span></span>
-   <span data-ttu-id="b76fb-116">Notification si le meilleur itinéraire vers la destination change, ou l’une des informations suivantes pour les meilleures modifications de routage actuelles :</span><span class="sxs-lookup"><span data-stu-id="b76fb-116">Notification if the best route to the destination changes, or any of the following information for the current best route changes:</span></span>

    -   <span data-ttu-id="b76fb-117">Préférence</span><span class="sxs-lookup"><span data-stu-id="b76fb-117">Preference</span></span>
    -   <span data-ttu-id="b76fb-118">Tronçons suivants</span><span class="sxs-lookup"><span data-stu-id="b76fb-118">Next hops</span></span>
    -   <span data-ttu-id="b76fb-119">Indicateurs de route</span><span class="sxs-lookup"><span data-stu-id="b76fb-119">Route flags</span></span>

    <span data-ttu-id="b76fb-120">Cette demande est effectuée à l’aide \_ du \_ meilleur indicateur de type de modification RTM \_ .</span><span class="sxs-lookup"><span data-stu-id="b76fb-120">This request is made using the RTM\_CHANGE\_TYPE\_BEST flag.</span></span>

-   <span data-ttu-id="b76fb-121">Notification de toutes les modifications du type RTM de type RTM \_ \_ \_ , à l’exception des modifications apportées aux indicateurs de non-transfert dans le meilleur itinéraire.</span><span class="sxs-lookup"><span data-stu-id="b76fb-121">Notification of all changes of the type RTM\_CHANGE\_TYPE\_BEST, except changes in non-forwarding flags in the best route.</span></span> <span data-ttu-id="b76fb-122">Par exemple, le gestionnaire de routeur attend les modifications de ce type dans la vue de monodiffusion et met à jour les informations dans le redirecteur de monodiffusion.</span><span class="sxs-lookup"><span data-stu-id="b76fb-122">For example, the router manager waits for changes of this type in the unicast view, and updates information in the unicast forwarder.</span></span> <span data-ttu-id="b76fb-123">Cette demande est effectuée à l’aide de l' \_ indicateur de transfert de type de modification RTM \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="b76fb-123">This request is made using the RTM\_CHANGE\_TYPE\_FORWARDING flag.</span></span>

<span data-ttu-id="b76fb-124">Les demandes de notification des modifications peuvent également être limitées à un sous-ensemble de destinations en s’inscrivant pour les notifications de modifications uniquement aux destinations « marquées ».</span><span class="sxs-lookup"><span data-stu-id="b76fb-124">Requests for notifications of changes can also be restricted to a subset of destinations by registering for notifications of changes only to "marked" destinations.</span></span> <span data-ttu-id="b76fb-125">Le client peut marquer une destination pour la notification de modification en appelant [**RtmMarkDestForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmmarkdestforchangenotification).</span><span class="sxs-lookup"><span data-stu-id="b76fb-125">The client can mark a destination for change notification by calling [**RtmMarkDestForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmmarkdestforchangenotification).</span></span>

<span data-ttu-id="b76fb-126">Lorsqu’une modification se produit, le gestionnaire de tables de routage vérifie s’il existe des clients qui doivent être avertis de cette modification.</span><span class="sxs-lookup"><span data-stu-id="b76fb-126">When a change occurs, the routing table manager checks to see if there are any clients that must be notified of this change.</span></span> <span data-ttu-id="b76fb-127">Un client doit être averti d’une modification si toutes les conditions suivantes sont remplies :</span><span class="sxs-lookup"><span data-stu-id="b76fb-127">A client must be notified of a change if all of the following conditions are met:</span></span>

-   <span data-ttu-id="b76fb-128">Le type de modification qui s’est produit est un type pour lequel le client s’est inscrit pour la notification</span><span class="sxs-lookup"><span data-stu-id="b76fb-128">The type of change that occurred is a type for which the client has registered for notification</span></span>
-   <span data-ttu-id="b76fb-129">Les modifications apportées à une destination marquée par le client ont été effectuées ou n’importe quelle destination, si le client a demandé des modifications pour toutes les destinations</span><span class="sxs-lookup"><span data-stu-id="b76fb-129">Changes to a destination that the client has marked have occurred or any destination, if the client has requested changes for all destinations</span></span>
-   <span data-ttu-id="b76fb-130">Le client a demandé une notification de modification pour la vue dans laquelle cette modification s’est produite</span><span class="sxs-lookup"><span data-stu-id="b76fb-130">The client requested change notification for the view in which this change occurred</span></span>

<span data-ttu-id="b76fb-131">Si la modification remplit tous les critères ci-dessus, la modification est mise en cache et le client est averti.</span><span class="sxs-lookup"><span data-stu-id="b76fb-131">If the change meets all of the above criteria, the change is cached and the client is notified.</span></span>

<span data-ttu-id="b76fb-132">La notification ne spécifie pas les modifications réelles, mais uniquement si elles se sont produites.</span><span class="sxs-lookup"><span data-stu-id="b76fb-132">The notification does not specify what the actual changes are, only that they have occurred.</span></span> <span data-ttu-id="b76fb-133">Le client doit récupérer les modifications en appelant [**RtmGetChangedDests**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetchangeddests) à l’aide du handle de notification obtenu à partir d’un appel précédent à [**RtmRegisterForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterforchangenotification).</span><span class="sxs-lookup"><span data-stu-id="b76fb-133">The client must retrieve the changes by calling [**RtmGetChangedDests**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetchangeddests) using the notification handle that was obtained from a previous call to [**RtmRegisterForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterforchangenotification).</span></span>

 

 




