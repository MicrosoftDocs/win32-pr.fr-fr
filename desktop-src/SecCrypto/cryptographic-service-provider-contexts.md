---
description: La première fonction CryptoAPI appelée par une application qui utilise une API de chiffrement est la fonction CryptAcquireContext.
ms.assetid: ad1ff45c-7d02-431b-a287-e9db765476ce
title: Contextes de fournisseur de services de chiffrement
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df20df528b0ba0c385c7ab690436351d918f1521
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104112683"
---
# <a name="cryptographic-service-provider-contexts"></a><span data-ttu-id="cf55e-103">Contextes de fournisseur de services de chiffrement</span><span class="sxs-lookup"><span data-stu-id="cf55e-103">Cryptographic Service Provider Contexts</span></span>

<span data-ttu-id="cf55e-104">La première fonction [*CryptoAPI*](../secgloss/c-gly.md) appelée par une application qui utilise une API de chiffrement est la fonction [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) .</span><span class="sxs-lookup"><span data-stu-id="cf55e-104">The first [*CryptoAPI*](../secgloss/c-gly.md) function called by an application that uses any cryptographic APIs is the [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) function.</span></span> <span data-ttu-id="cf55e-105">Cette fonction renvoie un descripteur à un CSP particulier qui comprend la spécification d’un [*conteneur de clé*](../secgloss/k-gly.md) particulier au sein du CSP.</span><span class="sxs-lookup"><span data-stu-id="cf55e-105">This function returns a handle to a particular CSP which includes the specification of a particular [*key container*](../secgloss/k-gly.md) within the CSP.</span></span> <span data-ttu-id="cf55e-106">Ce conteneur de clé est soit un conteneur de clé demandé spécifiquement, soit le conteneur de clé par défaut pour l’utilisateur actuellement connecté.</span><span class="sxs-lookup"><span data-stu-id="cf55e-106">This key container is either a specifically requested key container or it is the default key container for the currently logged-on user.</span></span>

<span data-ttu-id="cf55e-107">[**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) peut également créer un conteneur de clé.</span><span class="sxs-lookup"><span data-stu-id="cf55e-107">[**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) can also create a new key container.</span></span> <span data-ttu-id="cf55e-108">Pour plus d’informations, consultez [exemple de programme c : création d’un conteneur de clé et génération de clés](example-c-program-creating-a-key-container-and-generating-keys.md) et exemple de [programme c : utilisation de CryptAcquireContext](example-c-program-using-cryptacquirecontext.md).</span><span class="sxs-lookup"><span data-stu-id="cf55e-108">For more information, see [Example C Program: Creating a Key Container and Generating Keys](example-c-program-creating-a-key-container-and-generating-keys.md) and [Example C Program: Using CryptAcquireContext](example-c-program-using-cryptacquirecontext.md).</span></span>

<span data-ttu-id="cf55e-109">Un [*fournisseur de services de chiffrement*](../secgloss/c-gly.md) (CSP) a un nom et un type.</span><span class="sxs-lookup"><span data-stu-id="cf55e-109">A [*cryptographic service provider*](../secgloss/c-gly.md) (CSP) has both a name and a type.</span></span> <span data-ttu-id="cf55e-110">Par exemple, le nom de l’un des fournisseurs de services de chiffrement actuellement fournis avec le système d’exploitation est [Microsoft base Cryptographic Provider](microsoft-base-cryptographic-provider.md).</span><span class="sxs-lookup"><span data-stu-id="cf55e-110">For example, the name of one of the CSPs currently shipped with the operating system is [Microsoft Base Cryptographic Provider](microsoft-base-cryptographic-provider.md).</span></span> <span data-ttu-id="cf55e-111">Il s’agit d’un fournisseur de type [ \_ \_ complet RSA Proven](prov-rsa-full.md) .</span><span class="sxs-lookup"><span data-stu-id="cf55e-111">It is a [PROV\_RSA\_FULL](prov-rsa-full.md) type provider.</span></span> <span data-ttu-id="cf55e-112">Le nom de chaque fournisseur est unique ; le type de fournisseur n’est pas.</span><span class="sxs-lookup"><span data-stu-id="cf55e-112">The name of each provider is unique; the provider type is not.</span></span>

<span data-ttu-id="cf55e-113">Lorsqu’une application appelle [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) pour obtenir un handle CSP, elle spécifie un type de fournisseur et, éventuellement, un nom de fournisseur.</span><span class="sxs-lookup"><span data-stu-id="cf55e-113">When an application calls [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) to obtain a CSP handle, it specifies a provider type and, optionally, a provider name.</span></span> <span data-ttu-id="cf55e-114">Si un type et un nom sont tous deux spécifiés, la fonction charge le CSP avec le type de fournisseur et le nom de fournisseur correspondants.</span><span class="sxs-lookup"><span data-stu-id="cf55e-114">If both a type and a name are specified, the function loads the CSP with the matching provider type and provider name.</span></span> <span data-ttu-id="cf55e-115">La fonction retourne le descripteur du CSP qui fournit l’accès à la fois au CSP et à un [*conteneur de clé*](../secgloss/k-gly.md) au sein du CSP.</span><span class="sxs-lookup"><span data-stu-id="cf55e-115">The function returns the CSP's handle which provides access to both the CSP and to a [*key container*](../secgloss/k-gly.md) within the CSP.</span></span>

<span data-ttu-id="cf55e-116">Lorsqu’une application appelle [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) et spécifie un type de fournisseur, mais aucun nom de fournisseur, la fonction recherche un fournisseur nommé, en vérifiant d’abord une liste de fournisseurs nommés par défaut associés à l’utilisateur connecté et, en cas d’échec, à partir d’une liste de fournisseurs nommés par défaut associés à l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="cf55e-116">When an application calls [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) and specifies a provider type but no provider name, the function looks for a named provider, first checking a list of default named providers associated with the logged-on user and, if that fails, from a list of default named providers associated with the computer.</span></span> <span data-ttu-id="cf55e-117">Une fois le nom du fournisseur déterminé, la fonction **CryptAcquireContext** recherche le CSP pour ce fournisseur, la charge et retourne son handle.</span><span class="sxs-lookup"><span data-stu-id="cf55e-117">After the provider name has been determined, the **CryptAcquireContext** function searches for the CSP for that provider, loads it, and returns its handle.</span></span>

<span data-ttu-id="cf55e-118">Lorsque vous avez fini d’utiliser un descripteur CSP, libérez-le en appelant la fonction [**CryptReleaseContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptreleasecontext) .</span><span class="sxs-lookup"><span data-stu-id="cf55e-118">When you have finished using a CSP handle, release it by calling the [**CryptReleaseContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptreleasecontext) function.</span></span>

 

 
