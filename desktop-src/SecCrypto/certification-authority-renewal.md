---
description: Les services de certificats prennent en charge le renouvellement d’une autorité de certification.
ms.assetid: b6c76642-9a23-471e-af08-58e91d778f09
title: Renouvellement de l’autorité de certification
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de57cd16ae6fc4c90bfeea411a06efcb14d028b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103951458"
---
# <a name="certification-authority-renewal"></a><span data-ttu-id="54836-103">Renouvellement de l’autorité de certification</span><span class="sxs-lookup"><span data-stu-id="54836-103">Certification Authority Renewal</span></span>

<span data-ttu-id="54836-104">Les [*services de certificats*](../secgloss/c-gly.md) prennent en charge le renouvellement d’une autorité de [*certification*](../secgloss/c-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="54836-104">[*Certificate Services*](../secgloss/c-gly.md) supports the renewal of a [*certification authority*](../secgloss/c-gly.md) (CA).</span></span> <span data-ttu-id="54836-105">Le renouvellement est l’émission d’un nouveau certificat permettant à l’autorité de certification d’étendre la durée de vie de l’autorité de certification au-delà de la date de fin de son certificat d’origine.</span><span class="sxs-lookup"><span data-stu-id="54836-105">Renewal is the issuing of a new certificate for the CA to extend the CA's life beyond the end date of its original certificate.</span></span> <span data-ttu-id="54836-106">Vous pouvez renouveler une autorité de certification en tant que tâche dans le composant logiciel enfichable MMC Autorité de certification ou à l’aide de l’outil Certutil.exe (avec la commande **-renewCert** ).</span><span class="sxs-lookup"><span data-stu-id="54836-106">You can renew a CA as a task within the Certificate Authority MMC snap-in or by using the Certutil.exe tool (with the **-renewCert** command).</span></span>

<span data-ttu-id="54836-107">Chaque renouvellement aboutit à un nouveau certificat d’autorité de certification. Toutefois, l’administrateur peut soit générer une nouvelle paire de clés publique/privée, soit réutiliser la paire de clés publique/privée existante pour le certificat de l’autorité de certification.</span><span class="sxs-lookup"><span data-stu-id="54836-107">Each renewal results in a new CA certificate; however, the administrator can either generate a new public/private key pair or reuse the existing public/private key pair for the CA certificate.</span></span> <span data-ttu-id="54836-108">Pour la cohérence et l’intégrité, les certificats d’autorité de certification et les [*listes de révocation de certificats*](../secgloss/c-gly.md) émis par l’autorité de certification avant son renouvellement seront disponibles une fois que l’autorité de certification a été renouvelée.</span><span class="sxs-lookup"><span data-stu-id="54836-108">For consistency and integrity, CA certificates and [*certificate revocation lists*](../secgloss/c-gly.md) (CRL) issued by the CA before its renewal will be available after the CA has been renewed.</span></span> <span data-ttu-id="54836-109">Pour les rendre disponibles, les services de certificats maintiennent un index des certificats, des listes de révocation de certificats et des clés de l’autorité de certification.</span><span class="sxs-lookup"><span data-stu-id="54836-109">To make these available, Certificate Services maintains an index of CA certificates, CRLs, and keys.</span></span>

<span data-ttu-id="54836-110">Les index et les noms de suffixes des certificats d’autorité de certification et des listes de révocation de certificats au cours des différentes opérations de renouvellement de l’autorité de certification</span><span class="sxs-lookup"><span data-stu-id="54836-110">The indexes and suffix names of CA certificates and CRLs during various CA renewal operations are as follows.</span></span>



| <span data-ttu-id="54836-111">Opération</span><span class="sxs-lookup"><span data-stu-id="54836-111">Operation</span></span>                | <span data-ttu-id="54836-112">Index du certificat d’autorité de certification</span><span class="sxs-lookup"><span data-stu-id="54836-112">CA certificate index</span></span> | <span data-ttu-id="54836-113">Suffixe du nom de fichier du certificat d’autorité de certification</span><span class="sxs-lookup"><span data-stu-id="54836-113">CA certificate file name suffix</span></span> | <span data-ttu-id="54836-114">Liste de révocation de certificats et index de clé</span><span class="sxs-lookup"><span data-stu-id="54836-114">CRL and key index</span></span> | <span data-ttu-id="54836-115">Suffixe de liste de révocation de certificats et de conteneur de clé</span><span class="sxs-lookup"><span data-stu-id="54836-115">CRL and key container name suffix</span></span> |
|--------------------------|----------------------|---------------------------------|-------------------|-----------------------------------|
| <span data-ttu-id="54836-116">Installation d’origine de l’autorité de certification</span><span class="sxs-lookup"><span data-stu-id="54836-116">Original CA installation</span></span> | <span data-ttu-id="54836-117">0</span><span class="sxs-lookup"><span data-stu-id="54836-117">0</span></span>                    | <span data-ttu-id="54836-118">""</span><span class="sxs-lookup"><span data-stu-id="54836-118">""</span></span>                              | <span data-ttu-id="54836-119">0</span><span class="sxs-lookup"><span data-stu-id="54836-119">0</span></span>                 | <span data-ttu-id="54836-120">""</span><span class="sxs-lookup"><span data-stu-id="54836-120">""</span></span>                                |
| <span data-ttu-id="54836-121">Renouvellement avec une nouvelle clé</span><span class="sxs-lookup"><span data-stu-id="54836-121">Renewal with new key</span></span>     | <span data-ttu-id="54836-122">1</span><span class="sxs-lookup"><span data-stu-id="54836-122">1</span></span>                    | <span data-ttu-id="54836-123">« (1) »</span><span class="sxs-lookup"><span data-stu-id="54836-123">"(1)"</span></span>                           | <span data-ttu-id="54836-124">1</span><span class="sxs-lookup"><span data-stu-id="54836-124">1</span></span>                 | <span data-ttu-id="54836-125">« (1) »</span><span class="sxs-lookup"><span data-stu-id="54836-125">"(1)"</span></span>                             |
| <span data-ttu-id="54836-126">Renouvellement de réutilisation de la clé</span><span class="sxs-lookup"><span data-stu-id="54836-126">Renewal reusing key</span></span>      | <span data-ttu-id="54836-127">2</span><span class="sxs-lookup"><span data-stu-id="54836-127">2</span></span>                    | <span data-ttu-id="54836-128">« (2) »</span><span class="sxs-lookup"><span data-stu-id="54836-128">"(2)"</span></span>                           | <span data-ttu-id="54836-129">1</span><span class="sxs-lookup"><span data-stu-id="54836-129">1</span></span>                 | <span data-ttu-id="54836-130">« (1) »</span><span class="sxs-lookup"><span data-stu-id="54836-130">"(1)"</span></span>                             |
| <span data-ttu-id="54836-131">Renouvellement de réutilisation de la clé</span><span class="sxs-lookup"><span data-stu-id="54836-131">Renewal reusing key</span></span>      | <span data-ttu-id="54836-132">3</span><span class="sxs-lookup"><span data-stu-id="54836-132">3</span></span>                    | <span data-ttu-id="54836-133">« (3) »</span><span class="sxs-lookup"><span data-stu-id="54836-133">"(3)"</span></span>                           | <span data-ttu-id="54836-134">1</span><span class="sxs-lookup"><span data-stu-id="54836-134">1</span></span>                 | <span data-ttu-id="54836-135">« (1) »</span><span class="sxs-lookup"><span data-stu-id="54836-135">"(1)"</span></span>                             |
| <span data-ttu-id="54836-136">Renouvellement avec une nouvelle clé</span><span class="sxs-lookup"><span data-stu-id="54836-136">Renewal with new key</span></span>     | <span data-ttu-id="54836-137">4</span><span class="sxs-lookup"><span data-stu-id="54836-137">4</span></span>                    | <span data-ttu-id="54836-138">« (4) »</span><span class="sxs-lookup"><span data-stu-id="54836-138">"(4)"</span></span>                           | <span data-ttu-id="54836-139">4</span><span class="sxs-lookup"><span data-stu-id="54836-139">4</span></span>                 | <span data-ttu-id="54836-140">« (4) »</span><span class="sxs-lookup"><span data-stu-id="54836-140">"(4)"</span></span>                             |
| <span data-ttu-id="54836-141">Renouvellement de réutilisation de la clé</span><span class="sxs-lookup"><span data-stu-id="54836-141">Renewal reusing key</span></span>      | <span data-ttu-id="54836-142">5</span><span class="sxs-lookup"><span data-stu-id="54836-142">5</span></span>                    | <span data-ttu-id="54836-143">« (5) »</span><span class="sxs-lookup"><span data-stu-id="54836-143">"(5)"</span></span>                           | <span data-ttu-id="54836-144">4</span><span class="sxs-lookup"><span data-stu-id="54836-144">4</span></span>                 | <span data-ttu-id="54836-145">« (4) »</span><span class="sxs-lookup"><span data-stu-id="54836-145">"(4)"</span></span>                             |
| <span data-ttu-id="54836-146">Renouvellement avec une nouvelle clé</span><span class="sxs-lookup"><span data-stu-id="54836-146">Renewal with new key</span></span>     | <span data-ttu-id="54836-147">6</span><span class="sxs-lookup"><span data-stu-id="54836-147">6</span></span>                    | <span data-ttu-id="54836-148">« (6) »</span><span class="sxs-lookup"><span data-stu-id="54836-148">"(6)"</span></span>                           | <span data-ttu-id="54836-149">6</span><span class="sxs-lookup"><span data-stu-id="54836-149">6</span></span>                 | <span data-ttu-id="54836-150">« (6) »</span><span class="sxs-lookup"><span data-stu-id="54836-150">"(6)"</span></span>                             |
| <span data-ttu-id="54836-151">Renouvellement de réutilisation de la clé</span><span class="sxs-lookup"><span data-stu-id="54836-151">Renewal reusing key</span></span>      | <span data-ttu-id="54836-152">7</span><span class="sxs-lookup"><span data-stu-id="54836-152">7</span></span>                    | <span data-ttu-id="54836-153">« (7) »</span><span class="sxs-lookup"><span data-stu-id="54836-153">"(7)"</span></span>                           | <span data-ttu-id="54836-154">6</span><span class="sxs-lookup"><span data-stu-id="54836-154">6</span></span>                 | <span data-ttu-id="54836-155">« (6) »</span><span class="sxs-lookup"><span data-stu-id="54836-155">"(6)"</span></span>                             |



 

<span data-ttu-id="54836-156">Lorsqu’une autorité de certification est installée, l’index du certificat est égal à zéro et le suffixe du certificat est «» (une chaîne vide).</span><span class="sxs-lookup"><span data-stu-id="54836-156">When a CA is installed, the certificate index is zero and the certificate suffix is "" (an empty string).</span></span> <span data-ttu-id="54836-157">Chaque fois que le certificat est renouvelé (que des clés soient réutilisées ou non), l’index du certificat est incrémenté d’une unité et le suffixe du nom du fichier de certificat devient une chaîne au format "(*n*)", où *n* représente le nombre de fois où le certificat de l’autorité de certification a été renouvelé.</span><span class="sxs-lookup"><span data-stu-id="54836-157">Each time the certificate is renewed (whether or not keys are reused), the certificate index is incremented by one, and the certificate file name suffix becomes a string of the form "(*n*)", where *n* represents the number of times the CA certificate has been renewed.</span></span> <span data-ttu-id="54836-158">Après le premier renouvellement, l’index de certificat est 1 et le suffixe de nom de fichier de certificat est « (1) ».</span><span class="sxs-lookup"><span data-stu-id="54836-158">After the first renewal, the certificate index is 1 and the certificate file name suffix is "(1)".</span></span> <span data-ttu-id="54836-159">Après le deuxième renouvellement, l’index de certificat est 2 et le suffixe de nom de fichier de certificat est « (2) », et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="54836-159">After the second renewal, the certificate index is 2 and the certificate file name suffix is "(2)", and so on.</span></span>

<span data-ttu-id="54836-160">Bien que l’index et le suffixe du certificat d’autorité de certification soient incrémentés d’une unité chaque fois que l’autorité de certification est renouvelée, les index de la liste de révocation des certificats et des clés et les suffixes de nom de fichier sont définis sur l’index du certificat d’autorité de certification uniquement si le processus de renouvellement comprend une nouvelle paire de clés publique</span><span class="sxs-lookup"><span data-stu-id="54836-160">Although the CA certificate index and suffix are incremented by one each time the CA is renewed, the CRL and key indexes and the file name suffixes are set to the CA certificate index only if the renewal process includes a new public/private key pair.</span></span> <span data-ttu-id="54836-161">Si ce n’est pas le cas, les valeurs de ces index et suffixes restent les mêmes que pour le dernier index.</span><span class="sxs-lookup"><span data-stu-id="54836-161">If it does not, the values of these indexes and suffixes remain the same as they were for the last index.</span></span> <span data-ttu-id="54836-162">Lors du renouvellement, un administrateur spécifie si une nouvelle paire de clés est générée ou si la paire de clés existante est utilisée.</span><span class="sxs-lookup"><span data-stu-id="54836-162">During renewal, an administrator specifies whether a new key pair is generated or the existing key pair is used.</span></span> <span data-ttu-id="54836-163">(Dans le composant logiciel enfichable MMC Autorité de certification, une option dans l’interface utilisateur spécifie une paire de clés nouvelle ou existante ; dans l’outil Certutil.exe, la commande **certutil-renewCert** renouvelle l’autorité de certification avec une nouvelle paire de clés, tandis que la commande **certutil-renewCert ReuseKeys** renouvelle l’autorité de certification avec la paire de clés existante.)</span><span class="sxs-lookup"><span data-stu-id="54836-163">(In the Certificate Authority MMC snap-in, an option in the user interface specifies a new or an existing key pair; in the Certutil.exe tool, the command **certutil -renewCert** renews the CA with a new key pair, while the command **certutil -renewCert ReuseKeys** renews the CA with the existing key pair.)</span></span>

<span data-ttu-id="54836-164">L’index de la liste de révocation des certificats est directement lié à l’index de clé, qui est défini sur l’index du certificat d’autorité de certification uniquement lorsqu’une nouvelle paire de clés est utilisée pour le renouvellement.</span><span class="sxs-lookup"><span data-stu-id="54836-164">The CRL index is directly tied to the key index, which is set to the CA certificate index only when a new key pair is used for the renewal.</span></span> <span data-ttu-id="54836-165">Après le premier renouvellement (qui utilisait une nouvelle paire de clés), l’index de la liste de révocation de certificats et de la clé a la valeur 1, et le suffixe de la liste de révocation de certificats et du nom du conteneur de clé est « (1) ».</span><span class="sxs-lookup"><span data-stu-id="54836-165">After the first renewal (which used a new key pair), the index of the CRL and key is set to 1, and the CRL and key container name suffix is "(1)".</span></span> <span data-ttu-id="54836-166">Toutefois, après le deuxième renouvellement, l’index de la liste de révocation de certificats et de la clé reste 1, et le suffixe de liste de révocation de certificats et de nom de conteneur de clé reste également « (1) ». Cela est dû au fait que le deuxième renouvellement a utilisé la paire de clés existante et qu’une seule liste de révocation de certificats est émise pour chaque paire de clés d’autorité de certification.</span><span class="sxs-lookup"><span data-stu-id="54836-166">After the second renewal, however, the index of the CRL and key remains 1, and the CRL and key container name suffix also remains "(1)"; this is because the second renewal used the existing key pair and only one CRL is issued for each CA key pair.</span></span>

<span data-ttu-id="54836-167">Vous pouvez récupérer les certificats et les listes de révocation de certificats d’autorité de certification indexés en appelant la méthode **GetCertificateProperty** (dans les interfaces [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) et [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) ).</span><span class="sxs-lookup"><span data-stu-id="54836-167">You can retrieve the indexed CA certificates and CRLs by calling the **GetCertificateProperty** method (in both the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interfaces).</span></span> <span data-ttu-id="54836-168">Lorsque vous récupérez certaines propriétés associées au certificat ou à la liste de révocation des certificats de l’autorité de certification, vous pouvez ajouter l’index de base zéro du certificat de l’autorité de certification aux noms des propriétés.</span><span class="sxs-lookup"><span data-stu-id="54836-168">When you retrieve certain properties related to the CA certificate or CRL, you can append the CA certificate's zero-based index to the property names.</span></span> <span data-ttu-id="54836-169">Par exemple, pour récupérer l’index de la liste de révocation de certificats qui correspond au troisième certificat de l’autorité de certification, transmettez la propriété « CRLIndex. 2 » à [**ICertServerPolicy :: GetCertificateProperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); pour la table, la valeur de la propriété « CRLIndex. 2 » extraite est 1.</span><span class="sxs-lookup"><span data-stu-id="54836-169">For example, to retrieve the CRL index that corresponds to the CA's third certificate, pass the property "CRLIndex.2" to [**ICertServerPolicy::GetCertificateProperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); for the table, the retrieved "CRLIndex.2" property value would be 1.</span></span> <span data-ttu-id="54836-170">Une propriété appelée « CertCount » peut être utilisée pour déterminer le nombre de fois que l’autorité de certification a émis un certificat d’autorité de certification.</span><span class="sxs-lookup"><span data-stu-id="54836-170">A property called "CertCount" can be used to determine the number of times the CA has been issued a CA certificate.</span></span>

<span data-ttu-id="54836-171">Les certificats et les listes de révocation de certificats d’autorité de certification contiennent une extension qui fournit des informations sur le certificat et l’index de clé.</span><span class="sxs-lookup"><span data-stu-id="54836-171">CA certificates and CRLs contain an extension that provides information about the certificate and key index.</span></span> <span data-ttu-id="54836-172">L’extension est définie dans wincrypt. h comme szOID \_ CERTSRV \_ ca \_ version avec la valeur « 1.3.6.1.4.1.311.21.1 ».</span><span class="sxs-lookup"><span data-stu-id="54836-172">The extension is defined in Wincrypt.h as szOID\_CERTSRV\_CA\_VERSION with a value of "1.3.6.1.4.1.311.21.1".</span></span> <span data-ttu-id="54836-173">Les données d’extension sont une valeur **DWORD** (encodée en tant qu' \_ entier x509 dans l’extension); les 16 bits de poids faible sont l’index de certificat et les 16 bits de poids fort sont l’index de clé.</span><span class="sxs-lookup"><span data-stu-id="54836-173">The extension data is a **DWORD** value (encoded as X509\_INTEGER in the extension); the low 16 bits are the certificate index, and the high 16 bits are the key index.</span></span>

<span data-ttu-id="54836-174">L’installation initiale d’une autorité de certification produit un index de certificat de zéro et un index de clé de zéro.</span><span class="sxs-lookup"><span data-stu-id="54836-174">The initial installation of a CA produces a certificate index of zero and a key index of zero.</span></span> <span data-ttu-id="54836-175">Le renouvellement d’un certificat d’autorité de certification entraîne l’incrémentation de l’index de certificat.</span><span class="sxs-lookup"><span data-stu-id="54836-175">Renewal of a CA certificate will cause the certificate index to be incremented.</span></span> <span data-ttu-id="54836-176">Si la clé est réutilisée dans le renouvellement, l’index de clé est identique à l’index de clé précédent.</span><span class="sxs-lookup"><span data-stu-id="54836-176">If the key is reused in the renewal, the key index will be the same as the previous key index.</span></span> <span data-ttu-id="54836-177">Si la clé n’est pas réutilisée, l’index de clé correspondra au nouvel index de certificat.</span><span class="sxs-lookup"><span data-stu-id="54836-177">If the key is not reused, the key index will match the new certificate index.</span></span>

## <a name="related-topics"></a><span data-ttu-id="54836-178">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="54836-178">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="54836-179">**ICertServerPolicy::GetCertificateProperty**</span><span class="sxs-lookup"><span data-stu-id="54836-179">**ICertServerPolicy::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty)
</dt> <dt>

[<span data-ttu-id="54836-180">**ICertServerExit::GetCertificateProperty**</span><span class="sxs-lookup"><span data-stu-id="54836-180">**ICertServerExit::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverexit-getcertificateproperty)
</dt> </dl>

 

 
