---
description: Les magasins système par défaut, y compris MY, CA et ROOT, sont implémentés en tant que magasins de collection logique avec un certain nombre de magasins physiques prédéfinis en tant que membres stockés.
ms.assetid: 1d82b94b-4842-454a-aca4-823cd264ac52
title: Magasins logiques et physiques
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66a5441bac91e39b7f4c124daecd3a6a569c323c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103752140"
---
# <a name="logical-and-physical-stores"></a><span data-ttu-id="60b37-103">Magasins logiques et physiques</span><span class="sxs-lookup"><span data-stu-id="60b37-103">Logical and Physical Stores</span></span>

<span data-ttu-id="60b37-104">Les magasins système par défaut, y compris MY, CA et ROOT, sont implémentés en tant que magasins de collection logique avec un certain nombre de magasins physiques prédéfinis en tant que membres stockés.</span><span class="sxs-lookup"><span data-stu-id="60b37-104">Default system stores, including MY, CA, and ROOT, are implemented as logical collection stores with a number of predefined physical stores as their member stores.</span></span> <span data-ttu-id="60b37-105">Les magasins physiques de membres d’un magasin système s’ouvrent automatiquement lorsque le magasin système est ouvert.</span><span class="sxs-lookup"><span data-stu-id="60b37-105">The member physical stores of a system store are opened automatically when the system store is opened.</span></span> <span data-ttu-id="60b37-106">Un utilisateur peut ajouter des magasins physiques supplémentaires à n’importe quel regroupement du magasin système.</span><span class="sxs-lookup"><span data-stu-id="60b37-106">A user can add additional physical stores to any system store collection.</span></span> <span data-ttu-id="60b37-107">La fonction CryptoAPI [**CertRegisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore) ajoute un nouveau magasin physique à une collection du magasin système.</span><span class="sxs-lookup"><span data-stu-id="60b37-107">The CryptoAPI function [**CertRegisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore) adds a new physical store to a system store collection.</span></span> <span data-ttu-id="60b37-108">[**CertUnregisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore) dissocie un magasin physique d’un magasin de système logique.</span><span class="sxs-lookup"><span data-stu-id="60b37-108">[**CertUnregisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore) disassociates a physical store from a logical system store.</span></span> <span data-ttu-id="60b37-109">[**CertRegisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore) crée un nouveau magasin système sous un HKEY de Registre, tandis que [**CertUnregisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore) supprime un magasin système du Registre.</span><span class="sxs-lookup"><span data-stu-id="60b37-109">[**CertRegisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore) creates a new system store under a registry hKey, while [**CertUnregisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore) removes a system store from the registry.</span></span>

<span data-ttu-id="60b37-110">Dans CryptoAPI, les magasins système sont des magasins logiques avec des magasins physiques associés.</span><span class="sxs-lookup"><span data-stu-id="60b37-110">In CryptoAPI, system stores are logical stores with associated physical stores.</span></span> <span data-ttu-id="60b37-111">Tous les certificats dans un magasin système existant restent disponibles et l’ajout physique de nouveaux certificats est effectué dans les magasins physiques qui composent le magasin de système logique.</span><span class="sxs-lookup"><span data-stu-id="60b37-111">All the certificates in an existing system store remain available, and the physical addition of new certificates is made in the physical stores that make up the logical system store.</span></span>

<span data-ttu-id="60b37-112">Les utilisateurs qui préfèrent continuer à utiliser des magasins système physiques et ne pas effectuer de conversion en magasins logiques peuvent ouvrir des magasins système avec le \_ \_ fournisseur de Registre système Proven Store \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="60b37-112">Users who prefer to continue to use physical system stores and not convert to logical stores can open system stores with the CERT\_STORE\_PROV\_SYSTEM\_REGISTRY provider.</span></span> <span data-ttu-id="60b37-113">Ce fournisseur continuera à utiliser chaque magasin système comme un magasin physique unique.</span><span class="sxs-lookup"><span data-stu-id="60b37-113">This provider will continue to use each system store as a single, physical store.</span></span>

<span data-ttu-id="60b37-114">Les fonctions [**CertEnumSystemStoreLocation**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation), [**CertEnumSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore)et [**CertEnumPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore) répertorient les emplacements des magasins système, les magasins système disponibles et tous les magasins physiques qui sont membres d’un magasin système.</span><span class="sxs-lookup"><span data-stu-id="60b37-114">The functions [**CertEnumSystemStoreLocation**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation), [**CertEnumSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore), and [**CertEnumPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore) list system store locations, available system stores, and all physical stores that are members of a system store.</span></span>

<span data-ttu-id="60b37-115">Les magasins système peuvent également être déplacés.</span><span class="sxs-lookup"><span data-stu-id="60b37-115">System stores can also be relocated.</span></span> <span data-ttu-id="60b37-116">Par défaut, un magasin système est ouvert par rapport à une sous-clé de Registre selon un modèle prédéfini.</span><span class="sxs-lookup"><span data-stu-id="60b37-116">By default, a system store is opened relative to a registry subkey following a predefined pattern.</span></span> <span data-ttu-id="60b37-117">Pour plus d’informations, consultez [emplacements du magasin système](system-store-locations.md).</span><span class="sxs-lookup"><span data-stu-id="60b37-117">For more information, see [System Store Locations](system-store-locations.md).</span></span> <span data-ttu-id="60b37-118">La définition de l' \_ \_ \_ indicateur de relocalisation du magasin système du certificat \_ dans le paramètre *dwFlags* passé à [**CertOpenStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) place un magasin système dans le Registre sous une sous-clé de Registre spécifiée par l’utilisateur au lieu de celle prédéfinie.</span><span class="sxs-lookup"><span data-stu-id="60b37-118">Setting CERT\_SYSTEM\_STORE\_RELOCATE\_FLAG in the *dwFlags* parameter passed to [**CertOpenStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) places a system store in the registry under a user-specified registry subkey instead of the predefined one.</span></span>

 

 



