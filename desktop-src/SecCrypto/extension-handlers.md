---
description: À partir de la version 3 du format de certificat X. 509, un certificat peut contenir des extensions de certificat.
ms.assetid: fb106cab-8a61-4a83-8fb4-7c045d905575
title: Gestionnaires d’extensions
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfcf1b47fcc97b87f5956f4584aee07acce04222
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106536866"
---
# <a name="extension-handlers"></a><span data-ttu-id="e8762-103">Gestionnaires d’extensions</span><span class="sxs-lookup"><span data-stu-id="e8762-103">Extension Handlers</span></span>

<span data-ttu-id="e8762-104">À partir de la version 3 du format de certificat [*X. 509*](../secgloss/x-gly.md) , un certificat peut contenir des extensions de certificat.</span><span class="sxs-lookup"><span data-stu-id="e8762-104">Beginning with [*X.509*](../secgloss/x-gly.md) Certificate format Version 3, a certificate may contain certificate extensions.</span></span> <span data-ttu-id="e8762-105">(Pour obtenir le contenu d’un certificat X. 509, consultez [Propriétés du certificat](certificate-properties.md).) Ces extensions indiquent des informations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="e8762-105">(For the contents of an X.509 Certificate, see [Certificate Properties](certificate-properties.md).) These extensions indicate additional information.</span></span> <span data-ttu-id="e8762-106">Par exemple, une extension peut indiquer des informations d’identification de sujet supplémentaires, ou elle peut indiquer des informations sur l’utilisation de la clé, qui spécifie les tâches (telles que la signature ou le chiffrement) pour lesquelles une clé peut être utilisée.</span><span class="sxs-lookup"><span data-stu-id="e8762-106">For example, an extension can indicate additional subject identification information, or it can indicate key usage information, which specifies the tasks (such as signature or encryption) for which a key can be used.</span></span> <span data-ttu-id="e8762-107">Un ensemble d’extensions standard est défini pour l’utilisation de l’application, et les extensions peuvent également être personnalisées.</span><span class="sxs-lookup"><span data-stu-id="e8762-107">A set of standard extensions is defined for application use, and extensions may also be customized.</span></span>

<span data-ttu-id="e8762-108">Chaque extension est associée à une chaîne d’identificateur d’objet qui identifie le type d’informations supplémentaires et une structure de données qui contient ces informations.</span><span class="sxs-lookup"><span data-stu-id="e8762-108">Each extension has an associated object identifier string that identifies the type of additional information and a data structure that contains this information.</span></span> <span data-ttu-id="e8762-109">Par exemple, l’identificateur d’objet de l’utilisation de la clé est « 2.5.29.15 », ce qui indique des informations sur l’utilisation de la clé.</span><span class="sxs-lookup"><span data-stu-id="e8762-109">For example, the key usage object identifier is "2.5.29.15", which indicates key usage information.</span></span> <span data-ttu-id="e8762-110">Sa structure de données associée est [**un \_ \_ objet BLOB**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) de chiffrement (champ de bits) spécifiant comment la clé peut être utilisée.</span><span class="sxs-lookup"><span data-stu-id="e8762-110">Its associated data structure is a [**CRYPT\_BIT\_BLOB**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (bitfield) specifying how the key can be used.</span></span>

<span data-ttu-id="e8762-111">Une extension peut être ajoutée à un certificat avant son émission.</span><span class="sxs-lookup"><span data-stu-id="e8762-111">An extension can be added to a certificate before it is issued.</span></span> <span data-ttu-id="e8762-112">Lorsque le certificat est émis, toutes les extensions activées font partie du certificat.</span><span class="sxs-lookup"><span data-stu-id="e8762-112">When the certificate is issued, any enabled extensions are part of the certificate.</span></span> <span data-ttu-id="e8762-113">Si une extension est marquée comme critique, son utilisation doit être connue de l’application using, et l’application doit adhérer à l’intention ou à la valeur de l’extension.</span><span class="sxs-lookup"><span data-stu-id="e8762-113">If an extension is marked critical, its use must be known by the using application, and the application must adhere to the intent or value of the extension.</span></span> <span data-ttu-id="e8762-114">Les services de certificats autorisent la définition d’extensions sur un certificat non émis par le biais des méthodes fournies par [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) et [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy).</span><span class="sxs-lookup"><span data-stu-id="e8762-114">Certificate Services allows extensions to be set on a non-issued certificate through methods provided by [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy).</span></span> <span data-ttu-id="e8762-115">Pour plus d’informations sur les extensions de certificat, consultez Certificate [**\_ extension**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) dans la documentation CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="e8762-115">For details about certificate extensions, see [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) in the CryptoAPI documentation.</span></span> <span data-ttu-id="e8762-116">Pour plus d’informations sur les structures de données d’extension de certificat courantes, consultez [structures d’extension de certificat X. 509](cryptography-structures.md).</span><span class="sxs-lookup"><span data-stu-id="e8762-116">For information about common certificate extension data structures, see [X.509 Certificate Extension Structures](cryptography-structures.md).</span></span>

<span data-ttu-id="e8762-117">Le gestionnaire d’extensions est un objet COM qui fournit des routines pour l’encodage des extensions et des types de données plus complexes, mais couramment utilisés, tels que IA5String ou PrintableString.</span><span class="sxs-lookup"><span data-stu-id="e8762-117">The extension handler is a COM object that provides routines for encoding the more complex, but commonly used extensions and data types, such as IA5String or PrintableString.</span></span>

<span data-ttu-id="e8762-118">Les extensions qui ont les types de données **Date**, **long** et **BSTR** ne nécessitent pas de gestionnaire d’extensions.</span><span class="sxs-lookup"><span data-stu-id="e8762-118">Extensions that have the data types **DATE**, **LONG**, and **BSTR** do not require an extension handler.</span></span> <span data-ttu-id="e8762-119">Le module de stratégie appelle simplement [**ICertServerPolicy :: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) avec le paramètre de *type* défini sur une valeur représentant le type de données d’extension : PROPTYPE \_ date, PROPTYPE \_ long ou PROPTYPE \_ String.</span><span class="sxs-lookup"><span data-stu-id="e8762-119">The policy module simply calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) with the *Type* parameter set to a value representing the extension data type: PROPTYPE\_DATE, PROPTYPE\_LONG, or PROPTYPE\_STRING.</span></span> <span data-ttu-id="e8762-120">Il passe ensuite l’extension au moteur du serveur.</span><span class="sxs-lookup"><span data-stu-id="e8762-120">It then passes the extension to the server engine.</span></span> <span data-ttu-id="e8762-121">Le moteur serveur, à son tour, exécute l’encodage ASN. 1 ( [*Abstract Syntax Notation One*](../secgloss/a-gly.md) ) avant de stocker l’extension dans le certificat.</span><span class="sxs-lookup"><span data-stu-id="e8762-121">The server engine, in turn, performs the [*Abstract Syntax Notation One*](../secgloss/a-gly.md) (ASN.1) encoding before storing the extension in the certificate.</span></span>

<span data-ttu-id="e8762-122">Toutefois, les extensions qui ont des types de données autres que ces types par défaut doivent être codées ASN. 1 par un gestionnaire d’extension avant que le module de stratégie les transmette au moteur du serveur.</span><span class="sxs-lookup"><span data-stu-id="e8762-122">However, extensions that have data types other than these default types must be ASN.1 encoded by an extension handler before the policy module passes them to the server engine.</span></span> <span data-ttu-id="e8762-123">Lorsque le module de stratégie appelle [**ICertServerPolicy :: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) pour transmettre une extension ASN. 1 au moteur du serveur, il doit définir le paramètre de *type* sur PROPTYPE \_ Binary.</span><span class="sxs-lookup"><span data-stu-id="e8762-123">When the policy module calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) to pass an ASN.1-encoded extension to the server engine, it must set the *Type* parameter to PROPTYPE\_BINARY.</span></span> <span data-ttu-id="e8762-124">Le moteur de serveur stocke ensuite simplement cette extension encodée dans le certificat.</span><span class="sxs-lookup"><span data-stu-id="e8762-124">The server engine then simply stores this encoded extension in the certificate.</span></span>

<span data-ttu-id="e8762-125">Le gestionnaire d’extensions par défaut, Certenc.dll, exporte plusieurs interfaces **ICertEncodeXXX** et peut être appelé par le module de stratégie.</span><span class="sxs-lookup"><span data-stu-id="e8762-125">The default extension handler, Certenc.dll, exports a number of **ICertEncodeXXX** interfaces and can be called by the policy module.</span></span> <span data-ttu-id="e8762-126">Les informations de type nécessaires sont également contenues dans Certencl.dll qui est fourni dans le kit de développement logiciel (SDK) de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="e8762-126">The necessary type information is also contained in Certencl.dll which is supplied in the Platform Software Development Kit (SDK).</span></span> <span data-ttu-id="e8762-127">Chaque interface fournit une méthode **encode** qui retourne une extension de certificat encodée ASN. 1 au module de stratégie dans un format binaire.</span><span class="sxs-lookup"><span data-stu-id="e8762-127">Each interface provides an **Encode** method that returns an ASN.1-encoded certificate extension to the policy module in a binary format.</span></span> <span data-ttu-id="e8762-128">Le module de stratégie peut ensuite définir l’extension dans un certificat en appelant la méthode [**ICertServerPolicy :: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) .</span><span class="sxs-lookup"><span data-stu-id="e8762-128">The policy module can then set the extension in a certificate by calling the [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) method.</span></span>

<span data-ttu-id="e8762-129">Pour plus d’informations, consultez [écriture de gestionnaires d’extensions personnalisés](writing-custom-extension-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="e8762-129">For more information, see [Writing Custom Extension Handlers](writing-custom-extension-handlers.md).</span></span>

 

 
