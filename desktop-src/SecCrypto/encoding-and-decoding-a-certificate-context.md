---
description: Encodage et décodage d’un contexte de certificat à l’aide de CryptoAPI.
ms.assetid: 149d1097-5f50-40ba-84f1-b815f54ba33d
title: Encodage et décodage d’un contexte de certificat
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b4168d15ad8db5d4711a18f2042106e7d6d46010
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104201784"
---
# <a name="encoding-and-decoding-a-certificate-context"></a><span data-ttu-id="b97fd-103">Encodage et décodage d’un contexte de certificat</span><span class="sxs-lookup"><span data-stu-id="b97fd-103">Encoding and Decoding a Certificate Context</span></span>

<span data-ttu-id="b97fd-104">[*CryptoAPI*](../secgloss/c-gly.md) prend en charge l’encodage et le décodage des [*certificats*](../secgloss/c-gly.md).</span><span class="sxs-lookup"><span data-stu-id="b97fd-104">[*CryptoAPI*](../secgloss/c-gly.md) supports the encoding and decoding of [*certificates*](../secgloss/c-gly.md).</span></span> <span data-ttu-id="b97fd-105">CryptoAPI comprend un système complet et flexible de fonctions et de structures C qui autorisent l’encodage et le décodage de différentes façons.</span><span class="sxs-lookup"><span data-stu-id="b97fd-105">CryptoAPI includes an extensive, flexible system of functions and C structures that allow encoding and decoding in various ways.</span></span> <span data-ttu-id="b97fd-106">CryptoAPI prend en charge la structure de certificat standard [*X. 509*](../secgloss/x-gly.md) et l’encodage ASN. 1 ( [*Abstract Syntax Notation One*](../secgloss/a-gly.md) ) pour assurer l’interopérabilité avec d’autres systèmes.</span><span class="sxs-lookup"><span data-stu-id="b97fd-106">CryptoAPI supports standard [*X.509*](../secgloss/x-gly.md) certificate structure and standard [*Abstract Syntax Notation One*](../secgloss/a-gly.md) (ASN.1) encoding to provide interoperability with other systems.</span></span>

<span data-ttu-id="b97fd-107">Pour obtenir une vue d’ensemble des données encodées, consultez [données encodées et décodées](encoded-and-decoded-data.md).</span><span class="sxs-lookup"><span data-stu-id="b97fd-107">For an overview of encoded data, see [Encoded and Decoded Data](encoded-and-decoded-data.md).</span></span>

## <a name="certificate-contexts"></a><span data-ttu-id="b97fd-108">Contextes de certificat</span><span class="sxs-lookup"><span data-stu-id="b97fd-108">Certificate Contexts</span></span>

<span data-ttu-id="b97fd-109">Un [*contexte de certificat*](../secgloss/c-gly.md), un [**\_ contexte**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_context)de certificat, est une structure C qui contient un membre encodé, un handle vers [*un magasin de certificats*](../secgloss/c-gly.md), un pointeur vers l' [*objet blob de certificat*](../secgloss/c-gly.md)encodé d’origine et un pointeur vers une structure d' [**\_ informations**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) de certificat C.</span><span class="sxs-lookup"><span data-stu-id="b97fd-109">A [*certificate context*](../secgloss/c-gly.md), [**CERT\_CONTEXT**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_context), is a C structure that contains an encoded member, a handle to a [*certificate store*](../secgloss/c-gly.md), a pointer to the original encoded [*certificate BLOB*](../secgloss/c-gly.md), and a pointer to a [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) C structure.</span></span>

<span data-ttu-id="b97fd-110">La structure des [**\_ informations**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) de certificat est le cœur du certificat.</span><span class="sxs-lookup"><span data-stu-id="b97fd-110">The [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure is the heart of the certificate.</span></span> <span data-ttu-id="b97fd-111">Il contient, sous forme directe et sous forme codée, toutes les informations de base du certificat.</span><span class="sxs-lookup"><span data-stu-id="b97fd-111">It contains, in direct form and in encoded form, all the basic information in the certificate.</span></span> <span data-ttu-id="b97fd-112">L’illustration suivante montre la structure des **\_ informations de certificat** avec tous ses membres encodés affichés comme étant ombrés.</span><span class="sxs-lookup"><span data-stu-id="b97fd-112">The following illustration shows the **CERT\_INFO** structure with all of its encoded members shown as shaded.</span></span>

![structure des informations de certificat \-](images/certinf2.png)

<span data-ttu-id="b97fd-114">Les membres **IssuerUniqueID** et **SubjectUniqueID** font partie de l’implémentation du certificat [*X. 509*](../secgloss/x-gly.md) version 2, mais sont rarement utilisés.</span><span class="sxs-lookup"><span data-stu-id="b97fd-114">The **IssuerUniqueID** and **SubjectUniqueID** members are part of the [*X.509*](../secgloss/x-gly.md) version 2 certificate implementation but are seldom used.</span></span> <span data-ttu-id="b97fd-115">Les extensions de certificat dans la version 3 remplacent les fonctionnalités de ces membres.</span><span class="sxs-lookup"><span data-stu-id="b97fd-115">Certificate extensions in version 3 replace the functionality of these members.</span></span>

<span data-ttu-id="b97fd-116">Si les informations contenues dans l' **émetteur** et l' **objet** des membres encodés (ombrés) sont nécessaires, ces membres doivent être décodés.</span><span class="sxs-lookup"><span data-stu-id="b97fd-116">If the information contained in the encoded (shaded) members **Issuer** and **Subject** is needed, those members must be decoded.</span></span> <span data-ttu-id="b97fd-117">Utilisez [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) pour décoder ces membres.</span><span class="sxs-lookup"><span data-stu-id="b97fd-117">Use [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) to decode these members.</span></span> <span data-ttu-id="b97fd-118">L’illustration suivante montre le processus de décodage de l’un de ces membres.</span><span class="sxs-lookup"><span data-stu-id="b97fd-118">The following illustration shows the process of decoding one of these members.</span></span>

![décodage avec cryptdecodeobject](images/infoflow.png)

<span data-ttu-id="b97fd-120">Dans le cas illustré, la fonction [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) crée une structure d' [**\_ \_ informations sur le nom du certificat**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) , un tableau de structures de type [**\_ RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) du certificat, un tableau correspondant de structures [**\_ \_ attr du RDN du certificat**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) et une chaîne qui contient le nom.</span><span class="sxs-lookup"><span data-stu-id="b97fd-120">In the illustrated case, the [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) function creates a [**CERT\_NAME\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) structure, an array of [**CERT\_RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) structures, a corresponding array of [**CERT\_RDN\_ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) structures, and a string that contains the name.</span></span> <span data-ttu-id="b97fd-121">Les membres de la structure **\_ \_ attr** relative au RDN du certificat déterminent le contenu de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="b97fd-121">Members of the **CERT\_RDN\_ATTR** structure determine the contents of the string.</span></span> <span data-ttu-id="b97fd-122">Par exemple, si le membre **pszObjId** est 2.5.4.3, la chaîne contient un nom commun.</span><span class="sxs-lookup"><span data-stu-id="b97fd-122">For example, if the **pszObjId** member is 2.5.4.3, the string contains a common name.</span></span> <span data-ttu-id="b97fd-123">S’il s’agit de 2.5.4.10, la chaîne contient un nom d’organisation.</span><span class="sxs-lookup"><span data-stu-id="b97fd-123">If it is 2.5.4.10, the string would contain an organization name.</span></span> <span data-ttu-id="b97fd-124">Pour obtenir la liste de ces [*identificateurs d’objet*](../secgloss/o-gly.md) (OID), consultez **CERT \_ RDN \_ attr**.</span><span class="sxs-lookup"><span data-stu-id="b97fd-124">For a list of these [*object identifiers*](../secgloss/o-gly.md) (OIDs), see **CERT\_RDN\_ATTR**.</span></span>

<span data-ttu-id="b97fd-125">Le membre **dwValueType** contient des informations sur le type de chaîne.</span><span class="sxs-lookup"><span data-stu-id="b97fd-125">The **dwValueType** member contains information about the type of string.</span></span> <span data-ttu-id="b97fd-126">S’il s’agit \_ \_ d’une chaîne imprimable de certificat RDN imprimable \_ , le membre de valeur contient une chaîne de caractères de largeur octet, qui se termine par zéro.</span><span class="sxs-lookup"><span data-stu-id="b97fd-126">If it is CERT\_RDN\_PRINTABLE\_STRING, the value member contains a byte-width, zero-terminated character string.</span></span> <span data-ttu-id="b97fd-127">S’il s’agit \_ \_ d’une chaîne Unicode de certificat RDN \_ , la chaîne est une chaîne de caractères à double largeur (taille de texte).</span><span class="sxs-lookup"><span data-stu-id="b97fd-127">If it is CERT\_RDN\_UNICODE\_STRING, the string is a double-width (word-sized) character string.</span></span>

<span data-ttu-id="b97fd-128">Pour un processus détaillé d’encodage et de décodage des certificats, consultez [encodage d’une \_ structure d’informations de certificat](encoding-a-cert-info-structure.md) et [décodage d’une \_ structure d’informations de certificat](decoding-a-cert-info-structure.md).</span><span class="sxs-lookup"><span data-stu-id="b97fd-128">For a detailed process for encoding and decoding certificates, see [Encoding a CERT\_INFO Structure](encoding-a-cert-info-structure.md) and [Decoding a CERT\_INFO Structure](decoding-a-cert-info-structure.md).</span></span>

 

 
