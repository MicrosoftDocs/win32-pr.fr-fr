---
description: Explique les appels requis pour générer un certificat.
ms.assetid: 74154b3b-75fc-412f-835c-1a6f54e688c6
title: Génération d’un certificat
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8f237fd729499aa5153f12f68657e2ce227da7b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103868798"
---
# <a name="building-a-certificate"></a><span data-ttu-id="6f708-103">Génération d’un certificat</span><span class="sxs-lookup"><span data-stu-id="6f708-103">Building a Certificate</span></span>

<span data-ttu-id="6f708-104">L’ordre des appels dans la génération d’un certificat est le suivant :</span><span class="sxs-lookup"><span data-stu-id="6f708-104">The order of calls in building a certificate is as follows:</span></span>

1.  <span data-ttu-id="6f708-105">L' [*autorité de certification*](../secgloss/c-gly.md) initialise les modules par le biais d’appels à [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) et [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (se produit une fois lors de l’initialisation du serveur).</span><span class="sxs-lookup"><span data-stu-id="6f708-105">[*Certification authority*](../secgloss/c-gly.md) (CA) initializes modules through calls to [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) and [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (happens once on server initialization).</span></span> <span data-ttu-id="6f708-106">L’autorité de certification initialise les modules de stratégie et de sortie en appelant [**ICertPolicy2 :: Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) et [**ICertExit :: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span><span class="sxs-lookup"><span data-stu-id="6f708-106">The CA will initialize the policy and exit modules by calling [**ICertPolicy2::Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) and [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span></span>
2.  <span data-ttu-id="6f708-107">Un intermédiaire appelle l’autorité de certification via [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (se produit une fois par initialisation intermédiaire).</span><span class="sxs-lookup"><span data-stu-id="6f708-107">Intermediary calls the CA through [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (happens once per intermediary initialization).</span></span> <span data-ttu-id="6f708-108">L’intermédiaire trouve la chaîne de configuration nécessaire en appelant [**ICertConfig :: GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span><span class="sxs-lookup"><span data-stu-id="6f708-108">The intermediary finds the needed configuration string by calling [**ICertConfig::GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span></span>
3.  <span data-ttu-id="6f708-109">Le client appelle l’intermédiaire via une interface spécifique à l’intermédiaire (se produit une fois par demande).</span><span class="sxs-lookup"><span data-stu-id="6f708-109">Client calls the intermediary through an interface specific to the intermediary (happens once per request).</span></span> <span data-ttu-id="6f708-110">Le client envoie une [*demande de certificat*](../secgloss/c-gly.md) à l’intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="6f708-110">The client sends a [*certificate request*](../secgloss/c-gly.md) to the intermediary.</span></span> <span data-ttu-id="6f708-111">Il peut s’agir, par exemple, de Microsoft Internet Explorer qui envoie une demande par le biais du [contrôle d’inscription de certificats](certificate-enrollment-control.md) à Microsoft Internet Information Services.</span><span class="sxs-lookup"><span data-stu-id="6f708-111">This can be, for example, Microsoft Internet Explorer sending a request through [Certificate Enrollment Control](certificate-enrollment-control.md) to Microsoft Internet Information Services.</span></span>
4.  <span data-ttu-id="6f708-112">Intermédiaire vers CA via [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (se produit une fois par demande).</span><span class="sxs-lookup"><span data-stu-id="6f708-112">Intermediary to CA through [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (happens once per request).</span></span> <span data-ttu-id="6f708-113">L’intermédiaire envoie la demande de certificat à l’autorité de certification via [**ICertRequest :: Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span><span class="sxs-lookup"><span data-stu-id="6f708-113">The intermediary sends the certificate request to the CA through [**ICertRequest::Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span></span> <span data-ttu-id="6f708-114">Dans le cas de Internet Information Services, cela peut être effectué par le biais de scripts Active Server pages.</span><span class="sxs-lookup"><span data-stu-id="6f708-114">In the case of Internet Information Services, this could be done through Active Server Pages scripts.</span></span>
5.  <span data-ttu-id="6f708-115">L’autorité de certification appelle le module de stratégie par le biais de l’interface [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) (se produit une fois par demande).</span><span class="sxs-lookup"><span data-stu-id="6f708-115">The CA calls the Policy Module through the [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) interface (happens once per request).</span></span> <span data-ttu-id="6f708-116">L’autorité de certification informe le module de stratégie qu’une demande est arrivée en appelant [**ICertPolicy :: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span><span class="sxs-lookup"><span data-stu-id="6f708-116">The CA notifies the policy module that a request has arrived by calling [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span></span> <span data-ttu-id="6f708-117">Le module de stratégie peut examiner la demande et modifier le certificat en appelant les méthodes de l’interface [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) .</span><span class="sxs-lookup"><span data-stu-id="6f708-117">The policy module can examine the request and change the certificate by calling methods of the [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interface.</span></span> <span data-ttu-id="6f708-118">Le module de stratégie peut alors indiquer que la demande est correcte (dans ce cas, le certificat est généré à ce stade), que la demande doit être refusée ou que la demande doit être suspendue.</span><span class="sxs-lookup"><span data-stu-id="6f708-118">The policy module can then indicate that the request is OK (if so, the certificate is built at this point), the request is to be denied, or the request should be suspended.</span></span>
6.  <span data-ttu-id="6f708-119">Facultatif L’administrateur appelle l’autorité de certification par le biais de l’interface [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) .</span><span class="sxs-lookup"><span data-stu-id="6f708-119">(Optional) Administrator calls the CA through the [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) interface.</span></span> <span data-ttu-id="6f708-120">Si la demande est suspendue, l’administrateur peut renvoyer ou refuser la demande, ou modifier les attributs et les extensions de demande.</span><span class="sxs-lookup"><span data-stu-id="6f708-120">If the request is suspended, the administrator can resubmit or deny the request, or modify request attributes and extensions.</span></span> <span data-ttu-id="6f708-121">Notez que si la demande est renvoyée, le module de stratégie aura une autre possibilité de traiter la demande (à la suite d’un appel à [**ICertPolicy :: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span><span class="sxs-lookup"><span data-stu-id="6f708-121">Note that if the request is resubmitted, the Policy Module will have another opportunity to process the request (as a result of a call to [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span></span> <span data-ttu-id="6f708-122">La tâche consistant à renvoyer ou refuser la demande peut être effectuée au moyen du composant logiciel enfichable MMC de l’autorité de certification ou d’une autre application qui utilise **ICertAdmin**.</span><span class="sxs-lookup"><span data-stu-id="6f708-122">The task of resubmitting or denying the request can be performed by means of the Certification Authority MMC snap-in, or another application that uses **ICertAdmin**.</span></span>
7.  <span data-ttu-id="6f708-123">L’autorité de certification appelle le module de sortie par le biais de l’interface [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) .</span><span class="sxs-lookup"><span data-stu-id="6f708-123">The CA calls the exit module through the [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) interface.</span></span> <span data-ttu-id="6f708-124">Si le module de sortie a indiqué (quand [**ICertExit :: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) a été appelé, à l’étape 1) qu’il souhaite voir les certificats émis ou les demandes maintenues en attente, l’autorité de certification appellera [**ICertExit :: Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span><span class="sxs-lookup"><span data-stu-id="6f708-124">If the exit module has indicated (when [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) was called, in step 1) that it is interested in seeing certificates issued or requests held pending, the CA will call [**ICertExit::Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span></span>
8.  <span data-ttu-id="6f708-125">Le module de sortie appelle l’autorité de certification par le biais de l’interface [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) .</span><span class="sxs-lookup"><span data-stu-id="6f708-125">The exit module calls the CA through the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) interface.</span></span> <span data-ttu-id="6f708-126">Le module de sortie peut examiner la demande et le nouveau certificat en appelant les méthodes de **ICertServerExit**.</span><span class="sxs-lookup"><span data-stu-id="6f708-126">The exit module can examine the request and the new certificate by calling methods of **ICertServerExit**.</span></span>

 

 
