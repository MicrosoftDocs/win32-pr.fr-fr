---
description: Utilisé pour représenter les entrées de Registre qui contrôlent la mise en cache de clé privée par les fournisseurs de services de chiffrement logiciels Microsoft.
ms.assetid: 67909072-72fe-4777-ae52-a7b9047c9dd5
title: Constantes de mise en cache de clé privée (Wincrypt. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6afa1394b33f4e36e31934e813b7c9fc41814e28
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103869006"
---
# <a name="private-key-caching-constants"></a><span data-ttu-id="36107-103">Constantes de mise en cache de clés privées</span><span class="sxs-lookup"><span data-stu-id="36107-103">Private Key Caching Constants</span></span>

<span data-ttu-id="36107-104">Les constantes suivantes sont utilisées pour représenter les entrées de Registre qui contrôlent la mise en cache des [*clés privées*](../secgloss/p-gly.md) par les fournisseurs de services de chiffrement logiciels Microsoft.</span><span class="sxs-lookup"><span data-stu-id="36107-104">The following constants are used to represent registry entries that control [*private key*](../secgloss/p-gly.md) caching by Microsoft software-based CSPs.</span></span>



| <span data-ttu-id="36107-105">Constante/valeur</span><span class="sxs-lookup"><span data-stu-id="36107-105">Constant/value</span></span>                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="36107-106">Description</span><span class="sxs-lookup"><span data-stu-id="36107-106">Description</span></span>                                                                                                |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------|
| <span id="szKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><span id="szkey_cryptoapi_private_key_options"></span><span id="SZKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><dl> <span data-ttu-id="36107-107"><dt>**szKEY \_ \_Options de \_ clé \_ privée CryptoAPI**</dt> <dt>« stratégies logicielles de \\ \\ \\ \\ \\ \\ chiffrement Microsoft »</dt></span><span class="sxs-lookup"><span data-stu-id="36107-107"><dt>**szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS**</dt> <dt>"Software\\\\Policies\\\\Microsoft\\\\Cryptography"</dt></span></span> </dl> | <span data-ttu-id="36107-108">Chemin d’accès, sous la racine **HKEY \_ local \_ machine** , des entrées de registre de la mise en cache de clés privées.</span><span class="sxs-lookup"><span data-stu-id="36107-108">The path, under the **HKEY\_LOCAL\_MACHINE** root, of the private key caching registry entries.</span></span><br/> |



<span data-ttu-id="36107-109">Les constantes suivantes sont utilisées pour identifier les valeurs de Registre qui contrôlent globalement la mise en cache des clés privées pour un processus spécifique par les fournisseurs de services de chiffrement logiciels Microsoft.</span><span class="sxs-lookup"><span data-stu-id="36107-109">The following constants are used to identify registry values that control private key caching globally for a specific process by Microsoft software-based CSPs.</span></span>



| <span data-ttu-id="36107-110">Constante/valeur</span><span class="sxs-lookup"><span data-stu-id="36107-110">Constant/value</span></span>                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="36107-111">Description</span><span class="sxs-lookup"><span data-stu-id="36107-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="szPRIV_KEY_CACHE_MAX_ITEMS"></span><span id="szpriv_key_cache_max_items"></span><span id="SZPRIV_KEY_CACHE_MAX_ITEMS"></span><dl> <span data-ttu-id="36107-112"><dt>**szPRIV \_ \_ \_ Nombre maximal d' \_ éléments de cache de clé**</dt> <dt>« PrivKeyCacheMaxItems »</dt></span><span class="sxs-lookup"><span data-stu-id="36107-112"><dt>**szPRIV\_KEY\_CACHE\_MAX\_ITEMS**</dt> <dt>"PrivKeyCacheMaxItems"</dt></span></span> </dl>                                                                  | <span data-ttu-id="36107-113">Valeur **reg \_ DWORD** sous la clé de Registre **szKEY \_ CryptoAPI \_ Private \_ Key \_ options** qui spécifie le nombre maximal de clés privées qui peuvent être mises en cache en une seule fois pour un seul processus.</span><span class="sxs-lookup"><span data-stu-id="36107-113">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum number of private keys that can be cached at one time for a single process.</span></span> <span data-ttu-id="36107-114">Cette vérification est effectuée chaque fois qu’une clé privée stockée est lue.</span><span class="sxs-lookup"><span data-stu-id="36107-114">This check is performed whenever a stored private key is read.</span></span> <span data-ttu-id="36107-115">Si le nombre maximal est dépassé, la clé la moins utilisée récemment est supprimée du cache.</span><span class="sxs-lookup"><span data-stu-id="36107-115">If the maximum number is exceeded, the least recently used key is removed from the cache.</span></span><br/> <span data-ttu-id="36107-116">Si cette valeur est égale à zéro, aucune clé n’est mise en cache.</span><span class="sxs-lookup"><span data-stu-id="36107-116">If this value is zero, no keys are cached.</span></span> <span data-ttu-id="36107-117">Si cette valeur n’est pas présente, la valeur par défaut de l’option **\_ \_ \_ nombre maximal d' \_ \_ éléments du cache de clé cPRIV** est utilisée par défaut.</span><span class="sxs-lookup"><span data-stu-id="36107-117">If this value is not present, the **cPRIV\_KEY\_CACHE\_MAX\_ITEMS\_DEFAULT** value is used as the default.</span></span><br/> <span data-ttu-id="36107-118">Si une clé privée qui est supprimée du cache est actuellement référencée dans un contexte ouvert, la clé est lue à partir du stockage la prochaine fois qu’une tentative est effectuée pour utiliser la clé.</span><span class="sxs-lookup"><span data-stu-id="36107-118">If a private key that is deleted from the cache is currently referenced in an open context, then the key is read from storage the next time an attempt is made to use the key.</span></span><br/> <span data-ttu-id="36107-119">**Windows Server 2003 et Windows XP avec SP1 et versions antérieures :** Cette valeur de Registre n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="36107-119">**Windows Server 2003 and Windows XP with SP1 and earlier:** This registry value is not supported.</span></span><br/>                                  |
| <span id="cPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><span id="cpriv_key_cache_max_items_default"></span><span id="CPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><dl> <span data-ttu-id="36107-120"><dt>**cPRIV \_ \_ \_ Nombre maximal d' \_ éléments \_ par défaut du cache de clés**</dt> <dt>20</dt></span><span class="sxs-lookup"><span data-stu-id="36107-120"><dt>**cPRIV\_KEY\_CACHE\_MAX\_ITEMS\_DEFAULT**</dt> <dt>20</dt></span></span> </dl>                                                         | <span data-ttu-id="36107-121">Valeur par défaut de l’entrée de Registre **szPRIV \_ Key \_ cache \_ Max \_ Items** si aucune valeur n’est spécifiée.</span><span class="sxs-lookup"><span data-stu-id="36107-121">The default value of the **szPRIV\_KEY\_CACHE\_MAX\_ITEMS** registry entry if no value is specified.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span id="szPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><span id="szpriv_key_cache_purge_interval_seconds"></span><span id="SZPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><dl> <span data-ttu-id="36107-122"><dt>**szPRIV \_ \_Intervalle de purge du cache de clés en \_ \_ \_ secondes**</dt> <dt>« PrivKeyCachePurgeIntervalSeconds »</dt></span><span class="sxs-lookup"><span data-stu-id="36107-122"><dt>**szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS**</dt> <dt>"PrivKeyCachePurgeIntervalSeconds"</dt></span></span> </dl> | <span data-ttu-id="36107-123">Valeur **reg \_ DWORD** sous la clé de Registre **szKEY \_ CryptoAPI \_ Private \_ Key \_ options** qui spécifie l’âge maximal, en secondes, de n’importe quelle clé privée mise en cache.</span><span class="sxs-lookup"><span data-stu-id="36107-123">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum age, in seconds, of any cached private key.</span></span> <span data-ttu-id="36107-124">Cette vérification est effectuée chaque fois qu’une clé privée stockée est utilisée ou lue.</span><span class="sxs-lookup"><span data-stu-id="36107-124">This check is performed whenever a stored private key is used or read.</span></span> <span data-ttu-id="36107-125">Si ce laps de temps s’est écoulé depuis la dernière suppression, toutes les clés mises en cache qui n’ont pas été référencées depuis la dernière suppression sont supprimées du cache.</span><span class="sxs-lookup"><span data-stu-id="36107-125">If this amount of time has elapsed since the last clearing occurred, all cached keys that have not been referenced since the last clearing will be removed from the cache.</span></span><br/> <span data-ttu-id="36107-126">Si cette valeur n’est pas présente, la valeur **\_ \_ \_ \_ \_ \_ par défaut de l’intervalle de purge du cache de clé cPRIV** est utilisée comme valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="36107-126">If this value is not present, the **cPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS\_DEFAULT** value is used as the default.</span></span><br/> <span data-ttu-id="36107-127">Si une clé privée qui est effacée du cache est actuellement référencée dans un contexte ouvert, la clé est lue à partir du stockage la prochaine fois qu’une tentative est effectuée pour utiliser la clé.</span><span class="sxs-lookup"><span data-stu-id="36107-127">If a private key that is cleared from the cache is currently referenced in an open context, then the key will be read from storage the next time an attempt is made to use the key.</span></span><br/> <span data-ttu-id="36107-128">**Windows Server 2003 et Windows XP avec SP1 et versions antérieures :** Cette valeur de Registre n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="36107-128">**Windows Server 2003 and Windows XP with SP1 and earlier:** This registry value is not supported.</span></span><br/> |
| <span id="cPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><span id="cpriv_key_cache_purge_interval_seconds_default"></span><span id="CPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><dl> <span data-ttu-id="36107-129"><dt>**cPRIV \_ \_Intervalle de purge du cache de clés en \_ \_ \_ secondes \_ par défaut**</dt> <dt>86400</dt></span><span class="sxs-lookup"><span data-stu-id="36107-129"><dt>**cPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS\_DEFAULT**</dt> <dt>86400</dt></span></span> </dl> | <span data-ttu-id="36107-130">La valeur par défaut de l’entrée de Registre **szPRIV \_ Key \_ cache \_ intervalle de purge des \_ \_ secondes** si aucune valeur n’est spécifiée.</span><span class="sxs-lookup"><span data-stu-id="36107-130">The default value of the **szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS** registry entry if no value is specified.</span></span> <span data-ttu-id="36107-131">Cette valeur est équivalente à un jour.</span><span class="sxs-lookup"><span data-stu-id="36107-131">This value is equivalent to one day.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



<span data-ttu-id="36107-132">Les constantes suivantes sont utilisées pour identifier les valeurs de Registre qui contrôlent la mise en cache des clés privées pour une seule instance du [*fournisseur de services de chiffrement*](../secgloss/c-gly.md) (CSP) basée sur des logiciels Microsoft.</span><span class="sxs-lookup"><span data-stu-id="36107-132">The following constants are used to identify registry values that control private key caching for a single Microsoft software-based [*cryptographic service provider*](../secgloss/c-gly.md) (CSP) instance.</span></span>



| <span data-ttu-id="36107-133">Constante/valeur</span><span class="sxs-lookup"><span data-stu-id="36107-133">Constant/value</span></span>                                                                                                                                                                                                                                                                                          | <span data-ttu-id="36107-134">Description</span><span class="sxs-lookup"><span data-stu-id="36107-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <span data-ttu-id="36107-135"><dt></dt><dt>« AllowCachePW »</dt></span><span class="sxs-lookup"><span data-stu-id="36107-135"><dt></dt> <dt>"AllowCachePW"</dt></span></span> </dl>                                                                                                                                                         | <span data-ttu-id="36107-136">Valeur **reg \_ DWORD** sous la clé de Registre **HKEY \_ local \_ machine \\ Software \\ Policies \\ Microsoft \\ Cryptography \\ Protect** , qui spécifie si la mise en cache de mot de passe est activée pour les clés protégées par mot de passe dans les fournisseurs de services de chiffrement logiciels Microsoft.</span><span class="sxs-lookup"><span data-stu-id="36107-136">A **REG\_DWORD** value under the **HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Cryptography\\Protect** registry key that specifies whether password caching is enabled for password-protected keys in the Microsoft software-based CSPs.</span></span> <span data-ttu-id="36107-137">Si cette valeur est égale à 0, la mise en cache du mot de passe est désintégrée et l’utilisateur est invité à entrer le mot de passe chaque fois qu’une clé protégée par mot de passe est utilisée.</span><span class="sxs-lookup"><span data-stu-id="36107-137">If this value is 0, then password caching is disabeld and the user is prompted for the password every time a password-protected key is used.</span></span> <span data-ttu-id="36107-138">Toute autre valeur, ou l’absence de cette valeur, indique que le mot de passe sera mis en cache.</span><span class="sxs-lookup"><span data-stu-id="36107-138">Any other value, or the absence of this value, indicates that the password will be cached.</span></span> <span data-ttu-id="36107-139">Dans ce scénario, l’utilisateur n’est invité qu’une seule fois par processus pour chaque clé.</span><span class="sxs-lookup"><span data-stu-id="36107-139">In this scenario, the user is only prompted once per process for each such key.</span></span> <br/> |
| <span id="szKEY_CACHE_ENABLED"></span><span id="szkey_cache_enabled"></span><span id="SZKEY_CACHE_ENABLED"></span><dl> <span data-ttu-id="36107-140"><dt>**szKEY \_ CACHE \_ activé**</dt> <dt>« CachePrivateKeys »</dt></span><span class="sxs-lookup"><span data-stu-id="36107-140"><dt>**szKEY\_CACHE\_ENABLED**</dt> <dt>"CachePrivateKeys"</dt></span></span> </dl>          | <span data-ttu-id="36107-141">Valeur **reg \_ DWORD** sous la clé de Registre **szKEY \_ CryptoAPI \_ Private \_ Key \_ options** qui spécifie si la mise en cache de la clé privée est activée.</span><span class="sxs-lookup"><span data-stu-id="36107-141">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies whether private key caching is enabled.</span></span> <span data-ttu-id="36107-142">Si cette valeur est 1, la mise en cache de la clé privée est activée.</span><span class="sxs-lookup"><span data-stu-id="36107-142">If this value is 1, then private key caching is enabled.</span></span> <span data-ttu-id="36107-143">Toute autre valeur, ou l’absence de cette valeur, indique que la mise en cache de la clé privée est désactivée.</span><span class="sxs-lookup"><span data-stu-id="36107-143">Any other value, or the absence of this value, indicates that private key caching is disabled.</span></span><br/> <span data-ttu-id="36107-144">**Windows Vista avec SP1, Windows Vista et Windows XP :** Cette valeur de Registre n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="36107-144">**Windows Vista with SP1, Windows Vista and Windows XP:** This registry value is not supported.</span></span><br/>                                                                                                                                                        |
| <span id="szKEY_CACHE_SECONDS"></span><span id="szkey_cache_seconds"></span><span id="SZKEY_CACHE_SECONDS"></span><dl> <span data-ttu-id="36107-145"><dt>**szKEY \_ \_Secondes du cache**</dt> <dt>« PrivateKeyLifetimeSeconds »</dt></span><span class="sxs-lookup"><span data-stu-id="36107-145"><dt>**szKEY\_CACHE\_SECONDS**</dt> <dt>"PrivateKeyLifetimeSeconds"</dt></span></span> </dl> | <span data-ttu-id="36107-146">Valeur **reg \_ DWORD** sous la clé de Registre **szKEY \_ CryptoAPI \_ Private \_ Key \_ options** qui spécifie l’âge maximal, en secondes, de n’importe quelle clé privée mise en cache.</span><span class="sxs-lookup"><span data-stu-id="36107-146">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum age, in seconds, of any cached private key.</span></span><br/> <span data-ttu-id="36107-147">**Windows XP :** Cette valeur de Registre n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="36107-147">**Windows XP:** This registry value is not supported.</span></span><br/>                                                                                                                                                                                                                                                                                                                                          |



## <a name="remarks"></a><span data-ttu-id="36107-148">Notes</span><span class="sxs-lookup"><span data-stu-id="36107-148">Remarks</span></span>

<span data-ttu-id="36107-149">Les différences entre les **\_ \_ secondes du cache szKEY** et les valeurs de l' **\_ \_ \_ \_ intervalle de \_ purge du cache de clé szPRIV** sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="36107-149">The differences between the **szKEY\_CACHE\_SECONDS** and the **szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS** values are as follows:</span></span>

 <span data-ttu-id="36107-150">**\_secondes du cache szKEY \_**</span><span class="sxs-lookup"><span data-stu-id="36107-150">**szKEY\_CACHE\_SECONDS**</span></span>  

-   <span data-ttu-id="36107-151">Cette valeur s’applique uniquement à un CSP spécifique.</span><span class="sxs-lookup"><span data-stu-id="36107-151">This value only applies to a specific CSP.</span></span> <span data-ttu-id="36107-152">Une fois le CSP libéré, le cache du CSP est également libéré.</span><span class="sxs-lookup"><span data-stu-id="36107-152">After the CSP is released, the CSP's cache is released as well.</span></span>  
-   <span data-ttu-id="36107-153">Cette valeur est appliquée uniquement lorsqu’une tentative d’utilisation d’une clé privée spécifique avec un handle de contexte spécifique est effectuée.</span><span class="sxs-lookup"><span data-stu-id="36107-153">This value is only applied when an attempt is made to use a specific private key with a specific context handle.</span></span>  

<span data-ttu-id="36107-154">**\_intervalle de \_ purge du cache de clé szPRIV en \_ \_ \_ secondes**</span><span class="sxs-lookup"><span data-stu-id="36107-154">**szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS**</span></span>  

-   <span data-ttu-id="36107-155">Cette valeur s’applique à tous les fournisseurs de services de chiffrement d’un processus.</span><span class="sxs-lookup"><span data-stu-id="36107-155">This value applies to all CSPs in a process.</span></span> <span data-ttu-id="36107-156">Même si le CSP est publié, ce cache n’est pas libéré.</span><span class="sxs-lookup"><span data-stu-id="36107-156">Even if the CSP is released, this cache is not released.</span></span>  
-   <span data-ttu-id="36107-157">Cette valeur s’applique chaque fois qu’une clé privée stockée est utilisée ou lue à partir du stockage dans un seul processus.</span><span class="sxs-lookup"><span data-stu-id="36107-157">This value applies whenever any stored private key is used or read from storage in a single process.</span></span>  



## <a name="requirements"></a><span data-ttu-id="36107-158">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="36107-158">Requirements</span></span>



| <span data-ttu-id="36107-159">Condition requise</span><span class="sxs-lookup"><span data-stu-id="36107-159">Requirement</span></span> | <span data-ttu-id="36107-160">Valeur</span><span class="sxs-lookup"><span data-stu-id="36107-160">Value</span></span> |
|-------------------------------------|---------------------------------------------------------------------------------------|
| <span data-ttu-id="36107-161">Client minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="36107-161">Minimum supported client</span></span><br/> | <span data-ttu-id="36107-162">Applications de \[ Bureau Windows XP uniquement\]</span><span class="sxs-lookup"><span data-stu-id="36107-162">Windows XP \[desktop apps only\]</span></span><br/>                                           |
| <span data-ttu-id="36107-163">Serveur minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="36107-163">Minimum supported server</span></span><br/> | <span data-ttu-id="36107-164">Applications de bureau Windows Server 2003 \[ uniquement\]</span><span class="sxs-lookup"><span data-stu-id="36107-164">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                  |
| <span data-ttu-id="36107-165">En-tête</span><span class="sxs-lookup"><span data-stu-id="36107-165">Header</span></span><br/>                   | <dl> <span data-ttu-id="36107-166"><dt>Wincrypt. h</dt></span><span class="sxs-lookup"><span data-stu-id="36107-166"><dt>Wincrypt.h</dt></span></span> </dl> |



 

 
