---
title: Informations sur la plage de travail
description: La plage de travail d’un processus correspond à la quantité de mémoire physiquement mappée à son contexte de processus. PSAPI vous permet de prendre des instantanés de la plage de travail ou de surveiller la plage de travail.
ms.assetid: 33c42f79-cc77-4d44-84c3-8bf0a4a60019
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b56e1e4dc0a68a9d4507a94ad1f5356432f8488a
ms.sourcegitcommit: b01ad017c152c6756f3638623fe335877644d414
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/06/2021
ms.locfileid: "111549861"
---
# <a name="working-set-information"></a><span data-ttu-id="c2553-104">Informations sur la plage de travail</span><span class="sxs-lookup"><span data-stu-id="c2553-104">Working Set Information</span></span>

<span data-ttu-id="c2553-105">La plage de travail d’un processus correspond à la quantité de mémoire physiquement mappée à son contexte de processus.</span><span class="sxs-lookup"><span data-stu-id="c2553-105">The working set of a process is the amount of memory physically mapped to its process context.</span></span> <span data-ttu-id="c2553-106">PSAPI vous permet de prendre des instantanés de la plage de travail ou de surveiller la plage de travail.</span><span class="sxs-lookup"><span data-stu-id="c2553-106">PSAPI enables you to take snapshots of the working set or to monitor the working set.</span></span>

<span data-ttu-id="c2553-107">La fonction [**QueryWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-queryworkingset) ou [**QueryWorkingSetEx**](/windows/desktop/api/Psapi/nf-psapi-queryworkingsetex) remplit une mémoire tampon avec un instantané des informations pour chaque page de la plage de travail actuelle du processus spécifié.</span><span class="sxs-lookup"><span data-stu-id="c2553-107">The [**QueryWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-queryworkingset) or [**QueryWorkingSetEx**](/windows/desktop/api/Psapi/nf-psapi-queryworkingsetex) function fills a buffer with a snapshot of the information for every page in the current working set of the specified process.</span></span> <span data-ttu-id="c2553-108">La fonction signale uniquement les pages qui sont physiquement présentes à l’heure exacte à laquelle elles sont appelées.</span><span class="sxs-lookup"><span data-stu-id="c2553-108">The function reports only those pages that are physically present at the exact moment it is called.</span></span>

<span data-ttu-id="c2553-109">Vous pouvez utiliser la surveillance de la plage de travail pour déterminer la quantité de RAM supplémentaire que prend une opération particulière (par exemple, l’enregistrement d’un fichier).</span><span class="sxs-lookup"><span data-stu-id="c2553-109">You can use working set monitoring to find out how much additional RAM a particular operation takes (for example, saving a file).</span></span> <span data-ttu-id="c2553-110">Pour commencer l’analyse de la plage de travail, appelez la fonction [**InitializeProcessForWsWatch**](/windows/desktop/api/Psapi/nf-psapi-initializeprocessforwswatch) .</span><span class="sxs-lookup"><span data-stu-id="c2553-110">To begin monitoring the working set, call the [**InitializeProcessForWsWatch**](/windows/desktop/api/Psapi/nf-psapi-initializeprocessforwswatch) function.</span></span> <span data-ttu-id="c2553-111">Tous les processus ne vous permettent pas de lire leurs informations de jeu de travail. par conséquent, assurez-vous que la fonction retourne une valeur différente de zéro avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="c2553-111">Not all processes let you read their working set information, so be sure that the function returns a nonzero value before you continue.</span></span> <span data-ttu-id="c2553-112">Ensuite, appelez la fonction [**GetWsChanges**](/windows/desktop/api/Psapi/nf-psapi-getwschanges) .</span><span class="sxs-lookup"><span data-stu-id="c2553-112">Next, call the [**GetWsChanges**](/windows/desktop/api/Psapi/nf-psapi-getwschanges) function.</span></span> <span data-ttu-id="c2553-113">Cette fonction signale uniquement les pages qui ont été chargées en mémoire depuis que vous avez commencé à surveiller la plage de travail.</span><span class="sxs-lookup"><span data-stu-id="c2553-113">This function reports only the pages that have been loaded in memory since you began monitoring the working set.</span></span> <span data-ttu-id="c2553-114">La fonction retourne des données dans un tableau de structures d’informations de la vue de gestion de données ( [**PSAPI) \_ WSI \_ \_**](/windows/desktop/api/Psapi/ns-psapi-psapi_ws_watch_information) , une structure pour chaque nouvelle page ajoutée à la plage de travail du processus.</span><span class="sxs-lookup"><span data-stu-id="c2553-114">The function returns data in an array of [**PSAPI\_WS\_WATCH\_INFORMATION**](/windows/desktop/api/Psapi/ns-psapi-psapi_ws_watch_information) structures, one structure for each new page added to the working set of the process.</span></span> <span data-ttu-id="c2553-115">La structure vous indique quelles pages sont en mémoire, et ce qui a provoqué la pagination du système.</span><span class="sxs-lookup"><span data-stu-id="c2553-115">The structure tells you which pages are in memory, and what caused the system to page them in.</span></span>

<span data-ttu-id="c2553-116">La fonction [**EmptyWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-emptyworkingset) prend un handle de processus.</span><span class="sxs-lookup"><span data-stu-id="c2553-116">The [**EmptyWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-emptyworkingset) function takes a process handle.</span></span> <span data-ttu-id="c2553-117">Elle supprime autant de pages que possible de la plage de travail du processus.</span><span class="sxs-lookup"><span data-stu-id="c2553-117">It removes as many pages as possible from the process working set.</span></span> <span data-ttu-id="c2553-118">Cette opération est principalement utile pour le test et le réglage.</span><span class="sxs-lookup"><span data-stu-id="c2553-118">This operation is useful primarily for testing and tuning.</span></span> <span data-ttu-id="c2553-119">Notez que la fonction [**SetProcessWorkingSetSize**](/windows/desktop/api/memoryapi/nf-memoryapi-setprocessworkingsetsize) effectue la même opération si vous la transmettez-1 pour les tailles minimale et maximale.</span><span class="sxs-lookup"><span data-stu-id="c2553-119">Note that the [**SetProcessWorkingSetSize**](/windows/desktop/api/memoryapi/nf-memoryapi-setprocessworkingsetsize) function does the same thing if you pass it -1 for the minimum and maximum sizes.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c2553-120">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c2553-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c2553-121">Plage de travail</span><span class="sxs-lookup"><span data-stu-id="c2553-121">Working Set</span></span>](/windows/desktop/Memory/working-set)
</dt> </dl>

 

 