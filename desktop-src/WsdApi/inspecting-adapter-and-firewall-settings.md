---
description: Un pare-feu mal configuré peut provoquer l’échec des applications WSD.
ms.assetid: eba61235-29b4-463a-b7c5-d34d3b39b095
title: Inspection des paramètres de l’adaptateur et du pare-feu
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 490909c9f3acdc3025e72350118f303bfdae73d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104318926"
---
# <a name="inspecting-adapter-and-firewall-settings"></a><span data-ttu-id="8fb0b-103">Inspection des paramètres de l’adaptateur et du pare-feu</span><span class="sxs-lookup"><span data-stu-id="8fb0b-103">Inspecting Adapter and Firewall Settings</span></span>

<span data-ttu-id="8fb0b-104">Un pare-feu mal configuré peut provoquer l’échec des applications WSD.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-104">A misconfigured firewall can cause WSD applications to fail.</span></span> <span data-ttu-id="8fb0b-105">Cette rubrique fournit des procédures de dépannage à utiliser lorsque les clients et hôtes WSD ne peuvent pas s’afficher mutuellement sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-105">This topic provides some troubleshooting procedures to use when WSD clients and hosts cannot see each other on the network.</span></span> <span data-ttu-id="8fb0b-106">Les paramètres de pare-feu doivent être inspectés avant d’utiliser une autre procédure de résolution des problèmes d’application.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-106">The firewall settings should be inspected before using any other application troubleshooting procedure.</span></span>

<span data-ttu-id="8fb0b-107">**Pour inspecter les paramètres de l’adaptateur et du pare-feu**</span><span class="sxs-lookup"><span data-stu-id="8fb0b-107">**To inspect the adapter and firewall settings**</span></span>

1.  <span data-ttu-id="8fb0b-108">Vérifiez que l’exception de **découverte du réseau** est activée.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-108">Verify that the **Network Discovery** exception is enabled.</span></span>
2.  <span data-ttu-id="8fb0b-109">Vérifiez qu’aucune règle de pare-feu propre à l’application ne bloque l’application.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-109">Check that there are no application-specific firewall rules blocking the application.</span></span>
3.  <span data-ttu-id="8fb0b-110">Activez explicitement les ports utilisés pour la découverte et l’échange de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-110">Explicitly enable the ports used for discovery and metadata exchange.</span></span>
4.  <span data-ttu-id="8fb0b-111">Désactivez le pare-feu et retestez l’application.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-111">Disable the firewall and retest the application.</span></span>
    > [!Note]  
    > <span data-ttu-id="8fb0b-112">Une fois cette étape terminée, le pare-feu doit être réactivé.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-112">The firewall should be re-enabled after completing this step.</span></span>

     

## <a name="verifying-that-the-network-discovery-exception-is-enabled"></a><span data-ttu-id="8fb0b-113">Vérification de l’activation de l’exception de découverte du réseau</span><span class="sxs-lookup"><span data-stu-id="8fb0b-113">Verifying that the Network Discovery exception is enabled</span></span>

<span data-ttu-id="8fb0b-114">Si des applications WS-Discovery sont en cours d’exécution, l’exception de pare-feu de **découverte du réseau** doit être autorisée.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-114">If any WS-Discovery applications are running, the **Network Discovery** firewall exception must be allowed.</span></span>

<span data-ttu-id="8fb0b-115">**Pour activer l’exception de pare-feu de découverte du réseau**</span><span class="sxs-lookup"><span data-stu-id="8fb0b-115">**To enable the Network Discovery firewall exception**</span></span>

1.  <span data-ttu-id="8fb0b-116">Cliquez sur **Démarrer**, sur **exécuter**, puis tapez **firewall.cpl**.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-116">Click **Start**, click **Run**, and then type **firewall.cpl**.</span></span> <span data-ttu-id="8fb0b-117">L’applet du **panneau de configuration du pare-feu Windows** s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-117">This opens the **Windows Firewall Control Panel** applet.</span></span>
2.  <span data-ttu-id="8fb0b-118">Choisissez **autoriser un programme via le pare-feu Windows**.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-118">Choose **Allow a program through Windows Firewall**.</span></span>
3.  <span data-ttu-id="8fb0b-119">Sous l’onglet **exceptions** , activez la case à cocher **découverte du réseau** .</span><span class="sxs-lookup"><span data-stu-id="8fb0b-119">On the **Exceptions** tab, select the **Network Discovery** check box.</span></span>
4.  <span data-ttu-id="8fb0b-120">Cliquez sur **OK** pour fermer l’applet de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-120">Click **OK** to close the firewall applet.</span></span>

<span data-ttu-id="8fb0b-121">Retestez le programme après avoir modifié ce pare-feu.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-121">Retest the program after making this firewall change.</span></span> <span data-ttu-id="8fb0b-122">Si le programme fonctionne correctement, la cause du problème a été identifiée et aucune étape de dépannage supplémentaire n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-122">If the program now works successfully, the cause of the problem has been identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="8fb0b-123">Dans le cas contraire, passez à l’étape suivante.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-123">Otherwise, move on to the next step.</span></span>

## <a name="checking-for-application-specific-firewall-rules"></a><span data-ttu-id="8fb0b-124">Recherche de règles de pare-feu spécifiques à l’application</span><span class="sxs-lookup"><span data-stu-id="8fb0b-124">Checking for application-specific firewall rules</span></span>

<span data-ttu-id="8fb0b-125">La configuration avancée du pare-feu Windows peut avoir lieu dans un composant logiciel enfichable MMC (Microsoft Management Control) nommé **pare-feu Windows avec fonctions avancées de sécurité**.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-125">Advanced configuration of the Windows Firewall can take place in a Microsoft Management Control (MMC) snap-in named **Windows Firewall with Advanced Security**.</span></span> <span data-ttu-id="8fb0b-126">Ce composant logiciel enfichable peut être utilisé pour résoudre les problèmes de pare-feu suspects.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-126">This snap-in can be used to troubleshoot suspected firewall problems.</span></span>

<span data-ttu-id="8fb0b-127">Les développeurs peuvent utiliser les API [pare-feu Windows avec fonctions avancées de sécurité](/previous-versions/windows/desktop/ics/windows-firewall-with-advanced-security-reference) pour créer des règles de pare-feu qui s’appliquent à leurs applications WSD.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-127">Developers can use the [Windows Firewall with Advanced Security](/previous-versions/windows/desktop/ics/windows-firewall-with-advanced-security-reference) APIs to create firewall rules that apply to their WSD applications.</span></span> <span data-ttu-id="8fb0b-128">Plus précisément, la méthode [**Add**](/previous-versions/windows/desktop/api/netfw/nf-netfw-inetfwrules-add) de l’interface [**INetFwRules**](/previous-versions/windows/desktop/api/netfw/nn-netfw-inetfwrules) peut être utilisée pour ajouter une nouvelle règle de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-128">Specifically, the [**Add**](/previous-versions/windows/desktop/api/netfw/nf-netfw-inetfwrules-add) method of the [**INetFwRules**](/previous-versions/windows/desktop/api/netfw/nn-netfw-inetfwrules) interface can be used to add a new firewall rule.</span></span> <span data-ttu-id="8fb0b-129">Si les règles de pare-feu sont créées de manière incorrecte, les clients et les hôtes peuvent ne pas être en mesure de s’afficher mutuellement sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-129">If firewall rules are created incorrectly, clients and hosts may not be able to see each other on the network.</span></span>

<span data-ttu-id="8fb0b-130">**Pour vérifier les règles de pare-feu spécifiques à l’application**</span><span class="sxs-lookup"><span data-stu-id="8fb0b-130">**To check for application-specific firewall rules**</span></span>

1.  <span data-ttu-id="8fb0b-131">Cliquez sur **Démarrer**, sur **exécuter**, puis tapez **WF. msc**.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-131">Click **Start**, click **Run**, and then type **wf.msc**.</span></span>
2.  <span data-ttu-id="8fb0b-132">Recherchez les règles spécifiques à l’application susceptibles de bloquer le trafic.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-132">Look for application-specific rules that may be blocking traffic.</span></span> <span data-ttu-id="8fb0b-133">Pour plus d’informations, consultez [pare-feu Windows avec fonctions avancées de sécurité-Diagnostics et outils de dépannage](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc722062(v=ws.10)?ocid=fwlink).</span><span class="sxs-lookup"><span data-stu-id="8fb0b-133">For more information, see [Windows Firewall with Advanced Security - Diagnostics and Troubleshooting Tools](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc722062(v=ws.10)?ocid=fwlink).</span></span>
3.  <span data-ttu-id="8fb0b-134">Supprimer les règles spécifiques à l’application.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-134">Remove application-specific rules.</span></span>

<span data-ttu-id="8fb0b-135">Si aucune règle spécifique à l’application n’a été trouvée, passez à l’étape suivante.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-135">If no application-specific rules were found, move on to the next step.</span></span> <span data-ttu-id="8fb0b-136">Si une règle spécifique à l’application a été trouvée et supprimée, retestez le programme après avoir modifié le pare-feu.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-136">If an application-specific rule was found and removed, retest the program after making the firewall change.</span></span> <span data-ttu-id="8fb0b-137">Si le programme fonctionne correctement, la cause du problème a été identifiée et aucune étape de dépannage supplémentaire n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-137">If the program now works successfully, the cause of the problem has been identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="8fb0b-138">Dans le cas contraire, passez à l’étape suivante.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-138">Otherwise, move on to the next step.</span></span>

## <a name="enabling-the-ports-used-for-discovery-and-metadata-exchange"></a><span data-ttu-id="8fb0b-139">Activation des ports utilisés pour la découverte et l’échange de métadonnées</span><span class="sxs-lookup"><span data-stu-id="8fb0b-139">Enabling the ports used for discovery and metadata exchange</span></span>

<span data-ttu-id="8fb0b-140">WS-Discovery utilise le port UDP 3702 pour l’échange de messages.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-140">WS-Discovery uses the UDP port 3702 for message exchange.</span></span> <span data-ttu-id="8fb0b-141">En outre, les ports TCP 5357 et 5358 sont parfois utilisés pour l’échange de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-141">In addition, TCP ports 5357 and 5358 are sometimes used for metadata exchange.</span></span> <span data-ttu-id="8fb0b-142">Ces ports peuvent être ouverts explicitement sur le pare-feu à l’aide des procédures décrites dans [ouvrir un port dans le pare-feu Windows](https://windowshelp.microsoft.com/Windows/Help/4da18300-9044-47b6-9038-595c78db81ab1033.mspx).</span><span class="sxs-lookup"><span data-stu-id="8fb0b-142">These ports can be explicitly opened on the firewall using the procedures described in [Open a port in Windows Firewall](https://windowshelp.microsoft.com/Windows/Help/4da18300-9044-47b6-9038-595c78db81ab1033.mspx).</span></span>

<span data-ttu-id="8fb0b-143">Retestez le programme après avoir modifié ce pare-feu.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-143">Retest the program after making this firewall change.</span></span> <span data-ttu-id="8fb0b-144">Si le programme fonctionne correctement, la cause du problème a été identifiée et aucune étape de dépannage supplémentaire n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-144">If the program now works successfully, the cause of the problem has been identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="8fb0b-145">Dans le cas contraire, passez à l’étape suivante.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-145">Otherwise, move on to the next step.</span></span>

## <a name="disabling-the-firewall"></a><span data-ttu-id="8fb0b-146">Désactivation du pare-feu</span><span class="sxs-lookup"><span data-stu-id="8fb0b-146">Disabling the firewall</span></span>

<span data-ttu-id="8fb0b-147">Le pare-feu Windows peut être désactivé pour aider à résoudre les problèmes suspects.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-147">The Windows Firewall can be disabled to help troubleshoot suspected problems.</span></span> <span data-ttu-id="8fb0b-148">D’autres pare-feu applicables (tels que le pare-feu sur un routeur) peuvent également être désactivés à des fins de dépannage.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-148">Other applicable firewalls (such as the firewall on a router) can also be disabled for troubleshooting purposes.</span></span> <span data-ttu-id="8fb0b-149">Pour plus d’informations sur l’activation et la désactivation du pare-feu Windows, consultez [activer ou désactiver le pare-feu Windows](https://windowshelp.microsoft.com/Windows/Help/bfe523a9-7eec-4d3f-add1-2f68b9cfa1c01033.mspx).</span><span class="sxs-lookup"><span data-stu-id="8fb0b-149">For information about enabling and disabling the Windows Firewall, see [Turn Windows Firewall on or off](https://windowshelp.microsoft.com/Windows/Help/bfe523a9-7eec-4d3f-add1-2f68b9cfa1c01033.mspx).</span></span>

<span data-ttu-id="8fb0b-150">Retestez l’application après avoir désactivé les pare-feu applicables.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-150">Retest the application after disabling any applicable firewalls.</span></span> <span data-ttu-id="8fb0b-151">Si le programme fonctionne maintenant correctement, le pare-feu bloque le trafic.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-151">If the program now works successfully, then the firewall was blocking the traffic.</span></span> <span data-ttu-id="8fb0b-152">Il existe plusieurs causes possibles de blocage du trafic.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-152">There are a few possible causes of blocked traffic.</span></span>

-   <span data-ttu-id="8fb0b-153">Les exceptions spécifiques à l’application ont bloqué le trafic.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-153">Application-specific exceptions blocked the traffic.</span></span> <span data-ttu-id="8fb0b-154">Vérifiez les règles de pare-feu spécifiques à l’application, comme décrit ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-154">Check for application-specific firewall rules as described above.</span></span>
-   <span data-ttu-id="8fb0b-155">L’appareil a mis trop de temps à répondre aux demandes UDP.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-155">The device took too long to respond to UDP requests.</span></span> <span data-ttu-id="8fb0b-156">Le pare-feu Windows peut bloquer les réponses UDP qui renvoient plus de 4 secondes après l’envoi de la demande initiale.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-156">The Windows Firewall may block UDP responses that return more than 4 seconds after the initial request was sent.</span></span> <span data-ttu-id="8fb0b-157">Poursuivez la résolution des problèmes en suivant les procédures indiquées dans [utilisation d’un hôte et d’un client génériques pour UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md) pour déterminer si le problème se reproduit avec un hôte qui répond en moins de 4 secondes.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-157">Continue troubleshooting by following the procedures given in [Using a Generic Host and Client for UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md) to see if the problem reproduces with a host that responds in less than 4 seconds.</span></span>

<span data-ttu-id="8fb0b-158">Si l’application échoue toujours après la désactivation du pare-feu, le pare-feu n’est pas à l’origine de l’échec de l’application.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-158">If the application still fails after the firewall is disabled, then the firewall is not causing the application failure.</span></span> <span data-ttu-id="8fb0b-159">Réactivez les pare-feu et poursuivez la résolution des problèmes en suivant les procédures indiquées dans [utilisation d’un hôte et d’un client génériques pour UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md).</span><span class="sxs-lookup"><span data-stu-id="8fb0b-159">Re-enable the firewalls and continue troubleshooting by following the procedures given in [Using a Generic Host and Client for UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md).</span></span>

<span data-ttu-id="8fb0b-160">Les pare-feu doivent toujours être réactivés une fois la résolution des problèmes terminée.</span><span class="sxs-lookup"><span data-stu-id="8fb0b-160">Firewalls should always be re-enabled after troubleshooting has finished.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8fb0b-161">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="8fb0b-161">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8fb0b-162">Procédures de diagnostic WSDAPI</span><span class="sxs-lookup"><span data-stu-id="8fb0b-162">WSDAPI Diagnostic Procedures</span></span>](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[<span data-ttu-id="8fb0b-163">Résolution des problèmes de Prise en main avec WSDAPI</span><span class="sxs-lookup"><span data-stu-id="8fb0b-163">Getting Started with WSDAPI Troubleshooting</span></span>](getting-started-with-wsdapi-troubleshooting.md)
</dt> </dl>

 

 
