---
description: N’importe quel analyseur de paquets réseau pouvant afficher des paquets bruts peut être utilisé pour inspecter les demandes d’échange de métadonnées HTTP. Moniteur réseau Microsoft 3 (NetMon) est recommandé. Pour plus d’informations sur NetMon, consultez le téléchargement de Netmon et des exemples de filtres DPWS.
ms.assetid: b3b6c4d1-5fa3-41fb-ae1d-067638e385b0
title: Inspection des suivis réseau pour l’échange de métadonnées HTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0c9993c542789b7f11eb35344dd6b0b03bfbafc3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104202267"
---
# <a name="inspecting-network-traces-for-http-metadata-exchange"></a><span data-ttu-id="ddc6b-105">Inspection des suivis réseau pour l’échange de métadonnées HTTP</span><span class="sxs-lookup"><span data-stu-id="ddc6b-105">Inspecting Network Traces for HTTP Metadata Exchange</span></span>

<span data-ttu-id="ddc6b-106">N’importe quel analyseur de paquets réseau pouvant afficher des paquets bruts peut être utilisé pour inspecter les demandes d’échange de métadonnées HTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-106">Any network packet analyzer that can display raw packets can be used to inspect HTTP metadata exchange requests.</span></span> <span data-ttu-id="ddc6b-107">Moniteur réseau Microsoft 3 (NetMon) est recommandé.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-107">Microsoft Network Monitor 3 (Netmon) is recommended.</span></span> <span data-ttu-id="ddc6b-108">Pour plus d’informations sur NetMon, consultez le [téléchargement de Netmon et des exemples de filtres DPWS](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="ddc6b-108">For more information about Netmon, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>

<span data-ttu-id="ddc6b-109">Cette procédure de diagnostic peut ne pas être aussi utile pour les clients et les hôtes utilisant un canal sécurisé pour les communications, car le contenu du message est chiffré.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-109">This diagnostic procedure may not be as useful for clients and hosts using a secure channel for communications because the message contents are encrypted.</span></span>

<span data-ttu-id="ddc6b-110">**Pour inspecter les traces réseau pour l’échange de métadonnées HTTP**</span><span class="sxs-lookup"><span data-stu-id="ddc6b-110">**To inspect network traces for HTTP metadata exchange**</span></span>

1.  <span data-ttu-id="ddc6b-111">Configurez l’hôte et le client pour qu’ils s’exécutent sur le réseau (autrement dit, assurez-vous que l’hôte et le client fonctionnent sur des ordinateurs différents).</span><span class="sxs-lookup"><span data-stu-id="ddc6b-111">Configure the host and client to run across the network (that is, make sure that the host and client will operate on different machines).</span></span>
2.  <span data-ttu-id="ddc6b-112">Installez l’analyseur de paquets (NetMon) sur le client ou l’hôte.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-112">Install the packet analyzer (Netmon) on either the client or the host.</span></span>
3.  <span data-ttu-id="ddc6b-113">Configurez l’analyseur de paquets pour capturer le trafic sur la carte réseau qui connecte l’ordinateur hôte et le client.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-113">Configure the packet analyzer to capture traffic on the network adapter connecting the host and the client.</span></span>
4.  <span data-ttu-id="ddc6b-114">Reproduisez l’erreur en démarrant l’hôte et le client ou en appuyant sur F5 dans l’Explorateur réseau.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-114">Reproduce the failure by starting the host and client or by pressing F5 in the Network Explorer.</span></span>
5.  <span data-ttu-id="ddc6b-115">Filtrez les résultats pour isoler les WS-Discovery et le trafic d’échange de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-115">Filter the results to isolate WS-Discovery and metadata exchange traffic.</span></span> <span data-ttu-id="ddc6b-116">Pour afficher des exemples de filtres NetMon, consultez le [téléchargement de Netmon et des exemples de filtres DPWS](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="ddc6b-116">To view sample Netmon filters, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>
    > [!Note]  
    > <span data-ttu-id="ddc6b-117">Cette étape est facultative.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-117">This step is optional.</span></span>

     

6.  <span data-ttu-id="ddc6b-118">Vérifiez que les messages envoyés entre le client et l’hôte répondent aux exigences de trafic de base.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-118">Verify that messages sent between client and host meet basic traffic requirements.</span></span>

## <a name="verifying-that-messages-meet-traffic-requirements"></a><span data-ttu-id="ddc6b-119">Vérification de la conformité des messages aux exigences du trafic</span><span class="sxs-lookup"><span data-stu-id="ddc6b-119">Verifying that messages meet traffic requirements</span></span>

<span data-ttu-id="ddc6b-120">Les clients et hôtes WSDAPI doivent envoyer des messages conformes aux critères suivants.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-120">WSDAPI clients and hosts must send messages that conform to the following criteria.</span></span> <span data-ttu-id="ddc6b-121">Pour obtenir des informations générales sur les modèles de message, consultez [modèles de message d’échange de métadonnées et de découverte](discovery-and-metadata-exchange-message-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="ddc6b-121">For general information about message patterns, see [Discovery and Metadata Exchange Message Patterns](discovery-and-metadata-exchange-message-patterns.md).</span></span>

-   <span data-ttu-id="ddc6b-122">Les messages doivent respecter les exigences de trafic fournies dans la rubrique [inspection des suivis réseau pour UDP WS-Discovery](inspecting-network-traces-for-udp-ws-discovery.md), à moins qu’il soit absolument certain que WS-Discovery n’est pas utilisé pour l’échange de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-122">Messages must meet the traffic requirements provided in the topic [Inspecting Network Traces for UDP WS-Discovery](inspecting-network-traces-for-udp-ws-discovery.md), unless it is absolutely certain that WS-Discovery is not being used for metadata exchange.</span></span>
-   <span data-ttu-id="ddc6b-123">Une connexion TCP doit être établie entre le client et la première adresse de transport fournie dans l’élément **XAddrs** d’un message [messages ProbeMatches](probematches-message.md) ou [ResolveMatches](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="ddc6b-123">A TCP connection must be established between the client and the first transport address provided in the **XAddrs** element of a [ProbeMatches](probematches-message.md) or [ResolveMatches](resolvematches-message.md) message.</span></span> <span data-ttu-id="ddc6b-124">La liste suivante montre un échange de paquets standard utilisé pour établir une connexion TCP.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-124">The following list shows a typical packet exchange used to establish a TCP connection.</span></span>
    -   <span data-ttu-id="ddc6b-125">Le client envoie un paquet TCP SYN à l’hôte sur un port spécifié.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-125">The client sends a TCP SYN packet to the host at a specified port.</span></span>
    -   <span data-ttu-id="ddc6b-126">L’hôte envoie un paquet TCP SYN/ACK au client.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-126">The host sends a TCP SYN/ACK packet to the client.</span></span>
    -   <span data-ttu-id="ddc6b-127">Le client envoie un paquet TCP ACK à l’hôte sur un port spécifié.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-127">The client sends a TCP ACK packet to the host at a specified port.</span></span>

    <span data-ttu-id="ddc6b-128">Une fois que le client a envoyé un paquet TCP ACK, la connexion TCP est établie.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-128">Once the client has sent a TCP ACK packet, the TCP connection is established.</span></span> <span data-ttu-id="ddc6b-129">Notez que cet échange de messages ne se produira pas si une connexion TCP a déjà été établie.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-129">Note that this message exchange will not occur if a TCP connection has previously been established.</span></span>
-   <span data-ttu-id="ddc6b-130">Le client doit envoyer une requête et un message http de [récupération](get--metadata-exchange--http-request-and-message.md) valides.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-130">The client must send a valid [Get](get--metadata-exchange--http-request-and-message.md) HTTP request and message.</span></span>
-   <span data-ttu-id="ddc6b-131">L’hôte doit être à l’écoute sur le chemin d’URL spécifié dans la requête HTTP [obtenir](get--metadata-exchange--http-request-and-message.md) .</span><span class="sxs-lookup"><span data-stu-id="ddc6b-131">The host must be listening on the URL path specified in the [Get](get--metadata-exchange--http-request-and-message.md) HTTP request.</span></span>
-   <span data-ttu-id="ddc6b-132">L’élément **to** d’un message d' [extraction](get--metadata-exchange--http-request-and-message.md) de métadonnées doit être présent et non vide.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-132">The **To** element of a [Get](get--metadata-exchange--http-request-and-message.md) metadata message must be present and not empty.</span></span> <span data-ttu-id="ddc6b-133">La valeur de l’élément **à** doit correspondre à l’une des adresses de point de terminaison de l’hôte.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-133">The value of the **To** element must match one of the host's endpoint addresses.</span></span> <span data-ttu-id="ddc6b-134">L’adresse de point de terminaison d’un hôte est généralement publiée dans un message [messages ProbeMatches](probematches-message.md) ou [ResolveMatches](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="ddc6b-134">A host's endpoint address is typically advertised in a [ProbeMatches](probematches-message.md) or [ResolveMatches](resolvematches-message.md) message.</span></span>
-   <span data-ttu-id="ddc6b-135">L’hôte doit envoyer un en-tête de réponse HTTP valide.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-135">The host must send a valid HTTP response header.</span></span> <span data-ttu-id="ddc6b-136">Si la demande initiale a réussi, l’en-tête de réponse doit contenir le code d’état HTTP/1.1 200.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-136">If the initial request was successful, the response header should contain the HTTP/1.1 200 status code.</span></span>
-   <span data-ttu-id="ddc6b-137">L’hôte doit envoyer un message [GetResponse](getresponse--metadata-exchange--message.md) valide.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-137">The host must send a valid [GetResponse](getresponse--metadata-exchange--message.md) message.</span></span>
-   <span data-ttu-id="ddc6b-138">L’élément **latesto** d’un message [GetResponse](getresponse--metadata-exchange--message.md) doit être présent et ne doit pas être vide.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-138">The **RelatesTo** element of a [GetResponse](getresponse--metadata-exchange--message.md) message must be present and must not be empty.</span></span> <span data-ttu-id="ddc6b-139">Sa valeur doit correspondre à la valeur de l’élément **MessageID** à partir du message d' [extraction](get--metadata-exchange--http-request-and-message.md) correspondant.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-139">Its value must match the value of the **MessageId** element from the corresponding [Get](get--metadata-exchange--http-request-and-message.md) message.</span></span>

<span data-ttu-id="ddc6b-140">Si les requêtes HTTP ou les messages d’échange de métadonnées envoyés par le programme ne sont pas conformes à ces exigences de trafic, la cause du problème a été correctement identifiée et aucune étape de dépannage supplémentaire n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-140">If the HTTP requests or metadata exchange messages sent by the program do not conform to these traffic requirements, the cause of the problem has been successfully identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="ddc6b-141">Réécrivez le programme afin qu’il génère des messages et des demandes conformes et retestez le programme.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-141">Rewrite the program so that it generates conformant messages and requests and retest the program.</span></span>

<span data-ttu-id="ddc6b-142">Si la source du problème ne peut toujours pas être identifiée, contactez le support technique de Microsoft pour obtenir de l’aide.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-142">If the source of the problem still cannot be identified, contact Microsoft support for assistance.</span></span> <span data-ttu-id="ddc6b-143">Avant de contacter le support technique, collectez les fichiers journaux appropriés afin d’identifier la cause racine du problème.</span><span class="sxs-lookup"><span data-stu-id="ddc6b-143">Before contacting support, collect the appropriate log files to help identify the root cause of the problem.</span></span> <span data-ttu-id="ddc6b-144">Pour plus d’informations, consultez [activation du suivi wsdapi](enabling-wsdapi-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="ddc6b-144">For more information, see [Enabling WSDAPI Tracing](enabling-wsdapi-tracing.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="ddc6b-145">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="ddc6b-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ddc6b-146">Procédures de diagnostic WSDAPI</span><span class="sxs-lookup"><span data-stu-id="ddc6b-146">WSDAPI Diagnostic Procedures</span></span>](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[<span data-ttu-id="ddc6b-147">Résolution des problèmes de Prise en main avec WSDAPI</span><span class="sxs-lookup"><span data-stu-id="ddc6b-147">Getting Started with WSDAPI Troubleshooting</span></span>](getting-started-with-wsdapi-troubleshooting.md)
</dt> <dt>

[<span data-ttu-id="ddc6b-148">Téléchargement de Netmon et des exemples de filtres DPWS</span><span class="sxs-lookup"><span data-stu-id="ddc6b-148">Downloading Netmon and Sample DPWS Filters</span></span>](downloading-netmon-and-sample-dpws-filters.md)
</dt> </dl>

 

 



