---
description: L’API WSDAPI (Web service on Devices) est une implémentation du profil de périphériques pour les services Web (DPWS) pour Windows Vista et Windows Server 2008.
ms.assetid: 8eaeacb3-43db-4a57-8548-e5b81213269c
title: À propos des services Web sur les appareils
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dca7f7dc97dabd3dde7af12f3cece992b4f0ef6d
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/12/2021
ms.locfileid: "103869401"
---
# <a name="about-web-services-on-devices"></a><span data-ttu-id="f0d42-103">À propos des services Web sur les appareils</span><span class="sxs-lookup"><span data-stu-id="f0d42-103">About Web Services on Devices</span></span>

<span data-ttu-id="f0d42-104">L’API WSDAPI (Web service on Devices) est une implémentation du [profil de périphériques pour les services Web](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) pour Windows Vista et windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="f0d42-104">Web Service on Devices API (WSDAPI) is an implementation of the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) for Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="f0d42-105">Le DPWS limite les spécifications de services Web afin que les clients puissent facilement découvrir des appareils.</span><span class="sxs-lookup"><span data-stu-id="f0d42-105">The DPWS constrains Web Services specifications so clients can easily discover devices.</span></span> <span data-ttu-id="f0d42-106">Une fois qu’un appareil est découvert, un client peut récupérer une description des services hébergés sur cet appareil et utiliser ces services.</span><span class="sxs-lookup"><span data-stu-id="f0d42-106">Once a device is discovered, a client can retrieve a description of services hosted on that device and use those services.</span></span>

## <a name="devices-and-services"></a><span data-ttu-id="f0d42-107">Appareils et services</span><span class="sxs-lookup"><span data-stu-id="f0d42-107">Devices and Services</span></span>

<span data-ttu-id="f0d42-108">Les *appareils* sont des composants, généralement des matériels, qui sont connectés au réseau.</span><span class="sxs-lookup"><span data-stu-id="f0d42-108">*Devices* are components, usually hardware, which are attached to the network.</span></span> <span data-ttu-id="f0d42-109">Les exemples incluent les imprimantes, les caméras Web et les systèmes vidéo.</span><span class="sxs-lookup"><span data-stu-id="f0d42-109">Examples include printers, Web cameras, and video systems.</span></span>

<span data-ttu-id="f0d42-110">Les appareils peuvent inclure zéro ou plusieurs *services*.</span><span class="sxs-lookup"><span data-stu-id="f0d42-110">Devices may include zero or more *services*.</span></span> <span data-ttu-id="f0d42-111">Par exemple, un périphérique vidéo peut inclure des services qui prennent en charge l’alimentation et la désactivation, le contrôle de lecture, l’éjection de support et la diffusion vidéo.</span><span class="sxs-lookup"><span data-stu-id="f0d42-111">For example, a video device may include services that support power on and off, play control, media ejection, and video streaming.</span></span> <span data-ttu-id="f0d42-112">Le contrôle Play peut prendre en charge des actions telles que la lecture, l’interruption, le rembobinage et l’avance rapide.</span><span class="sxs-lookup"><span data-stu-id="f0d42-112">Play control may support actions such as play, pause, rewind, and fast forward.</span></span>

## <a name="discovering-and-manipulating-a-device"></a><span data-ttu-id="f0d42-113">Découverte et manipulation d’un appareil</span><span class="sxs-lookup"><span data-stu-id="f0d42-113">Discovering and Manipulating a Device</span></span>

<span data-ttu-id="f0d42-114">WSDAPI étend le modèle de Plug-and-Play local en permettant à un client de découvrir et d’accéder à un appareil distant et à ses services associés sur un réseau.</span><span class="sxs-lookup"><span data-stu-id="f0d42-114">WSDAPI extends the local Plug and Play model by allowing a client to discover and access a remote device and its associated services across a network.</span></span> <span data-ttu-id="f0d42-115">Il prend en charge la découverte, la messagerie de contrôle unidirectionnelle et bidirectionnelle et l’événement.</span><span class="sxs-lookup"><span data-stu-id="f0d42-115">It supports discovery, one-way and two-way control messaging, and eventing.</span></span>

![Diagramme montrant comment WSDAPI permet à un client de découvrir et d’accéder à un appareil distant.](images/overview01.png)

<span data-ttu-id="f0d42-117">Les appareils DPWS annoncent leur présence et exposent les services (le cas échéant) à l’aide d’une adresse unique et d’un ensemble standardisé de messages XML.</span><span class="sxs-lookup"><span data-stu-id="f0d42-117">DPWS devices announce their presence and expose services (if any) using a unique address and a standardized set of XML messages.</span></span> <span data-ttu-id="f0d42-118">Les clients DPWS peuvent utiliser le processus de découverte pour Rechercher l’appareil, énumérer ses services et se connecter à ces services pour effectuer des actions spécifiques.</span><span class="sxs-lookup"><span data-stu-id="f0d42-118">DPWS clients can use the discovery process to find the device, enumerate its services, and connect to those services to perform specific actions.</span></span>

<span data-ttu-id="f0d42-119">Un client WSDAPI interroge d’abord l’appareil pour obtenir une description complète de ses services, y compris les types de service (par exemple, un type de service d’imprimante ou un type de service de scanneur).</span><span class="sxs-lookup"><span data-stu-id="f0d42-119">A WSDAPI client first queries the device for complete descriptions of its services, including the service types (such as a printer service type or a scanner service type).</span></span> <span data-ttu-id="f0d42-120">Le client contrôle ensuite l’appareil en appelant des commandes définies par un type de service (par exemple, en appelant **CreatePrintJob** sur un appareil avec un type de service d’imprimante).</span><span class="sxs-lookup"><span data-stu-id="f0d42-120">The client then controls the device by calling commands defined by a service type (for example, by calling **CreatePrintJob** on a device with a printer service type).</span></span> <span data-ttu-id="f0d42-121">Le cas échéant, le client peut également surveiller les modifications d’État dans chaque service en s’abonnant aux événements qui se produisent pendant l’exécution de la commande.</span><span class="sxs-lookup"><span data-stu-id="f0d42-121">Optionally, the client can also monitor state changes in each service by subscribing to events that occur during command execution.</span></span>

![Diagramme montrant comment un client WSDAPI interroge et interagit avec un appareil.](images/netdevice01.png)

<span data-ttu-id="f0d42-123">Pour plus d’informations sur les modèles de messagerie des appareils, consultez [modèles de message d’échange de métadonnées et de découverte](discovery-and-metadata-exchange-message-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="f0d42-123">For more information about device messaging patterns, see [Discovery and Metadata Exchange Message Patterns](discovery-and-metadata-exchange-message-patterns.md).</span></span>

## <a name="logical-and-physical-addressing"></a><span data-ttu-id="f0d42-124">Adressage logique et physique</span><span class="sxs-lookup"><span data-stu-id="f0d42-124">Logical and Physical Addressing</span></span>

<span data-ttu-id="f0d42-125">L’adressage logique est utilisé pour identifier de manière unique les périphériques indépendamment de leurs adresses physiques.</span><span class="sxs-lookup"><span data-stu-id="f0d42-125">Logical addressing is used to uniquely identify devices independent of their physical addresses.</span></span> <span data-ttu-id="f0d42-126">WS-Discovery fournit un mécanisme permettant de résoudre les adresses logiques en adresses physiques, ce qui permet à la messagerie client-appareil d’avoir lieu.</span><span class="sxs-lookup"><span data-stu-id="f0d42-126">WS-Discovery provides a mechanism to resolve logical addresses into physical addresses, allowing client-to-device messaging to take place.</span></span> <span data-ttu-id="f0d42-127">Par exemple, le stockage NAS (Network Attached Storage) que vous suivez.</span><span class="sxs-lookup"><span data-stu-id="f0d42-127">An example is network attached storage (NAS) that you carry with you.</span></span> <span data-ttu-id="f0d42-128">Si vous avez un ordinateur portable et un NAS, votre ordinateur portable doit être en mesure de reconnaître qu’il s’agit du même appareil, quelle que soit l’adresse physique (adresse IP) obtenue par le NAS au fur et à mesure que vous passez d’un sous-réseau à un autre.</span><span class="sxs-lookup"><span data-stu-id="f0d42-128">If you have a laptop and a NAS, your laptop should be able to recognize that it is the same device, regardless of the physical address (IP address) that the NAS obtains as you move between subnets.</span></span> <span data-ttu-id="f0d42-129">Pour ce faire, l’appareil doit avoir une identité indépendante de l’adresse IP qu’il obtient ; étant donné que les mécanismes traditionnels tels que DNS ne sont pas disponibles dans un scénario d’itinérance normal, WS-Addressing et WS-Discovery fournir l’adressage logique et la résolution comme une alternative ad hoc.</span><span class="sxs-lookup"><span data-stu-id="f0d42-129">Accomplishing this requires the device have identity that is independent of the IP address it obtains; since traditional mechanisms like DNS are not available in a normal roaming scenario, WS-Addressing and WS-Discovery provide logical addressing and resolution as an ad-hoc alternative.</span></span>

<span data-ttu-id="f0d42-130">Lorsqu’un appareil est fabriqué, il reçoit un identificateur global unique, représenté sous la forme d’un URI UUID.</span><span class="sxs-lookup"><span data-stu-id="f0d42-130">When a device is manufactured, it is given a globally unique identifier, represented as a UUID URI.</span></span> <span data-ttu-id="f0d42-131">Cet identificateur ne changera jamais pour l’appareil.</span><span class="sxs-lookup"><span data-stu-id="f0d42-131">This identifier will never change for the device.</span></span> <span data-ttu-id="f0d42-132">Lorsque l’appareil est sous tension, il annonce toujours son adresse logique par le biais d’un message WS-Discovery [Hello](hello-message.md) , et accepte les demandes de conversion en adresse physique (en général http) via WS-Discovery de [résoudre](resolve-message.md) ou de [sonder](probe-message.md) les messages.</span><span class="sxs-lookup"><span data-stu-id="f0d42-132">When the device is powered on, it will always announce its logical address via a WS-Discovery [Hello](hello-message.md) message, and will accept requests to convert that to a physical address (typically HTTP) via WS-Discovery [Resolve](resolve-message.md) or [Probe](probe-message.md) messages.</span></span> <span data-ttu-id="f0d42-133">Une fois qu’une adresse physique valide (adresse IP) est obtenue, toute la messagerie se produit au-dessus de cette adresse, et WS-Discovery est utilisé uniquement si l’adresse change, lorsque l’appareil change d’État et que les clients doivent être avertis ou lorsque l’appareil est mis hors connexion.</span><span class="sxs-lookup"><span data-stu-id="f0d42-133">Once a valid physical address (IP address) is obtained, all messaging happens over that address, and WS-Discovery is used only if the address changes, the device changes state and the clients need to be notified, or the device goes offline.</span></span>

## <a name="building-applications"></a><span data-ttu-id="f0d42-134">Création d’applications</span><span class="sxs-lookup"><span data-stu-id="f0d42-134">Building Applications</span></span>

<span data-ttu-id="f0d42-135">WSDAPI fournit une pile SOAP DPWS générique pour une utilisation par les applications clientes et de service.</span><span class="sxs-lookup"><span data-stu-id="f0d42-135">WSDAPI provides a generic DPWS SOAP stack for use by client and service applications.</span></span> <span data-ttu-id="f0d42-136">Le [Générateur de code des services Web sur les appareils](web-services-for-devices-code-generator.md) (WsdCodeGen.exe) peut être utilisé pour convertir une description de service (WSDL) en code proxy et stub que les applications peuvent appeler directement.</span><span class="sxs-lookup"><span data-stu-id="f0d42-136">The [Web Services on Devices Code Generator](web-services-for-devices-code-generator.md) (WsdCodeGen.exe) can be used to convert a service description (WSDL) into proxy and stub code that applications can call directly.</span></span> <span data-ttu-id="f0d42-137">Ce code généré transforme automatiquement les appels et les paramètres de fonction en messages SOAP et en champs XML, puis appelle WSDAPI pour émettre des requêtes vers le périphérique ou le client distant.</span><span class="sxs-lookup"><span data-stu-id="f0d42-137">This generated code automatically transforms function calls and parameters into SOAP messages and XML fields, and then calls into WSDAPI to issue to requests to the remote device or client.</span></span>

<span data-ttu-id="f0d42-138">La découverte des fonctions peut être utilisée lors de la génération d’applications WSDAPI pour créer et activer des instances de fonction retournées par PnP.</span><span class="sxs-lookup"><span data-stu-id="f0d42-138">Function Discovery can be used when building WSDAPI applications to create and activate function instances returned by PnP.</span></span> <span data-ttu-id="f0d42-139">Ces instances de fonction contiennent des données qui peuvent être utilisées pour obtenir plus d’informations par le biais des API PnP quand une simple découverte est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="f0d42-139">These function instances contain data that can be used to obtain more information through the PnP APIs when more than just simple discovery is required.</span></span> <span data-ttu-id="f0d42-140">Pour plus d’informations, consultez [découverte de fonctions](/previous-versions/windows/desktop/fundisc/fd-portal) et [PnP-X](/previous-versions/windows/desktop/fundisc/pnp-x).</span><span class="sxs-lookup"><span data-stu-id="f0d42-140">For more information, see [Function Discovery](/previous-versions/windows/desktop/fundisc/fd-portal) and [PnP-X](/previous-versions/windows/desktop/fundisc/pnp-x).</span></span>

## <a name="related-topics"></a><span data-ttu-id="f0d42-141">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f0d42-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f0d42-142">Modèles de message d’échange de métadonnées et de découverte</span><span class="sxs-lookup"><span data-stu-id="f0d42-142">Discovery and Metadata Exchange Message Patterns</span></span>](discovery-and-metadata-exchange-message-patterns.md)
</dt> <dt>

[<span data-ttu-id="f0d42-143">Conformité de la spécification WSDAPI</span><span class="sxs-lookup"><span data-stu-id="f0d42-143">WSDAPI Specification Compliance</span></span>](wsdapi-specification-compliance.md)
</dt> <dt>

[<span data-ttu-id="f0d42-144">Vue d’ensemble des interfaces WSDAPI</span><span class="sxs-lookup"><span data-stu-id="f0d42-144">Overview of the WSDAPI Interfaces</span></span>](overview-of-the-wsdapi-interfaces.md)
</dt> </dl>

 

 
