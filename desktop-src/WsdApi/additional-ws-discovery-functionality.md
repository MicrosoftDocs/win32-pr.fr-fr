---
description: L’objectif de cette rubrique est de décrire les fonctionnalités de découverte implémentées par WSDAPI, mais non décrites dans les spécifications de DPWS ou de WS-Discovery.
ms.assetid: ae7eff53-c932-4cba-9e71-c60f308f0e2d
title: Fonctionnalités de WS-Discovery supplémentaires
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ce9856605273bec9c757e0b29c389991bf061309
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104209990"
---
# <a name="additional-ws-discovery-functionality"></a><span data-ttu-id="d0224-103">Fonctionnalités de WS-Discovery supplémentaires</span><span class="sxs-lookup"><span data-stu-id="d0224-103">Additional WS-Discovery Functionality</span></span>

<span data-ttu-id="d0224-104">Dans certains cas, le [profil de périphériques pour les services Web](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) et les spécifications associées ne définissent pas explicitement les fonctionnalités d’implémentation.</span><span class="sxs-lookup"><span data-stu-id="d0224-104">In some cases, the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) and related specifications do not explicitly define implementation functionality.</span></span> <span data-ttu-id="d0224-105">Par exemple, la spécification [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) ne définit pas le comportement du client et de l’hôte dans les environnements multirésidents.</span><span class="sxs-lookup"><span data-stu-id="d0224-105">For example, the [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) specification does not define client and host behavior in multi-homed environments.</span></span> <span data-ttu-id="d0224-106">Lorsque WSDAPI a été implémenté, certaines fonctionnalités de découverte ont été ajoutées au-delà de la fonctionnalité définie dans la spécification.</span><span class="sxs-lookup"><span data-stu-id="d0224-106">When WSDAPI was implemented, some discovery functionality was added beyond the functionality defined in the specification.</span></span>

<span data-ttu-id="d0224-107">WSDAPI implémente également des parties sélectionnées du CD1 WS-Discovery v 1.1 pour communiquer avec un proxy de découverte via HTTP.</span><span class="sxs-lookup"><span data-stu-id="d0224-107">WSDAPI also implements selected portions of WS-Discovery v1.1 CD1 for communicating with a discovery proxy over HTTP.</span></span>

<span data-ttu-id="d0224-108">L’objectif de cette rubrique est de décrire les fonctionnalités de découverte implémentées par WSDAPI, mais non décrites dans les spécifications de DPWS ou de WS-Discovery.</span><span class="sxs-lookup"><span data-stu-id="d0224-108">The purpose of this topic is to describe the discovery functionality implemented by WSDAPI but not otherwise described in the DPWS or WS-Discovery specifications.</span></span>

## <a name="ipv6-addresses-and-the-soapudp-uri-format"></a><span data-ttu-id="d0224-109">Adresses IPv6 et format d’URI SOAP. UDP</span><span class="sxs-lookup"><span data-stu-id="d0224-109">IPv6 addresses and the soap.udp URI format</span></span>

<span data-ttu-id="d0224-110">SOAP-sur-UDP et WS-Discovery ne décrivent pas explicitement la manière dont une adresse IPv6 littérale est représentée dans le format d’URI SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="d0224-110">SOAP-over-UDP and WS-Discovery do not explicitly describe how a literal IPv6 address is represented in the soap.udp URI format.</span></span> <span data-ttu-id="d0224-111">La [RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), intitulée « Uniform Resource Identifiers (Uri) : Generic Syntax », indique que les adresses IPv6 littérales ne sont pas prises en charge par le format d’URI SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="d0224-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), entitled "Uniform Resource Identifiers (URI): Generic Syntax", indicates that literal IPv6 addresses are not supported by the soap.udp URI format.</span></span>

<span data-ttu-id="d0224-112">Par souci de simplicité, WSDAPI reconnaît les adresses IPv6 entre crochets dans le schéma SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="d0224-112">For simplicity, WSDAPI recognizes IPv6 addresses enclosed in square brackets in the soap.udp scheme.</span></span> <span data-ttu-id="d0224-113">Par exemple, l’adresse `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` est reconnue par wsdapi.</span><span class="sxs-lookup"><span data-stu-id="d0224-113">For example, the address `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` is recognized by WSDAPI.</span></span> <span data-ttu-id="d0224-114">Cela est similaire à la façon dont les adresses IPv6 sont gérées dans HTTP.</span><span class="sxs-lookup"><span data-stu-id="d0224-114">This is similar to how IPv6 addresses are handled in HTTP.</span></span>

## <a name="hello-and-xaddrs"></a><span data-ttu-id="d0224-115">Hello et XAddrs</span><span class="sxs-lookup"><span data-stu-id="d0224-115">Hello and XAddrs</span></span>

<span data-ttu-id="d0224-116">L’objet d’hébergement DPWS d’un WSDAPI n’enverra jamais de message WS-Discovery [Hello](hello-message.md) avec [XAddrs](xaddr-validation-rules.md) dans le corps du message.</span><span class="sxs-lookup"><span data-stu-id="d0224-116">WSDAPI's DPWS hosting object will never send a WS-Discovery [Hello](hello-message.md) message with [XAddrs](xaddr-validation-rules.md) in the message body.</span></span> <span data-ttu-id="d0224-117">Un client enverra toujours un message de [résolution](resolve-message.md) après avoir reçu un message de salutation si le client doit obtenir le XAddrs.</span><span class="sxs-lookup"><span data-stu-id="d0224-117">A client will always send a [Resolve](resolve-message.md) message after receiving a Hello message if the client needs to get the XAddrs.</span></span>

<span data-ttu-id="d0224-118">Cette approche présente deux avantages.</span><span class="sxs-lookup"><span data-stu-id="d0224-118">There are two benefits of this approach.</span></span> <span data-ttu-id="d0224-119">Tout d’abord, un appareil basé sur WSDAPI n’exposera jamais XAddrs qui divulguera les adresses IP des réseaux privés.</span><span class="sxs-lookup"><span data-stu-id="d0224-119">First, a device built on WSDAPI will never expose XAddrs that disclose the IP addresses of private networks.</span></span> <span data-ttu-id="d0224-120">Deuxièmement, un appareil basé sur WSDAPI expose uniquement les XAddrs qui sont accessibles au client, ce qui signifie que les adresses IPv6 ne sont jamais envoyées à un client IPv4.</span><span class="sxs-lookup"><span data-stu-id="d0224-120">Secondly, a device built on WSDAPI only exposes XAddrs that are accessible to the client, which means that IPv6 addresses are never sent to an IPv4 client.</span></span>

<span data-ttu-id="d0224-121">Lorsqu’une [sonde](probe-message.md) ou un message de résolution est reçu, un seul XAddr est envoyé en réponse.</span><span class="sxs-lookup"><span data-stu-id="d0224-121">When a [Probe](probe-message.md) or Resolve message is received, only a single XAddr is sent in response.</span></span> <span data-ttu-id="d0224-122">Le XAddr envoyé correspond à l’adresse locale sur laquelle la demande a été reçue.</span><span class="sxs-lookup"><span data-stu-id="d0224-122">The sent XAddr corresponds to the local address on which the request was received.</span></span> <span data-ttu-id="d0224-123">Si la demande a été reçue sur des sous-réseaux via IPv6, WSDAPI fournit une adresse IPv6 globale dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="d0224-123">If the request was received across subnets over IPv6, WSDAPI will provide a global IPv6 address in the response.</span></span>

## <a name="preferred-addresses"></a><span data-ttu-id="d0224-124">Adresses préférées</span><span class="sxs-lookup"><span data-stu-id="d0224-124">Preferred addresses</span></span>

<span data-ttu-id="d0224-125">Un appareil peut fournir plusieurs XAddrs dans un message [Hello](hello-message.md), [ProbeMatch](probematches-message.md)ou [ResolveMatch](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="d0224-125">A device can provide multiple XAddrs in a [Hello](hello-message.md), [ProbeMatch](probematches-message.md), or [ResolveMatch](resolvematches-message.md) message.</span></span> <span data-ttu-id="d0224-126">Un service peut également être disponible sur plusieurs points de terminaison avec des adresses de transport différentes.</span><span class="sxs-lookup"><span data-stu-id="d0224-126">A service can also be available at multiple endpoints with different transport addresses.</span></span> <span data-ttu-id="d0224-127">Dans ce cas, WSDAPI tente de communiquer avec l’appareil sur la première adresse utilisable qu’il trouve.</span><span class="sxs-lookup"><span data-stu-id="d0224-127">In these cases, WSDAPI will try to communicate with the device on the first usable address it finds.</span></span> <span data-ttu-id="d0224-128">Une adresse est utilisable si elle provient d’un protocole disponible, tel que IPv4 sur un ordinateur sur lequel IPv4 est installé ou IPv6 sur un ordinateur sur lequel IPv6 est installé.</span><span class="sxs-lookup"><span data-stu-id="d0224-128">An address is usable if it is from an available protocol, such as IPv4 on a machine where IPv4 is installed or IPv6 on a machine where IPv6 is installed.</span></span> <span data-ttu-id="d0224-129">En outre, si l’adresse provient d’un périphérique ou d’un service qui ne se trouve pas sur le sous-réseau local, elle est utilisable uniquement s’il s’agit d’une adresse IPv4, locale de site IPv6 ou d’un lien IPv6 local.</span><span class="sxs-lookup"><span data-stu-id="d0224-129">Additionally, if the address came from a device or service that is not on the local subnet, it is usable only if it is IPv4, IPv6 site local, or IPv6 link local.</span></span>

## <a name="wsdl-in-metadata-exchange"></a><span data-ttu-id="d0224-130">WSDL dans l’échange de métadonnées</span><span class="sxs-lookup"><span data-stu-id="d0224-130">WSDL in metadata exchange</span></span>

<span data-ttu-id="d0224-131">Les appareils et services basés sur WSDAPI ne fournissent pas leur WSDL dans l’échange de métadonnées, sauf s’ils sont étendus par l’application pour fournir ces informations.</span><span class="sxs-lookup"><span data-stu-id="d0224-131">Devices and services built on WSDAPI do not provide their WSDL in metadata exchange unless extended by the application to provide this information.</span></span> <span data-ttu-id="d0224-132">Par défaut, la configuration WSDL ne fait pas partie du modèle de programmation.</span><span class="sxs-lookup"><span data-stu-id="d0224-132">By default, WSDL provision is not part of the programming model.</span></span>

## <a name="app_max_delay"></a><span data-ttu-id="d0224-133">\_délai maximal de l’application \_</span><span class="sxs-lookup"><span data-stu-id="d0224-133">APP\_MAX\_DELAY</span></span>

<span data-ttu-id="d0224-134">DPWS définit \_ \_ le délai maximal pour l’application, l’intervalle aléatoire entre la réception d’une [sonde](probe-message.md) et l’envoi d’un [ProbeMatch](probematches-message.md), comme 5 000 millisecondes.</span><span class="sxs-lookup"><span data-stu-id="d0224-134">DPWS defines APP\_MAX\_DELAY, the random interval to delay between receiving a [Probe](probe-message.md) and sending a [ProbeMatch](probematches-message.md), as 5,000 milliseconds.</span></span> <span data-ttu-id="d0224-135">Le pare-feu Windows requiert que le modèle de réponse de demande/monodiffusion de multidiffusion pour UDP ne fonctionne que dans la fenêtre de pare-feu 4 secondes.</span><span class="sxs-lookup"><span data-stu-id="d0224-135">Windows Firewall requires that the multicast request/unicast response model for UDP will only work within the 4 second firewall window.</span></span> <span data-ttu-id="d0224-136">Par conséquent, WSDAPI transmet les réponses en 2 500 ms ou moins, au lieu de la fenêtre 5 000 MS décrite par le \_ délai maximal de l’application \_ .</span><span class="sxs-lookup"><span data-stu-id="d0224-136">As a result, WSDAPI will transmit responses in 2,500 ms or less, instead of the 5,000 ms window described by APP\_MAX\_DELAY.</span></span>

## <a name="iana-port-reservations"></a><span data-ttu-id="d0224-137">Réservations de port IANA</span><span class="sxs-lookup"><span data-stu-id="d0224-137">IANA port reservations</span></span>

<span data-ttu-id="d0224-138">WSDAPI utilise le port TCP 5357 pour le trafic HTTP et le port TCP 5358 pour le trafic HTTPs par défaut.</span><span class="sxs-lookup"><span data-stu-id="d0224-138">WSDAPI uses TCP port 5357 for HTTP traffic and TCP port 5358 for HTTPS traffic by default.</span></span> <span data-ttu-id="d0224-139">Ces ports sont réservés aux processus avec privilèges inférieurs via une réservation d’URL dans HTTP.sys et sont également réservés à l’IANA.</span><span class="sxs-lookup"><span data-stu-id="d0224-139">These ports are reserved for lower privilege processes through a URL reservation in HTTP.sys, and are also reserved with IANA.</span></span>

## <a name="udp-port-sharing"></a><span data-ttu-id="d0224-140">Partage de ports UDP</span><span class="sxs-lookup"><span data-stu-id="d0224-140">UDP port sharing</span></span>

<span data-ttu-id="d0224-141">WSDAPI utilise le partage de ports.</span><span class="sxs-lookup"><span data-stu-id="d0224-141">WSDAPI uses port sharing.</span></span> <span data-ttu-id="d0224-142">Les messages de monodiffusion envoyés au port 3702 peuvent ne pas être correctement gérés par toutes les applications WSDAPI.</span><span class="sxs-lookup"><span data-stu-id="d0224-142">Unicast messages sent to port 3702 may not be properly handled by all WSDAPI-based applications.</span></span> <span data-ttu-id="d0224-143">Si une application se lie exclusivement au port 3702, elle peut empêcher les applications WSDAPI d’utiliser correctement ce port.</span><span class="sxs-lookup"><span data-stu-id="d0224-143">If an application binds exclusively to port 3702, it may prevent WSDAPI-based applications from using that port correctly.</span></span>

## <a name="ws-discovery-v11-cd1-proxy"></a><span data-ttu-id="d0224-144">Proxy CD1 WS-Discovery v 1.1</span><span class="sxs-lookup"><span data-stu-id="d0224-144">WS-Discovery v1.1 CD1 Proxy</span></span>

<span data-ttu-id="d0224-145">WSDAPI recherche et communique avec un proxy de découverte qui implémente le protocole WS-Discovery v 1.1 CD1 en mode managé.</span><span class="sxs-lookup"><span data-stu-id="d0224-145">WSDAPI will search for and communicate with a discovery proxy that implements the WS-Discovery v1.1 CD1 managed mode protocol.</span></span> <span data-ttu-id="d0224-146">WS-Discovery v 1.1 CD1 est la première révision de WS-Discovery pour inclure une description explicite d’un protocole HTTP pour la communication entre un proxy et un client ou un appareil.</span><span class="sxs-lookup"><span data-stu-id="d0224-146">WS-Discovery v1.1 CD1 is the first revision of WS-Discovery to include an explicit description of an HTTP protocol for communication between a proxy and a client or device.</span></span>

<span data-ttu-id="d0224-147">Pour limiter le nombre de versions simultanées utilisées dans les demandes de multidiffusion, WSDAPI envoie une demande de sondage WS-Discovery dans l’espace de noms 2005/04, mais recherche le type de DiscoveryProxy du CD1 WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="d0224-147">To limit the number of concurrent versions used in multicast requests, WSDAPI sends a WS-Discovery Probe request in the 2005/04 namespace, but searches for the WS-Discovery v1.1 CD1 DiscoveryProxy type.</span></span> <span data-ttu-id="d0224-148">Si un proxy répond, WSDAPI envoie une sonde HTTP ou la demande de résolution au point de terminaison proxy spécifié, tel qu’il est défini dans le CD1 WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="d0224-148">If a proxy responds, WSDAPI will send an HTTP Probe or Resolve request to the specified proxy endpoint as defined in WS-Discovery v1.1 CD1.</span></span>

 

 



