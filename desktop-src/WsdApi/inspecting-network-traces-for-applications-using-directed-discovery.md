---
description: N’importe quel analyseur de paquets réseau pouvant afficher des paquets bruts peut être utilisé pour inspecter les demandes d’échange de métadonnées HTTP. Moniteur réseau Microsoft 3 (NetMon) est recommandé. Pour plus d’informations sur NetMon, consultez le téléchargement de Netmon et des exemples de filtres DPWS.
ms.assetid: 9b124117-06e7-4637-9863-0f9650861526
title: Inspection des suivis réseau pour les applications à l’aide de la découverte dirigée
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98a424117896c18a5fcf84c883ba824b8223ef01
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106526929"
---
# <a name="inspecting-network-traces-for-applications-using-directed-discovery"></a><span data-ttu-id="17734-105">Inspection des suivis réseau pour les applications à l’aide de la découverte dirigée</span><span class="sxs-lookup"><span data-stu-id="17734-105">Inspecting Network Traces for Applications Using Directed Discovery</span></span>

<span data-ttu-id="17734-106">N’importe quel analyseur de paquets réseau pouvant afficher des paquets bruts peut être utilisé pour inspecter les demandes d’échange de métadonnées HTTP.</span><span class="sxs-lookup"><span data-stu-id="17734-106">Any network packet analyzer that can display raw packets can be used to inspect HTTP metadata exchange requests.</span></span> <span data-ttu-id="17734-107">Moniteur réseau Microsoft 3 (NetMon) est recommandé.</span><span class="sxs-lookup"><span data-stu-id="17734-107">Microsoft Network Monitor 3 (Netmon) is recommended.</span></span> <span data-ttu-id="17734-108">Pour plus d’informations sur NetMon, consultez le [téléchargement de Netmon et des exemples de filtres DPWS](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="17734-108">For more information about Netmon, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>

<span data-ttu-id="17734-109">**Pour inspecter les suivis réseau pour la découverte dirigée**</span><span class="sxs-lookup"><span data-stu-id="17734-109">**To inspect network traces for directed discovery**</span></span>

1.  <span data-ttu-id="17734-110">Configurez l’hôte et le client pour qu’ils s’exécutent sur le réseau (autrement dit, assurez-vous que l’hôte et le client fonctionnent sur des ordinateurs différents).</span><span class="sxs-lookup"><span data-stu-id="17734-110">Configure the host and client to run across the network (that is, make sure that the host and client will operate on different machines).</span></span>
2.  <span data-ttu-id="17734-111">Installez l’analyseur de paquets (NetMon) sur le client ou l’hôte.</span><span class="sxs-lookup"><span data-stu-id="17734-111">Install the packet analyzer (Netmon) on either the client or the host.</span></span>
3.  <span data-ttu-id="17734-112">Configurez l’analyseur de paquets pour capturer le trafic sur la carte réseau qui connecte l’ordinateur hôte et le client.</span><span class="sxs-lookup"><span data-stu-id="17734-112">Configure the packet analyzer to capture traffic on the network adapter connecting the host and the client.</span></span>
4.  <span data-ttu-id="17734-113">Reproduisez l’erreur en démarrant l’hôte et le client ou en appuyant sur F5 dans l’Explorateur réseau.</span><span class="sxs-lookup"><span data-stu-id="17734-113">Reproduce the failure by starting the host and client or by pressing F5 in the Network Explorer.</span></span>
5.  <span data-ttu-id="17734-114">Filtrez les résultats pour isoler les WS-Discovery et le trafic d’échange de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="17734-114">Filter the results to isolate WS-Discovery and metadata exchange traffic.</span></span> <span data-ttu-id="17734-115">Pour afficher des exemples de filtres NetMon, consultez le [téléchargement de Netmon et des exemples de filtres DPWS](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="17734-115">To view sample Netmon filters, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>
    > [!Note]  
    > <span data-ttu-id="17734-116">Cette étape est facultative.</span><span class="sxs-lookup"><span data-stu-id="17734-116">This step is optional.</span></span>

     

6.  <span data-ttu-id="17734-117">Vérifiez que les messages envoyés entre le client et l’hôte répondent aux exigences de trafic de base.</span><span class="sxs-lookup"><span data-stu-id="17734-117">Verify that messages sent between client and host meet basic traffic requirements.</span></span>

## <a name="verifying-that-messages-meet-traffic-requirements"></a><span data-ttu-id="17734-118">Vérification de la conformité des messages aux exigences du trafic</span><span class="sxs-lookup"><span data-stu-id="17734-118">Verifying that messages meet traffic requirements</span></span>

<span data-ttu-id="17734-119">Les clients et hôtes WSDAPI doivent envoyer des messages conformes aux critères suivants.</span><span class="sxs-lookup"><span data-stu-id="17734-119">WSDAPI clients and hosts must send messages that conform to the following criteria.</span></span> <span data-ttu-id="17734-120">Pour obtenir des informations générales sur les modèles de message, consultez [modèles de message d’échange de métadonnées et de découverte](discovery-and-metadata-exchange-message-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="17734-120">For general information about message patterns, see [Discovery and Metadata Exchange Message Patterns](discovery-and-metadata-exchange-message-patterns.md).</span></span>

-   <span data-ttu-id="17734-121">Les messages de [sondage](probe-message.md) doivent être envoyés par HTTP ou HTTPS, généralement vers le port 5357 ou 5358.</span><span class="sxs-lookup"><span data-stu-id="17734-121">[Probe](probe-message.md) messages must be sent by HTTP or HTTPS, usually to port 5357 or 5358.</span></span>
-   <span data-ttu-id="17734-122">L’élément **types** d’un message de [sondage](probe-message.md) doit être présent et ne doit pas être vide.</span><span class="sxs-lookup"><span data-stu-id="17734-122">The **Types** element of a [Probe](probe-message.md) message must be present and must not be empty.</span></span> <span data-ttu-id="17734-123">Il doit contenir les types auxquels un hôte doit répondre.</span><span class="sxs-lookup"><span data-stu-id="17734-123">It must contain the types to which a host will respond.</span></span>
-   <span data-ttu-id="17734-124">Un message [messages ProbeMatches](probematches-message.md) doit être envoyé au port HTTP ou HTTPS à partir duquel la [sonde](probe-message.md) a été envoyée.</span><span class="sxs-lookup"><span data-stu-id="17734-124">A [ProbeMatches](probematches-message.md) message must be sent to the HTTP or HTTPS port from which the [Probe](probe-message.md) was sent.</span></span>
-   <span data-ttu-id="17734-125">L’élément **latesto** d’un message [messages ProbeMatches](probematches-message.md) doit être présent et ne doit pas être vide.</span><span class="sxs-lookup"><span data-stu-id="17734-125">The **RelatesTo** element of a [ProbeMatches](probematches-message.md) message must be present and must not be empty.</span></span> <span data-ttu-id="17734-126">Sa valeur doit correspondre à la valeur de l’élément **MessageID** du message de [sondage](probe-message.md) correspondant.</span><span class="sxs-lookup"><span data-stu-id="17734-126">Its value must match the value of the **MessageId** element from the corresponding [Probe](probe-message.md) message.</span></span>
-   <span data-ttu-id="17734-127">Si un élément **XAddrs** est inclus dans le message [messages ProbeMatches](probematches-message.md) , les adresses de transport fournies doivent être validées.</span><span class="sxs-lookup"><span data-stu-id="17734-127">If an **XAddrs** element was included in the [ProbeMatches](probematches-message.md) message, the supplied transport addresses must be validated.</span></span> <span data-ttu-id="17734-128">Pour plus d’informations, consultez [règles de validation XAddr](xaddr-validation-rules.md).</span><span class="sxs-lookup"><span data-stu-id="17734-128">For more information, see [XAddr Validation Rules](xaddr-validation-rules.md).</span></span>
-   <span data-ttu-id="17734-129">Un message [messages ProbeMatches](probematches-message.md) doit être envoyé dans les 4 secondes du message de [sondage](probe-message.md) correspondant.</span><span class="sxs-lookup"><span data-stu-id="17734-129">A [ProbeMatches](probematches-message.md) message must be sent within 4 seconds of the corresponding [Probe](probe-message.md) message.</span></span> <span data-ttu-id="17734-130">Le pare-feu Windows peut supprimer un message messages ProbeMatches envoyé plus de 4 secondes après un message de sondage.</span><span class="sxs-lookup"><span data-stu-id="17734-130">The Windows Firewall may drop a ProbeMatches message sent more than 4 seconds after a Probe message.</span></span>
-   <span data-ttu-id="17734-131">Si aucun élément **XAddrs** n’a été inclus dans le message [messages ProbeMatches](probematches-message.md) , et si le client ou l’hôte envoie un message http (par exemple, une [demande d’échange de métadonnées](get--metadata-exchange--http-request-and-message.md) ou un message de service), le client ou l’hôte doit envoyer un message de [résolution](resolve-message.md) par http ou HTTPS.</span><span class="sxs-lookup"><span data-stu-id="17734-131">If no **XAddrs** element was included in the [ProbeMatches](probematches-message.md) message, and the client or host will send an HTTP message (such as a [Get](get--metadata-exchange--http-request-and-message.md) metadata exchange request or a service message), then the client or host must send a [Resolve](resolve-message.md) message by HTTP or HTTPS.</span></span> <span data-ttu-id="17734-132">Ce message est généralement envoyé au port 5357 ou 5358.</span><span class="sxs-lookup"><span data-stu-id="17734-132">This message is usually sent to port 5357 or 5358.</span></span>
-   <span data-ttu-id="17734-133">Si un message de [résolution](resolve-message.md) est envoyé, un message [ResolveMatches](resolvematches-message.md) doit être envoyé au port http ou HTTPS à partir duquel le message de résolution a été envoyé.</span><span class="sxs-lookup"><span data-stu-id="17734-133">If a [Resolve](resolve-message.md) message is sent, then a [ResolveMatches](resolvematches-message.md) message must be sent to the HTTP or HTTPS port from which the Resolve message was sent.</span></span>
-   <span data-ttu-id="17734-134">Un message [ResolveMatches](resolvematches-message.md) doit être envoyé dans les 4 secondes du message de [résolution](resolve-message.md) correspondant.</span><span class="sxs-lookup"><span data-stu-id="17734-134">A [ResolveMatches](resolvematches-message.md) message must be sent within 4 seconds of the corresponding [Resolve](resolve-message.md) message.</span></span> <span data-ttu-id="17734-135">Le pare-feu Windows peut supprimer un ResolveMatchesmessage envoyé plus de 4 secondes après un message de résolution.</span><span class="sxs-lookup"><span data-stu-id="17734-135">The Windows Firewall may drop a ResolveMatchesmessage sent more than 4 seconds after a Resolve message.</span></span>

<span data-ttu-id="17734-136">Si les messages envoyés par le programme ne sont pas conformes à ces exigences de message, la cause du problème a été correctement identifiée et aucune autre étape de dépannage n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="17734-136">If the messages sent by the program do not conform to these message requirements, the cause of the problem has been successfully identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="17734-137">Réécrivez le programme afin qu’il génère des messages conformes et retestez le programme.</span><span class="sxs-lookup"><span data-stu-id="17734-137">Rewrite the program so that it generates conformant messages and retest the program.</span></span>

<span data-ttu-id="17734-138">Si la source du problème ne peut toujours pas être identifiée, contactez le support technique de Microsoft pour obtenir de l’aide.</span><span class="sxs-lookup"><span data-stu-id="17734-138">If the source of the problem still cannot be identified, contact Microsoft support for assistance.</span></span> <span data-ttu-id="17734-139">Avant de contacter le support technique, collectez les fichiers journaux appropriés afin d’identifier la cause racine du problème.</span><span class="sxs-lookup"><span data-stu-id="17734-139">Before contacting support, collect the appropriate log files to help identify the root cause of the problem.</span></span> <span data-ttu-id="17734-140">Pour plus d’informations, consultez [activation du suivi wsdapi](enabling-wsdapi-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="17734-140">For more information, see [Enabling WSDAPI Tracing](enabling-wsdapi-tracing.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="17734-141">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="17734-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="17734-142">Dépannage des applications à l’aide de la découverte dirigée</span><span class="sxs-lookup"><span data-stu-id="17734-142">Troubleshooting Applications Using Directed Discovery</span></span>](troubleshooting-applications-using-directed-discovery.md)
</dt> <dt>

[<span data-ttu-id="17734-143">Procédures de diagnostic WSDAPI</span><span class="sxs-lookup"><span data-stu-id="17734-143">WSDAPI Diagnostic Procedures</span></span>](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[<span data-ttu-id="17734-144">Résolution des problèmes de Prise en main avec WSDAPI</span><span class="sxs-lookup"><span data-stu-id="17734-144">Getting Started with WSDAPI Troubleshooting</span></span>](getting-started-with-wsdapi-troubleshooting.md)
</dt> <dt>

[<span data-ttu-id="17734-145">Téléchargement de Netmon et des exemples de filtres DPWS</span><span class="sxs-lookup"><span data-stu-id="17734-145">Downloading Netmon and Sample DPWS Filters</span></span>](downloading-netmon-and-sample-dpws-filters.md)
</dt> </dl>

 

 



