---
title: Exécution de fichiers à partir d’une source réseau
description: Exécution de fichiers à partir d’une source réseau
ms.assetid: 72f2d685-56fc-4da2-8372-3774cc65f59d
keywords:
- Windows Media Format SDK, lire des données ASF
- Windows Media Format SDK, exécuter des fichiers à partir de sources réseau
- ASF (Advanced Systems Format), lecture des données
- ASF (format des systèmes avancés), lire les données
- ASF (Advanced Systems Format), exécuter des fichiers à partir de sources réseau
- ASF (format des systèmes avancés), exécuter des fichiers à partir de sources réseau
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8f1e4e41ddf94498ddeddf90e64439c1b11b7ba8
ms.sourcegitcommit: ad672d3a10192c5ccac619ad2524407109266e93
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/25/2020
ms.locfileid: "106509643"
---
# <a name="playing-files-from-a-network-source"></a><span data-ttu-id="163f9-109">Exécution de fichiers à partir d’une source réseau</span><span class="sxs-lookup"><span data-stu-id="163f9-109">Playing Files from a Network Source</span></span>

<span data-ttu-id="163f9-110">La lecture à partir d’un réseau n’est pas fondamentalement différente de la lecture d’un fichier local.</span><span class="sxs-lookup"><span data-stu-id="163f9-110">Reading from a network is not fundamentally different from reading a local file.</span></span> <span data-ttu-id="163f9-111">L’application passe l’URL à la méthode [**IWMReader :: Open**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-open) de l’objet lecteur et l’objet lecteur gère les détails des protocoles réseau.</span><span class="sxs-lookup"><span data-stu-id="163f9-111">The application passes the URL to the reader object's [**IWMReader::Open**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-open) method, and the reader object handles the details of the network protocols.</span></span> <span data-ttu-id="163f9-112">L’objet lecteur utilise la gestion de tampons intelligente pour offrir la lecture la plus lisse possible.</span><span class="sxs-lookup"><span data-stu-id="163f9-112">The reader object uses intelligent buffer management to provide the smoothest playback possible.</span></span> <span data-ttu-id="163f9-113">Si l’application a besoin de davantage de contrôle sur les paramètres réseau de l’objet lecteur, ceux-ci sont disponibles via les interfaces [**IWMReaderNetworkConfig**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadernetworkconfig) et [**IWMReaderNetworkConfig2**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadernetworkconfig2) .</span><span class="sxs-lookup"><span data-stu-id="163f9-113">If the application needs more control over the reader object's network settings, these are available through the [**IWMReaderNetworkConfig**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadernetworkconfig) and [**IWMReaderNetworkConfig2**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadernetworkconfig2) interfaces.</span></span>

<span data-ttu-id="163f9-114">Le contenu d’une source réseau se trouve dans l’une des deux catégories suivantes :</span><span class="sxs-lookup"><span data-stu-id="163f9-114">Content from a network source falls into one of the following two categories:</span></span>

-   <span data-ttu-id="163f9-115">Contenu.</span><span class="sxs-lookup"><span data-stu-id="163f9-115">Streaming.</span></span> <span data-ttu-id="163f9-116">Les données sont transmises juste à temps pour être lues sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="163f9-116">The data is transmitted just in time to be played on the local machine.</span></span> <span data-ttu-id="163f9-117">Les serveurs exécutant Windows Media Services peuvent fournir des données de streaming.</span><span class="sxs-lookup"><span data-stu-id="163f9-117">Servers running Windows Media Services can provide streaming data.</span></span> <span data-ttu-id="163f9-118">Si le contenu de la vitesse de transmission multiple (MBR) est diffusé en continu, le client peut demander une vitesse de transmission différente du serveur en fonction de la progression de la diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="163f9-118">If multiple bit rate (MBR) content is streamed, the client can request a different bit rate from the server as streaming progresses.</span></span>
-   <span data-ttu-id="163f9-119">Avez.</span><span class="sxs-lookup"><span data-stu-id="163f9-119">Downloaded.</span></span> <span data-ttu-id="163f9-120">Toutes les données sont transmises aussi rapidement que possible afin qu’elles puissent être enregistrées sous la forme d’un fichier sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="163f9-120">All the data is transmitted as quickly as possible so that it can be saved as a file on the local machine.</span></span> <span data-ttu-id="163f9-121">Les serveurs Web fournissent des données téléchargées.</span><span class="sxs-lookup"><span data-stu-id="163f9-121">Web servers provide downloaded data.</span></span> <span data-ttu-id="163f9-122">Il n’y a aucune communication entre le client et le serveur une fois le téléchargement démarré.</span><span class="sxs-lookup"><span data-stu-id="163f9-122">There is no communication from the client to the server after the download begins.</span></span>

<span data-ttu-id="163f9-123">Lorsque l’objet lecteur télécharge un fichier à partir d’un serveur Web, il utilise une technique appelée diffusion en continu progressive, qui permet à un joueur de commencer à afficher le contenu avant que le téléchargement soit terminé.</span><span class="sxs-lookup"><span data-stu-id="163f9-123">When the reader object downloads a file from a Web server, it uses a technique called progressive streaming, which allows a player to begin rendering the content before downloading is complete.</span></span> <span data-ttu-id="163f9-124">Les données sont mises en mémoire tampon pour fournir un flot de données ininterrompues au joueur.</span><span class="sxs-lookup"><span data-stu-id="163f9-124">Data is buffered to provide an uninterrupted flow of data to the player.</span></span> <span data-ttu-id="163f9-125">Des informations telles que le taux de transfert et la durée du contenu sont utilisées pour déterminer la durée pendant laquelle les données doivent être mises en mémoire tampon avant de les donner au joueur.</span><span class="sxs-lookup"><span data-stu-id="163f9-125">Information such as the transfer rate and duration of the content is used to determine how long to buffer the data before giving it to the player.</span></span>

<span data-ttu-id="163f9-126">Pour ouvrir un fichier ou un flux sur un réseau, appelez la méthode **IWMReader :: Open** de l’objet lecteur avec l’URL appropriée.</span><span class="sxs-lookup"><span data-stu-id="163f9-126">To open a file or stream over a network, call the reader object's **IWMReader::Open** method with the appropriate URL.</span></span> <span data-ttu-id="163f9-127">**Open** est un appel asynchrone, donc il est retourné immédiatement.</span><span class="sxs-lookup"><span data-stu-id="163f9-127">**Open** is an asynchronous call, so it returns immediately.</span></span> <span data-ttu-id="163f9-128">Lorsque la source est prête pour la lecture, l’objet lecteur envoie une \_ notification WMT ouverte à la méthode de rappel [**IWMStatusCallback :: OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) de l’application.</span><span class="sxs-lookup"><span data-stu-id="163f9-128">When the source is ready for reading, the reader object sends a WMT\_OPENED notification to the application's [**IWMStatusCallback::OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) callback method.</span></span> <span data-ttu-id="163f9-129">À ce stade, l’application peut interroger le lecteur pour le mode de remise en appelant [**IWMReaderAdvanced2 :: GetPlayMode**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getplaymode).</span><span class="sxs-lookup"><span data-stu-id="163f9-129">At this point, the application can query the reader for the delivery mode by calling [**IWMReaderAdvanced2::GetPlayMode**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getplaymode).</span></span> <span data-ttu-id="163f9-130">Pour le contenu réseau, cette méthode retourne le téléchargement d’un \_ mode de lecture WMT, l’indication du \_ \_ contenu téléchargé ou la \_ \_ diffusion en continu du mode de lecture WMT \_ , indiquant le contenu diffusé en continu.</span><span class="sxs-lookup"><span data-stu-id="163f9-130">For network content, this method will return either WMT\_PLAY\_MODE\_DOWNLOAD, indicating downloaded content, or WMT\_PLAY\_MODE\_STREAMING, indicating streamed content.</span></span>

<span data-ttu-id="163f9-131">Pour commencer à lire le fichier ou le flux, appelez la méthode [**IWMReader :: Start**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-start) .</span><span class="sxs-lookup"><span data-stu-id="163f9-131">To begin reading the file or stream, call the [**IWMReader::Start**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-start) method.</span></span> <span data-ttu-id="163f9-132">Le lecteur envoie une \_ notification de démarrage de mise en mémoire tampon WMT \_ lorsqu’il commence à mettre en mémoire tampon le contenu, et une \_ notification d’arrêt de mise en mémoire tampon WMT lorsque la mise en \_ mémoire tampon est terminée.</span><span class="sxs-lookup"><span data-stu-id="163f9-132">The reader sends a WMT\_BUFFERING\_START notification when it starts to buffer the content, and a WMT\_BUFFERING\_STOP notification when buffering is complete.</span></span> <span data-ttu-id="163f9-133">Tandis que le lecteur met en mémoire tampon du contenu (c’est-à-dire entre ces deux notifications), vous pouvez afficher la progression de la mise en mémoire tampon pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="163f9-133">While the reader is buffering content (that is, between these two notifications), you might want to display the buffering progress to the user.</span></span> <span data-ttu-id="163f9-134">La méthode [**IWMReaderAdvanced2 :: GetBufferProgress**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getbufferprogress) retourne le pourcentage de données qui ont été mises en mémoire tampon et la durée estimée restante.</span><span class="sxs-lookup"><span data-stu-id="163f9-134">The [**IWMReaderAdvanced2::GetBufferProgress**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getbufferprogress) method returns the percentage of data that has been buffered and the estimated time that remains.</span></span> <span data-ttu-id="163f9-135">Pour le contenu téléchargé, vous pouvez également appeler [**IWMReaderAdvanced2 :: GetDownloadProgress**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getdownloadprogress) pour obtenir la progression du téléchargement.</span><span class="sxs-lookup"><span data-stu-id="163f9-135">For downloaded content, you can also call [**IWMReaderAdvanced2::GetDownloadProgress**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getdownloadprogress) to get the download progress.</span></span> <span data-ttu-id="163f9-136">Appelez ces méthodes à plusieurs reprises pour mettre à jour votre affichage, jusqu’à ce que la mise en mémoire tampon soit terminée.</span><span class="sxs-lookup"><span data-stu-id="163f9-136">Call these methods repeatedly to update your display, until buffering has completed.</span></span> <span data-ttu-id="163f9-137">La mise en mémoire tampon peut se produire à nouveau lors de la lecture, en raison de facteurs tels que la congestion du réseau.</span><span class="sxs-lookup"><span data-stu-id="163f9-137">Buffering can occur again during playback, due to factors such as network congestion.</span></span> <span data-ttu-id="163f9-138">Si cela se produit, l’application reçoit une autre notification de démarrage de la \_ mise en mémoire tampon WMT \_ .</span><span class="sxs-lookup"><span data-stu-id="163f9-138">If this occurs, the application receives another WMT\_BUFFERING\_START notification.</span></span>

<span data-ttu-id="163f9-139">Lorsque l’objet lecteur commence à lire le contenu, il envoie une notification de démarrage de WMT \_ .</span><span class="sxs-lookup"><span data-stu-id="163f9-139">When the reader object begins to play the content, it sends a WMT\_STARTED notification.</span></span> <span data-ttu-id="163f9-140">À mesure que chaque échantillon est décodé et devient disponible pour le rendu, le lecteur le transmet à l’application par le biais de la méthode de rappel [**IWMReaderCallback :: OnSample**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadercallback-onsample) .</span><span class="sxs-lookup"><span data-stu-id="163f9-140">As each sample is decoded and becomes available for rendering, the reader passes it to the application through the [**IWMReaderCallback::OnSample**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadercallback-onsample) callback method.</span></span> <span data-ttu-id="163f9-141">À ce stade, le processus est le même que pour la lecture de fichiers locaux.</span><span class="sxs-lookup"><span data-stu-id="163f9-141">At this point, the process is the same as it is for local file playback.</span></span> <span data-ttu-id="163f9-142">Lorsque la lecture s’arrête, le lecteur envoie \_ une \_ notification de fin de \_ diffusion WMT.</span><span class="sxs-lookup"><span data-stu-id="163f9-142">When playback stops, the reader sends a WMT\_END\_OF\_STREAMING notification.</span></span>

## <a name="related-topics"></a><span data-ttu-id="163f9-143">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="163f9-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="163f9-144">**Lecture des fichiers ASF**</span><span class="sxs-lookup"><span data-stu-id="163f9-144">**Reading ASF Files**</span></span>](reading-asf-files.md)
</dt> </dl>

 

 




