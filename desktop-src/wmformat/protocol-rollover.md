---
title: Substitution de protocole
description: Substitution de protocole
ms.assetid: 61db5e2b-4858-446e-9a27-e0305b46683d
keywords:
- Windows Media Format SDK, substitution de protocole
- ASF (Advanced Systems Format), substitution de protocole
- ASF (format de systèmes avancés), substitution de protocole
- substitution de protocole
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2de8d0496467535f5740a10082f82e285c11ef6
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/19/2020
ms.locfileid: "104030808"
---
# <a name="protocol-rollover"></a><span data-ttu-id="c03b7-107">Substitution de protocole</span><span class="sxs-lookup"><span data-stu-id="c03b7-107">Protocol Rollover</span></span>

<span data-ttu-id="c03b7-108">La substitution de protocole est un processus dans lequel l’objet lecteur Découvre le meilleur protocole de diffusion en continu disponible sur un serveur.</span><span class="sxs-lookup"><span data-stu-id="c03b7-108">Protocol rollover is a process whereby the reader object discovers the best streaming protocol available from a server.</span></span> <span data-ttu-id="c03b7-109">Le lecteur utilise la substitution de protocole chaque fois qu’il ouvre une URL qui contient un schéma « MMS ».</span><span class="sxs-lookup"><span data-stu-id="c03b7-109">The reader uses protocol rollover whenever it opens a URL that contains an "mms" scheme.</span></span>

<span data-ttu-id="c03b7-110">Le lecteur prend en charge plusieurs protocoles :</span><span class="sxs-lookup"><span data-stu-id="c03b7-110">The reader supports several protocols:</span></span>

-   <span data-ttu-id="c03b7-111">Protocole RTSP (Real Time Streaming Protocol)</span><span class="sxs-lookup"><span data-stu-id="c03b7-111">Real Time Streaming Protocol (RTSP)</span></span>
-   <span data-ttu-id="c03b7-112">Hypertext Transfer Protocol (HTTP)</span><span class="sxs-lookup"><span data-stu-id="c03b7-112">Hypertext Transfer Protocol (HTTP)</span></span>
-   <span data-ttu-id="c03b7-113">Microsoft Media Server (MMS)</span><span class="sxs-lookup"><span data-stu-id="c03b7-113">Microsoft Media Server (MMS)</span></span>

<span data-ttu-id="c03b7-114">Les protocoles RTSP et MMS se présentent sous deux formes, l’un utilisant [*UDP*](wmformat-glossary.md) comme protocole de remise sous-jacent et l’autre utilisant TCP.</span><span class="sxs-lookup"><span data-stu-id="c03b7-114">The RTSP and MMS protocols both come in two flavors, one using [*UDP*](wmformat-glossary.md) as the underlying delivery protocol, and the other using TCP.</span></span>

<span data-ttu-id="c03b7-115">L’objet lecteur utilise toujours le protocole TCP pour les commandes de contrôle de lecture, mais il peut utiliser le protocole TCP ou UDP pour la remise du contenu diffusé en continu.</span><span class="sxs-lookup"><span data-stu-id="c03b7-115">The reader object always uses TCP for playback control commands, but it can use either TCP or UDP for delivery of the streamed content.</span></span> <span data-ttu-id="c03b7-116">Le protocole UDP est préféré pour la distribution de contenu, car il impose une surcharge de bande passante inférieure à celle de TCP.</span><span class="sxs-lookup"><span data-stu-id="c03b7-116">UDP is preferred for content delivery, because it imposes less bandwidth overhead than TCP.</span></span> <span data-ttu-id="c03b7-117">Le protocole TCP garantit un transport fiable via l’utilisation de « circuits virtuels », mais le coût de cette opération signifie que le protocole TCP n’est pas aussi adapté aux flux multimédias numériques, car l’utilisation efficace de la bande passante est plus importante que les paquets perdus occasionnellement.</span><span class="sxs-lookup"><span data-stu-id="c03b7-117">The TCP protocol ensures reliable transport through the use of "virtual circuits," but the cost of doing so means that TCP is not as well suited for digital media streams, where efficient use of bandwidth is more important that occasional lost packets.</span></span>

<span data-ttu-id="c03b7-118">Quand une URL spécifie « mms:// », le lecteur tente d’utiliser les protocoles suivants pour la remise des données, dans l’ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="c03b7-118">When a URL specifies "mms://", the reader attempts to use the following protocols for data delivery, in the following order:</span></span>

1.  <span data-ttu-id="c03b7-119">RTSP (RTSP avec UDP)</span><span class="sxs-lookup"><span data-stu-id="c03b7-119">RTSPU (RTSP using UDP)</span></span>
2.  <span data-ttu-id="c03b7-120">RTSPt (RTSP avec TCP)</span><span class="sxs-lookup"><span data-stu-id="c03b7-120">RTSPT (RTSP using TCP)</span></span>
3.  <span data-ttu-id="c03b7-121">MMSU (MMS utilisant UDP)</span><span class="sxs-lookup"><span data-stu-id="c03b7-121">MMSU (MMS using UDP)</span></span>
4.  <span data-ttu-id="c03b7-122">MMST (MMS utilisant TCP)</span><span class="sxs-lookup"><span data-stu-id="c03b7-122">MMST (MMS using TCP)</span></span>
5.  <span data-ttu-id="c03b7-123">HTTP</span><span class="sxs-lookup"><span data-stu-id="c03b7-123">HTTP</span></span>

<span data-ttu-id="c03b7-124">HTTP est un protocole unidirectionnel basé sur TCP. il s’agit du protocole utilisé par les serveurs Web.</span><span class="sxs-lookup"><span data-stu-id="c03b7-124">HTTP is a one-way protocol based on TCP, and is the protocol used by Web servers.</span></span> <span data-ttu-id="c03b7-125">La diffusion en continu avec HTTP est moins efficace que RTSP.</span><span class="sxs-lookup"><span data-stu-id="c03b7-125">Streaming with HTTP is less efficient that using RTSP.</span></span> <span data-ttu-id="c03b7-126">Toutefois, la plupart des pare-feu sont configurés pour accepter les requêtes HTTP, alors qu’ils rejettent généralement d’autres protocoles de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="c03b7-126">However, most firewalls are configured to accept HTTP requests, whereas they typically reject other streaming protocols.</span></span>

<span data-ttu-id="c03b7-127">Windows Media Services 9 Series dans Microsoft Windows Server 2003 rejette les demandes MMSU ou MMST d’un lecteur SDK Windows Media format, car RTSP est le protocole de diffusion en continu préféré.</span><span class="sxs-lookup"><span data-stu-id="c03b7-127">Windows Media Services 9 Series in Microsoft Windows Server 2003 will reject any MMSU or MMST requests from a Windows Media Format SDK reader, because RTSP is the preferred streaming protocol.</span></span> <span data-ttu-id="c03b7-128">Windows Media Services version 4,1 et les versions antérieures ne prennent pas en charge RTSP.</span><span class="sxs-lookup"><span data-stu-id="c03b7-128">Windows Media Services version 4.1 and earlier do not support RTSP.</span></span> <span data-ttu-id="c03b7-129">Dans ce cas, l’objet lecteur revient à MMSU ou HTTP.</span><span class="sxs-lookup"><span data-stu-id="c03b7-129">In this case the reader object falls back to MMSU or HTTP.</span></span>

<span data-ttu-id="c03b7-130">La substitution de protocole ne s’applique pas si le schéma d’URL fournit un protocole spécifique, tel que « rtspu:// » pour RTSP ou « https:// » pour HTTP.</span><span class="sxs-lookup"><span data-stu-id="c03b7-130">Protocol rollover does not apply if the URL scheme gives a specific protocol, such as "rtspu://" for RTSPU or "https://" for HTTP.</span></span> <span data-ttu-id="c03b7-131">Si le schéma d’URL est « rtsp:// », le lecteur essaie RTSP et RTSPt, mais pas d’autres.</span><span class="sxs-lookup"><span data-stu-id="c03b7-131">If the URL scheme is "rtsp://", the reader tries RTSPU and RTSPT, but no others.</span></span>

<span data-ttu-id="c03b7-132">Une fois que le lecteur a ouvert un fichier, vous pouvez interroger le protocole qu’il utilise en appelant la méthode [**IWMReaderAdvanced2 :: GetProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getprotocolname) sur le lecteur.</span><span class="sxs-lookup"><span data-stu-id="c03b7-132">After the reader opens a file, you can query which protocol it is using by calling the [**IWMReaderAdvanced2::GetProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getprotocolname) method on the reader.</span></span> <span data-ttu-id="c03b7-133">Pendant que le contenu est diffusé en continu ou téléchargé, cette méthode retourne le nom dès que le contenu est entièrement mis en cache, la méthode **GetProtocolName** retourne la chaîne « cache ».</span><span class="sxs-lookup"><span data-stu-id="c03b7-133">While the content is being streamed or downloaded, this method returns the name as soon as the content is completely cached, the **GetProtocolName** method returns the string "Cache."</span></span>

<span data-ttu-id="c03b7-134">Pour récupérer les noms de tous les protocoles Windows Media Server pris en charge par le lecteur, appelez la méthode [**IWMReaderNetworkConfig :: GetSupportedProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-getsupportedprotocolname) sur le lecteur.</span><span class="sxs-lookup"><span data-stu-id="c03b7-134">To get the names of all the Windows Media server protocols that the reader supports, call the [**IWMReaderNetworkConfig::GetSupportedProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-getsupportedprotocolname) method on the reader.</span></span> <span data-ttu-id="c03b7-135">Vous pouvez désactiver un ou plusieurs des protocoles dans la liste de substitution de protocole du lecteur à l’aide de l’interface **IWMReaderNetworkConfig** .</span><span class="sxs-lookup"><span data-stu-id="c03b7-135">You can disable one or more of the protocols in the reader's protocol rollover list, using **IWMReaderNetworkConfig** interface.</span></span> <span data-ttu-id="c03b7-136">Par exemple, la méthode [**IWMReaderNetworkConfig :: SetEnableTCP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenabletcp) active ou désactive les protocoles TCP, et [**IWMReaderNetworkConfig :: SetEnableUDP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenableudp) active ou désactive les protocoles basés sur UDP.</span><span class="sxs-lookup"><span data-stu-id="c03b7-136">For example, the [**IWMReaderNetworkConfig::SetEnableTCP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenabletcp) method enables or disables the TCP-based protocols, and [**IWMReaderNetworkConfig::SetEnableUDP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenableudp) enables or disables the UDP-based protocols.</span></span> <span data-ttu-id="c03b7-137">Ces méthodes s’appliquent uniquement à la substitution de protocole. les protocoles sont toujours disponibles si le schéma d’URL contient un protocole spécifique.</span><span class="sxs-lookup"><span data-stu-id="c03b7-137">These methods apply only to protocol rollover; the protocols are still available if the URL scheme contains a specific protocol.</span></span> <span data-ttu-id="c03b7-138">Il n’y a généralement aucune raison de désactiver les protocoles utilisés dans la substitution de protocole ; Cela peut dégrader les performances.</span><span class="sxs-lookup"><span data-stu-id="c03b7-138">There is usually no reason to disable any of the protocols used in protocol rollover; doing so can degrade performance.</span></span> <span data-ttu-id="c03b7-139">Toutefois, il peut être utile pour le test.</span><span class="sxs-lookup"><span data-stu-id="c03b7-139">However, it might be useful for testing.</span></span>

 

 




