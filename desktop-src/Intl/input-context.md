---
description: Un &\# 0034 ; contexte d’entrée&\# 0034 ; est une structure interne gérée par le IMM.
ms.assetid: 2b639e30-5368-45bb-943d-db1ab6b62582
title: Contexte d’entrée
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16f1f83a397373e17a7d637b61a3232a3d72acde
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103864881"
---
# <a name="input-context"></a><span data-ttu-id="cc130-103">Contexte d’entrée</span><span class="sxs-lookup"><span data-stu-id="cc130-103">Input Context</span></span>

<span data-ttu-id="cc130-104">Un « contexte d’entrée » est une structure interne gérée par le IMM.</span><span class="sxs-lookup"><span data-stu-id="cc130-104">An "input context" is an internal structure maintained by the IMM.</span></span> <span data-ttu-id="cc130-105">Elle contient des informations sur l’état de l’IME et est utilisée par les fenêtres IME.</span><span class="sxs-lookup"><span data-stu-id="cc130-105">It contains information about the status of the IME and is used by IME windows.</span></span> <span data-ttu-id="cc130-106">Par défaut, le système d’exploitation crée et assigne un contexte d’entrée à chaque thread.</span><span class="sxs-lookup"><span data-stu-id="cc130-106">By default, the operating system creates and assigns an input context to each thread.</span></span> <span data-ttu-id="cc130-107">Dans le thread, ce contexte d’entrée par défaut est une ressource partagée et est associé à chaque nouvelle fenêtre créée.</span><span class="sxs-lookup"><span data-stu-id="cc130-107">Within the thread, this default input context is a shared resource and is associated with each newly created window.</span></span>

<span data-ttu-id="cc130-108">Pour récupérer ou définir des informations dans l’IME, une application qui prend en charge l’IME doit d’abord récupérer un handle vers le contexte d’entrée associé à une fenêtre spécifiée.</span><span class="sxs-lookup"><span data-stu-id="cc130-108">To retrieve or set information in the IME, an IME-aware application must first retrieve a handle to the input context associated with a specified window.</span></span> <span data-ttu-id="cc130-109">L’application récupère le descripteur à l’aide de la fonction [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) .</span><span class="sxs-lookup"><span data-stu-id="cc130-109">The application retrieves the handle by using the [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) function.</span></span> <span data-ttu-id="cc130-110">Elle peut utiliser le handle récupéré dans les appels ultérieurs aux fonctions IMM pour récupérer et définir des valeurs IME, telles que le style de la fenêtre de composition, le style de composition et la position de la fenêtre d’État.</span><span class="sxs-lookup"><span data-stu-id="cc130-110">It can use the retrieved handle in subsequent calls to the IMM functions to retrieve and set IME values, such as the composition window style, the composition style, and the status window position.</span></span> <span data-ttu-id="cc130-111">Une fois que l’application a terminé d’utiliser le contexte, elle doit libérer le contexte à l’aide de la fonction [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) .</span><span class="sxs-lookup"><span data-stu-id="cc130-111">Once the application has finished using the context, it must release the context using the [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) function.</span></span>

<span data-ttu-id="cc130-112">Étant donné que le contexte d’entrée par défaut est une ressource partagée, toute modification apportée par l’application s’applique à toutes les fenêtres du thread.</span><span class="sxs-lookup"><span data-stu-id="cc130-112">Because the default input context is a shared resource, any changes the application makes to it apply to all windows in the thread.</span></span> <span data-ttu-id="cc130-113">Toutefois, l’application peut remplacer ce comportement par défaut en créant son propre contexte d’entrée et en l’associant à une ou plusieurs fenêtres du thread.</span><span class="sxs-lookup"><span data-stu-id="cc130-113">However, the application can override this default behavior by creating its own input context and associating it with one or more windows of the thread.</span></span> <span data-ttu-id="cc130-114">Les modifications apportées à un contexte d’entrée spécifique à l’application s’appliquent uniquement aux fenêtres associées au contexte.</span><span class="sxs-lookup"><span data-stu-id="cc130-114">The changes made to an application-specific input context apply only to the windows associated with the context.</span></span>

<span data-ttu-id="cc130-115">Votre application peut créer un contexte d’entrée à l’aide de la fonction [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) .</span><span class="sxs-lookup"><span data-stu-id="cc130-115">Your application can create an input context by using the [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) function.</span></span> <span data-ttu-id="cc130-116">Pour affecter le contexte à une fenêtre, l’application appelle la fonction [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="cc130-116">To assign the context to a window, the application calls the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="cc130-117">Cette fonction retourne un handle vers le contexte d’entrée associé précédemment.</span><span class="sxs-lookup"><span data-stu-id="cc130-117">This function returns a handle to the previously associated input context.</span></span> <span data-ttu-id="cc130-118">Si l’application n’a pas encore associé de contexte d’entrée à la fenêtre, le handle retourné correspond au contexte d’entrée par défaut.</span><span class="sxs-lookup"><span data-stu-id="cc130-118">If the application has not already associated an input context with the window, the returned handle is for the default input context.</span></span> <span data-ttu-id="cc130-119">En règle générale, l’application enregistre ce handle et le réassocie ultérieurement à la fenêtre lorsque le contexte d’entrée personnalisé n’est plus nécessaire.</span><span class="sxs-lookup"><span data-stu-id="cc130-119">Typically, the application saves this handle and later reassociates it with the window when the customized input context is no longer needed.</span></span>

<span data-ttu-id="cc130-120">Une fois qu’un contexte d’entrée est associé à une fenêtre, le système d’exploitation sélectionne automatiquement ce contexte quand la fenêtre est activée et reçoit le focus d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc130-120">Once an input context is associated with a window, the operating system automatically selects that context when the window is activated and receives the input focus.</span></span> <span data-ttu-id="cc130-121">Le style et d’autres informations dans le contexte d’entrée affectent l’entrée au clavier suivante pour cette fenêtre, en déterminant le fonctionnement de l’IME.</span><span class="sxs-lookup"><span data-stu-id="cc130-121">The style and other information in the input context affects subsequent keyboard input for that window, determining how the IME operates.</span></span>

<span data-ttu-id="cc130-122">Votre application doit détruire tout contexte d’entrée personnalisé avant qu’elle ne se termine.</span><span class="sxs-lookup"><span data-stu-id="cc130-122">Your application must destroy any customized input context before it terminates.</span></span> <span data-ttu-id="cc130-123">Tout d’abord, l’application supprime le contexte d’entrée de toute association qu’il a faite avec Windows dans le thread à l’aide de la fonction [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="cc130-123">First, the application removes the input context from any association it has made with windows in the thread by using the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="cc130-124">Ensuite, il appelle la fonction [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) .</span><span class="sxs-lookup"><span data-stu-id="cc130-124">Then, it calls the [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cc130-125">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="cc130-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cc130-126">À propos du gestionnaire de méthode d’entrée</span><span class="sxs-lookup"><span data-stu-id="cc130-126">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 



