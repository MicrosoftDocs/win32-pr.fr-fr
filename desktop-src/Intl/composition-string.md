---
description: La chaîne de composition est le texte actuel dans la fenêtre de composition.
ms.assetid: ab226567-f68d-4fa4-9ead-e9bfabde927e
title: Chaîne de composition
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5e5cb63163ca9a8076edc4d01053e4baeffc619c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103952123"
---
# <a name="composition-string"></a><span data-ttu-id="0145f-103">Chaîne de composition</span><span class="sxs-lookup"><span data-stu-id="0145f-103">Composition String</span></span>

<span data-ttu-id="0145f-104">La chaîne de composition est le texte actuel dans la fenêtre de composition.</span><span class="sxs-lookup"><span data-stu-id="0145f-104">The composition string is the current text in the composition window.</span></span> <span data-ttu-id="0145f-105">Il s’agit du texte que l’IME convertit en caractères finaux.</span><span class="sxs-lookup"><span data-stu-id="0145f-105">This is the text that the IME converts to final characters.</span></span> <span data-ttu-id="0145f-106">Chaque chaîne de composition se compose d’une ou plusieurs « clauses ».</span><span class="sxs-lookup"><span data-stu-id="0145f-106">Each composition string consists of one or more "clauses".</span></span> <span data-ttu-id="0145f-107">Une clause est la plus petite combinaison de caractères que l’IME peut convertir en caractère final.</span><span class="sxs-lookup"><span data-stu-id="0145f-107">A clause is the smallest combination of characters that the IME can convert to a final character.</span></span> <span data-ttu-id="0145f-108">Pour récupérer et définir la chaîne de composition, l’application appelle les fonctions [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) et [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) , respectivement.</span><span class="sxs-lookup"><span data-stu-id="0145f-108">To get and set the composition string, the application calls the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) and [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) functions, respectively.</span></span>

<span data-ttu-id="0145f-109">Lorsque l’utilisateur entre du texte dans la fenêtre de composition, l’IME effectue le suivi de l’état de la chaîne de composition.</span><span class="sxs-lookup"><span data-stu-id="0145f-109">As the user enters text in the composition window, the IME tracks the status of the composition string.</span></span> <span data-ttu-id="0145f-110">Cet État comprend des informations sur les attributs, les informations sur les clauses, les informations de frappe et la position du curseur.</span><span class="sxs-lookup"><span data-stu-id="0145f-110">This status includes attribute information, clause information, typing information, and cursor position.</span></span> <span data-ttu-id="0145f-111">L’application peut récupérer l’état de la composition à l’aide de la fonction [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="0145f-111">The application can retrieve the composition status by using the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) function.</span></span>

<span data-ttu-id="0145f-112">Les informations d’attribut sont rendues dans un tableau de valeurs 8 bits qui spécifie l’état des caractères dans la chaîne de composition.</span><span class="sxs-lookup"><span data-stu-id="0145f-112">Attribute information is rendered in an array of 8-bit values that specifies the status of characters in the composition string.</span></span> <span data-ttu-id="0145f-113">Tous les caractères d’une clause doivent avoir le même attribut.</span><span class="sxs-lookup"><span data-stu-id="0145f-113">All characters of one clause must have the same attribute.</span></span> <span data-ttu-id="0145f-114">Le tableau inclut une valeur pour chaque octet de la chaîne, y compris un octet pour le lead et le deuxième octet de tous les caractères codés sur deux octets de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="0145f-114">The array includes one value for each byte in the string, including one byte each for the lead and second bytes of any double-byte characters in the string.</span></span> <span data-ttu-id="0145f-115">Pour chaque valeur du tableau, les bits 0 à 3 peuvent être une combinaison des valeurs suivantes.</span><span class="sxs-lookup"><span data-stu-id="0145f-115">For each value in the array, bits 0 through 3 can be one combination of the following values.</span></span>



| <span data-ttu-id="0145f-116">Valeur</span><span class="sxs-lookup"><span data-stu-id="0145f-116">Value</span></span>                      | <span data-ttu-id="0145f-117">Signification</span><span class="sxs-lookup"><span data-stu-id="0145f-117">Meaning</span></span>                                                                                                   |
|----------------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0145f-118">\_entrée attr</span><span class="sxs-lookup"><span data-stu-id="0145f-118">ATTR\_INPUT</span></span>                | <span data-ttu-id="0145f-119">Caractère entré par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0145f-119">Character being entered by the user.</span></span> <span data-ttu-id="0145f-120">L’IME n’a pas encore pu convertir ce caractère.</span><span class="sxs-lookup"><span data-stu-id="0145f-120">The IME has yet to convert this character.</span></span>                           |
| <span data-ttu-id="0145f-121">\_erreur d’entrée attr \_</span><span class="sxs-lookup"><span data-stu-id="0145f-121">ATTR\_INPUT\_ERROR</span></span>         | <span data-ttu-id="0145f-122">Caractère d’erreur que l’IME ne peut pas convertir.</span><span class="sxs-lookup"><span data-stu-id="0145f-122">An error character that the IME cannot convert.</span></span> <span data-ttu-id="0145f-123">Par exemple, l’IME ne peut pas réunir des consonnes.</span><span class="sxs-lookup"><span data-stu-id="0145f-123">For example, the IME cannot put together some consonants.</span></span> |
| <span data-ttu-id="0145f-124">\_cible attr \_ convertie</span><span class="sxs-lookup"><span data-stu-id="0145f-124">ATTR\_TARGET\_CONVERTED</span></span>    | <span data-ttu-id="0145f-125">Caractère sélectionné par l’utilisateur, puis converti par l’IME.</span><span class="sxs-lookup"><span data-stu-id="0145f-125">Character selected by the user and then converted by the IME.</span></span>                                             |
| <span data-ttu-id="0145f-126">ATTR \_ converti</span><span class="sxs-lookup"><span data-stu-id="0145f-126">ATTR\_CONVERTED</span></span>            | <span data-ttu-id="0145f-127">Caractère que l’IME a déjà converti.</span><span class="sxs-lookup"><span data-stu-id="0145f-127">Character that the IME has already converted.</span></span>                                                             |
| <span data-ttu-id="0145f-128">\_NOTCONVERTED cible d’attr \_</span><span class="sxs-lookup"><span data-stu-id="0145f-128">ATTR\_TARGET\_NOTCONVERTED</span></span> | <span data-ttu-id="0145f-129">Caractère en cours de conversion.</span><span class="sxs-lookup"><span data-stu-id="0145f-129">Character being converted.</span></span> <span data-ttu-id="0145f-130">L’utilisateur a sélectionné ce caractère, mais l’IME ne l’a pas encore converti.</span><span class="sxs-lookup"><span data-stu-id="0145f-130">The user has selected this character but the IME has not yet converted it.</span></span>     |
| <span data-ttu-id="0145f-131">\_FIXEDCONVERTED attr</span><span class="sxs-lookup"><span data-stu-id="0145f-131">ATTR\_FIXEDCONVERTED</span></span>       | <span data-ttu-id="0145f-132">Caractères que l’IME ne convertira plus.</span><span class="sxs-lookup"><span data-stu-id="0145f-132">Characters that the IME will no longer convert.</span></span>                                                           |



 

<span data-ttu-id="0145f-133">Toutes les autres valeurs sont réservées.</span><span class="sxs-lookup"><span data-stu-id="0145f-133">All other values are reserved.</span></span> <span data-ttu-id="0145f-134">En japonais, tout caractère non converti ayant l' \_ attribut d’entrée attr est un caractère hiragana, katakana ou alphanumérique.</span><span class="sxs-lookup"><span data-stu-id="0145f-134">In Japanese, any unconverted character having the ATTR\_INPUT attribute is a hiragana, katakana, or alphanumeric character.</span></span> <span data-ttu-id="0145f-135">En coréen, cet attribut représente un caractère HANGÛL que l’IME n’a pas encore converti.</span><span class="sxs-lookup"><span data-stu-id="0145f-135">In Korean, this attribute represents a Hangul character that the IME has not yet converted.</span></span> <span data-ttu-id="0145f-136">Dans le chinois traditionnel et le chinois simplifié, chaque éditeur IME peut limiter son caractère dans une certaine plage.</span><span class="sxs-lookup"><span data-stu-id="0145f-136">In Traditional Chinese and Simplified Chinese, each IME can limit its character within some range.</span></span>

<span data-ttu-id="0145f-137">Les informations de clause incluses dans l’état de la chaîne de composition sont un tableau de valeurs 32 bits qui spécifie les positions des clauses dans la chaîne de composition.</span><span class="sxs-lookup"><span data-stu-id="0145f-137">The clause information included in the composition string status is an array of 32-bit values that specifies the positions of the clauses in the composition string.</span></span> <span data-ttu-id="0145f-138">Le tableau comprend une valeur pour chaque clause et une valeur finale qui spécifie la longueur de la chaîne complète.</span><span class="sxs-lookup"><span data-stu-id="0145f-138">The array includes one value for each clause and a final value that specifies the length of the full string.</span></span> <span data-ttu-id="0145f-139">Chaque valeur du tableau spécifie l’offset, en octets, entre le début de la chaîne et la clause.</span><span class="sxs-lookup"><span data-stu-id="0145f-139">Each value in the array specifies the offset, in bytes, from the beginning of the string to the clause.</span></span> <span data-ttu-id="0145f-140">La première valeur est toujours 0, car la première clause commence toujours au début de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="0145f-140">The first value is always 0 because the first clause always starts at the beginning of the string.</span></span> <span data-ttu-id="0145f-141">Par exemple, si une chaîne a deux clauses, les informations de la clause ont trois valeurs : la première valeur est 0, la deuxième est le décalage de la deuxième clause et la troisième valeur est la longueur de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="0145f-141">For example, if a string has two clauses, the clause information has three values: the first value is 0, the second value is the offset of the second clause, and the third value is the length of the string.</span></span> <span data-ttu-id="0145f-142">Pour Unicode, la position d’une clause est comptée en caractères Unicode, et la longueur d’une chaîne est la taille en caractères Unicode.</span><span class="sxs-lookup"><span data-stu-id="0145f-142">For Unicode, the position of a clause is counted in Unicode characters, and the length of a string is the size in Unicode characters.</span></span>

<span data-ttu-id="0145f-143">Les informations de saisie incluses dans l’état de la chaîne de composition sont une chaîne de caractères se terminant par un caractère null qui représente les caractères que l’utilisateur entre au clavier.</span><span class="sxs-lookup"><span data-stu-id="0145f-143">The typing information included in the composition string status is a null-terminated character string representing the characters that the user enters at the keyboard.</span></span>

<span data-ttu-id="0145f-144">La position du curseur incluse dans l’état de la chaîne de composition est une valeur indiquant la position du curseur par rapport aux caractères de la chaîne de composition.</span><span class="sxs-lookup"><span data-stu-id="0145f-144">The cursor position included in the composition string status is a value indicating the position of the cursor relative to the characters in the composition string.</span></span> <span data-ttu-id="0145f-145">La valeur est l’offset, en octets, à partir du début de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="0145f-145">The value is the offset, in bytes, from the beginning of the string.</span></span> <span data-ttu-id="0145f-146">Si cette valeur est égale à 0, le curseur est immédiatement avant le premier caractère de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="0145f-146">If this value is 0, the cursor is immediately before the first character in the string.</span></span> <span data-ttu-id="0145f-147">Si la valeur est égale à la longueur de la chaîne, le curseur se trouve immédiatement après le dernier caractère.</span><span class="sxs-lookup"><span data-stu-id="0145f-147">If the value is equal to the length of the string, the cursor is immediately after the last character.</span></span> <span data-ttu-id="0145f-148">Si la valeur est 1, le curseur n’est pas présent.</span><span class="sxs-lookup"><span data-stu-id="0145f-148">If the value is 1, the cursor is not present.</span></span> <span data-ttu-id="0145f-149">Pour Unicode, la position et la longueur sont mesurées en caractères Unicode.</span><span class="sxs-lookup"><span data-stu-id="0145f-149">For Unicode, both position and length are measured in Unicode characters.</span></span>

<span data-ttu-id="0145f-150">Votre application peut définir la chaîne de composition ou les éléments de l’état de la composition à l’aide de la fonction [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="0145f-150">Your application can set the composition string or elements of the composition status by using the [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) function.</span></span> <span data-ttu-id="0145f-151">Pour vous assurer que la fenêtre de composition met à jour son apparence en fonction de ces modifications, la fonction permet à l’application d’envoyer un message de notification à la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="0145f-151">To ensure that the composition window updates its appearance based on these changes, the function allows the application to send a notification message to the window.</span></span> <span data-ttu-id="0145f-152">Les applications qui définissent une combinaison d’éléments d’état de composition désactivent généralement les notifications pour tous les appels à cette fonction, sauf le dernier, afin qu’un seul message de notification soit généré pour la fenêtre de composition.</span><span class="sxs-lookup"><span data-stu-id="0145f-152">Applications that set a combination of composition status elements typically disable notifications for all but the last call to this function so that only one notification message is generated for the composition window.</span></span>

<span data-ttu-id="0145f-153">Enfin, le contrôle d’édition prend en charge deux messages pour modifier la gestion des chaînes de composition par l’IME.</span><span class="sxs-lookup"><span data-stu-id="0145f-153">Finally, the edit control supports two messages for changing the handling of composition strings by the IME.</span></span> <span data-ttu-id="0145f-154">Pour plus d’informations, consultez [**em \_ GETIMESTATUS**](../controls/em-getimestatus.md) et [**em \_ SETIMESTATUS**](../controls/em-setimestatus.md).</span><span class="sxs-lookup"><span data-stu-id="0145f-154">For more information, see [**EM\_GETIMESTATUS**](../controls/em-getimestatus.md) and [**EM\_SETIMESTATUS**](../controls/em-setimestatus.md).</span></span> <span data-ttu-id="0145f-155">Pour plus d’informations sur le contrôle d’édition, consultez [contrôle d’édition](../controls/edit-controls.md).</span><span class="sxs-lookup"><span data-stu-id="0145f-155">For more information on the edit control, see [Edit Control](../controls/edit-controls.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="0145f-156">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0145f-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0145f-157">À propos du gestionnaire de méthode d’entrée</span><span class="sxs-lookup"><span data-stu-id="0145f-157">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 
