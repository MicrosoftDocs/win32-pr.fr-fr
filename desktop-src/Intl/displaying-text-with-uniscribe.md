---
description: Vos applications peuvent utiliser les fonctions de l’API Uniscribe pour prendre en charge la typographie et l’affichage et la modification du texte international. Uniscribe utilise le paragraphe comme unité pour l’affichage du texte, et la fonctionnalité Uniscribe doit être utilisée pour le paragraphe entier.
ms.assetid: e1adc567-0445-4deb-8634-25653f82127c
title: Affichage de texte avec Uniscribe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: baeb9a2be4d00efaa2681097ddefe3a6de4c576b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104320241"
---
# <a name="displaying-text-with-uniscribe"></a><span data-ttu-id="691f5-104">Affichage de texte avec Uniscribe</span><span class="sxs-lookup"><span data-stu-id="691f5-104">Displaying Text with Uniscribe</span></span>

<span data-ttu-id="691f5-105">Vos applications peuvent utiliser les fonctions de l’API Uniscribe pour prendre en charge la typographie et l’affichage et la modification du texte international.</span><span class="sxs-lookup"><span data-stu-id="691f5-105">Your applications can use Uniscribe API functions to support typography and the display and editing of international text.</span></span> <span data-ttu-id="691f5-106">Uniscribe utilise le paragraphe comme unité pour l’affichage du texte, et la fonctionnalité Uniscribe doit être utilisée pour le paragraphe entier.</span><span class="sxs-lookup"><span data-stu-id="691f5-106">Uniscribe uses the paragraph as the unit for text display, and the Uniscribe functionality must be used for the entire paragraph.</span></span>

<span data-ttu-id="691f5-107">Lorsque vous utilisez Uniscribe pour l’affichage de texte, une application doit passer par un processus de mise en forme (« disposition »), généralement à l’aide de Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="691f5-107">When using Uniscribe for display of text, an application must go through a formatting ("layout") process, typically using Uniscribe.</span></span> <span data-ttu-id="691f5-108">L’application divise un paragraphe de texte en chaînes de caractères avec le même style, appelé « exécutions ».</span><span class="sxs-lookup"><span data-stu-id="691f5-108">The application divides a text paragraph into strings of characters with the same style, called "runs".</span></span> <span data-ttu-id="691f5-109">Le style est déterminé par l’implémentation particulière, mais il comprend généralement des attributs tels que la police, la taille et la couleur.</span><span class="sxs-lookup"><span data-stu-id="691f5-109">The style is determined by the particular implementation, but typically includes such attributes as font, size, and color.</span></span> <span data-ttu-id="691f5-110">Lors de la définition des exécutions, l’application peut également appliquer d’autres informations, telles que la langue et les données de paramètres régionaux, qui sont conservées pour une utilisation avec les outils lexicaux.</span><span class="sxs-lookup"><span data-stu-id="691f5-110">In defining runs, the application can also apply other information, such as language and locale data maintained for use with lexical tools.</span></span> <span data-ttu-id="691f5-111">Par exemple, une application peut traiter en tant qu’exécution distincte un passage dans un texte principalement anglais qui est rendu en français.</span><span class="sxs-lookup"><span data-stu-id="691f5-111">For example, an application might treat as a separate run a passage in a primarily English text that is rendered in French.</span></span>

<span data-ttu-id="691f5-112">Une fois qu’elle a déterminé les exécutions de tous les paragraphes, l’application divise chaque paragraphe en chaînes ayant les mêmes script et direction (« items »).</span><span class="sxs-lookup"><span data-stu-id="691f5-112">Once it has determined the runs for all paragraphs, the application divides each paragraph into strings that have the same script and direction ("items").</span></span> <span data-ttu-id="691f5-113">L’application applique les informations de l’élément pour produire des exécutions uniques dans le script et la direction et qui sont entièrement dans un seul élément (« Ranges »).</span><span class="sxs-lookup"><span data-stu-id="691f5-113">The application applies the item information to produce runs that are unique in script and direction and fall entirely within a single item ("ranges").</span></span>

<span data-ttu-id="691f5-114">La répartition d’un élément en plages est quelque peu arbitraire, bien qu’une plage soit composée d’un ou plusieurs regroupements de caractères indivisibles définis par script consécutifs, appelés « clusters ».</span><span class="sxs-lookup"><span data-stu-id="691f5-114">The breakdown of an item into ranges is somewhat arbitrary, although a range should consist of one or more consecutive script-defined, indivisible character groupings, called "clusters."</span></span> <span data-ttu-id="691f5-115">Pour les langues européennes, un cluster correspond généralement à un caractère de page de codes unique ou à un point de code Unicode, et se compose d’un seul [glyphe](uniscribe-glossary.md).</span><span class="sxs-lookup"><span data-stu-id="691f5-115">For European languages, a cluster typically corresponds to a single code page character or Unicode code point, and consists of a single [glyph](uniscribe-glossary.md).</span></span> <span data-ttu-id="691f5-116">Toutefois, dans les langages tels que le thaï, un cluster est un regroupement de glyphes et correspond à plusieurs caractères ou points de code consécutifs.</span><span class="sxs-lookup"><span data-stu-id="691f5-116">However, in languages such as Thai, a cluster is a grouping of glyphs and corresponds to multiple consecutive characters or code points.</span></span> <span data-ttu-id="691f5-117">Par exemple, un cluster thaï peut contenir une consonne, une voyelle et une marque de ton.</span><span class="sxs-lookup"><span data-stu-id="691f5-117">For example, a Thai cluster might contain a consonant, a vowel, and a tone mark.</span></span> <span data-ttu-id="691f5-118">Pour qu’il n’interrompe pas les clusters, l’application doit généralement utiliser les plages les plus longues qu’il peut ou utiliser ses propres informations lexicales pour s’arrêter entre des plages situées dans des endroits qui ne sont pas au milieu d’un cluster.</span><span class="sxs-lookup"><span data-stu-id="691f5-118">So that it does not break clusters, the application typically should either use the longest ranges it can or use its own lexical information to break between ranges in places that are not in the middle of a cluster.</span></span>

<span data-ttu-id="691f5-119">Lorsqu’il a identifié les clusters dans chaque plage, l’application doit déterminer la taille de chaque cluster.</span><span class="sxs-lookup"><span data-stu-id="691f5-119">When it has identified the clusters in each range, the application must determine the size of each cluster.</span></span> <span data-ttu-id="691f5-120">Elle utilise Uniscribe pour additionner les clusters afin de déterminer la taille de chaque plage.</span><span class="sxs-lookup"><span data-stu-id="691f5-120">It uses Uniscribe to sum the clusters to determine the size of each range.</span></span> <span data-ttu-id="691f5-121">Ensuite, l’application additionne les tailles des plages jusqu’à ce qu’elles débordent une ligne, autrement dit, atteint la marge.</span><span class="sxs-lookup"><span data-stu-id="691f5-121">Then the application sums the sizes of the ranges until they overflow a line, that is, reach the margin.</span></span> <span data-ttu-id="691f5-122">La plage dépassant la ligne est divisée entre la ligne active et la ligne suivante.</span><span class="sxs-lookup"><span data-stu-id="691f5-122">The range that overflows the line is divided between the current line and the next line.</span></span> <span data-ttu-id="691f5-123">Pour chaque ligne, l’application crée une carte à partir de la position visuelle à la position logique pour chaque plage.</span><span class="sxs-lookup"><span data-stu-id="691f5-123">For each line, the application builds a map from visual position to logical position for each range.</span></span> <span data-ttu-id="691f5-124">L’application forme ensuite les points de code de chaque plage en glyphes, qu’il est possible de positionner et de restituer par la suite.</span><span class="sxs-lookup"><span data-stu-id="691f5-124">Then the application shapes the code points for each range into glyphs, which it can subsequently position and render.</span></span>

<span data-ttu-id="691f5-125">Une application n’effectue une mise en page de texte qu’une seule fois.</span><span class="sxs-lookup"><span data-stu-id="691f5-125">An application does text layout only one time.</span></span> <span data-ttu-id="691f5-126">Par la suite, il enregistre les glyphes et les positions à des fins d’affichage, ou il les génère chaque fois qu’il affiche le texte, ce qui représente un compromis entre la vitesse et la mémoire.</span><span class="sxs-lookup"><span data-stu-id="691f5-126">Afterwards, it either saves the glyphs and positions for display purposes or it generates them each time it displays the text, with the tradeoff being speed versus memory.</span></span> <span data-ttu-id="691f5-127">Une application classique implémente le processus de disposition une seule fois, puis génère les glyphes et les positions chaque fois qu’il affiche le texte.</span><span class="sxs-lookup"><span data-stu-id="691f5-127">A typical application implements the layout process once, then generates the glyphs and positions each time it displays the text.</span></span>

<span data-ttu-id="691f5-128">Une application qui utilise des [scripts complexes](uniscribe-glossary.md) présente les problèmes suivants avec une approche simple de la disposition et de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="691f5-128">An application that uses [complex scripts](uniscribe-glossary.md) has the following problems with a simple approach to layout and display.</span></span>

-   <span data-ttu-id="691f5-129">La largeur d’un caractère de script complexe dépend de son contexte.</span><span class="sxs-lookup"><span data-stu-id="691f5-129">The width of a complex script character depends on its context.</span></span> <span data-ttu-id="691f5-130">Il n’est pas possible d’enregistrer les largeurs dans des tables simples.</span><span class="sxs-lookup"><span data-stu-id="691f5-130">It is not possible to save the widths in simple tables.</span></span>
-   <span data-ttu-id="691f5-131">L’interruption entre les mots dans des scripts tels que le thaï requiert la prise en charge du dictionnaire.</span><span class="sxs-lookup"><span data-stu-id="691f5-131">Breaking between words in scripts such as Thai requires dictionary support.</span></span> <span data-ttu-id="691f5-132">Par exemple, aucun caractère de séparation n’est utilisé entre les mots thaï.</span><span class="sxs-lookup"><span data-stu-id="691f5-132">For example, no separator character is used between Thai words.</span></span>
-   <span data-ttu-id="691f5-133">L’arabe, l’hébreu, le persan, l’ourdou et d’autres langages de [texte bidirectionnel](uniscribe-glossary.md) nécessitent une réorganisation avant l’affichage.</span><span class="sxs-lookup"><span data-stu-id="691f5-133">Arabic, Hebrew, Persian, Urdu, and other [bidirectional text](uniscribe-glossary.md) languages require reordering before display.</span></span>
-   <span data-ttu-id="691f5-134">Une certaine forme d’association de polices est souvent nécessaire pour utiliser facilement des scripts complexes.</span><span class="sxs-lookup"><span data-stu-id="691f5-134">Some form of font association is often required to easily use complex scripts.</span></span>

<span data-ttu-id="691f5-135">Le fait que Uniscribe utilise le paragraphe comme unité d’affichage permet à l’application de traiter correctement ces problèmes de script complexes.</span><span class="sxs-lookup"><span data-stu-id="691f5-135">The fact that Uniscribe uses the paragraph as the display unit helps the application deal adequately with these complex script issues.</span></span>

> [!Note]  
> <span data-ttu-id="691f5-136">Uniscribe doit être utilisé pour un paragraphe entier, même si les sections du paragraphe ne sont pas des scripts complexes.</span><span class="sxs-lookup"><span data-stu-id="691f5-136">Uniscribe must be used for an entire paragraph, even if sections of the paragraph are not complex scripts.</span></span>

 

<span data-ttu-id="691f5-137">Comme indiqué dans le tableau suivant, Uniscribe version 1,6 ou ultérieure prend en charge plusieurs fonctions qui tirent parti des balises OpenType.</span><span class="sxs-lookup"><span data-stu-id="691f5-137">As shown in the following table, Uniscribe version 1.6 or greater supports several functions that take advantage of OpenType tags.</span></span> <span data-ttu-id="691f5-138">Elles peuvent être remplacées par les fonctions Uniscribe régulières correspondantes.</span><span class="sxs-lookup"><span data-stu-id="691f5-138">They can be substituted for the corresponding regular Uniscribe functions.</span></span> <span data-ttu-id="691f5-139">En général, vos applications doivent fonctionner entièrement avec les fonctions d’un jeu ou de l’autre, et ne doivent pas essayer de « mélanger et faire correspondre » aux fonctions.</span><span class="sxs-lookup"><span data-stu-id="691f5-139">Generally your applications should work entirely with functions from one set or the other and should not attempt to "mix and match" functions.</span></span>



| <span data-ttu-id="691f5-140">Fonction Uniscribe normale</span><span class="sxs-lookup"><span data-stu-id="691f5-140">Regular Uniscribe function</span></span>             | <span data-ttu-id="691f5-141">Fonction OpenType équivalente</span><span class="sxs-lookup"><span data-stu-id="691f5-141">Equivalent OpenType function</span></span>                           |
|----------------------------------------|--------------------------------------------------------|
| [<span data-ttu-id="691f5-142">**ScriptItemize**</span><span class="sxs-lookup"><span data-stu-id="691f5-142">**ScriptItemize**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) | [<span data-ttu-id="691f5-143">**ScriptItemizeOpenType**</span><span class="sxs-lookup"><span data-stu-id="691f5-143">**ScriptItemizeOpenType**</span></span>](/windows/desktop/api/usp10/nf-usp10-scriptitemizeopentype) |
| [<span data-ttu-id="691f5-144">**ScriptShape**</span><span class="sxs-lookup"><span data-stu-id="691f5-144">**ScriptShape**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshape)     | [<span data-ttu-id="691f5-145">**ScriptShapeOpenType**</span><span class="sxs-lookup"><span data-stu-id="691f5-145">**ScriptShapeOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype)     |
| [<span data-ttu-id="691f5-146">**ScriptPlace**</span><span class="sxs-lookup"><span data-stu-id="691f5-146">**ScriptPlace**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplace)     | [<span data-ttu-id="691f5-147">**ScriptPlaceOpenType**</span><span class="sxs-lookup"><span data-stu-id="691f5-147">**ScriptPlaceOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplaceopentype)     |



 

## <a name="lay-out-text-using-uniscribe"></a><span data-ttu-id="691f5-148">Disposition du texte à l’aide de Uniscribe</span><span class="sxs-lookup"><span data-stu-id="691f5-148">Lay Out Text Using Uniscribe</span></span>

<span data-ttu-id="691f5-149">Votre application peut utiliser les étapes suivantes pour mettre en page un paragraphe de texte avec Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="691f5-149">Your application can use the following steps to lay out out a text paragraph with Uniscribe.</span></span> <span data-ttu-id="691f5-150">Cette procédure suppose que l’application a déjà divisé le paragraphe en exécutions.</span><span class="sxs-lookup"><span data-stu-id="691f5-150">This procedure assumes that the application has already divided the paragraph into runs.</span></span>

1.  <span data-ttu-id="691f5-151">Appelez [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) uniquement lors du démarrage ou de la réception d’un message [**WM \_ SETTINGCHANGE**](../winmsg/wm-settingchange.md) .</span><span class="sxs-lookup"><span data-stu-id="691f5-151">Call [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) only when starting or when receiving a [**WM\_SETTINGCHANGE**](../winmsg/wm-settingchange.md) message.</span></span>
2.  <span data-ttu-id="691f5-152">Facultatif Appelez [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) pour déterminer si le paragraphe requiert un traitement complexe.</span><span class="sxs-lookup"><span data-stu-id="691f5-152">(Optional) Call [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) to determine if the paragraph requires complex processing.</span></span>
3.  <span data-ttu-id="691f5-153">Facultatif Si vous utilisez Uniscribe pour gérer le texte bidirectionnel et/ou la substitution de chiffres, appelez [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) pour préparer [**le \_ contrôle de script**](/windows/win32/api/usp10/ns-usp10-script_control) et les structures d' [**\_ État de script**](/windows/win32/api/usp10/ns-usp10-script_state) comme entrées à [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span><span class="sxs-lookup"><span data-stu-id="691f5-153">(Optional) If using Uniscribe to handle bidirectional text and/or digit substitution, call [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) to prepare the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures as inputs to [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span></span> <span data-ttu-id="691f5-154">Si vous ignorez cette étape, mais que vous avez toujours besoin d’une substitution de chiffre, substituez les chiffres nationaux pour Unicode U + 0030 à U + 0039 (chiffres européens).</span><span class="sxs-lookup"><span data-stu-id="691f5-154">If skipping this step, but still requiring digit substitution, substitute national digits for Unicode U+0030 through U+0039 (European digits).</span></span> <span data-ttu-id="691f5-155">Pour plus d’informations sur la substitution de chiffres, consultez [Shape digits](digit-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="691f5-155">For information about digit substitution, see [Digit Shapes](digit-shapes.md).</span></span>
4.  <span data-ttu-id="691f5-156">Appelez [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) pour diviser le paragraphe en éléments.</span><span class="sxs-lookup"><span data-stu-id="691f5-156">Call [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) to divide the paragraph into items.</span></span> <span data-ttu-id="691f5-157">Si vous n’utilisez pas Uniscribe pour la substitution de chiffres et que l’ordre bidirectionnel est connu, par exemple en raison de la disposition du clavier utilisée pour entrer le caractère, appelez **ScriptItemize**.</span><span class="sxs-lookup"><span data-stu-id="691f5-157">If not using Uniscribe for digit substitution and the bidirectional order is known, for example, because of the keyboard layout used to enter the character, call **ScriptItemize**.</span></span> <span data-ttu-id="691f5-158">Dans l’appel, fournissez des pointeurs null pour le [**\_ contrôle de script**](/windows/win32/api/usp10/ns-usp10-script_control) et les structures d' [**\_ État de script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="691f5-158">In the call, provide null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span> <span data-ttu-id="691f5-159">Cette technique génère des éléments en utilisant uniquement le moteur de mise en forme, et les éléments peuvent être réorganisés à l’aide des informations du moteur.</span><span class="sxs-lookup"><span data-stu-id="691f5-159">This technique generates items by use of the shaping engine only, and the items can be reordered using the engine information.</span></span>
    > [!Note]  
    > <span data-ttu-id="691f5-160">En règle générale, les applications qui fonctionnent uniquement avec des scripts de gauche à droite et sans substitution de chiffres doivent passer des pointeurs null pour le [**\_ contrôle de script**](/windows/win32/api/usp10/ns-usp10-script_control) et les structures d' [**\_ État de script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="691f5-160">Typically, applications that work only with left-to-right scripts and without any digit substitution should pass null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span>

     

5.  <span data-ttu-id="691f5-161">Fusionnez les informations d’élément avec les informations d’exécution pour produire des plages.</span><span class="sxs-lookup"><span data-stu-id="691f5-161">Merge the item information with the run information to produce ranges.</span></span>
6.  <span data-ttu-id="691f5-162">Appelez [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) pour identifier les clusters et générer des glyphes.</span><span class="sxs-lookup"><span data-stu-id="691f5-162">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to identify clusters and generate glyphs.</span></span>
7.  <span data-ttu-id="691f5-163">Si [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) retourne le code USP \_ E \_ script \_ n’est pas \_ dans \_ la police ou S \_ OK avec la sortie contenant des glyphes manquants, sélectionnez les caractères d’une autre police.</span><span class="sxs-lookup"><span data-stu-id="691f5-163">If [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) returns the code USP\_E\_SCRIPT\_NOT\_IN\_FONT or S\_OK with the output containing missing glyphs, select characters from a different font.</span></span> <span data-ttu-id="691f5-164">Remplacez une autre police ou désactivez la mise en forme en affectant la valeur non définie au membre **escript** de la structure d' [**\_ analyse de script**](/windows/win32/api/usp10/ns-usp10-script_analysis) passée à **ScriptShape** \_ .</span><span class="sxs-lookup"><span data-stu-id="691f5-164">Either substitute another font or disable shaping by setting the **eScript** member of the [**SCRIPT\_ANALYSIS**](/windows/win32/api/usp10/ns-usp10-script_analysis) structure passed to **ScriptShape** to SCRIPT\_UNDEFINED.</span></span> <span data-ttu-id="691f5-165">Pour plus d’informations, consultez Utilisation de la [police de secours](using-font-fallback.md).</span><span class="sxs-lookup"><span data-stu-id="691f5-165">For more information, see [Using Font Fallback](using-font-fallback.md).</span></span>
8.  <span data-ttu-id="691f5-166">Appelez [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) pour générer des [largeurs d’avance](uniscribe-glossary.md) et des positions x et y pour les glyphes de chaque plage consécutive.</span><span class="sxs-lookup"><span data-stu-id="691f5-166">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate [advance widths](uniscribe-glossary.md) and x and y positions for the glyphs in each successive range.</span></span> <span data-ttu-id="691f5-167">Il s’agit de la première étape pour laquelle la taille du texte est prise en compte.</span><span class="sxs-lookup"><span data-stu-id="691f5-167">This is the first step for which text size becomes a consideration.</span></span>
9.  <span data-ttu-id="691f5-168">Additionner les tailles de plage jusqu’à ce que la ligne déborde.</span><span class="sxs-lookup"><span data-stu-id="691f5-168">Sum the range sizes until the line overflows.</span></span>
10. <span data-ttu-id="691f5-169">Rompez la plage sur une limite de mot en utilisant les membres **fSoftBreak** et **fWhiteSpace** dans les attributs logiques.</span><span class="sxs-lookup"><span data-stu-id="691f5-169">Break the range on a word boundary by using the **fSoftBreak** and **fWhiteSpace** members in the logical attributes.</span></span> <span data-ttu-id="691f5-170">Pour arrêter un seul cluster de caractères en dehors de l’exécution, utilisez les informations retournées en appelant [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span><span class="sxs-lookup"><span data-stu-id="691f5-170">To break a single character cluster off the run, use the information returned by calling [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span></span>
    > [!Note]  
    > <span data-ttu-id="691f5-171">Déterminez si le premier point de code d’une plage doit être un point d’arrêt de mot car le dernier caractère de la plage précédente l’exige.</span><span class="sxs-lookup"><span data-stu-id="691f5-171">Decide if the first code point of a range should be a word break point because the last character of the previous range requires it.</span></span> <span data-ttu-id="691f5-172">Par exemple, si une plage se termine par une virgule, considérez le premier caractère de la plage suivante comme un point d’arrêt de mot.</span><span class="sxs-lookup"><span data-stu-id="691f5-172">For example, if one range ends in a comma, consider the first character of the next range to be a word break point.</span></span>

     

11. <span data-ttu-id="691f5-173">Répétez les étapes 6 à 10 pour chaque ligne du paragraphe.</span><span class="sxs-lookup"><span data-stu-id="691f5-173">Repeat steps 6 through 10 for each line in the paragraph.</span></span> <span data-ttu-id="691f5-174">Toutefois, si vous rompez la dernière exécution sur la ligne, appelez [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) pour mettre en forme la partie restante de l’exécution en tant que première exécution sur la ligne suivante.</span><span class="sxs-lookup"><span data-stu-id="691f5-174">However, if breaking the last run on the line, call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to reshape the remaining part of the run as the first run on the next line.</span></span>

## <a name="display-text-using-uniscribe"></a><span data-ttu-id="691f5-175">Afficher le texte à l’aide de Uniscribe</span><span class="sxs-lookup"><span data-stu-id="691f5-175">Display Text Using Uniscribe</span></span>

<span data-ttu-id="691f5-176">Votre application peut utiliser les étapes suivantes pour afficher un paragraphe de texte.</span><span class="sxs-lookup"><span data-stu-id="691f5-176">Your application can use the following steps to display a text paragraph.</span></span> <span data-ttu-id="691f5-177">Cette procédure suppose que l’application a déjà disposé le texte et n’a pas enregistré les glyphes et les positions du processus de disposition.</span><span class="sxs-lookup"><span data-stu-id="691f5-177">This procedure assumes that the application has already laid out the text and has not saved the glyphs and positions from the layout process.</span></span> <span data-ttu-id="691f5-178">Si la vitesse est un problème, l’application peut enregistrer les glyphes et les positions de la procédure de disposition et démarrer à l’étape 2 dans la procédure d’affichage.</span><span class="sxs-lookup"><span data-stu-id="691f5-178">If speed is a concern, the application can save the glyphs and positions from the layout procedure and start at step 2 in the display procedure.</span></span>

> [!Note]  
> <span data-ttu-id="691f5-179">L’application peut omettre l’étape 2 si le texte ne contient pas de caractères de scripts de droite à gauche, ne contient pas de caractères de contrôle bidirectionnels et utilise un niveau d’incorporation de base de gauche à droite.</span><span class="sxs-lookup"><span data-stu-id="691f5-179">The application can omit step 2 if the text contains no characters from right-to-left scripts, contains no bidirectional control characters, and uses a left-to-right base embedding level.</span></span>

 

1.  <span data-ttu-id="691f5-180">Pour chaque exécution, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="691f5-180">For each run, do the following:</span></span>
    1.  <span data-ttu-id="691f5-181">Si le style a changé depuis la dernière exécution, mettez à jour le handle vers le contexte de périphérique en le relâchant et en le réobtenant.</span><span class="sxs-lookup"><span data-stu-id="691f5-181">If the style has changed since the last run, update the handle to the device context by releasing and getting it again.</span></span>
    2.  <span data-ttu-id="691f5-182">Appelez [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) pour générer des glyphes pour l’exécution.</span><span class="sxs-lookup"><span data-stu-id="691f5-182">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to generate glyphs for the run.</span></span>
    3.  <span data-ttu-id="691f5-183">Appelez [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) pour générer une largeur avancée et un décalage x, y pour chaque glyphe.</span><span class="sxs-lookup"><span data-stu-id="691f5-183">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate an advance width and an x,y offset for each glyph.</span></span>
2.  <span data-ttu-id="691f5-184">Procédez comme suit pour établir l’ordre visuel correct des exécutions dans la ligne :</span><span class="sxs-lookup"><span data-stu-id="691f5-184">Do the following to establish the correct visual order for the runs in the line:</span></span>
    1.  <span data-ttu-id="691f5-185">Extrayez un tableau de [niveaux d’incorporation](uniscribe-glossary.md)bidirectionnels, un par plage.</span><span class="sxs-lookup"><span data-stu-id="691f5-185">Extract an array of bidirectional [embedding levels](uniscribe-glossary.md), one per range.</span></span> <span data-ttu-id="691f5-186">Le niveau d’incorporation est donné par (élément de SCRIPT \_ ) si. ( SCRIPT \_ Analysis) a.</span><span class="sxs-lookup"><span data-stu-id="691f5-186">The embedding level is given by (SCRIPT\_ITEM) si.(SCRIPT\_ANALYSIS) a.</span></span> <span data-ttu-id="691f5-187">(SCRIPT \_ STATE) s. uBidiLevel.</span><span class="sxs-lookup"><span data-stu-id="691f5-187">(SCRIPT\_STATE) s.uBidiLevel.</span></span>
    2.  <span data-ttu-id="691f5-188">Transmettez ce tableau à [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) pour générer une carte des positions visuelles à des positions logiques.</span><span class="sxs-lookup"><span data-stu-id="691f5-188">Pass this array to [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) to generate a map of visual positions to logical positions.</span></span>
3.  <span data-ttu-id="691f5-189">Facultatif Pour justifier le texte, appelez [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) ou utilisez une connaissance spécialisée du texte.</span><span class="sxs-lookup"><span data-stu-id="691f5-189">(Optional) To justify the text, either call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) or use specialized knowledge of the text.</span></span>
4.  <span data-ttu-id="691f5-190">Utilisez la carte Visual-to-Logical pour afficher les exécutions dans l’ordre visuel.</span><span class="sxs-lookup"><span data-stu-id="691f5-190">Use the visual-to-logical map to display the runs in visual order.</span></span> <span data-ttu-id="691f5-191">À partir de l’extrémité gauche de la ligne, appelez [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) pour afficher l’exécution fournie par la première entrée de la carte.</span><span class="sxs-lookup"><span data-stu-id="691f5-191">Starting at the left end of the line, call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the run given by the first entry in the map.</span></span> <span data-ttu-id="691f5-192">Pour chaque entrée suivante dans le mappage, appelez **ScriptTextOut** pour afficher l’exécution indiquée à droite de la série précédemment affichée.</span><span class="sxs-lookup"><span data-stu-id="691f5-192">For each subsequent entry in the map, call **ScriptTextOut** to display the indicated run to the right of the previously displayed run.</span></span>

    <span data-ttu-id="691f5-193">Si vous omettez l’étape 2, commencez à l’extrémité gauche de la ligne et appelez [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) pour afficher la première exécution logique, puis pour afficher chaque exécution logique à droite de l’exécution précédente.</span><span class="sxs-lookup"><span data-stu-id="691f5-193">If omitting step 2, start at the left end of the line and call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the first logical run, and then to display each logical run to the right of the previous run.</span></span>

5.  <span data-ttu-id="691f5-194">Répétez les étapes ci-dessus pour toutes les lignes du paragraphe.</span><span class="sxs-lookup"><span data-stu-id="691f5-194">Repeat the steps above for all lines in the paragraph.</span></span>

## <a name="related-topics"></a><span data-ttu-id="691f5-195">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="691f5-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="691f5-196">Utilisation de Uniscribe</span><span class="sxs-lookup"><span data-stu-id="691f5-196">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
