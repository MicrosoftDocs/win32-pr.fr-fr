---
description: Pour fournir la justification du texte, une application peut utiliser l’une des deux méthodes suivantes.
ms.assetid: 1190baed-5959-4f7a-8946-ac3b3da85821
title: Traitement de scripts complexes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87bea5b75e87afc4177b03c03f4263ba2592a0e0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104033943"
---
# <a name="processing-complex-scripts"></a><span data-ttu-id="f2fb3-103">Traitement de scripts complexes</span><span class="sxs-lookup"><span data-stu-id="f2fb3-103">Processing Complex Scripts</span></span>

<span data-ttu-id="f2fb3-104">Pour fournir la justification du texte, une application peut utiliser l’une des deux méthodes suivantes.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-104">To provide text justification, an application can use one of two methods.</span></span> <span data-ttu-id="f2fb3-105">Pour une implémentation simple de la justification multilingue, l’application doit appeler [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-105">For a simple implementation of multilingual justification, the application should call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span></span> <span data-ttu-id="f2fb3-106">Il génère le tableau DX Delta en tenant compte des signes kachidé, de l’espacement entre les mots, puis de l’espacement entre les caractères.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-106">It generates the delta dx array by considering kashida, then interword spacing, and then intercharacter spacing.</span></span> <span data-ttu-id="f2fb3-107">Pour une justification plus sophistiquée, l’application peut générer un tableau DX Delta mis à jour à l’aide de sa propre langue et des informations extraites par [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) dans le tableau [**\_ VISATTR de scripts**](/windows/win32/api/usp10/ns-usp10-script_visattr) .</span><span class="sxs-lookup"><span data-stu-id="f2fb3-107">For more sophisticated justification, the application can generate an updated delta dx array using its own language knowledge and the information retrieved by [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) in the [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr) array.</span></span>

<span data-ttu-id="f2fb3-108">L’espace de justification ou les kachidés doivent être insérés là où ils sont identifiés par le membre **uJustification** du [**script \_ VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-108">Justification space or kashida should be inserted where identified by the **uJustification** member of [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span></span> <span data-ttu-id="f2fb3-109">Lorsque vous effectuez une justification entre les caractères, l’application doit insérer l’espace supplémentaire uniquement après les glyphes marqués avec le SCRIPT \_ Justify \_ .</span><span class="sxs-lookup"><span data-stu-id="f2fb3-109">When performing inter-character justification, the application should insert extra space only after glyphs marked with SCRIPT\_JUSTIFY\_CHARACTER.</span></span>

<span data-ttu-id="f2fb3-110">L’application effectue le placement et le test de positionnement à l’aide de [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) et [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-110">The application does caret placement and hit testing by using [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) and [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span></span> <span data-ttu-id="f2fb3-111">Pour plus d’informations, consultez [gestion du placement du signe insertion et test de positionnement](managing-caret-placement-and-hit-testing.md).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-111">For more information, see [Managing Caret Placement and Hit Testing](managing-caret-placement-and-hit-testing.md).</span></span>

<span data-ttu-id="f2fb3-112">Pour obtenir des largeurs de manière indépendante de la police, l’application appelle [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-112">To get widths in a font-independent manner, the application calls [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span></span> <span data-ttu-id="f2fb3-113">En passant les largeurs logiques à [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), un bloc de texte peut être réaffiché dans les mêmes limites avec une perte de qualité acceptable, même lorsque la police d’origine n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-113">By passing the logical widths to [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), a block of text can be redisplayed in the same boundaries with acceptable loss of quality even when the original font is not available.</span></span> <span data-ttu-id="f2fb3-114">Il génère un tableau de largeurs de glyphes ([largeurs d’avances](uniscribe-glossary.md)) pouvant être transmis à [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-114">It generates an array of glyph widths ([advance widths](uniscribe-glossary.md)) suitable for passing to [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span></span> <span data-ttu-id="f2fb3-115">Ce type d’enregistrement et de réapplication des informations de largeur d’avance de manière indépendante de la police peut être utile dans des situations telles que le profilage dans un format défini par l’application.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-115">Such recording and reapplying of advance width information in a font-independent manner can be useful in situations such as metafiling in an application defined format.</span></span>

> [!Note]  
> <span data-ttu-id="f2fb3-116">Les fichiers de fichiers ne prennent pas en charge les index de glyphes.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-116">Metafiles do not support glyph indexes.</span></span> <span data-ttu-id="f2fb3-117">Pour écrire dans un métafichier amélioré, l’application doit utiliser [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) et écrire les caractères logiques directement.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-117">To write to an enhanced metafile, the application should use [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and write the logical characters directly.</span></span> <span data-ttu-id="f2fb3-118">À l’aide de ce mécanisme, la génération et l’emplacement du glyphe ne se produisent pas tant que le texte n’a pas été lu.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-118">Using this mechanism, the glyph generation and placement does not occur until the text is played back.</span></span>

 

<span data-ttu-id="f2fb3-119">Pour récupérer les glyphes spécifiques utilisés pour les valeurs par défaut, vides, kachidé, etc., pour la police actuelle, l’application doit appeler [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-119">To retrieve the specific glyphs that are used for the default, blanks, kashida, and so forth, for the current font, the application should call [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span></span> <span data-ttu-id="f2fb3-120">Pour déterminer quels caractères dans une série de tests sont pris en charge par la police sélectionnée, l’application appelle [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-120">To determine which characters in a run are supported by the selected font, the application calls [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span></span> <span data-ttu-id="f2fb3-121">Les caractères qui ne sont pas disponibles ont le glyphe par défaut dans la mémoire tampon du glyphe.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-121">Characters that are not available have the default glyph in the glyph buffer.</span></span> <span data-ttu-id="f2fb3-122">Notez que cette méthode échoue si une police effectue le rendu d’un caractère à l’aide d’une combinaison de glyphes au lieu d’un seul glyphe.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-122">Note that this method fails if a font renders a character using a combination of glyphs instead of a single glyph.</span></span> <span data-ttu-id="f2fb3-123">Par exemple, 00C9 ; La lettre majuscule latine E avec accent aigu peut être rendue à l’aide d’un glyphe E majuscule et d’un glyphe aigu.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-123">For example, 00C9; LATIN CAPITAL LETTER E WITH ACUTE can be rendered using a capital E glyph and an acute glyph.</span></span> <span data-ttu-id="f2fb3-124">Pour déterminer la prise en charge des polices pour une chaîne qui contient ces genres de points de code, l’application peut appeler [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-124">To determine the font support for a string that contains these kinds of code points, the application can call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span></span> <span data-ttu-id="f2fb3-125">Pour plus d’informations, consultez Utilisation de moteurs de mise [en forme](using-shaping-engines.md).</span><span class="sxs-lookup"><span data-stu-id="f2fb3-125">For more information, see [Using Shaping Engines](using-shaping-engines.md).</span></span>

<span data-ttu-id="f2fb3-126">La fonction [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) retourne la hauteur de la police à partir du cache de polices.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-126">The [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) function returns the height of the font from the font cache.</span></span> <span data-ttu-id="f2fb3-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) fournit des informations sur le traitement spécial requis pour tous les scripts, indexés par script.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) provides information on the special processing required for all the scripts, indexed by script.</span></span> <span data-ttu-id="f2fb3-128">Par exemple, il comprend la langue principale associée au script, les données indiquant si le script est numérique et les données indiquant si le script est un script complexe.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-128">For example, it includes the primary language associated with the script, data indicating if the script is numeric, and data indicating if the script is a complex script.</span></span>

<span data-ttu-id="f2fb3-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) retourne la [largeur ABC](uniscribe-glossary.md) d’un glyphe donné, ce qui peut être utile pour dessiner des graphiques de glyphes.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) returns the [ABC width](uniscribe-glossary.md) of a given glyph, which might be useful for drawing glyph charts.</span></span> <span data-ttu-id="f2fb3-130">Toutefois, il ne doit pas être utilisé pour la mise en forme de texte de script complexe normale.</span><span class="sxs-lookup"><span data-stu-id="f2fb3-130">However, it should not be used for normal complex script text formatting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f2fb3-131">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f2fb3-131">Related Topics</span></span>

[<span data-ttu-id="f2fb3-132">Utilisation de Uniscribe</span><span class="sxs-lookup"><span data-stu-id="f2fb3-132">Using Uniscribe</span></span>](using-uniscribe.md)


 

 
