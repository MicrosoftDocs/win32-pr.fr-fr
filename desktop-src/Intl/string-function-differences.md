---
description: Cette rubrique décrit les différences entre les fonctions de chaîne utilisées pour gérer les informations Unicode et les jeux de caractères. Ces fonctions ont à la fois des implémentations de page de codes Unicode et Windows pour prendre en charge les paramètres de page de codes Unicode et Windows.
ms.assetid: 52a15957-b44b-49ba-b915-e5c8e003a7e6
title: Différences de fonction de chaîne
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ad0c940aa8be1603f7958fb1993cc521ca7b1ed7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103951600"
---
# <a name="string-function-differences"></a><span data-ttu-id="3d4f6-104">Différences de fonction de chaîne</span><span class="sxs-lookup"><span data-stu-id="3d4f6-104">String Function Differences</span></span>

<span data-ttu-id="3d4f6-105">Cette rubrique décrit les différences entre les fonctions de chaîne utilisées pour gérer les informations Unicode et les jeux de caractères.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-105">This topic describes differences among string functions used in handling Unicode and character set information.</span></span> <span data-ttu-id="3d4f6-106">Ces fonctions ont à la fois des implémentations de [page de codes](code-pages.md) [Unicode](unicode.md) et Windows pour prendre en charge les paramètres de page de codes Unicode et Windows.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-106">These functions have both [Unicode](unicode.md) and [Windows code page](code-pages.md) implementations to support Unicode and Windows code page parameters.</span></span>

<span data-ttu-id="3d4f6-107">Les fonctions de chaîne suivantes ne requièrent pas de commentaire spécial.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-107">The following string functions do not require special comment.</span></span> <span data-ttu-id="3d4f6-108">Leurs implémentations de page de codes Unicode et Windows fonctionnent de la même manière.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-108">Their Unicode and Windows code page implementations work identically.</span></span>

-   [<span data-ttu-id="3d4f6-109">**CharNext**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-109">**CharNext**</span></span>](/windows/win32/api/winuser/nf-winuser-charnexta)
-   [<span data-ttu-id="3d4f6-110">**CharPrev**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-110">**CharPrev**</span></span>](/windows/win32/api/winuser/nf-winuser-charpreva)
-   <span data-ttu-id="3d4f6-111">[**StringCchCat**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [ **StringCchCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa)</span><span class="sxs-lookup"><span data-stu-id="3d4f6-111">[**StringCchCat**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**StringCchCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa)</span></span>
-   <span data-ttu-id="3d4f6-112">[**StringCchCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [ **StringCchCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa)</span><span class="sxs-lookup"><span data-stu-id="3d4f6-112">[**StringCchCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**StringCchCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa)</span></span>
-   <span data-ttu-id="3d4f6-113">[**StrCbLength**](/windows/win32/api/strsafe/nf-strsafe-stringcblengtha), [ **StrCchLength**](/windows/win32/api/strsafe/nf-strsafe-stringcchlengtha)</span><span class="sxs-lookup"><span data-stu-id="3d4f6-113">[**StrCbLength**](/windows/win32/api/strsafe/nf-strsafe-stringcblengtha), [**StrCchLength**](/windows/win32/api/strsafe/nf-strsafe-stringcchlengtha)</span></span>

<span data-ttu-id="3d4f6-114">La valeur de longueur récupérée par l’une des fonctions de longueur de chaîne est toujours basée sur la largeur de caractère normale : 8 bits pour les pages de codes Windows, 16 bits pour Unicode.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-114">The length value retrieved by one of the string length functions is always based on normal character width: 8 bits for Windows code pages, 16 bits for Unicode.</span></span> <span data-ttu-id="3d4f6-115">Cette valeur est souvent appelée « nombre de caractères ».</span><span class="sxs-lookup"><span data-stu-id="3d4f6-115">This value is often referred to as a "count of characters."</span></span> <span data-ttu-id="3d4f6-116">Ce terme est strictement correct, car les pages de codes Windows qui utilisent des [jeux de caractères codés sur deux octets](double-byte-character-sets.md) (DBCS) ont des caractères à pleine chasse qui sont réellement représentés par deux octets consécutifs.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-116">This term is strictly correct because Windows code pages that use [double-byte character sets](double-byte-character-sets.md) (DBCSs) have some full-width characters that are actually represented by two consecutive bytes.</span></span> <span data-ttu-id="3d4f6-117">Une situation similaire se produit pour les [substituts](surrogates-and-supplementary-characters.md) en Unicode.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-117">A similar situation arises for [surrogates](surrogates-and-supplementary-characters.md) in Unicode.</span></span>

<span data-ttu-id="3d4f6-118">Les fonctions de chaîne suivantes sont sensibles aux paramètres régionaux du thread actuel, dérivées de la langue sélectionnée par l’utilisateur dans le panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-118">The following string functions are sensitive to the locale of the current thread, derived from the language the user selects in the Control Panel.</span></span> <span data-ttu-id="3d4f6-119">Les fonctions [**lstrcmp**](/windows/win32/api/winbase/nf-winbase-lstrcmpa) et [**lstrcmpi**](/windows/win32/api/winbase/nf-winbase-lstrcmpia) n’effectuent pas de comparaisons d’octets comme leurs namesakes ANSI, par exemple, [strcmp](/cpp/c-runtime-library/reference/strcmp-wcscmp-mbscmp).</span><span class="sxs-lookup"><span data-stu-id="3d4f6-119">The [**lstrcmp**](/windows/win32/api/winbase/nf-winbase-lstrcmpa) and [**lstrcmpi**](/windows/win32/api/winbase/nf-winbase-lstrcmpia) functions do not perform byte comparisons like their ANSI namesakes, for example, [strcmp](/cpp/c-runtime-library/reference/strcmp-wcscmp-mbscmp).</span></span> <span data-ttu-id="3d4f6-120">Au lieu de cela, ils comparent les chaînes en fonction des règles des paramètres régionaux.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-120">Instead, they compare strings according to the rules of the locale.</span></span>

-   [<span data-ttu-id="3d4f6-121">**CharLower**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-121">**CharLower**</span></span>](/windows/win32/api/winuser/nf-winuser-charlowera)
-   [<span data-ttu-id="3d4f6-122">**CharLowerBuff**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-122">**CharLowerBuff**</span></span>](/windows/win32/api/winuser/nf-winuser-charlowerbuffa)
-   [<span data-ttu-id="3d4f6-123">**CharUpper**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-123">**CharUpper**</span></span>](/windows/win32/api/winuser/nf-winuser-charuppera)
-   [<span data-ttu-id="3d4f6-124">**CharUpperBuff**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-124">**CharUpperBuff**</span></span>](/windows/win32/api/winuser/nf-winuser-charupperbuffa)
-   [<span data-ttu-id="3d4f6-125">**lstrcmp**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-125">**lstrcmp**</span></span>](/windows/win32/api/winbase/nf-winbase-lstrcmpa)
-   [<span data-ttu-id="3d4f6-126">**lstrcmpi**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-126">**lstrcmpi**</span></span>](/windows/win32/api/winbase/nf-winbase-lstrcmpia)

<span data-ttu-id="3d4f6-127">Les fonctions suivantes effectuent une conversion entre le jeu de caractères OEM et la page de codes Windows ou Unicode en cours, selon la version utilisée :</span><span class="sxs-lookup"><span data-stu-id="3d4f6-127">The following functions convert between the OEM character set and either the current Windows code page or Unicode, depending on which version is used:</span></span>

-   [<span data-ttu-id="3d4f6-128">**CharToOem**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-128">**CharToOem**</span></span>](/windows/win32/api/winuser/nf-winuser-chartooema)
-   [<span data-ttu-id="3d4f6-129">**CharToOemBuff**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-129">**CharToOemBuff**</span></span>](/windows/win32/api/winuser/nf-winuser-chartooembuffa)
-   [<span data-ttu-id="3d4f6-130">**OemToCharBuff**</span><span class="sxs-lookup"><span data-stu-id="3d4f6-130">**OemToCharBuff**</span></span>](/windows/win32/api/winuser/nf-winuser-oemtocharbuffa)

<span data-ttu-id="3d4f6-131">Les fonctions d’impression, par exemple [**StringCbPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa), prennent en charge Unicode en fournissant les types de données nouveaux et modifiés suivants dans leurs spécifications de format.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-131">The print functions, for example, [**StringCbPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa), support Unicode by providing the following new and changed data types in their format specifications.</span></span> <span data-ttu-id="3d4f6-132">Ces spécifications de format affectent la manière dont les fonctions interprètent le paramètre d’entrée correspondant.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-132">These format specifications affect the way the functions interpret the corresponding input parameter.</span></span>



| <span data-ttu-id="3d4f6-133">Spécification de format</span><span class="sxs-lookup"><span data-stu-id="3d4f6-133">Format specification</span></span> | <span data-ttu-id="3d4f6-134">Type de données de la version de la page de codes Windows</span><span class="sxs-lookup"><span data-stu-id="3d4f6-134">Data type for Windows code page version</span></span> | <span data-ttu-id="3d4f6-135">Type de données pour la version Unicode</span><span class="sxs-lookup"><span data-stu-id="3d4f6-135">Data type for Unicode version</span></span> |
|----------------------|-----------------------------------------|-------------------------------|
| <span data-ttu-id="3d4f6-136">c</span><span class="sxs-lookup"><span data-stu-id="3d4f6-136">c</span></span>                    | <span data-ttu-id="3d4f6-137">CHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-137">CHAR</span></span>                                    | <span data-ttu-id="3d4f6-138">WCHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-138">WCHAR</span></span>                         |
| <span data-ttu-id="3d4f6-139">C</span><span class="sxs-lookup"><span data-stu-id="3d4f6-139">C</span></span>                    | <span data-ttu-id="3d4f6-140">WCHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-140">WCHAR</span></span>                                   | <span data-ttu-id="3d4f6-141">CHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-141">CHAR</span></span>                          |
| <span data-ttu-id="3d4f6-142">HC, hC</span><span class="sxs-lookup"><span data-stu-id="3d4f6-142">hc, hC</span></span>               | <span data-ttu-id="3d4f6-143">CHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-143">CHAR</span></span>                                    | <span data-ttu-id="3d4f6-144">CHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-144">CHAR</span></span>                          |
| <span data-ttu-id="3d4f6-145">HS, hS</span><span class="sxs-lookup"><span data-stu-id="3d4f6-145">hs, hS</span></span>               | <span data-ttu-id="3d4f6-146">LPSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-146">LPSTR</span></span>                                   | <span data-ttu-id="3d4f6-147">LPSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-147">LPSTR</span></span>                         |
| <span data-ttu-id="3d4f6-148">LC, lC</span><span class="sxs-lookup"><span data-stu-id="3d4f6-148">lc, lC</span></span>               | <span data-ttu-id="3d4f6-149">WCHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-149">WCHAR</span></span>                                   | <span data-ttu-id="3d4f6-150">WCHAR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-150">WCHAR</span></span>                         |
| <span data-ttu-id="3d4f6-151">LS, lS</span><span class="sxs-lookup"><span data-stu-id="3d4f6-151">ls, lS</span></span>               | <span data-ttu-id="3d4f6-152">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-152">LPWSTR</span></span>                                  | <span data-ttu-id="3d4f6-153">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-153">LPWSTR</span></span>                        |
| <span data-ttu-id="3d4f6-154">s</span><span class="sxs-lookup"><span data-stu-id="3d4f6-154">s</span></span>                    | <span data-ttu-id="3d4f6-155">LPSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-155">LPSTR</span></span>                                   | <span data-ttu-id="3d4f6-156">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-156">LPWSTR</span></span>                        |
| <span data-ttu-id="3d4f6-157">S</span><span class="sxs-lookup"><span data-stu-id="3d4f6-157">S</span></span>                    | <span data-ttu-id="3d4f6-158">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-158">LPWSTR</span></span>                                  | <span data-ttu-id="3d4f6-159">LPSTR</span><span class="sxs-lookup"><span data-stu-id="3d4f6-159">LPSTR</span></span>                         |



 

<span data-ttu-id="3d4f6-160">Le type de données du texte de sortie dépend toujours de la version de la fonction.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-160">The data type for the output text always depends on the version of the function.</span></span> <span data-ttu-id="3d4f6-161">Lorsque le type de données du paramètre d’entrée et le type de données du texte de sortie ne correspondent pas, la fonction Print effectue une conversion d’Unicode vers la page de codes Windows actuelle, ou vice versa, selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-161">When the data type of the input parameter and the data type of the output text do not agree, the print function performs a conversion from Unicode to the current Windows code page, or vice versa, as required.</span></span>

<span data-ttu-id="3d4f6-162">Pour la version Unicode des fonctions d’impression, la chaîne de format est Unicode, comme le texte de sortie.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-162">For the Unicode version of the print functions, the format string is Unicode, as is the output text.</span></span>

> [!Caution]  
> <span data-ttu-id="3d4f6-163">Une mauvaise gestion de la mémoire tampon est impliquée dans de nombreux problèmes de sécurité qui impliquent des dépassements de mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-163">Poor buffer handling is implicated in many security issues that involve buffer overruns.</span></span> <span data-ttu-id="3d4f6-164">Consultez [référence de strsafe. h](../menurc/strsafe-ovw.md).</span><span class="sxs-lookup"><span data-stu-id="3d4f6-164">See [Strsafe.h Reference](../menurc/strsafe-ovw.md).</span></span> <span data-ttu-id="3d4f6-165">Les fonctions définies dans strsafe. h fournissent un traitement supplémentaire pour la gestion correcte de la mémoire tampon dans votre code.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-165">The functions defined in Strsafe.h provide additional processing for proper buffer handling in your code.</span></span> <span data-ttu-id="3d4f6-166">Pour cette raison, ils sont destinés à remplacer leurs équivalents C/C++ intégrés, ainsi que les implémentations spécifiques de Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="3d4f6-166">For this reason, they are intended to replace their built-in C/C++ counterparts as well as specific Microsoft Windows implementations.</span></span> <span data-ttu-id="3d4f6-167">Pour plus d’informations, consultez [Considérations sur la sécurité : fonctionnalités internationales](security-considerations--international-features.md).</span><span class="sxs-lookup"><span data-stu-id="3d4f6-167">For more information, see [Security Considerations: International Features](security-considerations--international-features.md).</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="3d4f6-168">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="3d4f6-168">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3d4f6-169">Unicode dans l'API Windows</span><span class="sxs-lookup"><span data-stu-id="3d4f6-169">Unicode in the Windows API</span></span>](unicode-in-the-windows-api.md)
</dt> </dl>

 

 
