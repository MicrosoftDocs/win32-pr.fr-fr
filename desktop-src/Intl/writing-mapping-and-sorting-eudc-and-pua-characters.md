---
description: Les applications écrivent des caractères définis par l’utilisateur (EUDCs) et des caractères de zone d’utilisation privée (PUA) sur l’écran ou l’imprimante, tout comme ils écrivent d’autres caractères, à l’aide de fonctions de sortie telles que TextOut et ExtTextOut.
ms.assetid: c975c70d-4231-4a69-bec2-d51d6993fdd4
title: Écriture, mappage et tri des caractères EUDC et PUA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6c34264d956bb6a87407e249f68b2bc03fb2c99
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104201472"
---
# <a name="writing-mapping-and-sorting-eudc-and-pua-characters"></a><span data-ttu-id="39c5e-103">Écriture, mappage et tri des caractères EUDC et PUA</span><span class="sxs-lookup"><span data-stu-id="39c5e-103">Writing, Mapping, and Sorting EUDC and PUA Characters</span></span>

<span data-ttu-id="39c5e-104">Les applications écrivent des caractères définis par l’utilisateur (EUDCs) et des caractères de zone d’utilisation privée (PUA) sur l’écran ou l’imprimante, tout comme ils écrivent d’autres caractères, à l’aide de fonctions de sortie telles que [TextOut](/windows/win32/api/wingdi/nf-wingdi-textouta) et [ExtTextOut](/windows/win32/api/wingdi/nf-wingdi-exttextouta).</span><span class="sxs-lookup"><span data-stu-id="39c5e-104">Applications write end-user-defined characters (EUDCs) and private use area (PUA) characters to the screen or printer just as they write other characters, by using output functions such as [TextOut](/windows/win32/api/wingdi/nf-wingdi-textouta) and [ExtTextOut](/windows/win32/api/wingdi/nf-wingdi-exttextouta).</span></span> <span data-ttu-id="39c5e-105">Ces fonctions récupèrent automatiquement les informations de caractères à partir des polices de caractères EUDC ou PUA si EUDC est activé.</span><span class="sxs-lookup"><span data-stu-id="39c5e-105">These functions automatically retrieve character information from EUDC or PUA character fonts if EUDC is enabled.</span></span> <span data-ttu-id="39c5e-106">Pour plus d’informations, consultez [caractères de \_ zone d’utilisation privée et définis par l’utilisateur final](end-user-defined-characters.md).</span><span class="sxs-lookup"><span data-stu-id="39c5e-106">For more information, see [End-User\_Defined and Private Use Area Characters](end-user-defined-characters.md).</span></span>

<span data-ttu-id="39c5e-107">Lors de l’écriture de caractères EUDCs ou PUA, l’opération de la fonction Text output dépend de la police actuellement sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="39c5e-107">When writing EUDCs or PUA characters, the operation of the text output function depends on the currently selected font.</span></span> <span data-ttu-id="39c5e-108">Si la police sélectionnée est une police de caractères EUDC ou PUA intégrée, la fonction extrait les informations de caractères de cette police.</span><span class="sxs-lookup"><span data-stu-id="39c5e-108">If the selected font is an integrated EUDC or PUA character font, the function retrieves character information from that font.</span></span> <span data-ttu-id="39c5e-109">Si la police sélectionnée est un [jeu de caractères codés sur deux octets](double-byte-character-sets.md) (DBCS) TrueType auquel est associée une police EUDC distincte, la fonction récupère les informations de la police EUDC spécifiée.</span><span class="sxs-lookup"><span data-stu-id="39c5e-109">If the selected font is a [double-byte character set](double-byte-character-sets.md) (DBCS) TrueType font that has an associated separate EUDC font, the function retrieves information from the specified EUDC font.</span></span> <span data-ttu-id="39c5e-110">De même, si la police sélectionnée est une police TrueType [Unicode](unicode.md) associée à une police de caractères PUA distincte, la fonction récupère les informations de la police de caractères PUA.</span><span class="sxs-lookup"><span data-stu-id="39c5e-110">Similarly, if the selected font is a [Unicode](unicode.md) TrueType font that has an associated separate PUA character font, the function retrieves information from the PUA character font.</span></span> <span data-ttu-id="39c5e-111">Si la police sélectionnée n’est pas associée à une police de caractères EUDC ou PUA, la fonction récupère les informations à partir de la police EUDC par défaut du système.</span><span class="sxs-lookup"><span data-stu-id="39c5e-111">If the selected font does not have an associated EUDC or PUA character font, the function retrieves information from the system default EUDC font.</span></span> <span data-ttu-id="39c5e-112">Si le caractère n’est pas dans la police EUDC par défaut du système ou qu’il n’existe aucune police EUDC par défaut du système, la fonction écrit le caractère par défaut défini par la police sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="39c5e-112">If the character is not in the system default EUDC font or there is no system default EUDC font, the function writes the default character defined by the selected font.</span></span>

<span data-ttu-id="39c5e-113">Les applications peuvent mapper des EUDCs vers et depuis Unicode à l’aide des fonctions [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) et [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) .</span><span class="sxs-lookup"><span data-stu-id="39c5e-113">Applications can map EUDCs to and from Unicode by using the [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) and [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) functions.</span></span> <span data-ttu-id="39c5e-114">La fonction **MultiByteToWideChar** mappe la plupart des EUDCs à des caractères dans le PUA Unicode.</span><span class="sxs-lookup"><span data-stu-id="39c5e-114">The **MultiByteToWideChar** function maps most EUDCs to characters in the Unicode PUA.</span></span> <span data-ttu-id="39c5e-115">Toutefois, pour prendre en charge certaines normes nationales ou régionales, certaines EUDCs peuvent être mappées à des points de code Unicode non PUA.</span><span class="sxs-lookup"><span data-stu-id="39c5e-115">However, to support certain national or regional standards, some EUDCs can be mapped to non-PUA Unicode code points.</span></span> <span data-ttu-id="39c5e-116">La fonction **WideCharToMultiByte** mappe un caractère dans PUA à son équivalent EUDC, si un mappage de ce type existe et si le point de code n’a pas de mappage non-PUA valide dans Unicode.</span><span class="sxs-lookup"><span data-stu-id="39c5e-116">The **WideCharToMultiByte** function maps a character in the PUA to its EUDC counterpart, if such a mapping exists and if the code point does not have a valid non-PUA mapping in Unicode.</span></span> <span data-ttu-id="39c5e-117">Toutes les pages de codes n’ont pas une plage EUDC.</span><span class="sxs-lookup"><span data-stu-id="39c5e-117">Not all code pages have an EUDC range.</span></span> <span data-ttu-id="39c5e-118">La page de codes spécifiée dans un appel à **WideCharToMultiByte** doit contenir une plage de code EUDC pour le mappage à la plage EUDC.</span><span class="sxs-lookup"><span data-stu-id="39c5e-118">The code page specified in a call to **WideCharToMultiByte** must contain an EUDC code range for the mapping to the EUDC range to occur.</span></span> <span data-ttu-id="39c5e-119">Si la page de codes ne contient pas de plage de code EUDC, la fonction récupère le caractère par défaut pour tous les caractères de la PUA Unicode.</span><span class="sxs-lookup"><span data-stu-id="39c5e-119">If the code page does not contain an EUDC code range, the function retrieves the default character for any characters in the Unicode PUA.</span></span>

<span data-ttu-id="39c5e-120">[**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) et [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) ne garantissent pas le mappage aller-retour.</span><span class="sxs-lookup"><span data-stu-id="39c5e-120">[**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) and [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) do not guarantee round-trip mapping.</span></span> <span data-ttu-id="39c5e-121">En d’autres termes, il est possible de commencer avec une chaîne multioctet particulière contenant EUDCs, de mapper la chaîne à Unicode avec **MultiByteToWideChar** et de la mapper à nouveau sur le DBCS d’origine avec **WideCharToMultiByte**, et de finir par un résultat qui n’est pas identique à la chaîne d’origine.</span><span class="sxs-lookup"><span data-stu-id="39c5e-121">In other words, it is possible to start with a particular multibyte string containing EUDCs, map the string to Unicode with **MultiByteToWideChar** and map it back to the original DBCS with **WideCharToMultiByte**, and end up with a result that is not identical to the original string.</span></span> <span data-ttu-id="39c5e-122">Les applications qui reposent sur le mappage de EUDCs à Unicode doivent s’assurer que tous les caractères nécessaires peuvent aller-retour entre la zone EUDC de la page de codes appropriée et les PUA Unicode.</span><span class="sxs-lookup"><span data-stu-id="39c5e-122">Applications relying on mapping EUDCs to Unicode should ensure that all necessary characters can round-trip between the appropriate code page EUDC area and the Unicode PUA.</span></span>

<span data-ttu-id="39c5e-123">Les applications ne doivent pas essayer de mapper EUDCs d’une page de codes à une autre.</span><span class="sxs-lookup"><span data-stu-id="39c5e-123">Applications should not attempt to map EUDCs from one code page to another.</span></span> <span data-ttu-id="39c5e-124">Si une application démarre avec un EUDC à partir d’une page de codes, la mappe à Unicode avec [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar)et est mappée à un autre DBCS avec [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte), il n’existe aucune garantie quant aux résultats.</span><span class="sxs-lookup"><span data-stu-id="39c5e-124">If an application starts with an EUDC from one code page, maps it to Unicode with [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar), and maps to a different DBCS with [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte), there are no guarantees about the results.</span></span> <span data-ttu-id="39c5e-125">Le caractère d’origine peut être mappé à un autre EUDC dans la page de codes de destination, ou il peut être mappé en tant que caractère non défini.</span><span class="sxs-lookup"><span data-stu-id="39c5e-125">The original character might be mapped to a different EUDC in the destination code page, or it might be mapped as an undefined character.</span></span> <span data-ttu-id="39c5e-126">De même, le mappage d’une chaîne Unicode à une page de codes qui a une plage EUDC peut avoir des résultats inattendus.</span><span class="sxs-lookup"><span data-stu-id="39c5e-126">Similarly, mapping a Unicode string to a code page that has an EUDC range can have unintended results.</span></span> <span data-ttu-id="39c5e-127">Si la chaîne Unicode contient un point de code PUA, il est possible que le point de code soit mappé à un EUDC qui ne représente pas le même caractère.</span><span class="sxs-lookup"><span data-stu-id="39c5e-127">If the Unicode string contains a PUA code point, it is possible that the code point will be mapped to an EUDC that does not represent the same character.</span></span>

<span data-ttu-id="39c5e-128">Les applications peuvent comparer des chaînes DBCS qui contiennent des EUDCs à l’aide de la version ANSI de la fonction [CompareString](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) .</span><span class="sxs-lookup"><span data-stu-id="39c5e-128">Applications can compare DBCS strings that contain EUDCs by using the ANSI version of the [CompareString](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) function.</span></span> <span data-ttu-id="39c5e-129">La fonction mappe effectivement les caractères au format Unicode avant de comparer les valeurs de caractères.</span><span class="sxs-lookup"><span data-stu-id="39c5e-129">The function effectively maps the characters to Unicode before comparing character values.</span></span> <span data-ttu-id="39c5e-130">Les applications peuvent créer une clé de tri pour la chaîne à l’aide de la version ANSI de la fonction [**LCMapString**](/windows/desktop/api/Winnls/nf-winnls-lcmapstringa) et de la \_ valeur SortKey LCMAP.</span><span class="sxs-lookup"><span data-stu-id="39c5e-130">Applications can create a sort key for the string by using the ANSI version of the [**LCMapString**](/windows/desktop/api/Winnls/nf-winnls-lcmapstringa) function and the LCMAP\_SORTKEY value.</span></span> <span data-ttu-id="39c5e-131">Cette fonction mappe en premier les caractères au format Unicode.</span><span class="sxs-lookup"><span data-stu-id="39c5e-131">This function effectively maps characters to Unicode first.</span></span> <span data-ttu-id="39c5e-132">Tous les caractères du PUA sont triés après tous les autres caractères Unicode.</span><span class="sxs-lookup"><span data-stu-id="39c5e-132">All characters in the PUA are sorted after all other Unicode characters.</span></span> <span data-ttu-id="39c5e-133">Dans la zone, les caractères sont triés par ordre numérique.</span><span class="sxs-lookup"><span data-stu-id="39c5e-133">Within the area, characters are sorted in numerical order.</span></span> <span data-ttu-id="39c5e-134">Si une application tente de récupérer des informations CTYPE pour un EUDC à l’aide de la fonction [GetStringTypeA](/windows/desktop/api/Winnls/nf-winnls-getstringtypea) , la fonction récupère la **valeur null** pour chaque caractère.</span><span class="sxs-lookup"><span data-stu-id="39c5e-134">If an application attempts to retrieve CTYPE information for an EUDC by using the [GetStringTypeA](/windows/desktop/api/Winnls/nf-winnls-getstringtypea) function, the function retrieves **NULL** for each character.</span></span>

## <a name="related-topics"></a><span data-ttu-id="39c5e-135">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="39c5e-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="39c5e-136">Utilisation d’Unicode et de jeux de caractères</span><span class="sxs-lookup"><span data-stu-id="39c5e-136">Using Unicode and Character Sets</span></span>](using-unicode-and-character-sets.md)
</dt> </dl>

 

 
