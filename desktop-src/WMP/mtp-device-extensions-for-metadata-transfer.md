---
title: Extensions d’appareil MTP pour le transfert de métadonnées
description: Extensions d’appareil MTP pour le transfert de métadonnées
ms.assetid: 9cf68373-e84f-4568-a9da-16ddee0fc4e9
keywords:
- Lecteur Windows Media, extensions d’appareil MTP
- Windows Media Player, extensions d’appareils
- Windows Media Player, extensions
- Lecteur Windows Media, métadonnées
- Lecteur Windows Media, MTP (Media Transfer Protocol)
- Protocole MTP (Media Transfer Protocol)
- MTP (Media Transfer Protocol)
- métadonnées, extensions d’appareils MTP
- métadonnées, extensions de périphérique
- métadonnées, extensions
- extensions d’appareils, transfert de métadonnées
- extensions, transfert de métadonnées
- Extensions d’appareil MTP pour le transfert de métadonnées
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f64ff16fd97f135d7f8c902af823b967079408fb
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104028534"
---
# <a name="mtp-device-extensions-for-metadata-transfer"></a><span data-ttu-id="ee2e9-116">Extensions d’appareil MTP pour le transfert de métadonnées</span><span class="sxs-lookup"><span data-stu-id="ee2e9-116">MTP Device Extensions for Metadata Transfer</span></span>

<span data-ttu-id="ee2e9-117">Le protocole MTP (Media Transfer Protocol) est un protocole conçu pour les appareils multimédias portables.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-117">Media Transfer Protocol (MTP) is a protocol designed for portable media devices.</span></span> <span data-ttu-id="ee2e9-118">L’objectif principal de ce protocole est de fournir un protocole commun pour l’échange de données entre un ordinateur et un périphérique multimédia portable.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-118">The primary purpose of this protocol is to provide a common protocol for exchanging data between a computer and a portable media device.</span></span> <span data-ttu-id="ee2e9-119">Cela comprend la réception et l’envoi d’objets multimédias et l’énumération du contenu et des fonctionnalités de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-119">This includes receiving and sending media objects and enumerating the contents and capabilities of the device.</span></span>

<span data-ttu-id="ee2e9-120">MTP utilise des identificateurs d’objets uniques persistants (PUOIDs) pour identifier de manière unique les éléments multimédias numériques (et d’autres objets) stockés sur un appareil.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-120">MTP uses persistent unique object identifiers (PUOIDs) to uniquely identify digital media items (and other objects) stored on a device.</span></span> <span data-ttu-id="ee2e9-121">Lorsque vous échangez des informations sur les modifications qui se sont produites sur un appareil qui prend en charge MTP, le périphérique et le lecteur Windows Media utilisent PUOIDs pour identifier les objets qui ont été modifiés.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-121">When exchanging information about changes that have occurred on a device that supports MTP, the device and Windows Media Player use PUOIDs to identify which objects have changed.</span></span>

<span data-ttu-id="ee2e9-122">Le fichier d’en-tête nommé wmpdevices. h, qui est installé dans le cadre du kit de développement logiciel (SDK) du lecteur Windows Media, définit les structures et les constantes nécessaires à la prise en charge des extensions de périphérique du lecteur Windows Media.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-122">The header file named wmpdevices.h, which is installed as part of the Windows Media Player SDK, defines the structures and constants needed to support Windows Media Player device extensions.</span></span>

<span data-ttu-id="ee2e9-123">Pour qu’un appareil soit reconnu comme prenant en charge le transfert de métadonnées via le jeu d’extensions de périphérique MTP du lecteur Windows Media, il doit inclure les informations suivantes dans le jeu de données DeviceInfo.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-123">For a device to be recognized as supporting metadata transfer through the Windows Media Player MTP device extension set, it must include the following information in the DeviceInfo dataset.</span></span> <span data-ttu-id="ee2e9-124">(Pour plus d’informations sur ce jeu de données, consultez la section 4.6.1 de la spécification MTP.)</span><span class="sxs-lookup"><span data-stu-id="ee2e9-124">(For more information about this dataset, see section 4.6.1 of the MTP specification.)</span></span>



| <span data-ttu-id="ee2e9-125">Champ de DataSet</span><span class="sxs-lookup"><span data-stu-id="ee2e9-125">Dataset field</span></span>          | <span data-ttu-id="ee2e9-126">Ordre des champs</span><span class="sxs-lookup"><span data-stu-id="ee2e9-126">Field order</span></span> | <span data-ttu-id="ee2e9-127">Type de données</span><span class="sxs-lookup"><span data-stu-id="ee2e9-127">Data type</span></span>  | <span data-ttu-id="ee2e9-128">Valeur</span><span class="sxs-lookup"><span data-stu-id="ee2e9-128">Value</span></span>                       |
|------------------------|-------------|------------|-----------------------------|
| <span data-ttu-id="ee2e9-129">VendorExtensionID</span><span class="sxs-lookup"><span data-stu-id="ee2e9-129">VendorExtensionID</span></span>      | <span data-ttu-id="ee2e9-130">2</span><span class="sxs-lookup"><span data-stu-id="ee2e9-130">2</span></span>           | <span data-ttu-id="ee2e9-131">**UINT32**</span><span class="sxs-lookup"><span data-stu-id="ee2e9-131">**UINT32**</span></span> | <span data-ttu-id="ee2e9-132">0x00000006</span><span class="sxs-lookup"><span data-stu-id="ee2e9-132">0x00000006</span></span>                  |
| <span data-ttu-id="ee2e9-133">VendorExtensionVersion</span><span class="sxs-lookup"><span data-stu-id="ee2e9-133">VendorExtensionVersion</span></span> | <span data-ttu-id="ee2e9-134">3</span><span class="sxs-lookup"><span data-stu-id="ee2e9-134">3</span></span>           | <span data-ttu-id="ee2e9-135">**UINT16**</span><span class="sxs-lookup"><span data-stu-id="ee2e9-135">**UINT16**</span></span> | <span data-ttu-id="ee2e9-136">0x0064 (100)</span><span class="sxs-lookup"><span data-stu-id="ee2e9-136">0x0064 (100)</span></span>                |
| <span data-ttu-id="ee2e9-137">VendorExtensionDesc</span><span class="sxs-lookup"><span data-stu-id="ee2e9-137">VendorExtensionDesc</span></span>    | <span data-ttu-id="ee2e9-138">4</span><span class="sxs-lookup"><span data-stu-id="ee2e9-138">4</span></span>           | <span data-ttu-id="ee2e9-139">**Chaîne**</span><span class="sxs-lookup"><span data-stu-id="ee2e9-139">**String**</span></span> | <span data-ttu-id="ee2e9-140">« microsoft.com/WMPPD : 10,0 »</span><span class="sxs-lookup"><span data-stu-id="ee2e9-140">"microsoft.com/WMPPD: 10.0"</span></span> |



 

<span data-ttu-id="ee2e9-141">Le tableau suivant fournit des détails sur l’opération MTP pour le transfert de métadonnées accéléré.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-141">The following table provides details about the MTP operation for accelerated metadata transfer.</span></span>



| <span data-ttu-id="ee2e9-142">Élément</span><span class="sxs-lookup"><span data-stu-id="ee2e9-142">Item</span></span>                  | <span data-ttu-id="ee2e9-143">Description</span><span class="sxs-lookup"><span data-stu-id="ee2e9-143">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ee2e9-144">Code d’opération</span><span class="sxs-lookup"><span data-stu-id="ee2e9-144">Operation Code</span></span>        | <span data-ttu-id="ee2e9-145">0x9201</span><span class="sxs-lookup"><span data-stu-id="ee2e9-145">0x9201</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="ee2e9-146">Paramètre d’opération 1</span><span class="sxs-lookup"><span data-stu-id="ee2e9-146">Operation Parameter 1</span></span> | <span data-ttu-id="ee2e9-147">L’ID de transaction fourni par l’appareil lors de la session précédente.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-147">The transaction ID supplied by the device during the previous session.</span></span> <span data-ttu-id="ee2e9-148">Cette valeur est égale à zéro pour la première session.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-148">This value is zero for the first session.</span></span>                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="ee2e9-149">Paramètre d’opération 2</span><span class="sxs-lookup"><span data-stu-id="ee2e9-149">Operation Parameter 2</span></span> | <span data-ttu-id="ee2e9-150">Index de départ.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-150">Starting index.</span></span> <span data-ttu-id="ee2e9-151">Cette valeur est toujours égale à zéro lors du premier appel d’une session.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-151">This value is always zero on the first call of a session.</span></span> <span data-ttu-id="ee2e9-152">Lors des appels suivants au sein de la même session de synchronisation, cette valeur augmente de la somme du nombre d’éléments modifiés et supprimés des données de la réponse précédente.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-152">On subsequent calls within the same synchronization session, this value increases by the sum of the count of the modified and the deleted items from the previous response data.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="ee2e9-153">Paramètre d’opération 3</span><span class="sxs-lookup"><span data-stu-id="ee2e9-153">Operation Parameter 3</span></span> | <span data-ttu-id="ee2e9-154">0x10000.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-154">0x10000.</span></span> <span data-ttu-id="ee2e9-155">Cette constante, définie dans wmpdevices. h, est le nombre maximal de PUOIDs qui peuvent être retournés dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-155">This constant, defined in wmpdevices.h, is the maximum number of PUOIDs that can be returned in the response.</span></span> <span data-ttu-id="ee2e9-156">Notez que la valeur de cette constante peut être révisée dans les versions ultérieures de ce fichier d’en-tête.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-156">Note that the value of this constant may be revised in future releases of this header file.</span></span>                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="ee2e9-157">Paramètre d’opération 4</span><span class="sxs-lookup"><span data-stu-id="ee2e9-157">Operation Parameter 4</span></span> | <span data-ttu-id="ee2e9-158">0</span><span class="sxs-lookup"><span data-stu-id="ee2e9-158">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="ee2e9-159">Paramètre d’opération 5</span><span class="sxs-lookup"><span data-stu-id="ee2e9-159">Operation Parameter 5</span></span> | <span data-ttu-id="ee2e9-160">0</span><span class="sxs-lookup"><span data-stu-id="ee2e9-160">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="ee2e9-161">Données</span><span class="sxs-lookup"><span data-stu-id="ee2e9-161">Data</span></span>                  | <span data-ttu-id="ee2e9-162">L’appareil retourne deux tableaux MTP contigus contenant PUOIDs.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-162">The device returns two contiguous MTP arrays containing PUOIDs.</span></span> <span data-ttu-id="ee2e9-163">Chaque tableau MTP commence par une valeur **DWORD** indiquant le nombre d’éléments dans le tableau, suivi du tableau d’éléments.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-163">Each MTP array begins with a **DWORD** value indicating the count of items in the array, followed by the array of elements.</span></span> <span data-ttu-id="ee2e9-164">Le premier tableau MTP contient la liste des PUOIDs qui ont été ajoutés ou modifiés.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-164">The first MTP array contains the list of PUOIDs that have been added or changed.</span></span> <span data-ttu-id="ee2e9-165">Le deuxième tableau MTP contient la liste des PUOIDs qui ont été supprimés du périphérique portable. Notez que la somme du nombre de PUOID dans les deux tableaux ne doit pas dépasser la valeur passée dans le paramètre d’opération 3.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-165">The second MTP array contains the list of PUOIDs that have been deleted from the portable device.Note that the sum of PUOID count in the two arrays must not exceed the value passed in Operation Parameter 3.</span></span><br/> |
| <span data-ttu-id="ee2e9-166">Direction des données</span><span class="sxs-lookup"><span data-stu-id="ee2e9-166">Data Direction</span></span>        | <span data-ttu-id="ee2e9-167">R->I</span><span class="sxs-lookup"><span data-stu-id="ee2e9-167">R->I</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="ee2e9-168">Options de code de réponse</span><span class="sxs-lookup"><span data-stu-id="ee2e9-168">Response Code Options</span></span> | <span data-ttu-id="ee2e9-169">**MTP \_ RÉPONSE \_ OK** (0x2001) ou code de réponse d’erreur valide.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-169">**MTP\_RESPONSE\_OK** (0x2001) or valid error response code.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="ee2e9-170">Paramètre de réponse 1</span><span class="sxs-lookup"><span data-stu-id="ee2e9-170">Response Parameter 1</span></span>  | <span data-ttu-id="ee2e9-171">ID de la transaction actuelle de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-171">The device's current transaction ID.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="ee2e9-172">Paramètre de réponse 2</span><span class="sxs-lookup"><span data-stu-id="ee2e9-172">Response Parameter 2</span></span>  | <span data-ttu-id="ee2e9-173">Nombre de PUOIDs qui restent à récupérer par des demandes ultérieures.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-173">The number of PUOIDs that remain to be retrieved by future requests.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="ee2e9-174">Paramètre de réponse 3</span><span class="sxs-lookup"><span data-stu-id="ee2e9-174">Response Parameter 3</span></span>  | <span data-ttu-id="ee2e9-175">**Valeur DWORD** contenant les informations d’État.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-175">**DWORD** containing status information.</span></span> <span data-ttu-id="ee2e9-176">L’État est indiqué par une opération au niveau du bit.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-176">Status is indicated in a bitwise fashion.</span></span> <span data-ttu-id="ee2e9-177">Pour plus d’informations sur les indicateurs à utiliser, consultez la section Notes.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-177">See Remarks for information about flags to use.</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="ee2e9-178">Paramètre de réponse 4</span><span class="sxs-lookup"><span data-stu-id="ee2e9-178">Response Parameter 4</span></span>  | <span data-ttu-id="ee2e9-179">0</span><span class="sxs-lookup"><span data-stu-id="ee2e9-179">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="ee2e9-180">Paramètre de réponse 5</span><span class="sxs-lookup"><span data-stu-id="ee2e9-180">Response Parameter 5</span></span>  | <span data-ttu-id="ee2e9-181">0</span><span class="sxs-lookup"><span data-stu-id="ee2e9-181">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="remarks"></a><span data-ttu-id="ee2e9-182">Notes</span><span class="sxs-lookup"><span data-stu-id="ee2e9-182">Remarks</span></span>

<span data-ttu-id="ee2e9-183">L’État est indiqué par le biais du paramètre de réponse 3 dans un mode de bits à l’aide des indicateurs suivants.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-183">Status is indicated through Response Parameter 3 in a bitwise fashion by using the following flags.</span></span>



| <span data-ttu-id="ee2e9-184">Indicateur</span><span class="sxs-lookup"><span data-stu-id="ee2e9-184">Flag</span></span>                                             | <span data-ttu-id="ee2e9-185">Valeur</span><span class="sxs-lookup"><span data-stu-id="ee2e9-185">Value</span></span> | <span data-ttu-id="ee2e9-186">Description</span><span class="sxs-lookup"><span data-stu-id="ee2e9-186">Description</span></span>                                                                                                                                                                                                                          |
|--------------------------------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ee2e9-187">**\_indicateurs MDRT \_ WMP \_ désignalés par des \_ \_ éléments supprimés**</span><span class="sxs-lookup"><span data-stu-id="ee2e9-187">**WMP\_MDRT\_FLAGS\_UNREPORTED\_DELETED\_ITEMS**</span></span> | <span data-ttu-id="ee2e9-188">0x1</span><span class="sxs-lookup"><span data-stu-id="ee2e9-188">0x1</span></span>   | <span data-ttu-id="ee2e9-189">Les éléments ont été supprimés avant le premier nom de chemin d’accès à l’objet signalé.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-189">Items were deleted before the first object path name being reported.</span></span> <span data-ttu-id="ee2e9-190">Cela indique souvent que l’appareil a été reformaté.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-190">This often indicates that the device was reformatted.</span></span>                                                                                                           |
| <span data-ttu-id="ee2e9-191">**indicateurs MDRT WMP signalés comme étant \_ \_ \_ \_ ajoutés \_**</span><span class="sxs-lookup"><span data-stu-id="ee2e9-191">**WMP\_MDRT\_FLAGS\_UNREPORTED\_ADDED\_ITEMS**</span></span>   | <span data-ttu-id="ee2e9-192">0x2</span><span class="sxs-lookup"><span data-stu-id="ee2e9-192">0x2</span></span>   | <span data-ttu-id="ee2e9-193">L’appareil contient des éléments ajoutés qui ne peuvent pas être retournés dans la liste des PUOIDS.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-193">The device contains some added items that cannot be returned in the list of PUOIDS.</span></span> <span data-ttu-id="ee2e9-194">Notez que cet indicateur n’est pas redondant avec le paramètre de réponse 2.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-194">Note that this flag is not redundant with Response Parameter 2.</span></span> <span data-ttu-id="ee2e9-195">Définissez cet indicateur uniquement lorsqu’il y a des éléments demandés que l’appareil ne peut pas retourner.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-195">Set this flag only when there are requested items that the device cannot return.</span></span> |



 

<span data-ttu-id="ee2e9-196">Les bits 2 à 31 sont réservés à une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-196">Bits 2 through 31 are reserved for future use.</span></span> <span data-ttu-id="ee2e9-197">Ces bits doivent être définis sur zéro.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-197">These bits should be set to zero.</span></span>

<span data-ttu-id="ee2e9-198">Le lecteur Windows Media envoie la commande MTP à un appareil au démarrage d’une session de synchronisation avant le transfert des fichiers multimédias.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-198">Windows Media Player sends the MTP command to a device at the start of a synchronization session before media files are transferred.</span></span> <span data-ttu-id="ee2e9-199">L’appareil doit renvoyer sa réponse le plus rapidement possible pour éviter des retards dans l’opération de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-199">The device should return its response as quickly as possible to avoid delays in the synchronization operation.</span></span>

<span data-ttu-id="ee2e9-200">Le lecteur Windows Media demande des valeurs pour les attributs figurant dans [à propos des métadonnées](about-the-metadata.md) pour chaque POUID modifié renvoyé dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-200">Windows Media Player will request values for the attributes listed in [About the Metadata](about-the-metadata.md) for each modified POUID returned in the response.</span></span> <span data-ttu-id="ee2e9-201">Le lecteur Windows Media peut envoyer des valeurs mises à jour pour ces attributs à l’appareil dans les commandes suivantes.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-201">Windows Media Player might send updated values for these attributes to the device in subsequent commands.</span></span>

<span data-ttu-id="ee2e9-202">Les fichiers signalés comme ayant été supprimés de l’appareil peuvent être copiés à nouveau sur l’appareil si les paramètres de l’utilisateur l’exigent.</span><span class="sxs-lookup"><span data-stu-id="ee2e9-202">Files reported as having been removed from the device can be copied to the device again if the user's settings require it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ee2e9-203">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="ee2e9-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ee2e9-204">**Extensions d’appareil pour le transfert de métadonnées accéléré**</span><span class="sxs-lookup"><span data-stu-id="ee2e9-204">**Device Extensions for Accelerated Metadata Transfer**</span></span>](device-extensions-for-accelerated-metadata-transfer.md)
</dt> </dl>

 

 





