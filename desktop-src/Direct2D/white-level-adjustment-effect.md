---
title: Effet de la carte de ton blanc
description: Cet effet permet de mettre à l’échelle de manière linéaire le niveau de blanc d’une image. Cela s’avère particulièrement utile lorsque vous convertissez un espace de luminance à l’écran et un espace de luminance référencé, ou vice versa.
ms.topic: article
ms.date: 02/01/2019
ms.openlocfilehash: 70a38f37f5a5461b968099bebe4be120a727c053
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/12/2020
ms.locfileid: "103942366"
---
# <a name="white-level-adjustment-effect"></a><span data-ttu-id="79f23-104">Effet de réglage du niveau blanc</span><span class="sxs-lookup"><span data-stu-id="79f23-104">White level adjustment effect</span></span>

<span data-ttu-id="79f23-105">Cet effet permet de mettre à l’échelle de manière linéaire le niveau de blanc d’une image.</span><span class="sxs-lookup"><span data-stu-id="79f23-105">This effect allows the white level of an image to be linearly scaled.</span></span> <span data-ttu-id="79f23-106">Cela s’avère particulièrement utile lorsque vous convertissez un espace de luminance à l’écran et un espace de luminance référencé, ou vice versa.</span><span class="sxs-lookup"><span data-stu-id="79f23-106">This is especially helpful when you convert between display-referred luminance space and scene-referred luminance space, or vice versa.</span></span>

<span data-ttu-id="79f23-107">Les propriétés de cet effet sont identifiées par l' [**énumération D2D1_WHITELEVELADJUSTMENT_PROP**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop), et le CLSID est **CLSID_D2D1WhiteLevelAdjustment**.</span><span class="sxs-lookup"><span data-stu-id="79f23-107">The properties for this effect are identified by the [**D2D1_WHITELEVELADJUSTMENT_PROP enumeration**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop), and the CLSID is **CLSID_D2D1WhiteLevelAdjustment**.</span></span>

## <a name="effect-properties"></a><span data-ttu-id="79f23-108">Propriétés d’effet</span><span class="sxs-lookup"><span data-stu-id="79f23-108">Effect properties</span></span>

| <span data-ttu-id="79f23-109">Nom complet et énumération d’index</span><span class="sxs-lookup"><span data-stu-id="79f23-109">Display name and index enumeration</span></span> | <span data-ttu-id="79f23-110">Type et valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="79f23-110">Type and default value</span></span> | <span data-ttu-id="79f23-111">Description</span><span class="sxs-lookup"><span data-stu-id="79f23-111">Description</span></span> |
|-|-|-|
| <span data-ttu-id="79f23-112">InputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_INPUT_WHITE_LEVEL</span><span class="sxs-lookup"><span data-stu-id="79f23-112">InputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_INPUT_WHITE_LEVEL</span></span> | <span data-ttu-id="79f23-113">FLOAT</span><span class="sxs-lookup"><span data-stu-id="79f23-113">FLOAT</span></span> | <span data-ttu-id="79f23-114">Niveau de blanc de l’image d’entrée, en nits.</span><span class="sxs-lookup"><span data-stu-id="79f23-114">The white level of the input image, in nits.</span></span> |
| <span data-ttu-id="79f23-115">OutputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_OUTPUT_WHITE_LEVEL</span><span class="sxs-lookup"><span data-stu-id="79f23-115">OutputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_OUTPUT_WHITE_LEVEL</span></span> | <span data-ttu-id="79f23-116">FLOAT</span><span class="sxs-lookup"><span data-stu-id="79f23-116">FLOAT</span></span> | <span data-ttu-id="79f23-117">Niveau de blanc de l’image de sortie, en nits.</span><span class="sxs-lookup"><span data-stu-id="79f23-117">The white level of the output image, in nits.</span></span> |

## <a name="remarks"></a><span data-ttu-id="79f23-118">Notes</span><span class="sxs-lookup"><span data-stu-id="79f23-118">Remarks</span></span>
<span data-ttu-id="79f23-119">Cet effet est destiné à être combiné avec l' [effet carte de tonalité HDR](hdr-tone-map-effect.md) pour vous permettre de restituer des images HDR dans Direct2D avec une gestion des couleurs et un mappage des tons appropriés.</span><span class="sxs-lookup"><span data-stu-id="79f23-119">This effect is intended to be combined with the [HDR tone map effect](hdr-tone-map-effect.md) to allow you to render HDR images in Direct2D with proper color management and tone mapping.</span></span> <span data-ttu-id="79f23-120">Pour plus d’informations, consultez les **Remarques** de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="79f23-120">See that topic's **Remarks** for more details.</span></span> <span data-ttu-id="79f23-121">Ces effets sont destinés à toute infrastructure qui souhaite fournir une expérience d’affichage d’image HDR de meilleure qualité qui gère tous les formats d’image HDR Windows et s’adapte aux fonctionnalités de l’affichage (que ce soit en HDR ou WCG/SDR).</span><span class="sxs-lookup"><span data-stu-id="79f23-121">The effects are aimed at any framework that wants to provide a best-in-class HDR image viewing experience that handles all of the Windows HDR image formats, and adapts to the capabilities of the display (whether that's HDR or WCG/SDR).</span></span>

<span data-ttu-id="79f23-122">Sur Windows, tout le contenu SDR/WCG est supposé être dans un espace de luminance à l’écran, ce qui signifie que le niveau de blanc du contenu doit être mis à l’échelle jusqu’au niveau blanc de l’affichage avant d’être présenté au final.</span><span class="sxs-lookup"><span data-stu-id="79f23-122">On Windows, all SDR/WCG content is assumed to be in a display-referred luminance space, meaning that the white level of the content should be scaled up to the display's white level before it is ultimately presented.</span></span> <span data-ttu-id="79f23-123">Toutefois, ce n’est pas toujours la responsabilité de votre application.</span><span class="sxs-lookup"><span data-stu-id="79f23-123">However, it's not always your application's responsibility to do this.</span></span> <span data-ttu-id="79f23-124">En revanche, le contenu HDR est supposé être dans un espace de luminance à la scène, ce qui signifie qu’il ne doit pas être mis à l’échelle pour correspondre au niveau de blanc de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="79f23-124">In contrast, HDR content is assumed to be in a scene-referred luminance space, meaning that it shouldn't ultimately be scaled to match the display's white level.</span></span> <span data-ttu-id="79f23-125">Cela dit, votre application devra peut-être effectuer une mise à l’échelle dans certaines circonstances lors du rendu du contenu HDR pour s’assurer qu’il s’agit du résultat net.</span><span class="sxs-lookup"><span data-stu-id="79f23-125">That said, your application may need to perform scaling in some circumstances when rendering HDR content to ensure that this is the net result.</span></span>

<span data-ttu-id="79f23-126">Lorsque le bureau Windows est en mode SDR ou WCG, le bureau est constitué d’un espace de luminance à l’écran.</span><span class="sxs-lookup"><span data-stu-id="79f23-126">When the Windows desktop is in SDR or WCG mode, the desktop is composed in a display-referred luminance space.</span></span> <span data-ttu-id="79f23-127">Toutefois, si le bureau Windows est en mode HDR, la composition du Bureau se produit dans l’espace de luminance à la scène.</span><span class="sxs-lookup"><span data-stu-id="79f23-127">But if the Windows desktop is in HDR mode, then desktop composition happens in scene-referred luminance space.</span></span> <span data-ttu-id="79f23-128">Cela dit, le Gestionnaire de fenêtrage (DWM) lui-même effectue des réglages de luminance (souvent appelés SDRBoost) pour les surfaces de composition 8 bits et simplifie votre application pour ce cas.</span><span class="sxs-lookup"><span data-stu-id="79f23-128">That said, the Desktop Window Manager (DWM) itself performs luminance adjustments (often called SDRBoost) for 8-bit composition surfaces, and that simplifies your application for that case.</span></span> <span data-ttu-id="79f23-129">Même dans ce cas, l’augmentation automatique signifie que le rôle de votre application dans la conversion d’un espace de luminance à un autre dépend du format de composition utilisé par votre application pour présenter son contenu.</span><span class="sxs-lookup"><span data-stu-id="79f23-129">Even so, the automatic boost means that your application's role in converting from one luminance space to another is dependent upon the composition format that your application is using to present its content.</span></span>

<span data-ttu-id="79f23-130">Le tableau ci-dessous décrit les cas où votre application doit et ne doit pas effectuer un ajustement de niveau blanc, ainsi que la nature de cette modification.</span><span class="sxs-lookup"><span data-stu-id="79f23-130">The table below describes the cases when your application should and should not perform a white level adjustment, as well as what that adjustment should be.</span></span> <span data-ttu-id="79f23-131">En général, l’ajustement dépend de trois facteurs.</span><span class="sxs-lookup"><span data-stu-id="79f23-131">In general, the adjustment depends on three factors.</span></span>

1. <span data-ttu-id="79f23-132">Colorspace de contenu d’entrée.</span><span class="sxs-lookup"><span data-stu-id="79f23-132">Input content colorspace.</span></span> <span data-ttu-id="79f23-133">Si votre contenu d’entrée contient ou non des valeurs de luminance HDR (High dynamique Range).</span><span class="sxs-lookup"><span data-stu-id="79f23-133">Whether your input content contains high dynamic range (HDR) luminance values or not.</span></span> <span data-ttu-id="79f23-134">Le contenu WCG se comporte comme SDR pour le comportement de luminance.</span><span class="sxs-lookup"><span data-stu-id="79f23-134">WCG content behaves the same as SDR for luminance behavior.</span></span>
2. <span data-ttu-id="79f23-135">Format de composition.</span><span class="sxs-lookup"><span data-stu-id="79f23-135">Composition format.</span></span> <span data-ttu-id="79f23-136">Format de pixel de la surface cible présentée au DWM &mdash; , par exemple, une chaîne de [permutation](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) ou une [surface de composition](/uwp/api/Windows.UI.Composition.ICompositionSurface).</span><span class="sxs-lookup"><span data-stu-id="79f23-136">The pixel format of the target surface that is presented to the DWM&mdash;for example, a [swap chain](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) or a [composition surface](/uwp/api/Windows.UI.Composition.ICompositionSurface).</span></span> <span data-ttu-id="79f23-137">Lors du rendu à l’aide de Direct2D, il peut s’agir de **UINT8** ou **FP16**.</span><span class="sxs-lookup"><span data-stu-id="79f23-137">When rendering using Direct2D, this is either **UINT8** or **FP16**.</span></span>
3. <span data-ttu-id="79f23-138">Mode couleur avancée du bureau.</span><span class="sxs-lookup"><span data-stu-id="79f23-138">Desktop advanced color mode.</span></span> <span data-ttu-id="79f23-139">Indique si le DWM s’exécute en mode SDR, WCG ou HDR pour l’affichage actuel.</span><span class="sxs-lookup"><span data-stu-id="79f23-139">Whether the DWM is running in SDR, WCG, or HDR mode for the current display.</span></span> <span data-ttu-id="79f23-140">Obtenez ces informations par le biais de [**DXGI_OUTPUT_DESC1 :: colorspace**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1) ou [**AdvancedColorInfo. CurrentAdvancedColorKind**](/uwp/api/windows.graphics.display.advancedcolorinfo.currentadvancedcolorkind).</span><span class="sxs-lookup"><span data-stu-id="79f23-140">Obtain this information via [**DXGI_OUTPUT_DESC1::ColorSpace**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1) or [**AdvancedColorInfo.CurrentAdvancedColorKind**](/uwp/api/windows.graphics.display.advancedcolorinfo.currentadvancedcolorkind).</span></span>

<span data-ttu-id="79f23-141">Sur la base de ces trois facteurs, vous devez définir les valeurs appropriées pour les `InputWhiteLevel` `OutputWhiteLevel` Propriétés et.</span><span class="sxs-lookup"><span data-stu-id="79f23-141">Based on these three factors, you should set the appropriate values for the `InputWhiteLevel` and `OutputWhiteLevel` properties.</span></span>

|<span data-ttu-id="79f23-142">Contenu d’entrée</span><span class="sxs-lookup"><span data-stu-id="79f23-142">Input content</span></span>|<span data-ttu-id="79f23-143">Format de composition</span><span class="sxs-lookup"><span data-stu-id="79f23-143">Composition format</span></span>|<span data-ttu-id="79f23-144">Mode de couleurs avancé</span><span class="sxs-lookup"><span data-stu-id="79f23-144">Advanced color mode</span></span>|<span data-ttu-id="79f23-145">InputWhiteLevel</span><span class="sxs-lookup"><span data-stu-id="79f23-145">InputWhiteLevel</span></span>|<span data-ttu-id="79f23-146">OutputWhiteLevel</span><span class="sxs-lookup"><span data-stu-id="79f23-146">OutputWhiteLevel</span></span>|
|-|-|-|-|-|
|<span data-ttu-id="79f23-147">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="79f23-147">SDR/WCG</span></span>|<span data-ttu-id="79f23-148">**DESTINÉES**</span><span class="sxs-lookup"><span data-stu-id="79f23-148">**UINT8**</span></span>|<span data-ttu-id="79f23-149">Quelconque</span><span class="sxs-lookup"><span data-stu-id="79f23-149">Any</span></span>|<span data-ttu-id="79f23-150">N/A</span><span class="sxs-lookup"><span data-stu-id="79f23-150">N/A</span></span>|<span data-ttu-id="79f23-151">N/A</span><span class="sxs-lookup"><span data-stu-id="79f23-151">N/A</span></span>|
|<span data-ttu-id="79f23-152">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="79f23-152">SDR/WCG</span></span>|<span data-ttu-id="79f23-153">**FP16**</span><span class="sxs-lookup"><span data-stu-id="79f23-153">**FP16**</span></span>|<span data-ttu-id="79f23-154">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="79f23-154">SDR/WCG</span></span>|<span data-ttu-id="79f23-155">N/A</span><span class="sxs-lookup"><span data-stu-id="79f23-155">N/A</span></span>|<span data-ttu-id="79f23-156">N/A</span><span class="sxs-lookup"><span data-stu-id="79f23-156">N/A</span></span>|
|<span data-ttu-id="79f23-157">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="79f23-157">SDR/WCG</span></span>|<span data-ttu-id="79f23-158">**FP16**</span><span class="sxs-lookup"><span data-stu-id="79f23-158">**FP16**</span></span>|<span data-ttu-id="79f23-159">ÉTENDUE</span><span class="sxs-lookup"><span data-stu-id="79f23-159">HDR</span></span>|<span data-ttu-id="79f23-160">SDRWhite</span><span class="sxs-lookup"><span data-stu-id="79f23-160">SDRWhite</span></span>|<span data-ttu-id="79f23-161">80</span><span class="sxs-lookup"><span data-stu-id="79f23-161">80</span></span>|
|<span data-ttu-id="79f23-162">ÉTENDUE</span><span class="sxs-lookup"><span data-stu-id="79f23-162">HDR</span></span>|<span data-ttu-id="79f23-163">Quelconque</span><span class="sxs-lookup"><span data-stu-id="79f23-163">Any</span></span>|<span data-ttu-id="79f23-164">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="79f23-164">SDR/WCG</span></span>|<span data-ttu-id="79f23-165">80</span><span class="sxs-lookup"><span data-stu-id="79f23-165">80</span></span>|[<span data-ttu-id="79f23-166">**DXGI_OUTPUT_DESC1 :: MaxLuminance**</span><span class="sxs-lookup"><span data-stu-id="79f23-166">**DXGI_OUTPUT_DESC1::MaxLuminance**</span></span>](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1)|
|<span data-ttu-id="79f23-167">ÉTENDUE</span><span class="sxs-lookup"><span data-stu-id="79f23-167">HDR</span></span>|<span data-ttu-id="79f23-168">**DESTINÉES**</span><span class="sxs-lookup"><span data-stu-id="79f23-168">**UINT8**</span></span>|<span data-ttu-id="79f23-169">ÉTENDUE</span><span class="sxs-lookup"><span data-stu-id="79f23-169">HDR</span></span>|<span data-ttu-id="79f23-170">80</span><span class="sxs-lookup"><span data-stu-id="79f23-170">80</span></span>|<span data-ttu-id="79f23-171">SDRWhite</span><span class="sxs-lookup"><span data-stu-id="79f23-171">SDRWhite</span></span>|
|<span data-ttu-id="79f23-172">ÉTENDUE</span><span class="sxs-lookup"><span data-stu-id="79f23-172">HDR</span></span>|<span data-ttu-id="79f23-173">**FP16**</span><span class="sxs-lookup"><span data-stu-id="79f23-173">**FP16**</span></span>|<span data-ttu-id="79f23-174">ÉTENDUE</span><span class="sxs-lookup"><span data-stu-id="79f23-174">HDR</span></span>|<span data-ttu-id="79f23-175">N/A</span><span class="sxs-lookup"><span data-stu-id="79f23-175">N/A</span></span>|<span data-ttu-id="79f23-176">N/A</span><span class="sxs-lookup"><span data-stu-id="79f23-176">N/A</span></span>|

<span data-ttu-id="79f23-177">Dans le tableau, la valeur 80 est le niveau de référence blanc, en nits, pour le contenu sRVB ou ScRVB.</span><span class="sxs-lookup"><span data-stu-id="79f23-177">In the table, the value 80 is the reference white level, in nits, for sRGB or scRGB content.</span></span> <span data-ttu-id="79f23-178">Pour ce faire, vous pouvez utiliser la constante [**D2D1_SCENE_REFERRED_SDR_WHITE_LEVEL**](/windows/desktop/direct2d/direct2d-constants), qui est définie dans `d2d1effects_2.h` .</span><span class="sxs-lookup"><span data-stu-id="79f23-178">For this, you can use the constant [**D2D1_SCENE_REFERRED_SDR_WHITE_LEVEL**](/windows/desktop/direct2d/direct2d-constants), which is defined in `d2d1effects_2.h`.</span></span> <span data-ttu-id="79f23-179">La valeur `SDRWhite` est le nombre de nits que l’affichage doit utiliser pour afficher le contenu en blanc sRVB.</span><span class="sxs-lookup"><span data-stu-id="79f23-179">The value `SDRWhite` is the number of nits that the display should use to display white sRGB content.</span></span> <span data-ttu-id="79f23-180">Vous pouvez récupérer cette valeur en accédant à la propriété [**AdvancedColorInfo. SdrWhiteLevelInNits**](/uwp/api/windows.graphics.display.advancedcolorinfo.sdrwhitelevelinnits) .</span><span class="sxs-lookup"><span data-stu-id="79f23-180">You can retrieve this value by accessing the [**AdvancedColorInfo.SdrWhiteLevelInNits**](/uwp/api/windows.graphics.display.advancedcolorinfo.sdrwhitelevelinnits) property.</span></span> <span data-ttu-id="79f23-181">La valeur N/A signifie que le réglage du niveau de blanc n’est pas utilisé dans ce scénario. vous pouvez soit supprimer l’effet de votre graphique, soit définir des valeurs pour une absence d’opération.</span><span class="sxs-lookup"><span data-stu-id="79f23-181">The value N/A means that white level adjustment is not used in this scenario; you can either remove the effect from your graph, or set values for a no-op.</span></span>

<span data-ttu-id="79f23-182">Notez que, dans les cas où un réglage du niveau de blanc n’est pas requis par l’application, le DWM ou l’affichage peut gérer la conversion de l’espace de luminance à l’affichage et l’espace de luminance référencé.</span><span class="sxs-lookup"><span data-stu-id="79f23-182">Note that, in cases where a white level adjustment is not needed by the application, the DWM or the display may be handling the conversion from display-referred luminance space to scene-referred luminance space.</span></span>

- <span data-ttu-id="79f23-183">En mode SDR/WCG, la conversion se produit après la composition DWM et s’applique à tout le contenu présenté à cet affichage.</span><span class="sxs-lookup"><span data-stu-id="79f23-183">In SDR/WCG mode, the conversion happens after DWM composition, and applies to all content presented to that display.</span></span> <span data-ttu-id="79f23-184">L’affichage effectue implicitement cette conversion.</span><span class="sxs-lookup"><span data-stu-id="79f23-184">The display implicitly performs this conversion.</span></span>
- <span data-ttu-id="79f23-185">En mode HDR, la conversion est effectuée automatiquement par le DWM avant la composition, tant que la surface de composition de votre application est SDR.</span><span class="sxs-lookup"><span data-stu-id="79f23-185">In HDR mode, the conversion is performed automatically by the DWM before composition, so long as your application's composition surface is SDR.</span></span>

## <a name="requirements"></a><span data-ttu-id="79f23-186">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="79f23-186">Requirements</span></span>

| <span data-ttu-id="79f23-187">Condition requise</span><span class="sxs-lookup"><span data-stu-id="79f23-187">Requirement</span></span> | <span data-ttu-id="79f23-188">Valeur</span><span class="sxs-lookup"><span data-stu-id="79f23-188">Value</span></span> |
|-|-|
| <span data-ttu-id="79f23-189">Client minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="79f23-189">Minimum supported client</span></span> | <span data-ttu-id="79f23-190">Windows 10, version 1809 (10,0 ; Build 17763) \[ applications de bureau \| UWP\]</span><span class="sxs-lookup"><span data-stu-id="79f23-190">Windows 10, version 1809 (10.0; Build 17763) \[desktop apps \| UWP apps\]</span></span> |
| <span data-ttu-id="79f23-191">En-tête</span><span class="sxs-lookup"><span data-stu-id="79f23-191">Header</span></span> | <span data-ttu-id="79f23-192">d2d1effects \_ 2. h</span><span class="sxs-lookup"><span data-stu-id="79f23-192">d2d1effects\_2.h</span></span> |
| <span data-ttu-id="79f23-193">Bibliothèque</span><span class="sxs-lookup"><span data-stu-id="79f23-193">Library</span></span> | <span data-ttu-id="79f23-194">d2d1. lib, dxguid. lib</span><span class="sxs-lookup"><span data-stu-id="79f23-194">d2d1.lib, dxguid.lib</span></span> |

## <a name="related-topics"></a><span data-ttu-id="79f23-195">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="79f23-195">Related topics</span></span>

* [<span data-ttu-id="79f23-196">Interface ID2D1Effect</span><span class="sxs-lookup"><span data-stu-id="79f23-196">ID2D1Effect interface</span></span>](/windows/desktop/api/d2d1_1/nn-d2d1_1-id2d1effect)
* [<span data-ttu-id="79f23-197">Énumération D2D1_WHITELEVELADJUSTMENT_PROP</span><span class="sxs-lookup"><span data-stu-id="79f23-197">D2D1_WHITELEVELADJUSTMENT_PROP enumeration</span></span>](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop)
