---
title: Vue d’ensemble des ressources
description: Décrit les ressources Direct2D et comment elles peuvent être partagées.
ms.assetid: afd308a7-9524-4436-9a0e-8575383d96fa
keywords:
- Direct2D, ressources
ms.topic: article
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: bf4eb807a25b592e32a2d83436532af17462d70c
ms.sourcegitcommit: 7d0cc7eb398fee8f5be55cd654a12d29937d643c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/08/2021
ms.locfileid: "104321377"
---
# <a name="resources-overview"></a><span data-ttu-id="3bbcc-104">Vue d’ensemble des ressources</span><span class="sxs-lookup"><span data-stu-id="3bbcc-104">Resources Overview</span></span>

<span data-ttu-id="3bbcc-105">Une ressource Direct2D est un objet utilisé pour le dessin et est représenté par une interface Direct2D, telle que [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) ou [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget).</span><span class="sxs-lookup"><span data-stu-id="3bbcc-105">A Direct2D resource is an object that is used for drawing and is represented by a Direct2D interface, such as [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) or [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget).</span></span> <span data-ttu-id="3bbcc-106">Cette rubrique décrit les types de ressources Direct2D et comment elles peuvent être partagées.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-106">This topic describes the kinds of Direct2D resources and how they can be shared.</span></span>

<span data-ttu-id="3bbcc-107">Cette rubrique contient les sections suivantes :</span><span class="sxs-lookup"><span data-stu-id="3bbcc-107">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="3bbcc-108">À propos des ressources Direct2D</span><span class="sxs-lookup"><span data-stu-id="3bbcc-108">About Direct2D Resources</span></span>](#about-direct2d-resources)
-   [<span data-ttu-id="3bbcc-109">Ressources indépendantes du périphérique</span><span class="sxs-lookup"><span data-stu-id="3bbcc-109">Device-Independent Resources</span></span>](#device-independent-resources)
-   [<span data-ttu-id="3bbcc-110">Ressources dépendantes de l’appareil</span><span class="sxs-lookup"><span data-stu-id="3bbcc-110">Device-Dependent Resources</span></span>](#device-dependent-resources)
-   [<span data-ttu-id="3bbcc-111">Partage des ressources de la fabrique</span><span class="sxs-lookup"><span data-stu-id="3bbcc-111">Sharing Factory Resources</span></span>](#sharing-factory-resources)
-   [<span data-ttu-id="3bbcc-112">Partage des ressources de la cible de rendu</span><span class="sxs-lookup"><span data-stu-id="3bbcc-112">Sharing Render Target Resources</span></span>](#sharing-render-target-resources)
    -   [<span data-ttu-id="3bbcc-113">Cibles de rendu matériel</span><span class="sxs-lookup"><span data-stu-id="3bbcc-113">Hardware Render Targets</span></span>](#hardware-render-targets)
    -   [<span data-ttu-id="3bbcc-114">Cibles de rendu de surface DXGI</span><span class="sxs-lookup"><span data-stu-id="3bbcc-114">DXGI Surface Render Targets</span></span>](#dxgi-surface-render-targets)
    -   [<span data-ttu-id="3bbcc-115">Cibles de rendu compatibles et bitmaps partagées</span><span class="sxs-lookup"><span data-stu-id="3bbcc-115">Compatible Render Targets and Shared Bitmaps</span></span>](#compatible-render-targets-and-shared-bitmaps)

## <a name="about-direct2d-resources"></a><span data-ttu-id="3bbcc-116">À propos des ressources Direct2D</span><span class="sxs-lookup"><span data-stu-id="3bbcc-116">About Direct2D Resources</span></span>

<span data-ttu-id="3bbcc-117">De nombreuses API 2D à accélération matérielle sont conçues autour d’un modèle de ressource centré sur l’UC et d’un ensemble d’opérations de rendu qui fonctionnent bien sur les processeurs. ensuite, une partie de l’API est accélérée par le matériel.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-117">Many hardware-accelerated 2D APIs are designed around a CPU-focused resource model and a set of rendering operations that work well on CPUs.Then, some part of the API is hardware-accelerated.</span></span> <span data-ttu-id="3bbcc-118">L’implémentation de ces API requiert un gestionnaire de ressources pour le mappage des ressources de processeur aux ressources sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-118">Implementing these APIs requires a resource manager for mapping CPU resources to resources on the GPU.</span></span> <span data-ttu-id="3bbcc-119">En raison des limitations du GPU, certaines opérations peuvent ne pas être accélérées dans toutes les circonstances.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-119">Because of GPU limitations, some operations might be unable to be accelerated in every circumstance.</span></span> <span data-ttu-id="3bbcc-120">Dans ce cas, le gestionnaire des ressources doit communiquer entre le processeur et le GPU (ce qui est onéreux) afin qu’il puisse passer au rendu de l’UC.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-120">In these cases, the resource manager must communicate back and forth between the CPU and GPU (which is expensive) so that it can transition to CPU rendering.</span></span> <span data-ttu-id="3bbcc-121">Dans certains cas, il est possible qu’il force le rendu de manière imprévisible sur le processeur.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-121">In some cases, it might unpredictably force rendering to fall back completely to the CPU.</span></span> <span data-ttu-id="3bbcc-122">En outre, les opérations de rendu qui apparaissent simples peuvent nécessiter des étapes de rendu provisoires temporaires qui ne sont pas exposées dans l’API et qui nécessitent des ressources GPU supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-122">In addition, rendering operations that appear simple might require temporary intermediate rendering steps that are not exposed in the API and that require additional GPU resources.</span></span>

<span data-ttu-id="3bbcc-123">Direct2D fournit un mappage plus direct pour tirer pleinement parti du GPU.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-123">Direct2D provides a more direct mapping to making full use of the GPU.</span></span> <span data-ttu-id="3bbcc-124">Il fournit deux catégories de ressources : indépendantes du périphérique et dépendant du périphérique.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-124">It provides two categories of resources: device-independent and device-dependent.</span></span>

-   <span data-ttu-id="3bbcc-125">Les ressources indépendantes du périphérique, telles que [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry), sont conservées sur le processeur.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-125">Device-independent resources, such as [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry), are kept on the CPU.</span></span>
-   <span data-ttu-id="3bbcc-126">Les ressources dépendantes de l’appareil, telles que [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) et [**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush), sont mappées directement aux ressources sur le GPU (lorsque l’accélération matérielle est disponible).</span><span class="sxs-lookup"><span data-stu-id="3bbcc-126">Device-dependent resources, such as [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) and [**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush), directly map to resources on the GPU (when hardware acceleration is available).</span></span> <span data-ttu-id="3bbcc-127">Les appels de rendu sont effectués en combinant les informations de vertex et de couverture d’une géométrie avec les informations de texturation produites par les ressources dépendantes de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-127">Rendering calls are performed by combining vertex and coverage information from a geometry with texturing information produced by the device-dependent resources.</span></span>

<span data-ttu-id="3bbcc-128">Lorsque vous créez des ressources dépendantes de l’appareil, les ressources système (le GPU, s’il est disponible ou le processeur) sont allouées lorsque l’appareil est créé et ne changent pas d’une opération de rendu à une autre.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-128">When you create device-dependent resources, system resources (the GPU, if available, or the CPU) are allocated when the device is created and do not change from one rendering operation to another.</span></span> <span data-ttu-id="3bbcc-129">Cette situation élimine le besoin d’un gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-129">This situation eliminates the need for a resource manager.</span></span> <span data-ttu-id="3bbcc-130">Outre les améliorations de performances générales fournies par l’élimination d’un gestionnaire de ressources, ce modèle vous permet de contrôler directement n’importe quel rendu intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-130">In addition to the general performance improvements that are provided by the elimination of a resource manager, this model enables you to directly control any intermediate rendering.</span></span>

<span data-ttu-id="3bbcc-131">Étant donné que Direct2D offre un contrôle très important sur les ressources, vous devez comprendre les différents types de ressources et le moment où ils peuvent être utilisés ensemble.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-131">Because Direct2D provides so much control over resources, you must understand the different kinds of resources and when they can be used together.</span></span>

## <a name="device-independent-resources"></a><span data-ttu-id="3bbcc-132">Ressources Device-Independent</span><span class="sxs-lookup"><span data-stu-id="3bbcc-132">Device-Independent Resources</span></span>

<span data-ttu-id="3bbcc-133">Comme décrit dans la section précédente, les ressources indépendantes du périphérique résident toujours sur le processeur et ne sont jamais associées à un périphérique de rendu matériel.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-133">As described in the previous section, device-independent resources always reside on the CPU and are never associated with a hardware rendering device.</span></span> <span data-ttu-id="3bbcc-134">Les ressources indépendantes du périphérique sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="3bbcc-134">The following are device-independent resources:</span></span>

-   [<span data-ttu-id="3bbcc-135">**ID2D1DrawingStateBlock**</span><span class="sxs-lookup"><span data-stu-id="3bbcc-135">**ID2D1DrawingStateBlock**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1drawingstateblock)
-   [<span data-ttu-id="3bbcc-136">**ID2D1Factory**</span><span class="sxs-lookup"><span data-stu-id="3bbcc-136">**ID2D1Factory**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)
-   <span data-ttu-id="3bbcc-137">[**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) et les interfaces qui héritent de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-137">[**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) and the interfaces that inherit from it.</span></span>
-   <span data-ttu-id="3bbcc-138">[**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) et [ **ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink)</span><span class="sxs-lookup"><span data-stu-id="3bbcc-138">[**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) and [**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink)</span></span>
-   [<span data-ttu-id="3bbcc-139">**ID2D1StrokeStyle**</span><span class="sxs-lookup"><span data-stu-id="3bbcc-139">**ID2D1StrokeStyle**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1strokestyle)

<span data-ttu-id="3bbcc-140">Utilisez un [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory), lui-même une ressource indépendante du périphérique, pour créer des ressources indépendantes du périphérique.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-140">Use an [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory), itself a device-independent resource, to create device-independent resources.</span></span> <span data-ttu-id="3bbcc-141">(Pour créer une fabrique, utilisez la fonction [**CreateFactory**](/windows/desktop/api/d2d1/nf-d2d1-d2d1createfactory) .)</span><span class="sxs-lookup"><span data-stu-id="3bbcc-141">(To create a factory, use the [**CreateFactory**](/windows/desktop/api/d2d1/nf-d2d1-d2d1createfactory) function.)</span></span>

<span data-ttu-id="3bbcc-142">À l’exception des cibles de rendu, toutes les ressources créées par une fabrique sont indépendantes du périphérique.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-142">Except for render targets, all the resources created by a factory are device-independent.</span></span> <span data-ttu-id="3bbcc-143">Une cible de rendu est une ressource dépendante de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-143">A render target is a device-dependent resource.</span></span>

## <a name="device-dependent-resources"></a><span data-ttu-id="3bbcc-144">Ressources Device-Dependent</span><span class="sxs-lookup"><span data-stu-id="3bbcc-144">Device-Dependent Resources</span></span>

<span data-ttu-id="3bbcc-145">Toute ressource qui n’est pas nommée dans la liste précédente est une ressource dépendante de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-145">Any resource that is not named in the previous list is a device-dependent resource.</span></span> <span data-ttu-id="3bbcc-146">Les ressources dépendantes de l’appareil sont associées à un appareil de rendu particulier.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-146">Device-dependent resources are associated with a particular rendering device.</span></span> <span data-ttu-id="3bbcc-147">Lorsque l’accélération matérielle est disponible, cet appareil est le GPU.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-147">When hardware acceleration is available, that device is the GPU.</span></span> <span data-ttu-id="3bbcc-148">Dans d’autres cas, il s’agit de l’UC.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-148">In other cases, it is the CPU.</span></span>

<span data-ttu-id="3bbcc-149">Pour créer la plupart des ressources dépendantes de l’appareil, utilisez une cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-149">To create most device-dependent resources, use a render target.</span></span> <span data-ttu-id="3bbcc-150">Dans la plupart des cas, utilisez une fabrique pour créer une cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-150">In most cases, use a factory to create a render target.</span></span>

<span data-ttu-id="3bbcc-151">Voici des exemples de ressources dépendantes de l’appareil :</span><span class="sxs-lookup"><span data-stu-id="3bbcc-151">The following are examples of device-dependent resources:</span></span>

-   <span data-ttu-id="3bbcc-152">[**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) et les interfaces qui héritent de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-152">[**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) and the interfaces that inherit from it.</span></span> <span data-ttu-id="3bbcc-153">Utilisez une cible de rendu pour créer des pinceaux.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-153">Use a render target to create brushes.</span></span>
-   <span data-ttu-id="3bbcc-154">[**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer).</span><span class="sxs-lookup"><span data-stu-id="3bbcc-154">[**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer).</span></span> <span data-ttu-id="3bbcc-155">Utilisez une cible de rendu pour créer des couches.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-155">Use a render target to create layers.</span></span>
-   <span data-ttu-id="3bbcc-156">[**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) et les interfaces qui héritent de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-156">[**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) and the interfaces that inherit from it.</span></span> <span data-ttu-id="3bbcc-157">Pour créer une cible de rendu, utilisez une fabrique ou une autre cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-157">To create a render target, use a factory or another render target.</span></span>

> [!Note]  
> <span data-ttu-id="3bbcc-158">À compter de Windows 8, de nouvelles interfaces créent des ressources dépendantes de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-158">Starting with Windows 8, there are new interfaces that create device dependent resources.</span></span> <span data-ttu-id="3bbcc-159">Un [**ID2D1Device**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1device) et un [**ID2D1DeviceContext**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1devicecontext) peuvent partager une ressource si le contexte de périphérique et la ressource sont créés à partir du même **ID2D1Device**.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-159">An [**ID2D1Device**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1device) and a [**ID2D1DeviceContext**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1devicecontext) can share a resource if the device context and the resource are created from the same **ID2D1Device**.</span></span>

 

<span data-ttu-id="3bbcc-160">Les ressources dépendantes de l’appareil deviennent inutilisables lorsque les appareils de rendu associés deviennent indisponibles.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-160">Device-dependent resources become unusable when the associated rendering devices become unavailable.</span></span> <span data-ttu-id="3bbcc-161">Cela signifie que lorsque vous recevez l’erreur de recréation de la cible de [**\_ \_ recréation D2DERR**](direct2d-error-codes.md) pour une cible de rendu, vous devez recréer la cible de rendu et toutes ses ressources.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-161">This means that when you receive the [**D2DERR\_RECREATE\_TARGET**](direct2d-error-codes.md) error for a render target, you must re-create the render target and all its resources.</span></span>

## <a name="sharing-factory-resources"></a><span data-ttu-id="3bbcc-162">Partage des ressources de la fabrique</span><span class="sxs-lookup"><span data-stu-id="3bbcc-162">Sharing Factory Resources</span></span>

<span data-ttu-id="3bbcc-163">Vous pouvez partager toutes les ressources indépendantes des appareils créées par une fabrique avec toutes les autres ressources (indépendantes du périphérique ou de l’appareil) créées par la même fabrique.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-163">You can share all device-independent resources created by a factory with all other resources (device-independent or device-dependent) created by the same factory.</span></span> <span data-ttu-id="3bbcc-164">Par exemple, vous pouvez utiliser deux objets [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) pour dessiner le même [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) si ces deux objets **ID2D1RenderTarget** ont été créés par la même fabrique.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-164">For example, you can use two [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) objects to draw the same [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) if both of those **ID2D1RenderTarget** objects were created by the same factory.</span></span>

<span data-ttu-id="3bbcc-165">Les interfaces du récepteur ([**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink), [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink)et [**ID2D1TessellationSink**](/windows/win32/api/d2d1/nn-d2d1-id2d1tessellationsink)) peuvent être partagées avec les ressources créées par toute fabrique.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-165">The sink interfaces ([**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink), [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink), and [**ID2D1TessellationSink**](/windows/win32/api/d2d1/nn-d2d1-id2d1tessellationsink)) may be shared with resources created by any factory.</span></span> <span data-ttu-id="3bbcc-166">Contrairement à d’autres interfaces dans Direct2D, toute implémentation d’une interface de récepteur peut être utilisée.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-166">Unlike other interfaces in Direct2D, any implementation of a sink interface can be used.</span></span> <span data-ttu-id="3bbcc-167">Par exemple, vous pouvez utiliser votre propre implémentation de **ID2D1SimplifiedGeometrySink**.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-167">For example, you could use your own implementation of **ID2D1SimplifiedGeometrySink**.</span></span>

## <a name="sharing-render-target-resources"></a><span data-ttu-id="3bbcc-168">Partage des ressources de la cible de rendu</span><span class="sxs-lookup"><span data-stu-id="3bbcc-168">Sharing Render Target Resources</span></span>

<span data-ttu-id="3bbcc-169">Votre capacité à partager des ressources créées par une cible de rendu dépend du type de cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-169">Your ability to share resources created by a render target depends on the kind of render target.</span></span> <span data-ttu-id="3bbcc-170">Quand vous créez une cible de rendu de type [**d2d1 de \_ cible de rendu \_ \_ \_ par défaut**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type), les ressources créées par cette cible de rendu peuvent uniquement être utilisées par cette cible de rendu (sauf si la cible de rendu s’ajuste à l’une des catégories décrites dans les sections suivantes).</span><span class="sxs-lookup"><span data-stu-id="3bbcc-170">When you create a render target of type [**D2D1\_RENDER\_TARGET\_TYPE\_DEFAULT**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type), the resources created by that render target can only be used by that render target (unless the render target fits into one of the categories described in the following sections).</span></span> <span data-ttu-id="3bbcc-171">Cela est dû au fait que vous ne savez pas quel appareil la cible de rendu finit par utiliser : elle peut finir le rendu sur le matériel local, le logiciel ou le matériel d’un client distant.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-171">This occurs because you do not know what device the render target will end up using—it could end up rendering to local hardware, software, or to a remote client's hardware.</span></span> <span data-ttu-id="3bbcc-172">Par exemple, vous pouvez écrire un programme qui cesse de fonctionner lorsqu’il est affiché à distance ou lorsque la taille de la cible de rendu augmente au-delà de la taille maximale prise en charge par le matériel de rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-172">For example, you could write a program that stops working when it is displayed remotely or when the render target is increased in size beyond the maximum size supported by the rendering hardware.</span></span>

<span data-ttu-id="3bbcc-173">Les sections suivantes décrivent les circonstances dans lesquelles une ressource créée par une cible de rendu peut être partagée avec une autre cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-173">The following sections describe the circumstances under which a resource created by one render target can be shared with another render target.</span></span>

### <a name="hardware-render-targets"></a><span data-ttu-id="3bbcc-174">Cibles de rendu matériel</span><span class="sxs-lookup"><span data-stu-id="3bbcc-174">Hardware Render Targets</span></span>

<span data-ttu-id="3bbcc-175">Vous pouvez partager des ressources entre n’importe quelle cible de rendu qui utilise explicitement le matériel, tant que le mode de communication à distance est compatible.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-175">You can share resources between any render target that explicitly uses hardware, as long as the remoting mode is compatible.</span></span> <span data-ttu-id="3bbcc-176">La compatibilité du mode de communication à distance n’est garantie que lorsque les deux cibles de rendu utilisent l’indicateur d’utilisation **\_ \_ \_ \_ \_ compatible** de l’utilisation de la [**\_ \_ cible \_ \_ \_ \_**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_usage) de rendu d2d1 ou de l’utilisation de la cible de rendu d2d1, ou si aucun indicateur n’est spécifié.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-176">The remoting mode is only guaranteed to be compatible when both render targets use the [**D2D1\_RENDER\_TARGET\_USAGE\_FORCE\_BITMAP\_REMOTING**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_usage) or **D2D1\_RENDER\_TARGET\_USAGE\_GDI\_COMPATIBLE** usage flag, or if neither flag is specified.</span></span> <span data-ttu-id="3bbcc-177">Ces paramètres garantissent que les ressources seront toujours situées sur le même ordinateur.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-177">These settings guarantee that the resources will always be located on the same computer.</span></span> <span data-ttu-id="3bbcc-178">Pour spécifier un mode d’utilisation, définissez le champ **utilisation** de la structure des propriétés de la [**\_ \_ cible \_ de rendu d2d1**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) que vous avez utilisée pour créer la cible de rendu avec un ou plusieurs indicateurs d’utilisation de la **\_ \_ cible \_ de rendu d2d1** .</span><span class="sxs-lookup"><span data-stu-id="3bbcc-178">To specify a usage mode, set the **usage** field of the [**D2D1\_RENDER\_TARGET\_PROPERTIES**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) structure that you used to create the render target with one or more **D2D1\_RENDER\_TARGET\_USAGE** flags.</span></span>

<span data-ttu-id="3bbcc-179">Pour créer une cible de rendu qui utilise explicitement le rendu matériel, définissez le champ **type** de la structure des propriétés de la [**\_ cible de rendu \_ \_ d2d1**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) que vous avez utilisée pour créer la cible de rendu sur le matériel du type de [**cible de \_ rendu \_ \_ \_ d2d1**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type).</span><span class="sxs-lookup"><span data-stu-id="3bbcc-179">To create a render target that explicitly uses hardware rendering, set the **type** field of the [**D2D1\_RENDER\_TARGET\_PROPERTIES**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) structure that you used to create the render target to [**D2D1\_RENDER\_TARGET\_TYPE\_HARDWARE**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type).</span></span>

### <a name="dxgi-surface-render-targets"></a><span data-ttu-id="3bbcc-180">Cibles de rendu de surface DXGI</span><span class="sxs-lookup"><span data-stu-id="3bbcc-180">DXGI Surface Render Targets</span></span>

<span data-ttu-id="3bbcc-181">Vous pouvez partager des ressources créées par une cible de rendu de surface DXGI avec toute autre cible de rendu de surface DXGI qui utilise le même appareil Direct3D sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-181">You can share resources created by a DXGI surface render target with any other DXGI surface render target that is using the same underlying Direct3D device.</span></span>

### <a name="compatible-render-targets-and-shared-bitmaps"></a><span data-ttu-id="3bbcc-182">Cibles de rendu compatibles et bitmaps partagées</span><span class="sxs-lookup"><span data-stu-id="3bbcc-182">Compatible Render Targets and Shared Bitmaps</span></span>

<span data-ttu-id="3bbcc-183">Vous pouvez partager des ressources entre une cible de rendu et des cibles de rendu compatibles qui sont créées par cette cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-183">You can share resources between a render target and compatible render targets that are created by that render target.</span></span> <span data-ttu-id="3bbcc-184">Pour créer une cible de rendu compatible, utilisez la méthode [**ID2D1RenderTarget :: CreateCompatibleRenderTarget**](/windows/desktop/api/d2d1/nf-d2d1-id2d1rendertarget-createcompatiblerendertarget(id2d1bitmaprendertarget)) .</span><span class="sxs-lookup"><span data-stu-id="3bbcc-184">To create a compatible render target, use the [**ID2D1RenderTarget::CreateCompatibleRenderTarget**](/windows/desktop/api/d2d1/nf-d2d1-id2d1rendertarget-createcompatiblerendertarget(id2d1bitmaprendertarget)) method.</span></span>

<span data-ttu-id="3bbcc-185">Vous pouvez utiliser la méthode [**ID2D1RenderTarget :: CreateSharedBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap) pour créer un [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) qui peut être partagé entre les deux cibles de rendu spécifiées dans l’appel de méthode, si la méthode est réussie.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-185">You can use the [**ID2D1RenderTarget::CreateSharedBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap) method to create an [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) that can be shared between the two render targets that are specified in the method call, if the method succeeds.</span></span> <span data-ttu-id="3bbcc-186">Cette méthode fonctionnera tant que les deux cibles de rendu utilisent le même appareil sous-jacent pour le rendu.</span><span class="sxs-lookup"><span data-stu-id="3bbcc-186">This method will succeed as long as the two render targets use the same underlying device for rendering.</span></span>

 

 
