---
title: Comparaison de l’accélération matérielle de Direct2D et GDI
description: Direct2D et GDI sont des API de rendu 2D en mode immédiat et offrent tous les deux un certain niveau d’accélération matérielle.
ms.assetid: 0028a0c3-445d-46b7-b55b-46dff3bce9ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f05dce8719f4d07d3160c65b88570391c3eb736
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104315258"
---
# <a name="comparing-direct2d-and-gdi-hardware-acceleration"></a><span data-ttu-id="681d4-103">Comparaison de l’accélération matérielle de Direct2D et GDI</span><span class="sxs-lookup"><span data-stu-id="681d4-103">Comparing Direct2D and GDI Hardware Acceleration</span></span>

<span data-ttu-id="681d4-104">[Direct2D](./direct2d-portal.md) et [GDI](/windows/desktop/gdi/windows-gdi) sont des API de rendu 2D en mode immédiat et offrent tous les deux un certain niveau d’accélération matérielle.</span><span class="sxs-lookup"><span data-stu-id="681d4-104">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both immediate mode 2D rendering APIs and both offer some degree of hardware acceleration.</span></span> <span data-ttu-id="681d4-105">Cette rubrique explore les différences entre Direct2D et GDI, y compris les différences passées et actuelles dans les fonctionnalités d’accélération matérielle des deux API.</span><span class="sxs-lookup"><span data-stu-id="681d4-105">This topic explores the differences between Direct2D and GDI, including past and present differences in the hardware acceleration features of both APIs.</span></span>

<span data-ttu-id="681d4-106">Cette rubrique contient les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="681d4-106">This topic has the following parts:</span></span>

-   [<span data-ttu-id="681d4-107">Différences entre Direct2D et GDI</span><span class="sxs-lookup"><span data-stu-id="681d4-107">Differences between Direct2D and GDI</span></span>](#differences-between-direct2d-and-gdi)
-   [<span data-ttu-id="681d4-108">Accélération matérielle GDI et Direct2D</span><span class="sxs-lookup"><span data-stu-id="681d4-108">GDI and Direct2D hardware acceleration</span></span>](#gdi-and-direct2d-hardware-acceleration)
    -   [<span data-ttu-id="681d4-109">Complexité croissante et taille des pilotes d’affichage</span><span class="sxs-lookup"><span data-stu-id="681d4-109">Increasing complexity and size of display drivers</span></span>](#increasing-complexity-and-size-of-display-drivers)
    -   [<span data-ttu-id="681d4-110">Difficulté de la synchronisation des espaces d’adressage de la session et du noyau global</span><span class="sxs-lookup"><span data-stu-id="681d4-110">Difficulty in synchronizing session and global kernel address spaces</span></span>](#difficulty-in-synchronizing-session-and-global-kernel-address-spaces)
    -   [<span data-ttu-id="681d4-111">Gestion de fenêtres composites</span><span class="sxs-lookup"><span data-stu-id="681d4-111">Composited window management</span></span>](#composited-window-management)
-   [<span data-ttu-id="681d4-112">Rendu GDI dans Windows 7</span><span class="sxs-lookup"><span data-stu-id="681d4-112">GDI rendering in Windows 7</span></span>](#gdi-rendering-in-windows-7)
-   [<span data-ttu-id="681d4-113">Différences entre l’accélération Direct2D et GDI dans Windows 7</span><span class="sxs-lookup"><span data-stu-id="681d4-113">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>](#contrasting-direct2d-and-gdi-acceleration-in-windows-7)
    -   [<span data-ttu-id="681d4-114">Emplacement des ressources</span><span class="sxs-lookup"><span data-stu-id="681d4-114">Location of resources</span></span>](#location-of-resources)
    -   [<span data-ttu-id="681d4-115">Méthode de rendu</span><span class="sxs-lookup"><span data-stu-id="681d4-115">Rendering method</span></span>](#rendering-method)
    -   [<span data-ttu-id="681d4-116">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="681d4-116">Scalability</span></span>](#scalability)
    -   [<span data-ttu-id="681d4-117">Lieu</span><span class="sxs-lookup"><span data-stu-id="681d4-117">Location</span></span>](#location-of-resources)
    -   [<span data-ttu-id="681d4-118">Disponibilité de l’accélération matérielle</span><span class="sxs-lookup"><span data-stu-id="681d4-118">Availability of Hardware Acceleration</span></span>](#availability-of-hardware-acceleration)
    -   [<span data-ttu-id="681d4-119">Modèle de présentation</span><span class="sxs-lookup"><span data-stu-id="681d4-119">Presentation Model</span></span>](#presentation-model)
-   [<span data-ttu-id="681d4-120">Conclusion</span><span class="sxs-lookup"><span data-stu-id="681d4-120">Conclusion</span></span>](#conclusion)

## <a name="differences-between-direct2d-and-gdi"></a><span data-ttu-id="681d4-121">Différences entre Direct2D et GDI</span><span class="sxs-lookup"><span data-stu-id="681d4-121">Differences between Direct2D and GDI</span></span>

<span data-ttu-id="681d4-122">[GDI](/windows/desktop/gdi/windows-gdi) effectue le rendu des géométries opaques, telles que les polygones, les ellipses et les lignes.</span><span class="sxs-lookup"><span data-stu-id="681d4-122">[GDI](/windows/desktop/gdi/windows-gdi) renders opaque, aliased geometries such as polygons, ellipses and lines.</span></span> <span data-ttu-id="681d4-123">Il restitue le texte avec alias et ClearType, et il peut prendre en charge la fusion de transparence par le biais de l’API AlphaBlend.</span><span class="sxs-lookup"><span data-stu-id="681d4-123">It renders aliased and ClearType text, and it can support transparency blending through the AlphaBlend API.</span></span> <span data-ttu-id="681d4-124">Toutefois, sa gestion de la transparence est incohérente et la plupart des API GDI ignorent simplement le canal alpha.</span><span class="sxs-lookup"><span data-stu-id="681d4-124">However, its handling of transparency is inconsistent and most GDI APIs simply ignore the alpha channel.</span></span> <span data-ttu-id="681d4-125">Peu d’API GDI garantissent ce que le canal alpha contiendra après une opération.</span><span class="sxs-lookup"><span data-stu-id="681d4-125">Few GDI APIs guarantee what the alpha channel will contain after an operation.</span></span> <span data-ttu-id="681d4-126">Plus important encore, le rendu de GDI n’est pas facilement mappé aux opérations 3D et un GPU moderne est rendu le plus efficacement possible sur la partie 3D de son moteur de rendu.</span><span class="sxs-lookup"><span data-stu-id="681d4-126">More importantly, GDI's rendering does not map easily to 3D operations, and a modern GPU renders most efficiently on the 3D portion of its rendering engine.</span></span> <span data-ttu-id="681d4-127">Par exemple, les lignes avec alias de [Direct2D](./direct2d-portal.md)sont conçues pour être implémentées simplement comme deux triangles restitués sur le GPU, tandis que GDI utilise l’algorithme de dessin de lignes de Bresenham.</span><span class="sxs-lookup"><span data-stu-id="681d4-127">For example, [Direct2D](./direct2d-portal.md)'s aliased lines are designed to be implemented simply as two triangles rendered on the GPU, whereas GDI uses Bresenham's line drawing algorithm.</span></span>

<span data-ttu-id="681d4-128">[Direct2D](./direct2d-portal.md) rend les primitives opaque, transparente, avec alias et avec anticrénelage.</span><span class="sxs-lookup"><span data-stu-id="681d4-128">[Direct2D](./direct2d-portal.md) renders opaque, transparent, aliased and anti-aliased primitives.</span></span> <span data-ttu-id="681d4-129">Les interfaces utilisateur modernes utilisent souvent la transparence et l’animation.</span><span class="sxs-lookup"><span data-stu-id="681d4-129">Modern UIs often make use of transparency and animation.</span></span> <span data-ttu-id="681d4-130">Direct2D facilite la création d’une interface utilisateur moderne, car il offre des garanties strictes quant à la façon dont il accepte et restitue le contenu transparent, et toutes ses primitives sont rendues à l’aide de l’accélération matérielle.</span><span class="sxs-lookup"><span data-stu-id="681d4-130">Direct2D makes it easier to create a modern UI because it has strict guarantees on how it accepts and renders transparent content, and all of its primitives are rendered using hardware acceleration.</span></span> <span data-ttu-id="681d4-131">Direct2D n’est pas un sur-ensemble pur de [GDI](/windows/desktop/gdi/windows-gdi): les primitives qui auraient été déraisonnablement lentes lorsqu’elles étaient implémentées sur un GPU ne sont pas présentes dans Direct2D.</span><span class="sxs-lookup"><span data-stu-id="681d4-131">Direct2D is not a pure superset of [GDI](/windows/desktop/gdi/windows-gdi): primitives that would have been unreasonably slow when implemented on a GPU aren't present in Direct2D.</span></span> <span data-ttu-id="681d4-132">Comme Direct2D est construit avec cette mise en évidence sur l’accélération 3D, il est également facile à utiliser avec Direct3D.</span><span class="sxs-lookup"><span data-stu-id="681d4-132">Because Direct2D is built with this emphasis on 3D acceleration it is also easy to use with Direct3D.</span></span>

<span data-ttu-id="681d4-133">Depuis Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) s’exécute en mode noyau.</span><span class="sxs-lookup"><span data-stu-id="681d4-133">Since Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) has run in kernel mode.</span></span> <span data-ttu-id="681d4-134">L’application appelle GDI, qui appelle ensuite son équivalent en mode noyau qui transmet les primitives à son propre modèle de pilote.</span><span class="sxs-lookup"><span data-stu-id="681d4-134">The application calls GDI which then calls its kernel mode counterpart which passes the primitives to its own driver model.</span></span> <span data-ttu-id="681d4-135">Ce pilote envoie ensuite les résultats au pilote d’affichage global en mode noyau.</span><span class="sxs-lookup"><span data-stu-id="681d4-135">This driver then sends the results to the global kernel mode display driver.</span></span>

<span data-ttu-id="681d4-136">À compter de Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) et les pilotes GDI s’exécutent dans un espace indépendant dans le noyau appelé « espace de session ».</span><span class="sxs-lookup"><span data-stu-id="681d4-136">Starting with Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) and the GDI drivers have run in an independent space in the kernel called "session space."</span></span> <span data-ttu-id="681d4-137">Un espace d’adressage de session est créé pour chaque session de connexion, et chaque instance de GDI s’exécute indépendamment dans cet espace d’adressage en mode noyau distinct.</span><span class="sxs-lookup"><span data-stu-id="681d4-137">A session address space is created for each logon session, and each instance of GDI runs independently in this distinct kernel mode address space.</span></span> <span data-ttu-id="681d4-138">Toutefois, Direct2D s’exécute en mode utilisateur et passe les commandes de dessin via le pilote Direct3D en mode utilisateur au pilote en mode noyau.</span><span class="sxs-lookup"><span data-stu-id="681d4-138">Direct2D, however, runs in user mode and passes drawing commands through the user mode Direct3D driver to the kernel mode driver.</span></span>

![Figure 1-Direct2D comparé à GDI](images/direct2d-vs-gdi1.png)

## <a name="gdi-and-direct2d-hardware-acceleration"></a><span data-ttu-id="681d4-140">Accélération matérielle GDI et Direct2D</span><span class="sxs-lookup"><span data-stu-id="681d4-140">GDI and Direct2D hardware acceleration</span></span>

<span data-ttu-id="681d4-141">La différence la plus importante entre l’accélération matérielle [Direct2D](./direct2d-portal.md) et [GDI](/windows/desktop/gdi/windows-gdi) est la technologie sous-jacente qui les pilote.</span><span class="sxs-lookup"><span data-stu-id="681d4-141">The most important difference between [Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) hardware acceleration is the underlying technology that drives them.</span></span> <span data-ttu-id="681d4-142">Direct2D est superposé sur les principaux Direct3D et GDI possède son propre modèle de pilote, l’interface DDI (Device Driver Interface) GDI, qui correspond aux primitives GDI.</span><span class="sxs-lookup"><span data-stu-id="681d4-142">Direct2D is layered on top Direct3D and GDI has its own driver model, the GDI Device Driver Interface (DDI), which corresponds to the GDI primitives.</span></span> <span data-ttu-id="681d4-143">Le modèle de pilote Direct3D correspond à ce que le matériel de rendu 3D dans un GPU restitue.</span><span class="sxs-lookup"><span data-stu-id="681d4-143">The Direct3D driver model corresponds to what the 3D rendering hardware in a GPU renders.</span></span> <span data-ttu-id="681d4-144">Lorsque l’interface DDI GDI a été définie pour la première fois, la plupart du matériel d’accélération de l’affichage ciblait les primitives GDI.</span><span class="sxs-lookup"><span data-stu-id="681d4-144">When the GDI DDI was first defined, most display acceleration hardware targeted the GDI primitives.</span></span> <span data-ttu-id="681d4-145">Au fil du temps, une plus grande importance a été placée sur l’accélération des jeux en 3D et moins sur l’accélération des applications.</span><span class="sxs-lookup"><span data-stu-id="681d4-145">Over time, more and more emphasis was placed on 3D game acceleration and less on application acceleration.</span></span> <span data-ttu-id="681d4-146">Par conséquent, l’API BitBlt était l’accélération matérielle et la plupart des autres opérations GDI n’étaient pas effectuées.</span><span class="sxs-lookup"><span data-stu-id="681d4-146">As a consequence the BitBlt API was hardware accelerated and most other GDI operations were not.</span></span>

<span data-ttu-id="681d4-147">Cela permet de définir la phase d’une séquence de modifications du rendu de [GDI](/windows/desktop/gdi/windows-gdi) à l’affichage.</span><span class="sxs-lookup"><span data-stu-id="681d4-147">This set the stage for a sequence of changes to how [GDI](/windows/desktop/gdi/windows-gdi) renders to the display.</span></span> <span data-ttu-id="681d4-148">L’illustration suivante montre comment le rendu de l’affichage GDI est passé de Windows XP à Windows 7.</span><span class="sxs-lookup"><span data-stu-id="681d4-148">The following illustration shows how GDI display rendering has changed from Windows XP to Windows 7.</span></span>

![Figure 2 : évolution du rendu de l’affichage GDI](images/direct2d-vs-gdi2.png)

<span data-ttu-id="681d4-150">Il y avait également un certain nombre de facteurs supplémentaires qui ont entraîné des modifications du modèle de pilote [GDI](/windows/desktop/gdi/windows-gdi) , comme expliqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="681d4-150">There were also a number of additional factors that caused changes to the [GDI](/windows/desktop/gdi/windows-gdi) driver model, as explained below.</span></span>

### <a name="increasing-complexity-and-size-of-display-drivers"></a><span data-ttu-id="681d4-151">Complexité croissante et taille des pilotes d’affichage</span><span class="sxs-lookup"><span data-stu-id="681d4-151">Increasing complexity and size of display drivers</span></span>

<span data-ttu-id="681d4-152">les pilotes 3D sont devenus plus complexes au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="681d4-152">3D drivers have become more complex over time.</span></span> <span data-ttu-id="681d4-153">Un code plus complexe a tendance à avoir plus de défauts, ce qui permet au pilote d’exister en mode utilisateur, où un bogue de pilote ne peut pas provoquer un redémarrage du système.</span><span class="sxs-lookup"><span data-stu-id="681d4-153">More complex code tends to have more defects making it beneficial for the driver to exist in user-mode where a driver bug can't cause a system reboot.</span></span> <span data-ttu-id="681d4-154">Comme vous pouvez le voir dans la figure ci-dessus, le pilote d’affichage est divisé en un composant en mode utilisateur complexe et un composant plus simple en mode noyau.</span><span class="sxs-lookup"><span data-stu-id="681d4-154">As can be seen in the figure above, the display driver is divided into a complex user mode component and a simpler kernel mode component.</span></span>

### <a name="difficulty-in-synchronizing-session-and-global-kernel-address-spaces"></a><span data-ttu-id="681d4-155">Difficulté de la synchronisation des espaces d’adressage de la session et du noyau global</span><span class="sxs-lookup"><span data-stu-id="681d4-155">Difficulty in synchronizing session and global kernel address spaces</span></span>

<span data-ttu-id="681d4-156">Dans Windows XP, un pilote d’affichage existe dans deux espaces d’adressage différents : l’espace de session et l’espace du noyau.</span><span class="sxs-lookup"><span data-stu-id="681d4-156">In Windows XP, a display driver exists in two different address spaces: session space and kernel space.</span></span> <span data-ttu-id="681d4-157">Certaines parties du pilote doivent répondre à des événements tels que les événements de gestion de l’alimentation.</span><span class="sxs-lookup"><span data-stu-id="681d4-157">Parts of the driver need to respond to events such as power management events.</span></span> <span data-ttu-id="681d4-158">Cela doit être synchronisé avec l’état du pilote dans l’espace d’adressage de la session.</span><span class="sxs-lookup"><span data-stu-id="681d4-158">This needs to be synchronized with the driver state in the session address space.</span></span> <span data-ttu-id="681d4-159">Il s’agit d’une tâche difficile qui peut entraîner des défauts lorsque les pilotes d’affichage essaient de traiter ces espaces d’adressage distincts.</span><span class="sxs-lookup"><span data-stu-id="681d4-159">This is a difficult task and can lead to defects when display drivers attempt to deal with these distinct address spaces.</span></span>

### <a name="composited-window-management"></a><span data-ttu-id="681d4-160">Gestion de fenêtres composites</span><span class="sxs-lookup"><span data-stu-id="681d4-160">Composited window management</span></span>

<span data-ttu-id="681d4-161">Le Gestionnaire de fenêtrage (DWM), le gestionnaire de fenêtres de composition introduit dans Windows 7, restitue toutes les fenêtres à des surfaces hors écran, puis les compose pour les afficher à l’écran.</span><span class="sxs-lookup"><span data-stu-id="681d4-161">The Desktop Window Manager (DWM), the compositing window manager introduced in Windows 7, renders all windows to off-screen surfaces and then composes them together to be displayed on screen.</span></span> <span data-ttu-id="681d4-162">Cela nécessite que [GDI](/windows/desktop/gdi/windows-gdi) puisse être rendu sur une surface qui sera ensuite rendue par Direct3D à afficher.</span><span class="sxs-lookup"><span data-stu-id="681d4-162">This requires [GDI](/windows/desktop/gdi/windows-gdi) to be able to render to a surface which will then be rendered by Direct3D to display.</span></span> <span data-ttu-id="681d4-163">Cela posait un problème dans le modèle de pilote XP, car GDI et Direct3D étaient des piles de pilotes parallèles.</span><span class="sxs-lookup"><span data-stu-id="681d4-163">This posed a problem in the XP driver model, since GDI and Direct3D were parallel driver stacks.</span></span>

<span data-ttu-id="681d4-164">Par conséquent, dans Windows Vista, le pilote d’affichage DDI [GDI](/windows/desktop/gdi/windows-gdi) a été implémenté en tant que pilote d’affichage canonique fourni par Microsoft (CDD) qui affichait le contenu GDI dans une image bitmap de mémoire système pour qu’il soit composé à l’écran.</span><span class="sxs-lookup"><span data-stu-id="681d4-164">As a result, in Windows Vista, the [GDI](/windows/desktop/gdi/windows-gdi) DDI display driver was implemented as the Microsoft supplied Canonical Display Driver (CDD) which rendered GDI content to a system memory bitmap to be composed to the screen.</span></span>

## <a name="gdi-rendering-in-windows-7"></a><span data-ttu-id="681d4-165">Rendu GDI dans Windows 7</span><span class="sxs-lookup"><span data-stu-id="681d4-165">GDI rendering in Windows 7</span></span>

<span data-ttu-id="681d4-166">Le modèle de pilote utilisé dans Windows Vista exigeait que chaque fenêtre [GDI](/windows/desktop/gdi/windows-gdi) soit sauvegardée à la fois par une surface de mémoire vidéo et une surface de mémoire système.</span><span class="sxs-lookup"><span data-stu-id="681d4-166">The driver model used in Windows Vista required that every [GDI](/windows/desktop/gdi/windows-gdi) window be backed by both a video memory surface and a system memory surface.</span></span> <span data-ttu-id="681d4-167">Cela a entraîné l’utilisation de la mémoire système pour chaque fenêtre GDI.</span><span class="sxs-lookup"><span data-stu-id="681d4-167">This resulted in system memory being used for every GDI window.</span></span>

<span data-ttu-id="681d4-168">Pour cette raison, [GDI](/windows/desktop/gdi/windows-gdi) a été de nouveau modifié dans Windows 7.</span><span class="sxs-lookup"><span data-stu-id="681d4-168">For this reason, [GDI](/windows/desktop/gdi/windows-gdi) was changed again in Windows 7.</span></span> <span data-ttu-id="681d4-169">.</span><span class="sxs-lookup"><span data-stu-id="681d4-169">.</span></span> <span data-ttu-id="681d4-170">Au lieu d’effectuer un rendu sur une surface de mémoire système, GDI a été modifié pour être rendu sur un segment de mémoire d’ouverture.</span><span class="sxs-lookup"><span data-stu-id="681d4-170">Instead of rendering to a system memory surface, GDI was modified to render to an aperture memory segment.</span></span> <span data-ttu-id="681d4-171">La mémoire d’ouverture peut être mise à jour à partir de l’aire mémoire vidéo contenant le contenu de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="681d4-171">The aperture memory can be updated from the video memory surface holding the window contents.</span></span> <span data-ttu-id="681d4-172">GDI peut retourner à la mémoire d’ouverture et le résultat peut ensuite être renvoyé à la surface de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="681d4-172">GDI can render back to the aperture memory, and the result can then be sent back to the window surface.</span></span> <span data-ttu-id="681d4-173">Étant donné que le segment de mémoire d’ouverture est adressable par le GPU, le GPU peut accélérer ces mises à jour de la surface de la mémoire vidéo.</span><span class="sxs-lookup"><span data-stu-id="681d4-173">Since the aperture memory segment is addressable by the GPU, the GPU can accelerate these updates to the video memory surface.</span></span> <span data-ttu-id="681d4-174">Par exemple, le rendu de texte, BitBlts, AlphaBlend, TransparentBlt et StretchBlt sont accélérés dans ces cas.</span><span class="sxs-lookup"><span data-stu-id="681d4-174">For example, text rendering, BitBlts, AlphaBlend, TransparentBlt, and StretchBlt are all accelerated in these cases.</span></span>

## <a name="contrasting-direct2d-and-gdi-acceleration-in-windows-7"></a><span data-ttu-id="681d4-175">Différences entre l’accélération Direct2D et GDI dans Windows 7</span><span class="sxs-lookup"><span data-stu-id="681d4-175">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>

<span data-ttu-id="681d4-176">[Direct2D](./direct2d-portal.md) et [GDI](/windows/desktop/gdi/windows-gdi) sont des API de rendu en mode immédiat 2D et sont accélérées par le matériel.</span><span class="sxs-lookup"><span data-stu-id="681d4-176">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both 2D immediate-mode rendering APIs and are hardware accelerated.</span></span> <span data-ttu-id="681d4-177">Toutefois, il existe un certain nombre de différences qui restent dans les deux API.</span><span class="sxs-lookup"><span data-stu-id="681d4-177">However, there are a number of differences that remain in both APIs.</span></span>

### <a name="location-of-resources"></a><span data-ttu-id="681d4-178">Emplacement des ressources</span><span class="sxs-lookup"><span data-stu-id="681d4-178">Location of resources</span></span>

<span data-ttu-id="681d4-179">[GDI](/windows/desktop/gdi/windows-gdi) conserve ses ressources, notamment les bitmaps, dans la mémoire système par défaut.</span><span class="sxs-lookup"><span data-stu-id="681d4-179">[GDI](/windows/desktop/gdi/windows-gdi) maintains its resources, in particular bitmaps, in system memory by default.</span></span> <span data-ttu-id="681d4-180">[Direct2D](./direct2d-portal.md) conserve ses ressources dans la mémoire vidéo sur la carte graphique.</span><span class="sxs-lookup"><span data-stu-id="681d4-180">[Direct2D](./direct2d-portal.md) maintains its resources in video memory on the display adapter.</span></span> <span data-ttu-id="681d4-181">Lorsque GDI doit mettre à jour la mémoire vidéo, cette opération doit être effectuée sur le bus, sauf si la ressource figure déjà dans le segment de mémoire à l’ouverture ou si l’opération peut être exprimée directement.</span><span class="sxs-lookup"><span data-stu-id="681d4-181">When GDI needs to update video memory, this must be done over the bus, unless the resource is already in the aperture memory segment or if the operation can be expressed directly.</span></span> <span data-ttu-id="681d4-182">En revanche, Direct2D peut simplement traduire ses primitives en primitives Direct3D, car les ressources se trouvent déjà dans la mémoire vidéo.</span><span class="sxs-lookup"><span data-stu-id="681d4-182">In contrast, Direct2D can simply translate its primitives to Direct3D primitives because the resources are already in video memory.</span></span>

### <a name="rendering-method"></a><span data-ttu-id="681d4-183">Méthode de rendu</span><span class="sxs-lookup"><span data-stu-id="681d4-183">Rendering method</span></span>

<span data-ttu-id="681d4-184">Pour assurer la compatibilité, [GDI](/windows/desktop/gdi/windows-gdi) effectue une grande partie de son rendu à la mémoire d’ouverture à l’aide de l’UC.</span><span class="sxs-lookup"><span data-stu-id="681d4-184">In order to maintain compatibility, [GDI](/windows/desktop/gdi/windows-gdi) performs a large part of its rendering to aperture memory using the CPU.</span></span> <span data-ttu-id="681d4-185">En revanche, [Direct2D](./direct2d-portal.md) traduit ses appels d’API en opérations de dessin et primitives Direct3D.</span><span class="sxs-lookup"><span data-stu-id="681d4-185">In contrast, [Direct2D](./direct2d-portal.md) translates its APIs calls into Direct3D primitives and drawing operations.</span></span> <span data-ttu-id="681d4-186">Le résultat est ensuite rendu sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="681d4-186">The result is then rendered on the GPU.</span></span> <span data-ttu-id="681d4-187">Une partie du rendu GDI ? s est effectuée sur le GPU lorsque la mémoire d’ouverture est copiée sur la surface de mémoire vidéo représentant la fenêtre GDI.</span><span class="sxs-lookup"><span data-stu-id="681d4-187">Some of GDI?s rendering is performed on the GPU when the aperture memory is copied to the video memory surface representing the GDI window.</span></span>

### <a name="scalability"></a><span data-ttu-id="681d4-188">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="681d4-188">Scalability</span></span>

<span data-ttu-id="681d4-189">Les appels de rendu de [Direct2D](./direct2d-portal.md)sont tous des flux de commandes indépendants vers le GPU.</span><span class="sxs-lookup"><span data-stu-id="681d4-189">[Direct2D](./direct2d-portal.md)'s rendering calls are all independent command streams to the GPU.</span></span> <span data-ttu-id="681d4-190">Chaque fabrique Direct2D représente un appareil Direct3D différent.</span><span class="sxs-lookup"><span data-stu-id="681d4-190">Each Direct2D factory represents a different Direct3D device.</span></span> <span data-ttu-id="681d4-191">[GDI](/windows/desktop/gdi/windows-gdi) utilise un flux de commande pour toutes les applications sur le système.</span><span class="sxs-lookup"><span data-stu-id="681d4-191">[GDI](/windows/desktop/gdi/windows-gdi) uses one command stream for all of the applications on the system.</span></span> <span data-ttu-id="681d4-192">La méthode GDI peut entraîner une accumulation de la surcharge du contexte de rendu du GPU et de l’UC.</span><span class="sxs-lookup"><span data-stu-id="681d4-192">GDI's method can result in a buildup of GPU and CPU rendering context overhead.</span></span>

### <a name="location"></a><span data-ttu-id="681d4-193">Emplacement</span><span class="sxs-lookup"><span data-stu-id="681d4-193">Location</span></span>

<span data-ttu-id="681d4-194">[Direct2D](./direct2d-portal.md) fonctionne entièrement en mode utilisateur, y compris le runtime Direct3D et le pilote Direct3D en mode utilisateur.</span><span class="sxs-lookup"><span data-stu-id="681d4-194">[Direct2D](./direct2d-portal.md) operates entirely in user mode, including the Direct3D run time and the user mode Direct3D driver.</span></span> <span data-ttu-id="681d4-195">Cela permet d’éviter les pannes système causées par des erreurs de code dans le noyau.</span><span class="sxs-lookup"><span data-stu-id="681d4-195">This helps prevent system crashes caused by code defects in the kernel.</span></span> <span data-ttu-id="681d4-196">[GDI](/windows/desktop/gdi/windows-gdi), toutefois, possède la plupart de ses fonctionnalités dans l’espace de session en mode noyau, avec sa surface d’API en mode utilisateur.</span><span class="sxs-lookup"><span data-stu-id="681d4-196">[GDI](/windows/desktop/gdi/windows-gdi), however, has most of its functionality in session space in kernel mode, with its API surface in user mode.</span></span>

### <a name="availability-of-hardware-acceleration"></a><span data-ttu-id="681d4-197">Disponibilité de l’accélération matérielle</span><span class="sxs-lookup"><span data-stu-id="681d4-197">Availability of Hardware Acceleration</span></span>

<span data-ttu-id="681d4-198">[GDI](/windows/desktop/gdi/windows-gdi) est l’accélération matérielle sur Windows XP et est accéléré sur Windows 7 lorsque le gestionnaire de fenêtrage est en cours d’exécution et qu’un pilote WDDM 1,1 est en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="681d4-198">[GDI](/windows/desktop/gdi/windows-gdi) is hardware accelerated on Windows XP, and accelerated on Windows 7 when the Desktop Window Manager is running and a WDDM 1.1 driver is in use.</span></span> <span data-ttu-id="681d4-199">[Direct2D](./direct2d-portal.md) est l’accélération matérielle sur la quasi-totalité des pilotes WDDM et indique si DWM est en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="681d4-199">[Direct2D](./direct2d-portal.md) is hardware accelerated on almost any WDDM driver and whether or not DWM is in use.</span></span> <span data-ttu-id="681d4-200">Sur Vista, GDI est toujours rendu sur le processeur.</span><span class="sxs-lookup"><span data-stu-id="681d4-200">On Vista, GDI will always render on the CPU.</span></span>

### <a name="presentation-model"></a><span data-ttu-id="681d4-201">Modèle de présentation</span><span class="sxs-lookup"><span data-stu-id="681d4-201">Presentation Model</span></span>

<span data-ttu-id="681d4-202">Lorsque Windows était conçu pour la première fois, la mémoire était insuffisante pour permettre le stockage de chaque fenêtre dans sa propre bitmap.</span><span class="sxs-lookup"><span data-stu-id="681d4-202">When Windows was first designed, there was insufficient memory to allow every window to be stored in its own bitmap.</span></span> <span data-ttu-id="681d4-203">Par conséquent, [GDI](/windows/desktop/gdi/windows-gdi) est toujours rendu logiquement à l’écran, avec plusieurs régions de découpage appliquées pour s’assurer qu’une application n’a pas été rendue en dehors de sa fenêtre.</span><span class="sxs-lookup"><span data-stu-id="681d4-203">As a result, [GDI](/windows/desktop/gdi/windows-gdi) always rendered logically directly to the screen, with various clipping regions applied to ensure that an application did not render outside of its window.</span></span> <span data-ttu-id="681d4-204">Dans le modèle [Direct2D](./direct2d-portal.md) , une application est rendue en mémoire tampon d’arrière-plan, et le résultat s’affiche lorsque l’application effectue un dessin.</span><span class="sxs-lookup"><span data-stu-id="681d4-204">In the [Direct2D](./direct2d-portal.md) model, an application renders to a back-buffer, and the result is displayed when the application is done drawing.</span></span> <span data-ttu-id="681d4-205">Cela permet à Direct2D de gérer des scénarios d’animation bien plus fluides que GDI.</span><span class="sxs-lookup"><span data-stu-id="681d4-205">This allows Direct2D to handle animation scenarios much more fluidly than GDI can.</span></span>

## <a name="conclusion"></a><span data-ttu-id="681d4-206">Conclusion</span><span class="sxs-lookup"><span data-stu-id="681d4-206">Conclusion</span></span>

<span data-ttu-id="681d4-207">Le code [GDI](/windows/desktop/gdi/windows-gdi) existant continuera à fonctionner correctement sous Windows 7.</span><span class="sxs-lookup"><span data-stu-id="681d4-207">Existing [GDI](/windows/desktop/gdi/windows-gdi) code will continue to work well under Windows 7.</span></span> <span data-ttu-id="681d4-208">Toutefois, lors de l’écriture d’un nouveau code de rendu graphique, [Direct2D](./direct2d-portal.md) doit être pris en compte, car il tire le meilleur parti des GPU modernes.</span><span class="sxs-lookup"><span data-stu-id="681d4-208">However, when writing new graphics rendering code, [Direct2D](./direct2d-portal.md) should be considered, as it takes better advantage of modern GPUs.</span></span>

 

 