---
title: Effet de la carte de tonalité HDR
description: Cet effet ajuste la plage dynamique d’une image pour mieux adapter son contenu à la capacité de l’affichage de sortie.
ms.topic: article
ms.date: 02/01/2019
ms.openlocfilehash: 4c9234e1b50e155173630a2ff7d94756c5be6130
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/12/2020
ms.locfileid: "103843761"
---
# <a name="hdr-tone-map-effect"></a><span data-ttu-id="c07c1-103">Effet de la carte de tonalité HDR</span><span class="sxs-lookup"><span data-stu-id="c07c1-103">HDR tone map effect</span></span>

<span data-ttu-id="c07c1-104">Cet effet ajuste la plage dynamique d’une image pour mieux adapter son contenu à la capacité de l’affichage de sortie.</span><span class="sxs-lookup"><span data-stu-id="c07c1-104">This effect adjusts the dynamic range of an image to better suit its content to the capability of the output display.</span></span>

<span data-ttu-id="c07c1-105">Les propriétés de cet effet sont identifiées par l' [**énumération D2D1_HDRTONEMAP_PROP**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_prop), et le CLSID est **CLSID_D2D1HdrToneMap**.</span><span class="sxs-lookup"><span data-stu-id="c07c1-105">The properties for this effect are identified by the [**D2D1_HDRTONEMAP_PROP enumeration**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_prop), and the CLSID is **CLSID_D2D1HdrToneMap**.</span></span>

## <a name="effect-properties"></a><span data-ttu-id="c07c1-106">Propriétés d’effet</span><span class="sxs-lookup"><span data-stu-id="c07c1-106">Effect properties</span></span>

| <span data-ttu-id="c07c1-107">Nom complet et énumération d’index</span><span class="sxs-lookup"><span data-stu-id="c07c1-107">Display name and index enumeration</span></span> | <span data-ttu-id="c07c1-108">Type et valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="c07c1-108">Type and default value</span></span> | <span data-ttu-id="c07c1-109">Description</span><span class="sxs-lookup"><span data-stu-id="c07c1-109">Description</span></span> |
|-|-|-|
| <span data-ttu-id="c07c1-110">InputMaxLuminance, D2D1_HDRTONEMAP_PROP_INPUT_MAX_LUMINANCE</span><span class="sxs-lookup"><span data-stu-id="c07c1-110">InputMaxLuminance, D2D1_HDRTONEMAP_PROP_INPUT_MAX_LUMINANCE</span></span> | <span data-ttu-id="c07c1-111">FLOAT</span><span class="sxs-lookup"><span data-stu-id="c07c1-111">FLOAT</span></span> | <span data-ttu-id="c07c1-112">Niveau de lumière maximal (ou MaxCLL) de l’image, en nits.</span><span class="sxs-lookup"><span data-stu-id="c07c1-112">The maximum light level (or MaxCLL) of the image, in nits.</span></span> |
| <span data-ttu-id="c07c1-113">OutputMaxLuminance, D2D1_HDRTONEMAP_PROP_OUTPUT_MAX_LUMINANCE</span><span class="sxs-lookup"><span data-stu-id="c07c1-113">OutputMaxLuminance, D2D1_HDRTONEMAP_PROP_OUTPUT_MAX_LUMINANCE</span></span> | <span data-ttu-id="c07c1-114">FLOAT</span><span class="sxs-lookup"><span data-stu-id="c07c1-114">FLOAT</span></span> | <span data-ttu-id="c07c1-115">Le MaxCLL pris en charge par la cible de sortie, dans nits, est &mdash; généralement défini sur le MaxCLL de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="c07c1-115">The MaxCLL supported by the output target, in nits&mdash;typically set to the MaxCLL of the display.</span></span> |
| <span data-ttu-id="c07c1-116">DisplayMode, D2D1_HDRTONEMAP_PROP_DISPLAY_MODE</span><span class="sxs-lookup"><span data-stu-id="c07c1-116">DisplayMode, D2D1_HDRTONEMAP_PROP_DISPLAY_MODE</span></span> | [<span data-ttu-id="c07c1-117">**D2D1_HDRTONEMAP_DISPLAY_MODE**</span><span class="sxs-lookup"><span data-stu-id="c07c1-117">**D2D1_HDRTONEMAP_DISPLAY_MODE**</span></span>](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_display_mode) | <span data-ttu-id="c07c1-118">Quand la valeur est **_HDR**, la courbe de mappage de la tonalité est ajustée pour s’adapter au comportement des affichages HDR courants.</span><span class="sxs-lookup"><span data-stu-id="c07c1-118">When set to **_HDR**, the tone mapping curve is adjusted to better fit the fit the behavior of common HDR displays.</span></span> |

## <a name="remarks"></a><span data-ttu-id="c07c1-119">Notes</span><span class="sxs-lookup"><span data-stu-id="c07c1-119">Remarks</span></span>
<span data-ttu-id="c07c1-120">La valeur de `InputMaxLuminance` est généralement dérivée des métadonnées de l’image.</span><span class="sxs-lookup"><span data-stu-id="c07c1-120">The value for `InputMaxLuminance` is typically derived from the image metadata.</span></span> <span data-ttu-id="c07c1-121">Dans les cas où les métadonnées ne sont pas présentes, vous pouvez utiliser la fonction **D2DAdvancedColorImagesRenderer :: ComputeHdrMetadata** (dans l' [exemple de rendu d’image colorimétrique avancée de Direct2D](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/D2DAdvancedColorImages)) pour calculer le niveau de lumière maximal (MaxCLL) d’une image, en nits.</span><span class="sxs-lookup"><span data-stu-id="c07c1-121">For cases where the metadata is not present, you can use the **D2DAdvancedColorImagesRenderer::ComputeHdrMetadata** function (in the [Direct2D advanced color image rendering sample](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/D2DAdvancedColorImages)) to compute the maximum light level (MaxCLL) of an image, in nits.</span></span>

<span data-ttu-id="c07c1-122">La valeur de `OutputMaxLuminance` est conçue pour être dérivée de l’affichage, à l’aide de [**DXGI_OUTPUT_DESC1 :: MaxLuminance**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1).</span><span class="sxs-lookup"><span data-stu-id="c07c1-122">The value for `OutputMaxLuminance` is designed to be derived from the display, using [**DXGI_OUTPUT_DESC1::MaxLuminance**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1).</span></span>

<span data-ttu-id="c07c1-123">L’effet carte de tonalité HDR présente des courbes de cartes de tonalité différentes selon que l’affichage est un affichage HDR ou un affichage SDR/WCG.</span><span class="sxs-lookup"><span data-stu-id="c07c1-123">The HDR tone map effect has different tone map curves depending on whether the display is an HDR display or an SDR/WCG display.</span></span>

<span data-ttu-id="c07c1-124">Cet effet est destiné à être combiné avec l' [effet de réglage de niveau blanc](white-level-adjustment-effect.md) pour vous permettre de restituer des images HDR dans Direct2D avec une gestion des couleurs et un mappage des tons appropriés.</span><span class="sxs-lookup"><span data-stu-id="c07c1-124">This effect is intended to be combined with the [White level adjustment effect](white-level-adjustment-effect.md) to allow you to render HDR images in Direct2D with proper color management and tone mapping.</span></span> <span data-ttu-id="c07c1-125">Elle est destinée à n’importe quel Framework qui souhaite fournir une expérience d’affichage d’images HDR de meilleure qualité qui gère tous les formats d’image HDR Windows et s’adapte aux fonctionnalités de l’affichage (que ce soit en HDR ou WCG/SDR).</span><span class="sxs-lookup"><span data-stu-id="c07c1-125">It's aimed at any framework that wants to provide a best-in-class HDR image viewing experience that handles all of the Windows HDR image formats, and adapts to the capabilities of the display (whether that's HDR or WCG/SDR).</span></span> <span data-ttu-id="c07c1-126">Les effets sont regroupés dans l’ordre, comme décrit ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="c07c1-126">The effects are intended to be chained together in sequence, as described below.</span></span>

- <span data-ttu-id="c07c1-127">Prenez l’image d’entrée, dont l’espace colorimétrique est défini par son codec.</span><span class="sxs-lookup"><span data-stu-id="c07c1-127">Take the input image, whose color space defined by its codec.</span></span> <span data-ttu-id="c07c1-128">Les métadonnées peuvent spécifier whitePoint.</span><span class="sxs-lookup"><span data-stu-id="c07c1-128">Metadata may specify whitePoint.</span></span> <span data-ttu-id="c07c1-129">Les métadonnées peuvent spécifier un niveau de luminance d’entrée.</span><span class="sxs-lookup"><span data-stu-id="c07c1-129">Metadata may specify input luminance level.</span></span>
- <span data-ttu-id="c07c1-130">Appliquez l’effet gestion des couleurs.</span><span class="sxs-lookup"><span data-stu-id="c07c1-130">Apply the color management effect.</span></span> <span data-ttu-id="c07c1-131">Convertir en espace ScRVB (CCCS).</span><span class="sxs-lookup"><span data-stu-id="c07c1-131">Convert to scRGB (CCCS) space.</span></span>
- <span data-ttu-id="c07c1-132">Appliquez l’effet carte de tonalité HDR.</span><span class="sxs-lookup"><span data-stu-id="c07c1-132">Apply the HDR tone map effect.</span></span> <span data-ttu-id="c07c1-133">Réduisez le niveau de lumière de l’image au niveau souhaité.</span><span class="sxs-lookup"><span data-stu-id="c07c1-133">Lower the light level of the image to the desired level.</span></span>
- <span data-ttu-id="c07c1-134">Appliquez l’effet d’ajustement de niveau blanc.</span><span class="sxs-lookup"><span data-stu-id="c07c1-134">Apply the white level adjustment effect.</span></span> <span data-ttu-id="c07c1-135">Mettez à l’échelle le niveau blanc de l’image au niveau de blanc requis par la chaîne de permutation.</span><span class="sxs-lookup"><span data-stu-id="c07c1-135">Scale the white level of the image to the white level required by the swap chain.</span></span>
- <span data-ttu-id="c07c1-136">Appliquez à nouveau l’effet gestion des couleurs.</span><span class="sxs-lookup"><span data-stu-id="c07c1-136">Apply the color management effect again.</span></span> <span data-ttu-id="c07c1-137">En cas de rendu dans 8bpc, convertissez-le en sRVB.</span><span class="sxs-lookup"><span data-stu-id="c07c1-137">If rendering to 8bpc, then convert to sRGB.</span></span>

## <a name="requirements"></a><span data-ttu-id="c07c1-138">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="c07c1-138">Requirements</span></span>

| <span data-ttu-id="c07c1-139">Condition requise</span><span class="sxs-lookup"><span data-stu-id="c07c1-139">Requirement</span></span> | <span data-ttu-id="c07c1-140">Valeur</span><span class="sxs-lookup"><span data-stu-id="c07c1-140">Value</span></span> |
|-|-|
| <span data-ttu-id="c07c1-141">Client minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="c07c1-141">Minimum supported client</span></span> | <span data-ttu-id="c07c1-142">Windows 10, version 1809 (10,0 ; Build 17763) \[ applications de bureau \| UWP\]</span><span class="sxs-lookup"><span data-stu-id="c07c1-142">Windows 10, version 1809 (10.0; Build 17763) \[desktop apps \| UWP apps\]</span></span> |
| <span data-ttu-id="c07c1-143">En-tête</span><span class="sxs-lookup"><span data-stu-id="c07c1-143">Header</span></span> | <span data-ttu-id="c07c1-144">d2d1effects \_ 2. h</span><span class="sxs-lookup"><span data-stu-id="c07c1-144">d2d1effects\_2.h</span></span> |
| <span data-ttu-id="c07c1-145">Bibliothèque</span><span class="sxs-lookup"><span data-stu-id="c07c1-145">Library</span></span> | <span data-ttu-id="c07c1-146">d2d1. lib, dxguid. lib</span><span class="sxs-lookup"><span data-stu-id="c07c1-146">d2d1.lib, dxguid.lib</span></span> |

## <a name="related-topics"></a><span data-ttu-id="c07c1-147">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c07c1-147">Related topics</span></span>

* [<span data-ttu-id="c07c1-148">Interface ID2D1Effect</span><span class="sxs-lookup"><span data-stu-id="c07c1-148">ID2D1Effect interface</span></span>](/windows/desktop/api/d2d1_1/nn-d2d1_1-id2d1effect)
* [<span data-ttu-id="c07c1-149">Énumération D2D1_HDRTONEMAP_PROP</span><span class="sxs-lookup"><span data-stu-id="c07c1-149">D2D1_HDRTONEMAP_PROP enumeration</span></span>](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_prop)
