---
title: Profilage d’applications DirectX
description: Montre comment mesurer certaines des mesures les plus importantes en matière de temps de performances pour une application DirectX à l’aide des outils XPerf et GPUView fournis dans le cadre de Windows performance Toolkit.
ms.assetid: 4B2F7273-C9B0-4DD3-B559-6220CDE62129
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0280389d4f8f2161e5e07f8906df7ea0484ad458
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/04/2021
ms.locfileid: "104556595"
---
# <a name="profiling-directx-apps"></a><span data-ttu-id="d427f-103">Profilage d’applications DirectX</span><span class="sxs-lookup"><span data-stu-id="d427f-103">Profiling DirectX Apps</span></span>

<span data-ttu-id="d427f-104">Cela vous montre comment mesurer certaines des mesures les plus importantes en matière de temps de performances pour une application [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) à l’aide des outils **Xperf** et **GPUView** fournis avec Windows performance Toolkit.</span><span class="sxs-lookup"><span data-stu-id="d427f-104">This shows you how to measure some of the most important performance time measurements for a [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) app using the **XPerf** and **GPUView** tools that ship as part of the Windows Performance Toolkit.</span></span> <span data-ttu-id="d427f-105">Il ne s’agit pas d’un guide complet pour comprendre les outils, plutôt que leur applicabilité spécifique pour l’analyse des performances des applications DirectX.</span><span class="sxs-lookup"><span data-stu-id="d427f-105">This is not a comprehensive guide for understanding the tools, rather their specific applicability for analyzing DirectX app performance.</span></span> <span data-ttu-id="d427f-106">Alors que la plupart des techniques présentées ici s’appliquent à toutes les applications DirectX, elles sont particulièrement pertinentes pour les applications qui utilisent des chaînes de permutation et non pour les applications DirectX basées sur XAML qui utilisent SIS/outre et les animations XAML.</span><span class="sxs-lookup"><span data-stu-id="d427f-106">While most of the techniques discussed here are relevant to all DirectX apps, it is most relevant to apps that use swap chains and not to DirectX applications built on XAML that use SIS/VSIS and XAML animations.</span></span> <span data-ttu-id="d427f-107">Nous vous guidons tout au long des mesures de temps de performance clés, de l’acquisition et de l’installation des outils et des suivis de mesure des performances, puis les analysent pour comprendre les goulots d’étranglement des applications.</span><span class="sxs-lookup"><span data-stu-id="d427f-107">We walk you through key performance time measurements, how to acquire and install the tools, and take performance measurement traces then analyze them to understand app bottlenecks.</span></span>

## <a name="about-the-tools"></a><span data-ttu-id="d427f-108">À propos des outils</span><span class="sxs-lookup"><span data-stu-id="d427f-108">About the Tools</span></span>

### <a name="xperf"></a><span data-ttu-id="d427f-109">**XPerf**</span><span class="sxs-lookup"><span data-stu-id="d427f-109">**XPerf**</span></span>

<span data-ttu-id="d427f-110">**Xperf** est un ensemble d’outils d’analyse des performances basés sur suivi d’V nements pour Windows (ETW) conçus pour mesurer et analyser les performances du système et des applications détaillées et l’utilisation des ressources.</span><span class="sxs-lookup"><span data-stu-id="d427f-110">**XPerf** is a set of performance analysis tools built on top of Event Tracing for Windows (ETW) designed for measuring and analyzing detailed system and app performance and resource usage.</span></span> <span data-ttu-id="d427f-111">À partir de Windows 8, cet outil en ligne de commande a une interface utilisateur graphique et est appelé enregistreur de performances Windows (WPR) et Windows Performance Analyzer (WPA).</span><span class="sxs-lookup"><span data-stu-id="d427f-111">Starting in Windows 8 this command line tool has a graphical user interface and is called the Windows Performance Recorder (WPR) and Windows Performance Analyzer (WPA).</span></span> <span data-ttu-id="d427f-112">Pour plus d’informations sur ces outils, consultez la page Web de [Windows performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT) : [Windows performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span><span class="sxs-lookup"><span data-stu-id="d427f-112">More information about these tools can be found at the web page for [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span></span>

<span data-ttu-id="d427f-113">Un ETW collecte les événements de noyau demandés et les enregistre dans un fichier appelé fichier journal de suivi d’événements (ETL).</span><span class="sxs-lookup"><span data-stu-id="d427f-113">An ETW collects requested kernel events and saves them into a file called an event trace log (ETL) file.</span></span> <span data-ttu-id="d427f-114">Ces événements de noyau fournissent des informations complètes sur les caractéristiques d’une application et du système lors de l’exécution de l’application.</span><span class="sxs-lookup"><span data-stu-id="d427f-114">These kernel events provide extensive information about an app and system characteristics when running the app.</span></span> <span data-ttu-id="d427f-115">Les données sont collectées en activant la capture de trace, en exécutant le scénario d’application souhaité qui nécessite une analyse, ce qui permet d’arrêter la capture qui enregistre les données dans un fichier ETL.</span><span class="sxs-lookup"><span data-stu-id="d427f-115">Data is collected by enabling trace capture, performing the desired app scenario that needs analysis, stopping the capture which saves the data in an ETL file.</span></span> <span data-ttu-id="d427f-116">Vous pouvez ensuite analyser le fichier sur le même ordinateur ou sur un autre ordinateur à l’aide de l’outil de ligne de commande **xperf.exe** ou de l’outil d’analyse de trace visuel **xperfview.exe**.</span><span class="sxs-lookup"><span data-stu-id="d427f-116">You can then analyze the file on the same or a different machine using either the command line tool **xperf.exe** or the visual trace analysis tool **xperfview.exe**.</span></span>

### <a name="gpuview"></a><span data-ttu-id="d427f-117">GPUView</span><span class="sxs-lookup"><span data-stu-id="d427f-117">GPUView</span></span>

<span data-ttu-id="d427f-118">**GPUView** est un outil de développement pour déterminer les performances de l’unité de traitement graphique (GPU) et de l’UC.</span><span class="sxs-lookup"><span data-stu-id="d427f-118">**GPUView** is a development tool for determining the performance of the graphics processing unit (GPU) and CPU.</span></span> <span data-ttu-id="d427f-119">Il examine les performances en ce qui concerne le traitement de la mémoire tampon d’accès direct à la mémoire (DMA) et tout autre traitement vidéo sur le matériel vidéo.</span><span class="sxs-lookup"><span data-stu-id="d427f-119">It looks at performance with regard to direct memory access (DMA) buffer processing and all other video processing on the video hardware.</span></span>

<span data-ttu-id="d427f-120">Pour les applications [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) qui s’appuient fortement sur le GPU, **GPUView** est un outil puissant pour comprendre la relation entre le travail effectué sur le processeur et le GPU.</span><span class="sxs-lookup"><span data-stu-id="d427f-120">For [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps that rely heavily on the GPU, **GPUView** is a powerful tool for understanding the relationship between work done on the CPU vs. GPU.</span></span> <span data-ttu-id="d427f-121">Pour plus d’informations sur **GPUView**, consultez [utilisation de GPUView](/windows-hardware/drivers/display/using-gpuview).</span><span class="sxs-lookup"><span data-stu-id="d427f-121">For more info about **GPUView** see [Using GPUView](/windows-hardware/drivers/display/using-gpuview).</span></span>

<span data-ttu-id="d427f-122">Comme pour **Xperf**, une trace ETW est tout d’abord prise en démarrant le service de suivi, en exerçant le scénario nécessitant une analyse pour l’application en cours d’examen, en arrêtant le service et en enregistrant les informations dans un fichier ETL.</span><span class="sxs-lookup"><span data-stu-id="d427f-122">Similar to **XPerf**, an ETW trace is first taken by starting the tracing service, exercising the scenario that needs analysis for the app under consideration, stopping the service and saving the information in an ETL file.</span></span> <span data-ttu-id="d427f-123">**GPUView** présente les données présentes dans le fichier ETL dans un format graphique.</span><span class="sxs-lookup"><span data-stu-id="d427f-123">**GPUView** presents the data present in the ETL file in a graphical format.</span></span>

<span data-ttu-id="d427f-124">Après l’installation de l’outil **GPUView** , nous vous recommandons de lire la rubrique « affichage principal de **GPUView**» dans le menu « aide de **GPUView** ».</span><span class="sxs-lookup"><span data-stu-id="d427f-124">After installing the **GPUView** tool, it is we recommend you read the "**GPUView**’s Main Display" topic under the "**GPUView** Help" menu.</span></span> <span data-ttu-id="d427f-125">Elle contient des informations utiles sur l’interprétation de l’interface utilisateur **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="d427f-125">It contains useful information about how to interpret the **GPUView** UI.</span></span>

## <a name="installing-the-tools"></a><span data-ttu-id="d427f-126">Installation des outils</span><span class="sxs-lookup"><span data-stu-id="d427f-126">Installing the Tools</span></span>

<span data-ttu-id="d427f-127">**Xperf** et **GPUView** sont tous les deux inclus dans Windows performance Toolkit (WPT).</span><span class="sxs-lookup"><span data-stu-id="d427f-127">Both **XPerf** and **GPUView** are included in the Windows Performance Toolkit (WPT).</span></span>

<span data-ttu-id="d427f-128">**Xperf** est fourni dans le cadre du kit de développement logiciel (SDK) Windows pour Windows.</span><span class="sxs-lookup"><span data-stu-id="d427f-128">**XPerf** ships as part of the Windows Software Development Kit (SDK) for Windows.</span></span> <span data-ttu-id="d427f-129">[Téléchargez le SDK Windows](https://dev.windows.com/downloads).</span><span class="sxs-lookup"><span data-stu-id="d427f-129">[Download the Windows SDK](https://dev.windows.com/downloads).</span></span>

<span data-ttu-id="d427f-130">**GPUView** est disponible dans le kit de déploiement et d’évaluation Windows (Windows ADK).</span><span class="sxs-lookup"><span data-stu-id="d427f-130">**GPUView** is available in the Windows Assessment and Deployment Kit (Windows ADK).</span></span> <span data-ttu-id="d427f-131">[Téléchargez Windows ADK](/windows-hardware/get-started/adk-install).</span><span class="sxs-lookup"><span data-stu-id="d427f-131">[Download the Windows ADK](/windows-hardware/get-started/adk-install).</span></span>

<span data-ttu-id="d427f-132">Après l’installation, vous devez ajouter les répertoires contenant **Xperf** et **GPUView** à la variable système « Path ».</span><span class="sxs-lookup"><span data-stu-id="d427f-132">After installation, you must add the directories that contain **XPerf** and **GPUView** to the system "Path" variable.</span></span>

<span data-ttu-id="d427f-133">Cliquez sur le bouton Démarrer et tapez « variables système ».</span><span class="sxs-lookup"><span data-stu-id="d427f-133">Click the Start button and type "System Variables".</span></span> <span data-ttu-id="d427f-134">Le Fenêtre Propriétés système s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="d427f-134">The System Properties window opens.</span></span> <span data-ttu-id="d427f-135">Cliquez sur « modifier les variables d’environnement système ».</span><span class="sxs-lookup"><span data-stu-id="d427f-135">Click "Edit the system environment variables".</span></span> <span data-ttu-id="d427f-136">Sélectionnez « variables d’environnement » dans la boîte de dialogue « Propriétés système ».</span><span class="sxs-lookup"><span data-stu-id="d427f-136">Select "Environment Variables" from the "System Properties" dialog box.</span></span> <span data-ttu-id="d427f-137">La variable « PATH » se trouve sous « variables système ».</span><span class="sxs-lookup"><span data-stu-id="d427f-137">The "Path" variable is found under "System variables".</span></span> <span data-ttu-id="d427f-138">Ajoutez le répertoire contenant **xperf.exe** et **GPUView.exe** au chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="d427f-138">Append the directory containing **xperf.exe** and **GPUView.exe** to the path.</span></span> <span data-ttu-id="d427f-139">Ces fichiers exécutables se trouvent dans le répertoire « Windows performance Toolkit » à l’intérieur des « kits Windows ».</span><span class="sxs-lookup"><span data-stu-id="d427f-139">These executables are found in the "Windows Performance Toolkit" directory inside the "Windows Kits".</span></span> <span data-ttu-id="d427f-140">L’emplacement par défaut est : **C : \\ Program Files (x86) \\ Windows kits \\ 10 \\ Windows performance Toolkit**.</span><span class="sxs-lookup"><span data-stu-id="d427f-140">The default location is: **C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit**.</span></span>

## <a name="performance-time-measurements"></a><span data-ttu-id="d427f-141">Mesures de temps de performance</span><span class="sxs-lookup"><span data-stu-id="d427f-141">Performance Time Measurements</span></span>

<span data-ttu-id="d427f-142">La plupart des applications s’exécutent correctement et sont réactives aux entrées d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d427f-142">Most apps expect to run smoothly and be responsive to user input.</span></span> <span data-ttu-id="d427f-143">Toutefois, selon le scénario que vous souhaitez, un aspect des performances peut être plus important qu’un autre.</span><span class="sxs-lookup"><span data-stu-id="d427f-143">However, depending upon the scenario the you want, one aspect of performance might be more important than another.</span></span> <span data-ttu-id="d427f-144">Par exemple, pour une application de lecteur d’actualités s’exécutant sur un Tablet PC tactile, l’aspect le plus important est d’afficher un article unique à la fois et de faire défiler/zoomer/faire défiler le même ou un autre article.</span><span class="sxs-lookup"><span data-stu-id="d427f-144">For instance, for a news reader app running on a touch tablet PC, the most important aspect is to view a single article at a time and to pan/zoom/scroll through the same or a different article.</span></span> <span data-ttu-id="d427f-145">Dans ce scénario, la possibilité d’afficher tout le contenu de chaque trame n’est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="d427f-145">In this scenario the ability to render all the content every frame is not necessary.</span></span> <span data-ttu-id="d427f-146">Toutefois, la possibilité de faire défiler l’article sans heurts sur un mouvement tactile est extrêmement importante.</span><span class="sxs-lookup"><span data-stu-id="d427f-146">However, the ability to scroll through the article smoothly upon a touch gesture is extremely important.</span></span>

<span data-ttu-id="d427f-147">Dans une autre instance, un jeu ou une application de rendu vidéo qui utilise un grand nombre de problèmes d’animations si les trames sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="d427f-147">In another instance, a game or a video rendering app that uses lots of animations glitches if frames are dropped.</span></span> <span data-ttu-id="d427f-148">Dans ce cas, la possibilité de présenter du contenu à l’écran sans interuption à partir de l’entrée utilisateur est extrêmement importante.</span><span class="sxs-lookup"><span data-stu-id="d427f-148">In this case, the ability to present content on the screen without interuption from user input is extremely important.</span></span>

<span data-ttu-id="d427f-149">Pour comprendre quelle partie de l’application pose problème, la première étape consiste à choisir les scénarios les plus importants.</span><span class="sxs-lookup"><span data-stu-id="d427f-149">In order to understand which part of the app is problematic, the first step is to decide on the most important scenarios.</span></span> <span data-ttu-id="d427f-150">Une fois que les principaux aspects de l’application sont compris et comment ils seront testés, il est plus facile de rechercher des problèmes à l’aide des outils.</span><span class="sxs-lookup"><span data-stu-id="d427f-150">Once the core aspects of the app are understood and how they will be exercised, looking for problems using the tools becomes easier.</span></span>

<span data-ttu-id="d427f-151">Voici quelques-unes des mesures de temps de performances les plus courantes :</span><span class="sxs-lookup"><span data-stu-id="d427f-151">Some of the most common performance time metrics are as follows:</span></span>

### <a name="startup-time"></a><span data-ttu-id="d427f-152">Au moment du démarrage</span><span class="sxs-lookup"><span data-stu-id="d427f-152">Startup-time</span></span>

<span data-ttu-id="d427f-153">Temps mesuré à partir du lancement du processus jusqu’au premier sur l’écran.</span><span class="sxs-lookup"><span data-stu-id="d427f-153">Time measured from process launch to first present hitting the screen.</span></span> <span data-ttu-id="d427f-154">Cette mesure est plus utile lorsque le système est chaud et que la mesure est prise une fois que l’application a été lancée plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="d427f-154">This measurement is more useful when the system is warm meaning the measurement is taken after the app is launched a few times.</span></span>

### <a name="cpu-time-per-frame"></a><span data-ttu-id="d427f-155">Temps processeur par frame</span><span class="sxs-lookup"><span data-stu-id="d427f-155">CPU time per frame</span></span>

<span data-ttu-id="d427f-156">Durée pendant laquelle le processeur traite activement la charge de travail de l’application pour une trame.</span><span class="sxs-lookup"><span data-stu-id="d427f-156">The time for which CPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="d427f-157">Si l’application s’exécute correctement, tout le traitement requis pour une trame se produit dans un intervalle de v-sync.</span><span class="sxs-lookup"><span data-stu-id="d427f-157">If the app is running smoothly, all the processing required for one frame happens within one v-sync interval.</span></span> <span data-ttu-id="d427f-158">Avec le taux d’actualisation du moniteur de 60 Hz, il s’agit de 16ms par trame.</span><span class="sxs-lookup"><span data-stu-id="d427f-158">With the monitor refresh rate of 60Hz, this comes to 16ms per frame.</span></span> <span data-ttu-id="d427f-159">Si le temps processeur/le cadre est supérieur à 16ms, les optimisations du processeur peuvent être nécessaires pour produire une expérience d’application gratuite.</span><span class="sxs-lookup"><span data-stu-id="d427f-159">If CPU time/frame is greater than 16ms, CPU optimizations might be needed to produce a glitch free app experience.</span></span>

### <a name="gpu-time-per-frame"></a><span data-ttu-id="d427f-160">Temps GPU par frame</span><span class="sxs-lookup"><span data-stu-id="d427f-160">GPU time per frame</span></span>

<span data-ttu-id="d427f-161">Durée pendant laquelle le GPU traite activement la charge de travail de l’application pour une trame.</span><span class="sxs-lookup"><span data-stu-id="d427f-161">The time for which GPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="d427f-162">Une application est liée au GPU lorsque le temps nécessaire pour traiter une image de données est supérieur à 16ms.</span><span class="sxs-lookup"><span data-stu-id="d427f-162">An app is GPU bound when the time taken to process a frame worth of data is more than 16ms.</span></span>

<span data-ttu-id="d427f-163">La possibilité de déterminer si une application est liée à l’UC ou au GPU réduit la partie problématique du code.</span><span class="sxs-lookup"><span data-stu-id="d427f-163">Being able to understand whether an app is CPU or GPU bound will narrow the problematic part of the code.</span></span>

## <a name="taking-performance-time-measurement-trace"></a><span data-ttu-id="d427f-164">Suivi de la mesure du temps de performance</span><span class="sxs-lookup"><span data-stu-id="d427f-164">Taking performance time measurement trace</span></span>

<span data-ttu-id="d427f-165">Procédez comme suit pour effectuer une trace :</span><span class="sxs-lookup"><span data-stu-id="d427f-165">Perform these steps to take a trace:</span></span>

1.  <span data-ttu-id="d427f-166">Ouvrez une fenêtre de commande en tant qu’administrateur.</span><span class="sxs-lookup"><span data-stu-id="d427f-166">Open a command window as an administrator.</span></span>
2.  <span data-ttu-id="d427f-167">Fermez l’application si elle est déjà en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d427f-167">Close the app if it is already running.</span></span>
3.  <span data-ttu-id="d427f-168">Accédez au répertoire *gpuview* dans le dossier Windows performance Toolkit.</span><span class="sxs-lookup"><span data-stu-id="d427f-168">Change directories to the *gpuview* directory inside the Windows Performance Toolkit folder.</span></span>
4.  <span data-ttu-id="d427f-169">Tapez « log. cmd » pour démarrer le suivi des événements.</span><span class="sxs-lookup"><span data-stu-id="d427f-169">Type "log.cmd" to start event tracing.</span></span> <span data-ttu-id="d427f-170">Cette option permet de consigner les événements les plus intéressants.</span><span class="sxs-lookup"><span data-stu-id="d427f-170">This option logs the most interesting events.</span></span> <span data-ttu-id="d427f-171">Les autres options disponibles consignent différentes étendues des événements.</span><span class="sxs-lookup"><span data-stu-id="d427f-171">Other available options log different scope of the events.</span></span> <span data-ttu-id="d427f-172">Par exemple, le mode de journalisation Verbose ou « v » capture tous les événements dont le **GPUView** est conscient.</span><span class="sxs-lookup"><span data-stu-id="d427f-172">For instance ‘v’ or verbose log mode captures all events that the **GPUView** is aware of.</span></span>
5.  <span data-ttu-id="d427f-173">Lancez l’exemple et exercez l’exemple de la manière qui couvre le chemin d’accès des performances que vous devez analyser.</span><span class="sxs-lookup"><span data-stu-id="d427f-173">Launch the sample, and exercise the sample in a manner that covers the performance path that you need to analyze.</span></span>
6.  <span data-ttu-id="d427f-174">Revenez à la fenêtre de commande et tapez « log. cmd » à nouveau pour arrêter la journalisation.</span><span class="sxs-lookup"><span data-stu-id="d427f-174">Go back to the command windows and type "log.cmd" again to stop logging.</span></span>
7.  <span data-ttu-id="d427f-175">Cela génère un fichier appelé « fusionné. etl » dans le dossier *gpuview* .</span><span class="sxs-lookup"><span data-stu-id="d427f-175">This outputs a file called "merged.etl" in the *gpuview* folder.</span></span> <span data-ttu-id="d427f-176">Vous pouvez enregistrer ce fichier dans un autre emplacement et l’analyser sur le même ordinateur ou sur un autre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d427f-176">You can save this file to another location and you can analyze it on the same or a different machine.</span></span> <span data-ttu-id="d427f-177">Pour afficher les détails de la capture de la pile, enregistrez le fichier de symboles (. pdb) associé à l’application.</span><span class="sxs-lookup"><span data-stu-id="d427f-177">In order to view stack capture details, save the symbol file (.pdb) associated with the app.</span></span>

## <a name="measurements"></a><span data-ttu-id="d427f-178">Mesures</span><span class="sxs-lookup"><span data-stu-id="d427f-178">Measurements</span></span>


> [!Note]  
> <span data-ttu-id="d427f-179">Les mesures de l’exemple réalisation de la géométrie sont prises sur une machine à quatre cœurs avec une carte graphique DirectX11 intégrée.</span><span class="sxs-lookup"><span data-stu-id="d427f-179">The measurements for geometry realization sample are taken on a Quad Core machine with an integrated DirectX11 graphics card.</span></span> <span data-ttu-id="d427f-180">Les mesures varient en fonction de la configuration de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d427f-180">The measurements vary depending upon the machine configuration.</span></span>

 

<span data-ttu-id="d427f-181">Cette section montre comment mesurer le temps de démarrage, le processeur et le temps GPU par mesure de trame.</span><span class="sxs-lookup"><span data-stu-id="d427f-181">This section demonstrates how to measure the startup-time, CPU and GPU time per frame measurements.</span></span> <span data-ttu-id="d427f-182">Vous pouvez capturer un suivi des performances pour le même échantillon sur votre ordinateur et voir les différences entre les différentes mesures.</span><span class="sxs-lookup"><span data-stu-id="d427f-182">You can capture a performance trace for the same sample on your machine and see the differences in the various measurements.</span></span>

<span data-ttu-id="d427f-183">Pour analyser le suivi dans **GPUView**, ouvrez le fichier « fusionné. ELT » à l’aide de **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="d427f-183">To analyze the trace in **GPUView**, open the "merged.elt" file using **GPUView.exe**.</span></span>

### <a name="startup-time"></a><span data-ttu-id="d427f-184">Au moment du démarrage</span><span class="sxs-lookup"><span data-stu-id="d427f-184">Startup-time</span></span>

<span data-ttu-id="d427f-185">Le temps de démarrage est mesuré en fonction du temps total passé par le démarrage de l’application jusqu’à ce que le contenu apparaisse pour la première fois à l’écran.</span><span class="sxs-lookup"><span data-stu-id="d427f-185">The startup time is measured by the total time spent from the app start until the content first appears on the screen.</span></span>

<span data-ttu-id="d427f-186">La mesure du temps de démarrage est recommandée en suivant les étapes indiquées dans la section précédente avec ces variations :</span><span class="sxs-lookup"><span data-stu-id="d427f-186">The startup-time measurement is best taken by following the steps listed in the previous section with these variations:</span></span>

-   <span data-ttu-id="d427f-187">Si vous effectuez les mesures de démarrage la première fois que vous lancez l’application, elle est appelée démarrage à froid.</span><span class="sxs-lookup"><span data-stu-id="d427f-187">If the you take the start-up measurements the very first time you launch the app, it is called cold startup.</span></span> <span data-ttu-id="d427f-188">Cela peut varier en fonction des mesures effectuées après le lancement de l’application plusieurs fois plus tard dans une courte durée.</span><span class="sxs-lookup"><span data-stu-id="d427f-188">This may vary from measurements taken after you launch the app a few times over in a small duration of time.</span></span> <span data-ttu-id="d427f-189">C’est ce que l’on appelle le démarrage à chaud.</span><span class="sxs-lookup"><span data-stu-id="d427f-189">This is called warm startup.</span></span> <span data-ttu-id="d427f-190">En fonction du nombre de ressources créées par une application au lancement, il peut y avoir une grande différence entre les deux temps de démarrage.</span><span class="sxs-lookup"><span data-stu-id="d427f-190">Depending upon how many resources an app creates at launch, there can be a big difference between the two startup times.</span></span> <span data-ttu-id="d427f-191">En fonction des objectifs de l’application, il peut être souhaitable de mesurer l’un ou l’autre.</span><span class="sxs-lookup"><span data-stu-id="d427f-191">Depending upon app goals, measuring one or the other might be desirable.</span></span>
-   <span data-ttu-id="d427f-192">Lorsque vous consignez les informations de performance, arrêtez l’application dès que la première image s’affiche à l’écran.</span><span class="sxs-lookup"><span data-stu-id="d427f-192">When you log performance information, terminate the app as soon as the first frame shows up on the screen.</span></span>

### <a name="calculating-start-up-time-using-gpuview"></a><span data-ttu-id="d427f-193">Calcul du temps de démarrage à l’aide de **GPUView**</span><span class="sxs-lookup"><span data-stu-id="d427f-193">Calculating start-up time using **GPUView**</span></span>

1.  <span data-ttu-id="d427f-194">Dans **GPUView**, faites défiler jusqu’au processus approprié, dans ce cas GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="d427f-194">In **GPUView**, scroll down to the relevant process, in this case GeometryRealization.exe.</span></span>

    ![Capture d’écran montrant un exemple de processus dans GPUView.](images/profile1.png)

2.  <span data-ttu-id="d427f-196">La file d’attente de l’UC du contexte représente la charge de travail Graphics mise en file d’attente sur le matériel, mais pas nécessairement traitée par le matériel.</span><span class="sxs-lookup"><span data-stu-id="d427f-196">The context CPU queue represents the graphics workload queued to the hardware, but not necessarily being processed by the hardware.</span></span> <span data-ttu-id="d427f-197">Lorsque le fichier de trace est ouvert, il affiche tous les événements journalisés entre le moment où la trace a été effectuée.</span><span class="sxs-lookup"><span data-stu-id="d427f-197">When the trace file is opened, it shows all the events logged between the time the trace was taken.</span></span> <span data-ttu-id="d427f-198">Pour calculer l’heure de démarrage, sélectionnez la zone d’intérêt, effectuez un zoom avant sur la partie initiale de la première file d’attente de l’UC du contexte (il s’agit de celle qui affiche l’activité) à l’aide de Ctrl + Z.</span><span class="sxs-lookup"><span data-stu-id="d427f-198">In order to calculate the startup-time, select the region of interest, zoom into the initial portion of the first Context CPU Queue (this is the one that shows activity) using Ctrl +Z.</span></span> <span data-ttu-id="d427f-199">Vous trouverez plus d’informations sur les contrôles **GPUView** dans la section « Résumé des contrôles **GPUView** » du fichier d’aide **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="d427f-199">More information about **GPUView** Controls can be found in the **GPUView** Help file section "Summary of **GPUView** Controls".</span></span> <span data-ttu-id="d427f-200">La figure ci-dessous affiche uniquement le processus de GeometryRealization.exe zoomé dans la première partie de la file d’attente du contexte de l’UC.</span><span class="sxs-lookup"><span data-stu-id="d427f-200">The figure below only shows the GeometryRealization.exe process zoomed in to the first part of the Context CPU Queue.</span></span> <span data-ttu-id="d427f-201">La couleur de la file d’attente du contexte de l’UC est indiquée par le rectangle juste en dessous de la file d’attente et les paquets de données de couleur de la file d’attente affichent le travail GPU mis en file d’attente sur le matériel.</span><span class="sxs-lookup"><span data-stu-id="d427f-201">The color of the Context CPU Queue is denoted by the rectangle right below the queue and same color data packets in the queue show GPU work queued up on the hardware.</span></span> <span data-ttu-id="d427f-202">Le paquet de hachures dans la file d’attente de contexte indique le paquet présent, ce qui signifie que l’application souhaite que le matériel présente le contenu à l’écran.</span><span class="sxs-lookup"><span data-stu-id="d427f-202">The hatch pattern packet in the context queue shows the present packet which means that the app wants the hardware to present the content on the screen.</span></span>

    ![Capture d’écran illustrant des exemples de « context C P U queue ».](images/profile2.png)

3.  <span data-ttu-id="d427f-204">L’heure de démarrage est l’heure à laquelle l’application démarre pour la première fois (dans ce cas, le module point d’entrée de thread d’interface utilisateur SHCORE.dll) jusqu’à ce que le contexte apparaisse pour la première fois (marqué par un paquet hachuré).</span><span class="sxs-lookup"><span data-stu-id="d427f-204">The startup-time is the time when the app first starts (in this case UI thread entry point module SHCORE.dll) till the time the context first appears (marked by a hatch packet).</span></span> <span data-ttu-id="d427f-205">La figure ci-dessous met en évidence le domaine d’intérêt.</span><span class="sxs-lookup"><span data-stu-id="d427f-205">The figure here highlights the area of interest.</span></span>

    > [!Note]  
    > <span data-ttu-id="d427f-206">Les informations réelles réelles sont représentées dans la file d’attente de retournement, et le temps nécessaire est donc prolongé jusqu’à ce que le paquet présent soit réellement terminé dans la file d’attente de basculement.</span><span class="sxs-lookup"><span data-stu-id="d427f-206">The actual present info is represented in the flip queue and thus the time take is extended till the present packet actually completes in the flip queue.</span></span>

     

    <span data-ttu-id="d427f-207">La barre d’état complète n’est pas visible dans la figure ci-dessous, qui indique également le temps écoulé entre les parties mises en surbrillance.</span><span class="sxs-lookup"><span data-stu-id="d427f-207">The complete status bar is not visible in the figure below which also shows the elapsed time between the highlighted portions.</span></span> <span data-ttu-id="d427f-208">Il s’agit de l’heure de démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="d427f-208">This is the startup-time of the app.</span></span> <span data-ttu-id="d427f-209">Dans ce cas pour l’ordinateur mentionné ci-dessus, il s’agit d’un 240ms.</span><span class="sxs-lookup"><span data-stu-id="d427f-209">In this case for the machine mentioned above, it came out to be around 240ms.</span></span>

    ![Capture d’écran qui montre les zones d’intérêt relatives au démarrage dans la file d’attente du contexte C P U.](images/profile3.png)

### <a name="cpu-and-gpu-time-per-frame"></a><span data-ttu-id="d427f-211">Temps processeur et GPU par frame</span><span class="sxs-lookup"><span data-stu-id="d427f-211">CPU and GPU Time per frame</span></span>

<span data-ttu-id="d427f-212">Il existe quelques points à prendre en compte lors de la mesure du temps processeur.</span><span class="sxs-lookup"><span data-stu-id="d427f-212">There are a few things to think about when measuring CPU time.</span></span> <span data-ttu-id="d427f-213">Recherchez les zones dans la trace où vous avez fait l’analyse du scénario à analyser.</span><span class="sxs-lookup"><span data-stu-id="d427f-213">Look for the areas in the trace where you have exercised the scenario to be analyzed.</span></span> <span data-ttu-id="d427f-214">Par exemple, dans l’exemple de réalisation géométrique, l’un des scénarios analysés est la transition entre le rendu des primitives 2048 et 8192, toutes les primitives non réalisées (comme dans, Geometry n’est pas fractionnée sur chaque image).</span><span class="sxs-lookup"><span data-stu-id="d427f-214">For instance, in the geometry realization sample one of the scenarios that has been analyzed is the transition between rendering 2048 and 8192 primitives, all unrealized (as in, geometry is not tessellated every frame).</span></span> <span data-ttu-id="d427f-215">La trace montre clairement la différence dans l’activité du processeur et du GPU avant et après la transition dans le nombre de Primitives.</span><span class="sxs-lookup"><span data-stu-id="d427f-215">The trace clearly shows difference in CPU and GPU activity before and after the transition in the number of primitives.</span></span>

<span data-ttu-id="d427f-216">Deux scénarios sont analysés pour calculer le temps processeur et le temps processeur graphique par frame.</span><span class="sxs-lookup"><span data-stu-id="d427f-216">Two scenarios are being analyzed to calculate CPU and GPU time per frame.</span></span> <span data-ttu-id="d427f-217">Elles sont les suivantes.</span><span class="sxs-lookup"><span data-stu-id="d427f-217">They are as follows.</span></span>

-   <span data-ttu-id="d427f-218">Transition du rendu des primitives non réalisées 2048 à 8192 primitives non réalisées.</span><span class="sxs-lookup"><span data-stu-id="d427f-218">Transitioning from rendering 2048 unrealized primitives to 8192 unrealized primitives.</span></span>
-   <span data-ttu-id="d427f-219">Transition du rendu 8192 primitives obtenues à 8192 primitives non réalisées.</span><span class="sxs-lookup"><span data-stu-id="d427f-219">Transitioning from rendering 8192 realized primitives to 8192 unrealized primitives.</span></span>

<span data-ttu-id="d427f-220">Dans les deux cas, il a été observé que la fréquence d’images a été supprimée de façon radicale.</span><span class="sxs-lookup"><span data-stu-id="d427f-220">In both the cases, it was observed that the frame rate dropped drastically.</span></span> <span data-ttu-id="d427f-221">La mesure du temps processeur et du GPU, la relation entre les deux, ainsi que quelques autres modèles dans la trace, peut fournir des informations utiles sur les zones problématiques de l’application.</span><span class="sxs-lookup"><span data-stu-id="d427f-221">Measuring CPU and GPU time, the relationship between the two as well as a few other patterns in the trace can give useful info about problematic areas in the app.</span></span>

### <a name="calculating-cpu-and-gpu-time-when-2048-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="d427f-222">Calcul du temps processeur et du GPU lorsque 2048 primitives sont rendues non réalisées</span><span class="sxs-lookup"><span data-stu-id="d427f-222">Calculating CPU and GPU time when 2048 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="d427f-223">Ouvrez le fichier de trace à l’aide de **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="d427f-223">Open the trace file using **GPUView.exe**.</span></span>
2.  <span data-ttu-id="d427f-224">Faites défiler jusqu’au processus GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="d427f-224">Scroll down to the GeometryRealization.exe process.</span></span>
3.  <span data-ttu-id="d427f-225">Sélectionnez une zone pour le calcul du temps processeur et agrandissez-la à l’aide de CTRL + Z.</span><span class="sxs-lookup"><span data-stu-id="d427f-225">Select an area for calculating CPU time and zoom into it using CTRL + Z.</span></span>

    ![Capture d’écran montrant une zone sélectionnée pour le calcul du temps C P U dans la file d’attente de l’UC du contexte.](images/profile4.png)

4.  <span data-ttu-id="d427f-227">Affichez les informations v-sync en basculant entre F8.</span><span class="sxs-lookup"><span data-stu-id="d427f-227">Show v-sync information by toggling between F8.</span></span> <span data-ttu-id="d427f-228">En gardant le zoom avant jusqu’à ce qu’il soit facile de voir une seule Vsync de données clairement.</span><span class="sxs-lookup"><span data-stu-id="d427f-228">Keeping zooming in till it is easy to see one vsync worth of data clearly.</span></span> <span data-ttu-id="d427f-229">Les lignes bleues sont les heures de la synchronisation v.</span><span class="sxs-lookup"><span data-stu-id="d427f-229">The blue lines are where the v-sync times.</span></span> <span data-ttu-id="d427f-230">En règle générale, ils se produisent une fois toutes les 16 ms (60 i/s), mais si DWM rencontre un problème de performances, il s’exécute plus lentement, ce qui se produit une fois toutes les 32 ms (30 i/s).</span><span class="sxs-lookup"><span data-stu-id="d427f-230">Usually, these occur once every 16 ms (60 fps), but if DWM is encountering a performance problem, it runs slower so they will occur once every 32 ms (30 fps).</span></span> <span data-ttu-id="d427f-231">Pour obtenir une idée de temps, sélectionnez d’une barre bleue à la suivante, puis examinez le nombre de MS signalé dans le coin inférieur droit de la fenêtre **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="d427f-231">To get a sense of time, select from one blue bar to the next and then look at the number of ms reported in the lower right hand corner of the **GPUView** window.</span></span>

    ![Capture d’écran montrant un exemple de temps de synchronisation v.](images/profile5.png)

5.  <span data-ttu-id="d427f-233">Pour mesurer le temps processeur par trame, mesurez la durée nécessaire pour tous les threads impliqués dans le rendu.</span><span class="sxs-lookup"><span data-stu-id="d427f-233">To measure the CPU time per frame, measure the length of time taken by all the threads involved in rendering.</span></span> <span data-ttu-id="d427f-234">Il peut être utile de limiter le thread supposé être le plus pertinent du point de vue des performances.</span><span class="sxs-lookup"><span data-stu-id="d427f-234">It might be worthwhile to narrow down the thread that is expected to be most relevant from a performance standpoint.</span></span> <span data-ttu-id="d427f-235">Par exemple, dans l’exemple réalisation de la géométrie, le contenu est animé et doit être affiché à l’écran chaque frame qui rend le thread d’interface utilisateur le plus important.</span><span class="sxs-lookup"><span data-stu-id="d427f-235">For instance in the geometry realization sample, the content is animating and needs to be rendered on the screen every frame making the UI thread the important one.</span></span> <span data-ttu-id="d427f-236">Une fois que vous avez déterminé le thread à examiner, mesurez la longueur des barres sur ce thread.</span><span class="sxs-lookup"><span data-stu-id="d427f-236">Once you determine which thread to look at, measure the length of the bars on this thread.</span></span> <span data-ttu-id="d427f-237">La moyenne de quelques-unes d’entre elles donne le temps processeur par trame.</span><span class="sxs-lookup"><span data-stu-id="d427f-237">Averaging a few of these yields CPU time per frame.</span></span> <span data-ttu-id="d427f-238">La figure ci-dessous montre le temps écoulé sur le thread d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d427f-238">The figure below shows time taken up on the UI thread.</span></span> <span data-ttu-id="d427f-239">Cela indique également que cette heure s’adapte bien à deux synchronisations avec v consécutives, ce qui signifie qu’elle est en 60FPS.</span><span class="sxs-lookup"><span data-stu-id="d427f-239">It also shows that this time fits well between two consecutive v-syncs which mean that it is hitting 60FPS.</span></span>

    ![Capture d’écran montrant le temps écoulé sur le thread U I.](images/profile6.png)

    <span data-ttu-id="d427f-241">Vous pouvez également vérifier en regardant la file d’attente de retournement pour le laps de temps correspondant qui montre que DWM peut présenter chaque frame.</span><span class="sxs-lookup"><span data-stu-id="d427f-241">You can also verify by looking at the flip queue for the corresponding time frame which shows that DWM is able to present every frame.</span></span>

    ![Capture d’écran montrant un exemple de la file d’attente de retournement.](images/profile7.png)

6.  <span data-ttu-id="d427f-243">L’heure du GPU peut être mesurée de la même façon que le temps processeur.</span><span class="sxs-lookup"><span data-stu-id="d427f-243">The GPU time can be measured in the same way as the CPU time.</span></span> <span data-ttu-id="d427f-244">Effectuez un zoom sur la zone appropriée comme dans le cas de la mesure du temps processeur.</span><span class="sxs-lookup"><span data-stu-id="d427f-244">Zoom into the relevant area as in the case of measuring CPU time.</span></span> <span data-ttu-id="d427f-245">Mesurez la longueur des barres de la file d’attente matérielle du GPU avec la même couleur que la couleur de la file d’attente du contexte du processeur.</span><span class="sxs-lookup"><span data-stu-id="d427f-245">Measure the length of the bars in the GPU hardware Queue with the same color as the color of the Context CPU Queue.</span></span> <span data-ttu-id="d427f-246">Tant que les barres sont comprises dans les synchronisations en v consécutives, l’application s’exécute sans heurts sur 60FPS.</span><span class="sxs-lookup"><span data-stu-id="d427f-246">As long as the bars fit within consecutive v-syncs, the app is running smoothly at 60FPS.</span></span>

    ![Capture d’écran montrant un exemple de la file d’attente matérielle GPU affichant les informations qu’une application exécute à 60 F P S.](images/profile8.png)

### <a name="calculating-cpu-and-gpu-time-when-8192-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="d427f-248">Calcul du temps processeur et du GPU lorsque 8192 primitives sont rendues non réalisées</span><span class="sxs-lookup"><span data-stu-id="d427f-248">Calculating CPU and GPU time when 8192 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="d427f-249">Si vous suivez à nouveau les mêmes étapes, le suivi indique que l’ensemble du travail de l’UC pour une trame ne peut pas être compris entre une synchronisation v et la suivante.</span><span class="sxs-lookup"><span data-stu-id="d427f-249">If you follow the same steps again, the trace shows that all the CPU work for one frame does not fit between one v-sync and the next.</span></span> <span data-ttu-id="d427f-250">Cela signifie que l’application est liée à l’UC.</span><span class="sxs-lookup"><span data-stu-id="d427f-250">This means that the app is CPU bound.</span></span> <span data-ttu-id="d427f-251">Le thread d’interface utilisateur sature le processeur.</span><span class="sxs-lookup"><span data-stu-id="d427f-251">The UI thread is saturating the CPU.</span></span>

    ![Capture d’écran montrant un exemple de thread d’interface utilisateur saturant le C P U.](images/profile9.png)

    <span data-ttu-id="d427f-253">En examinant la file d’attente Flip, il est également clair que DWM n’est pas en mesure de présenter chaque frame.</span><span class="sxs-lookup"><span data-stu-id="d427f-253">Looking at the flip queue, it is also clear that DWM is not able to present every frame.</span></span>

    ![Capture d’écran montrant un exemple du D W M impossible de présenter toutes les images.](images/profile10.png)

2.  <span data-ttu-id="d427f-255">Pour analyser le moment où le temps est passé, ouvrez la trace dans **Xperf**.</span><span class="sxs-lookup"><span data-stu-id="d427f-255">In order to analyze where the time is getting spent, open the trace in **XPerf**.</span></span> <span data-ttu-id="d427f-256">Pour analyser le temps de démarrage dans **Xperf**, commencez par Rechercher l’intervalle de temps dans **GPUView**.</span><span class="sxs-lookup"><span data-stu-id="d427f-256">To analyze startup time in **XPerf**, first find the time interval in **GPUView**.</span></span> <span data-ttu-id="d427f-257">Placez la souris à gauche de l’intervalle et de la droite et notez l’heure absolue affichée en bas de la fenêtre **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="d427f-257">Mouse over the left of the interval and the right and take note of the absolute time shown in the bottom of the **GPUView** window.</span></span> <span data-ttu-id="d427f-258">Ouvrez ensuite le même fichier. etl dans **Xperf** et faites défiler jusqu’au graphique « échantillonnage de l’UC par UC », cliquez avec le bouton droit et sélectionnez « Sélectionner un intervalle... ». Cela permet de taper l’intervalle d’intérêt qui a été découvert en examinant le suivi GPU.</span><span class="sxs-lookup"><span data-stu-id="d427f-258">Then open the same .etl file in **XPerf** and, scroll down to the "CPU Sampling by CPU" graph, right click and select "Select Interval…" This allows for typing in the interval of interest which was discovered by looking at the GPU trace.</span></span>

    ![Capture d’écran montrant l’échantillonnage « C P U par C P U » dans « analyse des performances Windows ».](images/profile11.png)

3.  <span data-ttu-id="d427f-260">Accédez au menu trace et assurez-vous que l’option « charger les symboles » est cochée.</span><span class="sxs-lookup"><span data-stu-id="d427f-260">Go to the Trace menu, and make sure "Load Symbols" is checked.</span></span> <span data-ttu-id="d427f-261">Accédez également à trace-> configurer les chemins d’accès aux symboles et tapez dans le chemin d’accès aux symboles de l’application.</span><span class="sxs-lookup"><span data-stu-id="d427f-261">Also, go to Trace -> Configure Symbol Paths, and type in the app symbol path.</span></span> <span data-ttu-id="d427f-262">Un fichier de symboles contient des informations de débogage sur un exécutable compilé dans une base de données distincte (. pdb).</span><span class="sxs-lookup"><span data-stu-id="d427f-262">A symbol file contains debugging information about a compiled executable in a separate database (.pdb).</span></span> <span data-ttu-id="d427f-263">Ce fichier est communément appelé PDB.</span><span class="sxs-lookup"><span data-stu-id="d427f-263">This file is commonly referred to as a PDB.</span></span> <span data-ttu-id="d427f-264">Vous trouverez plus d’informations sur les fichiers de symboles ici : [fichiers de symboles](/windows/desktop/Debug/symbol-files).</span><span class="sxs-lookup"><span data-stu-id="d427f-264">More on symbol files can be found here: [Symbol Files](/windows/desktop/Debug/symbol-files).</span></span> <span data-ttu-id="d427f-265">Ce fichier peut se trouver dans le dossier « Debug » du répertoire de l’application.</span><span class="sxs-lookup"><span data-stu-id="d427f-265">This file can be located in the "Debug" folder of the app directory.</span></span>

4.  <span data-ttu-id="d427f-266">Afin d’obtenir la répartition de l’heure d’exécution de l’application, cliquez avec le bouton droit sur l’intervalle sélectionné à l’étape précédente, puis cliquez sur table de résumé.</span><span class="sxs-lookup"><span data-stu-id="d427f-266">In order to get the breakdown of where the time is being spent in the app, right click on the interval selected in the previous step and click Summary Table.</span></span> <span data-ttu-id="d427f-267">Pour avoir une vue d’ensemble du temps passé dans chaque dll, décochez « Stack » dans le menu « Columns » (colonnes).</span><span class="sxs-lookup"><span data-stu-id="d427f-267">To get an overview of how much time is spent in each dll, uncheck "Stack" from the "Columns" menu.</span></span> <span data-ttu-id="d427f-268">Notez que la colonne « Count » affiche ici le nombre d’exemples qui se trouvent dans la dll/fonction donnée.</span><span class="sxs-lookup"><span data-stu-id="d427f-268">Note that the "Count" column here shows how many samples are within the given dll/function.</span></span> <span data-ttu-id="d427f-269">Étant donné qu’environ un échantillon est pris par MS, ce nombre peut être utilisé comme meilleure estimation du temps passé dans chaque dll/fonction.</span><span class="sxs-lookup"><span data-stu-id="d427f-269">Because approximately one sample is taken per ms, this number can be used as a best guess for how much time is spent in each dll/function.</span></span> <span data-ttu-id="d427f-270">Le contrôle de la « pile » dans le menu colonnes permet d’obtenir le temps inclusif passé dans chaque fonction dans le graphique des appels.</span><span class="sxs-lookup"><span data-stu-id="d427f-270">Checking the "Stack" from Columns menu will give the inclusive time spent in each function in the call graph.</span></span> <span data-ttu-id="d427f-271">Cela vous aidera à décomposer les points à problème.</span><span class="sxs-lookup"><span data-stu-id="d427f-271">This will help to break down the problem points further.</span></span>

5.  <span data-ttu-id="d427f-272">Les informations de trace de la pile pour les primitives non réalisées 2048 révèlent que 30% du temps processeur est passé dans le processus de réalisation géométrique.</span><span class="sxs-lookup"><span data-stu-id="d427f-272">Stack trace information for 2048 unrealized primitives reveals that 30% of CPU time is spent in geometry realization process.</span></span> <span data-ttu-id="d427f-273">Environ 36% du temps est passé dans le pavage et le contour de géométrie.</span><span class="sxs-lookup"><span data-stu-id="d427f-273">Of that around 36% of the time is being spent in geometry tessellation and stroking.</span></span>

6.  <span data-ttu-id="d427f-274">Les informations de trace de la pile pour les primitives non réalisées 8192 révèlent qu’environ 60% du temps processeur (4 cœurs) est consacré à la réalisation de la géométrie.</span><span class="sxs-lookup"><span data-stu-id="d427f-274">Stack trace information for 8192 unrealized primitives reveals that around 60% of the CPU time (4 cores) is spent in the geometry realization.</span></span>

    ![Capture d’écran montrant les informations de trace de la pile pour l’heure de C P U.](images/profile12.png)

### <a name="calculating-cpu-time-when-8192-primitives-are-being-rendered-realized"></a><span data-ttu-id="d427f-276">Calcul du temps processeur en cas de rendu des primitives 8192</span><span class="sxs-lookup"><span data-stu-id="d427f-276">Calculating CPU time when 8192 primitives are being rendered realized</span></span>

<span data-ttu-id="d427f-277">Il est clair dans les profils que l’application est liée à l’UC.</span><span class="sxs-lookup"><span data-stu-id="d427f-277">It is clear from the profiles that the app is CPU bound.</span></span> <span data-ttu-id="d427f-278">Afin de réduire le temps passé par l’UC, les géométries peuvent être créées une fois et mises en cache.</span><span class="sxs-lookup"><span data-stu-id="d427f-278">In order to reduce the time spent by the CPU, geometries can be created once and cached.</span></span> <span data-ttu-id="d427f-279">Le contenu mis en cache peut être rendu dans chaque frame sans que le coût de facettisation Geometry soit généré par image.</span><span class="sxs-lookup"><span data-stu-id="d427f-279">The cached content can be rendered every frame without incurring the geometry tessellation cost per frame.</span></span> <span data-ttu-id="d427f-280">Lorsque vous examinez la trace dans **GPUView** pour la partie réalisée de l’application, il est clair que DWM peut présenter chaque trame et que le temps processeur a été considérablement réduit.</span><span class="sxs-lookup"><span data-stu-id="d427f-280">When looking at the trace in **GPUView** for the realized part of the app, it is clear that DWM is able to present every frame and the CPU time has reduced drastically.</span></span>

![Capture d’écran montrant un exemple de trace dans GPUView montrant que D W M peut présenter toutes les images.](images/profile13.png)

<span data-ttu-id="d427f-282">La première partie du graphique montre les primitives 8192 réalisées.</span><span class="sxs-lookup"><span data-stu-id="d427f-282">The first part of the graph shows realized 8192 primitives.</span></span> <span data-ttu-id="d427f-283">Le temps processeur correspondant par trame peut tenir dans deux synchronisations v consécutives.</span><span class="sxs-lookup"><span data-stu-id="d427f-283">The corresponding CPU time per frame is able to fit within two consecutive v-syncs.</span></span> <span data-ttu-id="d427f-284">Dans la partie suivante du graphique, ce n’est pas le cas.</span><span class="sxs-lookup"><span data-stu-id="d427f-284">In the later part of the graph this is not true.</span></span>

<span data-ttu-id="d427f-285">Dans **Xperf**, le processeur est resté inactif pendant la durée la plus longue, avec seulement environ 25% du temps processeur passé sur l’application Geometry réalisation.</span><span class="sxs-lookup"><span data-stu-id="d427f-285">Looking in **XPerf**, CPU is sitting idle for the longest time with only about 25% of the CPU time being spent on the geometry realization app.</span></span>

![capture d’écran gpuview.](images/profile14.png)

## <a name="summary"></a><span data-ttu-id="d427f-287">Résumé</span><span class="sxs-lookup"><span data-stu-id="d427f-287">Summary</span></span>

<span data-ttu-id="d427f-288">**GPUView** et **Xperf** et puissants outils permettant d’analyser les performances des applications [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) .</span><span class="sxs-lookup"><span data-stu-id="d427f-288">Both **GPUView** and **XPerf** and powerful tools for analyzing performance of [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps.</span></span> <span data-ttu-id="d427f-289">Cet article est une introduction à l’utilisation de ces outils et à la compréhension des mesures de performances de base et des caractéristiques de l’application.</span><span class="sxs-lookup"><span data-stu-id="d427f-289">This article is a primer for using these tools and understanding basic performance measurements and app characteristics.</span></span> <span data-ttu-id="d427f-290">Outre la compréhension de l’utilisation des outils, il est tout d’abord important de comprendre l’application en cours d’analyse.</span><span class="sxs-lookup"><span data-stu-id="d427f-290">Apart from understanding usage of tools, it is first important to understand the app being analyzed.</span></span> <span data-ttu-id="d427f-291">Commencez par trouver des réponses aux questions telles que l’application qui tente d’atteindre ?</span><span class="sxs-lookup"><span data-stu-id="d427f-291">Start with finding answers to questions like what is the app trying to achieve?</span></span> <span data-ttu-id="d427f-292">Quels sont les threads du système qui sont les plus importants ?</span><span class="sxs-lookup"><span data-stu-id="d427f-292">Which threads in the system are most important?</span></span> <span data-ttu-id="d427f-293">Quels sont les compromis que vous voulez faire ?</span><span class="sxs-lookup"><span data-stu-id="d427f-293">What trade-offs are you willing to make?</span></span> <span data-ttu-id="d427f-294">Lorsque vous analysez les traces de performances, commencez par examiner les emplacements évidents des problèmes.</span><span class="sxs-lookup"><span data-stu-id="d427f-294">When analyzing performance traces, start by looking at obvious problematic places.</span></span> <span data-ttu-id="d427f-295">L’UC de l’application ou le GPU est-il lié ?</span><span class="sxs-lookup"><span data-stu-id="d427f-295">Is the app CPU or GPU bound?</span></span> <span data-ttu-id="d427f-296">L’application peut-elle présenter toutes les images ?</span><span class="sxs-lookup"><span data-stu-id="d427f-296">Is the app able to present every frame?</span></span> <span data-ttu-id="d427f-297">Les outils associés à une compréhension de l’application peuvent fournir des informations très utiles pour comprendre, Rechercher et enfin résoudre les problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="d427f-297">Tools together with an understanding of the app can give very useful information in understanding, finding and finally solving performance problems.</span></span>

 

 