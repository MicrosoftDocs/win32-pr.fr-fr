---
description: Les ensembles d’UC fournissent des API pour déclarer l’affinité de l’application selon un mode « soft » qui est compatible avec la gestion de l’alimentation du système d’exploitation.
ms.assetid: FF8BE790-19D9-473F-B184-C54FB392D61A
title: Ensembles d’UC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 801474591751f04a5bffe570d6b8caff4974203f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106518253"
---
# <a name="cpu-sets"></a><span data-ttu-id="62d3a-103">Ensembles d’UC</span><span class="sxs-lookup"><span data-stu-id="62d3a-103">CPU Sets</span></span>

<span data-ttu-id="62d3a-104">Les ensembles d’UC fournissent des API pour déclarer l’affinité de l’application selon un mode « soft » qui est compatible avec la gestion de l’alimentation du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="62d3a-104">CPU Sets provide APIs to declare application affinity in a 'soft' manner that is compatible with OS power management.</span></span> <span data-ttu-id="62d3a-105">En outre, l’API fournit aux applications la possibilité de reaffinitize tous les threads d’arrière-plan du processus à un sous-ensemble de processeurs à l’aide du mécanisme de **processus par défaut** afin d’éviter les interférences entre les threads du système d’exploitation au sein du processus.</span><span class="sxs-lookup"><span data-stu-id="62d3a-105">Additionally, the API provides applications with the ability to reaffinitize all background threads in the process to a subset of processors using the **Process Default** mechanism to avoid interference from OS threads within the process.</span></span> <span data-ttu-id="62d3a-106">Certaines versions de Windows prennent en charge les stratégies de réservation principales, dans lesquelles un sous-ensemble des ensembles d’UC du système peut être consacré à l’utilisation exclusive des applications et charges de travail individuelles.</span><span class="sxs-lookup"><span data-stu-id="62d3a-106">Some versions of Windows support Core Reservation policies, in which a subset of the system’s CPU Sets can be devoted to the exclusive use of individual applications and workloads.</span></span>

<span data-ttu-id="62d3a-107">L’API d’ensemble d’UC fonctionne avec des ID de jeu de PROCESSEURs, qui sont associés à des affinités de processeur virtuel.</span><span class="sxs-lookup"><span data-stu-id="62d3a-107">The CPU Set API works with CPU Set IDs, which are associated with virtual processor affinities.</span></span> <span data-ttu-id="62d3a-108">Sur la plupart des systèmes, et dans la plupart des cas, chaque ID de jeu d’UC est mappé directement à un seul processeur logique d' **hébergement** .</span><span class="sxs-lookup"><span data-stu-id="62d3a-108">On most systems, and under most conditions, each CPU Set ID will map directly to a single **home** logical processor.</span></span> <span data-ttu-id="62d3a-109">Un thread affinité à un ensemble d’UC donné s’exécute généralement sur l’un des processeurs de sa liste d’ID de jeux d’UC sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="62d3a-109">A thread affinitized to a given CPU Set will typically execute on one of the processors in its list of selected CPU Set IDs.</span></span>

<span data-ttu-id="62d3a-110">Les ensembles d’UC réservés peuvent être déterminés en inspectant l’indicateur **alloué** dans les \_ informations du jeu d’UC système \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="62d3a-110">CPU Sets that are reserved can be determined by inspecting the **Allocated** flag in the SYSTEM\_CPU\_SET\_INFORMATION.</span></span> <span data-ttu-id="62d3a-111">Le système contrôle l’accès aux jeux d’UC réservés et l’assignation peut être interrogée à l’aide de l’indicateur **AllocatedToTargetProcess** de la \_ structure d’informations du jeu d’UC système \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="62d3a-111">The system controls access to reserved CPU Sets and the assignment can be queried using the **AllocatedToTargetProcess** flag of the SYSTEM\_CPU\_SET\_INFORMATION structure.</span></span> <span data-ttu-id="62d3a-112">Si un processus tente d’utiliser une attribution de jeu d’UC qui est allouée exclusivement à d’autres processus, sa demande est ignorée et les threads affectés à des ensembles d’UC non autorisés sont planifiés ailleurs.</span><span class="sxs-lookup"><span data-stu-id="62d3a-112">If a process attempts to use a CPU Set assignment which is allocated exclusively to other processes, its request is ignored and threads assigned to disallowed CPU sets are scheduled elsewhere.</span></span> <span data-ttu-id="62d3a-113">Les ensembles d’UC peuvent être affectés à deux niveaux.</span><span class="sxs-lookup"><span data-stu-id="62d3a-113">CPU Sets can be assigned at two levels.</span></span> <span data-ttu-id="62d3a-114">Les ensembles d’UC par défaut du processus sont affectés à tous les threads d’un processus qui n’ont pas d’attribution au niveau du thread sélectionné.</span><span class="sxs-lookup"><span data-stu-id="62d3a-114">The Process Default CPU sets are assigned to all threads in a process that do not have an assignment at the Thread Selected level.</span></span> <span data-ttu-id="62d3a-115">Si un thread ou un processus possède un masque d’affinité restrictif défini, le masque d’affinité est respecté au-dessus de toute affectation de jeu d’UC conflictuel.</span><span class="sxs-lookup"><span data-stu-id="62d3a-115">If a thread or process has a restrictive affinity mask set, the affinity mask is respected above any conflicting CPU Set assignment.</span></span> <span data-ttu-id="62d3a-116">Sur les systèmes à plusieurs groupes, les affectations d’UC sont ignorées si elles se trouvent dans des groupes qui ne correspondent pas au groupe dans le masque d’affinité du thread.</span><span class="sxs-lookup"><span data-stu-id="62d3a-116">On multi-group systems, CPU assignments are ignored if they are in groups that do not match the group in the thread’s affinity mask.</span></span> <span data-ttu-id="62d3a-117">Si un thread est affecté à plusieurs ensembles d’UC valides, il s’exécutera sur l’un des processeurs correspondants en fonction de ses priorités et des priorités des threads concurrents sur ces processeurs.</span><span class="sxs-lookup"><span data-stu-id="62d3a-117">If a thread is assigned to multiple valid CPU Sets, it will run on one of the corresponding processors according to its priorities and the priorities of competing threads on those processors.</span></span>

<span data-ttu-id="62d3a-118">**Fonctions/énumérations/structures de l’ensemble d’UC**</span><span class="sxs-lookup"><span data-stu-id="62d3a-118">**CPU Set Functions/Enumerations/Structures**</span></span>

-   <span data-ttu-id="62d3a-119">[**GetProcessDefaultCpuSets**](getprocessdefaultcpusets.md) fonction)</span><span class="sxs-lookup"><span data-stu-id="62d3a-119">[**GetProcessDefaultCpuSets**](getprocessdefaultcpusets.md) function</span></span>
-   <span data-ttu-id="62d3a-120">[**GetSystemCpuSetInformation**](getsystemcpusetinformation.md) fonction)</span><span class="sxs-lookup"><span data-stu-id="62d3a-120">[**GetSystemCpuSetInformation**](getsystemcpusetinformation.md) function</span></span>
-   <span data-ttu-id="62d3a-121">[**GetThreadSelectedCpuSets**](getthreadselectedcpusets.md) fonction)</span><span class="sxs-lookup"><span data-stu-id="62d3a-121">[**GetThreadSelectedCpuSets**](getthreadselectedcpusets.md) function</span></span>
-   <span data-ttu-id="62d3a-122">[**SetProcessDefaultCpuSets**](setprocessdefaultcpusets.md) fonction)</span><span class="sxs-lookup"><span data-stu-id="62d3a-122">[**SetProcessDefaultCpuSets**](setprocessdefaultcpusets.md) function</span></span>
-   <span data-ttu-id="62d3a-123">[**SetThreadSelectedCpuSets**](setthreadselectedcpusets.md) fonction)</span><span class="sxs-lookup"><span data-stu-id="62d3a-123">[**SetThreadSelectedCpuSets**](setthreadselectedcpusets.md) function</span></span>
-   <span data-ttu-id="62d3a-124">[**Processeur \_ DÉFINIR \_ \_**](cpu-set-information-type.md) l’énumération des types d’informations</span><span class="sxs-lookup"><span data-stu-id="62d3a-124">[**CPU\_SET\_INFORMATION\_TYPE**](cpu-set-information-type.md) enumeration</span></span>
-   <span data-ttu-id="62d3a-125">[**Système \_ Structure \_ des \_ informations du jeu de processeurs**](/windows/desktop/api/winnt/ns-winnt-system_cpu_set_information)</span><span class="sxs-lookup"><span data-stu-id="62d3a-125">[**SYSTEM\_CPU\_SET\_INFORMATION**](/windows/desktop/api/winnt/ns-winnt-system_cpu_set_information) structure</span></span>

 

 



