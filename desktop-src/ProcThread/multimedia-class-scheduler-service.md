---
description: Le service Planificateur de classes multimédias (MMCSS) permet aux applications multimédias de s’assurer que leur traitement qui respecte le temps reçoit un accès prioritaire aux ressources du processeur.
ms.assetid: a7169938-1c72-4c4c-881a-cb08ad6182c7
title: Service Planificateur de classes multimédias
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 80656276af30495c084d0964534a04e11896bcd2
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/03/2021
ms.locfileid: "103953382"
---
# <a name="multimedia-class-scheduler-service"></a><span data-ttu-id="5a421-103">Service Planificateur de classes multimédias</span><span class="sxs-lookup"><span data-stu-id="5a421-103">Multimedia Class Scheduler Service</span></span>

<span data-ttu-id="5a421-104">Le service Planificateur de classes multimédias (MMCSS) permet aux applications multimédias de s’assurer que leur traitement qui respecte le temps reçoit un accès prioritaire aux ressources du processeur.</span><span class="sxs-lookup"><span data-stu-id="5a421-104">The Multimedia Class Scheduler service (MMCSS) enables multimedia applications to ensure that their time-sensitive processing receives prioritized access to CPU resources.</span></span> <span data-ttu-id="5a421-105">Ce service permet aux applications multimédias d’utiliser la plus grande partie du processeur, sans avoir à refuser les ressources du processeur aux applications de faible priorité.</span><span class="sxs-lookup"><span data-stu-id="5a421-105">This service enables multimedia applications to utilize as much of the CPU as possible without denying CPU resources to lower-priority applications.</span></span>

<span data-ttu-id="5a421-106">MMCSS utilise les informations stockées dans le registre pour identifier les tâches prises en charge et déterminer la priorité relative des threads effectuant ces tâches.</span><span class="sxs-lookup"><span data-stu-id="5a421-106">MMCSS uses information stored in the registry to identify supported tasks and determine the relative priority of threads performing these tasks.</span></span> <span data-ttu-id="5a421-107">Chaque thread qui effectue un travail lié à une tâche particulière appelle la fonction [**AvSetMmMaxThreadCharacteristics**](/windows/desktop/api/Avrt/nf-avrt-avsetmmmaxthreadcharacteristicsa) ou [**AVSETMMTHREADCHARACTERISTICS**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadcharacteristicsa) pour informer MMCSS qu’il travaille sur cette tâche.</span><span class="sxs-lookup"><span data-stu-id="5a421-107">Each thread that is performing work related to a particular task calls the [**AvSetMmMaxThreadCharacteristics**](/windows/desktop/api/Avrt/nf-avrt-avsetmmmaxthreadcharacteristicsa) or [**AvSetMmThreadCharacteristics**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadcharacteristicsa) function to inform MMCSS that it is working on that task.</span></span>

<span data-ttu-id="5a421-108">Pour obtenir un exemple de programme qui utilise MMCSS, consultez [flux en mode exclusif](/previous-versions//bb614507(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="5a421-108">For an example of a program that uses MMCSS, see [Exclusive-Mode Streams](/previous-versions//bb614507(v=vs.85)).</span></span>

<span data-ttu-id="5a421-109">**Windows Server 2003 et Windows XP :** MMCSS n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="5a421-109">**Windows Server 2003 and Windows XP:** MMCSS is not available.</span></span>

## <a name="registry-settings"></a><span data-ttu-id="5a421-110">Paramètres du Registre</span><span class="sxs-lookup"><span data-stu-id="5a421-110">Registry Settings</span></span>

<span data-ttu-id="5a421-111">Les paramètres MMCSS sont stockés dans la clé de Registre suivante :</span><span class="sxs-lookup"><span data-stu-id="5a421-111">The MMCSS settings are stored in the following registry key:</span></span>

<span data-ttu-id="5a421-112">**HKEY \_ local \_ machine \\ Software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Multimedia \\ SystemProfile**</span><span class="sxs-lookup"><span data-stu-id="5a421-112">**HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Multimedia\\SystemProfile**</span></span>

<span data-ttu-id="5a421-113">Cette clé contient une valeur **reg \_ DWORD** nommée **SystemResponsiveness** qui détermine le pourcentage de ressources du processeur qui doivent être garanties pour les tâches de faible priorité.</span><span class="sxs-lookup"><span data-stu-id="5a421-113">This key contains a **REG\_DWORD** value named **SystemResponsiveness** that determines the percentage of CPU resources that should be guaranteed to low-priority tasks.</span></span> <span data-ttu-id="5a421-114">Par exemple, si cette valeur est de 20, alors 20% des ressources du processeur sont réservées aux tâches de faible priorité.</span><span class="sxs-lookup"><span data-stu-id="5a421-114">For example, if this value is 20, then 20% of CPU resources are reserved for low-priority tasks.</span></span> <span data-ttu-id="5a421-115">Notez que les valeurs qui ne sont pas divisibles uniformément par 10 sont arrondies au multiple le plus proche de 10.</span><span class="sxs-lookup"><span data-stu-id="5a421-115">Note that values that are not evenly divisible by 10 are rounded up to the nearest multiple of 10.</span></span> <span data-ttu-id="5a421-116">La valeur 0 est également considérée comme 10.</span><span class="sxs-lookup"><span data-stu-id="5a421-116">A value of 0 is also treated as 10.</span></span>

<span data-ttu-id="5a421-117">La clé contient également une sous-clé nommée **Tasks** qui contient la liste des tâches.</span><span class="sxs-lookup"><span data-stu-id="5a421-117">The key also contains a subkey named **Tasks** that contains the list of tasks.</span></span> <span data-ttu-id="5a421-118">Par défaut, Windows prend en charge les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="5a421-118">By default, Windows supports the following tasks:</span></span>

-   <span data-ttu-id="5a421-119">**Audio**</span><span class="sxs-lookup"><span data-stu-id="5a421-119">**Audio**</span></span>
-   <span data-ttu-id="5a421-120">**Capture**</span><span class="sxs-lookup"><span data-stu-id="5a421-120">**Capture**</span></span>
-   <span data-ttu-id="5a421-121">**Distribution**</span><span class="sxs-lookup"><span data-stu-id="5a421-121">**Distribution**</span></span>
-   <span data-ttu-id="5a421-122">**Jeux**</span><span class="sxs-lookup"><span data-stu-id="5a421-122">**Games**</span></span>
-   <span data-ttu-id="5a421-123">**Lecture**</span><span class="sxs-lookup"><span data-stu-id="5a421-123">**Playback**</span></span>
-   <span data-ttu-id="5a421-124">**Audio Pro**</span><span class="sxs-lookup"><span data-stu-id="5a421-124">**Pro Audio**</span></span>
-   <span data-ttu-id="5a421-125">**Gestionnaire de fenêtres**</span><span class="sxs-lookup"><span data-stu-id="5a421-125">**Window Manager**</span></span>

<span data-ttu-id="5a421-126">Les OEM peuvent ajouter des tâches supplémentaires selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="5a421-126">OEMs can add additional tasks as required.</span></span>

<span data-ttu-id="5a421-127">Chaque clé de tâche contient l’ensemble de valeurs suivant qui représentent les caractéristiques à appliquer aux threads associés à la tâche.</span><span class="sxs-lookup"><span data-stu-id="5a421-127">Each task key contains the following set of values that represent characteristics to be applied to threads that are associated with the task.</span></span>

| <span data-ttu-id="5a421-128">Valeur</span><span class="sxs-lookup"><span data-stu-id="5a421-128">Value</span></span>                   | <span data-ttu-id="5a421-129">Format</span><span class="sxs-lookup"><span data-stu-id="5a421-129">Format</span></span>         | <span data-ttu-id="5a421-130">Valeurs possibles</span><span class="sxs-lookup"><span data-stu-id="5a421-130">Possible values</span></span>                                                                                                                                                                                                                                                                                                                                                         |
|-------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5a421-131">**Affinité**</span><span class="sxs-lookup"><span data-stu-id="5a421-131">**Affinity**</span></span>            | <span data-ttu-id="5a421-132">**\_valeur DWORD reg**</span><span class="sxs-lookup"><span data-stu-id="5a421-132">**REG\_DWORD**</span></span> | <span data-ttu-id="5a421-133">Masque de masque qui indique l’affinité du processeur.</span><span class="sxs-lookup"><span data-stu-id="5a421-133">A bitmask that indicates the processor affinity.</span></span> <span data-ttu-id="5a421-134">0x00 et 0xFFFFFFFF indiquent que l’affinité du processeur n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="5a421-134">Both 0x00 and 0xFFFFFFFF indicate that processor affinity is not used.</span></span>                                                                                                                                                                                                                                                 |
| <span data-ttu-id="5a421-135">**Arrière-plan uniquement**</span><span class="sxs-lookup"><span data-stu-id="5a421-135">**Background Only**</span></span>     | <span data-ttu-id="5a421-136">**SZ de REG \_**</span><span class="sxs-lookup"><span data-stu-id="5a421-136">**REG\_SZ**</span></span>    | <span data-ttu-id="5a421-137">Indique s’il s’agit d’une tâche en arrière-plan (sans interface utilisateur).</span><span class="sxs-lookup"><span data-stu-id="5a421-137">Indicates whether this is a background task (no user interface).</span></span> <span data-ttu-id="5a421-138">Les threads d’une tâche en arrière-plan ne changent pas en raison d’une modification du focus de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="5a421-138">The threads of a background task do not change because of a change in window focus.</span></span> <span data-ttu-id="5a421-139">Cette valeur peut être définie sur true ou false.</span><span class="sxs-lookup"><span data-stu-id="5a421-139">This value can be set to True or False.</span></span>                                                                                                                                                                            |
| <span data-ttu-id="5a421-140">**BackgroundPriority**</span><span class="sxs-lookup"><span data-stu-id="5a421-140">**BackgroundPriority**</span></span>  | <span data-ttu-id="5a421-141">**\_valeur DWORD reg**</span><span class="sxs-lookup"><span data-stu-id="5a421-141">**REG\_DWORD**</span></span> | <span data-ttu-id="5a421-142">Priorité d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="5a421-142">The background priority.</span></span> <span data-ttu-id="5a421-143">La plage de valeurs est 1-8.</span><span class="sxs-lookup"><span data-stu-id="5a421-143">The range of values is 1-8.</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="5a421-144">**Fréquence d’horloge**</span><span class="sxs-lookup"><span data-stu-id="5a421-144">**Clock Rate**</span></span>          | <span data-ttu-id="5a421-145">**\_valeur DWORD reg**</span><span class="sxs-lookup"><span data-stu-id="5a421-145">**REG\_DWORD**</span></span> | <span data-ttu-id="5a421-146">Indicateur utilisé par MMCSS pour déterminer la granularité de la planification des ressources du processeur. **Windows Server 2008 et Windows Vista :** Taux d’horloge maximal garanti que le système utilise si un thread rejoint cette tâche, en intervalles de 100 nanosecondes.</span><span class="sxs-lookup"><span data-stu-id="5a421-146">A hint used by MMCSS to determine the granularity of processor resource scheduling.**Windows Server 2008 and Windows Vista:** The maximum guaranteed clock rate the system uses if a thread joins this task, in 100-nanosecond intervals.</span></span> <span data-ttu-id="5a421-147">À compter de Windows 7 et de Windows Server 2008 R2, cette garantie a été supprimée pour réduire la consommation d’énergie du système.</span><span class="sxs-lookup"><span data-stu-id="5a421-147">Starting with Windows 7 and Windows Server 2008 R2, this guarantee was removed to reduce system power consumption.</span></span><br/> |
| <span data-ttu-id="5a421-148">**Priorité GPU**</span><span class="sxs-lookup"><span data-stu-id="5a421-148">**GPU Priority**</span></span>        | <span data-ttu-id="5a421-149">**\_valeur DWORD reg**</span><span class="sxs-lookup"><span data-stu-id="5a421-149">**REG\_DWORD**</span></span> | <span data-ttu-id="5a421-150">Priorité du GPU.</span><span class="sxs-lookup"><span data-stu-id="5a421-150">The GPU priority.</span></span> <span data-ttu-id="5a421-151">La plage de valeurs est 0-31.</span><span class="sxs-lookup"><span data-stu-id="5a421-151">The range of values is 0-31.</span></span> <span data-ttu-id="5a421-152">Cette priorité n’est pas encore utilisée.</span><span class="sxs-lookup"><span data-stu-id="5a421-152">This priority is not yet used.</span></span>                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="5a421-153">**Priorité**</span><span class="sxs-lookup"><span data-stu-id="5a421-153">**Priority**</span></span>            | <span data-ttu-id="5a421-154">**\_valeur DWORD reg**</span><span class="sxs-lookup"><span data-stu-id="5a421-154">**REG\_DWORD**</span></span> | <span data-ttu-id="5a421-155">Priorité de la tâche.</span><span class="sxs-lookup"><span data-stu-id="5a421-155">The task priority.</span></span> <span data-ttu-id="5a421-156">La plage de valeurs est comprise entre 1 (faible) et 8 (élevé). Pour les tâches dont la **catégorie de planification** est élevée, cette valeur est toujours traitée comme 2.</span><span class="sxs-lookup"><span data-stu-id="5a421-156">The range of values is 1 (low) to 8 (high).For tasks with a **Scheduling Category** of High, this value is always treated as 2.</span></span><br/>                                                                                                                                                                                                           |
| <span data-ttu-id="5a421-157">**Catégorie de planification**</span><span class="sxs-lookup"><span data-stu-id="5a421-157">**Scheduling Category**</span></span> | <span data-ttu-id="5a421-158">**SZ de REG \_**</span><span class="sxs-lookup"><span data-stu-id="5a421-158">**REG\_SZ**</span></span>    | <span data-ttu-id="5a421-159">Catégorie de planification.</span><span class="sxs-lookup"><span data-stu-id="5a421-159">The scheduling category.</span></span> <span data-ttu-id="5a421-160">Cette valeur peut être définie sur élevé, moyen ou faible.</span><span class="sxs-lookup"><span data-stu-id="5a421-160">This value can be set to High, Medium, or Low.</span></span>                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="5a421-161">**Priorité SFIO**</span><span class="sxs-lookup"><span data-stu-id="5a421-161">**SFIO Priority**</span></span>       | <span data-ttu-id="5a421-162">**SZ de REG \_**</span><span class="sxs-lookup"><span data-stu-id="5a421-162">**REG\_SZ**</span></span>    | <span data-ttu-id="5a421-163">Priorité d’e/s planifiée.</span><span class="sxs-lookup"><span data-stu-id="5a421-163">The scheduled I/O priority.</span></span> <span data-ttu-id="5a421-164">Cette valeur peut être définie sur inactif, faible, normale ou élevée.</span><span class="sxs-lookup"><span data-stu-id="5a421-164">This value can be set to Idle, Low, Normal, or High.</span></span> <span data-ttu-id="5a421-165">Cette valeur n'est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="5a421-165">This value is not used.</span></span>                                                                                                                                                                                                                                                                |



 

> [!Note]  
> <span data-ttu-id="5a421-166">Pour économiser de l’énergie, les applications ne doivent pas définir la résolution du minuteur à l’échelle du système sur une petite valeur, sauf si cela est absolument nécessaire.</span><span class="sxs-lookup"><span data-stu-id="5a421-166">To conserve power, applications should not set the resolution of the system-wide timer to a small value unless absolutely necessary.</span></span> <span data-ttu-id="5a421-167">Pour plus d’informations, consultez [performances](../win7devguide/performance.md) dans le [Guide des développeurs Windows 7](../win7devguide/windows-7-developer-guide.md).</span><span class="sxs-lookup"><span data-stu-id="5a421-167">For more information, see [Performance](../win7devguide/performance.md) in the [Windows 7 Developers Guide](../win7devguide/windows-7-developer-guide.md).</span></span>

 

## <a name="thread-priorities"></a><span data-ttu-id="5a421-168">Priorités des threads</span><span class="sxs-lookup"><span data-stu-id="5a421-168">Thread Priorities</span></span>

<span data-ttu-id="5a421-169">Le MMCSS augmente la priorité des threads qui travaillent sur des tâches multimédias de haute priorité.</span><span class="sxs-lookup"><span data-stu-id="5a421-169">The MMCSS boosts the priority of threads that are working on high-priority multimedia tasks.</span></span>

<span data-ttu-id="5a421-170">MMCSS détermine la priorité d’un thread à l’aide des facteurs suivants :</span><span class="sxs-lookup"><span data-stu-id="5a421-170">MMCSS determines the priority of a thread using the following factors:</span></span>

-   <span data-ttu-id="5a421-171">Priorité de base de la tâche.</span><span class="sxs-lookup"><span data-stu-id="5a421-171">The base priority of the task.</span></span>
-   <span data-ttu-id="5a421-172">Paramètre *Priority* de la fonction [**AvSetMmThreadPriority**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadpriority) .</span><span class="sxs-lookup"><span data-stu-id="5a421-172">The *Priority* parameter of the [**AvSetMmThreadPriority**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadpriority) function.</span></span>
-   <span data-ttu-id="5a421-173">Indique si l’application est au premier plan.</span><span class="sxs-lookup"><span data-stu-id="5a421-173">Whether the application is in the foreground.</span></span>
-   <span data-ttu-id="5a421-174">La quantité de temps processeur consommée par les threads dans chaque catégorie.</span><span class="sxs-lookup"><span data-stu-id="5a421-174">How much CPU time is being consumed by the threads in each category.</span></span>

<span data-ttu-id="5a421-175">MMCSS définit la priorité des threads clients en fonction de leur catégorie de planification.</span><span class="sxs-lookup"><span data-stu-id="5a421-175">MMCSS sets the priority of client threads depending on their scheduling category.</span></span>

| <span data-ttu-id="5a421-176">Category</span><span class="sxs-lookup"><span data-stu-id="5a421-176">Category</span></span> | <span data-ttu-id="5a421-177">Priority</span><span class="sxs-lookup"><span data-stu-id="5a421-177">Priority</span></span> | <span data-ttu-id="5a421-178">Description</span><span class="sxs-lookup"><span data-stu-id="5a421-178">Description</span></span>                                                                                                                               |
|----------|----------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5a421-179">Élevé</span><span class="sxs-lookup"><span data-stu-id="5a421-179">High</span></span>     | <span data-ttu-id="5a421-180">23-26</span><span class="sxs-lookup"><span data-stu-id="5a421-180">23-26</span></span>    | <span data-ttu-id="5a421-181">Ces threads s’exécutent à une priorité de thread inférieure à certaines tâches de niveau système.</span><span class="sxs-lookup"><span data-stu-id="5a421-181">These threads run at a thread priority that is lower than only certain system-level tasks.</span></span> <span data-ttu-id="5a421-182">Cette catégorie est conçue pour les tâches audio pro.</span><span class="sxs-lookup"><span data-stu-id="5a421-182">This category is designed for Pro Audio tasks.</span></span> |
| <span data-ttu-id="5a421-183">Moyenne</span><span class="sxs-lookup"><span data-stu-id="5a421-183">Medium</span></span>   | <span data-ttu-id="5a421-184">16-22</span><span class="sxs-lookup"><span data-stu-id="5a421-184">16-22</span></span>    | <span data-ttu-id="5a421-185">Ces threads font partie de l’application qui se trouve au premier plan.</span><span class="sxs-lookup"><span data-stu-id="5a421-185">These threads are part of the application that is in the foreground.</span></span>                                                                      |
| <span data-ttu-id="5a421-186">Faible</span><span class="sxs-lookup"><span data-stu-id="5a421-186">Low</span></span>      | <span data-ttu-id="5a421-187">8-15</span><span class="sxs-lookup"><span data-stu-id="5a421-187">8-15</span></span>     | <span data-ttu-id="5a421-188">Cette catégorie contient le reste des threads.</span><span class="sxs-lookup"><span data-stu-id="5a421-188">This category contains the remainder of the threads.</span></span> <span data-ttu-id="5a421-189">Ils garantissent un pourcentage minimal de ressources du processeur, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="5a421-189">They are guaranteed a minimum percentage of the CPU resources if required.</span></span>           |
|          | <span data-ttu-id="5a421-190">1-7</span><span class="sxs-lookup"><span data-stu-id="5a421-190">1-7</span></span>      | <span data-ttu-id="5a421-191">Ces threads ont utilisé leur quota de ressources processeur.</span><span class="sxs-lookup"><span data-stu-id="5a421-191">These threads have used their quota of CPU resource.</span></span> <span data-ttu-id="5a421-192">Ils peuvent continuer à s’exécuter si aucun thread de faible priorité n’est prêt à s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="5a421-192">They can continue to run if no low-priority threads are ready to run.</span></span>                |



 

 

 
