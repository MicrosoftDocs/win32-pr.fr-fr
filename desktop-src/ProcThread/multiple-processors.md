---
description: 'Les ordinateurs avec plusieurs processeurs sont généralement conçus pour l’une des deux architectures : l’accès mémoire non uniforme (NUMA) ou le multitraitement symétrique (SMP).'
ms.assetid: 3c9186c8-a54d-4536-8237-bfff78cc7d11
title: Plusieurs processeurs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0093404a0df653a153823915f1ac72b5e41d50c0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106519109"
---
# <a name="multiple-processors"></a><span data-ttu-id="cb901-103">Plusieurs processeurs</span><span class="sxs-lookup"><span data-stu-id="cb901-103">Multiple Processors</span></span>

<span data-ttu-id="cb901-104">Les ordinateurs avec plusieurs processeurs sont généralement conçus pour l’une des deux architectures : l’accès mémoire non uniforme (NUMA) ou le multitraitement symétrique (SMP).</span><span class="sxs-lookup"><span data-stu-id="cb901-104">Computers with multiple processors are typically designed for one of two architectures: non-uniform memory access (NUMA) or symmetric multiprocessing (SMP).</span></span>

<span data-ttu-id="cb901-105">Dans un ordinateur NUMA, chaque processeur est plus proche de certaines parties de la mémoire que d’autres, ce qui rend l’accès à la mémoire plus rapide pour certaines parties de la mémoire que d’autres parties.</span><span class="sxs-lookup"><span data-stu-id="cb901-105">In a NUMA computer, each processor is closer to some parts of memory than others, making memory access faster for some parts of memory than other parts.</span></span> <span data-ttu-id="cb901-106">Dans le modèle NUMA, le système tente de planifier les threads sur les processeurs qui sont proches de la mémoire utilisée.</span><span class="sxs-lookup"><span data-stu-id="cb901-106">Under the NUMA model, the system attempts to schedule threads on processors that are close to the memory being used.</span></span> <span data-ttu-id="cb901-107">Pour plus d’informations sur NUMA, consultez [prise en charge de Numa](numa-support.md).</span><span class="sxs-lookup"><span data-stu-id="cb901-107">For more information about NUMA, see [NUMA Support](numa-support.md).</span></span>

<span data-ttu-id="cb901-108">Dans un ordinateur SMP, deux ou plusieurs processeurs ou cœurs identiques se connectent à une seule mémoire principale partagée.</span><span class="sxs-lookup"><span data-stu-id="cb901-108">In an SMP computer, two or more identical processors or cores connect to a single shared main memory.</span></span> <span data-ttu-id="cb901-109">Dans le modèle SMP, tout thread peut être attribué à n’importe quel processeur.</span><span class="sxs-lookup"><span data-stu-id="cb901-109">Under the SMP model, any thread can be assigned to any processor.</span></span> <span data-ttu-id="cb901-110">Par conséquent, la planification de threads sur un ordinateur SMP est similaire à la planification de threads sur un ordinateur avec un seul processeur.</span><span class="sxs-lookup"><span data-stu-id="cb901-110">Therefore, scheduling threads on an SMP computer is similar to scheduling threads on a computer with a single processor.</span></span> <span data-ttu-id="cb901-111">Toutefois, le planificateur a un pool de processeurs, afin qu’il puisse planifier l’exécution simultanée de threads.</span><span class="sxs-lookup"><span data-stu-id="cb901-111">However, the scheduler has a pool of processors, so that it can schedule threads to run concurrently.</span></span> <span data-ttu-id="cb901-112">La planification est toujours déterminée par la priorité des threads, mais elle peut être influencée par la définition de l’affinité de thread et du processeur idéal pour les threads, comme indiqué dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="cb901-112">Scheduling is still determined by thread priority, but it can be influenced by setting thread affinity and thread ideal processor, as discussed in this topic.</span></span>

## <a name="thread-affinity"></a><span data-ttu-id="cb901-113">Affinité de thread</span><span class="sxs-lookup"><span data-stu-id="cb901-113">Thread Affinity</span></span>

<span data-ttu-id="cb901-114">L' *affinité de thread* force l’exécution d’un thread sur un sous-ensemble spécifique de processeurs.</span><span class="sxs-lookup"><span data-stu-id="cb901-114">*Thread affinity* forces a thread to run on a specific subset of processors.</span></span> <span data-ttu-id="cb901-115">La définition de l’affinité de thread doit généralement être évitée, car elle peut interférer avec la capacité du planificateur à planifier efficacement les threads entre les processeurs.</span><span class="sxs-lookup"><span data-stu-id="cb901-115">Setting thread affinity should generally be avoided, because it can interfere with the scheduler's ability to schedule threads effectively across processors.</span></span> <span data-ttu-id="cb901-116">Cela peut réduire les gains de performances générés par le traitement parallèle.</span><span class="sxs-lookup"><span data-stu-id="cb901-116">This can decrease the performance gains produced by parallel processing.</span></span> <span data-ttu-id="cb901-117">Une utilisation appropriée de l’affinité de thread consiste à tester chaque processeur.</span><span class="sxs-lookup"><span data-stu-id="cb901-117">An appropriate use of thread affinity is testing each processor.</span></span>

<span data-ttu-id="cb901-118">Le système représente l’affinité avec un masque de masque appelé masque d’affinité du processeur.</span><span class="sxs-lookup"><span data-stu-id="cb901-118">The system represents affinity with a bitmask called a processor affinity mask.</span></span> <span data-ttu-id="cb901-119">Le masque d’affinité correspond à la taille du nombre maximal de processeurs dans le système, avec les bits définis pour identifier un sous-ensemble de processeurs.</span><span class="sxs-lookup"><span data-stu-id="cb901-119">The affinity mask is the size of the maximum number of processors in the system, with bits set to identify a subset of processors.</span></span> <span data-ttu-id="cb901-120">Initialement, le système détermine le sous-ensemble de processeurs dans le masque.</span><span class="sxs-lookup"><span data-stu-id="cb901-120">Initially, the system determines the subset of processors in the mask.</span></span>

<span data-ttu-id="cb901-121">Vous pouvez obtenir l’affinité de thread actuelle pour tous les threads du processus en appelant la fonction [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="cb901-121">You can obtain the current thread affinity for all threads of the process by calling the [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) function.</span></span> <span data-ttu-id="cb901-122">Utilisez la fonction [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) pour spécifier l’affinité de thread pour tous les threads du processus.</span><span class="sxs-lookup"><span data-stu-id="cb901-122">Use the [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) function to specify thread affinity for all threads of the process.</span></span> <span data-ttu-id="cb901-123">Pour définir l’affinité de thread pour un seul thread, utilisez la fonction [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="cb901-123">To set the thread affinity for a single thread, use the [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) function.</span></span> <span data-ttu-id="cb901-124">L’affinité de thread doit être un sous-ensemble de l’affinité de processus.</span><span class="sxs-lookup"><span data-stu-id="cb901-124">The thread affinity must be a subset of the process affinity.</span></span>

<span data-ttu-id="cb901-125">Sur les systèmes dotés de plus de 64 processeurs, le masque d’affinité représente initialement des processeurs dans un seul groupe de processeurs.</span><span class="sxs-lookup"><span data-stu-id="cb901-125">On systems with more than 64 processors, the affinity mask initially represents processors in a single processor group.</span></span> <span data-ttu-id="cb901-126">Toutefois, l’affinité de thread peut être définie sur un processeur d’un autre groupe, ce qui modifie le masque d’affinité du processus.</span><span class="sxs-lookup"><span data-stu-id="cb901-126">However, thread affinity can be set to a processor in a different group, which alters the affinity mask for the process.</span></span> <span data-ttu-id="cb901-127">Pour plus d’informations, consultez [groupes de processeurs](processor-groups.md).</span><span class="sxs-lookup"><span data-stu-id="cb901-127">For more information, see [Processor Groups](processor-groups.md).</span></span>

## <a name="thread-ideal-processor"></a><span data-ttu-id="cb901-128">Processeur idéal pour les threads</span><span class="sxs-lookup"><span data-stu-id="cb901-128">Thread Ideal Processor</span></span>

<span data-ttu-id="cb901-129">Lorsque vous spécifiez un *processeur idéal pour les threads*, le planificateur exécute le thread sur le processeur spécifié lorsque cela est possible.</span><span class="sxs-lookup"><span data-stu-id="cb901-129">When you specify a *thread ideal processor*, the scheduler runs the thread on the specified processor when possible.</span></span> <span data-ttu-id="cb901-130">Utilisez la fonction [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) pour spécifier un processeur préféré pour un thread.</span><span class="sxs-lookup"><span data-stu-id="cb901-130">Use the [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) function to specify a preferred processor for a thread.</span></span> <span data-ttu-id="cb901-131">Cela ne garantit pas que le processeur idéal sera choisi, mais qu’il fournit un conseil utile au planificateur.</span><span class="sxs-lookup"><span data-stu-id="cb901-131">This does not guarantee that the ideal processor will be chosen but provides a useful hint to the scheduler.</span></span> <span data-ttu-id="cb901-132">Sur les systèmes dotés de plus de 64 processeurs, vous pouvez utiliser la fonction [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) pour spécifier un processeur préféré dans un groupe de processeurs spécifique.</span><span class="sxs-lookup"><span data-stu-id="cb901-132">On systems with more than 64 processors, you can use the [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) function to specify a preferred processor in a specific processor group.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cb901-133">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="cb901-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cb901-134">Prise en charge de NUMA</span><span class="sxs-lookup"><span data-stu-id="cb901-134">NUMA Support</span></span>](numa-support.md)
</dt> <dt>

[<span data-ttu-id="cb901-135">Groupes de processeurs</span><span class="sxs-lookup"><span data-stu-id="cb901-135">Processor Groups</span></span>](processor-groups.md)
</dt> </dl>

 

 
