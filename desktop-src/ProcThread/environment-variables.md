---
description: 'Chaque processus a un bloc d’environnement qui contient un ensemble de variables d’environnement et leurs valeurs. Il existe deux types de variables d’environnement : les variables d’environnement utilisateur (définies pour chaque utilisateur) et les variables d’environnement système (définies pour tout le monde).'
ms.assetid: 6732b12f-ced1-4769-b947-79da8fd2237a
title: Variables d'environnement
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f50226d12286d01c77025d1cc38e33e2778392a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106524645"
---
# <a name="environment-variables"></a><span data-ttu-id="748b5-104">Variables d'environnement</span><span class="sxs-lookup"><span data-stu-id="748b5-104">Environment Variables</span></span>

<span data-ttu-id="748b5-105">Chaque processus a un bloc d’environnement qui contient un ensemble de variables d’environnement et leurs valeurs.</span><span class="sxs-lookup"><span data-stu-id="748b5-105">Every process has an environment block that contains a set of environment variables and their values.</span></span> <span data-ttu-id="748b5-106">Il existe deux types de variables d’environnement : les variables d’environnement utilisateur (définies pour chaque utilisateur) et les variables d’environnement système (définies pour tout le monde).</span><span class="sxs-lookup"><span data-stu-id="748b5-106">There are two types of environment variables: user environment variables (set for each user) and system environment variables (set for everyone).</span></span>

<span data-ttu-id="748b5-107">Par défaut, un processus enfant hérite des variables d’environnement de son processus parent.</span><span class="sxs-lookup"><span data-stu-id="748b5-107">By default, a child process inherits the environment variables of its parent process.</span></span> <span data-ttu-id="748b5-108">Les programmes démarrés par le processeur de commande héritent des variables d’environnement du processeur de commandes.</span><span class="sxs-lookup"><span data-stu-id="748b5-108">Programs started by the command processor inherit the command processor's environment variables.</span></span> <span data-ttu-id="748b5-109">Pour spécifier un environnement différent pour un processus enfant, créez un bloc d’environnement et transmettez un pointeur vers celui-ci en tant que paramètre de la fonction [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) .</span><span class="sxs-lookup"><span data-stu-id="748b5-109">To specify a different environment for a child process, create a new environment block and pass a pointer to it as a parameter to the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function.</span></span>

<span data-ttu-id="748b5-110">Le processeur de commande fournit la commande **Set** pour afficher son bloc d’environnement ou pour créer de nouvelles variables d’environnement.</span><span class="sxs-lookup"><span data-stu-id="748b5-110">The command processor provides the **set** command to display its environment block or to create new environment variables.</span></span> <span data-ttu-id="748b5-111">Vous pouvez également afficher ou modifier les variables d’environnement en sélectionnant **système** dans le **panneau** de configuration, en sélectionnant **paramètres système avancés** et en cliquant sur **variables d’environnement**.</span><span class="sxs-lookup"><span data-stu-id="748b5-111">You can also view or modify the environment variables by selecting **System** from the **Control Panel**, selecting **Advanced system settings**, and clicking **Environment Variables**.</span></span>

<span data-ttu-id="748b5-112">Chaque bloc d’environnement contient les variables d’environnement au format suivant :</span><span class="sxs-lookup"><span data-stu-id="748b5-112">Each environment block contains the environment variables in the following format:</span></span><dl> <span data-ttu-id="748b5-113">*Var1* = *Valeur1* \\ entre</span><span class="sxs-lookup"><span data-stu-id="748b5-113">*Var1*=*Value1*\\0</span></span>  
<span data-ttu-id="748b5-114">*Var2* = *Valeur2* \\ entre</span><span class="sxs-lookup"><span data-stu-id="748b5-114">*Var2*=*Value2*\\0</span></span>  
<span data-ttu-id="748b5-115">*Var3* = *Valeur3* \\ entre</span><span class="sxs-lookup"><span data-stu-id="748b5-115">*Var3*=*Value3*\\0</span></span>  
<span data-ttu-id="748b5-116">...</span><span class="sxs-lookup"><span data-stu-id="748b5-116">...</span></span>  
<span data-ttu-id="748b5-117">*VarN* = *ValeurN* \\ 0 \\ 0</span><span class="sxs-lookup"><span data-stu-id="748b5-117">*VarN*=*ValueN*\\0\\0</span></span>  
</dl>

<span data-ttu-id="748b5-118">Le nom d’une variable d’environnement ne peut pas inclure un signe égal (=).</span><span class="sxs-lookup"><span data-stu-id="748b5-118">The name of an environment variable cannot include an equal sign (=).</span></span>

<span data-ttu-id="748b5-119">La fonction [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) retourne un pointeur vers le bloc d’environnement du processus appelant.</span><span class="sxs-lookup"><span data-stu-id="748b5-119">The [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) function returns a pointer to the environment block of the calling process.</span></span> <span data-ttu-id="748b5-120">Ce doit être traité comme un bloc en lecture seule ; ne le modifiez pas directement.</span><span class="sxs-lookup"><span data-stu-id="748b5-120">This should be treated as a read-only block; do not modify it directly.</span></span> <span data-ttu-id="748b5-121">Utilisez plutôt la fonction [**SetEnvironmentVariable ne contient**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) pour modifier une variable d’environnement.</span><span class="sxs-lookup"><span data-stu-id="748b5-121">Instead, use the [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) function to change an environment variable.</span></span> <span data-ttu-id="748b5-122">Lorsque vous avez terminé avec le bloc d’environnement obtenu à partir de **GetEnvironmentStrings**, appelez la fonction [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) pour libérer le bloc.</span><span class="sxs-lookup"><span data-stu-id="748b5-122">When you are finished with the environment block obtained from **GetEnvironmentStrings**, call the [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) function to free the block.</span></span>

<span data-ttu-id="748b5-123">L’appel de [**SetEnvironmentVariable ne contient**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) n’a aucun effet sur les variables d’environnement système.</span><span class="sxs-lookup"><span data-stu-id="748b5-123">Calling [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) has no effect on the system environment variables.</span></span> <span data-ttu-id="748b5-124">Pour ajouter ou modifier des variables d’environnement système par programmation, ajoutez-les à la clé de Registre **HKEY \_ local \_ machine \\ System \\ CurrentControlSet \\ Control \\ Session Manager \\ Environment** , puis diffusez un message [**WM \_ SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) avec *lParam* défini sur la chaîne « Environment ».</span><span class="sxs-lookup"><span data-stu-id="748b5-124">To programmatically add or modify system environment variables, add them to the **HKEY\_LOCAL\_MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\Environment** registry key, then broadcast a [**WM\_SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) message with *lParam* set to the string "Environment".</span></span> <span data-ttu-id="748b5-125">Cela permet aux applications, telles que l’interpréteur de commandes, de récupérer vos mises à jour.</span><span class="sxs-lookup"><span data-stu-id="748b5-125">This allows applications, such as the shell, to pick up your updates.</span></span>

<span data-ttu-id="748b5-126">La taille maximale d’une variable d’environnement définie par l’utilisateur est de 32 767 caractères.</span><span class="sxs-lookup"><span data-stu-id="748b5-126">The maximum size of a user-defined environment variable is 32,767 characters.</span></span> <span data-ttu-id="748b5-127">Il n’existe aucune limitation technique quant à la taille du bloc d’environnement.</span><span class="sxs-lookup"><span data-stu-id="748b5-127">There is no technical limitation on the size of the environment block.</span></span> <span data-ttu-id="748b5-128">Toutefois, il existe des limites pratiques en fonction du mécanisme utilisé pour accéder au bloc.</span><span class="sxs-lookup"><span data-stu-id="748b5-128">However, there are practical limits depending on the mechanism used to access the block.</span></span> <span data-ttu-id="748b5-129">Par exemple, un fichier de commandes ne peut pas définir une variable dont la longueur est supérieure à la longueur maximale de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="748b5-129">For example, a batch file cannot set a variable that is longer than the maximum command line length.</span></span>

<span data-ttu-id="748b5-130">**Windows Server 2003 et Windows XP :** La taille maximale du bloc d’environnement pour le processus est de 32 767 caractères.</span><span class="sxs-lookup"><span data-stu-id="748b5-130">**Windows Server 2003 and Windows XP:** The maximum size of the environment block for the process is 32,767 characters.</span></span> <span data-ttu-id="748b5-131">À compter de Windows Vista et de Windows Server 2008, il n’existe aucune limitation technique quant à la taille du bloc d’environnement.</span><span class="sxs-lookup"><span data-stu-id="748b5-131">Starting with Windows Vista and Windows Server 2008, there is no technical limitation on the size of the environment block.</span></span>

<span data-ttu-id="748b5-132">La fonction [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) détermine si une variable spécifiée est définie dans l’environnement du processus appelant et, le cas échéant, quelle est sa valeur.</span><span class="sxs-lookup"><span data-stu-id="748b5-132">The [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) function determines whether a specified variable is defined in the environment of the calling process, and, if so, what its value is.</span></span>

<span data-ttu-id="748b5-133">Pour récupérer une copie du bloc d’environnement pour un utilisateur donné, utilisez la fonction [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) .</span><span class="sxs-lookup"><span data-stu-id="748b5-133">To retrieve a copy of the environment block for a given user, use the [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) function.</span></span>

<span data-ttu-id="748b5-134">Pour développer des chaînes de variable d’environnement, utilisez la fonction [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) .</span><span class="sxs-lookup"><span data-stu-id="748b5-134">To expand environment-variable strings, use the [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="748b5-135">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="748b5-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="748b5-136">Modification des variables d’environnement</span><span class="sxs-lookup"><span data-stu-id="748b5-136">Changing Environment Variables</span></span>](changing-environment-variables.md)
</dt> <dt>

[<span data-ttu-id="748b5-137">Variables d’environnement utilisateur</span><span class="sxs-lookup"><span data-stu-id="748b5-137">User Environment Variables</span></span>](../shell/user-environment-variables.md)
</dt> </dl>

 

 
