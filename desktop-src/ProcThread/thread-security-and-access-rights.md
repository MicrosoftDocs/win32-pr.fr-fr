---
description: Microsoft Windows vous permet de contrôler l’accès aux objets thread. Pour plus d’informations sur la sécurité, consultez Access-Control modèle.
ms.assetid: 72709446-5c59-4fac-8dc8-7912906ecc85
title: Sécurité des threads et droits d’accès
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e16b0ac5b4142f819d59775014a82a79a188bdd3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106518676"
---
# <a name="thread-security-and-access-rights"></a>Sécurité des threads et droits d’accès

Microsoft Windows vous permet de contrôler l’accès aux objets thread. Pour plus d’informations sur la sécurité, consultez [modèle de contrôle d’accès](../secauthz/access-control-model.md).

Vous pouvez spécifier un [descripteur de sécurité](../secauthz/security-descriptors.md) pour un thread lorsque vous appelez la fonction [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), [**CreateProcessWithLogonW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw), [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)ou [**CreateRemoteThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) . Si vous spécifiez **null**, le thread obtient un descripteur de sécurité par défaut. Les listes de contrôle d’accès dans le descripteur de sécurité par défaut d’un thread proviennent du jeton principal ou d’emprunt d’identité du créateur.

Pour récupérer le descripteur de sécurité d’un thread, appelez la fonction [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) . Pour modifier le descripteur de sécurité d’un thread, appelez la fonction [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) .

Le handle retourné par la fonction [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) dispose d’un accès **thread \_ All \_** à l’objet thread. Quand vous appelez la fonction [**GetCurrentThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentthread) , le système retourne un pseudohandle avec l’accès maximal que le descripteur de sécurité du thread autorise l’appelant.

Les droits d’accès valides pour les objets thread incluent les [droits d’accès standard](../secauthz/standard-access-rights.md) et certains droits d’accès spécifiques aux threads. Le tableau suivant répertorie les droits d’accès standard utilisés par tous les objets.

| Valeur                           | Signification                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Supprimer** (0x00010000L)        | Requis pour supprimer l’objet.                                                                                                                                                                                                                                                           |
| **Lecture \_ CONTRÔLE** (0x00020000L) | Requis pour lire les informations dans le descripteur de sécurité de l’objet, à l’exclusion des informations contenues dans la liste SACL. Pour lire ou écrire dans la liste SACL, vous devez demander le droit d’accès à la **\_ \_ sécurité du système Access** . Pour plus d’informations, consultez [droit d’accès SACL](../secauthz/sacl-access-right.md). |
| **Synchroniser** (0x00100000L)   | Droit d'utiliser l'objet pour la synchronisation. Cela permet à un thread d’attendre jusqu’à ce que l’objet soit dans l’état signalé.                                                                                                                                                                |
| **Écriture \_ DAC** (0x00040000L)    | Requis pour modifier la liste DACL dans le descripteur de sécurité de l’objet.                                                                                                                                                                                                                   |
| **Écriture \_ PROPRIÉTAIRE** (0x00080000L)  | Requis pour modifier le propriétaire dans le descripteur de sécurité de l’objet.                                                                                                                                                                                                                  |



 

Le tableau suivant répertorie les droits d’accès spécifiques aux threads.



| Valeur                                            | Signification                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Synchroniser** (0x00100000L)                    | Active l’utilisation du handle de thread dans toutes les [fonctions d’attente](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ tout \_ accès**                          | Tous les droits d’accès possibles pour un objet thread. **Windows Server 2003 et Windows XP :** La valeur de l’indicateur d' **\_ \_ accès thread All** a augmenté sur Windows Server 2008 et Windows Vista. Si une application compilée pour Windows Server 2008 et Windows Vista est exécutée sur Windows Server 2003 ou Windows XP, l’indicateur **thread \_ All \_ Access** contient des bits d’accès qui ne sont pas pris en charge et la fonction qui spécifie cet indicateur échoue avec l' **erreur \_ accès \_ refusé**. Pour éviter ce problème, spécifiez l’ensemble minimal de droits d’accès requis pour l’opération. Si vous devez utiliser **\_ tous les \_ accès aux threads** , affectez à **\_ Win32 \_ winnt** le système d’exploitation minimal ciblé par votre application (par exemple, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ). Pour plus d’informations, consultez [utilisation des en-têtes Windows](../winprog/using-the-windows-headers.md). <br/> |
| **Thread \_ \_Emprunt d’identité directe** (0x0200)       | Requis pour un thread serveur qui emprunte l’identité d’un client.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Thread \_ Obtient le \_ contexte** (0x0008)                | Requis pour lire le contexte d’un thread à l’aide de [**GetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Thread \_ Emprunter l’identité** (0x0100)                 | Requis pour utiliser directement les informations de sécurité d’un thread sans les appeler à l’aide d’un mécanisme de communication qui fournit des services d’emprunt d’identité.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Thread \_ \_Informations sur la requête** (0x0040)          | Requis pour lire certaines informations de l’objet thread, telles que le code de sortie (consultez [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Thread \_ \_Informations limitées \_ sur les requêtes** (0x0800) | Requis pour lire certaines informations à partir des objets thread (voir [**GetProcessIdOfThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocessidofthread)). Un handle qui a le droit d’accès aux **\_ \_ informations de requête de thread** reçoit automatiquement des **\_ \_ \_ informations limitées sur les requêtes de thread**.**Windows Server 2003 et Windows XP :** ce droit d’accès n’est pas pris en charge.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Thread \_ DÉFINIR le \_ contexte** (0x0010)                | Requis pour écrire le contexte d’un thread à l’aide de [**SetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Thread \_ DÉFINIR des \_ informations** (0x0020)            | Requis pour définir certaines informations dans l’objet thread.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Thread \_ DÉFINIR \_ des \_ informations limitées** (0x0400)   | Requis pour définir certaines informations dans l’objet thread. Un handle qui a le droit d’accès aux **\_ \_ informations de l’ensemble des threads** reçoit automatiquement les **\_ \_ \_ informations limitées du thread défini**.**Windows Server 2003 et Windows XP :** ce droit d’accès n’est pas pris en charge.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Thread \_ DÉFINIR \_ un \_ jeton de thread** (0x0080)          | Requis pour définir le jeton d’emprunt d’identité d’un thread à l’aide de [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Thread \_ SUSPENDRE la \_ reprise** (0x0002)             | Requis pour suspendre ou reprendre un thread (consultez [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) et [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Thread \_ TERMINATE** (0x0001)                   | Requis pour terminer un thread à l’aide de [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

Vous pouvez demander le droit accès à la **\_ \_ sécurité du système d’accès** à un objet thread si vous souhaitez lire ou écrire la liste SACL de l’objet. Pour plus d’informations, consultez [listes de contrôle d’accès (ACL)](../secauthz/access-control-lists.md) et [droit d’accès SACL](../secauthz/sacl-access-right.md).

## <a name="protected-processes"></a>Processus protégés

Les *processus protégés* améliorent la prise en charge des Rights Management numériques. Le système restreint l’accès aux processus protégés et aux threads de processus protégés.

**Windows Server 2003 et Windows XP :** Les processus protégés ont été ajoutés à partir de Windows Vista.

Les droits d’accès spécifiques suivants ne sont pas autorisés d’un processus aux threads d’un processus protégé :

**THREAD \_ tout \_ accès**  
**emprunt d’identité de THREAD \_ direct \_**  
**\_contexte d’extraction de thread \_**  
**THREAD \_ emprunter l’identité**  
**\_informations sur les requêtes de thread \_**  
**\_contexte du jeu de threads \_**  
**\_informations sur le jeu de threads \_**  
**\_jeton d’ensemble de threads \_**  
**arrêt du THREAD \_**  


Le **droit \_ \_ informations limitées \_ sur les requêtes de thread** a été introduit pour fournir un accès à un sous-ensemble des informations disponibles via les **\_ \_ informations de requête de thread**.

 

 
