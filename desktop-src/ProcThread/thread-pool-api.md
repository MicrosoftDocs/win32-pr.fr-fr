---
description: L’interface de programmation d’applications (API) du pool de threads utilise une conception basée sur un objet.
ms.assetid: c8656469-a273-4838-aa1a-86140b0cd0a2
title: API du pool de threads
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 38e9c267123b24c08d5931e5743a18e94d70d5a9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106534311"
---
# <a name="thread-pool-api"></a>API du pool de threads

L’interface de programmation d’applications (API) du pool de threads utilise une conception basée sur un objet. Chacun des objets suivants est représenté par une structure de données en mode utilisateur :

-   Un objet pool est un ensemble de threads de travail qui peuvent être utilisés pour effectuer un travail. Chaque processus peut créer plusieurs pools isolés avec des caractéristiques différentes, si nécessaire. Il existe également un pool par défaut pour chaque processus.
-   Un groupe de nettoyage est associé à un jeu d’objets de génération de rappels. Il existe des fonctions à attendre et à libérer tous les objets qui sont membres de chaque groupe de nettoyage. Cela permet à l’application d’effectuer le suivi de tous les objets qu’elle a créés.
-   Un objet de travail est affecté à un pool et éventuellement à un groupe de nettoyage. Il peut être publié, provoquant la mise en service d’un thread de travail du pool pour exécuter son rappel. Un objet de travail peut avoir plusieurs publications en suspens ; chaque génère un rappel. L’opération de publication ne peut pas échouer en raison d’un manque de ressources.
-   Un objet Timer contrôle la planification des rappels. Chaque fois qu’un minuteur expire, son rappel est publié dans son pool de travail. La définition d’un minuteur ne peut pas échouer en raison d’un manque de ressources.
-   Un objet Wait provoque l’attente d’un thread d’attente sur un handle qui peut être attendu. Une fois que l’attente est satisfaite ou que le délai d’attente expire, le thread d’attente publie le rappel des objets Wait sur le pool de travail de l’attente. La définition d’une attente ne peut pas échouer en raison d’un manque de ressources.
-   Un objet d’e/s associe un descripteur de fichier au port de terminaison d’e/s pour le pool de threads. Lorsqu’une opération d’e/s asynchrone se termine, un thread de travail récupère l’état de l’opération et appelle le rappel de l’objet d’e/s.

Le tableau suivant décrit les fonctionnalités des API de pool de threads d’origine et actuelles.



| Fonctionnalité              | API d’origine                                                                                                                                                                                                                                                                                                                   | API actuelle                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Synchrone                | [**RegisterWaitForSingleObject**](/windows/win32/api/winbase/nf-winbase-registerwaitforsingleobject)<br/> [**UnregisterWaitEx**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-unregisterwaitex)<br/>                                                                                                                                                                                        | [**CloseThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwait)<br/> [**CreateThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwait)<br/> [**SetThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolwait)<br/> [**WaitForThreadpoolWaitCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolwaitcallbacks)<br/>                                                                                                                                                                                                                                                                                                                   |
| Travail                 | [**QueueUserWorkItem**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-queueuserworkitem)<br/>                                                                                                                                                                                                                                                                      | [**CloseThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwork)<br/> [**CreateThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwork)<br/> [**SubmitThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-submitthreadpoolwork)<br/> [**TrySubmitThreadpoolCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-trysubmitthreadpoolcallback)<br/> [**WaitForThreadpoolWorkCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolworkcallbacks)<br/>                                                                                                                                                                                                                               |
| Minuteur                | [**CreateTimerQueue**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueue)<br/> [**CreateTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueuetimer)<br/> [**ChangeTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-changetimerqueuetimer)<br/> [**DeleteTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueuetimer)<br/> [**DeleteTimerQueueEx**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueueex)<br/> | [**CloseThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpooltimer)<br/> [**CreateThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpooltimer)<br/> [**IsThreadpoolTimerSet**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-isthreadpooltimerset)<br/> [**SetThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpooltimer)<br/> [**WaitForThreadpoolTimerCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooltimercallbacks)<br/>                                                                                                                                                                                                                                           |
| E/S                  | [**BindIoCompletionCallback**](/windows/desktop/api/WinBase/nf-winbase-bindiocompletioncallback)<br/>                                                                                                                                                                                                                                                        | [**CancelThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-cancelthreadpoolio)<br/> [**CloseThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolio)<br/> [**CreateThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolio)<br/> [**StartThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-startthreadpoolio)<br/> [**WaitForThreadpoolIoCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooliocallbacks)<br/>                                                                                                                                                                                                                                                                   |
| Nettoyer le groupe       |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpoolCleanupGroup**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroup)<br/> [**CloseThreadpoolCleanupGroupMembers**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroupmembers)<br/> [**CreateThreadpoolCleanupGroup**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolcleanupgroup)<br/>                                                                                                                                                                                                                                                                                                                                     |
| pool                 |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpool)<br/> [**CreateThreadpool**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpool)<br/> [**SetThreadpoolThreadMaximum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadmaximum)<br/> [**SetThreadpoolThreadMinimum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadminimum)<br/>                                                                                                                                                                                                                                                                                                                         |
| Environnement de rappel |                                                                                                                                                                                                                                                                                                                                | [**DestroyThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-destroythreadpoolenvironment)<br/> [**InitializeThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-initializethreadpoolenvironment)<br/> [**SetThreadpoolCallbackCleanupGroup**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackcleanupgroup)<br/> [**SetThreadpoolCallbackLibrary**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbacklibrary)<br/> [**SetThreadpoolCallbackPool**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpool)<br/> [**SetThreadpoolCallbackPriority**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpriority)<br/> [**SetThreadpoolCallbackRunsLong**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackrunslong)<br/> |
| Rappel             |                                                                                                                                                                                                                                                                                                                                | [**CallbackMayRunLong**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-callbackmayrunlong)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Nettoyage du rappel    |                                                                                                                                                                                                                                                                                                                                | [**DisassociateCurrentThreadFromCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-disassociatecurrentthreadfromcallback)<br/> [**FreeLibraryWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-freelibrarywhencallbackreturns)<br/> [**LeaveCriticalSectionWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-leavecriticalsectionwhencallbackreturns)<br/> [**ReleaseMutexWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasemutexwhencallbackreturns)<br/> [**ReleaseSemaphoreWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasesemaphorewhencallbackreturns)<br/> [**SetEventWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-seteventwhencallbackreturns)<br/>                                 |



 

## <a name="related-topics"></a>Rubriques connexes

<dl> <dt>

[Pools de threads](thread-pools.md)
</dt> <dt>

[Utilisation des fonctions de pool de threads](using-the-thread-pool-functions.md)
</dt> </dl>

 

 
