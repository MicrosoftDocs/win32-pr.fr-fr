---
description: Pour éviter les blocages et les conditions de concurrence, il est nécessaire de synchroniser l’accès de plusieurs threads aux ressources partagées. La synchronisation est également nécessaire pour s’assurer que le code interdépendance est exécuté dans l’ordre approprié.
ms.assetid: 74af0502-dae1-438c-8e4b-7663093b3fe3
title: Synchronisation de l’exécution de plusieurs threads
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c6a1b3dd51d666d507771476792e679f7980fab8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106524215"
---
# <a name="synchronizing-execution-of-multiple-threads"></a><span data-ttu-id="8b892-104">Synchronisation de l’exécution de plusieurs threads</span><span class="sxs-lookup"><span data-stu-id="8b892-104">Synchronizing Execution of Multiple Threads</span></span>

<span data-ttu-id="8b892-105">Pour éviter les blocages et les conditions de concurrence, il est nécessaire de synchroniser l’accès de plusieurs threads aux ressources partagées.</span><span class="sxs-lookup"><span data-stu-id="8b892-105">To avoid race conditions and deadlocks, it is necessary to synchronize access by multiple threads to shared resources.</span></span> <span data-ttu-id="8b892-106">La synchronisation est également nécessaire pour s’assurer que le code interdépendance est exécuté dans l’ordre approprié.</span><span class="sxs-lookup"><span data-stu-id="8b892-106">Synchronization is also necessary to ensure that interdependent code is executed in the proper sequence.</span></span>

<span data-ttu-id="8b892-107">Il existe un certain nombre d’objets dont les descripteurs peuvent être utilisés pour synchroniser plusieurs threads.</span><span class="sxs-lookup"><span data-stu-id="8b892-107">There are a number of objects whose handles can be used to synchronize multiple threads.</span></span> <span data-ttu-id="8b892-108">Ces objets sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="8b892-108">These objects include:</span></span>

-   <span data-ttu-id="8b892-109">Mémoires tampons d’entrée de la console</span><span class="sxs-lookup"><span data-stu-id="8b892-109">Console input buffers</span></span>
-   <span data-ttu-id="8b892-110">Événements</span><span class="sxs-lookup"><span data-stu-id="8b892-110">Events</span></span>
-   <span data-ttu-id="8b892-111">Mutex</span><span class="sxs-lookup"><span data-stu-id="8b892-111">Mutexes</span></span>
-   <span data-ttu-id="8b892-112">Processus</span><span class="sxs-lookup"><span data-stu-id="8b892-112">Processes</span></span>
-   <span data-ttu-id="8b892-113">Sémaphores</span><span class="sxs-lookup"><span data-stu-id="8b892-113">Semaphores</span></span>
-   <span data-ttu-id="8b892-114">Threads</span><span class="sxs-lookup"><span data-stu-id="8b892-114">Threads</span></span>
-   <span data-ttu-id="8b892-115">Minuteurs</span><span class="sxs-lookup"><span data-stu-id="8b892-115">Timers</span></span>

<span data-ttu-id="8b892-116">L’état de chacun de ces objets est signalé ou n’est pas signalé.</span><span class="sxs-lookup"><span data-stu-id="8b892-116">The state of each of these objects is either signaled or not signaled.</span></span> <span data-ttu-id="8b892-117">Lorsque vous spécifiez un handle à l’un de ces objets dans un appel à l’une des [fonctions d’attente](../sync/wait-functions.md), l’exécution du thread appelant est bloquée jusqu’à ce que l’état de l’objet spécifié soit signalé.</span><span class="sxs-lookup"><span data-stu-id="8b892-117">When you specify a handle to any of these objects in a call to one of the [wait functions](../sync/wait-functions.md), the execution of the calling thread is blocked until the state of the specified object becomes signaled.</span></span>

<span data-ttu-id="8b892-118">Certains de ces objets sont utiles pour bloquer un thread jusqu’à ce qu’un événement se produise.</span><span class="sxs-lookup"><span data-stu-id="8b892-118">Some of these objects are useful in blocking a thread until some event occurs.</span></span> <span data-ttu-id="8b892-119">Par exemple, un descripteur de mémoire tampon d’entrée de console est signalé quand il y a une entrée non lue, telle qu’un clic de touche ou de bouton de la souris.</span><span class="sxs-lookup"><span data-stu-id="8b892-119">For example, a console input buffer handle is signaled when there is unread input, such as a keystroke or mouse button click.</span></span> <span data-ttu-id="8b892-120">Les handles de processus et de thread sont signalés lorsque le processus ou le thread se termine.</span><span class="sxs-lookup"><span data-stu-id="8b892-120">Process and thread handles are signaled when the process or thread terminates.</span></span> <span data-ttu-id="8b892-121">Cela permet à un processus, par exemple, de créer un processus enfant, puis de bloquer sa propre exécution jusqu’à la fin du nouveau processus.</span><span class="sxs-lookup"><span data-stu-id="8b892-121">This allows a process, for example, to create a child process and then block its own execution until the new process has terminated.</span></span>

<span data-ttu-id="8b892-122">D’autres objets sont utiles pour protéger les ressources partagées de l’accès simultané.</span><span class="sxs-lookup"><span data-stu-id="8b892-122">Other objects are useful in protecting shared resources from simultaneous access.</span></span> <span data-ttu-id="8b892-123">Par exemple, plusieurs threads peuvent avoir chacun un handle vers un objet Mutex.</span><span class="sxs-lookup"><span data-stu-id="8b892-123">For example, multiple threads can each have a handle to a mutex object.</span></span> <span data-ttu-id="8b892-124">Avant d’accéder à une ressource partagée, les threads doivent appeler l’une des [fonctions Wait](../sync/wait-functions.md) pour attendre que l’état du mutex soit signalé.</span><span class="sxs-lookup"><span data-stu-id="8b892-124">Before accessing a shared resource, the threads must call one of the [wait functions](../sync/wait-functions.md) to wait for the state of the mutex to be signaled.</span></span> <span data-ttu-id="8b892-125">Lorsque le mutex est signalé, un seul thread en attente est libéré pour accéder à la ressource.</span><span class="sxs-lookup"><span data-stu-id="8b892-125">When the mutex becomes signaled, only one waiting thread is released to access the resource.</span></span> <span data-ttu-id="8b892-126">L’état du mutex est immédiatement réinitialisé à non signalé, de sorte que tous les autres threads en attente restent bloqués.</span><span class="sxs-lookup"><span data-stu-id="8b892-126">The state of the mutex is immediately reset to not signaled so any other waiting threads remain blocked.</span></span> <span data-ttu-id="8b892-127">Une fois le thread terminé avec la ressource, il doit définir l’état du mutex comme étant signalé pour permettre à d’autres threads d’accéder à la ressource.</span><span class="sxs-lookup"><span data-stu-id="8b892-127">When the thread is finished with the resource, it must set the state of the mutex to signaled to allow other threads to access the resource.</span></span>

<span data-ttu-id="8b892-128">Pour les threads d’un processus unique, les objets de section critique offrent un moyen de synchronisation plus efficace que les mutex.</span><span class="sxs-lookup"><span data-stu-id="8b892-128">For the threads of a single process, critical-section objects provide a more efficient means of synchronization than mutexes.</span></span> <span data-ttu-id="8b892-129">Une section critique est utilisée comme un mutex pour permettre à un thread à la fois d’utiliser la ressource protégée.</span><span class="sxs-lookup"><span data-stu-id="8b892-129">A critical section is used like a mutex to enable one thread at a time to use the protected resource.</span></span> <span data-ttu-id="8b892-130">Un thread peut utiliser la fonction [**EnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-entercriticalsection) pour demander la propriété d’une section critique.</span><span class="sxs-lookup"><span data-stu-id="8b892-130">A thread can use the [**EnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-entercriticalsection) function to request ownership of a critical section.</span></span> <span data-ttu-id="8b892-131">S’il est déjà détenu par un autre thread, le thread demandeur est bloqué.</span><span class="sxs-lookup"><span data-stu-id="8b892-131">If it is already owned by another thread, the requesting thread is blocked.</span></span> <span data-ttu-id="8b892-132">Un thread peut utiliser la fonction [**TryEnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-tryentercriticalsection) pour demander la propriété d’une section critique, sans se bloquer en cas d’échec d’obtention de la section critique.</span><span class="sxs-lookup"><span data-stu-id="8b892-132">A thread can use the [**TryEnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-tryentercriticalsection) function to request ownership of a critical section, without blocking upon failure to obtain the critical section.</span></span> <span data-ttu-id="8b892-133">Une fois la propriété reçue, le thread est libre d’utiliser la ressource protégée.</span><span class="sxs-lookup"><span data-stu-id="8b892-133">After it receives ownership, the thread is free to use the protected resource.</span></span> <span data-ttu-id="8b892-134">L’exécution des autres threads du processus n’est pas affectée, à moins qu’ils ne tentent d’entrer dans la même section critique.</span><span class="sxs-lookup"><span data-stu-id="8b892-134">The execution of the other threads of the process is not affected unless they attempt to enter the same critical section.</span></span>

<span data-ttu-id="8b892-135">La fonction [**WaitForInputIdle**](/windows/desktop/api/Winuser/nf-winuser-waitforinputidle) fait en sorte qu’un thread attende jusqu’à ce qu’un processus spécifié soit initialisé et en attente d’une entrée utilisateur sans aucune entrée en attente.</span><span class="sxs-lookup"><span data-stu-id="8b892-135">The [**WaitForInputIdle**](/windows/desktop/api/Winuser/nf-winuser-waitforinputidle) function makes a thread wait until a specified process is initialized and waiting for user input with no input pending.</span></span> <span data-ttu-id="8b892-136">L’appel de **WaitForInputIdle** peut être utile pour synchroniser des processus parents et enfants, car [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) retourne sans attendre que le processus enfant termine son initialisation.</span><span class="sxs-lookup"><span data-stu-id="8b892-136">Calling **WaitForInputIdle** can be useful for synchronizing parent and child processes, because [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) returns without waiting for the child process to complete its initialization.</span></span>

<span data-ttu-id="8b892-137">Pour plus d’informations, consultez [Synchronization](../sync/synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="8b892-137">For more information, see [Synchronization](../sync/synchronization.md).</span></span>

 

 
