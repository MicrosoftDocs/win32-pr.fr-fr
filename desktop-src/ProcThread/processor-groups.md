---
description: Les versions 64 bits de Windows 7 et Windows Server 2008 R2 et versions ultérieures de Windows prennent en charge plus de 64 processeurs logiques sur un seul ordinateur. Cette fonctionnalité n’est pas disponible dans les versions 32 bits de Windows.
ms.assetid: c627ac0f-96e8-48b5-9103-4316f487e173
title: Groupes de processeurs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cebc5b9ab1b386847b6561a9f6322c2fca0e2ae5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104034510"
---
# <a name="processor-groups"></a><span data-ttu-id="09de6-104">Groupes de processeurs</span><span class="sxs-lookup"><span data-stu-id="09de6-104">Processor Groups</span></span>

<span data-ttu-id="09de6-105">Les versions 64 bits de Windows 7 et Windows Server 2008 R2 et versions ultérieures de Windows prennent en charge plus de 64 processeurs logiques sur un seul ordinateur.</span><span class="sxs-lookup"><span data-stu-id="09de6-105">The 64-bit versions of Windows 7 and Windows Server 2008 R2 and later versions of Windows support more than 64 logical processors on a single computer.</span></span> <span data-ttu-id="09de6-106">Cette fonctionnalité n’est pas disponible dans les versions 32 bits de Windows.</span><span class="sxs-lookup"><span data-stu-id="09de6-106">This functionality is not available on 32-bit versions of Windows.</span></span>

<span data-ttu-id="09de6-107">Les systèmes avec plusieurs processeurs physiques ou systèmes avec des processeurs physiques dotés de plusieurs cœurs fournissent le système d’exploitation avec plusieurs processeurs logiques.</span><span class="sxs-lookup"><span data-stu-id="09de6-107">Systems with more than one physical processor or systems with physical processors that have multiple cores provide the operating system with multiple logical processors.</span></span> <span data-ttu-id="09de6-108">Un *processeur logique* est un moteur informatique logique du point de vue du système d’exploitation, de l’application ou du pilote.</span><span class="sxs-lookup"><span data-stu-id="09de6-108">A *logical processor* is one logical computing engine from the perspective of the operating system, application or driver.</span></span> <span data-ttu-id="09de6-109">Un *noyau* est une unité de processeur, qui peut se composer d’un ou de plusieurs processeurs logiques.</span><span class="sxs-lookup"><span data-stu-id="09de6-109">A *core* is one processor unit, which can consist of one or more logical processors.</span></span> <span data-ttu-id="09de6-110">Un *processeur physique* peut se composer d’un ou de plusieurs cœurs.</span><span class="sxs-lookup"><span data-stu-id="09de6-110">A *physical processor* can consist of one or more cores.</span></span> <span data-ttu-id="09de6-111">Un processeur physique est identique à un package de processeur, un socket ou un processeur.</span><span class="sxs-lookup"><span data-stu-id="09de6-111">A physical processor is the same as a processor package, a socket, or a CPU.</span></span>

<span data-ttu-id="09de6-112">La prise en charge des systèmes dotés de plus de 64 processeurs logiques est basée sur le concept de *groupe de processeurs*, qui est un ensemble statique de 64 processeurs logiques qui est traité comme une entité de planification unique.</span><span class="sxs-lookup"><span data-stu-id="09de6-112">Support for systems that have more than 64 logical processors is based on the concept of a *processor group*, which is a static set of up to 64 logical processors that is treated as a single scheduling entity.</span></span> <span data-ttu-id="09de6-113">Les groupes de processeurs sont numérotés à partir de 0.</span><span class="sxs-lookup"><span data-stu-id="09de6-113">Processor groups are numbered starting with 0.</span></span> <span data-ttu-id="09de6-114">Les systèmes avec moins de 64 processeurs logiques ont toujours un groupe unique, le groupe 0.</span><span class="sxs-lookup"><span data-stu-id="09de6-114">Systems with fewer than 64 logical processors always have a single group, Group 0.</span></span>

<span data-ttu-id="09de6-115">**Windows server 2008, Windows Vista, Windows server 2003 et Windows XP :** Les groupes de processeurs ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="09de6-115">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** Processor groups are not supported.</span></span>

<span data-ttu-id="09de6-116">Lorsque le système démarre, le système d’exploitation crée des groupes de processeurs et affecte des processeurs logiques aux groupes.</span><span class="sxs-lookup"><span data-stu-id="09de6-116">When the system starts, the operating system creates processor groups and assigns logical processors to the groups.</span></span> <span data-ttu-id="09de6-117">Si le système est capable d’ajouter des processeurs à chaud, le système d’exploitation autorise l’espace en groupes pour les processeurs qui peuvent arriver pendant que le système est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="09de6-117">If the system is capable of hot-adding processors, the operating system allows space in groups for processors that might arrive while the system is running.</span></span> <span data-ttu-id="09de6-118">Le système d’exploitation minimise le nombre de groupes dans un système.</span><span class="sxs-lookup"><span data-stu-id="09de6-118">The operating system minimizes the number of groups in a system.</span></span> <span data-ttu-id="09de6-119">Par exemple, un système avec des processeurs logiques 128 a deux groupes de processeurs avec 64 processeurs dans chaque groupe, et non quatre groupes avec des processeurs logiques de 32 dans chaque groupe.</span><span class="sxs-lookup"><span data-stu-id="09de6-119">For example, a system with 128 logical processors would have two processor groups with 64 processors in each group, not four groups with 32 logical processors in each group.</span></span>

<span data-ttu-id="09de6-120">Pour de meilleures performances, le système d’exploitation prend en compte la localité physique lors de l’affectation de processeurs logiques à des groupes.</span><span class="sxs-lookup"><span data-stu-id="09de6-120">For better performance, the operating system takes physical locality into account when assigning logical processors to groups.</span></span> <span data-ttu-id="09de6-121">Tous les processeurs logiques d’un cœur, et tous les cœurs d’un processeur physique, sont affectés au même groupe, si possible.</span><span class="sxs-lookup"><span data-stu-id="09de6-121">All of the logical processors in a core, and all of the cores in a physical processor, are assigned to the same group, if possible.</span></span> <span data-ttu-id="09de6-122">Les processeurs physiques qui sont physiquement proches les uns des autres sont affectés au même groupe.</span><span class="sxs-lookup"><span data-stu-id="09de6-122">Physical processors that are physically close to one another are assigned to the same group.</span></span> <span data-ttu-id="09de6-123">Un nœud NUMA est affecté à un seul groupe, sauf si la capacité du nœud dépasse la taille maximale du groupe.</span><span class="sxs-lookup"><span data-stu-id="09de6-123">A NUMA node is assigned to a single group unless the capacity of the node exceeds the maximum group size.</span></span> <span data-ttu-id="09de6-124">Pour plus d’informations, consultez [prise en charge de Numa](numa-support.md).</span><span class="sxs-lookup"><span data-stu-id="09de6-124">For more information, see [NUMA Support](numa-support.md).</span></span>

<span data-ttu-id="09de6-125">Sur les systèmes avec 64 ou moins de processeurs, les applications existantes fonctionneront correctement sans modification.</span><span class="sxs-lookup"><span data-stu-id="09de6-125">On systems with 64 or fewer processors, existing applications will operate correctly without modification.</span></span> <span data-ttu-id="09de6-126">Les applications qui n’appellent pas de fonctions qui utilisent des masques d’affinité de processeur ou des numéros de processeur fonctionnent correctement sur tous les systèmes, quel que soit le nombre de processeurs.</span><span class="sxs-lookup"><span data-stu-id="09de6-126">Applications that do not call any functions that use processor affinity masks or processor numbers will operate correctly on all systems, regardless of the number of processors.</span></span> <span data-ttu-id="09de6-127">Pour fonctionner correctement sur les systèmes avec plus de 64 processeurs logiques, les types d’applications suivants peuvent nécessiter des modifications :</span><span class="sxs-lookup"><span data-stu-id="09de6-127">To operate correctly on systems with more than 64 logical processors, the following kinds of applications might require modification:</span></span>

-   <span data-ttu-id="09de6-128">Les applications qui gèrent, gèrent ou affichent des informations par processeur pour l’ensemble du système doivent être modifiées pour prendre en charge plus de 64 processeurs logiques.</span><span class="sxs-lookup"><span data-stu-id="09de6-128">Applications that manage, maintain, or display per-processor information for the entire system must be modified to support more than 64 logical processors.</span></span> <span data-ttu-id="09de6-129">Un exemple d’une telle application est le gestionnaire des tâches Windows, qui affiche la charge de travail de chaque processeur dans le système.</span><span class="sxs-lookup"><span data-stu-id="09de6-129">An example of such an application is Windows Task Manager, which displays the workload of each processor in the system.</span></span>
-   <span data-ttu-id="09de6-130">Les applications dont les performances sont critiques et qui peuvent évoluer efficacement au-delà de 64 processeurs logiques doivent être modifiées pour s’exécuter sur ces systèmes.</span><span class="sxs-lookup"><span data-stu-id="09de6-130">Applications for which performance is critical and that can scale efficiently beyond 64 logical processors must be modified to run on such systems.</span></span> <span data-ttu-id="09de6-131">Par exemple, les applications de base de données peuvent tirer parti des modifications.</span><span class="sxs-lookup"><span data-stu-id="09de6-131">For example, database applications might benefit from modifications.</span></span>
-   <span data-ttu-id="09de6-132">Si une application utilise une DLL avec des structures de données par processeur et que la DLL n’a pas été modifiée pour prendre en charge plus de 64 processeurs logiques, tous les threads de l’application qui appellent des fonctions exportées par la DLL doivent être affectés au même groupe.</span><span class="sxs-lookup"><span data-stu-id="09de6-132">If an application uses a DLL that has per-processor data structures, and the DLL has not been modified to support more than 64 logical processors, all threads in the application that call functions exported by the DLL must be assigned to the same group.</span></span>

<span data-ttu-id="09de6-133">Par défaut, une application est concédée à un seul groupe, qui doit fournir une capacité de traitement importante pour l’application typique.</span><span class="sxs-lookup"><span data-stu-id="09de6-133">By default, an application is constrained to a single group, which should provide ample processing capability for the typical application.</span></span> <span data-ttu-id="09de6-134">Le système d’exploitation affecte initialement chaque processus à un seul groupe de manière alternée entre les groupes du système.</span><span class="sxs-lookup"><span data-stu-id="09de6-134">The operating system initially assigns each process to a single group in a round-robin manner across the groups in the system.</span></span> <span data-ttu-id="09de6-135">Un processus commence son exécution affectée à un groupe.</span><span class="sxs-lookup"><span data-stu-id="09de6-135">A process begins its execution assigned to one group.</span></span> <span data-ttu-id="09de6-136">Le premier thread d’un processus s’exécute initialement dans le groupe auquel le processus est assigné.</span><span class="sxs-lookup"><span data-stu-id="09de6-136">The first thread of a process initially runs in the group to which the process is assigned.</span></span> <span data-ttu-id="09de6-137">Chaque thread nouvellement créé est affecté au même groupe que le thread qui l’a créé.</span><span class="sxs-lookup"><span data-stu-id="09de6-137">Each newly created thread is assigned to the same group as the thread that created it.</span></span>

<span data-ttu-id="09de6-138">Une application qui requiert l’utilisation de plusieurs groupes afin qu’elle puisse s’exécuter sur plus de 64 processeurs doit déterminer explicitement où exécuter ses threads et est chargée de définir les affinités du processeur des threads sur les groupes souhaités.</span><span class="sxs-lookup"><span data-stu-id="09de6-138">An application that requires the use of multiple groups so that it can run on more than 64 processors must explicitly determine where to run its threads and is responsible for setting the threads' processor affinities to the desired groups.</span></span> <span data-ttu-id="09de6-139">L’indicateur d' [ \_ \_ affinité parente hérite](process-creation-flags.md) peut être utilisé pour spécifier un processus parent (qui peut être différent du processus actuel) à partir duquel générer l’affinité pour un nouveau processus.</span><span class="sxs-lookup"><span data-stu-id="09de6-139">The [INHERIT\_PARENT\_AFFINITY](process-creation-flags.md) flag can be used to specify a parent process (which can be different than the current process) from which to generate the affinity for a new process.</span></span> <span data-ttu-id="09de6-140">Si le processus s’exécute dans un groupe unique, il peut lire et modifier son affinité à l’aide de [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) et [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) tout en restant dans le même groupe ; Si l’affinité de processus est modifiée, la nouvelle affinité est appliquée à ses threads.</span><span class="sxs-lookup"><span data-stu-id="09de6-140">If the process is running in a single group, it can read and modify its affinity using [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) and [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) while remaining in the same group; if the process affinity is modified, the new affinity is applied to its threads.</span></span>

<span data-ttu-id="09de6-141">L’affinité d’un thread peut être spécifiée lors de la création à l’aide de l’attribut étendu d’affinité de [](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethreadex) [**\_ \_ \_ groupe \_ d’attributs proc**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-updateprocthreadattribute) avec la fonction CreateRemoteThreadEx.</span><span class="sxs-lookup"><span data-stu-id="09de6-141">A thread's affinity can be specified at creation using the [**PROC\_THREAD\_ATTRIBUTE\_GROUP\_AFFINITY**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-updateprocthreadattribute) extended attribute with the [**CreateRemoteThreadEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethreadex) function.</span></span> <span data-ttu-id="09de6-142">Une fois le thread créé, son affinité peut être modifiée en appelant [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) ou [**SetThreadGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-setthreadgroupaffinity).</span><span class="sxs-lookup"><span data-stu-id="09de6-142">After the thread is created, its affinity can be changed by calling [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) or [**SetThreadGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-setthreadgroupaffinity).</span></span> <span data-ttu-id="09de6-143">Si un thread est assigné à un autre groupe que le processus, l’affinité du processus est mise à jour pour inclure l’affinité du thread et le processus devient un processus à plusieurs groupes.</span><span class="sxs-lookup"><span data-stu-id="09de6-143">If a thread is assigned to a different group than the process, the process's affinity is updated to include the thread's affinity and the process becomes a multi-group process.</span></span> <span data-ttu-id="09de6-144">Des modifications d’affinité supplémentaires doivent être apportées pour les threads individuels. l’affinité d’un processus à plusieurs groupes ne peut pas être modifiée à l’aide de [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask).</span><span class="sxs-lookup"><span data-stu-id="09de6-144">Further affinity changes must be made for individual threads; a multi-group process's affinity cannot be modified using [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask).</span></span> <span data-ttu-id="09de6-145">La fonction [**GetProcessGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-getprocessgroupaffinity) récupère l’ensemble des groupes auxquels un processus et ses threads sont assignés.</span><span class="sxs-lookup"><span data-stu-id="09de6-145">The [**GetProcessGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-getprocessgroupaffinity) function retrieves the set of groups to which a process and its threads are assigned.</span></span>

<span data-ttu-id="09de6-146">Pour spécifier l’affinité pour tous les processus associés à un objet de traitement, utilisez la fonction [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) avec la classe d’informations **JobObjectGroupInformation** ou **JobObjectGroupInformationEx** .</span><span class="sxs-lookup"><span data-stu-id="09de6-146">To specify affinity for all processes associated with a job object, use the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function with the **JobObjectGroupInformation** or **JobObjectGroupInformationEx** information class.</span></span>

<span data-ttu-id="09de6-147">Un processeur logique est identifié par son numéro de groupe et son numéro de processeur relatif au groupe.</span><span class="sxs-lookup"><span data-stu-id="09de6-147">A logical processor is identified by its group number and its group-relative processor number.</span></span> <span data-ttu-id="09de6-148">Cela est représenté par une structure de [**\_ numéro de processeur**](/windows/desktop/api/WinNT/ns-winnt-processor_number) .</span><span class="sxs-lookup"><span data-stu-id="09de6-148">This is represented by a [**PROCESSOR\_NUMBER**](/windows/desktop/api/WinNT/ns-winnt-processor_number) structure.</span></span> <span data-ttu-id="09de6-149">Les numéros de processeur numériques utilisés par les fonctions héritées sont relatifs au groupe.</span><span class="sxs-lookup"><span data-stu-id="09de6-149">Numeric processor numbers used by legacy functions are group-relative.</span></span>

<span data-ttu-id="09de6-150">Pour plus d’informations sur les modifications apportées à l’architecture du système d’exploitation pour prendre en charge plus de 64 processeurs, consultez le livre blanc [prise en charge des systèmes dotés de plus de 64 processeurs](https://www.microsoft.com/whdc/system/Sysinternals/MoreThan64proc.mspx).</span><span class="sxs-lookup"><span data-stu-id="09de6-150">For a discussion of operating system architecture changes to support more than 64 processors, see the white paper [Supporting Systems That Have More Than 64 Processors](https://www.microsoft.com/whdc/system/Sysinternals/MoreThan64proc.mspx).</span></span>

<span data-ttu-id="09de6-151">Pour obtenir la liste des nouvelles fonctions et structures qui prennent en charge les groupes de processeurs, consultez [Nouveautés des processus et des threads](what-s-new-in-processes-and-threads.md).</span><span class="sxs-lookup"><span data-stu-id="09de6-151">For a list of new functions and structures that support processor groups, see [What's New in Processes and Threads](what-s-new-in-processes-and-threads.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="09de6-152">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="09de6-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="09de6-153">Plusieurs processeurs</span><span class="sxs-lookup"><span data-stu-id="09de6-153">Multiple Processors</span></span>](multiple-processors.md)
</dt> <dt>

[<span data-ttu-id="09de6-154">Prise en charge de NUMA</span><span class="sxs-lookup"><span data-stu-id="09de6-154">NUMA Support</span></span>](numa-support.md)
</dt> </dl>

 

 
