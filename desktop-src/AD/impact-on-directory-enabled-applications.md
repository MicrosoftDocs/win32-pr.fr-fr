---
title: Impact sur les applications Directory-Enabled
description: Cette rubrique décrit l’impact sur les applications prenant en charge les applications d’annuaire lorsque des décalages de version, des mises à jour partielles ou des collisions se produisent.
ms.assetid: 0aec6fe3-7757-4472-bc18-add2327d4e1b
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 061818fc791e1c75d440d0c477a321b8c4e5edfb
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/17/2020
ms.locfileid: "103940813"
---
# <a name="impact-on-directory-enabled-applications"></a><span data-ttu-id="6dc6e-103">Impact sur les applications Directory-Enabled</span><span class="sxs-lookup"><span data-stu-id="6dc6e-103">Impact on Directory-Enabled Applications</span></span>

## <a name="version-skew"></a><span data-ttu-id="6dc6e-104">Décalage de version</span><span class="sxs-lookup"><span data-stu-id="6dc6e-104">Version Skew</span></span>

<span data-ttu-id="6dc6e-105">La distorsion de version se produit lorsque les applications lisent les mêmes objets de différents réplicas avant qu’une modification n’ait été répliquée.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-105">Version skew occurs when applications read the same objects from different replicas before a change has replicated.</span></span> <span data-ttu-id="6dc6e-106">Les applications qui lisent le réplica distant reconnaissent l’objet inchangé.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-106">Applications reading the remote replica recognize the unchanged object.</span></span> <span data-ttu-id="6dc6e-107">La différence de version est un problème lorsqu’une application ou un ensemble d’applications donné utilise les données de l’annuaire pour interagir.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-107">Version skew is an issue when a given application or set of applications use the data in the directory to interoperate.</span></span>

<span data-ttu-id="6dc6e-108">Par exemple, un service RPC peut publier ses points de terminaison dans l’annuaire à l’aide d’API RPC standard (telles que [**RpcNsBindingExport**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindingexporta)).</span><span class="sxs-lookup"><span data-stu-id="6dc6e-108">For example, an RPC Service can publish its endpoints in the directory using standard RPC APIs (such as [**RpcNsBindingExport**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindingexporta)).</span></span> <span data-ttu-id="6dc6e-109">Les clients se connectent au service en recherchant le point de terminaison souhaité dans le répertoire ( [**RpcNsBindingLookupBegin**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina), [**RpcNsBindingLookupNext**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupnext), etc.) et en les liant.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-109">Clients connect to the service by looking up the desired endpoint in the directory ( [**RpcNsBindingLookupBegin**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina), [**RpcNsBindingLookupNext**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupnext), and so on) and binding to it.</span></span>

<span data-ttu-id="6dc6e-110">Supposons qu’un service RPC ₁ publie des points de terminaison ₁ et qu’il se déplace ensuite vers un autre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-110">Assume that an RPC Service S₁ publishes endpoint Eₛ₁ and subsequently moves to a different computer.</span></span> <span data-ttu-id="6dc6e-111">Le point de terminaison d’origine ₁ est remplacé par E<sub>S2,</sub> reflétant l’adresse du nouvel ordinateur.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-111">The original endpoint Eₛ₁ is changed to E<sub>s2,</sub> reflecting the new computer's address.</span></span> <span data-ttu-id="6dc6e-112">Les clients lisant les réplicas distants du service d’annuaire ne peuvent pas se connecter au service tant que le point de terminaison mis à jour n’est pas répliqué.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-112">Clients reading remote replicas of the directory service are unable to connect to the service until the updated endpoint is replicated.</span></span> <span data-ttu-id="6dc6e-113">Toutefois, le déplacement d’un service d’un ordinateur à un autre est une occurrence rare. par conséquent, cette interruption/ce délai doit rarement être rencontré, en particulier si le déplacement du service est bien planifié.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-113">However, moving a service from one computer to another is a rare occurrence; therefore, this interruption/delay should rarely be encountered, especially if the movement of the service is well-planned.</span></span>

## <a name="partial-updates"></a><span data-ttu-id="6dc6e-114">Mises à jour partielles</span><span class="sxs-lookup"><span data-stu-id="6dc6e-114">Partial Updates</span></span>

<span data-ttu-id="6dc6e-115">En général, une mise à jour partielle se produit lorsqu’une application lit un jeu de données alors qu’une autre application écrit dans ce même jeu de données.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-115">In general, partial update occurs when one application is reading a set of data while another application is writing to that same set of data.</span></span> <span data-ttu-id="6dc6e-116">Il s’agit d’une situation qui peut se produire avec n’importe quelle application dans un système multimaître.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-116">This is a situation that can occur with any application in a multi-mastered system.</span></span> <span data-ttu-id="6dc6e-117">Cela peut se produire de nombreuses façons.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-117">There are many ways this can occur.</span></span> <span data-ttu-id="6dc6e-118">Vous pouvez avoir plusieurs applications qui écrivent dans le même jeu de données à la fois.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-118">You could have more than one application writing to the same data set at once.</span></span> <span data-ttu-id="6dc6e-119">Si vous l’examinez de cette façon, le service de réplication d’annuaire est une autre application qui pourrait potentiellement écrire dans le même jeu de données que celui qu’une autre application peut lire.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-119">If you look at it this way, the directory replication service is just another application that could potentially be writing to the same data set that another application may be reading.</span></span> <span data-ttu-id="6dc6e-120">Il peut s’agir d’un problème potentiel pour une application.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-120">This could be a potential problem for an application.</span></span> <span data-ttu-id="6dc6e-121">Toutefois, la fenêtre de temps pendant laquelle une mise à jour partielle peut affecter votre application est relativement petite.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-121">However, the window of time in which a partial update can affect your application is relatively small.</span></span> <span data-ttu-id="6dc6e-122">Cela devrait rarement s’avérer un problème pour les applications qui ne dépendent pas de la synchronisation de plusieurs objets.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-122">This should rarely if ever be an issue for applications that are not dependent on the synchronization of multiple objects.</span></span> <span data-ttu-id="6dc6e-123">Si votre application dépend fortement de la synchronisation d’un ensemble d’objets associé, vous devez prendre en compte les effets d’une mise à jour partielle dans la conception de votre application.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-123">If your application is highly dependent on the synchronization of a related set of objects, you should consider the effects of a partial update in your application design.</span></span>

<span data-ttu-id="6dc6e-124">En termes de réplication de répertoires, une mise à jour partielle se produit lorsque les applications lisent le même ensemble d’objets à partir de réplicas différents alors que la réplication est en cours.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-124">In terms of the directory replication, partial update occurs when applications read the same set of objects from different replicas while replication is in progress.</span></span> <span data-ttu-id="6dc6e-125">Les applications au niveau du réplica distant voient certaines des modifications, mais pas toutes.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-125">Applications at the remote replica see some, but not all, of the changes.</span></span>

> [!Note]  
> <span data-ttu-id="6dc6e-126">La fenêtre dans laquelle la mise à jour partielle peut affecter une application est petite : l’application doit commencer à lire des objets pendant que la réplication entrante est en cours, après la réception d’un ou plusieurs objets modifiés associés, mais avant la réception de tous les objets.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-126">The window in which partial update can affect an application is small: the application must start reading objects while inbound replication is in progress, after one or more of the related, changed objects have been received but before all have been received.</span></span> <span data-ttu-id="6dc6e-127">Le délai entre les mises à jour au niveau du réplica source affecte directement la taille de cette fenêtre : les mises à jour qui se produisent de façon rapprochée dans le temps sont répliquées de façon rapprochée dans le temps.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-127">The time between the updates at the source replica directly affects the size of this window—updates that occur close together in time are replicated close together in time.</span></span> <span data-ttu-id="6dc6e-128">Une mise à jour partielle peut être un problème lorsqu’une application utilise un ensemble d’objets associé.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-128">Partial update can be an issue when an application uses a related set of objects.</span></span>

 

<span data-ttu-id="6dc6e-129">Par exemple, un service d’accès à distance peut utiliser l’annuaire pour stocker des données de stratégie et de profil.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-129">For example, a remote access service can use the directory to store policy and profile data.</span></span> <span data-ttu-id="6dc6e-130">Les données de stratégie sont stockées dans un ensemble d’objets et le profil dans un autre jeu.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-130">The policy data is stored in one set of objects, and the profile in another set.</span></span> <span data-ttu-id="6dc6e-131">Lorsqu’un utilisateur se connecte au service d’accès à distance, le service d’accès à distance lit la stratégie pour déterminer si l’utilisateur est autorisé à se connecter et, le cas échéant, quel profil appliquer à la session utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-131">When a user connects to the remote access service, the remote access service reads the policy to determine whether the user is allowed to connect, and if so what profile to apply to the user session.</span></span> <span data-ttu-id="6dc6e-132">La mise à jour partielle peut affecter le service d’accès à distance de plusieurs façons :</span><span class="sxs-lookup"><span data-stu-id="6dc6e-132">Partial update can affect the remote access service in several ways:</span></span>

-   <span data-ttu-id="6dc6e-133">Si la stratégie est complexe et se compose de plusieurs objets, le service d’accès à distance peut lire une stratégie partiellement mise à jour, ce qui entraîne un refus incorrect ou l’octroi de service à l’utilisateur, l’impossibilité de traiter la stratégie en raison d’une incohérence interne, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-133">If the policy is complex and consists of multiple objects, the remote access service might read a partially updated policy resulting in incorrect denial or granting of service to the user, inability to process the policy due to internal inconsistency, and so on.</span></span>
-   <span data-ttu-id="6dc6e-134">Si la stratégie et les profils ont été mis à jour, le service peut traiter correctement la stratégie, mais appliquer un profil obsolète, car les objets de stratégie ont été répliqués, mais pas les objets de profil.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-134">If both the policy and profiles have been updated, the service might correctly process the policy but apply a stale profile, because the policy objects have replicated but the profile objects have not.</span></span>
-   <span data-ttu-id="6dc6e-135">Si le profil est complexe et se compose de plusieurs objets, le service peut traiter correctement la stratégie, mais appliquer un profil partiellement mis à jour, car les objets de stratégie ont été répliqués, mais seuls certains objets de profil l’ont fait.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-135">If the profile is complex and consists of multiple objects, the service might correctly process the policy but apply a partially updated profile because the policy objects have replicated, but only some of the profile objects have done so.</span></span>

## <a name="collisions"></a><span data-ttu-id="6dc6e-136">Collisions</span><span class="sxs-lookup"><span data-stu-id="6dc6e-136">Collisions</span></span>

<span data-ttu-id="6dc6e-137">Des collisions se produisent lorsque les mêmes attributs d’au moins deux réplicas d’un objet donné sont modifiés au cours du même intervalle de réplication.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-137">Collisions occur when the same attributes of two or more replicas of a given object are changed during the same replication interval.</span></span> <span data-ttu-id="6dc6e-138">Le processus de réplication rapproche la collision ; en raison de la réconciliation, un utilisateur ou une application peut « voir » une valeur différente de celle qu’il a écrite.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-138">The replication process reconciles the collision; because of reconciliation a user or application may "see" a value other than the one they wrote.</span></span>

<span data-ttu-id="6dc6e-139">Voici un exemple simple d’informations sur l’adresse de l’utilisateur : un utilisateur modifie une adresse postale sur le réplica R1 et un administrateur modifie la même adresse postale sur le réplica R2.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-139">A simple example is user address information: A user changes a mailing address at replica R1 and an administrator changes the same mailing address at replica R2.</span></span> <span data-ttu-id="6dc6e-140">Une valeur écrite se propage jusqu’à ce qu’une autre valeur soit sélectionnée sur cette valeur par le mécanisme de réconciliation des collisions.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-140">A written value propagates until another value is selected over that value by the collision reconciliation mechanism.</span></span> <span data-ttu-id="6dc6e-141">Tant qu’une valeur continue à « gagner » par rapport à d’autres valeurs dans le processus de résolution des collisions, la valeur continue à se propager.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-141">As long as a value continues to "win" against other values in the collision resolution process, the value continues to propagate.</span></span> <span data-ttu-id="6dc6e-142">Enfin, cette valeur « gagnante » sera propagée vers R1, R2 et tous les autres réplicas si aucune autre modification n’est apportée.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-142">Ultimately, this "winning" value will be propagated to R1,R2, and all other replicas if no other changes are made.</span></span>

<span data-ttu-id="6dc6e-143">La résolution des collisions est un problème pour les applications qui font des hypothèses sur la cohérence interne des objets ou des ensembles d’objets.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-143">Collision resolution is an issue for applications that make assumptions about the internal consistency of objects or sets of objects.</span></span> <span data-ttu-id="6dc6e-144">Par exemple, un service de gestion de l’allocation de bande passante réseau stocke les données de bande passante réseau pour un segment de réseau donné dans l’annuaire d’un objet O1.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-144">For example, a network bandwidth allocation management service stores network bandwidth data for a given network segment in the directory in an object O1.</span></span> <span data-ttu-id="6dc6e-145">L’objet contient la bande passante disponible en bits par seconde et la bande passante maximale qu’un utilisateur unique peut réserver.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-145">The object contains the bandwidth available in bits-per-second and the maximum bandwidth any single user can reserve.</span></span> <span data-ttu-id="6dc6e-146">Le service s’attend à ce que la bande passante réservable par l’utilisateur soit toujours inférieure ou égale à la bande passante disponible.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-146">The service expects that the user reservable bandwidth will always be less than or equal to the bandwidth available.</span></span>

<span data-ttu-id="6dc6e-147">Regardez la séquence d’événements suivante :</span><span class="sxs-lookup"><span data-stu-id="6dc6e-147">Consider the following sequence of events:</span></span>

-   <span data-ttu-id="6dc6e-148">L’objet dans l’état de réplication complète initial donne la bande passante disponible en tant que 56 kilobits par seconde, et la bande passante réservable par l’utilisateur en tant que 9 600 bits par seconde.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-148">The object in the initial fully replicated state gives the available bandwidth as 56 kilobits-per-second, and the user reservable bandwidth as 9,600 bits-per-second.</span></span>
-   <span data-ttu-id="6dc6e-149">Un administrateur sur le réplica R ₁ remplace les valeurs respectivement par 64 Ko et 19 200.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-149">An administrator at replica R₁ changes the values to 64k and 19,200 respectively.</span></span>
-   <span data-ttu-id="6dc6e-150">Un administrateur sur le réplica R ₂ modifie les valeurs en 10 millions et 1 million respectivement avant l’arrivée de la mise à jour de R ₁.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-150">An administrator at replica R₂ changes the values to 10 million and 1 million respectively before the update from R₁ arrives.</span></span>

<span data-ttu-id="6dc6e-151">En supposant que les attributs en question ont des numéros de version identiques lorsque les mises à jour se produisent, il existe une petite possibilité, mais réelle, que l’objet se termine avec une bande passante maximale de 64 Ko et un nombre maximal de 1 million d’utilisateurs pouvant être réservés, si l’application effectue les mises à jour en tant qu’opérations d’écriture distinctes.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-151">Assuming the attributes in question have equal version numbers when the updates occur, there is a small, but real, possibility that the object will end up with a maximum bandwidth of 64k and a user reservable maximum of 1 million—if the application performs the updates as separate write operations.</span></span> <span data-ttu-id="6dc6e-152">L’application doit toujours mettre à jour les deux propriétés en une seule opération.</span><span class="sxs-lookup"><span data-stu-id="6dc6e-152">The application should always update both properties in a single operation.</span></span>

 

 