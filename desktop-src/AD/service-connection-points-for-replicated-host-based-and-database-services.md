---
title: Points de connexion de service pour les services répliqués, basés sur l’hôte et sur la base de données
description: Lorsque vous publiez un service à l’aide d’un point de connexion de service (SCP), réfléchissez à la façon dont les clients localisent le SCP pour votre service.
ms.assetid: 944e8ecd-f8ea-4506-992c-bbbfc82d11f3
ms.tgt_platform: multiple
keywords:
- Points de connexion de service pour les services AD répliqués, basés sur l’hôte et les services de base de données
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 63b69491dd84a9367f8fd05e9d23ca771551dfbb
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/17/2020
ms.locfileid: "104030981"
---
# <a name="service-connection-points-for-replicated-host-based-and-database-services"></a><span data-ttu-id="f88dc-104">Points de connexion de service pour les services répliqués, basés sur l’hôte et sur la base de données</span><span class="sxs-lookup"><span data-stu-id="f88dc-104">Service Connection Points for Replicated, Host-based, and Database Services</span></span>

<span data-ttu-id="f88dc-105">Lorsque vous publiez un service à l’aide d’un point de connexion de service (SCP), réfléchissez à la façon dont les clients localisent le SCP pour votre service.</span><span class="sxs-lookup"><span data-stu-id="f88dc-105">When you publish a service using a service connection point (SCP), consider how clients will locate the SCP for your service.</span></span> <span data-ttu-id="f88dc-106">Si plusieurs instances du service existent, réfléchissez à la façon dont les clients distinguent le service des fonctionnalités souhaitées des services similaires avec des fonctionnalités différentes.</span><span class="sxs-lookup"><span data-stu-id="f88dc-106">If multiple instances of the service exist, consider how clients will distinguish the service with the desired features from similar services with different features.</span></span> <span data-ttu-id="f88dc-107">Si vous publiez un service répliqué, réfléchissez à la façon dont un client choisit un réplica.</span><span class="sxs-lookup"><span data-stu-id="f88dc-107">If you publish a replicated service, consider how a client will choose a replica.</span></span> <span data-ttu-id="f88dc-108">Cette rubrique décrit ces problèmes pour différents types de services.</span><span class="sxs-lookup"><span data-stu-id="f88dc-108">This topic discusses these issues for various types of services.</span></span>

## <a name="replicable-services"></a><span data-ttu-id="f88dc-109">Services réplicables</span><span class="sxs-lookup"><span data-stu-id="f88dc-109">Replicable services</span></span>

<span data-ttu-id="f88dc-110">Pour un service réplicable, il peut y avoir une ou plusieurs instances, ou réplicas, du service, et les clients ne se soucient pas du réplica auquel ils se connectent, car chacun fournit le même service.</span><span class="sxs-lookup"><span data-stu-id="f88dc-110">For a replicable service there can be one or many instances, or replicas, of the service, and clients do not care which replica they connect to because each provides the same service.</span></span> <span data-ttu-id="f88dc-111">Active Directory Domain Services sont des exemples de services répliqués : tous les contrôleurs de domaine d’un domaine donné contiennent des données identiques, sujettes à la latence de la réplication, et fournissent des services identiques.</span><span class="sxs-lookup"><span data-stu-id="f88dc-111">Active Directory Domain Services are examples of replicated services: all domain controllers for a given domain hold identical data, subject to replication latency, and provide identical services.</span></span>

<span data-ttu-id="f88dc-112">Les services réplicables peuvent stocker les SCP et d’autres objets spécifiques aux services pour plusieurs réplicas dans un seul conteneur.</span><span class="sxs-lookup"><span data-stu-id="f88dc-112">Replicable services can store the SCPs and other service-specific objects for multiple replicas in a single container.</span></span> <span data-ttu-id="f88dc-113">L’application d’installation pour le premier réplica peut créer le conteneur en tant qu’enfant du conteneur système du domaine local.</span><span class="sxs-lookup"><span data-stu-id="f88dc-113">The setup application for the first replica can create the container as a child of the local domain's System container.</span></span> <span data-ttu-id="f88dc-114">Pour plus d’informations, consultez [publication dans un conteneur de système de domaine](publishing-in-a-domain-system-container.md).</span><span class="sxs-lookup"><span data-stu-id="f88dc-114">For more information, see [Publishing in a Domain System Container](publishing-in-a-domain-system-container.md).</span></span> <span data-ttu-id="f88dc-115">Assurez-vous que le descripteur de sécurité de votre conteneur permet aux programmes d’installation des réplicas suivants de créer leurs objets dans le même conteneur.</span><span class="sxs-lookup"><span data-stu-id="f88dc-115">Ensure that the security descriptor for your container allows the setup programs for subsequent replicas to create their objects in the same container.</span></span> <span data-ttu-id="f88dc-116">Accordez des autorisations à l’administrateur d’installation pour spécifier les utilisateurs ou les groupes qui peuvent créer ou modifier des objets dans le conteneur.</span><span class="sxs-lookup"><span data-stu-id="f88dc-116">Grant permissions for the installing administrator to specify the users or groups that can create or modify objects in the container.</span></span>

<span data-ttu-id="f88dc-117">Une stratégie pour un service réplicable consiste à créer un SCP pour chaque réplica.</span><span class="sxs-lookup"><span data-stu-id="f88dc-117">One strategy for a replicable service is to create an SCP for each replica.</span></span> <span data-ttu-id="f88dc-118">Lorsqu’un client demande le GUID du produit du service ou un autre mot clé d’identification, il recherche les objets SCP pour tous les réplicas et en sélectionne un au hasard ou en utilisant un algorithme d’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="f88dc-118">When a client queries for the service's product GUID or other identifying keyword, it finds the SCP objects for all replicas and selects one at random or using some load-balancing algorithm.</span></span> <span data-ttu-id="f88dc-119">Par exemple, un administrateur peut spécifier des données de priorité et d’équilibrage de charge pour chaque réplica, de la même façon que les champs de priorité et de pondération d’un enregistrement SRV DNS.</span><span class="sxs-lookup"><span data-stu-id="f88dc-119">For example, an administrator could specify priority and load-balancing data for each replica, similar to the priority and weight fields of a DNS SRV record.</span></span> <span data-ttu-id="f88dc-120">L’application d’installation du service peut stocker ces données dans l’attribut **serviceBindingInformation** du SCP de chaque réplica.</span><span class="sxs-lookup"><span data-stu-id="f88dc-120">The service's setup application can store this data in the **serviceBindingInformation** attribute of each replica's SCP.</span></span> <span data-ttu-id="f88dc-121">Les clients récupèrent les données de chaque SCP et l’utilisent pour sélectionner un réplica.</span><span class="sxs-lookup"><span data-stu-id="f88dc-121">Clients retrieve the data from each SCP and use it to select a replica.</span></span>

<span data-ttu-id="f88dc-122">Une autre stratégie consiste à créer un seul SCP pour tous les réplicas et à définir l’attribut SCP **servicednsname** sur le nom d’un enregistrement SRV DNS.</span><span class="sxs-lookup"><span data-stu-id="f88dc-122">Another strategy is to create a single SCP for all replicas and set the SCP **serviceDNSName** attribute to the name of a DNS SRV record.</span></span> <span data-ttu-id="f88dc-123">Ensuite, l’application d’installation de chaque réplica inscrit un enregistrement SRV portant ce nom.</span><span class="sxs-lookup"><span data-stu-id="f88dc-123">Then the setup application for each replica registers a SRV record with that name.</span></span> <span data-ttu-id="f88dc-124">Lorsqu’un client identifie le SCP seul du service, le client récupère le nom de l’enregistrement SRV et utilise la fonction [**DNSQuery**](/windows/desktop/api/windns/nf-windns-dnsquery_a) pour récupérer le tableau d’enregistrements SRV pour les réplicas.</span><span class="sxs-lookup"><span data-stu-id="f88dc-124">When a client identifies the service's lone SCP, the client retrieves the name of the SRV record and uses the [**DnsQuery**](/windows/desktop/api/windns/nf-windns-dnsquery_a) function to retrieve the array of SRV records for the replicas.</span></span> <span data-ttu-id="f88dc-125">Chaque enregistrement SRV contient le nom d’un ordinateur hôte et les données supplémentaires que le client peut utiliser pour sélectionner un réplica.</span><span class="sxs-lookup"><span data-stu-id="f88dc-125">Each SRV record contains the name of a host computer and additional data that the client can use to select a replica.</span></span>

## <a name="database-services"></a><span data-ttu-id="f88dc-126">Services de base de données</span><span class="sxs-lookup"><span data-stu-id="f88dc-126">Database services</span></span>

<span data-ttu-id="f88dc-127">Les différentes instances d’un service de base de données peuvent contenir des données entièrement différentes, bien qu’elles soient toutes du même type de service, généralement appelée classe de service.</span><span class="sxs-lookup"><span data-stu-id="f88dc-127">Different instances of a database service may contain entirely different data, even though they are all the same kind of service, usually called service class.</span></span> <span data-ttu-id="f88dc-128">Pour publier ce type de service, l’attribut **Keywords** du SCP peut identifier la classe de service et la base de données spécifique.</span><span class="sxs-lookup"><span data-stu-id="f88dc-128">To publish this kind of service, the **keywords** attribute of the SCP can identify both the service class and the specific database.</span></span> <span data-ttu-id="f88dc-129">Un client à usage général qui connaît uniquement le GUID de la classe de service peut interroger toutes les bases de données publiées par cette classe de service, puis présenter une interface utilisateur pour permettre à l’utilisateur d’en sélectionner un.</span><span class="sxs-lookup"><span data-stu-id="f88dc-129">A general-purpose client that knows only the GUID of the service class can query for all databases published by that service class, and then present a user interface to allow the user to select one.</span></span> <span data-ttu-id="f88dc-130">Pour un client conçu spécifiquement pour la base de données cible, vous pouvez coder en dur le GUID de la base de données dans le code client.</span><span class="sxs-lookup"><span data-stu-id="f88dc-130">For a client that is designed specifically for the target database, you can hard-code the database GUID into the client code.</span></span>

## <a name="host-based-services"></a><span data-ttu-id="f88dc-131">Services basés sur l’hôte</span><span class="sxs-lookup"><span data-stu-id="f88dc-131">Host-based services</span></span>

<span data-ttu-id="f88dc-132">Les services basés sur l’hôte sont des services qui sont étroitement liés à un seul ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="f88dc-132">Host-based services are services that are closely tied to a single host computer.</span></span> <span data-ttu-id="f88dc-133">Vous pouvez installer des instances de la classe de service sur de nombreux ordinateurs et chaque instance fournit des services identifiés avec son ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="f88dc-133">You can install instances of the service class on many computers and each instance provides services that are identified with its host computer.</span></span>

<span data-ttu-id="f88dc-134">Chaque instance d’un service basé sur l’hôte doit créer son propre SCP sous l’objet ordinateur de son hôte.</span><span class="sxs-lookup"><span data-stu-id="f88dc-134">Each instance of a host-based service should create its own SCP under the computer object of its host.</span></span> <span data-ttu-id="f88dc-135">Les clients qui utilisent un GUID de produit pour rechercher le SCP d’un service basé sur l’hôte trouvent généralement de nombreuses instances de la classe de service dans l’ensemble de la forêt d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="f88dc-135">Clients who use a product GUID to search for the SCP of a host-based service typically find many instances of the service class throughout the enterprise forest.</span></span> <span data-ttu-id="f88dc-136">Les clients peuvent ensuite utiliser l’attribut **servicednsname** de l’SCP pour trouver le SCP de l’instance de service sur l’ordinateur hôte de votre choix.</span><span class="sxs-lookup"><span data-stu-id="f88dc-136">Clients can then use the **serviceDNSName** attribute of the SCPs to find the SCP for the service instance on the desired host computer.</span></span>

 

 