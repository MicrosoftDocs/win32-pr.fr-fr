---
title: À propos des comptes d’ouverture de session de service
description: Lorsqu’un service Win32 démarre, il ouvre une session sur l’ordinateur local.
ms.assetid: 637ad0c0-118f-43e8-9d21-a93f6886f546
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 328b33d5dab36ccc5a803eb7c43ca3112e96ecf8
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/17/2020
ms.locfileid: "104101404"
---
# <a name="about-service-logon-accounts"></a><span data-ttu-id="834bc-103">À propos des comptes d’ouverture de session de service</span><span class="sxs-lookup"><span data-stu-id="834bc-103">About Service Logon Accounts</span></span>

<span data-ttu-id="834bc-104">Lorsqu’un service Win32 démarre, il ouvre une session sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="834bc-104">When a Win32-based service starts, it logs on to the local computer.</span></span> <span data-ttu-id="834bc-105">Il peut ouvrir une session en tant que :</span><span class="sxs-lookup"><span data-stu-id="834bc-105">It can log on as:</span></span>

-   <span data-ttu-id="834bc-106">Un compte d’utilisateur local ou de domaine.</span><span class="sxs-lookup"><span data-stu-id="834bc-106">A local or domain user account.</span></span>
-   <span data-ttu-id="834bc-107">Compte LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="834bc-107">The LocalSystem account.</span></span>

<span data-ttu-id="834bc-108">Le compte d’ouverture de session détermine l’identité de sécurité du service au moment de l’exécution, autrement dit, le contexte de sécurité principal du service.</span><span class="sxs-lookup"><span data-stu-id="834bc-108">The logon account determines the security identity of the service at run time, that is, the service's primary security context.</span></span> <span data-ttu-id="834bc-109">Le contexte de sécurité détermine la capacité du service à accéder aux ressources locales et réseau.</span><span class="sxs-lookup"><span data-stu-id="834bc-109">The security context determines the service's ability to access local and network resources.</span></span> <span data-ttu-id="834bc-110">Par exemple, un service qui s’exécute dans le contexte de sécurité d’un compte d’utilisateur local ne peut pas accéder aux ressources réseau.</span><span class="sxs-lookup"><span data-stu-id="834bc-110">For example, a service running in the security context of a local user account cannot access network resources.</span></span> <span data-ttu-id="834bc-111">À l’inverse, un service s’exécutant dans le contexte de sécurité du compte LocalSystem sur un contrôleur de domaine Windows 2000 (DC) dispose d’un accès illimité au contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="834bc-111">Conversely, a service running in the security context of the LocalSystem account on a Windows 2000 domain controller (DC), would have unrestricted access to the DC.</span></span> <span data-ttu-id="834bc-112">Pour plus d’informations et pour obtenir une description des avantages et des limitations entre les comptes d’utilisateur et LocalSystem, consultez [contextes de sécurité et Active Directory Domain Services](security-contexts-and-active-directory-domain-services.md).</span><span class="sxs-lookup"><span data-stu-id="834bc-112">For more information, and a discussion of the benefits and limitations between user accounts and LocalSystem, see [Security Contexts and Active Directory Domain Services](security-contexts-and-active-directory-domain-services.md).</span></span>

<span data-ttu-id="834bc-113">Enfin, les administrateurs sur le système où le service est installé ont le contrôle sur le compte d’ouverture de session du service.</span><span class="sxs-lookup"><span data-stu-id="834bc-113">Ultimately, administrators on the system where the service is installed have control over the service's logon account.</span></span> <span data-ttu-id="834bc-114">Pour des raisons de sécurité, certains administrateurs peuvent ne pas vous autoriser à installer votre service sous le compte LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="834bc-114">For security reasons, some administrators may not allow you to install your service under the LocalSystem account.</span></span> <span data-ttu-id="834bc-115">Votre service doit pouvoir s’exécuter sous un compte d’utilisateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="834bc-115">Your service must be able to run under a domain user account.</span></span> <span data-ttu-id="834bc-116">En tant que programmeur, vous pouvez exercer un contrôle sur le compte d’ouverture de session de votre service.</span><span class="sxs-lookup"><span data-stu-id="834bc-116">As a programmer, you can exercise some control over your service's logon account.</span></span> <span data-ttu-id="834bc-117">Votre programme d’installation de service spécifie le compte d’ouverture de session du service lorsqu’il appelle la fonction [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea) pour installer le service sur un ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="834bc-117">Your service installer specifies the service's logon account when it calls the [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea) function to install the service on a host computer.</span></span> <span data-ttu-id="834bc-118">Votre programme d’installation peut suggérer un compte d’ouverture de session par défaut, mais il doit autoriser un administrateur à spécifier le compte réel.</span><span class="sxs-lookup"><span data-stu-id="834bc-118">Your installer can suggest a default logon account, but it should allow an administrator to specify the actual account.</span></span>

<span data-ttu-id="834bc-119">Votre programme d’installation peut également effectuer les tâches suivantes relatives au compte d’ouverture de session de votre service :</span><span class="sxs-lookup"><span data-stu-id="834bc-119">Your installer can also perform the following tasks relating to your service's logon account:</span></span>

-   <span data-ttu-id="834bc-120">Installation.</span><span class="sxs-lookup"><span data-stu-id="834bc-120">Installation.</span></span> <span data-ttu-id="834bc-121">Si vous installez votre service pour qu’il s’exécute sous un compte d’utilisateur, le compte doit exister avant d’appeler [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea).</span><span class="sxs-lookup"><span data-stu-id="834bc-121">If installing your service to run under a user account, the account must exist before you call [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea).</span></span> <span data-ttu-id="834bc-122">Vous pouvez utiliser un compte existant ou en créer un dans le cadre de l’installrt de l’ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="834bc-122">You can use an existing account or create one as part of the host-computer installrt.</span></span> <span data-ttu-id="834bc-123">Pour plus d’informations, consultez [configuration d’un compte d’utilisateur de service](setting-up-a-serviceampaposs-user-account.md).</span><span class="sxs-lookup"><span data-stu-id="834bc-123">For more information, see [Setting up a Service's User Account](setting-up-a-serviceampaposs-user-account.md).</span></span>
-   <span data-ttu-id="834bc-124">Authentification.</span><span class="sxs-lookup"><span data-stu-id="834bc-124">Authentication.</span></span> <span data-ttu-id="834bc-125">Si vous souhaitez que les clients utilisent l’authentification mutuelle Kerberos, inscrivez les noms de principal du service sur le compte d’ouverture de session du service.</span><span class="sxs-lookup"><span data-stu-id="834bc-125">If you want clients to use Kerberos mutual authentication, register the SPNs on the service's logon account.</span></span> <span data-ttu-id="834bc-126">Si le service s’exécute sous le compte LocalSystem, le compte d’ouverture de session du service est le compte d’ordinateur de l’ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="834bc-126">If the service runs under the LocalSystem account, the service's logon account is the computer account of the host computer.</span></span> <span data-ttu-id="834bc-127">Pour plus d'informations, consultez la page [Noms de principal de service](service-principal-names.md).</span><span class="sxs-lookup"><span data-stu-id="834bc-127">For more information, see [Service Principal Names](service-principal-names.md).</span></span>
-   <span data-ttu-id="834bc-128">Accorder l’accès.</span><span class="sxs-lookup"><span data-stu-id="834bc-128">Grant Access.</span></span> <span data-ttu-id="834bc-129">Assurez-vous que le service au moment de l’exécution dispose des droits d’accès et des privilèges nécessaires pour effectuer ses tâches.</span><span class="sxs-lookup"><span data-stu-id="834bc-129">Ensure that the service at run time has the access rights and privileges that it requires to perform its tasks.</span></span> <span data-ttu-id="834bc-130">Cela peut nécessiter la définition des entrées de contrôle d’accès (ACE) dans les descripteurs de sécurité de diverses ressources, c’est-à-dire des objets d’annuaire, des partages de fichiers, etc., afin d’accorder les droits d’accès nécessaires au compte d’utilisateur ou d’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="834bc-130">This can require setting access-control entries (ACEs) in the security descriptors of various resources, that is directory objects, file shares, and so on, to allow the necessary access rights to the user or computer account.</span></span> <span data-ttu-id="834bc-131">Pour plus d’informations, consultez [octroi de droits d’accès au compte d’ouverture de session du service](granting-access-rights-to-the-service-logon-account.md).</span><span class="sxs-lookup"><span data-stu-id="834bc-131">For more information, see [Granting Access Rights to the Service Logon Account](granting-access-rights-to-the-service-logon-account.md).</span></span>
-   <span data-ttu-id="834bc-132">Définir des privilèges.</span><span class="sxs-lookup"><span data-stu-id="834bc-132">Set Privileges.</span></span> <span data-ttu-id="834bc-133">Affectez des privilèges au compte d’ouverture de session spécifié, par exemple le droit d’ouvrir une session en tant que service sur l’ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="834bc-133">Assign privileges to the specified logon account, such as the right to logon as a service to the host computer.</span></span> <span data-ttu-id="834bc-134">Pour plus d’informations, consultez [accorder des droits d’ouverture de session en tant que service sur l’ordinateur hôte](granting-logon-as-service-right-on-the-host-computer.md).</span><span class="sxs-lookup"><span data-stu-id="834bc-134">For more information, see [Granting Logon as Service Right on the Host Computer](granting-logon-as-service-right-on-the-host-computer.md).</span></span>

<span data-ttu-id="834bc-135">Après l’installation d’un service, des tâches de maintenance sont liées à votre compte d’ouverture de session du service.</span><span class="sxs-lookup"><span data-stu-id="834bc-135">After a service is installed, there are maintenance tasks that relate to your service logon account.</span></span> <span data-ttu-id="834bc-136">Pour plus d’informations, consultez [tâches de maintenance de compte d’ouverture de session](logon-account-maintenance-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="834bc-136">For more information, see [Logon Account Maintenance Tasks](logon-account-maintenance-tasks.md).</span></span>

-   <span data-ttu-id="834bc-137">Maintenance des mots de passe.</span><span class="sxs-lookup"><span data-stu-id="834bc-137">Password maintenance.</span></span> <span data-ttu-id="834bc-138">Pour un service qui s’exécute sous un compte d’utilisateur, vous devez modifier régulièrement le mot de passe et conserver le mot de passe synchronisé avec le mot de passe utilisé par un ou plusieurs gestionnaires de contrôle des services locaux pour démarrer le service.</span><span class="sxs-lookup"><span data-stu-id="834bc-138">For a service that runs under a user account, you must periodically change the password and keep the password in sync with the password used by one or more local service control managers to start the service.</span></span>
-   <span data-ttu-id="834bc-139">Maintenance du SPN.</span><span class="sxs-lookup"><span data-stu-id="834bc-139">SPN maintenance.</span></span> <span data-ttu-id="834bc-140">Si un compte d’ouverture de session de service change, supprimez les SPN inscrits sur l’ancien compte et inscrivez-les sur le nouveau compte.</span><span class="sxs-lookup"><span data-stu-id="834bc-140">If a service logon account changes, remove the SPNs registered on the old account and register them on the new account.</span></span> <span data-ttu-id="834bc-141">Sachez que lorsqu’un service est installé, un administrateur de domaine peut modifier le compte sous lequel votre service s’exécute ; Utilisez les fonctions Win32 ou l’interface utilisateur de l’outil d’administration gestion de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="834bc-141">Be aware that when a service is installed, a domain administrator can change the account under which your service runs; use Win32 functions or the user interface of the Computer Management administrative tool.</span></span>
-   <span data-ttu-id="834bc-142">Maintenance ACE.</span><span class="sxs-lookup"><span data-stu-id="834bc-142">ACE maintenance.</span></span> <span data-ttu-id="834bc-143">Si un compte d’ouverture de session de service change, vous devez mettre à jour les ACE et les appartenances aux groupes pour vous assurer que le service peut toujours accéder aux ressources nécessaires.</span><span class="sxs-lookup"><span data-stu-id="834bc-143">If a service logon account changes, you need to update ACEs and group memberships to ensure that the service can still access the necessary resources.</span></span>

 

 