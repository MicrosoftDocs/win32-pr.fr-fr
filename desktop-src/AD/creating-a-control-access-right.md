---
title: Création d’un droit d’accès au contrôle
description: Pour ajouter un droit d’accès de contrôle à un serveur de Active Directory, créez un objet controlAccessRight dans le conteneur Extended-Rights de la partition de configuration.
ms.assetid: dacd42c6-17d9-4dfe-8f51-e4a470766494
ms.tgt_platform: multiple
keywords:
- Création d’un droit d’accès au contrôle AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11bdc764b09f0fe5bd165e87e23a89db7d368bfe
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/17/2020
ms.locfileid: "103724596"
---
# <a name="creating-a-control-access-right"></a><span data-ttu-id="2f834-104">Création d’un droit d’accès au contrôle</span><span class="sxs-lookup"><span data-stu-id="2f834-104">Creating a Control Access Right</span></span>

<span data-ttu-id="2f834-105">Pour ajouter un droit d’accès de contrôle à un serveur de Active Directory, créez un objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) dans le conteneur Extended-Rights de la partition de configuration.</span><span class="sxs-lookup"><span data-stu-id="2f834-105">To add a control access right to an Active Directory server, create a [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object in the Extended-Rights container of the Configuration partition.</span></span> <span data-ttu-id="2f834-106">Pour plus d’informations et pour obtenir un exemple de code, consultez [exemple de code pour la création d’un droit d’accès de contrôle](example-code-for-creating-a-control-access-right.md).</span><span class="sxs-lookup"><span data-stu-id="2f834-106">For more information and a code example, see [Example Code for Creating a Control Access Right](example-code-for-creating-a-control-access-right.md).</span></span> <span data-ttu-id="2f834-107">Pour utiliser le droit d’accès au contrôle, vous devez effectuer quelques étapes supplémentaires, selon que le droit d’accès au contrôle est pour une opération spéciale ou un jeu de propriétés.</span><span class="sxs-lookup"><span data-stu-id="2f834-107">To use the control access right, you must complete a few more steps, depending on whether the control access right is for a special operation or a property set.</span></span>

<span data-ttu-id="2f834-108">Si vous définissez un droit d’accès de contrôle pour un jeu de propriétés, utilisez la **rightsGUID** de l’objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) pour identifier les propriétés dans le jeu.</span><span class="sxs-lookup"><span data-stu-id="2f834-108">If you define a control access right for a property set, use the **rightsGUID** of the [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object to identify the properties in the set.</span></span> <span data-ttu-id="2f834-109">Chaque propriété est définie par un objet [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) dans le schéma Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2f834-109">Every property is defined by an [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) object in the Active Directory schema.</span></span> <span data-ttu-id="2f834-110">La propriété [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) d’un objet **attributeSchema** identifie le jeu de propriétés, le cas échéant, auquel la propriété appartient.</span><span class="sxs-lookup"><span data-stu-id="2f834-110">The [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) property of an **attributeSchema** object identifies the property set, if any, that the property belongs to.</span></span> <span data-ttu-id="2f834-111">Sachez que la propriété **attributeSecurityGUID** est à valeur unique et stocke le GUID au format binaire (syntaxe de chaîne d’octets).</span><span class="sxs-lookup"><span data-stu-id="2f834-111">Be aware that the **attributeSecurityGUID** property is single-valued and stores the GUID in binary format (octet string syntax).</span></span>

<span data-ttu-id="2f834-112">Si vous définissez un droit d’accès de contrôle pour placer des restrictions sur l’accès à une opération particulière, votre application doit effectuer la vérification d’accès lorsqu’un utilisateur tente l’opération.</span><span class="sxs-lookup"><span data-stu-id="2f834-112">If you define a control access right to place restrictions on access to a particular operation, your application must perform the access check when a user attempts the operation.</span></span>

<span data-ttu-id="2f834-113">**Pour configurer la vérification de l’accès**</span><span class="sxs-lookup"><span data-stu-id="2f834-113">**To set up access check**</span></span>

1.  <span data-ttu-id="2f834-114">Créez un droit d’accès de contrôle qui définit le type d’accès à l’application ou au service.</span><span class="sxs-lookup"><span data-stu-id="2f834-114">Create a control access right that defines the type of access to the application or service.</span></span> <span data-ttu-id="2f834-115">Pour plus d’informations, consultez l’exemple de code suivant.</span><span class="sxs-lookup"><span data-stu-id="2f834-115">For more information, see the following code example.</span></span>
2.  <span data-ttu-id="2f834-116">Créez un objet Active Directory Domain Services qui représente l’application, le service ou la ressource que vous protégez.</span><span class="sxs-lookup"><span data-stu-id="2f834-116">Create an Active Directory Domain Services object that represents the application, service, or resource that you are protecting.</span></span>
3.  <span data-ttu-id="2f834-117">Ajoutez des ACE d’objet à la liste DACL dans le descripteur de sécurité de l’objet pour accorder ou refuser aux utilisateurs ou aux groupes le droit d’accès au contrôle sur cet objet.</span><span class="sxs-lookup"><span data-stu-id="2f834-117">Add object ACEs to the DACL in the object security descriptor to grant or deny users or groups the control access right on that object.</span></span> <span data-ttu-id="2f834-118">Pour plus d’informations, consultez [définition d’une entrée de contrôle d’accès de contrôle dans l’ACL d’un objet](setting-a-control-access-right-ace-in-an-objectampaposs-acl.md).</span><span class="sxs-lookup"><span data-stu-id="2f834-118">For more information, see [Setting a Control Access Right ACE in an Object's ACL](setting-a-control-access-right-ace-in-an-objectampaposs-acl.md).</span></span>
4.  <span data-ttu-id="2f834-119">Lorsqu’un utilisateur tente d’effectuer l’opération, vérifiez les droits de l’utilisateur en passant le descripteur de sécurité de l’objet et le jeton d’accès utilisateur à la fonction [**AccessCheckByTypeResultList**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) .</span><span class="sxs-lookup"><span data-stu-id="2f834-119">When a user attempts to perform the operation, verify the user rights by passing the object security descriptor and the user access token to the [**AccessCheckByTypeResultList**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) function.</span></span> <span data-ttu-id="2f834-120">Pour plus d’informations, consultez [vérification du droit d’accès à un contrôle dans la liste](checking-a-control-access-right-in-an-objectampaposs-acl.md)de contrôle d’accès d’un objet.</span><span class="sxs-lookup"><span data-stu-id="2f834-120">For more information, see [Checking a Control Access Right in an Object's ACL](checking-a-control-access-right-in-an-objectampaposs-acl.md).</span></span>

<span data-ttu-id="2f834-121">En fonction du résultat de la vérification d’accès sur l’objet, l’application ou le service peut autoriser ou refuser l’accès de l’utilisateur à l’application ou au service.</span><span class="sxs-lookup"><span data-stu-id="2f834-121">Based on the result of the access check on the object, the application or service can allow or deny the user access to the application or service.</span></span>

<span data-ttu-id="2f834-122">Lorsque vous créez un objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) , définissez les attributs, indiqués dans le tableau suivant, pour que l’objet soit un droit d’accès de contrôle légal reconnu par Active Directory Domain Services et les systèmes de sécurité Windows.</span><span class="sxs-lookup"><span data-stu-id="2f834-122">When you create a [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object, set the attributes, listed in the following table, to make the object a legal control access right that is recognized by Active Directory Domain Services and the Windows security systems.</span></span>



| <span data-ttu-id="2f834-123">Attribut</span><span class="sxs-lookup"><span data-stu-id="2f834-123">Attribute</span></span>                                     | <span data-ttu-id="2f834-124">Description</span><span class="sxs-lookup"><span data-stu-id="2f834-124">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="2f834-125">**cn**</span><span class="sxs-lookup"><span data-stu-id="2f834-125">**cn**</span></span>](/windows/desktop/ADSchema/a-cn)                       | <span data-ttu-id="2f834-126">Propriété à valeur unique qui est le nom unique relatif (RDN) de l’objet dans le conteneur de Extended-Rights.</span><span class="sxs-lookup"><span data-stu-id="2f834-126">A single-valued property that is the object's relative distinguished name (RDN) in the Extended-Rights container.</span></span> <span data-ttu-id="2f834-127">Le nom **commun** est le nom du droit de contrôle d’accès dans Active Directory Domain Services.</span><span class="sxs-lookup"><span data-stu-id="2f834-127">The **cn** is the name of the access control right in Active Directory Domain Services.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="2f834-128">**appliesTo**</span><span class="sxs-lookup"><span data-stu-id="2f834-128">**appliesTo**</span></span>](/windows/desktop/ADSchema/a-appliesto)         | <span data-ttu-id="2f834-129">Propriété à valeurs multiples qui répertorie les classes d’objets auxquelles le droit de contrôle d’accès s’applique.</span><span class="sxs-lookup"><span data-stu-id="2f834-129">A multi-valued property that lists the object classes that the access control right applies to.</span></span> <span data-ttu-id="2f834-130">Par exemple, le droit [**« Envoyer en tant que**](/windows/desktop/ADSchema/r-send-as) contrôle d’accès » répertorie les classes d’objets [**utilisateur**](/windows/desktop/ADSchema/c-user) et [**ordinateur**](/windows/desktop/ADSchema/c-computer) dans sa propriété **appliesTo** .</span><span class="sxs-lookup"><span data-stu-id="2f834-130">For example, the [**Send-As**](/windows/desktop/ADSchema/r-send-as) access control right lists the [**user**](/windows/desktop/ADSchema/c-user) and [**computer**](/windows/desktop/ADSchema/c-computer) object classes in its **appliesTo** property.</span></span> <span data-ttu-id="2f834-131">Dans la liste, chaque classe d’objet est identifiée par le [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) de son objet [**classSchema**](/windows/desktop/ADSchema/c-classschema) .</span><span class="sxs-lookup"><span data-stu-id="2f834-131">In the list, each object class is identified by the [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) of its [**classSchema**](/windows/desktop/ADSchema/c-classschema) object.</span></span> <span data-ttu-id="2f834-132">Les GUID sont stockés sous forme de chaînes de la forme produite par la fonction [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) dans la bibliothèque com, mais sans les accolades de début et de fin ({}).</span><span class="sxs-lookup"><span data-stu-id="2f834-132">The GUIDs are stored as strings of the form produced by the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function in the COM library but without the starting and terminating braces ({ }).</span></span> <span data-ttu-id="2f834-133">Par exemple, le GUID suivant est le **schemaIDGUID** de la classe [**Computer**](/windows/desktop/ADSchema/c-computer) : bf967a86-0de6-11D0-A285-00aa003049e2.</span><span class="sxs-lookup"><span data-stu-id="2f834-133">For example, the following GUID is the **schemaIDGUID** for the [**computer**](/windows/desktop/ADSchema/c-computer) class: bf967a86-0de6-11d0-a285-00aa003049e2.</span></span><br/> <span data-ttu-id="2f834-134">Sachez que la propriété [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) d’un objet [**classSchema**](/windows/desktop/ADSchema/c-classschema) est stockée en tant que GUID binaire à l’aide de la syntaxe de chaîne d’octets.</span><span class="sxs-lookup"><span data-stu-id="2f834-134">Be aware that the [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) property of a [**classSchema**](/windows/desktop/ADSchema/c-classschema) object is stored as a binary GUID using the octet string syntax.</span></span> <span data-ttu-id="2f834-135">Pour convertir ce format de chaîne d’octets au format de chaîne utilisé dans la propriété [**appliesTo**](/windows/desktop/ADSchema/a-appliesto) , utilisez la fonction [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) et supprimez les accolades de la chaîne retournée.</span><span class="sxs-lookup"><span data-stu-id="2f834-135">To convert this octet string format to the string format used in the [**appliesTo**](/windows/desktop/ADSchema/a-appliesto) property, use the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function and remove the braces from the returned string.</span></span><br/> <span data-ttu-id="2f834-136">Pour plus d’informations sur la propriété [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) de l’une des classes d’objets prédéfinies, telles que [**User**](/windows/desktop/ADSchema/c-user) ou [**Computer**](/windows/desktop/ADSchema/c-computer), consultez la page de référence de la classe dans la référence de schéma Active Directory dans la [référence Active Directory Domain Services](active-directory-domain-services-reference.md).</span><span class="sxs-lookup"><span data-stu-id="2f834-136">For more information about the [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) property of one of the predefined object classes, such as [**user**](/windows/desktop/ADSchema/c-user) or [**computer**](/windows/desktop/ADSchema/c-computer), see the class reference page in the Active Directory Schema Reference in the [Active Directory Domain Services Reference](active-directory-domain-services-reference.md).</span></span> <span data-ttu-id="2f834-137">Pour plus d’informations et pour obtenir un exemple de code qui récupère un **schemaIDGUID** à partir d’un objet classSchema, consultez [lecture des objets AttributeSchema et classSchema](reading-attributeschema-and-classschema-objects.md).</span><span class="sxs-lookup"><span data-stu-id="2f834-137">For more information and a code example that retrieves a **schemaIDGUID** from a classSchema object, see [Reading attributeSchema and classSchema Objects](reading-attributeschema-and-classschema-objects.md).</span></span><br/> |
| [<span data-ttu-id="2f834-138">**displayName**</span><span class="sxs-lookup"><span data-stu-id="2f834-138">**displayName**</span></span>](/windows/desktop/ADSchema/a-displayname)     | <span data-ttu-id="2f834-139">Chaîne utilisée pour afficher le droit de contrôle d’accès dans les interfaces utilisateur, telles que la page de propriétés de **sécurité** et d’autres emplacements dans le composant logiciel enfichable MMC utilisateurs et ordinateurs Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2f834-139">The string used to display the access control right in user interfaces such as the **Security** property page and other places in the Active Directory Users and Computers MMC snap-in.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [<span data-ttu-id="2f834-140">**rightsGuid**</span><span class="sxs-lookup"><span data-stu-id="2f834-140">**rightsGuid**</span></span>](/windows/desktop/ADSchema/a-rightsguid)       | <span data-ttu-id="2f834-141">GUID qui identifie le droit d’accès du contrôle dans une entrée du contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="2f834-141">A GUID that identifies the control access right in an ACE.</span></span> <span data-ttu-id="2f834-142">Le GUID est stocké sous la forme d’une chaîne sous la forme produite par la fonction [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) , mais sans les accolades de début et de fin.</span><span class="sxs-lookup"><span data-stu-id="2f834-142">The GUID is stored as a string of the form produced by the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function, but without the starting and terminating braces.</span></span> <span data-ttu-id="2f834-143">Utilisez Uuidgen.exe pour un autre utilitaire afin de générer un GUID pour le droit d’accès au contrôle. Si vous définissez un nouveau jeu de propriétés, vous utilisez le [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid) de l’objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) pour identifier les propriétés dans le jeu.</span><span class="sxs-lookup"><span data-stu-id="2f834-143">Use Uuidgen.exe for some other utility to generate a GUID for the control access right.If you define a new property set, you use the [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid) of the [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object to identify the properties in the set.</span></span> <span data-ttu-id="2f834-144">Pour chaque propriété du jeu de propriétés, affectez à la valeur [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) de la propriété la valeur du **rightsGUID** du jeu de propriétés.</span><span class="sxs-lookup"><span data-stu-id="2f834-144">For each property in the property set, set the property's [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) value to the value of the property set's **rightsGUID**.</span></span> <span data-ttu-id="2f834-145">La valeur **attributeSecurityGUID** d’une propriété est stockée dans la [**définition de schéma d’enregistrement**](/windows/desktop/ADSchema/c-attributeschema) de la propriété dans le schéma Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2f834-145">A property's **attributeSecurityGUID** value is stored in the property's [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) definition in the Active Directory schema.</span></span> <span data-ttu-id="2f834-146">La propriété **attributeSecurityGUID** est à valeur unique et stocke le GUID au format binaire (syntaxe de la chaîne d’octets).</span><span class="sxs-lookup"><span data-stu-id="2f834-146">The **attributeSecurityGUID** property is single-valued and stores the GUID in binary format (octet string syntax).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [<span data-ttu-id="2f834-147">**objectClass**</span><span class="sxs-lookup"><span data-stu-id="2f834-147">**objectClass**</span></span>](/windows/desktop/ADSchema/a-objectclass)     | <span data-ttu-id="2f834-148">Cet attribut spécifie [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) comme classe d’objet.</span><span class="sxs-lookup"><span data-stu-id="2f834-148">This attribute specifies [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) as the object class.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="2f834-149">**validAccesses**</span><span class="sxs-lookup"><span data-stu-id="2f834-149">**validAccesses**</span></span>](/windows/desktop/ADSchema/a-validaccesses) | <span data-ttu-id="2f834-150">Pour les jeux de propriétés, affectez à cet attribut la valeur 0x30 (**ad \_ Right \_ DS \_ Read \_ prop** de la \| **\_ bonne lecture \_ DS \_ Write \_** prop).</span><span class="sxs-lookup"><span data-stu-id="2f834-150">For property sets, set this attribute to 0x30 (**ADS\_RIGHT\_DS\_READ\_PROP** \| **ADS\_RIGHT\_DS\_WRITE\_PROP**).</span></span> <span data-ttu-id="2f834-151">Pour contrôler les droits d’accès, définissez cet attribut sur 0x100 (**ad \_ Right \_ DS \_ Control \_ Access**).</span><span class="sxs-lookup"><span data-stu-id="2f834-151">For control access rights, set this attribute to 0x100 (**ADS\_RIGHT\_DS\_CONTROL\_ACCESS**).</span></span> <span data-ttu-id="2f834-152">La page de propriétés de sécurité reconnaît les droits d’accès de contrôle uniquement si l’attribut [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) est défini sur la valeur appropriée.</span><span class="sxs-lookup"><span data-stu-id="2f834-152">The security property page recognizes control access rights only if the [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) attribute is set to the appropriate value.</span></span> <span data-ttu-id="2f834-153">Si la valeur est zéro, le droit d’accès du contrôle est ignoré ou n’est pas affiché par la page de propriétés de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2f834-153">If zero, the control access right is ignored or not displayed by the security property page.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

<span data-ttu-id="2f834-154">Sachez que les classes de schéma prédéfinies utilisent l’attribut **localizationDisplayId** d’un objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) pour spécifier un identificateur de message utilisé pour récupérer un nom complet localisé à partir Dssec.dll.</span><span class="sxs-lookup"><span data-stu-id="2f834-154">Be aware that the predefined schema classes use the **localizationDisplayId** attribute of a [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object to specify a message identifier used to retrieve a localized display name from Dssec.dll.</span></span> <span data-ttu-id="2f834-155">Ne définissez pas l’attribut **localizationDisplayId** si vous définissez un nouvel objet **controlAccessRight** .</span><span class="sxs-lookup"><span data-stu-id="2f834-155">Do not set the **localizationDisplayId** attribute if you define a new **controlAccessRight** object.</span></span>

 

