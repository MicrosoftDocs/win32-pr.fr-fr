---
title: Création d’un droit d’accès au contrôle
description: Pour ajouter un droit d’accès de contrôle à un serveur de Active Directory, créez un objet controlAccessRight dans le conteneur Extended-Rights de la partition de configuration.
ms.assetid: dacd42c6-17d9-4dfe-8f51-e4a470766494
ms.tgt_platform: multiple
keywords:
- Création d’un droit d’accès au contrôle AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11bdc764b09f0fe5bd165e87e23a89db7d368bfe
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/17/2020
ms.locfileid: "103724596"
---
# <a name="creating-a-control-access-right"></a>Création d’un droit d’accès au contrôle

Pour ajouter un droit d’accès de contrôle à un serveur de Active Directory, créez un objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) dans le conteneur Extended-Rights de la partition de configuration. Pour plus d’informations et pour obtenir un exemple de code, consultez [exemple de code pour la création d’un droit d’accès de contrôle](example-code-for-creating-a-control-access-right.md). Pour utiliser le droit d’accès au contrôle, vous devez effectuer quelques étapes supplémentaires, selon que le droit d’accès au contrôle est pour une opération spéciale ou un jeu de propriétés.

Si vous définissez un droit d’accès de contrôle pour un jeu de propriétés, utilisez la **rightsGUID** de l’objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) pour identifier les propriétés dans le jeu. Chaque propriété est définie par un objet [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) dans le schéma Active Directory. La propriété [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) d’un objet **attributeSchema** identifie le jeu de propriétés, le cas échéant, auquel la propriété appartient. Sachez que la propriété **attributeSecurityGUID** est à valeur unique et stocke le GUID au format binaire (syntaxe de chaîne d’octets).

Si vous définissez un droit d’accès de contrôle pour placer des restrictions sur l’accès à une opération particulière, votre application doit effectuer la vérification d’accès lorsqu’un utilisateur tente l’opération.

**Pour configurer la vérification de l’accès**

1.  Créez un droit d’accès de contrôle qui définit le type d’accès à l’application ou au service. Pour plus d’informations, consultez l’exemple de code suivant.
2.  Créez un objet Active Directory Domain Services qui représente l’application, le service ou la ressource que vous protégez.
3.  Ajoutez des ACE d’objet à la liste DACL dans le descripteur de sécurité de l’objet pour accorder ou refuser aux utilisateurs ou aux groupes le droit d’accès au contrôle sur cet objet. Pour plus d’informations, consultez [définition d’une entrée de contrôle d’accès de contrôle dans l’ACL d’un objet](setting-a-control-access-right-ace-in-an-objectampaposs-acl.md).
4.  Lorsqu’un utilisateur tente d’effectuer l’opération, vérifiez les droits de l’utilisateur en passant le descripteur de sécurité de l’objet et le jeton d’accès utilisateur à la fonction [**AccessCheckByTypeResultList**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) . Pour plus d’informations, consultez [vérification du droit d’accès à un contrôle dans la liste](checking-a-control-access-right-in-an-objectampaposs-acl.md)de contrôle d’accès d’un objet.

En fonction du résultat de la vérification d’accès sur l’objet, l’application ou le service peut autoriser ou refuser l’accès de l’utilisateur à l’application ou au service.

Lorsque vous créez un objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) , définissez les attributs, indiqués dans le tableau suivant, pour que l’objet soit un droit d’accès de contrôle légal reconnu par Active Directory Domain Services et les systèmes de sécurité Windows.



| Attribut                                     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**cn**](/windows/desktop/ADSchema/a-cn)                       | Propriété à valeur unique qui est le nom unique relatif (RDN) de l’objet dans le conteneur de Extended-Rights. Le nom **commun** est le nom du droit de contrôle d’accès dans Active Directory Domain Services.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**appliesTo**](/windows/desktop/ADSchema/a-appliesto)         | Propriété à valeurs multiples qui répertorie les classes d’objets auxquelles le droit de contrôle d’accès s’applique. Par exemple, le droit [**« Envoyer en tant que**](/windows/desktop/ADSchema/r-send-as) contrôle d’accès » répertorie les classes d’objets [**utilisateur**](/windows/desktop/ADSchema/c-user) et [**ordinateur**](/windows/desktop/ADSchema/c-computer) dans sa propriété **appliesTo** . Dans la liste, chaque classe d’objet est identifiée par le [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) de son objet [**classSchema**](/windows/desktop/ADSchema/c-classschema) . Les GUID sont stockés sous forme de chaînes de la forme produite par la fonction [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) dans la bibliothèque com, mais sans les accolades de début et de fin ({}). Par exemple, le GUID suivant est le **schemaIDGUID** de la classe [**Computer**](/windows/desktop/ADSchema/c-computer) : bf967a86-0de6-11D0-A285-00aa003049e2.<br/> Sachez que la propriété [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) d’un objet [**classSchema**](/windows/desktop/ADSchema/c-classschema) est stockée en tant que GUID binaire à l’aide de la syntaxe de chaîne d’octets. Pour convertir ce format de chaîne d’octets au format de chaîne utilisé dans la propriété [**appliesTo**](/windows/desktop/ADSchema/a-appliesto) , utilisez la fonction [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) et supprimez les accolades de la chaîne retournée.<br/> Pour plus d’informations sur la propriété [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) de l’une des classes d’objets prédéfinies, telles que [**User**](/windows/desktop/ADSchema/c-user) ou [**Computer**](/windows/desktop/ADSchema/c-computer), consultez la page de référence de la classe dans la référence de schéma Active Directory dans la [référence Active Directory Domain Services](active-directory-domain-services-reference.md). Pour plus d’informations et pour obtenir un exemple de code qui récupère un **schemaIDGUID** à partir d’un objet classSchema, consultez [lecture des objets AttributeSchema et classSchema](reading-attributeschema-and-classschema-objects.md).<br/> |
| [**displayName**](/windows/desktop/ADSchema/a-displayname)     | Chaîne utilisée pour afficher le droit de contrôle d’accès dans les interfaces utilisateur, telles que la page de propriétés de **sécurité** et d’autres emplacements dans le composant logiciel enfichable MMC utilisateurs et ordinateurs Active Directory.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid)       | GUID qui identifie le droit d’accès du contrôle dans une entrée du contrôle d’accès. Le GUID est stocké sous la forme d’une chaîne sous la forme produite par la fonction [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) , mais sans les accolades de début et de fin. Utilisez Uuidgen.exe pour un autre utilitaire afin de générer un GUID pour le droit d’accès au contrôle. Si vous définissez un nouveau jeu de propriétés, vous utilisez le [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid) de l’objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) pour identifier les propriétés dans le jeu. Pour chaque propriété du jeu de propriétés, affectez à la valeur [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) de la propriété la valeur du **rightsGUID** du jeu de propriétés. La valeur **attributeSecurityGUID** d’une propriété est stockée dans la [**définition de schéma d’enregistrement**](/windows/desktop/ADSchema/c-attributeschema) de la propriété dans le schéma Active Directory. La propriété **attributeSecurityGUID** est à valeur unique et stocke le GUID au format binaire (syntaxe de la chaîne d’octets).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [**objectClass**](/windows/desktop/ADSchema/a-objectclass)     | Cet attribut spécifie [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) comme classe d’objet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) | Pour les jeux de propriétés, affectez à cet attribut la valeur 0x30 (**ad \_ Right \_ DS \_ Read \_ prop** de la \| **\_ bonne lecture \_ DS \_ Write \_** prop). Pour contrôler les droits d’accès, définissez cet attribut sur 0x100 (**ad \_ Right \_ DS \_ Control \_ Access**). La page de propriétés de sécurité reconnaît les droits d’accès de contrôle uniquement si l’attribut [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) est défini sur la valeur appropriée. Si la valeur est zéro, le droit d’accès du contrôle est ignoré ou n’est pas affiché par la page de propriétés de sécurité.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

Sachez que les classes de schéma prédéfinies utilisent l’attribut **localizationDisplayId** d’un objet [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) pour spécifier un identificateur de message utilisé pour récupérer un nom complet localisé à partir Dssec.dll. Ne définissez pas l’attribut **localizationDisplayId** si vous définissez un nouvel objet **controlAccessRight** .

 

