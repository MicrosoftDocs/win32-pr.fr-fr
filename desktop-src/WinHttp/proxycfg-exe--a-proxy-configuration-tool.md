---
description: Cette rubrique explique l’utilisation de l’outil de configuration de proxy des services HTTP Microsoft Windows (WinHTTP), &\# 0034 ; ProxyCfg.exe&\# 0034 ;.
ms.assetid: f96adf59-59be-414e-ad6f-9eac05f4b975
title: Outils de configuration de proxy Netsh.exe et ProxyCfg.exe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 96a33e832d324a5863652673b8e25725fba72e88
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104524826"
---
# <a name="netshexe-and-proxycfgexe-proxy-configuration-tools"></a><span data-ttu-id="f91d2-103">Outils de configuration de proxy Netsh.exe et ProxyCfg.exe</span><span class="sxs-lookup"><span data-stu-id="f91d2-103">Netsh.exe and ProxyCfg.exe Proxy Configuration Tools</span></span>

<span data-ttu-id="f91d2-104">\* \* Windows Vista et Windows Server 2008 : \* \*</span><span class="sxs-lookup"><span data-stu-id="f91d2-104">\*\*Windows Vista and Windows Server 2008:  \*\*</span></span>

<span data-ttu-id="f91d2-105">ProxyCfg.exe est déconseillé.</span><span class="sxs-lookup"><span data-stu-id="f91d2-105">ProxyCfg.exe has been deprecated.</span></span> <span data-ttu-id="f91d2-106">Elle est remplacée par les commandes [Netsh.exe WinHTTP](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731131(v=ws.10)) .</span><span class="sxs-lookup"><span data-stu-id="f91d2-106">It is replaced by the [Netsh.exe winhttp](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731131(v=ws.10)) commands.</span></span>

<span data-ttu-id="f91d2-107">Cette rubrique explique l’utilisation de l’outil de configuration de proxy [Microsoft Windows http services (WinHTTP)](about-winhttp.md) , « ProxyCfg.exe ».</span><span class="sxs-lookup"><span data-stu-id="f91d2-107">This topic explains the use of the [Microsoft Windows HTTP Services (WinHTTP)](about-winhttp.md) proxy configuration tool, "ProxyCfg.exe".</span></span>

<span data-ttu-id="f91d2-108">Il existe deux façons d’accéder aux serveurs http et HTTPs (Secure Hypertext Transfer Protocol) via un proxy à l’aide des services HTTP Microsoft Windows (WinHTTP).</span><span class="sxs-lookup"><span data-stu-id="f91d2-108">There are two ways to access HTTP and Secure Hypertext Transfer Protocol (HTTPS) servers through a proxy using Microsoft Windows HTTP Services (WinHTTP).</span></span> <span data-ttu-id="f91d2-109">Tout d’abord, vous pouvez spécifier des paramètres de proxy à partir de votre application WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="f91d2-109">First, you can specify proxy settings from within your WinHTTP application.</span></span> <span data-ttu-id="f91d2-110">Deuxièmement, vous pouvez spécifier des paramètres de proxy par défaut en dehors de votre application à l’aide de l’utilitaire de configuration de proxy situé dans le répertoire% windir% \\ system32.</span><span class="sxs-lookup"><span data-stu-id="f91d2-110">Second, you can specify default proxy settings from outside your application using the proxy configuration utility located in the %windir%\\system32 directory.</span></span>

<span data-ttu-id="f91d2-111">Vous pouvez définir par programmation les données de proxy à partir de votre application ou de votre script.</span><span class="sxs-lookup"><span data-stu-id="f91d2-111">You can programmatically set the proxy data from within your application or script.</span></span> <span data-ttu-id="f91d2-112">Si vous écrivez une application à l’aide de l’API WinHTTP, utilisez l’une des deux techniques suivantes pour modifier les paramètres de proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-112">If you are writing an application using the WinHTTP API, use one of the following two techniques to change proxy settings.</span></span>

-   <span data-ttu-id="f91d2-113">Utilisez la fonction [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) .</span><span class="sxs-lookup"><span data-stu-id="f91d2-113">Use the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) function.</span></span> <span data-ttu-id="f91d2-114">Spécifiez le type d’accès dans le deuxième paramètre, le nom du proxy dans le troisième paramètre et une liste de contournement dans le quatrième paramètre.</span><span class="sxs-lookup"><span data-stu-id="f91d2-114">Specify access type in the second parameter, the name of the proxy in the third parameter, and a bypass list in the fourth parameter.</span></span> <span data-ttu-id="f91d2-115">L’exemple suivant montre comment la fonction [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) peut être utilisée pour définir des données de proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-115">The following example shows how the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) function can be used to set proxy data.</span></span>

    ``` syntax
    hSession = WinHttpOpen( L"WinHTTP Example/1.0",  
                            WINHTTP_ACCESS_TYPE_NAMED_PROXY,
                            L"proxy_name", 
                            L"<local>", 
                            0);
    ```

-   <span data-ttu-id="f91d2-116">Utilisez la fonction [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) .</span><span class="sxs-lookup"><span data-stu-id="f91d2-116">Use the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function.</span></span> <span data-ttu-id="f91d2-117">L’indicateur de [**\_ \_ proxy de l’option WinHTTP**](option-flags.md) vous permet de spécifier des paramètres de proxy avec une structure d' [**\_ \_ informations de proxy WinHTTP**](/windows/win32/api/winhttp/ns-winhttp-winhttp_proxy_info) .</span><span class="sxs-lookup"><span data-stu-id="f91d2-117">The [**WINHTTP\_OPTION\_PROXY**](option-flags.md) flag enables you to specify proxy settings with a [**WINHTTP\_PROXY\_INFO**](/windows/win32/api/winhttp/ns-winhttp-winhttp_proxy_info) structure.</span></span> <span data-ttu-id="f91d2-118">L’exemple de code suivant montre comment la fonction [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) peut être utilisée pour définir des données de proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-118">The following example code shows how the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function can be used to set proxy data.</span></span>

    ``` syntax
    WINHTTP_PROXY_INFO proxyInfo;
    proxyInfo.dwAccessType = WINHTTP_ACCESS_TYPE_NAMED_PROXY;
    proxyInfo.lpszProxy = L"proxy_name";
    proxyInfo.lpszProxyBypass = L"<local>";
        
    // Set the proxy information for this session.
    WinHttpSetOption( hSession, 
                      WINHTTP_OPTION_PROXY, 
                      &proxyInfo, 
                      sizeof(proxyInfo));
    ```

<span data-ttu-id="f91d2-119">Si vous écrivez un script ou une application à l’aide de l’objet [**WinHttpRequest**](winhttprequest.md) , utilisez la technique suivante pour modifier les paramètres du proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-119">If you are writing a script or an application using the [**WinHttpRequest**](winhttprequest.md) object, use the following technique to change proxy settings.</span></span>

-   <span data-ttu-id="f91d2-120">Utilisez la méthode [**SetProxy**](iwinhttprequest-setproxy.md) .</span><span class="sxs-lookup"><span data-stu-id="f91d2-120">Use the [**SetProxy**](iwinhttprequest-setproxy.md) method.</span></span> <span data-ttu-id="f91d2-121">Spécifiez le type d’accès dans le premier paramètre, le nom du proxy dans le deuxième paramètre et une liste de contournement dans le troisième paramètre.</span><span class="sxs-lookup"><span data-stu-id="f91d2-121">Specify the access type in the first parameter, the name of the proxy in the second parameter, and a bypass list in the third parameter.</span></span> <span data-ttu-id="f91d2-122">L’exemple suivant montre comment la méthode [**SetProxy**](iwinhttprequest-setproxy.md) peut être utilisée dans un script pour définir des données de proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-122">The following example shows how the [**SetProxy**](iwinhttprequest-setproxy.md) method can be used in script to set proxy data.</span></span>

    ``` syntax
    WinHttpReq.SetProxy( HTTPREQUEST_PROXYSETTING_PROXY, 
                         "proxy_server:80", 
                         "*.microsoft.com");
    ```

<span data-ttu-id="f91d2-123">Pour spécifier les paramètres par défaut et éliminer la nécessité d’utiliser la méthode [**SetProxy**](iwinhttprequest-setproxy.md) ou la fonction [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) , utilisez l’utilitaire de configuration du proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-123">To specify default settings and eliminate the need to use either the [**SetProxy**](iwinhttprequest-setproxy.md) method or the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function, use the proxy configuration utility.</span></span> <span data-ttu-id="f91d2-124">À l’aide de cet utilitaire, vous pouvez spécifier que votre application accède à un réseau directement, par le biais d’un proxy ou par le biais d’une combinaison d’accès direct et par proxy, en spécifiant une liste de contournement.</span><span class="sxs-lookup"><span data-stu-id="f91d2-124">Using this utility, you can specify that your application access a network either directly, through a proxy, or through a combination of direct and proxy access by specifying a bypass list.</span></span> <span data-ttu-id="f91d2-125">Lorsque vous utilisez l’API WinHTTP, l’outil de configuration de proxy détermine uniquement les paramètres lorsque vous transmettez l’indicateur **\_ \_ \_ par défaut du type d’accès WinHTTP** à l’API [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) .</span><span class="sxs-lookup"><span data-stu-id="f91d2-125">When you use the WinHTTP API, the proxy configuration tool only determines the settings when you pass the **WINHTTP\_ACCESS\_TYPE\_DEFAULT** flag to the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) API.</span></span> <span data-ttu-id="f91d2-126">L’objet [**WinHttpRequest**](winhttprequest.md) utilise les paramètres de l’outil de configuration du proxy par défaut.</span><span class="sxs-lookup"><span data-stu-id="f91d2-126">The [**WinHttpRequest**](winhttprequest.md) object uses the proxy configuration tool settings by default.</span></span>

<span data-ttu-id="f91d2-127">Les paramètres de proxy pour WinHTTP ne sont pas les paramètres de proxy pour Microsoft Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="f91d2-127">The proxy settings for WinHTTP are not the proxy settings for Microsoft Internet Explorer.</span></span> <span data-ttu-id="f91d2-128">Vous ne pouvez pas configurer les paramètres de proxy pour WinHTTP dans le panneau de configuration Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="f91d2-128">You cannot configure the proxy settings for WinHTTP in the Microsoft Windows Control Panel.</span></span> <span data-ttu-id="f91d2-129">L’utilisation de l’utilitaire de configuration de proxy WinHTTP ne modifie pas les paramètres que vous utilisez pour Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="f91d2-129">Using the WinHTTP proxy configuration utility does not alter the settings you use for Internet Explorer.</span></span>

> [!Note]  
> <span data-ttu-id="f91d2-130">Si vous essayez d’ouvrir et d’envoyer une requête HTTP à l’aide de WinHTTP et que les paramètres du proxy sont incorrects, une erreur se produit.</span><span class="sxs-lookup"><span data-stu-id="f91d2-130">If you attempt to open and send an HTTP request using WinHTTP and the proxy settings are incorrect, an error occurs.</span></span>

 

## <a name="command-line-parameters"></a><span data-ttu-id="f91d2-131">Paramètres de ligne de commande</span><span class="sxs-lookup"><span data-stu-id="f91d2-131">Command Line Parameters</span></span>

<span data-ttu-id="f91d2-132">Le tableau suivant répertorie les paramètres de ligne de commande disponibles pour une utilisation avec l’outil ProxyCfg.exe.</span><span class="sxs-lookup"><span data-stu-id="f91d2-132">The following table lists the command line parameters available for use with the ProxyCfg.exe tool.</span></span>



| <span data-ttu-id="f91d2-133">Paramètre</span><span class="sxs-lookup"><span data-stu-id="f91d2-133">Parameter</span></span> | <span data-ttu-id="f91d2-134">Description</span><span class="sxs-lookup"><span data-stu-id="f91d2-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f91d2-135">aucun</span><span class="sxs-lookup"><span data-stu-id="f91d2-135">none</span></span>      | <span data-ttu-id="f91d2-136">Quand aucun paramètre n’est spécifié, les paramètres de proxy WinHTTP actuels sont affichés.</span><span class="sxs-lookup"><span data-stu-id="f91d2-136">When no parameters are specified, the current WinHTTP proxy settings are displayed.</span></span>                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="f91d2-137">?</span><span class="sxs-lookup"><span data-stu-id="f91d2-137">?</span></span>         | <span data-ttu-id="f91d2-138">Les informations d’aide s’affichent.</span><span class="sxs-lookup"><span data-stu-id="f91d2-138">Help information is displayed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="f91d2-139">d</span><span class="sxs-lookup"><span data-stu-id="f91d2-139">d</span></span>         | <span data-ttu-id="f91d2-140">Spécifie que les applications WinHTTP accèdent directement au réseau, sans proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-140">Specifies that WinHTTP applications access the network directly, without a proxy.</span></span>                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="f91d2-141">p</span><span class="sxs-lookup"><span data-stu-id="f91d2-141">p</span></span>         | <span data-ttu-id="f91d2-142">Spécifie le serveur proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-142">Specifies the proxy server.</span></span> <span data-ttu-id="f91d2-143">Vous pouvez également spécifier une liste facultative de serveurs accessibles sans proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-143">You can also specify an optional list of servers that are accessed without a proxy.</span></span>                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="f91d2-144">u</span><span class="sxs-lookup"><span data-stu-id="f91d2-144">u</span></span>         | <span data-ttu-id="f91d2-145">Spécifie que les applications WinHTTP utilisent les paramètres de proxy de l’utilisateur actuel pour Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="f91d2-145">Specifies that WinHTTP applications use the current user's proxy settings for Internet Explorer.</span></span> <span data-ttu-id="f91d2-146">Ce paramètre ne fonctionne pas si Internet Explorer détecte automatiquement les paramètres du proxy ou s’il utilise une URL de configuration automatique pour définir les informations du proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-146">This parameter does not work if Internet Explorer is automatically detecting proxy settings, or if it is using an automatic configuration URL to set the proxy information.</span></span>                                                                                                                                                      |
| <span data-ttu-id="f91d2-147">i</span><span class="sxs-lookup"><span data-stu-id="f91d2-147">i</span></span>         | <span data-ttu-id="f91d2-148">Spécifie que les applications WinHTTP utilisent les paramètres de proxy de l’utilisateur actuel pour Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="f91d2-148">Specifies that WinHTTP applications use the current user's proxy settings for Internet Explorer.</span></span> <span data-ttu-id="f91d2-149">Cela ne fonctionne que si ProxyCfg.exe n’a pas été utilisé précédemment.</span><span class="sxs-lookup"><span data-stu-id="f91d2-149">This only works when ProxyCfg.exe was not previously used.</span></span> <span data-ttu-id="f91d2-150">Si ProxyCfg.exe est installé, spécifiez que le paramètre de ligne de commande « u » utilise les paramètres manuels.</span><span class="sxs-lookup"><span data-stu-id="f91d2-150">If ProxyCfg.exe is installed, specify that the "u" command line parameter use the manual settings.</span></span> <span data-ttu-id="f91d2-151">Ce paramètre ne fonctionne pas si Internet Explorer détecte automatiquement les paramètres du proxy ou s’il utilise une URL de configuration automatique pour définir les informations du proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-151">This parameter does not work if Internet Explorer automatically detects proxy settings, or if it uses an automatic configuration URL to set the proxy information.</span></span> |



 

<span data-ttu-id="f91d2-152">Vous pouvez spécifier des proxies dans une chaîne délimitée par des espaces.</span><span class="sxs-lookup"><span data-stu-id="f91d2-152">You can specify proxies in a space-delimited string.</span></span> <span data-ttu-id="f91d2-153">Les listes de proxy peuvent contenir le numéro de port utilisé pour accéder au proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-153">The proxy listings can contain the port number that is used to access the proxy.</span></span> <span data-ttu-id="f91d2-154">Pour répertorier un proxy pour un protocole spécifique, la chaîne doit respecter le format, <protocol> = https://<\_ nom du proxy>.</span><span class="sxs-lookup"><span data-stu-id="f91d2-154">To list a proxy for a specific protocol, the string must follow the format, <protocol>=https://<proxy\_name>.</span></span> <span data-ttu-id="f91d2-155">Les protocoles valides sont HTTP et HTTPs.</span><span class="sxs-lookup"><span data-stu-id="f91d2-155">The valid protocols are HTTP and HTTPS.</span></span> <span data-ttu-id="f91d2-156">Par exemple, pour répertorier un proxy HTTP, une chaîne valide est http = https://http\_proxy\_name:80 , où \_ nom du proxy http \_ est le nom du serveur proxy et 80 est le numéro de port que vous devez utiliser pour accéder au proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-156">For example, to list an HTTP proxy, a valid string is http=https://http\_proxy\_name:80, where http\_proxy\_name is the name of the proxy server and 80 is the port number that you must use to access the proxy.</span></span> <span data-ttu-id="f91d2-157">Si le proxy utilise le numéro de port par défaut pour ce protocole, vous pouvez omettre le numéro de port.</span><span class="sxs-lookup"><span data-stu-id="f91d2-157">If the proxy uses the default port number for that protocol, then you can omit the port number.</span></span> <span data-ttu-id="f91d2-158">Si un nom de proxy est listé par lui-même, vous pouvez l’utiliser comme proxy par défaut pour tous les protocoles qui n’ont pas de proxy spécifié.</span><span class="sxs-lookup"><span data-stu-id="f91d2-158">If a proxy name is listed by itself, you can use it as the default proxy for any protocols that do not have a specified proxy.</span></span> <span data-ttu-id="f91d2-159">Par exemple, http = https://http\_proxy other \_ proxy utilise \_ le proxy HTTP pour toutes les opérations http, tandis que le protocole HTTPS utilise le proxy nommé Other \_ proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-159">For example, http=https://http\_proxy other\_proxy uses http\_proxy for any HTTP operations, while the HTTPS protocol uses the proxy named other\_proxy.</span></span>

<span data-ttu-id="f91d2-160">Vous pouvez répertorier les adresses IP ou les noms d’hôte connus localement dans la liste de contournement du proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-160">You can list locally known host names or IP addresses in the proxy bypass list.</span></span> <span data-ttu-id="f91d2-161">Cette liste peut contenir des caractères génériques, tels que « \* », qui obligent l’application à contourner le serveur proxy pour les adresses qui correspondent au modèle spécifié, par exemple « \* . Microsoft.com » ou « \* . org ».</span><span class="sxs-lookup"><span data-stu-id="f91d2-161">This list can contain wildcards, such as "\*", that cause the application to bypass the proxy server for addresses that fit the specified pattern, for example, "\*.microsoft.com" or "\*.org".</span></span> <span data-ttu-id="f91d2-162">Les caractères génériques doivent être les caractères les plus à gauche de la liste.</span><span class="sxs-lookup"><span data-stu-id="f91d2-162">Wildcard characters must be the left-most characters in the list.</span></span> <span data-ttu-id="f91d2-163">Par exemple \* , « AAA ». n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="f91d2-163">For example, "aaa.\*" is not supported.</span></span> <span data-ttu-id="f91d2-164">Pour répertorier plusieurs adresses et noms d'hôtes, séparez-les par des espaces ou des points-virgules dans la chaîne de contournement de proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-164">To list multiple addresses and host names, separate them with blank spaces or semicolons in the proxy bypass string.</span></span> <span data-ttu-id="f91d2-165">Si vous spécifiez la <local> macro, la fonction ignore tout nom d’hôte qui ne contient pas de point.</span><span class="sxs-lookup"><span data-stu-id="f91d2-165">If you specify the <local> macro, the function bypasses any host name that does not contain a period.</span></span>

> [!WARNING]
> <span data-ttu-id="f91d2-166">Après l’exécution de Proxycfg.exe, vous ne pouvez pas restaurer les paramètres de proxy précédents.</span><span class="sxs-lookup"><span data-stu-id="f91d2-166">After Proxycfg.exe runs, you cannot restore the previous proxy settings.</span></span> <span data-ttu-id="f91d2-167">Toutefois, vous pouvez supprimer les paramètres du proxy entièrement.</span><span class="sxs-lookup"><span data-stu-id="f91d2-167">However, you can remove the proxy settings entirely.</span></span>

 

## <a name="usage"></a><span data-ttu-id="f91d2-168">Utilisation</span><span class="sxs-lookup"><span data-stu-id="f91d2-168">Usage</span></span>

<span data-ttu-id="f91d2-169">Pour utiliser l’outil de configuration de proxy, ouvrez une fenêtre d’invite de commandes et exécutez l’utilitaire de configuration de proxy avec les paramètres de ligne de commande appropriés.</span><span class="sxs-lookup"><span data-stu-id="f91d2-169">To use the proxy configuration tool, open a command prompt window and run the proxy configuration utility with the appropriate command line parameters.</span></span> <span data-ttu-id="f91d2-170">La section suivante fournit des exemples de syntaxe.</span><span class="sxs-lookup"><span data-stu-id="f91d2-170">The following section provides syntax examples.</span></span>

## <a name="example-syntax"></a><span data-ttu-id="f91d2-171">Exemple de syntaxe</span><span class="sxs-lookup"><span data-stu-id="f91d2-171">Example Syntax</span></span>

### <a name="example-1-use-a-proxy-only-for-external-resources"></a><span data-ttu-id="f91d2-172">Exemple 1 : utiliser un proxy uniquement pour les ressources externes</span><span class="sxs-lookup"><span data-stu-id="f91d2-172">Example 1: Use a proxy only for external resources</span></span>

<span data-ttu-id="f91d2-173">Voici l’utilisation la plus courante pour Proxycfg.exe.</span><span class="sxs-lookup"><span data-stu-id="f91d2-173">The following is the most common use for Proxycfg.exe.</span></span> <span data-ttu-id="f91d2-174">Cette commande spécifie que les serveurs HTTP et HTTPs sont accessibles via le serveur proxy nommé « \_ serveur proxy », à l’exception des noms d’hôte qui ne contiennent pas de point.</span><span class="sxs-lookup"><span data-stu-id="f91d2-174">This command specifies that both HTTP and HTTPS servers are accessed through the proxy server named "proxy\_server", except for host names that do not contain a period.</span></span>

<span data-ttu-id="f91d2-175">**proxycfg-p \_ serveur proxy « <local> »**</span><span class="sxs-lookup"><span data-stu-id="f91d2-175">**proxycfg -p proxy\_server "<local>"**</span></span>

### <a name="example-2-use-a-proxy-for-all-resources"></a><span data-ttu-id="f91d2-176">Exemple 2 : utiliser un proxy pour toutes les ressources</span><span class="sxs-lookup"><span data-stu-id="f91d2-176">Example 2: Use a proxy for all resources</span></span>

<span data-ttu-id="f91d2-177">L’exemple suivant spécifie que les serveurs HTTP et HTTPs sont accessibles par le biais du serveur proxy nommé « \_ serveur proxy ».</span><span class="sxs-lookup"><span data-stu-id="f91d2-177">The following example specifies that both HTTP and HTTPS servers are accessed through the proxy server named "proxy\_server".</span></span> <span data-ttu-id="f91d2-178">Aucune liste de contournement n’est spécifiée.</span><span class="sxs-lookup"><span data-stu-id="f91d2-178">No bypass list is specified.</span></span>

<span data-ttu-id="f91d2-179">**serveur proxy proxycfg-p \_**</span><span class="sxs-lookup"><span data-stu-id="f91d2-179">**proxycfg -p proxy\_server**</span></span>

### <a name="example-3-use-a-different-proxy-for-secure-resources"></a><span data-ttu-id="f91d2-180">Exemple 3 : utiliser un proxy différent pour sécuriser les ressources</span><span class="sxs-lookup"><span data-stu-id="f91d2-180">Example 3: Use a different proxy for secure resources</span></span>

<span data-ttu-id="f91d2-181">L’exemple suivant spécifie que les serveurs HTTP sont accessibles via le proxy proxy HTTP et que les \_ serveurs https sont accessibles par le biais du proxy HTTPS \_ .</span><span class="sxs-lookup"><span data-stu-id="f91d2-181">The following example specifies that HTTP servers are accessed through the http\_proxy proxy and HTTPS servers are accessed through https\_proxy.</span></span> <span data-ttu-id="f91d2-182">Les sites intranet locaux et tout site dans le \* domaine. Microsoft.com ignorent le proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-182">Local intranet sites and any site in the \*.microsoft.com domain bypass the proxy.</span></span>

<span data-ttu-id="f91d2-183">**proxycfg-p "http = http \_ proxy HTTPS = proxy HTTPS \_ " " <local> ; \* . microsoft.com»**</span><span class="sxs-lookup"><span data-stu-id="f91d2-183">**proxycfg -p "http=http\_proxy https=https\_proxy" "<local>;\*.microsoft.com"**</span></span>

## <a name="removing-proxycfgexe"></a><span data-ttu-id="f91d2-184">Suppression de ProxyCfg.exe</span><span class="sxs-lookup"><span data-stu-id="f91d2-184">Removing ProxyCfg.exe</span></span>

<span data-ttu-id="f91d2-185">Après avoir utilisé l’outil de configuration de proxy, vous ne pouvez pas restaurer vos paramètres de proxy d’origine.</span><span class="sxs-lookup"><span data-stu-id="f91d2-185">After using the proxy configuration tool, you cannot restore your original proxy settings.</span></span> <span data-ttu-id="f91d2-186">Toutefois, si nécessaire, vous pouvez supprimer les paramètres de Registre créés par l’utilitaire.</span><span class="sxs-lookup"><span data-stu-id="f91d2-186">However, if necessary, you can remove the registry settings that the utility creates.</span></span> <span data-ttu-id="f91d2-187">Pour supprimer les entrées de Registre créées par ProxyCfg.exe, vous devez supprimer la valeur **WinHttpSettings** de la clé de Registre suivante.</span><span class="sxs-lookup"><span data-stu-id="f91d2-187">To remove the registry entries that ProxyCfg.exe creates, you must delete the **WinHttpSettings** value from the following registry key.</span></span>

<span data-ttu-id="f91d2-188">**HKEY \_ Logiciel de l' \_ ordinateur local** \\  \\ **Microsoft** \\ **Windows** \\ **CurrentVersion** \\ **Internet Settings** \\ **connections** \\ **WinHttpSettings**</span><span class="sxs-lookup"><span data-stu-id="f91d2-188">**HKEY\_LOCAL\_MACHINE**\\**SOFTWARE**\\**Microsoft**\\**Windows**\\**CurrentVersion**\\**Internet Settings**\\**Connections**\\**WinHttpSettings**</span></span>

<span data-ttu-id="f91d2-189">La suppression de la valeur *WinHttpSettings* supprime toutes les configurations de proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-189">Deleting the *WinHttpSettings* value removes all proxy configurations.</span></span>

## <a name="proxycfgexe-and-authentication"></a><span data-ttu-id="f91d2-190">ProxyCfg.exe et authentification</span><span class="sxs-lookup"><span data-stu-id="f91d2-190">ProxyCfg.exe and Authentication</span></span>

<span data-ttu-id="f91d2-191">L’utilitaire de configuration du proxy définit la stratégie d’authentification par défaut.</span><span class="sxs-lookup"><span data-stu-id="f91d2-191">The proxy configuration utility sets the default authentication policy.</span></span> <span data-ttu-id="f91d2-192">Étant donné que vous ne devez pas effectuer d’authentification NTLM avec des ordinateurs hôtes non approuvés, par défaut, l’authentification NTLM se produit automatiquement uniquement avec les hôtes de la liste de contournement du proxy.</span><span class="sxs-lookup"><span data-stu-id="f91d2-192">Because you should not perform NTLM authentication with untrusted hosts, by default, NTLM authentication only occurs automatically with hosts on the proxy bypass list.</span></span> <span data-ttu-id="f91d2-193">S’il n’existe aucun proxy, vous pouvez toujours utiliser ProxyCfg.exe pour spécifier une liste de contournement des hôtes auxquels vous faites confiance pour effectuer l’authentification NTLM.</span><span class="sxs-lookup"><span data-stu-id="f91d2-193">If there is no proxy, you can still use ProxyCfg.exe to specify a bypass list of hosts that you trust to perform NTLM authentication.</span></span> <span data-ttu-id="f91d2-194">Un nom de proxy est requis lors de l’utilisation de ProxyCfg.exe à cet effet, mais vous pouvez utiliser n’importe quelle chaîne valide à la place d’un nom de proxy réel.</span><span class="sxs-lookup"><span data-stu-id="f91d2-194">A proxy name is required when using ProxyCfg.exe for this purpose, but you can use any valid string in place of a real proxy name.</span></span>

<span data-ttu-id="f91d2-195">Pour plus d’informations sur la stratégie de connexion automatique, consultez [stratégie d’ouverture de session automatique](authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="f91d2-195">For more information about the auto-logon policy, see [Automatic Logon Policy](authentication-in-winhttp.md).</span></span>

 

 
