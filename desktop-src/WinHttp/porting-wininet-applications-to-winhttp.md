---
description: Les services HTTP Microsoft Windows (WinHTTP) sont ciblés sur les applications de serveur principal et de niveau intermédiaire qui requièrent l’accès à une pile client HTTP.
ms.assetid: 5b0cf321-8f69-4526-a628-e6ca0f9d4a58
title: Portage d’applications WinINet vers WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f64c4ecc825934d32b1d363f010bd04e1484428
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103953048"
---
# <a name="porting-wininet-applications-to-winhttp"></a><span data-ttu-id="a1634-103">Portage d’applications WinINet vers WinHTTP</span><span class="sxs-lookup"><span data-stu-id="a1634-103">Porting WinINet Applications to WinHTTP</span></span>

<span data-ttu-id="a1634-104">Les services HTTP Microsoft Windows (WinHTTP) sont ciblés sur les applications de serveur principal et de niveau intermédiaire qui requièrent l’accès à une pile client HTTP.</span><span class="sxs-lookup"><span data-stu-id="a1634-104">Microsoft Windows HTTP Services (WinHTTP) is targeted at middle-tier and back-end server applications that require access to an HTTP client stack.</span></span> <span data-ttu-id="a1634-105">[Microsoft Windows Internet (WinInet)](winhttp-start-page.md) fournit une pile client http pour les applications clientes, ainsi que l’accès aux protocoles protocole FTP (FTP), SOCKSv4 et Gopher.</span><span class="sxs-lookup"><span data-stu-id="a1634-105">[Microsoft Windows Internet (WinINet)](winhttp-start-page.md) provides an HTTP client stack for client applications, as well as access to the File Transfer Protocol (FTP), SOCKSv4, and Gopher protocols.</span></span> <span data-ttu-id="a1634-106">Cette vue d’ensemble peut vous aider à déterminer si le portage de vos applications WinINet vers WinHTTP est bénéfique.</span><span class="sxs-lookup"><span data-stu-id="a1634-106">This overview can help determine whether porting your WinINet applications to WinHTTP would be beneficial.</span></span> <span data-ttu-id="a1634-107">Elle décrit également les exigences de conversion spécifiques.</span><span class="sxs-lookup"><span data-stu-id="a1634-107">It also describes specific conversion requirements.</span></span>

-   [<span data-ttu-id="a1634-108">Éléments à prendre en compte avant de porter votre application WinINet</span><span class="sxs-lookup"><span data-stu-id="a1634-108">Things to Consider Before Porting Your WinINet Application</span></span>](#things-to-consider-before-porting-your-wininet-application)
-   [<span data-ttu-id="a1634-109">Équivalents WinHTTP des fonctions WinINet</span><span class="sxs-lookup"><span data-stu-id="a1634-109">WinHTTP Equivalents to WinINet Functions</span></span>](#winhttp-equivalents-to-wininet-functions)
-   [<span data-ttu-id="a1634-110">Gestion différente des requêtes asynchrones</span><span class="sxs-lookup"><span data-stu-id="a1634-110">Different Handling of Asynchronous Requests</span></span>](#different-handling-of-asynchronous-requests)
-   [<span data-ttu-id="a1634-111">Différences dans les notifications de rappel WinHTTP</span><span class="sxs-lookup"><span data-stu-id="a1634-111">Differences in WinHTTP Callback Notifications</span></span>](#differences-in-winhttp-callback-notifications)
-   [<span data-ttu-id="a1634-112">Différences d’authentification</span><span class="sxs-lookup"><span data-stu-id="a1634-112">Authentication Differences</span></span>](#authentication-differences)
-   [<span data-ttu-id="a1634-113">Différences dans les transactions HTTP sécurisées</span><span class="sxs-lookup"><span data-stu-id="a1634-113">Differences in Secure HTTP Transactions</span></span>](#differences-in-secure-http-transactions)

## <a name="things-to-consider-before-porting-your-wininet-application"></a><span data-ttu-id="a1634-114">Éléments à prendre en compte avant de porter votre application WinINet</span><span class="sxs-lookup"><span data-stu-id="a1634-114">Things to Consider Before Porting Your WinINet Application</span></span>

<span data-ttu-id="a1634-115">Envisagez de porter votre application WinINet sur WinHTTP si votre application peut tirer parti des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="a1634-115">Consider porting your WinINet application to WinHTTP if your application would benefit from:</span></span>

-   <span data-ttu-id="a1634-116">Pile client HTTP sécurisée pour le serveur.</span><span class="sxs-lookup"><span data-stu-id="a1634-116">A server-safe HTTP client stack.</span></span>
-   <span data-ttu-id="a1634-117">Utilisation réduite de la pile.</span><span class="sxs-lookup"><span data-stu-id="a1634-117">Minimized stack usage.</span></span>
-   <span data-ttu-id="a1634-118">Extensibilité d’une application serveur.</span><span class="sxs-lookup"><span data-stu-id="a1634-118">The scalability of a server application.</span></span>
-   <span data-ttu-id="a1634-119">Moins de dépendances sur les API liées à la plateforme.</span><span class="sxs-lookup"><span data-stu-id="a1634-119">Fewer dependencies on platform-related APIs.</span></span>
-   <span data-ttu-id="a1634-120">Prise en charge de l’emprunt d’identité de thread.</span><span class="sxs-lookup"><span data-stu-id="a1634-120">Support for thread impersonation.</span></span>
-   <span data-ttu-id="a1634-121">Pile HTTP conviviale pour le service.</span><span class="sxs-lookup"><span data-stu-id="a1634-121">A service-friendly HTTP stack.</span></span>
-   <span data-ttu-id="a1634-122">Accès à l’objet [**WinHttpRequest**](winhttprequest.md) scriptable.</span><span class="sxs-lookup"><span data-stu-id="a1634-122">Access to the scriptable [**WinHttpRequest**](winhttprequest.md) object.</span></span>

<span data-ttu-id="a1634-123">N’envisagez pas de porter votre application WinINet sur WinHTTP si elle doit prendre en charge un ou plusieurs des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="a1634-123">Do not consider porting your WinINet application to WinHTTP if it must support one or more of the following:</span></span>

-   <span data-ttu-id="a1634-124">Protocole FTP ou Gopher de la pile HTTP.</span><span class="sxs-lookup"><span data-stu-id="a1634-124">The FTP or Gopher protocol from the HTTP stack.</span></span>
-   <span data-ttu-id="a1634-125">Prise en charge du protocole SOCKSv4 pour la communication avec les proxies SOCKS.</span><span class="sxs-lookup"><span data-stu-id="a1634-125">Support for SOCKSv4 protocol for communicating with SOCKS proxies.</span></span>
-   <span data-ttu-id="a1634-126">Services d’accès à distance automatiques.</span><span class="sxs-lookup"><span data-stu-id="a1634-126">Automatic dial-up services.</span></span>

<span data-ttu-id="a1634-127">Si vous décidez de déplacer votre application vers WinHTTP, les sections suivantes vous guident tout au long du processus de conversion.</span><span class="sxs-lookup"><span data-stu-id="a1634-127">If you decide to port your application to WinHTTP, the following sections guide you through the conversion process.</span></span>

<span data-ttu-id="a1634-128">Pour obtenir un exemple d’application pour WinINet et WinHTTP, comparez l’exemple AsyncDemo pour WinINet avec l’exemple AsyncDemo pour WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="a1634-128">For a sample application for both WinINet and WinHTTP, compare the AsyncDemo sample for WinINet with the AsyncDemo sample for WinHTTP.</span></span>

## <a name="winhttp-equivalents-to-wininet-functions"></a><span data-ttu-id="a1634-129">Équivalents WinHTTP des fonctions WinINet</span><span class="sxs-lookup"><span data-stu-id="a1634-129">WinHTTP Equivalents to WinINet Functions</span></span>

<span data-ttu-id="a1634-130">Le tableau suivant répertorie les fonctions WinINet associées à la pile cliente HTTP avec les équivalents WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="a1634-130">The following table lists WinINet functions related to the HTTP client stack together with the WinHTTP equivalents.</span></span>

<span data-ttu-id="a1634-131">Si votre application requiert des fonctions WinINet qui ne sont pas répertoriées, ne portez pas votre application vers WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="a1634-131">If your application requires WinINet functions that are not listed, do not port your application to WinHTTP.</span></span>



| <span data-ttu-id="a1634-132">Fonction WinINet</span><span class="sxs-lookup"><span data-stu-id="a1634-132">WinINet function</span></span>                                                       | <span data-ttu-id="a1634-133">Équivalent WinHTTP</span><span class="sxs-lookup"><span data-stu-id="a1634-133">WinHTTP equivalent</span></span>                                                                                                                                                                                     | <span data-ttu-id="a1634-134">Modifications notables</span><span class="sxs-lookup"><span data-stu-id="a1634-134">Notable changes</span></span>                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="a1634-135">**HttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="a1634-135">**HttpAddRequestHeaders**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpaddrequestheadersa)             | [<span data-ttu-id="a1634-136">**WinHttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="a1634-136">**WinHttpAddRequestHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpaddrequestheaders)                                                                                                                                           | <span data-ttu-id="a1634-137">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-137">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-138">**HttpEndRequest**</span><span class="sxs-lookup"><span data-stu-id="a1634-138">**HttpEndRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpendrequesta)                           | [<span data-ttu-id="a1634-139">**WinHttpReceiveResponse**</span><span class="sxs-lookup"><span data-stu-id="a1634-139">**WinHttpReceiveResponse**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)                                                                                                                                               | <span data-ttu-id="a1634-140">La valeur de contexte est définie avec [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="a1634-140">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="a1634-141">Les options de requête sont définies avec [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="a1634-141">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="a1634-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) doit être appelé après l’envoi d’une demande.</span><span class="sxs-lookup"><span data-stu-id="a1634-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) must be called after sending a request.</span></span>                      |
| [<span data-ttu-id="a1634-143">**HttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="a1634-143">**HttpOpenRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta)                         | [<span data-ttu-id="a1634-144">**WinHttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="a1634-144">**WinHttpOpenRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)                                                                                                                                                       | <span data-ttu-id="a1634-145">La valeur de contexte est définie avec [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="a1634-145">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span>                                                                                                                                                                                                      |
| [<span data-ttu-id="a1634-146">**HttpQueryInfo**</span><span class="sxs-lookup"><span data-stu-id="a1634-146">**HttpQueryInfo**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpqueryinfoa)                             | [<span data-ttu-id="a1634-147">**WinHttpQueryHeaders**</span><span class="sxs-lookup"><span data-stu-id="a1634-147">**WinHttpQueryHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryheaders)                                                                                                                                                     | <span data-ttu-id="a1634-148">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-148">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-149">**HttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="a1634-149">**HttpSendRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta)                         | [<span data-ttu-id="a1634-150">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="a1634-150">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="a1634-151">La valeur de contexte peut être définie avec [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span><span class="sxs-lookup"><span data-stu-id="a1634-151">The context value can be set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="a1634-152">**HttpSendRequestEx**</span><span class="sxs-lookup"><span data-stu-id="a1634-152">**HttpSendRequestEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequestexa)                     | [<span data-ttu-id="a1634-153">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="a1634-153">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="a1634-154">Les mémoires tampons ne peuvent pas être fournies.</span><span class="sxs-lookup"><span data-stu-id="a1634-154">Buffers cannot be provided.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="a1634-155">**InternetCanonicalizeUrl**</span><span class="sxs-lookup"><span data-stu-id="a1634-155">**InternetCanonicalizeUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcanonicalizeurla)         | <span data-ttu-id="a1634-156">Pas d'équivalent</span><span class="sxs-lookup"><span data-stu-id="a1634-156">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="a1634-157">Les URL sont désormais sous forme canonique dans [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="a1634-157">URLs are now put in canonical form in [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span>                                                                                                                                                                                                                                              |
| [<span data-ttu-id="a1634-158">**InternetCheckConnection**</span><span class="sxs-lookup"><span data-stu-id="a1634-158">**InternetCheckConnection**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcheckconnectiona)         | <span data-ttu-id="a1634-159">Pas d'équivalent</span><span class="sxs-lookup"><span data-stu-id="a1634-159">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="a1634-160">Non implémenté dans WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="a1634-160">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="a1634-161">**InternetCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="a1634-161">**InternetCloseHandle**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetclosehandle)                 | [<span data-ttu-id="a1634-162">**WinHttpCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="a1634-162">**WinHttpCloseHandle**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpclosehandle)                                                                                                                                                       | <span data-ttu-id="a1634-163">La fermeture d’un handle parent dans WinHTTP ne ferme pas de manière récursive les handles enfants.</span><span class="sxs-lookup"><span data-stu-id="a1634-163">Closing a parent handle in WinHTTP does not recursively close child handles.</span></span>                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="a1634-164">**InternetCombineUrl**</span><span class="sxs-lookup"><span data-stu-id="a1634-164">**InternetCombineUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcombineurla)                   | <span data-ttu-id="a1634-165">Pas d'équivalent</span><span class="sxs-lookup"><span data-stu-id="a1634-165">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="a1634-166">Les URL peuvent être assemblées avec la fonction [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) .</span><span class="sxs-lookup"><span data-stu-id="a1634-166">URLs can be assembled with the [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) function.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-167">**InternetConfirmZoneCrossing**</span><span class="sxs-lookup"><span data-stu-id="a1634-167">**InternetConfirmZoneCrossing**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconfirmzonecrossing) | <span data-ttu-id="a1634-168">Pas d'équivalent</span><span class="sxs-lookup"><span data-stu-id="a1634-168">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="a1634-169">Non implémenté dans WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="a1634-169">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="a1634-170">**InternetConnect**</span><span class="sxs-lookup"><span data-stu-id="a1634-170">**InternetConnect**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconnecta)                         | [<span data-ttu-id="a1634-171">**WinHttpConnect**</span><span class="sxs-lookup"><span data-stu-id="a1634-171">**WinHttpConnect**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect)                                                                                                                                                               | <span data-ttu-id="a1634-172">La valeur de contexte est définie avec [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="a1634-172">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="a1634-173">Les options de requête sont définies avec [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="a1634-173">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="a1634-174">Les informations d’identification de l’utilisateur sont définies avec [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="a1634-174">User credentials are set with [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span>                                 |
| [<span data-ttu-id="a1634-175">**InternetCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="a1634-175">**InternetCrackUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcrackurla)                       | [<span data-ttu-id="a1634-176">**WinHttpCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="a1634-176">**WinHttpCrackUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl)                                                                                                                                                             | <span data-ttu-id="a1634-177">Comportement opposé de l' \_ indicateur d’échappement ICU : avec [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), cet indicateur entraîne la conversion des séquences d’échappement (% XX) en caractères, mais avec [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), les caractères qui doivent être échappés de dans une requête HTTP sont convertis en séquences d’échappement.</span><span class="sxs-lookup"><span data-stu-id="a1634-177">Opposite behavior of the ICU\_ESCAPE flag: with [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), this flag causes escape sequences (%xx) to be converted to characters, but with [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), it causes characters that must be escaped from in an HTTP request to be converted to escape sequences.</span></span> |
| [<span data-ttu-id="a1634-178">**InternetCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="a1634-178">**InternetCreateUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcreateurla)                     | [<span data-ttu-id="a1634-179">**WinHttpCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="a1634-179">**WinHttpCreateUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl)                                                                                                                                                           | <span data-ttu-id="a1634-180">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-180">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-181">**InternetErrorDlg**</span><span class="sxs-lookup"><span data-stu-id="a1634-181">**InternetErrorDlg**</span></span>](/windows/desktop/api/wininet/nf-wininet-interneterrordlg)                       | <span data-ttu-id="a1634-182">Pas d'équivalent</span><span class="sxs-lookup"><span data-stu-id="a1634-182">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="a1634-183">Comme WinHTTP est destiné aux applications côté serveur, il n’implémente pas d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a1634-183">Because WinHTTP is targeted at server-side applications, it does not implement any user interface.</span></span>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="a1634-184">**InternetGetCookie**</span><span class="sxs-lookup"><span data-stu-id="a1634-184">**InternetGetCookie**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetgetcookiea)                     | <span data-ttu-id="a1634-185">Pas d'équivalent</span><span class="sxs-lookup"><span data-stu-id="a1634-185">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="a1634-186">WinHTTP ne rend pas les données persistantes entre les sessions et ne peut pas accéder aux cookies WinINet.</span><span class="sxs-lookup"><span data-stu-id="a1634-186">WinHTTP does not persist data between sessions and cannot access WinINet cookies.</span></span>                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="a1634-187">**InternetOpen**</span><span class="sxs-lookup"><span data-stu-id="a1634-187">**InternetOpen**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopena)                               | [<span data-ttu-id="a1634-188">**WinHttpOpen**</span><span class="sxs-lookup"><span data-stu-id="a1634-188">**WinHttpOpen**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen)                                                                                                                                                                     | <span data-ttu-id="a1634-189">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-189">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-190">**InternetOpenUrl**</span><span class="sxs-lookup"><span data-stu-id="a1634-190">**InternetOpenUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopenurla)                         | <span data-ttu-id="a1634-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span><span class="sxs-lookup"><span data-stu-id="a1634-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span></span> | <span data-ttu-id="a1634-192">Cette fonctionnalité est disponible dans les fonctions WinHTTP listées.</span><span class="sxs-lookup"><span data-stu-id="a1634-192">This functionality is available in the WinHTTP functions listed.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="a1634-193">**InternetQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="a1634-193">**InternetQueryDataAvailable**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetquerydataavailable)   | [<span data-ttu-id="a1634-194">**WinHttpQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="a1634-194">**WinHttpQueryDataAvailable**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable)                                                                                                                                         | <span data-ttu-id="a1634-195">Aucun paramètre réservé.</span><span class="sxs-lookup"><span data-stu-id="a1634-195">No reserved parameters.</span></span>                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="a1634-196">**InternetQueryOption**</span><span class="sxs-lookup"><span data-stu-id="a1634-196">**InternetQueryOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetqueryoptiona)                 | [<span data-ttu-id="a1634-197">**WinHttpQueryOption**</span><span class="sxs-lookup"><span data-stu-id="a1634-197">**WinHttpQueryOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption)                                                                                                                                                       | <span data-ttu-id="a1634-198">WinHTTP offre un ensemble d’options différent de WinINet.</span><span class="sxs-lookup"><span data-stu-id="a1634-198">WinHTTP offers a different set of options from WinINet.</span></span> <span data-ttu-id="a1634-199">Pour plus d’informations et d’options proposées par WinHTTP, consultez [**indicateurs d’option**](option-flags.md).</span><span class="sxs-lookup"><span data-stu-id="a1634-199">For more information and options offered by WinHTTP, see [**Option Flags**](option-flags.md).</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="a1634-200">**InternetReadFile**</span><span class="sxs-lookup"><span data-stu-id="a1634-200">**InternetReadFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfile)                       | [<span data-ttu-id="a1634-201">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="a1634-201">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="a1634-202">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-202">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-203">**InternetReadFileEx**</span><span class="sxs-lookup"><span data-stu-id="a1634-203">**InternetReadFileEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfileexa)                   | [<span data-ttu-id="a1634-204">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="a1634-204">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="a1634-205">Au lieu d’une structure, la mémoire tampon est une région de mémoire traitée avec un pointeur.</span><span class="sxs-lookup"><span data-stu-id="a1634-205">Rather than a structure, the buffer is a region of memory addressed with a pointer.</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="a1634-206">**InternetSetOption**</span><span class="sxs-lookup"><span data-stu-id="a1634-206">**InternetSetOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona)                     | [<span data-ttu-id="a1634-207">**WinHttpSetOption**</span><span class="sxs-lookup"><span data-stu-id="a1634-207">**WinHttpSetOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)                                                                                                                                                           | <span data-ttu-id="a1634-208">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-208">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-209">**InternetSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="a1634-209">**InternetSetStatusCallback**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetstatuscallback)     | [<span data-ttu-id="a1634-210">**WinHttpSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="a1634-210">**WinHttpSetStatusCallback**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback)                                                                                                                                           | <span data-ttu-id="a1634-211">Pour plus d’informations, consultez « Gestion différente des requêtes asynchrones » dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="a1634-211">For more information, see "Different Handling of Asynchronous Requests" in this topic.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="a1634-212">**InternetTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="a1634-212">**InternetTimeFromSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimefromsystemtime)   | [<span data-ttu-id="a1634-213">**WinHttpTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="a1634-213">**WinHttpTimeFromSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimefromsystemtime)                                                                                                                                         | <span data-ttu-id="a1634-214">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-214">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-215">**InternetTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="a1634-215">**InternetTimeToSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimetosystemtime)       | [<span data-ttu-id="a1634-216">**WinHttpTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="a1634-216">**WinHttpTimeToSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimetosystemtime)                                                                                                                                             | <span data-ttu-id="a1634-217">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-217">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="a1634-218">**InternetWriteFile**</span><span class="sxs-lookup"><span data-stu-id="a1634-218">**InternetWriteFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetwritefile)                     | [<span data-ttu-id="a1634-219">**WinHttpWriteData**</span><span class="sxs-lookup"><span data-stu-id="a1634-219">**WinHttpWriteData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata)                                                                                                                                                           | <span data-ttu-id="a1634-220">Aucun</span><span class="sxs-lookup"><span data-stu-id="a1634-220">None.</span></span>                                                                                                                                                                                                                                                                                                                                |



 

## <a name="different-handling-of-asynchronous-requests"></a><span data-ttu-id="a1634-221">Gestion différente des requêtes asynchrones</span><span class="sxs-lookup"><span data-stu-id="a1634-221">Different Handling of Asynchronous Requests</span></span>

<span data-ttu-id="a1634-222">Sachez que dans WinINet et WinHTTP, certaines fonctions peuvent effectuer des requêtes asynchrones de manière synchrone ou asynchrone.</span><span class="sxs-lookup"><span data-stu-id="a1634-222">Be aware that in WinINet and WinHTTP, some functions can complete asynchronous requests either synchronously or asynchronously.</span></span> <span data-ttu-id="a1634-223">Votre application doit gérer l’une ou l’autre des situations.</span><span class="sxs-lookup"><span data-stu-id="a1634-223">Your application must handle either situation.</span></span> <span data-ttu-id="a1634-224">Il existe des différences significatives dans la façon dont WinINet et WinHTTP gèrent ces fonctions potentiellement asynchrones.</span><span class="sxs-lookup"><span data-stu-id="a1634-224">There are significant differences in how WinINet and WinHTTP handle these potentially asynchronous functions.</span></span>

<span data-ttu-id="a1634-225">WinINet</span><span class="sxs-lookup"><span data-stu-id="a1634-225">WinINet</span></span>

-   <span data-ttu-id="a1634-226">Achèvement synchrone : si un appel de fonction WinINet potentiellement asynchrone se termine de façon synchrone, les paramètres de sortie de la fonction retournent les résultats de l’opération.</span><span class="sxs-lookup"><span data-stu-id="a1634-226">Synchronous completion: If a potentially asynchronous WinINet function call completes synchronously, the OUT parameters of the function return the results of the operation.</span></span> <span data-ttu-id="a1634-227">Lorsqu’une erreur se produit, récupérez le code d’erreur en appelant [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) après l’appel de la fonction wininet.</span><span class="sxs-lookup"><span data-stu-id="a1634-227">When an error occurs, retrieve the error code by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) after the WinINet function call.</span></span>

-   <span data-ttu-id="a1634-228">Achèvement asynchrone : si un appel de fonction potentiellement asynchrone se termine de façon asynchrone, les résultats de l’opération et toutes les erreurs sont accessibles dans la fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="a1634-228">Asynchronous completion: If a potentially asynchronous function call completes asynchronously, the results of the operation, and any errors, are accessible in the callback function.</span></span> <span data-ttu-id="a1634-229">La fonction de rappel est exécutée sur un thread de travail, et non sur le thread qui a effectué l’appel de fonction initial.</span><span class="sxs-lookup"><span data-stu-id="a1634-229">The callback function is executed on a worker thread, not on the thread that made the initial function call.</span></span>

<span data-ttu-id="a1634-230">En d’autres termes, votre application doit dupliquer la logique pour gérer les résultats de ces opérations à deux emplacements : immédiatement après l’appel de fonction et dans la fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="a1634-230">In other words, your application must duplicate logic to handle the results of such operations in two places: both immediately after the function call and in the callback function.</span></span>

<span data-ttu-id="a1634-231">WinHTTP simplifie ce modèle en vous permettant d’implémenter la logique opérationnelle uniquement dans la fonction de rappel, qui reçoit une notification d’achèvement indépendamment du fait que l’opération s’est terminée de façon synchrone ou asynchrone.</span><span class="sxs-lookup"><span data-stu-id="a1634-231">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="a1634-232">Lorsque l’opération asynchrone est activée, les paramètres de sortie des fonctions WinHTTP ne retournent pas de données significatives et doivent avoir la valeur **null**.</span><span class="sxs-lookup"><span data-stu-id="a1634-232">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

<span data-ttu-id="a1634-233">La seule différence significative entre l’achèvement asynchrone et synchrone dans WinHTTP, du point de vue de l’application, réside dans l’emplacement d’exécution de la fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="a1634-233">The only significant difference between asynchronous and synchronous completion in WinHTTP, from the application perspective, is in where the callback function is executed.</span></span>

<span data-ttu-id="a1634-234">WinHTTP</span><span class="sxs-lookup"><span data-stu-id="a1634-234">WinHTTP</span></span>

-   <span data-ttu-id="a1634-235">Achèvement synchrone : quand une opération se termine de façon synchrone, les résultats sont retournés dans une fonction de rappel qui s’exécute dans le même thread que l’appel de fonction d’origine.</span><span class="sxs-lookup"><span data-stu-id="a1634-235">Synchronous completion: When an operation completes synchronously, the results are returned in a callback function that executes in the same thread as the original function call.</span></span>

-   <span data-ttu-id="a1634-236">Achèvement asynchrone : quand une opération se termine de façon asynchrone, les résultats sont retournés dans une fonction de rappel qui s’exécute dans un thread de travail.</span><span class="sxs-lookup"><span data-stu-id="a1634-236">Asynchronous completion: When an operation completes asynchronously, the results are returned in a callback function that executes in a worker thread.</span></span>

<span data-ttu-id="a1634-237">Même si la plupart des erreurs peuvent également être gérées entièrement dans la fonction de rappel, les applications WinHTTP doivent toujours être préparées pour qu’une fonction retourne la **valeur false** en raison d’une erreur de \_ paramètre non valide ou d’une \_ autre erreur similaire récupérée par l’appel de [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span><span class="sxs-lookup"><span data-stu-id="a1634-237">Although most errors can also be handled entirely within the callback function, WinHTTP applications must still be prepared for a function to return **FALSE** because of an ERROR\_INVALID\_PARAMETER or other similar error retrieved by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span></span>

<span data-ttu-id="a1634-238">Contrairement à WinINet, qui peut exécuter plusieurs opérations asynchrones simultanément, WinHTTP applique une stratégie d’une opération asynchrone en attente par handle de demande.</span><span class="sxs-lookup"><span data-stu-id="a1634-238">Unlike WinINet, which can execute multiple asynchronous operations simultaneously, WinHTTP enforces a policy of one pending asynchronous operation per request handle.</span></span> <span data-ttu-id="a1634-239">Si une opération est en attente et qu’une autre fonction WinHTTP est appelée, la deuxième fonction échoue et [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) retourne une erreur d' \_ opération non valide \_ .</span><span class="sxs-lookup"><span data-stu-id="a1634-239">If one operation is pending and another WinHTTP function is called, the second function fails and [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) returns ERROR\_INVALID\_OPERATION.</span></span>

<span data-ttu-id="a1634-240">WinHTTP simplifie ce modèle en vous permettant d’implémenter la logique opérationnelle uniquement dans la fonction de rappel, qui reçoit une notification d’achèvement indépendamment du fait que l’opération s’est terminée de façon synchrone ou asynchrone.</span><span class="sxs-lookup"><span data-stu-id="a1634-240">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="a1634-241">Lorsque l’opération asynchrone est activée, les paramètres de sortie des fonctions WinHTTP ne retournent pas de données significatives et doivent avoir la valeur **null**.</span><span class="sxs-lookup"><span data-stu-id="a1634-241">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

## <a name="differences-in-winhttp-callback-notifications"></a><span data-ttu-id="a1634-242">Différences dans les notifications de rappel WinHTTP</span><span class="sxs-lookup"><span data-stu-id="a1634-242">Differences in WinHTTP Callback Notifications</span></span>

<span data-ttu-id="a1634-243">La fonction de rappel d’État reçoit des mises à jour sur l’état des opérations via des indicateurs de notification.</span><span class="sxs-lookup"><span data-stu-id="a1634-243">The status callback function receives updates on the status of operations through notification flags.</span></span> <span data-ttu-id="a1634-244">Dans WinHTTP, les notifications sont sélectionnées à l’aide du paramètre *dwNotificationFlags* de la fonction [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) .</span><span class="sxs-lookup"><span data-stu-id="a1634-244">In WinHTTP, notifications are selected using the *dwNotificationFlags* parameter of the [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) function.</span></span> <span data-ttu-id="a1634-245">Utilisez l’indicateur de **\_ rappel de \_ \_ tous les \_ notifications WinHTTP** pour être informé de toutes les mises à jour d’État.</span><span class="sxs-lookup"><span data-stu-id="a1634-245">Use the **WINHTTP\_CALLBACK\_FLAG\_ALL\_NOTIFICATIONS** flag to be notified of all status updates.</span></span>

<span data-ttu-id="a1634-246">Les notifications indiquant qu’une opération particulière est terminée sont appelées notifications de fin d’exécution ou simplement saisies semi-automatiques.</span><span class="sxs-lookup"><span data-stu-id="a1634-246">Notifications that indicate a particular operation is complete are called completion notifications, or just completions.</span></span> <span data-ttu-id="a1634-247">Dans WinINet, chaque fois que la fonction de rappel reçoit une achèvement, le paramètre *lpvStatusInformation* contient une structure de [**\_ \_ Résultat asynchrone Internet**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) .</span><span class="sxs-lookup"><span data-stu-id="a1634-247">In WinINet, each time the callback function receives a completion, the *lpvStatusInformation* parameter contains an [**INTERNET\_ASYNC\_RESULT**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) structure.</span></span> <span data-ttu-id="a1634-248">Dans WinHTTP, cette structure n’est pas disponible pour toutes les saisies semi-automatiques.</span><span class="sxs-lookup"><span data-stu-id="a1634-248">In WinHTTP, this structure is not available for all completions.</span></span> <span data-ttu-id="a1634-249">Il est important de consulter la page de référence pour le [**\_ \_ rappel d’État WinHTTP**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), qui contient des informations sur les notifications et sur le type de données attendu pour chacune d’elles.</span><span class="sxs-lookup"><span data-stu-id="a1634-249">It is important to review the reference page for [**WINHTTP\_STATUS\_CALLBACK**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), which contains information about notifications and what type of data can be expected for each.</span></span>

<span data-ttu-id="a1634-250">Dans WinHTTP, une seule et même **\_ erreur de \_ \_ demande d' \_ État de rappel WinHTTP** indique qu’une opération a échoué.</span><span class="sxs-lookup"><span data-stu-id="a1634-250">In WinHTTP, a single completion, **WINHTTP\_CALLBACK\_STATUS\_REQUEST\_ERROR**, indicates that an operation failed.</span></span> <span data-ttu-id="a1634-251">Toutes les autres saisies semi-automatiques indiquent une opération réussie.</span><span class="sxs-lookup"><span data-stu-id="a1634-251">All other completions indicate a successful operation.</span></span>

<span data-ttu-id="a1634-252">WinINet et WinHTTP utilisent tous deux une valeur de contexte définie par l’utilisateur pour passer des informations du thread principal à la fonction de rappel d’État, qui peut être exécutée sur un thread de travail.</span><span class="sxs-lookup"><span data-stu-id="a1634-252">Both WinINet and WinHTTP use a user-defined context value to pass information from the main thread to the status callback function, which can be executed on a worker thread.</span></span> <span data-ttu-id="a1634-253">Dans WinINet, la valeur de contexte utilisée par la fonction de rappel d’État est définie en appelant l’une des différentes fonctions.</span><span class="sxs-lookup"><span data-stu-id="a1634-253">In WinINet, the context value used by the status callback function is set by calling one of several functions.</span></span> <span data-ttu-id="a1634-254">Dans WinHTTP, la valeur de contexte est définie uniquement avec [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="a1634-254">In WinHTTP, the context value is set only with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="a1634-255">Pour cette raison, il est possible dans WinHTTP d’avoir une notification qui se produit avant qu’une valeur de contexte soit définie.</span><span class="sxs-lookup"><span data-stu-id="a1634-255">Because of this, it is possible in WinHTTP for a notification to occur before a context value is set.</span></span> <span data-ttu-id="a1634-256">Si la fonction de rappel reçoit une notification avant que la valeur de contexte ne soit définie, l’application doit être préparée à recevoir la valeur **null** dans le paramètre *dwContext* de la fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="a1634-256">If the callback function receives a notification before the context value is set, the application must be prepared to receive **NULL** in the *dwContext* parameter of the callback function.</span></span>

## <a name="authentication-differences"></a><span data-ttu-id="a1634-257">Différences d’authentification</span><span class="sxs-lookup"><span data-stu-id="a1634-257">Authentication Differences</span></span>

<span data-ttu-id="a1634-258">Dans WinINet, les informations d’identification de l’utilisateur sont définies en appelant la fonction [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) , à l’aide d’un code similaire à celui fourni dans l’exemple de code suivant.</span><span class="sxs-lookup"><span data-stu-id="a1634-258">In WinINet, user credentials are set by calling the [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) function, using code similar to that provided in the following code example.</span></span>

``` syntax
// Use the WinINet InternetSetOption function to set the 
// user credentials to the user name contained in strUsername 
// and the password to the contents of strPassword.
       
InternetSetOption( hRequest, INTERNET_OPTION_PROXY_USERNAME, 
                   strUsername, strlen(strUsername) + 1 );

InternetSetOption( hRequest, INTERNET_OPTION_PROXY_PASSWORD, 
                   strPassword, strlen(strPassword) + 1 );
```

<span data-ttu-id="a1634-259">Pour des raisons de compatibilité, les informations d’identification de l’utilisateur peuvent être définies de la même manière dans WinHTTP à l’aide de la fonction [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) , mais cela n’est pas recommandé, car il peut présenter une faille de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a1634-259">For compatibility, user credentials can similarly be set in WinHTTP using the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function, but this is not recommended because it can pose a security vulnerability.</span></span>

<span data-ttu-id="a1634-260">Au lieu de cela, quand une application reçoit un code d’état 401 dans WinHTTP, la méthode recommandée pour définir les informations d’identification est d’abord d’identifier un schéma d’authentification à l’aide de [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) et, deuxièmement, de définir les informations d’identification à l’aide de [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="a1634-260">Instead, when an application receives a 401 status code in WinHTTP, the recommended method of setting credentials is first to identify an authentication scheme using [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) and, second, set the credentials using [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span> <span data-ttu-id="a1634-261">L’exemple de code suivant montre comment procéder.</span><span class="sxs-lookup"><span data-stu-id="a1634-261">The following code example shows how to do this.</span></span>

``` syntax
DWORD dwSupportedSchemes;
DWORD dwPrefered;
DWORD dwTarget;

// Obtain the supported and first schemes.
WinHttpQueryAuthSchemes( hRequest, &dwSupportedSchemes, &dwPrefered, &dwTarget );

// Set the credentials before resending the request.
WinHttpSetCredentials( hRequest, dwTarget, dwPrefered, strUsername, strPassword, NULL );
```

<span data-ttu-id="a1634-262">Étant donné qu’il n’y a pas d’équivalent à [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) dans WinHTTP, les applications qui obtiennent des informations d’identification via une interface utilisateur doivent fournir leur propre interface.</span><span class="sxs-lookup"><span data-stu-id="a1634-262">Because there is no equivalent to [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) in WinHTTP, applications that obtain credentials through a user interface must provide their own interface.</span></span>

<span data-ttu-id="a1634-263">Contrairement à WinINet, WinHTTP ne met pas en cache les mots de passe.</span><span class="sxs-lookup"><span data-stu-id="a1634-263">Unlike WinINet, WinHTTP does not cache passwords.</span></span> <span data-ttu-id="a1634-264">Les informations d’identification de l’utilisateur valides doivent être fournies pour chaque demande.</span><span class="sxs-lookup"><span data-stu-id="a1634-264">Valid user credentials must be supplied for each request.</span></span>

<span data-ttu-id="a1634-265">WinHTTP ne prend pas en charge le schéma d’authentification de mot de passe distribué (DPA) pris en charge par WinINet.</span><span class="sxs-lookup"><span data-stu-id="a1634-265">WinHTTP does not support the Distributed Password Authentication (DPA) scheme supported by WinINet.</span></span> <span data-ttu-id="a1634-266">Par contre, WinHTTP prend en charge Microsoft Passport 1,4.</span><span class="sxs-lookup"><span data-stu-id="a1634-266">WinHTTP does, however, support Microsoft Passport 1.4.</span></span> <span data-ttu-id="a1634-267">Pour plus d’informations sur l’utilisation de l’authentification Passport dans WinHTTP, consultez [authentification Passport dans WinHTTP](passport-authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="a1634-267">For more information about using Passport authentication in WinHTTP, see [Passport Authentication in WinHTTP](passport-authentication-in-winhttp.md).</span></span>

<span data-ttu-id="a1634-268">WinHTTP ne repose pas sur les paramètres d’Internet Explorer pour déterminer la stratégie d’ouverture de session automatique.</span><span class="sxs-lookup"><span data-stu-id="a1634-268">WinHTTP does not rely on Internet Explorer settings to determine the automatic logon policy.</span></span> <span data-ttu-id="a1634-269">Au lieu de cela, la stratégie de connexion automatique est définie avec [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="a1634-269">Instead, the auto-logon policy is set with [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="a1634-270">Pour plus d’informations sur l’authentification dans WinHTTP, y compris la stratégie de connexion automatique, consultez [authentification dans WinHTTP](authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="a1634-270">For more information about authentication in WinHTTP, including the auto-logon policy, see [Authentication in WinHTTP](authentication-in-winhttp.md).</span></span>

## <a name="differences-in-secure-http-transactions"></a><span data-ttu-id="a1634-271">Différences dans les transactions HTTP sécurisées</span><span class="sxs-lookup"><span data-stu-id="a1634-271">Differences in Secure HTTP Transactions</span></span>

<span data-ttu-id="a1634-272">Dans WinINet, lancez une session sécurisée à l’aide de [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) ou [**internetconnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), mais dans WinHTTP, vous devez appeler [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) à l’aide de l’indicateur de **\_ \_ sécurité d’indicateur WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="a1634-272">In WinINet, initiate a secure session using either [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) or [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), but in WinHTTP, you must call [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) using the **WINHTTP\_FLAG\_SECURE** flag.</span></span>

<span data-ttu-id="a1634-273">Dans une transaction HTTP sécurisée, les certificats de serveur peuvent être utilisés pour authentifier un serveur auprès du client.</span><span class="sxs-lookup"><span data-stu-id="a1634-273">In a secure HTTP transaction, server certificates can be used to authenticate a server to the client.</span></span> <span data-ttu-id="a1634-274">Dans WinINet, si un certificat de serveur contient des erreurs, [**HTTPSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) échoue et fournit des détails sur les erreurs de certificat.</span><span class="sxs-lookup"><span data-stu-id="a1634-274">In WinINet, if a server certificate contains errors, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) fails and provides details about the certificate errors.</span></span>

<span data-ttu-id="a1634-275">Dans WinHttp, les erreurs de certificat de serveur sont gérées en fonction de la version, comme suit :</span><span class="sxs-lookup"><span data-stu-id="a1634-275">In WinHttp, server certificate errors are handled according to the version as follows:</span></span>

-   <span data-ttu-id="a1634-276">À partir de WinHttp 5,1, si un certificat de serveur échoue ou contient des erreurs, l’appel à [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) signale un **\_ \_ \_ \_ échec sécurisé de l’état du rappel WinHTTP** dans la fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="a1634-276">Starting with WinHttp 5.1, if a server certificate fails or contains errors, the call to [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) reports a **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** in the callback function.</span></span> <span data-ttu-id="a1634-277">Si l’erreur générée par **WinHttpSendRequest** est ignorée, les appels suivants à [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) échouent avec une erreur de l' \_ \_ opération WinHTTP \_ annulée.</span><span class="sxs-lookup"><span data-stu-id="a1634-277">If the error generated by **WinHttpSendRequest** is ignored, subsequent calls to [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) fail with an ERROR\_WINHTTP\_OPERATION\_CANCELLED error.</span></span>
-   <span data-ttu-id="a1634-278">Dans WinHTTP 5,0, les erreurs dans les certificats de serveur n’entraînent pas, par défaut, l’échec d’une demande.</span><span class="sxs-lookup"><span data-stu-id="a1634-278">In WinHTTP 5.0, errors in server certificates do not, by default, cause a request to fail.</span></span> <span data-ttu-id="a1634-279">Au lieu de cela, les erreurs sont signalées dans la fonction de rappel avec la notification d' **\_ \_ \_ \_ échec sécurisé de l’état de rappel WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="a1634-279">Instead, the errors are reported in the callback function with the **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** notification.</span></span>

<span data-ttu-id="a1634-280">Sur certaines plateformes antérieures, WinINet prenait en charge les protocoles PCT (Private Communication Technology) et/ou Fortezza, bien qu’ils ne soient pas sous Windows XP.</span><span class="sxs-lookup"><span data-stu-id="a1634-280">On some earlier platforms, WinINet supported the Private Communication Technology (PCT) and/or Fortezza protocols, although not on Windows XP.</span></span>

<span data-ttu-id="a1634-281">WinHTTP ne prend pas en charge les protocoles PCT et Fortezza sur les plateformes, et s’appuie plutôt sur SSL (Secure Sockets Layer) (SSL) 2,0, SSL 3,0 ou TLS (Transport Layer Security) 1,0.</span><span class="sxs-lookup"><span data-stu-id="a1634-281">WinHTTP does not support the PCT and Fortezza protocols on any platform, and instead relies on Secure Sockets Layer (SSL) 2.0, SSL 3.0, or Transport Layer Security (TLS) 1.0.</span></span>

 

 
