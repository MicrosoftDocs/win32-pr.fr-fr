---
description: Pour faciliter la configuration des paramètres de proxy, WinHTTP 5,1 implémente le protocole WPAD (Web Proxy Auto-Discovery), également appelé « proxy automatique ».
ms.assetid: f766f37b-a1aa-420f-ac3b-d03485630d88
title: Prise en charge d’AutoProxy WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 26584bd0b1809f3866ed42adc7198275f40f991c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106517499"
---
# <a name="winhttp-autoproxy-support"></a><span data-ttu-id="01994-103">Prise en charge d’AutoProxy WinHTTP</span><span class="sxs-lookup"><span data-stu-id="01994-103">WinHTTP AutoProxy Support</span></span>

<span data-ttu-id="01994-104">Pour faciliter la configuration des paramètres de proxy, WinHTTP 5,1 implémente le protocole WPAD (Web Proxy Auto-Discovery), également appelé « proxy automatique ».</span><span class="sxs-lookup"><span data-stu-id="01994-104">To ease the configuration of proxy settings, WinHTTP 5.1 implements the Web Proxy Auto-Discovery (WPAD) protocol, also known as autoproxy.</span></span>

## <a name="overview-of-autoproxy"></a><span data-ttu-id="01994-105">Vue d’ensemble d’AutoProxy</span><span class="sxs-lookup"><span data-stu-id="01994-105">Overview of AutoProxy</span></span>

<span data-ttu-id="01994-106">Les applications et les composants qui utilisent WinHTTP pour envoyer des requêtes HTTP doivent s’assurer que la configuration du proxy est correctement définie.</span><span class="sxs-lookup"><span data-stu-id="01994-106">Applications and components that use WinHTTP to send HTTP requests should ensure that the proxy configuration is set correctly.</span></span> <span data-ttu-id="01994-107">À moins que le client dispose d’une connexion Internet directe, une requête HTTP doit normalement être envoyée via un serveur proxy Web qui connecte le réseau local du client à Internet (par exemple, c’est souvent le cas pour les clients Web sur un réseau local d’entreprise).</span><span class="sxs-lookup"><span data-stu-id="01994-107">Unless the client has a direct Internet connection, an HTTP request should normally be sent through a web proxy server that connects the client's local network to the Internet (for example, this is often the case for Web clients on a corporate LAN).</span></span> <span data-ttu-id="01994-108">Pour les applications basées sur un serveur, la configuration du proxy est normalement gérée par l’administrateur du serveur à l’aide de l’utilitaire de ProxyCfg.exe WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="01994-108">For server-based applications, the proxy configuration is normally managed by the server's administrator using the WinHTTP ProxyCfg.exe utility.</span></span> <span data-ttu-id="01994-109">L’administrateur du serveur connaît le nom du serveur proxy à l’avance et utilise ProxyCfg.exe pour enregistrer ce paramètre dans le registre où WinHTTP peut le Rechercher.</span><span class="sxs-lookup"><span data-stu-id="01994-109">The server administrator knows the name of the proxy server in advance and uses ProxyCfg.exe to record this setting in the registry where WinHTTP can look it up.</span></span> <span data-ttu-id="01994-110">Toutefois, le fait de demander aux utilisateurs finaux du bureau client de configurer manuellement les paramètres de proxy WinHTTP pose problème.</span><span class="sxs-lookup"><span data-stu-id="01994-110">However, requiring client desktop end-users to manually configure WinHTTP proxy settings is problematic.</span></span> <span data-ttu-id="01994-111">L’utilisateur final peut ne pas connaître le nom du serveur proxy ; demander à l’utilisateur final d’exécuter l’utilitaire de ProxyCfg.exe peut être une charge de support pour une organisation.</span><span class="sxs-lookup"><span data-stu-id="01994-111">The end-user may not know the name of the proxy server; requiring the end-user to run the ProxyCfg.exe utility can be a support burden for an organization.</span></span> <span data-ttu-id="01994-112">Pour prendre en charge une expérience utilisateur optimale, une application cliente Web doit déterminer la configuration du proxy sans intervention de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="01994-112">To support a good user experience, a web-enabled client application should determine the proxy configuration without user intervention.</span></span>

<span data-ttu-id="01994-113">Pour faciliter la configuration des paramètres de proxy pour les applications basées sur WinHTTP, WinHTTP implémente désormais le [protocole WPAD (Web Proxy Auto-Discovery)](https://tools.ietf.org/html/draft-ietf-wrec-wpad-01), souvent appelé « *proxy* automatique ».</span><span class="sxs-lookup"><span data-stu-id="01994-113">To make configuring the proxy settings for WinHTTP-based applications easier, WinHTTP now implements the [Web Proxy Auto-Discovery (WPAD) protocol](https://tools.ietf.org/html/draft-ietf-wrec-wpad-01), often referred to as *autoproxy*.</span></span> <span data-ttu-id="01994-114">Il s’agit du même protocole que celui que les navigateurs Web implémentent pour découvrir automatiquement la configuration du proxy sans obliger l’utilisateur final à spécifier un serveur proxy manuellement.</span><span class="sxs-lookup"><span data-stu-id="01994-114">This is the same protocol that web browsers implement to automatically discover the proxy configuration without requiring an end-user to specify a proxy server manually.</span></span> <span data-ttu-id="01994-115">Cette fonctionnalité est disponible à partir de la version 5,1 de WinHTTP dans Windows 2000 Service Pack 3, Windows XP Service Pack 1 et Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="01994-115">This feature is available starting with WinHTTP version 5.1 in Windows 2000 Service Pack 3, Windows XP Service Pack 1 and Windows Server 2003.</span></span> <span data-ttu-id="01994-116">Notez que, bien que Microsoft Internet Explorer et Microsoft WinHTTP prennent en charge WPAD, la spécification n’a jamais progressé au-delà de la phase « Internet-Draft » et a expiré le 2001 mai.</span><span class="sxs-lookup"><span data-stu-id="01994-116">Note that although both Microsoft Internet Explorer and Microsoft WinHTTP support WPAD, the specification never progressed beyond the "Internet-Draft" stage, and expired in May 2001.</span></span>

<span data-ttu-id="01994-117">Le protocole WPAD fonctionne comme suit :</span><span class="sxs-lookup"><span data-stu-id="01994-117">The WPAD protocol works as follows:</span></span>

1.  <span data-ttu-id="01994-118">À l’aide des protocoles réseau DHCP et/ou DNS, l’URL d’un fichier de configuration automatique de proxy (PAC) est découverte.</span><span class="sxs-lookup"><span data-stu-id="01994-118">Using the DHCP and/or DNS network protocols, the URL of a Proxy Auto-Configuration (PAC) file is discovered.</span></span> <span data-ttu-id="01994-119">L’URL identifie un fichier PAC sur le réseau local du client.</span><span class="sxs-lookup"><span data-stu-id="01994-119">The URL identifies a PAC file on the client's local network.</span></span> <span data-ttu-id="01994-120">WinHTTP prend en charge uniquement les URL PAC « http : » et « https : ». elle ne prend pas en charge, par exemple, les URL « file : ».</span><span class="sxs-lookup"><span data-stu-id="01994-120">WinHTTP supports only "http:" and "https:" PAC URLs; it does not, for example, support "file:" URLS.</span></span>
2.  <span data-ttu-id="01994-121">Le fichier PAC est téléchargé et éventuellement mis en cache sur l’ordinateur du client.</span><span class="sxs-lookup"><span data-stu-id="01994-121">The PAC file is downloaded and optionally cached on the client's computer.</span></span> <span data-ttu-id="01994-122">Le fichier PAC est un script exécutable qui génère une liste d’un ou plusieurs serveurs proxy en fonction d’un nom d’hôte cible et d’une URL.</span><span class="sxs-lookup"><span data-stu-id="01994-122">The PAC file is an executable script that generates a list of one or more proxy servers given a target host name and URL.</span></span> <span data-ttu-id="01994-123">WinHTTP ne prend en charge que les fichiers PAC ECMAScript.</span><span class="sxs-lookup"><span data-stu-id="01994-123">WinHTTP supports only ECMAScript-based PAC files.</span></span>
3.  <span data-ttu-id="01994-124">Sur chaque requête HTTP, le code de script PAC est exécuté, avec le nom d’hôte et l’URL de la requête HTTP transmis comme paramètres.</span><span class="sxs-lookup"><span data-stu-id="01994-124">On each HTTP request, the PAC script code is executed, with the host name and URL of the HTTP request passed in as parameters.</span></span> <span data-ttu-id="01994-125">WinHTTP s’attend à ce que le code de script PAC contienne une fonction appelée **FindProxyForURL**, sous la forme :</span><span class="sxs-lookup"><span data-stu-id="01994-125">WinHTTP expects the PAC script code to contain a function called **FindProxyForURL**, in the form:</span></span>
4.  ``` syntax
    FindProxyForURL( url, host );
    ```

    <span data-ttu-id="01994-126">Cette fonction calcule une liste d’un ou plusieurs serveurs proxy qui peuvent être utilisés par le client HTTP pour transmettre la demande.</span><span class="sxs-lookup"><span data-stu-id="01994-126">This function computes a list of one or more proxy servers that can be used by the HTTP client in order to transmit the request.</span></span> <span data-ttu-id="01994-127">Si le script PAC détermine que le client HTTP peut atteindre le serveur cible directement sans passer par un serveur proxy, il indique cela à l’aide d’une valeur de retour spéciale.</span><span class="sxs-lookup"><span data-stu-id="01994-127">If the PAC script determines that the HTTP client can reach the target server directly without going through a proxy server at all, it indicates this using a special return value.</span></span>

## <a name="autoproxy-topics"></a><span data-ttu-id="01994-128">Rubriques relatives à la connexion AutoProxy</span><span class="sxs-lookup"><span data-stu-id="01994-128">AutoProxy Topics</span></span>

-   [<span data-ttu-id="01994-129">Fonctions de proxy AutoProxy WinHTTP</span><span class="sxs-lookup"><span data-stu-id="01994-129">WinHTTP AutoProxy Functions</span></span>](winhttp-autoproxy-api.md)
-   [<span data-ttu-id="01994-130">Détection sans fichier de configuration automatique</span><span class="sxs-lookup"><span data-stu-id="01994-130">Discovery Without an Auto-Config File</span></span>](discovery-without-an-auto-config-file.md)
-   [<span data-ttu-id="01994-131">Problèmes liés au proxy AutoProxy dans WinHTTP</span><span class="sxs-lookup"><span data-stu-id="01994-131">AutoProxy Issues in WinHTTP</span></span>](autoproxy-issues-in-winhttp.md)
-   [<span data-ttu-id="01994-132">Définition des configurations du proxy WinInet dans WinHTTP</span><span class="sxs-lookup"><span data-stu-id="01994-132">Setting WinInet Proxy Configurations in WinHTTP</span></span>](setting-wininet-proxy-configurations-in-winhttp.md)
-   [<span data-ttu-id="01994-133">Cache du proxy AutoProxy</span><span class="sxs-lookup"><span data-stu-id="01994-133">AutoProxy Cache</span></span>](autoproxy-cache.md)
-   [<span data-ttu-id="01994-134">Extensions IPv6 du format de fichier de configuration automatique du navigateur</span><span class="sxs-lookup"><span data-stu-id="01994-134">IPv6 Extensions to Navigator Auto-Config File Format</span></span>](ipv6-extensions-to-navigator-auto-config-file-format.md)

 

 



