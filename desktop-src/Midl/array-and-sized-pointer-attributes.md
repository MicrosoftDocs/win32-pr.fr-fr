---
title: Attributs de tableau et de Sized-Pointer
description: MIDL fournit un ensemble complet de fonctionnalités pour passer des tableaux de données et des pointeurs vers des données. Vous pouvez utiliser ces attributs pour spécifier les caractéristiques des tableaux et plusieurs niveaux de pointeurs.
ms.assetid: 482be83f-eb09-40a0-8dd6-a0cbf5dc4485
keywords:
- IDL MIDL, attributs, tableau et pointeur de dimensionnement
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b0f9ba435d5c413ea152c2bc9b492486ccc1be94
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103842190"
---
# <a name="array-and-sized-pointer-attributes"></a><span data-ttu-id="957e6-105">Attributs de tableau et de Sized-Pointer</span><span class="sxs-lookup"><span data-stu-id="957e6-105">Array and Sized-Pointer Attributes</span></span>

<span data-ttu-id="957e6-106">MIDL fournit un ensemble complet de fonctionnalités pour passer des tableaux de données et des pointeurs vers des données.</span><span class="sxs-lookup"><span data-stu-id="957e6-106">MIDL provides a rich set of features for passing arrays of data and pointers to data.</span></span> <span data-ttu-id="957e6-107">Vous pouvez utiliser ces attributs pour spécifier les caractéristiques des tableaux et plusieurs niveaux de pointeurs.</span><span class="sxs-lookup"><span data-stu-id="957e6-107">You can use these attributes to specify characteristics of arrays and multiple levels of pointers.</span></span>



| <span data-ttu-id="957e6-108">Attribut</span><span class="sxs-lookup"><span data-stu-id="957e6-108">Attribute</span></span>                       | <span data-ttu-id="957e6-109">Utilisation</span><span class="sxs-lookup"><span data-stu-id="957e6-109">Usage</span></span>                                                                                                                                                                                                |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="957e6-110">**la taille \_ est**</span><span class="sxs-lookup"><span data-stu-id="957e6-110">**size\_is**</span></span>](size-is.md)     | <span data-ttu-id="957e6-111">Spécifie la quantité de mémoire à allouer pour les pointeurs dimensionnés, les pointeurs dimensionnés aux pointeurs dimensionnés et les tableaux à une ou plusieurs dimensions.</span><span class="sxs-lookup"><span data-stu-id="957e6-111">Specifies the amount of memory to be allocated for sized pointers, sized pointers to sized pointers, and single- or multidimensional arrays.</span></span>                                                         |
| [<span data-ttu-id="957e6-112">**le nombre maximal \_ est**</span><span class="sxs-lookup"><span data-stu-id="957e6-112">**max\_is**</span></span>](max-is.md)       | <span data-ttu-id="957e6-113">Valeur maximale d’un index de tableau.</span><span class="sxs-lookup"><span data-stu-id="957e6-113">The maximum value for an array index.</span></span>                                                                                                                                                                |
| [<span data-ttu-id="957e6-114">**la longueur \_ est**</span><span class="sxs-lookup"><span data-stu-id="957e6-114">**length\_is**</span></span>](length-is.md) | <span data-ttu-id="957e6-115">Nombre d’éléments de tableau à transmettre.</span><span class="sxs-lookup"><span data-stu-id="957e6-115">The number of array elements to be transmitted.</span></span>                                                                                                                                                      |
| [<span data-ttu-id="957e6-116">**tout d’abord, \_**</span><span class="sxs-lookup"><span data-stu-id="957e6-116">**first\_is**</span></span>](first-is.md)   | <span data-ttu-id="957e6-117">Index du premier élément de tableau à transmettre.</span><span class="sxs-lookup"><span data-stu-id="957e6-117">The index of the first array element to be transmitted.</span></span>                                                                                                                                              |
| [<span data-ttu-id="957e6-118">**la dernière \_ est**</span><span class="sxs-lookup"><span data-stu-id="957e6-118">**last\_is**</span></span>](last-is.md)     | <span data-ttu-id="957e6-119">Indique l’index du dernier élément de tableau à transmettre.</span><span class="sxs-lookup"><span data-stu-id="957e6-119">Gives the index of the last array element to be transmitted.</span></span>                                                                                                                                         |
| [<span data-ttu-id="957e6-120">**chaîne**</span><span class="sxs-lookup"><span data-stu-id="957e6-120">**string**</span></span>](string.md)        | <span data-ttu-id="957e6-121">Indique que le tableau de [**caractères**](char-idl.md)unidimensionnel, [**WCHAR \_ t**](wchar-t.md), [**Byte**](byte.md) (ou équivalent), ou le pointeur vers ce type de tableau, doit être géré comme une chaîne.</span><span class="sxs-lookup"><span data-stu-id="957e6-121">Indicates that the one-dimensional [**char**](char-idl.md), [**wchar\_t**](wchar-t.md), [**byte**](byte.md) (or equivalent) array, or the pointer to such an array, is to be handled as a string.</span></span> |
| [<span data-ttu-id="957e6-122">**vont**</span><span class="sxs-lookup"><span data-stu-id="957e6-122">**range**</span></span>](range.md)          | <span data-ttu-id="957e6-123">Spécifie une plage de valeurs autorisées pour les arguments ou les champs dont les valeurs sont définies au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="957e6-123">Specifies a range of allowable values for arguments or fields whose values are set at runtime.</span></span>                                                                                                       |



 

<span data-ttu-id="957e6-124">MIDL prend en charge trois types de pointeurs : les pointeurs de référence, les pointeurs uniques et les pointeurs complets.</span><span class="sxs-lookup"><span data-stu-id="957e6-124">MIDL supports three kinds of pointers: reference pointers, unique pointers, and full pointers.</span></span> <span data-ttu-id="957e6-125">Ces pointeurs sont spécifiés par les attributs de pointeur [**ref**](ref.md), [**unique**](unique.md)et [**ptr**](ptr.md).</span><span class="sxs-lookup"><span data-stu-id="957e6-125">These pointers are specified by the pointer attributes [**ref**](ref.md), [**unique**](unique.md), and [**ptr**](ptr.md).</span></span>

<span data-ttu-id="957e6-126">Un attribut de pointeur peut être appliqué en tant qu’attribut de type ; en tant qu’attribut de champ qui s’applique à un membre de structure, un membre d’Union ou un paramètre ; ou en tant qu’attribut de fonction qui s’applique au type de retour de la fonction.</span><span class="sxs-lookup"><span data-stu-id="957e6-126">A pointer attribute can be applied as a type attribute; as a field attribute that applies to a structure member, union member, or parameter; or as a function attribute that applies to the function return type.</span></span> <span data-ttu-id="957e6-127">L’attribut de pointeur peut également apparaître avec le mot clé [**\_ default du pointeur**](pointer-default.md) .</span><span class="sxs-lookup"><span data-stu-id="957e6-127">The pointer attribute can also appear with the [**pointer\_default**](pointer-default.md) keyword.</span></span>

<span data-ttu-id="957e6-128">Pour permettre à un paramètre de pointeur de changer de valeur pendant une fonction distante, vous devez fournir un autre niveau d’indirection en fournissant plusieurs déclarateurs de pointeurs.</span><span class="sxs-lookup"><span data-stu-id="957e6-128">To allow a pointer parameter to change in value during a remote function, you must provide another level of indirection by supplying multiple pointer declarators.</span></span> <span data-ttu-id="957e6-129">L’attribut de pointeur explicite appliqué au paramètre affecte uniquement le déclarateur de pointeur le plus à droite pour le paramètre.</span><span class="sxs-lookup"><span data-stu-id="957e6-129">The explicit pointer attribute applied to the parameter affects only the rightmost pointer declarator for the parameter.</span></span> <span data-ttu-id="957e6-130">Lorsqu’il existe plusieurs déclarateurs de pointeur dans une déclaration de paramètre, les autres déclarateurs utilisent par défaut l’attribut de pointeur spécifié par l’attribut de [**pointeur \_ par défaut**](pointer-default.md) .</span><span class="sxs-lookup"><span data-stu-id="957e6-130">When there are multiple pointer declarators in a parameter declaration, the other declarators default to the pointer attribute specified by the [**pointer\_default**](pointer-default.md) attribute.</span></span> <span data-ttu-id="957e6-131">Pour appliquer différents attributs de pointeur à plusieurs déclarateurs de pointeurs, vous devez définir des types intermédiaires qui spécifient les attributs de pointeur explicites.</span><span class="sxs-lookup"><span data-stu-id="957e6-131">To apply different pointer attributes to multiple pointer declarators, you must define intermediate types that specify the explicit pointer attributes.</span></span>

## <a name="default-pointer-attribute-values"></a><span data-ttu-id="957e6-132">Valeurs de Pointer-Attribute par défaut</span><span class="sxs-lookup"><span data-stu-id="957e6-132">Default Pointer-Attribute Values</span></span>

<span data-ttu-id="957e6-133">Quand aucun attribut de pointeur n’est associé à un pointeur qui est un paramètre, le pointeur est supposé être un pointeur [**ref**](ref.md) .</span><span class="sxs-lookup"><span data-stu-id="957e6-133">When no pointer attribute is associated with a pointer that is a parameter, the pointer is assumed to be a [**ref**](ref.md) pointer.</span></span>

<span data-ttu-id="957e6-134">Quand aucun attribut de pointeur n’est associé à un pointeur qui est membre d’une structure ou d’une Union, le compilateur MIDL assigne des attributs de pointeur à l’aide des règles de priorité suivantes (1 est le plus élevé) :</span><span class="sxs-lookup"><span data-stu-id="957e6-134">When no pointer attribute is associated with a pointer that is a member of a structure or union, the MIDL compiler assigns pointer attributes using the following priority rules (1 is highest):</span></span>

1.  <span data-ttu-id="957e6-135">Attributs explicitement appliqués au type pointeur</span><span class="sxs-lookup"><span data-stu-id="957e6-135">Attributes explicitly applied to the pointer type</span></span>
2.  <span data-ttu-id="957e6-136">Attributs explicitement appliqués au paramètre ou au membre du pointeur</span><span class="sxs-lookup"><span data-stu-id="957e6-136">Attributes explicitly applied to the pointer parameter or member</span></span>
3.  <span data-ttu-id="957e6-137">Attribut [**\_ par défaut du pointeur**](pointer-default.md) dans le fichier IDL qui définit le type</span><span class="sxs-lookup"><span data-stu-id="957e6-137">The [**pointer\_default**](pointer-default.md) attribute in the IDL file that defines the type</span></span>
4.  <span data-ttu-id="957e6-138">Attribut [**\_ par défaut du pointeur**](pointer-default.md) dans le fichier IDL qui importe le type</span><span class="sxs-lookup"><span data-stu-id="957e6-138">The [**pointer\_default**](pointer-default.md) attribute in the IDL file that imports the type</span></span>
5.  <span data-ttu-id="957e6-139">[**ptr**](ptr.md) (mode OSF); [**unique**](unique.md) (mode Microsoft RPC par défaut)</span><span class="sxs-lookup"><span data-stu-id="957e6-139">[**ptr**](ptr.md) (osf mode); [**unique**](unique.md) (Microsoft RPC default mode)</span></span>

<span data-ttu-id="957e6-140">Lorsque le fichier IDL est compilé en mode par défaut, les fichiers importés peuvent hériter des attributs de pointeur de l’importation des fichiers.</span><span class="sxs-lookup"><span data-stu-id="957e6-140">When the IDL file is compiled in default mode, imported files can inherit pointer attributes from importing files.</span></span> <span data-ttu-id="957e6-141">Cette fonctionnalité n’est pas disponible quand vous compilez à l’aide du commutateur/[**OSF**](-osf.md) .</span><span class="sxs-lookup"><span data-stu-id="957e6-141">This feature is not available when you compile using the /[**osf**](-osf.md) switch.</span></span> <span data-ttu-id="957e6-142">Pour plus d’informations, consultez [**Import**](import.md).</span><span class="sxs-lookup"><span data-stu-id="957e6-142">For more information, see [**import**](import.md).</span></span>

## <a name="function-return-types"></a><span data-ttu-id="957e6-143">Types de retour de fonction</span><span class="sxs-lookup"><span data-stu-id="957e6-143">Function Return Types</span></span>

<span data-ttu-id="957e6-144">Un pointeur retourné par une fonction doit être un pointeur [**unique**](unique.md) ou un pointeur complet.</span><span class="sxs-lookup"><span data-stu-id="957e6-144">A pointer returned by a function must be a [**unique**](unique.md) pointer or a full pointer.</span></span> <span data-ttu-id="957e6-145">Le compilateur MIDL signale une erreur si un résultat de fonction est un pointeur de référence, soit explicitement, soit par défaut.</span><span class="sxs-lookup"><span data-stu-id="957e6-145">The MIDL compiler reports an error if a function result is a reference pointer, either explicitly or by default.</span></span> <span data-ttu-id="957e6-146">Le pointeur retourné indique toujours un nouveau stockage.</span><span class="sxs-lookup"><span data-stu-id="957e6-146">The returned pointer always indicates new storage.</span></span>

<span data-ttu-id="957e6-147">Les fonctions qui retournent une valeur de pointeur peuvent spécifier un attribut de pointeur comme attribut de fonction.</span><span class="sxs-lookup"><span data-stu-id="957e6-147">Functions that return a pointer value can specify a pointer attribute as a function attribute.</span></span> <span data-ttu-id="957e6-148">Si un attribut de pointeur n’est pas présent, le pointeur de fonction-result utilise la valeur fournie comme attribut [**\_ par défaut du pointeur**](pointer-default.md) .</span><span class="sxs-lookup"><span data-stu-id="957e6-148">If a pointer attribute is not present, the function-result pointer uses the value provided as the [**pointer\_default**](pointer-default.md) attribute.</span></span>

## <a name="pointer-attributes-in-type-definitions"></a><span data-ttu-id="957e6-149">Attributs de pointeur dans les définitions de type</span><span class="sxs-lookup"><span data-stu-id="957e6-149">Pointer Attributes in Type Definitions</span></span>

<span data-ttu-id="957e6-150">Lorsque vous spécifiez un attribut de pointeur au niveau supérieur d’une instruction [**typedef**](typedef.md) , l’attribut spécifié est appliqué au déclarateur de pointeur, comme prévu.</span><span class="sxs-lookup"><span data-stu-id="957e6-150">When you specify a pointer attribute at the top level of a [**typedef**](typedef.md) statement, the specified attribute is applied to the pointer declarator, as expected.</span></span> <span data-ttu-id="957e6-151">Quand aucun attribut de pointeur n’est spécifié, les déclarateurs de pointeurs au niveau supérieur d’une instruction typedef héritent du type d’attribut de pointeur lorsqu’ils sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="957e6-151">When no pointer attribute is specified, pointer declarators at the top level of a typedef statement inherit the pointer attribute type when used.</span></span>

<span data-ttu-id="957e6-152">L’IDL DCE n’autorise pas l’application explicite d’un même attribut de pointeur à deux reprises, par exemple dans la Déclaration [**typedef**](typedef.md) et la liste d’attributs de paramètres.</span><span class="sxs-lookup"><span data-stu-id="957e6-152">DCE IDL does not allow the same pointer attribute to be explicitly applied twice—for example, in both the [**typedef**](typedef.md) declaration and the parameter attribute list.</span></span> <span data-ttu-id="957e6-153">Lorsque vous utilisez le mode par défaut (extensions Microsoft) du compilateur MIDL, cette contrainte est assouplie.</span><span class="sxs-lookup"><span data-stu-id="957e6-153">When you use the default (Microsoft extensions) mode of the MIDL compiler, this constraint is relaxed.</span></span>

<span data-ttu-id="957e6-154">Pour plus d’informations sur l’utilisation de tableaux et de pointeurs MIDL dans les appels de procédure distante, consultez [tableaux et pointeurs](/windows/desktop/Rpc/arrays-and-pointers).</span><span class="sxs-lookup"><span data-stu-id="957e6-154">For a discussion of using MIDL arrays and pointers in remote procedure calls, see [Arrays and Pointers](/windows/desktop/Rpc/arrays-and-pointers).</span></span>

 

 