---
title: À propos de l’entrée au clavier
description: Cette rubrique traite de l’entrée au clavier.
ms.assetid: de34727e-e8c7-481d-982d-0e42a02704db
keywords:
- entrée d’utilisateur, entrée au clavier
- capture de l’entrée utilisateur, entrée au clavier
- entrée au clavier
- focus clavier
- messages de séquence de touches
- messages de caractères
- séquences de touches système
- séquences de touches du système
- messages de caractères non-système
- clés mortes
- messages de caractères morts
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0de85794901be3fef37156bde29520039f85702b
ms.sourcegitcommit: b3839bea8d55c981d53cb8802d666bf49093b428
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/16/2021
ms.locfileid: "114373202"
---
# <a name="about-keyboard-input"></a><span data-ttu-id="51acc-114">À propos de l’entrée au clavier</span><span class="sxs-lookup"><span data-stu-id="51acc-114">About Keyboard Input</span></span>

<span data-ttu-id="51acc-115">Les applications doivent accepter l’entrée utilisateur à partir du clavier et de la souris.</span><span class="sxs-lookup"><span data-stu-id="51acc-115">Applications should accept user input from the keyboard as well as from the mouse.</span></span> <span data-ttu-id="51acc-116">Une application reçoit une entrée au clavier sous la forme de messages publiés dans son Windows.</span><span class="sxs-lookup"><span data-stu-id="51acc-116">An application receives keyboard input in the form of messages posted to its windows.</span></span>

<span data-ttu-id="51acc-117">Cette section couvre les sujets suivants :</span><span class="sxs-lookup"><span data-stu-id="51acc-117">This section covers the following topics:</span></span>

-   [<span data-ttu-id="51acc-118">Modèle d’entrée au clavier</span><span class="sxs-lookup"><span data-stu-id="51acc-118">Keyboard Input Model</span></span>](#keyboard-input-model)
-   [<span data-ttu-id="51acc-119">Focus clavier et activation</span><span class="sxs-lookup"><span data-stu-id="51acc-119">Keyboard Focus and Activation</span></span>](#keyboard-focus-and-activation)
-   [<span data-ttu-id="51acc-120">Messages de séquence de touches</span><span class="sxs-lookup"><span data-stu-id="51acc-120">Keystroke Messages</span></span>](#keystroke-messages)
    -   [<span data-ttu-id="51acc-121">Séquences de touches système et système</span><span class="sxs-lookup"><span data-stu-id="51acc-121">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
    -   [<span data-ttu-id="51acc-122">Codes de clé virtuelle décrits</span><span class="sxs-lookup"><span data-stu-id="51acc-122">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
    -   [<span data-ttu-id="51acc-123">Indicateurs de message de frappe</span><span class="sxs-lookup"><span data-stu-id="51acc-123">Keystroke Message Flags</span></span>](#keystroke-message-flags)
-   [<span data-ttu-id="51acc-124">Messages de caractères</span><span class="sxs-lookup"><span data-stu-id="51acc-124">Character Messages</span></span>](#character-messages)
    -   [<span data-ttu-id="51acc-125">Messages de caractères non-système</span><span class="sxs-lookup"><span data-stu-id="51acc-125">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
    -   [<span data-ttu-id="51acc-126">Messages de caractères morts</span><span class="sxs-lookup"><span data-stu-id="51acc-126">Dead-Character Messages</span></span>](#dead-character-messages)
-   [<span data-ttu-id="51acc-127">État de la clé</span><span class="sxs-lookup"><span data-stu-id="51acc-127">Key Status</span></span>](#key-status)
-   [<span data-ttu-id="51acc-128">Traductions de séquences de touches et de caractères</span><span class="sxs-lookup"><span data-stu-id="51acc-128">Keystroke and Character Translations</span></span>](#keystroke-and-character-translations)
-   [<span data-ttu-id="51acc-129">Prise en charge des touches d’accès rapide</span><span class="sxs-lookup"><span data-stu-id="51acc-129">Hot-Key Support</span></span>](#hot-key-support)
-   [<span data-ttu-id="51acc-130">Touches du clavier pour la navigation et d’autres fonctions</span><span class="sxs-lookup"><span data-stu-id="51acc-130">Keyboard Keys for Browsing and Other Functions</span></span>](#keyboard-keys-for-browsing-and-other-functions)
-   [<span data-ttu-id="51acc-131">Simulation de l’entrée</span><span class="sxs-lookup"><span data-stu-id="51acc-131">Simulating Input</span></span>](#simulating-input)
-   [<span data-ttu-id="51acc-132">Langues, paramètres régionaux et dispositions de clavier</span><span class="sxs-lookup"><span data-stu-id="51acc-132">Languages, Locales, and Keyboard Layouts</span></span>](#languages-locales-and-keyboard-layouts)

## <a name="keyboard-input-model"></a><span data-ttu-id="51acc-133">Modèle d’entrée au clavier</span><span class="sxs-lookup"><span data-stu-id="51acc-133">Keyboard Input Model</span></span>

<span data-ttu-id="51acc-134">Le système fournit une prise en charge du clavier indépendante de l’appareil pour les applications en installant un pilote de périphérique clavier approprié pour le clavier actuel.</span><span class="sxs-lookup"><span data-stu-id="51acc-134">The system provides device-independent keyboard support for applications by installing a keyboard device driver appropriate for the current keyboard.</span></span> <span data-ttu-id="51acc-135">Le système fournit une prise en charge du clavier indépendante de la langue à l’aide de la disposition de clavier propre à la langue actuellement sélectionnée par l’utilisateur ou l’application.</span><span class="sxs-lookup"><span data-stu-id="51acc-135">The system provides language-independent keyboard support by using the language-specific keyboard layout currently selected by the user or the application.</span></span> <span data-ttu-id="51acc-136">Le pilote de périphérique clavier reçoit des codes d’analyse à partir du clavier, qui sont envoyés à la disposition du clavier dans laquelle ils sont convertis en messages et publiés dans les fenêtres appropriées de votre application.</span><span class="sxs-lookup"><span data-stu-id="51acc-136">The keyboard device driver receives scan codes from the keyboard, which are sent to the keyboard layout where they are translated into messages and posted to the appropriate windows in your application.</span></span>

<span data-ttu-id="51acc-137">Affecté à chaque clé d’un clavier est une valeur unique appelée *code d’analyse*, un identificateur dépendant du périphérique pour la touche du clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-137">Assigned to each key on a keyboard is a unique value called a *scan code*, a device-dependent identifier for the key on the keyboard.</span></span> <span data-ttu-id="51acc-138">Un clavier génère deux codes d’analyse lorsque l’utilisateur tape une clé (l’un lorsque l’utilisateur appuie sur la touche et l’autre lorsque l’utilisateur relâche la touche).</span><span class="sxs-lookup"><span data-stu-id="51acc-138">A keyboard generates two scan codes when the user types a key—one when the user presses the key and another when the user releases the key.</span></span>

<span data-ttu-id="51acc-139">Le pilote de périphérique clavier interprète un code d’analyse et le convertit (mappe) en *Code de clé virtuelle*, une valeur indépendante du périphérique définie par le système qui identifie l’objectif d’une clé.</span><span class="sxs-lookup"><span data-stu-id="51acc-139">The keyboard device driver interprets a scan code and translates (maps) it to a *virtual-key code*, a device-independent value defined by the system that identifies the purpose of a key.</span></span> <span data-ttu-id="51acc-140">Après la traduction d’un code d’analyse, la disposition du clavier crée un message qui comprend le code d’analyse, le code de la touche virtuelle et d’autres informations sur la séquence de touches, puis place le message dans la file d’attente des messages système.</span><span class="sxs-lookup"><span data-stu-id="51acc-140">After translating a scan code, the keyboard layout creates a message that includes the scan code, the virtual-key code, and other information about the keystroke, and then places the message in the system message queue.</span></span> <span data-ttu-id="51acc-141">Le système supprime le message de la file d’attente des messages système et le publie dans la file d’attente de messages du thread approprié.</span><span class="sxs-lookup"><span data-stu-id="51acc-141">The system removes the message from the system message queue and posts it to the message queue of the appropriate thread.</span></span> <span data-ttu-id="51acc-142">Finalement, la boucle de message du thread supprime le message et le transmet à la procédure de fenêtre appropriée pour traitement.</span><span class="sxs-lookup"><span data-stu-id="51acc-142">Eventually, the thread's message loop removes the message and passes it to the appropriate window procedure for processing.</span></span> <span data-ttu-id="51acc-143">La figure suivante illustre le modèle d’entrée au clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-143">The following figure illustrates the keyboard input model.</span></span>

![modèle de traitement d’entrée au clavier](images/csinp-01.png)

## <a name="keyboard-focus-and-activation"></a><span data-ttu-id="51acc-145">Focus clavier et activation</span><span class="sxs-lookup"><span data-stu-id="51acc-145">Keyboard Focus and Activation</span></span>

<span data-ttu-id="51acc-146">Le système publie des messages de clavier dans la file d’attente de messages du thread de premier plan qui a créé la fenêtre avec le focus clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-146">The system posts keyboard messages to the message queue of the foreground thread that created the window with the keyboard focus.</span></span> <span data-ttu-id="51acc-147">Le *focus clavier* est une propriété temporaire d’une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="51acc-147">The *keyboard focus* is a temporary property of a window.</span></span> <span data-ttu-id="51acc-148">Le système partage le clavier entre toutes les fenêtres de l’affichage en décalant le focus clavier, à la direction de l’utilisateur, d’une fenêtre à l’autre.</span><span class="sxs-lookup"><span data-stu-id="51acc-148">The system shares the keyboard among all windows on the display by shifting the keyboard focus, at the user's direction, from one window to another.</span></span> <span data-ttu-id="51acc-149">La fenêtre qui a le focus clavier reçoit (à partir de la file d’attente de messages du thread qui l’a créé) tous les messages de clavier jusqu’à ce que le focus passe à une autre fenêtre.</span><span class="sxs-lookup"><span data-stu-id="51acc-149">The window that has the keyboard focus receives (from the message queue of the thread that created it) all keyboard messages until the focus changes to a different window.</span></span>

<span data-ttu-id="51acc-150">Un thread peut appeler la fonction [**getFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) pour déterminer laquelle de ses fenêtres (le cas échéant) a actuellement le focus clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-150">A thread can call the [**GetFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) function to determine which of its windows (if any) currently has the keyboard focus.</span></span> <span data-ttu-id="51acc-151">Un thread peut mettre le focus clavier sur l’une de ses fenêtres en appelant la fonction [**SetFocus**](/windows/win32/api/winuser/nf-winuser-setfocus) .</span><span class="sxs-lookup"><span data-stu-id="51acc-151">A thread can give the keyboard focus to one of its windows by calling the [**SetFocus**](/windows/win32/api/winuser/nf-winuser-setfocus) function.</span></span> <span data-ttu-id="51acc-152">Lorsque le focus clavier passe d’une fenêtre à une autre, le système envoie un message [**WM \_ KILLFOCUS**](wm-killfocus.md) à la fenêtre qui a perdu le focus, puis envoie un message [**WM \_ SetFocus**](wm-setfocus.md) à la fenêtre qui a obtenu le focus.</span><span class="sxs-lookup"><span data-stu-id="51acc-152">When the keyboard focus changes from one window to another, the system sends a [**WM\_KILLFOCUS**](wm-killfocus.md) message to the window that has lost the focus, and then sends a [**WM\_SETFOCUS**](wm-setfocus.md) message to the window that has gained the focus.</span></span>

<span data-ttu-id="51acc-153">Le concept de focus clavier est lié à celui de la fenêtre active.</span><span class="sxs-lookup"><span data-stu-id="51acc-153">The concept of keyboard focus is related to that of the active window.</span></span> <span data-ttu-id="51acc-154">La *fenêtre active* est la fenêtre de niveau supérieur avec laquelle l’utilisateur travaille actuellement.</span><span class="sxs-lookup"><span data-stu-id="51acc-154">The *active window* is the top-level window the user is currently working with.</span></span> <span data-ttu-id="51acc-155">La fenêtre avec le focus clavier est soit la fenêtre active, soit une fenêtre enfant de la fenêtre active.</span><span class="sxs-lookup"><span data-stu-id="51acc-155">The window with the keyboard focus is either the active window, or a child window of the active window.</span></span> <span data-ttu-id="51acc-156">Pour aider l’utilisateur à identifier la fenêtre active, le système la place en haut de l’ordre de plan et met en surbrillance sa barre de titre (le cas échéant) et sa bordure.</span><span class="sxs-lookup"><span data-stu-id="51acc-156">To help the user identify the active window, the system places it at the top of the Z order and highlights its title bar (if it has one) and border.</span></span>

<span data-ttu-id="51acc-157">L’utilisateur peut activer une fenêtre de niveau supérieur en cliquant dessus, en la sélectionnant à l’aide de la combinaison de touches ALT + TAB ou ALT + ÉCHAP, ou en la sélectionnant dans la Liste des tâches.</span><span class="sxs-lookup"><span data-stu-id="51acc-157">The user can activate a top-level window by clicking it, selecting it using the ALT+TAB or ALT+ESC key combination, or selecting it from the Task List.</span></span> <span data-ttu-id="51acc-158">Un thread peut activer une fenêtre de niveau supérieur à l’aide de la fonction [**SetActiveWindow**](/windows/win32/api/winuser/nf-winuser-setactivewindow) .</span><span class="sxs-lookup"><span data-stu-id="51acc-158">A thread can activate a top-level window by using the [**SetActiveWindow**](/windows/win32/api/winuser/nf-winuser-setactivewindow) function.</span></span> <span data-ttu-id="51acc-159">Il peut déterminer si une fenêtre de niveau supérieur créée est active à l’aide de la fonction [**GetActiveWindow**](/windows/win32/api/winuser/nf-winuser-getactivewindow) .</span><span class="sxs-lookup"><span data-stu-id="51acc-159">It can determine whether a top-level window it created is active by using the [**GetActiveWindow**](/windows/win32/api/winuser/nf-winuser-getactivewindow) function.</span></span>

<span data-ttu-id="51acc-160">Quand une fenêtre est désactivée et qu’une autre est activée, le système envoie le message [**WM \_ Activate**](wm-activate.md) .</span><span class="sxs-lookup"><span data-stu-id="51acc-160">When one window is deactivated and another activated, the system sends the [**WM\_ACTIVATE**](wm-activate.md) message.</span></span> <span data-ttu-id="51acc-161">Le mot de poids faible du paramètre *wParam* est zéro si la fenêtre est désactivée et différente de zéro si elle est activée.</span><span class="sxs-lookup"><span data-stu-id="51acc-161">The low-order word of the *wParam* parameter is zero if the window is being deactivated and nonzero if it is being activated.</span></span> <span data-ttu-id="51acc-162">Lorsque la procédure de fenêtre par défaut reçoit le message **WM \_ Activate** , elle définit le focus clavier sur la fenêtre active.</span><span class="sxs-lookup"><span data-stu-id="51acc-162">When the default window procedure receives the **WM\_ACTIVATE** message, it sets the keyboard focus to the active window.</span></span>

<span data-ttu-id="51acc-163">Pour empêcher les événements d’entrée de clavier et de souris d’atteindre les applications, utilisez [**BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span><span class="sxs-lookup"><span data-stu-id="51acc-163">To block keyboard and mouse input events from reaching applications, use [**BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span></span> <span data-ttu-id="51acc-164">Notez que la fonction **BlockInput** n’interfère pas avec la table d’état d’entrée du clavier asynchrone.</span><span class="sxs-lookup"><span data-stu-id="51acc-164">Note, the **BlockInput** function will not interfere with the asynchronous keyboard input-state table.</span></span> <span data-ttu-id="51acc-165">Cela signifie que l’appel de la fonction [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) pendant que l’entrée est bloquée modifie la table d’état d’entrée du clavier asynchrone.</span><span class="sxs-lookup"><span data-stu-id="51acc-165">This means that calling the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function while input is blocked will change the asynchronous keyboard input-state table.</span></span>

## <a name="keystroke-messages"></a><span data-ttu-id="51acc-166">Messages de séquence de touches</span><span class="sxs-lookup"><span data-stu-id="51acc-166">Keystroke Messages</span></span>

<span data-ttu-id="51acc-167">Si vous appuyez sur une touche, un message [**WM \_ keyverse**](wm-keydown.md) ou [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) est placé dans la file d’attente de messages de thread attachée à la fenêtre qui a le focus clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-167">Pressing a key causes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to be placed in the thread message queue attached to the window that has the keyboard focus.</span></span> <span data-ttu-id="51acc-168">La libération d’une clé entraîne le placement d’un message [**WM \_ KEYUP**](wm-keyup.md) ou [**WM \_ SYSKEYUP**](wm-syskeyup.md) dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="51acc-168">Releasing a key causes a [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message to be placed in the queue.</span></span>

<span data-ttu-id="51acc-169">Les messages de touche et de réduction de la clé se produisent généralement par paires, mais si l’utilisateur maintient une clé suffisamment longue pour démarrer la fonctionnalité de répétition automatique du clavier, le système génère un certain nombre de messages [**WM \_ keyverse**](wm-keydown.md) ou [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) dans une ligne.</span><span class="sxs-lookup"><span data-stu-id="51acc-169">Key-up and key-down messages typically occur in pairs, but if the user holds down a key long enough to start the keyboard's automatic repeat feature, the system generates a number of [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages in a row.</span></span> <span data-ttu-id="51acc-170">Il génère ensuite un message [**WM \_ KEYUP**](wm-keyup.md) ou [**WM \_ SYSKEYUP**](wm-syskeyup.md) unique lorsque l’utilisateur relâche la touche.</span><span class="sxs-lookup"><span data-stu-id="51acc-170">It then generates a single [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message when the user releases the key.</span></span>

<span data-ttu-id="51acc-171">Cette section couvre les sujets suivants :</span><span class="sxs-lookup"><span data-stu-id="51acc-171">This section covers the following topics:</span></span>

-   [<span data-ttu-id="51acc-172">Séquences de touches système et système</span><span class="sxs-lookup"><span data-stu-id="51acc-172">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
-   [<span data-ttu-id="51acc-173">Codes de clé virtuelle décrits</span><span class="sxs-lookup"><span data-stu-id="51acc-173">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
-   [<span data-ttu-id="51acc-174">Indicateurs de message de frappe</span><span class="sxs-lookup"><span data-stu-id="51acc-174">Keystroke Message Flags</span></span>](#keystroke-message-flags)

### <a name="system-and-nonsystem-keystrokes"></a><span data-ttu-id="51acc-175">Séquences de touches système et système</span><span class="sxs-lookup"><span data-stu-id="51acc-175">System and Nonsystem Keystrokes</span></span>

<span data-ttu-id="51acc-176">Le système fait une distinction entre les séquences de touches du système et les séquences de touches du système.</span><span class="sxs-lookup"><span data-stu-id="51acc-176">The system makes a distinction between system keystrokes and nonsystem keystrokes.</span></span> <span data-ttu-id="51acc-177">Les séquences de touches système produisent des messages de frappe système, [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) et [**WM \_ SYSKEYUP**](wm-syskeyup.md).</span><span class="sxs-lookup"><span data-stu-id="51acc-177">System keystrokes produce system keystroke messages, [**WM\_SYSKEYDOWN**](wm-syskeydown.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md).</span></span> <span data-ttu-id="51acc-178">Les séquences de touches autres que le système produisent des messages de frappe de touche de système, [**WM \_ keyverse**](wm-keydown.md) et [**WM \_ KEYUP**](wm-keyup.md).</span><span class="sxs-lookup"><span data-stu-id="51acc-178">Nonsystem keystrokes produce nonsystem keystroke messages, [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_KEYUP**](wm-keyup.md).</span></span>

<span data-ttu-id="51acc-179">Si votre procédure de fenêtre doit traiter un message de frappe de touche système, assurez-vous qu’après le traitement du message, la procédure le transmet à la fonction [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="51acc-179">If your window procedure must process a system keystroke message, make sure that after processing the message the procedure passes it to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="51acc-180">Dans le cas contraire, toutes les opérations système impliquant la touche ALT seront désactivées chaque fois que la fenêtre a le focus clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-180">Otherwise, all system operations involving the ALT key will be disabled whenever the window has the keyboard focus.</span></span> <span data-ttu-id="51acc-181">Autrement dit, l’utilisateur ne peut pas accéder au menu des menus ou du système de la fenêtre, ni utiliser la combinaison de touches ALT + ECHAP ou ALT + TAB pour activer une autre fenêtre.</span><span class="sxs-lookup"><span data-stu-id="51acc-181">That is, the user won't be able to access the window's menus or System menu, or use the ALT+ESC or ALT+TAB key combination to activate a different window.</span></span>

<span data-ttu-id="51acc-182">Les messages de frappe de touche système sont principalement destinés à être utilisés par le système plutôt que par une application.</span><span class="sxs-lookup"><span data-stu-id="51acc-182">System keystroke messages are primarily for use by the system rather than by an application.</span></span> <span data-ttu-id="51acc-183">Le système les utilise pour fournir son interface clavier intégrée aux menus et permettre à l’utilisateur de contrôler la fenêtre qui est active.</span><span class="sxs-lookup"><span data-stu-id="51acc-183">The system uses them to provide its built-in keyboard interface to menus and to allow the user to control which window is active.</span></span> <span data-ttu-id="51acc-184">Les messages de frappe de touche système sont générés lorsque l’utilisateur tape une clé en combinaison avec la touche ALT, ou lorsque l’utilisateur tape et qu’aucune fenêtre n’a le focus clavier (par exemple, lorsque l’application active est réduite).</span><span class="sxs-lookup"><span data-stu-id="51acc-184">System keystroke messages are generated when the user types a key in combination with the ALT key, or when the user types and no window has the keyboard focus (for example, when the active application is minimized).</span></span> <span data-ttu-id="51acc-185">Dans ce cas, les messages sont publiés dans la file d’attente de messages attachée à la fenêtre active.</span><span class="sxs-lookup"><span data-stu-id="51acc-185">In this case, the messages are posted to the message queue attached to the active window.</span></span>

<span data-ttu-id="51acc-186">Les messages de séquence de touches autres que le système sont destinés à être utilisés par les fenêtres d’application. la fonction [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) ne fait rien.</span><span class="sxs-lookup"><span data-stu-id="51acc-186">Nonsystem keystroke messages are for use by application windows; the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function does nothing with them.</span></span> <span data-ttu-id="51acc-187">Une procédure de fenêtre peut ignorer tous les messages de frappe de touche non-système dont elle n’a pas besoin.</span><span class="sxs-lookup"><span data-stu-id="51acc-187">A window procedure can discard any nonsystem keystroke messages that it does not need.</span></span>

### <a name="virtual-key-codes-described"></a><span data-ttu-id="51acc-188">Codes Virtual-Key décrits</span><span class="sxs-lookup"><span data-stu-id="51acc-188">Virtual-Key Codes Described</span></span>

<span data-ttu-id="51acc-189">Le paramètre **wParam** d’un message de séquence de touches contient le code de la touche virtuelle de la touche qui a été enfoncée ou libérée.</span><span class="sxs-lookup"><span data-stu-id="51acc-189">The **wParam** parameter of a keystroke message contains the virtual-key code of the key that was pressed or released.</span></span> <span data-ttu-id="51acc-190">Une procédure de fenêtre traite ou ignore un message de séquence de touches, en fonction de la valeur du code de la touche virtuelle.</span><span class="sxs-lookup"><span data-stu-id="51acc-190">A window procedure processes or ignores a keystroke message, depending on the value of the virtual-key code.</span></span>

<span data-ttu-id="51acc-191">Une procédure de fenêtre classique traite uniquement un petit sous-ensemble des messages de frappe de touche qu’elle reçoit et ignore le reste.</span><span class="sxs-lookup"><span data-stu-id="51acc-191">A typical window procedure processes only a small subset of the keystroke messages that it receives and ignores the rest.</span></span> <span data-ttu-id="51acc-192">Par exemple, une procédure de fenêtre peut traiter uniquement des messages de séquence de touches [**WM \_**](wm-keydown.md) et uniquement celles qui contiennent des codes de touche virtuelle pour les touches de déplacement du curseur, des touches Maj (également appelées clés de contrôle) et des touches de fonction.</span><span class="sxs-lookup"><span data-stu-id="51acc-192">For example, a window procedure might process only [**WM\_KEYDOWN**](wm-keydown.md) keystroke messages, and only those that contain virtual-key codes for the cursor movement keys, shift keys (also called control keys), and function keys.</span></span> <span data-ttu-id="51acc-193">Une procédure de fenêtre classique ne traite pas les messages de frappe de touche de caractères.</span><span class="sxs-lookup"><span data-stu-id="51acc-193">A typical window procedure does not process keystroke messages from character keys.</span></span> <span data-ttu-id="51acc-194">Au lieu de cela, elle utilise la fonction [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) pour convertir le message en messages de caractères.</span><span class="sxs-lookup"><span data-stu-id="51acc-194">Instead, it uses the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function to convert the message into character messages.</span></span> <span data-ttu-id="51acc-195">Pour plus d’informations sur les **TranslateMessage** et les messages de caractères, consultez [messages de caractères](#character-messages).</span><span class="sxs-lookup"><span data-stu-id="51acc-195">For more information about **TranslateMessage** and character messages, see [Character Messages](#character-messages).</span></span>

### <a name="keystroke-message-flags"></a><span data-ttu-id="51acc-196">Indicateurs de message de frappe</span><span class="sxs-lookup"><span data-stu-id="51acc-196">Keystroke Message Flags</span></span>

<span data-ttu-id="51acc-197">Le paramètre **lParam** d’un message de frappe de touche contient des informations supplémentaires sur la frappe de touche qui a généré le message.</span><span class="sxs-lookup"><span data-stu-id="51acc-197">The **lParam** parameter of a keystroke message contains additional information about the keystroke that generated the message.</span></span> <span data-ttu-id="51acc-198">Ces informations incluent le nombre de répétitions, le code d’analyse, l’indicateur de clé étendue, le code de contexte, l’indicateur d’état de clé précédent et l’indicateur d’état de transition.</span><span class="sxs-lookup"><span data-stu-id="51acc-198">This information includes the repeat count, the scan code, the extended-key flag, the context code, the previous key-state flag, and the transition-state flag.</span></span> <span data-ttu-id="51acc-199">L’illustration suivante montre les emplacements de ces indicateurs et valeurs dans le paramètre **lParam** .</span><span class="sxs-lookup"><span data-stu-id="51acc-199">The following illustration shows the locations of these flags and values in the **lParam** parameter.</span></span>

![emplacements des indicateurs et des valeurs dans le paramètre lParam d’un message de frappe de touche](images/csinp-02.png)

<span data-ttu-id="51acc-201">Une application peut utiliser les valeurs suivantes pour manipuler les indicateurs de frappe.</span><span class="sxs-lookup"><span data-stu-id="51acc-201">An application can use the following values to manipulate the keystroke flags.</span></span>



| <span data-ttu-id="51acc-202">Valeur</span><span class="sxs-lookup"><span data-stu-id="51acc-202">Value</span></span>            | <span data-ttu-id="51acc-203">Description</span><span class="sxs-lookup"><span data-stu-id="51acc-203">Description</span></span>                                                                       |
|------------------|-----------------------------------------------------------------------------------|
| <span data-ttu-id="51acc-204">**KF \_ ALTDOWN**</span><span class="sxs-lookup"><span data-stu-id="51acc-204">**KF\_ALTDOWN**</span></span>  | <span data-ttu-id="51acc-205">Manipule l’indicateur de touche ALT, qui indique si la touche ALT est enfoncée.</span><span class="sxs-lookup"><span data-stu-id="51acc-205">Manipulates the ALT key flag, which indicates whether the ALT key is pressed.</span></span>     |
| <span data-ttu-id="51acc-206">**KF \_ DLGMODE**</span><span class="sxs-lookup"><span data-stu-id="51acc-206">**KF\_DLGMODE**</span></span>  | <span data-ttu-id="51acc-207">Manipule l’indicateur du mode de boîte de dialogue, qui indique si une boîte de dialogue est active.</span><span class="sxs-lookup"><span data-stu-id="51acc-207">Manipulates the dialog mode flag, which indicates whether a dialog box is active.</span></span> |
| <span data-ttu-id="51acc-208">**KF \_ étendu**</span><span class="sxs-lookup"><span data-stu-id="51acc-208">**KF\_EXTENDED**</span></span> | <span data-ttu-id="51acc-209">Manipule l’indicateur de clé étendue.</span><span class="sxs-lookup"><span data-stu-id="51acc-209">Manipulates the extended key flag.</span></span>                                                |
| <span data-ttu-id="51acc-210">**KF \_ MENUMODE**</span><span class="sxs-lookup"><span data-stu-id="51acc-210">**KF\_MENUMODE**</span></span> | <span data-ttu-id="51acc-211">Manipule l’indicateur de mode de menu, qui indique si un menu est actif.</span><span class="sxs-lookup"><span data-stu-id="51acc-211">Manipulates the menu mode flag, which indicates whether a menu is active.</span></span>         |
| <span data-ttu-id="51acc-212">**KF \_ répéter**</span><span class="sxs-lookup"><span data-stu-id="51acc-212">**KF\_REPEAT**</span></span>   | <span data-ttu-id="51acc-213">Manipule l’indicateur d’état de clé précédent.</span><span class="sxs-lookup"><span data-stu-id="51acc-213">Manipulates the previous key state flag.</span></span>                                          |
| <span data-ttu-id="51acc-214">**KF \_**</span><span class="sxs-lookup"><span data-stu-id="51acc-214">**KF\_UP**</span></span>       | <span data-ttu-id="51acc-215">Manipule l’indicateur d’état de transition.</span><span class="sxs-lookup"><span data-stu-id="51acc-215">Manipulates the transition state flag.</span></span>                                            |

<span data-ttu-id="51acc-216">Exemple de code :</span><span class="sxs-lookup"><span data-stu-id="51acc-216">Example code:</span></span>

```cpp
case WM_KEYDOWN:
case WM_KEYUP:
case WM_SYSKEYDOWN:
case WM_SYSKEYUP:
{
    WORD vkCode = LOWORD(wParam);                                       // virtual-key code

    BYTE scanCode = LOBYTE(HIWORD(lParam));                             // scan code
    BOOL scanCodeE0 = (HIWORD(lParam) & KF_EXTENDED) == KF_EXTENDED;    // extended-key flag, 1 if scancode has 0xE0 prefix

    BOOL upFlag = (HIWORD(lParam) & KF_UP) == KF_UP;                    // transition-state flag, 1 on keyup
    BOOL repeatFlag = (HIWORD(lParam) & KF_REPEAT) == KF_REPEAT;        // previous key-state flag, 1 on autorepeat
    WORD repeatCount = LOWORD(lParam);                                  // repeat count, > 0 if several keydown messages was combined into one message

    BOOL altDownFlag = (HIWORD(lParam) & KF_ALTDOWN) == KF_ALTDOWN;     // ALT key was pressed

    BOOL dlgModeFlag = (HIWORD(lParam) & KF_DLGMODE) == KF_DLGMODE;     // dialog box is active
    BOOL menuModeFlag = (HIWORD(lParam) & KF_MENUMODE) == KF_MENUMODE;  // menu is active
    
    // ...
}
break;
```

### <a name="repeat-count"></a><span data-ttu-id="51acc-217">Nombre de répétitions</span><span class="sxs-lookup"><span data-stu-id="51acc-217">Repeat Count</span></span>

<span data-ttu-id="51acc-218">Vous pouvez vérifier le nombre de répétitions pour déterminer si un message de frappe représente plusieurs séquences de touches.</span><span class="sxs-lookup"><span data-stu-id="51acc-218">You can check the repeat count to determine whether a keystroke message represents more than one keystroke.</span></span> <span data-ttu-id="51acc-219">Le système incrémente le nombre lorsque le clavier génère des messages [**WM \_ keyverse**](wm-keydown.md) ou [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) plus rapidement qu’une application ne peut les traiter.</span><span class="sxs-lookup"><span data-stu-id="51acc-219">The system increments the count when the keyboard generates [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages faster than an application can process them.</span></span> <span data-ttu-id="51acc-220">Cela se produit souvent lorsque l’utilisateur maintient une clé suffisamment longue pour démarrer la fonctionnalité de répétition automatique du clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-220">This often occurs when the user holds down a key long enough to start the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="51acc-221">Au lieu de remplir la file d’attente des messages du système avec les messages de clé en aval résultants, le système combine les messages en un seul message de touche enfoncée et incrémente le nombre de répétitions.</span><span class="sxs-lookup"><span data-stu-id="51acc-221">Instead of filling the system message queue with the resulting key-down messages, the system combines the messages into a single key down message and increments the repeat count.</span></span> <span data-ttu-id="51acc-222">La libération d’une clé ne peut pas démarrer la fonctionnalité de répétition automatique. par conséquent, le nombre de répétitions pour les messages [**WM \_ KEYUP**](wm-keyup.md) et [**WM \_ SYSKEYUP**](wm-syskeyup.md) est toujours défini sur 1.</span><span class="sxs-lookup"><span data-stu-id="51acc-222">Releasing a key cannot start the automatic repeat feature, so the repeat count for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages is always set to 1.</span></span>

### <a name="scan-code"></a><span data-ttu-id="51acc-223">Analyser le code</span><span class="sxs-lookup"><span data-stu-id="51acc-223">Scan Code</span></span>

<span data-ttu-id="51acc-224">Le code d’analyse correspond à la valeur que le matériel du clavier génère lorsque l’utilisateur appuie sur une touche.</span><span class="sxs-lookup"><span data-stu-id="51acc-224">The scan code is the value that the keyboard hardware generates when the user presses a key.</span></span> <span data-ttu-id="51acc-225">Il s’agit d’une valeur dépendante de l’appareil qui identifie la touche enfoncée, par opposition au caractère représenté par la clé.</span><span class="sxs-lookup"><span data-stu-id="51acc-225">It is a device-dependent value that identifies the key pressed, as opposed to the character represented by the key.</span></span> <span data-ttu-id="51acc-226">En général, une application ignore les codes d’analyse.</span><span class="sxs-lookup"><span data-stu-id="51acc-226">An application typically ignores scan codes.</span></span> <span data-ttu-id="51acc-227">Au lieu de cela, il utilise les codes de clé virtuelle indépendants du périphérique pour interpréter les messages de séquence de touches.</span><span class="sxs-lookup"><span data-stu-id="51acc-227">Instead, it uses the device-independent virtual-key codes to interpret keystroke messages.</span></span>

### <a name="extended-key-flag"></a><span data-ttu-id="51acc-228">Indicateur de Extended-Key</span><span class="sxs-lookup"><span data-stu-id="51acc-228">Extended-Key Flag</span></span>

<span data-ttu-id="51acc-229">L’indicateur de clé étendue indique si le message de frappe de touche provient de l’une des touches supplémentaires du clavier amélioré.</span><span class="sxs-lookup"><span data-stu-id="51acc-229">The extended-key flag indicates whether the keystroke message originated from one of the additional keys on the enhanced keyboard.</span></span> <span data-ttu-id="51acc-230">Les clés étendues sont composées des touches ALT et CTRL sur le côté droit du clavier. les touches Inser, DEL, début, fin, PAGE précédente, PAGE suivante et flèche dans les clusters à gauche du pavé numérique ; touche VERR. NUM. touche arrêt (CTRL + PAUSE); touche Impr. SCRN. et les touches de division (/) et de saisie dans le pavé numérique.</span><span class="sxs-lookup"><span data-stu-id="51acc-230">The extended keys consist of the ALT and CTRL keys on the right-hand side of the keyboard; the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad; the NUM LOCK key; the BREAK (CTRL+PAUSE) key; the PRINT SCRN key; and the divide (/) and ENTER keys in the numeric keypad.</span></span> <span data-ttu-id="51acc-231">L’indicateur de clé étendue est défini si la clé est une clé étendue.</span><span class="sxs-lookup"><span data-stu-id="51acc-231">The extended-key flag is set if the key is an extended key.</span></span>

<span data-ttu-id="51acc-232">S’il est spécifié, le code d’analyse était précédé d’un octet de préfixe ayant la valeur 0xE0 (224).</span><span class="sxs-lookup"><span data-stu-id="51acc-232">If specified, the scan code was preceded by a prefix byte having the value 0xE0 (224).</span></span>

### <a name="context-code"></a><span data-ttu-id="51acc-233">Code de contexte</span><span class="sxs-lookup"><span data-stu-id="51acc-233">Context Code</span></span>

<span data-ttu-id="51acc-234">Le code de contexte indique si la touche ALT était en aval lors de la génération du message de frappe.</span><span class="sxs-lookup"><span data-stu-id="51acc-234">The context code indicates whether the ALT key was down when the keystroke message was generated.</span></span> <span data-ttu-id="51acc-235">Le code est 1 si la touche ALT était déverrouillée et 0 si c’était le cas.</span><span class="sxs-lookup"><span data-stu-id="51acc-235">The code is 1 if the ALT key was down and 0 if it was up.</span></span>

### <a name="previous-key-state-flag"></a><span data-ttu-id="51acc-236">Indicateur de Key-State précédent</span><span class="sxs-lookup"><span data-stu-id="51acc-236">Previous Key-State Flag</span></span>

<span data-ttu-id="51acc-237">L’indicateur d’État clé précédent indique si la clé qui a généré le message de frappe était précédemment ou non.</span><span class="sxs-lookup"><span data-stu-id="51acc-237">The previous key-state flag indicates whether the key that generated the keystroke message was previously up or down.</span></span> <span data-ttu-id="51acc-238">La valeur est 1 si la clé a été précédemment interrompue et 0 si la touche était précédemment.</span><span class="sxs-lookup"><span data-stu-id="51acc-238">It is 1 if the key was previously down and 0 if the key was previously up.</span></span> <span data-ttu-id="51acc-239">Vous pouvez utiliser cet indicateur pour identifier les messages de séquence de touches générés par la fonctionnalité de répétition automatique du clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-239">You can use this flag to identify keystroke messages generated by the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="51acc-240">Cet indicateur a la valeur 1 pour les messages de frappe de touche [**WM \_**](wm-keydown.md) et [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) générés par la fonctionnalité de répétition automatique.</span><span class="sxs-lookup"><span data-stu-id="51acc-240">This flag is set to 1 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) keystroke messages generated by the automatic repeat feature.</span></span> <span data-ttu-id="51acc-241">Elle est toujours définie sur 1 pour les messages [**WM \_ KEYUP**](wm-keyup.md) et [**WM \_ SYSKEYUP**](wm-syskeyup.md) .</span><span class="sxs-lookup"><span data-stu-id="51acc-241">It is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

### <a name="transition-state-flag"></a><span data-ttu-id="51acc-242">Indicateur de Transition-State</span><span class="sxs-lookup"><span data-stu-id="51acc-242">Transition-State Flag</span></span>

<span data-ttu-id="51acc-243">L’indicateur d’état de transition indique si l’appui sur une touche ou la libération d’une clé a généré le message de frappe.</span><span class="sxs-lookup"><span data-stu-id="51acc-243">The transition-state flag indicates whether pressing a key or releasing a key generated the keystroke message.</span></span> <span data-ttu-id="51acc-244">Cet indicateur a toujours la valeur 0 pour les messages WM [**\_ keyverse**](wm-keydown.md) et [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) ; il a toujours la valeur 1 pour les messages [**WM \_ KEYUP**](wm-keyup.md) et [**WM \_ SYSKEYUP**](wm-syskeyup.md) .</span><span class="sxs-lookup"><span data-stu-id="51acc-244">This flag is always set to 0 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages; it is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

## <a name="character-messages"></a><span data-ttu-id="51acc-245">Messages de caractères</span><span class="sxs-lookup"><span data-stu-id="51acc-245">Character Messages</span></span>

<span data-ttu-id="51acc-246">Les messages de séquence de touches fournissent un grand nombre d’informations sur les séquences de touches, mais ils ne fournissent pas de codes de caractères pour les séquences de touches de caractères.</span><span class="sxs-lookup"><span data-stu-id="51acc-246">Keystroke messages provide a lot of information about keystrokes, but they do not provide character codes for character keystrokes.</span></span> <span data-ttu-id="51acc-247">Pour récupérer des codes de caractères, une application doit inclure la fonction [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) dans sa boucle de messages de thread.</span><span class="sxs-lookup"><span data-stu-id="51acc-247">To retrieve character codes, an application must include the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function in its thread message loop.</span></span> <span data-ttu-id="51acc-248">**TranslateMessage** transmet un message [**WM \_ keyverse**](wm-keydown.md) ou [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) à la disposition du clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-248">**TranslateMessage** passes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to the keyboard layout.</span></span> <span data-ttu-id="51acc-249">La disposition examine le code de la touche virtuelle du message et, si elle correspond à une touche de caractère, fournit l’équivalent du code de caractère (en tenant compte de l’état des touches Maj et verrouillage des MAJUSCULEs).</span><span class="sxs-lookup"><span data-stu-id="51acc-249">The layout examines the message's virtual-key code and, if it corresponds to a character key, provides the character code equivalent (taking into account the state of the SHIFT and CAPS LOCK keys).</span></span> <span data-ttu-id="51acc-250">Il génère ensuite un message de caractères qui contient le code de caractère et place le message en haut de la file d’attente de messages.</span><span class="sxs-lookup"><span data-stu-id="51acc-250">It then generates a character message that includes the character code and places the message at the top of the message queue.</span></span> <span data-ttu-id="51acc-251">L’itération suivante de la boucle de message supprime le message de la file d’attente et distribue le message à la procédure de fenêtre appropriée.</span><span class="sxs-lookup"><span data-stu-id="51acc-251">The next iteration of the message loop removes the character message from the queue and dispatches the message to the appropriate window procedure.</span></span>

<span data-ttu-id="51acc-252">Cette section couvre les sujets suivants :</span><span class="sxs-lookup"><span data-stu-id="51acc-252">This section covers the following topics:</span></span>

-   [<span data-ttu-id="51acc-253">Messages de caractères non-système</span><span class="sxs-lookup"><span data-stu-id="51acc-253">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
-   [<span data-ttu-id="51acc-254">Messages de caractères morts</span><span class="sxs-lookup"><span data-stu-id="51acc-254">Dead-Character Messages</span></span>](#dead-character-messages)

### <a name="nonsystem-character-messages"></a><span data-ttu-id="51acc-255">Messages de caractères non-système</span><span class="sxs-lookup"><span data-stu-id="51acc-255">Nonsystem Character Messages</span></span>

<span data-ttu-id="51acc-256">Une procédure de fenêtre peut recevoir les messages de caractères suivants : [**WM \_ char**](wm-char.md), [**WM \_ DEADCHAR**](wm-deadchar.md), [**WM \_ SYSCHAR**](/windows/desktop/menurc/wm-syschar), [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md)et [**WM \_ UNICHAR**](wm-unichar.md).</span><span class="sxs-lookup"><span data-stu-id="51acc-256">A window procedure can receive the following character messages: [**WM\_CHAR**](wm-char.md), [**WM\_DEADCHAR**](wm-deadchar.md), [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar), [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md), and [**WM\_UNICHAR**](wm-unichar.md).</span></span> <span data-ttu-id="51acc-257">La fonction [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) génère un message **WM \_** ou **WM \_ DEADCHAR** lors du traitement d’un message [**WM \_**](wm-keydown.md) KeyOut.</span><span class="sxs-lookup"><span data-stu-id="51acc-257">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates a **WM\_CHAR** or **WM\_DEADCHAR** message when it processes a [**WM\_KEYDOWN**](wm-keydown.md) message.</span></span> <span data-ttu-id="51acc-258">De même, il génère un message **WM \_ SYSCHAR** ou **WM \_ SYSDEADCHAR** lors du traitement d’un message [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) .</span><span class="sxs-lookup"><span data-stu-id="51acc-258">Similarly, it generates a **WM\_SYSCHAR** or **WM\_SYSDEADCHAR** message when it processes a [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message.</span></span>

<span data-ttu-id="51acc-259">Une application qui traite les entrées au clavier ignore généralement tous les messages, sauf les [**\_ caractères WM**](wm-char.md) et [**WM \_ UNICHAR**](wm-unichar.md) , en passant tous les autres messages à la fonction [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="51acc-259">An application that processes keyboard input typically ignores all but the [**WM\_CHAR**](wm-char.md) and [**WM\_UNICHAR**](wm-unichar.md) messages, passing any other messages to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="51acc-260">Notez que **WM \_ char** utilise UTF (Unicode Transformation Format), tandis que **WM \_ UNICHAR** utilise UTF-32.</span><span class="sxs-lookup"><span data-stu-id="51acc-260">Note that **WM\_CHAR** uses 16-bit Unicode Transformation Format (UTF) while **WM\_UNICHAR** uses UTF-32.</span></span> <span data-ttu-id="51acc-261">Le système utilise les messages [**WM \_ SYSCHAR**](/windows/desktop/menurc/wm-syschar) et [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md) pour implémenter les mnémoniques de menu.</span><span class="sxs-lookup"><span data-stu-id="51acc-261">The system uses the [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar) and [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) messages to implement menu mnemonics.</span></span>

<span data-ttu-id="51acc-262">Le paramètre **wParam** de tous les messages de caractères contient le code de caractère de la touche de caractère qui a été enfoncée.</span><span class="sxs-lookup"><span data-stu-id="51acc-262">The **wParam** parameter of all character messages contains the character code of the character key that was pressed.</span></span> <span data-ttu-id="51acc-263">La valeur du code de caractère dépend de la classe de fenêtre de la fenêtre qui reçoit le message.</span><span class="sxs-lookup"><span data-stu-id="51acc-263">The value of the character code depends on the window class of the window receiving the message.</span></span> <span data-ttu-id="51acc-264">Si la version Unicode de la fonction [**registerClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) a été utilisée pour inscrire la classe de fenêtre, le système fournit des caractères Unicode à toutes les fenêtres de cette classe.</span><span class="sxs-lookup"><span data-stu-id="51acc-264">If the Unicode version of the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function was used to register the window class, the system provides Unicode characters to all windows of that class.</span></span> <span data-ttu-id="51acc-265">Dans le cas contraire, le système fournit des codes de caractères ASCII.</span><span class="sxs-lookup"><span data-stu-id="51acc-265">Otherwise, the system provides ASCII character codes.</span></span> <span data-ttu-id="51acc-266">Pour plus d’informations, consultez [Unicode et jeux de caractères](/windows/desktop/Intl/unicode-and-character-sets).</span><span class="sxs-lookup"><span data-stu-id="51acc-266">For more information, see [Unicode and Character Sets](/windows/desktop/Intl/unicode-and-character-sets).</span></span>

<span data-ttu-id="51acc-267">Le contenu du paramètre **lParam** d’un message de caractères est identique au contenu du paramètre **lParam** du message de clé en aval qui a été traduit pour produire le message de caractère.</span><span class="sxs-lookup"><span data-stu-id="51acc-267">The contents of the **lParam** parameter of a character message are identical to the contents of the **lParam** parameter of the key-down message that was translated to produce the character message.</span></span> <span data-ttu-id="51acc-268">Pour plus d’informations, consultez [indicateurs de message de frappe](#keystroke-message-flags).</span><span class="sxs-lookup"><span data-stu-id="51acc-268">For information, see [Keystroke Message Flags](#keystroke-message-flags).</span></span>

### <a name="dead-character-messages"></a><span data-ttu-id="51acc-269">Messages Dead-Character</span><span class="sxs-lookup"><span data-stu-id="51acc-269">Dead-Character Messages</span></span>

<span data-ttu-id="51acc-270">Certains claviers non anglais contiennent des touches de caractères qui ne sont pas censées produire des caractères.</span><span class="sxs-lookup"><span data-stu-id="51acc-270">Some non-English keyboards contain character keys that are not expected to produce characters by themselves.</span></span> <span data-ttu-id="51acc-271">Au lieu de cela, ils sont utilisés pour ajouter un signe diacritique au caractère produit par la séquence de touches suivante.</span><span class="sxs-lookup"><span data-stu-id="51acc-271">Instead, they are used to add a diacritic to the character produced by the subsequent keystroke.</span></span> <span data-ttu-id="51acc-272">Ces clés sont appelées *clés mortes*.</span><span class="sxs-lookup"><span data-stu-id="51acc-272">These keys are called *dead keys*.</span></span> <span data-ttu-id="51acc-273">La touche circonflexe sur un clavier allemand est un exemple de touche morte.</span><span class="sxs-lookup"><span data-stu-id="51acc-273">The circumflex key on a German keyboard is an example of a dead key.</span></span> <span data-ttu-id="51acc-274">Pour entrer le caractère composé d’un « o » avec un accent circonflexe, un utilisateur allemand doit taper la touche circonflexe suivie de la touche « o ».</span><span class="sxs-lookup"><span data-stu-id="51acc-274">To enter the character consisting of an "o" with a circumflex, a German user would type the circumflex key followed by the "o" key.</span></span> <span data-ttu-id="51acc-275">La fenêtre avec le focus clavier reçoit la séquence de messages suivante :</span><span class="sxs-lookup"><span data-stu-id="51acc-275">The window with the keyboard focus would receive the following sequence of messages:</span></span>

1.  [<span data-ttu-id="51acc-276">**WM- \_ touche**</span><span class="sxs-lookup"><span data-stu-id="51acc-276">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
2.  [<span data-ttu-id="51acc-277">**\_DEADCHAR WM**</span><span class="sxs-lookup"><span data-stu-id="51acc-277">**WM\_DEADCHAR**</span></span>](wm-deadchar.md)
3.  [<span data-ttu-id="51acc-278">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="51acc-278">**WM\_KEYUP**</span></span>](wm-keyup.md)
4.  [<span data-ttu-id="51acc-279">**WM- \_ touche**</span><span class="sxs-lookup"><span data-stu-id="51acc-279">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
5.  [<span data-ttu-id="51acc-280">**\_caractère WM**</span><span class="sxs-lookup"><span data-stu-id="51acc-280">**WM\_CHAR**</span></span>](wm-char.md)
6.  [<span data-ttu-id="51acc-281">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="51acc-281">**WM\_KEYUP**</span></span>](wm-keyup.md)

<span data-ttu-id="51acc-282">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) génère le message [**WM \_ DEADCHAR**](wm-deadchar.md) lors du traitement du [**message \_ WM**](wm-keydown.md) KeyOut à partir d’une clé morte.</span><span class="sxs-lookup"><span data-stu-id="51acc-282">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) generates the [**WM\_DEADCHAR**](wm-deadchar.md) message when it processes the [**WM\_KEYDOWN**](wm-keydown.md) message from a dead key.</span></span> <span data-ttu-id="51acc-283">Bien que le paramètre *wParam* du message **WM \_ DEADCHAR** contienne le code de caractère de l’expression diacritiques pour la touche morte, une application ignore généralement le message.</span><span class="sxs-lookup"><span data-stu-id="51acc-283">Although the *wParam* parameter of the **WM\_DEADCHAR** message contains the character code of the diacritic for the dead key, an application typically ignores the message.</span></span> <span data-ttu-id="51acc-284">Au lieu de cela, il traite le message [**WM \_ char**](wm-char.md) généré par la séquence de touches suivante.</span><span class="sxs-lookup"><span data-stu-id="51acc-284">Instead, it processes the [**WM\_CHAR**](wm-char.md) message generated by the subsequent keystroke.</span></span> <span data-ttu-id="51acc-285">Le paramètre *wParam* du message **WM \_ char** contient le code de caractère de la lettre avec le signe diacritique.</span><span class="sxs-lookup"><span data-stu-id="51acc-285">The *wParam* parameter of the **WM\_CHAR** message contains the character code of the letter with the diacritic.</span></span> <span data-ttu-id="51acc-286">Si la séquence de touches suivante génère un caractère qui ne peut pas être combiné avec un signe diacritique, le système génère deux messages **WM \_ char** .</span><span class="sxs-lookup"><span data-stu-id="51acc-286">If the subsequent keystroke generates a character that cannot be combined with a diacritic, the system generates two **WM\_CHAR** messages.</span></span> <span data-ttu-id="51acc-287">Le paramètre *wParam* de la première contient le code de caractère de l’diacritiques ; le paramètre *wParam* de la seconde contient le code de caractère de la touche de caractère suivante.</span><span class="sxs-lookup"><span data-stu-id="51acc-287">The *wParam* parameter of the first contains the character code of the diacritic; the *wParam* parameter of the second contains the character code of the subsequent character key.</span></span>

<span data-ttu-id="51acc-288">La fonction [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) génère le message [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md) lors du traitement du message [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) à partir d’une clé morte du système (une touche morte qui est enfoncée avec la touche Alt).</span><span class="sxs-lookup"><span data-stu-id="51acc-288">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates the [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) message when it processes the [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message from a system dead key (a dead key that is pressed in combination with the ALT key).</span></span> <span data-ttu-id="51acc-289">Une application ignore généralement le message **WM \_ SYSDEADCHAR** .</span><span class="sxs-lookup"><span data-stu-id="51acc-289">An application typically ignores the **WM\_SYSDEADCHAR** message.</span></span>

## <a name="key-status"></a><span data-ttu-id="51acc-290">État de la clé</span><span class="sxs-lookup"><span data-stu-id="51acc-290">Key Status</span></span>

<span data-ttu-id="51acc-291">Lors du traitement d’un message de clavier, une application peut avoir besoin de déterminer l’état d’une autre clé en plus de celle qui a généré le message en cours.</span><span class="sxs-lookup"><span data-stu-id="51acc-291">While processing a keyboard message, an application may need to determine the status of another key besides the one that generated the current message.</span></span> <span data-ttu-id="51acc-292">Par exemple, une application de traitement de texte qui permet à l’utilisateur d’appuyer sur Maj + fin pour sélectionner un bloc de texte doit vérifier l’état de la touche Maj chaque fois qu’elle reçoit un message de frappe de la touche fin.</span><span class="sxs-lookup"><span data-stu-id="51acc-292">For example, a word-processing application that allows the user to press SHIFT+END to select a block of text must check the status of the SHIFT key whenever it receives a keystroke message from the END key.</span></span> <span data-ttu-id="51acc-293">L’application peut utiliser la fonction [**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) pour déterminer l’état d’une clé virtuelle au moment de la génération du message actuel. elle peut utiliser la fonction [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) pour récupérer l’état actuel d’une clé virtuelle.</span><span class="sxs-lookup"><span data-stu-id="51acc-293">The application can use the [**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) function to determine the status of a virtual key at the time the current message was generated; it can use the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function to retrieve the current status of a virtual key.</span></span>

<span data-ttu-id="51acc-294">La disposition du clavier gère une liste de noms.</span><span class="sxs-lookup"><span data-stu-id="51acc-294">The keyboard layout maintains a list of names.</span></span> <span data-ttu-id="51acc-295">Le nom d’une clé qui produit un caractère unique est le même que le caractère produit par la clé.</span><span class="sxs-lookup"><span data-stu-id="51acc-295">The name of a key that produces a single character is the same as the character produced by the key.</span></span> <span data-ttu-id="51acc-296">Le nom d’une touche non-caractère, tel que TAB et entrée, est stocké sous la forme d’une chaîne de caractères.</span><span class="sxs-lookup"><span data-stu-id="51acc-296">The name of a noncharacter key such as TAB and ENTER is stored as a character string.</span></span> <span data-ttu-id="51acc-297">Une application peut récupérer le nom de n’importe quelle clé du pilote de périphérique en appelant la fonction [**GetKeyNameText**](/windows/win32/api/winuser/nf-winuser-getkeynametexta) .</span><span class="sxs-lookup"><span data-stu-id="51acc-297">An application can retrieve the name of any key from the device driver by calling the [**GetKeyNameText**](/windows/win32/api/winuser/nf-winuser-getkeynametexta) function.</span></span>

## <a name="keystroke-and-character-translations"></a><span data-ttu-id="51acc-298">Traductions de séquences de touches et de caractères</span><span class="sxs-lookup"><span data-stu-id="51acc-298">Keystroke and Character Translations</span></span>

<span data-ttu-id="51acc-299">Le système comprend plusieurs fonctions spéciales qui traduisent des codes d’analyse, des codes de caractères et des codes de touche virtuelle fournis par différents messages de frappe.</span><span class="sxs-lookup"><span data-stu-id="51acc-299">The system includes several special purpose functions that translate scan codes, character codes, and virtual-key codes provided by various keystroke messages.</span></span> <span data-ttu-id="51acc-300">Ces fonctions incluent [**MapVirtualKey**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya), [**toascii**](/windows/win32/api/winuser/nf-winuser-toascii), [**ToUnicode**](/windows/win32/api/winuser/nf-winuser-tounicode)et [**VkKeyScan**](/windows/win32/api/winuser/nf-winuser-vkkeyscana).</span><span class="sxs-lookup"><span data-stu-id="51acc-300">These functions include [**MapVirtualKey**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya), [**ToAscii**](/windows/win32/api/winuser/nf-winuser-toascii), [**ToUnicode**](/windows/win32/api/winuser/nf-winuser-tounicode), and [**VkKeyScan**](/windows/win32/api/winuser/nf-winuser-vkkeyscana).</span></span>

<span data-ttu-id="51acc-301">En outre, Microsoft Rich Edit 3,0 prend en charge l' [IME HexToUnicode](/windows/desktop/Intl/hextounicode-ime), qui permet à un utilisateur d’effectuer une conversion entre des caractères hexadécimaux et Unicode à l’aide de touches d’accès rapide.</span><span class="sxs-lookup"><span data-stu-id="51acc-301">In addition, Microsoft Rich Edit 3.0 supports the [HexToUnicode IME](/windows/desktop/Intl/hextounicode-ime), which allows a user to convert between hexadecimal and Unicode characters by using hot keys.</span></span> <span data-ttu-id="51acc-302">Cela signifie que lorsque Microsoft Rich Edit 3,0 est incorporé dans une application, l’application hérite des fonctionnalités de l’IME HexToUnicode.</span><span class="sxs-lookup"><span data-stu-id="51acc-302">This means that when Microsoft Rich Edit 3.0 is incorporated into an application, the application will inherit the features of the HexToUnicode IME.</span></span>

## <a name="hot-key-support"></a><span data-ttu-id="51acc-303">Support Hot-Key</span><span class="sxs-lookup"><span data-stu-id="51acc-303">Hot-Key Support</span></span>

<span data-ttu-id="51acc-304">Une *touche d’accès rapide* est une combinaison de touches qui génère un message de [**\_ raccourci WM**](wm-hotkey.md) , un message que le système place en haut de la file d’attente de messages d’un thread, en ignorant tous les messages existants dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="51acc-304">A *hot key* is a key combination that generates a [**WM\_HOTKEY**](wm-hotkey.md) message, a message the system places at the top of a thread's message queue, bypassing any existing messages in the queue.</span></span> <span data-ttu-id="51acc-305">Les applications utilisent des touches d’accès rapide pour obtenir une entrée de clavier haute priorité auprès de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="51acc-305">Applications use hot keys to obtain high-priority keyboard input from the user.</span></span> <span data-ttu-id="51acc-306">Par exemple, en définissant une touche d’accès rapide composée de la combinaison de touches CTRL + C, une application peut permettre à l’utilisateur d’annuler une opération de longue durée.</span><span class="sxs-lookup"><span data-stu-id="51acc-306">For example, by defining a hot key consisting of the CTRL+C key combination, an application can allow the user to cancel a lengthy operation.</span></span>

<span data-ttu-id="51acc-307">Pour définir une touche d’accès rapide, une application appelle la fonction [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) , en spécifiant la combinaison de touches qui génère le message de [**\_ raccourci WM**](wm-hotkey.md) , le handle de la fenêtre pour recevoir le message et l’identificateur de la touche d’accès rapide.</span><span class="sxs-lookup"><span data-stu-id="51acc-307">To define a hot key, an application calls the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) function, specifying the combination of keys that generates the [**WM\_HOTKEY**](wm-hotkey.md) message, the handle to the window to receive the message, and the identifier of the hot key.</span></span> <span data-ttu-id="51acc-308">Quand l’utilisateur appuie sur la touche d’accès rapide, un message de **\_ raccourci WM** est placé dans la file d’attente de messages du thread qui a créé la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="51acc-308">When the user presses the hot key, a **WM\_HOTKEY** message is placed in the message queue of the thread that created the window.</span></span> <span data-ttu-id="51acc-309">Le paramètre *wParam* du message contient l’identificateur de la touche d’accès rapide.</span><span class="sxs-lookup"><span data-stu-id="51acc-309">The *wParam* parameter of the message contains the identifier of the hot key.</span></span> <span data-ttu-id="51acc-310">L’application peut définir plusieurs touches d’accès rapide pour un thread, mais chaque touche d’accès rapide du thread doit avoir un identificateur unique.</span><span class="sxs-lookup"><span data-stu-id="51acc-310">The application can define multiple hot keys for a thread, but each hot key in the thread must have a unique identifier.</span></span> <span data-ttu-id="51acc-311">Avant que l’application ne se termine, elle doit utiliser la fonction [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) pour détruire la touche d’accès rapide.</span><span class="sxs-lookup"><span data-stu-id="51acc-311">Before the application terminates, it should use the [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) function to destroy the hot key.</span></span>

<span data-ttu-id="51acc-312">Les applications peuvent utiliser un contrôle de touche d’accès rapide pour permettre à l’utilisateur de choisir facilement une touche d’accès rapide.</span><span class="sxs-lookup"><span data-stu-id="51acc-312">Applications can use a hot key control to make it easy for the user to choose a hot key.</span></span> <span data-ttu-id="51acc-313">Les contrôles de touche d’accès rapide sont généralement utilisés pour définir une touche d’accès rapide qui active une fenêtre ; ils n’utilisent pas les fonctions [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) et [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) .</span><span class="sxs-lookup"><span data-stu-id="51acc-313">Hot key controls are typically used to define a hot key that activates a window; they do not use the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) and [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) functions.</span></span> <span data-ttu-id="51acc-314">Au lieu de cela, une application qui utilise un contrôle de touche d’accès rapide envoie généralement le message [**WM \_ SETHOTKEY**](wm-sethotkey.md) pour définir la touche d’accès rapide.</span><span class="sxs-lookup"><span data-stu-id="51acc-314">Instead, an application that uses a hot key control typically sends the [**WM\_SETHOTKEY**](wm-sethotkey.md) message to set the hot key.</span></span> <span data-ttu-id="51acc-315">Chaque fois que l’utilisateur appuie sur la touche d’accès rapide, le système envoie un message [**WM \_ SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) en spécifiant SC \_ Hotkey.</span><span class="sxs-lookup"><span data-stu-id="51acc-315">Whenever the user presses the hot key, the system sends a [**WM\_SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) message specifying SC\_HOTKEY.</span></span> <span data-ttu-id="51acc-316">Pour plus d’informations sur les contrôles de touche d’accès rapide, consultez « Utilisation des contrôles de touche d’accès rapide » dans les [contrôles de touche d’accès rapide](../controls/hot-key-controls.md).</span><span class="sxs-lookup"><span data-stu-id="51acc-316">For more information about hot key controls, see "Using Hot Key Controls" in [Hot Key Controls](../controls/hot-key-controls.md).</span></span>

## <a name="keyboard-keys-for-browsing-and-other-functions"></a><span data-ttu-id="51acc-317">Touches du clavier pour la navigation et d’autres fonctions</span><span class="sxs-lookup"><span data-stu-id="51acc-317">Keyboard Keys for Browsing and Other Functions</span></span>

<span data-ttu-id="51acc-318">Windows assure la prise en charge des claviers avec des clés spéciales pour les fonctions de navigateur, les fonctions de média, le lancement d’applications et la gestion de l’alimentation.</span><span class="sxs-lookup"><span data-stu-id="51acc-318">Windows provides support for keyboards with special keys for browser functions, media functions, application launching, and power management.</span></span> <span data-ttu-id="51acc-319">Le [**\_ APPCOMMAND WM**](wm-appcommand.md) prend en charge les touches de clavier supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="51acc-319">The [**WM\_APPCOMMAND**](wm-appcommand.md) supports the extra keyboard keys.</span></span> <span data-ttu-id="51acc-320">En outre, la fonction [**ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) est modifiée pour prendre en charge les touches de clavier supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="51acc-320">In addition, the [**ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) function is modified to support the extra keyboard keys.</span></span>

<span data-ttu-id="51acc-321">Il est peu probable qu’une fenêtre enfant dans une application de composant puisse implémenter directement des commandes pour ces touches de clavier supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="51acc-321">It is unlikely that a child window in a component application will be able to directly implement commands for these extra keyboard keys.</span></span> <span data-ttu-id="51acc-322">Ainsi, lorsque vous appuyez sur l’une de ces touches, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) envoie un message [**WM \_ APPCOMMAND**](wm-appcommand.md) à une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="51acc-322">So when one of these keys is pressed, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) will send a [**WM\_APPCOMMAND**](wm-appcommand.md) message to a window.</span></span> <span data-ttu-id="51acc-323">**DefWindowProc** propage également le message **WM \_ APPCOMMAND** à sa fenêtre parente.</span><span class="sxs-lookup"><span data-stu-id="51acc-323">**DefWindowProc** will also bubble the **WM\_APPCOMMAND** message to its parent window.</span></span> <span data-ttu-id="51acc-324">Cela est similaire à la façon dont les menus contextuels sont appelés avec le bouton droit de la souris, ce qui indique que **DefWindowProc** envoie un message [**WM \_ CONTEXTMENU**](/windows/desktop/menurc/wm-contextmenu) sur un clic de bouton droit et le propage à son parent.</span><span class="sxs-lookup"><span data-stu-id="51acc-324">This is similar to the way context menus are invoked with the right mouse button, which is that **DefWindowProc** sends a [**WM\_CONTEXTMENU**](/windows/desktop/menurc/wm-contextmenu) message on a right button click, and bubbles it to its parent.</span></span> <span data-ttu-id="51acc-325">En outre, si **DefWindowProc** reçoit un message **WM \_ APPCOMMAND** pour une fenêtre de niveau supérieur, il appellera un hook de Shell avec le code **HSHELL \_ APPCOMMAND**.</span><span class="sxs-lookup"><span data-stu-id="51acc-325">Additionally, if **DefWindowProc** receives a **WM\_APPCOMMAND** message for a top-level window, it will call a shell hook with code **HSHELL\_APPCOMMAND**.</span></span>

<span data-ttu-id="51acc-326">Windows prend également en charge l’explorateur Microsoft IntelliMouse, qui est une souris avec cinq boutons.</span><span class="sxs-lookup"><span data-stu-id="51acc-326">Windows also supports the Microsoft IntelliMouse Explorer, which is a mouse with five buttons.</span></span> <span data-ttu-id="51acc-327">Les deux boutons supplémentaires prennent en charge la navigation vers l’avant et l’arrière du navigateur.</span><span class="sxs-lookup"><span data-stu-id="51acc-327">The two extra buttons support forward and backward browser navigation.</span></span> <span data-ttu-id="51acc-328">Pour plus d’informations, consultez [XBUTTONs](about-mouse-input.md).</span><span class="sxs-lookup"><span data-stu-id="51acc-328">For more information, see [XBUTTONs](about-mouse-input.md).</span></span>

## <a name="simulating-input"></a><span data-ttu-id="51acc-329">Simulation de l’entrée</span><span class="sxs-lookup"><span data-stu-id="51acc-329">Simulating Input</span></span>

<span data-ttu-id="51acc-330">Pour simuler une série ininterrompue d’événements d’entrée utilisateur, utilisez la fonction [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) .</span><span class="sxs-lookup"><span data-stu-id="51acc-330">To simulate an uninterrupted series of user input events, use the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function.</span></span> <span data-ttu-id="51acc-331">La fonction accepte trois paramètres.</span><span class="sxs-lookup"><span data-stu-id="51acc-331">The function accepts three parameters.</span></span> <span data-ttu-id="51acc-332">Le premier paramètre, *cInputs*, indique le nombre d’événements d’entrée qui seront simulés.</span><span class="sxs-lookup"><span data-stu-id="51acc-332">The first parameter, *cInputs*, indicates the number of input events that will be simulated.</span></span> <span data-ttu-id="51acc-333">Le deuxième paramètre, *rgInputs*, est un tableau de structures [**d’entrée**](/windows/win32/api/winuser/ns-winuser-input) , chacune décrivant un type d’événement d’entrée et des informations supplémentaires sur cet événement.</span><span class="sxs-lookup"><span data-stu-id="51acc-333">The second parameter, *rgInputs*, is an array of [**INPUT**](/windows/win32/api/winuser/ns-winuser-input) structures, each describing a type of input event and additional information about that event.</span></span> <span data-ttu-id="51acc-334">Le dernier paramètre, *cbSize*, accepte la taille de la structure **d’entrée** , en octets.</span><span class="sxs-lookup"><span data-stu-id="51acc-334">The last parameter, *cbSize*, accepts the size of the **INPUT** structure, in bytes.</span></span>

<span data-ttu-id="51acc-335">La fonction [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) utilise l’injection d’une série d’événements d’entrée simulés dans le flux d’entrée d’un appareil.</span><span class="sxs-lookup"><span data-stu-id="51acc-335">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function works by injecting a series of simulated input events into a device's input stream.</span></span> <span data-ttu-id="51acc-336">L’effet est semblable à l’appel de la fonction d’événement [**keybd \_**](/windows/win32/api/winuser/nf-winuser-keybd_event) ou de la fonction de [**souris \_**](/windows/win32/api/winuser/nf-winuser-mouse_event) à plusieurs reprises, à ceci près que le système garantit qu’aucun autre événement d’entrée ne se mélange avec les événements simulés.</span><span class="sxs-lookup"><span data-stu-id="51acc-336">The effect is similar to calling the [**keybd\_event**](/windows/win32/api/winuser/nf-winuser-keybd_event) or [**mouse\_event**](/windows/win32/api/winuser/nf-winuser-mouse_event) function repeatedly, except that the system ensures that no other input events intermingle with the simulated events.</span></span> <span data-ttu-id="51acc-337">Lorsque l’appel est terminé, la valeur de retour indique le nombre d’événements d’entrée correctement joués.</span><span class="sxs-lookup"><span data-stu-id="51acc-337">When the call completes, the return value indicates the number of input events successfully played.</span></span> <span data-ttu-id="51acc-338">Si cette valeur est égale à zéro, l’entrée a été bloquée.</span><span class="sxs-lookup"><span data-stu-id="51acc-338">If this value is zero, then input was blocked.</span></span>

<span data-ttu-id="51acc-339">La fonction [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) ne réinitialise pas l’état actuel du clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-339">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function does not reset the keyboard's current state.</span></span> <span data-ttu-id="51acc-340">Par conséquent, si des clés sont activées pour l’utilisateur lorsque vous appelez cette fonction, elles risquent d’interférer avec les événements générés par cette fonction.</span><span class="sxs-lookup"><span data-stu-id="51acc-340">Therefore, if the user has any keys pressed when you call this function, they might interfere with the events that this function generates.</span></span> <span data-ttu-id="51acc-341">Si vous vous inquiétez des interférences possibles, vérifiez l’état du clavier avec la fonction [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) et corrigez-le si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="51acc-341">If you are concerned about possible interference, check the keyboard's state with the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function and correct as necessary.</span></span>

## <a name="languages-locales-and-keyboard-layouts"></a><span data-ttu-id="51acc-342">Langues, paramètres régionaux et dispositions de clavier</span><span class="sxs-lookup"><span data-stu-id="51acc-342">Languages, Locales, and Keyboard Layouts</span></span>

<span data-ttu-id="51acc-343">Une *langue* est un langage naturel, tel que l’anglais, le français et le japonais.</span><span class="sxs-lookup"><span data-stu-id="51acc-343">A *language* is a natural language, such as English, French, and Japanese.</span></span> <span data-ttu-id="51acc-344">Une sous- *langue* est une variante d’un langage naturel parlée dans une région géographique spécifique, telle que les sous-langues anglaises parlées au Royaume-Uni et le États-Unis.</span><span class="sxs-lookup"><span data-stu-id="51acc-344">A *sublanguage* is a variant of a natural language that is spoken in a specific geographical region, such as the English sublanguages spoken in the United Kingdom and the United States.</span></span> <span data-ttu-id="51acc-345">Les applications utilisent des valeurs, appelées [identificateurs de langage](/windows/desktop/Intl/language-identifiers), pour identifier de manière unique les langues et les sous-langues.</span><span class="sxs-lookup"><span data-stu-id="51acc-345">Applications use values, called [language identifiers](/windows/desktop/Intl/language-identifiers), to uniquely identify languages and sublanguages.</span></span>

<span data-ttu-id="51acc-346">Les applications utilisent généralement des *paramètres régionaux* pour définir le langage dans lequel l’entrée et la sortie sont traitées.</span><span class="sxs-lookup"><span data-stu-id="51acc-346">Applications typically use *locales* to set the language in which input and output is processed.</span></span> <span data-ttu-id="51acc-347">La définition des paramètres régionaux pour le clavier, par exemple, affecte les valeurs de caractères générées par le clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-347">Setting the locale for the keyboard, for example, affects the character values generated by the keyboard.</span></span> <span data-ttu-id="51acc-348">La définition des paramètres régionaux pour l’affichage ou l’imprimante affecte les glyphes affichés ou imprimés.</span><span class="sxs-lookup"><span data-stu-id="51acc-348">Setting the locale for the display or printer affects the glyphs displayed or printed.</span></span> <span data-ttu-id="51acc-349">Les applications définissent les paramètres régionaux d’un clavier en chargeant et en utilisant des dispositions de clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-349">Applications set the locale for a keyboard by loading and using keyboard layouts.</span></span> <span data-ttu-id="51acc-350">Ils définissent les paramètres régionaux d’un affichage ou d’une imprimante en sélectionnant une police qui prend en charge les paramètres régionaux spécifiés.</span><span class="sxs-lookup"><span data-stu-id="51acc-350">They set the locale for a display or printer by selecting a font that supports the specified locale.</span></span>

<span data-ttu-id="51acc-351">Une disposition de clavier spécifie non seulement la position physique des touches sur le clavier, mais également les valeurs de caractère générées en appuyant sur ces touches.</span><span class="sxs-lookup"><span data-stu-id="51acc-351">A keyboard layout not only specifies the physical position of the keys on the keyboard but also determines the character values generated by pressing those keys.</span></span> <span data-ttu-id="51acc-352">Chaque disposition identifie la langue d’entrée actuelle et détermine les valeurs de caractères qui sont générées par les combinaisons de clés et de clés.</span><span class="sxs-lookup"><span data-stu-id="51acc-352">Each layout identifies the current input language and determines which character values are generated by which keys and key combinations.</span></span>

<span data-ttu-id="51acc-353">Chaque disposition de clavier a un handle correspondant qui identifie la disposition et la langue.</span><span class="sxs-lookup"><span data-stu-id="51acc-353">Every keyboard layout has a corresponding handle that identifies the layout and language.</span></span> <span data-ttu-id="51acc-354">Le mot de poids faible du handle est un identificateur de langue.</span><span class="sxs-lookup"><span data-stu-id="51acc-354">The low word of the handle is a language identifier.</span></span> <span data-ttu-id="51acc-355">Le mot de poids fort est un handle d’appareil, spécifiant la disposition physique, ou est égal à zéro, ce qui indique une disposition physique par défaut.</span><span class="sxs-lookup"><span data-stu-id="51acc-355">The high word is a device handle, specifying the physical layout, or is zero, indicating a default physical layout.</span></span> <span data-ttu-id="51acc-356">L’utilisateur peut associer n’importe quel langage d’entrée à une disposition physique.</span><span class="sxs-lookup"><span data-stu-id="51acc-356">The user can associate any input language with a physical layout.</span></span> <span data-ttu-id="51acc-357">Par exemple, un utilisateur anglophone qui travaille très rarement en français peut définir la langue d’entrée du clavier sur le français sans modifier la disposition physique du clavier.</span><span class="sxs-lookup"><span data-stu-id="51acc-357">For example, an English-speaking user who very occasionally works in French can set the input language of the keyboard to French without changing the physical layout of the keyboard.</span></span> <span data-ttu-id="51acc-358">Cela signifie que l’utilisateur peut entrer du texte en français à l’aide de la disposition anglaise familière.</span><span class="sxs-lookup"><span data-stu-id="51acc-358">This means the user can enter text in French using the familiar English layout.</span></span>

<span data-ttu-id="51acc-359">En général, les applications ne sont pas censées manipuler directement les langues d’entrée.</span><span class="sxs-lookup"><span data-stu-id="51acc-359">Applications are generally not expected to manipulate input languages directly.</span></span> <span data-ttu-id="51acc-360">Au lieu de cela, l’utilisateur configure les combinaisons de langue et de disposition, puis passe de l’un à l’autre.</span><span class="sxs-lookup"><span data-stu-id="51acc-360">Instead, the user sets up language and layout combinations, then switches among them.</span></span> <span data-ttu-id="51acc-361">Quand l’utilisateur clique sur un texte marqué d’une langue différente, l’application appelle la fonction [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) pour activer la disposition par défaut de l’utilisateur pour cette langue.</span><span class="sxs-lookup"><span data-stu-id="51acc-361">When the user clicks into text marked with a different language, the application calls the [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function to activate the user's default layout for that language.</span></span> <span data-ttu-id="51acc-362">Si l’utilisateur modifie le texte dans une langue qui n’est pas dans la liste active, l’application peut appeler la fonction [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) avec la langue pour obtenir une disposition basée sur cette langue.</span><span class="sxs-lookup"><span data-stu-id="51acc-362">If the user edits text in a language which is not in the active list, the application can call the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function with the language to get a layout based on that language.</span></span>

<span data-ttu-id="51acc-363">La fonction [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) définit la langue d’entrée pour la tâche actuelle.</span><span class="sxs-lookup"><span data-stu-id="51acc-363">The [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function sets the input language for the current task.</span></span> <span data-ttu-id="51acc-364">Le paramètre *HKL* peut être soit le handle de la disposition du clavier, soit un identificateur de langue zéro étendu.</span><span class="sxs-lookup"><span data-stu-id="51acc-364">The *hkl* parameter can be either the handle to the keyboard layout or a zero-extended language identifier.</span></span> <span data-ttu-id="51acc-365">Les poignées de disposition du clavier peuvent être obtenues à partir de la fonction [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) ou [**GetKeyboardLayoutList**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist) .</span><span class="sxs-lookup"><span data-stu-id="51acc-365">Keyboard layout handles can be obtained from the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) or [**GetKeyboardLayoutList**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist) function.</span></span> <span data-ttu-id="51acc-366">Les valeurs précédentes **HKL \_ Next** et **HKL \_** peuvent également être utilisées pour sélectionner le clavier suivant ou précédent.</span><span class="sxs-lookup"><span data-stu-id="51acc-366">The **HKL\_NEXT** and **HKL\_PREV** values can also be used to select the next or previous keyboard.</span></span>

<span data-ttu-id="51acc-367">La fonction [**GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) récupère le nom de la disposition de clavier active pour le thread appelant.</span><span class="sxs-lookup"><span data-stu-id="51acc-367">The [**GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) function retrieves the name of the active keyboard layout for the calling thread.</span></span> <span data-ttu-id="51acc-368">Si une application crée la disposition active à l’aide de la fonction [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) , **GetKeyboardLayoutName** récupère la même chaîne que celle utilisée pour créer la disposition.</span><span class="sxs-lookup"><span data-stu-id="51acc-368">If an application creates the active layout using the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function, **GetKeyboardLayoutName** retrieves the same string used to create the layout.</span></span> <span data-ttu-id="51acc-369">Dans le cas contraire, la chaîne est l’identificateur de langue primaire correspondant aux paramètres régionaux de la disposition active.</span><span class="sxs-lookup"><span data-stu-id="51acc-369">Otherwise, the string is the primary language identifier corresponding to the locale of the active layout.</span></span> <span data-ttu-id="51acc-370">Cela signifie que la fonction ne peut pas nécessairement faire la distinction entre différentes mises en page avec la même langue principale, de sorte que ne peut pas retourner des informations spécifiques sur la langue d’entrée.</span><span class="sxs-lookup"><span data-stu-id="51acc-370">This means the function may not necessarily differentiate among different layouts with the same primary language, so cannot return specific information about the input language.</span></span> <span data-ttu-id="51acc-371">Toutefois, la fonction [**GetKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) peut être utilisée pour déterminer la langue d’entrée.</span><span class="sxs-lookup"><span data-stu-id="51acc-371">The [**GetKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) function, however, can be used to determine the input language.</span></span>

<span data-ttu-id="51acc-372">La fonction [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) charge une disposition de clavier et met la disposition à la disposition de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="51acc-372">The [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function loads a keyboard layout and makes the layout available to the user.</span></span> <span data-ttu-id="51acc-373">Les applications peuvent rendre la disposition immédiatement active pour le thread actuel à l’aide de la valeur d' **\_ activation KLF** .</span><span class="sxs-lookup"><span data-stu-id="51acc-373">Applications can make the layout immediately active for the current thread by using the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="51acc-374">Une application peut utiliser la valeur de **\_ réorganisation KLF** pour réorganiser les dispositions sans spécifier également la valeur d' **\_ activation KLF** .</span><span class="sxs-lookup"><span data-stu-id="51acc-374">An application can use the **KLF\_REORDER** value to reorder the layouts without also specifying the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="51acc-375">Les applications doivent toujours utiliser la valeur de **\_ remplacement KLF \_ OK** lors du chargement des dispositions de clavier pour s’assurer que la préférence de l’utilisateur, le cas échéant, est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="51acc-375">Applications should always use the **KLF\_SUBSTITUTE\_OK** value when loading keyboard layouts to ensure that the user's preference, if any, is selected.</span></span>

<span data-ttu-id="51acc-376">Pour la prise en charge multilingue, la fonction [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) fournit les indicateurs **KLF \_ REPLACELANG** et **KLF \_ NOTELLSHELL** .</span><span class="sxs-lookup"><span data-stu-id="51acc-376">For multilingual support, the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function provides the **KLF\_REPLACELANG** and **KLF\_NOTELLSHELL** flags.</span></span> <span data-ttu-id="51acc-377">L’indicateur **KLF \_ REPLACELANG** dirige la fonction pour remplacer une disposition de clavier existante sans modifier la langue.</span><span class="sxs-lookup"><span data-stu-id="51acc-377">The **KLF\_REPLACELANG** flag directs the function to replace an existing keyboard layout without changing the language.</span></span> <span data-ttu-id="51acc-378">Toute tentative de remplacement d’une disposition existante à l’aide du même identificateur de langue mais sans spécifier **KLF \_ REPLACELANG** est une erreur.</span><span class="sxs-lookup"><span data-stu-id="51acc-378">Attempting to replace an existing layout using the same language identifier but without specifying **KLF\_REPLACELANG** is an error.</span></span> <span data-ttu-id="51acc-379">L’indicateur **KLF \_ NOTELLSHELL** empêche la fonction de notifier le shell quand une disposition de clavier est ajoutée ou remplacée.</span><span class="sxs-lookup"><span data-stu-id="51acc-379">The **KLF\_NOTELLSHELL** flag prevents the function from notifying the shell when a keyboard layout is added or replaced.</span></span> <span data-ttu-id="51acc-380">Cela est utile pour les applications qui ajoutent plusieurs dispositions dans une série consécutive d’appels.</span><span class="sxs-lookup"><span data-stu-id="51acc-380">This is useful for applications that add multiple layouts in a consecutive series of calls.</span></span> <span data-ttu-id="51acc-381">Cet indicateur doit être utilisé dans tous les appels sauf le dernier.</span><span class="sxs-lookup"><span data-stu-id="51acc-381">This flag should be used in all but the last call.</span></span>

<span data-ttu-id="51acc-382">La fonction [**UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) est limitée, car elle ne peut pas décharger la langue d’entrée par défaut du système.</span><span class="sxs-lookup"><span data-stu-id="51acc-382">The [**UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) function is restricted in that it cannot unload the system default input language.</span></span> <span data-ttu-id="51acc-383">Cela garantit que l’utilisateur dispose toujours d’une disposition pour entrer du texte en utilisant le même jeu de caractères que celui utilisé par le shell et le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="51acc-383">This ensures that the user always has one layout available for enter text using the same character set as used by the shell and file system.</span></span>

 

 
