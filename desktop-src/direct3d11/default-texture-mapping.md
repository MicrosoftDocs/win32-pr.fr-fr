---
title: Mappage de texture par défaut
description: L’utilisation du mappage de texture par défaut réduit la copie et l’utilisation de la mémoire tout en partageant des données d’image entre le GPU et le processeur.
ms.assetid: 77AF4BFA-09B5-4181-9408-002764F2A923
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f203c7590c3673d30315250b2b4ce2663e48c9c3
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104379950"
---
# <a name="default-texture-mapping"></a><span data-ttu-id="f8cb8-103">Mappage de texture par défaut</span><span class="sxs-lookup"><span data-stu-id="f8cb8-103">Default Texture Mapping</span></span>

<span data-ttu-id="f8cb8-104">L’utilisation du mappage de texture par défaut réduit la copie et l’utilisation de la mémoire tout en partageant des données d’image entre le GPU et le processeur.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-104">The use of default texture mapping reduces copying and memory usage while sharing image data between the GPU and the CPU.</span></span> <span data-ttu-id="f8cb8-105">Toutefois, il ne doit être utilisé que dans des situations spécifiques.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-105">However, it should only be used in specific situations.</span></span> <span data-ttu-id="f8cb8-106">La disposition standard Swizzle évite la copie ou la swizzling des données dans plusieurs dispositions.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-106">The standard swizzle layout avoids copying or swizzling data in multiple layouts.</span></span>

-   [<span data-ttu-id="f8cb8-107">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="f8cb8-107">Overview</span></span>](#overview)
-   [<span data-ttu-id="f8cb8-108">API D3D 11.3</span><span class="sxs-lookup"><span data-stu-id="f8cb8-108">D3D11.3 APIs</span></span>](#d3d113-apis)
-   [<span data-ttu-id="f8cb8-109">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f8cb8-109">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="f8cb8-110">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="f8cb8-110">Overview</span></span>

<span data-ttu-id="f8cb8-111">Le mappage des textures par défaut ne doit pas être le premier choix pour les développeurs.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-111">Mapping default textures should not be the first choice for developers.</span></span> <span data-ttu-id="f8cb8-112">Les développeurs doivent d’abord coder de manière discrète avec GPU (autrement dit, ils n’ont pas d’accès au processeur pour la majorité des textures et les télécharger avec [**CopySubresourceRegion1**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-copysubresourceregion1)).</span><span class="sxs-lookup"><span data-stu-id="f8cb8-112">Developers should code in a discrete-GPU friendly way first (that is, do not have any CPU access for the majority of textures and upload with [**CopySubresourceRegion1**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-copysubresourceregion1)).</span></span> <span data-ttu-id="f8cb8-113">Toutefois, dans certains cas, le processeur et le GPU peuvent interagir si fréquemment sur les mêmes données, ce qui permet de réduire les textures par défaut pour économiser de l’énergie ou pour accélérer une conception particulière sur des cartes ou des architectures spécifiques.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-113">But, for certain cases, the CPU and GPU may interact so frequently on the same data, that mapping default textures becomes helpful to save power, or to speed up a particular design on particular adapters or architectures.</span></span> <span data-ttu-id="f8cb8-114">Les applications doivent détecter ces cas et optimiser les copies inutiles.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-114">Applications should detect these cases and optimize out the unnecessary copies.</span></span>

<span data-ttu-id="f8cb8-115">Dans D3D 11.3, les textures créées \_ avec \_ une disposition de texture d3d11 \_ non définie (un membre de l’énumération de [**\_ \_ Présentation de texture d3d11**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) ) et aucun accès à l’UC n’est le plus efficace pour un rendu et un échantillonnage GPU fréquents.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-115">In D3D11.3, textures created with D3D11\_TEXTURE\_LAYOUT\_UNDEFINED (one member of the [**D3D11\_TEXTURE\_LAYOUT**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) enum) and no CPU access are the most efficient for frequent GPU rendering and sampling.</span></span> <span data-ttu-id="f8cb8-116">Lors des tests de performances, ces textures doivent être comparées à la \_ \_ disposition de texture d3d11 \_ non définie avec l’accès de l’UC, et à la disposition de \_ texture d3d11 \_ \_ 64 Ko \_ standard \_ SWIZZLE avec accès de l’UC, et à la \_ \_ \_ ligne de disposition de texture d3d11 \_ principale pour la prise en charge entre les adaptateurs.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-116">When performance testing, those textures should be compared against D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access, and D3D11\_TEXTURE\_LAYOUT\_64K\_STANDARD\_SWIZZLE with CPU access, and D3D11\_TEXTURE\_LAYOUT\_ROW\_MAJOR for cross-adapter support.</span></span>

<span data-ttu-id="f8cb8-117">L’utilisation \_ de \_ la disposition de texture d3d11 \_ non définie avec l’accès de l’UC active les méthodes [**WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource), [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) (en évitant l’accès à l’application au pointeur) et le [**mappage**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap), mais peut sacrifier l’efficacité de l’accès GPU.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-117">Using D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access enables the methods [**WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource), [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) (precluding application access to pointer), and [**Unmap**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap); but can sacrifice efficiency of GPU access.</span></span> <span data-ttu-id="f8cb8-118">Utilisation \_ de la \_ disposition de texture d3d11 \_ 64 Ko \_ standard \_ SWIZZLE avec accès à l’UC active **WriteToSubresource**, **ReadFromSubresource**, **Map** (qui retourne un pointeur valide vers l’application) et unout.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-118">Using D3D11\_TEXTURE\_LAYOUT\_64K\_STANDARD\_SWIZZLE with CPU access enables **WriteToSubresource**, **ReadFromSubresource**, **Map** (which returns a valid pointer to application), and **Unmap**.</span></span> <span data-ttu-id="f8cb8-119">Il peut également sacrifier l’efficacité de l’accès au GPU plus que la \_ disposition de texture d3d11 \_ \_ non définie avec l’accès au processeur.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-119">It can also sacrifice efficiency of GPU access more than D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access.</span></span>

<span data-ttu-id="f8cb8-120">En général, les applications doivent créer la majorité des textures comme étant accessibles au GPU uniquement, et avec une disposition de texture D3D11 non \_ \_ \_ définie.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-120">In general, applications should create the majority of textures as GPU-only-accessible, and with D3D11\_TEXTURE\_LAYOUT\_UNDEFINED.</span></span>

<span data-ttu-id="f8cb8-121">Avant la fonctionnalité de mappage des textures par défaut, il n’existait qu’une seule disposition standardisée pour les données multidimensionnelles : « linéaire », également appelée « ligne-principale ».</span><span class="sxs-lookup"><span data-stu-id="f8cb8-121">Previous to the mapping default textures feature, there was only one standardized layout for multi-dimensional data: "linear", also known as "row-major".</span></span> <span data-ttu-id="f8cb8-122">Les applications doivent éviter \_ les textures dynamiques de l’utilisation et de la mise \_ en lots lorsque la valeur par défaut de la carte est disponible.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-122">Applications should avoid USAGE\_STAGING and USAGE\_DYNAMIC textures when map default is available.</span></span> <span data-ttu-id="f8cb8-123">Les \_ textures dynamiques d’utilisation et de mise \_ en lots utilisent la disposition linéaire.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-123">The USAGE\_STAGING and USAGE\_DYNAMIC textures use the linear layout.</span></span>

<span data-ttu-id="f8cb8-124">D3D 11.3 (et D3D12) introduisent une disposition de données multidimensionnelles standard.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-124">D3D11.3 (and D3D12) introduce a standard multi-dimensional data layout.</span></span> <span data-ttu-id="f8cb8-125">Cette opération est effectuée pour permettre à plusieurs unités de traitement de fonctionner sur les mêmes données sans copier les données ou swizzling les données entre plusieurs dispositions.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-125">This is done to enable multiple processing units to operate on the same data without copying the data or swizzling the data between multiple layouts.</span></span> <span data-ttu-id="f8cb8-126">Une mise en page standardisée permet de gagner de l’efficacité grâce à des effets réseau et permet aux algorithmes de faire des petits morceaux en supposant un modèle particulier.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-126">A standardized layout enables efficiency gains through network effects and allows algorithms to make short-cuts assuming a particular pattern.</span></span>

<span data-ttu-id="f8cb8-127">Notez cependant que cette Swizzle standard est une fonctionnalité matérielle et peut ne pas être prise en charge par tous les GPU.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-127">Note though that this standard swizzle is a hardware feature, and may not be supported by all GPUs.</span></span>

## <a name="d3d113-apis"></a><span data-ttu-id="f8cb8-128">API D3D 11.3</span><span class="sxs-lookup"><span data-stu-id="f8cb8-128">D3D11.3 APIs</span></span>

<span data-ttu-id="f8cb8-129">Contrairement à D3D12, D3D 11.3 ne prend pas en charge le mappage de texture par défaut. vous devez donc interroger [**d3d11 \_ Feature \_ Data \_ d3d11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span><span class="sxs-lookup"><span data-stu-id="f8cb8-129">Unlike D3D12, D3D11.3 does not supports texture mapping by default, so you need to query [**D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span></span> <span data-ttu-id="f8cb8-130">Les Swizzle standard doivent également être interrogés avec un appel à [**ID3D11Device :: CheckFeatureSupport**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) et la vérification du `StandardSwizzle64KBSupported` champ de données de la **\_ fonctionnalité d3d11 \_ \_ d3d11 \_ OPTIONS2**.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-130">Standard swizzle will also need to be queried for with a call to [**ID3D11Device::CheckFeatureSupport**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) and checking the `StandardSwizzle64KBSupported` field of **D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**.</span></span>

<span data-ttu-id="f8cb8-131">Le mappage de texture de référence des API suivantes :</span><span class="sxs-lookup"><span data-stu-id="f8cb8-131">The following APIs reference texture mapping:</span></span>

<span data-ttu-id="f8cb8-132">Énumérations</span><span class="sxs-lookup"><span data-stu-id="f8cb8-132">Enums</span></span>

-   <span data-ttu-id="f8cb8-133">[**D3d11 \_ \_Disposition**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) de la texture : contrôle le modèle Swizzle des textures par défaut et active la prise en charge des cartes sur les textures par défaut.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-133">[**D3D11\_TEXTURE\_LAYOUT**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) : controls the swizzle pattern of default textures and enable map support on default textures.</span></span>
-   <span data-ttu-id="f8cb8-134">[**D3d11 \_ FONCTIONNALITÉ**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature) : référence [**les \_ données de fonctionnalités d3d11 \_ \_ d3d11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span><span class="sxs-lookup"><span data-stu-id="f8cb8-134">[**D3D11\_FEATURE**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature) : references [**D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span></span>
-   <span data-ttu-id="f8cb8-135">[**D3d11 \_ \_ \_ Indicateur de copie de vignette**](/windows/desktop/api/D3D11_2/ne-d3d11_2-d3d11_tile_copy_flag) : contient des indicateurs pour copier des ressources en mosaïque swizzled vers et à partir de mémoires tampons linéaires.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-135">[**D3D11\_TILE\_COPY\_FLAG**](/windows/desktop/api/D3D11_2/ne-d3d11_2-d3d11_tile_copy_flag) : contains flags to copy swizzled tiled resources to and from linear buffers.</span></span>

<span data-ttu-id="f8cb8-136">Structures</span><span class="sxs-lookup"><span data-stu-id="f8cb8-136">Structures</span></span>

-   <span data-ttu-id="f8cb8-137">[**D3d11 \_ TEXTURE2D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture2d_desc1) : décrit une texture 2D.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-137">[**D3D11\_TEXTURE2D\_DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture2d_desc1) : describes a 2D texture.</span></span> <span data-ttu-id="f8cb8-138">Notez la \_ \_ structure d’assistance CD3D11 TEXTURE2D DESC1.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-138">Note the CD3D11\_TEXTURE2D\_DESC1 helper structure.</span></span>
-   <span data-ttu-id="f8cb8-139">[**D3d11 \_ TEXTURE3D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture3d_desc1) : décrit une texture 3D.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-139">[**D3D11\_TEXTURE3D\_DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture3d_desc1) : describes a 3D texture.</span></span> <span data-ttu-id="f8cb8-140">Notez la \_ \_ structure d’assistance CD3D11 TEXTURE3D DESC1.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-140">Note the CD3D11\_TEXTURE3D\_DESC1 helper structure.</span></span>

<span data-ttu-id="f8cb8-141">Méthodes</span><span class="sxs-lookup"><span data-stu-id="f8cb8-141">Methods</span></span>

-   <span data-ttu-id="f8cb8-142">[**ID3D11Device3 :: CreateTexture2D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture2d1) : crée un tableau de textures 2D.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-142">[**ID3D11Device3::CreateTexture2D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture2d1) : creates an array of 2D textures.</span></span>
-   <span data-ttu-id="f8cb8-143">[**ID3D11Device3 :: CreateTexture3D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture3d1) : crée une texture 3D unique.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-143">[**ID3D11Device3::CreateTexture3D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture3d1) : creates a single 3D texture.</span></span>
-   <span data-ttu-id="f8cb8-144">[**ID3D11Device3 :: WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource) : copie les données dans une \_ \_ texture par défaut d’utilisation d3d11 qui a été mappée à l’aide de [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span><span class="sxs-lookup"><span data-stu-id="f8cb8-144">[**ID3D11Device3::WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource) : copies data into a D3D11\_USAGE\_DEFAULT texture which was mapped using [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span></span>
-   <span data-ttu-id="f8cb8-145">[**ID3D11Device3 :: ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource) : copie les données d’une \_ \_ texture par défaut d’utilisation d3d11 qui a été mappée à l’aide de [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span><span class="sxs-lookup"><span data-stu-id="f8cb8-145">[**ID3D11Device3::ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource) : copies data from a D3D11\_USAGE\_DEFAULT texture which was mapped using [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span></span>
-   <span data-ttu-id="f8cb8-146">[**ID3D11DeviceContext :: Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) : obtient un pointeur vers les données contenues dans une sous-ressource et refuse l’accès GPU à cette sous-ressource.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-146">[**ID3D11DeviceContext::Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) : gets a pointer to the data contained in a subresource, and denies the GPU access to that subresource.</span></span>
-   <span data-ttu-id="f8cb8-147">[**ID3D11DeviceContext :: DEMAPPAGE**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap) : invalide le pointeur vers une ressource et réactive l’accès du GPU à cette ressource.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-147">[**ID3D11DeviceContext::Unmap**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap) : invalidates the pointer to a resource and reenables the GPU's access to that resource.</span></span>
-   <span data-ttu-id="f8cb8-148">[**ID3D11Texture2D1 :: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture2d1-getdesc1) : obtient les propriétés d’une ressource de texture 2D.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-148">[**ID3D11Texture2D1::GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture2d1-getdesc1) : gets the properties of a 2D texture resource.</span></span>
-   <span data-ttu-id="f8cb8-149">[**ID3D11Texture3D1 :: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture3d1-getdesc1) : obtient les propriétés d’une ressource de texture 3D.</span><span class="sxs-lookup"><span data-stu-id="f8cb8-149">[**ID3D11Texture3D1::GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture3d1-getdesc1) : gets the properties of a 3D texture resource.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f8cb8-150">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f8cb8-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f8cb8-151">Fonctionnalités Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="f8cb8-151">Direct3D 11.3 Features</span></span>](direct3d-11-3-features.md)
</dt> </dl>

 

 




