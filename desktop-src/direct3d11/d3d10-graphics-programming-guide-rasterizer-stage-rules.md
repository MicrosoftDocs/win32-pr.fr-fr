---
title: Règles de pixellisation
description: Les règles de pixellisation définissent la façon dont les données vectorielles sont mappées dans les données raster.
ms.assetid: 2b3894eb-dff3-401f-8b14-4af98db86e39
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e256c6fc171c1cce9b63b79fac6a480e507a306e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104381991"
---
# <a name="rasterization-rules"></a><span data-ttu-id="09e98-103">Règles de pixellisation</span><span class="sxs-lookup"><span data-stu-id="09e98-103">Rasterization Rules</span></span>

<span data-ttu-id="09e98-104">Les règles de pixellisation définissent la façon dont les données vectorielles sont mappées dans les données raster.</span><span class="sxs-lookup"><span data-stu-id="09e98-104">Rasterization rules define how vector data is mapped into raster data.</span></span> <span data-ttu-id="09e98-105">Les données raster sont alignées sur les emplacements d’entiers qui sont ensuite éliminés et découpés (pour dessiner le nombre minimal de pixels), et les attributs par pixel sont interpolés (à partir des attributs par vertex) avant d’être passés à un nuanceur de pixels.</span><span class="sxs-lookup"><span data-stu-id="09e98-105">The raster data is snapped to integer locations that are then culled and clipped (to draw the minimum number of pixels), and per-pixel attributes are interpolated (from per-vertex attributes) before being passed to a pixel shader.</span></span>

<span data-ttu-id="09e98-106">Il existe plusieurs types de règles, qui dépendent du type de primitive qui est mappé, ainsi que de la nécessité ou non d’utiliser l’échantillonnage multiple pour réduire les alias.</span><span class="sxs-lookup"><span data-stu-id="09e98-106">There are several types of rules, which depend on the type of primitive that is being mapped, as well as whether or not the data uses multisampling to reduce aliasing.</span></span> <span data-ttu-id="09e98-107">Les illustrations suivantes montrent comment les cas d’angle sont gérés.</span><span class="sxs-lookup"><span data-stu-id="09e98-107">The following illustrations demonstrate how the corner cases are handled.</span></span>

-   [<span data-ttu-id="09e98-108">Règles de pixellisation des triangles (sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-108">Triangle Rasterization Rules (Without Multisampling)</span></span>](#triangle-rasterization-rules-without-multisampling)
-   [<span data-ttu-id="09e98-109">Règles de pixellisation de ligne (avec alias, sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-109">Line Rasterization Rules (Aliased, Without Multisampling)</span></span>](#line-rasterization-rules-aliased-without-multisampling)
-   [<span data-ttu-id="09e98-110">Règles de pixellisation de ligne (avec anticrénelage, sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-110">Line Rasterization Rules (Antialiased, Without Multisampling)</span></span>](#line-rasterization-rules-antialiased-without-multisampling)
-   [<span data-ttu-id="09e98-111">Règles de pixellisation des points (sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-111">Point Rasterization Rules (Without Multisampling)</span></span>](#point-rasterization-rules-without-multisampling)
-   [<span data-ttu-id="09e98-112">Exemples de règles de pixellisation d’anticrénelage</span><span class="sxs-lookup"><span data-stu-id="09e98-112">Multisample Anti-Aliasing Rasterization Rules</span></span>](#multisample-anti-aliasing-rasterization-rules)
    -   [<span data-ttu-id="09e98-113">Support matériel</span><span class="sxs-lookup"><span data-stu-id="09e98-113">Hardware Support</span></span>](#hardware-support)
    -   [<span data-ttu-id="09e98-114">Échantillonnage de centre de gravité des attributs lors de l’anticrénelage à échantillonnage multiple</span><span class="sxs-lookup"><span data-stu-id="09e98-114">Centroid Sampling of Attributes when Multisample Antialiasing</span></span>](#centroid-sampling-of-attributes-when-multisample-antialiasing)
    -   [<span data-ttu-id="09e98-115">Calculs de dérivés lors de l’échantillonnage multiple</span><span class="sxs-lookup"><span data-stu-id="09e98-115">Derivative Calculations When Multisampling</span></span>](#derivative-calculations-when-multisampling)
-   [<span data-ttu-id="09e98-116">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="09e98-116">Related topics</span></span>](#related-topics)

## <a name="triangle-rasterization-rules-without-multisampling"></a><span data-ttu-id="09e98-117">Règles de pixellisation des triangles (sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-117">Triangle Rasterization Rules (Without Multisampling)</span></span>

<span data-ttu-id="09e98-118">Tout centre de pixels qui se trouve à l’intérieur d’un triangle est dessiné ; un pixel est supposé être à l’intérieur s’il passe la règle en haut à gauche.</span><span class="sxs-lookup"><span data-stu-id="09e98-118">Any pixel center which falls inside a triangle is drawn; a pixel is assumed to be inside if it passes the top-left rule.</span></span> <span data-ttu-id="09e98-119">La règle en haut à gauche est qu’un centre de pixels est défini pour se trouver à l’intérieur d’un triangle s’il se trouve sur le bord supérieur ou sur le bord gauche d’un triangle.</span><span class="sxs-lookup"><span data-stu-id="09e98-119">The top-left rule is that a pixel center is defined to lie inside of a triangle if it lies on the top edge or the left edge of a triangle.</span></span>

<span data-ttu-id="09e98-120">Où :</span><span class="sxs-lookup"><span data-stu-id="09e98-120">Where:</span></span>

-   <span data-ttu-id="09e98-121">Un bord supérieur est un bord qui est exactement horizontal et se trouve au-dessus des autres bords.</span><span class="sxs-lookup"><span data-stu-id="09e98-121">A top edge, is an edge that is exactly horizontal and is above the other edges.</span></span>
-   <span data-ttu-id="09e98-122">Un bord gauche est un bord qui n’est pas exactement horizontal et se trouve sur le côté gauche du triangle.</span><span class="sxs-lookup"><span data-stu-id="09e98-122">A left edge, is an edge that is not exactly horizontal and is on the left side of the triangle.</span></span> <span data-ttu-id="09e98-123">Un triangle peut avoir un ou deux bords gauches.</span><span class="sxs-lookup"><span data-stu-id="09e98-123">A triangle can have one or two left edges.</span></span>

<span data-ttu-id="09e98-124">La règle en haut à gauche garantit que les triangles adjacents sont dessinés une seule fois.</span><span class="sxs-lookup"><span data-stu-id="09e98-124">The top-left rule ensures that adjacent triangles are drawn once.</span></span>

<span data-ttu-id="09e98-125">Cette illustration montre des exemples de pixels qui sont dessinés, car ils se trouvent soit à l’intérieur d’un triangle, soit suivent la règle en haut à gauche.</span><span class="sxs-lookup"><span data-stu-id="09e98-125">This illustration shows examples of pixels that are drawn because they either lie inside a triangle or follow the top-left rule.</span></span>

![illustration d’exemples de pixellisation des triangles en haut à gauche](images/d3d10-rasterrulestriangle.png)

<span data-ttu-id="09e98-127">Les pixels gris clair et foncé des pixels les affichent sous forme de groupes de pixels pour indiquer le triangle dans lequel ils se trouvent.</span><span class="sxs-lookup"><span data-stu-id="09e98-127">The light and dark gray covering of the pixels show them as groups of the pixels to indicate which triangle they are inside.</span></span>

## <a name="line-rasterization-rules-aliased-without-multisampling"></a><span data-ttu-id="09e98-128">Règles de pixellisation de ligne (avec alias, sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-128">Line Rasterization Rules (Aliased, Without Multisampling)</span></span>

<span data-ttu-id="09e98-129">Les règles de pixellisation de ligne utilisent une zone de test Diamond pour déterminer si une ligne couvre un pixel.</span><span class="sxs-lookup"><span data-stu-id="09e98-129">Line rasterization rules use a diamond test area to determine if a line covers a pixel.</span></span> <span data-ttu-id="09e98-130">Pour les lignes x-major (lignes avec-1 <= pente <= + 1), la zone de test Diamond comprend (visible) le bord inférieur gauche, le bord inférieur droit et l’angle inférieur. le losange exclut (en pointillés) le bord supérieur gauche, le bord supérieur droit, le plus haut cordon, le coin gauche et le coin droit.</span><span class="sxs-lookup"><span data-stu-id="09e98-130">For x-major lines (lines with -1 <= slope <= +1), the diamond test area includes (shown solid) the lower-left edge, lower-right edge, and bottom corner; the diamond excludes (shown dotted) the upper-left edge, upper-right edge, the top corder, the left corner, and the right corner.</span></span> <span data-ttu-id="09e98-131">Une ligne « y » est une ligne qui n’est pas une ligne x-major ; la zone de test Diamond est la même que celle qui est décrite pour la ligne principale x, sauf que l’angle droit est également inclus.</span><span class="sxs-lookup"><span data-stu-id="09e98-131">A y-major line is any line that is not an x-major line; the test diamond area is the same as described for the x-major line except the right corner is also included.</span></span>

<span data-ttu-id="09e98-132">À partir de la zone losange, une ligne couvre un pixel si la ligne quitte la zone de test de losange du pixel lorsqu’elle se trouve le long de la ligne du début vers la fin.</span><span class="sxs-lookup"><span data-stu-id="09e98-132">Given the diamond area, a line covers a pixel if the line exits the pixel's diamond test area when traveling along the line from the start towards the end.</span></span> <span data-ttu-id="09e98-133">Une bande de lignes se comporte de la même manière, car elle est dessinée comme une séquence de lignes.</span><span class="sxs-lookup"><span data-stu-id="09e98-133">A line strip behaves the same, as it is drawn as a sequence of lines.</span></span>

<span data-ttu-id="09e98-134">L’illustration suivante montre quelques exemples.</span><span class="sxs-lookup"><span data-stu-id="09e98-134">The following illustration shows some examples.</span></span>

![illustration d’exemples de pixellisation de lignes avec alias](images/d3d10-rasterrulesline.png)

## <a name="line-rasterization-rules-antialiased-without-multisampling"></a><span data-ttu-id="09e98-136">Règles de pixellisation de ligne (avec anticrénelage, sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-136">Line Rasterization Rules (Antialiased, Without Multisampling)</span></span>

<span data-ttu-id="09e98-137">Une ligne avec un alias est pixellisée comme s’il s’agissait d’un rectangle (avec la largeur = 1).</span><span class="sxs-lookup"><span data-stu-id="09e98-137">An antialiased line is rasterized as if it were a rectangle (with width = 1).</span></span> <span data-ttu-id="09e98-138">Le rectangle croise une cible de rendu produisant des valeurs de couverture par pixel, qui sont multipliées par des composants alpha de sortie de nuanceur de pixels.</span><span class="sxs-lookup"><span data-stu-id="09e98-138">The rectangle intersects with a render target producing per-pixel coverage values, which are multiplied into pixel shader output alpha components.</span></span> <span data-ttu-id="09e98-139">Il n’y a pas d’anticrénelage préformé lors du dessin de lignes sur une cible de rendu à échantillonnage.</span><span class="sxs-lookup"><span data-stu-id="09e98-139">There is no antialiasing preformed when drawing lines on a multisampled render target.</span></span>

<span data-ttu-id="09e98-140">Il est considéré qu’il n’existe pas de méthode « optimale » pour effectuer un rendu de ligne avec anticrénelage.</span><span class="sxs-lookup"><span data-stu-id="09e98-140">It is deemed that there is no single "best" way to perform antialiased line rendering.</span></span> <span data-ttu-id="09e98-141">Direct3D 10 adopte comme indication la méthode illustrée dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="09e98-141">Direct3D 10 adopts as a guideline the method shown in the following illustration.</span></span> <span data-ttu-id="09e98-142">Cette méthode a été dérivée de façon empirique, présentant un certain nombre de propriétés visuelles jugées souhaitables.</span><span class="sxs-lookup"><span data-stu-id="09e98-142">This method was derived empirically, exhibiting a number of visual properties deemed desirable.</span></span> <span data-ttu-id="09e98-143">Le matériel n’a pas besoin de correspondre exactement à cet algorithme. les tests sur cette référence ont des tolérances « raisonnables », guidées par certains des principes énumérés ci-dessous, autorisant diverses implémentations matérielles et des tailles de noyau de filtre.</span><span class="sxs-lookup"><span data-stu-id="09e98-143">Hardware need not exactly match this algorithm; tests against this reference shall have "reasonable" tolerances, guided by some of the principles listed further below, permitting various hardware implementations and filter kernel sizes.</span></span> <span data-ttu-id="09e98-144">Toutefois, aucune de ces possibilités de mise en œuvre matérielle ne peut être communiquée via Direct3D 10 aux applications, au-delà du simple dessin des lignes et de l’observation/mesure de leur apparence.</span><span class="sxs-lookup"><span data-stu-id="09e98-144">None of this flexibility permitted in hardware implementation, however, can be communicated up through Direct3D 10 to applications, beyond simply drawing lines and observing/measuring how they look.</span></span>

![illustration d’exemples de pixellisation de ligne avec anticrénelage](images/d3d10-rasterruleslineaa.png)

<span data-ttu-id="09e98-146">Cet algorithme génère des lignes relativement lisses, avec une intensité uniforme, avec des bords dentelés minimaux ou une tresse.</span><span class="sxs-lookup"><span data-stu-id="09e98-146">This algorithm generates relatively smooth lines, with uniform intensity, with minimal jagged edges or braiding.</span></span> <span data-ttu-id="09e98-147">Le modèle de moire pour les lignes de fermeture est réduit.</span><span class="sxs-lookup"><span data-stu-id="09e98-147">Moire patterning for close lines is minimized.</span></span> <span data-ttu-id="09e98-148">Il y a une bonne couverture pour les jonctions entre les segments de ligne placés de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="09e98-148">There is good coverage for junctions between line segments placed end-to-end.</span></span> <span data-ttu-id="09e98-149">Le noyau de filtre est un compromis raisonnable entre la quantité de flou des bords et les changements d’intensité provoqués par les corrections gamma.</span><span class="sxs-lookup"><span data-stu-id="09e98-149">The filter kernel is a reasonable tradeoff between the amount of edge blurring and the changes in intensity caused by gamma corrections.</span></span> <span data-ttu-id="09e98-150">La valeur de couverture est multipliée par le nuanceur de pixels o0. a (srcAlpha) selon la formule suivante par l’étape de fusion de sortie : srcColor \* srcAlpha + destColor \* (1-srcAlpha).</span><span class="sxs-lookup"><span data-stu-id="09e98-150">The coverage value is multiplied into pixel shader o0.a (srcAlpha) per the following formula by the output-merger stage: srcColor \* srcAlpha + destColor \* (1-srcAlpha).</span></span>

## <a name="point-rasterization-rules-without-multisampling"></a><span data-ttu-id="09e98-151">Règles de pixellisation des points (sans échantillonnage multiple)</span><span class="sxs-lookup"><span data-stu-id="09e98-151">Point Rasterization Rules (Without Multisampling)</span></span>

<span data-ttu-id="09e98-152">Un point est interprété comme s’il était composé de deux triangles dans un modèle Z, qui utilisent des règles de pixellisation de triangle.</span><span class="sxs-lookup"><span data-stu-id="09e98-152">A point is interpreted as though it were composed of two triangles in a Z pattern, which use triangle rasterization rules.</span></span> <span data-ttu-id="09e98-153">La coordonnée identifie le centre d’un carré de largeur d’un pixel.</span><span class="sxs-lookup"><span data-stu-id="09e98-153">The coordinate identifies the center of a one pixel wide square.</span></span> <span data-ttu-id="09e98-154">Il n’existe aucun Culling pour les points.</span><span class="sxs-lookup"><span data-stu-id="09e98-154">There is no culling for points.</span></span>

<span data-ttu-id="09e98-155">L’illustration suivante montre quelques exemples.</span><span class="sxs-lookup"><span data-stu-id="09e98-155">The following illustration shows some examples.</span></span>

![illustration d’exemples de pixellisation des points](images/d3d10-rasterrulespoint.png)

## <a name="multisample-anti-aliasing-rasterization-rules"></a><span data-ttu-id="09e98-157">Exemples de règles de pixellisation d’anticrénelage</span><span class="sxs-lookup"><span data-stu-id="09e98-157">Multisample Anti-Aliasing Rasterization Rules</span></span>

<span data-ttu-id="09e98-158">L’anticrénelage (multi-sample anticrénelage) réduit les alias géométriques à l’aide de tests de couverture de pixel et de stencil de profondeur dans plusieurs emplacements de sous-échantillons.</span><span class="sxs-lookup"><span data-stu-id="09e98-158">Multisample antialiasing (MSAA) reduces geometry aliasing using pixel coverage and depth-stencil tests at multiple sub-sample locations.</span></span> <span data-ttu-id="09e98-159">Pour améliorer les performances, les calculs par pixel sont effectués une fois pour chaque pixel couvert, en partageant les sorties de nuanceur sur les sous-pixels couverts.</span><span class="sxs-lookup"><span data-stu-id="09e98-159">To improve performance, per-pixel calculations are performed once for each covered pixel, by sharing shader outputs across covered sub-pixels.</span></span> <span data-ttu-id="09e98-160">L’anticrénelage sur un échantillonnage n’réduit pas l’alias des surfaces.</span><span class="sxs-lookup"><span data-stu-id="09e98-160">Multisample antialiasing does not reduce surface aliasing.</span></span> <span data-ttu-id="09e98-161">Les exemples d’emplacements et les fonctions de reconstruction dépendent de l’implémentation matérielle.</span><span class="sxs-lookup"><span data-stu-id="09e98-161">Sample locations and reconstruction functions are dependent on the hardware implementation.</span></span>

<span data-ttu-id="09e98-162">L’illustration suivante montre quelques exemples.</span><span class="sxs-lookup"><span data-stu-id="09e98-162">The following illustration shows some examples.</span></span>

![illustration d’exemples de pixellisation par échantillonnage d’anticrénelage](images/d3d10-rasterrulesmsaa.png)

<span data-ttu-id="09e98-164">Le nombre d’emplacements d’échantillonnage dépend du mode d’échantillonnage.</span><span class="sxs-lookup"><span data-stu-id="09e98-164">The number of sample locations is dependent on the multisample mode.</span></span> <span data-ttu-id="09e98-165">Les attributs de vertex sont interpolés aux centres de pixels, puisque c’est là que le nuanceur de pixels est appelé (cela devient l’extrapolation si le centre n’est pas couvert).</span><span class="sxs-lookup"><span data-stu-id="09e98-165">Vertex attributes are interpolated at pixel centers, since this is where the pixel shader is invoked (this becomes extrapolation if the center is not covered).</span></span> <span data-ttu-id="09e98-166">Les attributs peuvent être signalés dans le nuanceur de pixels pour être pris en exemple de centre de gravité, ce qui amène les pixels non couverts à interpoler l’attribut à l’intersection de la zone du pixel et de la primitive.</span><span class="sxs-lookup"><span data-stu-id="09e98-166">Attributes can be flagged in the pixel shader to be centroid sampled, which causes non-covered pixels to interpolate the attribute at intersection of the pixel's area and the primitive.</span></span> <span data-ttu-id="09e98-167">Un nuanceur de pixels s’exécute pour chaque zone de pixels de 2x2 pour prendre en charge les calculs dérivés (qui utilisent des deltas x et y).</span><span class="sxs-lookup"><span data-stu-id="09e98-167">A pixel shader runs for each 2x2 pixel area to support derivative calculations (which use x and y deltas).</span></span> <span data-ttu-id="09e98-168">Cela signifie que les appels de nuanceur se produisent plus que ce qui est indiqué pour remplir le nombre minimal de quanta 2x2 (qui est indépendant de l’échantillonnage multiple).</span><span class="sxs-lookup"><span data-stu-id="09e98-168">This means that shader invocations occur more than is shown to fill out the minimum 2x2 quanta (which is independent of multisampling).</span></span> <span data-ttu-id="09e98-169">Le résultat du nuanceur est écrit pour chaque exemple couvert qui réussit le test de stencil de profondeur par exemple.</span><span class="sxs-lookup"><span data-stu-id="09e98-169">The shader result is written out for each covered sample that passes the per-sample depth-stencil test.</span></span>

<span data-ttu-id="09e98-170">Les règles de pixellisation pour les primitives sont, en général, inchangées par l’anticrénelage multiéchantillon, à l’exception des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="09e98-170">Rasterization rules for primitives are, in general, unchanged by multisample antialiasing, except:</span></span>

-   <span data-ttu-id="09e98-171">Pour un triangle, un test de couverture est effectué pour chaque emplacement d’échantillon (et non pour un centre de pixels).</span><span class="sxs-lookup"><span data-stu-id="09e98-171">For a triangle, a coverage test is performed for each sample location (not for a pixel center).</span></span> <span data-ttu-id="09e98-172">Si plusieurs emplacements de l’échantillon sont couverts, un nuanceur de pixels s’exécute une fois avec des attributs interpolés au centre de pixels.</span><span class="sxs-lookup"><span data-stu-id="09e98-172">If more than one sample location is covered, a pixel shader runs once with attributes interpolated at the pixel center.</span></span> <span data-ttu-id="09e98-173">Le résultat est stocké (répliqué) pour chaque emplacement d’échantillon couvert dans le pixel qui réussit le test de profondeur/gabarit.</span><span class="sxs-lookup"><span data-stu-id="09e98-173">The result is stored (replicated) for each covered sample location in the pixel that passes the depth/stencil test.</span></span>

    <span data-ttu-id="09e98-174">Une ligne est traitée comme un rectangle constitué de deux triangles, avec une largeur de ligne de 1,4.</span><span class="sxs-lookup"><span data-stu-id="09e98-174">A line is treated as a rectangle made up of two triangles, with a line width of 1.4.</span></span>

-   <span data-ttu-id="09e98-175">Pour un point, un test de couverture est effectué pour chaque exemple d’emplacement (et non pour un centre de pixels).</span><span class="sxs-lookup"><span data-stu-id="09e98-175">For a point, a coverage test is performed for each sample location (not for a pixel center).</span></span>

<span data-ttu-id="09e98-176">De nombreux formats prennent en charge l’échantillonnage multiple (voir [prise en charge matérielle pour les formats Direct3D 10](/previous-versions//cc627090(v=vs.85))), certains formats peuvent être résolus ([**ResolveSubresource**](/windows/desktop/api/d3d10/nf-d3d10-id3d10device-resolvesubresource); qui downsamples un format à échantillonnage multiple pour une taille d’échantillon de 1).</span><span class="sxs-lookup"><span data-stu-id="09e98-176">Many formats support multisampling (see [Hardware Support for Direct3D 10 Formats](/previous-versions//cc627090(v=vs.85))), some formats can be resolved ([**ResolveSubresource**](/windows/desktop/api/d3d10/nf-d3d10-id3d10device-resolvesubresource); which downsamples a multisampled format to a sample size of 1).</span></span> <span data-ttu-id="09e98-177">Les formats d’échantillonnage multiple peuvent être utilisés dans les cibles de rendu qui peuvent être lues dans les nuanceurs à l’aide de [Load](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load), car aucune résolution n’est requise pour les exemples individuels auxquels le nuanceur accède.</span><span class="sxs-lookup"><span data-stu-id="09e98-177">Multisampling formats can be used in render targets which can be read back into shaders using [load](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load), since no resolve is required for individual samples accessed by the shader.</span></span> <span data-ttu-id="09e98-178">Les formats de profondeur ne sont pas pris en charge pour les ressources à échantillonnage unique. par conséquent, les formats de profondeur sont limités aux cibles de rendu uniquement.</span><span class="sxs-lookup"><span data-stu-id="09e98-178">Depth formats are not supported for multisample resource, therefore, depth formats are restricted to render targets only.</span></span>

<span data-ttu-id="09e98-179">Les formats non typés (R8G8B8A8 \_ type not for instance) prennent en charge l’échantillonnage multiple pour permettre à un affichage des ressources d’interpréter les données de différentes façons.</span><span class="sxs-lookup"><span data-stu-id="09e98-179">Typeless formats (R8G8B8A8\_TYPELESS for instance) support multisampling to allow a resource view to interpret data in different ways.</span></span> <span data-ttu-id="09e98-180">Par exemple, vous pouvez créer un exemple de ressource à l’aide de R8G8B8A8 \_ sans type, le rendre à l’aide d’une ressource de vue de rendu-cible avec un \_ format R8G8B8A8 uint, puis résoudre le contenu en une autre ressource avec un \_ format de données R8G8B8A8 UNORM.</span><span class="sxs-lookup"><span data-stu-id="09e98-180">For instance, you could create a multisample resource using R8G8B8A8\_TYPELESS, render to it using a render-target-view resource with a R8G8B8A8\_UINT format, then resolve the contents to another resource with a R8G8B8A8\_UNORM data format.</span></span>

### <a name="hardware-support"></a><span data-ttu-id="09e98-181">Prise en charge matérielle</span><span class="sxs-lookup"><span data-stu-id="09e98-181">Hardware Support</span></span>

<span data-ttu-id="09e98-182">L’API signale la prise en charge du matériel pour l’échantillonnage multiple via le nombre de niveaux de qualité.</span><span class="sxs-lookup"><span data-stu-id="09e98-182">The API reports hardware support for multisampling through the number of quality levels.</span></span> <span data-ttu-id="09e98-183">Par exemple, un niveau de qualité 0 signifie que le matériel ne prend pas en charge l’échantillonnage multiple (à un format et un niveau de qualité particuliers).</span><span class="sxs-lookup"><span data-stu-id="09e98-183">For example, a 0 quality level means the hardware does not support multisampling (at a particular format and quality level).</span></span> <span data-ttu-id="09e98-184">Un 3 pour les niveaux de qualité signifie que le matériel prend en charge trois exemples de disposition et/ou de résolution des algorithmes.</span><span class="sxs-lookup"><span data-stu-id="09e98-184">A 3 for quality levels means that the hardware supports three different sample layouts and/or resolve algorithms.</span></span> <span data-ttu-id="09e98-185">Vous pouvez également supposer les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="09e98-185">You can also assume the following:</span></span>

-   <span data-ttu-id="09e98-186">Tout format qui prend en charge l’échantillonnage multiple prend en charge le même nombre de niveaux de qualité pour chaque format de cette famille.</span><span class="sxs-lookup"><span data-stu-id="09e98-186">Any format that supports multisampling, supports the same number of quality levels for every format in that family.</span></span>
-   <span data-ttu-id="09e98-187">Chaque format qui prend en charge l’échantillonnage multiple et a les \_ formats UNORM, \_ sRVB, \_ ronfler ou \_ float, prend également en charge la résolution.</span><span class="sxs-lookup"><span data-stu-id="09e98-187">Every format that supports multisampling, and has the \_UNORM, \_SRGB, \_SNORM or \_FLOAT formats, also supports resolving.</span></span>

### <a name="centroid-sampling-of-attributes-when-multisample-antialiasing"></a><span data-ttu-id="09e98-188">Échantillonnage de centre de gravité des attributs lors de l’anticrénelage à échantillonnage multiple</span><span class="sxs-lookup"><span data-stu-id="09e98-188">Centroid Sampling of Attributes when Multisample Antialiasing</span></span>

<span data-ttu-id="09e98-189">Par défaut, les attributs de vertex sont interpolés sur un centre de pixels pendant l’anticrénelage d’échantillonnage. Si le centre de pixels n’est pas couvert, les attributs sont extrapolés à un centre de pixels.</span><span class="sxs-lookup"><span data-stu-id="09e98-189">By default, vertex attributes are interpolated to a pixel center during multisample antialiasing; if the pixel center is not covered, attributes are extrapolated to a pixel center.</span></span> <span data-ttu-id="09e98-190">Si une entrée de nuanceur de pixels contenant la sémantique du centre de données (en supposant que le pixel n’est pas entièrement couvert) sera échantillonnée quelque part dans la zone couverte du pixel, éventuellement à l’un des emplacements couverts.</span><span class="sxs-lookup"><span data-stu-id="09e98-190">If a pixel shader input that contains the centroid semantic (assuming the pixel is not fully covered) will be sampled somewhere within the covered area of the pixel, possibly at one of the covered sample locations.</span></span> <span data-ttu-id="09e98-191">Un échantillon de masque (spécifié par l’état du rastériseur) est appliqué avant le calcul de centre de gravité.</span><span class="sxs-lookup"><span data-stu-id="09e98-191">A sample mask (specified by the rasterizer state) is applied prior to centroid computation.</span></span> <span data-ttu-id="09e98-192">Par conséquent, un échantillon masqué n’est pas utilisé comme emplacement de centre de gravité.</span><span class="sxs-lookup"><span data-stu-id="09e98-192">Therefore, a sample that is masked out will not be used as a centroid location.</span></span>

<span data-ttu-id="09e98-193">Le rastériseur de référence choisit un exemple d’emplacement d’échantillonnage de centre de gravité semblable à celui-ci :</span><span class="sxs-lookup"><span data-stu-id="09e98-193">The reference rasterizer chooses a sample location for centroid sampling similar to this:</span></span>

-   <span data-ttu-id="09e98-194">L’exemple de masque autorise tous les échantillons.</span><span class="sxs-lookup"><span data-stu-id="09e98-194">The sample mask allows all samples.</span></span> <span data-ttu-id="09e98-195">Utilisez un centre de pixels si le pixel est couvert ou si aucun des exemples n’est couvert.</span><span class="sxs-lookup"><span data-stu-id="09e98-195">Use a pixel center if the pixel is covered or if none of the samples are covered.</span></span> <span data-ttu-id="09e98-196">Dans le cas contraire, le premier échantillon couvert est choisi, en commençant par le centre de pixels et en déplaçant vers l’extérieur.</span><span class="sxs-lookup"><span data-stu-id="09e98-196">Otherwise, the first covered sample is chosen, starting from the pixel center and moving outward.</span></span>
-   <span data-ttu-id="09e98-197">L’exemple de masque désactive tous les exemples, sauf un (scénario courant).</span><span class="sxs-lookup"><span data-stu-id="09e98-197">The sample mask turns off all samples but one (a common scenario).</span></span> <span data-ttu-id="09e98-198">Une application peut implémenter l’échantillonnage multipasse en parcourant des valeurs de masque d’échantillon de bit unique et en rerendant la scène pour chaque échantillon à l’aide de l’échantillonnage de centre de gravité.</span><span class="sxs-lookup"><span data-stu-id="09e98-198">An application can implement multipass supersampling by cycling through single-bit sample-mask values and re-rendering the scene for each sample using centroid sampling.</span></span> <span data-ttu-id="09e98-199">Cela nécessiterait qu’une application ajuste les dérivés pour sélectionner des MIPS de texture plus détaillés de manière appropriée pour la densité d’échantillonnage de texture supérieure.</span><span class="sxs-lookup"><span data-stu-id="09e98-199">This would require that an application adjust derivatives to select appropriately more detailed texture mips for the higher texture sampling density.</span></span>

### <a name="derivative-calculations-when-multisampling"></a><span data-ttu-id="09e98-200">Calculs de dérivés lors de l’échantillonnage multiple</span><span class="sxs-lookup"><span data-stu-id="09e98-200">Derivative Calculations When Multisampling</span></span>

<span data-ttu-id="09e98-201">Les nuanceurs de pixels s’exécutent toujours à l’aide d’une zone de pixels 2x2 minimale pour prendre en charge les calculs dérivés, qui sont calculés en prenant des deltas entre les données de pixels adjacents (en partant du principe que les données de chaque pixel ont été échantillonnées avec l’espacement horizontal ou vertical).</span><span class="sxs-lookup"><span data-stu-id="09e98-201">Pixel shaders always run using a minimum 2x2 pixel area to support derivative calculations, which are calculated by taking deltas between data from adjacent pixels (making the assumption that the data in each pixel has been sampled with unit spacing horizontally or vertically).</span></span> <span data-ttu-id="09e98-202">Cela n’est pas affecté par l’échantillonnage multiple.</span><span class="sxs-lookup"><span data-stu-id="09e98-202">This is unaffected by multisampling.</span></span>

<span data-ttu-id="09e98-203">Si des dérivés sont demandés sur un attribut qui a été échantillonné, le calcul du matériel n’est pas ajusté, ce qui peut provoquer des dérivées inexactes.</span><span class="sxs-lookup"><span data-stu-id="09e98-203">If derivatives are requested on an attribute that has been centroid sampled, the hardware calculation is not adjusted, which can cause inaccurate derivatives.</span></span> <span data-ttu-id="09e98-204">Un nuanceur attend un vecteur d’unité dans l’espace de rendu-cible, mais peut obtenir un vecteur de non-unité par rapport à un autre espace vectoriel.</span><span class="sxs-lookup"><span data-stu-id="09e98-204">A shader will expect a unit vector in render-target space but may get a non-unit vector with respect to some other vector space.</span></span> <span data-ttu-id="09e98-205">Par conséquent, il est de la responsabilité de l’application de demander des dérivés des attributs qui sont échantillonnés.</span><span class="sxs-lookup"><span data-stu-id="09e98-205">Therefore, it is an application's responsibility to exhibit caution when requesting derivatives from attributes that are centroid sampled.</span></span> <span data-ttu-id="09e98-206">En fait, il est recommandé de ne pas combiner les dérivés et l’échantillonnage de centre de gravité.</span><span class="sxs-lookup"><span data-stu-id="09e98-206">In fact, it is recommended that you do not combine derivatives and centroid sampling.</span></span> <span data-ttu-id="09e98-207">L’échantillonnage de centre de gravité peut être utile dans les situations où il est essentiel que les attributs interpolés d’une primitive ne soient pas extrapolés, mais cela s’accompagne de compromis tels que des attributs qui semblent sauter là où un bord primitif traverse un pixel (plutôt que changer en continu) ou des dérivés qui ne peuvent pas être utilisés par les opérations d’échantillonnage de texture qui dérivent LOD</span><span class="sxs-lookup"><span data-stu-id="09e98-207">Centroid sampling can be useful for situations where it is critical that a primitive's interpolated attributes are not extrapolated, but this comes with tradeoffs such as attributes that appear to jump where a primitive edge crosses a pixel (rather than change continuously) or derivatives that cannot be used by texture sampling operations that derive LOD.</span></span>

## <a name="related-topics"></a><span data-ttu-id="09e98-208">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="09e98-208">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="09e98-209">Étape du rastériseur</span><span class="sxs-lookup"><span data-stu-id="09e98-209">Rasterizer Stage</span></span>](d3d10-graphics-programming-guide-rasterizer-stage.md)
</dt> </dl>

 

 