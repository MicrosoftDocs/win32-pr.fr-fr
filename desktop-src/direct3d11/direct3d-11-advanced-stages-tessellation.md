---
title: Étapes de pavage
description: Le runtime Direct3D 11 prend en charge trois nouvelles étapes qui implémentent la polygonalisation, qui convertit les surfaces de sous-division de faible détail en primitives de détail supérieures sur le GPU.
ms.assetid: 4ad2fd3e-6e1a-4326-8469-3198acf931dc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3aacb48ccc2c95ab93ba4f34212e654880d9a369
ms.sourcegitcommit: 4e4f9e7c90d25af0774deec1d44bd49fa9b6daa9
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2020
ms.locfileid: "104316662"
---
# <a name="tessellation-stages"></a><span data-ttu-id="18691-103">Étapes de pavage</span><span class="sxs-lookup"><span data-stu-id="18691-103">Tessellation Stages</span></span>

<span data-ttu-id="18691-104">Le runtime Direct3D 11 prend en charge trois nouvelles étapes qui implémentent la polygonalisation, qui convertit les surfaces de sous-division de faible détail en primitives de détail supérieures sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="18691-104">The Direct3D 11 runtime supports three new stages that implement tessellation, which converts low-detail subdivision surfaces into higher-detail primitives on the GPU.</span></span> <span data-ttu-id="18691-105">Polygonalisation des vignettes (ou fractionnement) des surfaces de poids fort dans des structures appropriées pour le rendu.</span><span class="sxs-lookup"><span data-stu-id="18691-105">Tessellation tiles (or breaks up) high-order surfaces into suitable structures for rendering.</span></span>

<span data-ttu-id="18691-106">En implémentant la polygonalisation dans le matériel, un pipeline graphique peut évaluer des modèles de détail inférieurs (nombre inférieur de polygones) et un rendu plus détaillé.</span><span class="sxs-lookup"><span data-stu-id="18691-106">By implementing tessellation in hardware, a graphics pipeline can evaluate lower detail (lower polygon count) models and render in higher detail.</span></span> <span data-ttu-id="18691-107">Bien que le pavage de logiciels puisse être effectué, le pavage implémenté par le matériel peut générer une quantité incroyable de détails visuels (y compris la prise en charge du mappage de déplacement) sans ajouter le détail visuel aux tailles de modèle et aux taux d’actualisation ensuivre.</span><span class="sxs-lookup"><span data-stu-id="18691-107">While software tessellation can be done, tessellation implemented by hardware can generate an incredible amount of visual detail (including support for displacement mapping) without adding the visual detail to the model sizes and paralyzing refresh rates.</span></span>

-   [<span data-ttu-id="18691-108">Avantages de la polygonalisation</span><span class="sxs-lookup"><span data-stu-id="18691-108">Tessellation Benefits</span></span>](#tessellation-benefits)
-   [<span data-ttu-id="18691-109">Nouvelles étapes de pipeline</span><span class="sxs-lookup"><span data-stu-id="18691-109">New Pipeline Stages</span></span>](#new-pipeline-stages)
    -   [<span data-ttu-id="18691-110">Coque-étape du nuanceur</span><span class="sxs-lookup"><span data-stu-id="18691-110">Hull-Shader Stage</span></span>](#hull-shader-stage)
    -   [<span data-ttu-id="18691-111">Étape du paveur</span><span class="sxs-lookup"><span data-stu-id="18691-111">Tessellator Stage</span></span>](#tessellator-stage)
    -   [<span data-ttu-id="18691-112">Étape de nuanceur de domaine</span><span class="sxs-lookup"><span data-stu-id="18691-112">Domain-Shader Stage</span></span>](#domain-shader-stage)
-   [<span data-ttu-id="18691-113">API pour l’initialisation des étapes de pavage</span><span class="sxs-lookup"><span data-stu-id="18691-113">APIs for initializing Tessellation Stages</span></span>](#apis-for-initializing-tessellation-stages)
-   [<span data-ttu-id="18691-114">Comment :</span><span class="sxs-lookup"><span data-stu-id="18691-114">How to's:</span></span>](#how-tos)
-   [<span data-ttu-id="18691-115">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="18691-115">Related topics</span></span>](#related-topics)

## <a name="tessellation-benefits"></a><span data-ttu-id="18691-116">Avantages de la polygonalisation</span><span class="sxs-lookup"><span data-stu-id="18691-116">Tessellation Benefits</span></span>

<span data-ttu-id="18691-117">Mosaïque</span><span class="sxs-lookup"><span data-stu-id="18691-117">Tessellation:</span></span>

-   <span data-ttu-id="18691-118">Économise beaucoup de mémoire et de bande passante, ce qui permet à une application d’afficher des surfaces plus détaillées à partir de modèles de faible résolution.</span><span class="sxs-lookup"><span data-stu-id="18691-118">Saves lots of memory and bandwidth, which allows an application to render higher detailed surfaces from low-resolution models.</span></span> <span data-ttu-id="18691-119">La technique de pavage implémentée dans le pipeline Direct3D 11 prend également en charge le mappage de déplacement, qui peut produire des quantités impressionnantes de détails de surface.</span><span class="sxs-lookup"><span data-stu-id="18691-119">The tessellation technique implemented in the Direct3D 11 pipeline also supports displacement mapping, which can produce stunning amounts of surface detail.</span></span>
-   <span data-ttu-id="18691-120">Prend en charge des techniques de rendu Scalable, telles que des niveaux de détail continus ou d’affichage, qui peuvent être calculés à la volée.</span><span class="sxs-lookup"><span data-stu-id="18691-120">Supports scalable-rendering techniques, such as continuous or view dependent levels-of-detail which can be calculated on the fly.</span></span>
-   <span data-ttu-id="18691-121">Améliore les performances en effectuant des calculs coûteux à une fréquence inférieure (en effectuant des calculs sur un modèle moins détaillé).</span><span class="sxs-lookup"><span data-stu-id="18691-121">Improves performance by performing expensive computations at lower frequency (doing calculations on a lower-detail model).</span></span> <span data-ttu-id="18691-122">Cela peut inclure la fusion de calculs à l’aide de formes Blend ou de cibles morphes pour des calculs réalistes ou physiques pour la détection de collision ou la dynamique de corps souple.</span><span class="sxs-lookup"><span data-stu-id="18691-122">This could include blending calculations using blend shapes or morph targets for realistic animation or physics calculations for collision detection or soft body dynamics.</span></span>

<span data-ttu-id="18691-123">Le pipeline Direct3D 11 implémente le pavage dans le matériel, ce qui permet de décharger le travail du processeur vers le GPU.</span><span class="sxs-lookup"><span data-stu-id="18691-123">The Direct3D 11 pipeline implements tessellation in hardware, which off-loads the work from the CPU to the GPU.</span></span> <span data-ttu-id="18691-124">Cela peut entraîner d’importantes améliorations des performances si une application implémente un grand nombre de cibles morphes et/ou des modèles de déformation/déformation plus sophistiqués.</span><span class="sxs-lookup"><span data-stu-id="18691-124">This can lead to very large performance improvements if an application implements large numbers of morph targets and/or more sophisticated skinning/deformation models.</span></span> <span data-ttu-id="18691-125">Pour accéder aux nouvelles fonctionnalités de pavage, vous devez vous familiariser avec certaines nouvelles étapes de pipeline.</span><span class="sxs-lookup"><span data-stu-id="18691-125">To access the new tessellation features, you must learn about some new pipeline stages.</span></span>

## <a name="new-pipeline-stages"></a><span data-ttu-id="18691-126">Nouvelles étapes de pipeline</span><span class="sxs-lookup"><span data-stu-id="18691-126">New Pipeline Stages</span></span>

<span data-ttu-id="18691-127">Pavage utilise le GPU pour calculer une surface plus détaillée à partir d’une surface construite à partir de quatre carreaux, de carreaux de triangle ou d’isolignes.</span><span class="sxs-lookup"><span data-stu-id="18691-127">Tessellation uses the GPU to calculate a more detailed surface from a surface constructed from quad patches, triangle patches or isolines.</span></span> <span data-ttu-id="18691-128">Pour rapprocher la surface de poids fort, chaque correctif est subdivisé en triangles, points ou lignes à l’aide de facteurs de pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-128">To approximate the high-ordered surface, each patch is subdivided into triangles, points, or lines using tessellation factors.</span></span> <span data-ttu-id="18691-129">Le pipeline Direct3D 11 implémente le pavage à l’aide de trois nouvelles étapes de pipeline :</span><span class="sxs-lookup"><span data-stu-id="18691-129">The Direct3D 11 pipeline implements tessellation using three new pipeline stages:</span></span>

-   <span data-ttu-id="18691-130">[Coque-étape du nuanceur](#hull-shader-stage) : étape de nuanceur programmable qui produit un correctif de géométrie (et des constantes de correction) qui correspondent à chaque correctif d’entrée (quadruple, triangle ou ligne).</span><span class="sxs-lookup"><span data-stu-id="18691-130">[Hull-Shader Stage](#hull-shader-stage) - A programmable shader stage that produces a geometry patch (and patch constants) that correspond to each input patch (quad, triangle, or line).</span></span>
-   <span data-ttu-id="18691-131">[Étape du paveur](#tessellator-stage) : étape de pipeline de fonction fixe qui crée un modèle d’échantillonnage du domaine qui représente le correctif de géométrie et génère un ensemble d’objets plus petits (triangles, points ou lignes) qui connectent ces exemples.</span><span class="sxs-lookup"><span data-stu-id="18691-131">[Tessellator Stage](#tessellator-stage) - A fixed function pipeline stage that creates a sampling pattern of the domain that represents the geometry patch and generates a set of smaller objects (triangles, points, or lines) that connect these samples.</span></span>
-   <span data-ttu-id="18691-132">[Étape de nuanceur de domaine](#domain-shader-stage) : étape de nuanceur programmable qui calcule la position du vertex qui correspond à chaque exemple de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-132">[Domain-Shader Stage](#domain-shader-stage) - A programmable shader stage that calculates the vertex position that corresponds to each domain sample.</span></span>

<span data-ttu-id="18691-133">Le diagramme suivant met en évidence les nouvelles étapes du pipeline Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="18691-133">The following diagram highlights the new stages of the Direct3D 11 pipeline.</span></span>

![diagramme du pipeline Direct3D 11 qui met en évidence les étapes du nuanceur de coque, du du paveur et du nuanceur de domaine](images/d3d11-pipeline-stages-tessellation.png)

<span data-ttu-id="18691-135">Le diagramme suivant illustre la progression à travers les étapes de pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-135">The following diagram shows the progression through the tessellation stages.</span></span> <span data-ttu-id="18691-136">La progression commence par la surface de sous-division de faible détail.</span><span class="sxs-lookup"><span data-stu-id="18691-136">The progression starts with the low-detail subdivision surface.</span></span> <span data-ttu-id="18691-137">La progression met ensuite en évidence le correctif d’entrée avec le correctif de géométrie, les exemples de domaine et les triangles correspondants qui connectent ces exemples.</span><span class="sxs-lookup"><span data-stu-id="18691-137">The progression next highlights the input patch with the corresponding geometry patch, domain samples, and triangles that connect these samples.</span></span> <span data-ttu-id="18691-138">La progression met enfin en évidence les vertex qui correspondent à ces exemples.</span><span class="sxs-lookup"><span data-stu-id="18691-138">The progression finally highlights the vertices that correspond to these samples.</span></span>

![diagramme de la progression de la polygonalisation](images/tess-prog.png)

### <a name="hull-shader-stage"></a><span data-ttu-id="18691-140">Étape de Hull-Shader</span><span class="sxs-lookup"><span data-stu-id="18691-140">Hull-Shader Stage</span></span>

<span data-ttu-id="18691-141">Un nuanceur de coque, qui est appelé une fois par correctif-transforme des points de contrôle d’entrée qui définissent une surface de poids faible dans des points de contrôle qui composent un correctif.</span><span class="sxs-lookup"><span data-stu-id="18691-141">A hull shader -- which is invoked once per patch -- transforms input control points that define a low-order surface into control points that make up a patch.</span></span> <span data-ttu-id="18691-142">Il effectue également des calculs par correctifs pour fournir des données pour l’étape de pavage et l’étape de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-142">It also does some per patch calculations to provide data for the tessellation stage and the domain stage.</span></span> <span data-ttu-id="18691-143">Au niveau de la boîte noire la plus simple, l’étape de nuanceur de coque ressemble à ce qui suit.</span><span class="sxs-lookup"><span data-stu-id="18691-143">At the simplest black-box level, the hull-shader stage would look something like the following diagram.</span></span>

![diagramme de l’étape de nuanceur de coque](images/d3d11-hull-shader.png)

<span data-ttu-id="18691-145">Un nuanceur de coque est implémenté avec une fonction HLSL et a les propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="18691-145">A hull shader is implemented with an HLSL function, and has the following properties:</span></span>

-   <span data-ttu-id="18691-146">L’entrée du nuanceur est comprise entre 1 et 32 points de contrôle.</span><span class="sxs-lookup"><span data-stu-id="18691-146">The shader input is between 1 and 32 control points.</span></span>
-   <span data-ttu-id="18691-147">La sortie du nuanceur est comprise entre 1 et 32 points de contrôle, quel que soit le nombre de facteurs de pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-147">The shader output is between 1 and 32 control points, regardless of the number of tessellation factors.</span></span> <span data-ttu-id="18691-148">La sortie des points de contrôle d’un nuanceur de coque peut être consommée par l’étape de nuanceur de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-148">The control-points output from a hull shader can be consumed by the domain-shader stage.</span></span> <span data-ttu-id="18691-149">Les données de constantes de correctifs peuvent être consommées par un nuanceur de domaine. les facteurs de pavage peuvent être utilisés par le nuanceur de domaine et l’étape de pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-149">Patch constant data can be consumed by a domain shader; tessellation factors can be consumed by the domain shader and the tessellation stage.</span></span>
-   <span data-ttu-id="18691-150">Les facteurs de pavage déterminent le degré de subdivision de chaque correctif.</span><span class="sxs-lookup"><span data-stu-id="18691-150">Tessellation factors determine how much to subdivide each patch.</span></span>
-   <span data-ttu-id="18691-151">Le nuanceur déclare l’État requis par l’étape du paveur.</span><span class="sxs-lookup"><span data-stu-id="18691-151">The shader declares the state required by the tessellator stage.</span></span> <span data-ttu-id="18691-152">Cela comprend des informations telles que le nombre de points de contrôle, le type de face de patch et le type de partitionnement à utiliser lors de la le pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-152">This includes information such as the number of control points, the type of patch face and the type of partitioning to use when tessellating.</span></span> <span data-ttu-id="18691-153">Ces informations apparaissent en tant que déclarations en général au début du code du nuanceur.</span><span class="sxs-lookup"><span data-stu-id="18691-153">This information appears as declarations typically at the front of the shader code.</span></span>
-   <span data-ttu-id="18691-154">Si l’étape de nuanceur de coque définit un facteur de pavage de bord sur = 0 ou NaN, le correctif est éliminé.</span><span class="sxs-lookup"><span data-stu-id="18691-154">If the hull-shader stage sets any edge tessellation factor to = 0 or NaN, the patch will be culled.</span></span> <span data-ttu-id="18691-155">Par conséquent, l’étape du paveur peut ou non s’exécuter, le nuanceur de domaine ne s’exécutera pas et aucune sortie visible ne sera générée pour ce correctif.</span><span class="sxs-lookup"><span data-stu-id="18691-155">As a result, the tessellator stage may or may not run, the domain shader will not run, and no visible output will be produced for that patch.</span></span>

<span data-ttu-id="18691-156">À un niveau plus profond, un nuanceur de coque fonctionne en deux phases : une phase de point de contrôle et une phase de constante de patch, qui sont exécutées en parallèle par le matériel.</span><span class="sxs-lookup"><span data-stu-id="18691-156">At a deeper level, a hull-shader actually operates in two phases: a control-point phase and a patch-constant phase, which are run in parallel by the hardware.</span></span> <span data-ttu-id="18691-157">Le compilateur HLSL extrait le parallélisme dans un nuanceur de coque et l’encode en bytecode qui pilote le matériel.</span><span class="sxs-lookup"><span data-stu-id="18691-157">The HLSL compiler extracts the parallelism in a hull shader and encodes it into bytecode that drives the hardware.</span></span>

-   <span data-ttu-id="18691-158">La phase du point de contrôle s’exécute une fois pour chaque point de contrôle, la lecture des points de contrôle pour un correctif et la génération d’un point de contrôle de sortie (identifié par un ControlPointID).</span><span class="sxs-lookup"><span data-stu-id="18691-158">The control-point phase operates once for each control-point, reading the control points for a patch, and generating one output control point (identified by a ControlPointID).</span></span>
-   <span data-ttu-id="18691-159">La phase patch-constant s’exécute une fois par correctif pour générer des facteurs de pavage Edge et d’autres constantes par correctif.</span><span class="sxs-lookup"><span data-stu-id="18691-159">The patch-constant phase operates once per patch to generate edge tessellation factors and other per-patch constants.</span></span> <span data-ttu-id="18691-160">En interne, de nombreuses phases à constantes de correctifs peuvent s’exécuter en même temps.</span><span class="sxs-lookup"><span data-stu-id="18691-160">Internally, many patch-constant phases may run at the same time.</span></span> <span data-ttu-id="18691-161">La phase patch-constant dispose d’un accès en lecture seule à tous les points de contrôle d’entrée et de sortie.</span><span class="sxs-lookup"><span data-stu-id="18691-161">The patch-constant phase has read-only access to all input and output control points.</span></span>

<span data-ttu-id="18691-162">Voici un exemple de nuanceur de coque :</span><span class="sxs-lookup"><span data-stu-id="18691-162">Here's an example of a hull shader:</span></span>


```
[patchsize(12)]
[patchconstantfunc(MyPatchConstantFunc)]
MyOutPoint main(uint Id : SV_ControlPointID,
     InputPatch<MyInPoint, 12> InPts)
{
     MyOutPoint result;
     
     ...
     
     result = TransformControlPoint( InPts[Id] );

     return result;
}
```



<span data-ttu-id="18691-163">Pour obtenir un exemple qui crée un nuanceur de coque, consultez [Comment : créer un nuanceur de coque](direct3d-11-advanced-stages-hull-shader-create.md).</span><span class="sxs-lookup"><span data-stu-id="18691-163">For an example that creates a hull shader, see [How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md).</span></span>

### <a name="tessellator-stage"></a><span data-ttu-id="18691-164">Étape du paveur</span><span class="sxs-lookup"><span data-stu-id="18691-164">Tessellator Stage</span></span>

<span data-ttu-id="18691-165">Le du paveur est une étape de fonction fixe initialisée par la liaison d’un nuanceur de coque au pipeline (voir [How to : Initialize the du paveur stage](direct3d-11-advanced-stages-tessellator-initialize.md)).</span><span class="sxs-lookup"><span data-stu-id="18691-165">The tessellator is a fixed-function stage initialized by binding a hull shader to the pipeline (see [How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)).</span></span> <span data-ttu-id="18691-166">L’objectif de l’étape du paveur consiste à subdiviser un domaine (quadruple, tri ou ligne) en plusieurs objets plus petits (triangles, points ou lignes).</span><span class="sxs-lookup"><span data-stu-id="18691-166">The purpose of the tessellator stage is to subdivide a domain (quad, tri, or line) into many smaller objects (triangles, points or lines).</span></span> <span data-ttu-id="18691-167">Le du paveur mosaïque un domaine canonique dans un système de coordonnées normalisé (zéro à un).</span><span class="sxs-lookup"><span data-stu-id="18691-167">The tessellator tiles a canonical domain in a normalized (zero-to-one) coordinate system.</span></span> <span data-ttu-id="18691-168">Par exemple, un domaine à quatre cœurs est fractionné sur un carré d’unité.</span><span class="sxs-lookup"><span data-stu-id="18691-168">For example, a quad domain is tessellated to a unit square.</span></span>

<span data-ttu-id="18691-169">Le du paveur fonctionne une fois par correctif à l’aide des facteurs de pavage (qui spécifient le degré de précision du domaine à fractionner) et le type de partitionnement (qui spécifie l’algorithme utilisé pour découper un correctif) qui sont transmis à partir de l’étape de nuanceur de coque.</span><span class="sxs-lookup"><span data-stu-id="18691-169">The tessellator operates once per patch using the tessellation factors (which specify how finely the domain will be tessellated) and the type of partitioning (which specifies the algorithm used to slice up a patch) that are passed in from the hull-shader stage.</span></span> <span data-ttu-id="18691-170">Du paveur génère des coordonnées UV (et éventuellement w) et la topologie de surface à l’étape de nuanceur de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-170">The tessellator outputs uv (and optionally w) coordinates and the surface topology to the domain-shader stage.</span></span>

<span data-ttu-id="18691-171">En interne, le du paveur fonctionne en deux phases :</span><span class="sxs-lookup"><span data-stu-id="18691-171">Internally, the tessellator operates in two phases:</span></span>

-   <span data-ttu-id="18691-172">La première phase traite les facteurs de pavage, en corrigeant les problèmes d’arrondi, en gérant de très petits facteurs, en réduisant et en combinant des facteurs, à l’aide d’opérations arithmétiques à virgule flottante 32 bits.</span><span class="sxs-lookup"><span data-stu-id="18691-172">The first phase processes the tessellation factors, fixing rounding problems, handling very small factors, reducing and combining factors, using 32-bit floating-point arithmetic.</span></span>
-   <span data-ttu-id="18691-173">La deuxième phase génère des listes de points ou de topologies en fonction du type de partitionnement sélectionné.</span><span class="sxs-lookup"><span data-stu-id="18691-173">The second phase generates point or topology lists based on the type of partitioning selected.</span></span> <span data-ttu-id="18691-174">Il s’agit de la tâche principale de l’étape du paveur et utilise des fractions de 16 bits avec l’arithmétique à virgule fixe.</span><span class="sxs-lookup"><span data-stu-id="18691-174">This is the core task of the tessellator stage and uses 16-bit fractions with fixed-point arithmetic.</span></span> <span data-ttu-id="18691-175">L’arithmétique à virgule fixe autorise l’accélération matérielle tout en conservant une précision acceptable.</span><span class="sxs-lookup"><span data-stu-id="18691-175">Fixed-point arithmetic allows hardware acceleration while maintaining acceptable precision.</span></span> <span data-ttu-id="18691-176">Par exemple, étant donné un correctif à l’échelle du compteur 64, cette précision peut placer des points à une résolution de 2 mm.</span><span class="sxs-lookup"><span data-stu-id="18691-176">For example, given a 64 meter wide patch, this precision can place points at a 2 mm resolution.</span></span>



| <span data-ttu-id="18691-177">Type de partitionnement</span><span class="sxs-lookup"><span data-stu-id="18691-177">Type of Partitioning</span></span> | <span data-ttu-id="18691-178">Plage</span><span class="sxs-lookup"><span data-stu-id="18691-178">Range</span></span>                       |
|----------------------|-----------------------------|
| <span data-ttu-id="18691-179">fractionnaire \_ impair</span><span class="sxs-lookup"><span data-stu-id="18691-179">fractional\_odd</span></span>      | <span data-ttu-id="18691-180">\[1... 63\]</span><span class="sxs-lookup"><span data-stu-id="18691-180">\[1...63\]</span></span>                  |
| <span data-ttu-id="18691-181">fractionnaire \_ pair</span><span class="sxs-lookup"><span data-stu-id="18691-181">fractional\_even</span></span>     | <span data-ttu-id="18691-182">TessFactor plage : \[ 2.. 64\]</span><span class="sxs-lookup"><span data-stu-id="18691-182">TessFactor range: \[2..64\]</span></span> |
| <span data-ttu-id="18691-183">entier</span><span class="sxs-lookup"><span data-stu-id="18691-183">integer</span></span>              | <span data-ttu-id="18691-184">TessFactor plage : \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="18691-184">TessFactor range: \[1..64\]</span></span> |
| <span data-ttu-id="18691-185">pow2</span><span class="sxs-lookup"><span data-stu-id="18691-185">pow2</span></span>                 | <span data-ttu-id="18691-186">TessFactor plage : \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="18691-186">TessFactor range: \[1..64\]</span></span> |



 

### <a name="domain-shader-stage"></a><span data-ttu-id="18691-187">Étape de Domain-Shader</span><span class="sxs-lookup"><span data-stu-id="18691-187">Domain-Shader Stage</span></span>

<span data-ttu-id="18691-188">Un nuanceur de domaine calcule la position du sommet d’un point subdivisé dans le correctif de sortie.</span><span class="sxs-lookup"><span data-stu-id="18691-188">A domain shader calculates the vertex position of a subdivided point in the output patch.</span></span> <span data-ttu-id="18691-189">Un nuanceur de domaine est exécuté une fois par point de sortie d’étape du paveur et a un accès en lecture seule aux coordonnées UV de sortie de l’étape du paveur, au correctif de sortie du nuanceur de coque et aux constantes de correctif de sortie du nuanceur de coque, comme le montre le diagramme suivant.</span><span class="sxs-lookup"><span data-stu-id="18691-189">A domain shader is run once per tessellator stage output point and has read-only access to the tessellator stage output UV coordinates, the hull shader output patch, and the hull shader output patch constants, as the following diagram shows.</span></span>

![diagramme de l’étape du nuanceur de domaine](images/d3d11-domain-shader.png)

<span data-ttu-id="18691-191">Les propriétés du nuanceur de domaine sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="18691-191">Properties of the domain shader include:</span></span>

-   <span data-ttu-id="18691-192">Un nuanceur de domaine est appelé une fois par coordonnée de sortie à partir de l’étape du paveur.</span><span class="sxs-lookup"><span data-stu-id="18691-192">A domain shader is invoked once per output coordinate from the tessellator stage.</span></span>
-   <span data-ttu-id="18691-193">Un nuanceur de domaine consomme des points de contrôle de sortie à partir de l’étape de nuanceur de coque.</span><span class="sxs-lookup"><span data-stu-id="18691-193">A domain shader consumes output control points from the hull-shader stage.</span></span>
-   <span data-ttu-id="18691-194">Un nuanceur de domaine génère la position d’un vertex.</span><span class="sxs-lookup"><span data-stu-id="18691-194">A domain shader outputs the position of a vertex.</span></span>
-   <span data-ttu-id="18691-195">Les entrées sont les sorties de nuanceur de coque, y compris les points de contrôle, les données de constante de correctif et les facteurs de pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-195">Inputs are the hull shader outputs including control points, patch constant data and tessellation factors.</span></span> <span data-ttu-id="18691-196">Les facteurs de pavage peuvent inclure les valeurs utilisées par la fonction fixe du paveur ainsi que les valeurs brutes (avant l’arrondissement par pavage d’entiers, par exemple), ce qui facilite la géomorphation, par exemple.</span><span class="sxs-lookup"><span data-stu-id="18691-196">The tessellation factors can include the values used by the fixed function tessellator as well as the raw values (before rounding by integer tessellation, for example), which facilitates geomorphing, for example.</span></span>

<span data-ttu-id="18691-197">Une fois le nuanceur de domaine terminé, la polygonalisation est terminée et les données du pipeline continuent à l’étape de pipeline suivante (nuanceur de géométrie, nuanceur de pixels, etc.).</span><span class="sxs-lookup"><span data-stu-id="18691-197">After the domain shader completes, tessellation is finished and pipeline data continues to the next pipeline stage (geometry shader, pixel shader etc).</span></span> <span data-ttu-id="18691-198">Un nuanceur Geometry qui attend des primitives avec contiguïté (par exemple, 6 sommets par triangle) n’est pas valide quand la polygonalisation est active (cela entraîne un comportement non défini, dont la couche de débogage se plaindra).</span><span class="sxs-lookup"><span data-stu-id="18691-198">A geometry shader that expects primitives with adjacency (for example, 6 vertices per triangle) is not valid when tessellation is active (this results in undefined behavior, which the debug layer will complain about).</span></span>

<span data-ttu-id="18691-199">Voici un exemple de nuanceur de domaine :</span><span class="sxs-lookup"><span data-stu-id="18691-199">Here is an example of a domain shader:</span></span>


```
void main( out    MyDSOutput result, 
           float2 myInputUV : SV_DomainPoint, 
           MyDSInput DSInputs,
           OutputPatch<MyOutPoint, 12> ControlPts, 
           MyTessFactors tessFactors)
{
     ...

     result.Position = EvaluateSurfaceUV(ControlPoints, myInputUV);
}
```



## <a name="apis-for-initializing-tessellation-stages"></a><span data-ttu-id="18691-200">API pour l’initialisation des étapes de pavage</span><span class="sxs-lookup"><span data-stu-id="18691-200">APIs for initializing Tessellation Stages</span></span>

<span data-ttu-id="18691-201">La facettisation est implémentée avec deux nouvelles étapes de nuanceur programmables : un nuanceur de coque et un nuanceur de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-201">Tessellation is implemented with two new programmable shader stages: a hull shader and a domain shader.</span></span> <span data-ttu-id="18691-202">Ces nouvelles étapes de nuanceur sont programmées avec du code HLSL qui est défini dans le nuancier Model 5.</span><span class="sxs-lookup"><span data-stu-id="18691-202">These new shader stages are programmed with HLSL code that is defined in shader model 5.</span></span> <span data-ttu-id="18691-203">Les nouvelles cibles de nuanceur sont : HS \_ 5 \_ 0 et DS \_ 5 \_ 0.</span><span class="sxs-lookup"><span data-stu-id="18691-203">The new shader targets are: hs\_5\_0 and ds\_5\_0.</span></span> <span data-ttu-id="18691-204">À l’instar de toutes les étapes de nuanceur programmables, le code du matériel est extrait des nuanceurs compilés passés dans le runtime quand les nuanceurs sont liés au pipeline à l’aide d’API telles que [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) et [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span><span class="sxs-lookup"><span data-stu-id="18691-204">Like all programmable shader stages, code for the hardware is extracted from compiled shaders passed into the runtime when shaders are bound to the pipeline using APIs such as [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) and [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span></span> <span data-ttu-id="18691-205">Mais tout d’abord, le nuanceur doit être créé à l’aide d’API telles que [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) et [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span><span class="sxs-lookup"><span data-stu-id="18691-205">But first, the shader must be created using APIs such as [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) and [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span></span>

<span data-ttu-id="18691-206">Activez le pavage en créant un nuanceur de coque et en le liant à l’étape de nuanceur de coque (cela configure automatiquement l’étape du paveur).</span><span class="sxs-lookup"><span data-stu-id="18691-206">Enable tessellation by creating a hull shader and binding it to the hull-shader stage (this automatically sets up the tessellator stage).</span></span> <span data-ttu-id="18691-207">Pour générer les positions finales des vertex à partir des correctifs fractionnés, vous devez également créer un nuanceur de domaine et le lier à l’étape de nuanceur de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-207">To generate the final vertex positions from the tessellated patches, you will also need to create a domain shader and bind it to the domain-shader stage.</span></span> <span data-ttu-id="18691-208">Une fois le pavage activé, l’entrée de données de l’étape assembleur d’entrée doit être une donnée de correctif.</span><span class="sxs-lookup"><span data-stu-id="18691-208">Once tessellation is enabled, the data input to the input-assembler stage must be patch data.</span></span> <span data-ttu-id="18691-209">Autrement dit, la topologie de l’assembleur d’entrée doit être une topologie à constante de correctif à partir de la [**\_ \_ topologie primitive d3d11**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) définie avec [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span><span class="sxs-lookup"><span data-stu-id="18691-209">That is, the input assembler topology must be a patch constant topology from [**D3D11\_PRIMITIVE\_TOPOLOGY**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) set with [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span></span>

<span data-ttu-id="18691-210">Pour désactiver le pavage, affectez la valeur **null** au nuanceur de coque et au nuanceur de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-210">To disable tessellation, set the hull shader and the domain shader to **NULL**.</span></span> <span data-ttu-id="18691-211">Ni l’étape Geometry-Shader, ni l’étape Stream-output ne peuvent lire les points de contrôle de sortie de nuanceur-nuanceur ou les données de correctifs.</span><span class="sxs-lookup"><span data-stu-id="18691-211">Neither the geometry-shader stage nor the stream-output stage can read hull-shader output-control points or patch data.</span></span>

-   <span data-ttu-id="18691-212">Nouvelles topologies pour l’étape assembleur d’entrée, qui sont des extensions à cette énumération.</span><span class="sxs-lookup"><span data-stu-id="18691-212">New topologies for the input-assembler stage, which are extensions to this enumeration.</span></span>

    ```
    enum D3D11_PRIMITIVE_TOPOLOGY
    ```

    

    <span data-ttu-id="18691-213">La topologie est définie sur l’étape assembleur d’entrée à l’aide de [ **IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span><span class="sxs-lookup"><span data-stu-id="18691-213">The topology is set to the input-assembler stage using [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span></span>

-   <span data-ttu-id="18691-214">Bien entendu, les nouvelles étapes de nuanceur programmables requièrent que l’autre État soit défini, pour lier des mémoires tampons constantes, des exemples et des ressources de nuanceur aux étapes de canalisation appropriées.</span><span class="sxs-lookup"><span data-stu-id="18691-214">Of course, the new programmable shader stages require other state to be set, to bind constant buffers, samples, and shader resources to the appropriate pipeline stages.</span></span> <span data-ttu-id="18691-215">Ces nouvelles méthodes ID3D11Device sont implémentées pour définir cet État.</span><span class="sxs-lookup"><span data-stu-id="18691-215">These new ID3D11Device methods are implemented for setting this state.</span></span>
    -   [<span data-ttu-id="18691-216">**DSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="18691-216">**DSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetconstantbuffers)
    -   [<span data-ttu-id="18691-217">**DSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="18691-217">**DSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetsamplers)
    -   [<span data-ttu-id="18691-218">**DSGetShader**</span><span class="sxs-lookup"><span data-stu-id="18691-218">**DSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshader)
    -   [<span data-ttu-id="18691-219">**DSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="18691-219">**DSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshaderresources)
    -   [<span data-ttu-id="18691-220">**DSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="18691-220">**DSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetconstantbuffers)
    -   [<span data-ttu-id="18691-221">**DSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="18691-221">**DSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetsamplers)
    -   [<span data-ttu-id="18691-222">**DSSetShader**</span><span class="sxs-lookup"><span data-stu-id="18691-222">**DSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader)
    -   [<span data-ttu-id="18691-223">**DSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="18691-223">**DSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshaderresources)
    -   [<span data-ttu-id="18691-224">**HSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="18691-224">**HSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetconstantbuffers)
    -   [<span data-ttu-id="18691-225">**HSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="18691-225">**HSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshaderresources)
    -   [<span data-ttu-id="18691-226">**HSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="18691-226">**HSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetsamplers)
    -   [<span data-ttu-id="18691-227">**HSGetShader**</span><span class="sxs-lookup"><span data-stu-id="18691-227">**HSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshader)
    -   [<span data-ttu-id="18691-228">**HSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="18691-228">**HSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetconstantbuffers)
    -   [<span data-ttu-id="18691-229">**HSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="18691-229">**HSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetsamplers)
    -   [<span data-ttu-id="18691-230">**HSSetShader**</span><span class="sxs-lookup"><span data-stu-id="18691-230">**HSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader)
    -   [<span data-ttu-id="18691-231">**HSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="18691-231">**HSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshaderresources)

## <a name="how-tos"></a><span data-ttu-id="18691-232">Comment :</span><span class="sxs-lookup"><span data-stu-id="18691-232">How to's:</span></span>

<span data-ttu-id="18691-233">La documentation contient également des exemples d’initialisation des étapes de pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-233">The documentation also contains examples for initializing the tessellation stages.</span></span>



| <span data-ttu-id="18691-234">Élément</span><span class="sxs-lookup"><span data-stu-id="18691-234">Item</span></span>                                                                                                                                                                                                                                                                                           | <span data-ttu-id="18691-235">Description</span><span class="sxs-lookup"><span data-stu-id="18691-235">Description</span></span>                                   |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
| <span data-ttu-id="18691-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[Comment : créer un nuanceur de coque](direct3d-11-advanced-stages-hull-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="18691-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md)</span></span><br/>                                                     | <span data-ttu-id="18691-237">Créez un nuanceur de coque.</span><span class="sxs-lookup"><span data-stu-id="18691-237">Create a hull shader.</span></span><br/>              |
| <span data-ttu-id="18691-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[Comment : concevoir un nuanceur de coque](direct3d-11-advanced-stages-hull-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="18691-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[How To: Design a Hull Shader](direct3d-11-advanced-stages-hull-shader-design.md)</span></span><br/>                                                     | <span data-ttu-id="18691-239">Concevoir un nuanceur de coque.</span><span class="sxs-lookup"><span data-stu-id="18691-239">Design a hull shader.</span></span><br/>              |
| <span data-ttu-id="18691-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[Comment : initialiser l’étape du paveur](direct3d-11-advanced-stages-tessellator-initialize.md)</span><span class="sxs-lookup"><span data-stu-id="18691-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)</span></span><br/> | <span data-ttu-id="18691-241">Initialisez l’étape de pavage.</span><span class="sxs-lookup"><span data-stu-id="18691-241">Initialize the tessellation stage.</span></span><br/> |
| <span data-ttu-id="18691-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[Comment : créer un nuanceur de domaine](direct3d-11-advanced-stages-domain-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="18691-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[How To: Create a Domain Shader](direct3d-11-advanced-stages-domain-shader-create.md)</span></span><br/>                                           | <span data-ttu-id="18691-243">Créez un nuanceur de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-243">Create a domain shader.</span></span><br/>            |
| <span data-ttu-id="18691-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[Comment : concevoir un nuanceur de domaine](direct3d-11-advanced-stages-domain-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="18691-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[How To: Design a Domain Shader](direct3d-11-advanced-stages-domain-shader-design.md)</span></span><br/>                                           | <span data-ttu-id="18691-245">Créez un nuanceur de domaine.</span><span class="sxs-lookup"><span data-stu-id="18691-245">Create a domain shader.</span></span><br/>            |



 

## <a name="related-topics"></a><span data-ttu-id="18691-246">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="18691-246">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="18691-247">Pipeline graphique</span><span class="sxs-lookup"><span data-stu-id="18691-247">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> </dl>

 

