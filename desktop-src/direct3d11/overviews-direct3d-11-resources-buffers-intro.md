---
title: Présentation des mémoires tampons dans Direct3D 11
description: Une ressource de mémoire tampon est une collection de données entièrement typées regroupées en éléments.
ms.assetid: e33ca01e-f13c-4f91-b0db-2b2bc6b4fd8f
keywords:
- mémoire tampon constante, présentation
- mémoire tampon de vertex, présentation
- mémoire tampon d’index, présentation
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 241ade0721ae87b1371586bc901ee18f8975b53f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104315450"
---
# <a name="introduction-to-buffers-in-direct3d-11"></a><span data-ttu-id="60d84-106">Présentation des mémoires tampons dans Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="60d84-106">Introduction to Buffers in Direct3D 11</span></span>

<span data-ttu-id="60d84-107">Une ressource de mémoire tampon est une collection de données entièrement typées regroupées en éléments.</span><span class="sxs-lookup"><span data-stu-id="60d84-107">A buffer resource is a collection of fully typed data grouped into elements.</span></span> <span data-ttu-id="60d84-108">Vous pouvez utiliser des mémoires tampons pour stocker un large éventail de données, notamment des vecteurs de position, des vecteurs normaux, des coordonnées de texture dans une mémoire tampon de vertex, des index dans une mémoire tampon d’index ou un état de périphérique.</span><span class="sxs-lookup"><span data-stu-id="60d84-108">You can use buffers to store a wide variety of data, including position vectors, normal vectors, texture coordinates in a vertex buffer, indexes in an index buffer, or device state.</span></span> <span data-ttu-id="60d84-109">Un élément buffer est constitué de 1 à 4 composants.</span><span class="sxs-lookup"><span data-stu-id="60d84-109">A buffer element is made up of 1 to 4 components.</span></span> <span data-ttu-id="60d84-110">Les éléments de mémoire tampon peuvent inclure des valeurs de données compressées (telles que des valeurs de surface R8G8B8A8), des entiers 8 bits uniques ou des valeurs à virgule flottante 4 32 bits.</span><span class="sxs-lookup"><span data-stu-id="60d84-110">Buffer elements can include packed data values (like R8G8B8A8 surface values), single 8-bit integers, or four 32-bit floating point values.</span></span>

<span data-ttu-id="60d84-111">Une mémoire tampon est créée en tant que ressource non structurée.</span><span class="sxs-lookup"><span data-stu-id="60d84-111">A buffer is created as an unstructured resource.</span></span> <span data-ttu-id="60d84-112">Étant donné qu’elle n’est pas structurée, une mémoire tampon ne peut pas contenir de niveaux de mipmap, elle ne peut pas être filtrée lors de la lecture et elle ne peut pas être multiéchantillonnée.</span><span class="sxs-lookup"><span data-stu-id="60d84-112">Because it is unstructured, a buffer cannot contain any mipmap levels, it cannot get filtered when read, and it cannot be multisampled.</span></span>

## <a name="buffer-types"></a><span data-ttu-id="60d84-113">Types de mémoires tampons</span><span class="sxs-lookup"><span data-stu-id="60d84-113">Buffer Types</span></span>

<span data-ttu-id="60d84-114">Voici les types de ressources de mémoire tampon pris en charge par Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="60d84-114">The following are the buffer resource types supported by Direct3D 11.</span></span> <span data-ttu-id="60d84-115">Tous les types de mémoires tampons sont encapsulés par l’interface [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) .</span><span class="sxs-lookup"><span data-stu-id="60d84-115">All buffer types are encapsulated by the [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) interface.</span></span>

-   [<span data-ttu-id="60d84-116">Mémoire tampon de vertex</span><span class="sxs-lookup"><span data-stu-id="60d84-116">Vertex Buffer</span></span>](#vertex-buffer)
-   [<span data-ttu-id="60d84-117">Mémoire tampon d’index</span><span class="sxs-lookup"><span data-stu-id="60d84-117">Index Buffer</span></span>](#index-buffer)
-   [<span data-ttu-id="60d84-118">Mémoire tampon constante</span><span class="sxs-lookup"><span data-stu-id="60d84-118">Constant Buffer</span></span>](#constant-buffer)

### <a name="vertex-buffer"></a><span data-ttu-id="60d84-119">Mémoire tampon de vertex</span><span class="sxs-lookup"><span data-stu-id="60d84-119">Vertex Buffer</span></span>

<span data-ttu-id="60d84-120">Une mémoire tampon de vertex contient les données de vertex utilisées pour définir votre géométrie.</span><span class="sxs-lookup"><span data-stu-id="60d84-120">A vertex buffer contains the vertex data used to define your geometry.</span></span> <span data-ttu-id="60d84-121">Les données de vertex incluent les coordonnées de position, les données de couleur, les données de coordonnées de texture, les données normales, etc.</span><span class="sxs-lookup"><span data-stu-id="60d84-121">Vertex data includes position coordinates, color data, texture coordinate data, normal data, and so on.</span></span>

<span data-ttu-id="60d84-122">L’exemple le plus simple d’une mémoire tampon de vertex est celui qui contient uniquement des données de position.</span><span class="sxs-lookup"><span data-stu-id="60d84-122">The simplest example of a vertex buffer is one that only contains position data.</span></span> <span data-ttu-id="60d84-123">Il peut être visualisé comme dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="60d84-123">It can be visualized like the following illustration.</span></span>

![illustration d’une mémoire tampon de vertex qui contient des données de position](images/d3d10-resources-single-element-vb2.png)

<span data-ttu-id="60d84-125">Plus souvent, une mémoire tampon de vertex contient toutes les données nécessaires pour spécifier entièrement les sommets 3D.</span><span class="sxs-lookup"><span data-stu-id="60d84-125">More often, a vertex buffer contains all the data needed to fully specify 3D vertices.</span></span> <span data-ttu-id="60d84-126">Par exemple, il peut s’agir d’une mémoire tampon de vertex qui contient la position par vertex, les coordonnées normales et de texture.</span><span class="sxs-lookup"><span data-stu-id="60d84-126">An example of this could be a vertex buffer that contains per-vertex position, normal and texture coordinates.</span></span> <span data-ttu-id="60d84-127">Ces données sont généralement organisées sous la forme d’ensembles d’éléments par vertex, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="60d84-127">This data is usually organized as sets of per-vertex elements, as shown in the following illustration.</span></span>

![illustration d’une mémoire tampon de vertex qui contient la position, la normale et les données de texture](images/d3d10-vertex-buffer-element.png)

<span data-ttu-id="60d84-129">Cette mémoire tampon de vertex contient des données par vertex ; chaque vertex stocke trois éléments (coordonnées de position, normale et de texture).</span><span class="sxs-lookup"><span data-stu-id="60d84-129">This vertex buffer contains per-vertex data; each vertex stores three elements (position, normal, and texture coordinates).</span></span> <span data-ttu-id="60d84-130">La position et la normale sont généralement spécifiées à l’aide des valeurs float 3 32 bits (DXGI \_ format \_ R32G32B32 \_ float) et des coordonnées de texture utilisant des valeurs float 2 32 bits (dxgi \_ format \_ R32G32 \_ float).</span><span class="sxs-lookup"><span data-stu-id="60d84-130">The position and normal are each typically specified using three 32-bit floats (DXGI\_FORMAT\_R32G32B32\_FLOAT) and the texture coordinates using two 32-bit floats (DXGI\_FORMAT\_R32G32\_FLOAT).</span></span>

<span data-ttu-id="60d84-131">Pour accéder aux données à partir d’une mémoire tampon de vertex, vous devez connaître le vertex auquel accéder, ainsi que les paramètres de mémoire tampon supplémentaires suivants :</span><span class="sxs-lookup"><span data-stu-id="60d84-131">To access data from a vertex buffer you need to know which vertex to access, plus the following additional buffer parameters:</span></span>

-   <span data-ttu-id="60d84-132">Offset : nombre d’octets à partir du début de la mémoire tampon vers les données du premier vertex.</span><span class="sxs-lookup"><span data-stu-id="60d84-132">Offset - the number of bytes from the start of the buffer to the data for the first vertex.</span></span> <span data-ttu-id="60d84-133">Vous pouvez spécifier le décalage à l’aide de la méthode [**ID3D11DeviceContext :: IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) .</span><span class="sxs-lookup"><span data-stu-id="60d84-133">You can specify the offset using the [**ID3D11DeviceContext::IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) method.</span></span>
-   <span data-ttu-id="60d84-134">BaseVertexLocation-nombre d’octets entre le décalage et le premier vertex utilisé par l’appel de dessin approprié.</span><span class="sxs-lookup"><span data-stu-id="60d84-134">BaseVertexLocation - the number of bytes from the offset to the first vertex used by the appropriate draw call.</span></span>

<span data-ttu-id="60d84-135">Avant de créer une mémoire tampon de vertex, vous devez définir sa disposition en créant une interface [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) ; pour ce faire, appelez la méthode [**ID3D11Device :: CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) .</span><span class="sxs-lookup"><span data-stu-id="60d84-135">Before you create a vertex buffer, you need to define its layout by creating an [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) interface; this is done by calling the [**ID3D11Device::CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) method.</span></span> <span data-ttu-id="60d84-136">Une fois l’objet de disposition d’entrée créé, vous pouvez le lier à l’étape assembleur d’entrée en appelant [**ID3D11DeviceContext :: IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span><span class="sxs-lookup"><span data-stu-id="60d84-136">After the input-layout object is created, you can bind it to the input-assembler stage by calling the [**ID3D11DeviceContext::IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span></span>

<span data-ttu-id="60d84-137">Pour créer une mémoire tampon de vertex, appelez [**ID3D11Device :: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="60d84-137">To create a vertex buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="index-buffer"></a><span data-ttu-id="60d84-138">Mémoire tampon d’index</span><span class="sxs-lookup"><span data-stu-id="60d84-138">Index Buffer</span></span>

<span data-ttu-id="60d84-139">Les tampons d’index contiennent des décalages d’entiers dans les mémoires tampons de vertex et sont utilisés pour restituer les primitives plus efficacement.</span><span class="sxs-lookup"><span data-stu-id="60d84-139">Index buffers contain integer offsets into vertex buffers and are used to render primitives more efficiently.</span></span> <span data-ttu-id="60d84-140">Une mémoire tampon d’index contient un ensemble séquentiel d’index 16 bits ou 32 bits ; chaque index est utilisé pour identifier un vertex dans une mémoire tampon de vertex.</span><span class="sxs-lookup"><span data-stu-id="60d84-140">An index buffer contains a sequential set of 16-bit or 32-bit indices; each index is used to identify a vertex in a vertex buffer.</span></span> <span data-ttu-id="60d84-141">Un tampon d’index peut être visualisé comme dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="60d84-141">An index buffer can be visualized like the following illustration.</span></span>

![illustration d’un tampon d’index](images/d3d10-index-buffer.png)

<span data-ttu-id="60d84-143">Les index séquentiels stockés dans une mémoire tampon d’index se trouvent avec les paramètres suivants :</span><span class="sxs-lookup"><span data-stu-id="60d84-143">The sequential indices stored in an index buffer are located with the following parameters:</span></span>

-   <span data-ttu-id="60d84-144">Offset-nombre d’octets à partir de l’adresse de base de la mémoire tampon d’index.</span><span class="sxs-lookup"><span data-stu-id="60d84-144">Offset - the number of bytes from the base address of the index buffer.</span></span> <span data-ttu-id="60d84-145">Le décalage est fourni à la méthode [**ID3D11DeviceContext :: IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) .</span><span class="sxs-lookup"><span data-stu-id="60d84-145">The offset is supplied to the [**ID3D11DeviceContext::IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) method.</span></span>
-   <span data-ttu-id="60d84-146">StartIndexLocation : spécifie le premier élément de mémoire tampon d’index à partir de l’adresse de base et l’offset fourni dans [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span><span class="sxs-lookup"><span data-stu-id="60d84-146">StartIndexLocation - specifies the first index buffer element from the base address and the offset provided in [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span></span> <span data-ttu-id="60d84-147">L’emplacement de départ est fourni à la méthode [**ID3D11DeviceContext ::D rawindexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) ou [**ID3D11DeviceContext ::D rawindexedinstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) et représente le premier index à restituer.</span><span class="sxs-lookup"><span data-stu-id="60d84-147">The start location is supplied to the [**ID3D11DeviceContext::DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) or [**ID3D11DeviceContext::DrawIndexedInstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) method and represents the first index to render.</span></span>
-   <span data-ttu-id="60d84-148">IndexCount-nombre d’index à afficher.</span><span class="sxs-lookup"><span data-stu-id="60d84-148">IndexCount - the number of indices to render.</span></span> <span data-ttu-id="60d84-149">Le nombre est fourni à la méthode [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed)</span><span class="sxs-lookup"><span data-stu-id="60d84-149">The number is supplied to the [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) method</span></span>

<span data-ttu-id="60d84-150">Début de la mémoire tampon d’index = adresse de base du tampon d’index + décalage (octets) + StartIndexLocation \* (octets);</span><span class="sxs-lookup"><span data-stu-id="60d84-150">Start of Index Buffer = Index Buffer Base Address + Offset (bytes) + StartIndexLocation \* ElementSize (bytes);</span></span>

<span data-ttu-id="60d84-151">Dans ce calcul, la valeur d’élément est la taille de chaque élément de mémoire tampon d’index, soit deux ou quatre octets.</span><span class="sxs-lookup"><span data-stu-id="60d84-151">In this calculation, ElementSize is the size of each index buffer element, which is either two or four bytes.</span></span>

<span data-ttu-id="60d84-152">Pour créer un tampon d’index, appelez [**ID3D11Device :: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="60d84-152">To create an index buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="constant-buffer"></a><span data-ttu-id="60d84-153">Mémoire tampon constante</span><span class="sxs-lookup"><span data-stu-id="60d84-153">Constant Buffer</span></span>

<span data-ttu-id="60d84-154">Une mémoire tampon constante vous permet de fournir efficacement des données de constantes de nuanceur au pipeline.</span><span class="sxs-lookup"><span data-stu-id="60d84-154">A constant buffer allows you to efficiently supply shader constants data to the pipeline.</span></span> <span data-ttu-id="60d84-155">Vous pouvez utiliser une mémoire tampon constante pour stocker les résultats de l’étape de flux de sortie.</span><span class="sxs-lookup"><span data-stu-id="60d84-155">You can use a constant buffer to store the results of the stream-output stage.</span></span> <span data-ttu-id="60d84-156">Conceptuellement, une mémoire tampon constante ressemble à une mémoire tampon de vertex à un seul élément, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="60d84-156">Conceptually, a constant buffer looks just like a single-element vertex buffer, as shown in the following illustration.</span></span>

![illustration d’une mémoire tampon de nuanceur constante](images/d3d10-shader-resource-buffer.png)

<span data-ttu-id="60d84-158">Chaque élément stocke une constante composant de 1 à 4, déterminée par le format des données stockées.</span><span class="sxs-lookup"><span data-stu-id="60d84-158">Each element stores a 1-to-4 component constant, determined by the format of the data stored.</span></span> <span data-ttu-id="60d84-159">Pour créer une mémoire tampon de nuanceur constante, appelez [**ID3D11Device :: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) et spécifiez le membre de la **\_ \_ \_ mémoire tampon constante de liaison d3d11** du type énuméré de l' [**\_ \_ indicateur de liaison d3d11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) .</span><span class="sxs-lookup"><span data-stu-id="60d84-159">To create a shader-constant buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) and specify the **D3D11\_BIND\_CONSTANT\_BUFFER** member of the [**D3D11\_BIND\_FLAG**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) enumerated type.</span></span>

<span data-ttu-id="60d84-160">Une mémoire tampon constante ne peut utiliser qu’un seul indicateur de liaison (d3d11 de la **\_ \_ \_ mémoire tampon constante**), qui ne peut pas être combiné avec un autre indicateur de liaison.</span><span class="sxs-lookup"><span data-stu-id="60d84-160">A constant buffer can only use a single bind flag (**D3D11\_BIND\_CONSTANT\_BUFFER**), which cannot be combined with any other bind flag.</span></span> <span data-ttu-id="60d84-161">Pour lier une mémoire tampon de nuanceur constante au pipeline, appelez l’une des méthodes suivantes : [**ID3D11DeviceContext :: GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**ID3D11DeviceContext ::P ssetconstantbuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers)ou [**ID3D11DeviceContext :: VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span><span class="sxs-lookup"><span data-stu-id="60d84-161">To bind a shader-constant buffer to the pipeline, call one of the following methods: [**ID3D11DeviceContext::GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**ID3D11DeviceContext::PSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers), or [**ID3D11DeviceContext::VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span></span>

<span data-ttu-id="60d84-162">Pour lire une mémoire tampon de nuanceur constante à partir d’un nuanceur, utilisez une fonction de chargement HLSL (par exemple, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span><span class="sxs-lookup"><span data-stu-id="60d84-162">To read a shader-constant buffer from a shader, use a HLSL load function (for example, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span></span> <span data-ttu-id="60d84-163">Chaque étape de nuanceur autorise jusqu’à 15 mémoires tampons constantes de nuanceur ; chaque mémoire tampon peut contenir jusqu’à 4096 constantes.</span><span class="sxs-lookup"><span data-stu-id="60d84-163">Each shader stage allows up to 15 shader-constant buffers; each buffer can hold up to 4096 constants.</span></span>

## <a name="related-topics"></a><span data-ttu-id="60d84-164">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="60d84-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="60d84-165">Mémoires tampons</span><span class="sxs-lookup"><span data-stu-id="60d84-165">Buffers</span></span>](overviews-direct3d-11-resources-buffers.md)
</dt> </dl>

 

 