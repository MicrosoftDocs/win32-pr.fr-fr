---
title: Rendu immédiat et différé
description: Direct3D 11 prend en charge deux types de rendu immédiats et différés. Les deux sont implémentés à l’aide de l’interface ID3D11DeviceContext.
ms.assetid: 8991be9f-c882-4752-9048-704fe4ae1725
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef954a8e794755e1405c8e1e07505a5f39189b03
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104990633"
---
# <a name="immediate-and-deferred-rendering"></a><span data-ttu-id="d5e55-104">Rendu immédiat et différé</span><span class="sxs-lookup"><span data-stu-id="d5e55-104">Immediate and Deferred Rendering</span></span>

<span data-ttu-id="d5e55-105">Direct3D 11 prend en charge deux types de rendu : immédiat et différé.</span><span class="sxs-lookup"><span data-stu-id="d5e55-105">Direct3D 11 supports two types of rendering: immediate and deferred.</span></span> <span data-ttu-id="d5e55-106">Les deux sont implémentés à l’aide de l’interface [**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext) .</span><span class="sxs-lookup"><span data-stu-id="d5e55-106">Both are implemented by using the [**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext) interface.</span></span>

## <a name="immediate-rendering"></a><span data-ttu-id="d5e55-107">Rendu immédiat</span><span class="sxs-lookup"><span data-stu-id="d5e55-107">Immediate Rendering</span></span>

<span data-ttu-id="d5e55-108">Le rendu immédiat fait référence à l’appel d’API ou de commandes de rendu à partir d’un appareil, qui met en file d’attente les commandes dans une mémoire tampon pour l’exécution sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="d5e55-108">Immediate rendering refers to calling rendering APIs or commands from a device, which queues the commands in a buffer for execution on the GPU.</span></span> <span data-ttu-id="d5e55-109">Utilisez un contexte immédiat pour le rendu, la définition de l’état du pipeline et la lecture d’une liste de commandes.</span><span class="sxs-lookup"><span data-stu-id="d5e55-109">Use an immediate context to render, set pipeline state, and play back a command list.</span></span>

<span data-ttu-id="d5e55-110">Créez un contexte immédiat à l’aide de [**D3D11CreateDevice**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdevice) ou [**D3D11CreateDeviceAndSwapChain**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdeviceandswapchain).</span><span class="sxs-lookup"><span data-stu-id="d5e55-110">Create an immediate context using [**D3D11CreateDevice**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdevice) or [**D3D11CreateDeviceAndSwapChain**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdeviceandswapchain).</span></span>

## <a name="deferred-rendering"></a><span data-ttu-id="d5e55-111">Rendu différé</span><span class="sxs-lookup"><span data-stu-id="d5e55-111">Deferred Rendering</span></span>

<span data-ttu-id="d5e55-112">Le rendu différé enregistre les commandes graphiques dans une mémoire tampon de commande afin qu’elles puissent être lues à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="d5e55-112">Deferred rendering records graphics commands in a command buffer so that they can be played back at some other time.</span></span> <span data-ttu-id="d5e55-113">Utilisez un contexte différé pour enregistrer les commandes (rendu et paramètre d’État) dans une liste de commandes.</span><span class="sxs-lookup"><span data-stu-id="d5e55-113">Use a deferred context to record commands (rendering as well as state setting) to a command list.</span></span> <span data-ttu-id="d5e55-114">Le rendu différé est un nouveau concept dans Direct3D 11. le rendu différé est conçu pour prendre en charge le rendu sur un thread lors de l’enregistrement de commandes de rendu sur des threads supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="d5e55-114">Deferred rendering is a new concept in Direct3D 11; deferred rendering is designed to support rendering on one thread while recording commands for rendering on additional threads.</span></span> <span data-ttu-id="d5e55-115">Cette stratégie multithread parallèle vous permet de diviser des scènes complexes en tâches simultanées.</span><span class="sxs-lookup"><span data-stu-id="d5e55-115">This parallel, multithread strategy allows you to break up complex scenes into concurrent tasks.</span></span> <span data-ttu-id="d5e55-116">Pour plus d’informations sur le rendu des scènes complexes, consultez [rendu à plusieurs passes](overviews-direct3d-11-render-multipass.md).</span><span class="sxs-lookup"><span data-stu-id="d5e55-116">For more information about rendering complex scenes, see [Multiple-Pass Rendering](overviews-direct3d-11-render-multipass.md).</span></span>

<span data-ttu-id="d5e55-117">Créez un contexte différé à l’aide de [**ID3D11Device :: CreateDeferredContext**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdeferredcontext).</span><span class="sxs-lookup"><span data-stu-id="d5e55-117">Create a deferred context using [**ID3D11Device::CreateDeferredContext**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdeferredcontext).</span></span>

<span data-ttu-id="d5e55-118">Direct3D génère une surcharge de rendu lorsqu’il met en file d’attente des commandes dans le tampon de commande.</span><span class="sxs-lookup"><span data-stu-id="d5e55-118">Direct3D generates rendering overhead when it queues up commands in the command buffer.</span></span> <span data-ttu-id="d5e55-119">En revanche, une [liste de commandes](overviews-direct3d-11-render-multi-thread-command-list.md) s’exécute bien plus efficacement pendant la lecture.</span><span class="sxs-lookup"><span data-stu-id="d5e55-119">In contrast, a [command list](overviews-direct3d-11-render-multi-thread-command-list.md) executes much more efficiently during playback.</span></span> <span data-ttu-id="d5e55-120">Pour utiliser une liste de commandes, enregistrez les commandes de rendu avec un contexte différé et lisez-les à l’aide d’un contexte immédiat.</span><span class="sxs-lookup"><span data-stu-id="d5e55-120">To use a command list, record rendering commands with a deferred context and play them back using an immediate context.</span></span>

<span data-ttu-id="d5e55-121">Vous ne pouvez générer qu’une seule liste de commandes en mode monothread.</span><span class="sxs-lookup"><span data-stu-id="d5e55-121">You can generate only a single command list in a single-threaded fashion.</span></span> <span data-ttu-id="d5e55-122">Toutefois, vous pouvez créer et utiliser plusieurs contextes différés simultanément, chacun dans un thread séparé.</span><span class="sxs-lookup"><span data-stu-id="d5e55-122">However, you can create and use multiple deferred contexts simultaneously, each in a separate thread.</span></span> <span data-ttu-id="d5e55-123">Ensuite, vous pouvez utiliser ces plusieurs contextes différés pour créer simultanément plusieurs listes de commandes.</span><span class="sxs-lookup"><span data-stu-id="d5e55-123">Then, you can use those multiple deferred contexts to simultaneously create multiple command lists.</span></span>

<span data-ttu-id="d5e55-124">Vous ne pouvez pas lire deux ou plusieurs listes de commandes simultanément sur le contexte immédiat.</span><span class="sxs-lookup"><span data-stu-id="d5e55-124">You cannot play back two or more command lists simultaneously on the immediate context.</span></span>

<span data-ttu-id="d5e55-125">Pour déterminer si un contexte de périphérique est un contexte immédiat ou différé, appelez [**ID3D11DeviceContext :: GetType**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gettype).</span><span class="sxs-lookup"><span data-stu-id="d5e55-125">To determine if a device context is an immediate or a deferred context, call [**ID3D11DeviceContext::GetType**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gettype).</span></span>

<span data-ttu-id="d5e55-126">La méthode [**ID3D11DeviceContext :: Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) est uniquement prise en charge dans un contexte différé pour les ressources dynamiques ([**\_ utilisation \_ dynamique d3d11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_usage)) où le premier appel dans la liste de commandes est [**d3d11 \_ mappage d' \_ écriture \_ ignorée**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_map).</span><span class="sxs-lookup"><span data-stu-id="d5e55-126">The [**ID3D11DeviceContext::Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) method is only supported in a deferred context for dynamic resources ([**D3D11\_USAGE\_DYNAMIC**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_usage)) where the first call within the command list is [**D3D11\_MAP\_WRITE\_DISCARD**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_map).</span></span> <span data-ttu-id="d5e55-127">**D3d11 \_ Le mappage d' \_ écriture \_ sans \_** remplacement est pris en charge lors des appels suivants, s’ils sont disponibles pour le type de ressource donné.</span><span class="sxs-lookup"><span data-stu-id="d5e55-127">**D3D11\_MAP\_WRITE\_NO\_OVERWRITE** is supported on subsequent calls if available for the given type of resource.</span></span>

<span data-ttu-id="d5e55-128">Les requêtes dans un contexte différé sont limitées à la génération de données et au dessin prédicat.</span><span class="sxs-lookup"><span data-stu-id="d5e55-128">Queries in a deferred context are limited to data generation and predicated drawing.</span></span> <span data-ttu-id="d5e55-129">Vous ne pouvez pas appeler [**ID3D11DeviceContext :: GetData**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-getdata) sur un contexte différé pour obtenir des données sur une requête ; vous pouvez uniquement appeler **GetData** dans le contexte immédiat pour obtenir des données sur une requête.</span><span class="sxs-lookup"><span data-stu-id="d5e55-129">You cannot call [**ID3D11DeviceContext::GetData**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-getdata) on a deferred context to get data about a query; you can only call **GetData** on the immediate context to get data about a query.</span></span> <span data-ttu-id="d5e55-130">Vous pouvez définir un prédicat de rendu (un type de requête) en appelant [**D3D11DeviceContext :: SetPredication**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-setpredication) pour utiliser les résultats de requête sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="d5e55-130">You can set a rendering predicate (a type of query) by calling [**D3D11DeviceContext::SetPredication**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-setpredication) to use query results on the GPU.</span></span> <span data-ttu-id="d5e55-131">Vous pouvez générer des données de requête par le biais d’appels à [**ID3D11DeviceContext :: Begin**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-begin) et [**ID3D11DeviceContext :: end**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-end).</span><span class="sxs-lookup"><span data-stu-id="d5e55-131">You can generate query data through calls to [**ID3D11DeviceContext::Begin**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-begin) and [**ID3D11DeviceContext::End**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-end).</span></span> <span data-ttu-id="d5e55-132">Toutefois, les données de requête ne sont pas disponibles tant que vous n’avez pas appelé [**ID3D11DeviceContext :: ExecuteCommandList**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-executecommandlist) dans le contexte immédiat pour envoyer la liste de commandes de contexte différée.</span><span class="sxs-lookup"><span data-stu-id="d5e55-132">However, the query data will not be available until you call [**ID3D11DeviceContext::ExecuteCommandList**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-executecommandlist) on the immediate context to submit the deferred context command list.</span></span> <span data-ttu-id="d5e55-133">Les données de la requête sont ensuite traitées par le GPU.</span><span class="sxs-lookup"><span data-stu-id="d5e55-133">The query data is then processed by the GPU.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d5e55-134">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="d5e55-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d5e55-135">Traitement multithread</span><span class="sxs-lookup"><span data-stu-id="d5e55-135">Multithreading</span></span>](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 




