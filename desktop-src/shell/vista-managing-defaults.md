---
description: Cette rubrique fournit aux éditeurs de logiciels indépendants un guide rapide sur les étapes nécessaires pour inscrire et gérer les valeurs par défaut des applications dans Windows Vista et versions ultérieures. Des liens sont fournis vers des articles plus détaillés sur la rubrique de chaque section.
ms.assetid: 649eb20d-07d3-4209-abff-45fc50f05631
title: Gestion des applications par défaut
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bc146858d197b96229edda49ac2e7249db51bf4c
ms.sourcegitcommit: 4d639170c06864e47ef66b2cfe6ca3d07cce0b02
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/12/2021
ms.locfileid: "109812824"
---
# <a name="managing-default-applications"></a><span data-ttu-id="8640a-104">Gestion des applications par défaut</span><span class="sxs-lookup"><span data-stu-id="8640a-104">Managing Default Applications</span></span>

<span data-ttu-id="8640a-105">La fonctionnalité **définir l’accès aux programmes et les paramètres par défaut** de l’ordinateur (SPAD) a été ajoutée à Windows XP et aux versions ultérieures de Windows pour gérer les paramètres par défaut des ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="8640a-105">The **Set Program Access and Computer Defaults** (SPAD) feature was added to Windows XP and later versions of Windows to manage per-computer defaults.</span></span> <span data-ttu-id="8640a-106">En plus de la fonction SPAD, Windows Vista a introduit le concept d’applications par défaut par utilisateur et l’élément **programmes par défaut** dans le panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="8640a-106">In addition to SPAD, Windows Vista introduced the concept of per-user default applications and the **Default Programs** item in Control Panel.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8640a-107">Cette rubrique ne s’applique pas à Windows 10.</span><span class="sxs-lookup"><span data-stu-id="8640a-107">This topic does not apply for Windows 10.</span></span> <span data-ttu-id="8640a-108">Le mode de fonctionnement des associations de fichiers par défaut dans Windows 10.</span><span class="sxs-lookup"><span data-stu-id="8640a-108">The way that default file associations work changed in Windows 10.</span></span> <span data-ttu-id="8640a-109">Pour plus d’informations, consultez la section sur les **modifications apportées à la façon dont Windows 10 gère les applications par défaut** dans [cette publication](https://blogs.windows.com/windows-insider/2015/05/20/announcing-windows-10-insider-preview-build-10122-for-pcs/).</span><span class="sxs-lookup"><span data-stu-id="8640a-109">For more information, see the section on **Changes to how Windows 10 handles default apps** in [this post](https://blogs.windows.com/windows-insider/2015/05/20/announcing-windows-10-insider-preview-build-10122-for-pcs/).</span></span>

 

<span data-ttu-id="8640a-110">Les paramètres par défaut par utilisateur sont spécifiques à un compte d’utilisateur individuel sur le système.</span><span class="sxs-lookup"><span data-stu-id="8640a-110">Per-user default settings are specific to an individual user account on the system.</span></span> <span data-ttu-id="8640a-111">Si les paramètres par défaut par utilisateur sont présents, ils ont priorité sur les valeurs par défaut correspondant à chaque ordinateur pour ce compte.</span><span class="sxs-lookup"><span data-stu-id="8640a-111">If per-user default settings are present, they take precedence over corresponding per-computer defaults for that account.</span></span> <span data-ttu-id="8640a-112">À compter de Windows 8, le système d’extensibilité pour les valeurs par défaut de type de fichier et de protocole est strictement ignoré par utilisateur et par ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-112">As of Windows 8, the extensibility system for file type and protocol defaults is strictly per-user and per-computer defaults are ignored.</span></span> <span data-ttu-id="8640a-113">La fonction SPAD a également été modifiée dans Windows 8 pour définir les valeurs par défaut par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-113">SPAD also changed in Windows 8 to set per-user defaults.</span></span>

-   <span data-ttu-id="8640a-114">Sur les systèmes exécutant des versions de Windows antérieures à Windows 8, un compte d’utilisateur nouvellement créé reçoit les valeurs par défaut par ordinateur jusqu’à ce que les valeurs par défaut par utilisateur soient établies.</span><span class="sxs-lookup"><span data-stu-id="8640a-114">On systems running versions of Windows earlier than Windows 8, a newly created user account receives per-computer defaults until per-user defaults are established.</span></span> <span data-ttu-id="8640a-115">Dans Windows Vista et versions ultérieures, les utilisateurs peuvent utiliser l’élément **programmes par défaut** dans le panneau de configuration pour définir ou modifier leurs valeurs par défaut par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-115">In Windows Vista and later, users can use the **Default Programs** item in Control Panel to set or change their per-user defaults.</span></span> <span data-ttu-id="8640a-116">En outre, lorsqu’une application est exécutée pour la première fois, les valeurs par défaut par utilisateur peuvent être définies à l’aide des instructions qui suivent dans la section [première exécution et valeurs par défaut](#application-first-run-and-defaults) de l’application.</span><span class="sxs-lookup"><span data-stu-id="8640a-116">In addition, when an application is run for the first time, per-user defaults can be set using the guidelines that follow in the [Application First Run and Defaults](#application-first-run-and-defaults) section.</span></span>
-   <span data-ttu-id="8640a-117">Sur les systèmes exécutant Windows 8, un compte d’utilisateur nouvellement créé s’appuie sur les valeurs par défaut par utilisateur à partir du début et le paramètre de ces valeurs par défaut lors de la première exécution, comme expliqué dans la [première exécution de l’application, et la section valeurs par défaut](#application-first-run-and-defaults) n’est plus prise en charge.</span><span class="sxs-lookup"><span data-stu-id="8640a-117">On systems running Windows 8, a newly created user account relies on per-user defaults from the start and the setting of those defaults on first run as explained in the [Application First Run and Defaults](#application-first-run-and-defaults) section is no longer supported.</span></span>

<span data-ttu-id="8640a-118">Une application doit s’inscrire avec SPAD et la fonctionnalité programmes par défaut pour être proposée comme programme par défaut dans Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="8640a-118">An application must register with both SPAD and the Default Programs feature to be offered as the default program in Windows Vista and later.</span></span>

<span data-ttu-id="8640a-119">Cette rubrique fournit aux éditeurs de logiciels indépendants un guide rapide sur les étapes nécessaires pour inscrire et gérer les valeurs par défaut des applications dans Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="8640a-119">This topic provides independent software vendors (ISVs) with a quick guide to the steps necessary to register and manage application defaults in Windows Vista and later.</span></span> <span data-ttu-id="8640a-120">Des liens sont fournis vers des articles plus détaillés sur la rubrique de chaque section.</span><span class="sxs-lookup"><span data-stu-id="8640a-120">Links are provided to more in-depth articles about each section's topic.</span></span>

-   [<span data-ttu-id="8640a-121">Élément programmes par défaut dans le panneau de configuration</span><span class="sxs-lookup"><span data-stu-id="8640a-121">Default Programs Item in Control Panel</span></span>](#default-programs-item-in-control-panel)
-   [<span data-ttu-id="8640a-122">Définir les paramètres par défaut de l’accès aux programmes et de l’ordinateur</span><span class="sxs-lookup"><span data-stu-id="8640a-122">Set Program Access and Computer Defaults</span></span>](#set-program-access-and-computer-defaults)
    -   [<span data-ttu-id="8640a-123">Définition des valeurs par défaut dans SPAD</span><span class="sxs-lookup"><span data-stu-id="8640a-123">Setting Defaults in SPAD</span></span>](#setting-defaults-in-spad)
    -   [<span data-ttu-id="8640a-124">Masquer l’accès dans SPAD</span><span class="sxs-lookup"><span data-stu-id="8640a-124">Hide Access in SPAD</span></span>](#hide-access-in-spad)
-   [<span data-ttu-id="8640a-125">Inscription pour les points d’entrée de l’application</span><span class="sxs-lookup"><span data-stu-id="8640a-125">Registering for Application Entry Points</span></span>](#registering-for-application-entry-points)
    -   [<span data-ttu-id="8640a-126">Ouvrir avec</span><span class="sxs-lookup"><span data-stu-id="8640a-126">Open With</span></span>](#open-with)
    -   [<span data-ttu-id="8640a-127">Menu Démarrer et barre lancement rapide</span><span class="sxs-lookup"><span data-stu-id="8640a-127">Start Menu and Quick Launch Bar</span></span>](#start-menu-and-quick-launch-bar)
-   [<span data-ttu-id="8640a-128">Installation et paramètres par défaut de l’application</span><span class="sxs-lookup"><span data-stu-id="8640a-128">Application Installation and Defaults</span></span>](#application-installation-and-defaults)
-   [<span data-ttu-id="8640a-129">Mises à niveau et valeurs par défaut de l’application</span><span class="sxs-lookup"><span data-stu-id="8640a-129">Application Upgrades and Defaults</span></span>](#application-upgrades-and-defaults)
-   [<span data-ttu-id="8640a-130">Première exécution de l’application et valeurs par défaut</span><span class="sxs-lookup"><span data-stu-id="8640a-130">Application First Run and Defaults</span></span>](#application-first-run-and-defaults)
-   [<span data-ttu-id="8640a-131">Vérification des valeurs par défaut et demande de consentement de l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="8640a-131">Verifying Defaults and Asking for User Consent</span></span>](#verifying-defaults-and-asking-for-user-consent)
-   [<span data-ttu-id="8640a-132">Conseils de compatibilité des applications</span><span class="sxs-lookup"><span data-stu-id="8640a-132">Application Compatibility Tips</span></span>](#application-compatibility-tips)
    -   [<span data-ttu-id="8640a-133">Éviter le déclenchement de la virtualisation Per-User</span><span class="sxs-lookup"><span data-stu-id="8640a-133">Avoid Triggering Per-User Virtualization</span></span>](#avoid-triggering-per-user-virtualization)
    -   [<span data-ttu-id="8640a-134">Éviter les avertissements ou les blocs AppCompat de l’Assistant Compatibilité des programmes</span><span class="sxs-lookup"><span data-stu-id="8640a-134">Avoid AppCompat Warnings or Blocks from the Program Compatibility Assistant</span></span>](#avoid-appcompat-warnings-or-blocks-from-the-program-compatibility-assistant)
    -   [<span data-ttu-id="8640a-135">Prise en charge des versions précédentes du système d’exploitation Windows</span><span class="sxs-lookup"><span data-stu-id="8640a-135">Support for Previous Windows Operating System Versions</span></span>](#support-for-previous-windows-operating-system-versions)
-   [<span data-ttu-id="8640a-136">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="8640a-136">Additional Resources</span></span>](#additional-resources)
-   [<span data-ttu-id="8640a-137">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="8640a-137">Related topics</span></span>](#related-topics)

## <a name="default-programs-item-in-control-panel"></a><span data-ttu-id="8640a-138">Élément programmes par défaut dans le panneau de configuration</span><span class="sxs-lookup"><span data-stu-id="8640a-138">Default Programs Item in Control Panel</span></span>

<span data-ttu-id="8640a-139">Les **programmes par défaut** sont une fonctionnalité introduite dans Windows Vista, accessible directement à partir du menu **Démarrer** et du panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="8640a-139">**Default Programs** is a feature introduced in Windows Vista, accessible directly from the **Start** menu as well as Control Panel.</span></span> <span data-ttu-id="8640a-140">Il fournit une nouvelle infrastructure qui fonctionne avec un privilège d’utilisateur standard (non élevé) et est conçu pour permettre aux utilisateurs et aux applications de gérer les valeurs par défaut par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-140">It provides a new infrastructure that works with standard user privilege (not elevated) and is designed to enable users and applications to manage per-user defaults.</span></span> <span data-ttu-id="8640a-141">Pour les utilisateurs, les programmes par défaut offrent un moyen unifié et facilement accessible pour gérer les valeurs par défaut, les associations de fichiers et les paramètres d’exécution automatique sur toutes les applications du système.</span><span class="sxs-lookup"><span data-stu-id="8640a-141">For users, Default Programs provides a unified and easily accessible way to manage defaults, file associations, and Autoplay settings across all applications on the system.</span></span> <span data-ttu-id="8640a-142">Pour les applications, l’utilisation de l’étendue par utilisateur fournie par les API des programmes par défaut offre les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="8640a-142">For applications, using the per-user scope provided by the Default Programs APIs offers the following advantages:</span></span>

-   <span data-ttu-id="8640a-143">**Aucune élévation**</span><span class="sxs-lookup"><span data-stu-id="8640a-143">**No Elevation**</span></span>

    <span data-ttu-id="8640a-144">Une application n’a pas besoin d’élever ses privilèges pour revendiquer les valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="8640a-144">An application does not have to elevate its privileges to claim defaults.</span></span>

-   <span data-ttu-id="8640a-145">**Bonne citoyenneté**</span><span class="sxs-lookup"><span data-stu-id="8640a-145">**Good Citizenship**</span></span>

    <span data-ttu-id="8640a-146">Sur un ordinateur à plusieurs utilisateurs, chaque utilisateur peut sélectionner des applications par défaut différentes.</span><span class="sxs-lookup"><span data-stu-id="8640a-146">On a multiple-user computer, each user can select different default applications.</span></span>

-   <span data-ttu-id="8640a-147">**Gestion par défaut**</span><span class="sxs-lookup"><span data-stu-id="8640a-147">**Default Management**</span></span>

    <span data-ttu-id="8640a-148">Les API des programmes par défaut offrent un mécanisme fiable et cohérent pour la vérification automatique de l’État par défaut et la récupération des paramètres perdus sans avoir recours à l’écriture directe dans le registre.</span><span class="sxs-lookup"><span data-stu-id="8640a-148">Default Programs APIs offer a reliable and consistent mechanism for self-checking the default status and reclaiming lost settings without resorting to writing directly to the registry.</span></span> <span data-ttu-id="8640a-149">Toutefois, à compter de Windows 8, nous ne recommandons pas que les applications interrogent l’État par défaut, car une application ne peut plus changer les paramètres par défaut ; ces modifications ne peuvent être effectuées que par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-149">However, as of Windows 8, we do not recommended that applications query the default status because an application can no longer change the default settings—those changes can be made only by the user.</span></span>

<span data-ttu-id="8640a-150">Pour permettre à votre application de gérer efficacement les valeurs par défaut, vous devez inscrire votre application comme programme par défaut potentiel.</span><span class="sxs-lookup"><span data-stu-id="8640a-150">To enable your application to manage defaults effectively, you must register your application as a potential default program.</span></span> <span data-ttu-id="8640a-151">Pour plus d’informations sur l’inscription et l’utilisation des API des programmes par défaut, consultez [programmes par défaut](default-programs.md).</span><span class="sxs-lookup"><span data-stu-id="8640a-151">For details on registering and using the Default Programs APIs, see [Default Programs](default-programs.md).</span></span>

<span data-ttu-id="8640a-152">Les programmes par défaut proposent également les deux fonctionnalités suivantes :</span><span class="sxs-lookup"><span data-stu-id="8640a-152">Default Programs also provides these two features:</span></span>

-   <span data-ttu-id="8640a-153">**Interface utilisateur par défaut réutilisable**</span><span class="sxs-lookup"><span data-stu-id="8640a-153">**Reusable Defaults UI**</span></span>

    <span data-ttu-id="8640a-154">L’interface utilisateur des paramètres par défaut du programme (**définir vos programmes par défaut**) et les associations de fichiers (**associer un type de fichier ou un protocole à un programme**) peuvent être réutilisées et appelées à partir d’une application.</span><span class="sxs-lookup"><span data-stu-id="8640a-154">The UI of both the program defaults (**Set your default programs**) and file associations (**Associate a file type or protocol with a program**) can be reused and called from within an application.</span></span> <span data-ttu-id="8640a-155">Cela permet aux applications de fournir une expérience utilisateur standard pour la gestion des valeurs par défaut et évite aux éditeurs de logiciels indépendants d’avoir à développer une interface utilisateur personnalisée ou équivalente.</span><span class="sxs-lookup"><span data-stu-id="8640a-155">This enables applications to provide a standard user experience for managing defaults and saves ISVs from having to develop a custom or equivalent UI.</span></span>

-   <span data-ttu-id="8640a-156">**Inclusion d’URL et d’informations marketing**</span><span class="sxs-lookup"><span data-stu-id="8640a-156">**Inclusion of URL and Marketing Information**</span></span>

    <span data-ttu-id="8640a-157">Dans le cadre de la page **définir vos programmes par défaut** de l’élément **programmes par défaut** du panneau de configuration, une application peut fournir des informations de marketing et un lien vers le site Web du fournisseur.</span><span class="sxs-lookup"><span data-stu-id="8640a-157">As part of the **Set your default programs** page of the **Default Programs** item in Control Panel, an application can provide marketing information and a link to the vendor's website.</span></span> <span data-ttu-id="8640a-158">Cette URL est dérivée du certificat Authenticode avec lequel l’application a été signée.</span><span class="sxs-lookup"><span data-stu-id="8640a-158">This URL is derived from the Authenticode certificate that the application has been signed with.</span></span> <span data-ttu-id="8640a-159">Cela empêche toute utilisation abusive et le remplacement non autorisé de ce lien.</span><span class="sxs-lookup"><span data-stu-id="8640a-159">This prevents misuse and unauthorized replacement of this link.</span></span> <span data-ttu-id="8640a-160">Si une application possède un certificat Authenticode qui inclut une URL incorporée, l’interface utilisateur Windows affiche cette URL incorporée.</span><span class="sxs-lookup"><span data-stu-id="8640a-160">If an application has an Authenticode certificate that includes an embedded URL, Windows UI displays that embedded URL.</span></span> <span data-ttu-id="8640a-161">Les éditeurs de logiciels indépendants doivent tirer parti de cette fonctionnalité pour diriger les utilisateurs vers leur site Web pour les mises à jour et autres téléchargements.</span><span class="sxs-lookup"><span data-stu-id="8640a-161">ISVs should take advantage of this feature to direct users to their website for updates and other downloads.</span></span>

## <a name="set-program-access-and-computer-defaults"></a><span data-ttu-id="8640a-162">Définir les paramètres par défaut de l’accès aux programmes et de l’ordinateur</span><span class="sxs-lookup"><span data-stu-id="8640a-162">Set Program Access and Computer Defaults</span></span>

<span data-ttu-id="8640a-163">**Définir l’accès aux programmes et les valeurs par défaut de l’ordinateur** (SPAD) permet aux administrateurs de gérer les valeurs par défaut à l’ordinateur qui sont héritées par tous les nouveaux utilisateurs de cet ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-163">**Set Program Access and Computer Defaults** (SPAD) enables administrators to manage computer-wide defaults that are inherited by all new users of that computer.</span></span> <span data-ttu-id="8640a-164">Avant Windows 8, la fonctionnalité SPAD permettait également aux administrateurs de réparer les associations de fichiers si les programmes ont été supprimés du système.</span><span class="sxs-lookup"><span data-stu-id="8640a-164">Prior to Windows 8, SPAD also enabled administrators to repair file associations should they become broken when programs were removed from the system.</span></span> <span data-ttu-id="8640a-165">Toutefois, à compter de Windows 8, la fonction SPAD affecte uniquement les valeurs par défaut spécifiques à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-165">However, as of Windows 8, SPAD affects only user-specific defaults.</span></span>

<span data-ttu-id="8640a-166">Pour plus d’informations sur l’inscription d’une application dans SPAD, consultez [utilisation de l’option définir l’accès aux programmes et les paramètres par défaut de l’ordinateur (SPAD)](cpl-setprogramaccess.md) et [inscription de programmes avec des types de clients](reg-middleware-apps.md).</span><span class="sxs-lookup"><span data-stu-id="8640a-166">For more information on registering an application in SPAD, see [Working with Set Program Access and Computer Defaults (SPAD)](cpl-setprogramaccess.md) and [Registering Programs with Client Types](reg-middleware-apps.md).</span></span> <span data-ttu-id="8640a-167">Des modifications spécifiques et de nouvelles recommandations sont présentées dans les sections qui suivent.</span><span class="sxs-lookup"><span data-stu-id="8640a-167">Specific changes and new recommendations are discussed in the sections that follow.</span></span>

### <a name="setting-defaults-in-spad"></a><span data-ttu-id="8640a-168">Définition des valeurs par défaut dans SPAD</span><span class="sxs-lookup"><span data-stu-id="8640a-168">Setting Defaults in SPAD</span></span>

<span data-ttu-id="8640a-169">Les valeurs par défaut par utilisateur remplacent les valeurs par défaut par ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-169">Per-user defaults override per-computer defaults.</span></span>

-   <span data-ttu-id="8640a-170">**Avant Windows 8**: les valeurs par défaut définies dans SPAD (qui sont par ordinateur) ne sont pas visibles par les utilisateurs si les valeurs par défaut correspondantes par utilisateur sont définies.</span><span class="sxs-lookup"><span data-stu-id="8640a-170">**Before Windows 8**: Defaults set in SPAD (which are per-computer) will not be seen by users if corresponding per-user defaults are set.</span></span> <span data-ttu-id="8640a-171">Si un utilisateur n’a pas défini de valeur par défaut par utilisateur, le système utilise la valeur par défaut de l’ordinateur correspondant.</span><span class="sxs-lookup"><span data-stu-id="8640a-171">If a user has not set a per-user default, the system uses the corresponding computer default.</span></span> <span data-ttu-id="8640a-172">Les nouveaux comptes d’utilisateur sur un ordinateur héritent initialement des paramètres par défaut de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-172">New user accounts on a computer initially inherit the computer defaults.</span></span> <span data-ttu-id="8640a-173">La première fois qu’un utilisateur exécute une application, l’application doit inviter l’utilisateur à affecter ses valeurs par défaut par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-173">The first time a user runs an application, the application should prompt the user to assign their per-user defaults.</span></span> <span data-ttu-id="8640a-174">Consultez [première exécution de l’application et valeurs par défaut](#application-first-run-and-defaults).</span><span class="sxs-lookup"><span data-stu-id="8640a-174">See [Application First Run and Defaults](#application-first-run-and-defaults).</span></span>
-   <span data-ttu-id="8640a-175">**À partir de Windows 8**: toutes les valeurs par défaut sont par utilisateur et les paramètres par défaut par ordinateur sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="8640a-175">**As of Windows 8**: All defaults are per-user and any per-computer default setting is ignored.</span></span> <span data-ttu-id="8640a-176">Les applications ne peuvent plus définir de choix par défaut, de sorte qu’elles ne peuvent pas guider l’utilisateur via l’affectation de ces valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="8640a-176">Applications can no longer set default choices, so they cannot walk the user through their assigning of those defaults.</span></span>

<span data-ttu-id="8640a-177">Quand une application pré-Windows 8 implémente **Set comme valeur par défaut** dans SPAD, ces instructions doivent être suivies :</span><span class="sxs-lookup"><span data-stu-id="8640a-177">When a pre-Windows 8 application implements **Set as Default** in SPAD, these guidelines should be followed:</span></span>

-   <span data-ttu-id="8640a-178">Les applications doivent uniquement revendiquer les paramètres par défaut au niveau de l’ordinateur par le biais de SPAD.</span><span class="sxs-lookup"><span data-stu-id="8640a-178">Applications should claim only computer-level defaults through SPAD.</span></span>
-   <span data-ttu-id="8640a-179">Les applications ne doivent *pas* réclamer les valeurs par défaut par utilisateur par le biais de SPAD.</span><span class="sxs-lookup"><span data-stu-id="8640a-179">Applications should *not* claim per-user defaults through SPAD.</span></span>

<span data-ttu-id="8640a-180">Quand une application Windows 8 implémente **Set comme valeur par défaut** dans SPAD, elle doit inscrire ses types de fichiers et protocoles dans les [programmes par défaut](default-programs.md), en utilisant le même nom d’application que celui utilisé dans SPAD.</span><span class="sxs-lookup"><span data-stu-id="8640a-180">When a Windows 8 application implements **Set as Default** in SPAD, they must register their file types and protocols in [Default Programs](default-programs.md), using the same application name used in SPAD.</span></span> <span data-ttu-id="8640a-181">Cela permet à une modification dans SPAD de refléter comme une modification de l’entrée programmes par défaut correspondante pour l’utilisateur actuel.</span><span class="sxs-lookup"><span data-stu-id="8640a-181">This allows a change in SPAD to reflect as a change in the corresponding Default Programs entry for the current user.</span></span>

### <a name="hide-access-in-spad"></a><span data-ttu-id="8640a-182">Masquer l’accès dans SPAD</span><span class="sxs-lookup"><span data-stu-id="8640a-182">Hide Access in SPAD</span></span>

<span data-ttu-id="8640a-183">L’option Hide Access pour chaque valeur par défaut possible dans SPAD est accessible de deux manières :</span><span class="sxs-lookup"><span data-stu-id="8640a-183">The hide access option for each possible default in SPAD is accessed in one of two ways:</span></span>

-   <span data-ttu-id="8640a-184">Choisissez la catégorie **non Microsoft** des valeurs par défaut, qui supprime l’accès à toutes les valeurs par défaut de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="8640a-184">Choose the **Non-Microsoft** category of defaults, which removes access to all Microsoft defaults.</span></span>
-   <span data-ttu-id="8640a-185">Choisissez la catégorie **personnalisée** et désactivez la case à cocher **activer l’accès à ce programme** .</span><span class="sxs-lookup"><span data-stu-id="8640a-185">Choose the **Custom** category and clear the **Enable access to this program** check box.</span></span>

<span data-ttu-id="8640a-186">Auparavant, l’une de ces actions supprimait tous les points d’entrée des applications appropriées sur le système.</span><span class="sxs-lookup"><span data-stu-id="8640a-186">Previously, taking either of those actions removed all entry points to the appropriate applications on the system.</span></span> <span data-ttu-id="8640a-187">Des instructions spécifiques pour cette situation indiquent comment supprimer des raccourcis et des icônes à partir des emplacements suivants :</span><span class="sxs-lookup"><span data-stu-id="8640a-187">Specific guidelines for this situation say to remove shortcuts and icons from the following locations:</span></span>

-   <span data-ttu-id="8640a-188">Bureau</span><span class="sxs-lookup"><span data-stu-id="8640a-188">Desktop</span></span>
-   <span data-ttu-id="8640a-189">Menu Démarrer</span><span class="sxs-lookup"><span data-stu-id="8640a-189">Start menu</span></span>
-   <span data-ttu-id="8640a-190">Barre lancement rapide (Windows Vista et versions antérieures uniquement)</span><span class="sxs-lookup"><span data-stu-id="8640a-190">Quick Launch bar (Windows Vista and earlier only)</span></span>
-   <span data-ttu-id="8640a-191">Zone Notifications</span><span class="sxs-lookup"><span data-stu-id="8640a-191">Notification area</span></span>
-   <span data-ttu-id="8640a-192">Menus contextuels</span><span class="sxs-lookup"><span data-stu-id="8640a-192">Shortcut menus</span></span>
-   <span data-ttu-id="8640a-193">Bande de tâches du dossier</span><span class="sxs-lookup"><span data-stu-id="8640a-193">Folder task band</span></span>

<span data-ttu-id="8640a-194">Les fournisseurs sont encouragés à implémenter ces instructions dans la fonction de rappel d’accès de masquage de l’application.</span><span class="sxs-lookup"><span data-stu-id="8640a-194">Vendors are encouraged to implement these guidelines in the application's Hide Access callback function.</span></span>

### <a name="alternate-hide-access-method-in-spad"></a><span data-ttu-id="8640a-195">Autre méthode d’accès Masquer dans SPAD</span><span class="sxs-lookup"><span data-stu-id="8640a-195">Alternate Hide Access Method in SPAD</span></span>

<span data-ttu-id="8640a-196">Pour certaines applications héritées, une implémentation complète de l’accès masqué peut ne pas être pratique.</span><span class="sxs-lookup"><span data-stu-id="8640a-196">For some legacy applications, a full implementation of Hide Access may not be practical.</span></span> <span data-ttu-id="8640a-197">Une autre méthode qui atteint le même effet, mais qui n’est pas facile à réversible par l’utilisateur, consiste à désinstaller l’application.</span><span class="sxs-lookup"><span data-stu-id="8640a-197">An alternate method that achieves the same effect, but is not easily reversible by the user, is to uninstall the application.</span></span> <span data-ttu-id="8640a-198">L’exemple suivant montre un exemple de comportement et de code pour implémenter cela.</span><span class="sxs-lookup"><span data-stu-id="8640a-198">The following shows sample behavior and example code to implement this.</span></span>

<span data-ttu-id="8640a-199">L’expérience utilisateur recommandée pour cette solution est la suivante :</span><span class="sxs-lookup"><span data-stu-id="8640a-199">The recommended user experience for this alternative is as follows:</span></span>

-   <span data-ttu-id="8640a-200">Quand l’utilisateur désactive la case **activer l’accès à ce programme** dans SPAD, l’interface utilisateur suivante est présentée.</span><span class="sxs-lookup"><span data-stu-id="8640a-200">When the user clears the **Enable access to this program** box in SPAD, the following UI is presented.</span></span>

    ![boîte de dialogue Vista sur le masquage de l’accès au programme](images/hideaccessvista.png)

-   <span data-ttu-id="8640a-202">Quand l’utilisateur clique sur **OK**, l’élément **programmes et fonctionnalités** du panneau de configuration s’affiche pour permettre à l’utilisateur de désinstaller l’application.</span><span class="sxs-lookup"><span data-stu-id="8640a-202">When the user clicks **OK**, the **Programs and Features** item in Control Panel is displayed so that the user can uninstall the application.</span></span>
-   <span data-ttu-id="8640a-203">Les utilisateurs de Windows XP doivent être affichés dans la boîte de dialogue suivante.</span><span class="sxs-lookup"><span data-stu-id="8640a-203">Windows XP users should be presented with the following dialog box.</span></span>

    ![boîte de dialogue Windows XP sur le masquage de l’accès au programme](images/hideaccessxp.png)

-   <span data-ttu-id="8640a-205">Quand l’utilisateur Windows XP clique sur **OK**, l’élément **Ajout/suppression de programmes** du panneau de configuration s’affiche afin que l’utilisateur puisse désinstaller l’application.</span><span class="sxs-lookup"><span data-stu-id="8640a-205">When the Windows XP user clicks **OK**, the **Add or Remove Programs** item in Control Panel is displayed so that the user can uninstall the application.</span></span>

<span data-ttu-id="8640a-206">Le code suivant fournit une implémentation réutilisable pour la fonctionnalité masquer l’accès, comme décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="8640a-206">The following code provides a reusable implementation for the Hide Access feature as outlined previously.</span></span> <span data-ttu-id="8640a-207">Il peut être utilisé sur Windows XP, Windows Vista et Windows 7.</span><span class="sxs-lookup"><span data-stu-id="8640a-207">It can be used on Windows XP, Windows Vista, and Windows 7.</span></span>


```
#include <windows.h>
#include <shlwapi.h>
#include <strsafe.h>

PCWSTR c_pszMessage1 = L"To hide access to this program, you need to uninstall it by ";
PCWSTR c_pszMessage2 = L"using\n%s in Control Panel.\n\nWould you like to start %s?";
PCWSTR c_pszApplicationName  = L"Sample App";

int _tmain(int argc, WCHAR* argv[])
{
    OSVERSIONINFO version;
    version.dwOSVersionInfoSize = sizeof(version);

    if (GetVersionEx(&version))
    {
        PCWSTR pszCPLName = NULL;

        if (version.dwMajorVersion >= 6)
        {
            // Windows Vista and later
            pszCPLName = L"Programs and Features";
        }
        else if (version.dwMajorVersion == 5 &&
                 version.dwMinorVersion == 1)
        {
            // XP
            pszCPLName = L"Add/Remove Programs";
        }

        if (pszCPLName != NULL)
        {
            WCHAR szMessage[256], szScratch[256];
            if (SUCCEEDED(StringCchPrintf(szScratch, 
                                          ARRAYSIZE(szScratch), 
                                          c_pszMessage2, 
                                          pszCPLName, 
                                          pszCPLName)))
            {
                if (SUCCEEDED(StringCchCopy(szMessage, 
                                            ARRAYSIZE(szMessage), 
                                            c_pszMessage1)))
                {
                    if (SUCCEEDED(StringCchCat(szMessage, 
                                               ARRAYSIZE(szMessage), 
                                               szScratch)))
                    {
                        if (IDOK == MessageBox(NULL, 
                                               szMessage, 
                                               c_pszApplicationName, 
                                               MB_OKCANCEL))
                        {
                            ShellExecute(NULL, 
                                         NULL, 
                                         L"appwiz.cpl", 
                                         NULL, 
                                         NULL, 
                                         SW_SHOWNORMAL);
                        }
                    }
                }
            }
        }
    }
    return 0;
}
```



## <a name="registering-for-application-entry-points"></a><span data-ttu-id="8640a-208">Inscription pour les points d’entrée de l’application</span><span class="sxs-lookup"><span data-stu-id="8640a-208">Registering for Application Entry Points</span></span>

<span data-ttu-id="8640a-209">Une application peut avoir de nombreux points d’entrée dans le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="8640a-209">An application can have many entry points within the operating system.</span></span> <span data-ttu-id="8640a-210">Les emplacements recommandés pour les points d’entrée sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="8640a-210">The following are recommended locations for entry points:</span></span>

-   <span data-ttu-id="8640a-211">Bureau</span><span class="sxs-lookup"><span data-stu-id="8640a-211">Desktop</span></span>
-   <span data-ttu-id="8640a-212">Menu Démarrer</span><span class="sxs-lookup"><span data-stu-id="8640a-212">Start menu</span></span>
-   <span data-ttu-id="8640a-213">Barre lancement rapide (Windows Vista et versions antérieures uniquement)</span><span class="sxs-lookup"><span data-stu-id="8640a-213">Quick Launch bar (Windows Vista and earlier only)</span></span>
-   <span data-ttu-id="8640a-214">Zone Notifications</span><span class="sxs-lookup"><span data-stu-id="8640a-214">Notification area</span></span>
-   <span data-ttu-id="8640a-215">Menus contextuels</span><span class="sxs-lookup"><span data-stu-id="8640a-215">Shortcut menus</span></span>
-   <span data-ttu-id="8640a-216">Bande de tâches du dossier</span><span class="sxs-lookup"><span data-stu-id="8640a-216">Folder task band</span></span>

<span data-ttu-id="8640a-217">Cette section se concentre sur ces domaines spécifiques :</span><span class="sxs-lookup"><span data-stu-id="8640a-217">This section focuses on these specific areas:</span></span>

-   [<span data-ttu-id="8640a-218">Ouvrir avec</span><span class="sxs-lookup"><span data-stu-id="8640a-218">Open With</span></span>](#open-with)
-   [<span data-ttu-id="8640a-219">Menu Démarrer et barre lancement rapide</span><span class="sxs-lookup"><span data-stu-id="8640a-219">Start Menu and Quick Launch Bar</span></span>](#start-menu-and-quick-launch-bar)

### <a name="open-with"></a><span data-ttu-id="8640a-220">Ouvrir avec</span><span class="sxs-lookup"><span data-stu-id="8640a-220">Open With</span></span>

<span data-ttu-id="8640a-221">Le menu contextuel **Ouvrir avec** permet à l’utilisateur de sélectionner une application capable de gérer un type de fichier spécifique.</span><span class="sxs-lookup"><span data-stu-id="8640a-221">The **Open With** shortcut menu enables the user to select an application that can handle a specific file type.</span></span> <span data-ttu-id="8640a-222">Bien que l’option **Ouvrir avec** puisse être utilisée pour ouvrir un fichier avec une application une fois, elle peut également être utilisée pour définir la valeur par défaut pour cette extension de nom de fichier.</span><span class="sxs-lookup"><span data-stu-id="8640a-222">While **Open With** can be used to open a file with an application one time, it can also be used to set the default for that file name extension.</span></span> <span data-ttu-id="8640a-223">Par conséquent, une application doit toujours s’inscrire à **Open with** afin que les utilisateurs soient présentés avec cette application comme choix.</span><span class="sxs-lookup"><span data-stu-id="8640a-223">Therefore, an application should always register for **Open With** so that users are presented with that application as a choice.</span></span> <span data-ttu-id="8640a-224">Les applications peuvent inscrire à la fois des types de fichiers et des protocoles **ouverts avec**.</span><span class="sxs-lookup"><span data-stu-id="8640a-224">Applications can register both file types and protocols for **Open With**.</span></span> <span data-ttu-id="8640a-225">Les applications qui inscrivent des protocoles dans l’infrastructure des programmes par défaut sont automatiquement ajoutées aux options **Ouvrir avec** pour les protocoles.</span><span class="sxs-lookup"><span data-stu-id="8640a-225">Applications that register protocols in the Default Programs framework are automatically added to the **Open With** options for protocols.</span></span>

<span data-ttu-id="8640a-226">Pour plus d’informations sur l’inscription de pour **Open with**, consultez [Présentation des associations de fichiers](fa-intro.md).</span><span class="sxs-lookup"><span data-stu-id="8640a-226">For information on registering for **Open With**, see [Introduction to File Associations](fa-intro.md).</span></span>

### <a name="start-menu-and-quick-launch-bar"></a><span data-ttu-id="8640a-227">Menu Démarrer et barre lancement rapide</span><span class="sxs-lookup"><span data-stu-id="8640a-227">Start Menu and Quick Launch Bar</span></span>

<span data-ttu-id="8640a-228">Pour être plus détectable pour l’utilisateur, les applications peuvent ajouter des raccourcis vers différents emplacements dans Windows.</span><span class="sxs-lookup"><span data-stu-id="8640a-228">To become more discoverable to the user, applications can add shortcuts to various locations in Windows.</span></span> <span data-ttu-id="8640a-229">L’emplacement le plus courant pour ajouter un raccourci est le menu **Démarrer** .</span><span class="sxs-lookup"><span data-stu-id="8640a-229">The most common place to add a shortcut is the **Start** menu.</span></span> <span data-ttu-id="8640a-230">Dans Windows Vista et versions ultérieures, une application crée un raccourci dans le dossier caché% ProgramData% \\ \\ \\ des programmes du menu Démarrer de Microsoft Windows \\ pour qu’elle s’affiche dans la liste des programmes du menu **Démarrer** pour tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="8640a-230">In Windows Vista and later, an application creates a shortcut in the hidden folder %ProgramData%\\Microsoft\\Windows\\Start Menu\\Programs to appear in the **Start** menu's list of programs for all users.</span></span> <span data-ttu-id="8640a-231">En règle générale, une application ajoute un sous-dossier qui contient le raccourci.</span><span class="sxs-lookup"><span data-stu-id="8640a-231">Commonly, an application adds a subfolder that contains the shortcut.</span></span>

<span data-ttu-id="8640a-232">Pour les navigateurs et les programmes de messagerie, le menu **Démarrer** de Windows Vista présente également deux liens dédiés en dehors de la liste des programmes, par le biais d' **Internet** et de la **messagerie électronique**.</span><span class="sxs-lookup"><span data-stu-id="8640a-232">For browser and email programs, the Windows Vista **Start** menu also presents two dedicated links outside of the program list, canonically titled **Internet** and **E-mail**.</span></span> <span data-ttu-id="8640a-233">Une fois qu’une application s’est inscrite pour ces catégories, l’infrastructure des programmes par défaut peut gérer ce qui est lancé via ces liens.</span><span class="sxs-lookup"><span data-stu-id="8640a-233">After an application registers for those categories, the Default Programs framework can manage what is launched through those links.</span></span>

> [!Note]  
> <span data-ttu-id="8640a-234">Les liens du menu **Démarrer** dédié à **Internet** et au **courrier électronique** ne sont plus présents à partir de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="8640a-234">The **Internet** and **E-mail** dedicated **Start** menu links are no longer present as of Windows 7.</span></span>

 

<span data-ttu-id="8640a-235">Pour augmenter davantage la détectabilité, les applications peuvent également ajouter des raccourcis au bureau et à la barre de lancement rapide.</span><span class="sxs-lookup"><span data-stu-id="8640a-235">To further increase discoverability, applications can also add shortcuts to the desktop and the Quick Launch bar.</span></span> <span data-ttu-id="8640a-236">Les applications doivent demander l’autorisation à l’utilisateur (généralement lors de l’installation ou lors de la première exécution) avant d’ajouter une icône au menu **Démarrer** , au bureau ou à la barre de lancement rapide.</span><span class="sxs-lookup"><span data-stu-id="8640a-236">Applications should ask the user for permission (usually during installation or on first run) before adding an icon to the **Start** menu, desktop, or Quick Launch bar.</span></span>

> [!Note]  
> <span data-ttu-id="8640a-237">La barre lancement rapide n’est plus disponible à partir de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="8640a-237">The Quick Launch bar is no longer available as of Windows 7.</span></span> <span data-ttu-id="8640a-238">L’alternative Windows 7 consiste à faire épingler l’application à la barre des tâches, mais l’épinglage ne peut pas être effectué par programmation, car il s’agit strictement d’un choix utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-238">The Windows 7 alternative is to have the application pinned to the Taskbar, but pinning cannot be done programmatically as it is strictly a user choice.</span></span>

 

<span data-ttu-id="8640a-239">Pour plus d’informations, consultez les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="8640a-239">For more information, see these topics:</span></span>

-   [<span data-ttu-id="8640a-240">Inscription d’un navigateur Internet ou d’un client de messagerie à l’aide du menu Démarrer de Windows</span><span class="sxs-lookup"><span data-stu-id="8640a-240">How to Register an Internet Browser or Email Client With the Windows Start Menu</span></span>](start-menu-reg.md)
-   [<span data-ttu-id="8640a-241">Inscription de programmes avec des types de clients</span><span class="sxs-lookup"><span data-stu-id="8640a-241">Registering Programs with Client Types</span></span>](reg-middleware-apps.md)

## <a name="application-installation-and-defaults"></a><span data-ttu-id="8640a-242">Installation et paramètres par défaut de l’application</span><span class="sxs-lookup"><span data-stu-id="8640a-242">Application Installation and Defaults</span></span>

<span data-ttu-id="8640a-243">Les procédures d’installation d’applications n’ont pas changé de façon radicale depuis Windows XP, à l’exception d’une nouvelle règle pour les systèmes exécutant des versions de Windows antérieures à Windows 8 : prendre des valeurs par défaut par ordinateur lors de l’installation, mais ne définir aucune valeur par défaut pour chaque utilisateur tant que cet utilisateur n’a pas exécuté l’application pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="8640a-243">Application installation procedures have not fundamentally changed since Windows XP, with the exception of a new guideline for systems running versions of Windows older than Windows 8: take per-computer defaults at installation time but do not set any per-user defaults until that user first runs the application.</span></span> <span data-ttu-id="8640a-244">(Voir la [première exécution de l’application et les valeurs par défaut](#application-first-run-and-defaults).) Les applications ne doivent pas définir les valeurs par défaut par utilisateur lors de l’installation, car il existe des situations dans lesquelles la personne qui installe l’application n’est pas l’utilisateur prévu.</span><span class="sxs-lookup"><span data-stu-id="8640a-244">(See [Application First Run and Defaults](#application-first-run-and-defaults).) Applications should not set per-user defaults during installation because there are situations in which the person installing the application is not the intended user.</span></span> <span data-ttu-id="8640a-245">À compter de Windows 8, les valeurs par défaut par ordinateur ne sont pas prises en charge et les applications ne peuvent pas modifier les paramètres par défaut par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-245">As of Windows 8, per-computer defaults are not supported and applications cannot change per-user default settings.</span></span>

<span data-ttu-id="8640a-246">Pendant l’installation, une application doit copier ses fichiers binaires sur le disque dur et écrire ses ProgID dans le registre.</span><span class="sxs-lookup"><span data-stu-id="8640a-246">During installation, an application should copy its binaries to the hard disk and write its ProgIDs to the registry.</span></span> <span data-ttu-id="8640a-247">L’application doit également s’inscrire aux programmes par défaut et **Ouvrir avec** à ce moment-là pour chaque association de fichiers qu’il est candidat à gérer.</span><span class="sxs-lookup"><span data-stu-id="8640a-247">The application should also register for Default Programs and **Open With** at this time for every file association it is a candidate to handle.</span></span> <span data-ttu-id="8640a-248">L’application peut utiliser la sous-clé **OpenWithProgIds** pour s’inscrire avec **Open with**.</span><span class="sxs-lookup"><span data-stu-id="8640a-248">The application can use the **OpenWithProgIds** subkey to register with **Open With**.</span></span>

<span data-ttu-id="8640a-249">Pour plus d’informations, consultez les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="8640a-249">For more information, see these topics:</span></span>

-   [<span data-ttu-id="8640a-250">Programmes par défaut</span><span class="sxs-lookup"><span data-stu-id="8640a-250">Default Programs</span></span>](default-programs.md)
-   [<span data-ttu-id="8640a-251">Présentation des associations de fichiers</span><span class="sxs-lookup"><span data-stu-id="8640a-251">Introduction to File Associations</span></span>](fa-intro.md)

## <a name="application-upgrades-and-defaults"></a><span data-ttu-id="8640a-252">Mises à niveau et valeurs par défaut de l’application</span><span class="sxs-lookup"><span data-stu-id="8640a-252">Application Upgrades and Defaults</span></span>

<span data-ttu-id="8640a-253">De nombreuses applications ont la possibilité de se mettre à niveau avec le temps.</span><span class="sxs-lookup"><span data-stu-id="8640a-253">Many applications have the ability to upgrade themselves over time.</span></span> <span data-ttu-id="8640a-254">Cette procédure de mise à niveau ne doit pas modifier l’état des valeurs par défaut par utilisateur, car cette modification est inattendue pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8640a-254">This upgrade procedure should not change the state of per-user defaults because that change would be unexpected to the user.</span></span> <span data-ttu-id="8640a-255">Toutefois, il est acceptable pour une application de vérifier les associations de fichiers au niveau de l’ordinateur et de les réparer si elles ont été endommagées.</span><span class="sxs-lookup"><span data-stu-id="8640a-255">However, it is acceptable for an application to check computer-level file associations and repair them if they have been corrupted.</span></span>

## <a name="application-first-run-and-defaults"></a><span data-ttu-id="8640a-256">Première exécution de l’application et valeurs par défaut</span><span class="sxs-lookup"><span data-stu-id="8640a-256">Application First Run and Defaults</span></span>

> [!Note]  
> <span data-ttu-id="8640a-257">À compter de Windows 8, le système gère cette procédure pour le compte de toutes les applications.</span><span class="sxs-lookup"><span data-stu-id="8640a-257">As of Windows 8, the system handles this procedure on behalf of all applications.</span></span> <span data-ttu-id="8640a-258">Les applications elles-mêmes ne peuvent plus interroger et modifier les valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="8640a-258">Applications themselves can no longer query and change defaults.</span></span> <span data-ttu-id="8640a-259">Seul l’utilisateur peut le faire.</span><span class="sxs-lookup"><span data-stu-id="8640a-259">Only the user can do that.</span></span> <span data-ttu-id="8640a-260">Par conséquent, les applications ne doivent pas tenter d’interroger la valeur par défaut actuelle ou modifier cette valeur par défaut via un mécanisme quelconque.</span><span class="sxs-lookup"><span data-stu-id="8640a-260">Therefore, applications should not attempt to query for the current default or change that default through any mechanism.</span></span> <span data-ttu-id="8640a-261">Toutefois, les applications peuvent fournir un point d’entrée aux programmes par défaut dans le panneau de configuration en appelant la méthode [**LaunchAdvancedAssociationUI**](/windows/desktop/api/Shobjidl/nf-shobjidl-iapplicationassociationregistrationui-launchadvancedassociationui) de l’interface [**IApplicationAssociationRegistrationUI**](/windows/desktop/api/Shobjidl/nn-shobjidl-iapplicationassociationregistrationui) .</span><span class="sxs-lookup"><span data-stu-id="8640a-261">However, applications can provide an entry point to Default Programs in the Control Panel by calling the [**LaunchAdvancedAssociationUI**](/windows/desktop/api/Shobjidl/nf-shobjidl-iapplicationassociationregistrationui-launchadvancedassociationui) method of the [**IApplicationAssociationRegistrationUI**](/windows/desktop/api/Shobjidl/nn-shobjidl-iapplicationassociationregistrationui) interface.</span></span>

 

<span data-ttu-id="8640a-262">Avec l’introduction des paramètres par défaut par utilisateur dans Windows Vista, il est important que les applications qui contestent des extensions de nom de fichier populaires fournissent toutes une expérience utilisateur commune pour revendiquer ces extensions.</span><span class="sxs-lookup"><span data-stu-id="8640a-262">With the introduction of per-user defaults in Windows Vista, it is important that applications that contest for popular file name extensions all provide a common user experience to claim these extensions.</span></span> <span data-ttu-id="8640a-263">Étant donné que ces valeurs par défaut sont maintenant définies dans le contexte de l’utilisateur, elles doivent se présenter comme une possibilité par défaut uniquement lorsque l’utilisateur exécute le programme après l’installation.</span><span class="sxs-lookup"><span data-stu-id="8640a-263">Because these defaults are now set in the context of the user, they should present themselves as a default possibility only when the user runs the program after installation.</span></span>

<span data-ttu-id="8640a-264">La règle d’établissement des valeurs par défaut par utilisateur est la suivante : lorsqu’une application est exécutée pour la première fois pour un utilisateur spécifique, cette application doit demander des préférences utilisateur pour les valeurs par défaut et les associations de fichiers pour elle-même.</span><span class="sxs-lookup"><span data-stu-id="8640a-264">The guideline for establishing per-user defaults is this: When an application is first run for a specific user, that application should request user preferences for defaults and file associations for itself.</span></span>

<span data-ttu-id="8640a-265">L’interface utilisateur recommandée doit fournir deux choix clairs à l’utilisateur :</span><span class="sxs-lookup"><span data-stu-id="8640a-265">The recommended UI should provide two clear choices to the user:</span></span>

1.  <span data-ttu-id="8640a-266">Acceptez toutes les valeurs par défaut que l’application souhaite demander.</span><span class="sxs-lookup"><span data-stu-id="8640a-266">Accept all defaults that the application would like to claim.</span></span> <span data-ttu-id="8640a-267">Cette option peut également définir d’autres propriétés par défaut de l’application, telles que la confidentialité ou les paramètres de mise à jour automatique.</span><span class="sxs-lookup"><span data-stu-id="8640a-267">This option might also set other default properties of the application such as privacy or automatic update settings.</span></span> <span data-ttu-id="8640a-268">Cette option permet à l’application de réclamer toutes ses valeurs par défaut enregistrées.</span><span class="sxs-lookup"><span data-stu-id="8640a-268">This option allows the application to claim all of its registered defaults.</span></span>
2.  <span data-ttu-id="8640a-269">Personnalisez en acceptant ou refusant les sélections par défaut et les paramètres de programme individuellement.</span><span class="sxs-lookup"><span data-stu-id="8640a-269">Customize by accepting or not accepting default selections and program settings individually.</span></span> <span data-ttu-id="8640a-270">Cette option présente une interface utilisateur supplémentaire qui permet à l’utilisateur d’effectuer des choix granulaires pour leurs options par défaut.</span><span class="sxs-lookup"><span data-stu-id="8640a-270">This option presents further UI that enables the user to make granular choices for their default options.</span></span>

<span data-ttu-id="8640a-271">Pour plus d’informations, consultez [programmes par défaut](default-programs.md).</span><span class="sxs-lookup"><span data-stu-id="8640a-271">For more information, see [Default Programs](default-programs.md).</span></span>

## <a name="verifying-defaults-and-asking-for-user-consent"></a><span data-ttu-id="8640a-272">Vérification des valeurs par défaut et demande de consentement de l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="8640a-272">Verifying Defaults and Asking for User Consent</span></span>

> [!Note]  
> <span data-ttu-id="8640a-273">Cela n’est pas pris en charge dans Windows 8.</span><span class="sxs-lookup"><span data-stu-id="8640a-273">This is not supported as of Windows 8.</span></span>

 

<span data-ttu-id="8640a-274">Une fois qu’une application s’est inscrite auprès des programmes par défaut dans Windows Vista et versions ultérieures, certaines API sont disponibles pour l’application.</span><span class="sxs-lookup"><span data-stu-id="8640a-274">After an application registers with Default Programs in Windows Vista and later, certain APIs become available to the application.</span></span> <span data-ttu-id="8640a-275">Par exemple, une application peut avoir besoin de vérifier s’il s’agit du programme par défaut.</span><span class="sxs-lookup"><span data-stu-id="8640a-275">For instance, an application might need to check whether it is the default program.</span></span> <span data-ttu-id="8640a-276">L’interface [**IApplicationAssociationRegistration**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iapplicationassociationregistration) fournit des méthodes pour effectuer cette opération.</span><span class="sxs-lookup"><span data-stu-id="8640a-276">The [**IApplicationAssociationRegistration**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iapplicationassociationregistration) interface provides methods to do this.</span></span>

<span data-ttu-id="8640a-277">Toute application qui souhaite revendiquer les valeurs par défaut doit d’abord demander à l’utilisateur et ne jamais revendiquer les valeurs par défaut sans autorisation.</span><span class="sxs-lookup"><span data-stu-id="8640a-277">Any application that wants to claim defaults must first ask the user and never claim defaults without permission.</span></span> <span data-ttu-id="8640a-278">L’utilisateur doit être invité à indiquer s’il souhaite faire de l’application la valeur par défaut ou conserver la valeur par défaut actuelle.</span><span class="sxs-lookup"><span data-stu-id="8640a-278">The user should be asked whether they want to make the application the default or leave the current default in place.</span></span> <span data-ttu-id="8640a-279">Il doit également y avoir une option permettant de ne pas être reposée à cette question une fois que l’utilisateur a fait son choix.</span><span class="sxs-lookup"><span data-stu-id="8640a-279">There should also be an option not to be asked this question again after the user has made their choice.</span></span>

<span data-ttu-id="8640a-280">Pour plus d’informations, consultez [programmes par défaut](default-programs.md).</span><span class="sxs-lookup"><span data-stu-id="8640a-280">For more information, see [Default Programs](default-programs.md).</span></span>

## <a name="application-compatibility-tips"></a><span data-ttu-id="8640a-281">Conseils de compatibilité des applications</span><span class="sxs-lookup"><span data-stu-id="8640a-281">Application Compatibility Tips</span></span>

<span data-ttu-id="8640a-282">Cette section fournit des conseils de compatibilité des applications liés à l’expérience des programmes par défaut dans Windows.</span><span class="sxs-lookup"><span data-stu-id="8640a-282">This section provides some application compatibility tips related to the Default Programs experience in Windows.</span></span>

### <a name="avoid-triggering-per-user-virtualization"></a><span data-ttu-id="8640a-283">Éviter le déclenchement de la virtualisation Per-User</span><span class="sxs-lookup"><span data-stu-id="8640a-283">Avoid Triggering Per-User Virtualization</span></span>

<span data-ttu-id="8640a-284">Avec l’environnement de contrôle de compte d’utilisateur (UAC), les applications doivent toujours s’exécuter avec des droits d’utilisateur standard pour une expérience client optimale.</span><span class="sxs-lookup"><span data-stu-id="8640a-284">With the user account control (UAC) environment, applications should always run with only standard user rights for the best customer experience.</span></span> <span data-ttu-id="8640a-285">Pour des raisons de sécurité, les applications avec un niveau de privilège utilisateur standard sont bloquées lors de l’écriture dans certaines parties du Registre et dans certains fichiers système.</span><span class="sxs-lookup"><span data-stu-id="8640a-285">For security reasons, applications with a standard user privilege level are blocked from writing to certain parts of the registry and to certain system files.</span></span> <span data-ttu-id="8640a-286">Windows Vista et les versions ultérieures de Windows fournissent une couche de compatibilité des applications temporaire (AppCompat) pour aider les applications à effectuer la transition.</span><span class="sxs-lookup"><span data-stu-id="8640a-286">Windows Vista and later versions of Windows provide a temporary application compatibility (AppCompat) layer to help applications make the transition.</span></span> <span data-ttu-id="8640a-287">Les tentatives d’écriture bloquées dans le registre ou les fichiers système sont « virtualisées » afin que l’application continue de s’exécuter, mais les zones sensibles du système ne sont pas modifiées.</span><span class="sxs-lookup"><span data-stu-id="8640a-287">Blocked attempts to write to the registry or to system files are "virtualized" so that the application continues to run, but the sensitive areas of the system are not altered.</span></span> <span data-ttu-id="8640a-288">Toutefois, les applications ne doivent pas reposer sur la technologie AppCompat comme une solution à long terme.</span><span class="sxs-lookup"><span data-stu-id="8640a-288">However, applications should not rely on the AppCompat technology as a long-term solution.</span></span> <span data-ttu-id="8640a-289">Au lieu de cela, les applications doivent utiliser les nombreux outils disponibles pour vérifier qu’ils peuvent s’exécuter correctement sous les droits d’utilisateur standard.</span><span class="sxs-lookup"><span data-stu-id="8640a-289">Instead, applications should use the many available tools to verify that they can run successfully under standard user rights.</span></span> <span data-ttu-id="8640a-290">Une certaine reprogrammation de l’application peut être nécessaire pour y parvenir, mais elle doit être effectuée dans l’intérêt de la compatibilité à long terme.</span><span class="sxs-lookup"><span data-stu-id="8640a-290">Some reprogramming of the application might be required to accomplish this, but it should be done in the interest of long-term compatibility.</span></span>

### <a name="avoid-appcompat-warnings-or-blocks-from-the-program-compatibility-assistant"></a><span data-ttu-id="8640a-291">Éviter les avertissements ou les blocs AppCompat de l’Assistant Compatibilité des programmes</span><span class="sxs-lookup"><span data-stu-id="8640a-291">Avoid AppCompat Warnings or Blocks from the Program Compatibility Assistant</span></span>

<span data-ttu-id="8640a-292">L’Assistant Compatibilité des programmes (PCA) est fourni avec Windows Vista et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="8640a-292">The Program Compatibility Assistant (PCA) is provided in Windows Vista and later.</span></span> <span data-ttu-id="8640a-293">Son objectif est de fournir une méthode automatisée pour que les anciens programmes avec des problèmes de compatibilité fonctionnent mieux.</span><span class="sxs-lookup"><span data-stu-id="8640a-293">Its purpose is to provide an automated method to make older programs with compatibility issues work better.</span></span> <span data-ttu-id="8640a-294">L’APC surveille les programmes à la recherche de problèmes connus.</span><span class="sxs-lookup"><span data-stu-id="8640a-294">The PCA monitors programs for known issues.</span></span> <span data-ttu-id="8640a-295">Si un problème est détecté, il avertit l’utilisateur du problème et propose d’appliquer des solutions efficaces avant que l’utilisateur n’exécute à nouveau le programme.</span><span class="sxs-lookup"><span data-stu-id="8640a-295">If an issue is detected, it notifies the user of the problem and offers to apply effective solutions before the user runs the program again.</span></span> <span data-ttu-id="8640a-296">Pour éviter de voir ces avertissements ou ces blocs, les éditeurs de logiciels indépendants doivent utiliser les nombreux outils disponibles pour s’assurer que leurs applications sont compatibles avec Windows Vista, Windows 7 et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="8640a-296">To avoid seeing these warnings or blocks, ISVs should use the many available tools to ensure that their applications are compatible with Windows Vista, Windows 7, and later.</span></span>

### <a name="support-for-previous-windows-operating-system-versions"></a><span data-ttu-id="8640a-297">Prise en charge des versions précédentes du système d’exploitation Windows</span><span class="sxs-lookup"><span data-stu-id="8640a-297">Support for Previous Windows Operating System Versions</span></span>

<span data-ttu-id="8640a-298">L’infrastructure des programmes par défaut n’est pas disponible sur les systèmes d’exploitation Windows antérieurs à Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="8640a-298">The Default Programs infrastructure is not available on any Windows operating system before Windows Vista.</span></span> <span data-ttu-id="8640a-299">Par conséquent, lorsque les applications passent à la nouvelle infrastructure des programmes par défaut, elles doivent conserver leur code d’application par défaut plus ancien pour maintenir la compatibilité avec les versions antérieures de Windows.</span><span class="sxs-lookup"><span data-stu-id="8640a-299">Therefore, when applications move to the new Default Programs infrastructure, they should retain their older application-defaults code to maintain compatibility with older versions of Windows.</span></span> <span data-ttu-id="8640a-300">Une application doit exécuter une vérification de la version du système d’exploitation dans le cadre de son installation pour déterminer le code de l’application par défaut à exécuter.</span><span class="sxs-lookup"><span data-stu-id="8640a-300">An application should run an operating system version check as part of its installation to determine which application-defaults code to run.</span></span>

<span data-ttu-id="8640a-301">Pour prendre en charge une mise à niveau de Windows XP vers Windows Vista ou une version ultérieure, les applications doivent ajouter toutes les entrées de Registre requises pour les programmes par défaut, même lorsqu’elles sont installées sur un ordinateur exécutant Windows XP.</span><span class="sxs-lookup"><span data-stu-id="8640a-301">To support an upgrade from Windows XP to Windows Vista or later, applications should add all the registry entries required for Default Programs even when they are installing on a computer running Windows XP.</span></span> <span data-ttu-id="8640a-302">L’inscription n’a aucun effet sur un ordinateur exécutant Windows XP, mais si l’ordinateur est mis à niveau ultérieurement, l’application est déjà inscrite et peut tirer parti de l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="8640a-302">The registration will have no effect on a computer running Windows XP, but if the computer is later upgraded, the application will be already registered and able to take advantage of the framework.</span></span>

<span data-ttu-id="8640a-303">Pour plus d’informations, consultez [**OSVersionInfo**](/windows/win32/api/winnt/ns-winnt-osversioninfoa).</span><span class="sxs-lookup"><span data-stu-id="8640a-303">For more information, see [**OSVERSIONINFO**](/windows/win32/api/winnt/ns-winnt-osversioninfoa).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="8640a-304">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="8640a-304">Additional Resources</span></span>

-   [<span data-ttu-id="8640a-305">Présentation des associations de fichiers</span><span class="sxs-lookup"><span data-stu-id="8640a-305">Introduction to File Associations</span></span>](fa-intro.md)
-   [<span data-ttu-id="8640a-306">Inscription d’un navigateur Internet ou d’un client de messagerie à l’aide du menu Démarrer de Windows</span><span class="sxs-lookup"><span data-stu-id="8640a-306">How to Register an Internet Browser or Email Client With the Windows Start Menu</span></span>](start-menu-reg.md)
-   <span data-ttu-id="8640a-307">[Inscription d’une application dans un schéma d’URI](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767914(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="8640a-307">[Registering an Application to a URI Scheme](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767914(v=vs.85))</span></span>

## <a name="related-topics"></a><span data-ttu-id="8640a-308">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="8640a-308">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8640a-309">Meilleures pratiques pour les associations de fichiers</span><span class="sxs-lookup"><span data-stu-id="8640a-309">Best Practices for File Associations</span></span>](fa-best-practices.md)
</dt> <dt>

[<span data-ttu-id="8640a-310">Exemple de scénario d’association de fichiers</span><span class="sxs-lookup"><span data-stu-id="8640a-310">File Association Sample Scenario</span></span>](fa-sample-scenarios.md)
</dt> <dt>

[<span data-ttu-id="8640a-311">Programmes par défaut</span><span class="sxs-lookup"><span data-stu-id="8640a-311">Default Programs</span></span>](default-programs.md)
</dt> <dt>

[<span data-ttu-id="8640a-312">Utilisation de l’option définir l’accès aux programmes et les paramètres par défaut de l’ordinateur (SPAD)</span><span class="sxs-lookup"><span data-stu-id="8640a-312">Working with Set Program Access and Computer Defaults (SPAD)</span></span>](cpl-setprogramaccess.md)
</dt> </dl>

 

 
