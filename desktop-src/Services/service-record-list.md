---
description: À mesure que chaque entrée de service est lue à partir de la base de données des services installés, le SCM crée un enregistrement de service pour le service.
ms.assetid: c0ee43e2-af9b-4578-9017-46a5ed50b938
title: Liste des enregistrements de service
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1143625de977c7e5c488c5cc56620adc3a5454db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106515464"
---
# <a name="service-record-list"></a><span data-ttu-id="1c747-103">Liste des enregistrements de service</span><span class="sxs-lookup"><span data-stu-id="1c747-103">Service Record List</span></span>

<span data-ttu-id="1c747-104">À mesure que chaque entrée de service est lue à partir de la base de données des services installés, le SCM crée un enregistrement de service pour le service.</span><span class="sxs-lookup"><span data-stu-id="1c747-104">As each service entry is read from the database of installed services, the SCM creates a service record for the service.</span></span> <span data-ttu-id="1c747-105">Un enregistrement de service comprend les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="1c747-105">A service record includes:</span></span>

-   <span data-ttu-id="1c747-106">Nom du service</span><span class="sxs-lookup"><span data-stu-id="1c747-106">Service name</span></span>
-   <span data-ttu-id="1c747-107">Type de démarrage (démarrage automatique ou à la demande)</span><span class="sxs-lookup"><span data-stu-id="1c747-107">Start type (auto-start or demand-start)</span></span>
-   <span data-ttu-id="1c747-108">État du service (voir la structure d' [**\_ État du service**](/windows/desktop/api/Winsvc/ns-winsvc-service_status) )</span><span class="sxs-lookup"><span data-stu-id="1c747-108">Service status (see the [**SERVICE\_STATUS**](/windows/desktop/api/Winsvc/ns-winsvc-service_status) structure)</span></span> <dl> <span data-ttu-id="1c747-109">Type</span><span class="sxs-lookup"><span data-stu-id="1c747-109">Type</span></span>  
    <span data-ttu-id="1c747-110">État actuel</span><span class="sxs-lookup"><span data-stu-id="1c747-110">Current state</span></span>  
    <span data-ttu-id="1c747-111">Codes de contrôle acceptables</span><span class="sxs-lookup"><span data-stu-id="1c747-111">Acceptable control codes</span></span>  
    <span data-ttu-id="1c747-112">Code de sortie</span><span class="sxs-lookup"><span data-stu-id="1c747-112">Exit code</span></span>  
    <span data-ttu-id="1c747-113">Indicateur d’attente</span><span class="sxs-lookup"><span data-stu-id="1c747-113">Wait hint</span></span>  
    </dl>
-   Pointer to dependency list

<span data-ttu-id="1c747-114">Le nom d’utilisateur et le mot de passe d’un compte sont spécifiés au moment de l’installation du service.</span><span class="sxs-lookup"><span data-stu-id="1c747-114">The user name and password of an account are specified at the time the service is installed.</span></span> <span data-ttu-id="1c747-115">Le SCM stocke le nom d’utilisateur dans le registre et le mot de passe dans une partie sécurisée de l’autorité de sécurité locale (LSA).</span><span class="sxs-lookup"><span data-stu-id="1c747-115">The SCM stores the user name in the registry and the password in a secure portion of the Local Security Authority (LSA).</span></span> <span data-ttu-id="1c747-116">L’administrateur système peut créer des comptes avec des mots de passe qui n’expirent jamais.</span><span class="sxs-lookup"><span data-stu-id="1c747-116">The system administrator can create accounts with passwords that never expire.</span></span> <span data-ttu-id="1c747-117">L’administrateur système peut également créer des comptes avec des mots de passe qui expirent et gèrent les comptes en modifiant régulièrement les mots de passe.</span><span class="sxs-lookup"><span data-stu-id="1c747-117">Alternatively, the system administrator can create accounts with passwords that expire and manage the accounts by changing the passwords periodically.</span></span>

<span data-ttu-id="1c747-118">Le SCM conserve deux copies du mot de passe d’un compte d’utilisateur, un mot de passe actuel et un mot de passe de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="1c747-118">The SCM keeps two copies of a user account's password, a current password and a backup password.</span></span> <span data-ttu-id="1c747-119">Le mot de passe spécifié lors de la première installation du service est stocké en tant que mot de passe actuel et le mot de passe de sauvegarde n’est pas initialisé.</span><span class="sxs-lookup"><span data-stu-id="1c747-119">The password specified the first time the service is installed is stored as the current password and the backup password is not initialized.</span></span> <span data-ttu-id="1c747-120">Lorsque le SCM tente d’exécuter le service dans le contexte de sécurité du compte d’utilisateur, il utilise le mot de passe actuel.</span><span class="sxs-lookup"><span data-stu-id="1c747-120">When the SCM attempts to run the service in the security context of the user account, it uses the current password.</span></span> <span data-ttu-id="1c747-121">Si le mot de passe actuel est correctement utilisé, il est également enregistré en tant que mot de passe de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="1c747-121">If the current password is used successfully, it is also saved as the backup password.</span></span> <span data-ttu-id="1c747-122">Si le mot de passe est modifié à l’aide de la fonction [**ChangeServiceConfig**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfiga) , ou du panneau de configuration services, le nouveau mot de passe est stocké en tant que mot de passe actuel et le mot de passe précédent est stocké en tant que mot de passe de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="1c747-122">If the password is modified with the [**ChangeServiceConfig**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfiga) function, or the Services control panel utility, the new password is stored as the current password and the previous password is stored as the backup password.</span></span> <span data-ttu-id="1c747-123">Si le SCM tente de démarrer le service et que le mot de passe actuel échoue, il utilise le mot de passe de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="1c747-123">If the SCM attempts to start the service and the current password fails, then it uses the backup password.</span></span> <span data-ttu-id="1c747-124">Si le mot de passe de sauvegarde est utilisé avec succès, il est enregistré en tant que mot de passe actuel.</span><span class="sxs-lookup"><span data-stu-id="1c747-124">If the backup password is used successfully, it is saved as the current password.</span></span>

<span data-ttu-id="1c747-125">Le SCM met à jour l’état du service lorsqu’un service envoie des notifications d’État à l’aide de la fonction [**SetServiceStatus**](/windows/desktop/api/Winsvc/nf-winsvc-setservicestatus) .</span><span class="sxs-lookup"><span data-stu-id="1c747-125">The SCM updates the service status when a service sends it status notifications using the [**SetServiceStatus**](/windows/desktop/api/Winsvc/nf-winsvc-setservicestatus) function.</span></span> <span data-ttu-id="1c747-126">Le SCM gère l’état d’un service de pilote en interrogeant le système d’e/s, au lieu de recevoir des notifications d’État, comme c’est le cas pour un service.</span><span class="sxs-lookup"><span data-stu-id="1c747-126">The SCM maintains the status of a driver service by querying the I/O system, instead of receiving status notifications, as it does from a service.</span></span>

<span data-ttu-id="1c747-127">Un service peut enregistrer des informations de type supplémentaires en appelant la fonction [**SetServiceBits**](/windows/desktop/api/Lmserver/nf-lmserver-setservicebits) .</span><span class="sxs-lookup"><span data-stu-id="1c747-127">A service can register additional type information by calling the [**SetServiceBits**](/windows/desktop/api/Lmserver/nf-lmserver-setservicebits) function.</span></span> <span data-ttu-id="1c747-128">Les fonctions [**NetServerGetInfo**](/windows/desktop/api/lmserver/nf-lmserver-netservergetinfo) et [**NetServerEnum**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) obtiennent les types de service pris en charge.</span><span class="sxs-lookup"><span data-stu-id="1c747-128">The [**NetServerGetInfo**](/windows/desktop/api/lmserver/nf-lmserver-netservergetinfo) and [**NetServerEnum**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) functions obtain the supported service types.</span></span>

 

 
