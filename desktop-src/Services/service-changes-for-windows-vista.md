---
description: Des modifications significatives ont été apportées au modèle de services pour améliorer les performances, la fiabilité, la sécurité, la gestion et l’administration des services.
ms.assetid: b1c09468-51e1-4ffd-bf07-6faa9f9336dd
title: Modifications de service pour Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6ba96cc0c69e2bda4e19e7d093098c578e31c4b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103862386"
---
# <a name="service-changes-for-windows-vista"></a><span data-ttu-id="8c26e-103">Modifications de service pour Windows Vista</span><span class="sxs-lookup"><span data-stu-id="8c26e-103">Service Changes for Windows Vista</span></span>

<span data-ttu-id="8c26e-104">Des modifications significatives ont été apportées au modèle de services pour améliorer les performances, la fiabilité, la sécurité, la gestion et l’administration des services.</span><span class="sxs-lookup"><span data-stu-id="8c26e-104">There have been significant changes to the services model to improve performance, reliability, security, management, and administration of services.</span></span>

<span data-ttu-id="8c26e-105">Le tableau suivant résume les améliorations apportées aux services pour Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="8c26e-105">The following table summarizes the enhancements to services for Windows Vista.</span></span>



| <span data-ttu-id="8c26e-106">Amélioration</span><span class="sxs-lookup"><span data-stu-id="8c26e-106">Enhancement</span></span>                                                                                                                                                                                                  | <span data-ttu-id="8c26e-107">Description</span><span class="sxs-lookup"><span data-stu-id="8c26e-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8c26e-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Démarrage automatique retardé</span><span class="sxs-lookup"><span data-stu-id="8c26e-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Delayed Auto-Start</span></span><br/>                                                                 | <span data-ttu-id="8c26e-109">Les services à démarrage automatique différés sont démarrés peu après le démarrage du système.</span><span class="sxs-lookup"><span data-stu-id="8c26e-109">Delayed auto-start services are started shortly after the system has started.</span></span> <span data-ttu-id="8c26e-110">Cela améliore les performances de démarrage du système tout en fournissant un démarrage automatique pour ces services.</span><span class="sxs-lookup"><span data-stu-id="8c26e-110">This improves system startup performance while still providing automatic startup for these services.</span></span> <span data-ttu-id="8c26e-111">Pour définir l’indicateur de démarrage automatique retardé, appelez la fonction [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) avec **les \_ \_ \_ \_ \_ informations de démarrage automatique différé** de la configuration du service.</span><span class="sxs-lookup"><span data-stu-id="8c26e-111">To set the delayed auto-start flag, call the [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) function with **SERVICE\_CONFIG\_DELAYED\_AUTO\_START\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="8c26e-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Détection des défaillances et récupération</span><span class="sxs-lookup"><span data-stu-id="8c26e-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Failure Detection and Recovery</span></span><br/>                 | <span data-ttu-id="8c26e-113">En cas de défaillance d’un service, le gestionnaire de contrôle des services (SCM) peut effectuer une action d’échec, telle que le redémarrage du service en vue d’une tentative de récupération à partir de cet échec.</span><span class="sxs-lookup"><span data-stu-id="8c26e-113">If a service fails, the service control manager (SCM) can perform a failure action, such as restarting the service in an attempt to recover from that failure.</span></span> <span data-ttu-id="8c26e-114">Pour configurer une action d’échec, appelez [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) avec des actions d’échec de configuration de **service \_ \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="8c26e-114">To configure a failure action, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_FAILURE\_ACTIONS**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="8c26e-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Notifications de préarrêt</span><span class="sxs-lookup"><span data-stu-id="8c26e-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Preshutdown Notifications</span></span><br/>                                     | <span data-ttu-id="8c26e-116">Un service peut s’inscrire pour recevoir une notification de **\_ \_ préarrêt du contrôle de service** dans sa fonction [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) avant de recevoir la notification d’arrêt réelle.</span><span class="sxs-lookup"><span data-stu-id="8c26e-116">A service can register to receive a **SERVICE\_CONTROL\_PRESHUTDOWN** notification in its [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) function before it receives the actual shutdown notification.</span></span> <span data-ttu-id="8c26e-117">Cela permet de réduire le temps d’arrêt normal des services avec une longue procédure d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="8c26e-117">This provides services with a lengthy shutdown procedure more time to shut down gracefully.</span></span> <span data-ttu-id="8c26e-118">Pour définir la valeur du délai d’attente, appelez [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) avec les **\_ \_ \_ informations** de préversion de la configuration du service.</span><span class="sxs-lookup"><span data-stu-id="8c26e-118">To set the time-out value, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_PRESHUTDOWN\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="8c26e-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Accès limité au réseau</span><span class="sxs-lookup"><span data-stu-id="8c26e-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Restricted Network Access</span></span><br/>                                     | <span data-ttu-id="8c26e-120">Vous pouvez utiliser les SID de service pour restreindre l’accès aux ports, aux protocoles ou à la direction du trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="8c26e-120">You can use service SIDs to restrict access to ports, protocols, or the direction of network traffic.</span></span> <span data-ttu-id="8c26e-121">Pour limiter l’accès d’un service au réseau, utilisez l’interface [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) .</span><span class="sxs-lookup"><span data-stu-id="8c26e-121">To restrict a service's access to the network, use the [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) interface.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="8c26e-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Exécution avec privilèges minimum</span><span class="sxs-lookup"><span data-stu-id="8c26e-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Running with Least Privilege</span></span><br/>                         | <span data-ttu-id="8c26e-123">Les services peuvent s’exécuter sous n’importe quel compte qui contient les privilèges requis (LocalService, NetworkService, LocalSystem, un compte de domaine ou un compte local) et indiquer les privilèges requis en appelant [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) avec les **\_ \_ \_ \_ informations de privilèges requis** pour la configuration de service.</span><span class="sxs-lookup"><span data-stu-id="8c26e-123">Services can run under any account that contains the required privileges (LocalService, NetworkService, LocalSystem, a domain account, or a local account) and indicate the required privileges by calling [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_REQUIRED\_PRIVILEGES\_INFO**.</span></span> <span data-ttu-id="8c26e-124">Le SCM supprime tous les privilèges qui ne sont pas requis.</span><span class="sxs-lookup"><span data-stu-id="8c26e-124">The SCM removes any privileges that are not required.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="8c26e-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Isolation du service</span><span class="sxs-lookup"><span data-stu-id="8c26e-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Service Isolation</span></span><br/>                                                                     | <span data-ttu-id="8c26e-126">Un service peut isoler des objets, tels que des fichiers ou des clés de Registre, pour son usage exclusif en les sécurisant à l’aide d’une entrée de contrôle d’accès qui contient un SID de service.</span><span class="sxs-lookup"><span data-stu-id="8c26e-126">A service can isolate objects, such as files or registry keys, for its exclusive use by securing them with an access control entry that contains a service SID.</span></span> <span data-ttu-id="8c26e-127">Une fois ce SID affecté à un service, le propriétaire du service peut modifier les listes de contrôle d’accès des objets pour accorder l’accès au SID.</span><span class="sxs-lookup"><span data-stu-id="8c26e-127">After this SID has been assigned to a service, the service owner can modify the objects' access control lists to grant access to the SID.</span></span> <span data-ttu-id="8c26e-128">Cela permet à un service d’accéder à des objets spécifiques sans s’exécuter sous un compte à privilèges élevés ou réduire la sécurité sur les objets.</span><span class="sxs-lookup"><span data-stu-id="8c26e-128">This enables a service to access specific objects without running under a high-privilege account or lowering the security on the objects.</span></span> <span data-ttu-id="8c26e-129">Pour définir le SID du service, appelez [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) avec les **\_ \_ \_ \_ informations SID du service de configuration de service**.</span><span class="sxs-lookup"><span data-stu-id="8c26e-129">To set the service SID, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_SERVICE\_SID\_INFO**.</span></span><br/>                                                                                                                                                                                                                                     |
| <span data-ttu-id="8c26e-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Notifications de modification de l’état du service</span><span class="sxs-lookup"><span data-stu-id="8c26e-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Service State Change Notifications</span></span><br/> | <span data-ttu-id="8c26e-131">Les services peuvent s’inscrire pour être avertis lorsqu’un service est créé, supprimé ou a une modification de l’État à l’aide de la fonction [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) .</span><span class="sxs-lookup"><span data-stu-id="8c26e-131">Services can register to be notified when a service is created, deleted, or has a change in status by using the [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) function.</span></span> <span data-ttu-id="8c26e-132">Cela est plus efficace que l’appel de la fonction [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) dans une boucle pour interroger l’État.</span><span class="sxs-lookup"><span data-stu-id="8c26e-132">This is more efficient than calling the [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) function in a loop to poll for status.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="8c26e-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Isolation de la session 0</span><span class="sxs-lookup"><span data-stu-id="8c26e-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Session 0 Isolation</span></span><br/>                                                             | <span data-ttu-id="8c26e-134">Les services s’exécutent toujours dans la session 0.</span><span class="sxs-lookup"><span data-stu-id="8c26e-134">Services have always run in session 0.</span></span> <span data-ttu-id="8c26e-135">Avant Windows Vista, le premier utilisateur à se connecter était également affecté à la session 0.</span><span class="sxs-lookup"><span data-stu-id="8c26e-135">Before Windows Vista, the first user to log on was also assigned to session 0.</span></span> <span data-ttu-id="8c26e-136">À présent, la session 0 est réservée exclusivement aux services et autres applications qui ne sont pas associés à une session utilisateur interactive.</span><span class="sxs-lookup"><span data-stu-id="8c26e-136">Now, session 0 is reserved exclusively for services and other applications not associated with an interactive user session.</span></span> <span data-ttu-id="8c26e-137">(Le premier utilisateur à se connecter est connecté à la session 1, le deuxième utilisateur à se connecter est connecté à la session 2, et ainsi de suite.) La session 0 ne prend pas en charge les processus qui interagissent avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8c26e-137">(The first user to log on is connected to session 1, the second user to log on is connected to session 2, and so on.) Session 0 does not support processes that interact with the user.</span></span><br/> <span data-ttu-id="8c26e-138">Cette modification signifie qu’un service ne peut pas poster ou envoyer un message à une application et qu’une application ne peut pas envoyer ou poster un message à un service.</span><span class="sxs-lookup"><span data-stu-id="8c26e-138">This change means that a service cannot post or send a message to an application and an application cannot send or post a message to a service.</span></span> <span data-ttu-id="8c26e-139">En outre, les services ne peuvent pas afficher directement un élément de l’interface utilisateur, par exemple une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="8c26e-139">In addition, services cannot display a user interface item such as a dialog box directly.</span></span> <span data-ttu-id="8c26e-140">Un service peut utiliser la fonction [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) pour afficher une boîte de dialogue dans une autre session.</span><span class="sxs-lookup"><span data-stu-id="8c26e-140">A service can use the [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) function to display a dialog box in another session.</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="8c26e-141">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="8c26e-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8c26e-142">Services</span><span class="sxs-lookup"><span data-stu-id="8c26e-142">Services</span></span>](services.md)
</dt> </dl>

 

