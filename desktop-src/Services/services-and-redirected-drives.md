---
description: Un service (ou tout processus s’exécutant dans un contexte de sécurité différent) qui doit accéder à une ressource distante doit utiliser le nom UNC (Universal Naming Convention) pour accéder à la ressource.
ms.assetid: 2582259d-077c-4089-9a87-1a377994f0bd
title: Services et lecteurs redirigés
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a3b1435e69ded3bf13a0869a0b9ad2b90bb4682c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103952876"
---
# <a name="services-and-redirected-drives"></a><span data-ttu-id="c5cf3-103">Services et lecteurs redirigés</span><span class="sxs-lookup"><span data-stu-id="c5cf3-103">Services and Redirected Drives</span></span>

<span data-ttu-id="c5cf3-104">Un service (ou tout processus s’exécutant dans un contexte de sécurité différent) qui doit accéder à une ressource distante doit utiliser le nom UNC (Universal Naming Convention) pour accéder à la ressource.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-104">A service (or any process running in a different security context) that must access a remote resource should use the Universal Naming Convention (UNC) name to access the resource.</span></span> <span data-ttu-id="c5cf3-105">Le service doit disposer des privilèges appropriés pour accéder à la ressource.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-105">The service must have appropriate privileges to access the resource.</span></span> <span data-ttu-id="c5cf3-106">Si un service côté serveur utilise une connexion RPC, la délégation doit être activée sur le serveur distant.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-106">If a server-side service uses an RPC connection, delegation must be enabled on the remote server.</span></span>

<span data-ttu-id="c5cf3-107">Les lettres de lecteur ne sont pas globales pour le système.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-107">Drive letters are not global to the system.</span></span> <span data-ttu-id="c5cf3-108">Chaque session de connexion reçoit son propre ensemble de lettres de lecteur de A à Z. Par conséquent, les lecteurs redirigés ne peuvent pas être partagés entre des processus s’exécutant sous des comptes d’utilisateur différents.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-108">Each logon session receives its own set of drive letters from A to Z. Therefore, redirected drives cannot be shared between processes running under different user accounts.</span></span> <span data-ttu-id="c5cf3-109">En outre, un service (ou tout processus s’exécutant au sein de sa propre session de connexion) ne peut pas accéder aux lettres de lecteur qui ont été établies au cours d’une session de connexion différente.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-109">Moreover, a service (or any process running within its own logon session) cannot access the drive letters that were established within a different logon session.</span></span>

<span data-ttu-id="c5cf3-110">Un service ne doit pas accéder directement aux ressources réseau ou locales par le biais de lettres de lecteur mappées, ni appeler la commande **net use** pour mapper les lettres de lecteur au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-110">A service should not directly access local or network resources through mapped drive letters, nor should it call the **net use** command to map drive letters at run time.</span></span> <span data-ttu-id="c5cf3-111">La commande **net use** n’est pas recommandée pour plusieurs raisons :</span><span class="sxs-lookup"><span data-stu-id="c5cf3-111">The **net use** command is not recommended for several reasons:</span></span>

-   <span data-ttu-id="c5cf3-112">Les mappages de lecteur sont disponibles dans les contextes d’ouverture de session. par conséquent, si une application s’exécute dans le contexte du [compte LocalService](localservice-account.md), tout autre service s’exécutant dans ce contexte peut avoir accès au lecteur mappé.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-112">Drive mappings exist across logon contexts, so if an application is running in the context of the [LocalService account](localservice-account.md), then any other service running in that context may have access to the mapped drive.</span></span>
-   <span data-ttu-id="c5cf3-113">Si le service fournit des informations d’identification explicites à une commande **net use** , ces informations d’identification peuvent être partagées par inadvertance en dehors des limites de service.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-113">If the service provides explicit credentials to a **net use** command, those credentials might be inadvertently shared outside of the service boundaries.</span></span> <span data-ttu-id="c5cf3-114">Au lieu de cela, le service doit utiliser l' [emprunt d’identité du client](/windows/desktop/SecAuthZ/client-impersonation) pour emprunter l’identité de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-114">Instead, the service should use [client impersonation](/windows/desktop/SecAuthZ/client-impersonation) to impersonate the user.</span></span>
-   <span data-ttu-id="c5cf3-115">Plusieurs services exécutés dans le même contexte peuvent interférer entre eux.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-115">Multiple services running in the same context may interfere with each other.</span></span> <span data-ttu-id="c5cf3-116">Si les deux services effectuent une **utilisation net** explicite et fournissent les mêmes informations d’identification en même temps, un service échoue et une erreur « déjà connecté » s’affiche.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-116">If both services perform an explicit **net use** and provide the same credentials at the same time, one service will fail with an "already connected" error.</span></span>

<span data-ttu-id="c5cf3-117">En outre, un service ne doit pas utiliser les [fonctions de réseau Windows](/windows/desktop/WNet/windows-networking-functions) pour gérer les lettres de lecteur mappées.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-117">Additionally, a service should not use the [Windows Networking Functions](/windows/desktop/WNet/windows-networking-functions) to manage mapped drive letters.</span></span> <span data-ttu-id="c5cf3-118">Bien que les fonctions WNet puissent retourner avec succès, le comportement qui en résulte n’est pas le même que prévu.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-118">Although the WNet functions may return successfully, the resulting behavior is not as intended.</span></span> <span data-ttu-id="c5cf3-119">Lorsque le système établit un lecteur Redirigé, il est stocké par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-119">When the system establishes a redirected drive, it is stored on a per-user basis.</span></span> <span data-ttu-id="c5cf3-120">Seul l’utilisateur est en mesure de gérer le lecteur Redirigé.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-120">Only the user is able to manage the redirected drive.</span></span> <span data-ttu-id="c5cf3-121">Le système effectue le suivi des lecteurs redirigés en fonction de l’identificateur de sécurité (SID) d’ouverture de session de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-121">The system keeps track of redirected drives based on the user's logon security identifier (SID).</span></span> <span data-ttu-id="c5cf3-122">Le SID d’ouverture de session est un identificateur unique pour la session d’ouverture de session de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-122">The logon SID is a unique identifier for the user's logon session.</span></span> <span data-ttu-id="c5cf3-123">Un seul utilisateur peut avoir plusieurs sessions d’ouverture de session simultanées sur le système.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-123">A single user can have multiple, simultaneous logon sessions on the system.</span></span>

<span data-ttu-id="c5cf3-124">Si un service est configuré pour s’exécuter sous un compte d’utilisateur, le système crée toujours une nouvelle session d’ouverture de session pour l’utilisateur et démarre le service dans cette nouvelle session.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-124">If a service is configured to run under a user account, the system always creates a new logon session for the user and starts the service in that new logon session.</span></span> <span data-ttu-id="c5cf3-125">Par conséquent, un service ne peut pas gérer les mappages de lecteur établis dans les autres sessions de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-125">Therefore, a service cannot manage the drive mappings established within the user's other sessions.</span></span>

<span data-ttu-id="c5cf3-126">**Windows Server 2003 :** Sur un ordinateur doté de plusieurs interfaces réseau (autrement dit, un ordinateur multirésident), un délai pouvant atteindre 60 secondes peut se produire lors de l’utilisation de chemins d’accès UNC pour accéder aux fichiers stockés sur un serveur SMB (Server Message Block) distant.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-126">**Windows Server 2003:** On a computer that has multiple network interfaces (that is, a multihomed computer), delays up to 60 seconds may occur when using UNC paths to access files that are stored on a remote server message block (SMB) server.</span></span> <span data-ttu-id="c5cf3-127">Pour plus d’informations, voir l' [article 890553](https://support.microsoft.com/kb/890553) de la base de connaissances d’aide et de support.</span><span class="sxs-lookup"><span data-stu-id="c5cf3-127">For more information, see [article 890553](https://support.microsoft.com/kb/890553) in the Help and Support Knowledge Base.</span></span>

 

 
