---
title: Écriture de fichiers sur l’appareil
description: Écriture de fichiers sur l’appareil
ms.assetid: 66eaed16-032b-4ac0-a768-aded80f10255
keywords:
- Gestionnaire de périphériques Windows Media, écriture de fichiers sur des appareils
- Gestionnaire de périphériques, écriture de fichiers sur des appareils
- Guide de programmation, écriture de fichiers sur des appareils
- applications de bureau, écriture de fichiers sur des appareils
- création d’applications Windows Media Gestionnaire de périphériques, écriture de fichiers sur des appareils
- écriture de fichiers sur des appareils, à propos de
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 62d8b5234cc275eed1b4aa344c16a2b927b8122d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104507058"
---
# <a name="writing-files-to-the-device"></a><span data-ttu-id="2ceff-109">Écriture de fichiers sur l’appareil</span><span class="sxs-lookup"><span data-stu-id="2ceff-109">Writing Files to the Device</span></span>

<span data-ttu-id="2ceff-110">Avant d’envoyer un fichier à un appareil, votre application doit connaître les types de fichiers et de formats que l’appareil peut gérer, afin que l’application puisse déterminer si le fichier doit être transcodé avant d’envoyer ou envoyé, ou s’il n’a pas été envoyé du tout.</span><span class="sxs-lookup"><span data-stu-id="2ceff-110">Before sending a file to a device, your application must find out what types of files and formats the device can handle, so that the application can determine whether the file should be transcoded before sending, or sent unmodified, or not sent at all.</span></span>

<span data-ttu-id="2ceff-111">Les étapes suivantes montrent comment envoyer un fichier existant à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="2ceff-111">The following steps show how to send an existing file down to the device.</span></span> <span data-ttu-id="2ceff-112">Pour créer un nouveau fichier sur l’appareil, par exemple une sélection, consultez [création d’une sélection sur l’appareil](creating-a-playlist-on-the-device.md).</span><span class="sxs-lookup"><span data-stu-id="2ceff-112">To create a new file on the device, such as a playlist, see [Creating a Playlist on the Device](creating-a-playlist-on-the-device.md).</span></span>

1.  <span data-ttu-id="2ceff-113">Obtient le format du fichier que vous souhaitez envoyer à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="2ceff-113">Get the format of the file you intend to send to the device.</span></span> <span data-ttu-id="2ceff-114">Pour plus d’informations, consultez [découverte du format d’un fichier](discovering-a-files-format.md).</span><span class="sxs-lookup"><span data-stu-id="2ceff-114">For more information, see [Discovering a File's Format](discovering-a-files-format.md).</span></span>
2.  <span data-ttu-id="2ceff-115">Si l’appareil est destiné à lire le fichier,</span><span class="sxs-lookup"><span data-stu-id="2ceff-115">If the device is intended to play the file,</span></span>
    -   <span data-ttu-id="2ceff-116">Interrogez le fichier sur ses fonctionnalités de format.</span><span class="sxs-lookup"><span data-stu-id="2ceff-116">Query the file for its format capabilities.</span></span> <span data-ttu-id="2ceff-117">Pour plus d’informations, consultez [découverte des fonctionnalités de format des appareils](discovering-device-format-capabilities.md).</span><span class="sxs-lookup"><span data-stu-id="2ceff-117">For more information, see [Discovering Device Format Capabilities](discovering-device-format-capabilities.md).</span></span>
    -   <span data-ttu-id="2ceff-118">Recherchez un format acceptable que l’application peut créer à partir du fichier d’origine.</span><span class="sxs-lookup"><span data-stu-id="2ceff-118">Find an acceptable format that the application can create from the original file.</span></span>
    -   <span data-ttu-id="2ceff-119">Si le fichier doit être transcodé, transcodez-le.</span><span class="sxs-lookup"><span data-stu-id="2ceff-119">If the file needs to be transcoded, transcode it.</span></span>
3.  <span data-ttu-id="2ceff-120">Recherchez un stockage parent pour le nouvel objet.</span><span class="sxs-lookup"><span data-stu-id="2ceff-120">Find a parent storage for the new object.</span></span> <span data-ttu-id="2ceff-121">Windows Media Gestionnaire de périphériques ne permet pas de découvrir l’emplacement de stockage standard pour tous les types de fichiers spécifiques (fichiers vidéo ou audio, WMV ou BMP, dossier « Favoris », etc.). vous devez donc examiner chaque appareil pour essayer de déterminer où stocker le nouvel objet.</span><span class="sxs-lookup"><span data-stu-id="2ceff-121">Windows Media Device Manager does not provide a way to discover the standard storage location for any particular file types (video or audio files, WMV or BMP, a "Favorites" folder, and so on), so you will have to examine each device to try to figure out where best to store the new object.</span></span> <span data-ttu-id="2ceff-122">(D’autres applications appliquent une certaine structure de dossiers, par exemple, le lecteur Windows Media crée des albums, des sélections et des dossiers musicaux dans lesquels le dossier musique contient un artiste et une hiérarchie AlbumName.</span><span class="sxs-lookup"><span data-stu-id="2ceff-122">(Other applications enforce a certain folder structure, for example, Windows Media Player creates Albums, Playlists and Music folders where the Music folder contains an Artist and AlbumName heirarchy.</span></span> <span data-ttu-id="2ceff-123">Pour cette raison, et comme certains périphériques n’ont peut-être pas été testés avec un logiciel autre que le lecteur Windows Media, sachez que le placement d’objets de sélection ou d’album dans un dossier autre que les dossiers de sélection ou d’albums peut parfois entraîner la non-fonctionnement des objets sur certains appareils.)</span><span class="sxs-lookup"><span data-stu-id="2ceff-123">For this reason, and because some devices may not have been tested with software other than Windows Media Player, be aware that the placement of playlist or album objects in any folder other than the Playlists or Albums folders may sometimes lead to nonfunctioning objects on some devices.)</span></span>
4.  <span data-ttu-id="2ceff-124">Si le stockage cible prend en charge [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3), créez une nouvelle interface de métadonnées en appelant [**IWMDMStorage3 :: CreateEmptyMetadataObject**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject).</span><span class="sxs-lookup"><span data-stu-id="2ceff-124">If the target storage supports [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3), create a new metadata interface by calling [**IWMDMStorage3::CreateEmptyMetadataObject**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject).</span></span> <span data-ttu-id="2ceff-125">Définissez les métadonnées sur une interface [**IWMDMMetaData**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmmetadata) .</span><span class="sxs-lookup"><span data-stu-id="2ceff-125">Set metadata on an [**IWMDMMetaData**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmmetadata) interface.</span></span> <span data-ttu-id="2ceff-126">Pour plus d’informations, consultez [définition de métadonnées sur un fichier](setting-metadata-on-a-file.md).</span><span class="sxs-lookup"><span data-stu-id="2ceff-126">For more information, see [Setting Metadata on a File](setting-metadata-on-a-file.md).</span></span> <span data-ttu-id="2ceff-127">Les seules métadonnées requises sont g \_ wszWMDMFormatCode (une valeur [**\_ FORMATCODE WMDM**](wmdm-formatcode.md) décrivant le contenu), mais plus vous pouvez fournir de métadonnées, plus le transfert sera efficace pour le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="2ceff-127">The only required metadata is g\_wszWMDMFormatCode (a [**WMDM\_FORMATCODE**](wmdm-formatcode.md) value describing the content), but the more metadata you can provide, the more efficient the transfer will be for the service provider.</span></span>
5.  <span data-ttu-id="2ceff-128">Envoyez le fichier à l’appareil à l’aide de la méthode [**Insert**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol-insert), [**Insert2**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol2-insert2)ou [**Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3) .</span><span class="sxs-lookup"><span data-stu-id="2ceff-128">Send the file to the device by using the [**Insert**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol-insert), [**Insert2**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol2-insert2), or [**Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3) method.</span></span> <span data-ttu-id="2ceff-129">**Insert3** vous permet d’inclure les métadonnées sur l’appareil dans le cadre de la méthode.</span><span class="sxs-lookup"><span data-stu-id="2ceff-129">**Insert3** allows you to include the metadata on the device as part of the method.</span></span> <span data-ttu-id="2ceff-130">Pour plus d’informations, consultez [envoi du fichier à l’appareil](sending-the-file-to-the-device.md).</span><span class="sxs-lookup"><span data-stu-id="2ceff-130">For more information, see [Sending the File to the Device](sending-the-file-to-the-device.md).</span></span>

<span data-ttu-id="2ceff-131">Du code illustrant chacune de ces étapes est fourni sur les pages de rubrique liées.</span><span class="sxs-lookup"><span data-stu-id="2ceff-131">Code demonstrating each of these steps is provided on the linked topic pages.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2ceff-132">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="2ceff-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2ceff-133">**Création d’une application Windows Media Gestionnaire de périphériques**</span><span class="sxs-lookup"><span data-stu-id="2ceff-133">**Creating a Windows Media Device Manager Application**</span></span>](creating-a-windows-media-device-manager-application.md)
</dt> </dl>

 

 




