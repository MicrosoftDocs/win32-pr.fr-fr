---
title: Découverte des fonctionnalités de format des appareils
description: Découverte des fonctionnalités de format des appareils
ms.assetid: dd139816-dc8c-4e73-9a21-67287bfe6405
keywords:
- Gestionnaire de périphériques Windows Media, fonctionnalités de l’appareil
- Gestionnaire de périphériques, fonctionnalités de l’appareil
- Guide de programmation, fonctionnalités de l’appareil
- applications de bureau, fonctionnalités de l’appareil
- création d’applications Windows Media Gestionnaire de périphériques, fonctionnalités de l’appareil
- écriture de fichiers sur des appareils, fonctionnalités de l’appareil
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c0ee05476f6b84bc85bb81cc7cff5815649f5842
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "106509995"
---
# <a name="discovering-device-format-capabilities"></a><span data-ttu-id="329ed-109">Découverte des fonctionnalités de format des appareils</span><span class="sxs-lookup"><span data-stu-id="329ed-109">Discovering Device Format Capabilities</span></span>

<span data-ttu-id="329ed-110">Votre application peut tenter de déterminer les fonctionnalités de lecture d’un appareil avant de lui envoyer un fichier.</span><span class="sxs-lookup"><span data-stu-id="329ed-110">Your application might try to determine a device's playback capabilities before sending a file to it.</span></span> <span data-ttu-id="329ed-111">Si un appareil ne peut pas gérer le format d’un fichier que vous souhaitez envoyer, votre application peut tenter de Transcoder le fichier dans un format que l’appareil peut utiliser, ou informer l’utilisateur que l’appareil ne peut pas prendre en charge le fichier demandé.</span><span class="sxs-lookup"><span data-stu-id="329ed-111">If a device cannot handle the format of a file you want to send, your application might attempt to transcode the file into a format that the device can use, or notify the user that the device cannot support the requested file.</span></span>

<span data-ttu-id="329ed-112">Notez que certains périphériques, tels que les périphériques de classe de stockage de masse, peuvent servir uniquement de supports de stockage amovibles sans capacités de lecture.</span><span class="sxs-lookup"><span data-stu-id="329ed-112">Note that some devices, such as mass storage class devices, might serve only as removable storage media without playback capabilities.</span></span> <span data-ttu-id="329ed-113">Dans ce cas, il serait inapproprié pour votre application de transcoder un fichier avant de l’envoyer à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="329ed-113">In this case, it would be inappropriate for your application to transcode a file before sending it to the device.</span></span>

<span data-ttu-id="329ed-114">Bien que la méthode [**IWMDMDevice :: GetType**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-gettype) permette à un appareil de signaler ses fonctionnalités, certains appareils retournent des valeurs incorrectes pour cette méthode.</span><span class="sxs-lookup"><span data-stu-id="329ed-114">Although the [**IWMDMDevice::GetType**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-gettype) method enables a device to report its capabilities, some devices return incorrect values for this method.</span></span> <span data-ttu-id="329ed-115">Avant de copier un fichier sur un appareil, vous souhaiterez peut-être demander à l’utilisateur si la lecture est prévue et, le cas échéant, tenter de Transcoder le fichier dans l’un des formats signalés de l’appareil (ou un format raisonnable, si l’appareil réclame une prise en charge de n’importe quel format).</span><span class="sxs-lookup"><span data-stu-id="329ed-115">Before copying a file to a device, you might want to ask the user whether playback is intended, and if so, attempt to transcode the file to one of the device's reported formats (or a reasonable format, if the device claims support for any format).</span></span> <span data-ttu-id="329ed-116">Une autre approche consiste à supposer que tous les formats spécifiquement répertoriés comme pris en charge par l’appareil sont destinés à la lecture, et que tous les autres fichiers doivent être transférés sans modification.</span><span class="sxs-lookup"><span data-stu-id="329ed-116">Another approach is to assume that any formats specifically listed as supported by the device are intended for playback, and all other files should be transferred unmodified.</span></span>

<span data-ttu-id="329ed-117">Après avoir découvert le format du fichier à transférer et les formats pris en charge par un appareil, vous pouvez choisir celui qui est le meilleur format cible pour le transcodage.</span><span class="sxs-lookup"><span data-stu-id="329ed-117">After discovering the format of the file to be transferred, and the formats supported by a device, you can decide which is the best target format for transcoding.</span></span>

<span data-ttu-id="329ed-118">Dans le passé, il était courant pour une application de retourner zéro pour une propriété afin d’indiquer la prise en charge de toutes les valeurs de cette propriété.</span><span class="sxs-lookup"><span data-stu-id="329ed-118">In the past, it was common for an application to return zero for a property to indicate support for any values of that property.</span></span> <span data-ttu-id="329ed-119">Par exemple, la valeur zéro pour [**\_ WAVEFORMATEX**](-waveformatex.md). nSamplesPerSec indique la prise en charge de n’importe quelle vitesse de transmission.</span><span class="sxs-lookup"><span data-stu-id="329ed-119">For example, a value of zero for [**\_WAVEFORMATEX**](-waveformatex.md).nSamplesPerSec would indicate support for any bit rate.</span></span> <span data-ttu-id="329ed-120">À présent, la méthode recommandée pour indiquer la prise en charge de n’importe quelle valeur est de spécifier \_ \_ \_ les valeurs valides de WMDM enum prop \_ \_ dans [**WMDM \_ prop \_ desc**](wmdm-prop-desc.md). ValidValuesForm.</span><span class="sxs-lookup"><span data-stu-id="329ed-120">Now, the recommended way to indicate support for any value is to specify WMDM\_ENUM\_PROP\_VALID\_VALUES\_ANY in [**WMDM\_PROP\_DESC**](wmdm-prop-desc.md).ValidValuesForm.</span></span> <span data-ttu-id="329ed-121">Toutefois, certaines propriétés peuvent retourner légitimement zéro pour indiquer une prise en charge spécifique.</span><span class="sxs-lookup"><span data-stu-id="329ed-121">Some properties, though, can legitimately return zero to indicate specific support.</span></span> <span data-ttu-id="329ed-122">Par exemple, si [**\_ BITMAPINFOHEADER**](-bitmapinfoheader.md). biSizeImage est défini sur zéro, cela indique une \_ bitmap RGB bi.</span><span class="sxs-lookup"><span data-stu-id="329ed-122">For example, if [**\_BITMAPINFOHEADER**](-bitmapinfoheader.md).biSizeImage is set to zero, this indicates a BI\_RGB bitmap.</span></span> <span data-ttu-id="329ed-123">Les exceptions pour les valeurs zéro sont indiquées dans la documentation pour les structures pertinentes.</span><span class="sxs-lookup"><span data-stu-id="329ed-123">Exceptions for zero values are noted in the documentation for the relevant structures.</span></span>

<span data-ttu-id="329ed-124">Toutefois, il est important de noter que les appareils ne signalent pas correctement leurs fonctionnalités de format ou de manière standard.</span><span class="sxs-lookup"><span data-stu-id="329ed-124">However, it is important to note that devices often do not report their format capabilities properly, or in a standard way.</span></span> <span data-ttu-id="329ed-125">Par exemple, les appareils signalent souvent qu’ils prennent en charge n’importe quel format, en fait, ils peuvent uniquement gérer des formats spécifiques, ou des vitesses de bits spécifiques au sein d’un type de format.</span><span class="sxs-lookup"><span data-stu-id="329ed-125">For example, devices often report that they support any format, when in fact they can only handle specific formats, or specific bit rates within a format type.</span></span> <span data-ttu-id="329ed-126">C’est à vous de décider si votre application doit accepter ces rapports, ou si elle doit supposer un type de limite supérieure aux capacités de lecture d’un appareil (par exemple, 192 Kbits/s).</span><span class="sxs-lookup"><span data-stu-id="329ed-126">It is up to you to decide whether your application should accept such reports, or whether it should assume some kind of upper limit to a device's playback abilities (for example, 192 kbps).</span></span>

<span data-ttu-id="329ed-127">La méthode recommandée pour demander la prise en charge du format d’un appareil est [**IWMDMDevice3 :: GetFormatCapability**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice3-getformatcapability).</span><span class="sxs-lookup"><span data-stu-id="329ed-127">The recommended method for requesting a device's format support is [**IWMDMDevice3::GetFormatCapability**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice3-getformatcapability).</span></span> <span data-ttu-id="329ed-128">Si cette méthode n’est pas prise en charge, votre application doit revenir à [**IWMDMDevice :: GetFormatSupport**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-getformatsupport).</span><span class="sxs-lookup"><span data-stu-id="329ed-128">If this method is not supported, your application should fall back on [**IWMDMDevice::GetFormatSupport**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-getformatsupport).</span></span> <span data-ttu-id="329ed-129">**GetFormatSupport**, contrairement à **GetFormatSupport2**, ne retourne pas d’informations vidéo.</span><span class="sxs-lookup"><span data-stu-id="329ed-129">**GetFormatSupport**, unlike **GetFormatSupport2**, does not return video information.</span></span>

<span data-ttu-id="329ed-130">La façon dont une application demande les capacités de format d’un appareil dépend de l’interface prise en charge par l’application.</span><span class="sxs-lookup"><span data-stu-id="329ed-130">How an application requests a device's format capabilities depends on which interface the application supports.</span></span> <span data-ttu-id="329ed-131">Pour plus de détails, consultez les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="329ed-131">For more details, see the following topics:</span></span>

-   [<span data-ttu-id="329ed-132">Obtention des fonctionnalités de format sur les appareils qui prennent en charge IWMDMDevice3</span><span class="sxs-lookup"><span data-stu-id="329ed-132">Getting Format Capabilities on Devices That Support IWMDMDevice3</span></span>](getting-format-capabilities-on-devices-that-support-iwmdmdevice3.md)
-   [<span data-ttu-id="329ed-133">Obtention des fonctionnalités de format sur les appareils qui prennent en charge uniquement IWMDMDevice</span><span class="sxs-lookup"><span data-stu-id="329ed-133">Getting Format Capabilities on Devices That Support Only IWMDMDevice</span></span>](getting-format-capabilities-on-devices-that-support-only-iwmdmdevice.md)

## <a name="related-topics"></a><span data-ttu-id="329ed-134">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="329ed-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="329ed-135">**Écriture de fichiers sur l’appareil**</span><span class="sxs-lookup"><span data-stu-id="329ed-135">**Writing Files to the Device**</span></span>](writing-files-to-the-device.md)
</dt> </dl>

 

 




