---
title: Structure de l’exemple d’application de bureau
description: Structure de l’exemple d’application de bureau
ms.assetid: e042470d-dc78-488c-bcad-2e8d34714d5d
keywords:
- Gestionnaire de périphériques Windows Media, exemples
- Gestionnaire de périphériques, exemples
- applications de bureau, exemples
- Windows Media Gestionnaire de périphériques, exemple d’application de bureau
- Gestionnaire de périphériques, exemple d’application de bureau
- exemples, applications de bureau
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 34fb377c1bb6ebf943721b55ec6175e65f70ddde
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "103673613"
---
# <a name="structure-of-the-sample-desktop-application"></a><span data-ttu-id="3c75a-109">Structure de l’exemple d’application de bureau</span><span class="sxs-lookup"><span data-stu-id="3c75a-109">Structure of the Sample Desktop Application</span></span>

<span data-ttu-id="3c75a-110">L’exemple d’application de bureau se compose de deux parties principales :</span><span class="sxs-lookup"><span data-stu-id="3c75a-110">The sample desktop application consists of two main pieces:</span></span>

-   <span data-ttu-id="3c75a-111">Le projet wmdapp contient la plupart des classes qui affichent l’interface utilisateur, gèrent le glisser-déplacer et effectuent toutes les fonctionnalités requises du programme.</span><span class="sxs-lookup"><span data-stu-id="3c75a-111">The wmdapp project contains most of the classes that display the user interface, handle dragging and dropping, and perform all the required functionality of the program.</span></span>
-   <span data-ttu-id="3c75a-112">Le projet proghelp est une application d’assistance qui contient des classes non essentielles pour gérer les notifications d’État et les transferts de fichiers manuels du bureau vers l’application.</span><span class="sxs-lookup"><span data-stu-id="3c75a-112">The proghelp project is a helper application that contains nonessential classes to handle status notifications and manual file transfers from the desktop to the application.</span></span>

<span data-ttu-id="3c75a-113">L’exécutable utilise le projet d’assistance uniquement lorsque l’utilisateur sélectionne **utiliser l’interface** de l’opération dans le menu **options** pour gérer le transfert de fichiers manuel vers l’appareil et pour incrémenter la barre d’État dans le formulaire de progression du téléchargement.</span><span class="sxs-lookup"><span data-stu-id="3c75a-113">The executable uses the helper project only when the user selects **Use Operation Interface** on the **Options** menu to handle manual file transfer to the device, and to increment the status bar in the download progress form.</span></span> <span data-ttu-id="3c75a-114">Tout le reste de l’application est géré dans le projet wmdapp.</span><span class="sxs-lookup"><span data-stu-id="3c75a-114">All the rest of the application is handled in the wmdapp project.</span></span>



| <span data-ttu-id="3c75a-115">Classe</span><span class="sxs-lookup"><span data-stu-id="3c75a-115">Class</span></span>                | <span data-ttu-id="3c75a-116">Fichier</span><span class="sxs-lookup"><span data-stu-id="3c75a-116">File</span></span>                    | <span data-ttu-id="3c75a-117">Description</span><span class="sxs-lookup"><span data-stu-id="3c75a-117">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                     |
|----------------------|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3c75a-118">—</span><span class="sxs-lookup"><span data-stu-id="3c75a-118">—</span></span>                    | <span data-ttu-id="3c75a-119">wmdmapp. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-119">wmdmapp.cpp</span></span>             | <span data-ttu-id="3c75a-120">Classe qui gère la fenêtre parente de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="3c75a-120">The class that handles the parent window of the user interface.</span></span> <span data-ttu-id="3c75a-121">Le code de ce fichier gère également une entrée utilisateur non gérée par CDevFiles, telle que la création d’une sélection ou d’un album sur un appareil, la suppression de fichiers et l’inscription de choix de menu.</span><span class="sxs-lookup"><span data-stu-id="3c75a-121">The code in this file also handles some user input not handled by CDevFiles, such as creating a playlist or album on a device, deleting files, and registering menu choices.</span></span>                                                                                                                                                    |
| <span data-ttu-id="3c75a-122">CDevices</span><span class="sxs-lookup"><span data-stu-id="3c75a-122">CDevices</span></span>             | <span data-ttu-id="3c75a-123">Devices. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-123">Devices.cpp</span></span>             | <span data-ttu-id="3c75a-124">Classe qui gère le volet gauche de la fenêtre d’application principale, où les périphériques disponibles sont répertoriés.</span><span class="sxs-lookup"><span data-stu-id="3c75a-124">The class that handles the left-hand pane of the main application window, where the available devices are listed.</span></span> <span data-ttu-id="3c75a-125">Cette classe gère la boucle de messagerie, qui gère les entrées d’utilisateur, telles que la sélection d’un appareil et la notification au volet CDevFiles de charger les fichiers appropriés lorsque la sélection de l’appareil a été modifiée.</span><span class="sxs-lookup"><span data-stu-id="3c75a-125">This class manages the messaging loop, which handles user input such as selecting a device and notifying the CDevFiles pane to load the appropriate files when the device selection has changed.</span></span>                                                                              |
| <span data-ttu-id="3c75a-126">CDevFiles</span><span class="sxs-lookup"><span data-stu-id="3c75a-126">CDevFiles</span></span>            | <span data-ttu-id="3c75a-127">Devfiles. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-127">Devfiles.cpp</span></span>            | <span data-ttu-id="3c75a-128">Classe qui gère le volet de droite de la fenêtre d’application principale, où les fichiers sur l’appareil sélectionné sont répertoriés.</span><span class="sxs-lookup"><span data-stu-id="3c75a-128">The class that handles the right-hand pane of the main application window, where the files on the selected device are listed.</span></span> <span data-ttu-id="3c75a-129">Cette classe gère la boucle de messagerie et gère l’entrée de l’utilisateur, par exemple, en faisant glisser des fichiers sur l’appareil et en supprimant des fichiers de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="3c75a-129">This class manages the messaging loop, and handles user input such as dragging files onto the device and deleting files from the device.</span></span>                                                                                                                          |
| <span data-ttu-id="3c75a-130">CStatus</span><span class="sxs-lookup"><span data-stu-id="3c75a-130">CStatus</span></span>              | <span data-ttu-id="3c75a-131">État. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-131">Status.cpp</span></span>              | <span data-ttu-id="3c75a-132">Classe qui gère la barre d’État inférieure dans la fenêtre principale, où le nombre de périphériques et de fichiers est indiqué, ainsi que la quantité de mémoire disponible et utilisée sur l’appareil sélectionné.</span><span class="sxs-lookup"><span data-stu-id="3c75a-132">The class that handles the bottom status bar in the main window, where the number of devices and files is listed, along with the amount of free and used memory on the selected device.</span></span>                                                                                                                                                                                                         |
| <span data-ttu-id="3c75a-133">CWMDM</span><span class="sxs-lookup"><span data-stu-id="3c75a-133">CWMDM</span></span>                | <span data-ttu-id="3c75a-134">Wmdevmgr. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-134">Wmdevmgr.cpp</span></span>            | <span data-ttu-id="3c75a-135">Interface de niveau supérieur pour Windows Media Gestionnaire de périphériques.</span><span class="sxs-lookup"><span data-stu-id="3c75a-135">The top-level interface for Windows Media Device Manager.</span></span> <span data-ttu-id="3c75a-136">Cette classe gère l’authentification, récupère l’interface **IWMDeviceManager** de niveau supérieur et s’inscrit pour les notifications avec l’interface **IWMDMNotification** .</span><span class="sxs-lookup"><span data-stu-id="3c75a-136">This class handles authentication, retrieves the top-level **IWMDeviceManager** interface, and registers for notifications with the **IWMDMNotification** interface.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="3c75a-137">CProgress</span><span class="sxs-lookup"><span data-stu-id="3c75a-137">CProgress</span></span>            | <span data-ttu-id="3c75a-138">Progress. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-138">Progress.cpp</span></span>            | <span data-ttu-id="3c75a-139">Classe dans le projet d’application principal qui crée et gère la boîte de dialogue indiquant la progression d’un événement.</span><span class="sxs-lookup"><span data-stu-id="3c75a-139">The class in the main application project that creates and manages the dialog box showing the progress of an event.</span></span>                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="3c75a-140">CItemData</span><span class="sxs-lookup"><span data-stu-id="3c75a-140">CItemData</span></span>            | <span data-ttu-id="3c75a-141">ItemData. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-141">ItemData.cpp</span></span>            | <span data-ttu-id="3c75a-142">Classe wrapper qui contient un pointeur vers un stockage (si représente un fichier ou un dossier sur l’appareil) ou un appareil (si représente un appareil), ainsi qu’une variété d’informations sur l’objet, notamment la taille et les attributs.</span><span class="sxs-lookup"><span data-stu-id="3c75a-142">A wrapper class that holds a pointer to a storage (if representing a file or folder on the device) or a device (if representing a device), as well as a variety of information about the object including size and attributes.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="3c75a-143">CNotificationHandler</span><span class="sxs-lookup"><span data-stu-id="3c75a-143">CNotificationHandler</span></span> | <span data-ttu-id="3c75a-144">Notificationhandler. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-144">Notificationhandler.cpp</span></span> | <span data-ttu-id="3c75a-145">Gère l’arrivée des appareils et les notifications de suppression en alertant la fenêtre CDevices.</span><span class="sxs-lookup"><span data-stu-id="3c75a-145">Handles device arrival and removal notifications by alerting the CDevices window.</span></span>                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="3c75a-146">CProgressHelper</span><span class="sxs-lookup"><span data-stu-id="3c75a-146">CProgressHelper</span></span>      | <span data-ttu-id="3c75a-147">ProgressHelper. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-147">ProgressHelper.cpp</span></span>      | <span data-ttu-id="3c75a-148">Créé par CDevFiles dans les fonctions locales pour recevoir des notifications de Windows Media Gestionnaire de périphériques en implémentant **IWMDMProgress**.</span><span class="sxs-lookup"><span data-stu-id="3c75a-148">Created by CDevFiles in local functions to receive notifications from Windows Media Device Manager by implementing **IWMDMProgress**.</span></span> <span data-ttu-id="3c75a-149">Elle est utilisée par la classe CProgress pour déterminer la quantité de barres dans la barre de progression et lorsqu’une action est terminée.</span><span class="sxs-lookup"><span data-stu-id="3c75a-149">It is used by the CProgress class to determine the amount of bars in the progress bar, and when an action is finished.</span></span> <span data-ttu-id="3c75a-150">Cette classe est définie comme un objet COM qui expose l’interface du kit de développement logiciel (SDK) **IWMDMProgress** et une interface personnalisée IWMDMProgressHelper.</span><span class="sxs-lookup"><span data-stu-id="3c75a-150">This class is defined as a COM object that exposes the SDK interface **IWMDMProgress** and a custom interface IWMDMProgressHelper.</span></span> |
| <span data-ttu-id="3c75a-151">COperationHelper</span><span class="sxs-lookup"><span data-stu-id="3c75a-151">COperationHelper</span></span>     | <span data-ttu-id="3c75a-152">Operationhelper. cpp</span><span class="sxs-lookup"><span data-stu-id="3c75a-152">Operationhelper.cpp</span></span>     | <span data-ttu-id="3c75a-153">Cette classe implémente **IWMDMOperation** pour gérer le transfert manuel de fichiers.</span><span class="sxs-lookup"><span data-stu-id="3c75a-153">This class implements **IWMDMOperation** to handle manual transfer of files.</span></span> <span data-ttu-id="3c75a-154">Elle est multithread pour lui permettre de se produire de manière asynchrone et est définie comme un objet COM qui expose une interface personnalisée, IWMDMOperationHelper, pour instancier et initialiser la classe.</span><span class="sxs-lookup"><span data-stu-id="3c75a-154">It is multi-threaded to allow it to occur asynchronously, and is defined as a COM object that exposes a custom interface, IWMDMOperationHelper, to instantiate and initialize the class.</span></span> <span data-ttu-id="3c75a-155">Cette classe est utilisée uniquement si l’utilisateur sélectionne « utiliser l’interface de l’opération » dans le menu **options** .</span><span class="sxs-lookup"><span data-stu-id="3c75a-155">This class is only used if the user selects "Use Operation Interface" in the **Options** menu.</span></span>                            |



 

<span data-ttu-id="3c75a-156">Les listes suivantes décrivent les étapes de base qui se produisent pour différentes actions de l’utilisateur :</span><span class="sxs-lookup"><span data-stu-id="3c75a-156">The following lists outline the basic steps that occur for various user actions:</span></span>

<span data-ttu-id="3c75a-157">**Au démarrage**</span><span class="sxs-lookup"><span data-stu-id="3c75a-157">**On startup**</span></span>

<span data-ttu-id="3c75a-158">Les étapes principales suivantes se produisent lorsque l’exemple d’application est démarré.</span><span class="sxs-lookup"><span data-stu-id="3c75a-158">The following main steps occur when the sample application is started.</span></span>

1.  <span data-ttu-id="3c75a-159">La variable CWMDM globale est instanciée et authentifiée et s’inscrit pour recevoir des notifications</span><span class="sxs-lookup"><span data-stu-id="3c75a-159">The global CWMDM variable is instantiated and authenticated, and registers to receive notifications</span></span>
2.  <span data-ttu-id="3c75a-160">Un CDevices global est instancié et CDevices :: Create est appelé pour créer et remplir le volet périphériques.</span><span class="sxs-lookup"><span data-stu-id="3c75a-160">A global CDevices is instantiated, and CDevices::Create is called to create and fill the devices pane.</span></span>
3.  <span data-ttu-id="3c75a-161">Un CDevFiles global est instancié et CDevFiles :: Create est appelé pour créer le volet fichiers (qui n’est pas rempli tant que l’utilisateur n’a pas sélectionné un appareil).</span><span class="sxs-lookup"><span data-stu-id="3c75a-161">A global CDevFiles is instantiated, and CDevFiles::Create is called to create the files pane (which is not filled until the user selects a device).</span></span>
4.  <span data-ttu-id="3c75a-162">Un CStatus global est instancié et CStatus :: Create est appelé pour instancier la barre d’État.</span><span class="sxs-lookup"><span data-stu-id="3c75a-162">A global CStatus is instantiated, and CStatus::Create is called to instantiate the status bar.</span></span>
5.  <span data-ttu-id="3c75a-163">\_OnViewRefresh énumère tous les appareils et initialise et ajoute tous les appareils (CItemData) à CDevices et met à jour la barre d’État pour afficher le nombre d’appareils.</span><span class="sxs-lookup"><span data-stu-id="3c75a-163">\_OnViewRefresh enumerates through all devices and initializes and adds all devices (CItemData) to CDevices and updates the status bar to show the number of devices.</span></span>
6.  <span data-ttu-id="3c75a-164">CDevices :: AddItem ajoute l’élément à l’arborescence qui représente les appareils, avec un pointeur vers lui-même en tant que TVITEM. lParam.</span><span class="sxs-lookup"><span data-stu-id="3c75a-164">CDevices::AddItem adds the item to the treeview representing the devices, with a pointer to itself as the TVITEM.lparam.</span></span> <span data-ttu-id="3c75a-165">Tous les objets CDevice (appareils) et CDevFiles (fichier) sont stockés dans ce membre du nœud TreeView dans la fenêtre appropriée.</span><span class="sxs-lookup"><span data-stu-id="3c75a-165">All CDevice (devices) and CDevFiles (file) objects are stored in this member of the treeview node in the appropriate window.</span></span>

<span data-ttu-id="3c75a-166">**Sur la sélection d’un appareil**</span><span class="sxs-lookup"><span data-stu-id="3c75a-166">**On selecting a device**</span></span>

<span data-ttu-id="3c75a-167">Les étapes principales suivantes se produisent lorsque l’utilisateur sélectionne un appareil dans le volet gauche de la fenêtre d’application.</span><span class="sxs-lookup"><span data-stu-id="3c75a-167">The following main steps occur when the user selects a device in the left-hand pane of the application window.</span></span>

1.  <span data-ttu-id="3c75a-168">La fenêtre CDevices intercepte un clic et envoie un \_ message WM DRM \_ UPDATEDEVICE à lui-même.</span><span class="sxs-lookup"><span data-stu-id="3c75a-168">The CDevices window traps a click and posts a WM\_DRM\_UPDATEDEVICE message, to itself.</span></span>
2.  <span data-ttu-id="3c75a-169">CDevices reçoit son propre message et appelle UpdateSelection, qui indique à l’objet CDevFiles global de tout effacer, d’énumérer tous les éléments de niveau supérieur de l’appareil et appelle CDevFiles :: AddItem pour ajouter chaque élément au volet fichiers.</span><span class="sxs-lookup"><span data-stu-id="3c75a-169">CDevices receives its own message and calls UpdateSelection, which tells the global CDevFiles object to clear everything, enumerate all the top-level items in the device, and calls CDevFiles::AddItem to add each to the files pane.</span></span>
3.  <span data-ttu-id="3c75a-170">Enfin, CDevices appelle CDevFiles :: UpdateStatusBar pour mettre à jour la barre d’État avec les informations de périphérique et de fichier appropriées.</span><span class="sxs-lookup"><span data-stu-id="3c75a-170">Finally, CDevices calls CDevFiles::UpdateStatusBar to update the status bar with the correct device and file information.</span></span>

<span data-ttu-id="3c75a-171">**Création d’une sélection**</span><span class="sxs-lookup"><span data-stu-id="3c75a-171">**On creating a playlist**</span></span>

<span data-ttu-id="3c75a-172">Après avoir cliqué sur « créer une sélection » dans le menu **conteneurs** , l’application appelle la fonction locale \_ OnCreatePlaylist, qui effectue les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="3c75a-172">After clicking "Create Playlist" on the **Containers** menu, the application calls the local function \_OnCreatePlaylist, which performs the following actions:</span></span>

1.  <span data-ttu-id="3c75a-173">Obtient le nombre d’éléments sélectionnés à partir de la variable globale CDevFiles.</span><span class="sxs-lookup"><span data-stu-id="3c75a-173">Get the number of selected items from the global CDevFiles variable.</span></span>
2.  <span data-ttu-id="3c75a-174">Appelez la fonction locale DlgNamePlaylist pour ouvrir une boîte de dialogue et obtenir un nom pour la sélection.</span><span class="sxs-lookup"><span data-stu-id="3c75a-174">Call the local function DlgNamePlaylist to open a dialog box to get a name for the playlist.</span></span>
3.  <span data-ttu-id="3c75a-175">Appelez CProgress :: Create pour créer une fenêtre de boîte de dialogue qui indique la progression de l’action, puis définissez les paramètres de la classe CProgress, tels que le texte du titre, la plage, la valeur actuelle, etc.</span><span class="sxs-lookup"><span data-stu-id="3c75a-175">Call the CProgress::Create to create a dialog window showing the progress of the action, and set parameters on the CProgress class, such as the title text, range, current value, and so on.</span></span>
4.  <span data-ttu-id="3c75a-176">Parcourez tous les éléments sélectionnés dans l’arborescence CDevFiles et demandez l’objet CItemData associé à chaque fichier sélectionné dans l’arborescence, en incrémentant la barre de la boîte de dialogue de progression avec chaque fichier.</span><span class="sxs-lookup"><span data-stu-id="3c75a-176">Loop through all the selected items in the CDevFiles tree view object, and request the CItemData object associated with each selected file in the tree view, incrementing the progress dialog bar with each file.</span></span> <span data-ttu-id="3c75a-177">Les fichiers sont ajoutés à un tableau d’interfaces [**IWMDMStorage**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage) .</span><span class="sxs-lookup"><span data-stu-id="3c75a-177">The files are added to an array of [**IWMDMStorage**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage) interfaces.</span></span>
5.  <span data-ttu-id="3c75a-178">Obtient un handle vers l’élément actuellement sélectionné et l’interroger pour une interface [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3) , qui sera utilisée ultérieurement pour créer la nouvelle sélection sur l’appareil.</span><span class="sxs-lookup"><span data-stu-id="3c75a-178">Get a handle to the currently selected item and query it for an [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3) interface, which will be used later to create the new playlist on the device.</span></span>
6.  <span data-ttu-id="3c75a-179">Interrogez l’objet sélectionné pour [**IWMDMStorage3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage3)et appelez [**CreateEmptyMetadataObject**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject) pour créer une nouvelle interface [**IWMDMMetaData**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmmetadata).</span><span class="sxs-lookup"><span data-stu-id="3c75a-179">Query the selected object for [**IWMDMStorage3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage3), and call [**CreateEmptyMetadataObject**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject) to create a new [**IWMDMMetaData**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmmetadata)interface.</span></span>
7.  <span data-ttu-id="3c75a-180">Ajoutez le \_ Code de format WMDM FORMATCODE \_ ABSTRACTAUDIOVIDEOPLAYLIST à la nouvelle interface **IWMDMMetadata** et créez une sélection sur l’appareil en appelant [**IWMDMStorageControl3 :: Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3), en passant l’interface de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="3c75a-180">Add the WMDM\_FORMATCODE\_ABSTRACTAUDIOVIDEOPLAYLIST format code to the new **IWMDMMetadata** interface and create a playlist on the device by calling [**IWMDMStorageControl3::Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3), passing in the metadata interface.</span></span> <span data-ttu-id="3c75a-181">La méthode récupère un pointeur vers le nouveau **IWMDMStorage** sur l’appareil.</span><span class="sxs-lookup"><span data-stu-id="3c75a-181">The method retrieves a pointer to the new **IWMDMStorage** on the device.</span></span>
8.  <span data-ttu-id="3c75a-182">Remplissez la playlist en interrogeant le nouveau stockage pour [**IWMDMStorage4**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage4)et en appelant [**IWMDMStorage4 :: SetReferences**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage4-setreferences), en passant le tableau de pointeurs **IWMDMStorage** recueillis à l’étape 4.</span><span class="sxs-lookup"><span data-stu-id="3c75a-182">Fill the playlist by querying the new storage for [**IWMDMStorage4**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage4), and calling [**IWMDMStorage4::SetReferences**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage4-setreferences), passing in the array of **IWMDMStorage** pointers collected in step 4.</span></span>
9.  <span data-ttu-id="3c75a-183">Enfin, créez un nouvel objet CItemData pour stocker la nouvelle playlist sur l’appareil, initialisez-le avec le nouveau stockage et appelez CDevFiles :: AddItem pour l’ajouter au volet CDevFiles.</span><span class="sxs-lookup"><span data-stu-id="3c75a-183">Finally, create a new CItemData object to hold the new playlist on the device, initialize it with the new storage, and call CDevFiles::AddItem to add it to the CDevFiles pane.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3c75a-184">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="3c75a-184">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3c75a-185">**Exemple d’application de bureau**</span><span class="sxs-lookup"><span data-stu-id="3c75a-185">**Sample Desktop Application**</span></span>](sample-desktop-application.md)
</dt> </dl>

 

 




