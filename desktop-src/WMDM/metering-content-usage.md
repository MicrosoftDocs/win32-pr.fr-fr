---
title: Contrôle de l’utilisation du contenu
description: Contrôle de l’utilisation du contenu
ms.assetid: f87b5d95-a497-4356-817f-49ac3819df08
keywords:
- Gestionnaire de périphériques Windows Media, utilisation du contenu de contrôle
- Gestionnaire de périphériques, utilisation du contenu de contrôle
- Guide de programmation, utilisation du contenu de contrôle
- applications de bureau, utilisation du contenu de contrôle
- création d’applications Windows Media Gestionnaire de périphériques, utilisation du contenu de contrôle
- contrôle de l’utilisation du contenu
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 649eee810e7bbdbc2ea93a32c6368ec345fa7364
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/09/2020
ms.locfileid: "106509886"
---
# <a name="metering-content-usage"></a><span data-ttu-id="42696-109">Contrôle de l’utilisation du contenu</span><span class="sxs-lookup"><span data-stu-id="42696-109">Metering Content Usage</span></span>

<span data-ttu-id="42696-110">Avec la technologie Windows Media 10, vous pouvez désormais mesurer l’utilisation du contenu sur un appareil mobile.</span><span class="sxs-lookup"><span data-stu-id="42696-110">With Windows Media 10 technology, you can now meter content usage on a portable device.</span></span> <span data-ttu-id="42696-111">Si une licence Windows Media 10 autorise le contrôle, l’appareil peut stocker le nombre de lecture des chansons et télécharger à nouveau l’émetteur de licence sur Internet.</span><span class="sxs-lookup"><span data-stu-id="42696-111">If a Windows Media 10 license allows metering, the device can store the play count for songs and upload usage back to the license issuer over the Internet.</span></span> <span data-ttu-id="42696-112">Ce système permet aux fournisseurs de contenu d’ajuster leurs frais de droits en mesurant précisément l’utilisation du contenu.</span><span class="sxs-lookup"><span data-stu-id="42696-112">This system enables content providers to adjust their royalty fees by accurately measuring content usage.</span></span>

<span data-ttu-id="42696-113">Pour mesurer le contenu, l’application doit disposer d’un certificat de contrôle fourni par un service de gestion des licences basé sur le kit de développement logiciel (SDK) Windows Media Rights Manager 10.</span><span class="sxs-lookup"><span data-stu-id="42696-113">To meter content, the application must have a metering certificate provided by a licensing service built on the Windows Media Rights Manager 10 SDK.</span></span> <span data-ttu-id="42696-114">Seul le contenu concédé sous licence par ce même service peut être mesuré.</span><span class="sxs-lookup"><span data-stu-id="42696-114">Only content licensed by this same service can be metered.</span></span> <span data-ttu-id="42696-115">Pour plus d’informations sur le fonctionnement du contrôle et sur la création d’un service de contrôle de licence, consultez la [documentation du kit de développement logiciel (SDK) Windows Media Rights Manager](/previous-versions/ms986509(v=msdn.10)) sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="42696-115">For more information on how metering works, and how to build a license metering service, see the [Windows Media Rights Manager SDK documentation](/previous-versions/ms986509(v=msdn.10)) on MSDN.</span></span> <span data-ttu-id="42696-116">Le kit de développement logiciel (SDK) peut être obtenu en remplissant les informations nécessaires sur la [page Windows Media Licensing](https://www.microsoft.com/licensing/default).</span><span class="sxs-lookup"><span data-stu-id="42696-116">The SDK can be acquired by filling out the necessary information on the [Windows Media Licensing Page](https://www.microsoft.com/licensing/default).</span></span>

<span data-ttu-id="42696-117">Une application peut avoir un contrôle intégré, ou vous pouvez créer un plug-in COM pour une application existante, telle que le lecteur Windows Media, si l’application accepte les plug-ins de contrôle.</span><span class="sxs-lookup"><span data-stu-id="42696-117">An application can have metering built in to it, or you can build a COM plug-in for an existing application, such as the Windows Media Player, if the application accepts metering plug-ins.</span></span>

<span data-ttu-id="42696-118">Une application doit avertir les utilisateurs si l’utilisation du contenu est limitée.</span><span class="sxs-lookup"><span data-stu-id="42696-118">An application should warn users if content usage will be metered.</span></span> <span data-ttu-id="42696-119">Pour plus d’informations, consultez les pages Web Microsoft listées dans la [déclaration de confidentialité](privacy-statement.md).</span><span class="sxs-lookup"><span data-stu-id="42696-119">For more information, see the Microsoft Web pages listed in the [Privacy Statement](privacy-statement.md).</span></span>

<span data-ttu-id="42696-120">L’acquisition des données de contrôle à partir d’un appareil peut être lente.</span><span class="sxs-lookup"><span data-stu-id="42696-120">Acquiring metering data from a device can be slow.</span></span> <span data-ttu-id="42696-121">Par conséquent, si une application mesure son utilisation, elle doit le faire fréquemment pour empêcher l’accumulation de grandes quantités de données sur l’appareil et ralentir le transfert de données.</span><span class="sxs-lookup"><span data-stu-id="42696-121">Therefore, if an application meters usage, it should do so frequently to prevent large amounts of data from accumulating on the device and slowing down the data transfer.</span></span> <span data-ttu-id="42696-122">Pour empêcher les transferts de données trop lents, les fabricants de périphériques peuvent envoyer des sous-ensembles de données de contrôle disponibles.</span><span class="sxs-lookup"><span data-stu-id="42696-122">To prevent data transfers that would be too slow, device manufacturers can send subsets of available metering data.</span></span> <span data-ttu-id="42696-123">L’application doit surveiller les indicateurs récupérés par [**IWMDRMDeviceApp ::P rocessmeterresponse**](iwmdrmdeviceapp-processmeterresponse.md) pour voir si d’autres données de contrôle sont conservées sur l’appareil.</span><span class="sxs-lookup"><span data-stu-id="42696-123">The application should monitor the flags retrieved by [**IWMDRMDeviceApp::ProcessMeterResponse**](iwmdrmdeviceapp-processmeterresponse.md) to see if any more metering data remains on the device.</span></span>

<span data-ttu-id="42696-124">Les étapes suivantes montrent comment une application peut mesurer l’utilisation du contenu.</span><span class="sxs-lookup"><span data-stu-id="42696-124">The following steps show how an application can meter content usage.</span></span>

1.  <span data-ttu-id="42696-125">Étant donné que le contrôle est uniquement disponible sur les appareils qui prennent en charge Windows Media DRM 10 pour les appareils mobiles, votre application doit à un moment donné appeler **QueryDeviceStatus**, comme décrit dans [gestion du contenu protégé dans l’application](handling-protected-content-in-the-application.md), pour garantir que l’appareil est valide et à jour.</span><span class="sxs-lookup"><span data-stu-id="42696-125">Because metering is only available on devices that support Windows Media DRM 10 for Portable Devices, your application should at some point call **QueryDeviceStatus**, as described in [Handling Protected Content in the Application](handling-protected-content-in-the-application.md), to ensure that the device is valid and up to date.</span></span>
2.  <span data-ttu-id="42696-126">Demandez les informations de contrôle de l’appareil en appelant [**IWMDRMDeviceApp :: GenerateMeterChallenge**](iwmdrmdeviceapp-generatemeterchallenge.md).</span><span class="sxs-lookup"><span data-stu-id="42696-126">Request metering information from the device by calling [**IWMDRMDeviceApp::GenerateMeterChallenge**](iwmdrmdeviceapp-generatemeterchallenge.md).</span></span>
3.  <span data-ttu-id="42696-127">Envoyez les données de contrôle récupérées au service de contrôle à l’URL récupérée par **GenerateMeterChallenge**.</span><span class="sxs-lookup"><span data-stu-id="42696-127">Send the retrieved metering data to the metering service at the URL retrieved by **GenerateMeterChallenge**.</span></span> <span data-ttu-id="42696-128">Le format des données envoyées au service dépend de l’écriture de scripts sur ce service particulier.</span><span class="sxs-lookup"><span data-stu-id="42696-128">The format of data sent to the service depends on the scripting on that particular service.</span></span> <span data-ttu-id="42696-129">Par exemple, certains services peuvent nécessiter que les données soient envoyées en tant que commande de publication sous la forme d’une paire nom/valeur.</span><span class="sxs-lookup"><span data-stu-id="42696-129">For example, some services might require the data sent as a POST command as a name/value pair.</span></span> <span data-ttu-id="42696-130">Le fournisseur de services doit vous permettre de connaître les exigences de mise en forme spécifiques.</span><span class="sxs-lookup"><span data-stu-id="42696-130">The service provider should let you know their particular formatting requirements.</span></span>
4.  <span data-ttu-id="42696-131">Obtenir une réponse du service de contrôle et l’envoyer à l’appareil en appelant [**IWMDRMDeviceApp ::P rocessmeterresponse**](iwmdrmdeviceapp-processmeterresponse.md).</span><span class="sxs-lookup"><span data-stu-id="42696-131">Get a response from the metering service, and send it to the device by calling [**IWMDRMDeviceApp::ProcessMeterResponse**](iwmdrmdeviceapp-processmeterresponse.md).</span></span> <span data-ttu-id="42696-132">Cela amène l’appareil à réinitialiser les nombres de lecture et retourne également une valeur indiquant s’il existe des données de contrôle supplémentaires sur l’appareil qui doivent être récupérées en appelant à nouveau **GenerateMeterChallenge** .</span><span class="sxs-lookup"><span data-stu-id="42696-132">This causes the device to reset play counts, and also returns a value indicating whether more metering data exists on the device that should be retrieved by calling **GenerateMeterChallenge** again.</span></span>

<span data-ttu-id="42696-133">Pour obtenir des informations complètes et des exemples de code pour le contrôle, consultez le [site Web Windows Media](/previous-versions//bb614723(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="42696-133">For extensive information and sample code for metering, see the [Windows Media Web site](/previous-versions//bb614723(v=vs.85)).</span></span>

 

 