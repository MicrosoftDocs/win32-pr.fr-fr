---
description: Cette rubrique n’est pas à jour. Pour obtenir les informations les plus récentes, consultez la spécification du schéma d’impression.
ms.assetid: 1f991b6b-8443-4234-ad46-dc4220e34c5c
title: Création d’un PrintTicket générique
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c34281eda82a48ea0ac4077248547522ddc305ea
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/05/2021
ms.locfileid: "106523115"
---
# <a name="creating-a-generic-printticket"></a><span data-ttu-id="a4dcc-104">Création d’un PrintTicket générique</span><span class="sxs-lookup"><span data-stu-id="a4dcc-104">Creating a Generic PrintTicket</span></span>

<span data-ttu-id="a4dcc-105">Cette rubrique n’est pas à jour.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-105">This topic is not current.</span></span> <span data-ttu-id="a4dcc-106">Pour obtenir les informations les plus récentes, consultez la [spécification du schéma d’impression](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span><span class="sxs-lookup"><span data-stu-id="a4dcc-106">For the most current information, see the [Print Schema Specification](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span></span>

<span data-ttu-id="a4dcc-107">Si le document PrintCapabilities pour l’appareil n’est pas disponible, ou si l’appareil cible est inconnu, vous devez construire un PrintTicket générique.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-107">If the PrintCapabilities document for the device is unavailable, or if the target device is unknown, you should construct a generic PrintTicket.</span></span> <span data-ttu-id="a4dcc-108">Étant donné qu’il n’existe aucun document PrintCapabilities fournissant un ensemble d’éléments de fonctionnalité et d’option, ou paramètres, les instances prises en charge de ces types d’éléments doivent être obtenues directement à partir des mots clés du schéma d’impression.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-108">Because there is no PrintCapabilities document that provides a set of Feature and Option elements, or parameters, the supported instances of these element types must be obtained directly from the Print Schema Keywords.</span></span>

<span data-ttu-id="a4dcc-109">Les étapes décrites dans la liste suivante doivent être utilisées lorsque vous créez un PrintTicket générique.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-109">The steps shown in the following list should be used when you create a generic PrintTicket.</span></span>

1.  <span data-ttu-id="a4dcc-110">Créez un document XML vide qui contient la racine PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-110">Create an empty XML document that contains the PrintTicket root.</span></span> <span data-ttu-id="a4dcc-111">Attribuez un préfixe d’espace de noms à l’espace de noms du schéma d’impression.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-111">Assign a namespace prefix to the Print Schema namespace.</span></span> <span data-ttu-id="a4dcc-112">Spécifiez la version du schéma.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-112">Specify the Schema version.</span></span>

2.  <span data-ttu-id="a4dcc-113">Examinez les instances de fonctionnalités dans les mots clés du schéma d’impression et déterminez celles que vous souhaitez définir dans le PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-113">Examine the Feature instances in the Print Schema Keywords and determine which of these you want defined in your PrintTicket.</span></span> <span data-ttu-id="a4dcc-114">Ajoutez ces instances de fonctionnalités à votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-114">Add these Feature instances to your PrintTicket.</span></span> <span data-ttu-id="a4dcc-115">Lorsque vous transférez une sous-fonctionnalité, vous devez transférer la fonctionnalité parente et conserver la relation parent-enfant entre la fonctionnalité et la sous-fonctionnalité dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-115">When you transfer a subfeature, you must transfer the parent Feature, and preserve the parent-child relationship between the Feature and subfeature in the PrintTicket.</span></span>

    <span data-ttu-id="a4dcc-116">Pour chaque instance de fonctionnalité que vous transférez, déterminez les instances d’option applicables à votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-116">For each Feature instance that you transfer, determine which Option instances are applicable to your PrintTicket.</span></span> <span data-ttu-id="a4dcc-117">À partir de cet ensemble d’instances d’option, transférez chaque instance d’option complète telle qu’elle apparaît dans le schéma d’impression, puis supprimez toutes les instances de propriété présentes, à l’exception possible de celles qui ont une signification pour votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-117">From this set of Option instances, transfer each entire Option instance as it appears in the Print Schema, and then remove any Property instances that are present, with the possible exception of those that have significance to your PrintTicket.</span></span> <span data-ttu-id="a4dcc-118">Conservez toutes les instances ScoredProperty, en veillant à conserver leur emplacement. ils constituent une partie intrinsèque de la définition de l’option.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-118">Keep all of the ScoredProperty instances, making sure that you preserve their location; they are an intrinsic part of the Option definition.</span></span>

3.  <span data-ttu-id="a4dcc-119">Vous pouvez également ajouter des instances de propriété à n’importe quel ScoredProperty.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-119">You may also add Property instances to any ScoredProperty.</span></span> <span data-ttu-id="a4dcc-120">Les éléments de propriété sont applicables uniquement si le fournisseur PrintTicket prend explicitement en charge leur utilisation.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-120">Property elements are applicable only if the PrintTicket provider explicitly supports their use.</span></span> <span data-ttu-id="a4dcc-121">Chaque fournisseur doit documenter l’objectif et l’utilisation de toutes les instances de propriété prises en charge.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-121">Each provider should document the purpose and use of all supported Property instances.</span></span> <span data-ttu-id="a4dcc-122">Étant donné que vous n’avez aucune idée du fournisseur qui traitera le PrintTicket, vous souhaiterez peut-être ajouter uniquement les instances de propriété qui sont explicitement prises en charge par le fournisseur PrintTicket du système.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-122">Because you have no idea which provider will process the PrintTicket, you might wish to append only the Property instances that are explicitly supported by the system PrintTicket provider.</span></span>

4.  <span data-ttu-id="a4dcc-123">Si les mots clés du schéma d’impression définissent la propriété SelectionType sur PickMany pour une fonctionnalité particulière, vous pouvez sélectionner plusieurs options pour cette fonctionnalité, à condition que l’option désignée comme IdentityOption ne soit pas l’une de celles sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-123">If the Print Schema Keywords set the SelectionType Property to PickMany for a particular Feature, you may select more than one Option for that Feature, provided that the Option designated as IdentityOption is not one of those selected.</span></span> <span data-ttu-id="a4dcc-124">IdentityOption dans le schéma d’impression a le même effet que l’option None des fichiers PPD PostScript et des fichiers Unidrv GPD. Il sert de non-opération.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-124">IdentityOption in the Print Schema has the same effect as the None option in Postscript PPD files and Unidrv GPD files; it serves as a no-op.</span></span>

5.  <span data-ttu-id="a4dcc-125">Examinez les mots clés du schéma d’impression pour les instances ParameterDef qui doivent être initialisées dans votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-125">Examine the Print Schema Keywords for ParameterDef instances that should be initialized in your PrintTicket.</span></span> <span data-ttu-id="a4dcc-126">Pour chaque instance ParameterDef, sélectionnez la valeur à utiliser dans l’instance ParameterInit dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-126">For each such ParameterDef instance, select the Value to be used in the ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="a4dcc-127">Cette valeur doit être du type de données correct, doit être comprise dans la plage définie dans l’instance ParameterDef et doit satisfaire à toutes les autres exigences spécifiées dans l’instance ParameterDef.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-127">This Value must be of the correct data type, must fall within the range defined in the ParameterDef instance, and must meet all of the other requirements specified in the ParameterDef instance.</span></span> <span data-ttu-id="a4dcc-128">Utilisez une instance ParameterInit pour initialiser le paramètre avec la valeur que vous avez sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-128">Use a ParameterInit instance to initialize the parameter to the Value you have selected.</span></span>

    <span data-ttu-id="a4dcc-129">Si vous développez un composant d’interface utilisateur (IU), concevez vos méthodes de génération PrintTicket afin que les utilisateurs puissent entrer la valeur de l’élément ParameterInit.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-129">If you are developing a user interface (UI) component, design your PrintTicket generation methods so that users can enter the Value for the ParameterInit element.</span></span> <span data-ttu-id="a4dcc-130">En outre, la méthode d’entrée d’interface utilisateur doit observer et se conformer aux restrictions d’entrée spécifiées par l’élément ParameterDef associé.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-130">In addition, the UI entry method should observe and comply with any input restrictions specified by the associated ParameterDef element.</span></span>

6.  <span data-ttu-id="a4dcc-131">Examinez le contenu de chaque instance d’option qui apparaît dans PrintTicket pour les occurrences de ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-131">Examine the contents of each Option instance that appears in the PrintTicket for occurrences of ParameterRef.</span></span> <span data-ttu-id="a4dcc-132">Si une instance ParameterInit correspondante n’apparaît pas déjà dans PrintTicket, suivez l’étape précédente pour créer une instance ParameterInit dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-132">If a corresponding ParameterInit instance does not already appear in the PrintTicket, follow the previous step to create a ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="a4dcc-133">L’objectif de cette instance ParameterInit est d’initialiser le paramètre référencé par l’instance ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-133">The purpose of this ParameterInit instance is to initialize the parameter referenced by the ParameterRef instance.</span></span>

7.  <span data-ttu-id="a4dcc-134">Gardez à l’esprit que l’appareil qui traite le travail peut ne pas prendre en charge toutes les fonctionnalités spécifiées dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-134">Keep in mind that the device that processes the job might not support every Feature specified in the PrintTicket.</span></span> <span data-ttu-id="a4dcc-135">Gardez également à l’esprit qu’une fonctionnalité nommée peut être prise en charge, mais qu’il est possible qu’il ne s’agit pas d’une option spécifiée de cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-135">Keep in mind also, that a named Feature might be supported, but a specified Option of that Feature might not be.</span></span> <span data-ttu-id="a4dcc-136">Les mêmes avertissements s’appliquent aux paramètres.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-136">The same caveats apply to parameters.</span></span> <span data-ttu-id="a4dcc-137">Même si un appareil prend en charge un paramètre nommé, la valeur spécifiée dans l’instance ParameterInit peut ne pas être comprise dans la plage valide pour l’appareil.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-137">Even if a device supports a named parameter, the Value specified in the ParameterInit instance might not be within the valid range for the device.</span></span>

8.  <span data-ttu-id="a4dcc-138">Examinez les mots clés du schéma d’impression pour les instances de propriété qui doivent être présentes dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-138">Examine the Print Schema Keywords for Property instances that must be present in your PrintTicket.</span></span> <span data-ttu-id="a4dcc-139">Ajoutez une instance de propriété pour chacun d’entre eux à votre PrintTicket et fournissez une valeur appropriée pour celle-ci à l’aide du type d’élément de valeur.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-139">Add a Property instance for each of these to your PrintTicket, and provide a suitable value for it using the Value element type.</span></span> <span data-ttu-id="a4dcc-140">Assurez-vous que les instances de propriété se trouvent correctement dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-140">Make sure that Property instances are located properly within the PrintTicket.</span></span> <span data-ttu-id="a4dcc-141">Veillez à consulter le schéma PrintTicket plutôt que le schéma PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-141">Make sure that you consult the PrintTicket Schema rather than the PrintCapabilities Schema.</span></span>

9.  <span data-ttu-id="a4dcc-142">Examinez les instances de propriété facultatives définies dans le schéma PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-142">Examine the optional Property instances defined in the PrintTicket Schema.</span></span> <span data-ttu-id="a4dcc-143">S’il existe des instances de propriété de ce type qui doivent se trouver dans PrintTicket, créez-les dans votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-143">If there are any such Property instances that should be in your PrintTicket, create them in your PrintTicket.</span></span>

10. <span data-ttu-id="a4dcc-144">Les enfants du même type d’élément ne peuvent pas s’imbriquer jusqu’à une profondeur de plus de 10 éléments.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-144">Children of the same element type may not nest to a depth of more than 10 elements.</span></span> <span data-ttu-id="a4dcc-145">Cette règle s’applique indépendamment à chaque type d’élément qui peut être défini.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-145">This rule applies independently to each type of element that can be defined.</span></span>

> [!Note]  
> <span data-ttu-id="a4dcc-146">Le contenu XML PrintTicket doit être encodé à l’aide de UTF-8 ou UTF-16.</span><span class="sxs-lookup"><span data-stu-id="a4dcc-146">PrintTicket XML content MUST be encoded using either UTF-8 or UTF-16.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="a4dcc-147">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="a4dcc-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a4dcc-148">Spécification du schéma d’impression</span><span class="sxs-lookup"><span data-stu-id="a4dcc-148">Print Schema Specification</span></span>](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



