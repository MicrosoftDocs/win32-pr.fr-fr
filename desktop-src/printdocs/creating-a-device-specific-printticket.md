---
description: En savoir plus sur la création d’un PrintTicket spécifique à l’appareil, qui cible un appareil particulier et qui est portable sur plusieurs appareils.
ms.assetid: 487f294f-dfe0-48f8-9077-06c55c3af8f1
title: Création d’un Device-Specific PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 497b825bd875ada534c8c467cd18d90f2db9a2a7
ms.sourcegitcommit: 5d4e99f4c8f42f5f543e52cb9beb9fb13ec56c5f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/19/2021
ms.locfileid: "112409544"
---
# <a name="creating-a-device-specific-printticket"></a><span data-ttu-id="f33fe-103">Création d’un Device-Specific PrintTicket</span><span class="sxs-lookup"><span data-stu-id="f33fe-103">Creating a Device-Specific PrintTicket</span></span>

<span data-ttu-id="f33fe-104">Cette rubrique n’est pas à jour.</span><span class="sxs-lookup"><span data-stu-id="f33fe-104">This topic is not current.</span></span> <span data-ttu-id="f33fe-105">Pour obtenir les informations les plus récentes, consultez la [spécification du schéma d’impression](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span><span class="sxs-lookup"><span data-stu-id="f33fe-105">For the most current information, see the [Print Schema Specification](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span></span>

<span data-ttu-id="f33fe-106">Un PrintTicket spécifique à l’appareil cible un appareil particulier et n’est donc généralement pas portable sur plusieurs appareils.</span><span class="sxs-lookup"><span data-stu-id="f33fe-106">A device-specific PrintTicket targets a particular device and is therefore not generally portable across multiple devices.</span></span>

<span data-ttu-id="f33fe-107">Les étapes décrites dans la liste suivante doivent être utilisées lorsque vous créez un PrintTicket spécifique à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="f33fe-107">The steps shown in the following list should be used when you create a device-specific PrintTicket.</span></span>

1.  <span data-ttu-id="f33fe-108">Obtenez un document PrintCapabilities contenant uniquement les instances de fonctionnalités pertinentes pour l’appareil.</span><span class="sxs-lookup"><span data-stu-id="f33fe-108">Obtain a PrintCapabilities document containing only the relevant Feature instances for the device.</span></span> <span data-ttu-id="f33fe-109">Demandez un document PrintCapabilities par défaut.</span><span class="sxs-lookup"><span data-stu-id="f33fe-109">Request a default PrintCapabilities document.</span></span> <span data-ttu-id="f33fe-110">Cela ne vous oblige pas à spécifier un PrintTicket d’entrée, car les attributs d’appareil (instances et paramètres de fonctionnalité et d’option) utilisés pour construire le PrintTicket sont indépendants de la configuration.</span><span class="sxs-lookup"><span data-stu-id="f33fe-110">This does not require you to specify an input PrintTicket because the device attributes (Feature and Option instances and parameters) that are used to construct the PrintTicket are independent of the configuration.</span></span>

2.  <span data-ttu-id="f33fe-111">Créez un document XML vide contenant la racine PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-111">Create an empty XML document containing the PrintTicket root.</span></span> <span data-ttu-id="f33fe-112">Assignez un préfixe d’espace de noms à l’espace de noms du schéma d’impression et assignez des préfixes pour tous les autres espaces de noms qui seront utilisés par le PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-112">Assign a namespace prefix to the Print Schema namespace, and assign prefixes for all other namespaces that will be used by the PrintTicket.</span></span> <span data-ttu-id="f33fe-113">Spécifiez la version du schéma PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-113">Specify the PrintTicket Schema version.</span></span>

3.  <span data-ttu-id="f33fe-114">Vous pouvez définir des paramètres dans le PrintTicket pour chaque fonctionnalité et instance ParameterDef rapportée dans le document PrintCapabilities, ou uniquement celles qui vous intéressent.</span><span class="sxs-lookup"><span data-stu-id="f33fe-114">You may define settings in the PrintTicket for every Feature and ParameterDef instance reported in the PrintCapabilities document, or only those of interest to you.</span></span> <span data-ttu-id="f33fe-115">Si un PrintTicket partiel est présenté à l’interface PrintTicket, les valeurs par défaut sont automatiquement fournies pour les instances Feature et ParameterDef omises pendant la validation de PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-115">If a partial PrintTicket is presented to the PrintTicket interface, defaults are automatically provided for omitted Feature and ParameterDef instances during PrintTicket validation.</span></span>

4.  <span data-ttu-id="f33fe-116">Examinez le document PrintCapabilities pour les instances de fonctionnalités et déterminez celles que vous souhaitez définir dans le PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-116">Examine the PrintCapabilities document for Feature instances and determine which of these you want defined in your PrintTicket.</span></span> <span data-ttu-id="f33fe-117">Ajoutez ces instances de fonctionnalités au PrintTicket, mais ne transférez pas le contenu des instances de fonctionnalité vers votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-117">Add these Feature instances to the PrintTicket, but do not transfer the contents of the Feature instances to your PrintTicket.</span></span> <span data-ttu-id="f33fe-118">Si vous transférez une sous-fonctionnalité, la fonctionnalité parente doit également être transférée, et la relation parent-enfant doit être conservée dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-118">If you transfer a subfeature, the parent Feature must also be transferred, and the parent-child relationship must be preserved in the PrintTicket.</span></span>

    <span data-ttu-id="f33fe-119">Pour chaque fonctionnalité que vous transférez, déterminez les instances d’option applicables à votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-119">For each Feature that you transfer, determine which Option instances are applicable to your PrintTicket.</span></span> <span data-ttu-id="f33fe-120">Transférez la totalité de l’option telle qu’elle est définie dans le document PrintCapabilities, puis supprimez toutes les instances de propriété présentes.</span><span class="sxs-lookup"><span data-stu-id="f33fe-120">Transfer the entire Option as defined in the PrintCapabilities document, and then remove any Property instances that are present.</span></span> <span data-ttu-id="f33fe-121">Les instances de propriété sont utilisées dans les documents PrintCapabilities, mais n’ont aucun effet dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-121">The Property instances are used within PrintCapabilities documents, but serve no purpose in the PrintTicket.</span></span> <span data-ttu-id="f33fe-122">Conservez toutes les instances ScoredProperty, en veillant à conserver leur emplacement. ils constituent une partie intrinsèque de la définition de l’option.</span><span class="sxs-lookup"><span data-stu-id="f33fe-122">Keep all of the ScoredProperty instances, making sure that you preserve their location; they are an intrinsic part of the Option definition.</span></span>

5.  <span data-ttu-id="f33fe-123">Vous pouvez également ajouter des instances de propriété à toute instance ScoredProperty.</span><span class="sxs-lookup"><span data-stu-id="f33fe-123">You may also add Property instances to any ScoredProperty instance.</span></span> <span data-ttu-id="f33fe-124">Les instances de propriété sont utilisées uniquement si le fournisseur PrintTicket prend explicitement en charge leur utilisation.</span><span class="sxs-lookup"><span data-stu-id="f33fe-124">Property instances are used only if the PrintTicket provider explicitly supports their use.</span></span> <span data-ttu-id="f33fe-125">Chaque fournisseur doit documenter l’objectif et l’utilisation de toutes les instances de propriété prises en charge.</span><span class="sxs-lookup"><span data-stu-id="f33fe-125">Each provider should document the purpose and use of all supported Property instances.</span></span> <span data-ttu-id="f33fe-126">Notez que pendant la validation, toutes les instances de propriété contenues dans une instance option sont supprimées, sauf si l’espace de noms de la propriété est reconnu par le fournisseur PrintCapabilities ou PrintTicket cible, et si une option candidat est trouvée dans le document PrintCapabilities dont les instances ScoredProperty correspondent parfaitement à celles définies dans l’option de référence.</span><span class="sxs-lookup"><span data-stu-id="f33fe-126">Note that during validation, any Property instances contained within an Option instance are stripped off, unless the namespace of the Property is recognized by the target PrintCapabilities or PrintTicket provider, and a candidate Option is found in the PrintCapabilities document whose ScoredProperty instances perfectly match those defined in the reference Option.</span></span>

6.  <span data-ttu-id="f33fe-127">Si les mots clés du schéma d’impression définissent la propriété SelectionType sur PickMany pour une fonctionnalité particulière, vous pouvez sélectionner plusieurs options pour cette fonctionnalité, à condition que l’option désignée comme IdentityOption ne soit pas l’une de celles sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="f33fe-127">If the Print Schema Keywords set the SelectionType Property to PickMany for a particular Feature, you may select more than one Option for that Feature, provided that the Option designated as IdentityOption is not one of those selected.</span></span> <span data-ttu-id="f33fe-128">IdentityOption dans le schéma d’impression a le même effet que l’option None des fichiers PPD PostScript et des fichiers Unidrv GPD. Il sert de non-opération.</span><span class="sxs-lookup"><span data-stu-id="f33fe-128">IdentityOption in the Print Schema has the same effect as the None option in Postscript PPD files and Unidrv GPD files; it serves as a no-op.</span></span>

7.  <span data-ttu-id="f33fe-129">Examinez le document PrintCapabilities pour les instances ParameterDef qui doivent être définies dans votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-129">Examine the PrintCapabilities document for ParameterDef instances that should be set in your PrintTicket.</span></span> <span data-ttu-id="f33fe-130">Pour chaque instance ParameterDef, sélectionnez une valeur à utiliser dans l’instance ParameterInit dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-130">For each such ParameterDef instance, select a Value to be used in the ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="f33fe-131">Cette valeur doit être du type de données correct et doit être comprise dans la plage définie dans l’instance ParameterDef et doit satisfaire à toutes les autres exigences spécifiées dans l’instance ParameterDef.</span><span class="sxs-lookup"><span data-stu-id="f33fe-131">This Value must be of the correct data type and must fall within the range defined in the ParameterDef instance, and must meet all of the other requirements specified in the ParameterDef instance.</span></span> <span data-ttu-id="f33fe-132">Utilisez une instance ParameterInit pour initialiser le paramètre avec la valeur que vous avez sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="f33fe-132">Use a ParameterInit instance to initialize the parameter to the Value you have selected.</span></span>

8.  <span data-ttu-id="f33fe-133">Examinez le contenu de chaque instance d’option qui apparaît dans PrintTicket pour les occurrences d’instances ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="f33fe-133">Examine the contents of each Option instance that appears in the PrintTicket for occurrences of ParameterRef instances.</span></span> <span data-ttu-id="f33fe-134">Si une instance ParameterInit correspondante n’apparaît pas déjà dans PrintTicket, suivez l’étape précédente pour créer une instance ParameterInit dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-134">If a corresponding ParameterInit instance does not already appear in the PrintTicket, follow the previous step to create a ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="f33fe-135">L’objectif de cette instance ParameterInit est d’initialiser le paramètre référencé par l’instance ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="f33fe-135">The purpose of this ParameterInit instance is to initialize the parameter referenced by the ParameterRef instance.</span></span>

9.  <span data-ttu-id="f33fe-136">Gardez à l’esprit que les conflits de contrainte peuvent empêcher l’appareil d’appliquer la configuration que vous avez spécifiée dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-136">Keep in mind that constraint conflicts might prevent the device from applying the configuration you have specified in the PrintTicket.</span></span> <span data-ttu-id="f33fe-137">Si nécessaire, le processus de validation modifie la configuration définie dans PrintTicket à une valeur qui est exempte de conflits.</span><span class="sxs-lookup"><span data-stu-id="f33fe-137">If necessary, the validation process modifies the configuration defined in the PrintTicket to one that is free of conflicts.</span></span>

10. <span data-ttu-id="f33fe-138">Examinez les mots clés du schéma d’impression pour les instances de propriété qui doivent être présentes dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-138">Examine the Print Schema Keywords for Property instances that must be present in your PrintTicket.</span></span> <span data-ttu-id="f33fe-139">Ajoutez une instance de propriété à votre PrintTicket pour chaque requis et fournissez une valeur appropriée pour celle-ci à l’aide du type d’élément de valeur.</span><span class="sxs-lookup"><span data-stu-id="f33fe-139">Add a Property instance to your PrintTicket for each that is required, and provide a suitable value for it using the Value element type.</span></span> <span data-ttu-id="f33fe-140">Assurez-vous que les instances de propriété se trouvent correctement dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-140">Make sure that Property instances are located properly within the PrintTicket.</span></span>

11. <span data-ttu-id="f33fe-141">Examinez les instances de propriété facultatives dans le schéma PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-141">Examine the optional Property instances in the PrintTicket Schema.</span></span> <span data-ttu-id="f33fe-142">S’il existe des instances de propriété de ce type qui doivent se trouver dans PrintTicket, créez-les dans votre PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f33fe-142">If there are any such Property instances that should be in your PrintTicket, create them in your PrintTicket.</span></span>

12. <span data-ttu-id="f33fe-143">Vous pouvez également ajouter des instances de propriété définies en privé au niveau de la racine, ou à n’importe quelle fonctionnalité, option ou instance de propriété.</span><span class="sxs-lookup"><span data-stu-id="f33fe-143">You may also add privately-defined Property instances at the root level, or to any Feature, Option, or Property instance.</span></span> <span data-ttu-id="f33fe-144">Notez toutefois que ces instances de propriété définies de manière privée sont supprimées pendant la validation, à moins que l’espace de noms auquel elles appartiennent soient reconnus par le fournisseur PrintCapabilities ou PrintTicket cible.</span><span class="sxs-lookup"><span data-stu-id="f33fe-144">Note however, that these privately-defined Property instances are stripped off during validation, unless the namespace they belong to is recognized by the target PrintCapabilities or PrintTicket provider.</span></span> <span data-ttu-id="f33fe-145">En outre, les instances de propriété qui apparaissent n’importe où dans une instance option sont supprimées lors de la validation, sauf si le document PrintCapabilities contient une option qui correspond à une correspondance parfaite.</span><span class="sxs-lookup"><span data-stu-id="f33fe-145">In addition, Property instances that appear anywhere within an Option instance are stripped off during validation, unless the PrintCapabilities document contains an Option that is a perfect match.</span></span> <span data-ttu-id="f33fe-146">Deux instances d’option sont une correspondance parfaite si chaque ScoredProperty dans une instance d’option a un ScoredProperty correspondant dans l’autre, et les valeurs des instances ScoredProperty sont les mêmes.</span><span class="sxs-lookup"><span data-stu-id="f33fe-146">Two Option instances are a perfect match if every ScoredProperty in one Option instance has a corresponding ScoredProperty in the other, and the Values of the ScoredProperty instances are the same.</span></span> <span data-ttu-id="f33fe-147">Consultez le schéma privé du fournisseur PrintTicket pour obtenir la liste des instances de propriété privées reconnues et leurs utilisations.</span><span class="sxs-lookup"><span data-stu-id="f33fe-147">Consult the PrintTicket provider's Private Schema for a list of recognized private Property instances and their uses.</span></span>

13. <span data-ttu-id="f33fe-148">Les enfants du même type d’élément ne peuvent pas s’imbriquer jusqu’à une profondeur de plus de 10 éléments.</span><span class="sxs-lookup"><span data-stu-id="f33fe-148">Children of the same element type may not nest to a depth of more than 10 elements.</span></span> <span data-ttu-id="f33fe-149">Cette règle s’applique indépendamment à chaque type d’élément qui peut être défini.</span><span class="sxs-lookup"><span data-stu-id="f33fe-149">This rule applies independently to each type of element that can be defined.</span></span>

> [!Note]  
> <span data-ttu-id="f33fe-150">Le contenu XML PrintTicket doit être encodé à l’aide de UTF-8 ou UTF-16.</span><span class="sxs-lookup"><span data-stu-id="f33fe-150">PrintTicket XML content MUST be encoded using either UTF-8 or UTF-16.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="f33fe-151">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f33fe-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f33fe-152">Spécification du schéma d’impression</span><span class="sxs-lookup"><span data-stu-id="f33fe-152">Print Schema Specification</span></span>](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



