---
description: Cette rubrique n’est pas à jour. Pour obtenir les informations les plus récentes, consultez la spécification du schéma d’impression.
ms.assetid: 4698f151-2237-4d16-b32f-4d15024cd063
title: Liste de contrôle de validation PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 160a0e9f3eb71b1e9a3b670456e04e2efa3c8b15
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/05/2021
ms.locfileid: "106520250"
---
# <a name="printticket-validation-checklist"></a><span data-ttu-id="00e73-104">Liste de contrôle de validation PrintTicket</span><span class="sxs-lookup"><span data-stu-id="00e73-104">PrintTicket Validation Checklist</span></span>

<span data-ttu-id="00e73-105">Cette rubrique n’est pas à jour.</span><span class="sxs-lookup"><span data-stu-id="00e73-105">This topic is not current.</span></span> <span data-ttu-id="00e73-106">Pour obtenir les informations les plus récentes, consultez la [spécification du schéma d’impression](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span><span class="sxs-lookup"><span data-stu-id="00e73-106">For the most current information, see the [Print Schema Specification](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span></span>

<span data-ttu-id="00e73-107">Les fournisseurs PrintTicket doivent valider le PrintTicket avant de l’utiliser à quelque fin que ce soit.</span><span class="sxs-lookup"><span data-stu-id="00e73-107">PrintTicket providers must validate the PrintTicket prior to using it for any purpose.</span></span> <span data-ttu-id="00e73-108">Une fois le PrintTicket validé, il peut être retourné au client, ou il peut être ignoré après utilisation.</span><span class="sxs-lookup"><span data-stu-id="00e73-108">After the PrintTicket is validated, it may be returned to the client, or it may be discarded after use.</span></span> <span data-ttu-id="00e73-109">Cette liste de vérification couvre les tâches que le fournisseur doit effectuer pendant la validation.</span><span class="sxs-lookup"><span data-stu-id="00e73-109">This checklist covers the tasks the provider must perform during validation.</span></span> <span data-ttu-id="00e73-110">Le processus de validation modifie fréquemment le contenu du PrintTicket, bien qu’il ne modifie pas un PrintTicket précédemment validé.</span><span class="sxs-lookup"><span data-stu-id="00e73-110">The validation process will frequently alter the content of the PrintTicket, although it will not alter a previously-validated PrintTicket.</span></span>

<span data-ttu-id="00e73-111">La validation est toujours effectuée sur un appareil spécifique qui possède un ensemble de fonctionnalités, d’options et d’instances ParameterDef définies dans un document PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-111">Validation is always performed against a specific device that has a set of Feature, Option and ParameterDef instances defined in a PrintCapabilities document.</span></span> <span data-ttu-id="00e73-112">Le code de validation doit avoir accès à l’ensemble des instances de fonctionnalité (et aux instances de l’option contenue) et aux instances ParameterDef pour l’appareil spécifique, et n’a pas besoin d’accéder au PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-112">The validation code should have access to the set of Feature instances (and the contained Option instances) and ParameterDef instances for the specific device, and should not need to access the PrintCapabilities.</span></span> <span data-ttu-id="00e73-113">Les informations des instances Feature, option et ParameterDef sont nécessaires dans certaines parties du processus de validation.</span><span class="sxs-lookup"><span data-stu-id="00e73-113">The information from the Feature, Option, and ParameterDef instances is needed in certain parts of the validation process.</span></span>

1.  <span data-ttu-id="00e73-114">Pendant les tentatives de localisation des éléments correspondants ou correspondants, Notez que les espaces de noms des éléments doivent correspondre avant qu’un nom qualifié puisse être considéré comme une correspondance.</span><span class="sxs-lookup"><span data-stu-id="00e73-114">During attempts to locate corresponding or matching elements, note that the namespaces of the elements must match before any Qualified Name can be considered a match.</span></span> <span data-ttu-id="00e73-115">Tous les noms d’éléments, les noms d’attributs et les noms d’instance sont qualifiés par un espace de noms.</span><span class="sxs-lookup"><span data-stu-id="00e73-115">All element names, Attribute names, and instance names are namespace-qualified.</span></span> <span data-ttu-id="00e73-116">Pour les éléments imbriqués, leurs emplacements doivent correspondre avant que les éléments soient considérés comme une correspondance.</span><span class="sxs-lookup"><span data-stu-id="00e73-116">For elements that are nested, their locations must match before the elements are considered a match.</span></span>

2.  <span data-ttu-id="00e73-117">Vérifiez que toutes les balises d’élément se trouvent dans l’espace de noms public, sont définies par le schéma PrintTicket, contiennent les attributs XML et les valeurs d’attributs appropriés, et que l’emplacement de chaque type d’élément est conforme à l’utilisation définie par le schéma PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-117">Verify that all element tags are in the public namespace, are defined by the PrintTicket Schema, contain the proper XML Attributes and Attribute Values, and that the location of each element type conforms to the PrintTicket Schema-defined usage.</span></span>

3.  <span data-ttu-id="00e73-118">Déterminez tous les espaces de noms signalés par le document PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-118">Determine all namespaces reported by PrintCapabilities document.</span></span> <span data-ttu-id="00e73-119">Supprimer tous les éléments (et leurs descendants) du PrintTicket dont les noms d’instance appartiennent à des espaces de noms qui ne sont pas signalés par un document PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-119">Remove all elements (and their descendants) from the PrintTicket whose instance names belong to namespaces not reported by PrintCapabilities document.</span></span> <span data-ttu-id="00e73-120">Notez la différence entre ce cas et le cas suivant, qui implique des noms d’instance non reconnus dans un espace de noms connu.</span><span class="sxs-lookup"><span data-stu-id="00e73-120">Note the difference between this case and the following case, which involves unrecognized instance names within a known namespace.</span></span>

4.  <span data-ttu-id="00e73-121">En raison du fait que les schémas sont continuellement étendus avec l’ajout de nouvelles définitions d’instance d’élément, le code de validation ne doit pas être écrit en partant du principe que chaque nom d’instance dans un espace de noms donné est connu.</span><span class="sxs-lookup"><span data-stu-id="00e73-121">Due to the fact that the schemas are continually being extended with the addition of new element instance definitions, the validation code should not be written under the assumption that every instance name in a given namespace is known.</span></span> <span data-ttu-id="00e73-122">Le code de validation ne peut pas traiter les noms d’instance non reconnus dans un espace de noms connu comme des erreurs, ni les supprimer du PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-122">The validation code cannot treat unrecognized instance names within a known namespace as errors, nor can it delete them from the PrintTicket.</span></span>

5.  <span data-ttu-id="00e73-123">Si une instance d’élément a un frère dupliqué qui n’est pas autorisé par le schéma PrintTicket, conservez uniquement la première occurrence et supprimez les doublons, y compris le contenu de l’élément dupliqué.</span><span class="sxs-lookup"><span data-stu-id="00e73-123">If any element instance has a duplicate sibling that is not permitted by the PrintTicket Schema, keep only the first occurrence and delete the duplicates, including the contents of the duplicated element.</span></span>

6.  <span data-ttu-id="00e73-124">Supprimez de l’PrintTicket toute fonctionnalité ou sous-fonctionnalité (et tous ses enfants) qui n’a pas de fonctionnalité correspondante dans le document PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-124">Remove from the PrintTicket any Feature or subfeature (and all its children) that has no corresponding Feature in the PrintCapabilities document.</span></span>

7.  <span data-ttu-id="00e73-125">Vérifiez la propriété SelectionType définie dans le document PrintCapabilities pour chacune des instances de fonctionnalités restantes dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-125">Check the SelectionType Property defined in the PrintCapabilities document for each of the remaining Feature instances in the PrintTicket.</span></span> <span data-ttu-id="00e73-126">Toute fonctionnalité dont la propriété SelectionType a la valeur PickOne doit avoir exactement une instance option présente dans PrintTicket, alors qu’une fonctionnalité dont la propriété SelectionType est PickMany peut en avoir plusieurs.</span><span class="sxs-lookup"><span data-stu-id="00e73-126">Any Feature whose SelectionType Property is set to PickOne must have exactly one Option instance present in the PrintTicket, while a Feature whose SelectionType Property is PickMany may have more than one.</span></span> <span data-ttu-id="00e73-127">Si une fonctionnalité PrintTicket n’a pas d’instance d’option, fournissez l’instance d’option par défaut.</span><span class="sxs-lookup"><span data-stu-id="00e73-127">If a PrintTicket Feature has no Option instance, supply the default Option instance.</span></span> <span data-ttu-id="00e73-128">Étant donné que vous êtes le fournisseur, vous savez quelle option est l’option par défaut pour chaque fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="00e73-128">Since you are the provider, you know which Option is the default Option for every Feature.</span></span>

    <span data-ttu-id="00e73-129">Pour une fonctionnalité dont la propriété SelectionType est PickMany, avec plusieurs options sélectionnées dans le PrintTicket, vérifiez qu’aucune option n’est désignée comme IdentityOption.</span><span class="sxs-lookup"><span data-stu-id="00e73-129">For a Feature whose SelectionType Property is PickMany, with more than one Option selected in the PrintTicket, verify that no Option is designated as IdentityOption.</span></span> <span data-ttu-id="00e73-130">Si c’est le cas, supprimez toutes les autres options, en laissant uniquement le IdentityOption désigné.</span><span class="sxs-lookup"><span data-stu-id="00e73-130">If there is, delete every other Option, leaving only the one designated IdentityOption.</span></span>

8.  <span data-ttu-id="00e73-131">Supprimez toute instance ParameterInit dans PrintTicket qui n’a pas d’instance ParameterDef correspondante dans le document PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-131">Remove any ParameterInit instance in the PrintTicket that has no corresponding ParameterDef instance in the PrintCapabilities document.</span></span>

    <span data-ttu-id="00e73-132">Pour toute autre instance ParameterInit dans PrintTicket, vérifiez que la valeur de chaque est conforme à l’instance ParameterDef du document PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-132">For any other ParameterInit instances in the PrintTicket, verify that the Value for each conforms to the PrintCapabilities document's ParameterDef instance.</span></span> <span data-ttu-id="00e73-133">Si une valeur est manquante, fournissez la valeur par défaut fournie dans le ParameterDef.</span><span class="sxs-lookup"><span data-stu-id="00e73-133">If a Value is missing, supply the default that is provided in the ParameterDef.</span></span>

9.  <span data-ttu-id="00e73-134">Couplez chaque instance d’option dans PrintTicket avec une option figurant dans la fonctionnalité correspondante dans le document PrintCapabilities, en fonction des résultats du processus de notation.</span><span class="sxs-lookup"><span data-stu-id="00e73-134">Pair each Option instance in the PrintTicket with an Option listed in the corresponding Feature in the PrintCapabilities document, based on the results of the scoring process.</span></span> <span data-ttu-id="00e73-135">Le score est le processus qui consiste à rechercher dans le document PrintCapabilities l’option qui correspond le mieux à l’option nommée dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-135">Scoring is the process of finding the Option in the PrintCapabilities document that best matches the Option named in the PrintTicket.</span></span> <span data-ttu-id="00e73-136">Pour obtenir une description de ce qui est pris en compte au cours du processus de calcul de score, consultez [définitions d’options](option-definitions.md).</span><span class="sxs-lookup"><span data-stu-id="00e73-136">For a description of what is taken into account during the scoring process, see [Option Definitions](option-definitions.md).</span></span> <span data-ttu-id="00e73-137">Remplacez chaque option de référence dans PrintTicket par l’option de document le plus approprié possible pour les informations PrintCapabilities correspondantes.</span><span class="sxs-lookup"><span data-stu-id="00e73-137">Replace each reference Option in the PrintTicket by the corresponding best matching candidate PrintCapabilities document Option.</span></span> <span data-ttu-id="00e73-138">Vous pouvez également classer tous les candidats par score et transmettre ces informations à l’étape de résolution au cas où un conflit de contrainte empêche l’utilisation du candidat le plus approprié.</span><span class="sxs-lookup"><span data-stu-id="00e73-138">You may also rank all of the candidates by score and pass this information on to the resolving stage in case a constraint conflict prevents the best matching candidate from being used.</span></span> <span data-ttu-id="00e73-139">Dans ce cas, le processus de résolution peut utiliser le deuxième-meilleur candidat plutôt que de choisir un autre candidat aléatoire.</span><span class="sxs-lookup"><span data-stu-id="00e73-139">In such cases, the resolving process can use the second-best candidate rather than pick another candidate at random.</span></span>

10. <span data-ttu-id="00e73-140">Pour une fonctionnalité dont la propriété SelectionType est définie sur PickMany, et qui a plusieurs options sélectionnées dans PrintTicket, vérifiez qu’aucune option n’est désignée comme IdentityOption.</span><span class="sxs-lookup"><span data-stu-id="00e73-140">For a Feature whose SelectionType Property is set to PickMany, and that has more than one Option selected in the PrintTicket, verify that no Option is designated as IdentityOption.</span></span> <span data-ttu-id="00e73-141">Si une telle option existe, supprimez toutes les autres options, en laissant uniquement la IdentityOption désignée.</span><span class="sxs-lookup"><span data-stu-id="00e73-141">If such an Option exists, delete every other Option, leaving only the one designated IdentityOption.</span></span> <span data-ttu-id="00e73-142">Cette étape doit être effectuée avant et après l’application du processus de calcul de score.</span><span class="sxs-lookup"><span data-stu-id="00e73-142">This step must be performed before and after the scoring process is applied.</span></span>

    <span data-ttu-id="00e73-143">La raison pour laquelle cette étape doit être effectuée à deux reprises est qu’il est possible que le processus de notation mappe plusieurs instances d’option de référence à la même option de candidat.</span><span class="sxs-lookup"><span data-stu-id="00e73-143">The reason that this step must be performed twice is that it is possible for the scoring process to map multiple reference Option instances to the same candidate Option.</span></span> <span data-ttu-id="00e73-144">Si cela se produit, supprimez toutes les instances d’option dupliquées afin que les options répertoriées pour une fonctionnalité PickMany particulière soient uniques.</span><span class="sxs-lookup"><span data-stu-id="00e73-144">If that happens, delete any duplicate Option instances so that the Options listed for a particular PickMany Feature are unique.</span></span>

11. <span data-ttu-id="00e73-145">Ajoutez à l’élément PrintTicket toute fonctionnalité présente dans le document PrintCapabilities qui n’apparaît pas dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-145">Add to the PrintTicket any Feature present in the PrintCapabilities document that does not appear in the PrintTicket.</span></span> <span data-ttu-id="00e73-146">Pour une telle fonctionnalité, choisissez l’option par défaut comme option sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="00e73-146">For such a Feature, designate the default Option as the selected Option.</span></span>

12. <span data-ttu-id="00e73-147">Déterminez s’il existe des instances ParameterDef qui répondent à tous les critères suivants :</span><span class="sxs-lookup"><span data-stu-id="00e73-147">Determine whether there are any ParameterDef instances that meet all of the following criteria:</span></span>

    -   <span data-ttu-id="00e73-148">L’instance ParameterDef s’affiche dans le document PrintCapabilities, mais pas dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-148">The ParameterDef instance appears in the PrintCapabilities document, but not in the PrintTicket.</span></span>

    -   <span data-ttu-id="00e73-149">La propriété obligatoire de l’instance ParameterDef est définie sur inconditionnelle ou conditionnel.</span><span class="sxs-lookup"><span data-stu-id="00e73-149">The Mandatory Property of the ParameterDef instance is set to either Unconditional or Conditional.</span></span>

    -   <span data-ttu-id="00e73-150">L’instance ParameterDef est référencée par une instance ParameterRef dans le PrintTicket au sein d’une instance option.</span><span class="sxs-lookup"><span data-stu-id="00e73-150">The ParameterDef instance is referenced by a ParameterRef instance in the PrintTicket within an Option instance.</span></span>

    <span data-ttu-id="00e73-151">Pour chaque instance ParameterDef dans le document PrintCapabilities, ajoutez à l’PrintTicket une instance ParameterInit correspondante.</span><span class="sxs-lookup"><span data-stu-id="00e73-151">For each such ParameterDef instance in the PrintCapabilities document, add to the PrintTicket a corresponding ParameterInit instance.</span></span> <span data-ttu-id="00e73-152">Définissez la valeur des instances ParameterInit récemment ajoutées sur la valeur par défaut spécifiée par les instances ParameterDef correspondantes.</span><span class="sxs-lookup"><span data-stu-id="00e73-152">Set the Value of the newly added ParameterInit instances to the default Value specified by the corresponding ParameterDef instances.</span></span>

13. <span data-ttu-id="00e73-153">Effectuez la détection des conflits de contraintes et modifiez la configuration pour éliminer ces conflits.</span><span class="sxs-lookup"><span data-stu-id="00e73-153">Perform constraint conflict detection and modify the configuration to eliminate any such conflicts.</span></span> <span data-ttu-id="00e73-154">Cette rubrique ne définit pas un processus particulier à utiliser pour résoudre les conflits de contrainte.</span><span class="sxs-lookup"><span data-stu-id="00e73-154">This topic does not define a particular process to use to resolve constraint conflicts.</span></span> <span data-ttu-id="00e73-155">Vous devez décider quelle fonctionnalité ou instance ParameterInit peut être modifiée, ainsi qu’une option ou valeur appropriée, respectivement, pour sélectionner qui a le moins d’impact sur l’intention générale de la configuration spécifiée dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-155">You need to decide which Feature or ParameterInit instance can be changed, and an appropriate Option or Value, respectively, to select that has the least impact on the overall intent of the configuration specified in the PrintTicket.</span></span> <span data-ttu-id="00e73-156">Comme mentionné précédemment, vous souhaiterez peut-être utiliser le score de mappage de chaque option et utiliser l’option avec le deuxième score le plus élevé.</span><span class="sxs-lookup"><span data-stu-id="00e73-156">As mentioned earlier, you might wish to make use of the mapping score of each Option, and use the Option with the second highest score.</span></span> <span data-ttu-id="00e73-157">Pour déterminer quelle fonctionnalité ou ParameterInit modifier, vous pouvez définir une propriété privée que le client peut ajouter à PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-157">To determine which Feature or ParameterInit to change, you might want to define a private Property that the client can add to the PrintTicket.</span></span> <span data-ttu-id="00e73-158">Cette propriété peut définir une priorité pour les instances Feature et ParameterInit afin que le processus de résolution soit informé de la fonctionnalité ou des instances ParameterInit qui sont importantes pour le client (et doivent être conservées dans le PrintTicket) et qui sont moins importantes.</span><span class="sxs-lookup"><span data-stu-id="00e73-158">This Property can define a priority for Feature and ParameterInit instances so that the resolver process is informed of which Feature or ParameterInit instances are important to the client (and need to be preserved in the PrintTicket), and which are less important.</span></span>

14. <span data-ttu-id="00e73-159">Si le processus de résolution de contrainte a entraîné des modifications dans PrintTicket pour toutes les instances ParameterRef pour lesquelles la propriété Mandatory est définie sur Conditional, ajoutez des instances ParameterInit avec des valeurs par défaut pour celles qui apparaissent maintenant, et supprimez toute instance ParameterInit pour une instance ParameterRef qui ne s’affiche plus.</span><span class="sxs-lookup"><span data-stu-id="00e73-159">If the constraint resolution process has caused changes in the PrintTicket to any ParameterRef instances for which the Mandatory Property is set to Conditional, add ParameterInit instances with default Values for those that now appear, and remove any ParameterInit instance for a ParameterRef instance that no longer appears.</span></span>

15. <span data-ttu-id="00e73-160">Supprimez toutes les instances de propriété et leur contenu qui s’affichent dans les instances d’option dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-160">Remove all Property instances and their contents that appear within Option instances in the PrintTicket.</span></span> <span data-ttu-id="00e73-161">Les éléments de propriété n’ont aucun rôle dans PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="00e73-161">Property elements have no role in the PrintTicket.</span></span> <span data-ttu-id="00e73-162">Si l’option validée pour une fonctionnalité particulière correspond parfaitement à l’option prévalidée, transférez toutes les instances de propriété de cette option à partir de la prévalidation PrintTicket vers le PrintTicket maintenant validé, sous réserve que les espaces de noms des instances de propriété soient inscrits dans le document PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="00e73-162">If the validated Option for a particular Feature perfectly matches the prevalidated Option, transfer all of the Property instances in that Option from the prevalidation PrintTicket to the now-validated PrintTicket, subject to the condition that namespaces of Property instances are registered in the PrintCapabilities document.</span></span> <span data-ttu-id="00e73-163">Notez que pour que deux instances d’option soient considérées comme une correspondance parfaite, pour chaque ScoredProperty trouvé dans une option, il doit y avoir un ScoredProperty correspondant dans l’autre option, et les valeurs des deux instances ScoredProperty doivent être identiques.</span><span class="sxs-lookup"><span data-stu-id="00e73-163">Note that for two Option instances to be considered a perfect match, for every ScoredProperty found in one Option, there must be a corresponding ScoredProperty in the other Option, and the Values of both ScoredProperty instances must be the same.</span></span>

16. <span data-ttu-id="00e73-164">Si votre fournisseur PrintTicket reconnaît et prend en charge toutes les instances de propriété privées ou publiques qui ont survécu à ce point, effectuez une validation dessus.</span><span class="sxs-lookup"><span data-stu-id="00e73-164">If your PrintTicket provider recognizes and supports any private or public Property instances that have survived to this point, perform validation on them.</span></span> <span data-ttu-id="00e73-165">Ne supprimez pas une propriété à ce stade, car vous ne la reconnaissez pas, elle peut être destinée à une autre phase de traitement des documents.</span><span class="sxs-lookup"><span data-stu-id="00e73-165">Do not delete a Property at this point just because you do not recognize it, it might be intended for another phase of document processing.</span></span>

## <a name="related-topics"></a><span data-ttu-id="00e73-166">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="00e73-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="00e73-167">Spécification du schéma d’impression</span><span class="sxs-lookup"><span data-stu-id="00e73-167">Print Schema Specification</span></span>](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



