---
description: La fonction FindFirstPrinterChangeNotification crée un objet de notification de modification et retourne un handle à l’objet. Vous pouvez ensuite utiliser ce handle dans un appel à l’une des fonctions Wait pour surveiller les modifications apportées à l’imprimante ou au serveur d’impression.
ms.assetid: 4155ef5c-cd96-4960-919b-d9a495bb73a5
title: FindFirstPrinterChangeNotification, fonction (winspool. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- FindFirstPrinterChangeNotification
api_type:
- DllExport
api_location:
- Spoolss.dll
ms.openlocfilehash: 2da6a2ae73aa5b987ea3b8f8789f81ed0b4cdf06
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104202815"
---
# <a name="findfirstprinterchangenotification-function"></a><span data-ttu-id="392b5-104">FindFirstPrinterChangeNotification fonction)</span><span class="sxs-lookup"><span data-stu-id="392b5-104">FindFirstPrinterChangeNotification function</span></span>

<span data-ttu-id="392b5-105">La fonction **FindFirstPrinterChangeNotification** crée un objet de notification de modification et retourne un handle à l’objet.</span><span class="sxs-lookup"><span data-stu-id="392b5-105">The **FindFirstPrinterChangeNotification** function creates a change notification object and returns a handle to the object.</span></span> <span data-ttu-id="392b5-106">Vous pouvez ensuite utiliser ce handle dans un appel à l’une des fonctions Wait pour surveiller les modifications apportées à l’imprimante ou au serveur d’impression.</span><span class="sxs-lookup"><span data-stu-id="392b5-106">You can then use this handle in a call to one of the wait functions to monitor changes to the printer or print server.</span></span>

<span data-ttu-id="392b5-107">L’appel **FindFirstPrinterChangeNotification** spécifie le type de modifications à surveiller.</span><span class="sxs-lookup"><span data-stu-id="392b5-107">The **FindFirstPrinterChangeNotification** call specifies the type of changes to be monitored.</span></span> <span data-ttu-id="392b5-108">Vous pouvez spécifier un ensemble de conditions pour surveiller les modifications, un ensemble de champs d’informations d’imprimante à surveiller, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="392b5-108">You can specify a set of conditions to monitor for changes, a set of printer information fields to monitor, or both.</span></span>

<span data-ttu-id="392b5-109">Une opération d’attente sur le handle de notification de modification est effectuée lorsque l’une des modifications spécifiées se produit sur l’imprimante ou le serveur d’impression spécifié.</span><span class="sxs-lookup"><span data-stu-id="392b5-109">A wait operation on the change notification handle succeeds when one of the specified changes occurs in the specified printer or print server.</span></span> <span data-ttu-id="392b5-110">Vous appelez ensuite la fonction [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) pour récupérer des informations sur la modification et réinitialiser l’objet de notification de modification pour l’utiliser lors de l’opération d’attente suivante.</span><span class="sxs-lookup"><span data-stu-id="392b5-110">You then call the [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) function to retrieve information about the change, and to reset the change notification object for use in the next wait operation.</span></span>

## <a name="syntax"></a><span data-ttu-id="392b5-111">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="392b5-111">Syntax</span></span>


```C++
HANDLE FindFirstPrinterChangeNotification(
  _In_     HANDLE hPrinter,
           DWORD  fdwFilter,
           DWORD  fdwOptions,
  _In_opt_ LPVOID pPrinterNotifyOptions
);
```



## <a name="parameters"></a><span data-ttu-id="392b5-112">Paramètres</span><span class="sxs-lookup"><span data-stu-id="392b5-112">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="392b5-113">*hPrinter* \[ dans\]</span><span class="sxs-lookup"><span data-stu-id="392b5-113">*hPrinter* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="392b5-114">Handle vers l’imprimante ou le serveur d’impression que vous souhaitez analyser.</span><span class="sxs-lookup"><span data-stu-id="392b5-114">A handle to the printer or print server that you want to monitor.</span></span> <span data-ttu-id="392b5-115">Utilisez la fonction [**OpenPrinter**](openprinter.md) ou [**AddPrinter**](addprinter.md) pour récupérer un handle d’imprimante.</span><span class="sxs-lookup"><span data-stu-id="392b5-115">Use the [**OpenPrinter**](openprinter.md) or [**AddPrinter**](addprinter.md) function to retrieve a printer handle.</span></span>

</dd> <dt>

<span data-ttu-id="392b5-116">*fdwFilter*</span><span class="sxs-lookup"><span data-stu-id="392b5-116">*fdwFilter*</span></span> 
</dt> <dd>

<span data-ttu-id="392b5-117">Conditions qui obligeront l’objet de notification de modification à entrer dans un état signalé.</span><span class="sxs-lookup"><span data-stu-id="392b5-117">The conditions that will cause the change notification object to enter a signaled state.</span></span> <span data-ttu-id="392b5-118">Une notification de modification se produit lorsqu’une ou plusieurs des conditions spécifiées sont remplies.</span><span class="sxs-lookup"><span data-stu-id="392b5-118">A change notification occurs when one or more of the specified conditions are met.</span></span> <span data-ttu-id="392b5-119">Le paramètre *fdwFilter* peut être égal à zéro si *pPrinterNotifyOptions* n’est pas **null**.</span><span class="sxs-lookup"><span data-stu-id="392b5-119">The *fdwFilter* parameter can be zero if *pPrinterNotifyOptions* is non-**NULL**.</span></span>

<span data-ttu-id="392b5-120">Ce paramètre peut être une ou plusieurs des valeurs suivantes.</span><span class="sxs-lookup"><span data-stu-id="392b5-120">This parameter can be one or more of the following values.</span></span>



| <span data-ttu-id="392b5-121">Valeur</span><span class="sxs-lookup"><span data-stu-id="392b5-121">Value</span></span>                                                                                                                                                                                                              | <span data-ttu-id="392b5-122">Signification</span><span class="sxs-lookup"><span data-stu-id="392b5-122">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="PRINTER_CHANGE_FORM"></span><span id="printer_change_form"></span><dl> <span data-ttu-id="392b5-123"><dt>**\_formulaire de modification de l’imprimante \_**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-123"><dt>**PRINTER\_CHANGE\_FORM**</dt></span></span> </dl>                                   | <span data-ttu-id="392b5-124">Notifier toute modification apportée à un formulaire.</span><span class="sxs-lookup"><span data-stu-id="392b5-124">Notify of any changes to a form.</span></span> <span data-ttu-id="392b5-125">Vous pouvez définir cet indicateur général ou un ou plusieurs des indicateurs spécifiques suivants :</span><span class="sxs-lookup"><span data-stu-id="392b5-125">You can set this general flag or one or more of the following specific flags:</span></span><br/> <dl> <dd><span data-ttu-id="392b5-126">\_Ajouter un \_ \_ formulaire de modification d’imprimante</span><span class="sxs-lookup"><span data-stu-id="392b5-126">PRINTER\_CHANGE\_ADD\_FORM</span></span></dd> <dd><span data-ttu-id="392b5-127">\_formulaire de modification de l’imprimante \_ \_</span><span class="sxs-lookup"><span data-stu-id="392b5-127">PRINTER\_CHANGE\_SET\_FORM</span></span></dd> <dd><span data-ttu-id="392b5-128">\_formulaire de \_ Suppression de modification d’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-128">PRINTER\_CHANGE\_DELETE\_FORM</span></span></dd> </dl>                                                                              |
| <span id="PRINTER_CHANGE_JOB"></span><span id="printer_change_job"></span><dl> <span data-ttu-id="392b5-129"><dt>**\_travail de modification d’imprimante \_**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-129"><dt>**PRINTER\_CHANGE\_JOB**</dt></span></span> </dl>                                      | <span data-ttu-id="392b5-130">Notifier toute modification apportée à un travail.</span><span class="sxs-lookup"><span data-stu-id="392b5-130">Notify of any changes to a job.</span></span> <span data-ttu-id="392b5-131">Vous pouvez définir cet indicateur général ou un ou plusieurs des indicateurs spécifiques suivants :</span><span class="sxs-lookup"><span data-stu-id="392b5-131">You can set this general flag or one or more of the following specific flags:</span></span><br/> <dl> <dd><span data-ttu-id="392b5-132">changement d’imprimante \_ \_ Ajouter un \_ travail</span><span class="sxs-lookup"><span data-stu-id="392b5-132">PRINTER\_CHANGE\_ADD\_JOB</span></span></dd> <dd><span data-ttu-id="392b5-133">\_travail d' \_ ensemble de modifications d’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-133">PRINTER\_CHANGE\_SET\_JOB</span></span></dd> <dd><span data-ttu-id="392b5-134">\_tâche de \_ Suppression de modification d’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-134">PRINTER\_CHANGE\_DELETE\_JOB</span></span></dd> <dd><span data-ttu-id="392b5-135">\_travail d' \_ écriture de modification d’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-135">PRINTER\_CHANGE\_WRITE\_JOB</span></span></dd> </dl>                                  |
| <span id="PRINTER_CHANGE_PORT"></span><span id="printer_change_port"></span><dl> <span data-ttu-id="392b5-136"><dt>**\_port de modification de l’imprimante \_**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-136"><dt>**PRINTER\_CHANGE\_PORT**</dt></span></span> </dl>                                   | <span data-ttu-id="392b5-137">Notifier toute modification apportée à un port.</span><span class="sxs-lookup"><span data-stu-id="392b5-137">Notify of any changes to a port.</span></span> <span data-ttu-id="392b5-138">Vous pouvez définir cet indicateur général ou un ou plusieurs des indicateurs spécifiques suivants :</span><span class="sxs-lookup"><span data-stu-id="392b5-138">You can set this general flag or one or more of the following specific flags:</span></span><br/> <dl> <dd><span data-ttu-id="392b5-139">changement d’imprimante \_ \_ Ajouter un \_ port</span><span class="sxs-lookup"><span data-stu-id="392b5-139">PRINTER\_CHANGE\_ADD\_PORT</span></span></dd> <dd><span data-ttu-id="392b5-140">\_modifier le \_ port de configuration de l’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-140">PRINTER\_CHANGE\_CONFIGURE\_PORT</span></span> </dd> <dd><span data-ttu-id="392b5-141">\_port de \_ Suppression de modification d’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-141">PRINTER\_CHANGE\_DELETE\_PORT</span></span></dd> </dl>                                                                       |
| <span id="PRINTER_CHANGE_PRINT_PROCESSOR"></span><span id="printer_change_print_processor"></span><dl> <span data-ttu-id="392b5-142"><dt>**changement d’imprimante du \_ \_ processeur d’impression \_**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-142"><dt>**PRINTER\_CHANGE\_PRINT\_PROCESSOR**</dt></span></span> </dl> | <span data-ttu-id="392b5-143">Notifier toute modification apportée à un processeur d’impression.</span><span class="sxs-lookup"><span data-stu-id="392b5-143">Notify of any changes to a print processor.</span></span> <span data-ttu-id="392b5-144">Vous pouvez définir cet indicateur général ou un ou plusieurs des indicateurs spécifiques suivants :</span><span class="sxs-lookup"><span data-stu-id="392b5-144">You can set this general flag or one or more of the following specific flags:</span></span> <br/> <dl> <dd><span data-ttu-id="392b5-145">modification de l’imprimante \_ \_ Ajouter un \_ processeur d’impression \_</span><span class="sxs-lookup"><span data-stu-id="392b5-145">PRINTER\_CHANGE\_ADD\_PRINT\_PROCESSOR</span></span> </dd> <dd><span data-ttu-id="392b5-146">changement d’imprimante- \_ \_ supprimer le \_ processeur d’impression \_</span><span class="sxs-lookup"><span data-stu-id="392b5-146">PRINTER\_CHANGE\_DELETE\_PRINT\_PROCESSOR</span></span></dd> </dl>                                                                                        |
| <span id="PRINTER_CHANGE_PRINTER"></span><span id="printer_change_printer"></span><dl> <span data-ttu-id="392b5-147"><dt>**imprimante de changement d’imprimante \_ \_**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-147"><dt>**PRINTER\_CHANGE\_PRINTER**</dt></span></span> </dl>                          | <span data-ttu-id="392b5-148">Notifier toute modification apportée à une imprimante.</span><span class="sxs-lookup"><span data-stu-id="392b5-148">Notify of any changes to a printer.</span></span> <span data-ttu-id="392b5-149">Vous pouvez définir cet indicateur général ou un ou plusieurs des indicateurs spécifiques suivants :</span><span class="sxs-lookup"><span data-stu-id="392b5-149">You can set this general flag or one or more of the following specific flags:</span></span><br/> <dl> <dd><span data-ttu-id="392b5-150">modification de l’imprimante \_ \_ Ajouter l' \_ imprimante</span><span class="sxs-lookup"><span data-stu-id="392b5-150">PRINTER\_CHANGE\_ADD\_PRINTER</span></span></dd> <dd><span data-ttu-id="392b5-151">imprimante de \_ jeu de modifications d’imprimante \_ \_</span><span class="sxs-lookup"><span data-stu-id="392b5-151">PRINTER\_CHANGE\_SET\_PRINTER</span></span></dd> <dd><span data-ttu-id="392b5-152">modification de l’imprimante \_ \_ Supprimer l' \_ imprimante</span><span class="sxs-lookup"><span data-stu-id="392b5-152">PRINTER\_CHANGE\_DELETE\_PRINTER</span></span></dd> <dd><span data-ttu-id="392b5-153">\_ \_ imprimante échec de \_ la modification de l’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-153">PRINTER\_CHANGE\_FAILED\_CONNECTION\_PRINTER</span></span></dd> </dl> |
| <span id="PRINTER_CHANGE_PRINTER_DRIVER"></span><span id="printer_change_printer_driver"></span><dl> <span data-ttu-id="392b5-154"><dt>**IMPRIMANTE \_ changer \_ le \_ pilote d’imprimante**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-154"><dt>**PRINTER\_CHANGE\_PRINTER\_DRIVER**</dt></span></span> </dl>    | <span data-ttu-id="392b5-155">Notifier toute modification apportée à un pilote d’imprimante.</span><span class="sxs-lookup"><span data-stu-id="392b5-155">Notify of any changes to a printer driver.</span></span> <span data-ttu-id="392b5-156">Vous pouvez définir cet indicateur général ou un ou plusieurs des indicateurs spécifiques suivants :</span><span class="sxs-lookup"><span data-stu-id="392b5-156">You can set this general flag or one or more of the following specific flags:</span></span><br/> <dl> <dd><span data-ttu-id="392b5-157">changement d’imprimante \_ \_ Ajouter un \_ pilote d’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-157">PRINTER\_CHANGE\_ADD\_PRINTER\_DRIVER</span></span></dd> <dd><span data-ttu-id="392b5-158">\_pilote d' \_ imprimante de jeu de modifications d’imprimante \_ \_</span><span class="sxs-lookup"><span data-stu-id="392b5-158">PRINTER\_CHANGE\_SET\_PRINTER\_DRIVER</span></span></dd> <dd><span data-ttu-id="392b5-159">modification de l’imprimante \_ \_ supprimer le \_ pilote d’imprimante \_</span><span class="sxs-lookup"><span data-stu-id="392b5-159">PRINTER\_CHANGE\_DELETE\_PRINTER\_DRIVER</span></span></dd> </dl>                                   |
| <span id="PRINTER_CHANGE_ALL"></span><span id="printer_change_all"></span><dl> <span data-ttu-id="392b5-160"><dt>**\_tout modifier l’imprimante \_**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-160"><dt>**PRINTER\_CHANGE\_ALL**</dt></span></span> </dl>                                      | <span data-ttu-id="392b5-161">Notifiez si l’une des modifications précédentes se produit.</span><span class="sxs-lookup"><span data-stu-id="392b5-161">Notify if any of the preceding changes occur.</span></span><br/>                                                                                                                                                                                                                                                                                                                     |
| <span id="PRINTER_CHANGE_SERVER"></span><span id="printer_change_server"></span><dl> <span data-ttu-id="392b5-162"><dt>**\_serveur de changement d’imprimante \_**</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-162"><dt>**PRINTER\_CHANGE\_SERVER**</dt></span></span> </dl>                             | <span data-ttu-id="392b5-163">Windows 7 : notification de toute modification apportée au serveur.</span><span class="sxs-lookup"><span data-stu-id="392b5-163">Windows 7: Notify of any changes to the server.</span></span><br/> <span data-ttu-id="392b5-164">Cet indicateur n’est pas inclus dans les modifications contrôlées en définissant la valeur de **\_ \_ modifier l’imprimante** .</span><span class="sxs-lookup"><span data-stu-id="392b5-164">This flag is not included in the changes monitored by setting the **PRINTER\_CHANGE\_ALL** value.</span></span><br/>                                                                                                                                                                                                      |



 

<span data-ttu-id="392b5-165">Pour obtenir une description des indicateurs plus spécifiques dans le tableau précédent, consultez la fonction [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) .</span><span class="sxs-lookup"><span data-stu-id="392b5-165">For descriptions of the more specific flags in the preceding table, see the [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) function.</span></span>

</dd> <dt>

<span data-ttu-id="392b5-166">*fdwOptions*</span><span class="sxs-lookup"><span data-stu-id="392b5-166">*fdwOptions*</span></span> 
</dt> <dd>

<span data-ttu-id="392b5-167">Indicateur qui détermine la catégorie des imprimantes pour lesquelles les notifications fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="392b5-167">The flag that determines the category of printers for which notifications will work.</span></span>



| <span data-ttu-id="392b5-168">Valeur</span><span class="sxs-lookup"><span data-stu-id="392b5-168">Value</span></span>                                                                                                                                                                                                                                                               | <span data-ttu-id="392b5-169">Signification</span><span class="sxs-lookup"><span data-stu-id="392b5-169">Meaning</span></span>                                                                                                                                      |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="PRINTER_NOTIFY_CATEGORY_ALL"></span><span id="printer_notify_category_all"></span><dl> <span data-ttu-id="392b5-170"><dt>**Imprimante \_ NOTIFIer la \_ catégorie \_ tous les**</dt> <dt>0x001000</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-170"><dt>**PRINTER\_NOTIFY\_CATEGORY\_ALL**</dt> <dt>0x001000</dt></span></span> </dl> | <span data-ttu-id="392b5-171">[**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) retourne des notifications pour les imprimantes 2D et 3D.</span><span class="sxs-lookup"><span data-stu-id="392b5-171">[**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) returns notifications for both 2D and 3D printers.</span></span><br/> |
| <span id="PRINTER_NOTIFY_CATEGORY_3D"></span><span id="printer_notify_category_3d"></span><dl> <span data-ttu-id="392b5-172"><dt>**Imprimante \_ NOTIFIer la \_ catégorie 0x002000 \_ 3D**</dt> <dt></dt></span><span class="sxs-lookup"><span data-stu-id="392b5-172"><dt>**PRINTER\_NOTIFY\_CATEGORY\_3D**</dt> <dt>0x002000</dt></span></span> </dl>    | <span data-ttu-id="392b5-173">[**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) retourne uniquement les notifications pour les imprimantes 3D.</span><span class="sxs-lookup"><span data-stu-id="392b5-173">[**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) returns notifications only for 3D printers.</span></span><br/>        |



 

<span data-ttu-id="392b5-174">Lorsque cet indicateur est défini sur zéro (0), **FindFirstPrinterChangeNotification** ne fonctionne que pour les imprimantes 2D.</span><span class="sxs-lookup"><span data-stu-id="392b5-174">When this flag is set to zero (0), **FindFirstPrinterChangeNotification** will only work for 2D printers.</span></span> <span data-ttu-id="392b5-175">Il s’agit de la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="392b5-175">This is the default value.</span></span>

</dd> <dt>

<span data-ttu-id="392b5-176">*pPrinterNotifyOptions* \[ dans, facultatif\]</span><span class="sxs-lookup"><span data-stu-id="392b5-176">*pPrinterNotifyOptions* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="392b5-177">Pointeur vers une structure [**d' \_ \_ options de notification d’imprimante**](printer-notify-options.md) .</span><span class="sxs-lookup"><span data-stu-id="392b5-177">A pointer to a [**PRINTER\_NOTIFY\_OPTIONS**](printer-notify-options.md) structure.</span></span> <span data-ttu-id="392b5-178">Le membre **pTypes** de cette structure est un tableau d’une ou de plusieurs structures de types d’options de notification d' [**imprimante \_ \_ \_**](printer-notify-options-type.md) , chacune d’elles spécifiant un champ d’informations sur l’imprimante à surveiller.</span><span class="sxs-lookup"><span data-stu-id="392b5-178">The **pTypes** member of this structure is an array of one or more [**PRINTER\_NOTIFY\_OPTIONS\_TYPE**](printer-notify-options-type.md) structures, each of which specifies a printer information field to monitor.</span></span> <span data-ttu-id="392b5-179">Une notification de modification se produit lorsqu’un ou plusieurs des champs spécifiés sont modifiés.</span><span class="sxs-lookup"><span data-stu-id="392b5-179">A change notification occurs when one or more of the specified fields changes.</span></span> <span data-ttu-id="392b5-180">Lorsqu’une modification se produit, la fonction [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) peut récupérer les nouvelles informations sur l’imprimante.</span><span class="sxs-lookup"><span data-stu-id="392b5-180">When a change occurs, the [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) function can retrieve the new printer information.</span></span> <span data-ttu-id="392b5-181">Ce paramètre peut avoir la **valeur null** si *fdwFilter* est différent de zéro.</span><span class="sxs-lookup"><span data-stu-id="392b5-181">This parameter can be **NULL** if *fdwFilter* is nonzero.</span></span>

<span data-ttu-id="392b5-182">Pour obtenir la liste des champs qui peuvent être analysés, voir [**Printer \_ Notify \_ options \_ type**](printer-notify-options-type.md).</span><span class="sxs-lookup"><span data-stu-id="392b5-182">For a list of fields that can be monitored, see [**PRINTER\_NOTIFY\_OPTIONS\_TYPE**](printer-notify-options-type.md).</span></span>

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="392b5-183">Valeur retournée</span><span class="sxs-lookup"><span data-stu-id="392b5-183">Return value</span></span>

<span data-ttu-id="392b5-184">Si la fonction est réussie, la valeur de retour est un handle vers un objet de notification de modification associé à l’imprimante ou au serveur d’impression spécifié.</span><span class="sxs-lookup"><span data-stu-id="392b5-184">If the function succeeds, the return value is a handle to a change notification object associated with the specified printer or print server.</span></span>

<span data-ttu-id="392b5-185">Si la fonction échoue, la valeur de retour est une valeur de handle non valide \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="392b5-185">If the function fails, the return value is INVALID\_HANDLE\_VALUE.</span></span>

## <a name="remarks"></a><span data-ttu-id="392b5-186">Notes</span><span class="sxs-lookup"><span data-stu-id="392b5-186">Remarks</span></span>

> [!Note]  
> <span data-ttu-id="392b5-187">Il s’agit d’une fonction de blocage ou synchrone qui peut ne pas être renvoyée immédiatement.</span><span class="sxs-lookup"><span data-stu-id="392b5-187">This is a blocking or synchronous function and might not return immediately.</span></span> <span data-ttu-id="392b5-188">La vitesse à laquelle cette fonction est retournée dépend des facteurs d’exécution tels que l’état du réseau, la configuration du serveur d’impression et les facteurs d’implémentation des pilotes d’imprimante qui sont difficiles à prédire lors de l’écriture d’une application.</span><span class="sxs-lookup"><span data-stu-id="392b5-188">How quickly this function returns depends on run-time factors such as network status, print server configuration, and printer driver implementation factors that are difficult to predict when writing an application.</span></span> <span data-ttu-id="392b5-189">L’appel de cette fonction à partir d’un thread qui gère l’interaction avec l’interface utilisateur peut faire que l’application semble ne pas répondre.</span><span class="sxs-lookup"><span data-stu-id="392b5-189">Calling this function from a thread that manages interaction with the user interface could make the application appear to be unresponsive.</span></span>

 

<span data-ttu-id="392b5-190">Pour surveiller une imprimante ou un serveur d’impression, appelez la fonction **FindFirstPrinterChangeNotification** , puis utilisez le descripteur d’objet de notification de modification retourné dans un appel à l’une des [fonctions Wait](/windows/desktop/Sync/wait-functions).</span><span class="sxs-lookup"><span data-stu-id="392b5-190">To monitor a printer or print server, call the **FindFirstPrinterChangeNotification** function, then use the returned change notification object handle in a call to one of the [wait functions](/windows/desktop/Sync/wait-functions).</span></span> <span data-ttu-id="392b5-191">Une opération d’attente sur un objet de notification de modification est satisfaite lorsque l’objet de notification de modification passe à l’état signalé.</span><span class="sxs-lookup"><span data-stu-id="392b5-191">A wait operation on a change notification object is satisfied when the change notification object enters the signaled state.</span></span> <span data-ttu-id="392b5-192">Le système signale l’objet lorsqu’une ou plusieurs des modifications spécifiées par *fdwFilter* ou *pPrinterNotifyOptions* se produisent sur l’imprimante ou le serveur d’impression analysé.</span><span class="sxs-lookup"><span data-stu-id="392b5-192">The system signals the object when one or more of the changes specified by *fdwFilter* or *pPrinterNotifyOptions* occurs in the monitored printer or print server.</span></span>

<span data-ttu-id="392b5-193">Lorsque vous appelez **FindFirstPrinterChangeNotification**, *fdwFilter* doit être différent de zéro ou *pPrinterNotifyOptions* doit avoir une **valeur non null**.</span><span class="sxs-lookup"><span data-stu-id="392b5-193">When you call **FindFirstPrinterChangeNotification**, either *fdwFilter* must be nonzero or *pPrinterNotifyOptions* must be non-**NULL**.</span></span> <span data-ttu-id="392b5-194">Si les deux sont spécifiés, des notifications sont générées pour les deux.</span><span class="sxs-lookup"><span data-stu-id="392b5-194">If both are specified, notifications will occur for both.</span></span>

<span data-ttu-id="392b5-195">Quand une opération d’attente sur un objet de notification de modification d’imprimante est satisfaite, appelez la fonction [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) pour déterminer la cause de la notification.</span><span class="sxs-lookup"><span data-stu-id="392b5-195">When a wait operation on a printer change notification object is satisfied, call the [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) function to determine the cause of the notification.</span></span> <span data-ttu-id="392b5-196">Pour une condition spécifiée par *fdwFilter*, **FindNextPrinterChangeNotification** signale la ou les conditions qui ont changé.</span><span class="sxs-lookup"><span data-stu-id="392b5-196">For a condition specified by *fdwFilter*, **FindNextPrinterChangeNotification** reports the condition or conditions that changed.</span></span> <span data-ttu-id="392b5-197">Pour un champ d’informations d’imprimante spécifié par *pPrinterNotifyOptions*, **FindNextPrinterChangeNotification** signale le ou les champs qui ont changé, ainsi que les nouvelles informations pour ces champs.</span><span class="sxs-lookup"><span data-stu-id="392b5-197">For a printer information field specified by *pPrinterNotifyOptions*, **FindNextPrinterChangeNotification** reports the field or fields that changed as well as the new information for these fields.</span></span> <span data-ttu-id="392b5-198">**FindNextPrinterChangeNotification** réinitialise également l’objet de notification de modification à l’état non signalé afin que vous puissiez l’utiliser dans une autre opération d’attente pour continuer à surveiller l’imprimante ou le serveur d’impression.</span><span class="sxs-lookup"><span data-stu-id="392b5-198">**FindNextPrinterChangeNotification** also resets the change notification object to the nonsignaled state so you can use it in another wait operation to continue monitoring the printer or print server.</span></span>

<span data-ttu-id="392b5-199">À une exception près, n’appelez pas la fonction [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) si l’objet de notification de modification n’est pas dans l’état signalé.</span><span class="sxs-lookup"><span data-stu-id="392b5-199">With one exception, do not call the [**FindNextPrinterChangeNotification**](findnextprinterchangenotification.md) function if the change notification object is not in the signaled state.</span></span> <span data-ttu-id="392b5-200">Si la fonction Wait retourne le délai d’attente de la valeur \_ , l’objet de modification n’est pas dans l’état signalé.</span><span class="sxs-lookup"><span data-stu-id="392b5-200">If the wait function returns the value WAIT\_TIMEOUT, the change object is not in the signaled state.</span></span> <span data-ttu-id="392b5-201">Appelez la fonction **FindNextPrinterChangeNotification** uniquement si la fonction Wait est réussie sans dépassement du délai d’attente. L’exception est quand **FindNextPrinterChangeNotification** est appelé avec le \_ bit d' \_ actualisation des options \_ de notification d’imprimante défini dans le paramètre *pPrinterNotifyOptions* .</span><span class="sxs-lookup"><span data-stu-id="392b5-201">Call the **FindNextPrinterChangeNotification** function only if the wait function succeeds without timing out. The exception is when **FindNextPrinterChangeNotification** is called with the PRINTER\_NOTIFY\_OPTIONS\_REFRESH bit set in the *pPrinterNotifyOptions* parameter.</span></span>

<span data-ttu-id="392b5-202">Lorsque vous n’avez plus besoin de l’objet de notification de modification, fermez-le en appelant la fonction [**FindClosePrinterChangeNotification**](findcloseprinterchangenotification.md) .</span><span class="sxs-lookup"><span data-stu-id="392b5-202">When you no longer need the change notification object, close it by calling the [**FindClosePrinterChangeNotification**](findcloseprinterchangenotification.md) function.</span></span>

<span data-ttu-id="392b5-203">Les appelants de **FindFirstPrinterChangeNotification** doivent s’assurer que le handle d’imprimante passé dans **FindFirstPrinterChangeNotification** reste valide jusqu’à ce que [**FindClosePrinterChangeNotification**](findcloseprinterchangenotification.md) soit appelé.</span><span class="sxs-lookup"><span data-stu-id="392b5-203">Callers of **FindFirstPrinterChangeNotification** must ensure that the printer handle passed into **FindFirstPrinterChangeNotification** remains valid until [**FindClosePrinterChangeNotification**](findcloseprinterchangenotification.md) is called.</span></span> <span data-ttu-id="392b5-204">Si le descripteur d’imprimante est fermé avant le handle de notification de modification d’imprimante, les notifications supplémentaires ne seront pas remises.</span><span class="sxs-lookup"><span data-stu-id="392b5-204">If the printer handle is closed before the printer change notification handle, further notifications will fail to be delivered.</span></span>

<span data-ttu-id="392b5-205">**FindFirstPrinterChangeNotification** n’enverra pas de notifications de modifications pour les imprimantes 3D aux descripteurs de serveur.</span><span class="sxs-lookup"><span data-stu-id="392b5-205">**FindFirstPrinterChangeNotification** will not send change notifications for 3D printers to server handles.</span></span>

> [!Note]  
> <span data-ttu-id="392b5-206">Dans Windows XP avec Service Pack 2 (SP2) et versions ultérieures, le pare-feu de connexion Internet (ICF) bloque les ports d’imprimante par défaut, mais une exception pour le partage de fichiers et d’imprimantes peut être activée.</span><span class="sxs-lookup"><span data-stu-id="392b5-206">In Windows XP with Service Pack 2 (SP2) and later, the Internet Connection Firewall (ICF) blocks printer ports by default, but an exception for File and Print Sharing can be enabled.</span></span> <span data-ttu-id="392b5-207">Si un utilisateur établit une connexion d’imprimante avec un autre ordinateur et que l’exception n’est pas activée, l’utilisateur ne reçoit pas de notifications de modification d’imprimante à partir du serveur.</span><span class="sxs-lookup"><span data-stu-id="392b5-207">If a user makes a printer connection to another machine, and the exception is not enabled, then the user will not receive printer change notifications from the server.</span></span> <span data-ttu-id="392b5-208">Un administrateur d’ordinateur devra activer l’exception.</span><span class="sxs-lookup"><span data-stu-id="392b5-208">A machine admin will have to enable exception.</span></span>

 

## <a name="requirements"></a><span data-ttu-id="392b5-209">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="392b5-209">Requirements</span></span>



| <span data-ttu-id="392b5-210">Condition requise</span><span class="sxs-lookup"><span data-stu-id="392b5-210">Requirement</span></span> | <span data-ttu-id="392b5-211">Valeur</span><span class="sxs-lookup"><span data-stu-id="392b5-211">Value</span></span> |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="392b5-212">Client minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="392b5-212">Minimum supported client</span></span><br/> | <span data-ttu-id="392b5-213">Windows 2000 Professionnel - \[Applications de bureau uniquement\]</span><span class="sxs-lookup"><span data-stu-id="392b5-213">Windows 2000 Professional \[desktop apps only\]</span></span><br/>                                                |
| <span data-ttu-id="392b5-214">Serveur minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="392b5-214">Minimum supported server</span></span><br/> | <span data-ttu-id="392b5-215">Windows 2000 Server - \[Applications de bureau uniquement\]</span><span class="sxs-lookup"><span data-stu-id="392b5-215">Windows 2000 Server \[desktop apps only\]</span></span><br/>                                                      |
| <span data-ttu-id="392b5-216">En-tête</span><span class="sxs-lookup"><span data-stu-id="392b5-216">Header</span></span><br/>                   | <dl> <span data-ttu-id="392b5-217"><dt>Winspool. h (inclure Windows. h)</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-217"><dt>Winspool.h (include Windows.h)</dt></span></span> </dl> |
| <span data-ttu-id="392b5-218">Bibliothèque</span><span class="sxs-lookup"><span data-stu-id="392b5-218">Library</span></span><br/>                  | <dl> <span data-ttu-id="392b5-219"><dt>Winspool. lib</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-219"><dt>Winspool.lib</dt></span></span> </dl>                   |
| <span data-ttu-id="392b5-220">DLL</span><span class="sxs-lookup"><span data-stu-id="392b5-220">DLL</span></span><br/>                      | <dl> <span data-ttu-id="392b5-221"><dt>Spoolss.dll</dt></span><span class="sxs-lookup"><span data-stu-id="392b5-221"><dt>Spoolss.dll</dt></span></span> </dl>                    |



## <a name="see-also"></a><span data-ttu-id="392b5-222">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="392b5-222">See also</span></span>

<dl> <dt>

[<span data-ttu-id="392b5-223">Impression</span><span class="sxs-lookup"><span data-stu-id="392b5-223">Printing</span></span>](printdocs-printing.md)
</dt> <dt>

[<span data-ttu-id="392b5-224">Fonctions API du spouleur d’impression</span><span class="sxs-lookup"><span data-stu-id="392b5-224">Print Spooler API Functions</span></span>](printing-and-print-spooler-functions.md)
</dt> <dt>

[<span data-ttu-id="392b5-225">**FindClosePrinterChangeNotification**</span><span class="sxs-lookup"><span data-stu-id="392b5-225">**FindClosePrinterChangeNotification**</span></span>](findcloseprinterchangenotification.md)
</dt> <dt>

[<span data-ttu-id="392b5-226">**FindNextPrinterChangeNotification**</span><span class="sxs-lookup"><span data-stu-id="392b5-226">**FindNextPrinterChangeNotification**</span></span>](findnextprinterchangenotification.md)
</dt> <dt>

[<span data-ttu-id="392b5-227">**OpenPrinter**</span><span class="sxs-lookup"><span data-stu-id="392b5-227">**OpenPrinter**</span></span>](openprinter.md)
</dt> <dt>

[<span data-ttu-id="392b5-228">**\_options de notification d’imprimante \_**</span><span class="sxs-lookup"><span data-stu-id="392b5-228">**PRINTER\_NOTIFY\_OPTIONS**</span></span>](printer-notify-options.md)
</dt> <dt>

[<span data-ttu-id="392b5-229">**\_type d' \_ options de notification d’imprimante \_**</span><span class="sxs-lookup"><span data-stu-id="392b5-229">**PRINTER\_NOTIFY\_OPTIONS\_TYPE**</span></span>](printer-notify-options-type.md)
</dt> </dl>

 

