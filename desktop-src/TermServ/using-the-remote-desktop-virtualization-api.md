---
title: Utilisation de l’API de virtualisation Bureau à distance
description: Les développeurs peuvent utiliser cette API pour personnaliser la logique utilisée par le Service Broker pour les connexions Bureau à distance pour déterminer la destination optimale pour une connexion client entrante.
ms.assetid: b25eb87e-dac4-49ce-890e-b39c7e9e3408
ms.tgt_platform: multiple
keywords:
- Services Bureau à distance Services Bureau à distance à l’aide de l’API de virtualisation
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cda9ebfc014a2c8ec20d299bbb8be9183b25ce89
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104382074"
---
# <a name="using-the-remote-desktop-virtualization-api"></a><span data-ttu-id="511f1-104">Utilisation de l’API de virtualisation Bureau à distance</span><span class="sxs-lookup"><span data-stu-id="511f1-104">Using the Remote Desktop Virtualization API</span></span>

<span data-ttu-id="511f1-105">Le service de rôle annuaire de sessions des services Terminal Server (annuaire de sessions TS) permet aux serveurs Terminal Server de stocker les informations d’utilisateur et de session dans une base de données appelée annuaire de sessions.</span><span class="sxs-lookup"><span data-stu-id="511f1-105">The Terminal Services Session Directory (TS  Session Directory) role service allows terminal servers to store user and session information in a database called a session directory.</span></span> <span data-ttu-id="511f1-106">Lorsqu’un utilisateur se connecte à un serveur Terminal Server dans une batterie de serveurs, l’annuaire de sessions TS détermine si l’utilisateur a déjà une session en cours d’exécution sur un serveur Terminal Server et, si tel est le cas, il redirige l’utilisateur vers ce serveur Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="511f1-106">When a user connects to a terminal server in a farm, TS Session Directory determines whether the user already has a session running on a terminal server and if so, it redirects the user to that terminal server.</span></span>

<span data-ttu-id="511f1-107">Dans Windows Server 2008, le service de rôle annuaire de sessions TS a été développé et renommé Terminal Services session Broker (session Broker TS).</span><span class="sxs-lookup"><span data-stu-id="511f1-107">In Windows Server 2008, the TS Session Directory role service was expanded and renamed Terminal Services Session Broker (TS Session Broker).</span></span> <span data-ttu-id="511f1-108">Outre la maintenance d’un répertoire de sessions existantes, le service session Broker TS peut également négocier les connexions entrantes.</span><span class="sxs-lookup"><span data-stu-id="511f1-108">In addition to maintaining a directory of existing sessions, TS Session Broker can also broker incoming connections.</span></span> <span data-ttu-id="511f1-109">Lorsque session Broker TS reçoit une connexion entrante d’un utilisateur, il consulte sa base de données pour déterminer si l’utilisateur a une session existante sur un serveur Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="511f1-109">When TS Session Broker receives an incoming connection from a user, it checks its database to determine whether the user has an existing session on a terminal server.</span></span> <span data-ttu-id="511f1-110">Dans ce cas, le service session Broker TS redirige la connexion vers ce même serveur Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="511f1-110">If so, TS Session Broker redirects the connection to that same terminal server.</span></span> <span data-ttu-id="511f1-111">Si ce n’est pas le cas, la session Broker TS détermine quel serveur Terminal Server a le moins de connexions et redirige la connexion vers ce serveur.</span><span class="sxs-lookup"><span data-stu-id="511f1-111">If not, TS Session Broker determines which terminal server has the fewest connections and redirects the connection to that server.</span></span>

<span data-ttu-id="511f1-112">À compter de Windows Server 2008, Microsoft a également publié une interface de programmation d’applications (API) publique pour la surveillance et l’interaction avec les sessions sur les serveurs Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="511f1-112">Beginning with Windows Server 2008, Microsoft also released a public application programming interface (API) for monitoring and interacting with sessions on terminal servers.</span></span> <span data-ttu-id="511f1-113">Cette API est décrite dans [Connexion Bureau à distance référence du plug-in Broker](/windows/desktop/TermServ/terminal-services-virtualization-api-reference).</span><span class="sxs-lookup"><span data-stu-id="511f1-113">This API is described in [Remote Desktop Connection Broker Plug-in Reference](/windows/desktop/TermServ/terminal-services-virtualization-api-reference).</span></span> <span data-ttu-id="511f1-114">À l’aide de cette API, les développeurs peuvent créer des plug-ins de stratégie personnalisés qui remplacent la logique de redirection standard de session Broker TS.</span><span class="sxs-lookup"><span data-stu-id="511f1-114">Using this API, developers can create custom policy plug-ins that override the standard redirection logic of TS Session Broker.</span></span> <span data-ttu-id="511f1-115">Les plug-ins personnalisés peuvent rediriger les sessions vers les serveurs Terminal Server, ainsi que pour les machines virtuelles, les bureaux virtuels, les serveurs lames et les bureaux physiques.</span><span class="sxs-lookup"><span data-stu-id="511f1-115">The custom plug-ins can redirect sessions to terminal servers, as well as virtual machines, virtual desktops, blade servers, and physical desktops.</span></span>

<span data-ttu-id="511f1-116">Dans Windows Server 2008 R2, l’architecture de Connexion Bureau à distance Broker (Service Broker pour les connexions Bureau à distance) (anciennement session Broker TS) a été étendue pour prendre en charge les connexions aux ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="511f1-116">In Windows Server 2008 R2, the architecture of Remote Desktop Connection Broker (RD Connection Broker) (formerly known as TS Session Broker) was expanded to support connections to virtual machines.</span></span> <span data-ttu-id="511f1-117">La nouvelle architecture prend en charge la gestion des sessions pour les machines virtuelles via l’API de virtualisation Bureau à distance.</span><span class="sxs-lookup"><span data-stu-id="511f1-117">The new architecture supports session management for virtual machines through the Remote Desktop Virtualization API.</span></span> <span data-ttu-id="511f1-118">Les développeurs peuvent utiliser cette API pour personnaliser la logique utilisée par le Service Broker pour les connexions Bureau à distance pour déterminer la destination optimale pour une connexion client entrante.</span><span class="sxs-lookup"><span data-stu-id="511f1-118">Developers can use this API to customize the logic that RD Connection Broker uses to determine the best destination for an incoming client connection.</span></span>

<span data-ttu-id="511f1-119">Bureau à distance API de virtualisation offre plusieurs avantages aux développeurs :</span><span class="sxs-lookup"><span data-stu-id="511f1-119">Remote Desktop Virtualization API offers several benefits to developers:</span></span>

-   <span data-ttu-id="511f1-120">Les interfaces permettant de travailler avec des serveurs terminaux physiques sont similaires à celles utilisées pour travailler avec des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="511f1-120">The interfaces for working with physical terminal servers are similar to those for working with virtual machines.</span></span>
-   <span data-ttu-id="511f1-121">Les développeurs peuvent remplacer tout ou partie de la logique de redirection standard.</span><span class="sxs-lookup"><span data-stu-id="511f1-121">Developers can replace all or part of the standard redirection logic.</span></span> <span data-ttu-id="511f1-122">Les développeurs peuvent s’appuyer sur le code fourni avec le produit et n’ont pas besoin de tout écrire à partir de zéro.</span><span class="sxs-lookup"><span data-stu-id="511f1-122">Developers can build on the code that ships with the product and do not have to write everything from scratch.</span></span>
-   <span data-ttu-id="511f1-123">Aucun agent de gestion supplémentaire n’est requis sur le serveur de gestion ou dans la session.</span><span class="sxs-lookup"><span data-stu-id="511f1-123">No additional management agent is required on the managing server or within the session.</span></span>
-   <span data-ttu-id="511f1-124">Les plug-ins session Broker TS développés pour être utilisés avec Windows Server 2008 sont toujours pris en charge.</span><span class="sxs-lookup"><span data-stu-id="511f1-124">TS Session Broker plug-ins developed for use with Windows Server 2008 are still supported.</span></span>
-   <span data-ttu-id="511f1-125">L’API permet également aux développeurs de créer des interfaces utilisateur pour l’administration des serveurs Bureau à distance hôte de session (hôte de session Bureau à distance) (anciennement appelés « serveurs Terminal Server ») et des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="511f1-125">The API also allows developers to create user interfaces for administration of both Remote Desktop Session Host (RD Session Host) servers (formerly known as "terminal servers") and virtual machines.</span></span>

## <a name="related-topics"></a><span data-ttu-id="511f1-126">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="511f1-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="511f1-127">Informations de référence sur l’API de virtualisation Bureau à distance</span><span class="sxs-lookup"><span data-stu-id="511f1-127">Remote Desktop Virtualization API Reference</span></span>](terminal-services-virtualization-api-reference.md)
</dt> <dt>

[<span data-ttu-id="511f1-128">Informations de référence sur le plug-in Service Broker Connexion Bureau à distance</span><span class="sxs-lookup"><span data-stu-id="511f1-128">Remote Desktop Connection Broker Plug-in Reference</span></span>](/windows/desktop/TermServ/terminal-services-virtualization-api-reference)
</dt> </dl>

 

 