---
title: Stockage des informations spécifiques à l’utilisateur
description: Les applications doivent stocker les informations spécifiques à l’utilisateur dans des emplacements spécifiques à l’utilisateur, séparément des informations globales qui s’appliquent à tous les utilisateurs.
ms.assetid: 32bd1d24-1d2e-4c0a-acdb-0cc67f275e6e
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 40c6236b7ba11a8b3149533e920b9b9413085d93
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104031404"
---
# <a name="storing-user-specific-information"></a><span data-ttu-id="67343-103">Stockage des informations spécifiques à l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="67343-103">Storing user-specific information</span></span>

<span data-ttu-id="67343-104">Dans un environnement Services Bureau à distance, les applications doivent stocker des informations spécifiques à l’utilisateur dans des emplacements spécifiques à l’utilisateur, indépendamment des informations globales qui s’appliquent à tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="67343-104">In a Remote Desktop Services environment, applications should store user-specific information in user-specific locations, separately from global information that applies to all users.</span></span> <span data-ttu-id="67343-105">Cette règle s’applique aux informations stockées dans le registre, ainsi qu’aux informations stockées dans les fichiers.</span><span class="sxs-lookup"><span data-stu-id="67343-105">This rule applies to information stored in the registry, as well as information stored in files.</span></span> <span data-ttu-id="67343-106">En général, ne partez pas du principe qu’un ordinateur est équivalent à un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="67343-106">In general, do not assume that one computer is equivalent to one user.</span></span>

<span data-ttu-id="67343-107">Stockez les informations de Registre spécifiques à l’utilisateur sous la clé de Registre **HKEY \_ Current \_ User** .</span><span class="sxs-lookup"><span data-stu-id="67343-107">Store user-specific registry information under the **HKEY\_CURRENT\_USER** registry key.</span></span> <span data-ttu-id="67343-108">Services Bureau à distance charge la ruche de Registre personnel de l’utilisateur actuel dans **HKEY \_ Current \_ User** lorsque l’utilisateur ouvre une session.</span><span class="sxs-lookup"><span data-stu-id="67343-108">Remote Desktop Services loads the current user's personal registry hive into **HKEY\_CURRENT\_USER** when the user logs on.</span></span> <span data-ttu-id="67343-109">Bien sûr, Services Bureau à distance gère le registre pour s’assurer que chacun des clients connectés détecte la ruche utilisateur correcte sous **HKEY \_ Current \_ User**.</span><span class="sxs-lookup"><span data-stu-id="67343-109">Of course, Remote Desktop Services manages the registry to ensure that each of the logged-on clients detects the correct user hive under **HKEY\_CURRENT\_USER**.</span></span> <span data-ttu-id="67343-110">Pour plus d’informations sur les clés de Registre, consultez [sécurité de la clé de Registre et droits d’accès](/windows/desktop/SysInfo/registry-key-security-and-access-rights) et [ruches du registre](/windows/desktop/SysInfo/registry-hives).</span><span class="sxs-lookup"><span data-stu-id="67343-110">For more information about registry keys, see [Registry Key Security and Access Rights](/windows/desktop/SysInfo/registry-key-security-and-access-rights) and [Registry Hives](/windows/desktop/SysInfo/registry-hives).</span></span>

<span data-ttu-id="67343-111">En revanche, tous les utilisateurs partagent la ruche de l' **\_ \_ ordinateur local HKEY** .</span><span class="sxs-lookup"><span data-stu-id="67343-111">In contrast, all users share the **HKEY\_LOCAL\_MACHINE** hive.</span></span> <span data-ttu-id="67343-112">Utilisez **HKEY \_ local \_ machine** pour stocker des informations spécifiques à l’ordinateur, et non des informations spécifiques à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="67343-112">Use **HKEY\_LOCAL\_MACHINE** to store computer-specific information, not user-specific information.</span></span>

<span data-ttu-id="67343-113">Stockez les fichiers de préférences utilisateur ou d’autres fichiers spécifiques à l’utilisateur dans le répertoire racine de l’utilisateur ou dans un répertoire spécifié par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="67343-113">Store user-preference files or other user-specific files in the user's root directory or in a user-specified directory.</span></span> <span data-ttu-id="67343-114">Cette considération s’applique aux fichiers temporaires utilisés pour stocker des informations intermédiaires (telles que les données mises en cache) ou à transmettre des données à une autre application.</span><span class="sxs-lookup"><span data-stu-id="67343-114">This consideration applies to temporary files used to store interim information (such as cached data) or to pass data on to another application.</span></span> <span data-ttu-id="67343-115">Les fichiers temporaires spécifiques à l’utilisateur doivent également être stockés par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="67343-115">User-specific temporary files must also be stored on a per-user basis.</span></span>

<span data-ttu-id="67343-116">Vous pouvez utiliser la fonction [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation) avec l' \_ indicateur personnel de CSIDL pour connaître l’emplacement du répertoire des fichiers personnels de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="67343-116">You can use the [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation) function with the CSIDL\_PERSONAL flag to get the location of the user's personal files directory.</span></span> <span data-ttu-id="67343-117">Vous pouvez également utiliser la fonction [**GetWindowsDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getwindowsdirectorya) pour récupérer le chemin d’accès du répertoire Windows.</span><span class="sxs-lookup"><span data-stu-id="67343-117">You can also use the [**GetWindowsDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getwindowsdirectorya) function to retrieve the path of the Windows directory.</span></span> <span data-ttu-id="67343-118">Dans un environnement de Services Bureau à distance, il est garanti que le répertoire Windows est privé pour chaque utilisateur.</span><span class="sxs-lookup"><span data-stu-id="67343-118">In a Remote Desktop Services environment, the Windows directory is guaranteed to be private for each user.</span></span> <span data-ttu-id="67343-119">Ne stockez pas les fichiers spécifiques à l’utilisateur dans le répertoire système, tel que WINDOWS ou le répertoire de programme, tel que Program Files.</span><span class="sxs-lookup"><span data-stu-id="67343-119">Do not store user-specific files under the system directory, such as WINDOWS, or program directory, such as Program Files.</span></span>

<span data-ttu-id="67343-120">Pour éviter les conflits entre les informations et les préférences des utilisateurs, les applications doivent stocker des informations temporaires par utilisateur dans des fichiers temporaires spécifiques à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="67343-120">To avoid conflicts among users' information and preferences, applications should store per-user temporary information in user-specific temporary files.</span></span> <span data-ttu-id="67343-121">Les fichiers temporaires spécifiques à l’utilisateur empêchent également les échecs d’application causés par des conflits de verrouillage de fichiers.</span><span class="sxs-lookup"><span data-stu-id="67343-121">User-specific temporary files also prevent application failures caused by file-locking conflicts.</span></span> <span data-ttu-id="67343-122">Pour spécifier le chemin d’accès pour le stockage des informations temporaires, utilisez la fonction [**GetTempPath**](/windows/desktop/api/fileapi/nf-fileapi-gettemppatha) .</span><span class="sxs-lookup"><span data-stu-id="67343-122">To specify the path for storing temporary information, use the [**GetTempPath**](/windows/desktop/api/fileapi/nf-fileapi-gettemppatha) function.</span></span>

 

 