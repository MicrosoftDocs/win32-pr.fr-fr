---
title: Police, boîte de dialogue
description: La boîte de dialogue police permet à l’utilisateur de choisir des attributs pour une police logique, tels que la famille de polices et le style de police associé, la taille du point, les effets (souligné, barré et couleur du texte), ainsi qu’un script (ou jeu de caractères).
ms.assetid: e8a996aa-4e34-45d0-a325-9c20b1a6ce07
keywords:
- Interface utilisateur Windows, entrée utilisateur
- Interface utilisateur Windows, bibliothèque de boîtes de dialogue communes
- entrée utilisateur, bibliothèque de boîtes de dialogue communes
- capture de l’entrée utilisateur, bibliothèque de boîtes de dialogue communes
- Bibliothèque de boîtes de dialogue communes
- boîtes de dialogue communes
- Police (boîte de dialogue)
- boîte de dialogue Personnalisation de la police
- indicateurs, boîte de dialogue police
- indicateurs d’initialisation
- boîtes de dialogue prédéfinies
- boîtes de dialogue, police
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f9a752ce53ecf496c58efb0c346a8c3d67c4f1b1
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104031793"
---
# <a name="font-dialog-box"></a><span data-ttu-id="4d556-115">Police, boîte de dialogue</span><span class="sxs-lookup"><span data-stu-id="4d556-115">Font Dialog Box</span></span>

<span data-ttu-id="4d556-116">La boîte de dialogue **police** permet à l’utilisateur de choisir des attributs pour une police logique, tels que la famille de polices et le style de police associé, la taille du point, les effets (souligné, barré et couleur du texte), ainsi qu’un script (ou jeu de caractères).</span><span class="sxs-lookup"><span data-stu-id="4d556-116">The **Font** dialog box lets the user choose attributes for a logical font, such as font family and associated font style, point size, effects (underline, strikeout, and text color), and a script (or character set).</span></span>

<span data-ttu-id="4d556-117">Vous créez et affichez une boîte de dialogue de **police** en initialisant une structure [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) et en transmettant la structure à la fonction [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) .</span><span class="sxs-lookup"><span data-stu-id="4d556-117">You create and display a **Font** dialog box by initializing a [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure and passing the structure to the [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) function.</span></span>

<span data-ttu-id="4d556-118">La capture d’écran suivante montre une boîte de dialogue **police** standard.</span><span class="sxs-lookup"><span data-stu-id="4d556-118">The following screen shot shows a typical **Font** dialog box.</span></span>

![capture d’écran montrant la boîte de dialogue police](images/fontdialogboxxp.png)

<span data-ttu-id="4d556-120">Si l’utilisateur clique sur le bouton **OK** , la fonction [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) retourne la **valeur true** et définit les informations sur la sélection de l’utilisateur dans la structure [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) .</span><span class="sxs-lookup"><span data-stu-id="4d556-120">If the user clicks the **OK** button, the [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) function returns **TRUE** and sets the information about the user's selection in the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure.</span></span>

<span data-ttu-id="4d556-121">Si l’utilisateur annule la boîte de dialogue **police** ou si une erreur se produit, [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) retourne la **valeur false** et le contenu de la structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="4d556-121">If the user cancels the **Font** dialog box or an error occurs, [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) returns **FALSE** and the contents of the [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure are not defined.</span></span> <span data-ttu-id="4d556-122">Vous pouvez déterminer la cause d’une erreur en utilisant la fonction [**CommDlgExtendedError**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) pour récupérer la valeur d’erreur étendue.</span><span class="sxs-lookup"><span data-stu-id="4d556-122">You can determine the cause of an error by using the [**CommDlgExtendedError**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) function to retrieve the extended error value.</span></span>

<span data-ttu-id="4d556-123">Les rubriques suivantes sont présentées dans cette section.</span><span class="sxs-lookup"><span data-stu-id="4d556-123">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="4d556-124">Indicateurs d’initialisation de la boîte de dialogue police</span><span class="sxs-lookup"><span data-stu-id="4d556-124">Font Dialog Box Initialization Flags</span></span>](#font-dialog-box-initialization-flags)
-   [<span data-ttu-id="4d556-125">Personnalisation de la boîte de dialogue police sur les versions antérieures de Windows</span><span class="sxs-lookup"><span data-stu-id="4d556-125">Customizing the Font Dialog Box on earlier versions of Windows</span></span>](#customizing-the-font-dialog-box-on-earlier-versions-of-windows)
-   [<span data-ttu-id="4d556-126">Personnalisation de la boîte de dialogue police sur Windows 7</span><span class="sxs-lookup"><span data-stu-id="4d556-126">Customizing the Font Dialog Box on Windows 7</span></span>](#customizing-the-font-dialog-box-on-windows-7)

## <a name="font-dialog-box-initialization-flags"></a><span data-ttu-id="4d556-127">Indicateurs d’initialisation de la boîte de dialogue police</span><span class="sxs-lookup"><span data-stu-id="4d556-127">Font Dialog Box Initialization Flags</span></span>

<span data-ttu-id="4d556-128">Avant d’appeler [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta), le membre **Flags** de la structure [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) doit spécifier **CF \_ SCREENFONTS**, **CF \_ PRINTERFONTS**, ou **CF \_ both**, pour indiquer si la boîte de dialogue doit répertorier les polices d’écran, les polices d’imprimante ou les deux.</span><span class="sxs-lookup"><span data-stu-id="4d556-128">Before calling [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta), the **Flags** member of the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure must specify **CF\_SCREENFONTS**, **CF\_PRINTERFONTS**, or **CF\_BOTH**, to indicate whether the dialog box should list screen fonts, printer fonts, or both.</span></span> <span data-ttu-id="4d556-129">Si vous spécifiez **CF \_ PRINTERFONTS** ou **CF \_ both**, le membre **HDC** de la structure **CHOOSEFONT** doit spécifier un handle vers un contexte de périphérique pour l’imprimante.</span><span class="sxs-lookup"><span data-stu-id="4d556-129">If you specify **CF\_PRINTERFONTS** or **CF\_BOTH**, the **hDC** member of the **CHOOSEFONT** structure must specify a handle to a device context for the printer.</span></span>

<span data-ttu-id="4d556-130">Si les **\_ deux** indicateurs **CF \_ PRINTERFONTS** ou CF sont définis, l’étiquette Description du type de police apparaît en bas de la boîte de dialogue **police** .</span><span class="sxs-lookup"><span data-stu-id="4d556-130">If the **CF\_PRINTERFONTS** or **CF\_BOTH** flag is set, the font type description label appears at the bottom of the **Font** dialog box.</span></span>

<span data-ttu-id="4d556-131">À compter de Windows 7, les indicateurs **CF \_ PRINTERFONTS**, **CF \_ SCREENFONTS**, **CF \_** et **CF \_ WYSIWYG** ne sont plus utilisés par la fonction [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) pour l’énumération des polices.</span><span class="sxs-lookup"><span data-stu-id="4d556-131">Starting with Windows 7, the **CF\_PRINTERFONTS**, **CF\_SCREENFONTS**, **CF\_BOTH**, and **CF\_WYSIWYG** flags are no longer used by the [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) function for font enumeration.</span></span> <span data-ttu-id="4d556-132">Ils sont obsolètes dans Windows 7.</span><span class="sxs-lookup"><span data-stu-id="4d556-132">They are obsolete in Windows 7.</span></span> <span data-ttu-id="4d556-133">Toutefois, l’indicateur **CF \_ PRINTERFONTS** conserve une fonction : pour afficher l’étiquette de description du type de police au bas de la boîte de dialogue **police** .</span><span class="sxs-lookup"><span data-stu-id="4d556-133">However, the **CF\_PRINTERFONTS** flag retains one function: to display the font type description label at the bottom of the **Font** dialog box.</span></span>

<span data-ttu-id="4d556-134">Vous pouvez utiliser le membre **Flags** pour activer ou désactiver certains des contrôles de boîte de dialogue de **police** , et vous pouvez utiliser le membre **Flags** conjointement avec d’autres membres [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) pour contrôler les valeurs initiales de certains contrôles.</span><span class="sxs-lookup"><span data-stu-id="4d556-134">You can use the **Flags** member to enable or disable some of the **Font** dialog box controls, and you can use the **Flags** member in conjunction with other [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) members to control the initial values of some controls.</span></span>

<span data-ttu-id="4d556-135">**Pour afficher les contrôles qui permettent à l’utilisateur de sélectionner les options de barré, de soulignement et de couleur :**</span><span class="sxs-lookup"><span data-stu-id="4d556-135">**To display the controls that allow the user to select strikeout, underline, and color options:**</span></span>

-   <span data-ttu-id="4d556-136">Définissez l’indicateur d' **\_ effets CF** .</span><span class="sxs-lookup"><span data-stu-id="4d556-136">Set the **CF\_EFFECTS** flag.</span></span> <span data-ttu-id="4d556-137">Vous pouvez utiliser le membre **rgbColors** de la structure [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) pour spécifier une couleur de police initiale.</span><span class="sxs-lookup"><span data-stu-id="4d556-137">You can use the **rgbColors** member of the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure to specify an initial font color.</span></span>

<span data-ttu-id="4d556-138">**Pour spécifier les valeurs initiales des contrôles de boîte de dialogue police, style de police, taille, barré et souligné :**</span><span class="sxs-lookup"><span data-stu-id="4d556-138">**To specify the initial values for the Font, Font Style, Size, Strikeout, and Underline dialog box controls:**</span></span>

1.  <span data-ttu-id="4d556-139">Pour spécifier les valeurs initiales des contrôles de boîte de dialogue police, style de police, taille, barré et souligné :</span><span class="sxs-lookup"><span data-stu-id="4d556-139">To specify the initial values for the Font, Font Style, Size, Strikeout, and Underline dialog box controls:</span></span>
2.  <span data-ttu-id="4d556-140">Définissez l' **indicateur CF \_ INITTOLOGFONTSTRUCT** dans le membre **Flags** , ainsi que les membres de la structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) vers laquelle pointe **lpLogFont**, pour spécifier les valeurs initiales des attributs de police.</span><span class="sxs-lookup"><span data-stu-id="4d556-140">Set the **CF\_INITTOLOGFONTSTRUCT** flag in the **Flags** member, along with members of the [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure that is pointed to by the **lpLogFont**, to specify the initial values for the font attributes.</span></span>
3.  <span data-ttu-id="4d556-141">Vous pouvez également utiliser les **indicateurs \_ CF NOFACESEL**, **CF \_ NOSTYLESEL** et **CF \_ NOSIZESEL** pour empêcher la boîte de dialogue **police** d’afficher les valeurs initiales des contrôles correspondants.</span><span class="sxs-lookup"><span data-stu-id="4d556-141">You can also use the **CF\_NOFACESEL**, **CF\_NOSTYLESEL**, and **CF\_NOSIZESEL** flags to prevent the **Font** dialog box from displaying initial values for the corresponding controls.</span></span> <span data-ttu-id="4d556-142">Cela est utile lorsque vous travaillez avec une sélection de texte qui a plusieurs polices, styles ou tailles de point.</span><span class="sxs-lookup"><span data-stu-id="4d556-142">This is useful when you are working with a selection of text that has more than one typeface, style, or point size.</span></span> <span data-ttu-id="4d556-143">Ces valeurs seront également définies dans **Flags** lorsque [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) retourne, si l’utilisateur n’a pas sélectionné de valeur correspondante.</span><span class="sxs-lookup"><span data-stu-id="4d556-143">These values will also be set in **Flags** when [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) returns, if the user did not select a corresponding value.</span></span>

<span data-ttu-id="4d556-144">**Pour initialiser le contrôle de style de police à un nom de style spécifié**</span><span class="sxs-lookup"><span data-stu-id="4d556-144">**To initialize the Font Style control to a specified style name**</span></span>

-   <span data-ttu-id="4d556-145">Définissez l’indicateur **CF \_ USESTYLE** et utilisez le membre **lpszStyle** pour spécifier le nom du style.</span><span class="sxs-lookup"><span data-stu-id="4d556-145">Set the **CF\_USESTYLE** flag and use the **lpszStyle** member to specify the style name.</span></span>

> [!Note]  
> <span data-ttu-id="4d556-146">Pour globaliser votre application, spécifiez le style à l’aide des membres **lfWeight** et **lfItalic** de la structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) vers laquelle pointe **lpLogFont**.</span><span class="sxs-lookup"><span data-stu-id="4d556-146">To globalize your application, specify the style by using the **lfWeight** and **lfItalic** members of the [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure that is pointed to by **lpLogFont**.</span></span> <span data-ttu-id="4d556-147">Le nom du style peut changer en fonction de la langue de l’interface utilisateur système.</span><span class="sxs-lookup"><span data-stu-id="4d556-147">The style name may change depending on the system user interface language.</span></span>

 

<span data-ttu-id="4d556-148">**Pour afficher le bouton appliquer**</span><span class="sxs-lookup"><span data-stu-id="4d556-148">**To display the Apply button**</span></span>

-   <span data-ttu-id="4d556-149">Définissez l’indicateur **CF \_ apply** et fournissez une procédure de raccordement pour traiter les messages de [**\_ commande WM**](/windows/desktop/menurc/wm-command) pour le bouton **apply** .</span><span class="sxs-lookup"><span data-stu-id="4d556-149">Set the **CF\_APPLY** flag and provide a hook procedure to process [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) messages for the **Apply** button.</span></span> <span data-ttu-id="4d556-150">La procédure de hook peut envoyer le message [**WM \_ CHOOSEFONT \_ GETLOGFONT**](wm-choosefont-getlogfont.md) à la boîte de dialogue pour récupérer l’adresse de la structure [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) qui contient les sélections actuelles de la police.</span><span class="sxs-lookup"><span data-stu-id="4d556-150">The hook procedure can send the [**WM\_CHOOSEFONT\_GETLOGFONT**](wm-choosefont-getlogfont.md) message to the dialog box to retrieve the address of the [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) structure that contains the current selections for the font.</span></span>

<span data-ttu-id="4d556-151">**Pour afficher le bouton aide**</span><span class="sxs-lookup"><span data-stu-id="4d556-151">**To display the Help button**</span></span>

-   <span data-ttu-id="4d556-152">Définissez l’indicateur **CF \_ SHOWHELP** .</span><span class="sxs-lookup"><span data-stu-id="4d556-152">Set the **CF\_SHOWHELP** flag.</span></span> <span data-ttu-id="4d556-153">Le membre **hwndOwner** doit identifier la fenêtre pour recevoir le message enregistré [**HELPMSGSTRING**](helpmsgstring.md) lorsque l’utilisateur clique sur le bouton **aide** .</span><span class="sxs-lookup"><span data-stu-id="4d556-153">The **hwndOwner** member must identify the window to receive the [**HELPMSGSTRING**](helpmsgstring.md) registered message when the user clicks the **Help** button.</span></span>

<span data-ttu-id="4d556-154">**Pour limiter les polices affichées dans la boîte de dialogue**</span><span class="sxs-lookup"><span data-stu-id="4d556-154">**To restrict the fonts displayed in the dialog box**</span></span>

-   <span data-ttu-id="4d556-155">Définissez n’importe quelle combinaison des indicateurs **CF \_ TTONLY**, cf **\_ FIXEDPITCHONLY**, cf **\_ NOVECTORFONTS**, **CF \_ NOVERTFONTS**, **CF \_ SCALABLEONLY** et **CF \_ WYSIWYG** .</span><span class="sxs-lookup"><span data-stu-id="4d556-155">Set any combination of the **CF\_TTONLY**, **CF\_FIXEDPITCHONLY**, **CF\_NOVECTORFONTS**, **CF\_NOVERTFONTS**, **CF\_SCALABLEONLY**, and **CF\_WYSIWYG** flags.</span></span> <span data-ttu-id="4d556-156">Vous pouvez également limiter les styles disponibles que la boîte de dialogue affiche pour certaines polices à l’aide de la valeur **CF \_ nosimulations** .</span><span class="sxs-lookup"><span data-stu-id="4d556-156">You can also restrict the available styles that the dialog box displays for some fonts by using the **CF\_NOSIMULATIONS** value.</span></span>

<span data-ttu-id="4d556-157">À compter de Windows 7, la liste des polices affichée dans la boîte de dialogue est restreinte en fonction des polices affichées par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="4d556-157">Starting with Windows 7, the list of fonts displayed in the dialog box is restricted based on the user's shown fonts.</span></span> <span data-ttu-id="4d556-158">Pour supprimer la restriction, définissez l’indicateur **CF \_ INACTIVEFONTS** .</span><span class="sxs-lookup"><span data-stu-id="4d556-158">To remove the restriction, set the **CF\_INACTIVEFONTS** flag.</span></span>

<span data-ttu-id="4d556-159">**Pour limiter les noms de polices, les styles et les tailles de point que l’utilisateur peut spécifier**</span><span class="sxs-lookup"><span data-stu-id="4d556-159">**To restrict the typeface names, styles, and point sizes that the user can specify**</span></span>

1.  <span data-ttu-id="4d556-160">Définissez l’indicateur **CF \_ FORCEFONTEXIST** pour limiter l’utilisateur à spécifier uniquement des noms de polices, des styles et des tailles de points valides dans la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="4d556-160">Set the **CF\_FORCEFONTEXIST** flag to restrict the user to specifying only valid typeface names, styles, and point sizes listed in the dialog box.</span></span>
2.  <span data-ttu-id="4d556-161">Définissez l’indicateur de **\_ limitation CF** pour limiter l’utilisateur à spécifier des tailles de points dans la plage spécifiée par les membres **nSizeMin** et **nSizeMax** .</span><span class="sxs-lookup"><span data-stu-id="4d556-161">Set the **CF\_LIMITSIZE** flag to restrict the user to specifying point sizes in the range specified by the **nSizeMin** and **nSizeMax** members.</span></span>

<span data-ttu-id="4d556-162">**Pour limiter ou désactiver la zone de liste déroulante scripts**</span><span class="sxs-lookup"><span data-stu-id="4d556-162">**To restrict or disable the Scripts combo box**</span></span>

-   <span data-ttu-id="4d556-163">Définissez l' **indicateur CF \_ NOSCRIPTSEL** pour désactiver la zone de liste déroulante **scripts** , ou définissez l’indicateur **CF \_ SELECTSCRIPT** pour restreindre les sélections de la zone de liste déroulante **scripts** à un jeu de caractères spécifié.</span><span class="sxs-lookup"><span data-stu-id="4d556-163">Set the **CF\_NOSCRIPTSEL** flag to disable the **Scripts** combo box, or set the **CF\_SELECTSCRIPT** flag to restrict selections in the **Scripts** combo box to a specified character set.</span></span>

## <a name="customizing-the-font-dialog-box-on-earlier-versions-of-windows"></a><span data-ttu-id="4d556-164">Personnalisation de la boîte de dialogue police sur les versions antérieures de Windows</span><span class="sxs-lookup"><span data-stu-id="4d556-164">Customizing the Font Dialog Box on earlier versions of Windows</span></span>

<span data-ttu-id="4d556-165">Vous pouvez fournir un modèle personnalisé pour la boîte de dialogue **police** , par exemple, si vous souhaitez inclure des contrôles supplémentaires propres à votre application.</span><span class="sxs-lookup"><span data-stu-id="4d556-165">You can provide a custom template for the **Font** dialog box, for example, if you want to include additional controls that are unique to your application.</span></span> <span data-ttu-id="4d556-166">La fonction [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) utilise votre modèle personnalisé à la place du modèle par défaut.</span><span class="sxs-lookup"><span data-stu-id="4d556-166">The [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) function uses your custom template in place of the default template.</span></span>

<span data-ttu-id="4d556-167">**Pour fournir un modèle personnalisé pour la boîte de dialogue police**</span><span class="sxs-lookup"><span data-stu-id="4d556-167">**To provide a custom template for the Font dialog box**</span></span>

1.  <span data-ttu-id="4d556-168">Créez le modèle personnalisé en modifiant le modèle par défaut spécifié dans le fichier font. dlg.</span><span class="sxs-lookup"><span data-stu-id="4d556-168">Create the custom template by modifying the default template specified in the Font.dlg file.</span></span> <span data-ttu-id="4d556-169">Les identificateurs de contrôle utilisés dans le modèle de boîte de dialogue de police par défaut sont définis dans le fichier Dlgs. h.</span><span class="sxs-lookup"><span data-stu-id="4d556-169">The control identifiers used in the default Font dialog template are defined in the Dlgs.h file.</span></span>
2.  <span data-ttu-id="4d556-170">Utilisez la structure [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) pour activer le modèle comme suit :</span><span class="sxs-lookup"><span data-stu-id="4d556-170">Use the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure to enable the template as follows:</span></span>
    -   <span data-ttu-id="4d556-171">Si votre modèle personnalisé est une ressource d’une application ou d’une bibliothèque de liens dynamiques, définissez l’indicateur **CF \_ ENABLETEMPLATE** dans le membre **Flags** .</span><span class="sxs-lookup"><span data-stu-id="4d556-171">If your custom template is a resource in an application or dynamic link library, set the **CF\_ENABLETEMPLATE** flag in the **Flags** member.</span></span> <span data-ttu-id="4d556-172">Utilisez les membres **HINSTANCE** et **lpTemplateName** de la structure pour identifier le nom du module et de la ressource.</span><span class="sxs-lookup"><span data-stu-id="4d556-172">Use the **hInstance** and **lpTemplateName** members of the structure to identify the module and resource name.</span></span>
    -   <span data-ttu-id="4d556-173">Si votre modèle personnalisé est déjà en mémoire, définissez l’indicateur **CF \_ ENABLETEMPLATEHANDLE** .</span><span class="sxs-lookup"><span data-stu-id="4d556-173">If your custom template is already in memory, set the **CF\_ENABLETEMPLATEHANDLE** flag.</span></span> <span data-ttu-id="4d556-174">Utilisez le membre **HINSTANCE** pour identifier l’objet mémoire qui contient le modèle.</span><span class="sxs-lookup"><span data-stu-id="4d556-174">Use the **hInstance** member to identify the memory object that contains the template.</span></span>

<span data-ttu-id="4d556-175">Vous pouvez fournir une procédure de hook [**CFHookProc**](/windows/win32/api/commdlg/nc-commdlg-lpcfhookproc) pour la boîte de dialogue **police** .</span><span class="sxs-lookup"><span data-stu-id="4d556-175">You can provide a [**CFHookProc**](/windows/win32/api/commdlg/nc-commdlg-lpcfhookproc) hook procedure for the **Font** dialog box.</span></span> <span data-ttu-id="4d556-176">La procédure de hook peut traiter les messages envoyés à la boîte de dialogue et envoyer des messages à la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="4d556-176">The hook procedure can process messages sent to the dialog box and send messages to the dialog box.</span></span> <span data-ttu-id="4d556-177">Si vous utilisez un modèle personnalisé pour définir des contrôles supplémentaires, vous devez fournir une procédure de raccordement pour traiter l’entrée de vos contrôles.</span><span class="sxs-lookup"><span data-stu-id="4d556-177">If you use a custom template to define additional controls, you must provide a hook procedure to process input for your controls.</span></span>

<span data-ttu-id="4d556-178">**Pour activer une procédure de Hook pour la boîte de dialogue police**</span><span class="sxs-lookup"><span data-stu-id="4d556-178">**To enable a hook procedure for the Font dialog box**</span></span>

1.  <span data-ttu-id="4d556-179">Définissez l’indicateur **CF \_ ENABLEHOOK** dans le membre **Flags** de la structure [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) .</span><span class="sxs-lookup"><span data-stu-id="4d556-179">Set the **CF\_ENABLEHOOK** flag in the **Flags** member of the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure.</span></span>
2.  <span data-ttu-id="4d556-180">Spécifiez l’adresse de la procédure de raccordement dans le membre **lpfnHook** .</span><span class="sxs-lookup"><span data-stu-id="4d556-180">Specify the address of the hook procedure in the **lpfnHook** member.</span></span>

<span data-ttu-id="4d556-181">Après le traitement du message [**WM \_ INITDIALOG**](wm-initdialog.md) , la procédure de la boîte de dialogue envoie un message **WM \_ INITDIALOG** à la procédure de Hook.</span><span class="sxs-lookup"><span data-stu-id="4d556-181">After processing the [**WM\_INITDIALOG**](wm-initdialog.md) message, the dialog box procedure sends a **WM\_INITDIALOG** message to the hook procedure.</span></span> <span data-ttu-id="4d556-182">Le paramètre *lParam* de ce message est un pointeur vers la structure [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) qui est utilisée pour initialiser la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="4d556-182">The *lParam* parameter of this message is a pointer to the [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) structure that is used to initialize the dialog box.</span></span>

<span data-ttu-id="4d556-183">La procédure de hook peut envoyer les messages [**WM \_ CHOOSEFONT \_ GETLOGFONT**](wm-choosefont-getlogfont.md), [**WM \_ CHOOSEFONT \_ SETLOGFONT**](wm-choosefont-setlogfont.md)et [**WM \_ CHOOSEFONT \_ SETFLAGS**](wm-choosefont-setflags.md) à la boîte de dialogue pour récupérer et définir les valeurs et les indicateurs actuels de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="4d556-183">The hook procedure can send the [**WM\_CHOOSEFONT\_GETLOGFONT**](wm-choosefont-getlogfont.md), [**WM\_CHOOSEFONT\_SETLOGFONT**](wm-choosefont-setlogfont.md), and [**WM\_CHOOSEFONT\_SETFLAGS**](wm-choosefont-setflags.md) messages to the dialog box to get and set the current values and flags of the dialog box.</span></span>

## <a name="customizing-the-font-dialog-box-on-windows-7"></a><span data-ttu-id="4d556-184">Personnalisation de la boîte de dialogue police sur Windows 7</span><span class="sxs-lookup"><span data-stu-id="4d556-184">Customizing the Font Dialog Box on Windows 7</span></span>

<span data-ttu-id="4d556-185">La capture d’écran suivante montre une boîte de dialogue **police** standard dans Windows 7.</span><span class="sxs-lookup"><span data-stu-id="4d556-185">The following screen shot shows a typical **Font** dialog box in Windows 7.</span></span>

![capture d’écran montrant la zone dialob de la police](images/fontdialogboxwin7.png)

<span data-ttu-id="4d556-187">Dans les versions précédentes de Windows, le fichier de modèle font. DLG contient un modèle ChooseFont par défaut.</span><span class="sxs-lookup"><span data-stu-id="4d556-187">In earlier Windows versions, the font.dlg template file contains one default ChooseFont template.</span></span> <span data-ttu-id="4d556-188">Le fichier de modèle font. DLG sur Windows 7 contient deux modèles par défaut : le modèle par défaut des versions antérieures de Windows et le nouveau modèle ChooseFont de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="4d556-188">The font.dlg template file on Windows 7 contains two default templates: the default template from earlier Windows versions and the new Windows 7 ChooseFont template.</span></span> <span data-ttu-id="4d556-189">Par conséquent, lorsque vous personnalisez la boîte de dialogue **police** sur Windows 7, vous devez prendre en compte les problèmes suivants.</span><span class="sxs-lookup"><span data-stu-id="4d556-189">Therefore, when you customize the **Font** dialog box on Windows 7, you must consider the following issues.</span></span>

1.  <span data-ttu-id="4d556-190">Utilisez le nouveau modèle lorsque vous créez des modèles personnalisés pour les applications qui s’exécutent sur Windows 7.</span><span class="sxs-lookup"><span data-stu-id="4d556-190">Use the new template when you create custom templates for applications that run on Windows 7.</span></span> <span data-ttu-id="4d556-191">Ce nouveau modèle contient un contrôle de lien sur lequel l’utilisateur peut cliquer pour ouvrir la fenêtre **du panneau de configuration polices** , comme illustré dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="4d556-191">This new template contains a link control that the user can click to launch the **Fonts Control Panel** window, as shown in the following screen shot.</span></span>

    ![capture d’écran montrant le panneau de configuration de la police dans Windows 7](images/fontcontrolpanelforwin7.png)

2.  <span data-ttu-id="4d556-193">Pour utiliser ce contrôle de lien, votre application appelante doit utiliser le COMCTL32.DLL version 6 ou ultérieure.</span><span class="sxs-lookup"><span data-stu-id="4d556-193">To use this link control, your calling application must use the COMCTL32.DLL version 6 or later.</span></span> <span data-ttu-id="4d556-194">Dans le cas contraire, la fonction [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) retourne une erreur lorsqu’elle tente de créer le contrôle de lien dans votre modèle personnalisé.</span><span class="sxs-lookup"><span data-stu-id="4d556-194">Otherwise, the [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) function returns an error when it tries to create the link control in your custom template.</span></span> <span data-ttu-id="4d556-195">Pour déterminer si ce contrôle est activé, compilez votre application appelante sur COMCTL32.DLL version 6,0.</span><span class="sxs-lookup"><span data-stu-id="4d556-195">To determine if this control is enabled, compile your calling application against COMCTL32.DLL version 6.0.</span></span> <span data-ttu-id="4d556-196">Pour plus d’informations, consultez [activation de styles visuels avec des contrôles communs](/previous-versions//ms649781(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="4d556-196">For more information, see [Enabling Visual Styles with Common Controls](/previous-versions//ms649781(v=vs.85)).</span></span>
3.  <span data-ttu-id="4d556-197">Si votre application utilise COMCTL32.DLL version 5,0 ou une version antérieure, vous devez effectuer les opérations suivantes lorsque vous créez un modèle personnalisé :</span><span class="sxs-lookup"><span data-stu-id="4d556-197">If your application uses COMCTL32.DLL version 5.0 or earlier, you must do the following when you create a custom template:</span></span>

    -   <span data-ttu-id="4d556-198">Spécifiez le contrôle en tant que **bouton** de commande.</span><span class="sxs-lookup"><span data-stu-id="4d556-198">Specify the control as a **PUSHBUTTON**.</span></span> <span data-ttu-id="4d556-199">Le contrôle utilisé pour lancer le **panneau de configuration des polices** s’affiche sous la forme d’un bouton plutôt que sous forme de lien.</span><span class="sxs-lookup"><span data-stu-id="4d556-199">The control used to launch the **Fonts Control Panel** will appear as a button rather than as a link.</span></span>
    -   <span data-ttu-id="4d556-200">Remplacez le texte suivant dans la police. DLG :</span><span class="sxs-lookup"><span data-stu-id="4d556-200">Replace the following text in the font.dlg:</span></span>

        `CONTROL         "<A>Show more fonts</A>", IDC_MANAGE_LINK, "SysLink", WS_TABSTOP, 7, 199, 227, 9`

        <span data-ttu-id="4d556-201">avec le texte suivant :</span><span class="sxs-lookup"><span data-stu-id="4d556-201">with the following text:</span></span>

        `PUSHBUTTON      "S&how more fonts", IDC_MANAGE_LINK, 7, 199, 74, 14 , WS_TABSTOP`

    -   <span data-ttu-id="4d556-202">Pour vous assurer que votre application utilise un modèle personnalisé, vous devez spécifier un modèle personnalisé avec l’indicateur **CF \_ ENABLETEMPLATE** , créer un modèle personnalisé basé sur le modèle ChooseFont Windows 7, puis activer éventuellement une procédure de raccordement.</span><span class="sxs-lookup"><span data-stu-id="4d556-202">To ensure that your application uses a custom template, you must specify a custom template with the **CF\_ENABLETEMPLATE** flag, create a custom template based on the Windows 7 ChooseFont template, and then optionally enable a hook procedure.</span></span>

        <span data-ttu-id="4d556-203">Si vous activez une procédure de raccordement sans créer de modèle personnalisé, le modèle ChooseFont par défaut pour les versions antérieures de Windows sera chargé.</span><span class="sxs-lookup"><span data-stu-id="4d556-203">If you enable a hook procedure without creating a custom template, the default ChooseFont template for earlier Windows versions will be loaded.</span></span>

> [!Note]  
> <span data-ttu-id="4d556-204">Vous devez spécifier le type de contrôle **Control** ou **PUSHBUTTON** dans votre nouveau modèle, en fonction de la version de COMMCTL.DLL par rapport à laquelle votre application est compilée.</span><span class="sxs-lookup"><span data-stu-id="4d556-204">You must specify the **CONTROL** or **PUSHBUTTON** control type in your new template, depending on the version of COMMCTL.DLL that your application compiles against.</span></span> <span data-ttu-id="4d556-205">Notez également que les fonctionnalités spécifiques à Windows 7, telles que l’affichage WYSIWYG des listes de polices et des familles étendues, ne sont pas disponibles lorsque vos applications s’exécutent sur des versions antérieures du système d’exploitation Windows.</span><span class="sxs-lookup"><span data-stu-id="4d556-205">Also note that Windows 7 specific features, such as WYSIWYG display of font lists and extended families, are not available when your applications run on earlier versions of the Windows operating system.</span></span>

 

 

 