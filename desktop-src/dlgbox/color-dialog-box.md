---
title: Boîte de dialogue Couleur
description: Affiche une boîte de dialogue modale qui permet à l’utilisateur de choisir une valeur de couleur spécifique.
ms.assetid: 248586b5-5068-4021-8407-56eb79243789
keywords:
- entrée utilisateur, bibliothèque de boîtes de dialogue communes
- capture de l’entrée utilisateur, bibliothèque de boîtes de dialogue communes
- Bibliothèque de boîtes de dialogue communes
- boîtes de dialogue communes
- Couleur, boîte de dialogue
- Couleur partielle, boîte de dialogue
- boîte de dialogue couleur complète
- boîte de dialogue Personnaliser la couleur
- Modèle de couleurs RVB
- TSL, modèle de couleurs
- teinte saturation luminosité (TSL)
- TSL (luminosité de saturation de la teinte)
- RVB (rouge vert bleu)
- rouge vert bleu (RVB)
- raccordements, boîte de dialogue couleur
- boîtes de dialogue prédéfinies
- boîtes de dialogue, couleur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4bb90150f49ea7bed4edac53af40ba89e0459946
ms.sourcegitcommit: 56f8e4d5119e5018363fa2dc3472cdff203c6913
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/19/2020
ms.locfileid: "104565147"
---
# <a name="color-dialog-box"></a><span data-ttu-id="814de-120">Boîte de dialogue Couleur</span><span class="sxs-lookup"><span data-stu-id="814de-120">Color Dialog Box</span></span>

<span data-ttu-id="814de-121">Affiche une boîte de dialogue modale qui permet à l’utilisateur de choisir une valeur de couleur spécifique.</span><span class="sxs-lookup"><span data-stu-id="814de-121">Displays a modal dialog box that allows the user to choose a specific color value.</span></span> <span data-ttu-id="814de-122">L’utilisateur peut choisir une couleur à partir d’un ensemble de palettes de couleurs de base ou personnalisées.</span><span class="sxs-lookup"><span data-stu-id="814de-122">The user can choose a color from either a set of basic or custom color palettes.</span></span> <span data-ttu-id="814de-123">L’utilisateur peut également générer une valeur de couleur en modifiant les valeurs de couleur RVB ou teinte, saturation, luminosité (TSL) de l’interface utilisateur de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="814de-123">Alternatively, the user can generate a color value by modifying the RGB or hue, saturation, luminosity (HSL) color values of the dialog box user interface.</span></span> <span data-ttu-id="814de-124">La boîte de dialogue **couleur** retourne la valeur RVB de la couleur sélectionnée par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="814de-124">The **Color** dialog box returns the RGB value of the color selected by the user.</span></span>

<span data-ttu-id="814de-125">Vous créez et affichez une boîte de dialogue de **couleur** en initialisant une structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) et en transmettant la structure à la fonction [**les ChooseColor.**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="814de-125">You create and display a **Color** dialog box by initializing a [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure and passing the structure to the [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) function.</span></span> <span data-ttu-id="814de-126">En définissant des valeurs de paramètre différentes pour la structure **les ChooseColor.** , vous pouvez affecter la manière dont la boîte de dialogue couleur s’affiche.</span><span class="sxs-lookup"><span data-stu-id="814de-126">By setting different parameter values for the **CHOOSECOLOR** structure, you can affect how the Color dialog box appears.</span></span> <span data-ttu-id="814de-127">Par exemple, vous pouvez afficher une version d’interface utilisateur complète ou partielle de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="814de-127">For example, you can display either a full or partial user interface version of the dialog box.</span></span> <span data-ttu-id="814de-128">L’illustration suivante montre la version complète de l’interface utilisateur de la boîte de dialogue **couleur** .</span><span class="sxs-lookup"><span data-stu-id="814de-128">The following illustration shows the full user interface version of the **Color** dialog box.</span></span>

![boîte de dialogue des couleurs](images/colordialogboxxp.png)

<span data-ttu-id="814de-130">Si l’utilisateur clique sur le bouton **OK** , [**les ChooseColor.**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) retourne **true**.</span><span class="sxs-lookup"><span data-stu-id="814de-130">If the user clicks the **OK** button, [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) returns **TRUE**.</span></span> <span data-ttu-id="814de-131">Le membre **rgbResult** de la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) contient la valeur de couleur RVB de la couleur sélectionnée par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="814de-131">The **rgbResult** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure contains the RGB color value of the color selected by the user.</span></span> <span data-ttu-id="814de-132">La valeur de couleur RVB spécifie les intensités des couleurs rouges, vertes et bleues individuelles qui composent la couleur sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="814de-132">The RGB color value specifies the intensities of the individual red, green, and blue colors that make up the selected color.</span></span> <span data-ttu-id="814de-133">Les valeurs individuelles sont comprises entre 0 et 255.</span><span class="sxs-lookup"><span data-stu-id="814de-133">The individual values range from 0 through 255.</span></span> <span data-ttu-id="814de-134">Utilisez les macros [**GetRValue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**GetGValue**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue)et [**GetBValue**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue) pour extraire des couleurs individuelles d’une valeur de couleur RVB.</span><span class="sxs-lookup"><span data-stu-id="814de-134">Use the [**GetRValue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**GetGValue**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue), and [**GetBValue**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue) macros to extract individual colors from an RGB color value.</span></span>

<span data-ttu-id="814de-135">Si l’utilisateur annule la boîte de dialogue **couleur** ou si une erreur se produit, [**les ChooseColor.**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) retourne la **valeur false** et le membre **rgbResult** n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="814de-135">If the user cancels the **Color** dialog box or an error occurs, [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) returns **FALSE** and the **rgbResult** member is not defined.</span></span> <span data-ttu-id="814de-136">Pour déterminer la cause de l’erreur, appelez la fonction [**CommDlgExtendedError**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) pour récupérer la valeur d’erreur étendue.</span><span class="sxs-lookup"><span data-stu-id="814de-136">To determine the cause of the error, call the [**CommDlgExtendedError**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) function to retrieve the extended error value.</span></span>

<span data-ttu-id="814de-137">Les sujets suivants sont traités dans cette section.</span><span class="sxs-lookup"><span data-stu-id="814de-137">The following subjects are covered in this section</span></span>

-   [<span data-ttu-id="814de-138">Boîtes de dialogue couleur partielle et complète</span><span class="sxs-lookup"><span data-stu-id="814de-138">Full and Partial Color Dialog Boxes</span></span>](#full-and-partial-color-dialog-boxes)
-   [<span data-ttu-id="814de-139">Personnalisation de la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-139">Customizing the Color Dialog Box</span></span>](#customizing-the-color-dialog-box)
    -   [<span data-ttu-id="814de-140">Pour fournir un modèle personnalisé pour la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-140">To provide a custom template for the Color dialog box</span></span>](#to-provide-a-custom-template-for-the-color-dialog-box)
    -   [<span data-ttu-id="814de-141">Pour activer une procédure de Hook pour la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-141">To enable a hook procedure for the Color dialog box</span></span>](#to-enable-a-hook-procedure-for-the-color-dialog-box)
-   [<span data-ttu-id="814de-142">Modèles de couleurs utilisés par la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-142">Color Models Used by the Color Dialog Box</span></span>](#color-models-used-by-the-color-dialog-box)
    -   [<span data-ttu-id="814de-143">Modèle de couleurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-143">RGB Color Model</span></span>](#rgb-color-model)
    -   [<span data-ttu-id="814de-144">TSL, modèle de couleurs</span><span class="sxs-lookup"><span data-stu-id="814de-144">HSL Color Model</span></span>](#hsl-color-model)
    -   [<span data-ttu-id="814de-145">Conversion de valeurs TSL en valeurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-145">Converting HSL Values to RGB Values</span></span>](#converting-hsl-values-to-rgb-values)

## <a name="full-and-partial-color-dialog-boxes"></a><span data-ttu-id="814de-146">Boîtes de dialogue couleur partielle et complète</span><span class="sxs-lookup"><span data-stu-id="814de-146">Full and Partial Color Dialog Boxes</span></span>

<span data-ttu-id="814de-147">La boîte de dialogue couleur contient une version complète et une version partielle de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="814de-147">The Color dialog box has a full version and a partial version of the user interface.</span></span> <span data-ttu-id="814de-148">La version complète inclut les contrôles de base et contient des contrôles supplémentaires qui permettent à l’utilisateur de créer des couleurs personnalisées.</span><span class="sxs-lookup"><span data-stu-id="814de-148">The full version includes the basic controls and has additional controls that allow the user to create custom colors.</span></span> <span data-ttu-id="814de-149">La version partielle contient des contrôles qui affichent les palettes de couleurs de base et personnalisées à partir desquelles l’utilisateur peut sélectionner une valeur de couleur.</span><span class="sxs-lookup"><span data-stu-id="814de-149">The partial version has controls that display the basic and custom color palettes from which the user can select a color value.</span></span>

<span data-ttu-id="814de-150">La version partielle de la boîte de dialogue couleur comprend un bouton **définir des couleurs personnalisées** .</span><span class="sxs-lookup"><span data-stu-id="814de-150">The partial version of the Color dialog box includes a **Define Custom Colors** button.</span></span> <span data-ttu-id="814de-151">L’utilisateur peut cliquer sur ce bouton pour afficher la version complète.</span><span class="sxs-lookup"><span data-stu-id="814de-151">The user can click this button to display the full version.</span></span> <span data-ttu-id="814de-152">Vous pouvez indiquer à la boîte de dialogue couleur d’afficher toujours la version complète en définissant l’indicateur **\_ FULLOPEN** dans le membre **Flags** de la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) .</span><span class="sxs-lookup"><span data-stu-id="814de-152">You can direct the Color dialog box to always display the full version by setting the **CC\_FULLOPEN** flag in the **Flags** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure.</span></span> <span data-ttu-id="814de-153">Pour empêcher l’utilisateur de créer des couleurs personnalisées, vous pouvez définir l’indicateur **\_ PREVENTFULLOPEN CC** pour désactiver le bouton **définir des couleurs personnalisées** .</span><span class="sxs-lookup"><span data-stu-id="814de-153">To prevent the user from creating custom colors, you can set the **CC\_PREVENTFULLOPEN** flag to disable the **Define Custom Colors** button.</span></span>

<span data-ttu-id="814de-154">Les couleurs de base représentent une sélection des couleurs disponibles sur l’appareil spécifié.</span><span class="sxs-lookup"><span data-stu-id="814de-154">The basic colors represent a selection of the colors available on the specified device.</span></span> <span data-ttu-id="814de-155">Le nombre réel de couleurs affichées est déterminé par le pilote d’affichage.</span><span class="sxs-lookup"><span data-stu-id="814de-155">The actual number of colors displayed is determined by the display driver.</span></span> <span data-ttu-id="814de-156">Par exemple, un pilote VGA affiche 48 couleurs et un pilote d’affichage monochrome affiche uniquement 16.</span><span class="sxs-lookup"><span data-stu-id="814de-156">For example, a VGA driver displays 48 colors, and a monochrome display driver displays only 16.</span></span>

<span data-ttu-id="814de-157">Les couleurs personnalisées sont celles que vous spécifiez ou que l’utilisateur crée.</span><span class="sxs-lookup"><span data-stu-id="814de-157">The custom colors are those that you specify or that the user creates.</span></span> <span data-ttu-id="814de-158">Lorsque vous créez une boîte de dialogue de couleur, vous devez utiliser le membre **lpCustColors** de la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) pour spécifier les valeurs initiales des 16 couleurs personnalisées.</span><span class="sxs-lookup"><span data-stu-id="814de-158">When you create a Color dialog box, you must use the **lpCustColors** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure to specify the initial values for the 16 custom colors.</span></span> <span data-ttu-id="814de-159">Si la version complète de la boîte de dialogue couleur est ouverte, l’utilisateur peut créer une couleur personnalisée selon l’une des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="814de-159">If the full version of the Color dialog box is open, the user can create a custom color by one the following methods:</span></span>

-   <span data-ttu-id="814de-160">Déplacement du curseur dans le contrôle de spectre de couleurs et le contrôle de diapositive de luminosité</span><span class="sxs-lookup"><span data-stu-id="814de-160">Moving the cursor in the color spectrum control and the luminosity slide control</span></span>
-   <span data-ttu-id="814de-161">Saisie de valeurs RVB dans les contrôles d’édition **rouge**, **vert** et **bleu**</span><span class="sxs-lookup"><span data-stu-id="814de-161">Typing RGB values in the **Red**, **Green**, and **Blue** edit controls</span></span>
-   <span data-ttu-id="814de-162">Saisie de valeurs TSL dans les contrôles d’édition **Hue**, **SAT** et **Lum**</span><span class="sxs-lookup"><span data-stu-id="814de-162">Typing HSL values in the **Hue**, **Sat**, and **Lum** edit controls</span></span>

<span data-ttu-id="814de-163">Pour ajouter une nouvelle couleur personnalisée à l’affichage des couleurs personnalisées, l’utilisateur peut cliquer sur le bouton **Ajouter aux couleurs personnalisées** .</span><span class="sxs-lookup"><span data-stu-id="814de-163">To add a new custom color to the custom colors display, the user can click the **Add to Custom Colors** button.</span></span> <span data-ttu-id="814de-164">Par ailleurs, la boîte de dialogue copie la valeur RVB de la nouvelle couleur sur l’élément correspondant dans le tableau pointé par le membre **lpCustColors** .</span><span class="sxs-lookup"><span data-stu-id="814de-164">This also causes the dialog box to copy the RGB value of the new color to the corresponding element in the array pointed to by the **lpCustColors** member.</span></span> <span data-ttu-id="814de-165">Pour conserver les nouvelles couleurs personnalisées entre les appels à [**les ChooseColor.**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)), vous devez allouer de la mémoire statique pour le tableau.</span><span class="sxs-lookup"><span data-stu-id="814de-165">To preserve new custom colors between calls to [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)), you should allocate static memory for the array.</span></span> <span data-ttu-id="814de-166">Pour plus d’informations sur les modèles de couleurs RVB et TSL, consultez [modèles de couleurs utilisés par la boîte de dialogue couleur](#color-models-used-by-the-color-dialog-box).</span><span class="sxs-lookup"><span data-stu-id="814de-166">For more information about the RGB and HSL color models, see [Color Models Used by the Color Dialog Box](#color-models-used-by-the-color-dialog-box).</span></span>

## <a name="customizing-the-color-dialog-box"></a><span data-ttu-id="814de-167">Personnalisation de la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-167">Customizing the Color Dialog Box</span></span>

<span data-ttu-id="814de-168">Pour personnaliser une boîte de dialogue de couleur, vous pouvez utiliser l’une des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="814de-168">To customize a Color dialog box, you can use any of the following methods:</span></span>

-   <span data-ttu-id="814de-169">Spécifier des valeurs dans la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) quand vous créez la boîte de dialogue</span><span class="sxs-lookup"><span data-stu-id="814de-169">Specify values in the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure when you create the dialog box</span></span>
-   <span data-ttu-id="814de-170">Fournir un modèle personnalisé</span><span class="sxs-lookup"><span data-stu-id="814de-170">Provide a custom template</span></span>
-   <span data-ttu-id="814de-171">Fournir une procédure de raccordement</span><span class="sxs-lookup"><span data-stu-id="814de-171">Provide a hook procedure</span></span>

<span data-ttu-id="814de-172">Vous pouvez modifier l’apparence et le comportement de la boîte de dialogue couleur en définissant des indicateurs dans le membre **Flags** de la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) .</span><span class="sxs-lookup"><span data-stu-id="814de-172">You can modify the appearance and behavior of the Color dialog box by setting flags in the **Flags** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure.</span></span> <span data-ttu-id="814de-173">Par exemple, vous pouvez définir l’indicateur **cc \_ SOLIDCOLOR** pour indiquer à la boîte de dialogue d’afficher uniquement les couleurs unies.</span><span class="sxs-lookup"><span data-stu-id="814de-173">For example, you can set the **CC\_SOLIDCOLOR** flag to direct the dialog box to display only solid colors.</span></span> <span data-ttu-id="814de-174">Pour faire en sorte que la boîte de dialogue sélectionne initialement une couleur autre que le noir, définissez l’indicateur **\_ RGBINIT CC** et spécifiez une couleur dans le membre **rgbResult** .</span><span class="sxs-lookup"><span data-stu-id="814de-174">To cause the dialog box to initially select a color other than black, set the **CC\_RGBINIT** flag and specify a color in the **rgbResult** member.</span></span>

<span data-ttu-id="814de-175">Vous pouvez fournir un modèle personnalisé pour la boîte de dialogue couleur, par exemple, si vous souhaitez inclure des contrôles supplémentaires propres à votre application.</span><span class="sxs-lookup"><span data-stu-id="814de-175">You can provide a custom template for the Color dialog box, for example, if you want to include additional controls that are unique to your application.</span></span> <span data-ttu-id="814de-176">La fonction [**les ChooseColor.**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) utilise votre modèle personnalisé à la place du modèle par défaut.</span><span class="sxs-lookup"><span data-stu-id="814de-176">The [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) function uses your custom template in place of the default template.</span></span>

### <a name="to-provide-a-custom-template-for-the-color-dialog-box"></a><span data-ttu-id="814de-177">Pour fournir un modèle personnalisé pour la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-177">To provide a custom template for the Color dialog box</span></span>

1.  <span data-ttu-id="814de-178">Créez le modèle personnalisé en modifiant le modèle par défaut spécifié dans le fichier Color. dlg.</span><span class="sxs-lookup"><span data-stu-id="814de-178">Create the custom template by modifying the default template specified in the Color.dlg file.</span></span> <span data-ttu-id="814de-179">Les identificateurs de contrôle utilisés dans le modèle de boîte de dialogue couleur par défaut sont définis dans le fichier Color. dlg.</span><span class="sxs-lookup"><span data-stu-id="814de-179">The control identifiers used in the default Color dialog template are defined in the Color.dlg file.</span></span>
2.  <span data-ttu-id="814de-180">Utilisez la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) pour activer le modèle comme suit :</span><span class="sxs-lookup"><span data-stu-id="814de-180">Use the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure to enable the template as follows:</span></span>
    -   <span data-ttu-id="814de-181">Si votre modèle personnalisé est une ressource d’une application ou d’une bibliothèque de liens dynamiques, définissez l’indicateur **cc \_ ENABLETEMPLATE** dans le membre **Flags** .</span><span class="sxs-lookup"><span data-stu-id="814de-181">If your custom template is a resource in an application or dynamic link library, set the **CC\_ENABLETEMPLATE** flag in the **Flags** member.</span></span> <span data-ttu-id="814de-182">Utilisez les membres **HINSTANCE** et **lpTemplateName** de la structure pour identifier le nom du module et de la ressource.</span><span class="sxs-lookup"><span data-stu-id="814de-182">Use the **hInstance** and **lpTemplateName** members of the structure to identify the module and resource name.</span></span>

        <span data-ttu-id="814de-183">Ou</span><span class="sxs-lookup"><span data-stu-id="814de-183">-Or-</span></span>

    -   <span data-ttu-id="814de-184">Si votre modèle personnalisé est déjà en mémoire, définissez l' **indicateur \_ ENABLETEMPLATEHANDLE CC** .</span><span class="sxs-lookup"><span data-stu-id="814de-184">If your custom template is already in memory, set the **CC\_ENABLETEMPLATEHANDLE** flag.</span></span> <span data-ttu-id="814de-185">Utilisez le membre **HINSTANCE** pour identifier l’objet mémoire qui contient le modèle.</span><span class="sxs-lookup"><span data-stu-id="814de-185">Use the **hInstance** member to identify the memory object that contains the template.</span></span>

<span data-ttu-id="814de-186">Vous pouvez fournir une procédure de hook [**CCHookProc**](/windows/win32/api/commdlg/nc-commdlg-lpcchookproc) pour la boîte de dialogue couleur.</span><span class="sxs-lookup"><span data-stu-id="814de-186">You can provide a [**CCHookProc**](/windows/win32/api/commdlg/nc-commdlg-lpcchookproc) hook procedure for the Color dialog box.</span></span> <span data-ttu-id="814de-187">La procédure de raccordement peut traiter les messages envoyés à la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="814de-187">The hook procedure can process messages sent to the dialog box.</span></span> <span data-ttu-id="814de-188">Il peut également utiliser des messages inscrits pour contrôler le comportement de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="814de-188">It can also use registered messages to control the behavior of the dialog box.</span></span> <span data-ttu-id="814de-189">Si vous utilisez un modèle personnalisé pour définir des contrôles supplémentaires, vous devez fournir une procédure de raccordement pour traiter l’entrée de vos contrôles.</span><span class="sxs-lookup"><span data-stu-id="814de-189">If you use a custom template to define additional controls, you must provide a hook procedure to process input for your controls.</span></span>

### <a name="to-enable-a-hook-procedure-for-the-color-dialog-box"></a><span data-ttu-id="814de-190">Pour activer une procédure de Hook pour la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-190">To enable a hook procedure for the Color dialog box</span></span>

1.  <span data-ttu-id="814de-191">Définissez l' **indicateur \_ ENABLEHOOK CC** dans le membre **Flags** de la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) .</span><span class="sxs-lookup"><span data-stu-id="814de-191">Set the **CC\_ENABLEHOOK** flag in the **Flags** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure.</span></span>
2.  <span data-ttu-id="814de-192">Spécifiez l’adresse de la procédure de raccordement dans le membre **lpfnHook** .</span><span class="sxs-lookup"><span data-stu-id="814de-192">Specify the address of the hook procedure in the **lpfnHook** member.</span></span>

<span data-ttu-id="814de-193">Après le traitement du message [**WM \_ INITDIALOG**](wm-initdialog.md) , la procédure de la boîte de dialogue envoie un message **WM \_ INITDIALOG** à la procédure de Hook.</span><span class="sxs-lookup"><span data-stu-id="814de-193">After processing its [**WM\_INITDIALOG**](wm-initdialog.md) message, the dialog box procedure sends a **WM\_INITDIALOG** message to the hook procedure.</span></span> <span data-ttu-id="814de-194">Le paramètre *lParam* de ce message est un pointeur vers la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) utilisée pour initialiser la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="814de-194">The *lParam* parameter of this message is a pointer to the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure used to initialize the dialog box.</span></span>

<span data-ttu-id="814de-195">La boîte de dialogue envoie le message [**COLOROKSTRING**](colorokstring.md) Registered à la procédure de hook lorsque l’utilisateur clique sur le bouton **OK** .</span><span class="sxs-lookup"><span data-stu-id="814de-195">The dialog box sends the [**COLOROKSTRING**](colorokstring.md) registered message to the hook procedure when the user clicks the **OK** button.</span></span> <span data-ttu-id="814de-196">La procédure de raccordement peut rejeter la couleur sélectionnée et forcer la boîte de dialogue à rester ouverte en retournant zéro lorsqu’elle reçoit ce message.</span><span class="sxs-lookup"><span data-stu-id="814de-196">The hook procedure can reject the selected color and force the dialog box to remain open by returning zero when it receives this message.</span></span> <span data-ttu-id="814de-197">La procédure de raccordement peut forcer la boîte de dialogue à sélectionner une couleur particulière en envoyant le message [**SETRGBSTRING**](setrgbstring.md) Registered à la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="814de-197">The hook procedure can force the dialog box to select a particular color by sending the [**SETRGBSTRING**](setrgbstring.md) registered message to the dialog box.</span></span> <span data-ttu-id="814de-198">Pour utiliser ces messages enregistrés, vous devez passer les constantes **COLOROKSTRING** et **SETRGBSTRING** à la fonction [**RegisterWindowMessage**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) pour obtenir un identificateur de message.</span><span class="sxs-lookup"><span data-stu-id="814de-198">To use these registered messages, you must pass the **COLOROKSTRING** and **SETRGBSTRING** constants to the [**RegisterWindowMessage**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) function to get a message identifier.</span></span> <span data-ttu-id="814de-199">Vous pouvez ensuite utiliser l’identificateur pour détecter et traiter les messages envoyés à partir de la boîte de dialogue, ou pour envoyer des messages à la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="814de-199">You can then use the identifier to detect and process messages sent from the dialog box, or to send messages to the dialog box.</span></span>

## <a name="color-models-used-by-the-color-dialog-box"></a><span data-ttu-id="814de-200">Modèles de couleurs utilisés par la boîte de dialogue couleur</span><span class="sxs-lookup"><span data-stu-id="814de-200">Color Models Used by the Color Dialog Box</span></span>

<span data-ttu-id="814de-201">L’extension couleurs personnalisées de la boîte de dialogue couleur permet à l’utilisateur de spécifier une couleur à l’aide des valeurs RVB ou TSL.</span><span class="sxs-lookup"><span data-stu-id="814de-201">The custom colors extension of the Color dialog box allows the user to specify a color using RGB or HSL values.</span></span> <span data-ttu-id="814de-202">Toutefois, la structure [**les ChooseColor.**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) utilise uniquement des valeurs RVB pour signaler les couleurs créées ou sélectionnées par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="814de-202">However, the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure uses only RGB values to report the colors created or selected by the user.</span></span>

-   [<span data-ttu-id="814de-203">Modèle de couleurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-203">RGB Color Model</span></span>](#rgb-color-model)
-   [<span data-ttu-id="814de-204">TSL, modèle de couleurs</span><span class="sxs-lookup"><span data-stu-id="814de-204">HSL Color Model</span></span>](#hsl-color-model)
-   [<span data-ttu-id="814de-205">Conversion de valeurs TSL en valeurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-205">Converting HSL Values to RGB Values</span></span>](#converting-hsl-values-to-rgb-values)

### <a name="rgb-color-model"></a><span data-ttu-id="814de-206">Modèle de couleurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-206">RGB Color Model</span></span>

<span data-ttu-id="814de-207">Le modèle RGB est utilisé pour désigner des couleurs pour les affichages et d’autres appareils qui émettent de la lumière.</span><span class="sxs-lookup"><span data-stu-id="814de-207">The RGB model is used to designate colors for displays and other devices that emit light.</span></span> <span data-ttu-id="814de-208">Les valeurs valides pour le rouge, le vert et le bleu sont comprises entre 0 et 255, 0 indiquant une intensité minimale et une valeur de 255 indiquant une intensité maximale.</span><span class="sxs-lookup"><span data-stu-id="814de-208">Valid red, green, and blue values range from 0 through 255, with 0 indicating minimum intensity and 255 indicating maximum intensity.</span></span> <span data-ttu-id="814de-209">L’illustration suivante montre comment les couleurs primaires rouge, vert et bleu peuvent être combinées pour produire quatre couleurs supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="814de-209">The following illustration shows how the primary colors red, green, and blue can be combined to produce four additional colors.</span></span> <span data-ttu-id="814de-210">(Pour les périphériques d’affichage, la couleur noire se produit lorsque les valeurs rouge, vert et bleu sont définies sur 0.</span><span class="sxs-lookup"><span data-stu-id="814de-210">(For display devices, the color black results when the red, green, and blue values are set to 0.</span></span> <span data-ttu-id="814de-211">Dans la technologie d’affichage, le noir est l’absence de toutes les couleurs.)</span><span class="sxs-lookup"><span data-stu-id="814de-211">In display technology, black is the absence of all colors.)</span></span>

![cercles rouge, vert et bleu se chevauchant](images/rgbcolormodel.png)

<span data-ttu-id="814de-213">Le tableau suivant répertorie les huit couleurs du modèle RGB et leurs valeurs RVB associées.</span><span class="sxs-lookup"><span data-stu-id="814de-213">The following table lists eight colors of the RGB model and their associated RGB values.</span></span>



| <span data-ttu-id="814de-214">Couleur</span><span class="sxs-lookup"><span data-stu-id="814de-214">Color</span></span>   | <span data-ttu-id="814de-215">Valeurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-215">RGB values</span></span>    |
|---------|---------------|
| <span data-ttu-id="814de-216">Rouge</span><span class="sxs-lookup"><span data-stu-id="814de-216">Red</span></span>     | <span data-ttu-id="814de-217">255, 0,0</span><span class="sxs-lookup"><span data-stu-id="814de-217">255, 0, 0</span></span>     |
| <span data-ttu-id="814de-218">Vert</span><span class="sxs-lookup"><span data-stu-id="814de-218">Green</span></span>   | <span data-ttu-id="814de-219">0, 255, 0</span><span class="sxs-lookup"><span data-stu-id="814de-219">0, 255, 0</span></span>     |
| <span data-ttu-id="814de-220">Bleu</span><span class="sxs-lookup"><span data-stu-id="814de-220">Blue</span></span>    | <span data-ttu-id="814de-221">0, 0, 255</span><span class="sxs-lookup"><span data-stu-id="814de-221">0, 0, 255</span></span>     |
| <span data-ttu-id="814de-222">Cyan</span><span class="sxs-lookup"><span data-stu-id="814de-222">Cyan</span></span>    | <span data-ttu-id="814de-223">0, 255, 255</span><span class="sxs-lookup"><span data-stu-id="814de-223">0, 255, 255</span></span>   |
| <span data-ttu-id="814de-224">Magenta</span><span class="sxs-lookup"><span data-stu-id="814de-224">Magenta</span></span> | <span data-ttu-id="814de-225">255, 0, 255</span><span class="sxs-lookup"><span data-stu-id="814de-225">255, 0, 255</span></span>   |
| <span data-ttu-id="814de-226">Yellow</span><span class="sxs-lookup"><span data-stu-id="814de-226">Yellow</span></span>  | <span data-ttu-id="814de-227">255, 255, 0</span><span class="sxs-lookup"><span data-stu-id="814de-227">255, 255, 0</span></span>   |
| <span data-ttu-id="814de-228">Blancs</span><span class="sxs-lookup"><span data-stu-id="814de-228">White</span></span>   | <span data-ttu-id="814de-229">255, 255, 255</span><span class="sxs-lookup"><span data-stu-id="814de-229">255, 255, 255</span></span> |
| <span data-ttu-id="814de-230">Noir</span><span class="sxs-lookup"><span data-stu-id="814de-230">Black</span></span>   | <span data-ttu-id="814de-231">0, 0, 0</span><span class="sxs-lookup"><span data-stu-id="814de-231">0, 0, 0</span></span>       |



 

<span data-ttu-id="814de-232">Le système stocke les couleurs internes en tant que valeurs RVB de 32 bits qui ont la forme hexadécimale suivante : 0x00bbggrr.</span><span class="sxs-lookup"><span data-stu-id="814de-232">The system stores internal colors as 32-bit RGB values that have the following hexadecimal form: 0x00bbggrr.</span></span>

<span data-ttu-id="814de-233">L’octet de poids faible contient une valeur pour l’intensité relative du rouge ; le deuxième octet contient une valeur pour le vert ; et le troisième octet contient une valeur pour le bleu.</span><span class="sxs-lookup"><span data-stu-id="814de-233">The low-order byte contains a value for the relative intensity of red; the second byte contains a value for green; and the third byte contains a value for blue.</span></span> <span data-ttu-id="814de-234">L’octet de poids fort doit être égal à zéro.</span><span class="sxs-lookup"><span data-stu-id="814de-234">The high-order byte must be zero.</span></span>

<span data-ttu-id="814de-235">Vous pouvez utiliser la macro [**RGB**](/windows/desktop/api/wingdi/nf-wingdi-rgb) pour obtenir une valeur RVB en fonction des intensités spécifiées pour les composants rouge, vert et bleu.</span><span class="sxs-lookup"><span data-stu-id="814de-235">You can use the [**RGB**](/windows/desktop/api/wingdi/nf-wingdi-rgb) macro to get an RGB value based on specified intensities for the red, green, and blue components.</span></span> <span data-ttu-id="814de-236">Utilisez les macros [**GetRValue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**GetBValue**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue)et [**GetGValue**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue) pour extraire des couleurs individuelles d’une valeur de couleur RVB.</span><span class="sxs-lookup"><span data-stu-id="814de-236">Use the [**GetRValue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**GetBValue**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue), and [**GetGValue**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue) macros to extract individual colors from an RGB color value.</span></span>

### <a name="hsl-color-model"></a><span data-ttu-id="814de-237">TSL, modèle de couleurs</span><span class="sxs-lookup"><span data-stu-id="814de-237">HSL Color Model</span></span>

<span data-ttu-id="814de-238">La boîte de dialogue couleur fournit des contrôles pour la spécification des valeurs TSL.</span><span class="sxs-lookup"><span data-stu-id="814de-238">The Color dialog box provides controls for specifying HSL values.</span></span> <span data-ttu-id="814de-239">L’illustration suivante montre le contrôle spectre des couleurs et le contrôle de la luminosité qui s’affichent dans la boîte de dialogue couleur.</span><span class="sxs-lookup"><span data-stu-id="814de-239">The following illustration shows the color spectrum control and the luminosity slide control that appear in the Color dialog box.</span></span> <span data-ttu-id="814de-240">L’illustration montre également les plages de valeurs que l’utilisateur peut spécifier avec ces contrôles.</span><span class="sxs-lookup"><span data-stu-id="814de-240">The illustration also shows the ranges of values the user can specify with these controls.</span></span>

![échelle de couleurs et de luminosité](images/colordialogranges.png)

<span data-ttu-id="814de-242">Dans la boîte de dialogue couleur, les valeurs de saturation et de luminosité doivent être comprises entre 0 et 240, et la valeur de teinte doit être comprise entre 0 et 239.</span><span class="sxs-lookup"><span data-stu-id="814de-242">In the Color dialog box, the saturation and luminosity values must be in the range 0 through 240, and the hue value must be in the range 0 through 239.</span></span>

### <a name="converting-hsl-values-to-rgb-values"></a><span data-ttu-id="814de-243">Conversion de valeurs TSL en valeurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-243">Converting HSL Values to RGB Values</span></span>

<span data-ttu-id="814de-244">La procédure de boîte de dialogue fournie dans Comdlg32.dll de la boîte de dialogue couleur contient le code qui convertit les valeurs TSL en valeurs RVB correspondantes.</span><span class="sxs-lookup"><span data-stu-id="814de-244">The dialog box procedure provided in Comdlg32.dll for the Color dialog box contains code that converts HSL values to the corresponding RGB values.</span></span> <span data-ttu-id="814de-245">Le tableau suivant répertorie les huit couleurs du modèle RGB et leurs valeurs TSL et RVB associées.</span><span class="sxs-lookup"><span data-stu-id="814de-245">The following table lists eight colors of the RGB model and their associated HSL and RGB values.</span></span>



| <span data-ttu-id="814de-246">Couleur</span><span class="sxs-lookup"><span data-stu-id="814de-246">Color</span></span>   | <span data-ttu-id="814de-247">valeurs HSL</span><span class="sxs-lookup"><span data-stu-id="814de-247">HSL values</span></span>      | <span data-ttu-id="814de-248">Valeurs RVB</span><span class="sxs-lookup"><span data-stu-id="814de-248">RGB values</span></span>      |
|---------|-----------------|-----------------|
| <span data-ttu-id="814de-249">Rouge</span><span class="sxs-lookup"><span data-stu-id="814de-249">Red</span></span>     | <span data-ttu-id="814de-250">(0, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="814de-250">(0, 240, 120)</span></span>   | <span data-ttu-id="814de-251">(255, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="814de-251">(255, 0, 0)</span></span>     |
| <span data-ttu-id="814de-252">Yellow</span><span class="sxs-lookup"><span data-stu-id="814de-252">Yellow</span></span>  | <span data-ttu-id="814de-253">(40, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="814de-253">(40, 240, 120)</span></span>  | <span data-ttu-id="814de-254">(255, 255, 0)</span><span class="sxs-lookup"><span data-stu-id="814de-254">(255, 255, 0)</span></span>   |
| <span data-ttu-id="814de-255">Vert</span><span class="sxs-lookup"><span data-stu-id="814de-255">Green</span></span>   | <span data-ttu-id="814de-256">(80, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="814de-256">(80, 240, 120)</span></span>  | <span data-ttu-id="814de-257">(0, 255, 0)</span><span class="sxs-lookup"><span data-stu-id="814de-257">(0, 255, 0)</span></span>     |
| <span data-ttu-id="814de-258">Cyan</span><span class="sxs-lookup"><span data-stu-id="814de-258">Cyan</span></span>    | <span data-ttu-id="814de-259">(120, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="814de-259">(120, 240, 120)</span></span> | <span data-ttu-id="814de-260">(0, 255, 255)</span><span class="sxs-lookup"><span data-stu-id="814de-260">(0, 255, 255)</span></span>   |
| <span data-ttu-id="814de-261">Bleu</span><span class="sxs-lookup"><span data-stu-id="814de-261">Blue</span></span>    | <span data-ttu-id="814de-262">(160, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="814de-262">(160, 240, 120)</span></span> | <span data-ttu-id="814de-263">(0, 0, 255)</span><span class="sxs-lookup"><span data-stu-id="814de-263">(0, 0, 255)</span></span>     |
| <span data-ttu-id="814de-264">Magenta</span><span class="sxs-lookup"><span data-stu-id="814de-264">Magenta</span></span> | <span data-ttu-id="814de-265">(200, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="814de-265">(200, 240, 120)</span></span> | <span data-ttu-id="814de-266">(255, 0, 255)</span><span class="sxs-lookup"><span data-stu-id="814de-266">(255, 0, 255)</span></span>   |
| <span data-ttu-id="814de-267">Blancs</span><span class="sxs-lookup"><span data-stu-id="814de-267">White</span></span>   | <span data-ttu-id="814de-268">(0, 0, 240)</span><span class="sxs-lookup"><span data-stu-id="814de-268">(0, 0, 240)</span></span>     | <span data-ttu-id="814de-269">(255, 255, 255)</span><span class="sxs-lookup"><span data-stu-id="814de-269">(255, 255, 255)</span></span> |
| <span data-ttu-id="814de-270">Noir</span><span class="sxs-lookup"><span data-stu-id="814de-270">Black</span></span>   | <span data-ttu-id="814de-271">(0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="814de-271">(0, 0, 0)</span></span>       | <span data-ttu-id="814de-272">(0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="814de-272">(0, 0, 0)</span></span>       |



 

 

 
