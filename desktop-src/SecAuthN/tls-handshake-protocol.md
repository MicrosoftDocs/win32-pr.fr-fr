---
description: Le protocole de négociation TLS (Transport Layer Security) est responsable de l’authentification et de l’échange de clés nécessaires à l’établissement ou à la reprise des sessions sécurisées.
ms.assetid: 65fb4db3-e505-457a-9159-dba0b506ea0b
title: Protocole de négociation TLS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e0c7cfa9e9db54a6035abe147ce00bbde59bcc86
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106534040"
---
# <a name="tls-handshake-protocol"></a><span data-ttu-id="2bbbf-103">Protocole de négociation TLS</span><span class="sxs-lookup"><span data-stu-id="2bbbf-103">TLS Handshake Protocol</span></span>

<span data-ttu-id="2bbbf-104">Le protocole de négociation TLS ( [*Transport Layer Security*](../secgloss/t-gly.md) ) est responsable de l’authentification et de l’échange de clés nécessaires à l’établissement ou à la reprise des sessions sécurisées.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-104">The [*Transport Layer Security*](../secgloss/t-gly.md) (TLS) Handshake Protocol is responsible for the authentication and key exchange necessary to establish or resume secure sessions.</span></span> <span data-ttu-id="2bbbf-105">Lors de l’établissement d’une [*session*](../secgloss/s-gly.md)sécurisée, le protocole de négociation gère les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="2bbbf-105">When establishing a secure [*session*](../secgloss/s-gly.md), the Handshake Protocol manages the following:</span></span>

-   <span data-ttu-id="2bbbf-106">Négociation de la suite de chiffrement</span><span class="sxs-lookup"><span data-stu-id="2bbbf-106">Cipher suite negotiation</span></span>
-   <span data-ttu-id="2bbbf-107">L’authentification du serveur et, éventuellement, le client</span><span class="sxs-lookup"><span data-stu-id="2bbbf-107">Authentication of the server and optionally, the client</span></span>
-   <span data-ttu-id="2bbbf-108">Échange d’informations sur la clé de session.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-108">Session key information exchange.</span></span>

## <a name="cipher-suite-negotiation"></a><span data-ttu-id="2bbbf-109">Négociation de la suite de chiffrement</span><span class="sxs-lookup"><span data-stu-id="2bbbf-109">Cipher Suite Negotiation</span></span>

<span data-ttu-id="2bbbf-110">Le client et le serveur effectuent un contact et choisissent la suite de chiffrement qui sera utilisée dans l’échange de messages.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-110">The client and server make contact and choose the cipher suite that will be used throughout their message exchange.</span></span>

## <a name="authentication"></a><span data-ttu-id="2bbbf-111">Authentification</span><span class="sxs-lookup"><span data-stu-id="2bbbf-111">Authentication</span></span>

<span data-ttu-id="2bbbf-112">Dans TLS, un serveur prouve son identité au client.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-112">In TLS, a server proves its identity to the client.</span></span> <span data-ttu-id="2bbbf-113">Le client peut également avoir besoin de prouver son identité au serveur.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-113">The client might also need to prove its identity to the server.</span></span> <span data-ttu-id="2bbbf-114">L’infrastructure à clé publique, l’utilisation de [*paires de clés publiques/privées*](../secgloss/p-gly.md), est la base de cette authentification.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-114">PKI, the use of [*public/private key pairs*](../secgloss/p-gly.md), is the basis of this authentication.</span></span> <span data-ttu-id="2bbbf-115">La méthode exacte utilisée pour l’authentification est déterminée par la suite de chiffrement négociée.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-115">The exact method used for authentication is determined by the cipher suite negotiated.</span></span>

## <a name="key-exchange"></a><span data-ttu-id="2bbbf-116">Échange de clés</span><span class="sxs-lookup"><span data-stu-id="2bbbf-116">Key Exchange</span></span>

<span data-ttu-id="2bbbf-117">Le client et le serveur échangent des nombres aléatoires et un numéro spécial appelé secret pré-maître.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-117">The client and server exchange random numbers and a special number called the Pre-Master Secret.</span></span> <span data-ttu-id="2bbbf-118">Ces nombres sont combinés à des données supplémentaires permettant au client et au serveur de créer leur secret partagé, appelé secret principal.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-118">These numbers are combined with additional data permitting client and server to create their shared secret, called the Master Secret.</span></span> <span data-ttu-id="2bbbf-119">Le secret principal est utilisé par le client et le serveur pour générer le secret d’écriture MAC, qui est la clé de session utilisée pour le [*hachage*](../secgloss/h-gly.md), et la clé d’écriture, qui est la [*clé de session*](../secgloss/s-gly.md) utilisée pour le chiffrement.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-119">The Master Secret is used by client and server to generate the write MAC secret, which is the session key used for [*hashing*](../secgloss/h-gly.md), and the write key, which is the [*session key*](../secgloss/s-gly.md) used for encryption.</span></span>

## <a name="establishing-a-secure-session-by-using-tls"></a><span data-ttu-id="2bbbf-120">Établissement d’une session sécurisée à l’aide de TLS</span><span class="sxs-lookup"><span data-stu-id="2bbbf-120">Establishing a Secure Session by Using TLS</span></span>

<span data-ttu-id="2bbbf-121">Le protocole de négociation TLS implique les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="2bbbf-121">The TLS Handshake Protocol involves the following steps:</span></span>

1.  <span data-ttu-id="2bbbf-122">Le client envoie un message « client Hello » au serveur, ainsi que la valeur aléatoire du client et les suites de chiffrement prises en charge.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-122">The client sends a "Client hello" message to the server, along with the client's random value and supported cipher suites.</span></span>
2.  <span data-ttu-id="2bbbf-123">Le serveur répond en envoyant un message « Server Hello » au client, ainsi que la valeur aléatoire du serveur.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-123">The server responds by sending a "Server hello" message to the client, along with the server's random value.</span></span>
3.  <span data-ttu-id="2bbbf-124">Le serveur envoie son certificat au client à des fins d’authentification et peut demander un certificat au client.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-124">The server sends its certificate to the client for authentication and may request a certificate from the client.</span></span> <span data-ttu-id="2bbbf-125">Le serveur envoie le message « serveur Hello Done ».</span><span class="sxs-lookup"><span data-stu-id="2bbbf-125">The server sends the "Server hello done" message.</span></span>
4.  <span data-ttu-id="2bbbf-126">Si le serveur a demandé un certificat à partir du client, le client l’envoie.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-126">If the server has requested a certificate from the client, the client sends it.</span></span>
5.  <span data-ttu-id="2bbbf-127">Le client crée un secret de prémaster aléatoire et le chiffre à l’aide de la [*clé publique*](../secgloss/p-gly.md) du certificat du serveur, en envoyant le secret pré-maître chiffré au serveur.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-127">The client creates a random Pre-Master Secret and encrypts it with the [*public key*](../secgloss/p-gly.md) from the server's certificate, sending the encrypted Pre-Master Secret to the server.</span></span>
6.  <span data-ttu-id="2bbbf-128">Le serveur reçoit le secret pré-maître.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-128">The server receives the Pre-Master Secret.</span></span> <span data-ttu-id="2bbbf-129">Le serveur et le client génèrent chacun le secret principal et les [*clés de session*](../secgloss/s-gly.md) en fonction du secret de prémaître.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-129">The server and client each generate the Master Secret and [*session keys*](../secgloss/s-gly.md) based on the Pre-Master Secret.</span></span>
7.  <span data-ttu-id="2bbbf-130">Le client envoie une notification « modifier les spécifications de chiffrement » au serveur pour indiquer que le client va commencer à utiliser les nouvelles [*clés de session*](../secgloss/s-gly.md) pour le [*hachage*](../secgloss/h-gly.md) et le chiffrement des messages.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-130">The client sends "Change cipher spec" notification to server to indicate that the client will start using the new [*session keys*](../secgloss/s-gly.md) for [*hashing*](../secgloss/h-gly.md) and encrypting messages.</span></span> <span data-ttu-id="2bbbf-131">Le client envoie également le message « client terminé ».</span><span class="sxs-lookup"><span data-stu-id="2bbbf-131">Client also sends "Client finished" message.</span></span>
8.  <span data-ttu-id="2bbbf-132">Le serveur reçoit « modifier la spécification de chiffrement » et bascule son état de sécurité de la couche d’enregistrement sur [*chiffrement symétrique*](../secgloss/s-gly.md) à l’aide des [*clés de session*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="2bbbf-132">Server receives "Change cipher spec" and switches its record layer security state to [*symmetric encryption*](../secgloss/s-gly.md) using the [*session keys*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="2bbbf-133">Le serveur envoie le message « serveur terminé » au client.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-133">Server sends "Server finished" message to the client.</span></span>
9.  <span data-ttu-id="2bbbf-134">Le client et le serveur peuvent maintenant échanger des données d’application sur le canal sécurisé qu’ils ont établi.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-134">Client and server can now exchange application data over the secured channel they have established.</span></span> <span data-ttu-id="2bbbf-135">Tous les messages envoyés du client au serveur et du serveur au client sont chiffrés à l’aide de la clé de session.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-135">All messages sent from client to server and from server to client are encrypted using session key.</span></span>

## <a name="resuming-a-secure-session-by-using-tls"></a><span data-ttu-id="2bbbf-136">Reprise d’une session sécurisée à l’aide de TLS</span><span class="sxs-lookup"><span data-stu-id="2bbbf-136">Resuming a Secure Session by Using TLS</span></span>

1.  <span data-ttu-id="2bbbf-137">Le client envoie un message « client Hello » à l’aide de l’ID de session de la session à reprendre.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-137">The client sends a "Client hello" message using the Session ID of the session to be resumed.</span></span>
2.  <span data-ttu-id="2bbbf-138">Le serveur examine son cache de session pour rechercher un ID de session correspondant.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-138">The server checks its session cache for a matching Session ID.</span></span> <span data-ttu-id="2bbbf-139">Si une correspondance est trouvée et que le serveur est en mesure de reprendre la session, il envoie un message « Server Hello » avec l’ID de session.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-139">If a match is found, and the server is able to resume the session, it sends a "Server hello" message with the Session ID.</span></span>
    > [!Note]  
    > <span data-ttu-id="2bbbf-140">Si une correspondance d’ID de session est introuvable, le serveur génère un nouvel ID de session et le client TLS et le serveur effectuent une négociation complète.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-140">If a session ID match is not found, the server generates a new session ID and the TLS client and server perform a full handshake.</span></span>

     

3.  <span data-ttu-id="2bbbf-141">Le client et le serveur doivent échanger des messages « modifier les spécifications de chiffrement » et envoyer des messages « client terminé » et « serveur terminé ».</span><span class="sxs-lookup"><span data-stu-id="2bbbf-141">Client and server must exchange "Change cipher spec" messages and send "Client finished" and "Server finished" messages.</span></span>
4.  <span data-ttu-id="2bbbf-142">Le client et le serveur peuvent maintenant reprendre l’échange de données d’application sur le canal sécurisé.</span><span class="sxs-lookup"><span data-stu-id="2bbbf-142">Client and server can now resume application data exchange over the secure channel.</span></span>

 

 
