---
description: Permet à une application de transport d’interroger le [*package de sécurité*](../secgloss/s-gly.md) Schannel pour certains attributs d’un [*contexte de sécurité*](../secgloss/s-gly.md).
ms.assetid: 0329e525-a743-4e6c-aac4-9f74274dadd2
title: QueryContextAttributes (Schannel), fonction (Sspi.h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: 9ec53dcca1e31742f13d934fa9957e3c73eb6db70b58860b87fae5591fad721a
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/11/2021
ms.locfileid: "118920117"
---
# <a name="querycontextattributes-schannel-function"></a>QueryContextAttributes (SChannel) (fonction)

La fonction **QueryContextAttributes (SChannel)** permet à une application de transport d’interroger le [*package de sécurité*](../secgloss/s-gly.md) Schannel pour certains [*attributs*](../secgloss/a-gly.md#_security_attribute_gly) d’un [*contexte de sécurité*](../secgloss/s-gly.md).

## <a name="syntax"></a>Syntaxe


```C++
SECURITY_STATUS SEC_ENTRY QueryContextAttributes(
  _In_  PCtxtHandle phContext,
  _In_  ULONG       ulAttribute,
  _Out_ PVOID       pBuffer
);
```



## <a name="parameters"></a>Paramètres

<dl> <dt>

*phContext* \[ dans\]
</dt> <dd>

Handle vers le [*contexte de sécurité*](../secgloss/s-gly.md) à interroger.

</dd> <dt>

*ulAttribute* \[ dans\]
</dt> <dd>

Spécifie l’attribut du contexte à retourner. Ce paramètre peut prendre les valeurs suivantes.



| Valeur                                                                                                                                                                                                                                                                              | Signification                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="SECPKG_ATTR_ACCESS_TOKEN"></span><span id="secpkg_attr_access_token"></span><dl> <dt>**SECPKG \_ \_ \_ Jeton d’accès attr**</dt> <dt>13</dt> </dl>                           | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ AccessToken**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_accesstoken) .<br/> Retourne un handle pour le jeton d’accès.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="SECPKG_ATTR_APP_DATA"></span><span id="secpkg_attr_app_data"></span><dl> <dt>**SECPKG \_ \_ \_ Données de l’application attr**</dt> <dt>0x5E</dt> </dl>                                     | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ SessionAppData**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_sessionappdata) .<br/> Retourne ou spécifie les données d’application pour la session.<br/> Cet attribut est pris en charge uniquement par le [*package de sécurité*](../secgloss/s-gly.md)Schannel.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="SECPKG_ATTR_AUTHORITY"></span><span id="secpkg_attr_authority"></span><dl> <dt>**SECPKG \_ \_Autorité attr**</dt> <dt>6</dt> </dl>                                      | Le paramètre *pbuffer* contient un pointeur vers une structure d' [**\_ autorité SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_authoritya) .<br/> Interroge le nom de l’autorité d’authentification.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="SECPKG_ATTR_[*cipher*](../secgloss/c-gly.md)_INFO"></span><span id="secpkg_attr_[*cipher*](../secgloss/c-gly.md)_info"></span><dl> <dt>**SECPKG \_ Informations de \_ [*chiffrement*](../secgloss/c-gly.md) \_ attr**</dt> <dt>0x64</dt> </dl>                            | Le paramètre *pbuffer* contient un pointeur vers une structure d' [**informations de \_ [*chiffrement*](../secgloss/c-gly.md)SecPkgContext**](secpkgcontext-[*cipher*](../secgloss/c-gly.md)info.md) .<br/> Retourne une nouvelle structure d’informations de [*chiffrement*](../secgloss/c-gly.md) CNG.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span id="SECPKG_ATTR_CONNECTION_INFO"></span><span id="secpkg_attr_connection_info"></span><dl> <dt>**SECPKG \_ \_ \_ Informations de connexion attr**</dt> <dt>0x5A</dt> </dl>                | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ ConnectionInfo**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_connectioninfo) .<br/> Retourne des informations détaillées sur la connexion établie.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="SECPKG_ATTR_KEYING_MATERIAL"></span><span id="secpkg_attr_keying_material"></span><dl> <dt>**SECPKG \_ 0x6b \_ de \_ génération de clé d’attr**</dt> <dt></dt> </dl>                | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ KeyingMaterial**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_keyingmaterial) . La fonctionnalité d’exportation de la clé est conforme à la [norme RFC 5705](https://tools.ietf.org/html/rfc5705).<br/> L’interrogation de cet attribut avant la génération du secret principal ou avant l’attribut **SECPKG \_ attr \_ \_ keyMaterial \_ info** a été définie avec le résultat d’une erreur.<br/> cet attribut est pris en charge uniquement par le [*package de sécurité*](../secgloss/s-gly.md) Schannel dans Windows 10 et Windows Server 2016 ou versions ultérieures.<br/>                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_CREDS_2"></span><span id="secpkg_attr_creds_2"></span><dl> <dt>**SECPKG \_ \_Références d’identification \_ 2**</dt> <dt>0x80000086</dt> </dl>                                  | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ ClientCreds**](/windows/win32/api/credssp/ns-credssp-secpkgcontext_clientcreds) qui spécifie les informations d’identification du client. <br/> Si les informations d’identification du client sont le nom d’utilisateur et le mot de passe, la mémoire tampon est une structure de [**\_ \_ connexion interactive KERB**](/windows/win32/api/ntsecapi/ns-ntsecapi-kerb_interactive_logon) compressée.<br/> Si les informations d’identification du client sont le nom d’utilisateur et le code confidentiel de la carte à puce, la mémoire tampon est une structure de [**\_ \_ connexion de certificat KERB**](/windows/win32/api/ntsecapi/ns-ntsecapi-kerb_certificate_logon) compressée.<br/> Si les informations d’identification du client sont des informations d’identification d’identité en ligne, la mémoire tampon est une structure EX2 de l' [**\_ \_ identité d’authentification \_ \_ winnt du sec**](/windows/win32/api/sspi/ns-sspi-sec_winnt_auth_identity_ex2) marshalée.<br/> Cet attribut est pris en charge uniquement sur le serveur CredSSP.<br/> **Windows server 2008 R2, Windows 7, Windows server 2008, Windows Vista, Windows server 2003 et Windows XP :** Cette valeur n’est pas prise en charge.<br/> |
| <span id="SECPKG_ATTR_DCE_INFO"></span><span id="secpkg_attr_dce_info"></span><dl> <dt>**SECPKG \_ \_ \_ Informations DCE d’attr**</dt> . <dt>3</dt> </dl>                                        | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ DceInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_dceinfo) .<br/> Requêtes pour les données d’autorisation utilisées par les services DCE.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_EAP_KEY_BLOCK"></span><span id="secpkg_attr_eap_key_block"></span><dl> <dt>**SECPKG \_ ATTR \_ \_ \_ bloc de clé EAP**</dt> <dt>0x5B</dt> </dl>                     | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ EapKeyBlock**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_eapkeyblock) .<br/> Requêtes pour les données de clé utilisées par le protocole EAP TLS.<br/> Cet attribut est pris en charge uniquement par le [*package de sécurité*](../secgloss/s-gly.md)Schannel.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="SECPKG_ATTR_ENDPOINT_BINDINGS"></span><span id="secpkg_attr_endpoint_bindings"></span><dl> <dt>**SECPKG \_ \_ \_ Liaisons de point de terminaison attr**</dt> <dt>26</dt> </dl>            | Le paramètre *pbuffer* contient un pointeur vers une structure de [**\_ liaisons SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_bindings) qui contient les liaisons de canal pour TLS (RFC 5929). <br/> **Windows server 2008, Windows Vista, Windows server 2003 et Windows XP :** Cette valeur n’est pas prise en charge.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="SECPKG_ATTR_FLAGS"></span><span id="secpkg_attr_flags"></span><dl> <dt>**SECPKG \_ \_Indicateurs attr**</dt> <dt>14</dt> </dl>                                                 | Le paramètre *pbuffer* contient un pointeur vers une structure d' [**\_ indicateurs SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_flags) .<br/> Retourne des informations sur les indicateurs de contexte négociés.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span id="SECPKG_ATTR_ISSUER_LIST_EX"></span><span id="secpkg_attr_issuer_list_ex"></span><dl> <dt>**SECPKG \_ \_Liste d’émetteurs \_ attr \_ ex**</dt> <dt>0x59</dt> </dl>                  | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ IssuerListInfoEx**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_issuerlistinfoex) .<br/> Retourne une liste d’émetteurs de certificats qui sont acceptés par le serveur.<br/> Cet attribut est pris en charge uniquement par le [*package de sécurité*](../secgloss/s-gly.md)Schannel.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="SECPKG_ATTR_KEY_INFO"></span><span id="secpkg_attr_key_info"></span><dl> <dt>**SECPKG \_ \_ \_ Informations sur la clé attr**</dt> <dt>5</dt> </dl>                                        | Le paramètre *pbuffer* contient un pointeur vers une [**structure \_ KeyInfo SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_keyinfoa) .<br/> Interroge des informations sur les clés utilisées dans un [*contexte de sécurité*](../secgloss/s-gly.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span id="SECPKG_ATTR_LIFESPAN"></span><span id="secpkg_attr_lifespan"></span><dl> <dt>**SECPKG \_ Durée de \_ vie**</dt> de l’attr <dt>2</dt> </dl>                                         | Le paramètre *pbuffer* contient un pointeur vers une structure de durée de [**\_ vie SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_lifespan) .<br/> Interroge l’étendue de la durée de vie du contexte.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_LOCAL_CERT_CONTEXT"></span><span id="secpkg_attr_local_cert_context"></span><dl> <dt>**SECPKG \_ ATTR \_ \_ \_ contexte du certificat local**</dt> <dt>0x54</dt> </dl>      | Le paramètre *pbuffer* contient un pointeur vers une structure de [**\_ contexte PCCERT**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context).<br/> Recherche un contexte de certificat qui contient un certificat de fin local.<br/> Cet attribut est pris en charge uniquement par le [*package de sécurité*](../secgloss/s-gly.md)Schannel.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_LOCAL_CRED"></span><span id="secpkg_attr_local_cred"></span><dl> <dt>**SECPKG \_ attr \_ local \_ cred**</dt> </dl>                                                                                         | Le paramètre *pbuffer* contient un pointeur vers une structure **SecPkgContext \_ LocalCredentialInfo** . (obsolète)<br/> Remplacé par SECPKG \_ attr \_ local \_ CERT \_ Context.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span id="SECPKG_ATTR_NAMES"></span><span id="secpkg_attr_names"></span><dl> <dt>**SECPKG \_ \_Noms attr**</dt> <dt>1</dt> </dl>                                                  | Le paramètre *pbuffer* contient un pointeur vers une structure de [**\_ noms SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_namesa) .<br/> Interroge le nom associé au contexte.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="SECPKG_ATTR_NATIVE_NAMES"></span><span id="secpkg_attr_native_names"></span><dl> <dt>**SECPKG \_ ATTR \_ , \_ noms natifs**</dt> <dt>13</dt> </dl>                           | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ NativeNames**](https://docs.microsoft.com/windows/win32/api/sspi/ns-sspi-_secpkgcontext_nativenamesa) .<br/> Retourne le nom de principal (CNAMe) du ticket sortant.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_NEGOTIATION_INFO"></span><span id="secpkg_attr_negotiation_info"></span><dl> <dt>**SECPKG \_ \_ \_ Informations de négociation d’attr**</dt> <dt>12</dt> </dl>               | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ NegotiationInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_negotiationinfoa) .<br/> Retourne des informations sur le [*package de sécurité*](../secgloss/s-gly.md) à utiliser avec le processus de négociation et l’état actuel de la négociation pour l’utilisation de ce package.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span id="SECPKG_ATTR_PACKAGE_INFO"></span><span id="secpkg_attr_package_info"></span><dl> <dt>**SECPKG \_ \_ \_ Informations sur le package attr**</dt> <dt>10</dt> </dl>                           | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ PackageInfo**](/windows/win32/api/sspi/ns-sspi-secpkginfoa) .<br/> Retourne des informations sur le fournisseur de services partagés en cours d’utilisation.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="SECPKG_ATTR_PASSWORD_EXPIRY"></span><span id="secpkg_attr_password_expiry"></span><dl> <dt>**SECPKG \_ \_ \_ Expiration du mot de passe attr**</dt> <dt>8</dt> </dl>                   | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ PasswordExpiry**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_passwordexpiry) .<br/> Retourne les informations d’expiration du mot de passe.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="SECPKG_ATTR_REMOTE_CERT_CONTEXT"></span><span id="secpkg_attr_remote_cert_context"></span><dl> <dt>**SECPKG \_ ATTR \_ \_ \_ contexte du certificat distant**</dt> <dt>0x53</dt> </dl>   | Le paramètre *pbuffer* contient un pointeur vers une structure de [**\_ contexte PCCERT**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context).<br/> Recherche un contexte de certificat qui contient le certificat de fin fourni par le serveur.<br/> Cet attribut est pris en charge uniquement par le [*package de sécurité*](../secgloss/s-gly.md)Schannel.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_ROOT_STORE"></span><span id="secpkg_attr_root_store"></span><dl> <dt>**SECPKG \_ 0x55 \_ du \_ magasin racine attr**</dt> <dt></dt> </dl>                               | Le paramètre *pbuffer* contient un pointeur vers **HCERTCONTEXT**. Recherche un contexte de certificat qui contient un certificat fourni par le magasin racine.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_SESSION_INFO"></span><span id="secpkg_attr_session_info"></span><dl> <dt>**SECPKG \_ \_ \_ Informations de session attr**</dt> <dt>0x5d</dt> </dl>                         | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ SessionInfo**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_sessioninfo) .<br/> Retourne des informations sur la session.<br/> **Windows server 2008, Windows Vista, Windows server 2003 et Windows XP :** Cette valeur n’est pas prise en charge.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="SECPKG_ATTR_SESSION_KEY"></span><span id="secpkg_attr_session_key"></span><dl> <dt>**SECPKG \_ \_ \_ Clé de session d’attr**</dt> <dt>9</dt> </dl>                               | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ SessionKey**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_sessionkey) .<br/> Retourne des informations sur la [*clé de session*](../secgloss/s-gly.md)s.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="SECPKG_ATTR_SIZES"></span><span id="secpkg_attr_sizes"></span><dl> <dt>**SECPKG \_ \_Tailles d’attr**</dt> <dt>0</dt> </dl>                                                  | Le paramètre *pbuffer* contient un pointeur vers une structure de [**\_ tailles SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_sizes) .<br/> Interroge les tailles des structures utilisées dans les fonctions par message.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="SECPKG_ATTR_STREAM_SIZES"></span><span id="secpkg_attr_stream_sizes"></span><dl> <dt>**SECPKG \_ \_ \_ Tailles de flux d’attr**</dt> <dt>4</dt> </dl>                            | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ StreamSizes**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_streamsizes) .<br/> Interroge les tailles des différentes parties d’un flux utilisé dans les fonctions par message.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="SECPKG_ATTR_SUPPORTED_SIGNATURES"></span><span id="secpkg_attr_supported_signatures"></span><dl> <dt>**SECPKG \_ ATTR \_ \_ signatures prises en charge**</dt> <dt>0x66</dt> </dl> | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ SupportedSignatures**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_supportedsignatures) .<br/> Cette valeur retourne des informations sur les types de signature pris en charge pour la connexion.<br/> **Windows server 2008, Windows Vista, Windows server 2003 et Windows XP :** Cette valeur n’est pas prise en charge.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span id="SECPKG_ATTR_TARGET_INFORMATION"></span><span id="secpkg_attr_target_information"></span><dl> <dt>**SECPKG \_ \_ \_ Informations sur la cible d’attr**</dt> <dt>17</dt> </dl>         | Le paramètre *pbuffer* contient un pointeur vers une structure [**SecPkgContext \_ TargetInformation**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_targetinformation) .<br/> Retourne des informations sur le nom du serveur distant.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span id="SECPKG_ATTR_UNIQUE_BINDINGS"></span><span id="secpkg_attr_unique_bindings"></span><dl> <dt>**SECPKG \_ \_ \_ Liaisons uniques attr**</dt> <dt>25</dt> </dl>                  | Le paramètre *pbuffer* contient un pointeur vers une structure de [**\_ liaisons SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_bindings) qui contient des informations de liaison de canal.<br/> **Windows server 2008, Windows Vista, Windows server 2003 et Windows XP :** Cette valeur n’est pas prise en charge.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_APPLICATION_PROTOCOL"></span><span id="secpkg_attr_application_protocol"></span><dl> <dt>**SECPKG \_ \_ \_ Protocole d’APPLICATION attr**</dt> <dt>35</dt> </dl>   | Le paramètre *pbuffer* contient un protocole d’application négocié.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="SECPKG_ATTR_DTLS_MTU"></span><span id="secpkg_attr_dtls_mtu"></span><dl> <dt>**SECPKG \_ \_DTLS \_ MTU**</dt> <dt>34</dt> </dl>                                       | Définit et récupère la valeur MTU (unité de transmission maximale) à utiliser avec DTLS. Si DTLS n’est pas activé dans un [*contexte de sécurité*](../secgloss/s-gly.md), cet attribut n’est pas pris en charge. <br/> Les valeurs valides sont comprises entre 200 octets et 64 kilo-octets. La valeur MTU DTLS par défaut dans Schannel est de 1096 octets. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |



 

</dd> <dt>

*pbuffer* \[ à\]
</dt> <dd>

Pointeur vers une structure qui reçoit les attributs. Le type de structure pointé dépend de la valeur spécifiée dans le paramètre *ulAttribute* .

</dd> </dl>

## <a name="return-value"></a>Valeur retournée

Si la fonction s’exécute correctement, la valeur de retour est **s \_ E \_ OK**.

Si la fonction échoue, la valeur de retour est un code d’erreur différent de zéro.

## <a name="remarks"></a>Remarques

La structure vers laquelle pointe le paramètre *pbuffer* varie en fonction de l’attribut interrogé. L’appelant doit allouer la structure *pbuffer* elle-même, mais le SSP alloue la mémoire nécessaire pour contenir les membres de taille variable de la structure *pbuffer* . Lorsque vous avez fini d’utiliser la mémoire allouée par le SSP, libérez-la en appelant la fonction [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) .

Après la lecture du contexte de certificat \_ distant attr SECPKG ou de la \_ valeur de contexte de \_ \_ \_ certificat local SECPKG attr \_ \_ \_ , le membre **hCertStore** est défini sur un handle vers un magasin de certificats qui contient les certificats intermédiaires, le cas échéant. En outre, l’application est responsable de l’appel de [**CertFreeCertificateContext**](/windows/win32/api/wincrypt/nf-wincrypt-certfreecertificatecontext) pour libérer la mémoire utilisée par le contexte de certificat.

## <a name="requirements"></a>Configuration requise



| Condition requise | Valeur |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| Client minimal pris en charge<br/> | Windows 8.1 les \[ applications de bureau uniquement\]<br/>                                                           |
| Serveur minimal pris en charge<br/> | Windows Server 2012 \[Applications de bureau R2 uniquement\]<br/>                                                |
| En-tête<br/>                   | <dl> <dt>SSPI. h (include Security. h)</dt> </dl> |
| Bibliothèque<br/>                  | <dl> <dt>Secur32. lib</dt> </dl>                 |
| DLL<br/>                      | <dl> <dt>Secur32.dll</dt> </dl>                 |
| Noms Unicode et ANSI<br/>   | **QueryContextAttributesW** (Unicode) et **QueryContextAttributesA** (ANSI)<br/>                |



## <a name="see-also"></a>Voir aussi

<dl> <dt>

[Fonctions SSPI](authentication-functions.md#sspi-functions)
</dt> <dt>

[**contexte du certificat \_**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context)
</dt> <dt>

[**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer)
</dt> <dt>

[**\_Autorité SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_authoritya)
</dt> <dt>

[**SecPkgContext \_ ConnectionInfo**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_connectioninfo)
</dt> <dt>

[**SecPkgContext \_ DceInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_dceinfo)
</dt> <dt>

[**SecPkgContext \_ IssuerListInfoEx**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_issuerlistinfoex)
</dt> <dt>

[**SecPkgContext \_ KeyInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_keyinfoa)
</dt> <dt>

[**Durée de \_ vie SecPkgContext**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_lifespan)
</dt> <dt>

[**Noms de SecPkgContext \_**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_namesa)
</dt> <dt>

[**Tailles de SecPkgContext \_**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_sizes)
</dt> <dt>

[**SecPkgContext \_ StreamSizes**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_streamsizes)
</dt> </dl>

 

 
