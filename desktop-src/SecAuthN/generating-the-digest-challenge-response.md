---
description: Après avoir reçu un défi du serveur, le client crée la réponse de la stimulation de synthèse en appelant la fonction InitializeSecurityContext (Digest).
ms.assetid: b26b5676-a614-4017-a4e5-a5395292a667
title: Génération de la réponse de test Digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8b577334348745425db23d3de41431ba4e37b7af
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103867877"
---
# <a name="generating-the-digest-challenge-response"></a><span data-ttu-id="ee8db-103">Génération de la réponse de test Digest</span><span class="sxs-lookup"><span data-stu-id="ee8db-103">Generating the Digest Challenge Response</span></span>

<span data-ttu-id="ee8db-104">Après avoir reçu un défi du serveur, le client crée la réponse de la stimulation de synthèse en appelant la fonction [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="ee8db-104">After receiving a challenge from the server, the client creates the Digest challenge response by calling the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="ee8db-105">Cette fonction génère une empreinte digitale de [*hachage*](/windows/desktop/SecGloss/h-gly) MD5 en utilisant des informations sur la ressource demandée et les données de la demande, et génère un jeton de sécurité qui représente un [*contexte de sécurité*](/windows/desktop/SecGloss/s-gly)partiel.</span><span class="sxs-lookup"><span data-stu-id="ee8db-105">This function generates an MD5 [*hash*](/windows/desktop/SecGloss/h-gly) fingerprint by using information about the requested resource and data from the challenge, and outputs a security token that represents a partial [*security context*](/windows/desktop/SecGloss/s-gly).</span></span> <span data-ttu-id="ee8db-106">Pour terminer l’authentification, le client doit retourner le jeton au serveur qui a émis la demande.</span><span class="sxs-lookup"><span data-stu-id="ee8db-106">To complete the authentication, the client must return the token to the server that issued the challenge.</span></span>

<span data-ttu-id="ee8db-107">Le tableau suivant décrit les paramètres de la [*fonction*](/windows/desktop/SecGloss/c-gly) [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) et les valeurs à fournir lors de la création d’une réponse à une demande de test Digest.</span><span class="sxs-lookup"><span data-stu-id="ee8db-107">The following table describes the parameters of the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) [*function*](/windows/desktop/SecGloss/c-gly), and the values to supply when constructing a Digest challenge response.</span></span>



| <span data-ttu-id="ee8db-108">Paramètre</span><span class="sxs-lookup"><span data-stu-id="ee8db-108">Parameter</span></span>                  | <span data-ttu-id="ee8db-109">Description</span><span class="sxs-lookup"><span data-stu-id="ee8db-109">Description</span></span>                                                                                                                                                                                               |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ee8db-110">*fContextReq*</span><span class="sxs-lookup"><span data-stu-id="ee8db-110">*fContextReq*</span></span><br/>   | <span data-ttu-id="ee8db-111">Attributs de contexte de sécurité demandés par le client.</span><span class="sxs-lookup"><span data-stu-id="ee8db-111">The security context attributes requested by the client.</span></span> <span data-ttu-id="ee8db-112">Pour plus d’informations, consultez Configuration requise du contexte de la réponse de test Digest.</span><span class="sxs-lookup"><span data-stu-id="ee8db-112">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                             |
| <span data-ttu-id="ee8db-113">*pszTargetName*</span><span class="sxs-lookup"><span data-stu-id="ee8db-113">*pszTargetName*</span></span><br/> | <span data-ttu-id="ee8db-114">HTTP : chaîne terminée par le caractère null qui spécifie l’URL cible.</span><span class="sxs-lookup"><span data-stu-id="ee8db-114">HTTP: Null-terminated string that specifies the target URL.</span></span><br/> <span data-ttu-id="ee8db-115">SASL : chaîne terminée par le caractère null qui spécifie la cible DNS/SPN.</span><span class="sxs-lookup"><span data-stu-id="ee8db-115">SASL: Null-terminated string that specifies the DNS/SPN target.</span></span><br/>                                                         |
| <span data-ttu-id="ee8db-116">*pInput*</span><span class="sxs-lookup"><span data-stu-id="ee8db-116">*pInput*</span></span><br/>        | <span data-ttu-id="ee8db-117">Mémoires tampons qui contiennent des informations requises par le SSP Digest.</span><span class="sxs-lookup"><span data-stu-id="ee8db-117">Buffers that contain information required by the Digest SSP.</span></span> <span data-ttu-id="ee8db-118">Pour plus d’informations, consultez [mémoires tampons d’entrée pour la réponse à la demande Digest](input-buffers-for-the-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="ee8db-118">For more information, see [Input Buffers for the Digest Challenge Response](input-buffers-for-the-digest-challenge-response.md).</span></span><br/> |
| <span data-ttu-id="ee8db-119">*pfContextAttr*</span><span class="sxs-lookup"><span data-stu-id="ee8db-119">*pfContextAttr*</span></span><br/> | <span data-ttu-id="ee8db-120">Reçoit les attributs pris en charge par le contexte de sécurité retourné.</span><span class="sxs-lookup"><span data-stu-id="ee8db-120">Receives the attributes supported by the returned security context.</span></span> <span data-ttu-id="ee8db-121">Pour plus d’informations, consultez Configuration requise du contexte de la réponse de test Digest.</span><span class="sxs-lookup"><span data-stu-id="ee8db-121">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                  |
| <span data-ttu-id="ee8db-122">*pOutput*</span><span class="sxs-lookup"><span data-stu-id="ee8db-122">*pOutput*</span></span><br/>       | <span data-ttu-id="ee8db-123">Adresse d’une \_ mémoire tampon de type de jeton SECBUFFER qui reçoit un jeton de sécurité à renvoyer au serveur.</span><span class="sxs-lookup"><span data-stu-id="ee8db-123">Address of a SECBUFFER\_TOKEN type buffer that receives a security token to send back to the server.</span></span><br/>                                                                                           |



 

## <a name="digest-challenge-response-context-requirements"></a><span data-ttu-id="ee8db-124">Exigences du contexte de réponse de stimulation Digest</span><span class="sxs-lookup"><span data-stu-id="ee8db-124">Digest Challenge Response Context Requirements</span></span>

<span data-ttu-id="ee8db-125">Les spécifications de contexte sont des indicateurs qui déterminent :</span><span class="sxs-lookup"><span data-stu-id="ee8db-125">Context requirements are flags that determine:</span></span>

-   <span data-ttu-id="ee8db-126">Indique si Microsoft Digest fonctionne comme un mécanisme SASL ou un protocole d’authentification HTTP.</span><span class="sxs-lookup"><span data-stu-id="ee8db-126">Whether Microsoft Digest functions as a SASL mechanism or HTTP authentication protocol.</span></span>
-   <span data-ttu-id="ee8db-127">Qualité de protection prise en charge par le [*contexte de sécurité*](/windows/desktop/SecGloss/s-gly) partagé par le client et le serveur.</span><span class="sxs-lookup"><span data-stu-id="ee8db-127">The quality of protection supported by the [*security context*](/windows/desktop/SecGloss/s-gly) shared by the client and server.</span></span>

<span data-ttu-id="ee8db-128">Par défaut, Microsoft Digest fonctionne comme un mécanisme SASL.</span><span class="sxs-lookup"><span data-stu-id="ee8db-128">By default, Microsoft Digest functions as a SASL mechanism.</span></span>

<span data-ttu-id="ee8db-129">Les spécifications de contexte sont spécifiées sous la forme d’indicateurs passés au paramètre *fContextReq* de la fonction [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="ee8db-129">Context requirements are specified as flags passed to the *fContextReq* parameter of the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="ee8db-130">Les indicateurs affectent la qualité de protection du contexte de sécurité en contrôlant la directive QoP dans la réponse de stimulation.</span><span class="sxs-lookup"><span data-stu-id="ee8db-130">The flags affect the security context's quality of protection by controlling the qop directive in the challenge response.</span></span>

<span data-ttu-id="ee8db-131">Par défaut, la directive QoP a la valeur « auth ».</span><span class="sxs-lookup"><span data-stu-id="ee8db-131">By default, the qop directive is set to "auth".</span></span> <span data-ttu-id="ee8db-132">Pour générer une réponse de stimulation qui affecte à QoP la valeur « auth-int », les conditions suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="ee8db-132">To generate a challenge response that sets qop to "auth-int", the following must occur:</span></span>

1.  <span data-ttu-id="ee8db-133">La vérification Digest doit avoir une directive QoP définie sur « auth-int ».</span><span class="sxs-lookup"><span data-stu-id="ee8db-133">The Digest challenge must have had a qop directive set to "auth-int".</span></span>
2.  <span data-ttu-id="ee8db-134">Le client doit spécifier un ou plusieurs des indicateurs suivants :</span><span class="sxs-lookup"><span data-stu-id="ee8db-134">The client must specify one or more of the following flags:</span></span>

    -   <span data-ttu-id="ee8db-135">intégrité de la \_ demande ISC \_</span><span class="sxs-lookup"><span data-stu-id="ee8db-135">ISC\_REQ\_INTEGRITY</span></span>
    -   <span data-ttu-id="ee8db-136">\_détection de \_ relecture de la demande ISC \_</span><span class="sxs-lookup"><span data-stu-id="ee8db-136">ISC\_REQ\_REPLAY\_DETECT</span></span>
    -   <span data-ttu-id="ee8db-137">\_détection de \_ séquence de demande ISC \_</span><span class="sxs-lookup"><span data-stu-id="ee8db-137">ISC\_REQ\_SEQUENCE\_DETECT</span></span>

<span data-ttu-id="ee8db-138">Pour SASL uniquement : génère une réponse de stimulation avec la directive QoP définie sur « auth-conf » en spécifiant l' \_ indicateur de confidentialité des demandes ISC \_ .</span><span class="sxs-lookup"><span data-stu-id="ee8db-138">For SASL only: Generate a challenge response with the qop directive set to "auth-conf" by specifying the ISC\_REQ\_CONFIDENTIALITY flag.</span></span> <span data-ttu-id="ee8db-139">Comme cet indicateur n’est pas valide pour l’authentification HTTP, il ne peut pas être utilisé avec l' \_ \_ indicateur http ISC req.</span><span class="sxs-lookup"><span data-stu-id="ee8db-139">Because this flag is not valid for HTTP authentication, it cannot be used with the ISC\_REQ\_HTTP flag.</span></span>

## <a name="verifying-the-quality-of-protection"></a><span data-ttu-id="ee8db-140">Vérification de la qualité de la protection</span><span class="sxs-lookup"><span data-stu-id="ee8db-140">Verifying the Quality of Protection</span></span>

<span data-ttu-id="ee8db-141">Le client doit examiner les indicateurs d’attributs de contexte de sécurité retournés dans le paramètre *pfContextAttr* de la fonction [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="ee8db-141">The client must examine the security context attributes flags returned in the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function's *pfContextAttr* parameter.</span></span> <span data-ttu-id="ee8db-142">Le client doit envoyer la réponse de stimulation au serveur uniquement si la qualité de protection indiquée par les indicateurs est suffisante pour ses besoins.</span><span class="sxs-lookup"><span data-stu-id="ee8db-142">The client should send the challenge response to the server only if the quality of protection indicated by the flags is sufficient for its purposes.</span></span> <span data-ttu-id="ee8db-143">Les indicateurs pertinents peuvent être n’importe quelle combinaison des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="ee8db-143">The relevant flags can be any combination of the following:</span></span>

-   <span data-ttu-id="ee8db-144">intégrité d’ISC \_ RET \_</span><span class="sxs-lookup"><span data-stu-id="ee8db-144">ISC\_RET\_INTEGRITY</span></span>
-   <span data-ttu-id="ee8db-145">\_détection de \_ relecture ISC RET \_</span><span class="sxs-lookup"><span data-stu-id="ee8db-145">ISC\_RET\_REPLAY\_DETECT</span></span>
-   <span data-ttu-id="ee8db-146">détection de la \_ séquence ISC RET \_ \_</span><span class="sxs-lookup"><span data-stu-id="ee8db-146">ISC\_RET\_SEQUENCE\_DETECT</span></span>
-   <span data-ttu-id="ee8db-147">\_ \_ Confidentialité de la confidentialité d’ISC (contextes SASL uniquement)</span><span class="sxs-lookup"><span data-stu-id="ee8db-147">ISC\_RET\_CONFIDENTIALITY (SASL contexts only)</span></span>

<span data-ttu-id="ee8db-148">Pour plus d’informations sur la directive QoP, consultez [qualité de protection et chiffrements](quality-of-protection-and-ciphers.md).</span><span class="sxs-lookup"><span data-stu-id="ee8db-148">For more information about the qop directive, see [Quality of Protection and Ciphers](quality-of-protection-and-ciphers.md).</span></span>

<span data-ttu-id="ee8db-149">Pour plus d’informations sur les directives de réponse aux stimulations, consultez [le contenu d’une réponse de test Digest](contents-of-a-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="ee8db-149">For more information about challenge response directives, see [Contents of a Digest Challenge Response](contents-of-a-digest-challenge-response.md).</span></span>

 

