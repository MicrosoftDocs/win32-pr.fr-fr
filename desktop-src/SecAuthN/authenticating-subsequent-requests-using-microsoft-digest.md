---
description: Le serveur envoie au client une référence à son contexte de sécurité partagé à l’aide de la directive opaque de la stimulation Digest.
ms.assetid: 543c4bed-b224-4da7-9746-12c9993a40af
title: Authentification des demandes suivantes avec Microsoft Digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8eecccc3be68fb541994e63cdfc5035187e04aa3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103758398"
---
# <a name="authenticating-subsequent-requests-with-microsoft-digest"></a><span data-ttu-id="af80c-103">Authentification des demandes suivantes avec Microsoft Digest</span><span class="sxs-lookup"><span data-stu-id="af80c-103">Authenticating Subsequent Requests with Microsoft Digest</span></span>

<span data-ttu-id="af80c-104">Le serveur envoie au client une référence à son [*contexte de sécurité*](/windows/desktop/SecGloss/s-gly) partagé à l’aide de la directive opaque de la stimulation Digest.</span><span class="sxs-lookup"><span data-stu-id="af80c-104">The server sends the client a reference to their shared [*security context*](/windows/desktop/SecGloss/s-gly) using the opaque directive of the Digest challenge.</span></span> <span data-ttu-id="af80c-105">Après une authentification réussie, le client doit spécifier cette valeur dans les demandes suivantes adressées au serveur cible.</span><span class="sxs-lookup"><span data-stu-id="af80c-105">After a successful authentication, the client must specify this value in subsequent requests to the target server.</span></span> <span data-ttu-id="af80c-106">L’inclusion de la valeur opaque dans les demandes de ressources accessibles à l’aide du contexte de sécurité existant évite d’avoir à s’authentifier à nouveau sur le contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="af80c-106">Including the opaque value in requests for resources that are accessible using the existing security context eliminates the need to re-authenticate at the domain controller.</span></span> <span data-ttu-id="af80c-107">Ces requêtes sont ré-authentifiées sur le serveur, à l’aide de la [*clé de session*](/windows/desktop/SecGloss/s-gly) Digest mise en cache après l’authentification initiale.</span><span class="sxs-lookup"><span data-stu-id="af80c-107">Such requests are re-authenticated at the server, using the Digest [*session key*](/windows/desktop/SecGloss/s-gly) cached after the initial authentication.</span></span>

<span data-ttu-id="af80c-108">Le diagramme suivant illustre les étapes effectuées par le client et le serveur lors d’une demande ultérieure de ressources protégées par accès.</span><span class="sxs-lookup"><span data-stu-id="af80c-108">The following diagram illustrates the steps taken by client and server during a subsequent request for access-protected resources.</span></span>

![authentification des demandes ultérieures à l’aide de Microsoft Digest](images/digest2.png)

<span data-ttu-id="af80c-110">Pour demander des ressources supplémentaires après une authentification réussie, le client appelle la fonction Microsoft Digest [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) pour générer une réponse de stimulation Digest.</span><span class="sxs-lookup"><span data-stu-id="af80c-110">To request additional resources after a successful authentication, the client calls the Microsoft Digest [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) function to generate a Digest challenge response.</span></span> <span data-ttu-id="af80c-111">La valeur opaque est incluse dans la directive opaque de la réponse de stimulation envoyée au serveur sous la forme d’un en-tête d’autorisation (indiqué sous forme de requête HTTP).</span><span class="sxs-lookup"><span data-stu-id="af80c-111">The opaque value is included in the opaque directive of the challenge response sent to the server as an Authorization header (shown as HTTP Request).</span></span>

<span data-ttu-id="af80c-112">Le serveur appelle la fonction [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) pour déterminer s’il existe un [*contexte de sécurité*](/windows/desktop/SecGloss/s-gly) pour le client.</span><span class="sxs-lookup"><span data-stu-id="af80c-112">The server calls the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function to determine whether there is an existing [*security context*](/windows/desktop/SecGloss/s-gly) for the client.</span></span> <span data-ttu-id="af80c-113">Lorsqu’un contexte existant est trouvé, la fonction retourne SEC \_ E \_ Completed \_ pour indiquer que le serveur doit ensuite appeler la fonction [**CompleteAuthToken**](/windows/desktop/api/Sspi/nf-sspi-completeauthtoken) .</span><span class="sxs-lookup"><span data-stu-id="af80c-113">When an existing context is found, the function returns SEC\_E\_COMPLETE\_NEEDED to indicate the server must then call the [**CompleteAuthToken**](/windows/desktop/api/Sspi/nf-sspi-completeauthtoken) function.</span></span> <span data-ttu-id="af80c-114">Cette fonction effectue l’authentification du client à l’aide de la [*clé de session*](/windows/desktop/SecGloss/s-gly) Digest mise en cache lors de l' [authentification initiale](initial-authentication-using-microsoft-digest.md) au lieu de réauthentifier sur le contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="af80c-114">This function performs the client authentication using the Digest [*session key*](/windows/desktop/SecGloss/s-gly) cached during the [initial authentication](initial-authentication-using-microsoft-digest.md) instead of re-authenticating at the domain controller.</span></span>

 

 
