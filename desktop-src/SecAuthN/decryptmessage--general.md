---
description: Déchiffre un message.
ms.assetid: ea271d0c-9167-41c5-8919-09611206fc71
title: DecryptMessage (général), fonction (SSPI. h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: a05906c721d9046920c465fdfdf6b1c790b06640
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104201660"
---
# <a name="decryptmessage-general-function"></a><span data-ttu-id="78748-103">DecryptMessage (général) (fonction)</span><span class="sxs-lookup"><span data-stu-id="78748-103">DecryptMessage (General) function</span></span>

<span data-ttu-id="78748-104">La fonction **DecryptMessage (général)** déchiffre un message.</span><span class="sxs-lookup"><span data-stu-id="78748-104">The **DecryptMessage (General)** function decrypts a message.</span></span> <span data-ttu-id="78748-105">Certains packages ne chiffrent et ne déchiffrent pas les messages, mais effectuent et vérifient plutôt un [*hachage*](../secgloss/h-gly.md)d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="78748-105">Some packages do not encrypt and decrypt messages but rather perform and check an integrity [*hash*](../secgloss/h-gly.md).</span></span>

<span data-ttu-id="78748-106">Le fournisseur SSP ( [*Security Support Provider*](../secgloss/s-gly.md) ) de Digest fournit la confidentialité de chiffrement et de déchiffrement pour les messages échangés entre le client et le serveur en tant que mécanisme SASL uniquement.</span><span class="sxs-lookup"><span data-stu-id="78748-106">The Digest [*security support provider*](../secgloss/s-gly.md) (SSP) provides encryption and decryption confidentiality for messages exchanged between client and server as a SASL mechanism only.</span></span>

<span data-ttu-id="78748-107">Cette fonction est également utilisée avec le SSP Schannel pour signaler une demande de la part d’un expéditeur de message pour une renégociation (rétablissement) des attributs de connexion ou pour l’arrêt de la connexion.</span><span class="sxs-lookup"><span data-stu-id="78748-107">This function is also used with the Schannel SSP to signal a request from a message sender for a renegotiation (redo) of the connection attributes or for a shutdown of the connection.</span></span>

> [!Note]  
> <span data-ttu-id="78748-108">[**EncryptMessage (General)**](encryptmessage--general.md) et **DecryptMessage (General)** peuvent être appelés en même temps à partir de deux threads différents dans un contexte SSPI ( [*Security Support Provider Interface*](../secgloss/s-gly.md) ) unique si un thread est en cours de chiffrement et que l’autre déchiffre.</span><span class="sxs-lookup"><span data-stu-id="78748-108">[**EncryptMessage (General)**](encryptmessage--general.md) and **DecryptMessage (General)** can be called at the same time from two different threads in a single [*security support provider interface*](../secgloss/s-gly.md) (SSPI) context if one thread is encrypting and the other is decrypting.</span></span> <span data-ttu-id="78748-109">Si plusieurs threads chiffrent, ou si plusieurs threads déchiffrent, chaque thread doit obtenir un contexte unique.</span><span class="sxs-lookup"><span data-stu-id="78748-109">If more than one thread is encrypting, or more than one thread is decrypting, each thread should obtain a unique context.</span></span>

 

<span data-ttu-id="78748-110">Pour plus d’informations sur l’utilisation de cette fonction avec un fournisseur de services partagés spécifique, consultez les rubriques suivantes.</span><span class="sxs-lookup"><span data-stu-id="78748-110">For information about using this function with a specific SSP, see the following topics.</span></span>



| <span data-ttu-id="78748-111">Rubrique</span><span class="sxs-lookup"><span data-stu-id="78748-111">Topic</span></span>                                                            | <span data-ttu-id="78748-112">Description</span><span class="sxs-lookup"><span data-stu-id="78748-112">Description</span></span>                            |
|------------------------------------------------------------------|----------------------------------------|
| [<span data-ttu-id="78748-113">**DecryptMessage (Digest)**</span><span class="sxs-lookup"><span data-stu-id="78748-113">**DecryptMessage (Digest)**</span></span>](decryptmessage--digest.md)       | <span data-ttu-id="78748-114">Déchiffre un message à l’aide de Digest.</span><span class="sxs-lookup"><span data-stu-id="78748-114">Decrypts a message by using Digest.</span></span>    |
| [<span data-ttu-id="78748-115">**DecryptMessage (Kerberos)**</span><span class="sxs-lookup"><span data-stu-id="78748-115">**DecryptMessage (Kerberos)**</span></span>](decryptmessage--kerberos.md)   | <span data-ttu-id="78748-116">Déchiffre un message à l’aide de Kerberos.</span><span class="sxs-lookup"><span data-stu-id="78748-116">Decrypts a message by using Kerberos.</span></span>  |
| [<span data-ttu-id="78748-117">**DecryptMessage (Negotiate)**</span><span class="sxs-lookup"><span data-stu-id="78748-117">**DecryptMessage (Negotiate)**</span></span>](decryptmessage--negotiate.md) | <span data-ttu-id="78748-118">Déchiffre un message à l’aide de Negotiate.</span><span class="sxs-lookup"><span data-stu-id="78748-118">Decrypts a message by using Negotiate.</span></span> |
| [<span data-ttu-id="78748-119">**DecryptMessage (NTLM)**</span><span class="sxs-lookup"><span data-stu-id="78748-119">**DecryptMessage (NTLM)**</span></span>](decryptmessage--ntlm.md)           | <span data-ttu-id="78748-120">Déchiffre un message à l’aide de NTLM.</span><span class="sxs-lookup"><span data-stu-id="78748-120">Decrypts a message by using NTLM.</span></span>      |
| [<span data-ttu-id="78748-121">**DecryptMessage (SChannel)**</span><span class="sxs-lookup"><span data-stu-id="78748-121">**DecryptMessage (Schannel)**</span></span>](decryptmessage--schannel.md)   | <span data-ttu-id="78748-122">Déchiffre un message à l’aide de Schannel.</span><span class="sxs-lookup"><span data-stu-id="78748-122">Decrypts a message by using Schannel.</span></span>  |



 

## <a name="syntax"></a><span data-ttu-id="78748-123">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="78748-123">Syntax</span></span>


```C++
SECURITY_STATUS SEC_Entry DecryptMessage(
  _In_    PCtxtHandle    phContext,
  _Inout_ PSecBufferDesc pMessage,
  _In_    ULONG          MessageSeqNo,
  _Out_   PULONG         pfQOP
);
```



## <a name="parameters"></a><span data-ttu-id="78748-124">Paramètres</span><span class="sxs-lookup"><span data-stu-id="78748-124">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="78748-125">*phContext* \[ dans\]</span><span class="sxs-lookup"><span data-stu-id="78748-125">*phContext* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="78748-126">Handle du contexte de [*sécurité*](../secgloss/s-gly.md) à utiliser pour déchiffrer le message.</span><span class="sxs-lookup"><span data-stu-id="78748-126">A handle to the [*security context*](../secgloss/s-gly.md) to be used to decrypt the message.</span></span>

</dd> <dt>

<span data-ttu-id="78748-127">*pMessage* \[ in, out\]</span><span class="sxs-lookup"><span data-stu-id="78748-127">*pMessage* \[in, out\]</span></span>
</dt> <dd>

<span data-ttu-id="78748-128">Pointeur vers une structure [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) .</span><span class="sxs-lookup"><span data-stu-id="78748-128">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure.</span></span> <span data-ttu-id="78748-129">En entrée, la structure fait référence à une ou plusieurs structures [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) .</span><span class="sxs-lookup"><span data-stu-id="78748-129">On input, the structure references one or more [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structures.</span></span> <span data-ttu-id="78748-130">L’une d’entre elles peut être de type SECBUFFER \_ Data.</span><span class="sxs-lookup"><span data-stu-id="78748-130">One of these may be of type SECBUFFER\_DATA.</span></span> <span data-ttu-id="78748-131">Cette mémoire tampon contient le message chiffré.</span><span class="sxs-lookup"><span data-stu-id="78748-131">That buffer contains the encrypted message.</span></span> <span data-ttu-id="78748-132">Le message chiffré est déchiffré sur place, remplaçant le contenu d’origine de sa mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="78748-132">The encrypted message is decrypted in place, overwriting the original contents of its buffer.</span></span>

<span data-ttu-id="78748-133">Lors de l’utilisation du SSP Digest, en entrée, la structure fait référence à une ou plusieurs structures [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) .</span><span class="sxs-lookup"><span data-stu-id="78748-133">When using the Digest SSP, on input, the structure references one or more [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structures.</span></span> <span data-ttu-id="78748-134">L’un d’eux doit être de type SECBUFFER \_ Data ou SECBUFFER \_ Stream, et il doit contenir le message chiffré.</span><span class="sxs-lookup"><span data-stu-id="78748-134">One of these must be of type SECBUFFER\_DATA or SECBUFFER\_STREAM, and it must contain the encrypted message.</span></span>

<span data-ttu-id="78748-135">Lorsque vous utilisez le SSP Schannel avec des contextes qui ne sont pas orientés connexion, la structure doit contenir quatre structures [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) .</span><span class="sxs-lookup"><span data-stu-id="78748-135">When using the Schannel SSP with contexts that are not connection oriented, on input, the structure must contain four [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structures.</span></span> <span data-ttu-id="78748-136">Une seule mémoire tampon doit être de type SECBUFFER \_ Data et contenir un message chiffré, qui est déchiffré sur place.</span><span class="sxs-lookup"><span data-stu-id="78748-136">Exactly one buffer must be of type SECBUFFER\_DATA and contain an encrypted message, which is decrypted in place.</span></span> <span data-ttu-id="78748-137">Les mémoires tampons restantes sont utilisées pour la sortie et doivent être de type SECBUFFER \_ vide.</span><span class="sxs-lookup"><span data-stu-id="78748-137">The remaining buffers are used for output and must be of type SECBUFFER\_EMPTY.</span></span> <span data-ttu-id="78748-138">Pour les contextes orientés connexion, un \_ tampon de type de données SECBUFFER doit être fourni, comme indiqué pour les contextes non orientés connexion.</span><span class="sxs-lookup"><span data-stu-id="78748-138">For connection-oriented contexts, a SECBUFFER\_DATA type buffer must be supplied, as noted for nonconnection-oriented contexts.</span></span> <span data-ttu-id="78748-139">En outre, un deuxième tampon de type de jeton SECBUFFER contenant \_ un jeton de sécurité doit également être fourni.</span><span class="sxs-lookup"><span data-stu-id="78748-139">Additionally, a second SECBUFFER\_TOKEN type buffer that contains a security token must also be supplied.</span></span>

</dd> <dt>

<span data-ttu-id="78748-140">*MessageSeqNo* \[ dans\]</span><span class="sxs-lookup"><span data-stu-id="78748-140">*MessageSeqNo* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="78748-141">Numéro de séquence attendu par l’application de transport, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="78748-141">The sequence number expected by the transport application, if any.</span></span> <span data-ttu-id="78748-142">Si l’application de transport ne conserve pas les numéros séquentiels, ce paramètre doit avoir la valeur zéro.</span><span class="sxs-lookup"><span data-stu-id="78748-142">If the transport application does not maintain sequence numbers, this parameter must be set to zero.</span></span>

<span data-ttu-id="78748-143">Lorsque vous utilisez le SSP Digest, ce paramètre doit avoir la valeur zéro.</span><span class="sxs-lookup"><span data-stu-id="78748-143">When using the Digest SSP, this parameter must be set to zero.</span></span> <span data-ttu-id="78748-144">Le SSP Digest gère la numérotation des séquences en interne.</span><span class="sxs-lookup"><span data-stu-id="78748-144">The Digest SSP manages sequence numbering internally.</span></span>

<span data-ttu-id="78748-145">Lorsque vous utilisez le SSP Schannel, ce paramètre doit avoir la valeur zéro.</span><span class="sxs-lookup"><span data-stu-id="78748-145">When using the Schannel SSP, this parameter must be set to zero.</span></span> <span data-ttu-id="78748-146">Le SSP Schannel n’utilise pas de numéros de séquence.</span><span class="sxs-lookup"><span data-stu-id="78748-146">The Schannel SSP does not use sequence numbers.</span></span>

</dd> <dt>

<span data-ttu-id="78748-147">*pfQOP* \[ à\]</span><span class="sxs-lookup"><span data-stu-id="78748-147">*pfQOP* \[out\]</span></span>
</dt> <dd>

<span data-ttu-id="78748-148">Pointeur vers une variable de type **ULong** qui reçoit des indicateurs spécifiques au package qui indiquent la qualité de la protection.</span><span class="sxs-lookup"><span data-stu-id="78748-148">A pointer to a variable of type **ULONG** that receives package-specific flags that indicate the quality of protection.</span></span>

<span data-ttu-id="78748-149">Lorsque vous utilisez le SSP Schannel, ce paramètre n’est pas utilisé et doit avoir la valeur **null**.</span><span class="sxs-lookup"><span data-stu-id="78748-149">When using the Schannel SSP, this parameter is not used and should be set to **NULL**.</span></span>

<span data-ttu-id="78748-150">Ce paramètre peut être l’un des indicateurs suivants.</span><span class="sxs-lookup"><span data-stu-id="78748-150">This parameter can be one of the following flags.</span></span>



<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><thead><tr class="header"><th><span data-ttu-id="78748-151">Valeur</span><span class="sxs-lookup"><span data-stu-id="78748-151">Value</span></span></th><th><span data-ttu-id="78748-152">Signification</span><span class="sxs-lookup"><span data-stu-id="78748-152">Meaning</span></span></th></tr></thead><tbody><tr class="odd"><td><span id="SECQOP_WRAP_NO_ENCRYPT"></span><span id="secqop_wrap_no_encrypt"></span><dl> <span data-ttu-id="78748-153"><dt><strong>SECQOP_WRAP_NO_ENCRYPT</strong></dt> </span><span class="sxs-lookup"><span data-stu-id="78748-153"><dt><strong>SECQOP_WRAP_NO_ENCRYPT</strong></dt> </span></span></dl></td><td><span data-ttu-id="78748-154">Le message n’a pas été chiffré, mais un en-tête ou un code de fin a été créé.</span><span class="sxs-lookup"><span data-stu-id="78748-154">The message was not encrypted, but a header or trailer was produced.</span></span><br/><blockquote>[!Note]<br />
<span data-ttu-id="78748-155">KERB_WRAP_NO_ENCRYPT a la même valeur et la même signification.</span><span class="sxs-lookup"><span data-stu-id="78748-155">KERB_WRAP_NO_ENCRYPT has the same value and the same meaning.</span></span></blockquote><br/></td></tr><tr class="even"><td><span id="SIGN_ONLY_"></span><span id="sign_only_"></span><dl> <span data-ttu-id="78748-156"><dt><strong>SIGN_ONLY</strong></dt> </span><span class="sxs-lookup"><span data-stu-id="78748-156"><dt><strong>SIGN_ONLY</strong> </dt> </span></span></dl></td><td><span data-ttu-id="78748-157">Lorsque vous utilisez le SSP Digest, utilisez cet indicateur lorsque le [*contexte de sécurité*](../secgloss/s-gly.md) est défini pour vérifier la [*signature*](../secgloss/s-gly.md) uniquement.</span><span class="sxs-lookup"><span data-stu-id="78748-157">When using the Digest SSP, use this flag when the [*security context*](../secgloss/s-gly.md) is set to verify the [*signature*](../secgloss/s-gly.md) only.</span></span> <span data-ttu-id="78748-158">Pour plus d’informations, consultez [Quality of protection](quality-of-protection.md).</span><span class="sxs-lookup"><span data-stu-id="78748-158">For more information, see [Quality of Protection](quality-of-protection.md).</span></span><br/></td></tr></tbody></table>



 

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="78748-159">Valeur retournée</span><span class="sxs-lookup"><span data-stu-id="78748-159">Return value</span></span>

<span data-ttu-id="78748-160">Si la fonction vérifie que le message a été reçu dans l’ordre correct, la fonction retourne SEC \_ E \_ OK.</span><span class="sxs-lookup"><span data-stu-id="78748-160">If the function verifies that the message was received in the correct sequence, the function returns SEC\_E\_OK.</span></span>

<span data-ttu-id="78748-161">Si la fonction ne parvient pas à déchiffrer le message, elle retourne l’un des codes d’erreur suivants.</span><span class="sxs-lookup"><span data-stu-id="78748-161">If the function fails to decrypt the message, it returns one of the following error codes.</span></span>



| <span data-ttu-id="78748-162">Code de retour</span><span class="sxs-lookup"><span data-stu-id="78748-162">Return code</span></span>                                                                                                    | <span data-ttu-id="78748-163">Description</span><span class="sxs-lookup"><span data-stu-id="78748-163">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|----------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <span data-ttu-id="78748-164"><dt>**\_tampon s \_ E \_ trop \_ petit**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-164"><dt>**SEC\_E\_BUFFER\_TOO\_SMALL**</dt></span></span> </dl>      | <span data-ttu-id="78748-165">La mémoire tampon des messages est trop petite.</span><span class="sxs-lookup"><span data-stu-id="78748-165">The message buffer is too small.</span></span> <span data-ttu-id="78748-166">Utilisé avec le SSP Digest.</span><span class="sxs-lookup"><span data-stu-id="78748-166">Used with the Digest SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <dl> <span data-ttu-id="78748-167"><dt>**SEC \_ E \_ système de chiffrement \_ \_ non valide**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-167"><dt>**SEC\_E\_CRYPTO\_SYSTEM\_INVALID**</dt></span></span> </dl> | <span data-ttu-id="78748-168">Le [*chiffrement*](../secgloss/c-gly.md) choisi pour le [*contexte de sécurité*](../secgloss/s-gly.md) n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="78748-168">The [*cipher*](../secgloss/c-gly.md) chosen for the [*security context*](../secgloss/s-gly.md) is not supported.</span></span> <span data-ttu-id="78748-169">Utilisé avec le SSP Digest.</span><span class="sxs-lookup"><span data-stu-id="78748-169">Used with the Digest SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <dl> <span data-ttu-id="78748-170"><dt>**s \_ E \_ message incomplet \_**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-170"><dt>**SEC\_E\_INCOMPLETE\_MESSAGE**</dt></span></span> </dl>     | <span data-ttu-id="78748-171">Les données de la mémoire tampon d’entrée sont incomplètes.</span><span class="sxs-lookup"><span data-stu-id="78748-171">The data in the input buffer is incomplete.</span></span> <span data-ttu-id="78748-172">L’application doit lire plus de données à partir du serveur et appeler [**DecryptMessage (général)**](decryptmessage--general.md) .</span><span class="sxs-lookup"><span data-stu-id="78748-172">The application needs to read more data from the server and call [**DecryptMessage (General)**](decryptmessage--general.md) again.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <dl> <span data-ttu-id="78748-173"><dt>**SEC \_ E \_ handle non valide \_**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-173"><dt>**SEC\_E\_INVALID\_HANDLE**</dt></span></span> </dl>         | <span data-ttu-id="78748-174">Un descripteur de contexte non valide a été spécifié dans le paramètre *phContext* .</span><span class="sxs-lookup"><span data-stu-id="78748-174">A context handle that is not valid was specified in the *phContext* parameter.</span></span> <span data-ttu-id="78748-175">Utilisé avec les SSP condensé et Schannel.</span><span class="sxs-lookup"><span data-stu-id="78748-175">Used with the Digest and Schannel SSPs.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <dl> <span data-ttu-id="78748-176"><dt>**s \_ E \_ jeton non valide \_**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-176"><dt>**SEC\_E\_INVALID\_TOKEN**</dt></span></span> </dl>          | <span data-ttu-id="78748-177">Les mémoires tampons sont de type incorrect ou aucune mémoire tampon de type SECBUFFER \_ Data n’a été trouvée.</span><span class="sxs-lookup"><span data-stu-id="78748-177">The buffers are of the wrong type or no buffer of type SECBUFFER\_DATA was found.</span></span> <span data-ttu-id="78748-178">Utilisé avec le SSP Schannel.</span><span class="sxs-lookup"><span data-stu-id="78748-178">Used with the Schannel SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <dl> <span data-ttu-id="78748-179"><dt>**s \_ \_ message électronique \_ modifié**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-179"><dt>**SEC\_E\_MESSAGE\_ALTERED**</dt></span></span> </dl>        | <span data-ttu-id="78748-180">Le message a été modifié.</span><span class="sxs-lookup"><span data-stu-id="78748-180">The message has been altered.</span></span> <span data-ttu-id="78748-181">Utilisé avec les SSP condensé et Schannel.</span><span class="sxs-lookup"><span data-stu-id="78748-181">Used with the Digest and Schannel SSPs.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <dl> <span data-ttu-id="78748-182"><dt>**SEC \_ E \_ hors \_ \_ séquence**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-182"><dt>**SEC\_E\_OUT\_OF\_SEQUENCE**</dt></span></span> </dl>       | <span data-ttu-id="78748-183">Le message n’a pas été reçu dans l’ordre correct.</span><span class="sxs-lookup"><span data-stu-id="78748-183">The message was not received in the correct sequence.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <dl> <span data-ttu-id="78748-184"><dt>**SEC \_ E \_ QoP \_ non \_ pris en charge**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-184"><dt>**SEC\_E\_QOP\_NOT\_SUPPORTED**</dt></span></span> </dl>     | <span data-ttu-id="78748-185">La confidentialité et l' [*intégrité*](../secgloss/i-gly.md) ne sont pas prises en charge par le [*contexte de sécurité*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="78748-185">Neither confidentiality nor [*integrity*](../secgloss/i-gly.md) are supported by the [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="78748-186">Utilisé avec le SSP Digest.</span><span class="sxs-lookup"><span data-stu-id="78748-186">Used with the Digest SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <dl> <span data-ttu-id="78748-187"><dt>**le \_ contexte sec I \_ \_ a expiré**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-187"><dt>**SEC\_I\_CONTEXT\_EXPIRED**</dt></span></span> </dl>        | <span data-ttu-id="78748-188">L’expéditeur du message a fini d’utiliser la connexion et a lancé un arrêt.</span><span class="sxs-lookup"><span data-stu-id="78748-188">The message sender has finished using the connection and has initiated a shutdown.</span></span> <span data-ttu-id="78748-189">Pour plus d’informations sur l’initialisation ou la reconnaissance d’un arrêt, consultez [arrêt d’une connexion Schannel](shutting-down-an-schannel-connection.md).</span><span class="sxs-lookup"><span data-stu-id="78748-189">For information about initiating or recognizing a shutdown, see [Shutting Down an Schannel Connection](shutting-down-an-schannel-connection.md).</span></span> <span data-ttu-id="78748-190">Utilisé avec le SSP Schannel.</span><span class="sxs-lookup"><span data-stu-id="78748-190">Used with the Schannel SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <dl> <span data-ttu-id="78748-191"><dt>**s \_ je \_ renégocie**</dt></span><span class="sxs-lookup"><span data-stu-id="78748-191"><dt>**SEC\_I\_RENEGOTIATE**</dt></span></span> </dl>             | <span data-ttu-id="78748-192">Le tiers distant requiert une nouvelle séquence de négociation ou l’application vient d’initier un arrêt.</span><span class="sxs-lookup"><span data-stu-id="78748-192">The remote party requires a new handshake sequence or the application has just initiated a shutdown.</span></span> <span data-ttu-id="78748-193">Revenez à la boucle de négociation et appelez [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) ou [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md), en passant des mémoires tampons d’entrée vides.</span><span class="sxs-lookup"><span data-stu-id="78748-193">Return to the negotiation loop and call [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) or [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md), passing empty input buffers.</span></span> <br/> <span data-ttu-id="78748-194">Si la fonction retourne une mémoire tampon de type **sec \_ buffer \_ extra**, elle doit être transmise à la fonction [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) comme une mémoire tampon d’entrée.</span><span class="sxs-lookup"><span data-stu-id="78748-194">If the function returns a buffer of type **SEC\_BUFFER\_EXTRA**, this should be passed to the [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) function as an input buffer.</span></span><br/> <span data-ttu-id="78748-195">Utilisé avec le SSP Schannel.</span><span class="sxs-lookup"><span data-stu-id="78748-195">Used with the Schannel SSP.</span></span><br/> <span data-ttu-id="78748-196">La renégociation n’est pas prise en charge pour le mode noyau Schannel.</span><span class="sxs-lookup"><span data-stu-id="78748-196">Renegotiation is not supported for Schannel kernel mode.</span></span> <span data-ttu-id="78748-197">L’appelant doit soit ignorer cette valeur de retour, soit arrêter la connexion.</span><span class="sxs-lookup"><span data-stu-id="78748-197">The caller should either ignore this return value or shut down the connection.</span></span> <span data-ttu-id="78748-198">Si la valeur est ignorée, le client ou le serveur peut arrêter la connexion en conséquence.</span><span class="sxs-lookup"><span data-stu-id="78748-198">If the value is ignored, either the client or the server might shut down the connection as a result.</span></span><br/> |



 

## <a name="remarks"></a><span data-ttu-id="78748-199">Notes</span><span class="sxs-lookup"><span data-stu-id="78748-199">Remarks</span></span>

<span data-ttu-id="78748-200">Lorsque vous utilisez le SSP Schannel, la fonction **DecryptMessage (General)** retourne le \_ contexte sec I \_ \_ expiré lorsque l’expéditeur du message a arrêté la connexion.</span><span class="sxs-lookup"><span data-stu-id="78748-200">When you use the Schannel SSP, the **DecryptMessage (General)** function returns SEC\_I\_CONTEXT\_EXPIRED when the message sender has shut down the connection.</span></span> <span data-ttu-id="78748-201">Pour plus d’informations sur l’initialisation ou la reconnaissance d’un arrêt, consultez [arrêt d’une connexion Schannel](shutting-down-an-schannel-connection.md).</span><span class="sxs-lookup"><span data-stu-id="78748-201">For information about initiating or recognizing a shutdown, see [Shutting Down an Schannel Connection](shutting-down-an-schannel-connection.md).</span></span>

<span data-ttu-id="78748-202">Lorsque vous utilisez le SSP Schannel, **DecryptMessage (General)** retourne sec \_ I \_ renégociée lorsque l’expéditeur du message souhaite renégocier la connexion ([*contexte de sécurité*](../secgloss/s-gly.md)).</span><span class="sxs-lookup"><span data-stu-id="78748-202">When you use the Schannel SSP, **DecryptMessage (General)** returns SEC\_I\_RENEGOTIATE when the message sender wants to renegotiate the connection ([*security context*](../secgloss/s-gly.md)).</span></span> <span data-ttu-id="78748-203">Une application gère une renégociation demandée en appelant [**AcceptSecurityContext (général)**](acceptsecuritycontext--general.md) (côté serveur) ou [**InitializeSecurityContext (général)**](initializesecuritycontext--general.md) (côté client) et en passant dans des mémoires tampons d’entrée vides.</span><span class="sxs-lookup"><span data-stu-id="78748-203">An application handles a requested renegotiation by calling [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) (server side) or [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) (client side) and passing in empty input buffers.</span></span> <span data-ttu-id="78748-204">Après que cet appel initial a retourné une valeur, procédez comme si votre application était en train de créer une nouvelle connexion.</span><span class="sxs-lookup"><span data-stu-id="78748-204">After this initial call returns a value, proceed as though your application were creating a new connection.</span></span> <span data-ttu-id="78748-205">Pour plus d’informations, consultez [création d’un [*contexte de sécurité*](../secgloss/s-gly.md)Schannel](creating-an-schannel-security-context.md).</span><span class="sxs-lookup"><span data-stu-id="78748-205">For more information, see [Creating an Schannel [*security context*](../secgloss/s-gly.md)](creating-an-schannel-security-context.md).</span></span>

<span data-ttu-id="78748-206">Pour plus d’informations sur l’interopérabilité avec GSSAPI, consultez [interopérabilité SSPI/Kerberos avec GSSAPI](sspi-kerberos-interoperability-with-gssapi.md).</span><span class="sxs-lookup"><span data-stu-id="78748-206">For information about interoperating with GSSAPI, see [SSPI/Kerberos Interoperability with GSSAPI](sspi-kerberos-interoperability-with-gssapi.md).</span></span>

## <a name="requirements"></a><span data-ttu-id="78748-207">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="78748-207">Requirements</span></span>



| <span data-ttu-id="78748-208">Condition requise</span><span class="sxs-lookup"><span data-stu-id="78748-208">Requirement</span></span> | <span data-ttu-id="78748-209">Valeur</span><span class="sxs-lookup"><span data-stu-id="78748-209">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="78748-210">Client minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="78748-210">Minimum supported client</span></span><br/> | <span data-ttu-id="78748-211">Applications de \[ Bureau Windows XP uniquement\]</span><span class="sxs-lookup"><span data-stu-id="78748-211">Windows XP \[desktop apps only\]</span></span><br/>                                                            |
| <span data-ttu-id="78748-212">Serveur minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="78748-212">Minimum supported server</span></span><br/> | <span data-ttu-id="78748-213">Applications de bureau Windows Server 2003 \[ uniquement\]</span><span class="sxs-lookup"><span data-stu-id="78748-213">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                                   |
| <span data-ttu-id="78748-214">En-tête</span><span class="sxs-lookup"><span data-stu-id="78748-214">Header</span></span><br/>                   | <dl> <span data-ttu-id="78748-215"><dt>SSPI. h (include Security. h)</dt></span><span class="sxs-lookup"><span data-stu-id="78748-215"><dt>Sspi.h (include Security.h)</dt></span></span> </dl> |
| <span data-ttu-id="78748-216">Bibliothèque</span><span class="sxs-lookup"><span data-stu-id="78748-216">Library</span></span><br/>                  | <dl> <span data-ttu-id="78748-217"><dt>Secur32. lib</dt></span><span class="sxs-lookup"><span data-stu-id="78748-217"><dt>Secur32.lib</dt></span></span> </dl>                 |
| <span data-ttu-id="78748-218">DLL</span><span class="sxs-lookup"><span data-stu-id="78748-218">DLL</span></span><br/>                      | <dl> <span data-ttu-id="78748-219"><dt>Secur32.dll</dt></span><span class="sxs-lookup"><span data-stu-id="78748-219"><dt>Secur32.dll</dt></span></span> </dl>                 |



## <a name="see-also"></a><span data-ttu-id="78748-220">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="78748-220">See also</span></span>

<dl> <dt>

[<span data-ttu-id="78748-221">Fonctions SSPI</span><span class="sxs-lookup"><span data-stu-id="78748-221">SSPI Functions</span></span>](authentication-functions.md#sspi-functions)
</dt> <dt>

[<span data-ttu-id="78748-222">**EncryptMessage (général)**</span><span class="sxs-lookup"><span data-stu-id="78748-222">**EncryptMessage (General)**</span></span>](encryptmessage--general.md)
</dt> <dt>

[<span data-ttu-id="78748-223">**SecBuffer**</span><span class="sxs-lookup"><span data-stu-id="78748-223">**SecBuffer**</span></span>](/windows/win32/api/sspi/ns-sspi-secbuffer)
</dt> <dt>

[<span data-ttu-id="78748-224">**SecBufferDesc**</span><span class="sxs-lookup"><span data-stu-id="78748-224">**SecBufferDesc**</span></span>](/windows/win32/api/sspi/ns-sspi-secbufferdesc)
</dt> </dl>

 

 
