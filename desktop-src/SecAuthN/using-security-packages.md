---
description: Répertorie les packages de sécurité qui peuvent être utilisés avec l’interface SSPI.
ms.assetid: f5999d41-b334-49be-8883-d9b9042d20dc
title: Utilisation de packages de sécurité
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df24bba0f910ba74a633e8a43f961cee4fb505db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106533669"
---
# <a name="using-security-packages"></a><span data-ttu-id="99f00-103">Utilisation de packages de sécurité</span><span class="sxs-lookup"><span data-stu-id="99f00-103">Using Security Packages</span></span>

<span data-ttu-id="99f00-104">L' [*interface SSPI (Security Support Provider Interface*](../secgloss/s-gly.md) ) peut être utilisée avec les [*packages de sécurité*](../secgloss/s-gly.md)suivants :</span><span class="sxs-lookup"><span data-stu-id="99f00-104">The [*Security Support Provider Interface*](../secgloss/s-gly.md) (SSPI) can be used with the following [*security packages*](../secgloss/s-gly.md):</span></span>

-   [<span data-ttu-id="99f00-105">Package de sécurité Kerberos</span><span class="sxs-lookup"><span data-stu-id="99f00-105">Kerberos Security Package</span></span>](#kerberos-security-package)
-   [<span data-ttu-id="99f00-106">Package de sécurité NTLM</span><span class="sxs-lookup"><span data-stu-id="99f00-106">NTLM Security Package</span></span>](#ntlm-security-package)

<span data-ttu-id="99f00-107">Les protocoles [*Kerberos*](../secgloss/k-gly.md) et NTLM sont implémentés en tant que packages de sécurité à partir du fournisseur SSP ( [*Security support Provider*](../secgloss/s-gly.md) ) Secur32.dll fourni avec le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="99f00-107">The [*Kerberos*](../secgloss/k-gly.md) and NTLM protocols are implemented as security packages from the Secur32.dll [*security support provider*](../secgloss/s-gly.md) (SSP) supplied with the operating system.</span></span> <span data-ttu-id="99f00-108">Par défaut, la prise en charge de l’authentification Kerberos et NTLM est chargée par l' [*autorité de sécurité locale*](../secgloss/l-gly.md) (LSA) sur un ordinateur au démarrage du système.</span><span class="sxs-lookup"><span data-stu-id="99f00-108">By default, support for both Kerberos and NTLM authentication are loaded by the [*local security authority*](../secgloss/l-gly.md) (LSA) on a computer when the system starts.</span></span> <span data-ttu-id="99f00-109">Dans les domaines Windows Server ou Windows, les deux packages peuvent être utilisés pour authentifier les ouvertures de session réseau et les connexions client/serveur.</span><span class="sxs-lookup"><span data-stu-id="99f00-109">In Windows Server or Windows domains, either package can be used to authenticate network logons and client/server connections.</span></span> <span data-ttu-id="99f00-110">Celui qui est utilisé dépend des capacités de l’ordinateur de l’autre côté de la connexion.</span><span class="sxs-lookup"><span data-stu-id="99f00-110">Which one is used depends on the capabilities of the computer on the other side of the connection.</span></span> <span data-ttu-id="99f00-111">Le protocole Kerberos est toujours préféré, s’il est disponible.</span><span class="sxs-lookup"><span data-stu-id="99f00-111">The Kerberos protocol is always preferred, if available.</span></span>

<span data-ttu-id="99f00-112">Après l’établissement d’un contexte de sécurité pour un utilisateur interactif, une autre instance du package Kerberos ou NTLM peut être chargée par un processus s’exécutant dans le contexte de sécurité de l’utilisateur afin de prendre en charge l’échange, la signature, la vérification, le chiffrement et le déchiffrement des messages.</span><span class="sxs-lookup"><span data-stu-id="99f00-112">After a security context for an interactive user has been established, another instance of the Kerberos or NTLM package can be loaded by a process running in the security context of the user to support the exchanging, signing, verifying, encrypting, and decrypting of messages.</span></span> <span data-ttu-id="99f00-113">Toutefois, aucun processus autre que l’autorité LSA n’est autorisé à accéder aux [*clés de session*](../secgloss/s-gly.md) ou aux tickets dans le cache des informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="99f00-113">However, no process other than the LSA is ever permitted access to [*session keys*](../secgloss/s-gly.md) or tickets in the credentials cache.</span></span>

<span data-ttu-id="99f00-114">Les services système et les applications de niveau transport accèdent à un fournisseur SSP via SSPI, qui fournit des fonctions pour énumérer les packages de sécurité disponibles sur un système, sélectionner un package et utiliser ce package pour obtenir une connexion authentifiée.</span><span class="sxs-lookup"><span data-stu-id="99f00-114">System services and transport-level applications access an SSP through SSPI, which provides functions for enumerating the security packages available on a system, selecting a package, and using that package to obtain an authenticated connection.</span></span>

<span data-ttu-id="99f00-115">Les méthodes dans SSPI sont des routines génériques que les développeurs peuvent utiliser sans connaître les détails d’un [*protocole de sécurité*](../secgloss/s-gly.md)particulier.</span><span class="sxs-lookup"><span data-stu-id="99f00-115">The methods in SSPI are generic routines that developers can use without knowing the details of a particular [*security protocol*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="99f00-116">Par exemple, lorsqu’une connexion client/serveur est authentifiée :</span><span class="sxs-lookup"><span data-stu-id="99f00-116">For example, when a client/server connection is authenticated:</span></span>

1.  <span data-ttu-id="99f00-117">L’application côté client de la connexion envoie les [*informations d’identification*](../secgloss/c-gly.md) au serveur à l’aide de la fonction SSPI [**InitializeSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).</span><span class="sxs-lookup"><span data-stu-id="99f00-117">The application on the client side of the connection sends [*credentials*](../secgloss/c-gly.md) to the server using the SSPI function [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).</span></span>
2.  <span data-ttu-id="99f00-118">L’application côté serveur de la connexion répond avec la fonction SSPI [**AcceptSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span><span class="sxs-lookup"><span data-stu-id="99f00-118">The application on the server side of the connection responds with the SSPI function [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span>
3.  <span data-ttu-id="99f00-119">Une fois la connexion authentifiée, le LSA sur le serveur utilise les informations du client pour créer un [*jeton d’accès*](../secgloss/a-gly.md).</span><span class="sxs-lookup"><span data-stu-id="99f00-119">After the connection has been authenticated, the LSA on the server uses information from the client to build an [*access token*](../secgloss/a-gly.md).</span></span>
4.  <span data-ttu-id="99f00-120">Le serveur peut ensuite appeler la fonction SSPI [**ImpersonateSecurityContext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) pour attacher le jeton d’accès à un thread d’emprunt d’identité pour le service.</span><span class="sxs-lookup"><span data-stu-id="99f00-120">The server can then call the SSPI function [**ImpersonateSecurityContext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) to attach the access token to an impersonation thread for the service.</span></span>

## <a name="kerberos-security-package"></a><span data-ttu-id="99f00-121">Package de sécurité Kerberos</span><span class="sxs-lookup"><span data-stu-id="99f00-121">Kerberos Security Package</span></span>

<span data-ttu-id="99f00-122">Le [*package de sécurité*](../secgloss/s-gly.md) Kerberos est basé sur le [*protocole d’authentification Kerberos*](../secgloss/k-gly.md).</span><span class="sxs-lookup"><span data-stu-id="99f00-122">The Kerberos [*security package*](../secgloss/s-gly.md) is based on the [*Kerberos authentication protocol*](../secgloss/k-gly.md).</span></span>

<span data-ttu-id="99f00-123">Si le protocole Kerberos est utilisé pour authentifier une connexion client/serveur, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) génère un message GSSAPI qui comprend un \_ \_ message de demande d’AP AP du client.</span><span class="sxs-lookup"><span data-stu-id="99f00-123">If the Kerberos protocol is being used to authenticate a client/server connection, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) generates a GSSAPI message that includes a KRB\_AP\_REQ message from the client.</span></span> <span data-ttu-id="99f00-124">[**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) génère ensuite un message GSSAPI qui comprend un \_ \_ message de rep. AP du serveur.</span><span class="sxs-lookup"><span data-stu-id="99f00-124">[**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) then generates a GSSAPI message that includes a KRB\_AP\_REP message from the server.</span></span>

<span data-ttu-id="99f00-125">Pour obtenir des informations générales sur les étapes qui se produisent en arrière-plan dans l’implémentation d’un protocole Kerberos, consultez [Microsoft Kerberos](microsoft-kerberos.md).</span><span class="sxs-lookup"><span data-stu-id="99f00-125">For background information on the steps that take place behind the scenes in the implementation of a Kerberos protocol, see [Microsoft Kerberos](microsoft-kerberos.md).</span></span>

<span data-ttu-id="99f00-126">Tous les services distribués utilisent SSPI pour accéder au protocole Kerberos.</span><span class="sxs-lookup"><span data-stu-id="99f00-126">All distributed services use SSPI to access the Kerberos protocol.</span></span> <span data-ttu-id="99f00-127">Une liste partielle de la façon dont le protocole Kerberos est utilisé pour l’authentification comprend les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="99f00-127">A partial list of the ways in which the Kerberos protocol is used for authentication includes:</span></span>

-   <span data-ttu-id="99f00-128">Services spouleur d’impression</span><span class="sxs-lookup"><span data-stu-id="99f00-128">Print spooler services</span></span>
-   <span data-ttu-id="99f00-129">Accès aux fichiers à distance CIFS/SMB</span><span class="sxs-lookup"><span data-stu-id="99f00-129">CIFS/SMB remote file access</span></span>
-   <span data-ttu-id="99f00-130">Requêtes [*LDAP*](../secgloss/l-gly.md) adressées au Active Directory</span><span class="sxs-lookup"><span data-stu-id="99f00-130">[*LDAP*](../secgloss/l-gly.md) queries to the Active Directory</span></span>
-   <span data-ttu-id="99f00-131">Gestion et références du système de fichiers DFS</span><span class="sxs-lookup"><span data-stu-id="99f00-131">Distributed file system management and referrals</span></span>
-   <span data-ttu-id="99f00-132">Authentification de l’autorité de sécurité d’hôte à hôte IPsec</span><span class="sxs-lookup"><span data-stu-id="99f00-132">IPsec host-to-host security authority authentication</span></span>
-   <span data-ttu-id="99f00-133">Demandes de réservation pour la qualité de service du réseau</span><span class="sxs-lookup"><span data-stu-id="99f00-133">Reservation requests for network Quality of Service</span></span>
-   <span data-ttu-id="99f00-134">Authentification intranet à Internet Information Services</span><span class="sxs-lookup"><span data-stu-id="99f00-134">Intranet authentication to Internet Information Services</span></span>
-   <span data-ttu-id="99f00-135">Gestion de serveur distant ou de station de travail à l’aide d’un RPC authentifié</span><span class="sxs-lookup"><span data-stu-id="99f00-135">Remote server or workstation management using authenticated RPC</span></span>
-   <span data-ttu-id="99f00-136">[*Demandes de certificat*](../secgloss/c-gly.md) aux services de certificats pour les utilisateurs et les ordinateurs de domaine</span><span class="sxs-lookup"><span data-stu-id="99f00-136">[*Certificate requests*](../secgloss/c-gly.md) to Certificate Services for domain users and computers</span></span>

## <a name="ntlm-security-package"></a><span data-ttu-id="99f00-137">Package de sécurité NTLM</span><span class="sxs-lookup"><span data-stu-id="99f00-137">NTLM Security Package</span></span>

<span data-ttu-id="99f00-138">Le package de sécurité NTLM est basé sur le protocole d’authentification NTLM.</span><span class="sxs-lookup"><span data-stu-id="99f00-138">The NTLM security package is based on the NTLM authentication protocol.</span></span>

 

 
