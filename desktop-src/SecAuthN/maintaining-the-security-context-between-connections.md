---
description: Pour réduire le trafic des contrôleurs de domaine et améliorer les performances, le côté client de Microsoft Digest met en cache les informations reçues après une authentification réussie avec un serveur.
ms.assetid: cd928266-889a-494c-a94b-4ea7b1dcc241
title: Maintien du contexte de sécurité entre les connexions
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aeb450dde789f17f46397cb56fe74b94adcf8ea6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104319834"
---
# <a name="maintaining-the-security-context-between-connections"></a><span data-ttu-id="8ab28-103">Maintien du contexte de sécurité entre les connexions</span><span class="sxs-lookup"><span data-stu-id="8ab28-103">Maintaining the Security Context Between Connections</span></span>

<span data-ttu-id="8ab28-104">Pour réduire le trafic des contrôleurs de domaine et améliorer les performances, le côté client de Microsoft Digest met en cache les informations reçues après une authentification réussie avec un serveur.</span><span class="sxs-lookup"><span data-stu-id="8ab28-104">To reduce domain controller traffic and improve performance, the client-side of Microsoft Digest caches information received after successful authentication with a server.</span></span> <span data-ttu-id="8ab28-105">Les applications clientes doivent uniquement mettre en cache le handle du [*contexte de sécurité*](../secgloss/s-gly.md) qui a été établi.</span><span class="sxs-lookup"><span data-stu-id="8ab28-105">Client applications need only cache the handle to the [*security context*](../secgloss/s-gly.md) that has been established.</span></span> <span data-ttu-id="8ab28-106">Le tableau suivant décrit les informations mises en cache par le package de sécurité.</span><span class="sxs-lookup"><span data-stu-id="8ab28-106">The following table describes information cached by the security package.</span></span>



| <span data-ttu-id="8ab28-107">Information</span><span class="sxs-lookup"><span data-stu-id="8ab28-107">Information</span></span>                                                       | <span data-ttu-id="8ab28-108">Description</span><span class="sxs-lookup"><span data-stu-id="8ab28-108">Description</span></span>                                                                                                                                         |
|-------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8ab28-109">Nom du serveur</span><span class="sxs-lookup"><span data-stu-id="8ab28-109">Server name</span></span>                                                       | <span data-ttu-id="8ab28-110">Serveur qui a créé avec succès un contexte de sécurité pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8ab28-110">The server that has successfully created a security context for the user.</span></span>                                                                           |
| <span data-ttu-id="8ab28-111">Domaine/domaine</span><span class="sxs-lookup"><span data-stu-id="8ab28-111">Realm/Domain</span></span>                                                      | <span data-ttu-id="8ab28-112">Nom de domaine utilisé dans l’authentification réussie.</span><span class="sxs-lookup"><span data-stu-id="8ab28-112">The domain name used in the successful authentication.</span></span>                                                                                              |
| [<span data-ttu-id="8ab28-113">*Unique*</span><span class="sxs-lookup"><span data-stu-id="8ab28-113">*Nonce*</span></span>](../secgloss/n-gly.md) | <span data-ttu-id="8ab28-114">Une valeur à usage unique de serveur associée à la réussite de l’authentification.</span><span class="sxs-lookup"><span data-stu-id="8ab28-114">A server nonce that is associated with the successful authentication.</span></span>                                                                               |
| <span data-ttu-id="8ab28-115">Nombre de nonce</span><span class="sxs-lookup"><span data-stu-id="8ab28-115">Nonce count</span></span>                                                       | <span data-ttu-id="8ab28-116">Nombre de fois où le client a inclus la valeur à usage unique dans les demandes adressées au serveur.</span><span class="sxs-lookup"><span data-stu-id="8ab28-116">The number of times the client has included the nonce in requests to the server.</span></span> <span data-ttu-id="8ab28-117">Utilisé pour la détection de relecture.</span><span class="sxs-lookup"><span data-stu-id="8ab28-117">This is used for replay-detection.</span></span>                                 |
| <span data-ttu-id="8ab28-118">Valeur opaque</span><span class="sxs-lookup"><span data-stu-id="8ab28-118">Opaque value</span></span>                                                      | <span data-ttu-id="8ab28-119">Valeur retournée pour la directive opaque après une authentification réussie.</span><span class="sxs-lookup"><span data-stu-id="8ab28-119">The value returned for the opaque directive after a successful authentication.</span></span> <span data-ttu-id="8ab28-120">Cette valeur contient une référence au contexte de sécurité de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8ab28-120">This value contains a reference to the security context of the user.</span></span> |



 

<span data-ttu-id="8ab28-121">Lorsqu’un client envoie un message à un serveur, le serveur doit déterminer si le client dispose d’un contexte de sécurité existant.</span><span class="sxs-lookup"><span data-stu-id="8ab28-121">When a client sends a message to a server, the server must determine whether the client has an existing security context.</span></span> <span data-ttu-id="8ab28-122">Pour ce faire, le serveur passe chaque demande du client à la fonction [**AcceptSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="8ab28-122">To do this, the server passes each client request to the [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="8ab28-123">Cette fonction extrait la valeur de la directive opaque de la demande, le cas échéant, et l’utilise pour rechercher le contexte de sécurité du client.</span><span class="sxs-lookup"><span data-stu-id="8ab28-123">This function extracts the value of the opaque directive from the request, if present, and uses it to look up the client's security context.</span></span> <span data-ttu-id="8ab28-124">Si le contexte de sécurité est trouvé, le handle du contexte est retourné au serveur.</span><span class="sxs-lookup"><span data-stu-id="8ab28-124">If the security context is found, the handle of the context is returned to the server.</span></span> <span data-ttu-id="8ab28-125">Pour obtenir des informations connexes, consultez [authentification des demandes suivantes](authenticating-subsequent-requests-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="8ab28-125">For related information, see [Authenticating Subsequent Requests](authenticating-subsequent-requests-using-microsoft-digest.md).</span></span>

<span data-ttu-id="8ab28-126">Pour détecter les attaques d’usurpation et de relecture, le client appelle la fonction [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) qui utilise un contexte de sécurité pour signer un message.</span><span class="sxs-lookup"><span data-stu-id="8ab28-126">As a means of detecting spoofing and replay attacks, the client calls the [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) function which uses a security context to sign a message.</span></span> <span data-ttu-id="8ab28-127">Lorsque les messages sont protégés à l’aide de la fonction **MakeSignature** , le serveur utilise la fonction [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) avec le contexte mis en cache pour vérifier l’origine et l' [*intégrité*](../secgloss/i-gly.md)du message.</span><span class="sxs-lookup"><span data-stu-id="8ab28-127">When messages are protected using the **MakeSignature** function, the server uses the [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) function with the cached context to verify the message's origin and [*integrity*](../secgloss/i-gly.md).</span></span> <span data-ttu-id="8ab28-128">Pour plus d’informations, consultez [protection des messages](protecting-messages-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="8ab28-128">For more information, see [Protecting Messages](protecting-messages-using-microsoft-digest.md).</span></span>

 

 
