---
description: Au lieu d’envoyer les clés de session chiffrées aux deux principaux, le KDC envoie les copies du client et du serveur de la clé de session au client.
ms.assetid: 6b20ab30-2cd9-4f2e-a26b-316980c4bc78
title: Tickets de session
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 762223311dd71f8bded5e021372d3a281f711eda
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106519882"
---
# <a name="session-tickets"></a><span data-ttu-id="7adae-103">Tickets de session</span><span class="sxs-lookup"><span data-stu-id="7adae-103">Session Tickets</span></span>

<span data-ttu-id="7adae-104">Au lieu d’envoyer les clés de session chiffrées aux deux principaux, le [KDC](key-distribution-center.md) envoie les copies du client et du serveur de la [*clé de session*](../secgloss/s-gly.md) au client.</span><span class="sxs-lookup"><span data-stu-id="7adae-104">Instead of sending the encrypted session keys to both of the principals, the [KDC](key-distribution-center.md) sends both the client's and the server's copies of the [*session key*](../secgloss/s-gly.md) to the client.</span></span> <span data-ttu-id="7adae-105">La copie du client de la clé de session est chiffrée avec la [*clé principale*](../secgloss/m-gly.md) du client et ne peut donc pas être déchiffrée par une autre entité.</span><span class="sxs-lookup"><span data-stu-id="7adae-105">The client's copy of the session key is encrypted with the client's [*master key*](../secgloss/m-gly.md) and therefore cannot be decrypted by any other entity.</span></span> <span data-ttu-id="7adae-106">La copie du serveur de la clé de session est incorporée, ainsi que les données d’autorisation relatives au client, dans une structure de données appelée ticket.</span><span class="sxs-lookup"><span data-stu-id="7adae-106">The server's copy of the session key is embedded, along with authorization data about the client, in a data structure called a ticket.</span></span> <span data-ttu-id="7adae-107">Le ticket est entièrement chiffré avec la clé principale du serveur et, par conséquent, il ne peut pas être lu ou modifié par le client ou toute autre entité qui n’a pas accès à la clé principale du serveur.</span><span class="sxs-lookup"><span data-stu-id="7adae-107">The ticket is entirely encrypted with the server's master key and therefore cannot be read or changed by the client or any other entity that does not have access to the server's master key.</span></span> <span data-ttu-id="7adae-108">Il incombe au client de stocker le ticket en toute sécurité jusqu’à ce qu’il contacte le serveur.</span><span class="sxs-lookup"><span data-stu-id="7adae-108">It is the responsibility of the client to store the ticket safely until contact with the server.</span></span>

> [!Note]  
> <span data-ttu-id="7adae-109">Le centre de distribution de clés fournit uniquement un service d’accord de tickets.</span><span class="sxs-lookup"><span data-stu-id="7adae-109">The KDC only provides a ticket-granting service.</span></span> <span data-ttu-id="7adae-110">Le client et le serveur sont responsables du maintien de la sécurité de leurs clés principales respectives.</span><span class="sxs-lookup"><span data-stu-id="7adae-110">The client and server are responsible for keeping their respective master keys secure.</span></span>

 

<span data-ttu-id="7adae-111">Lorsque le client reçoit la réponse du KDC, il extrait le ticket et sa propre copie de la clé de session, en les plaçant dans un cache sécurisé.</span><span class="sxs-lookup"><span data-stu-id="7adae-111">When the client receives the KDC's response, it extracts the ticket and its own copy of the session key, putting both aside in a secure cache.</span></span> <span data-ttu-id="7adae-112">Pour établir une session sécurisée avec le serveur, il envoie au serveur un message contenant le ticket, toujours chiffré avec la clé principale du serveur et un message d' [authentificateur](authenticator-messages.md) chiffré avec la clé de session.</span><span class="sxs-lookup"><span data-stu-id="7adae-112">To establish a secure session with the server, it sends the server a message consisting of the ticket, still encrypted with the server's master key, and an [authenticator message](authenticator-messages.md) encrypted with the session key.</span></span> <span data-ttu-id="7adae-113">Ensemble, le ticket et le message de l’authentificateur sont les [*informations d’identification*](../secgloss/c-gly.md) du client pour le serveur.</span><span class="sxs-lookup"><span data-stu-id="7adae-113">Together, the ticket and authenticator message are the client's [*credentials*](../secgloss/c-gly.md) to the server.</span></span>

<span data-ttu-id="7adae-114">Lorsque le serveur reçoit les informations d’identification d’un client, il déchiffre le ticket avec sa [*clé principale*](../secgloss/m-gly.md), extrait la [*clé de session*](../secgloss/s-gly.md)et utilise la clé de session pour déchiffrer le message de l’authentificateur du client.</span><span class="sxs-lookup"><span data-stu-id="7adae-114">When the server receives credentials from a client, it decrypts the ticket with its [*master key*](../secgloss/m-gly.md), extracts the [*session key*](../secgloss/s-gly.md), and uses the session key to decrypt the client's authenticator message.</span></span> <span data-ttu-id="7adae-115">Si tout est vérifié, le serveur sait que les informations d’identification du client ont été émises par le KDC, une autorité approuvée.</span><span class="sxs-lookup"><span data-stu-id="7adae-115">If everything checks out, the server knows that the client's credentials were issued by the KDC, a trusted authority.</span></span> <span data-ttu-id="7adae-116">Pour l’authentification mutuelle, le serveur répond en chiffrant l’horodatage à partir du message de l’authentificateur du client à l’aide de la clé de session.</span><span class="sxs-lookup"><span data-stu-id="7adae-116">For mutual authentication, the server responds by encrypting the time stamp from the client's authenticator message using the session key.</span></span> <span data-ttu-id="7adae-117">Ce message chiffré est envoyé au client.</span><span class="sxs-lookup"><span data-stu-id="7adae-117">This encrypted message is sent to the client.</span></span> <span data-ttu-id="7adae-118">Le client déchiffre ensuite le message.</span><span class="sxs-lookup"><span data-stu-id="7adae-118">The client then decrypts the message.</span></span> <span data-ttu-id="7adae-119">Si le message retourné est le même que l’horodatage dans le message de l’authentificateur d’origine, le serveur est authentifié.</span><span class="sxs-lookup"><span data-stu-id="7adae-119">If the returned message is the same as the time stamp in the original authenticator message, the server is authenticated.</span></span>

<span data-ttu-id="7adae-120">En guise d’avantage supplémentaire, le serveur n’a pas besoin de stocker les clés de session qu’il utilise avec ses clients.</span><span class="sxs-lookup"><span data-stu-id="7adae-120">As an added benefit, the server does not need to store the session keys it uses with its clients.</span></span> <span data-ttu-id="7adae-121">Chaque client est chargé de gérer le ticket pour le serveur dans son cache de tickets et de présenter ce ticket chaque fois qu’il accède au serveur.</span><span class="sxs-lookup"><span data-stu-id="7adae-121">It is each client's responsibility to manage the ticket for the server in its ticket cache and to present that ticket each time it accesses the server.</span></span> <span data-ttu-id="7adae-122">Chaque fois que le serveur reçoit un ticket d’un client, il utilise sa clé principale pour déchiffrer le ticket et extraire la clé de session.</span><span class="sxs-lookup"><span data-stu-id="7adae-122">Whenever the server receives a ticket from a client, it uses its master key to decrypt the ticket and extract the session key.</span></span> <span data-ttu-id="7adae-123">Lorsque le serveur n’a plus besoin de la clé de session, la clé est supprimée.</span><span class="sxs-lookup"><span data-stu-id="7adae-123">When the server no longer needs the session key, the key is deleted.</span></span>

<span data-ttu-id="7adae-124">Le client n’a pas besoin d’accéder au centre de données à chaque fois qu’il souhaite accéder à ce serveur.</span><span class="sxs-lookup"><span data-stu-id="7adae-124">The client does not need to access the KDC each time it wants access to this particular server.</span></span> <span data-ttu-id="7adae-125">Les tickets peuvent être réutilisés.</span><span class="sxs-lookup"><span data-stu-id="7adae-125">Tickets can be reused.</span></span> <span data-ttu-id="7adae-126">En guise de précaution contre le risque de vol de tickets, les tickets ont un délai d’expiration spécifié par le KDC dans la structure de ticket.</span><span class="sxs-lookup"><span data-stu-id="7adae-126">As a precaution against the possibility of ticket theft, tickets have an expiration time, specified by the KDC in the ticket structure.</span></span> <span data-ttu-id="7adae-127">La durée de validité d’un ticket dépend de la stratégie Kerberos pour le domaine.</span><span class="sxs-lookup"><span data-stu-id="7adae-127">How long a ticket is valid depends on Kerberos policy for the realm.</span></span> <span data-ttu-id="7adae-128">En règle générale, les tickets sont valables pendant plus de huit heures, à savoir la durée d’une [*session de connexion*](../secgloss/l-gly.md)normale.</span><span class="sxs-lookup"><span data-stu-id="7adae-128">Typically, tickets are good for no longer than eight hours, about the length of a normal [*logon session*](../secgloss/l-gly.md).</span></span> <span data-ttu-id="7adae-129">Lorsque l’utilisateur d’une station de travail cliente se déconnecte, le cache du ticket client est vidé et tous les tickets et les clés de session client sont détruits.</span><span class="sxs-lookup"><span data-stu-id="7adae-129">When the user at a client workstation logs off, the client ticket cache is flushed and all tickets and client session keys are destroyed.</span></span>

 

 
