---
description: Comme pour le client, le serveur acquiert également un handle d’informations d’identification pour être prêt à répondre à une demande d’authentification entrante à partir du client.
ms.assetid: 2a0aeadf-e099-4264-8522-e498f437bf75
title: Initialisation du contexte de serveur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1362c8fd71e079392f10a8e35f76ad511de3c49f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103756417"
---
# <a name="server-context-initialization"></a><span data-ttu-id="fc44c-103">Initialisation du contexte de serveur</span><span class="sxs-lookup"><span data-stu-id="fc44c-103">Server Context Initialization</span></span>

<span data-ttu-id="fc44c-104">Comme pour le client, le serveur acquiert également un handle [*d’informations d’identification*](../secgloss/c-gly.md) pour être prêt à répondre à une demande d’authentification entrante à partir du client.</span><span class="sxs-lookup"><span data-stu-id="fc44c-104">Like the client, the server also acquires a [*credentials*](../secgloss/c-gly.md) handle to be ready to respond to an incoming authentication request from the client.</span></span> <span data-ttu-id="fc44c-105">Les informations d’identification du serveur sont utilisées pour authentifier le serveur auprès du client dans les [*protocoles de sécurité*](../secgloss/s-gly.md) qui prennent en charge l’authentification du serveur ou l’authentification mutuelle.</span><span class="sxs-lookup"><span data-stu-id="fc44c-105">Server credentials are used to authenticate the server to the client in [*security protocols*](../secgloss/s-gly.md) that support server authentication or mutual authentication.</span></span> <span data-ttu-id="fc44c-106">Le serveur obtient un descripteur des informations d’identification définies par le compte de service utilisé pour démarrer le serveur.</span><span class="sxs-lookup"><span data-stu-id="fc44c-106">The server obtains a handle to its credentials defined by the service account used to start the server.</span></span> <span data-ttu-id="fc44c-107">Pour ce faire, il appelle [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span><span class="sxs-lookup"><span data-stu-id="fc44c-107">It does so by calling [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span></span>

<span data-ttu-id="fc44c-108">Le serveur peut acquérir son handle d’informations d’identification, puis passer à un état d’écoute, ou il peut attendre dans un état d’écoute jusqu’à ce qu’une demande de connexion arrive, puis acquérir un handle d’informations d’identification entrantes.</span><span class="sxs-lookup"><span data-stu-id="fc44c-108">The server can acquire its credentials handle and then go into a listen state, or it can wait in a listen state until a connection request arrives and then acquire an inbound credentials handle.</span></span> <span data-ttu-id="fc44c-109">Pour plus d’informations sur les fonctions d’informations d’identification, consultez [gestion des informations d’identification](authentication-functions.md).</span><span class="sxs-lookup"><span data-stu-id="fc44c-109">For more information on credentials functions, see [Credential Management](authentication-functions.md).</span></span>

<span data-ttu-id="fc44c-110">Lorsque le serveur reçoit un message de demande de connexion d’un client, il crée un [*contexte de sécurité*](../secgloss/s-gly.md) local pour le client à l’aide de [**AcceptSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span><span class="sxs-lookup"><span data-stu-id="fc44c-110">When the server receives a connection request message from a client, it creates a local [*security context*](../secgloss/s-gly.md) for the client using [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span> <span data-ttu-id="fc44c-111">Le serveur utilise ce contexte de sécurité local pour exécuter les demandes ultérieures par le même client.</span><span class="sxs-lookup"><span data-stu-id="fc44c-111">The server uses this local security context to carry out future requests by the same client.</span></span> <span data-ttu-id="fc44c-112">Pour plus d’informations sur les fonctions de contexte, consultez [gestion du contexte](authentication-functions.md).</span><span class="sxs-lookup"><span data-stu-id="fc44c-112">For more information on context functions, see [Context Management](authentication-functions.md).</span></span>

<span data-ttu-id="fc44c-113">Le serveur vérifie le descripteur d’état de retour et de mémoire tampon de sortie pour s’assurer qu’il n’y a pas d’erreurs jusqu’à présent et peut rejeter la demande de connexion s’il y a des erreurs.</span><span class="sxs-lookup"><span data-stu-id="fc44c-113">The server checks the return status and output buffer descriptor to ensure there are no errors so far, and can reject the connection request if there are errors.</span></span> <span data-ttu-id="fc44c-114">Si la mémoire tampon de sortie est retournée par [**AcceptSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), cette mémoire tampon est regroupée dans un message de réponse au client.</span><span class="sxs-lookup"><span data-stu-id="fc44c-114">If there is information in the output buffer returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), it bundles that buffer into a response message to the client.</span></span>

<span data-ttu-id="fc44c-115">Toute mémoire tampon de sortie provenant de [**AcceptSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) doit être renvoyée au client.</span><span class="sxs-lookup"><span data-stu-id="fc44c-115">Any output buffer from [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) must be sent back to the client.</span></span> <span data-ttu-id="fc44c-116">En outre, si l’état de retour nécessite que le protocole se poursuive (SEC \_ i continue required \_ \_ ou s \_ i \_ Completed \_ and \_ continue), un autre échange de messages avec le client est requis.</span><span class="sxs-lookup"><span data-stu-id="fc44c-116">In addition, if the return status requires the protocol to continue (SEC\_I\_CONTINUE\_NEEDED or SEC\_I\_COMPLETE\_AND\_CONTINUE), another message exchange with the client is required.</span></span>

<span data-ttu-id="fc44c-117">Pour les jambes supplémentaires, le serveur attend que le client réponde avec un autre message.</span><span class="sxs-lookup"><span data-stu-id="fc44c-117">For additional legs, the server waits for the client to respond with another message.</span></span> <span data-ttu-id="fc44c-118">Cette attente peut être dépassée afin d’éviter une attaque par déni de service dans laquelle un client ne répond jamais intentionnellement, provoquant un thread de serveur et, de temps en temps, tous les threads de serveur, pour ne plus répondre.</span><span class="sxs-lookup"><span data-stu-id="fc44c-118">This wait can be timed out so as to avoid a denial of service attack where a client purposely never responds, causing a server thread and soon, all server threads, to stop responding.</span></span>

 

 
