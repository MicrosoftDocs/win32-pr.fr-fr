---
description: Les spécifications de contexte sont exprimées sous la forme d’une combinaison de bits indicateurs transmise à la fonction InitializeSecurityContext (General) ou AcceptSecurityContext (General).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Exigences de contexte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104203375"
---
# <a name="context-requirements"></a><span data-ttu-id="4cc30-103">Exigences de contexte</span><span class="sxs-lookup"><span data-stu-id="4cc30-103">Context Requirements</span></span>

<span data-ttu-id="4cc30-104">Les spécifications de contexte sont exprimées sous la forme d’une combinaison de bits indicateurs transmise à la fonction [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="4cc30-104">Context requirements are expressed as a combination of bit flags passed to either the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="4cc30-105">Ces indicateurs affectent le [*contexte*](/windows/desktop/SecGloss/c-gly) de plusieurs façons.</span><span class="sxs-lookup"><span data-stu-id="4cc30-105">These flags affect the [*context*](/windows/desktop/SecGloss/c-gly) in a number of ways.</span></span> <span data-ttu-id="4cc30-106">Tous les indicateurs ne s’appliquent pas à tous les contextes.</span><span class="sxs-lookup"><span data-stu-id="4cc30-106">Not all flags apply to all contexts.</span></span> <span data-ttu-id="4cc30-107">Certains ne sont valides que pour le serveur, d’autres uniquement pour le client.</span><span class="sxs-lookup"><span data-stu-id="4cc30-107">Some are valid only for the server, others only for the client.</span></span>

<span data-ttu-id="4cc30-108">L’appelant utilise le paramètre *fContextReq* de l’appel [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) pour spécifier un jeu d’indicateurs qui indiquent les fonctionnalités requises.</span><span class="sxs-lookup"><span data-stu-id="4cc30-108">The caller uses the *fContextReq* parameter of the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) call to specify a set of flags that indicate the required capabilities.</span></span> <span data-ttu-id="4cc30-109">Quand la fonction retourne une valeur, le paramètre *pfContextAttr* indique les attributs du contexte établi.</span><span class="sxs-lookup"><span data-stu-id="4cc30-109">When the function returns, the *pfContextAttr* parameter indicates the attributes of the established context.</span></span> <span data-ttu-id="4cc30-110">L’appelant détermine si les attributs de contexte finaux sont acceptables.</span><span class="sxs-lookup"><span data-stu-id="4cc30-110">The caller determines whether the final context attributes are acceptable.</span></span>

<span data-ttu-id="4cc30-111">Les indicateurs demandés à partir de ou retournés par [**InitializeSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) sont préfixés par ISC.</span><span class="sxs-lookup"><span data-stu-id="4cc30-111">Flags requested from or returned by [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) are prefixed by ISC.</span></span> <span data-ttu-id="4cc30-112">Les requêtes demandées à partir de ou retournées par [**AcceptSecurityContext (général)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) sont précédées de ASC.</span><span class="sxs-lookup"><span data-stu-id="4cc30-112">Those requested from or returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) are prefixed by ASC.</span></span> <span data-ttu-id="4cc30-113">Les indicateurs passés dans une fonction incluent REQ, tandis que les indicateurs retournés incluent RET.</span><span class="sxs-lookup"><span data-stu-id="4cc30-113">Flags passed into a function include REQ, while returned flags include RET.</span></span> <span data-ttu-id="4cc30-114">Par exemple, un indicateur de demande pour l’authentification mutuelle transmise à **InitializeSecurityContext (général)** est l’authentification mutuelle d’ISC \_ req \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="4cc30-114">For example, a request flag for mutual authentication passed to **InitializeSecurityContext (General)** is ISC\_REQ\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="4cc30-115">Un serveur demandant l’authentification mutuelle passe l’authentification \_ mutuelle de la demande ASC \_ \_ à **AcceptSecurityContext (général)**.</span><span class="sxs-lookup"><span data-stu-id="4cc30-115">A server requesting mutual authentication passes ASC\_REQ\_MUTUAL\_AUTH to **AcceptSecurityContext (General)**.</span></span> <span data-ttu-id="4cc30-116">Si l’authentification mutuelle est effectuée, **InitializeSecurityContext (General)** renvoie ISC \_ RET \_ Mutual \_ auth et **AcceptSecurityContext (General)** retourne ASC \_ RET \_ Mutual \_ auth.</span><span class="sxs-lookup"><span data-stu-id="4cc30-116">If mutual authentication is achieved, **InitializeSecurityContext (General)** returns ISC\_RET\_MUTUAL\_AUTH and **AcceptSecurityContext (General)** returns ASC\_RET\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="4cc30-117">Si l’appelant demande l’authentification mutuelle, mais que le [*package de sécurité*](/windows/desktop/SecGloss/s-gly) indique qu’il ne peut pas être exécuté, l’appelant doit décider s’il faut annuler le contexte ou continuer.</span><span class="sxs-lookup"><span data-stu-id="4cc30-117">If the caller requests mutual authentication, but the [*security package*](/windows/desktop/SecGloss/s-gly) indicates that it cannot be performed, the caller must decide whether to cancel the context or continue.</span></span>

<span data-ttu-id="4cc30-118">Le tableau suivant décrit les différents indicateurs d’exigence de contexte.</span><span class="sxs-lookup"><span data-stu-id="4cc30-118">The following table describes the various context requirement flags.</span></span>



| <span data-ttu-id="4cc30-119">Indicateur</span><span class="sxs-lookup"><span data-stu-id="4cc30-119">Flag</span></span>                             | <span data-ttu-id="4cc30-120">Description</span><span class="sxs-lookup"><span data-stu-id="4cc30-120">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4cc30-121">DISPOSER</span><span class="sxs-lookup"><span data-stu-id="4cc30-121">DELEGATE</span></span><br/>              | <span data-ttu-id="4cc30-122">Le serveur de l’application de transport peut créer de nouveaux contextes de sécurité en usurpant l’identité du client qui sera accepté par d’autres serveurs comme contextes du client.</span><span class="sxs-lookup"><span data-stu-id="4cc30-122">The server in the transport application can build new security contexts impersonating the client that will be accepted by other servers as the client's contexts.</span></span> <span data-ttu-id="4cc30-123">Le délégué fonctionne uniquement si l' \_ authentification mutuelle est définie.</span><span class="sxs-lookup"><span data-stu-id="4cc30-123">Delegate works only if MUTUAL\_AUTH is set.</span></span> <span data-ttu-id="4cc30-124">Le délégué est actuellement pris en charge uniquement par [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span><span class="sxs-lookup"><span data-stu-id="4cc30-124">DELEGATE is currently supported only by [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span></span> <span data-ttu-id="4cc30-125">En outre, Kerberos délègue uniquement à un serveur dont l’indicateur est approuvé \_ pour la \_ délégation.</span><span class="sxs-lookup"><span data-stu-id="4cc30-125">Further, Kerberos will delegate only to a server that has the flag TRUSTED\_FOR\_DELEGATION.</span></span> <span data-ttu-id="4cc30-126">N’utilisez pas cet indicateur pour la [*délégation avec restriction*](/windows/desktop/SecGloss/c-gly).</span><span class="sxs-lookup"><span data-stu-id="4cc30-126">Do not use this flag for [*constrained delegation*](/windows/desktop/SecGloss/c-gly).</span></span><br/> |
| <span data-ttu-id="4cc30-127">\_authentification mutuelle</span><span class="sxs-lookup"><span data-stu-id="4cc30-127">MUTUAL\_AUTH</span></span><br/>          | <span data-ttu-id="4cc30-128">Les parties communicantes doivent authentifier leurs identités les unes sur les autres.</span><span class="sxs-lookup"><span data-stu-id="4cc30-128">The communicating parties must authenticate their identities to each other.</span></span> <span data-ttu-id="4cc30-129">Sans \_ authentification mutuelle, le client authentifie son identité auprès du serveur.</span><span class="sxs-lookup"><span data-stu-id="4cc30-129">Without MUTUAL\_AUTH, the client authenticates its identity to the server.</span></span> <span data-ttu-id="4cc30-130">Avec \_ l’authentification mutuelle, le serveur doit également authentifier son identité auprès du client.</span><span class="sxs-lookup"><span data-stu-id="4cc30-130">With MUTUAL\_AUTH, the server also must authenticate its identity to the client.</span></span><br/> <span data-ttu-id="4cc30-131">Lorsque vous utilisez le package de sécurité [*Schannel*](/windows/desktop/SecGloss/s-gly) , le serveur définit la constante d' **\_ \_ \_ authentification mutuelle ASC RET** uniquement dans le dernier appel à [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), une fois que le mappage de certificat s’est terminé avec succès.</span><span class="sxs-lookup"><span data-stu-id="4cc30-131">When using the [*Schannel*](/windows/desktop/SecGloss/s-gly) security package, the server sets the **ASC\_RET\_MUTUAL\_AUTH** constant only in the last call to [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), after certificate mapping has successfully completed.</span></span><br/>           |
| <span data-ttu-id="4cc30-132">détecter la relecture \_</span><span class="sxs-lookup"><span data-stu-id="4cc30-132">REPLAY\_DETECT</span></span><br/>        | <span data-ttu-id="4cc30-133">Le [*package de sécurité*](/windows/desktop/SecGloss/s-gly) détecte les paquets relus et avertit l’appelant si un paquet a été relu.</span><span class="sxs-lookup"><span data-stu-id="4cc30-133">The [*security package*](/windows/desktop/SecGloss/s-gly) detects replayed packets and notifies the caller if a packet has been replayed.</span></span> <span data-ttu-id="4cc30-134">L’utilisation de cet indicateur implique toutes les conditions spécifiées par l’indicateur d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="4cc30-134">The use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="4cc30-135">détection de séquence \_</span><span class="sxs-lookup"><span data-stu-id="4cc30-135">SEQUENCE\_DETECT</span></span><br/>      | <span data-ttu-id="4cc30-136">Le contexte doit être autorisé à détecter les paquets non remis dans le désordre ultérieurement par le biais des fonctions de prise en charge des messages.</span><span class="sxs-lookup"><span data-stu-id="4cc30-136">The context must be allowed to detect out-of-order delivery of packets later through the message support functions.</span></span> <span data-ttu-id="4cc30-137">L’utilisation de cet indicateur implique toutes les conditions spécifiées par l’indicateur d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="4cc30-137">Use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="4cc30-138">MEILLEURE</span><span class="sxs-lookup"><span data-stu-id="4cc30-138">CONFIDENTIALITY</span></span><br/>       | <span data-ttu-id="4cc30-139">Le contexte peut protéger les données en transit à l’aide des fonctions [**EncryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) et [**DecryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) .</span><span class="sxs-lookup"><span data-stu-id="4cc30-139">The context can protect data while in transit using the [**EncryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) and [**DecryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) functions.</span></span> <span data-ttu-id="4cc30-140">L’indicateur de confidentialité ne fonctionne pas si le contexte généré est destiné au compte invité.</span><span class="sxs-lookup"><span data-stu-id="4cc30-140">The CONFIDENTIALITY flag does not work if the generated context is for the Guest account.</span></span><br/>                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="4cc30-141">UTILISER \_ la \_ clé de session</span><span class="sxs-lookup"><span data-stu-id="4cc30-141">USE\_SESSION\_KEY</span></span><br/>     | <span data-ttu-id="4cc30-142">Une nouvelle [*clé de session*](/windows/desktop/SecGloss/s-gly) doit être négociée.</span><span class="sxs-lookup"><span data-stu-id="4cc30-142">A new [*session key*](/windows/desktop/SecGloss/s-gly) must be negotiated.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="4cc30-143">DEMANDER \_ des \_ références</span><span class="sxs-lookup"><span data-stu-id="4cc30-143">PROMPT\_FOR\_CREDS</span></span><br/>    | <span data-ttu-id="4cc30-144">Si le client est un utilisateur interactif, le package de sécurité doit, si possible, demander à l’utilisateur les [*informations d’identification*](/windows/desktop/SecGloss/c-gly)appropriées.</span><span class="sxs-lookup"><span data-stu-id="4cc30-144">If the client is an interactive user, the security package must, if possible, prompt the user for the appropriate [*credentials*](/windows/desktop/SecGloss/c-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="4cc30-145">UTILISER \_ les \_ CREDS fournis</span><span class="sxs-lookup"><span data-stu-id="4cc30-145">USE\_SUPPLIED\_CREDS</span></span><br/>  | <span data-ttu-id="4cc30-146">Les informations d’identification spécifiques au package sont disponibles dans la mémoire tampon d’entrée.</span><span class="sxs-lookup"><span data-stu-id="4cc30-146">Package-specific credential information is available in the input buffer.</span></span> <span data-ttu-id="4cc30-147">Le package de sécurité peut utiliser ces [*informations d’identification*](/windows/desktop/SecGloss/c-gly) pour authentifier la connexion.</span><span class="sxs-lookup"><span data-stu-id="4cc30-147">The security package can use these [*credentials*](/windows/desktop/SecGloss/c-gly) to authenticate the connection.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="4cc30-148">Enregistrer \_ les \_ CREDS fournis</span><span class="sxs-lookup"><span data-stu-id="4cc30-148">SAVE\_SUPPLIED\_CREDS</span></span><br/> | <span data-ttu-id="4cc30-149">Les informations d’identification fournies doivent être mises en cache avec les informations d’identification supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="4cc30-149">The supplied credentials should be cached with the supplemental credentials.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="4cc30-150">allouer de la \_ mémoire</span><span class="sxs-lookup"><span data-stu-id="4cc30-150">ALLOCATE\_MEMORY</span></span><br/>      | <span data-ttu-id="4cc30-151">Le [*package de sécurité*](/windows/desktop/SecGloss/s-gly) doit allouer de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="4cc30-151">The [*security package*](/windows/desktop/SecGloss/s-gly) must allocate memory.</span></span> <span data-ttu-id="4cc30-152">L’appelant doit finalement appeler la fonction [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) pour libérer de la mémoire allouée par le package de sécurité.</span><span class="sxs-lookup"><span data-stu-id="4cc30-152">The caller must eventually call the [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) function to free memory allocated by the security package.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="4cc30-153">UTILISER \_ le \_ style DCE</span><span class="sxs-lookup"><span data-stu-id="4cc30-153">USE\_DCE\_STYLE</span></span><br/>       | <span data-ttu-id="4cc30-154">L’appelant attend une [*transaction*](/windows/desktop/SecGloss/t-gly)d’authentification en trois jambes.</span><span class="sxs-lookup"><span data-stu-id="4cc30-154">The caller expects a three-leg authentication [*transaction*](/windows/desktop/SecGloss/t-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="4cc30-155">REÇUS</span><span class="sxs-lookup"><span data-stu-id="4cc30-155">DATAGRAM</span></span><br/>              | <span data-ttu-id="4cc30-156">La sémantique de [*datagramme*](/windows/desktop/SecGloss/d-gly) doit être utilisée.</span><span class="sxs-lookup"><span data-stu-id="4cc30-156">[*Datagram*](/windows/desktop/SecGloss/d-gly) semantics must be used.</span></span> <span data-ttu-id="4cc30-157">Pour plus d’informations, consultez [contextes de datagramme](datagram-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="4cc30-157">For more information, see [Datagram Contexts](datagram-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="4cc30-158">CONNECTION</span><span class="sxs-lookup"><span data-stu-id="4cc30-158">CONNECTION</span></span><br/>            | <span data-ttu-id="4cc30-159">La sémantique de connexion doit être utilisée.</span><span class="sxs-lookup"><span data-stu-id="4cc30-159">Connection semantics must be used.</span></span> <span data-ttu-id="4cc30-160">Pour plus d’informations, consultez [contextes orientés connexion](connection-oriented-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="4cc30-160">For more information, see [Connection-Oriented Contexts](connection-oriented-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="4cc30-161">Flux</span><span class="sxs-lookup"><span data-stu-id="4cc30-161">STREAM</span></span><br/>                | <span data-ttu-id="4cc30-162">La sémantique du flux doit être utilisée.</span><span class="sxs-lookup"><span data-stu-id="4cc30-162">Stream semantics must be used.</span></span> <span data-ttu-id="4cc30-163">Pour plus d’informations, consultez [contextes de flux](stream-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="4cc30-163">For more information, see [Stream Contexts](stream-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="4cc30-164">\_erreur étendue</span><span class="sxs-lookup"><span data-stu-id="4cc30-164">EXTENDED\_ERROR</span></span><br/>       | <span data-ttu-id="4cc30-165">Les messages de réponse d’erreur pour l’homologue doivent être générés en cas d’échec du contexte.</span><span class="sxs-lookup"><span data-stu-id="4cc30-165">Error reply messages for the peer must be generated if the context fails.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="4cc30-166">GARANTIS</span><span class="sxs-lookup"><span data-stu-id="4cc30-166">INTEGRITY</span></span><br/>             | <span data-ttu-id="4cc30-167">L’intégrité de la mémoire tampon peut être vérifiée, mais aucune détection de séquencement ou de réponse n’est activée.</span><span class="sxs-lookup"><span data-stu-id="4cc30-167">Buffer integrity can be verified but no sequencing or reply detection is enabled.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="4cc30-168">AUCUNE \_ intégrité</span><span class="sxs-lookup"><span data-stu-id="4cc30-168">NO\_INTEGRITY</span></span><br/>         | <span data-ttu-id="4cc30-169">L’exigence d' **intégrité** est ignorée.</span><span class="sxs-lookup"><span data-stu-id="4cc30-169">The **INTEGRITY** requirement is ignored.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="4cc30-170">REPÉRER</span><span class="sxs-lookup"><span data-stu-id="4cc30-170">IDENTIFY</span></span><br/>              | <span data-ttu-id="4cc30-171">Lorsqu’un serveur emprunte l’identité d’un contexte pour lequel cet indicateur est défini, cet emprunt d’identité produit un accès extrêmement limité.</span><span class="sxs-lookup"><span data-stu-id="4cc30-171">When a server impersonates a context that has this flag set, that impersonation yields extremely limited access.</span></span> <span data-ttu-id="4cc30-172">L’emprunt d’identité avec l’identification définie est utilisé pour vérifier l’identité du client.</span><span class="sxs-lookup"><span data-stu-id="4cc30-172">Impersonation with IDENTIFY set is used to verify the client's identity.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

