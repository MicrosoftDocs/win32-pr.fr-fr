---
description: Si vous écrivez un GINA pour remplacer la DLL GINA (MSGina.dll) standard de Microsoft, vous pouvez fournir une partie ou la totalité des fonctionnalités GINA standard.
ms.assetid: cd2ce7b7-6167-4451-9f6e-881676a2145c
title: Fonctionnalités de MSGina.dll
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 51833ab92e47dad01c13df004797e3ab3552b09a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103867254"
---
# <a name="msginadll-features"></a><span data-ttu-id="bd5a0-103">Fonctionnalités de MSGina.dll</span><span class="sxs-lookup"><span data-stu-id="bd5a0-103">MSGina.dll Features</span></span>

<span data-ttu-id="bd5a0-104">Si vous écrivez un [*Gina*](../secgloss/g-gly.md) pour remplacer la dll gina (MSGina.dll) standard de Microsoft, vous pouvez fournir une partie ou la totalité des fonctionnalités Gina standard.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-104">If you are writing a [*GINA*](../secgloss/g-gly.md) to replace the Microsoft standard GINA DLL (MSGina.dll), you may want to provide some or all of the standard GINA functionality.</span></span> <span data-ttu-id="bd5a0-105">Voici une liste de fonctionnalités standard et une brève description de leur mode de contrôle.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-105">Following is a list of standard features and a brief description of how they are controlled.</span></span>

> [!Note]  
> <span data-ttu-id="bd5a0-106">Les DLL GINA sont ignorées dans Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-106">GINA DLLs are ignored in Windows Vista.</span></span>

 

<span data-ttu-id="bd5a0-107">Les valeurs de clé de Registre contrôlent la disponibilité ou le comportement de nombreuses fonctionnalités GINA standard.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-107">Registry key values control the availability or behavior of many of these standard GINA features.</span></span> <span data-ttu-id="bd5a0-108">Sauf indication contraire, ces valeurs de clés appartiennent à la clé de Registre Winlogon et ont un type de valeur de la valeur de \[ reg \_ SZ \] .</span><span class="sxs-lookup"><span data-stu-id="bd5a0-108">Unless otherwise noted, these key values belong to the Winlogon registry key and have a value type of \[REG\_SZ\].</span></span> <span data-ttu-id="bd5a0-109">Le chemin d’accès réel de la clé [*Winlogon*](../secgloss/w-gly.md) est le suivant :</span><span class="sxs-lookup"><span data-stu-id="bd5a0-109">The actual path of the [*Winlogon*](../secgloss/w-gly.md) key is:</span></span>

<span data-ttu-id="bd5a0-110">**\\HKEY \_ local \_ machine \\ Software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Winlogon**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-110">**\\HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon**</span></span>

-   <span data-ttu-id="bd5a0-111">**Boîte de dialogue notification légale**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-111">**Legal Notification Dialog Box**</span></span>

    <span data-ttu-id="bd5a0-112">Dans certains cas, il est légal pour toute personne ayant accès à une station de travail de se connecter et de commencer à travailler, sauf si un avis indique que le système est destiné uniquement aux utilisateurs autorisés.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-112">In some places, it is legal for anyone who has access to a workstation to log on and begin working unless there is a notice that indicates that the system is for authorized users only.</span></span> <span data-ttu-id="bd5a0-113">En outre, de nombreux utilisateurs souhaitent que les messages spécifiques à l’entreprise s’affichent avant la connexion normale.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-113">Also, many users want company-specific messages displayed before normal logon.</span></span> <span data-ttu-id="bd5a0-114">La norme GINA utilise deux valeurs de clé de Registre Winlogon pour permettre à un système d’afficher des informations avant l’ouverture de session.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-114">The standard GINA uses two Winlogon registry key values to allow a system to display information before logon.</span></span> <span data-ttu-id="bd5a0-115">Si l’une des valeurs de clé est présente et contient une chaîne non null, une boîte de dialogue d’avertissement légal s’affiche avant l’écran d’accueil habituel.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-115">If either key value is present and contains a non-null string, then a Legal Notice dialog box is displayed before the usual Welcome screen.</span></span> <span data-ttu-id="bd5a0-116">Ces noms de valeur de clé sont présentés dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-116">These key value names are shown in the following table.</span></span>

    

    | <span data-ttu-id="bd5a0-117">Nom de la valeur de clé</span><span class="sxs-lookup"><span data-stu-id="bd5a0-117">Key value name</span></span>         | <span data-ttu-id="bd5a0-118">Contenu</span><span class="sxs-lookup"><span data-stu-id="bd5a0-118">Contents</span></span>                                                            |
    |------------------------|---------------------------------------------------------------------|
    | <span data-ttu-id="bd5a0-119">**LegalNoticeCaption**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-119">**LegalNoticeCaption**</span></span> | <span data-ttu-id="bd5a0-120">Chaîne à afficher comme légende de la boîte de dialogue d’avertissement légal</span><span class="sxs-lookup"><span data-stu-id="bd5a0-120">The string to display as the caption of the legal notice dialog box</span></span> |
    | <span data-ttu-id="bd5a0-121">**LegalNoticeText**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-121">**LegalNoticeText**</span></span>    | <span data-ttu-id="bd5a0-122">Chaîne à afficher comme message de la boîte de dialogue d’avertissement légal</span><span class="sxs-lookup"><span data-stu-id="bd5a0-122">The string to display as the message of the legal notice dialog box</span></span> |

    

     

-   <span data-ttu-id="bd5a0-123">**Afficher le dernier nom d’utilisateur**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-123">**Display Last User Name**</span></span>

    <span data-ttu-id="bd5a0-124">Par défaut, l’écran de connexion affiche le nom du dernier utilisateur qui a réussi à se connecter à la station de travail.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-124">By default, the logon screen displays the name of the last user to successfully log on to the workstation.</span></span> <span data-ttu-id="bd5a0-125">Cette fonctionnalité est contrôlée par la valeur de clé de Registre **DontDisplayLastUserName** .</span><span class="sxs-lookup"><span data-stu-id="bd5a0-125">This feature is controlled by the **DontDisplayLastUserName** registry key value.</span></span> <span data-ttu-id="bd5a0-126">Lorsque cette valeur de clé est définie sur un, le nom d’utilisateur ne s’affiche pas dans la boîte de dialogue d’ouverture de session.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-126">When this key value is set to one, the user name is not displayed in the logon dialog box.</span></span>

-   <span data-ttu-id="bd5a0-127">**Ouverture de session automatique**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-127">**Automatic Logon**</span></span>

    <span data-ttu-id="bd5a0-128">Cette fonctionnalité permet à un système de se connecter automatiquement à un utilisateur chaque fois que le système démarre en utilisant les informations par défaut et en désactivant la case à costar CTRL + ALT + SUPPR.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-128">This feature allows a system to log on a user automatically every time the system starts by using default information and disabling the CTRL+ALT+DEL logon box.</span></span>

    <span data-ttu-id="bd5a0-129">Cette fonctionnalité utilise les valeurs suivantes de la clé Winlogon.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-129">This feature uses the following values of the Winlogon key.</span></span>

    

    | <span data-ttu-id="bd5a0-130">Valeur</span><span class="sxs-lookup"><span data-stu-id="bd5a0-130">Value</span></span>                 | <span data-ttu-id="bd5a0-131">Contenu</span><span class="sxs-lookup"><span data-stu-id="bd5a0-131">Contents</span></span>                                           |
    |-----------------------|----------------------------------------------------|
    | <span data-ttu-id="bd5a0-132">**AutoAdminLogon**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-132">**AutoAdminLogon**</span></span>    | <span data-ttu-id="bd5a0-133">1</span><span class="sxs-lookup"><span data-stu-id="bd5a0-133">1</span></span>                                                  |
    | <span data-ttu-id="bd5a0-134">**AutoLogonCount**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-134">**AutoLogonCount**</span></span>    | <span data-ttu-id="bd5a0-135">Nombre de fois où une ouverture de session automatique est en</span><span class="sxs-lookup"><span data-stu-id="bd5a0-135">The number of times to do an automatic logon</span></span>       |
    | <span data-ttu-id="bd5a0-136">**DefaultUserName**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-136">**DefaultUserName**</span></span>   | <span data-ttu-id="bd5a0-137">Nom du compte d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="bd5a0-137">The name of the user account</span></span>                       |
    | <span data-ttu-id="bd5a0-138">**DefaultDomainName**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-138">**DefaultDomainName**</span></span> | <span data-ttu-id="bd5a0-139">Nom du domaine dans lequel se trouve le compte d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="bd5a0-139">The name of the domain that the user account is in</span></span> |

    

     

    <span data-ttu-id="bd5a0-140">Si la valeur de clé **AutoAdminLogon** est présente et contient une valeur et que la valeur de clé **AutoLogonCount** n’est pas présente, une ouverture de session automatique se produit chaque fois que l’utilisateur actuel ferme une session ou que le système est redémarré.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-140">If the **AutoAdminLogon** key value is present and contains a one, and the **AutoLogonCount** key value is not present, an automatic logon will occur every time the current user logs off or the system is restarted.</span></span> <span data-ttu-id="bd5a0-141">Le compte en cours de connexion est spécifié à l’aide des valeurs de clé **DefaultUserName** et **DefaultDomainName** .</span><span class="sxs-lookup"><span data-stu-id="bd5a0-141">The account being logged onto is specified using the **DefaultUserName** and **DefaultDomainName** key values.</span></span> <span data-ttu-id="bd5a0-142">Le mot de passe du compte peut être spécifié de deux façons.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-142">The password for the account can be specified in one of two ways.</span></span> <span data-ttu-id="bd5a0-143">Pour les ordinateurs exécutant l’un des systèmes d’exploitation Windows Server 2003 ou Windows XP, le mot de passe doit être stocké en tant que secret à l’aide de la fonction [**LsaStorePrivateData**](/windows/win32/api/ntsecapi/nf-ntsecapi-lsastoreprivatedata) .</span><span class="sxs-lookup"><span data-stu-id="bd5a0-143">For computers running one of the Windows Server 2003 or Windows XP operating systems, the password should be stored as a secret using the [**LsaStorePrivateData**](/windows/win32/api/ntsecapi/nf-ntsecapi-lsastoreprivatedata) function.</span></span> <span data-ttu-id="bd5a0-144">Pour plus d’informations, consultez [protection du mot de passe d’ouverture de session automatique](protecting-the-automatic-logon-password.md).</span><span class="sxs-lookup"><span data-stu-id="bd5a0-144">For details, see [Protecting the Automatic Logon Password](protecting-the-automatic-logon-password.md).</span></span> <span data-ttu-id="bd5a0-145">L’autre façon de stocker le mot de passe est en texte brut dans l’entrée **DefaultPassword** de la clé Winlogon. pour des raisons de sécurité, cette technique doit être évitée.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-145">The other way to store the password is in plaintext in the **DefaultPassword** entry of the Winlogon key; for security purposes, this technique should be avoided.</span></span> <span data-ttu-id="bd5a0-146">Si vous stockez le mot de passe à l’aide de la fonction **LsaStorePrivateData** , ne fournissez pas d’entrée **DefaultPassword** dans la clé Winlogon.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-146">If you store the password using the **LsaStorePrivateData** function, then do not provide a **DefaultPassword** entry in the Winlogon key.</span></span>

    <span data-ttu-id="bd5a0-147">Si la valeur de clé **AutoAdminLogon** est présente et contient une valeur, et si la valeur de clé **AutoLogonCount** est présente et n’est pas égale à zéro, **AutoLogonCount** détermine le nombre d’ouvertures de session automatiques qui se produisent.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-147">If the **AutoAdminLogon** key value is present and contains a one, and if the **AutoLogonCount** key value is present and is not zero, **AutoLogonCount** will determine the number of automatic logons that occur.</span></span> <span data-ttu-id="bd5a0-148">Chaque fois que le système est redémarré, la valeur de **AutoLogonCount** est décrémentée d’une unité, jusqu’à ce qu’elle atteigne zéro.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-148">Each time the system is restarted, the value of **AutoLogonCount** will be decremented by one, until it reaches zero.</span></span> <span data-ttu-id="bd5a0-149">Lorsque **AutoLogonCount** atteint zéro, aucun compte n’est connecté automatiquement, la valeur de clé **AutoLogonCount** et la valeur de clé **DefaultPassword** , si elle est utilisée, sont supprimées du Registre, et **AutoAdminLogon** est défini à zéro.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-149">When **AutoLogonCount** reaches zero, no account will be logged on automatically, the **AutoLogonCount** key value and **DefaultPassword** key value, if used, will be deleted from the registry, and **AutoAdminLogon** will be set to zero.</span></span>

    <span data-ttu-id="bd5a0-150">L’utilisation de **AutoAdminLogon** présente un inconvénient supplémentaire : par défaut, MSGina.dll vérifie l’état de la touche Maj lorsque **AutoAdminLogon** en est un.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-150">There is one additional caveat to using **AutoAdminLogon**: By default, MSGina.dll checks the state of the SHIFT key when **AutoAdminLogon** is one.</span></span> <span data-ttu-id="bd5a0-151">Si la touche Maj est maintenue pendant le processus de démarrage, MSGina.dll ignore la valeur de clé **AutoAdminLogon** et invite l’utilisateur à entrer des informations d’identification et d’authentification de manière interactive.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-151">If the SHIFT key is held down during the boot process, MSGina.dll will ignore the **AutoAdminLogon** key value and prompt the user for identification and authentication information interactively.</span></span> <span data-ttu-id="bd5a0-152">Il s’agit d’une fonctionnalité utile lorsque vous déboguez une application dédiée.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-152">This is a useful feature when you are debugging a dedicated application.</span></span> <span data-ttu-id="bd5a0-153">Pour désactiver la signification de la touche Maj, définissez la valeur de clé **IgnoreShiftOverride** sur un.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-153">To disable the meaning of the SHIFT key, set the **IgnoreShiftOverride** key value to one.</span></span>

-   <span data-ttu-id="bd5a0-154">**Autoriser l’arrêt non authentifié**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-154">**Allow Unauthenticated Shutdown**</span></span>

    <span data-ttu-id="bd5a0-155">Vous pouvez configurer le [*Gina*](../secgloss/g-gly.md) par défaut de façon à inclure un bouton **arrêter** dans la boîte de dialogue d’ouverture de session.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-155">You can configure the default [*GINA*](../secgloss/g-gly.md) to include a **Shutdown** button in the logon dialog box.</span></span> <span data-ttu-id="bd5a0-156">Cela permet aux utilisateurs d’arrêter le système sans ouvrir de session préalable.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-156">This lets users shut down the system without first logging on.</span></span> <span data-ttu-id="bd5a0-157">La valeur de clé suivante détermine si ce bouton est inclus.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-157">The following key value controls whether this button is included.</span></span>

    

    | <span data-ttu-id="bd5a0-158">Valeur</span><span class="sxs-lookup"><span data-stu-id="bd5a0-158">Value</span></span>                    | <span data-ttu-id="bd5a0-159">Description</span><span class="sxs-lookup"><span data-stu-id="bd5a0-159">Description</span></span>                                           |
    |--------------------------|-------------------------------------------------------|
    | <span data-ttu-id="bd5a0-160">**ShutdownWithoutLogon**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-160">**ShutdownWithoutLogon**</span></span> | <span data-ttu-id="bd5a0-161">Une pour inclure le bouton ; zéro pour exclure le bouton</span><span class="sxs-lookup"><span data-stu-id="bd5a0-161">One to include the button; zero to exclude the button</span></span> |

    

     

-   <span data-ttu-id="bd5a0-162">**ActivationUserinit.exe**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-162">**Userinit.exe Activation**</span></span>

    <span data-ttu-id="bd5a0-163">Userinit.exe est une application exécutée par MSGina.dll lorsque l’utilisateur s’est connecté.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-163">Userinit.exe is an application that is executed by MSGina.dll when the user has logged on.</span></span> <span data-ttu-id="bd5a0-164">Il s’exécute dans le [*contexte*](../secgloss/c-gly.md) de l’utilisateur qui vient d’être connecté et sur le Bureau de l’application.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-164">It runs in the newly logged-on user's [*context*](../secgloss/c-gly.md) and on the application desktop.</span></span> <span data-ttu-id="bd5a0-165">Son objectif est de configurer l’environnement de l’utilisateur, notamment la restauration des utilisations réseau, l’établissement de paramètres de profil tels que les polices et les couleurs d’écran, et l’exécution de scripts d’ouverture de session.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-165">Its purpose is to set up the user's environment, including restoring network uses, establishing profile settings such as fonts and screen colors, and running logon scripts.</span></span> <span data-ttu-id="bd5a0-166">Une fois ces tâches terminées, Userinit.exe exécute les programmes de l’interpréteur de commandes utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-166">After completing those tasks, Userinit.exe executes the user shell programs.</span></span> <span data-ttu-id="bd5a0-167">Les programmes de l’interpréteur de commandes héritent de l’environnement que Userinit.exe configure.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-167">The shell programs inherit the environment that Userinit.exe sets up.</span></span> <span data-ttu-id="bd5a0-168">Les programmes d’interpréteur de commandes spécifiques que Userinit.exe exécute sont stockés dans la valeur de clé de l' **interpréteur** de commandes sous la clé de Registre Winlogon.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-168">The specific shell programs that Userinit.exe executes are stored in the **Shell** key value under the Winlogon registry key.</span></span>

    <span data-ttu-id="bd5a0-169">La valeur de clé de l' **interpréteur** de commandes peut contenir une liste de programmes séparés par des virgules à exécuter.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-169">The **Shell** key value can contain a comma-separated list of programs to be executed.</span></span> <span data-ttu-id="bd5a0-170">L’Explorateur Windows est le programme d’interpréteur de commandes par défaut qui est exécuté si la valeur de la clé de l' **interpréteur** de commandes est null ou absente.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-170">Windows Explorer is the default shell program and will be executed if the **Shell** key value is null or not present.</span></span> <span data-ttu-id="bd5a0-171">Par défaut, l’Explorateur Windows est listé.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-171">By default, Windows Explorer is listed.</span></span>

-   <span data-ttu-id="bd5a0-172">**Options de sécurité connectées**</span><span class="sxs-lookup"><span data-stu-id="bd5a0-172">**Logged-On Security Options**</span></span>

    <span data-ttu-id="bd5a0-173">Lorsque vous êtes connecté, si un utilisateur entre une [*séquence de touches*](../secgloss/s-gly.md) de sécurité (SAS), l’utilisateur reçoit un écran d’options de sécurité.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-173">When logged on, if a user enters a [*secure attention sequence*](../secgloss/s-gly.md) (SAS), the user is presented with a security options screen.</span></span> <span data-ttu-id="bd5a0-174">Parmi les options répertoriées figurent :</span><span class="sxs-lookup"><span data-stu-id="bd5a0-174">Among the options listed are:</span></span>

    -   <span data-ttu-id="bd5a0-175">Arrêtez le système.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-175">Shut down the system.</span></span>
    -   <span data-ttu-id="bd5a0-176">Fermez la session.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-176">Log off.</span></span>
    -   <span data-ttu-id="bd5a0-177">Modifiez le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-177">Change the password.</span></span>
    -   <span data-ttu-id="bd5a0-178">Accédez à la liste des tâches.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-178">Go to the task list.</span></span>
    -   <span data-ttu-id="bd5a0-179">Verrouillez la station de travail.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-179">Lock the workstation.</span></span>

    <span data-ttu-id="bd5a0-180">Une GINA de remplacement peut fournir des options similaires lorsqu’un événement SAS est reçu lorsqu’un utilisateur a ouvert une session.</span><span class="sxs-lookup"><span data-stu-id="bd5a0-180">A replacement GINA can provide similar options when a SAS event is received while a user is logged on.</span></span>

 

 
