---
description: Au fur et à mesure que le protocole Kerberos était conçu à l’origine, une clé principale pour un utilisateur était dérivée d’un mot de passe fourni par l’utilisateur.
ms.assetid: b8fcb68d-751e-4495-ab92-8b70c96aaa7a
title: Tickets de Ticket-Granting
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 39dff161ba2d905f676fe6b6b5e7e7d5289ee550
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104113198"
---
# <a name="ticket-granting-tickets"></a><span data-ttu-id="7850f-103">Tickets de Ticket-Granting</span><span class="sxs-lookup"><span data-stu-id="7850f-103">Ticket-Granting Tickets</span></span>

<span data-ttu-id="7850f-104">Au fur et à mesure que le [*protocole Kerberos*](../secgloss/k-gly.md) était conçu à l’origine, une clé principale pour un utilisateur était dérivée d’un mot de passe fourni par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7850f-104">As the [*Kerberos protocol*](../secgloss/k-gly.md) was originally designed, a master key for a user was derived from a password provided by the user.</span></span> <span data-ttu-id="7850f-105">Lorsqu’un utilisateur a ouvert une session, le client Kerberos sur la station de travail de l’utilisateur a accepté le mot de passe de l’utilisateur et l’a converti en clé de chiffrement en passant le texte par le biais d’une fonction de [*hachage*](../secgloss/h-gly.md) unidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="7850f-105">When a user logged on, the Kerberos client on the user's workstation accepted the password from the user and converted it into an encryption key by passing the text through a one-way [*hash*](../secgloss/h-gly.md) function.</span></span> <span data-ttu-id="7850f-106">Le hachage résultant était la [*clé principale*](../secgloss/m-gly.md)de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7850f-106">The resulting hash was the user's [*master key*](../secgloss/m-gly.md).</span></span> <span data-ttu-id="7850f-107">Le client a utilisé cette *clé principale* pour déchiffrer les [*clés de session*](../secgloss/s-gly.md) reçues du KDC.</span><span class="sxs-lookup"><span data-stu-id="7850f-107">The client used this *master key* to decrypt [*session keys*](../secgloss/s-gly.md) received from KDC.</span></span>

<span data-ttu-id="7850f-108">Le problème avec la conception Kerberos d’origine est que le client a besoin de la clé principale de l’utilisateur chaque fois qu’il déchiffre une clé de session à partir du KDC.</span><span class="sxs-lookup"><span data-stu-id="7850f-108">The problem with the original Kerberos design is the client needs the user's master key each time it decrypts a session key from the KDC.</span></span> <span data-ttu-id="7850f-109">Autrement dit, soit le client doit demander le mot de passe au début de chaque échange client/serveur, soit le client doit stocker la clé de l’utilisateur sur la station de travail.</span><span class="sxs-lookup"><span data-stu-id="7850f-109">That means either the client must ask the user for the password at the beginning of every client/server exchange, or the client must store the user's key on the workstation.</span></span> <span data-ttu-id="7850f-110">Les interruptions fréquentes de l’utilisateur sont trop intrusives.</span><span class="sxs-lookup"><span data-stu-id="7850f-110">Frequent interruptions of the user are too intrusive.</span></span> <span data-ttu-id="7850f-111">Le stockage de la clé sur les risques de la station de travail compromettre une clé dérivée du mot de passe de l’utilisateur, qui est une clé à long terme.</span><span class="sxs-lookup"><span data-stu-id="7850f-111">Storing the key on the workstation risks compromising a key derived from the user password which is a long term key.</span></span>

<span data-ttu-id="7850f-112">La solution du protocole Kerberos à ce problème est que le client récupère une clé temporaire auprès du KDC.</span><span class="sxs-lookup"><span data-stu-id="7850f-112">The Kerberos protocol's solution to this problem is for the client to get a temporary key from the KDC.</span></span> <span data-ttu-id="7850f-113">Cette clé temporaire est correcte uniquement pour cette [*session de connexion*](../secgloss/l-gly.md).</span><span class="sxs-lookup"><span data-stu-id="7850f-113">This temporary key is good only for this [*logon session*](../secgloss/l-gly.md).</span></span> <span data-ttu-id="7850f-114">Lorsqu’un utilisateur ouvre une session, le client demande un ticket au KDC de la même manière qu’un ticket pour un autre service.</span><span class="sxs-lookup"><span data-stu-id="7850f-114">When a user logs on, the client requests a ticket for the KDC just as it would request a ticket for any other service.</span></span> <span data-ttu-id="7850f-115">Le centre de distribution de clés répond en créant une clé de session de connexion et un ticket pour un serveur spécial, le service d’accord de tickets complet du KDC.</span><span class="sxs-lookup"><span data-stu-id="7850f-115">The KDC responds by creating a logon session key and a ticket for a special server, the KDC's full ticket-granting service.</span></span> <span data-ttu-id="7850f-116">Une copie de la clé de session de connexion est incorporée dans le ticket et le ticket est chiffré avec la clé principale du KDC.</span><span class="sxs-lookup"><span data-stu-id="7850f-116">One copy of the logon session key is embedded in the ticket, and the ticket is encrypted with the KDC's master key.</span></span> <span data-ttu-id="7850f-117">Une autre copie de la clé de session de connexion est chiffrée avec la clé principale de l’utilisateur dérivée du mot de passe d’ouverture de session de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7850f-117">Another copy of the logon session key is encrypted with the user's master key derived from the user's logon password.</span></span> <span data-ttu-id="7850f-118">Le ticket et la clé de session chiffrée sont envoyés au client.</span><span class="sxs-lookup"><span data-stu-id="7850f-118">Both the ticket and the encrypted session key are sent to the client.</span></span>

<span data-ttu-id="7850f-119">Lorsque le client reçoit la réponse du KDC, il déchiffre la clé de session de connexion avec la clé principale de l’utilisateur dérivée du mot de passe de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7850f-119">When the client gets the KDC's reply, it decrypts the logon session key with the user's master key derived from the user's password.</span></span> <span data-ttu-id="7850f-120">Le client n’a plus besoin de la clé dérivée du mot de passe de l’utilisateur, car le client utilise désormais la clé de session de connexion pour déchiffrer sa copie de la clé de session du serveur qu’il obtient du KDC.</span><span class="sxs-lookup"><span data-stu-id="7850f-120">The client no longer needs the key derived from the user's password because the client will now use the logon session key to decrypt its copy of any server session key it gets from the KDC.</span></span> <span data-ttu-id="7850f-121">Le client stocke la clé de session de connexion dans son cache de tickets, ainsi que son ticket pour le service d’accord de ticket complet du KDC.</span><span class="sxs-lookup"><span data-stu-id="7850f-121">The client stores the logon session key in its ticket cache along with its ticket for the KDC's full ticket-granting service.</span></span>

<span data-ttu-id="7850f-122">Le ticket du service d’accord de ticket complet est appelé ticket TGT (Ticket-Granting Ticket).</span><span class="sxs-lookup"><span data-stu-id="7850f-122">The ticket for the full ticket-granting service is called a ticket-granting ticket (TGT).</span></span> <span data-ttu-id="7850f-123">Lorsque le client demande un ticket au centre de gestion de clés pour un serveur, il présente les [*informations d’identification*](../secgloss/c-gly.md) sous la forme d’un message d’authentificateur et d’un ticket, dans ce cas un TGT, de la même manière qu’il présente des informations d’identification à un autre service.</span><span class="sxs-lookup"><span data-stu-id="7850f-123">When the client asks the KDC for a ticket to a server, it presents [*credentials*](../secgloss/c-gly.md) in the form of an authenticator message and a ticket — in this case a TGT — just as it would present credentials to any other service.</span></span> <span data-ttu-id="7850f-124">Le service d’accord de tickets ouvre le ticket TGT avec sa clé principale, extrait la clé de session de connexion pour ce client et utilise la clé de session de connexion pour chiffrer la copie du client d’une clé de session pour le serveur.</span><span class="sxs-lookup"><span data-stu-id="7850f-124">The ticket-granting service opens the TGT with its master key, extracts the logon session key for this client, and uses the logon session key to encrypt the client's copy of a session key for the server.</span></span>

 

 
