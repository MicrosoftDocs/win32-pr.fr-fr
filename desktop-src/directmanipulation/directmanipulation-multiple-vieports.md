---
description: Lorsque vous utilisez plusieurs Viewports, appuyez sur testingdetermines les Viewports affectés par l’entrée de l’utilisateur en tenant l’emplacement de l’écran d’un contact et en déterminant le rectangle de la fenêtre d’affichage du contact.
ms.assetid: 960EF92D-F439-4A84-AAF9-1469E2830573
title: Utilisation de plusieurs Viewports dans DirectManipulation
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: 627a97a7c9563ca0af9decf79b18340343dda345
ms.sourcegitcommit: 3d718d8f69d3f86eaecf94c5705d761c5a9ef4a1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/20/2020
ms.locfileid: "104562072"
---
# <a name="using-multiple-viewports-in-directmanipulation"></a><span data-ttu-id="faa68-103">Utilisation de plusieurs Viewports dans DirectManipulation</span><span class="sxs-lookup"><span data-stu-id="faa68-103">Using multiple viewports in DirectManipulation</span></span>

<span data-ttu-id="faa68-104">Lorsque vous utilisez plusieurs Viewports, le *test de positionnement* détermine les Viewports affectés par l’entrée d’utilisateur en tenant l’emplacement de l’écran d’un contact et en déterminant le rectangle de la fenêtre d’affichage du contact.</span><span class="sxs-lookup"><span data-stu-id="faa68-104">When using multiple viewports, *Hit testing* determines which viewport(s) are affected by user input by taking the screen location of a contact and determining which viewport rectangle the contact hits.</span></span>

<span data-ttu-id="faa68-105">Un scénario courant de [manipulation directe](direct-manipulation-portal.md) consiste à placer une fenêtre d’affichage à l’intérieur d’une autre, également appelée « *fenêtres d’affichage*».</span><span class="sxs-lookup"><span data-stu-id="faa68-105">A common scenario in [Direct Manipulation](direct-manipulation-portal.md) is to place one viewport inside another, also known as *nesting viewports*.</span></span> <span data-ttu-id="faa68-106">Si le contact atteint plusieurs Viewports, l’ordre des appels  [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) par le [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) de la fenêtre détermine la relation parent-enfant des Viewports imbriqués.</span><span class="sxs-lookup"><span data-stu-id="faa68-106">If the contact hits more than one viewport, the order of  [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) calls by the window's [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) determines the parent-child relationship of the nested viewports.</span></span>

<span data-ttu-id="faa68-107">Règle : l’élément enfant doit appeler [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)avant d’appeler le parent.</span><span class="sxs-lookup"><span data-stu-id="faa68-107">Rule: The child element should call [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)before calling the parent.</span></span>

![Diagramme montrant les hiérarchies de test de positionnement](images/dm-art-8.png)

<span data-ttu-id="faa68-109">Un contact apparaît dans une fenêtre d’affichage.</span><span class="sxs-lookup"><span data-stu-id="faa68-109">A contact comes down in a viewport.</span></span> <span data-ttu-id="faa68-110">[**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) doit d’abord être appelé sur la fenêtre d’affichage orange (enfant), puis sur la fenêtre d’affichage verte (parent) pour établir la hiérarchie correcte.</span><span class="sxs-lookup"><span data-stu-id="faa68-110">[**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) should first be called on the orange (child) viewport and then the green (parent) viewport to establish the correct hierarchy.</span></span>

## <a name="targeting-the-correct-viewport"></a><span data-ttu-id="faa68-111">Ciblage de la fenêtre d’affichage correcte</span><span class="sxs-lookup"><span data-stu-id="faa68-111">Targeting the correct viewport</span></span>

<span data-ttu-id="faa68-112">Un contact peut être associé à un nombre quelconque de Viewports et chaque contact peut être attribué à un autre jeu de Viewports.</span><span class="sxs-lookup"><span data-stu-id="faa68-112">A contact can be associated with any number of viewports and each contact can be assigned to a different set of viewports.</span></span>

<span data-ttu-id="faa68-113">Chaque Viewport peut être configuré pour prendre en charge des interactions spécifiques, selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="faa68-113">Each viewport can be configured to support specific interactions, as required.</span></span>

<span data-ttu-id="faa68-114">En fonction de ces paramètres, la [manipulation directe](direct-manipulation-portal.md) identifie la fenêtre d’affichage qui gère l’entrée.</span><span class="sxs-lookup"><span data-stu-id="faa68-114">Based on these settings, [Direct Manipulation](direct-manipulation-portal.md) identifies which viewport handles the input.</span></span> <span data-ttu-id="faa68-115">La fenêtre d’affichage la plus enfant dans la hiérarchie de test d’atteinte a la première chance de gérer l’entrée.</span><span class="sxs-lookup"><span data-stu-id="faa68-115">The child-most viewport in the hit testing hierarchy has the first chance to handle the input.</span></span> <span data-ttu-id="faa68-116">Toutefois, le chaînage et la promotion parente peuvent modifier la fenêtre d’affichage qui gère l’entrée.</span><span class="sxs-lookup"><span data-stu-id="faa68-116">However, both chaining and parent promotion can change which viewport handles the input.</span></span>

## <a name="chaining"></a><span data-ttu-id="faa68-117">Chaînage</span><span class="sxs-lookup"><span data-stu-id="faa68-117">Chaining</span></span>

<span data-ttu-id="faa68-118">Lorsque la fin du contenu est atteinte pendant une manipulation, la [manipulation directe](direct-manipulation-portal.md) applique un effet de limite pour indiquer que le contenu ne peut pas aller plus loin.</span><span class="sxs-lookup"><span data-stu-id="faa68-118">When the end of the content is reached during a manipulation, [Direct Manipulation](direct-manipulation-portal.md) applies a boundary effect to indicate that the content can go no further.</span></span> <span data-ttu-id="faa68-119">Toutefois, si une fenêtre d’affichage enfant est *chaînée* à une fenêtre d’affichage parent, cet effet est supprimé.</span><span class="sxs-lookup"><span data-stu-id="faa68-119">However, if a child viewport is *chained* to a parent viewport, this effect is suppressed.</span></span> <span data-ttu-id="faa68-120">Au lieu de cela, la fenêtre d’affichage ancêtre la plus proche dans la hiérarchie des tests de positionnement qui prend en charge la manipulation gère l’entrée.</span><span class="sxs-lookup"><span data-stu-id="faa68-120">Instead, the closest ancestor viewport in the hit testing hierarchy that supports the manipulation, handles the input.</span></span> <span data-ttu-id="faa68-121">Si la direction de la manipulation est inversée de sorte que l’ancêtre retourne au point où le chaînage a été déclenché, la manipulation « déchaîne » et le contrôle sont renvoyés à la fenêtre d’affichage enfant.</span><span class="sxs-lookup"><span data-stu-id="faa68-121">If the direction of the manipulation is reversed such that the ancestor returns to the point where chaining was triggered, the manipulation "unchains" and control transfers back to the child viewport.</span></span>

![Diagramme montrant la manipulation chaînée](images/dm-art-9.png)

<span data-ttu-id="faa68-123">Lorsque l’utilisateur effectue un panoramique de la fenêtre d’affichage enfant jusqu’à la périphérie du contenu, la manipulation « chaînes » vers la fenêtre d’affichage parente et l’utilisateur commence à panoramiqueer le contenu parent à la place.</span><span class="sxs-lookup"><span data-stu-id="faa68-123">When the user pans the child viewport all the way to the edge of the content, the manipulation "chains" to the parent viewport, and the user begins panning the parent content instead.</span></span>

> [!Note]  
> <span data-ttu-id="faa68-124">Les axes des abscisses X et Y indépendamment les uns des autres. par conséquent, si un panoramique Diagonal atteint la limite x avant la limite y, la manipulation déplace le parent dans la direction x tout en continuant à déplacer l’enfant sur l’axe y.</span><span class="sxs-lookup"><span data-stu-id="faa68-124">The X and Y axes chain independently of one another, so if a diagonal pan hits the x boundary before the y boundary, the manipulation moves the parent in the x direction while continuing to move the child in the y direction.</span></span> <span data-ttu-id="faa68-125">Pour activer ou désactiver le chaînage, appelez l’API [**SetChaining**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) sur la fenêtre d’affichage enfant.</span><span class="sxs-lookup"><span data-stu-id="faa68-125">To enable or disable chaining, call the [**SetChaining**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) API on the child viewport.</span></span>

### <a name="rails"></a><span data-ttu-id="faa68-126">Rail</span><span class="sxs-lookup"><span data-stu-id="faa68-126">Rails</span></span>

<span data-ttu-id="faa68-127">La spécification des rails dans la configuration d’une fenêtre d’affichage affecte la façon dont l’entrée est chaînée à partir de la fenêtre d’affichage.</span><span class="sxs-lookup"><span data-stu-id="faa68-127">Specifying rails in a viewport’s configuration affects the way input is chained from the viewport.</span></span> <span data-ttu-id="faa68-128">Plus précisément, l’entrée ne peut pas être chaînée à son parent à partir d’une fenêtre d’affichage enfant avec rail dans le mode panoramique « non rail » des rails.</span><span class="sxs-lookup"><span data-stu-id="faa68-128">Specifically, input cannot chain from a railed child viewport to its parent in the “unrailed” panning mode of rails.</span></span> <span data-ttu-id="faa68-129">Pour enchaîner les entrées lorsque les rails sont définis, l’utilisateur doit avoir panoramique verticalement ou horizontalement et être verrouillé sur les rails.</span><span class="sxs-lookup"><span data-stu-id="faa68-129">To chain input when rails are set, the user must have panned vertically or horizontally and be locked to the rails.</span></span>

### <a name="zooming"></a><span data-ttu-id="faa68-130">zoom ;</span><span class="sxs-lookup"><span data-stu-id="faa68-130">Zooming</span></span>

<span data-ttu-id="faa68-131">Si une fenêtre d’affichage enfant est imbriquée dans un parent et que les deux sont configurés pour le zoom, une manipulation de zoom peut être chaînée d’un enfant à un parent.</span><span class="sxs-lookup"><span data-stu-id="faa68-131">If a child viewport is nested inside a parent, and both are configured for zoom, a zoom manipulation can chain from child to parent.</span></span> <span data-ttu-id="faa68-132">Toutefois, si la manipulation se poursuit, elle fonctionne uniquement sur le parent et ne peut pas « déchaîner » sur l’enfant.</span><span class="sxs-lookup"><span data-stu-id="faa68-132">However, if the manipulation continues, it works only on the parent and cannot “unchain” to the child.</span></span> <span data-ttu-id="faa68-133">Si l’utilisateur associe un zoom d’un enfant à un parent, la [manipulation directe](direct-manipulation-portal.md) interrompt l’enfant jusqu’à ce que tous les contacts associés à la manipulation soient supprimés de l’écran.</span><span class="sxs-lookup"><span data-stu-id="faa68-133">If the user chains a zoom from child to parent, [Direct Manipulation](direct-manipulation-portal.md) suspends the child until all contacts associated with the manipulation are removed from the screen.</span></span> <span data-ttu-id="faa68-134">À ce stade, l’enfant est libéré de la suspension et l’utilisateur peut effectuer un panoramique de la fenêtre d’affichage enfant.</span><span class="sxs-lookup"><span data-stu-id="faa68-134">At this point, the child is released from suspension and the user can pan the child viewport.</span></span>

## <a name="gesture-targeting-parent-promotion"></a><span data-ttu-id="faa68-135">Ciblage du mouvement : promotion parente</span><span class="sxs-lookup"><span data-stu-id="faa68-135">Gesture targeting: Parent promotion</span></span>

<span data-ttu-id="faa68-136">Le *ciblage de mouvement* est le processus par lequel les groupes de [manipulation directs](direct-manipulation-portal.md) regroupent les contacts et déterminent la fenêtre d’affichage qui traite l’entrée.</span><span class="sxs-lookup"><span data-stu-id="faa68-136">*Gesture targeting* is the process by which [Direct Manipulation](direct-manipulation-portal.md) groups contacts together and determines which viewport processes the input.</span></span> <span data-ttu-id="faa68-137">La *promotion parente* fait référence aux cas où l’entrée est transférée de l’enfant au parent.</span><span class="sxs-lookup"><span data-stu-id="faa68-137">*Parent promotion* refers to cases where the input is transferred from the child to the parent.</span></span> <span data-ttu-id="faa68-138">Par exemple, lorsqu’un utilisateur remet deux contacts et pinces au sein d’une fenêtre d’affichage enfant configurée uniquement pour le défilement, l’entrée est promue au parent afin que le zoom se produise.</span><span class="sxs-lookup"><span data-stu-id="faa68-138">For example, when a user puts down two contacts and pinches within a child viewport configured only for scrolling, the input is promoted to the parent so that zooming occurs.</span></span> <span data-ttu-id="faa68-139">La promotion parente se produit, que le chaînage soit activé ou non sur la fenêtre d’affichage enfant.</span><span class="sxs-lookup"><span data-stu-id="faa68-139">Parent promotion occurs regardless of whether chaining is enabled on the child viewport.</span></span>

<span data-ttu-id="faa68-140">Contrairement au chaînage, la promotion parente n’est pas inversée.</span><span class="sxs-lookup"><span data-stu-id="faa68-140">Unlike chaining, parent promotion is not reversed.</span></span> <span data-ttu-id="faa68-141">La fenêtre d’affichage parent continue à traiter l’entrée d’interaction jusqu’à ce que tous les contacts soient levés (les fenêtres d’affichage enfants cessent de traiter l’entrée).</span><span class="sxs-lookup"><span data-stu-id="faa68-141">The parent viewport continues to process the interaction input until all contacts are lifted (child viewports stop processing the input).</span></span>
