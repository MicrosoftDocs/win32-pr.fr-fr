---
title: Utilisation de la récupération et du redémarrage de l’application
description: Une application peut utiliser la récupération et le redémarrage de l’application (ARR) pour enregistrer les données et les informations d’État avant la fermeture de l’application en raison d’une exception non gérée ou lorsque l’application cesse de répondre. L’application est également redémarrée, si nécessaire.
ms.assetid: 28cbb4c0-a287-4302-b3a9-daddc69adb40
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b0d5bf0b9bd0e0f6cc257ee785ab5df6febc8fef
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103842365"
---
# <a name="using-application-recovery-and-restart"></a><span data-ttu-id="10626-104">Utilisation de la récupération et du redémarrage de l’application</span><span class="sxs-lookup"><span data-stu-id="10626-104">Using Application Recovery and Restart</span></span>

<span data-ttu-id="10626-105">Une application peut utiliser la récupération et le redémarrage de l’application (ARR) pour enregistrer les données et les informations d’État avant la fermeture de l’application en raison d’une exception non gérée ou lorsque l’application cesse de répondre.</span><span class="sxs-lookup"><span data-stu-id="10626-105">An application can use Application Recovery and Restart (ARR) to save data and state information before the application exits due to an unhandled exception or when the application stops responding.</span></span> <span data-ttu-id="10626-106">L’application est également redémarrée, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="10626-106">The application is also restarted, if requested.</span></span>

<span data-ttu-id="10626-107">Lorsque vous vous inscrivez pour la récupération ou le redémarrage, les informations d’inscription sont ajoutées au processus.</span><span class="sxs-lookup"><span data-stu-id="10626-107">When you register for recovery or restart, the registration information is added to the process.</span></span> <span data-ttu-id="10626-108">[Rapport d’erreurs Windows (WER)](/windows/desktop/wer/windows-error-reporting) utilise les informations d’inscription pour appeler votre rappel de récupération et redémarrer votre application.</span><span class="sxs-lookup"><span data-stu-id="10626-108">[Windows Error Reporting (WER)](/windows/desktop/wer/windows-error-reporting) uses the registration information to call your recovery callback and restart your application.</span></span> <span data-ttu-id="10626-109">Par exemple, si vous vous inscrivez pour la récupération et que votre application rencontre une exception non gérée, WER affiche une boîte de dialogue à l’utilisateur qui donne à l’utilisateur la possibilité de rechercher une solution en ligne, de fermer le programme ou de déboguer le programme.</span><span class="sxs-lookup"><span data-stu-id="10626-109">For example, if you register for recovery and your application encounters an unhandled exception, WER displays a dialog to the user that gives the user the option of checking for a solution online, closing the program, or debugging the program.</span></span> <span data-ttu-id="10626-110">Si l’utilisateur choisit de rechercher une solution ou de fermer le programme, WER appelle le rappel inscrit et donne à l’application la possibilité d’enregistrer des données et des informations d’État.</span><span class="sxs-lookup"><span data-stu-id="10626-110">If the user chooses to either check for a solution or close the program, WER calls the registered callback and gives the application the chance to save data and state information.</span></span> <span data-ttu-id="10626-111">Une fois la récupération terminée, l’application est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="10626-111">When the recovery is complete, the application is terminated.</span></span>

<span data-ttu-id="10626-112">Si vous vous inscrivez au redémarrage et que votre application rencontre une exception non gérée, WER affiche la même boîte de dialogue à l’utilisateur, mais donne la possibilité de redémarrer le programme au lieu de fermer le programme.</span><span class="sxs-lookup"><span data-stu-id="10626-112">If you register for restart and your application encounters an unhandled exception, WER displays the same dialog to the user but gives the option of restarting the program instead of closing the program.</span></span> <span data-ttu-id="10626-113">Si vous vous inscrivez pour la récupération et le redémarrage, la récupération se produit en premier ; l’application est ensuite arrêtée et redémarrée.</span><span class="sxs-lookup"><span data-stu-id="10626-113">If you register for both recovery and restart, recovery occurs first; the application is then terminated and restarted.</span></span>

<span data-ttu-id="10626-114">Une application qui ne répond pas est traitée de la même façon.</span><span class="sxs-lookup"><span data-stu-id="10626-114">An unresponsive application is handled in a similar fashion.</span></span> <span data-ttu-id="10626-115">Une application est considérée comme ne répondant pas si elle ne répond pas aux messages Windows pendant cinq secondes et que l’utilisateur tente ensuite d’interagir avec l’application. l’utilisateur verra (ne répond pas) dans la barre de titre.</span><span class="sxs-lookup"><span data-stu-id="10626-115">An application is considered unresponsive if it does not respond to Windows messages for five seconds and the user then tries to interact with the application; the user will see (Not Responding) in the title bar.</span></span> <span data-ttu-id="10626-116">WER est activé quand l’utilisateur clique sur le bouton Fermer du système.</span><span class="sxs-lookup"><span data-stu-id="10626-116">WER is activated when the user clicks the system close button.</span></span>

<span data-ttu-id="10626-117">Vous devez vous inscrire pour la récupération ou le redémarrage, ou supprimer l’inscription, avant que l’application ne réponde ou qu’elle rencontre une exception non gérée.</span><span class="sxs-lookup"><span data-stu-id="10626-117">You must register for recovery or restart, or remove the registration, before the application becomes unresponsive or encounters an unhandled exception.</span></span> <span data-ttu-id="10626-118">Toutefois, dans votre rappel de récupération, vous pouvez modifier la ligne de commande de redémarrage.</span><span class="sxs-lookup"><span data-stu-id="10626-118">However, in your recovery callback, you can change the restart command line.</span></span>

<span data-ttu-id="10626-119">Pour plus d’informations sur l’inscription pour la récupération ou le redémarrage, consultez les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="10626-119">For details on registering for recovery or restart, see the following topics:</span></span>

-   [<span data-ttu-id="10626-120">Inscription pour la récupération d’application</span><span class="sxs-lookup"><span data-stu-id="10626-120">Registering for Application Recovery</span></span>](registering-for-application-recovery.md)
-   [<span data-ttu-id="10626-121">Inscription au redémarrage de l’application</span><span class="sxs-lookup"><span data-stu-id="10626-121">Registering for Application Restart</span></span>](registering-for-application-restart.md)

<span data-ttu-id="10626-122">Pour obtenir des exemples qui implémentent les fonctionnalités de récupération et de redémarrage, consultez les exemples AppRecovery et AppRestart dans le SDK Windows situé dans le \\ dossier WinBase WindowsErrorReporting.</span><span class="sxs-lookup"><span data-stu-id="10626-122">For samples that implement the recovery and restart features, see the AppRecovery and AppRestart samples in the Windows SDK located in the WinBase\\WindowsErrorReporting folder.</span></span>

 

 