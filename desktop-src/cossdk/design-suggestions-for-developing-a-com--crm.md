---
description: Suggestions de conception pour le développement d’un CRM COM+
ms.assetid: dde1b978-6d35-4a75-91fd-69dfcc6c43d2
title: Suggestions de conception pour le développement d’un CRM COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8dcdb59f0ea23fb6879300d0bacec7df12970d81
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104200982"
---
# <a name="design-suggestions-for-developing-a-com-crm"></a><span data-ttu-id="ac2ce-103">Suggestions de conception pour le développement d’un CRM COM+</span><span class="sxs-lookup"><span data-stu-id="ac2ce-103">Design Suggestions for Developing a COM+ CRM</span></span>

<span data-ttu-id="ac2ce-104">Voici les étapes suggérées pour le développement d’un CRM COM+ :</span><span class="sxs-lookup"><span data-stu-id="ac2ce-104">Following are suggested steps for developing a COM+ CRM:</span></span>

1.  <span data-ttu-id="ac2ce-105">Avant de commencer le développement, définissez le délai d’expiration de la transaction sur zéro (à l’aide de l’outil d’administration Services de composants).</span><span class="sxs-lookup"><span data-stu-id="ac2ce-105">Before starting development, set the transaction time-out to zero (using the Component Services administrative tool).</span></span> <span data-ttu-id="ac2ce-106">Définissez l’indicateur de Registre VTRACE1 (consultez [paramètres de Registre CRM com+](com--crm-registry-settings.md)) pour afficher les messages d’avertissement et d’erreur CRM sur la trace de débogage.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-106">Set the VTRACE1 registry flag (see [COM+ CRM Registry Settings](com--crm-registry-settings.md)) to see CRM warning and error messages on the debug trace.</span></span>
2.  <span data-ttu-id="ac2ce-107">Déterminez l’ensemble d’interfaces que vous devez utiliser, structuré (variantes) ou non structuré.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-107">Determine which set of interfaces you need to use, structured (Variants) or non-structured.</span></span> <span data-ttu-id="ac2ce-108">(Voir [interfaces CRM com+](com--crm-interfaces.md).) Cela dépend du langage que vous utilisez pour développer votre CRM, par exemple, Microsoft Visual C++ ou Microsoft Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-108">(See [COM+ CRM Interfaces](com--crm-interfaces.md).) This will depend on the language that you use to develop your CRM—for example, Microsoft Visual C++ or Microsoft Visual Basic.</span></span>
3.  <span data-ttu-id="ac2ce-109">Commencez par développer le travail CRM.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-109">Develop the CRM worker first.</span></span> <span data-ttu-id="ac2ce-110">Déterminez les informations requises dans les enregistrements de journal.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-110">Determine the information that is required in the log records.</span></span> <span data-ttu-id="ac2ce-111">Définissez les types d’enregistrements de journal requis et leur format.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-111">Define the types of log records required and their format.</span></span>
4.  <span data-ttu-id="ac2ce-112">Un compensateur CRM de débogage est fourni dans le cadre des exemples CRM (dans le SDK Windows).</span><span class="sxs-lookup"><span data-stu-id="ac2ce-112">A debug CRM compensator is provided as part of the CRM samples (in the Windows SDK).</span></span> <span data-ttu-id="ac2ce-113">Cela peut être utilisé temporairement lors du débogage du processus de travail CRM à la place du compensateur CRM réel.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-113">This can be used temporarily when debugging the CRM worker in place of the real CRM compensator.</span></span>
5.  <span data-ttu-id="ac2ce-114">Lorsque le processus de travail CRM fonctionne correctement, développez le compensateur CRM réel et remplacez le compensateur CRM de débogage par le compensateur CRM réel.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-114">When the CRM worker is working correctly, develop the real CRM compensator and replace the debug CRM compensator with the real CRM compensator.</span></span>
6.  <span data-ttu-id="ac2ce-115">Il peut être souhaitable de ne pas tester initialement le cas de récupération.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-115">It may be desirable to initially not test the recovery case.</span></span> <span data-ttu-id="ac2ce-116">Si c’est le cas, supprimez le fichier journal CRM de l’application CRM Server chaque fois avant de démarrer l’application CRM Server.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-116">If so, delete the CRM log file for the CRM server application each time before starting that CRM server application.</span></span>

## <a name="considerations"></a><span data-ttu-id="ac2ce-117">Considérations</span><span class="sxs-lookup"><span data-stu-id="ac2ce-117">Considerations</span></span>

1.  <span data-ttu-id="ac2ce-118">**Écrivez à l’avance.**</span><span class="sxs-lookup"><span data-stu-id="ac2ce-118">**Write ahead.**</span></span> <span data-ttu-id="ac2ce-119">Le composant de travail CRM doit écrire à l’avance ; autrement dit, il doit écrire un enregistrement de journal indiquant qu’il va exécuter une action avant d’effectuer cette action.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-119">The CRM worker component must write ahead; that is, it must write a log record indicating it is going to perform an action before actually performing that action.</span></span> <span data-ttu-id="ac2ce-120">En outre, cet enregistrement de journal doit être forcé sur le disque après l’écriture et avant l’exécution de l’action.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-120">In addition, this log record must be forced to disk after the write and before the action is performed.</span></span>
2.  <span data-ttu-id="ac2ce-121">**Isolation.**</span><span class="sxs-lookup"><span data-stu-id="ac2ce-121">**Isolation.**</span></span> <span data-ttu-id="ac2ce-122">Le CRM n’applique pas l’isolation.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-122">The CRM does not enforce isolation.</span></span> <span data-ttu-id="ac2ce-123">La conception CRM doit assurer l’isolation entre plusieurs clients sur des transactions distinctes et doit également prendre en compte le cas avant la récupération.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-123">The CRM design must provide isolation between multiple clients on separate transactions and must also consider the case prior to recovery.</span></span>
3.  <span data-ttu-id="ac2ce-124">**Récupération en cours.**</span><span class="sxs-lookup"><span data-stu-id="ac2ce-124">**Recovery in progress.**</span></span> <span data-ttu-id="ac2ce-125">Le processus de travail CRM doit gérer le code d’erreur « récupération en cours ».</span><span class="sxs-lookup"><span data-stu-id="ac2ce-125">The CRM worker must handle the "recovery in progress" error code.</span></span> <span data-ttu-id="ac2ce-126">Pour plus d’informations sur ce code d’erreur, consultez [résolution des problèmes liés à com+ CRM](troubleshooting-the-com--crm.md) .</span><span class="sxs-lookup"><span data-stu-id="ac2ce-126">See [Troubleshooting the COM+ CRM](troubleshooting-the-com--crm.md) for more information about this error code.</span></span>
4.  <span data-ttu-id="ac2ce-127">**Gestion des erreurs.**</span><span class="sxs-lookup"><span data-stu-id="ac2ce-127">**Error handling.**</span></span> <span data-ttu-id="ac2ce-128">Le processus de travail CRM doit faire face au cas où la transaction est abandonnée plus tôt que prévu.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-128">The CRM worker must cope with the case where the transaction is aborted earlier than expected.</span></span> <span data-ttu-id="ac2ce-129">Consultez la section [gestion des erreurs dans le CRM com+](error-handling-in-the-com--crm.md).</span><span class="sxs-lookup"><span data-stu-id="ac2ce-129">See the section [Error Handling in the COM+ CRM](error-handling-in-the-com--crm.md).</span></span>
5.  <span data-ttu-id="ac2ce-130">**Temps de récupération.**</span><span class="sxs-lookup"><span data-stu-id="ac2ce-130">**Recovery time.**</span></span> <span data-ttu-id="ac2ce-131">Le compensateur CRM doit être conçu pour effectuer une récupération rapide afin de ne pas avoir à attendre le nouveau travail de l’application CRM Server.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-131">The CRM compensator should be designed to perform recovery quickly so that new work for that CRM server application does not have to wait.</span></span>
6.  <span data-ttu-id="ac2ce-132">**L’idempotence.**</span><span class="sxs-lookup"><span data-stu-id="ac2ce-132">**Idempotence.**</span></span> <span data-ttu-id="ac2ce-133">Il est possible qu’un compensateur CRM reçoive à nouveau le même enregistrement de journal, pour annuler ou rétablir une action qui a déjà été annulée ou rétablie.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-133">It is possible that a CRM compensator might receive the same log record again, to undo or redo an action that has already been undone or redone.</span></span> <span data-ttu-id="ac2ce-134">Les actions que le compensateur CRM peut effectuer doivent être idempotent, ce qui signifie souvent que les codes d’erreur retournés par ces actions doivent être ignorés.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-134">Actions that the CRM compensator might perform must be idempotent, which often means that the error codes returned from these actions should be ignored.</span></span>
7.  <span data-ttu-id="ac2ce-135">**Lancement de la récupération.**</span><span class="sxs-lookup"><span data-stu-id="ac2ce-135">**Initiation of recovery.**</span></span> <span data-ttu-id="ac2ce-136">La récupération d’une application CRM Server est effectuée au démarrage de l’application CRM Server.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-136">Recovery of a CRM server application is performed when that CRM server application starts up.</span></span> <span data-ttu-id="ac2ce-137">Toutefois, il n’existe pas de démarrage automatique d’une application CRM Server.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-137">However, there is no automatic startup of a CRM server application.</span></span> <span data-ttu-id="ac2ce-138">Le développeur de l’application doit prendre en compte la façon dont le démarrage et la récupération doivent être initiés.</span><span class="sxs-lookup"><span data-stu-id="ac2ce-138">The application developer should consider how both startup and recovery should be initiated.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ac2ce-139">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="ac2ce-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ac2ce-140">Concepts de Gestionnaire des ressources de compensation COM+</span><span class="sxs-lookup"><span data-stu-id="ac2ce-140">COM+ Compensating Resource Manager Concepts</span></span>](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

 



