---
description: Vous pouvez utiliser le Gestionnaire des ressources CRM (Compensating Compensating) pour intégrer facilement et rapidement des ressources d’application à des transactions Microsoft Distributed Transaction Coordinator (DTC).
ms.assetid: 8d1d034f-8a09-40ae-842a-5251135bd3c8
title: Concepts de Gestionnaire des ressources de compensation COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14206a54ffcb4f7e06ddf7362736a722393b0791
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103950607"
---
# <a name="com-compensating-resource-manager-concepts"></a><span data-ttu-id="516e6-103">Concepts de Gestionnaire des ressources de compensation COM+</span><span class="sxs-lookup"><span data-stu-id="516e6-103">COM+ Compensating Resource Manager Concepts</span></span>

<span data-ttu-id="516e6-104">Vous pouvez utiliser le Gestionnaire des ressources CRM (Compensating Compensating) pour intégrer facilement et rapidement des ressources d’application à des transactions Microsoft Distributed Transaction Coordinator (DTC).</span><span class="sxs-lookup"><span data-stu-id="516e6-104">You can use the COM+ Compensating Resource Manager (CRM) to easily and quickly integrate application resources with Microsoft Distributed Transaction Coordinator (DTC) transactions.</span></span> <span data-ttu-id="516e6-105">Les ressources de votre application peuvent voter sur le résultat d’une transaction et peuvent recevoir la notification finale de ses résultats.</span><span class="sxs-lookup"><span data-stu-id="516e6-105">Your application resources can vote on the outcome of a transaction and can receive final notification of its outcome.</span></span> <span data-ttu-id="516e6-106">Un journal durable est généré afin que les ressources de votre application puissent écrire des enregistrements qui survivent aux échecs et que le CRM récupère ce fichier journal au redémarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="516e6-106">A durable log is generated so that your application resources can write records that survive failures, and the CRM recovers this log file when the application restarts.</span></span>

<span data-ttu-id="516e6-107">Un CRM comprend les deux composants suivants :</span><span class="sxs-lookup"><span data-stu-id="516e6-107">A CRM consists of the following two components:</span></span>

-   <span data-ttu-id="516e6-108">CRM Worker.</span><span class="sxs-lookup"><span data-stu-id="516e6-108">CRM Worker.</span></span> <span data-ttu-id="516e6-109">Ce composant effectue le travail principal du CRM spécifique et implémente une interface spécifique à la tâche qu’il doit effectuer.</span><span class="sxs-lookup"><span data-stu-id="516e6-109">This component performs the main work of the specific CRM and implements an interface specific to the task it needs to perform.</span></span> <span data-ttu-id="516e6-110">L’infrastructure CRM fournit une interface au processus de travail CRM par le biais duquel le processus de travail CRM peut écrire des enregistrements dans un fichier journal durable sur le disque.</span><span class="sxs-lookup"><span data-stu-id="516e6-110">The CRM infrastructure provides an interface to the CRM Worker through which the CRM Worker can write records to a durable log file on disk.</span></span> <span data-ttu-id="516e6-111">Le processus de travail CRM doit écrire des enregistrements dans le journal et les rendre durables avant d’effectuer son travail afin que, si un incident se produise, la récupération puisse se produire correctement.</span><span class="sxs-lookup"><span data-stu-id="516e6-111">The CRM Worker must write records to the log and make them durable before it performs its work so that, if a crash occurs, recovery can occur correctly.</span></span> <span data-ttu-id="516e6-112">Le processus de travail CRM requiert toujours une transaction.</span><span class="sxs-lookup"><span data-stu-id="516e6-112">The CRM Worker always requires a transaction.</span></span>
-   <span data-ttu-id="516e6-113">Compensateur CRM.</span><span class="sxs-lookup"><span data-stu-id="516e6-113">CRM Compensator.</span></span> <span data-ttu-id="516e6-114">Ce composant est créé par l’infrastructure CRM à l’issue de la transaction.</span><span class="sxs-lookup"><span data-stu-id="516e6-114">This component is created by the CRM infrastructure at the completion of the transaction.</span></span> <span data-ttu-id="516e6-115">Il implémente une interface définie par laquelle l’infrastructure CRM peut transmettre les notifications d’achèvement des transactions et les enregistrements de journal précédemment écrits par le processus de travail CRM.</span><span class="sxs-lookup"><span data-stu-id="516e6-115">It implements a defined interface by which the CRM infrastructure can pass on notifications of transaction completion and the log records that were previously written by the CRM Worker.</span></span>

<span data-ttu-id="516e6-116">Un CRM COM+ fournit une atomicité avec les notifications transactionnelles et la durabilité avec le journal CRM, mais ne permet pas l’isolation des ressources.</span><span class="sxs-lookup"><span data-stu-id="516e6-116">A COM+ CRM provides atomicity with transactional notifications, and durability with the CRM log, but does not provide isolation of resources.</span></span> <span data-ttu-id="516e6-117">Dans un environnement multithread, il incombe au développeur CRM de s’assurer que l’accès aux ressources, que ce soit par plusieurs Workers CRM ou applications externes, est sérialisé dans une transaction.</span><span class="sxs-lookup"><span data-stu-id="516e6-117">In a multithreaded environment, it is the responsibility of the CRM developer to ensure that access to resources, either by multiple CRM Workers or external applications, is serialized while in a transaction.</span></span>

<span data-ttu-id="516e6-118">Une fois que la transaction a dépassé la phase de préparation, le compensateur CRM et le CRM Workers peuvent s’exécuter simultanément.</span><span class="sxs-lookup"><span data-stu-id="516e6-118">After the transaction has passed the prepare phase, the CRM Compensator and CRM Workers can be running concurrently.</span></span> <span data-ttu-id="516e6-119">Il est possible que le composant de travail CRM d’une nouvelle transaction devienne actif alors que le compensateur CRM d’une transaction précédente traite toujours la transaction précédente.</span><span class="sxs-lookup"><span data-stu-id="516e6-119">It is possible for the CRM Worker component of a new transaction to become active while the CRM Compensator of a previous transaction is still processing the previous transaction.</span></span>

<span data-ttu-id="516e6-120">Pendant les défaillances avant la récupération de l’application CRM Server, une transaction interrompue doit être considérée comme active et non terminée.</span><span class="sxs-lookup"><span data-stu-id="516e6-120">During failures prior to recovery of the CRM server application, an interrupted transaction should be considered active and not complete.</span></span> <span data-ttu-id="516e6-121">Il ne devrait pas être possible pour les processus externes d’accéder aux ressources qui étaient modifiées par cette transaction avant la récupération du processus du serveur CRM.</span><span class="sxs-lookup"><span data-stu-id="516e6-121">It should not be possible for external processes to access the resources that were being changed by this particular transaction prior to recovery of the CRM server process.</span></span>

<span data-ttu-id="516e6-122">Le CRM définit trois types d’interface pour les fonctions CRM de base :</span><span class="sxs-lookup"><span data-stu-id="516e6-122">The CRM defines three interface types for the basic CRM functions:</span></span>

-   <span data-ttu-id="516e6-123">[**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) est implémenté sur le Clerk CRM et est utilisé par le processus de travail CRM pour écrire des enregistrements de journal dans le journal.</span><span class="sxs-lookup"><span data-stu-id="516e6-123">[**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) is implemented on the CRM clerk and is used by the CRM Worker to write log records to the log.</span></span> <span data-ttu-id="516e6-124">Il peut également être utilisé par le compensateur CRM.</span><span class="sxs-lookup"><span data-stu-id="516e6-124">It can also used by the CRM Compensator.</span></span>
-   <span data-ttu-id="516e6-125">[**ICrmCompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) et [**ICrmCompensatorVariants**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) sont implémentés sur le compensateur CRM.</span><span class="sxs-lookup"><span data-stu-id="516e6-125">[**ICrmCompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) and [**ICrmCompensatorVariants**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) are implemented on the CRM Compensator.</span></span> <span data-ttu-id="516e6-126">Ces interfaces sont utilisées pour fournir des notifications de résultat de transaction et leurs enregistrements de journal associés au compensateur CRM.</span><span class="sxs-lookup"><span data-stu-id="516e6-126">These interfaces are used to deliver transaction outcome notifications and their associated log records to the CRM Compensator.</span></span> <span data-ttu-id="516e6-127">Normalement, le compensateur CRM n’implémenterait qu’une seule de ces interfaces, selon qu’il a requis des enregistrements de journal non structurés ou structurés.</span><span class="sxs-lookup"><span data-stu-id="516e6-127">Normally, the CRM Compensator would implement only one of these interfaces, depending on whether it required unstructured or structured log records.</span></span> <span data-ttu-id="516e6-128">Les *enregistrements de journal structurés* sont ceux qui sont générés sous la forme d’une collection de variantes et qui sont généralement utilisés par Microsoft Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="516e6-128">*Structured log records* are those that are built up as a collection of Variants and are typically for use by Microsoft Visual Basic.</span></span> <span data-ttu-id="516e6-129">Les *enregistrements de journal non structurés* sont simplement une mémoire tampon d’octets et sont généralement utilisés par Microsoft Visual C++.</span><span class="sxs-lookup"><span data-stu-id="516e6-129">*Unstructured log records* are just a buffer of bytes and are typically for use by Microsoft Visual C++.</span></span> <span data-ttu-id="516e6-130">Un compensateur CRM peut implémenter les deux interfaces Compensator ; Toutefois, une seule à la fois est utilisée pour remettre les enregistrements de journal.</span><span class="sxs-lookup"><span data-stu-id="516e6-130">A CRM Compensator can implement both of the compensator interfaces; however, only one at a time is used to deliver log records.</span></span>
-   <span data-ttu-id="516e6-131">Les interfaces d’analyse CRM de COM+ sont utilisées pour analyser les données de gestion des données au sein d’une application serveur particulière.</span><span class="sxs-lookup"><span data-stu-id="516e6-131">The COM+ CRM monitoring interfaces are used for monitoring the CRMs within a particular server application.</span></span> <span data-ttu-id="516e6-132">Pour plus d’informations sur les interfaces de surveillance, consultez [interfaces de surveillance CRM com+](com--crm-monitoring-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="516e6-132">For detailed information about the monitoring interfaces, see [COM+ CRM Monitoring Interfaces](com--crm-monitoring-interfaces.md).</span></span>

<span data-ttu-id="516e6-133">Les rubriques suivantes de cette section fournissent plus de détails sur le service CRM COM+ :</span><span class="sxs-lookup"><span data-stu-id="516e6-133">The following topics in this section provide more detail about the COM+ CRM service:</span></span>

-   [<span data-ttu-id="516e6-134">Considérations sur la sécurité de COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="516e6-134">COM+ CRM Security Considerations</span></span>](com--crm-security-considerations.md)
-   [<span data-ttu-id="516e6-135">Processus de fonctionnement COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="516e6-135">COM+ CRM Operating Process</span></span>](com--crm-operating-process.md)
-   [<span data-ttu-id="516e6-136">Démarrage et récupération COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="516e6-136">COM+ CRM Startup and Recovery</span></span>](com--crm-startup-and-recovery.md)
-   [<span data-ttu-id="516e6-137">Utilisation du CRM COM+ dans un environnement de cluster</span><span class="sxs-lookup"><span data-stu-id="516e6-137">Using the COM+ CRM in a Cluster Environment</span></span>](using-the-com--crm-in-a-cluster-environment.md)
-   [<span data-ttu-id="516e6-138">Gestion des erreurs dans le CRM COM+</span><span class="sxs-lookup"><span data-stu-id="516e6-138">Error Handling in the COM+ CRM</span></span>](error-handling-in-the-com--crm.md)
-   [<span data-ttu-id="516e6-139">Paramètres du Registre CRM CRM</span><span class="sxs-lookup"><span data-stu-id="516e6-139">COM+ CRM Registry Settings</span></span>](com--crm-registry-settings.md)
-   [<span data-ttu-id="516e6-140">Résolution des problèmes liés à COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="516e6-140">Troubleshooting the COM+ CRM</span></span>](troubleshooting-the-com--crm.md)
-   [<span data-ttu-id="516e6-141">Suggestions de conception pour le développement d’un CRM COM+</span><span class="sxs-lookup"><span data-stu-id="516e6-141">Design Suggestions for Developing a COM+ CRM</span></span>](design-suggestions-for-developing-a-com--crm.md)
-   [<span data-ttu-id="516e6-142">Interfaces d’analyse CRM COM+</span><span class="sxs-lookup"><span data-stu-id="516e6-142">COM+ CRM Monitoring Interfaces</span></span>](com--crm-monitoring-interfaces.md)
-   [<span data-ttu-id="516e6-143">Interfaces CRM COM+</span><span class="sxs-lookup"><span data-stu-id="516e6-143">COM+ CRM Interfaces</span></span>](com--crm-interfaces.md)

## <a name="related-topics"></a><span data-ttu-id="516e6-144">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="516e6-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="516e6-145">Tâches de Gestionnaire des ressources de compensation COM+</span><span class="sxs-lookup"><span data-stu-id="516e6-145">COM+ Compensating Resource Manager Tasks</span></span>](com--compensating-resource-manager-tasks.md)
</dt> </dl>

 

 



