---
description: Sécurité des composants en file d’attente
ms.assetid: 3fbeb81a-e3e4-495b-b891-896877fab92f
title: Sécurité des composants en file d’attente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29b51592f6216d7380e877f2cd582a277f1583b8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104111026"
---
# <a name="queued-components-security"></a><span data-ttu-id="3674a-103">Sécurité des composants en file d’attente</span><span class="sxs-lookup"><span data-stu-id="3674a-103">Queued Components Security</span></span>

<span data-ttu-id="3674a-104">Lorsqu’un client effectue un appel de méthode à un objet mis en file d’attente, l’appel est en fait effectué à l’enregistreur, qui le configure dans le cadre d’un message sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="3674a-104">When a client makes a method call to a queued object, the call is actually made to the recorder, which packages it as part of a message to the server.</span></span> <span data-ttu-id="3674a-105">L’écouteur lit le message à partir de la file d’attente et le transmet au lecteur.</span><span class="sxs-lookup"><span data-stu-id="3674a-105">The listener reads the message from the queue and passes it to the player.</span></span> <span data-ttu-id="3674a-106">Le lecteur appelle le composant serveur réel et effectue le même appel de méthode.</span><span class="sxs-lookup"><span data-stu-id="3674a-106">The player invokes the actual server component and makes the same method call.</span></span> <span data-ttu-id="3674a-107">Le composant serveur doit observer le contexte de l’appel de sécurité du client (et non le contexte de l’appel de sécurité du lecteur) lorsque le joueur effectue l’appel de la méthode.</span><span class="sxs-lookup"><span data-stu-id="3674a-107">The server component must observe the security call context of the client (not the player's security call context) when the player makes the method call.</span></span> <span data-ttu-id="3674a-108">L’enregistreur marshale le contexte de l’appel de sécurité du client dans le message, et le lecteur le démarshale sur le serveur avant d’effectuer l’appel de la méthode.</span><span class="sxs-lookup"><span data-stu-id="3674a-108">The recorder marshals the client's security call context into the message, and the player unmarshals it at the server before making the method call.</span></span> <span data-ttu-id="3674a-109">En ce qui concerne l’objet serveur, il n’existe aucune différence dans le contexte de sécurité entre un appel direct du client et un appel indirect du joueur.</span><span class="sxs-lookup"><span data-stu-id="3674a-109">As far as the server object is concerned, there is no difference in security context between a direct call from the client and an indirect call from the player.</span></span> <span data-ttu-id="3674a-110">En particulier, les méthodes appelées s’exécutent avec les privilèges de l’expéditeur.</span><span class="sxs-lookup"><span data-stu-id="3674a-110">In particular, the methods invoked execute with the sender's privileges.</span></span>

<span data-ttu-id="3674a-111">Un composant COM+ mis en file d’attente prend en charge la sémantique de sécurité basée sur les rôles, tout comme les autres composants conçus pour être utilisés avec les applications COM+.</span><span class="sxs-lookup"><span data-stu-id="3674a-111">A COM+ queued component supports role-based security semantics just like other components built for use with COM+ applications.</span></span> <span data-ttu-id="3674a-112">Les composants d’une application en file d’attente peuvent donc utiliser les interfaces de programmation pour découvrir l’appartenance au rôle de leur appelant ([**ISecurityCallContext :: IsCallerInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-iscallerinrole)) ou un utilisateur spécifique ([**ISecurityCallContext :: IsUserInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-isuserinrole)).</span><span class="sxs-lookup"><span data-stu-id="3674a-112">Components of a queued application can therefore use programmatic interfaces to discover the role membership of their caller ([**ISecurityCallContext::IsCallerInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-iscallerinrole)) or a specific user ([**ISecurityCallContext::IsUserInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-isuserinrole)).</span></span> <span data-ttu-id="3674a-113">Il est recommandé que tous les composants en file d’attente présentant un impact potentiel sur la sécurité utilisent ces interfaces pour vérifier explicitement les informations d’identification de l’expéditeur.</span><span class="sxs-lookup"><span data-stu-id="3674a-113">It is recommended that any queued component with a potential security impact use these interfaces to explicitly check the sender's credentials.</span></span>

<span data-ttu-id="3674a-114">L’identité de l’appelant est l’identité associée à un appel de méthode.</span><span class="sxs-lookup"><span data-stu-id="3674a-114">The caller identity is the identity associated with a method call.</span></span> <span data-ttu-id="3674a-115">L’identité de l’appelant est utilisée par la sécurité basée sur les rôles et est présente dans le contexte de l’appel de sécurité.</span><span class="sxs-lookup"><span data-stu-id="3674a-115">Caller identity is used by role-based security and is present in the security call context.</span></span> <span data-ttu-id="3674a-116">Dans les composants en file d’attente, l’identité de l’appelant est représentée sous forme de données dans le message de Message Queuing.</span><span class="sxs-lookup"><span data-stu-id="3674a-116">In queued components, the caller identity is represented as data in the Message Queuing message.</span></span> <span data-ttu-id="3674a-117">Message Queuing authentifie l’identité de l’expéditeur du message.</span><span class="sxs-lookup"><span data-stu-id="3674a-117">Message Queuing authenticates the message sender identity.</span></span> <span data-ttu-id="3674a-118">Lorsque l’identité de l’appelant et l’identité de l’expéditeur du message sont identiques, Message Queuing authentifie le message et l’appelant.</span><span class="sxs-lookup"><span data-stu-id="3674a-118">When the caller identity and the message sender identity are the same, Message Queuing authenticates both the message and the caller.</span></span> <span data-ttu-id="3674a-119">Il s’agit du cas habituel.</span><span class="sxs-lookup"><span data-stu-id="3674a-119">This is the usual case.</span></span>

> [!Note]  
> <span data-ttu-id="3674a-120">Les composants COM+ en file d’attente ne prennent pas en charge la sécurité de type emprunt d’identité, ce qui permet à un serveur d’obtenir un jeton d’accès correspondant à l’identité du client et de l’utiliser pour effectuer des vérifications de contrôle d’accès ou pour agir dans le contexte de sécurité du client.</span><span class="sxs-lookup"><span data-stu-id="3674a-120">COM+ queued components does not support impersonation-style security, which allows a server to obtain an access token corresponding to the client identity and use it either to perform access control checks or to act under the client security context.</span></span>

 

<span data-ttu-id="3674a-121">Lorsque l’appelant d’un composant en file d’attente interagit avec le composant par le biais d’un enregistreur out-of-process, les identités de l’appelant et de l’expéditeur du message (enregistreur) peuvent être différentes.</span><span class="sxs-lookup"><span data-stu-id="3674a-121">When the caller of a queued component is interacting with the component through an out-of-process recorder, the identities of the caller and message sender (recorder) can be different.</span></span> <span data-ttu-id="3674a-122">Dans ce cas, les composants COM+ en file d’attente vérifient que l’expéditeur du message est membre du rôle d’utilisateur approuvé QC sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="3674a-122">In this case, COM+ queued components verifies that the message sender is a member of the QC Trusted User role on the server.</span></span> <span data-ttu-id="3674a-123">En outre, l’enregistreur out-of-process requiert un certificat d’authentification, car il est authentifié par Message Queuing.</span><span class="sxs-lookup"><span data-stu-id="3674a-123">Additionally, the out-of-process recorder requires an authentication certificate because it is being authenticated by Message Queuing.</span></span>

<span data-ttu-id="3674a-124">Les membres du rôle d’utilisateur approuvé QC sont autorisés à spécifier une identité arbitraire, ce qui signifie qu’un membre malveillant peut exécuter un appel de composant mis en file d’attente avec des privilèges élevés.</span><span class="sxs-lookup"><span data-stu-id="3674a-124">Members of the QC Trusted User role are allowed to specify an arbitrary identity, which means that a malicious member could execute a queued component call with elevated privileges.</span></span> <span data-ttu-id="3674a-125">Par conséquent, il est recommandé de conserver le nombre d’utilisateurs à un minimum absolu.</span><span class="sxs-lookup"><span data-stu-id="3674a-125">It is therefore recommended that the number of such users be kept to an absolute minimum.</span></span>

<span data-ttu-id="3674a-126">En raison du risque d’une attaque sophistiquée associée à un mécanisme qui propage l’identité sur un réseau, ainsi que le risque d’une attaque par déni de service simple en inondant les files d’attente avec des demandes non exécutables, il est recommandé de déployer le service composants en file d’attente COM+ uniquement sur un réseau d’hôtes approuvés, par exemple sur un réseau privé ou un réseau privé virtuel ou derrière un pare-feu configuré de manière appropriée.</span><span class="sxs-lookup"><span data-stu-id="3674a-126">Because of the risk of a sophisticated attack associated with any mechanism which propagates identity across a network, as well as the risk of a simple denial of service attack by flooding the queues with unexecutable requests, it is recommended that you deploy the COM+ queued components service only on a network of trusted hosts—for example, on a private network or a virtual private network, or behind an appropriately configured firewall.</span></span>

<span data-ttu-id="3674a-127">Les composants COM+ en file d’attente s’exécutent sur DCOM. vous pouvez ainsi protéger l’intégrité et le secret des appels de méthode en file d’attente en sélectionnant **confidentialité du paquet** comme **niveau d’authentification des appels** sous l’onglet **sécurité** de la feuille de **Propriétés** de votre application en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="3674a-127">COM+ queued components runs over DCOM, so you can help protect the integrity and secrecy of queued method calls by selecting **Packet Privacy** as the **Authentication Level of Calls** setting on the **Security** tab of your queued application's **Properties** sheet.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3674a-128">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="3674a-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3674a-129">Sécurité COM+</span><span class="sxs-lookup"><span data-stu-id="3674a-129">COM+ Security</span></span>](com--security.md)
</dt> <dt>

[<span data-ttu-id="3674a-130">Limitations de sécurité en mode groupe de travail</span><span class="sxs-lookup"><span data-stu-id="3674a-130">Security Limitations in Workgroup Mode</span></span>](security-limitations-in-workgroup-mode.md)
</dt> <dt>

[<span data-ttu-id="3674a-131">Spécification du protocole d’authentification</span><span class="sxs-lookup"><span data-stu-id="3674a-131">Specifying the Authentication Protocol</span></span>](specifying-the-authentication-protocol.md)
</dt> </dl>

 

 



