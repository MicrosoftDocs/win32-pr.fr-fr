---
description: COM+ tente d’éviter les situations dans lesquelles ces chemins d’erreurs doivent être exécutés sur un serveur.
ms.assetid: 0de125a2-2e91-49b9-a903-6c2e173e22a2
title: Concepts de la passerelle d’activation COM+ Low-Memory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 37d844a0492301ef067f5b3cd0e0749ec3a21779
ms.sourcegitcommit: bf526e267d3991892733bdd229c66d5365cf244a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/05/2021
ms.locfileid: "103953303"
---
# <a name="com-low-memory-activation-gates-concepts"></a><span data-ttu-id="0c854-103">Concepts de la passerelle d’activation COM+ Low-Memory</span><span class="sxs-lookup"><span data-stu-id="0c854-103">COM+ Low-Memory Activation Gates Concepts</span></span>

<span data-ttu-id="0c854-104">En règle générale, la synchronisation n’est pas requise lorsque vous avez un thread cloisonné (STA, Single-Threaded Apartment) car le cloisonnement fournit la synchronisation pour vous.</span><span class="sxs-lookup"><span data-stu-id="0c854-104">Generally, synchronization is not required when you have a single-threaded apartment (STA) because the apartment provides the synchronization for you.</span></span> <span data-ttu-id="0c854-105">La synchronisation devient importante lorsque vous avez un cloisonnement multithread (MTA) et un objet à thread libre.</span><span class="sxs-lookup"><span data-stu-id="0c854-105">Synchronization becomes important when you have a multithreaded apartment (MTA) and a free-threaded object.</span></span> <span data-ttu-id="0c854-106">Dans le passé, les objets à thread libre devaient gérer le verrouillage.</span><span class="sxs-lookup"><span data-stu-id="0c854-106">In the past, free-threaded objects have had to handle locking.</span></span> <span data-ttu-id="0c854-107">Vous pouvez éliminer la nécessité d’utiliser le verrouillage en définissant l’attribut de synchronisation d’un composant.</span><span class="sxs-lookup"><span data-stu-id="0c854-107">You can eliminate the need to use locking by setting the synchronization attribute for a component.</span></span>

<span data-ttu-id="0c854-108">Les problèmes de fiabilité se produisent souvent lorsque les ressources d’un serveur ne peuvent pas réagir efficacement aux pics de charge.</span><span class="sxs-lookup"><span data-stu-id="0c854-108">Reliability problems often occur when a server's resources cannot react efficiently to peak loads.</span></span> <span data-ttu-id="0c854-109">Lorsqu’un serveur ne dispose pas de suffisamment de ressources physiques pour répondre aux pics de demande, il peut épuiser la mémoire virtuelle.</span><span class="sxs-lookup"><span data-stu-id="0c854-109">When a server doesn't have enough physical resources to meet peak demand, it can exhaust virtual memory.</span></span> <span data-ttu-id="0c854-110">Cela devient problématique si le code utilisateur ou le code système ne gère pas correctement les échecs d’allocation de mémoire.</span><span class="sxs-lookup"><span data-stu-id="0c854-110">This becomes a problem if the user code or system code does not properly handle memory allocation failures.</span></span> <span data-ttu-id="0c854-111">Le serveur commence à ralentir et, comme la mémoire est épuisée, les allocations de mémoire échouent.</span><span class="sxs-lookup"><span data-stu-id="0c854-111">The server begins to slow down, and as memory is exhausted, memory allocations fail.</span></span> <span data-ttu-id="0c854-112">Le serveur exécute les chemins d’accès d’erreur pour gérer les échecs d’allocation.</span><span class="sxs-lookup"><span data-stu-id="0c854-112">The server executes error paths to handle the allocation failures.</span></span> <span data-ttu-id="0c854-113">Si un chemin d’accès d’erreur contient un bogue dans le code système ou utilisateur s’exécutant sur le serveur, il est extrêmement difficile de l’intercepter et de le gérer en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="0c854-113">If an error path contains a bug in the system or user code running on the server, it's extremely difficult to trap and handle safely.</span></span>

<span data-ttu-id="0c854-114">COM+ tente d’éviter les situations dans lesquelles ces chemins d’erreurs doivent être exécutés sur un serveur.</span><span class="sxs-lookup"><span data-stu-id="0c854-114">COM+ attempts to prevent situations in which these error paths have to be executed on a server.</span></span> <span data-ttu-id="0c854-115">Grâce à la fonctionnalité des portes d’activation de faible mémoire, COM+ surveille de manière proactive la charge mémoire dans le système et s’assure qu’une quantité raisonnable de mémoire est disponible avant l’exécution du code utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0c854-115">Through the low-memory activation gates feature, COM+ proactively monitors memory load in the system and ensures that a reasonable amount of memory is available before executing user code.</span></span> <span data-ttu-id="0c854-116">Si le pourcentage de mémoire virtuelle disponible pour l’application passe sous un seuil fixe, l’activation échoue avant la création d’une application ou d’un objet serveur COM+ (comme indiqué dans l’illustration ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="0c854-116">If the percentage of virtual memory available to the application falls below a fixed threshold, the activation fails before a COM+ server application or object is created (as shown in the illustration below).</span></span> <span data-ttu-id="0c854-117">En faisant échouer ces activations normalement exécutées, les portes d’activation de faible mémoire réduisent les problèmes liés aux allocations de mémoire dans le code utilisateur, ce qui améliore considérablement la fiabilité du système.</span><span class="sxs-lookup"><span data-stu-id="0c854-117">By failing these activations that would normally run, the low-memory activation gates feature minimizes the problems associated with memory allocations in user code, which significantly enhances system reliability.</span></span>

![Diagramme qui montre la relation entre une application COM+ et une porte d’activation de faible mémoire.](images/ada5ef02-f2b1-46bb-b0fc-fe7d65f31b43.png)

<span data-ttu-id="0c854-119">La fonctionnalité des portes d’activation de faible mémoire s’applique uniquement aux composants COM configurés qui sont installés dans une application COM+.</span><span class="sxs-lookup"><span data-stu-id="0c854-119">The low-memory activation gates feature applies only to configured COM components that are installed in a COM+ application.</span></span>

## <a name="how-the-low-memory-activation-gates-feature-works"></a><span data-ttu-id="0c854-120">Fonctionnement de la fonctionnalité portes d’activation Low-Memory</span><span class="sxs-lookup"><span data-stu-id="0c854-120">How the Low-Memory Activation Gates Feature Works</span></span>

<span data-ttu-id="0c854-121">La fonctionnalité des portes d’activation de faible mémoire utilise un niveau de seuil fixe différent selon le type d’activation.</span><span class="sxs-lookup"><span data-stu-id="0c854-121">The low-memory activation gates feature uses a different fixed threshold level depending on the type of activation.</span></span> <span data-ttu-id="0c854-122">Lors de la création d’une application serveur COM+, COM+ autorise l’activation si plus de 10% de la mémoire virtuelle est disponible.</span><span class="sxs-lookup"><span data-stu-id="0c854-122">When creating a COM+ server application, COM+ allows the activation if more than 10 percent of virtual memory is available.</span></span> <span data-ttu-id="0c854-123">Si moins de 10% sont disponibles, COM+ effectue une allocation de test pour déterminer si le fichier d’échange peut s’étendre pour s’adapter à la nouvelle charge mémoire.</span><span class="sxs-lookup"><span data-stu-id="0c854-123">If less than 10 percent is available, COM+ makes a test allocation to find out if the paging file can expand to accommodate the new memory load.</span></span> <span data-ttu-id="0c854-124">Si le fichier d’échange est développé, l’application serveur est créée.</span><span class="sxs-lookup"><span data-stu-id="0c854-124">If the paging file expands, the server application is created.</span></span> <span data-ttu-id="0c854-125">Si le fichier d’échange ne peut pas être développé, l’activation échoue et la mémoire n’est pas allouée.</span><span class="sxs-lookup"><span data-stu-id="0c854-125">If the paging file cannot be expanded, the activation fails and memory is not allocated.</span></span>

<span data-ttu-id="0c854-126">Le processus est similaire lors de la création d’un objet.</span><span class="sxs-lookup"><span data-stu-id="0c854-126">The process is similar when creating an object.</span></span> <span data-ttu-id="0c854-127">Dans ce cas, COM+ autorise l’activation si plus de 5% de la mémoire virtuelle est disponible.</span><span class="sxs-lookup"><span data-stu-id="0c854-127">In this case, COM+ allows the activation if more than 5 percent of virtual memory is available.</span></span> <span data-ttu-id="0c854-128">Si moins de 5% sont disponibles, COM+ effectue une allocation de test.</span><span class="sxs-lookup"><span data-stu-id="0c854-128">If less than 5 percent is available, COM+ proceeds with a test allocation.</span></span> <span data-ttu-id="0c854-129">Là encore, si l’allocation de test développe le fichier d’échange, l’objet est créé.</span><span class="sxs-lookup"><span data-stu-id="0c854-129">Again, if the test allocation expands the paging file, the object is created.</span></span> <span data-ttu-id="0c854-130">Si ce n’est pas le cas, l’activation échoue.</span><span class="sxs-lookup"><span data-stu-id="0c854-130">If not, the activation fails.</span></span>

<span data-ttu-id="0c854-131">Les niveaux de seuil fixe pour les portes d’activation de faible mémoire ne sont pas configurables actuellement.</span><span class="sxs-lookup"><span data-stu-id="0c854-131">The fixed threshold levels for low-memory activation gates are currently not configurable.</span></span> <span data-ttu-id="0c854-132">Pour cette raison, aucune tâche n’est associée à cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="0c854-132">For this reason, there are no tasks associated with this feature.</span></span>

 

 



