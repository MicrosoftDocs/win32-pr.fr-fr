---
title: Démarrage de la demande sur la version 2,0 files d’attente de demandes
description: .
ms.assetid: 84a744b7-1b0e-4fa7-8015-4840251aa856
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 78d618ea3fa38a856eba743d2bf60bfbfec9a633
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103941003"
---
# <a name="demand-start-on-version-20-request-queues"></a><span data-ttu-id="4c05b-103">Démarrage de la demande sur la version 2,0 files d’attente de demandes</span><span class="sxs-lookup"><span data-stu-id="4c05b-103">Demand Start on Version 2.0 Request Queues</span></span>

<span data-ttu-id="4c05b-104">La fonctionnalité de démarrage à la demande des files d’attente de requêtes de l’API de la version 2,0 du serveur HTTP permet à l’application de contrôleur de retarder l’instanciation du processus de travail jusqu’à ce que la première requête arrive dans la file</span><span class="sxs-lookup"><span data-stu-id="4c05b-104">The demand start feature of the HTTP Server version 2.0 API request queues allows controller application to delay worker process instantiation until the first request arrives on the request queue.</span></span> <span data-ttu-id="4c05b-105">Ainsi, les applications peuvent éviter de consommer des ressources jusqu’à ce qu’elles soient nécessaires.</span><span class="sxs-lookup"><span data-stu-id="4c05b-105">Thus, the applications can avoid consuming resources until they are required.</span></span> <span data-ttu-id="4c05b-106">Pour plus d’informations sur l’application de contrôleur, consultez la rubrique [file d’attente des demandes nommées](named-request-queue.md) .</span><span class="sxs-lookup"><span data-stu-id="4c05b-106">For more information about the controller application, see the [Named Request Queue](named-request-queue.md) topic.</span></span>

## <a name="asynchronous-demand-start"></a><span data-ttu-id="4c05b-107">Démarrage à la demande asynchrone</span><span class="sxs-lookup"><span data-stu-id="4c05b-107">Asynchronous Demand Start</span></span>

<span data-ttu-id="4c05b-108">L’application de contrôleur appelle [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) avec le descripteur de la file d’attente des demandes pour lancer une notification de démarrage de la demande.</span><span class="sxs-lookup"><span data-stu-id="4c05b-108">The controller application calls [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) with the handle to the request queue to initiate a demand start notification.</span></span> <span data-ttu-id="4c05b-109">Pour la saisie semi-automatique asynchrone, l’application fournit la structure OVERLAPPED dans le paramètre *pOverlapped* .</span><span class="sxs-lookup"><span data-stu-id="4c05b-109">For asynchronous completion, the application supplies the overlapped structure in the *pOverlapped* parameter.</span></span> <span data-ttu-id="4c05b-110">Quand **HttpWaitForDemandStart** est appelé de façon asynchrone, l’application de contrôleur est avertie lorsque la première demande arrive dans la file d’attente de demandes.</span><span class="sxs-lookup"><span data-stu-id="4c05b-110">When **HttpWaitForDemandStart** is called asynchronously, the controller application is notified when the first request arrives on the request queue.</span></span> <span data-ttu-id="4c05b-111">Une fois la notification de démarrage de la demande terminée, l’application de contrôleur peut s’inscrire pour une autre notification de démarrage de la demande dans la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4c05b-111">After the demand start notification completes, the controller application can register for another demand start notification on the request queue.</span></span>

<span data-ttu-id="4c05b-112">L’API du serveur HTTP n’autorise pas plus d’une notification de démarrage de demande simultanée pour une file d’attente de demandes.</span><span class="sxs-lookup"><span data-stu-id="4c05b-112">The HTTP Server API does not allow more than one simultaneous demand start notification for a request queue.</span></span> <span data-ttu-id="4c05b-113">Toutefois, lorsque la notification de démarrage de la demande en suspens se termine, l’application appelle à nouveau [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) pour démarrer plusieurs processus de travail dans la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4c05b-113">However, when the outstanding demand start notification completes, the application calls [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) again to start multiple worker processes on the request queue.</span></span> <span data-ttu-id="4c05b-114">HTTP n’applique pas de limitations sur le nombre de notifications de démarrage de la demande ou le nombre de processus de travail en attente dans la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4c05b-114">HTTP does not enforce limitations on the number of demand start notifications or the number of worker processes operating on the request queue.</span></span> <span data-ttu-id="4c05b-115">Toutefois, les applications de contrôleur peuvent appliquer le nombre de processus de travail autorisés dans une file d’attente de demandes.</span><span class="sxs-lookup"><span data-stu-id="4c05b-115">The controller applications can, however, enforce the number of worker processes allowed on a request queue.</span></span>

<span data-ttu-id="4c05b-116">L’API du serveur HTTP prend en charge l’annulation des appels [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) asynchrones.</span><span class="sxs-lookup"><span data-stu-id="4c05b-116">The HTTP Server API supports canceling asynchronous [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) calls.</span></span> <span data-ttu-id="4c05b-117">Les applications peuvent utiliser [**CancelIoEx**](/windows/desktop/FileIO/cancelioex-func) avec la structure OVERLAPPED fournie dans *pOverlapped*, pour annuler un appel **HttpWaitForDemandStart** en suspens.</span><span class="sxs-lookup"><span data-stu-id="4c05b-117">Applications can use [**CancelIoEx**](/windows/desktop/FileIO/cancelioex-func) with the overlapped structure supplied in *pOverlapped*, to cancel an outstanding **HttpWaitForDemandStart** call.</span></span>

## <a name="synchronous-demand-start"></a><span data-ttu-id="4c05b-118">Démarrage à la demande synchrone</span><span class="sxs-lookup"><span data-stu-id="4c05b-118">Synchronous Demand Start</span></span>

<span data-ttu-id="4c05b-119">Le démarrage de la demande synchrone n’est pas recommandé, car l’application se bloque jusqu’à ce qu’une requête arrive dans la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4c05b-119">Synchronous demand start is not recommended because the application blocks until a request arrives on the request queue.</span></span>

 

 