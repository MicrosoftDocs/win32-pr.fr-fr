---
title: Mise en cache des informations d'identification
description: Mise en cache des informations d'identification
ms.assetid: 6e411333-56fa-455b-a90a-f2b54f3c9545
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 34a139d0cd90495de87f42de08687fd3157acaf6
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "103940153"
---
# <a name="credential-caching"></a><span data-ttu-id="fadf0-103">Mise en cache des informations d'identification</span><span class="sxs-lookup"><span data-stu-id="fadf0-103">Credential Caching</span></span>

## <a name="credential-caching-on-ntlm-ka-connections"></a><span data-ttu-id="fadf0-104">Mise en cache des informations d’identification sur des connexions KA NTLM</span><span class="sxs-lookup"><span data-stu-id="fadf0-104">Credential Caching on NTLM KA Connections</span></span>

<span data-ttu-id="fadf0-105">L’API du serveur HTTP met en cache les informations d’identification uniquement sur des connexions Keep-Alive (KA) pour l’authentification NTLM.</span><span class="sxs-lookup"><span data-stu-id="fadf0-105">The HTTP Server API caches credentials only on Keep-Alive (KA) connections for NTLM authentication.</span></span> <span data-ttu-id="fadf0-106">Par défaut, l’API du serveur HTTP met en cache les informations d’identification obtenues lors de la première demande envoyée sur une connexion KA.</span><span class="sxs-lookup"><span data-stu-id="fadf0-106">By default, the HTTP Server API caches the credentials obtained on the first request sent on a KA connection.</span></span> <span data-ttu-id="fadf0-107">Le client peut envoyer des demandes suivantes sur des connexions KA sans en-tête d’autorisation et obtenir l’authentification en fonction du contexte établi précédemment.</span><span class="sxs-lookup"><span data-stu-id="fadf0-107">The client can send subsequent requests on KA connections without an authorization header and obtain authentication based on the previously established context.</span></span> <span data-ttu-id="fadf0-108">Dans ce cas, l’API du serveur HTTP envoie le jeton en fonction des informations d’identification mises en cache à l’application.</span><span class="sxs-lookup"><span data-stu-id="fadf0-108">In this case, the HTTP Server API sends the token based on the cached credential to the application.</span></span> <span data-ttu-id="fadf0-109">Les informations d’identification pour une demande envoyée par un proxy ne sont pas mises en cache.</span><span class="sxs-lookup"><span data-stu-id="fadf0-109">Credentials for a request sent by a proxy are not cached.</span></span> <span data-ttu-id="fadf0-110">L’application désactive la mise en cache des informations d’identification NTLM en définissant l’indicateur **DisableNTLMCredentialCaching** dans la structure des [**\_ \_ \_ informations d’authentification du serveur http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) fournie dans les appels à HttpSetServerSessionProperty ou HttpSetUrlGroupProperty.</span><span class="sxs-lookup"><span data-stu-id="fadf0-110">The application disables NTLM credential caching by setting the **DisableNTLMCredentialCaching** flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure that is supplied in calls to HttpSetServerSessionProperty or HttpSetUrlGroupProperty.</span></span> <span data-ttu-id="fadf0-111">Lorsque la mise en cache des informations d’identification est désactivée, l’API du serveur HTTP ignore les informations d’identification mises en cache et effectue l’authentification pour chaque demande</span><span class="sxs-lookup"><span data-stu-id="fadf0-111">When credential caching is disabled, the HTTP Server API discards the cached credentials and performs authentication for each request</span></span>

## <a name="ntlm-credential-caching-for-specific-urls"></a><span data-ttu-id="fadf0-112">Mise en cache des informations d’identification NTLM pour des URL spécifiques</span><span class="sxs-lookup"><span data-stu-id="fadf0-112">NTLM Credential Caching for Specific URLs</span></span>

<span data-ttu-id="fadf0-113">L’application détermine si les informations d’identification de la demande retournées par l’API du serveur HTTP sont mises en cache en inspectant le paramètre flags de la structure des informations d’authentification de la \_ requête HTTP \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="fadf0-113">The application determines if the request credentials returned by the HTTP Server API are cached by inspecting the Flags parameter of the HTTP\_REQUEST\_AUTH\_INFO structure.</span></span> <span data-ttu-id="fadf0-114">Ce paramètre indique \_ \_ \_ \_ \_ le jeton d’indicateur d’authentification de la requête HTTP pour le \_ cred mis en cache \_ lorsque le jeton NTLM retourné a été récupéré à partir du cache.</span><span class="sxs-lookup"><span data-stu-id="fadf0-114">This parameter indicates HTTP\_REQUEST\_AUTH\_FLAG\_TOKEN\_FOR\_CACHED\_CRED when the returned NTLM token was retrieved from the cache.</span></span> <span data-ttu-id="fadf0-115">La mise en cache des informations d’identification est spécifiée sur un groupe d’URL pour toutes les URL du groupe.</span><span class="sxs-lookup"><span data-stu-id="fadf0-115">Credential caching is specified on a URL group for all the URLs in the group.</span></span> <span data-ttu-id="fadf0-116">La mise en cache des informations d’identification par URL n’est pas prise en charge. Toutefois, les applications peuvent déterminer s’il faut accepter ou rejeter les informations d’identification mises en cache par URL en vérifiant le \_ \_ jeton d’indicateur d’authentification de la requête HTTP \_ pour l' \_ \_ \_ indicateur cred mis en cache \_ dans la structure des informations d’authentification de la \_ requête HTTP \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="fadf0-116">Credential caching on a per URL basis is not supported, however, applications can determine whether to accept or reject cached credentials on a per URL basis by checking the HTTP\_REQUEST\_AUTH\_FLAG\_TOKEN\_FOR\_CACHED\_CRED flag in the HTTP\_REQUEST\_AUTH\_INFO structure.</span></span> <span data-ttu-id="fadf0-117">L’application rejette les informations d’identification mises en cache en envoyant une demande d’authentification 401 au client.</span><span class="sxs-lookup"><span data-stu-id="fadf0-117">The application rejects the cached credentials by sending a 401 authentication challenge to the client.</span></span> <span data-ttu-id="fadf0-118">Le client renvoie ensuite la demande avec les en-têtes d’autorisation, en déclenchant une nouvelle négociation d’authentification avec l’API du serveur HTTP.</span><span class="sxs-lookup"><span data-stu-id="fadf0-118">The client then resends the request with the authorization headers, triggering a new authentication handshake with the HTTP Server API.</span></span>

## <a name="basic-authentication"></a><span data-ttu-id="fadf0-119">Authentification de base</span><span class="sxs-lookup"><span data-stu-id="fadf0-119">Basic Authentication</span></span>

<span data-ttu-id="fadf0-120">Lorsqu’un en-tête d’authentification de base est inclus dans la demande, l’API du serveur HTTP analyse l’en-tête pour obtenir le nom d’utilisateur et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="fadf0-120">When a Basic authentication header is included in the request, the HTTP Server API parses the header to obtain the user name and password.</span></span> <span data-ttu-id="fadf0-121">Le nom d’utilisateur est ensuite analysé dans les parties utilisateur et domaine.</span><span class="sxs-lookup"><span data-stu-id="fadf0-121">The user name is then parsed into the user and domain portions.</span></span> <span data-ttu-id="fadf0-122">L’API du serveur HTTP met en cache le jeton d’accès, obtenu pour l’authentification de base, en fonction du nom d’utilisateur et de la clé de domaine.</span><span class="sxs-lookup"><span data-stu-id="fadf0-122">The HTTP Server API caches the access token, obtained for Basic authentication, based on the user name and domain key.</span></span> <span data-ttu-id="fadf0-123">Lorsqu’une nouvelle demande est reçue, l’API du serveur HTTP récupère le jeton d’accès en fonction du nom d’utilisateur et du domaine.</span><span class="sxs-lookup"><span data-stu-id="fadf0-123">When a new request is received, the HTTP Server API retrieves the access token based on the user name and domain.</span></span> <span data-ttu-id="fadf0-124">Le mot de passe de la demande est ensuite comparé au mot de passe mis en cache.</span><span class="sxs-lookup"><span data-stu-id="fadf0-124">The password in the request is then checked against the cached password.</span></span> <span data-ttu-id="fadf0-125">Le jeton d’accès mis en cache est supprimé lorsque la limite de durée de vie (TTL) est atteinte.</span><span class="sxs-lookup"><span data-stu-id="fadf0-125">The cached access token is deleted when the time-to-live (TTL) limit is reached.</span></span>

 

 




