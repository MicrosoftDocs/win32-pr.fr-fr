---
title: Traitement des inscriptions
description: Les API de serveur HTTP utilisent la base de données de routage pour appliquer les vérifications d’accès pendant les inscriptions.
ms.assetid: d72aa213-b8e8-4fe9-b98c-41114d2cea56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7c1e02d2511d9967454d5cbddd93b2c0380d1172
ms.sourcegitcommit: 73417d55867c804274a55abe5ca71bcba7006119
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/20/2020
ms.locfileid: "104463902"
---
# <a name="processing-registrations"></a><span data-ttu-id="4f88d-103">Traitement des inscriptions</span><span class="sxs-lookup"><span data-stu-id="4f88d-103">Processing Registrations</span></span>

<span data-ttu-id="4f88d-104">Les API de serveur HTTP utilisent la base de données de routage pour appliquer les vérifications d’accès pendant les inscriptions.</span><span class="sxs-lookup"><span data-stu-id="4f88d-104">The HTTP Server APIs use the routing database to apply access checks during registrations.</span></span> <span data-ttu-id="4f88d-105">Une inscription pour un [URLPrefix](urlprefix-strings.md) doit transmettre une série de vérifications d’accès pour s’assurer que l’utilisateur qui s’inscrit pour l’espace de noms dispose des droits d’accès.</span><span class="sxs-lookup"><span data-stu-id="4f88d-105">A registration for a [UrlPrefix](urlprefix-strings.md) must pass a series of access checks to ensure that the user registering for the namespace has access rights.</span></span> <span data-ttu-id="4f88d-106">Utilisez la fonction [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) pour ajouter une nouvelle inscription.</span><span class="sxs-lookup"><span data-stu-id="4f88d-106">Use the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function to add a new registration.</span></span>

<span data-ttu-id="4f88d-107">**Pour ajouter une nouvelle inscription avec HttpAddUrl**</span><span class="sxs-lookup"><span data-stu-id="4f88d-107">**To add a new registration with HttpAddUrl**</span></span>

1.  <span data-ttu-id="4f88d-108">Si le numéro de port dans le UrlPrefix a des réservations ou des inscriptions pour un schéma différent du schéma dans le UrlPrefix, l’inscription échoue.</span><span class="sxs-lookup"><span data-stu-id="4f88d-108">If the port number in the UrlPrefix has reservations or registrations for a scheme different from the scheme in the UrlPrefix, the registration fails.</span></span> <span data-ttu-id="4f88d-109">Les protocoles HTTP et HTTPs ne peuvent pas être pris en charge sur le même port.</span><span class="sxs-lookup"><span data-stu-id="4f88d-109">HTTP and HTTPS cannot be supported on the same port.</span></span>
2.  <span data-ttu-id="4f88d-110">L’inscription est distante dans le compartiment approprié pour l’inscription.</span><span class="sxs-lookup"><span data-stu-id="4f88d-110">The registration is slotted into the appropriate bucket for the registration.</span></span> <span data-ttu-id="4f88d-111">Les compartiments sont basés sur le type d’hôte de l’URL, comme indiqué dans la section [routage des demandes entrantes](routing-incoming-requests.md) .</span><span class="sxs-lookup"><span data-stu-id="4f88d-111">The buckets are based on the host type of the URL as outlined in the [Routing Incoming Requests](routing-incoming-requests.md) section.</span></span> <span data-ttu-id="4f88d-112">Les étapes suivantes sont relatives à ce compartiment particulier.</span><span class="sxs-lookup"><span data-stu-id="4f88d-112">The following steps are relative to this particular bucket.</span></span>
3.  <span data-ttu-id="4f88d-113">Si une entrée d’inscription en double existe, retourne un code d’erreur.</span><span class="sxs-lookup"><span data-stu-id="4f88d-113">If a duplicate registration entry exists, return an error code.</span></span>
4.  <span data-ttu-id="4f88d-114">Sélectionnez entrées de réservation avec des composants de schéma, d’hôte et de port qui sont égaux à ceux de l’UrlPrefix.</span><span class="sxs-lookup"><span data-stu-id="4f88d-114">Select reservation entries with scheme, host and port components that are equal to those of the UrlPrefix.</span></span> <span data-ttu-id="4f88d-115">À partir de celles-ci, localisez l’entrée avec la correspondance **relativeUri** la plus longue.</span><span class="sxs-lookup"><span data-stu-id="4f88d-115">From these, locate the entry with the longest **relativeUri** match.</span></span> <span data-ttu-id="4f88d-116">Si l’entrée existe, vérifiez les autorisations en fonction de la liste de contrôle d’accès associée à cette entrée et revenez à la réussite.</span><span class="sxs-lookup"><span data-stu-id="4f88d-116">If the entry exists, check permissions based on the ACL associated with that entry and return success.</span></span> <span data-ttu-id="4f88d-117">Si l’entrée n’existe pas, retourne un code d’erreur \_ déjà \_ existant.</span><span class="sxs-lookup"><span data-stu-id="4f88d-117">If the entry does not exist, return an ERROR\_ALREADY\_EXISTS code.</span></span>

<span data-ttu-id="4f88d-118">Les exemples suivants illustrent le processus d’installation d’une inscription dans la base de données de routage.</span><span class="sxs-lookup"><span data-stu-id="4f88d-118">The following examples illustrate the process to install a registration in the routing database.</span></span> <span data-ttu-id="4f88d-119">Les réservations 1 et 2 existent dans la base de données de routage.</span><span class="sxs-lookup"><span data-stu-id="4f88d-119">Reservations 1 and 2 exist in the routing database.</span></span>

-   <span data-ttu-id="4f88d-120">Réservation 1 : `https://+:80/vroot/subdir/` pour l’utilisateur A et l’utilisateur C. Cette réservation est placée dans le compartiment « + ».</span><span class="sxs-lookup"><span data-stu-id="4f88d-120">Reservation 1: `https://+:80/vroot/subdir/` for User A and User C. This reservation is placed in the "+" bucket.</span></span>
-   <span data-ttu-id="4f88d-121">Réservation 2 : `https://adatum.com:80/vroot/` pour l’utilisateur B. Cette réservation est placée dans le compartiment « hôte explicite ».</span><span class="sxs-lookup"><span data-stu-id="4f88d-121">Reservation 2: `https://adatum.com:80/vroot/` for User B. This reservation is placed in the "Explicit Host" bucket.</span></span>
-   <span data-ttu-id="4f88d-122">Inscription : `https://+:80/vroot/subdir/` par l’utilisateur B échoue en raison de la réservation 1.</span><span class="sxs-lookup"><span data-stu-id="4f88d-122">Registration: `https://+:80/vroot/subdir/` by User B fails due to reservation 1.</span></span>
-   <span data-ttu-id="4f88d-123">Inscription : `https://adatum.com:80/vroot/subdir/` par l’utilisateur B a échoué en raison de la réservation 2.</span><span class="sxs-lookup"><span data-stu-id="4f88d-123">Registration: `https://adatum.com:80/vroot/subdir/` by User B succeeds due to reservation 2.</span></span>
-   <span data-ttu-id="4f88d-124">Inscription : `https://adatum.com:80/vroot/subdir/` par l’utilisateur C échoue en raison de la réservation plus explicite 2.</span><span class="sxs-lookup"><span data-stu-id="4f88d-124">Registration: `https://adatum.com:80/vroot/subdir/` by User C fails due to the more explicit reservation 2.</span></span> <span data-ttu-id="4f88d-125">La réservation de caractères génériques forts n’a pas de sens dans le contexte de la réservation ou de l’inscription explicite.</span><span class="sxs-lookup"><span data-stu-id="4f88d-125">The strong wildcard reservation does not have meaning within the context of the explicit reservation or registration.</span></span>
-   <span data-ttu-id="4f88d-126">Inscription : `https://+:80/vroot/subdir/` par l’utilisateur A s’est correctement déroulée en raison de la réservation 1.</span><span class="sxs-lookup"><span data-stu-id="4f88d-126">Registration: `https://+:80/vroot/subdir/` by User A succeeds due to reservation 1.</span></span>
-   <span data-ttu-id="4f88d-127">Inscription : `https://adatum.com:80/vroot/anotherdir/` par l’utilisateur B a échoué en raison de la réservation 2.</span><span class="sxs-lookup"><span data-stu-id="4f88d-127">Registration: `https://adatum.com:80/vroot/anotherdir/` by User B succeeds due to reservation 2.</span></span>

<span data-ttu-id="4f88d-128">Le contrôle d’accès pour l’inscription n’inclut pas les vérifications des privilèges de délégation.</span><span class="sxs-lookup"><span data-stu-id="4f88d-128">The access check for registration does not include checks for delegation privileges.</span></span> <span data-ttu-id="4f88d-129">Il n’y a pas de contrôles d’accès basés sur des réservations (voir [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span><span class="sxs-lookup"><span data-stu-id="4f88d-129">There are no access checks based on reservations (see [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span></span> <span data-ttu-id="4f88d-130">La seule exigence pour supprimer une inscription au processus appelant doit avoir créé l’inscription.</span><span class="sxs-lookup"><span data-stu-id="4f88d-130">The only requirement for deleting a registration us that the calling process must have created the registration.</span></span>

 

 




