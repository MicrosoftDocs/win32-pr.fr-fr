---
title: File d’attente des demandes nommées
description: File d’attente des demandes nommées
ms.assetid: d0686a9b-fc3d-4b69-b083-d04b35ce5b50
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4aca045f84fe9f9e4b57365ba8831456f2dc1ad
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104311095"
---
# <a name="named-request-queue"></a><span data-ttu-id="4b11a-103">File d’attente des demandes nommées</span><span class="sxs-lookup"><span data-stu-id="4b11a-103">Named Request Queue</span></span>

<span data-ttu-id="4b11a-104">La fonctionnalité de la file d’attente des demandes du serveur HTTP version 2,0 autorise plusieurs applications, fonctionnant sous des processus et des comptes d’utilisateur distincts, à accéder à la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-104">The HTTP Server version 2.0 API named request queue feature allows multiple applications, operating under separate processes and user accounts, access to the request queue.</span></span> <span data-ttu-id="4b11a-105">La file d’attente des demandes est ouverte par nom et sécurisée à l’aide de listes de Access Control (ACL) pour s’assurer que les applications ne sont pas en mesure d’accéder aux données des autres.</span><span class="sxs-lookup"><span data-stu-id="4b11a-105">The request queue is opened by name, and secured using Access Control Lists (ACLs) to ensure that applications are not able to access each others data.</span></span> <span data-ttu-id="4b11a-106">Un processus unique crée la file d’attente de demandes et accorde l’autorisation à d’autres processus d’utiliser la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-106">A single process creates the request queue, and grants permission to other processes to use the request queue.</span></span> <span data-ttu-id="4b11a-107">Ainsi, d’autres processus sur l’ordinateur accèdent à la file d’attente des demandes avec les privilèges minimum nécessaires pour traiter les demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-107">Thus, other processes on the computer access the request queue with the least privilege necessary to service requests.</span></span> <span data-ttu-id="4b11a-108">Les dommages possibles au service HTTP, en raison de vulnérabilités dans le code tiers, sont minimisés lorsque les applications s’exécutent avec des privilèges minimum.</span><span class="sxs-lookup"><span data-stu-id="4b11a-108">Possible damage to the HTTP service, due to vulnerabilities in third party code, is minimized when applications are running under least privileges.</span></span>

<span data-ttu-id="4b11a-109">La file d’attente des demandes nommées est créée avec la fonction [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) .</span><span class="sxs-lookup"><span data-stu-id="4b11a-109">The named request queue is created with the [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) function.</span></span> <span data-ttu-id="4b11a-110">Lorsque la file d’attente de demandes est créée, l’application spécifie la liste de contrôle d’accès dans le paramètre *pSecurityAttribute* .</span><span class="sxs-lookup"><span data-stu-id="4b11a-110">When the request queue is created, the application specifies the ACL in the *pSecurityAttribute* parameter.</span></span> <span data-ttu-id="4b11a-111">La liste de contrôle d’accès, qui peut être définie uniquement lorsque la file d’attente des demandes est créée, permet aux processus de travail d’ouvrir la file d’attente des demandes, de recevoir des demandes et d’envoyer des réponses.</span><span class="sxs-lookup"><span data-stu-id="4b11a-111">The ACL, which can only be set when the request queue is created, allows worker processes to open the request queue, receive requests, and send responses.</span></span> <span data-ttu-id="4b11a-112">Par défaut, les processus ne sont pas autorisés à ouvrir une file d’attente de demandes, sauf s’ils ont reçu l’autorisation dans la liste de contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="4b11a-112">By default, processes are not allowed to open a request queue unless they have been granted permission in the ACL.</span></span> <span data-ttu-id="4b11a-113">Les applications ne requièrent pas de privilèges d’administrateur pour créer la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-113">Applications do not require administrative privileges to create the request queue.</span></span>

<span data-ttu-id="4b11a-114">La file d’attente des demandes doit être créée avec un nom spécifié dans le paramètre *pname* de [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) pour permettre à d’autres processus d’ouvrir la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-114">The request queue must be created with a name specified in the *pName* parameter of [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) for other processes to open the request queue.</span></span> <span data-ttu-id="4b11a-115">Si *pname* a la **valeur null**, une file d’attente de demandes sans nom est créée et aucun autre processus ne peut l’ouvrir.</span><span class="sxs-lookup"><span data-stu-id="4b11a-115">If *pName* is **NULL**, an unnamed request queue is created and no other processes can open it.</span></span>

## <a name="creator-and-controller-processes"></a><span data-ttu-id="4b11a-116">Processus de création et de contrôleur</span><span class="sxs-lookup"><span data-stu-id="4b11a-116">Creator and Controller Processes</span></span>

<span data-ttu-id="4b11a-117">Lorsque la file d’attente de demandes est créée, l’application peut l’ouvrir en tant que processus de contrôleur ou processus de création.</span><span class="sxs-lookup"><span data-stu-id="4b11a-117">When the request queue is created, the application can open it as a controller process or a creator process.</span></span> <span data-ttu-id="4b11a-118">Les processus du contrôleur et du créateur agissent en tant qu’administrateurs pour la file d’attente des demandes, mais le contrôleur n’effectue pas d’opérations d’e/s sur celui-ci.</span><span class="sxs-lookup"><span data-stu-id="4b11a-118">The controller and creator processes both act as administrators for the request queue, but the controller does not perform I/O operations on it.</span></span> <span data-ttu-id="4b11a-119">L’application indique qu’il s’agit d’un processus de contrôleur lorsque la file d’attente des demandes est créée en spécifiant le [](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue)contrôleur de balises de la **\_ \_ \_ file d’attente \_ \_ des demandes http Create** dans le paramètre *Flags* de HttpCreateRequestQueue.</span><span class="sxs-lookup"><span data-stu-id="4b11a-119">The application indicates that it is a controller process when the request queue is created by specifying **HTTP\_CREATE\_REQUEST\_QUEUE\_FLAG\_CONTROLLER** in the *Flags* parameter of [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue).</span></span> <span data-ttu-id="4b11a-120">Si l’indicateur de contrôleur de l’indicateur de la **\_ \_ \_ file d’attente \_ \_ des demandes http Create** n’est pas défini, l’application est un processus de création.</span><span class="sxs-lookup"><span data-stu-id="4b11a-120">If the **HTTP\_CREATE\_REQUEST\_QUEUE\_FLAG\_CONTROLLER** flag is not set, the application is a creator process.</span></span>

<span data-ttu-id="4b11a-121">La liste suivante contient les tâches effectuées par le processus du contrôleur et le processus de création :</span><span class="sxs-lookup"><span data-stu-id="4b11a-121">The following list contains tasks performed by the controller process and the creator process:</span></span>

-   <span data-ttu-id="4b11a-122">Créez la file d’attente des demandes et spécifiez le nom.</span><span class="sxs-lookup"><span data-stu-id="4b11a-122">Create the request queue and specify the name.</span></span>
-   <span data-ttu-id="4b11a-123">Configurez la file d’attente des demandes à l’aide de la fonction [**HttpSetRequestQueueProperty**](/windows/desktop/api/Http/nf-http-httpsetrequestqueueproperty) .</span><span class="sxs-lookup"><span data-stu-id="4b11a-123">Configure the request queue using the [**HttpSetRequestQueueProperty**](/windows/desktop/api/Http/nf-http-httpsetrequestqueueproperty) function.</span></span>
-   <span data-ttu-id="4b11a-124">Interrogez les paramètres de configuration de la file d’attente des demandes à l’aide de la fonction [**HttpQueryRequestQueueProperty**](/windows/desktop/api/Http/nf-http-httpqueryrequestqueueproperty) .</span><span class="sxs-lookup"><span data-stu-id="4b11a-124">Query the request queue configuration parameters using the [**HttpQueryRequestQueueProperty**](/windows/desktop/api/Http/nf-http-httpqueryrequestqueueproperty) function.</span></span>
-   <span data-ttu-id="4b11a-125">Créez des groupes d’URL et associez-les à une file d’attente de demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-125">Create URL Groups and associates them with a request queue.</span></span>
-   <span data-ttu-id="4b11a-126">Définir la liste de contrôle d’accès qui spécifie les processus de travail qui sont autorisés à recevoir des e/s dans la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-126">Set the ACL specifying the worker processes that are allowed to receive I/O on the request queue.</span></span>
-   <span data-ttu-id="4b11a-127">Appelez [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) pour retarder l’instanciation des processus de travail jusqu’à ce que la première requête arrive dans la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-127">Call [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) to delay the instantiation of worker processes until the first request arrives on the request queue.</span></span>

<span data-ttu-id="4b11a-128">En plus de ces tâches, le processus de création peut également effectuer des opérations d’e/s sur la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-128">In addition to these tasks, the creator process can also perform I/O operations on the request queue.</span></span>

## <a name="worker-processes"></a><span data-ttu-id="4b11a-129">Processus de travail</span><span class="sxs-lookup"><span data-stu-id="4b11a-129">Worker Processes</span></span>

<span data-ttu-id="4b11a-130">Un processus de travail peut ouvrir une file d’attente de demandes existante uniquement si elle a reçu l’autorisation d’y accéder dans la liste de contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="4b11a-130">A worker process can open an existing request queue only if they have been granted access to it in the ACL.</span></span> <span data-ttu-id="4b11a-131">Les processus de travail qui fonctionnent avec le moins de privilèges peuvent ouvrir une file d’attente de demandes et y effectuer des e/s.</span><span class="sxs-lookup"><span data-stu-id="4b11a-131">Worker processes operating under least privileges can open a request queue and perform I/O on it.</span></span> <span data-ttu-id="4b11a-132">Les applications ouvrent une file d’attente de demandes existante en appelant [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) avec l' **\_ indicateur http Create \_ Request \_ Queue \_ \_ Open \_ existant** dans le paramètre *Flags* et le nom de la file d’attente des demandes dans le paramètre *pname* .</span><span class="sxs-lookup"><span data-stu-id="4b11a-132">Applications open an existing request queue by calling [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) with the **HTTP\_CREATE\_REQUEST\_QUEUE\_FLAG\_OPEN\_EXISTING** in the *Flags* parameter, and the name of the request queue in the *pName* parameter.</span></span>

<span data-ttu-id="4b11a-133">Le processus de travail exécute les fonctions suivantes :</span><span class="sxs-lookup"><span data-stu-id="4b11a-133">The worker process performs the following functions:</span></span>

-   <span data-ttu-id="4b11a-134">Recevoir des demandes et envoyer des réponses sur la file d’attente de demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-134">Receive requests and send responses on the request queue.</span></span>
-   <span data-ttu-id="4b11a-135">Ouvrez une file d’attente de demandes existante par son nom.</span><span class="sxs-lookup"><span data-stu-id="4b11a-135">Open an existing request queue by name.</span></span> <span data-ttu-id="4b11a-136">Le descripteur de la file d’attente de demandes retourné au processus de travail ne peut pas être utilisé pour configurer la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-136">The handle to the request queue returned to the worker process cannot be used to configure the request queue.</span></span>
-   <span data-ttu-id="4b11a-137">Interrogez les paramètres de configuration de la file d’attente des requêtes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-137">Query the request queue configuration parameters.</span></span>

<span data-ttu-id="4b11a-138">Le diagramme suivant montre le modèle de processus de travail pour les files d’attente de demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-138">The following diagram shows the worker process model for request queues.</span></span> <span data-ttu-id="4b11a-139">La file d’attente des demandes peut avoir plusieurs processus de travail qui traitent les e/s et un processus de création qui configure la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="4b11a-139">The request queue can have several worker processes that process I/O, and one creator processes that configures the request queue.</span></span>

![modèle de processus de travail pour les files d’attente de demandes](images/namedrequestqueue.png)

 

 




