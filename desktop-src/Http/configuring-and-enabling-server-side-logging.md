---
title: Configuration et activation de la journalisation côté serveur
description: Configuration et activation de la journalisation côté serveur
ms.assetid: d67d8f9a-6d8a-43f2-a1ef-75f69c04b1ac
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 61e56247ee306d5a8804663e00162224df1d3f3e
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104379918"
---
# <a name="configuring-and-enabling-server-side-logging"></a><span data-ttu-id="47181-103">Configuration et activation de la journalisation côté serveur</span><span class="sxs-lookup"><span data-stu-id="47181-103">Configuring and Enabling Server Side Logging</span></span>

<span data-ttu-id="47181-104">L’application active la journalisation sur la session du serveur ou le groupe d’URL avant d’envoyer la réponse avec [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse).</span><span class="sxs-lookup"><span data-stu-id="47181-104">The application enables logging on the server session or the URL group before sending the response with [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse).</span></span> <span data-ttu-id="47181-105">L’exemple suivant montre comment configurer et activer la journalisation côté serveur de type W3C :</span><span class="sxs-lookup"><span data-stu-id="47181-105">The following example shows how to configure and enable W3C type server side logging:</span></span>

1.  <span data-ttu-id="47181-106">L’application initialise la structure [**des \_ \_ informations de journalisation http**](/windows/desktop/api/Http/ns-http-http_logging_info) avec **HttpLoggingTypeW3C** spécifié dans le membre de **format** et un masque de réinitialisation des constantes de [**\_ \_ champ de journal http**](http-log-field--constants.md) dans le membre **Fields** .</span><span class="sxs-lookup"><span data-stu-id="47181-106">The application initializes the [**HTTP\_LOGGING\_INFO**](/windows/desktop/api/Http/ns-http-http_logging_info) structure with **HttpLoggingTypeW3C** specified in the **Format** member, and a bitmask of the [**HTTP\_LOG\_FIELD**](http-log-field--constants.md) constants in the **Fields** member.</span></span>
2.  <span data-ttu-id="47181-107">L’application appelle [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) ou [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) avec **HttpServerLoggingProperty** spécifié dans le paramètre de *propriété* et un pointeur vers la structure d' [**\_ \_ informations de journalisation http**](/windows/desktop/api/Http/ns-http-http_logging_info) dans le paramètre *pPropertyInformation* .</span><span class="sxs-lookup"><span data-stu-id="47181-107">The application calls [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) with **HttpServerLoggingProperty** specified in the *Property* parameter and a pointer to the [**HTTP\_LOGGING\_INFO**](/windows/desktop/api/Http/ns-http-http_logging_info) structure in the *pPropertyInformation* parameter.</span></span>

<span data-ttu-id="47181-108">Le masque de réfixe des constantes de [**\_ \_ champ de journal http**](http-log-field--constants.md) contient les champs qui peuvent être enregistrés dans le fichier journal W3C.</span><span class="sxs-lookup"><span data-stu-id="47181-108">The bitmask of the [**HTTP\_LOG\_FIELD**](http-log-field--constants.md) constants contain the fields that may be logged in the W3C log file.</span></span> <span data-ttu-id="47181-109">Notez que la définition de la propriété **HttpServerLoggingProperty** sur une session serveur ou un groupe d’URL ne signifie pas que les réponses http seront journalisées.</span><span class="sxs-lookup"><span data-stu-id="47181-109">Note that setting the **HttpServerLoggingProperty** property on a server session or a URL group does not mean that HTTP responses will be logged.</span></span> <span data-ttu-id="47181-110">La journalisation est effectuée sur la base de la demande lorsque le W3C est activé dans l’appel à [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) ou [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody).</span><span class="sxs-lookup"><span data-stu-id="47181-110">Logging is performed on a per request basis when W3C is enabled in the call to [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) or [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody).</span></span>

<span data-ttu-id="47181-111">Pour activer la journalisation des réponses W3C pour chaque demande, l’application effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="47181-111">To enable W3C response logging on a per request basis, the application performs the following steps:</span></span>

1.  <span data-ttu-id="47181-112">L’application initialise les membres des données des [**\_ champs du \_ \_ Journal http**](/windows/desktop/api/Http/ns-http-http_log_fields_data) avec les informations de champ qui seront journalisées pour cette réponse.</span><span class="sxs-lookup"><span data-stu-id="47181-112">The application initializes the members of the [**HTTP\_LOG\_FIELDS\_DATA**](/windows/desktop/api/Http/ns-http-http_log_fields_data) with the field information that will be logged for that response.</span></span>
2.  <span data-ttu-id="47181-113">Le membre de **base. type** de la structure de [**\_ données de \_ champs \_ du journal http**](/windows/desktop/api/Http/ns-http-http_log_fields_data) doit être initialisé à **HttpLogDataTypeFields**.</span><span class="sxs-lookup"><span data-stu-id="47181-113">The **Base.Type** member of the [**HTTP\_LOG\_FIELDS\_DATA**](/windows/desktop/api/Http/ns-http-http_log_fields_data) structure should be initialized to **HttpLogDataTypeFields**.</span></span> <span data-ttu-id="47181-114">Le champ **base. type** garantit l’extensibilité future de la structure et de l’API.</span><span class="sxs-lookup"><span data-stu-id="47181-114">The **Base.Type** field ensures the future extensibility of the structure and API.</span></span>
3.  <span data-ttu-id="47181-115">L’application appelle [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) ou [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) avec un pointeur vers la structure de [**\_ données des \_ champs \_ du journal http**](/windows/desktop/api/Http/ns-http-http_log_fields_data) dans le paramètre *pLogData* .</span><span class="sxs-lookup"><span data-stu-id="47181-115">The application calls [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) or [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) with a pointer to the [**HTTP\_LOG\_FIELDS\_DATA**](/windows/desktop/api/Http/ns-http-http_log_fields_data) structure in the *pLogData* parameter.</span></span> <span data-ttu-id="47181-116">L’application doit effectuer un cast du pointeur vers les [**\_ \_ données du journal PHTTP**](/windows/desktop/api/Http/ns-http-http_log_data).</span><span class="sxs-lookup"><span data-stu-id="47181-116">The application should type cast the pointer to [**PHTTP\_LOG\_DATA**](/windows/desktop/api/Http/ns-http-http_log_data).</span></span>

 

 




