---
title: Authentification (API du serveur HTTP)
description: À partir de la version 2,0, l’API du serveur HTTP effectue l’authentification côté serveur pour l’application.
ms.assetid: e8e41e8e-1b10-4747-b18e-763e0752ade4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16d523df90861c83a45f67811edad243ceee5165
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104383643"
---
# <a name="authentication-http-server-api"></a><span data-ttu-id="657dc-103">Authentification (API du serveur HTTP)</span><span class="sxs-lookup"><span data-stu-id="657dc-103">Authentication (HTTP Server API)</span></span>

<span data-ttu-id="657dc-104">Certaines applications serveur requièrent l’authentification du client pour accéder aux ressources et traiter les requêtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="657dc-104">Some server applications require client authentication to access resources and service HTTP requests.</span></span> <span data-ttu-id="657dc-105">À partir de la version 2,0, l’API du serveur HTTP effectue l’authentification côté serveur pour l’application.</span><span class="sxs-lookup"><span data-stu-id="657dc-105">Starting with version 2.0, the HTTP Server API performs server side authentication for the application.</span></span> <span data-ttu-id="657dc-106">Dans la version 1,0 de l’API du serveur HTTP, l’application serveur devait implémenter sa propre authentification.</span><span class="sxs-lookup"><span data-stu-id="657dc-106">In the HTTP Server API version 1.0, the server application had to implement its own authentication.</span></span> <span data-ttu-id="657dc-107">Les avantages de l’authentification effectuée par l’API du serveur HTTP sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="657dc-107">Some advantages of authentication performed by the HTTP Server API include:</span></span>

-   <span data-ttu-id="657dc-108">Les applications peuvent s’exécuter sous des privilèges faibles, réduisant ainsi les risques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="657dc-108">Applications can run under low privileges, thus reducing security risks.</span></span>
-   <span data-ttu-id="657dc-109">L’authentification est effectuée en mode noyau, ce qui réduit les transitions du mode utilisateur au mode noyau lors de l’authentification.</span><span class="sxs-lookup"><span data-stu-id="657dc-109">Authentication is performed in kernel mode, thus reducing transitions from user mode to kernel mode during authentication.</span></span>
-   <span data-ttu-id="657dc-110">L’authentification effectuée en mode noyau permet aux applications serveur de s’exécuter sur différents comptes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="657dc-110">Authentication performed in kernel mode allows server applications to run on different user accounts.</span></span> <span data-ttu-id="657dc-111">Dans la version 1,0, toutes les applications de l’ordinateur doivent s’exécuter sous le même compte d’utilisateur pour s’authentifier sur le nom de principal du service (SPN).</span><span class="sxs-lookup"><span data-stu-id="657dc-111">In version 1.0, all applications on the machine must run under the same user account to authenticate on the Service Principle Name (SPN).</span></span>
-   <span data-ttu-id="657dc-112">La négociation d’authentification NTLM n’est pas réinitialisée si un processus de travail est recyclé alors que le protocole de transfert est en cours.</span><span class="sxs-lookup"><span data-stu-id="657dc-112">The NTLM authentication handshake is not reset if a worker process is recycled while the handshake is in process.</span></span>

<span data-ttu-id="657dc-113">Pour tirer parti de l’authentification 2,0 de la version, l’application active les schémas d’authentification que l’API du serveur HTTP applique aux URL pour lesquelles l’application s’est inscrite.</span><span class="sxs-lookup"><span data-stu-id="657dc-113">To take advantage of the version 2.0 authentication, the application enables the authentication schemes that the HTTP Server API applies to the URLs for which the application has registered.</span></span> <span data-ttu-id="657dc-114">L’authentification peut être activée sur la session ou le groupe d’URL du serveur.</span><span class="sxs-lookup"><span data-stu-id="657dc-114">Authentication can be enabled on the server session or URL group.</span></span> <span data-ttu-id="657dc-115">Le groupe d’URL hérite des schémas d’authentification activés par la session serveur si aucun n’est défini sur le groupe d’URL.</span><span class="sxs-lookup"><span data-stu-id="657dc-115">The URL group inherits the authentication schemes enabled by the server session if none are set on the URL group.</span></span> <span data-ttu-id="657dc-116">L’API du serveur HTTP prend en charge les schémas suivants :</span><span class="sxs-lookup"><span data-stu-id="657dc-116">The HTTP Server API supports the following schemes:</span></span>

-   <span data-ttu-id="657dc-117">Negotiate</span><span class="sxs-lookup"><span data-stu-id="657dc-117">Negotiate</span></span>
-   <span data-ttu-id="657dc-118">NTLM</span><span class="sxs-lookup"><span data-stu-id="657dc-118">NTLM</span></span>
-   <span data-ttu-id="657dc-119">Digest</span><span class="sxs-lookup"><span data-stu-id="657dc-119">Digest</span></span>
-   <span data-ttu-id="657dc-120">De base</span><span class="sxs-lookup"><span data-stu-id="657dc-120">Basic</span></span>

<span data-ttu-id="657dc-121">L’application serveur peut également implémenter des schémas d’authentification non pris en charge par l’API du serveur HTTP.</span><span class="sxs-lookup"><span data-stu-id="657dc-121">The server application can also implement authentication schemes not supported by the HTTP Server API.</span></span> <span data-ttu-id="657dc-122">L’API du serveur HTTP envoie des demandes à l’application pour les schémas d’authentification qui ne sont pas pris en charge, ou pour les schémas qui n’ont pas été activés par l’application.</span><span class="sxs-lookup"><span data-stu-id="657dc-122">The HTTP Server API sends requests to the application for authentication schemes that are not supported, or for schemes that have not been enabled by the application.</span></span>

### <a name="enabling-authentication"></a><span data-ttu-id="657dc-123">Activation de l'authentification</span><span class="sxs-lookup"><span data-stu-id="657dc-123">Enabling Authentication</span></span>

<span data-ttu-id="657dc-124">L’application serveur Active et configure l’authentification sur la session serveur ou le groupe d’URL avec les fonctions [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) ou [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) comme suit :</span><span class="sxs-lookup"><span data-stu-id="657dc-124">The server application enables and configures authentication on the server session or URL group with the [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) functions as follows:</span></span>

1.  <span data-ttu-id="657dc-125">L’application active l’authentification en spécifiant **HttpServerAuthenticationProperty** dans le paramètre *Property* de [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) ou [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="657dc-125">The application enables authentication by specifying **HttpServerAuthenticationProperty** in the *Property* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span>
2.  <span data-ttu-id="657dc-126">L’application spécifie les paramètres de configuration dans la structure des [**\_ \_ \_ informations d’authentification du serveur http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) dans le paramètre *pPropertyInformation* de [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) ou [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="657dc-126">The application specifies the configuration parameters in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in the *pPropertyInformation* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span> <span data-ttu-id="657dc-127">L’application spécifie les schémas d’authentification activés, si la mise en cache des informations d’identification NTLM est désactivée et fournit les paramètres de base et Digest dans la structure des **\_ \_ \_ informations d’authentification du serveur http** .</span><span class="sxs-lookup"><span data-stu-id="657dc-127">The application specifies the authentication schemes enabled, whether NTLM credential caching is disabled, and supplies the Basic and Digest parameters in the **HTTP\_SERVER\_AUTHENTICATION\_INFO** structure.</span></span>

### <a name="authentication-procedure"></a><span data-ttu-id="657dc-128">Procédure d’authentification</span><span class="sxs-lookup"><span data-stu-id="657dc-128">Authentication Procedure</span></span>

<span data-ttu-id="657dc-129">Pour lancer l’authentification du serveur HTTP, l’application active la propriété d’authentification avant l’arrivée de la première requête dans la file d’attente des demandes.</span><span class="sxs-lookup"><span data-stu-id="657dc-129">To initiate HTTP Server authentication, the application enables the authentication property before the first request arrives on the request queue.</span></span> <span data-ttu-id="657dc-130">Les étapes suivantes sont le processus de traitement courant pour l’authentification d’une demande.</span><span class="sxs-lookup"><span data-stu-id="657dc-130">The following steps are the common processing flow for authenticating a request.</span></span>

1.  <span data-ttu-id="657dc-131">L’application active l’authentification.</span><span class="sxs-lookup"><span data-stu-id="657dc-131">The application enables authentication.</span></span> <span data-ttu-id="657dc-132">Consultez la section « activation de l’authentification » précédente.</span><span class="sxs-lookup"><span data-stu-id="657dc-132">See the preceding "Enabling Authentication" section.</span></span>
    > [!Note]  
    > <span data-ttu-id="657dc-133">Le client envoie une demande non authentifiée.</span><span class="sxs-lookup"><span data-stu-id="657dc-133">The client sends an unauthenticated request.</span></span> <span data-ttu-id="657dc-134">L’API du serveur HTTP transmet la requête à l’application serveur et lui permet de générer le défi initial 401.</span><span class="sxs-lookup"><span data-stu-id="657dc-134">The HTTP Server API passes the request to the server application and allows it to generate the initial 401 challenge.</span></span> <span data-ttu-id="657dc-135">L’API du serveur HTTP comprend la structure d’informations d’authentification de la [**\_ requête \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) incorporée avec la structure de la [**\_ requête http**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="657dc-135">The HTTP Server API includes the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) structure.</span></span> <span data-ttu-id="657dc-136">Le membre **AuthStatus** indique **HttpAuthStatusNotAuthenticated**</span><span class="sxs-lookup"><span data-stu-id="657dc-136">The **AuthStatus** member indicates **HttpAuthStatusNotAuthenticated**</span></span>

     

2.  <span data-ttu-id="657dc-137">L’application examine le membre **AuthStatus** de la structure [**d' \_ \_ \_ informations d’authentification de la requête http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) pour déterminer si la requête a été authentifiée.</span><span class="sxs-lookup"><span data-stu-id="657dc-137">The application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if the request has been authenticated.</span></span> <span data-ttu-id="657dc-138">Si la demande n’a pas été authentifiée, l’application peut traiter la demande comme anonyme ou envoyer une demande d’authentification initiale 401.</span><span class="sxs-lookup"><span data-stu-id="657dc-138">If the request has not been authenticated, the application can service the request as anonymous or send an initial 401 authentication challenge.</span></span>
3.  <span data-ttu-id="657dc-139">Si l’application traite la demande comme anonyme, elle gère la requête et envoie la réponse finale à l’application cliente, comme si l’authentification n’était pas impliquée.</span><span class="sxs-lookup"><span data-stu-id="657dc-139">If the application services the request as anonymous, it handles the request and sends the final response to the client application, just as if the authentication was not involved.</span></span>
4.  <span data-ttu-id="657dc-140">Si, à la place, l’application requiert une authentification, elle envoie le défi initial 401 avec un ou plusieurs en-têtes WWW-Authenticate indiquant les schémas disponibles au client.</span><span class="sxs-lookup"><span data-stu-id="657dc-140">If instead the application requires authentication, it sends the initial 401 challenge with one or more WWW-Authenticate headers indicating the available schemes to the client.</span></span> <span data-ttu-id="657dc-141">L’application doit utiliser la structure [**http de \_ plusieurs \_ \_ en-têtes connus**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) pour générer le jeu d’en-têtes requis lorsque plusieurs en-têtes d’authentification sont envoyés dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="657dc-141">The application should use the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to build the required set of headers when more than one authentication header is sent in the response.</span></span>
    > [!Note]
    >
    > <span data-ttu-id="657dc-142">Le client renvoie la demande avec l’en-tête Authorization pour un schéma sélectionné à partir de l’ensemble de schémas disponibles indiqué par l’application serveur dans la réponse initiale 401.</span><span class="sxs-lookup"><span data-stu-id="657dc-142">The client resends the request with the authorization header for a scheme selected from the set of available schemes indicated by the server application in initial 401 response.</span></span>
    >
    > <span data-ttu-id="657dc-143">L’API du serveur HTTP examine l’en-tête d’autorisation de demande d’autorisation pour déterminer si le schéma est activé.</span><span class="sxs-lookup"><span data-stu-id="657dc-143">The HTTP Server API examines the authorization request authorization header to determine if the scheme is enabled.</span></span> <span data-ttu-id="657dc-144">Si c’est le cas, l’API du serveur HTTP effectue l’authentification et gère tous les échanges de demande/401-Response intermédiaires, jusqu’à ce que le protocole de transfert d’authentification soit finalisé.</span><span class="sxs-lookup"><span data-stu-id="657dc-144">If it is, then the HTTP Server API performs authentication and handles all interim request/401-response exchanges, until the authentication handshake is finalized.</span></span>
    >
    > <span data-ttu-id="657dc-145">Lorsque l’API du serveur HTTP termine la tentative d’authentification, elle envoie la demande à l’application avec les résultats de la tentative d’authentification dans la structure d' [**\_ \_ \_ informations**](/windows/desktop/api/Http/ns-http-http_request_auth_info) d’authentification de la requête HTTP qui est retournée avec la requête.</span><span class="sxs-lookup"><span data-stu-id="657dc-145">When The HTTP Server API completes the authentication attempt, it sends the request to the application with the results of the authentication attempt in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure that is returned with the request.</span></span> <span data-ttu-id="657dc-146">Si la tentative d’authentification échoue pour l’une des raisons suivantes, l’API du serveur HTTP ne transmet pas la demande à l’application :</span><span class="sxs-lookup"><span data-stu-id="657dc-146">If the authentication attempt fails for one of the following reasons, the HTTP Server API does not pass the request to the application:</span></span>
    >
    > -   <span data-ttu-id="657dc-147">Si la négociation d’authentification échoue en raison d’une erreur de l’API du serveur HTTP interne, telle qu’un échec d’allocation de mémoire, l’API du serveur HTTP génère une réponse 503 (service non disponible) et renvoie au client.</span><span class="sxs-lookup"><span data-stu-id="657dc-147">If the authentication handshake fails due to an internal HTTP Server API error such as a memory allocation failure, the HTTP Server API generates a 503 (service unavailable) response and sends back to client.</span></span>
    > -   <span data-ttu-id="657dc-148">Si un en-tête d’autorisation incorrect, tel qu’un en-tête sans nom de schéma, ou un encodage en base64 incorrect des informations d’identification du client, est généré, l’API du serveur HTTP génère une réponse 400 (requête incorrecte) et renvoie au client.</span><span class="sxs-lookup"><span data-stu-id="657dc-148">If a malformed authorization header such as a header without a scheme name, or malformed Base64 encoding of client credentials encountered, the HTTP Server API generates a 400 (bad request) response and sends back to client.</span></span>

     

5.  <span data-ttu-id="657dc-149">L’application serveur examine le membre **AuthStatus** de la structure [**d' \_ \_ \_ informations d’authentification de la requête http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) pour déterminer si l’authentification a réussi.</span><span class="sxs-lookup"><span data-stu-id="657dc-149">The server application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if authentication was successful.</span></span> <span data-ttu-id="657dc-150">En cas d’échec de l’authentification, l’API du serveur HTTP comprend l’erreur retournée par [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) dans le membre **SecStatus** de la structure d’informations d’authentification de la **\_ requête \_ \_ http** .</span><span class="sxs-lookup"><span data-stu-id="657dc-150">When authentication fails, the HTTP Server API includes the error returned from [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) in the **SecStatus** member of the **HTTP\_REQUEST\_AUTH\_INFO** structure.</span></span> <span data-ttu-id="657dc-151">Si la tentative d’authentification échoue en raison d’informations d’identification incorrectes, l’application peut générer un autre défi 401 avec l’en-tête de WWW-Authenticate souhaité, ou peut décider de traiter la demande comme anonyme.</span><span class="sxs-lookup"><span data-stu-id="657dc-151">If the authentication attempt fails due to bad credentials, the application can generate another 401 challenge with the desired WWW-Authenticate header, or may decided to service the request as anonymous.</span></span>
6.  <span data-ttu-id="657dc-152">Si l’authentification a réussi, l’application utilise le jeton fourni dans la structure des informations d’authentification de la [**\_ requête \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) pour emprunter l’identité du client et pour accéder aux ressources.</span><span class="sxs-lookup"><span data-stu-id="657dc-152">If authentication was successful, the application uses the token provided in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to impersonate the client and to access resources.</span></span> <span data-ttu-id="657dc-153">Le handle de jeton d’accès retourné à l’application est valide tant que l’ID de demande est valide, ce qui est généralement jusqu’à ce que l’application termine la réponse à la demande.</span><span class="sxs-lookup"><span data-stu-id="657dc-153">The access token handle returned to the application is valid as long as the request ID is valid, which is typically until the application completes the response to the request.</span></span> <span data-ttu-id="657dc-154">Toutefois, le jeton peut expirer pendant cette période et l’application peut être amenée à envoyer une autre demande 401 au client.</span><span class="sxs-lookup"><span data-stu-id="657dc-154">The token may, however, expire during this period and the application may need to send another 401 challenge to the client.</span></span>
7.  <span data-ttu-id="657dc-155">L’application envoie la réponse finale 200 OK et doit fermer le descripteur du jeton d’accès.</span><span class="sxs-lookup"><span data-stu-id="657dc-155">The application sends the final 200 OK response, and it must close the handle to the access token.</span></span>
    > [!Note]  
    > <span data-ttu-id="657dc-156">L’API du serveur HTTP ajoute les données d’authentification mutuelle à la réponse finale 200 OK, si une réponse a été générée lors de la négociation d’authentification.</span><span class="sxs-lookup"><span data-stu-id="657dc-156">The HTTP Server API appends the mutual authentication data to the final 200 OK response, if one was generated during the authentication handshake.</span></span>

     

### <a name="ntlm-null-sessions"></a><span data-ttu-id="657dc-157">Sessions NTLM NULL</span><span class="sxs-lookup"><span data-stu-id="657dc-157">NTLM NULL Sessions</span></span>

<span data-ttu-id="657dc-158">Notez qu’une session NTLM NULL indiquée dans le contexte de sécurité final n’est pas traitée comme authentifiée.</span><span class="sxs-lookup"><span data-stu-id="657dc-158">Note that an NTLM NULL session indicated in the final security context, is not treated as authenticated.</span></span> <span data-ttu-id="657dc-159">Dans ce cas, la demande est envoyée à l’application avec une erreur HttpAuthStatusFailure dans la structure des informations d’authentification de la [**\_ requête \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) et l’application peut envoyer une autre demande 401.</span><span class="sxs-lookup"><span data-stu-id="657dc-159">In this case, the request is sent to the application with an HttpAuthStatusFailure error in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure and the application can send another 401 challenge.</span></span>

### <a name="preemptive-authentication"></a><span data-ttu-id="657dc-160">Authentification préemptive</span><span class="sxs-lookup"><span data-stu-id="657dc-160">Preemptive Authentication</span></span>

<span data-ttu-id="657dc-161">D’après le protocole HTTP, une fois que le client a établi l’authentification pour une ressource, il peut, de manière préventive, envoyer l’en-tête d’autorisation correspondant avec les demandes consécutives ultérieures pour la ressource sans attendre un défi 401 du serveur.</span><span class="sxs-lookup"><span data-stu-id="657dc-161">According to the HTTP protocol, after the client has established authentication for a resource, it can preemptively send the corresponding authorization header with subsequent consecutive requests for the resource without waiting for a 401 challenge from the server.</span></span> <span data-ttu-id="657dc-162">Si le schéma indiqué dans l’en-tête d’autorisation est toujours activé par l’application et pris en charge par l’API du serveur HTTP, le serveur HTTP tente une authentification sans envoyer la demande à l’application.</span><span class="sxs-lookup"><span data-stu-id="657dc-162">If the scheme indicated in the Authorization header is still enabled by the application and supported by the HTTP Server API, the HTTP Server attempts authentication without sending the request to the application.</span></span> <span data-ttu-id="657dc-163">Lorsque ce type de demande authentifiée est reçu par l’application, il peut choisir d’ignorer la demande et de régénérer le défi initial 401 ou de traiter la demande comme étant authentifiée.</span><span class="sxs-lookup"><span data-stu-id="657dc-163">When this type of authenticated request is received by the application, it can choose to discard the request and regenerate the initial 401 challenge or service the request as authenticated.</span></span>

### <a name="mutual-authentication"></a><span data-ttu-id="657dc-164">Authentification mutuelle</span><span class="sxs-lookup"><span data-stu-id="657dc-164">Mutual Authentication</span></span>

<span data-ttu-id="657dc-165">Les données d’authentification mutuelle sont générées lorsque le schéma Negotiate est utilisé pendant le protocole de transfert et qu’il est résolu en Kerberos et que le client a demandé une authentification mutuelle.</span><span class="sxs-lookup"><span data-stu-id="657dc-165">Mutual authentication data is generated when the negotiate scheme is used during handshake and it is resolved to Kerberos, and client has asked for mutual authentication.</span></span> <span data-ttu-id="657dc-166">Les données d’authentification mutuelle sont insérées automatiquement par l’API du serveur HTTP dans la dernière réponse 200 OK envoyée par l’application serveur.</span><span class="sxs-lookup"><span data-stu-id="657dc-166">The mutual authentication data is automatically inserted by HTTP Server API in the final 200 OK response sent by the server application.</span></span> <span data-ttu-id="657dc-167">Par défaut, l’API du serveur HTTP ne transmet pas les données d’authentification mutuelle à l’application serveur, car elle gère automatiquement l’envoi de celle-ci.</span><span class="sxs-lookup"><span data-stu-id="657dc-167">By default HTTP Server API does not pass the Mutual authentication data to the server application, since it automatically handles the sending of it.</span></span> <span data-ttu-id="657dc-168">Toutefois, si l’application serveur Active l’indicateur ReceiveMutualAuth dans la structure des [**\_ \_ \_ informations d’authentification du serveur http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) dans la configuration, les données d’authentification mutuelle sont transmises à l’application dans la structure des informations d’authentification de la [**\_ requête \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) incorporée à la [**\_ requête http**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85))authentifiée.</span><span class="sxs-lookup"><span data-stu-id="657dc-168">However, if server application enables the ReceiveMutualAuth flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in configuration, the mutual authentication data is passed to the application in [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the authenticated [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)).</span></span> <span data-ttu-id="657dc-169">Dans ce cas, l’application doit envoyer les données d’authentification mutuelle avec la réponse 200 OK finale.</span><span class="sxs-lookup"><span data-stu-id="657dc-169">In this case application should send the mutual authentication data with the final 200 OK response.</span></span> <span data-ttu-id="657dc-170">Dans le cas où plusieurs sites sont pris en charge par un seul ordinateur, tous les sites sur l’ordinateur utilisent les informations d’identification du compte de l’ordinateur local dans le domaine pour l’authentification mutuelle.</span><span class="sxs-lookup"><span data-stu-id="657dc-170">In the case where multiple sites are served by a single computer, all sites on the computer use the credentials for the Local Machine Account in the domain for mutual authentication.</span></span>

 

 
