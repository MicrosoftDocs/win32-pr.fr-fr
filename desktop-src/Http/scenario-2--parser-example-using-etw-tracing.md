---
title: Scénario 2 exemple d’analyseur à l’aide du suivi ETW
description: 'Pour générer un rapport de suivi ETW pour le composant API du serveur HTTP, exécutez les étapes comme indiqué dans le \ 0034 ; Génération d’un rapport de suivi ETW \ 0034 ; section du scénario 1 : exemple de délai d’expiration HTTP utilisant le suivi ETW et les commandes netsh, mais reproduire l’erreur propre à ce scénario.'
ms.assetid: 2ccd2927-8a64-40a8-a29b-4b680a942f7f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 866c566973b660e4e665226fbf9b4a266b086b6b
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104031252"
---
# <a name="scenario-2-parser-example-using-etw-tracing"></a><span data-ttu-id="ecc67-103">Scénario 2 : exemple d’analyseur utilisant le suivi ETW</span><span class="sxs-lookup"><span data-stu-id="ecc67-103">Scenario 2: Parser Example Using ETW Tracing</span></span>

<span data-ttu-id="ecc67-104">Pour générer un rapport de suivi ETW pour le composant API du serveur HTTP, exécutez les étapes décrites dans la section « génération d’un rapport de suivi ETW » de [scénario 1 : exemple de délai d’expiration http à l’aide du suivi ETW et des commandes netsh](scenario-1--http-timeout-example-using-etw-tracing-and-netsh-commands.md), mais reproduisez l’erreur spécifique à ce scénario.</span><span class="sxs-lookup"><span data-stu-id="ecc67-104">To generate an ETW trace report for the HTTP Server API component, run the steps as shown in the "Generating an ETW Trace Report" section of [Scenario 1: HTTP Timeout Example Using ETW Tracing and Netsh Commands](scenario-1--http-timeout-example-using-etw-tracing-and-netsh-commands.md), but reproduce the error specific to this scenario.</span></span> <span data-ttu-id="ecc67-105">Dans cet exemple, accédez à l’application Web à partir d’un ordinateur client, ce qui provoque l’affichage du message « 400 requête incorrecte » sur le client.</span><span class="sxs-lookup"><span data-stu-id="ecc67-105">In this example, access the web application from a client machine, resulting in the "400 bad request" message being shown on the client.</span></span> <span data-ttu-id="ecc67-106">Ces étapes sont exécutées sur le serveur, car il héberge l’application Web.</span><span class="sxs-lookup"><span data-stu-id="ecc67-106">These steps are run on the server since it is hosting the web application.</span></span>

## <a name="viewing-the-trace-and-diagnosing"></a><span data-ttu-id="ecc67-107">Affichage du suivi et du diagnostic</span><span class="sxs-lookup"><span data-stu-id="ecc67-107">Viewing the Trace and Diagnosing</span></span>

<span data-ttu-id="ecc67-108">Le fichier CSV résultant pour les traces peut être affiché dans Excel ou tout outil qui prend en charge le format CSV.</span><span class="sxs-lookup"><span data-stu-id="ecc67-108">The resulting CSV file for traces can be viewed in Excel or any tool that supports the CSV format.</span></span> <span data-ttu-id="ecc67-109">Le tableau 2 ci-dessous présente des extraits d’un exemple de fichier de trace (httptrace.csv).</span><span class="sxs-lookup"><span data-stu-id="ecc67-109">Table 2 below shows excerpts from a sample trace file (httptrace.csv).</span></span> <span data-ttu-id="ecc67-110">Dans le rapport de suivi, la colonne « Level » affiche une entrée avec la valeur « 2 », qui représente une erreur.</span><span class="sxs-lookup"><span data-stu-id="ecc67-110">In the trace report, the "Level" column shows an entry with a value of "2", which represents an error.</span></span> <span data-ttu-id="ecc67-111">Comme indiqué ci-dessus, le composant de l’API du serveur HTTP suit les niveaux ETW définis dans l’article [LevelType type complexe de type complexe](../wes/eventmanifestschema-leveltype-complextype.md).</span><span class="sxs-lookup"><span data-stu-id="ecc67-111">As noted above, the HTTP Server API component follows the ETW Levels defined in the article [LevelType Complex Type Complex Type](../wes/eventmanifestschema-leveltype-complextype.md).</span></span>

<span data-ttu-id="ecc67-112">Les niveaux ETW sont les suivants : 1 critique ; 2 erreur ; 3 AVERTISSEMENT ; 4 informations ; 5 commentaires.</span><span class="sxs-lookup"><span data-stu-id="ecc67-112">The ETW levels include: 1 Critical; 2 Error; 3 Warning; 4 Informational; 5 Verbose.</span></span>

<span data-ttu-id="ecc67-113">Avec cette erreur, le type d’événement (colonne de type) indique « ParseRequestFailed ».</span><span class="sxs-lookup"><span data-stu-id="ecc67-113">With this error, the event type (Type column) reports "ParseRequestFailed".</span></span> <span data-ttu-id="ecc67-114">Dans les colonnes suivantes de l’événement ParseRequestFailed, nous voyons une entrée « InvalidHost ».</span><span class="sxs-lookup"><span data-stu-id="ecc67-114">In the subsequent columns for the ParseRequestFailed event, we see an "InvalidHost" entry.</span></span> <span data-ttu-id="ecc67-115">Cette entrée signifie que l’hôte identifié dans la requête HTTP est incorrect, conformément au protocole HTTP.</span><span class="sxs-lookup"><span data-stu-id="ecc67-115">This entry means that the identified host in the HTTP Request is incorrect, according the HTTP protocol.</span></span> <span data-ttu-id="ecc67-116">Notez que la colonne avec l’entrée « InvalidHost » n’est pas incluse dans le tableau pour des raisons de concision et pour éviter l’extrait de colonnes non contiguës.</span><span class="sxs-lookup"><span data-stu-id="ecc67-116">Note the column with the "InvalidHost" entry is not included in the table for the sake of brevity and to avoid excerpting noncontiguous columns.</span></span>

<span data-ttu-id="ecc67-117">Pour résoudre ce problème d’analyse, le client Web doit être corrigé pour être conforme à la norme RFC HTTP.</span><span class="sxs-lookup"><span data-stu-id="ecc67-117">To fix this parsing issue, the web client should be corrected to be compliant with the HTTP RFC.</span></span> 

| <span data-ttu-id="ecc67-118">Nom d'événement</span><span class="sxs-lookup"><span data-stu-id="ecc67-118">Event name</span></span>                    | <span data-ttu-id="ecc67-119">Type</span><span class="sxs-lookup"><span data-stu-id="ecc67-119">Type</span></span>               | <span data-ttu-id="ecc67-120">ID de l’événement</span><span class="sxs-lookup"><span data-stu-id="ecc67-120">Event ID</span></span> | <span data-ttu-id="ecc67-121">Version</span><span class="sxs-lookup"><span data-stu-id="ecc67-121">Version</span></span> | <span data-ttu-id="ecc67-122">Channel</span><span class="sxs-lookup"><span data-stu-id="ecc67-122">Channel</span></span> | <span data-ttu-id="ecc67-123">Level</span><span class="sxs-lookup"><span data-stu-id="ecc67-123">Level</span></span> |
|-------------------------------|--------------------|----------|---------|---------|-------|
| <span data-ttu-id="ecc67-124">EventTrace</span><span class="sxs-lookup"><span data-stu-id="ecc67-124">EventTrace</span></span>                    | <span data-ttu-id="ecc67-125">En-tête</span><span class="sxs-lookup"><span data-stu-id="ecc67-125">Header</span></span>             | <span data-ttu-id="ecc67-126">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-126">0</span></span>        | <span data-ttu-id="ecc67-127">2</span><span class="sxs-lookup"><span data-stu-id="ecc67-127">2</span></span>       | <span data-ttu-id="ecc67-128">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-128">0</span></span>       | <span data-ttu-id="ecc67-129">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-129">0</span></span>     |
| <span data-ttu-id="ecc67-130">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="ecc67-130">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="ecc67-131">AddUrl</span><span class="sxs-lookup"><span data-stu-id="ecc67-131">AddUrl</span></span>             | <span data-ttu-id="ecc67-132">31</span><span class="sxs-lookup"><span data-stu-id="ecc67-132">31</span></span>       | <span data-ttu-id="ecc67-133">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-133">0</span></span>       | <span data-ttu-id="ecc67-134">16</span><span class="sxs-lookup"><span data-stu-id="ecc67-134">16</span></span>      | <span data-ttu-id="ecc67-135">4</span><span class="sxs-lookup"><span data-stu-id="ecc67-135">4</span></span>     |
| <span data-ttu-id="ecc67-136">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="ecc67-136">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="ecc67-137">ConnConnect</span><span class="sxs-lookup"><span data-stu-id="ecc67-137">ConnConnect</span></span>        | <span data-ttu-id="ecc67-138">21</span><span class="sxs-lookup"><span data-stu-id="ecc67-138">21</span></span>       | <span data-ttu-id="ecc67-139">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-139">0</span></span>       | <span data-ttu-id="ecc67-140">16</span><span class="sxs-lookup"><span data-stu-id="ecc67-140">16</span></span>      | <span data-ttu-id="ecc67-141">4</span><span class="sxs-lookup"><span data-stu-id="ecc67-141">4</span></span>     |
| <span data-ttu-id="ecc67-142">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="ecc67-142">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="ecc67-143">ConnIdAssgn</span><span class="sxs-lookup"><span data-stu-id="ecc67-143">ConnIdAssgn</span></span>        | <span data-ttu-id="ecc67-144">22</span><span class="sxs-lookup"><span data-stu-id="ecc67-144">22</span></span>       | <span data-ttu-id="ecc67-145">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-145">0</span></span>       | <span data-ttu-id="ecc67-146">16</span><span class="sxs-lookup"><span data-stu-id="ecc67-146">16</span></span>      | <span data-ttu-id="ecc67-147">4</span><span class="sxs-lookup"><span data-stu-id="ecc67-147">4</span></span>     |
| <span data-ttu-id="ecc67-148">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="ecc67-148">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="ecc67-149">RecvReq</span><span class="sxs-lookup"><span data-stu-id="ecc67-149">RecvReq</span></span>            | <span data-ttu-id="ecc67-150">1</span><span class="sxs-lookup"><span data-stu-id="ecc67-150">1</span></span>        | <span data-ttu-id="ecc67-151">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-151">0</span></span>       | <span data-ttu-id="ecc67-152">16</span><span class="sxs-lookup"><span data-stu-id="ecc67-152">16</span></span>      | <span data-ttu-id="ecc67-153">4</span><span class="sxs-lookup"><span data-stu-id="ecc67-153">4</span></span>     |
| <span data-ttu-id="ecc67-154">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="ecc67-154">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="ecc67-155">ParseRequestFailed</span><span class="sxs-lookup"><span data-stu-id="ecc67-155">ParseRequestFailed</span></span> | <span data-ttu-id="ecc67-156">52</span><span class="sxs-lookup"><span data-stu-id="ecc67-156">52</span></span>       | <span data-ttu-id="ecc67-157">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-157">0</span></span>       | <span data-ttu-id="ecc67-158">16</span><span class="sxs-lookup"><span data-stu-id="ecc67-158">16</span></span>      | <span data-ttu-id="ecc67-159">2</span><span class="sxs-lookup"><span data-stu-id="ecc67-159">2</span></span>     |
| <span data-ttu-id="ecc67-160">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="ecc67-160">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="ecc67-161">LogFileWrite</span><span class="sxs-lookup"><span data-stu-id="ecc67-161">LogFileWrite</span></span>       | <span data-ttu-id="ecc67-162">51</span><span class="sxs-lookup"><span data-stu-id="ecc67-162">51</span></span>       | <span data-ttu-id="ecc67-163">0</span><span class="sxs-lookup"><span data-stu-id="ecc67-163">0</span></span>       | <span data-ttu-id="ecc67-164">16</span><span class="sxs-lookup"><span data-stu-id="ecc67-164">16</span></span>      | <span data-ttu-id="ecc67-165">4</span><span class="sxs-lookup"><span data-stu-id="ecc67-165">4</span></span>     |



 

<span data-ttu-id="ecc67-166">Tableau 2 : extraits d’un exemple de rapport de suivi d’un problème d’analyse</span><span class="sxs-lookup"><span data-stu-id="ecc67-166">Table 2: Excerpts from a Sample Trace Report for a Parsing Issue</span></span>

 

 