---
description: Les fonctions Wait permettent à un thread de bloquer sa propre exécution.
ms.assetid: 9c66c71d-fdfd-42ae-895c-2fc842b5bc7a
title: Fonctions Wait
ms.topic: article
ms.date: 06/25/2020
ms.openlocfilehash: f5a21b0d95a316b926fcaad037004edc8c418246
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106519456"
---
# <a name="wait-functions"></a><span data-ttu-id="066a4-103">Fonctions Wait</span><span class="sxs-lookup"><span data-stu-id="066a4-103">Wait Functions</span></span>

<span data-ttu-id="066a4-104">Les *fonctions Wait* permettent à un thread de bloquer sa propre exécution.</span><span class="sxs-lookup"><span data-stu-id="066a4-104">*Wait functions* allow a thread to block its own execution.</span></span> <span data-ttu-id="066a4-105">Les fonctions Wait ne retournent pas tant que les critères spécifiés ne sont pas remplis.</span><span class="sxs-lookup"><span data-stu-id="066a4-105">The wait functions do not return until the specified criteria have been met.</span></span> <span data-ttu-id="066a4-106">Le type de fonction Wait détermine l’ensemble de critères utilisé.</span><span class="sxs-lookup"><span data-stu-id="066a4-106">The type of wait function determines the set of criteria used.</span></span> <span data-ttu-id="066a4-107">Lorsqu’une fonction Wait est appelée, elle vérifie si les critères d’attente ont été satisfaits.</span><span class="sxs-lookup"><span data-stu-id="066a4-107">When a wait function is called, it checks whether the wait criteria have been met.</span></span> <span data-ttu-id="066a4-108">Si les critères ne sont pas satisfaits, le thread appelant passe à l’état d’attente jusqu’à ce que les conditions des critères d’attente soient remplies ou que l’intervalle de délai d’attente spécifié soit écoulé.</span><span class="sxs-lookup"><span data-stu-id="066a4-108">If the criteria have not been met, the calling thread enters the wait state until the conditions of the wait criteria have been met or the specified time-out interval elapses.</span></span>

-   [<span data-ttu-id="066a4-109">Fonctions d’attente d’objet unique</span><span class="sxs-lookup"><span data-stu-id="066a4-109">Single-object Wait Functions</span></span>](#single-object-wait-functions)
-   [<span data-ttu-id="066a4-110">Fonctions d’attente à plusieurs objets</span><span class="sxs-lookup"><span data-stu-id="066a4-110">Multiple-object Wait Functions</span></span>](#multiple-object-wait-functions)
-   [<span data-ttu-id="066a4-111">Fonctions d’attente alertables</span><span class="sxs-lookup"><span data-stu-id="066a4-111">Alertable Wait Functions</span></span>](#alertable-wait-functions)
-   [<span data-ttu-id="066a4-112">Fonctions d’attente inscrites</span><span class="sxs-lookup"><span data-stu-id="066a4-112">Registered Wait Functions</span></span>](#registered-wait-functions)
-   [<span data-ttu-id="066a4-113">En attente d’une adresse</span><span class="sxs-lookup"><span data-stu-id="066a4-113">Waiting on an Address</span></span>](#waiting-on-an-address)
-   [<span data-ttu-id="066a4-114">Fonctions Wait et intervalles de délai d’attente</span><span class="sxs-lookup"><span data-stu-id="066a4-114">Wait Functions and Time-out Intervals</span></span>](#wait-functions-and-time-out-intervals)
-   [<span data-ttu-id="066a4-115">Fonctions Wait et objets de synchronisation</span><span class="sxs-lookup"><span data-stu-id="066a4-115">Wait Functions and Synchronization Objects</span></span>](#wait-functions-and-synchronization-objects)
-   [<span data-ttu-id="066a4-116">Fonctions Wait et création de fenêtres</span><span class="sxs-lookup"><span data-stu-id="066a4-116">Wait Functions and Creating Windows</span></span>](#wait-functions-and-creating-windows)

## <a name="single-object-wait-functions"></a><span data-ttu-id="066a4-117">Fonctions d’attente d’objet unique</span><span class="sxs-lookup"><span data-stu-id="066a4-117">Single-object Wait Functions</span></span>

<span data-ttu-id="066a4-118">Les fonctions [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject)et [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) requièrent un handle vers un objet de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="066a4-118">The [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject), and [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) functions require a handle to one synchronization object.</span></span> <span data-ttu-id="066a4-119">Ces fonctions retournent lorsque l’une des conditions suivantes se produit :</span><span class="sxs-lookup"><span data-stu-id="066a4-119">These functions return when one of the following occurs:</span></span>

-   <span data-ttu-id="066a4-120">L’objet spécifié est dans l’état signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-120">The specified object is in the signaled state.</span></span>
-   <span data-ttu-id="066a4-121">L’intervalle de délai d’attente est écoulé.</span><span class="sxs-lookup"><span data-stu-id="066a4-121">The time-out interval elapses.</span></span> <span data-ttu-id="066a4-122">L’intervalle de délai d’attente peut être défini sur **infini** pour spécifier que l’attente n’expirera pas.</span><span class="sxs-lookup"><span data-stu-id="066a4-122">The time-out interval can be set to **INFINITE** to specify that the wait will not time out.</span></span>

<span data-ttu-id="066a4-123">La fonction [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait) permet au thread appelant de définir de manière atomique l’état d’un objet à signaler et d’attendre que l’état d’un autre objet soit défini sur signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-123">The [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait) function enables the calling thread to atomically set the state of an object to signaled and wait for the state of another object to be set to signaled.</span></span>

## <a name="multiple-object-wait-functions"></a><span data-ttu-id="066a4-124">Fonctions d’attente à plusieurs objets</span><span class="sxs-lookup"><span data-stu-id="066a4-124">Multiple-object Wait Functions</span></span>

<span data-ttu-id="066a4-125">Les fonctions [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects)et [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) permettent au thread appelant de spécifier un tableau contenant un ou plusieurs descripteurs d’objets de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="066a4-125">The [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects), and [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) functions enable the calling thread to specify an array containing one or more synchronization object handles.</span></span> <span data-ttu-id="066a4-126">Ces fonctions retournent lorsque l’une des conditions suivantes se produit :</span><span class="sxs-lookup"><span data-stu-id="066a4-126">These functions return when one of the following occurs:</span></span>

-   <span data-ttu-id="066a4-127">L’état de l’un des objets spécifiés a la valeur signalée ou les États de tous les objets ont été signalés.</span><span class="sxs-lookup"><span data-stu-id="066a4-127">The state of any one of the specified objects is set to signaled or the states of all objects have been set to signaled.</span></span> <span data-ttu-id="066a4-128">Vous pouvez contrôler si l’un ou l’ensemble des États sera utilisé dans l’appel de fonction.</span><span class="sxs-lookup"><span data-stu-id="066a4-128">You control whether one or all of the states will be used in the function call.</span></span>
-   <span data-ttu-id="066a4-129">L’intervalle de délai d’attente est écoulé.</span><span class="sxs-lookup"><span data-stu-id="066a4-129">The time-out interval elapses.</span></span> <span data-ttu-id="066a4-130">L’intervalle de délai d’attente peut être défini sur **infini** pour spécifier que l’attente n’expirera pas.</span><span class="sxs-lookup"><span data-stu-id="066a4-130">The time-out interval can be set to **INFINITE** to specify that the wait will not time out.</span></span>

<span data-ttu-id="066a4-131">La fonction [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) et [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) vous permettent de spécifier des objets d’événement d’entrée dans le tableau de handles d’objets.</span><span class="sxs-lookup"><span data-stu-id="066a4-131">The [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) and [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) function allow you to specify input event objects in the object handle array.</span></span> <span data-ttu-id="066a4-132">Cette opération est effectuée lorsque vous spécifiez le type d’entrée à attendre dans la file d’attente d’entrée du thread.</span><span class="sxs-lookup"><span data-stu-id="066a4-132">This is done when you specify the type of input to wait for in the thread's input queue.</span></span> <span data-ttu-id="066a4-133">Par exemple, un thread peut utiliser **MsgWaitForMultipleObjects** pour bloquer son exécution jusqu’à ce que l’état d’un objet spécifié soit défini sur signalé et que l’entrée de la souris soit disponible dans la file d’attente d’entrée du thread.</span><span class="sxs-lookup"><span data-stu-id="066a4-133">For example, a thread could use **MsgWaitForMultipleObjects** to block its execution until the state of a specified object has been set to signaled and there is mouse input available in the thread's input queue.</span></span> <span data-ttu-id="066a4-134">Le thread peut utiliser la fonction [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessageA**](/windows/win32/api/winuser/nf-winuser-peekmessagea) ou [**PeekMessageW**](/windows/win32/api/winuser/nf-winuser-peekmessagew) pour récupérer l’entrée.</span><span class="sxs-lookup"><span data-stu-id="066a4-134">The thread can use the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessageA**](/windows/win32/api/winuser/nf-winuser-peekmessagea) or [**PeekMessageW**](/windows/win32/api/winuser/nf-winuser-peekmessagew) function to retrieve the input.</span></span>

<span data-ttu-id="066a4-135">Lors de l’attente de la définition des États de tous les objets comme signalés, ces fonctions à plusieurs objets ne modifient pas les États des objets spécifiés tant que les États de tous les objets n’ont pas été signalés.</span><span class="sxs-lookup"><span data-stu-id="066a4-135">When waiting for the states of all objects to be set to signaled, these multiple-object functions do not modify the states of the specified objects until the states of all objects have been set signaled.</span></span> <span data-ttu-id="066a4-136">Par exemple, l’état d’un objet mutex peut être signalé, mais le thread appelant n’obtient pas la propriété tant que les États des autres objets spécifiés dans le tableau n’ont pas également été définis sur signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-136">For example, the state of a mutex object can be signaled, but the calling thread does not get ownership until the states of the other objects specified in the array have also been set to signaled.</span></span> <span data-ttu-id="066a4-137">En attendant, un autre thread peut devenir propriétaire de l’objet mutex, ce qui définit son état sur non signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-137">In the meantime, some other thread may get ownership of the mutex object, thereby setting its state to nonsignaled.</span></span>

<span data-ttu-id="066a4-138">Lors de l’attente de la définition de l’état d’un objet unique comme signalé, ces fonctions à plusieurs objets vérifient les descripteurs dans le tableau dans l’ordre, en commençant par l’index 0, jusqu’à ce que l’un des objets soit signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-138">When waiting for the state of a single object to be set to signaled, these multiple-object functions check the handles in the array in order starting with index 0, until one of the objects is signaled.</span></span> <span data-ttu-id="066a4-139">Si plusieurs objets sont signalés, la fonction retourne l’index du premier handle dans le tableau dont l’objet a été signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-139">If multiple objects become signaled, the function returns the index of the first handle in the array whose object was signaled.</span></span>

## <a name="alertable-wait-functions"></a><span data-ttu-id="066a4-140">Fonctions d’attente alertables</span><span class="sxs-lookup"><span data-stu-id="066a4-140">Alertable Wait Functions</span></span>

<span data-ttu-id="066a4-141">Les fonctions [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex)et [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) diffèrent des autres fonctions d’attente dans la mesure où elles peuvent éventuellement effectuer une opération d' *attente d’alerte*.</span><span class="sxs-lookup"><span data-stu-id="066a4-141">The [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), and [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) functions differ from the other wait functions in that they can optionally perform an *alertable wait operation*.</span></span> <span data-ttu-id="066a4-142">Dans une opération d’attente d’alerte, la fonction peut retourner lorsque les conditions spécifiées sont remplies, mais elle peut également retourner si le système met en file d’attente une routine d’exécution d’e/s ou un APC pour l’exécuter par le thread en attente.</span><span class="sxs-lookup"><span data-stu-id="066a4-142">In an alertable wait operation, the function can return when the specified conditions are met, but it can also return if the system queues an I/O completion routine or an APC for execution by the waiting thread.</span></span> <span data-ttu-id="066a4-143">Pour plus d’informations sur les opérations d’attente alertables et les routines d’exécution d’e/s, consultez [synchronisation et entrée et sortie avec chevauchement](synchronization-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="066a4-143">For more information about alertable wait operations and I/O completion routines, see [Synchronization and Overlapped Input and Output](synchronization-and-overlapped-input-and-output.md).</span></span> <span data-ttu-id="066a4-144">Pour plus d’informations sur les APC, consultez [appels de procédure asynchrone](asynchronous-procedure-calls.md).</span><span class="sxs-lookup"><span data-stu-id="066a4-144">For more information about APCs, see [Asynchronous Procedure Calls](asynchronous-procedure-calls.md).</span></span>

## <a name="registered-wait-functions"></a><span data-ttu-id="066a4-145">Fonctions d’attente inscrites</span><span class="sxs-lookup"><span data-stu-id="066a4-145">Registered Wait Functions</span></span>

<span data-ttu-id="066a4-146">La fonction [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) diffère des autres fonctions d’attente en ce que l’opération d’attente est effectuée par un thread du [pool de threads](../procthread/thread-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="066a4-146">The [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) function differs from the other wait functions in that the wait operation is performed by a thread from the [thread pool](../procthread/thread-pooling.md).</span></span> <span data-ttu-id="066a4-147">Lorsque les conditions spécifiées sont remplies, la fonction de rappel est exécutée par un thread de travail à partir du pool de threads.</span><span class="sxs-lookup"><span data-stu-id="066a4-147">When the specified conditions are met, the callback function is executed by a worker thread from the thread pool.</span></span>

<span data-ttu-id="066a4-148">Par défaut, une opération d’attente inscrite est une opération à attente multiple.</span><span class="sxs-lookup"><span data-stu-id="066a4-148">By default, a registered wait operation is a multiple-wait operation.</span></span> <span data-ttu-id="066a4-149">Le système réinitialise le minuteur chaque fois que l’événement est signalé (ou lorsque l’intervalle de délai d’attente est écoulé) jusqu’à ce que vous appeliez la fonction [**UnregisterWaitEx**](unregisterwaitex.md) pour annuler l’opération.</span><span class="sxs-lookup"><span data-stu-id="066a4-149">The system resets the timer every time the event is signaled (or the time-out interval elapses) until you call the [**UnregisterWaitEx**](unregisterwaitex.md) function to cancel the operation.</span></span> <span data-ttu-id="066a4-150">Pour spécifier qu’une opération d’attente ne doit être exécutée qu’une seule fois, définissez le paramètre *dwFlags* de [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) sur **WT \_ EXECUTEONLYONCE**.</span><span class="sxs-lookup"><span data-stu-id="066a4-150">To specify that a wait operation should be executed only once, set the *dwFlags* parameter of [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) to **WT\_EXECUTEONLYONCE**.</span></span>

<span data-ttu-id="066a4-151">Si le thread appelle des fonctions qui utilisent des APC, définissez le paramètre *dwFlags* de [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) sur **WT \_ EXECUTEINPERSISTENTTHREAD**.</span><span class="sxs-lookup"><span data-stu-id="066a4-151">If the thread calls functions that use APCs, set the *dwFlags* parameter of [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) to **WT\_EXECUTEINPERSISTENTTHREAD**.</span></span>

## <a name="waiting-on-an-address"></a><span data-ttu-id="066a4-152">En attente d’une adresse</span><span class="sxs-lookup"><span data-stu-id="066a4-152">Waiting on an Address</span></span>

<span data-ttu-id="066a4-153">Un thread peut utiliser la fonction [**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) pour attendre que la valeur d’une adresse cible passe d’une valeur indésirable à une autre valeur.</span><span class="sxs-lookup"><span data-stu-id="066a4-153">A thread can use the [**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) function to wait for the value of a target address to change from some undesired value to any other value.</span></span> <span data-ttu-id="066a4-154">Cela permet aux threads d’attendre la modification d’une valeur sans avoir à faire pivoter ou gérer les problèmes de synchronisation qui peuvent survenir lorsque le thread capture une valeur indésirable, mais que la valeur change avant que le thread puisse attendre.</span><span class="sxs-lookup"><span data-stu-id="066a4-154">This enables threads to wait for a value to change without having to spin or handle the synchronization problems that can arise when the thread captures an undesired value but the value changes before the thread can wait.</span></span>

<span data-ttu-id="066a4-155">[**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) retourne lorsque le code qui modifie la valeur cible signale la modification en appelant [**WakeByAddressSingle**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddresssingle) pour mettre en éveil un seul thread en attente ou [**WakeByAddressAll**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddressall) pour réveiller tous les threads en attente.</span><span class="sxs-lookup"><span data-stu-id="066a4-155">[**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) returns when code that modifies the target value signals the change by calling [**WakeByAddressSingle**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddresssingle) to wake a single waiting thread or [**WakeByAddressAll**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddressall) to wake all waiting threads.</span></span> <span data-ttu-id="066a4-156">Si un intervalle de délai d’attente est spécifié avec **WaitOnAddress** et qu’aucun thread n’appelle une fonction Wake, la fonction retourne lorsque l’intervalle de délai d’attente expire.</span><span class="sxs-lookup"><span data-stu-id="066a4-156">If a time-out interval is specified with **WaitOnAddress** and no thread calls a wake function, the function returns when the time-out interval elapses.</span></span> <span data-ttu-id="066a4-157">Si aucun intervalle de délai d’attente n’est spécifié, le thread attend indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="066a4-157">If no time-out interval is specified, the thread waits indefinitely.</span></span>

## <a name="wait-functions-and-time-out-intervals"></a><span data-ttu-id="066a4-158">Fonctions Wait et intervalles de délai d’attente</span><span class="sxs-lookup"><span data-stu-id="066a4-158">Wait Functions and Time-out Intervals</span></span>

<span data-ttu-id="066a4-159">La précision de l’intervalle de délai d’attente spécifié dépend de la résolution de l’horloge système.</span><span class="sxs-lookup"><span data-stu-id="066a4-159">The accuracy of the specified time-out interval depends on the resolution of the system clock.</span></span> <span data-ttu-id="066a4-160">L’horloge système « batte » à une vitesse constante.</span><span class="sxs-lookup"><span data-stu-id="066a4-160">The system clock "ticks" at a constant rate.</span></span> <span data-ttu-id="066a4-161">Si l’intervalle de délai d’attente est inférieur à la résolution de l’horloge système, l’attente peut expirer en moins de la durée spécifiée.</span><span class="sxs-lookup"><span data-stu-id="066a4-161">If the time-out interval is less than the resolution of the system clock, the wait may time out in less than the specified length of time.</span></span> <span data-ttu-id="066a4-162">Si l’intervalle de délai d’attente est supérieur à un, mais inférieur à deux, l’attente peut se situer n’importe où entre une graduation, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="066a4-162">If the time-out interval is greater than one tick but less than two, the wait can be anywhere between one and two ticks, and so on.</span></span>

<span data-ttu-id="066a4-163">Pour augmenter la précision de l’intervalle de délai d’attente pour les fonctions Wait, appelez la fonction **timeGetDevCaps** pour déterminer la résolution de minuteur minimale prise en charge et la fonction **timeBeginPeriod** pour définir la résolution de la minuterie sur sa valeur minimale.</span><span class="sxs-lookup"><span data-stu-id="066a4-163">To increase the accuracy of the time-out interval for the wait functions, call the **timeGetDevCaps** function to determine the supported minimum timer resolution and the **timeBeginPeriod** function to set the timer resolution to its minimum.</span></span> <span data-ttu-id="066a4-164">Soyez prudent lors de l’appel de **timeBeginPeriod**, car les appels fréquents peuvent avoir une incidence significative sur l’horloge système, l’utilisation de l’alimentation du système et le planificateur.</span><span class="sxs-lookup"><span data-stu-id="066a4-164">Use caution when calling **timeBeginPeriod**, as frequent calls can significantly affect the system clock, system power usage, and the scheduler.</span></span> <span data-ttu-id="066a4-165">Si vous appelez **timeBeginPeriod**, appelez-le une fois tôt dans l’application et veillez à appeler la fonction **timeEndPeriod** à la fin de l’application.</span><span class="sxs-lookup"><span data-stu-id="066a4-165">If you call **timeBeginPeriod**, call it one time early in the application and be sure to call the **timeEndPeriod** function at the very end of the application.</span></span>

## <a name="wait-functions-and-synchronization-objects"></a><span data-ttu-id="066a4-166">Fonctions Wait et objets de synchronisation</span><span class="sxs-lookup"><span data-stu-id="066a4-166">Wait Functions and Synchronization Objects</span></span>

<span data-ttu-id="066a4-167">Les fonctions Wait peuvent modifier les États de certains types d' [objets de synchronisation](synchronization-objects.md).</span><span class="sxs-lookup"><span data-stu-id="066a4-167">The wait functions can modify the states of some types of [synchronization objects](synchronization-objects.md).</span></span> <span data-ttu-id="066a4-168">La modification se produit uniquement pour l’objet ou les objets dont l’état signalé a entraîné le retour de la fonction.</span><span class="sxs-lookup"><span data-stu-id="066a4-168">Modification occurs only for the object or objects whose signaled state caused the function to return.</span></span> <span data-ttu-id="066a4-169">Les fonctions Wait peuvent modifier les États des objets de synchronisation comme suit :</span><span class="sxs-lookup"><span data-stu-id="066a4-169">Wait functions can modify the states of synchronization objects as follows:</span></span>

-   <span data-ttu-id="066a4-170">Le nombre d’un objet Semaphore diminue d’une unité, et l’état du sémaphore est défini sur non signalé si son nombre est égal à zéro.</span><span class="sxs-lookup"><span data-stu-id="066a4-170">The count of a semaphore object decreases by one, and the state of the semaphore is set to nonsignaled if its count is zero.</span></span>
-   <span data-ttu-id="066a4-171">Les États du mutex, de l’événement de réinitialisation automatique et des objets de notification de modification sont définis sur non signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-171">The states of mutex, auto-reset event, and change-notification objects are set to nonsignaled.</span></span>
-   <span data-ttu-id="066a4-172">L’état d’un minuteur de synchronisation est défini sur non signalé.</span><span class="sxs-lookup"><span data-stu-id="066a4-172">The state of a synchronization timer is set to nonsignaled.</span></span>
-   <span data-ttu-id="066a4-173">Les États de l’événement de réinitialisation manuelle, du minuteur de réinitialisation manuelle, du processus, du thread et des objets d’entrée de la console ne sont pas affectés par une fonction d’attente.</span><span class="sxs-lookup"><span data-stu-id="066a4-173">The states of manual-reset event, manual-reset timer, process, thread, and console input objects are not affected by a wait function.</span></span>

## <a name="wait-functions-and-creating-windows"></a><span data-ttu-id="066a4-174">Fonctions Wait et création de fenêtres</span><span class="sxs-lookup"><span data-stu-id="066a4-174">Wait Functions and Creating Windows</span></span>

<span data-ttu-id="066a4-175">Vous devez être prudent lorsque vous utilisez les fonctions Wait et le code qui crée directement ou indirectement des fenêtres.</span><span class="sxs-lookup"><span data-stu-id="066a4-175">You have to be careful when using the wait functions and code that directly or indirectly creates windows.</span></span> <span data-ttu-id="066a4-176">Si un thread crée des fenêtres, il doit traiter les messages.</span><span class="sxs-lookup"><span data-stu-id="066a4-176">If a thread creates any windows, it must process messages.</span></span> <span data-ttu-id="066a4-177">Les diffusions de messages sont envoyées à toutes les fenêtres du système.</span><span class="sxs-lookup"><span data-stu-id="066a4-177">Message broadcasts are sent to all windows in the system.</span></span> <span data-ttu-id="066a4-178">Si vous disposez d’un thread qui utilise une fonction Wait sans délai d’expiration, le système se bloque.</span><span class="sxs-lookup"><span data-stu-id="066a4-178">If you have a thread that uses a wait function with no time-out interval, the system will deadlock.</span></span> <span data-ttu-id="066a4-179">Les deux exemples de code qui crée indirectement des fenêtres sont DDE et la fonction **CoInitialize** .</span><span class="sxs-lookup"><span data-stu-id="066a4-179">Two examples of code that indirectly creates windows are DDE and the **CoInitialize** function.</span></span> <span data-ttu-id="066a4-180">Par conséquent, si vous disposez d’un thread qui crée des fenêtres, utilisez [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) ou [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), plutôt que les autres fonctions d’attente.</span><span class="sxs-lookup"><span data-stu-id="066a4-180">Therefore, if you have a thread that creates windows, use [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) or [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), rather than the other wait functions.</span></span>

 

 
