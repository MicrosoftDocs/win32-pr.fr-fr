---
description: Un objet mutex est un objet de synchronisation dont l’État est défini sur signalé lorsqu’il n’appartient à aucun thread, et qui n’est pas signalé lorsqu’il est détenu.
ms.assetid: eca0795a-1fd0-4034-9d61-9416670919cf
title: Objets mutex
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e84c17ba3e99e888f7d1e9137a7f24a4d78ce2d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103866617"
---
# <a name="mutex-objects"></a><span data-ttu-id="ee8f2-103">Objets mutex</span><span class="sxs-lookup"><span data-stu-id="ee8f2-103">Mutex Objects</span></span>

<span data-ttu-id="ee8f2-104">Un *objet mutex* est un objet de synchronisation dont l’État est défini sur signalé lorsqu’il n’appartient à aucun thread, et qui n’est pas signalé lorsqu’il est détenu.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-104">A *mutex object* is a synchronization object whose state is set to signaled when it is not owned by any thread, and nonsignaled when it is owned.</span></span> <span data-ttu-id="ee8f2-105">Un seul thread à la fois peut posséder un objet mutex, dont le nom vient du fait qu’il est utile pour coordonner l’accès mutuellement exclusif à une ressource partagée.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-105">Only one thread at a time can own a mutex object, whose name comes from the fact that it is useful in coordinating mutually exclusive access to a shared resource.</span></span> <span data-ttu-id="ee8f2-106">Par exemple, pour empêcher deux threads d’écrire en mémoire partagée en même temps, chaque thread attend la propriété d’un objet mutex avant d’exécuter le code qui accède à la mémoire.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-106">For example, to prevent two threads from writing to shared memory at the same time, each thread waits for ownership of a mutex object before executing the code that accesses the memory.</span></span> <span data-ttu-id="ee8f2-107">Après avoir écrit dans la mémoire partagée, le thread libère l’objet Mutex.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-107">After writing to the shared memory, the thread releases the mutex object.</span></span>

<span data-ttu-id="ee8f2-108">Un thread utilise la fonction [**CreateMutex**](/windows/win32/api/synchapi/nf-synchapi-createmutexa) ou [**CreateMutexEx**](/windows/win32/api/synchapi/nf-synchapi-createmutexexa) pour créer un objet Mutex.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-108">A thread uses the [**CreateMutex**](/windows/win32/api/synchapi/nf-synchapi-createmutexa) or [**CreateMutexEx**](/windows/win32/api/synchapi/nf-synchapi-createmutexexa) function to create a mutex object.</span></span> <span data-ttu-id="ee8f2-109">Le thread de création peut demander la propriété immédiate de l’objet mutex et peut également spécifier un nom pour l’objet Mutex.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-109">The creating thread can request immediate ownership of the mutex object and can also specify a name for the mutex object.</span></span> <span data-ttu-id="ee8f2-110">Il peut également créer un mutex sans nom.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-110">It can also create an unnamed mutex.</span></span> <span data-ttu-id="ee8f2-111">Pour plus d’informations sur les noms des objets mutex, Event, Semaphore et Timer, consultez [synchronisation entre processus](interprocess-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="ee8f2-111">For additional information about names for mutex, event, semaphore, and timer objects, see [Interprocess Synchronization](interprocess-synchronization.md).</span></span>

<span data-ttu-id="ee8f2-112">Les threads d’autres processus peuvent ouvrir un handle vers un objet mutex nommé existant en spécifiant son nom dans un appel à la fonction [**OpenMutex**](/windows/win32/api/synchapi/nf-synchapi-openmutexw) .</span><span class="sxs-lookup"><span data-stu-id="ee8f2-112">Threads in other processes can open a handle to an existing named mutex object by specifying its name in a call to the [**OpenMutex**](/windows/win32/api/synchapi/nf-synchapi-openmutexw) function.</span></span> <span data-ttu-id="ee8f2-113">Pour passer un handle à un mutex sans nom à un autre processus, utilisez la fonction [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) ou l’héritage de handle parent-enfant.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-113">To pass a handle to an unnamed mutex to another process, use the [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) function or parent-child handle inheritance.</span></span>

<span data-ttu-id="ee8f2-114">Tout thread avec un handle vers un objet mutex peut utiliser l’une des [fonctions Wait](wait-functions.md) pour demander la propriété de l’objet Mutex.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-114">Any thread with a handle to a mutex object can use one of the [wait functions](wait-functions.md) to request ownership of the mutex object.</span></span> <span data-ttu-id="ee8f2-115">Si l’objet mutex appartient à un autre thread, la fonction Wait bloque le thread demandeur jusqu’à ce que le thread propriétaire libère l’objet mutex à l’aide de la fonction [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) .</span><span class="sxs-lookup"><span data-stu-id="ee8f2-115">If the mutex object is owned by another thread, the wait function blocks the requesting thread until the owning thread releases the mutex object using the [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) function.</span></span> <span data-ttu-id="ee8f2-116">La valeur de retour de la fonction Wait indique si la fonction est retournée pour une raison autre que l’état du mutex défini comme signalé.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-116">The return value of the wait function indicates whether the function returned for some reason other than the state of the mutex being set to signaled.</span></span>

<span data-ttu-id="ee8f2-117">Si plusieurs threads sont en attente sur un mutex, un thread en attente est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-117">If more than one thread is waiting on a mutex, a waiting thread is selected.</span></span> <span data-ttu-id="ee8f2-118">Ne supposez pas un ordre FIFO (premier entré, premier sorti).</span><span class="sxs-lookup"><span data-stu-id="ee8f2-118">Do not assume a first-in, first-out (FIFO) order.</span></span> <span data-ttu-id="ee8f2-119">Les événements externes tels que les APC en mode noyau peuvent modifier l’ordre d’attente.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-119">External events such as kernel-mode APCs can change the wait order.</span></span>

<span data-ttu-id="ee8f2-120">Une fois qu’un thread a obtenu la propriété d’un mutex, il peut spécifier le même Mutex dans des appels répétés aux [fonctions Wait-Functions](wait-functions.md) sans bloquer son exécution.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-120">After a thread obtains ownership of a mutex, it can specify the same mutex in repeated calls to the [wait-functions](wait-functions.md) without blocking its execution.</span></span> <span data-ttu-id="ee8f2-121">Cela empêche un thread de se bloquer en attendant un mutex qu’il détient déjà.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-121">This prevents a thread from deadlocking itself while waiting for a mutex that it already owns.</span></span> <span data-ttu-id="ee8f2-122">Pour libérer sa propriété dans de telles circonstances, le thread doit appeler [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) une fois pour chaque fois que le mutex a respecté les conditions d’une fonction d’attente.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-122">To release its ownership under such circumstances, the thread must call [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) once for each time that the mutex satisfied the conditions of a wait function.</span></span>

<span data-ttu-id="ee8f2-123">Si un thread se termine sans libérer sa propriété d’un objet mutex, l’objet mutex est considéré comme abandonné.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-123">If a thread terminates without releasing its ownership of a mutex object, the mutex object is considered to be abandoned.</span></span> <span data-ttu-id="ee8f2-124">Un thread en attente peut acquérir la propriété d’un objet mutex abandonné, mais la fonction Wait retourne **wait \_ abandonné** pour indiquer que l’objet mutex est abandonné.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-124">A waiting thread can acquire ownership of an abandoned mutex object, but the wait function will return **WAIT\_ABANDONED** to indicate that the mutex object is abandoned.</span></span> <span data-ttu-id="ee8f2-125">Un objet mutex abandonné indique qu’une erreur s’est produite et que toute ressource partagée protégée par l’objet mutex est dans un État indéfini.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-125">An abandoned mutex object indicates that an error has occurred and that any shared resource being protected by the mutex object is in an undefined state.</span></span> <span data-ttu-id="ee8f2-126">Si le thread continue comme si l’objet mutex n’avait pas été abandonné, il n’est plus considéré comme abandonné après la libération de sa propriété par le thread.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-126">If the thread proceeds as though the mutex object had not been abandoned, it is no longer considered abandoned after the thread releases its ownership.</span></span> <span data-ttu-id="ee8f2-127">Cela restaure le comportement normal si un descripteur de l’objet mutex est spécifié par la suite dans une fonction Wait.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-127">This restores normal behavior if a handle to the mutex object is subsequently specified in a wait function.</span></span>

<span data-ttu-id="ee8f2-128">Notez que les [objets de section critique](critical-section-objects.md) fournissent une synchronisation similaire à celle fournie par les objets mutex, à ceci près que les objets de section critique peuvent être utilisés uniquement par les threads d’un processus unique.</span><span class="sxs-lookup"><span data-stu-id="ee8f2-128">Note that [critical section objects](critical-section-objects.md) provide synchronization similar to that provided by mutex objects, except that critical section objects can be used only by the threads of a single process.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ee8f2-129">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="ee8f2-129">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ee8f2-130">Utilisation d’objets mutex</span><span class="sxs-lookup"><span data-stu-id="ee8f2-130">Using Mutex Objects</span></span>](using-mutex-objects.md)
</dt> </dl>

 

 
