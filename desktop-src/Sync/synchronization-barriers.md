---
description: Une barrière de synchronisation permet à plusieurs threads d’attendre que tous les threads aient atteint un point d’exécution particulier avant la poursuite d’un thread.
ms.assetid: 3A76E6F7-C38B-4843-9496-36F3C78B700C
title: Barrières de synchronisation
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4276f0bbc5a10eef391c12cc51ebd475e563bd44
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104210232"
---
# <a name="synchronization-barriers"></a><span data-ttu-id="8aa7d-103">Barrières de synchronisation</span><span class="sxs-lookup"><span data-stu-id="8aa7d-103">Synchronization Barriers</span></span>

<span data-ttu-id="8aa7d-104">Une barrière de synchronisation permet à plusieurs threads d’attendre que tous les threads aient atteint un point d’exécution particulier avant la poursuite d’un thread.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-104">A synchronization barrier enables multiple threads to wait until all threads have all reached a particular point of execution before any thread continues.</span></span> <span data-ttu-id="8aa7d-105">Les barrières de synchronisation ne peuvent pas être partagées entre les processus.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-105">Synchronization barriers cannot be shared across processes.</span></span>

<span data-ttu-id="8aa7d-106">Les barrières de synchronisation sont utiles pour les calculs échelonnés, dans lesquels les threads qui exécutent le même code en parallèle doivent tous effectuer une phase avant de passer à l’étape suivante.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-106">Synchronization barriers are useful for phased computations, in which threads executing the same code in parallel must all complete one phase before moving on to the next.</span></span>

<span data-ttu-id="8aa7d-107">Pour créer une barrière de synchronisation, appelez la fonction [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) et spécifiez un nombre maximal de threads et le nombre de fois qu’un thread doit tourner avant de se bloquer.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-107">To create a synchronization barrier, call the [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) function and specify a maximum number of threads and how many times a thread should spin before it blocks.</span></span> <span data-ttu-id="8aa7d-108">Lancez ensuite les threads qui utiliseront le cloisonnement.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-108">Then launch the threads that will use the barrier.</span></span> <span data-ttu-id="8aa7d-109">Une fois que chaque thread a terminé son travail, il appelle [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) pour attendre le cloisonnement.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-109">After each thread finishes its work, it calls [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) to wait at the barrier.</span></span> <span data-ttu-id="8aa7d-110">La fonction **EnterSynchronizationBarrier** bloque chaque thread jusqu’à ce que le nombre de threads bloqués dans le cloisonnement atteigne le nombre maximal de threads pour le cloisonnement, auquel cas **EnterSynchronizationBarrier** débloque tous les threads.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-110">The **EnterSynchronizationBarrier** function blocks each thread until the number of threads blocked in the barrier reaches the maximum thread count for the barrier, at which point **EnterSynchronizationBarrier** unblocks all the threads.</span></span> <span data-ttu-id="8aa7d-111">La fonction **EnterSynchronizationBarrier** retourne la **valeur true** pour un seul des threads qui ont entré le cloisonnement et retourne **false** pour tous les autres threads.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-111">The **EnterSynchronizationBarrier** function returns **TRUE** for exactly one of the threads that entered the barrier, and returns **FALSE** for all other threads.</span></span>

<span data-ttu-id="8aa7d-112">Pour libérer une barrière de synchronisation lorsqu’elle n’est plus nécessaire, appelez [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span><span class="sxs-lookup"><span data-stu-id="8aa7d-112">To release a synchronization barrier when it is no longer needed, call [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span></span> <span data-ttu-id="8aa7d-113">Il est possible d’appeler cette fonction immédiatement après l’appel de [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) , car cette fonction garantit que tous les threads ont terminé d’utiliser le cloisonnement avant qu’il ne soit libéré.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-113">It is safe to call this function immediately after calling [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) because that function ensures that all threads have finished using the barrier before it is released.</span></span>

<span data-ttu-id="8aa7d-114">Si une barrière de synchronisation ne sera jamais supprimée, les threads peuvent spécifier l’indicateur de **barrière de synchronisation \_ indicateurs de \_ \_ \_ suppression** lorsqu’ils entrent dans le cloisonnement.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-114">If a synchronization barrier will never be deleted, threads can specify the **SYNCHRONIZATION\_BARRIER\_FLAGS\_NO\_DELETE** flag when they enter the barrier.</span></span> <span data-ttu-id="8aa7d-115">Tous les threads qui utilisent le cloisonnement doivent spécifier cet indicateur. Si un thread ne le fait pas, l’indicateur est ignoré.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-115">All threads using the barrier must specify this flag; if any thread does not, the flag is ignored.</span></span> <span data-ttu-id="8aa7d-116">Cet indicateur force la fonction à ignorer le travail supplémentaire requis pour la sécurité de la suppression, ce qui peut améliorer les performances.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-116">This flag causes the function to skip the extra work required for deletion safety, which can improve performance.</span></span> <span data-ttu-id="8aa7d-117">Notez que la suppression d’un cloisonnement alors que cet indicateur est activé peut entraîner un accès géré non valide et un ou plusieurs threads bloqués de manière permanente.</span><span class="sxs-lookup"><span data-stu-id="8aa7d-117">Note that deleting a barrier while this flag is in effect may result in an invalid handle access and one or more permanently blocked threads.</span></span>

 

 



