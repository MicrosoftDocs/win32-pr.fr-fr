---
description: Un objet de minuteur qui peut être attendu est un objet de synchronisation dont l’État est défini sur signalé lorsque l’heure d’échéance spécifiée arrive.
ms.assetid: 5d39ada0-ea31-40d7-b075-aeb657ee508c
title: Objets Timer waitables
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2b9597617705fcd78bb71f63e33a475e3bca78e3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106530153"
---
# <a name="waitable-timer-objects"></a><span data-ttu-id="5b7ef-103">Objets Timer waitables</span><span class="sxs-lookup"><span data-stu-id="5b7ef-103">Waitable Timer Objects</span></span>

<span data-ttu-id="5b7ef-104">Un *objet de minuteur* qui peut être attendu est un objet de synchronisation dont l’État est défini sur signalé lorsque l’heure d’échéance spécifiée arrive.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-104">A *waitable timer object* is a synchronization object whose state is set to signaled when the specified due time arrives.</span></span> <span data-ttu-id="5b7ef-105">Il existe deux types de minuteurs qui peuvent être créés : Manuel-réinitialisation et synchronisation.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-105">There are two types of waitable timers that can be created: manual-reset and synchronization.</span></span> <span data-ttu-id="5b7ef-106">Un minuteur de l’un des deux types peut également être un minuteur périodique.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-106">A timer of either type can also be a periodic timer.</span></span>



| <span data-ttu-id="5b7ef-107">Object</span><span class="sxs-lookup"><span data-stu-id="5b7ef-107">Object</span></span>                | <span data-ttu-id="5b7ef-108">Description</span><span class="sxs-lookup"><span data-stu-id="5b7ef-108">Description</span></span>                                                                                                                                                                                             |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5b7ef-109">réinitialisation manuelle du minuteur</span><span class="sxs-lookup"><span data-stu-id="5b7ef-109">manual-reset timer</span></span>    | <span data-ttu-id="5b7ef-110">Minuterie dont l’état reste signalé jusqu’à ce que [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) soit appelé pour établir une nouvelle heure d’échéance.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-110">A timer whose state remains signaled until [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) is called to establish a new due time.</span></span>                                                                          |
| <span data-ttu-id="5b7ef-111">minuteur de synchronisation</span><span class="sxs-lookup"><span data-stu-id="5b7ef-111">synchronization timer</span></span> | <span data-ttu-id="5b7ef-112">Minuterie dont l’état reste signalé jusqu’à ce qu’un thread termine une opération d’attente sur l’objet de minuteur.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-112">A timer whose state remains signaled until a thread completes a wait operation on the timer object.</span></span>                                                                                                     |
| <span data-ttu-id="5b7ef-113">minuteur périodique</span><span class="sxs-lookup"><span data-stu-id="5b7ef-113">periodic timer</span></span>        | <span data-ttu-id="5b7ef-114">Minuterie réactivée à chaque expiration de la période spécifiée, jusqu’à ce que la minuterie soit réinitialisée ou annulée.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-114">A timer that is reactivated each time the specified period expires, until the timer is reset or canceled.</span></span> <span data-ttu-id="5b7ef-115">Un minuteur périodique est soit un minuteur de réinitialisation manuelle périodique, soit un minuteur de synchronisation périodique.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-115">A periodic timer is either a periodic manual-reset timer or a periodic synchronization timer.</span></span> |



 

> [!Note]  
> <span data-ttu-id="5b7ef-116">Lorsqu’un minuteur est signalé, le processeur doit s’exécuter pour traiter les instructions associées.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-116">When a timer is signaled, the processor must run to process the associated instructions.</span></span> <span data-ttu-id="5b7ef-117">Les minuteries périodiques de fréquence élevée maintiennent le processeur continuellement occupé, ce qui empêche le système de rester dans un [État d’alimentation](../power/system-power-states.md) inférieur pendant une durée significative.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-117">High-frequency periodic timers keep the processor continually busy, which prevents the system from remaining in a lower [power state](../power/system-power-states.md) for any meaningful amount of time.</span></span> <span data-ttu-id="5b7ef-118">Cela peut avoir un impact négatif sur la durée de vie de la batterie de l’ordinateur portable et les scénarios qui dépendent de la gestion de l’alimentation, tels que les grands centres de centres.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-118">This can have a negative impact on portable computer battery life and scenarios that depend on effective power management, such as large datacenters.</span></span> <span data-ttu-id="5b7ef-119">Pour une plus grande efficacité énergétique, envisagez d’utiliser des notifications basées sur les événements plutôt que des notifications temporelles dans votre application.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-119">For greater energy efficiency, consider using event-based notifications instead of time-based notifications in your application.</span></span> <span data-ttu-id="5b7ef-120">Si un minuteur est nécessaire, utilisez une minuterie signalée une seule fois plutôt qu’une minuterie périodique, ou définissez l’intervalle sur une valeur supérieure à une seconde.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-120">If a timer is necessary, use a timer that is signaled once rather than a periodic timer, or set the interval to a value greater than one second.</span></span>

 

<span data-ttu-id="5b7ef-121">Un thread utilise la fonction [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) ou [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) pour créer un objet Timer.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-121">A thread uses the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) or [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) function to create a timer object.</span></span> <span data-ttu-id="5b7ef-122">Le thread de création spécifie si la minuterie est un minuteur de réinitialisation manuelle ou un minuteur de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-122">The creating thread specifies whether the timer is a manual-reset timer or a synchronization timer.</span></span> <span data-ttu-id="5b7ef-123">Le thread de création peut spécifier un nom pour l’objet de minuteur.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-123">The creating thread can specify a name for the timer object.</span></span> <span data-ttu-id="5b7ef-124">Les threads d’autres processus peuvent ouvrir un handle vers une minuterie existante en spécifiant son nom dans un appel à la fonction [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="5b7ef-124">Threads in other processes can open a handle to an existing timer by specifying its name in a call to the [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) function.</span></span> <span data-ttu-id="5b7ef-125">Tout thread avec un handle d’objet Timer peut utiliser l’une des [fonctions Wait](wait-functions.md) pour attendre que l’état du minuteur soit défini comme signalé.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-125">Any thread with a handle to a timer object can use one of the [wait functions](wait-functions.md) to wait for the timer state to be set to signaled.</span></span>

-   <span data-ttu-id="5b7ef-126">Le thread appelle la fonction [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) pour activer la minuterie.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-126">The thread calls the [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) function to activate the timer.</span></span> <span data-ttu-id="5b7ef-127">Notez l’utilisation des paramètres suivants pour **SetWaitableTimer**:</span><span class="sxs-lookup"><span data-stu-id="5b7ef-127">Note the use of the following parameters for **SetWaitableTimer**:</span></span>
-   <span data-ttu-id="5b7ef-128">Utilisez le paramètre *lpDueTime* pour spécifier l’heure à laquelle la minuterie doit être définie sur l’état signalé.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-128">Use the *lpDueTime* parameter to specify the time at which the timer is to be set to the signaled state.</span></span> <span data-ttu-id="5b7ef-129">Lorsqu’un minuteur de réinitialisation manuelle est défini sur l’état signalé, il reste dans cet État jusqu’à ce que [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) établisse une nouvelle heure d’échéance.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-129">When a manual-reset timer is set to the signaled state, it remains in this state until [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) establishes a new due time.</span></span> <span data-ttu-id="5b7ef-130">Quand un minuteur de synchronisation est défini sur l’état signalé, il reste dans cet État jusqu’à ce qu’un thread termine une opération d’attente sur l’objet de minuteur.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-130">When a synchronization timer is set to the signaled state, it remains in this state until a thread completes a wait operation on the timer object.</span></span>
-   <span data-ttu-id="5b7ef-131">Utilisez le paramètre *lPeriod* de la fonction [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) pour spécifier la période du minuteur.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-131">Use the *lPeriod* parameter of the [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) function to specify the timer period.</span></span> <span data-ttu-id="5b7ef-132">Si la période n’est pas égale à zéro, la minuterie est un minuteur périodique. elle est réactivée à chaque expiration de la période, jusqu’à ce que la minuterie soit réinitialisée ou annulée.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-132">If the period is not zero, the timer is a periodic timer; it is reactivated each time the period expires, until the timer is reset or canceled.</span></span> <span data-ttu-id="5b7ef-133">Si la période est égale à zéro, le minuteur n’est pas un minuteur périodique ; elle est signalée une seule fois, puis désactivée.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-133">If the period is zero, the timer is not a periodic timer; it is signaled once and then deactivated.</span></span>

<span data-ttu-id="5b7ef-134">Un thread peut utiliser la fonction [**CancelWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-cancelwaitabletimer) pour définir le minuteur sur l’état inactif.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-134">A thread can use the [**CancelWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-cancelwaitabletimer) function to set the timer to the inactive state.</span></span> <span data-ttu-id="5b7ef-135">Pour réinitialiser la minuterie, appelez [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer).</span><span class="sxs-lookup"><span data-stu-id="5b7ef-135">To reset the timer, call [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer).</span></span> <span data-ttu-id="5b7ef-136">Lorsque vous avez terminé avec l’objet de minuteur, appelez [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) pour fermer le handle de l’objet de minuteur.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-136">When you are finished with the timer object, call [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) to close the handle to the timer object.</span></span>

<span data-ttu-id="5b7ef-137">Le comportement d’un minuteur peut être résumé comme suit :</span><span class="sxs-lookup"><span data-stu-id="5b7ef-137">The behavior of a waitable timer can be summarized as follows:</span></span>

-   <span data-ttu-id="5b7ef-138">Lorsqu’un minuteur est défini, il est annulé s’il était déjà actif, l’état du minuteur n’est pas signalé et le minuteur est placé dans la file d’attente du minuteur du noyau.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-138">When a timer is set, it is canceled if it was already active, the state of the timer is nonsignaled, and the timer is placed in the kernel timer queue.</span></span>
-   <span data-ttu-id="5b7ef-139">Lorsqu’un minuteur expire, la minuterie est définie sur l’état signalé.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-139">When a timer expires, the timer is set to the signaled state.</span></span> <span data-ttu-id="5b7ef-140">Si la minuterie a une routine de saisie semi-automatique, elle est mise en file d’attente vers le thread qui a défini la minuterie.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-140">If the timer has a completion routine, it is queued to the thread that set the timer.</span></span> <span data-ttu-id="5b7ef-141">La routine de saisie semi-automatique reste dans la file d’attente d' [appels de procédure asynchrone](asynchronous-procedure-calls.md) (APC) du thread jusqu’à ce que le thread entre dans un état d’attente averti.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-141">The completion routine remains in the [asynchronous procedure call](asynchronous-procedure-calls.md) (APC) queue of the thread until the thread enters an alertable wait state.</span></span> <span data-ttu-id="5b7ef-142">À ce moment-là, l’APC est distribué et la routine de saisie semi-automatique est appelée.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-142">At that time, the APC is dispatched and the completion routine is called.</span></span> <span data-ttu-id="5b7ef-143">Si la minuterie est périodique, elle est replacée dans la file d’attente du minuteur du noyau.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-143">If the timer is periodic, it is placed back in the kernel timer queue.</span></span>
-   <span data-ttu-id="5b7ef-144">Lorsqu’une minuterie est annulée, elle est supprimée de la file d’attente du minuteur du noyau si elle était en attente.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-144">When a timer is canceled, it is removed from the kernel timer queue if it was pending.</span></span> <span data-ttu-id="5b7ef-145">Si le minuteur a expiré et qu’un APC est toujours mis en file d’attente sur le thread qui a défini la minuterie, l’APC est supprimé de la file d’attente APC du thread.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-145">If the timer had expired and there is still an APC queued to the thread that set the timer, the APC is removed from the thread's APC queue.</span></span> <span data-ttu-id="5b7ef-146">L’état signalé de la minuterie n’est pas affecté.</span><span class="sxs-lookup"><span data-stu-id="5b7ef-146">The signaled state of the timer is not affected.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5b7ef-147">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="5b7ef-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5b7ef-148">Appels de procédure asynchrone</span><span class="sxs-lookup"><span data-stu-id="5b7ef-148">Asynchronous Procedure Calls</span></span>](asynchronous-procedure-calls.md)
</dt> <dt>

[<span data-ttu-id="5b7ef-149">Utilisation d’objets Timer Waitables</span><span class="sxs-lookup"><span data-stu-id="5b7ef-149">Using Waitable Timer Objects</span></span>](using-waitable-timer-objects.md)
</dt> </dl>

 

 
