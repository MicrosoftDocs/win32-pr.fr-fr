---
title: Installation à la demande pour les jeux
description: Cet article technique aborde deux techniques, l’installation à la demande et l’installation en arrière-plan, à l’aide de Windows Installer.
ms.assetid: abaaa7bf-8ed8-0425-6845-3671a56fe7fc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 064dc58c563c372d1320a21040920e492e4e65e4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "106511502"
---
# <a name="install-on-demand-for-games"></a><span data-ttu-id="1d278-103">Installation à la demande pour les jeux</span><span class="sxs-lookup"><span data-stu-id="1d278-103">Install-on-Demand for Games</span></span>

<span data-ttu-id="1d278-104">Cet article technique aborde deux techniques, l’installation à la demande et l’installation en arrière-plan, à l’aide de [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="1d278-104">This technical article discusses two techniques, install-on-demand and background install, using [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span> <span data-ttu-id="1d278-105">Les jeux peuvent utiliser ces techniques d’installation pour offrir une expérience de jeu améliorée et plus agréable pour les joueurs en réduisant le temps d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-105">Games can utilize these installation techniques to provide a better and more pleasant gaming experience for players by reducing the installation time.</span></span>

-   [<span data-ttu-id="1d278-106">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="1d278-106">Overview</span></span>](#overview)
-   [<span data-ttu-id="1d278-107">Prise en charge des correctifs</span><span class="sxs-lookup"><span data-stu-id="1d278-107">Patching Support</span></span>](#patching-support)
-   [<span data-ttu-id="1d278-108">Exemple du kit de développement logiciel (SDK) InstallOnDemand</span><span class="sxs-lookup"><span data-stu-id="1d278-108">The InstallOnDemand SDK Sample</span></span>](#the-installondemand-sdk-sample)
-   [<span data-ttu-id="1d278-109">Fonctionnalités et composants de l’exemple</span><span class="sxs-lookup"><span data-stu-id="1d278-109">The Sample's Features and Components</span></span>](#the-samples-features-and-components)
-   [<span data-ttu-id="1d278-110">Installation</span><span class="sxs-lookup"><span data-stu-id="1d278-110">Installation</span></span>](#installation)
-   [<span data-ttu-id="1d278-111">Limite</span><span class="sxs-lookup"><span data-stu-id="1d278-111">Limitation</span></span>](#limitation)

## <a name="overview"></a><span data-ttu-id="1d278-112">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="1d278-112">Overview</span></span>

<span data-ttu-id="1d278-113">L’installation a été un élément des applications basées sur l’ordinateur depuis longtemps.</span><span class="sxs-lookup"><span data-stu-id="1d278-113">Installation has been an element of computer-based applications for a long time.</span></span> <span data-ttu-id="1d278-114">La plupart des applications nécessitent aujourd’hui qu’elles soient installées sur le disque dur local de l’utilisateur avant de pouvoir être utilisées.</span><span class="sxs-lookup"><span data-stu-id="1d278-114">Most applications today require that they be installed on the user's local hard drive first before they can be used.</span></span> <span data-ttu-id="1d278-115">Les jeux d’ordinateurs ne font pas exception ; Lorsqu’un consommateur achète un jeu Microsoft Windows et tente de l’exécuter, il doit d’abord suivre un processus d’installation qui copie les fichiers nécessaires du disque du jeu vers le disque dur.</span><span class="sxs-lookup"><span data-stu-id="1d278-115">Computer games are no exception; when a consumer buys a Microsoft Windows game and tries to run it, he must first go through an installation process that copies necessary files from the game disc to the hard drive.</span></span> <span data-ttu-id="1d278-116">Ce processus d’installation est généralement long et peut prendre jusqu’à une heure.</span><span class="sxs-lookup"><span data-stu-id="1d278-116">This installation process is usually lengthy and can take as much as an hour to complete.</span></span> <span data-ttu-id="1d278-117">Le temps d’installation est un facteur qui rend les jeux de console plus souhaitables que les jeux basés sur ordinateur pour certains lecteurs, car ils sont en mesure de lire immédiatement un jeu de console après avoir inséré le disque du jeu. La technologie abordée dans cet article va tenter de résoudre ce point en réduisant considérablement le temps d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-117">The installation time is a factor that makes console games more desirable than computer-based games for some players, as they are able to immediately play a console game after inserting the game disc. The technology discussed in this article will attempt to remedy this by drastically reducing the installation time.</span></span>

<span data-ttu-id="1d278-118">En règle générale, les jeux nécessitent l’installation de la totalité ou de la plupart des fichiers avant leur lancement.</span><span class="sxs-lookup"><span data-stu-id="1d278-118">Traditionally, games require that all or most of the files be installed prior to launching.</span></span> <span data-ttu-id="1d278-119">Pour permettre l’installation à la demande, les ressources du jeu doivent être modulaires. autrement dit, le développeur doit diviser les ressources de l’application (graphiques, audio, etc.) en composants.</span><span class="sxs-lookup"><span data-stu-id="1d278-119">In order to achieve install-on-demand, the game resources need to be modular; that is, the developer must divide the application's resources (graphics, audio, and so on) into components.</span></span> <span data-ttu-id="1d278-120">Chaque composant est un ensemble de ressources qui peuvent être installées ou supprimées en tant qu’unité.</span><span class="sxs-lookup"><span data-stu-id="1d278-120">Each component is a set of resources that can be installed or removed as a unit.</span></span> <span data-ttu-id="1d278-121">Une fois cette opération effectuée, le développeur de jeux définit une ou plusieurs fonctionnalités, en général un ou plusieurs par niveau ou zone.</span><span class="sxs-lookup"><span data-stu-id="1d278-121">Once this is done, the game developer defines one or more features, typically one or more per level or zone.</span></span> <span data-ttu-id="1d278-122">Chaque fonctionnalité d’une application spécifie un ensemble de composants nécessaires à l’exécution de cette fonctionnalité particulière.</span><span class="sxs-lookup"><span data-stu-id="1d278-122">Each feature of an application specifies a set of components necessary for running that particular feature.</span></span> <span data-ttu-id="1d278-123">Lorsqu’une application est installée, ses fonctionnalités peuvent être marquées « installer » (composants copiés sur le disque dur local au moment de l’installation) ou « publiées » (composants copiés sur le disque dur local après l’installation initiale lorsque l’application utilise cette fonctionnalité).</span><span class="sxs-lookup"><span data-stu-id="1d278-123">When an application is installed, its features can be marked as "install" (components copied to the local hard drive at installation time) or "advertised" (components copied to the local hard drive after the initial install when the application uses that feature).</span></span> <span data-ttu-id="1d278-124">Un développeur de jeux peut réduire le temps d’installation en concevant le jeu pour le lancer et l’exécuter avec un ensemble minimal de fonctionnalités installées.</span><span class="sxs-lookup"><span data-stu-id="1d278-124">A game developer can reduce the installation time by designing the game to launch and run with a minimal set of features installed.</span></span> <span data-ttu-id="1d278-125">Le reste de ses fonctionnalités peut être marqué comme publié et installé à la demande lorsque l’application doit réellement utiliser des fonctionnalités fournies par ces fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1d278-125">The rest of its features can be marked as advertised and installed on demand when the application actually needs to use functionalities that those features provide.</span></span>

<span data-ttu-id="1d278-126">Les jeux peuvent appeler [Windows Installer](/windows/desktop/Msi/windows-installer-portal) pour installer une fonctionnalité particulière qui n’a peut-être pas été installée.</span><span class="sxs-lookup"><span data-stu-id="1d278-126">Games can call [Windows Installer](/windows/desktop/Msi/windows-installer-portal) to install a particular feature that may not have been installed.</span></span> <span data-ttu-id="1d278-127">Pour que l’installation s’affiche en arrière-plan, un thread de travail peut être utilisé pour effectuer les appels au programme d’installation pendant que le thread principal continue à gérer la logique de jeu et à afficher l’écran.</span><span class="sxs-lookup"><span data-stu-id="1d278-127">To make the installation appear in the background, a worker thread can be used to make the calls to the installer while the primary thread continues to handle game logic and to render the screen.</span></span> <span data-ttu-id="1d278-128">Cela réduit le risque d’interruption de jeu provoqué par l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-128">This minimizes the disruption of gameplay caused by the installation.</span></span> <span data-ttu-id="1d278-129">Le jeu peut lancer l’installation à tout moment.</span><span class="sxs-lookup"><span data-stu-id="1d278-129">The game can initiate the installation at any time.</span></span> <span data-ttu-id="1d278-130">Toutefois, étant donné que l’installation consomme des cycles de processeur, il n’est généralement pas judicieux de procéder à l’installation lorsque le thread principal est un besoin essentiel de la puissance de traitement, par exemple lorsque l’utilisateur se trouve au milieu de l’action.</span><span class="sxs-lookup"><span data-stu-id="1d278-130">However, because the installation consumes processor cycles, it is generally not a good idea to perform the installation when the primary thread is in critical need of processing power, such as when the user is in the middle of the action.</span></span> <span data-ttu-id="1d278-131">Par exemple, un bon moment pour effectuer l’installation peut être pendant le moment où l’utilisateur se trouve dans le menu jeu, lorsque le jeu est suspendu ou réduit, ou lorsque l’utilisateur regarde le film de présentation ou cutscenes.</span><span class="sxs-lookup"><span data-stu-id="1d278-131">For example, a good time to perform the installation may be during the time the user is in the game menu, when the game is paused or minimized, or when the user is watching the introduction movie or cutscenes.</span></span>

## <a name="patching-support"></a><span data-ttu-id="1d278-132">Prise en charge des correctifs</span><span class="sxs-lookup"><span data-stu-id="1d278-132">Patching Support</span></span>

<span data-ttu-id="1d278-133">La plupart des jeux doivent être mis à jour même après avoir été fournis à mesure que des bogues sont résolus et que de nouvelles fonctionnalités sont ajoutées.</span><span class="sxs-lookup"><span data-stu-id="1d278-133">Most games today need to be updated even after they ship as bugs get fixed and new features get added.</span></span> <span data-ttu-id="1d278-134">La mise à jour nécessite souvent des correctifs, ce qui est généralement une procédure simple pour les jeux.</span><span class="sxs-lookup"><span data-stu-id="1d278-134">Updating often requires patching, which is traditionally a straightforward procedure for games.</span></span> <span data-ttu-id="1d278-135">Étant donné que tous les fichiers nécessaires sont installés sur le disque dur de l’utilisateur, la mise à jour corrective d’un jeu implique la copie des fichiers modifiés sur le disque dur, en remplaçant les fichiers existants.</span><span class="sxs-lookup"><span data-stu-id="1d278-135">Because all of the necessary files are installed onto the user's hard drive, patching a game involves copying revised files onto the hard drive, overwriting existing files.</span></span> <span data-ttu-id="1d278-136">Lorsque l’installation à la demande est utilisée, tous les fichiers ne sont pas installés et copiés au moment de la mise à jour corrective.</span><span class="sxs-lookup"><span data-stu-id="1d278-136">When install-on-demand is employed, not all files are installed and copied at the time of patching.</span></span> <span data-ttu-id="1d278-137">Par conséquent, le patcher ne peut pas simplement écrire des fichiers mis à jour dans le dossier du jeu.</span><span class="sxs-lookup"><span data-stu-id="1d278-137">Therefore, the patcher cannot simply write updated files onto the game folder.</span></span>

<span data-ttu-id="1d278-138">[Windows Installer](/windows/desktop/Msi/windows-installer-portal) possède des fonctionnalités permettant d’appliquer des correctifs aux applications qui utilisent Install-on-demand.</span><span class="sxs-lookup"><span data-stu-id="1d278-138">[Windows Installer](/windows/desktop/Msi/windows-installer-portal) has features for patching applications that use install-on-demand.</span></span> <span data-ttu-id="1d278-139">Lors de l’application d’un correctif, le programme d’installation met en cache le correctif sur le système.</span><span class="sxs-lookup"><span data-stu-id="1d278-139">When applying a patch, the installer caches the patch onto the system.</span></span> <span data-ttu-id="1d278-140">Cette fonctionnalité fonctionne bien pour les correctifs avec de petits deltas.</span><span class="sxs-lookup"><span data-stu-id="1d278-140">This feature works well for patches with small deltas.</span></span> <span data-ttu-id="1d278-141">Les fichiers initialement publiés n’ont plus besoin d’être sur le disque au moment de la mise à jour corrective, de sorte que ces fichiers peuvent être publiés.</span><span class="sxs-lookup"><span data-stu-id="1d278-141">The originally released files no longer need to be on the disk at the time of patching, so those files can be advertised.</span></span> <span data-ttu-id="1d278-142">Plus tard, lorsque l’application s’exécute et doit accéder aux fichiers, le programme d’installation installe la version la plus récente de ces fichiers en copiant la version publiée à l’origine à partir du média (par exemple, CDs) et en appliquant le correctif après avoir lu les données de correctifs enregistrées.</span><span class="sxs-lookup"><span data-stu-id="1d278-142">Later, when the application runs and needs to access the files, the installer installs the most recent version of those files by copying the originally released version from the media (for example, CDs) and applying the patch after reading the saved patch data.</span></span>

## <a name="the-installondemand-sdk-sample"></a><span data-ttu-id="1d278-143">Exemple du kit de développement logiciel (SDK) InstallOnDemand</span><span class="sxs-lookup"><span data-stu-id="1d278-143">The InstallOnDemand SDK Sample</span></span>

<span data-ttu-id="1d278-144">L’exemple Install-on-demand pour les jeux illustre les techniques d’installation à la demande décrites dans cet article.</span><span class="sxs-lookup"><span data-stu-id="1d278-144">The Install-on-Demand for Games sample demonstrates the install-on-demand techniques discussed in this article.</span></span> <span data-ttu-id="1d278-145">Contrairement à d’autres exemples, l’installation à la demande pour les jeux ne peut pas être exécutée directement à partir de l’exemple de navigateur.</span><span class="sxs-lookup"><span data-stu-id="1d278-145">Unlike other samples, Install-on-Demand for Games cannot be run directly from the sample browser.</span></span> <span data-ttu-id="1d278-146">Étant donné que l’exemple utilise la [Windows Installer](/windows/desktop/Msi/windows-installer-portal) pour gérer son installation, il doit être inclus dans la base de données des applications installées du programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-146">Because the sample uses the [Windows Installer](/windows/desktop/Msi/windows-installer-portal) to manage its installation, it needs to be included in the installer's database of installed applications.</span></span>

<span data-ttu-id="1d278-147">**Pour lancer l’exemple**</span><span class="sxs-lookup"><span data-stu-id="1d278-147">**To launch the sample**</span></span>

1.  <span data-ttu-id="1d278-148">Utilisez le lien installer le projet dans l’exemple de navigateur pour copier les fichiers de l’exemple dans un dossier.</span><span class="sxs-lookup"><span data-stu-id="1d278-148">Use the Install Project link in the sample browser to copy the sample's files to a folder.</span></span>
2.  <span data-ttu-id="1d278-149">Double-cliquez sur InstallOnDemand.msi pour installer l’exemple.</span><span class="sxs-lookup"><span data-stu-id="1d278-149">Double click InstallOnDemand.msi to install the sample.</span></span>
3.  <span data-ttu-id="1d278-150">Sélectionnez installation par défaut.</span><span class="sxs-lookup"><span data-stu-id="1d278-150">Select Typical Install.</span></span>
4.  <span data-ttu-id="1d278-151">Démarrez l’exemple en lançant l' InstallOnDemand.exe dans le dossier installed (généralement Program Files \\ InstallOnDemand) ou en lançant des programmes dans le menu démarrer \\ .</span><span class="sxs-lookup"><span data-stu-id="1d278-151">Start the sample by launching the InstallOnDemand.exe in the installed folder (typically Program Files\\InstallOnDemand) or by launching from Start Menu\\Programs.</span></span>

<span data-ttu-id="1d278-152">InstallOnDemand.msi est une base de données reconnue par le programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-152">InstallOnDemand.msi is a database recognized by the installer.</span></span> <span data-ttu-id="1d278-153">Il définit l’ensemble du processus d’installation : la structure de répertoires, ce qui va et ne sera pas copié, les ressources qui seront copiées ensemble, les valeurs de Registre à écrire, les raccourcis à créer, etc.</span><span class="sxs-lookup"><span data-stu-id="1d278-153">It defines the entire installation process: the directory structure, what will and will not be copied, what resources will be copied together, what registry values to write, what shortcuts to create, and so forth.</span></span>

<span data-ttu-id="1d278-154">Lorsqu’il est lancé, l’exemple lit une séquence d’introduction.</span><span class="sxs-lookup"><span data-stu-id="1d278-154">When launched, the sample plays an introduction sequence.</span></span> <span data-ttu-id="1d278-155">Le joueur peut l’arrêter et entrer dans le menu principal en appuyant sur la touche ÉCHAP.</span><span class="sxs-lookup"><span data-stu-id="1d278-155">The player can end it and enter the main menu by pressing the ESC key.</span></span> <span data-ttu-id="1d278-156">À la suite de l’introduction, le joueur peut démarrer un nouveau jeu en entrant un nom de caractère et en faisant défiler les statistiques.</span><span class="sxs-lookup"><span data-stu-id="1d278-156">Following the introduction, the player can start a new game by entering a character name and scrolling through the statistics.</span></span> <span data-ttu-id="1d278-157">Avant que l’exemple commence à lire la séquence d’introduction, l’exemple appelle une fonction installer pour vérifier si la fonctionnalité pour le niveau 1 est installée.</span><span class="sxs-lookup"><span data-stu-id="1d278-157">Before the sample begins to play the introduction sequence, the sample calls an installer function to check if the feature for level 1 is installed.</span></span> <span data-ttu-id="1d278-158">Si la fonctionnalité de niveau 1 n’a pas été installée, l’exemple utilise un thread d’arrière-plan pour demander au programme d’installation d’installer le jeu, tandis que le thread principal fait autre chose (par exemple, en lisant la séquence d’introduction, en affichant le menu ou en interagissant avec le joueur lors de la création de caractères).</span><span class="sxs-lookup"><span data-stu-id="1d278-158">If the level 1 feature has not been installed, the sample uses a background thread to ask the installer to install the game, while the primary thread is doing something else (such as playing the introduction sequence, rendering the menu, or interacting with the player on character creation).</span></span> <span data-ttu-id="1d278-159">L’expérience est différente de l’installation d’un jeu traditionnel dans la mesure où l’utilisateur est occupé dans le jeu (en regardant l’introduction ou en créant un nouveau caractère) pendant l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-159">The experience is different from traditional game installation in that the user is occupied in the game (watching the introduction or creating a new character) while installation is in progress.</span></span> <span data-ttu-id="1d278-160">Une fois que le joueur a fini de créer un caractère, l’exemple charge les ressources pour le niveau 1.</span><span class="sxs-lookup"><span data-stu-id="1d278-160">After the player has finished creating a character, the sample loads the resources for level 1.</span></span>

<span data-ttu-id="1d278-161">Sur le côté droit de l’écran d’exemple se trouvent cinq boutons marqués « niveau de lecture 1 » à « niveau de lecture 5 ».</span><span class="sxs-lookup"><span data-stu-id="1d278-161">On the right side of the sample screen are five buttons marked "Play Level 1" through "Play Level 5."</span></span> <span data-ttu-id="1d278-162">Ces boutons simulent l’achèvement du joueur du niveau actuel et avancent jusqu’au suivant.</span><span class="sxs-lookup"><span data-stu-id="1d278-162">These buttons simulate the player's completion of the current level and advancement to the next.</span></span> <span data-ttu-id="1d278-163">Quand l’utilisateur clique sur l’un de ces boutons, un écran de statistiques s’affiche pour afficher des informations sur le niveau qu’il vient de terminer.</span><span class="sxs-lookup"><span data-stu-id="1d278-163">When one of these buttons is clicked, a statistics screen appears showing information about the level that he has just finished.</span></span> <span data-ttu-id="1d278-164">L’exemple prend également cette heure pour demander au programme d’installation de vérifier et d’installer le niveau suivant, s’il n’est pas déjà installé.</span><span class="sxs-lookup"><span data-stu-id="1d278-164">The sample also takes this time to ask the installer to check and install the next level, if it is not already installed.</span></span> <span data-ttu-id="1d278-165">L’installation se produit pendant que le lecteur lit l’écran des statistiques, de sorte que lorsque l’utilisateur clique sur OK pour passer au niveau suivant, les ressources du niveau sont installées et prêtes à être chargées.</span><span class="sxs-lookup"><span data-stu-id="1d278-165">The installation occurs while the player is reading the statistics screen, so that when the user clicks OK to enter the next level, the level's resources are all installed and ready to be loaded.</span></span>

## <a name="the-samples-features-and-components"></a><span data-ttu-id="1d278-166">Fonctionnalités et composants de l’exemple</span><span class="sxs-lookup"><span data-stu-id="1d278-166">The Sample's Features and Components</span></span>

<span data-ttu-id="1d278-167">En règle générale, les jeux nécessitent l’installation de la totalité ou de la plupart des fichiers avant leur lancement.</span><span class="sxs-lookup"><span data-stu-id="1d278-167">Traditionally, games require that all or most of the files be installed prior to launching.</span></span> <span data-ttu-id="1d278-168">Pour permettre l’installation à la demande, les ressources du jeu doivent être modulaires. autrement dit, le développeur doit diviser les ressources de l’application (graphiques, audio, etc.) en composants.</span><span class="sxs-lookup"><span data-stu-id="1d278-168">In order to achieve install-on-demand, the game resources need to be modular; that is, the developer must divide the application's resources (graphics, audio, and so on) into components.</span></span> <span data-ttu-id="1d278-169">Chaque composant est un ensemble de ressources qui peuvent être installées ou supprimées en tant qu’unité.</span><span class="sxs-lookup"><span data-stu-id="1d278-169">Each component is a set of resources that can be installed or removed as a unit.</span></span> <span data-ttu-id="1d278-170">Une fois cette opération effectuée, le développeur de jeux définit une ou plusieurs fonctionnalités, en général un ou plusieurs par niveau ou zone.</span><span class="sxs-lookup"><span data-stu-id="1d278-170">Once this is done, the game developer defines one or more features, typically one or more per level or zone.</span></span> <span data-ttu-id="1d278-171">Chaque fonctionnalité d’une application spécifie un ensemble de composants nécessaires à l’exécution de cette fonctionnalité particulière.</span><span class="sxs-lookup"><span data-stu-id="1d278-171">Each feature of an application specifies a set of components necessary for running that particular feature.</span></span> <span data-ttu-id="1d278-172">Lorsqu’une application est installée, ses fonctionnalités peuvent être marquées comme étant « installées » (composants copiés sur le disque dur local au moment de l’installation) ou « publiées » (composants copiés sur le disque dur local lorsque l’application utilise ultérieurement cette fonctionnalité).</span><span class="sxs-lookup"><span data-stu-id="1d278-172">When an application is installed, its features can be marked as "install" (components copied to the local hard drive at installation time) or "advertised" (components copied to the local hard drive when the application later uses that feature).</span></span> <span data-ttu-id="1d278-173">Un développeur de jeux peut réduire le temps d’installation en concevant le jeu pour qu’il démarre et s’exécute avec un ensemble minimal de fonctionnalités installées.</span><span class="sxs-lookup"><span data-stu-id="1d278-173">A game developer can reduce the installation time by designing the game to launch and start running with a minimal set of features installed.</span></span> <span data-ttu-id="1d278-174">Le reste de ses fonctionnalités peut être marqué comme publié et installé à la demande lorsque l’application doit réellement utiliser des fonctionnalités fournies par ces fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1d278-174">The rest of its features can be marked as advertised and installed on-demand when the application actually needs to use functionalities that those features provide.</span></span>

<span data-ttu-id="1d278-175">Le tableau suivant répertorie les six fonctionnalités de niveau supérieur que l’exemple définit.</span><span class="sxs-lookup"><span data-stu-id="1d278-175">The following table lists the six top-level features that the sample defines.</span></span>



| <span data-ttu-id="1d278-176">Nom de la fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="1d278-176">Feature Name</span></span> | <span data-ttu-id="1d278-177">Fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="1d278-177">Functionality</span></span>                                                                                                                                                                                                             | <span data-ttu-id="1d278-178">Composants</span><span class="sxs-lookup"><span data-stu-id="1d278-178">Components</span></span>  | <span data-ttu-id="1d278-179">Fichiers</span><span class="sxs-lookup"><span data-stu-id="1d278-179">Files</span></span>                                                                     |
|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------------------------------------------------------------------|
| <span data-ttu-id="1d278-180">Core</span><span class="sxs-lookup"><span data-stu-id="1d278-180">Core</span></span>         | <span data-ttu-id="1d278-181">Comprend les ressources requises à tout moment, quel que soit le niveau.</span><span class="sxs-lookup"><span data-stu-id="1d278-181">Includes resources required at all times, regardless of level.</span></span> <span data-ttu-id="1d278-182">Ces ressources sont les suivantes : exemple d’exécutable, média requis par la séquence d’introduction et le chargement de l’écran, et fichier. FX qui gère tout le rendu dans l’exemple.</span><span class="sxs-lookup"><span data-stu-id="1d278-182">These resources are: sample executable, media required by introduction sequence and loading screen, and .fx file that handles all rendering in the sample.</span></span> | <span data-ttu-id="1d278-183">Core</span><span class="sxs-lookup"><span data-stu-id="1d278-183">Core</span></span>        | <span data-ttu-id="1d278-184">InstallOnDemand.exe, InstallOnDemand. FX, Loading.bmp, Level. x</span><span class="sxs-lookup"><span data-stu-id="1d278-184">InstallOnDemand.exe, InstallOnDemand.fx, Loading.bmp, Level.x</span></span>             |
| <span data-ttu-id="1d278-185">Core</span><span class="sxs-lookup"><span data-stu-id="1d278-185">Core</span></span>         | <span data-ttu-id="1d278-186">(identique à ci-dessus)</span><span class="sxs-lookup"><span data-stu-id="1d278-186">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1d278-187">CoreUI</span><span class="sxs-lookup"><span data-stu-id="1d278-187">CoreUI</span></span>      | <span data-ttu-id="1d278-188">Interface utilisateur multimédias \\ \\ dxutcontrols. DDS, Media \\ UI \\ DXUTShared. FX, Media \\ UI \\ Arrow. x</span><span class="sxs-lookup"><span data-stu-id="1d278-188">Media\\UI\\dxutcontrols.dds, Media\\UI\\DXUTShared.fx, Media\\UI\\arrow.x</span></span> |
| <span data-ttu-id="1d278-189">Core</span><span class="sxs-lookup"><span data-stu-id="1d278-189">Core</span></span>         | <span data-ttu-id="1d278-190">(identique à ci-dessus)</span><span class="sxs-lookup"><span data-stu-id="1d278-190">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1d278-191">CoreMisc</span><span class="sxs-lookup"><span data-stu-id="1d278-191">CoreMisc</span></span>    | <span data-ttu-id="1d278-192">Médias \\ divers \\ de la bande. x, media \\ misc \\seafloor.bmp</span><span class="sxs-lookup"><span data-stu-id="1d278-192">Media\\Misc\\seafloor.x, Media\\Misc\\seafloor.bmp</span></span>                        |
| <span data-ttu-id="1d278-193">Core</span><span class="sxs-lookup"><span data-stu-id="1d278-193">Core</span></span>         | <span data-ttu-id="1d278-194">(identique à ci-dessus)</span><span class="sxs-lookup"><span data-stu-id="1d278-194">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1d278-195">CoreSpeeder</span><span class="sxs-lookup"><span data-stu-id="1d278-195">CoreSpeeder</span></span> | <span data-ttu-id="1d278-196">Support \\ PRT-démo \\ Landshark. x, Media \\ PRT Demo \\ \_diff.jpg</span><span class="sxs-lookup"><span data-stu-id="1d278-196">Media\\PRT Demo\\LandShark.x, Media\\PRT Demo\\speeder\_diff.jpg</span></span>          |
| <span data-ttu-id="1d278-197">Core</span><span class="sxs-lookup"><span data-stu-id="1d278-197">Core</span></span>         | <span data-ttu-id="1d278-198">(identique à ci-dessus)</span><span class="sxs-lookup"><span data-stu-id="1d278-198">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1d278-199">CoreReg</span><span class="sxs-lookup"><span data-stu-id="1d278-199">CoreReg</span></span>     | <span data-ttu-id="1d278-200">N/A (valeur de registre)</span><span class="sxs-lookup"><span data-stu-id="1d278-200">N/A (registry value)</span></span>                                                      |
| <span data-ttu-id="1d278-201">Level1</span><span class="sxs-lookup"><span data-stu-id="1d278-201">Level1</span></span>       | <span data-ttu-id="1d278-202">Fournit les ressources utilisées par le niveau 1.</span><span class="sxs-lookup"><span data-stu-id="1d278-202">Provides resources used by level 1.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1d278-203">Level1</span><span class="sxs-lookup"><span data-stu-id="1d278-203">Level1</span></span>      | <span data-ttu-id="1d278-204">Level1.jpg</span><span class="sxs-lookup"><span data-stu-id="1d278-204">Level1.jpg</span></span>                                                                |
| <span data-ttu-id="1d278-205">Level1</span><span class="sxs-lookup"><span data-stu-id="1d278-205">Level1</span></span>       | <span data-ttu-id="1d278-206">(identique au précédent)</span><span class="sxs-lookup"><span data-stu-id="1d278-206">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1d278-207">L1Skybox</span><span class="sxs-lookup"><span data-stu-id="1d278-207">L1Skybox</span></span>    | <span data-ttu-id="1d278-208">\\Sondes de lumière multimédias \\ Galileo \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1d278-208">Media\\Light Probes\\galileo\_cross.dds</span></span>                                   |
| <span data-ttu-id="1d278-209">Level2</span><span class="sxs-lookup"><span data-stu-id="1d278-209">Level2</span></span>       | <span data-ttu-id="1d278-210">Fournit les ressources utilisées par le niveau 2.</span><span class="sxs-lookup"><span data-stu-id="1d278-210">Provides resources used by level 2.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1d278-211">Level2</span><span class="sxs-lookup"><span data-stu-id="1d278-211">Level2</span></span>      | <span data-ttu-id="1d278-212">Level2.jpg</span><span class="sxs-lookup"><span data-stu-id="1d278-212">Level2.jpg</span></span>                                                                |
| <span data-ttu-id="1d278-213">Level2</span><span class="sxs-lookup"><span data-stu-id="1d278-213">Level2</span></span>       | <span data-ttu-id="1d278-214">(identique au précédent)</span><span class="sxs-lookup"><span data-stu-id="1d278-214">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1d278-215">L2Skybox</span><span class="sxs-lookup"><span data-stu-id="1d278-215">L2Skybox</span></span>    | <span data-ttu-id="1d278-216">Traversée de l’analyse Media \\ Light sondes \\ \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1d278-216">Media\\Light Probes\\grace\_cross.dds</span></span>                                     |
| <span data-ttu-id="1d278-217">Level3</span><span class="sxs-lookup"><span data-stu-id="1d278-217">Level3</span></span>       | <span data-ttu-id="1d278-218">Fournit les ressources utilisées par le niveau 3.</span><span class="sxs-lookup"><span data-stu-id="1d278-218">Provides resources used by level 3.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1d278-219">Level3</span><span class="sxs-lookup"><span data-stu-id="1d278-219">Level3</span></span>      | <span data-ttu-id="1d278-220">Level3.jpg</span><span class="sxs-lookup"><span data-stu-id="1d278-220">Level3.jpg</span></span>                                                                |
| <span data-ttu-id="1d278-221">Level3</span><span class="sxs-lookup"><span data-stu-id="1d278-221">Level3</span></span>       | <span data-ttu-id="1d278-222">(identique au précédent)</span><span class="sxs-lookup"><span data-stu-id="1d278-222">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1d278-223">L3Skybox</span><span class="sxs-lookup"><span data-stu-id="1d278-223">L3Skybox</span></span>    | <span data-ttu-id="1d278-224">\\Sondes de lumière multimédia \\ RNL \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1d278-224">Media\\Light Probes\\rnl\_cross.dds</span></span>                                       |
| <span data-ttu-id="1d278-225">Level4</span><span class="sxs-lookup"><span data-stu-id="1d278-225">Level4</span></span>       | <span data-ttu-id="1d278-226">Fournit les ressources utilisées par le niveau 4.</span><span class="sxs-lookup"><span data-stu-id="1d278-226">Provides resources used by level 4.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1d278-227">Level4</span><span class="sxs-lookup"><span data-stu-id="1d278-227">Level4</span></span>      | <span data-ttu-id="1d278-228">Level4.jpg</span><span class="sxs-lookup"><span data-stu-id="1d278-228">Level4.jpg</span></span>                                                                |
| <span data-ttu-id="1d278-229">Level4</span><span class="sxs-lookup"><span data-stu-id="1d278-229">Level4</span></span>       | <span data-ttu-id="1d278-230">(identique au précédent)</span><span class="sxs-lookup"><span data-stu-id="1d278-230">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1d278-231">L4Skybox</span><span class="sxs-lookup"><span data-stu-id="1d278-231">L4Skybox</span></span>    | <span data-ttu-id="1d278-232">\\Sondes de lumière multimédia \\ stpeters \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1d278-232">Media\\Light Probes\\stpeters\_cross.dds</span></span>                                  |
| <span data-ttu-id="1d278-233">Level5</span><span class="sxs-lookup"><span data-stu-id="1d278-233">Level5</span></span>       | <span data-ttu-id="1d278-234">Fournit les ressources utilisées par le niveau 5.</span><span class="sxs-lookup"><span data-stu-id="1d278-234">Provides resources used by level 5.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1d278-235">Level5</span><span class="sxs-lookup"><span data-stu-id="1d278-235">Level5</span></span>      | <span data-ttu-id="1d278-236">Level5.jpg</span><span class="sxs-lookup"><span data-stu-id="1d278-236">Level5.jpg</span></span>                                                                |
| <span data-ttu-id="1d278-237">Level5</span><span class="sxs-lookup"><span data-stu-id="1d278-237">Level5</span></span>       | <span data-ttu-id="1d278-238">(identique au précédent)</span><span class="sxs-lookup"><span data-stu-id="1d278-238">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1d278-239">L5Skybox</span><span class="sxs-lookup"><span data-stu-id="1d278-239">L5Skybox</span></span>    | <span data-ttu-id="1d278-240">\\Sondes de lumière multimédia \\ Uffizi \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1d278-240">Media\\Light Probes\\uffizi\_cross.dds</span></span>                                    |



 

<span data-ttu-id="1d278-241">Les fonctionnalités de niveau1 à Level5 possèdent des sous-fonctionnalités supplémentaires qui contiennent des fichiers qui ne sont pas directement utilisés par l’exemple.</span><span class="sxs-lookup"><span data-stu-id="1d278-241">The Level1 through Level5 features have additional sub-features that contain files not directly used by the sample.</span></span> <span data-ttu-id="1d278-242">Ces fichiers de sous-fonctionnalités ont été ajoutés pour que l’installation soit plus longue.</span><span class="sxs-lookup"><span data-stu-id="1d278-242">These sub-features files have been added to make the installation take longer.</span></span> <span data-ttu-id="1d278-243">Cela permet d’illustrer l’opération d’installation en cours qui s’exécute en arrière-plan pendant l’exécution de l’exemple.</span><span class="sxs-lookup"><span data-stu-id="1d278-243">This is done to illustrate the ongoing installation operation that is running in the background while the sample is running.</span></span>

<span data-ttu-id="1d278-244">Le tableau suivant répertorie les sous-fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1d278-244">The following table lists the sub-features.</span></span>



| <span data-ttu-id="1d278-245">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="1d278-245">Feature</span></span> | <span data-ttu-id="1d278-246">Sous-fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="1d278-246">Sub-features</span></span>                      | <span data-ttu-id="1d278-247">Fichiers</span><span class="sxs-lookup"><span data-stu-id="1d278-247">Files</span></span>                                                                                                                                                                          |
|---------|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1d278-248">Level1</span><span class="sxs-lookup"><span data-stu-id="1d278-248">Level1</span></span>  | <span data-ttu-id="1d278-249">L1PH1, L1PH2, L1PH3, L1PH4, L1PH5</span><span class="sxs-lookup"><span data-stu-id="1d278-249">L1PH1, L1PH2, L1PH3, L1PH4, L1PH5</span></span> | <span data-ttu-id="1d278-250">Données d’espace réservé de niveau1 \\ L1PH1. dat niveau1 données de l’espace réservé \\ L1PH2. dat de niveau1 données de l’espace réservé \\ L1PH3. dat de niveau1 données d’espace réservé \\ L1PH4. dat de niveau1 données \\ L1PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1d278-250">Level1 Placeholder Data\\L1PH1.dat Level1 Placeholder Data\\L1PH2.dat Level1 Placeholder Data\\L1PH3.dat Level1 Placeholder Data\\L1PH4.dat Level1 Placeholder Data\\L1PH5.dat</span></span> |
| <span data-ttu-id="1d278-251">Level2</span><span class="sxs-lookup"><span data-stu-id="1d278-251">Level2</span></span>  | <span data-ttu-id="1d278-252">L2PH1, L2PH2, L2PH3, L2PH4, L2PH5</span><span class="sxs-lookup"><span data-stu-id="1d278-252">L2PH1, L2PH2, L2PH3, L2PH4, L2PH5</span></span> | <span data-ttu-id="1d278-253">Données d’espace réservé de d’isolement2 \\ L2PH1. dat D’isolement2 données d’espace réservé \\ L2PH2. dat d’isolement2 données d’espace réservé \\ L2PH3. dat d’isolement2 données d’espace réservé \\ L2PH4. dat D’isolement2 données d’espace réservé \\ L2PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1d278-253">Level2 Placeholder Data\\L2PH1.dat Level2 Placeholder Data\\L2PH2.dat Level2 Placeholder Data\\L2PH3.dat Level2 Placeholder Data\\L2PH4.dat Level2 Placeholder Data\\L2PH5.dat</span></span> |
| <span data-ttu-id="1d278-254">Level3</span><span class="sxs-lookup"><span data-stu-id="1d278-254">Level3</span></span>  | <span data-ttu-id="1d278-255">L3PH1, L3PH2, L3PH3, L3PH4, L3PH5</span><span class="sxs-lookup"><span data-stu-id="1d278-255">L3PH1, L3PH2, L3PH3, L3PH4, L3PH5</span></span> | <span data-ttu-id="1d278-256">Données de l’espace réservé de niveau3 \\ L3PH1. dat données des espaces réservés du niveau3 \\ L3PH2. dat niveau3 données de l’espace réservé \\ L3PH3. dat niveau3 données d’espace réservé \\ L3PH4. dat niveau3 données d’espace réservé \\ L3PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1d278-256">Level3 Placeholder Data\\L3PH1.dat Level3 Placeholder Data\\L3PH2.dat Level3 Placeholder Data\\L3PH3.dat Level3 Placeholder Data\\L3PH4.dat Level3 Placeholder Data\\L3PH5.dat</span></span> |
| <span data-ttu-id="1d278-257">Level4</span><span class="sxs-lookup"><span data-stu-id="1d278-257">Level4</span></span>  | <span data-ttu-id="1d278-258">L4PH1, L4PH2, L4PH3, L4PH4, L4PH5</span><span class="sxs-lookup"><span data-stu-id="1d278-258">L4PH1, L4PH2, L4PH3, L4PH4, L4PH5</span></span> | <span data-ttu-id="1d278-259">Données d’espace réservé Level4 \\ L4PH1. dat Level4 données d’espace réservé \\ L4PH2. dat Level4 données d’espace réservé L4PH3 \\ . dat Level4 données d’espace réservé L4PH4 \\ . dat Level4 données d’espace réservé L4PH5 \\ . dat</span><span class="sxs-lookup"><span data-stu-id="1d278-259">Level4 Placeholder Data\\L4PH1.dat Level4 Placeholder Data\\L4PH2.dat Level4 Placeholder Data\\L4PH3.dat Level4 Placeholder Data\\L4PH4.dat Level4 Placeholder Data\\L4PH5.dat</span></span> |
| <span data-ttu-id="1d278-260">Level5</span><span class="sxs-lookup"><span data-stu-id="1d278-260">Level5</span></span>  | <span data-ttu-id="1d278-261">L5PH1, L5PH2, L5PH3, L5PH4, L5PH5</span><span class="sxs-lookup"><span data-stu-id="1d278-261">L5PH1, L5PH2, L5PH3, L5PH4, L5PH5</span></span> | <span data-ttu-id="1d278-262">Données d’espace réservé Level5 \\ L5PH1. dat Level5 données d’espace réservé \\ L5PH2. dat Level5 données d’espace réservé L5PH3 \\ . dat Level5 données d’espace réservé L5PH4 \\ . dat Level5 données d’espace réservé L5PH5 \\ . dat</span><span class="sxs-lookup"><span data-stu-id="1d278-262">Level5 Placeholder Data\\L5PH1.dat Level5 Placeholder Data\\L5PH2.dat Level5 Placeholder Data\\L5PH3.dat Level5 Placeholder Data\\L5PH4.dat Level5 Placeholder Data\\L5PH5.dat</span></span> |



 

<span data-ttu-id="1d278-263">Pendant l’installation, la fonctionnalité de base doit être marquée comme « install » et toutes les autres fonctionnalités doivent être marquées « publié ».</span><span class="sxs-lookup"><span data-stu-id="1d278-263">During installation, the core feature should be marked "install" and all other features should be marked "advertised."</span></span> <span data-ttu-id="1d278-264">En installant une seule fonctionnalité au lieu de six, le temps que le joueur doit attendre jusqu’à ce que le jeu se lance soit considérablement réduit.</span><span class="sxs-lookup"><span data-stu-id="1d278-264">By only installing one feature instead of six, the time that the player must wait until the game launches is significantly reduced.</span></span>

## <a name="installation"></a><span data-ttu-id="1d278-265">Installation</span><span class="sxs-lookup"><span data-stu-id="1d278-265">Installation</span></span>

<span data-ttu-id="1d278-266">L' [Windows Installer](/windows/desktop/Msi/windows-installer-portal) fournit un mécanisme permettant à une application de demander l’installation d’une fonctionnalité publiée.</span><span class="sxs-lookup"><span data-stu-id="1d278-266">The [Windows Installer](/windows/desktop/Msi/windows-installer-portal) provides a mechanism for an application to request that an advertised feature be installed.</span></span> <span data-ttu-id="1d278-267">Toutefois, le mécanisme est un appel d’API (Application Programming Interface) synchrone, ce qui signifie que l’application doit attendre à l’intérieur de l’appel jusqu’à ce que l’installation soit terminée.</span><span class="sxs-lookup"><span data-stu-id="1d278-267">However, the mechanism is a synchronous application programming interface (API) call, which means that the application has to wait inside the call until the installation is complete.</span></span> <span data-ttu-id="1d278-268">Pour obtenir une installation en arrière-plan, un thread de travail est requis afin que le thread d’application principal soit libre d’effectuer d’autres tâches importantes, telles que le rendu à l’écran pour continuer à fournir des commentaires visuels sur le lecteur.</span><span class="sxs-lookup"><span data-stu-id="1d278-268">To achieve background installation, a worker thread is required so that the main application thread is free to perform other important tasks, such as rendering on the screen to continue giving the player visual feedback.</span></span>

<span data-ttu-id="1d278-269">Dans l’exemple, il existe trois États d’installation qui se produisent pendant l’exécution de l’exemple : installation active, installation passive et aucune installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-269">In the sample, there are three states of installation that happen during the sample execution: active installation, passive installation, and no installation.</span></span>

-   <span data-ttu-id="1d278-270">L’installation active est une demande initiée par l’exemple lorsqu’il doit accéder aux ressources fournies par une ou plusieurs fonctionnalités, ou les charger.</span><span class="sxs-lookup"><span data-stu-id="1d278-270">Active installation is a request initiated by the sample when it needs to access or load resources provided by one or more features.</span></span> <span data-ttu-id="1d278-271">L’exemple effectue cette opération lorsqu’il ne peut pas continuer tant que la ressource n’est pas installée.</span><span class="sxs-lookup"><span data-stu-id="1d278-271">The sample does this when it can not continue until the resource is installed.</span></span>
-   <span data-ttu-id="1d278-272">L’installation passive est lancée lorsque l’exemple n’effectue pas une tâche critique, par exemple quand le joueur est dans un menu ou regarde une scène coupée.</span><span class="sxs-lookup"><span data-stu-id="1d278-272">Passive installation is initiated when the sample is not performing a critical task such as when the player is at a menu or watching a cut scene.</span></span> <span data-ttu-id="1d278-273">Dans ce cas, le thread de travail vérifie si une fonctionnalité de l’exemple est encore publiée.</span><span class="sxs-lookup"><span data-stu-id="1d278-273">When this is the case, the worker thread checks if any feature of the sample is still advertised.</span></span> <span data-ttu-id="1d278-274">S’il en trouve un, il appelle le programme d’installation pour installer cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="1d278-274">If it can find one, it calls the installer to install that feature.</span></span> <span data-ttu-id="1d278-275">Ce processus se répète jusqu’à ce que toutes les fonctionnalités de l’exemple soient installées.</span><span class="sxs-lookup"><span data-stu-id="1d278-275">This process repeats until every feature of the sample is installed.</span></span> <span data-ttu-id="1d278-276">Fondamentalement, l’installation passive utilise des cycles de processeur supplémentaires pour effectuer l’installation en arrière-plan quand elle est la moins intrusive pour l’exemple principal.</span><span class="sxs-lookup"><span data-stu-id="1d278-276">Essentially, passive installation utilizes extra processor cycles to perform installation in the background when it is least intrusive to the main sample.</span></span>
-   <span data-ttu-id="1d278-277">Aucune installation ne se produit lorsque le joueur est activement engagé dans le jeu ; Cela empêche une chute de fréquence d’images qui perturberait l’expérience utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1d278-277">No installation happens when the player is actively engaged in the game; this prevents a framerate drop which would disrupt the user experience.</span></span>

<span data-ttu-id="1d278-278">Dans l’exemple, une classe CMsiUtil est définie pour gérer toutes les tâches liées à l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-278">In the sample, a class CMsiUtil is defined to handle all installation-related tasks.</span></span> <span data-ttu-id="1d278-279">Fondamentalement, CMsiUtil utilise un thread de travail qui appelle le programme d’installation pour installer les fonctionnalités de l’exemple dans une boucle.</span><span class="sxs-lookup"><span data-stu-id="1d278-279">Essentially, CMsiUtil uses a worker thread that invokes the installer to install the sample's features in a loop.</span></span> <span data-ttu-id="1d278-280">La classe a deux files d’attente qui stockent les demandes d’installation : une file d’attente à priorité élevée pour une installation active et une file d’attente basse priorité pour une installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-280">The class has two queues that store installation requests: one high priority queue for active installation and one low priority queue for passive installation.</span></span> <span data-ttu-id="1d278-281">Pendant l’initialisation, la classe énumère toutes les fonctionnalités du produit et les ajoute à la file d’attente d’installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-281">During initialization, the class enumerates all features of the product and adds them to the passive installation queue.</span></span> <span data-ttu-id="1d278-282">Étant donné que la totalité du produit est mise en file d’attente de cette manière, le produit entier finira par être installé si l’exemple a suffisamment de cycles de processeur libres.</span><span class="sxs-lookup"><span data-stu-id="1d278-282">Because the entire product is queued this way, the entire product will eventually be installed if the sample has enough free processor cycles.</span></span>

<span data-ttu-id="1d278-283">Lorsque l’exemple doit demander une installation active, l’exemple peut appeler CMsiUtil :: UseFeatureSet () et passer le nom de la fonctionnalité de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="1d278-283">When the sample needs to request an active installation, the sample can call CMsiUtil::UseFeatureSet() and pass the name of the top-level feature.</span></span> <span data-ttu-id="1d278-284">UseFeatureSet () met en file d’attente la fonctionnalité demandée et toutes ses sous-fonctionnalités dans la file d’attente d’installation active afin que le thread de travail puisse les installer.</span><span class="sxs-lookup"><span data-stu-id="1d278-284">UseFeatureSet() will queue the requested feature and all of its sub-features in the active installation queue so that the worker thread can install them.</span></span>

<span data-ttu-id="1d278-285">Lors de l’exécution d’une demande d’installation, le thread de travail vérifie la file d’attente d’installation active ainsi que la file d’attente d’installation passive pour déterminer si l’une ou l’autre des demandes supplémentaires est associée à une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="1d278-285">While executing an install request, the worker thread will check the active installation queue as well as the passive installation queue to see if either queue has any additional requests.</span></span> <span data-ttu-id="1d278-286">Chaque fois que le thread trouve une requête, il appellera l’API du programme d’installation pour effectuer l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-286">Each time the thread finds a request, it will call the installer API to perform the actual installation.</span></span> <span data-ttu-id="1d278-287">Une fois que les deux files d’attente sont vides, le thread de travail passe en mode veille avec un appel à [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject).</span><span class="sxs-lookup"><span data-stu-id="1d278-287">Once both queues are empty, the worker thread will go to sleep with a call to [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject).</span></span> <span data-ttu-id="1d278-288">Étant donné que l’ensemble du produit est placé dans la file d’attente d’installation passive pendant l’initialisation, une file d’attente vide implique que la totalité du produit a été installée.</span><span class="sxs-lookup"><span data-stu-id="1d278-288">Because the entire product is placed in the passive installation queue during initialization, an empty queue implies that the entire product has been installed.</span></span>

<span data-ttu-id="1d278-289">L’exemple appelle CMsiUtil :: EnablePassiveInstall () pour activer ou désactiver l’installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-289">The sample calls CMsiUtil::EnablePassiveInstall() to enable or disable passive installation.</span></span> <span data-ttu-id="1d278-290">EnablePassiveInstall (true) incrémente le nombre d’activations pour l’installation passive et EnablePassiveInstall (false) le décrémente.</span><span class="sxs-lookup"><span data-stu-id="1d278-290">EnablePassiveInstall(true) increments the enable count for passive installation, and EnablePassiveInstall(false) decrements it.</span></span> <span data-ttu-id="1d278-291">Si le nombre d’activations est supérieur à 0, la classe traitera la file d’attente d’installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-291">If the enable count is greater than 0, the class will process the passive installation queue.</span></span> <span data-ttu-id="1d278-292">L’exemple permet l’installation passive lorsque l’une des conditions suivantes est remplie :</span><span class="sxs-lookup"><span data-stu-id="1d278-292">The sample allows passive installation when any of the following is true:</span></span>

-   <span data-ttu-id="1d278-293">L’utilisateur visualise la séquence d’introduction initiale.</span><span class="sxs-lookup"><span data-stu-id="1d278-293">The user is viewing the initial introduction sequence.</span></span>
-   <span data-ttu-id="1d278-294">L’utilisateur navigue dans le menu de l’exemple.</span><span class="sxs-lookup"><span data-stu-id="1d278-294">The user is navigating in the sample menu.</span></span>
-   <span data-ttu-id="1d278-295">L’utilisateur visualise les statistiques à la fin d’un niveau.</span><span class="sxs-lookup"><span data-stu-id="1d278-295">The user is viewing the statistics at the end of a level.</span></span>
-   <span data-ttu-id="1d278-296">L’exemple d’application perd son focus et passe à l’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="1d278-296">The sample application loses its focus and goes to the background.</span></span>

<span data-ttu-id="1d278-297">Les méthodes de CMsiUtil sont répertoriées ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="1d278-297">The methods of CMsiUtil are listed below:</span></span>



| <span data-ttu-id="1d278-298">Méthode</span><span class="sxs-lookup"><span data-stu-id="1d278-298">Method</span></span>                | <span data-ttu-id="1d278-299">Description</span><span class="sxs-lookup"><span data-stu-id="1d278-299">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1d278-300">AbortAllRequests</span><span class="sxs-lookup"><span data-stu-id="1d278-300">AbortAllRequests</span></span>      | <span data-ttu-id="1d278-301">Provoque l’abandon de l’installation en cours et vide la file d’attente des demandes d’installation active.</span><span class="sxs-lookup"><span data-stu-id="1d278-301">Causes the current installation to abort and empties the active installation request queue.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="1d278-302">AbortCurrentRequest</span><span class="sxs-lookup"><span data-stu-id="1d278-302">AbortCurrentRequest</span></span>   | <span data-ttu-id="1d278-303">Entraîne l’arrêt de l’installation en cours.</span><span class="sxs-lookup"><span data-stu-id="1d278-303">Causes the installation in progress to abort.</span></span> <span data-ttu-id="1d278-304">Le thread de travail traite ensuite la requête suivante dans la file d’attente, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="1d278-304">The worker thread then processes the next request in the queue, if one exists.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="1d278-305">EnablePassiveInstall</span><span class="sxs-lookup"><span data-stu-id="1d278-305">EnablePassiveInstall</span></span>  | <span data-ttu-id="1d278-306">Incrémente ou décrémente le nombre d’activations de l’installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-306">Increments or decrements passive installation enable count.</span></span> <span data-ttu-id="1d278-307">L’exemple utilise cet appel pour contrôler le moment où l’installation passive peut et ne peut pas se produire.</span><span class="sxs-lookup"><span data-stu-id="1d278-307">The sample uses this call to control when passive installation can and cannot happen.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="1d278-308">GetCurrentFeatureName</span><span class="sxs-lookup"><span data-stu-id="1d278-308">GetCurrentFeatureName</span></span> | <span data-ttu-id="1d278-309">Retourne le nom de la fonctionnalité qui est installée activement.</span><span class="sxs-lookup"><span data-stu-id="1d278-309">Returns the name of the feature that is actively being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="1d278-310">GetFeatureProgress</span><span class="sxs-lookup"><span data-stu-id="1d278-310">GetFeatureProgress</span></span>    | <span data-ttu-id="1d278-311">Retourne la position de la graduation actuelle pour la fonctionnalité en cours d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-311">Returns the current tick position for the feature that is being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="1d278-312">GetFeatureProgressMax</span><span class="sxs-lookup"><span data-stu-id="1d278-312">GetFeatureProgressMax</span></span> | <span data-ttu-id="1d278-313">Retourne le nombre maximal de cycles de progression pour la fonctionnalité en cours d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-313">Returns the maximum number of progress tick for the feature that is being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="1d278-314">Obtenir la dernière erreur</span><span class="sxs-lookup"><span data-stu-id="1d278-314">GetLastError</span></span>          | <span data-ttu-id="1d278-315">Utilisez cette méthode pour récupérer le code de retour de la demande d’installation précédente.</span><span class="sxs-lookup"><span data-stu-id="1d278-315">Use this method to retrieve the return code from the previous installation request.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="1d278-316">GetPassiveProgress</span><span class="sxs-lookup"><span data-stu-id="1d278-316">GetPassiveProgress</span></span>    | <span data-ttu-id="1d278-317">Retourne la position de la barre de progression pour une installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-317">Returns the progress bar tick position for passive installation.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="1d278-318">GetPassiveProgressMax</span><span class="sxs-lookup"><span data-stu-id="1d278-318">GetPassiveProgressMax</span></span> | <span data-ttu-id="1d278-319">Retourne la position actuelle du cycle et le nombre maximal de cycles pour une installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-319">Returns the current tick position and the maximum number of ticks for passive installation.</span></span> <span data-ttu-id="1d278-320">Ensemble, l’exemple peut les utiliser pour montrer la progression globale de l’installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-320">Together, the sample can use them to show the overall progress of the passive installation.</span></span>                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="1d278-321">GetProgress</span><span class="sxs-lookup"><span data-stu-id="1d278-321">GetProgress</span></span>           | <span data-ttu-id="1d278-322">Retourne la position de graduation de la barre de progression pour l’installation de l’ensemble de fonctionnalités actif.</span><span class="sxs-lookup"><span data-stu-id="1d278-322">Returns the progress bar tick position for the active feature set installation.</span></span> <span data-ttu-id="1d278-323">Utilisé lorsque l’exemple affiche la barre de progression de l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-323">This is used when the sample renders the installation progress bar.</span></span> <span data-ttu-id="1d278-324">Étant donné que la Windows Installer fournit uniquement des informations de progression pour la fonctionnalité en cours d’installation, la méthode divise la barre de progression parmi les fonctionnalités demandées afin que l’utilisateur puisse toujours voir l’ensemble de l’installation comme une seule tâche.</span><span class="sxs-lookup"><span data-stu-id="1d278-324">Because the Windows Installer only provides progress information for the one feature being installed, the method divides the progress bar among the requested features so that the user still sees the entire installation as one task.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="1d278-325">GetProgressMax</span><span class="sxs-lookup"><span data-stu-id="1d278-325">GetProgressMax</span></span>        | <span data-ttu-id="1d278-326">Retourne le nombre de cycles de barre de progression maximal pour l’installation de l’ensemble de fonctionnalités actif.</span><span class="sxs-lookup"><span data-stu-id="1d278-326">Returns the maximum progress bar tick count for the active feature set installation.</span></span> <span data-ttu-id="1d278-327">Utilisé lorsque l’exemple affiche la barre de progression de l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-327">This is used when the sample renders the installation progress bar.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="1d278-328">Initialiser</span><span class="sxs-lookup"><span data-stu-id="1d278-328">Initialize</span></span>            | <span data-ttu-id="1d278-329">Initialise la classe avec l’identificateur global unique (GUID) du produit.</span><span class="sxs-lookup"><span data-stu-id="1d278-329">Initializes the class with the product globally unique identifier (GUID).</span></span> <span data-ttu-id="1d278-330">Cette méthode énumère également chaque fonctionnalité de l’application qui a été publiée mais qui n’est pas encore installée, et la place dans la file d’attente d’installation passive pour configurer l’installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-330">This method also enumerates every feature of the application which has been advertised but not yet installed, and places it in the passive installation queue to set up the passive installation.</span></span>                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="1d278-331">IsInstallInProgress</span><span class="sxs-lookup"><span data-stu-id="1d278-331">IsInstallInProgress</span></span>   | <span data-ttu-id="1d278-332">Utilisez cette méthode pour déterminer si une installation active est en cours de traitement.</span><span class="sxs-lookup"><span data-stu-id="1d278-332">Use this method to find out whether an active installation is being processed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="1d278-333">UseFeature</span><span class="sxs-lookup"><span data-stu-id="1d278-333">UseFeature</span></span>            | <span data-ttu-id="1d278-334">Méthode privée appelée par UseFeatureSet.</span><span class="sxs-lookup"><span data-stu-id="1d278-334">Private method called by UseFeatureSet.</span></span> <span data-ttu-id="1d278-335">Vérifie si une fonctionnalité est installée.</span><span class="sxs-lookup"><span data-stu-id="1d278-335">Checks if a feature is installed.</span></span> <span data-ttu-id="1d278-336">Si la fonctionnalité demandée est installée, la méthode retourne.</span><span class="sxs-lookup"><span data-stu-id="1d278-336">If the requested feature is installed the method returns.</span></span> <span data-ttu-id="1d278-337">Si la fonctionnalité n’est pas encore installée (publiée), la méthode met en file d’attente une nouvelle demande d’installation active pour le thread de travail, puis retourne.</span><span class="sxs-lookup"><span data-stu-id="1d278-337">If the feature is not yet installed (advertised), the method queues a new active installation request for the worker thread and then returns.</span></span> <span data-ttu-id="1d278-338">Handle d’événement facultatif qui sera signalé lorsque l’installation demandée est terminée.</span><span class="sxs-lookup"><span data-stu-id="1d278-338">The optional event handle that will be signaled when the requested installation is complete.</span></span>                                                                                                                                                                                                        |
| <span data-ttu-id="1d278-339">UseFeatureSet</span><span class="sxs-lookup"><span data-stu-id="1d278-339">UseFeatureSet</span></span>         | <span data-ttu-id="1d278-340">Appelée par l’exemple lorsqu’il doit accéder aux fonctionnalités fournies par une fonctionnalité particulière ou l’une de ses sous-fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1d278-340">Called by the sample when it needs to access functionalities provided by a particular feature or any of its sub-features.</span></span> <span data-ttu-id="1d278-341">La méthode énumère toutes les fonctionnalités de l’exemple et appelle UseFeature () pour les sous-fonctionnalités de la fonctionnalité racine spécifiée.</span><span class="sxs-lookup"><span data-stu-id="1d278-341">The method enumerates all features of the sample and calls UseFeature() for sub-features of the specified root feature.</span></span> <span data-ttu-id="1d278-342">L’exemple peut passer un descripteur d’événement qui sera signalé lorsque l’ensemble de fonctionnalités est installé.</span><span class="sxs-lookup"><span data-stu-id="1d278-342">The sample can pass in an event handle that will be signaled when the entire feature set is installed.</span></span> <span data-ttu-id="1d278-343">Étant donné que toutes les fonctionnalités sont installées en tant que jeu, le descripteur est spécifié pour la dernière fonctionnalité mise en file d’attente par UseFeature () au lieu de toutes les fonctionnalités, afin que l’exemple soit notifié une fois que toutes les fonctionnalités demandées ont été installées.</span><span class="sxs-lookup"><span data-stu-id="1d278-343">Because the features all installed as a set, The handle is specified for the last feature queued by UseFeature() instead of every feature, so that the sample gets notified once after all requested features are installed.</span></span> |
| <span data-ttu-id="1d278-344">UseProduct</span><span class="sxs-lookup"><span data-stu-id="1d278-344">UseProduct</span></span>            | <span data-ttu-id="1d278-345">Met en file d’attente une demande d’installation active pour le thread de travail afin d’appeler le programme d’installation pour effectuer une installation complète du produit.</span><span class="sxs-lookup"><span data-stu-id="1d278-345">Queues an active installation request for the worker thread to call the installer to perform a full product installation.</span></span> <span data-ttu-id="1d278-346">Handle d’événement facultatif qui sera signalé lorsque l’installation demandée est terminée.</span><span class="sxs-lookup"><span data-stu-id="1d278-346">The optional event handle that will be signaled when the requested installation is complete.</span></span>                                                                                                                                                                                                                                                                                                                                                                |



 

## <a name="limitation"></a><span data-ttu-id="1d278-347">Limitation</span><span class="sxs-lookup"><span data-stu-id="1d278-347">Limitation</span></span>

<span data-ttu-id="1d278-348">La version actuelle du programme d’installation n’est pas conçue pour un accès simultané par plusieurs threads.</span><span class="sxs-lookup"><span data-stu-id="1d278-348">The current version of installer is not designed for simultaneous access by multiple threads.</span></span> <span data-ttu-id="1d278-349">Par conséquent, lorsque le thread de travail appelle le programme d’installation, le thread principal ne doit pas appeler le programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-349">Therefore, when the worker thread is calling into the installer, the main thread should not call the installer.</span></span> <span data-ttu-id="1d278-350">Un exemple de cette limitation se produit dans l’exemple lorsque le thread principal demande une fonctionnalité, puis demande à nouveau la même fonctionnalité avant que le thread de travail ne termine l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-350">An example of this limitation occurs in the sample when the main thread requests a feature, then requests the same feature again before the worker thread completes the installation.</span></span> <span data-ttu-id="1d278-351">La deuxième demande appelle MsiQueryFeatureState () pour déterminer si la fonctionnalité demandée est déjà installée, car le programme d’installation peut parfois indiquer que la fonctionnalité est complètement installée lorsque le thread de travail copie encore les fichiers.</span><span class="sxs-lookup"><span data-stu-id="1d278-351">The second request calls MsiQueryFeatureState() to find out whether the requested feature is already installed, since the installer may sometimes indicate that the feature is completely installed when the worker thread is still copying the files.</span></span>

<span data-ttu-id="1d278-352">Heureusement, il existe une solution de contournement facile pour cela.</span><span class="sxs-lookup"><span data-stu-id="1d278-352">Fortunately, there is an easy work-around for this.</span></span> <span data-ttu-id="1d278-353">CMsiUtil vérifie si une fonctionnalité est en cours d’installation par le thread de travail avant d’appeler des fonctions telles que MsiQueryFeatureState () ou MsiUseFeature () pour demander l’état d’installation de la fonctionnalité en question.</span><span class="sxs-lookup"><span data-stu-id="1d278-353">CMsiUtil will check whether a feature is being installed by the worker thread before it calls functions such as MsiQueryFeatureState() or MsiUseFeature() to ask for the install state of the feature in question.</span></span> <span data-ttu-id="1d278-354">N’oubliez pas que cette limitation peut également devenir un problème ailleurs.</span><span class="sxs-lookup"><span data-stu-id="1d278-354">Be aware that this limitation can also become an issue elsewhere.</span></span>

<span data-ttu-id="1d278-355">La mise à jour corrective peut affecter le bon fonctionnement de l’installation à la demande sur l’ordinateur de l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="1d278-355">Patching can affect how well install-on-demand works on an end-user's computer.</span></span> <span data-ttu-id="1d278-356">L’application d’un correctif qui contient uniquement des données modifiées par rapport à la version précédente peut nécessiter l’installation de la version précédente du fichier mis à jour pour appliquer le delta.</span><span class="sxs-lookup"><span data-stu-id="1d278-356">Applying a patch that only contains data that has changed from the previous version may require that the previous version of the updated file be installed in order to apply the delta.</span></span> <span data-ttu-id="1d278-357">Dans ce cas, le correctif doit demander que le programme d’installation a affecté les fonctionnalités publiées avant d’appliquer le correctif au jeu.</span><span class="sxs-lookup"><span data-stu-id="1d278-357">In this situation, the patch must request that the installer install affected advertised features before applying the patch to the game.</span></span>

<span data-ttu-id="1d278-358">L’exemple est installé en lançant InstallOnDemand.msi, car il suppose que le [Windows Installer](/windows/desktop/Msi/windows-installer-portal) est présent sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="1d278-358">The sample is installed by launching InstallOnDemand.msi because it assumes that the [Windows Installer](/windows/desktop/Msi/windows-installer-portal) is present on the computer.</span></span> <span data-ttu-id="1d278-359">Si le programme d’installation est absent, les fichiers. msi ne sont pas reconnus et leur lancement ne fonctionnera pas.</span><span class="sxs-lookup"><span data-stu-id="1d278-359">If the installer is absent, .msi files are not recognized and launching them will not work.</span></span> <span data-ttu-id="1d278-360">Pour surmonter ce problème, une application doit utiliser un programme d’installation pour effectuer la tâche.</span><span class="sxs-lookup"><span data-stu-id="1d278-360">To overcome this problem, an application should use an installation program to perform the task.</span></span> <span data-ttu-id="1d278-361">Ce programme doit d’abord vérifier si le programme d’installation est présent et, le cas échéant, sa version.</span><span class="sxs-lookup"><span data-stu-id="1d278-361">This program should first check to see if the installer is present, and if so, its version.</span></span> <span data-ttu-id="1d278-362">Si la version ne répond pas aux exigences de l’application, le programme d’installation doit installer le Windows Installer, puis lancer le fichier. msi.</span><span class="sxs-lookup"><span data-stu-id="1d278-362">If the version does not meet the application's requirement, the installation program should install the Windows Installer, then launch the .msi file.</span></span> <span data-ttu-id="1d278-363">Ce processus est connu sous le nom d’amorçage.</span><span class="sxs-lookup"><span data-stu-id="1d278-363">This process is known as bootstrapping.</span></span> <span data-ttu-id="1d278-364">En général, les applications nomment leur programme d’installation d’amorçage Setup.exe.</span><span class="sxs-lookup"><span data-stu-id="1d278-364">Applications typically name their bootstrapping installation program Setup.exe.</span></span> <span data-ttu-id="1d278-365">L’exemple ne gère pas l’amorçage.</span><span class="sxs-lookup"><span data-stu-id="1d278-365">The sample does not handle bootstrapping.</span></span> <span data-ttu-id="1d278-366">Toutefois, vous trouverez des détails complets sur l’amorçage dans la Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="1d278-366">However, complete details on bootstrapping can be found in the Windows Installer.</span></span>

<span data-ttu-id="1d278-367">Les développeurs doivent également être attentifs à la taille de chaque fonctionnalité dans leurs jeux.</span><span class="sxs-lookup"><span data-stu-id="1d278-367">Developers should also pay attention to the size of each feature in their games.</span></span> <span data-ttu-id="1d278-368">Lorsque vous annulez une installation en cours, le programme d’installation restaure l’ordinateur à l’état antérieur à l’installation.</span><span class="sxs-lookup"><span data-stu-id="1d278-368">When canceling an installation in progress, the installer restores the computer to the state before the installation.</span></span> <span data-ttu-id="1d278-369">Cela signifie que l’installation de la fonctionnalité est complètement annulée et qu’il n’y a pas d’installation de fonctionnalité partielle.</span><span class="sxs-lookup"><span data-stu-id="1d278-369">This means that the installation of the feature is completely undone, and there is no partial feature installation.</span></span> <span data-ttu-id="1d278-370">Une grande fonctionnalité nécessite plus de temps pour l’installation, ce qui augmente la probabilité que l’installation soit interrompue et annulée, ou que l’installation interfère avec l’application principale.</span><span class="sxs-lookup"><span data-stu-id="1d278-370">A large feature requires longer time to install, which either increases the likelihood that the install will be interrupted and cancelled or the install will interfere with the main application.</span></span> <span data-ttu-id="1d278-371">Par exemple, vous pouvez activer l’installation passive lorsque l’utilisateur ouvre le menu du jeu au milieu du jeu.</span><span class="sxs-lookup"><span data-stu-id="1d278-371">An example would be enabling passive installation when the user brings up the game menu in the middle of game play.</span></span> <span data-ttu-id="1d278-372">Si une fonctionnalité est installée et que l’utilisateur revient à jouer, le jeu peut effectuer l’une des deux opérations suivantes : elle peut permettre à l’installation passive de se terminer, ou elle peut annuler l’installation passive.</span><span class="sxs-lookup"><span data-stu-id="1d278-372">If a feature is installing and the user goes back to playing, the game can do one of two things: it can let the passive installation complete, or it can cancel the passive installation.</span></span> <span data-ttu-id="1d278-373">Une grande fonctionnalité peut s’adapter mal à l’un ou l’autre des modèles.</span><span class="sxs-lookup"><span data-stu-id="1d278-373">A large feature would fit poorly with either model.</span></span> <span data-ttu-id="1d278-374">Si le jeu permet d’effectuer l’installation de grande taille, l’installation peut nuire aux performances de rendu du jeu pendant une longue période.</span><span class="sxs-lookup"><span data-stu-id="1d278-374">If the game lets the large installation complete, the installation may hinder the game's rendering performance for a long time.</span></span> <span data-ttu-id="1d278-375">À l’inverse, si le jeu annule l’installation, l’utilisateur doit rester dans le menu pendant un certain temps avant de retourner au jeu.</span><span class="sxs-lookup"><span data-stu-id="1d278-375">Conversely, if the game cancels the installation, then the user must stay in the menu for a long time before returning to the game.</span></span> <span data-ttu-id="1d278-376">Les développeurs doivent trouver une taille de fonctionnalité équilibrée qui fonctionne mieux pour leurs jeux individuels.</span><span class="sxs-lookup"><span data-stu-id="1d278-376">Developers should find a balanced feature size that works best for their individual games.</span></span>

 

 