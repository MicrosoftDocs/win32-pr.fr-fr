---
title: Windows Installer pour les développeurs de jeux
description: Cet article donne une vue d’ensemble des Windows Installer, spécifiquement destinés aux développeurs de jeux. Pour obtenir une documentation détaillée sur les fonctionnalités et les API mentionnées dans cet article, consultez le kit de développement logiciel (SDK) de la plate-forme Windows.
ms.assetid: 07401792-b34b-71c9-18f8-a11c916c7d81
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e44227b633f7f9491b8a69bc06aa7945941a154
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104382208"
---
# <a name="windows-installer-for-game-developers"></a><span data-ttu-id="463cf-104">Windows Installer pour les développeurs de jeux</span><span class="sxs-lookup"><span data-stu-id="463cf-104">Windows Installer for Game Developers</span></span>

<span data-ttu-id="463cf-105">Montre comment les Windows Installer peuvent être utilisés pour installer des jeux sur les ordinateurs des utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="463cf-105">Shows how Windows Installer can be used to install games on end-user machines.</span></span> <span data-ttu-id="463cf-106">Windows Installer offre une prise en charge complète d’une interface utilisateur personnalisée, ainsi que de la mise à jour corrective.</span><span class="sxs-lookup"><span data-stu-id="463cf-106">Windows Installer offers full support for a customized user interface, as well as for patching.</span></span>

<span data-ttu-id="463cf-107">Microsoft Windows Installer est l’API par défaut pour l’installation de logiciels sur des ordinateurs Windows.</span><span class="sxs-lookup"><span data-stu-id="463cf-107">Microsoft Windows Installer is the preferred API for installing software on Windows-based computers.</span></span> <span data-ttu-id="463cf-108">Bien que la plupart des fonctionnalités de Windows Installer soient conçues pour prendre en charge le déploiement d’applications métier dans un environnement d’entreprise, Windows Installer est également entièrement adapté à l’installation de jeux sur les ordinateurs des utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="463cf-108">While many of the features of Windows Installer are designed to support deployment of business applications in a corporate environment, Windows Installer is also completely suitable for installing games on end-user machines.</span></span> <span data-ttu-id="463cf-109">Les principaux avantages de l’utilisation de Windows Installer pour l’installation de jeux sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="463cf-109">The primary advantages of using Windows Installer for game installation are:</span></span>

-   <span data-ttu-id="463cf-110">Désinstallation fiable</span><span class="sxs-lookup"><span data-stu-id="463cf-110">Reliable uninstall</span></span>
-   <span data-ttu-id="463cf-111">Possibilité d’installer du contenu à la demande</span><span class="sxs-lookup"><span data-stu-id="463cf-111">Ability to install content on demand</span></span>
-   <span data-ttu-id="463cf-112">Prise en charge d’une interface utilisateur entièrement personnalisée</span><span class="sxs-lookup"><span data-stu-id="463cf-112">Support for completely custom user interface</span></span>
-   <span data-ttu-id="463cf-113">Mise à jour corrective efficace</span><span class="sxs-lookup"><span data-stu-id="463cf-113">Efficient patching</span></span>

<span data-ttu-id="463cf-114">Cet article donne une vue d’ensemble des Windows Installer, spécifiquement destinés aux développeurs de jeux.</span><span class="sxs-lookup"><span data-stu-id="463cf-114">This article gives an overview of Windows Installer, specifically targeted to game developers.</span></span> <span data-ttu-id="463cf-115">Pour obtenir une documentation détaillée sur les fonctionnalités et les API mentionnées dans cet article, consultez le kit de développement logiciel (SDK) de la plate-forme Windows.</span><span class="sxs-lookup"><span data-stu-id="463cf-115">For detailed documentation on the features and APIs mentioned in this article, please refer to the Windows Platform SDK.</span></span>

-   [<span data-ttu-id="463cf-116">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="463cf-116">Overview</span></span>](#overview)
-   [<span data-ttu-id="463cf-117">Concepts clés Windows Installer</span><span class="sxs-lookup"><span data-stu-id="463cf-117">Key Windows Installer Concepts</span></span>](#key-windows-installer-concepts)
    -   [<span data-ttu-id="463cf-118">Composants</span><span class="sxs-lookup"><span data-stu-id="463cf-118">Components</span></span>](#components)
    -   [<span data-ttu-id="463cf-119">Caractéristiques</span><span class="sxs-lookup"><span data-stu-id="463cf-119">Features</span></span>](#features)
-   [<span data-ttu-id="463cf-120">États d’installation</span><span class="sxs-lookup"><span data-stu-id="463cf-120">Install States</span></span>](#install-states)
-   [<span data-ttu-id="463cf-121">Installer à la demande</span><span class="sxs-lookup"><span data-stu-id="463cf-121">Install on Demand</span></span>](#install-on-demand)
-   [<span data-ttu-id="463cf-122">Interface utilisateur personnalisée</span><span class="sxs-lookup"><span data-stu-id="463cf-122">Custom User Interface</span></span>](#custom-user-interface)
-   [<span data-ttu-id="463cf-123">Correctifs</span><span class="sxs-lookup"><span data-stu-id="463cf-123">Patching</span></span>](#patching)
-   [<span data-ttu-id="463cf-124">Autres ressources</span><span class="sxs-lookup"><span data-stu-id="463cf-124">Other Resources</span></span>](#other-resources)

## <a name="overview"></a><span data-ttu-id="463cf-125">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="463cf-125">Overview</span></span>

<span data-ttu-id="463cf-126">Toutes les configurations basées sur Windows Installer utilisent un fichier de base de données d’installation appelé fichier MSI pour décrire le mode d’installation de l’application.</span><span class="sxs-lookup"><span data-stu-id="463cf-126">All Windows Installer-based setups use an installation database file called an MSI file to describe how the application is to be installed.</span></span> <span data-ttu-id="463cf-127">Le fichier MSI contient des informations sur les fichiers, les clés de Registre, les raccourcis de bureau, les associations de fichiers et autres éléments d’application à installer.</span><span class="sxs-lookup"><span data-stu-id="463cf-127">The MSI file contains information on what files, registry keys, desktop shortcuts, file associations, and other application elements are to be installed.</span></span> <span data-ttu-id="463cf-128">Les fichiers réels à installer peuvent être compressés dans le fichier MSI lui-même, regroupés et compressés dans des « fichiers CAB » distincts, ou stockés ailleurs sur le support d’installation en tant que fichiers non compressés individuels.</span><span class="sxs-lookup"><span data-stu-id="463cf-128">The actual files to be installed can be compressed within the MSI file itself, bundled and compressed into separate "cabinet files", or stored elsewhere on the installation media as individual uncompressed files.</span></span> <span data-ttu-id="463cf-129">Le fichier MSI peut également faire référence à des actions personnalisées implémentées de manière externe, afin d’autoriser les actions pour lesquelles le fichier MSI n’est pas autorisé en mode natif.</span><span class="sxs-lookup"><span data-stu-id="463cf-129">The MSI file can also reference externally implemented custom actions, in order to allow for actions for which the MSI file does not natively allow.</span></span>

<span data-ttu-id="463cf-130">Un fichier MSI peut éventuellement contenir une interface utilisateur pour guider l’utilisateur tout au long du processus d’installation.</span><span class="sxs-lookup"><span data-stu-id="463cf-130">An MSI file can optionally contain a user interface to guide the user through the installation process.</span></span> <span data-ttu-id="463cf-131">Cette interface utilisateur convient à la plupart des applications.</span><span class="sxs-lookup"><span data-stu-id="463cf-131">This UI is adequate for most applications.</span></span> <span data-ttu-id="463cf-132">Toutefois, il a l’apparence d’une application Windows normale, et de nombreux développeurs préfèrent que leur application d’installation maintienne l’apparence du jeu lui-même, afin de fournir une expérience utilisateur final plus cohérente.</span><span class="sxs-lookup"><span data-stu-id="463cf-132">However, it has the look and feel of a regular Windows application, and many game developers prefer to have their setup application maintain the look and feel of the game itself, in order to provide a more consistent end-user experience.</span></span> <span data-ttu-id="463cf-133">Pour prendre en charge ce scénario d’interface utilisateur entièrement personnalisé, une application de configuration peut désactiver l’interface utilisateur intégrée de Windows Installer et gérer l’intégralité de l’interface utilisateur elle-même.</span><span class="sxs-lookup"><span data-stu-id="463cf-133">To support this fully custom UI scenario, a setup application can turn off Windows Installer's built-in UI, and handle the entire user interface itself.</span></span> <span data-ttu-id="463cf-134">L’API Windows Installer expose un mécanisme de rappel pour permettre à une interface utilisateur de configuration personnalisée d’être informé de la progression de l’installation, ainsi que des événements importants tels que les demandes de modification de disque.</span><span class="sxs-lookup"><span data-stu-id="463cf-134">The Windows Installer API exposes a callback mechanism to allow a custom setup UI to be notified of the progress of the installation, as well as important events such as disk change requests.</span></span>

<span data-ttu-id="463cf-135">Windows Installer n’est pas une solution de bout en bout pour la création de configurations.</span><span class="sxs-lookup"><span data-stu-id="463cf-135">Windows Installer is not an end-to-end solution for creating setups.</span></span> <span data-ttu-id="463cf-136">Il s’agit uniquement d’une API qui peut être utilisée par un programme d’installation pour effectuer l’installation réelle de fichiers, de clés de Registre, de raccourcis de bureau et d’autres éléments de l’application.</span><span class="sxs-lookup"><span data-stu-id="463cf-136">It is only an API that can be used by a setup program to do the actual installation of files, registry keys, desktop shortcuts, and other elements of the application.</span></span> <span data-ttu-id="463cf-137">Les versions récentes de tous les principaux outils d’installation commerciaux (par exemple, InstallShield, WISE et Microsoft Visual Studio) prennent en charge Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="463cf-137">Recent versions of all of the major commercial setup tools (for example, InstallShield, WISE, and Microsoft Visual Studio) support Windows Installer.</span></span> <span data-ttu-id="463cf-138">Ces outils fournissent des interfaces utilisateur pratiques pour créer la configuration d’un jeu, mais ils s’appuient sur l’API Windows Installer pour effectuer une grande partie de l’installation.</span><span class="sxs-lookup"><span data-stu-id="463cf-138">These tools provide convenient user interfaces for creating the setup for a game, but they rely on the Windows Installer API to do much of the actual installation.</span></span> <span data-ttu-id="463cf-139">Ces outils peuvent également être utilisés uniquement pour créer une base de données MSI contenant le package d’installation, qui peut ensuite être installé à partir d’une interface utilisateur d’installation personnalisée.</span><span class="sxs-lookup"><span data-stu-id="463cf-139">These tools can also be used just to build an MSI database containing the setup package, which can then be installed from a custom-written setup UI.</span></span> <span data-ttu-id="463cf-140">En guise d’alternative aux outils tiers, l’API Windows Installer fournit toutes les fonctions nécessaires à la création et à la manipulation d’une base de données MSI par programme, et le kit de développement logiciel (SDK) de la plate-forme Windows inclut un outil d’édition de base de données MSI simple appelé Orca.</span><span class="sxs-lookup"><span data-stu-id="463cf-140">As an alternative to third-party tools, the Windows Installer API provides all of the functions necessary for creating and manipulating an MSI database programmatically, and the Windows Platform SDK includes a bare-bones MSI database-editing tool called Orca.</span></span>

## <a name="key-windows-installer-concepts"></a><span data-ttu-id="463cf-141">Concepts clés Windows Installer</span><span class="sxs-lookup"><span data-stu-id="463cf-141">Key Windows Installer Concepts</span></span>

<span data-ttu-id="463cf-142">Voici les composants et fonctionnalités de Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="463cf-142">Here are the Windows Installer components and features.</span></span>

### <a name="components"></a><span data-ttu-id="463cf-143">Composants</span><span class="sxs-lookup"><span data-stu-id="463cf-143">Components</span></span>

<span data-ttu-id="463cf-144">Une application est constituée d’un ou de plusieurs composants, identifiés par un ID de composant GUID.</span><span class="sxs-lookup"><span data-stu-id="463cf-144">An application is made up of one or more components, identified by a GUID component ID.</span></span> <span data-ttu-id="463cf-145">Un composant est une unité atomique ; Il est entièrement installé ou n’est pas installé du tout.</span><span class="sxs-lookup"><span data-stu-id="463cf-145">A component is an atomic unit; it is either entirely installed or not installed at all.</span></span> <span data-ttu-id="463cf-146">Un composant peut se composer d’un seul fichier, de plusieurs fichiers, de clés de Registre, de raccourcis de bureau ou d’une combinaison de ces éléments.</span><span class="sxs-lookup"><span data-stu-id="463cf-146">A component can consist of a single file, multiple files, registry keys, desktop shortcuts, or some combination thereof.</span></span> <span data-ttu-id="463cf-147">Les ressources (fichiers, etc.) dans un composant doivent être uniques à ce composant. deux composants ne peuvent pas contenir la même ressource.</span><span class="sxs-lookup"><span data-stu-id="463cf-147">The resources (files, and so on) within a component must be unique to that component-no two components can contain the same resource.</span></span> <span data-ttu-id="463cf-148">Un composant n’est jamais installé explicitement ; Il n’est installé que dans le cadre d’une fonctionnalité (voir ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="463cf-148">A component is never installed explicitly; it is only installed as part of a feature (see following).</span></span>

### <a name="features"></a><span data-ttu-id="463cf-149">Fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="463cf-149">Features</span></span>

<span data-ttu-id="463cf-150">Une fonctionnalité est un groupe de composants, identifié par un ID de fonctionnalité GUID.</span><span class="sxs-lookup"><span data-stu-id="463cf-150">A feature is a group of components, identified by a GUID feature ID.</span></span> <span data-ttu-id="463cf-151">Contrairement aux composants, plusieurs fonctionnalités peuvent contenir le même composant.</span><span class="sxs-lookup"><span data-stu-id="463cf-151">Unlike components, multiple features may contain the same component.</span></span> <span data-ttu-id="463cf-152">Un composant partagé entre plusieurs fonctionnalités sera installé si l’une de ces fonctionnalités est installée, et supprimée uniquement lorsque toutes les fonctionnalités qui font référence au composant ont été désinstallées.</span><span class="sxs-lookup"><span data-stu-id="463cf-152">A component shared between multiple features will be installed if any of those features is installed, and removed only when all features that reference the component have been uninstalled.</span></span> <span data-ttu-id="463cf-153">L’installation d’une fonctionnalité peut être effectuée automatiquement dans le cadre de l’installation d’un produit, ou elle peut être effectuée manuellement à l’aide de l’API [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) .</span><span class="sxs-lookup"><span data-stu-id="463cf-153">Installation of a feature can be done automatically as part of the installation of a product, or it can be done manually using the [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) API.</span></span>

<span data-ttu-id="463cf-154">Bien que peu de jeux aient plusieurs « fonctionnalités » qui peuvent être installées indépendamment, le concept Windows Installer d’une fonctionnalité est toujours utile.</span><span class="sxs-lookup"><span data-stu-id="463cf-154">Although few games have multiple "features" that can be installed independently, the Windows Installer concept of a feature is still useful.</span></span> <span data-ttu-id="463cf-155">Comme une fonctionnalité de Windows Installer n’est rien de plus qu’une collection de composants pouvant être installés ensemble, les jeux peuvent utiliser des fonctionnalités pour regrouper tout le contenu nécessaire pour une étape particulière du jeu.</span><span class="sxs-lookup"><span data-stu-id="463cf-155">Since a Windows Installer feature is nothing more than a collection of components that can be installed together, games can use features to group together all of the content needed for a particular stage of the game.</span></span> <span data-ttu-id="463cf-156">Par exemple, un jeu orienté niveau peut définir une fonctionnalité par niveau, comprenant tout le contenu requis pour ce niveau.</span><span class="sxs-lookup"><span data-stu-id="463cf-156">For example, a level-oriented game could define one feature per level, consisting of all of the content required for that level.</span></span> <span data-ttu-id="463cf-157">Cela permettrait au jeu d’installer le contenu un niveau à la fois à partir du jeu lui-même, au lieu d’installer tout le contenu pour tous les niveaux lors de l’installation initiale.</span><span class="sxs-lookup"><span data-stu-id="463cf-157">This would allow the game to install the content one level at a time from within the game itself, rather than installing all of the content for all of the levels during the initial installation.</span></span>

## <a name="install-states"></a><span data-ttu-id="463cf-158">États d’installation</span><span class="sxs-lookup"><span data-stu-id="463cf-158">Install States</span></span>

<span data-ttu-id="463cf-159">Chaque composant ou fonctionnalité est associé à un état d’installation qui détermine si le composant ou la fonctionnalité est disponible et, le cas échéant, où sont installés les fichiers du composant ou de la fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="463cf-159">Each component or feature has an associated install state, which determines whether the component or feature is available, and if so, where the files for the component or feature are installed.</span></span> <span data-ttu-id="463cf-160">Les États d’installation possibles pour une fonctionnalité sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="463cf-160">The possible install states for a feature are:</span></span>

<dl> <dt>

<span data-ttu-id="463cf-161"><span id="Absent"></span><span id="absent"></span><span id="ABSENT"></span>Manqu</span><span class="sxs-lookup"><span data-stu-id="463cf-161"><span id="Absent"></span><span id="absent"></span><span id="ABSENT"></span>Absent</span></span>
</dt> <dd>

<span data-ttu-id="463cf-162">La fonctionnalité n’est pas installée et est donc inaccessible.</span><span class="sxs-lookup"><span data-stu-id="463cf-162">The feature is not installed and is therefore inaccessible.</span></span>

</dd> <dt>

<span data-ttu-id="463cf-163"><span id="Local"></span><span id="local"></span><span id="LOCAL"></span>Localisé</span><span class="sxs-lookup"><span data-stu-id="463cf-163"><span id="Local"></span><span id="local"></span><span id="LOCAL"></span>Local</span></span>
</dt> <dd>

<span data-ttu-id="463cf-164">La fonctionnalité est disponible et est installée pour être exécutée à partir du disque dur local.</span><span class="sxs-lookup"><span data-stu-id="463cf-164">The feature is available and is installed to run from the local hard drive.</span></span>

</dd> <dt>

<span data-ttu-id="463cf-165"><span id="Source"></span><span id="source"></span><span id="SOURCE"></span>Code</span><span class="sxs-lookup"><span data-stu-id="463cf-165"><span id="Source"></span><span id="source"></span><span id="SOURCE"></span>Source</span></span>
</dt> <dd>

<span data-ttu-id="463cf-166">La fonctionnalité est disponible et est installée pour être exécutée à partir du support source d’origine (généralement un CD ou un DVD).</span><span class="sxs-lookup"><span data-stu-id="463cf-166">The feature is available and is installed to run from the original source media (usually a CD or DVD).</span></span>

</dd> <dt>

<span data-ttu-id="463cf-167"><span id="Advertised"></span><span id="advertised"></span><span id="ADVERTISED"></span>Publiés</span><span class="sxs-lookup"><span data-stu-id="463cf-167"><span id="Advertised"></span><span id="advertised"></span><span id="ADVERTISED"></span>Advertised</span></span>
</dt> <dd>

<span data-ttu-id="463cf-168">La fonctionnalité n’est pas installée, mais peut être installée à la demande à l’aide de l’API [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) .</span><span class="sxs-lookup"><span data-stu-id="463cf-168">The feature is not installed, but can be installed on demand using the [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) API.</span></span> <span data-ttu-id="463cf-169">Lorsque la fonctionnalité est effectivement installée, elle peut être installée à l’état local ou source.</span><span class="sxs-lookup"><span data-stu-id="463cf-169">When the feature is actually installed, it can be installed either to the Local or Source state.</span></span>

</dd> </dl>

<span data-ttu-id="463cf-170">Un composant peut avoir l’un des États ci-dessus, à l’exception de « publié ».</span><span class="sxs-lookup"><span data-stu-id="463cf-170">A component can have any of the above states except for "Advertised."</span></span> <span data-ttu-id="463cf-171">Si un composant fait partie d’une fonctionnalité publiée, le composant s’affiche comme « absent » jusqu’à ce que la fonctionnalité soit installée.</span><span class="sxs-lookup"><span data-stu-id="463cf-171">If a component is part of an advertised feature, the component will appear as "Absent" until the feature is installed.</span></span>

## <a name="install-on-demand"></a><span data-ttu-id="463cf-172">Installer à la demande</span><span class="sxs-lookup"><span data-stu-id="463cf-172">Install on Demand</span></span>

<span data-ttu-id="463cf-173">Windows Installer permet à une application de marquer les fonctionnalités comme publiées, ce qui signifie que la fonctionnalité n’est pas encore installée, mais qu’elle est disponible pour installation au moment de l’exécution, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="463cf-173">Windows Installer allows an application to mark features as Advertised, meaning that the feature is not yet installed, but is available to install at runtime if it is needed.</span></span> <span data-ttu-id="463cf-174">L’installation des fonctionnalités au moment de l’exécution est appelée « installation à la demande ».</span><span class="sxs-lookup"><span data-stu-id="463cf-174">Installing features at runtime is known as "Install on Demand."</span></span> <span data-ttu-id="463cf-175">Les jeux peuvent utiliser l’installation à la demande pour réduire considérablement le temps nécessaire à la configuration initiale du jeu en différant l’installation du contenu du jeu jusqu’à ce qu’il soit nécessaire au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="463cf-175">Games can use Install on Demand to drastically reduce the time required for the initial game setup by deferring the installation of game content until it is needed at runtime.</span></span> <span data-ttu-id="463cf-176">Le délai nécessaire pour installer le contenu au moment de l’exécution peut souvent être partiellement ou complètement masqué en procédant à une installation à la demande dans un thread d’arrière-plan, tandis que l’utilisateur est occupé par le jeu.</span><span class="sxs-lookup"><span data-stu-id="463cf-176">The delay required to install the content at runtime can often be partially or completely hidden by doing the on-demand installation in a background thread, while the user is otherwise occupied with the game.</span></span>

## <a name="custom-user-interface"></a><span data-ttu-id="463cf-177">Interface utilisateur personnalisée</span><span class="sxs-lookup"><span data-stu-id="463cf-177">Custom User Interface</span></span>

<span data-ttu-id="463cf-178">Bien que Windows Installer fournit une interface utilisateur par défaut qui guide l’utilisateur tout au long de l’installation de l’application, cette interface ressemble à celle d’une application Windows standard.</span><span class="sxs-lookup"><span data-stu-id="463cf-178">Although Windows Installer provides a default user interface that guides the user through the installation of the application, this interface looks like that of a standard Windows application.</span></span> <span data-ttu-id="463cf-179">De nombreux développeurs de jeux préfèrent que leur interface utilisateur d’installation ait le même aspect que le jeu lui-même, afin de fournir à l’utilisateur un goût de la ambiance du jeu.</span><span class="sxs-lookup"><span data-stu-id="463cf-179">Many game developers prefer that their installation UI have the same look and feel as the game itself, to provide the user with a taste of the game's ambiance.</span></span> <span data-ttu-id="463cf-180">Pour prendre cela en charge, Windows Installer permet à l’interface utilisateur intégrée d’être complètement désactivée, ce qui permet au développeur de fournir une interface utilisateur entièrement personnalisée.</span><span class="sxs-lookup"><span data-stu-id="463cf-180">To support this, Windows Installer allows its built-in user interface to be completely disabled, allowing the developer to provide a completely custom UI.</span></span>

<span data-ttu-id="463cf-181">Le programme d’installation personnalisée désactive d’abord l’interface utilisateur intégrée de Windows Installer à l’aide de l’API [**MsiSetInternalUI**](/windows/desktop/api/msi/nf-msi-msisetinternalui) pour définir le niveau de l’interface utilisateur sur INSTALLUILEVEL \_ None.</span><span class="sxs-lookup"><span data-stu-id="463cf-181">The custom setup program first disables Windows Installer's built-in user interface using the [**MsiSetInternalUI**](/windows/desktop/api/msi/nf-msi-msisetinternalui) API to set the UI level to INSTALLUILEVEL\_NONE.</span></span> <span data-ttu-id="463cf-182">Il appelle ensuite l’API [**MsiSetExternalUI**](/windows/desktop/api/msi/nf-msi-msisetexternaluia) pour spécifier une fonction de rappel qui sera appelée au cours du processus d’installation pour notifier le programme d’installation des événements clés au cours de l’installation.</span><span class="sxs-lookup"><span data-stu-id="463cf-182">It then calls the [**MsiSetExternalUI**](/windows/desktop/api/msi/nf-msi-msisetexternaluia) API to specify a callback function that will be called during the installation process to notify the setup program of key events during the installation.</span></span>

<span data-ttu-id="463cf-183">Le processus d’installation réel est ensuite démarré en appelant l’API [**MsiInstallProduct**](/windows/desktop/api/msi/nf-msi-msiinstallproducta) .</span><span class="sxs-lookup"><span data-stu-id="463cf-183">The actual installation process is then started by calling the [**MsiInstallProduct**](/windows/desktop/api/msi/nf-msi-msiinstallproducta) API.</span></span> <span data-ttu-id="463cf-184">Cette API accepte une chaîne de paramètres qui permet à l’appelant de spécifier des valeurs pour les propriétés nommées.</span><span class="sxs-lookup"><span data-stu-id="463cf-184">This API accepts a parameter string that allows the caller to specify values for named properties.</span></span> <span data-ttu-id="463cf-185">Ces propriétés peuvent être utilisées dans la base de données d’installation elle-même pour personnaliser la façon dont l’application doit être installée.</span><span class="sxs-lookup"><span data-stu-id="463cf-185">These properties can be used within the installation database itself to customize how the application is to be installed.</span></span> <span data-ttu-id="463cf-186">Ces propriétés peuvent être utilisées pour spécifier les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="463cf-186">These properties can be used to specify:</span></span>

-   <span data-ttu-id="463cf-187">Répertoire dans lequel l’application doit être installée</span><span class="sxs-lookup"><span data-stu-id="463cf-187">The directory to which the application is to be installed</span></span>
-   <span data-ttu-id="463cf-188">Quelles fonctionnalités doivent être installées localement et qui doivent être installées pour être exécutées à partir du CD/DVD (par exemple, pour activer le choix entre une installation minimale et une installation complète)</span><span class="sxs-lookup"><span data-stu-id="463cf-188">Which features are to be installed locally and which are to be installed to run from the CD/DVD (for example, to enable choosing between a minimal install and a full install)</span></span>
-   <span data-ttu-id="463cf-189">Si l’application doit être installée pour tous les utilisateurs de l’ordinateur ou uniquement pour l’utilisateur actuel</span><span class="sxs-lookup"><span data-stu-id="463cf-189">Whether the application should be installed for all users of the machine, or for only the current user</span></span>

<span data-ttu-id="463cf-190">Au cours de l’installation, le programme d’installation utilise les messages de notification envoyés à sa fonction de rappel pour déterminer quand mettre à jour son interface utilisateur de l’indicateur de progression, quand il doit inviter l’utilisateur à insérer le CD suivant, ou quand notifier l’utilisateur d’une erreur dans le processus d’installation.</span><span class="sxs-lookup"><span data-stu-id="463cf-190">During the course of the installation, the setup program uses the notification messages sent to its callback function to determine when to update its progress indicator UI, when to prompt the user to insert the next CD, or when to notify the user about an error in the installation process.</span></span>

## <a name="patching"></a><span data-ttu-id="463cf-191">Application de correctifs</span><span class="sxs-lookup"><span data-stu-id="463cf-191">Patching</span></span>

<span data-ttu-id="463cf-192">Windows Installer permet d’appliquer des correctifs aux applications installées en appliquant un fichier correctif.</span><span class="sxs-lookup"><span data-stu-id="463cf-192">Windows Installer allows installed applications to be patched by applying a patch file.</span></span> <span data-ttu-id="463cf-193">Un fichier correctif contient les nouveaux fichiers à ajouter par le correctif, les fichiers modifiés par le correctif et une liste des modifications à apporter à la base de données d’installation.</span><span class="sxs-lookup"><span data-stu-id="463cf-193">A patch file contains the new files to be added by the patch, the files that are modified by the patch, and a list of changes to make to the installation database.</span></span> <span data-ttu-id="463cf-194">Pour économiser de l’espace, au lieu de stocker le contenu complet d’un fichier modifié par le correctif, le fichier correctif contient en fait uniquement les différences entre la version d’origine du fichier et la nouvelle version du fichier.</span><span class="sxs-lookup"><span data-stu-id="463cf-194">To conserve space, instead of storing the complete contents of a file changed by the patch, the patch file actually contains only the differences between the original version of the file and the new version of the file.</span></span>

<span data-ttu-id="463cf-195">Pour créer un correctif, vous avez besoin de l’image d’installation de chacune des versions de l’application à partir desquelles vous souhaitez mettre à niveau le correctif, ainsi que de l’image d’installation de la nouvelle version mise à niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="463cf-195">In order to create a patch, you need the setup image for each of the versions of the application that you wish the patch to upgrade from, as well as the setup image for the new, upgraded version of the application.</span></span> <span data-ttu-id="463cf-196">Une image de configuration se compose de la base de données MSI et de tous les fichiers de données réels pour l’application.</span><span class="sxs-lookup"><span data-stu-id="463cf-196">A setup image consists of the MSI database and all of the actual data files for the application.</span></span> <span data-ttu-id="463cf-197">La meilleure façon de créer une image d’installation pour une nouvelle version de l’application consiste à copier l’image d’installation à partir de la version précédente de l’application, puis à apporter toutes les modifications nécessaires pour mettre à jour cette copie vers la version corrigée.</span><span class="sxs-lookup"><span data-stu-id="463cf-197">The best way to create a setup image for a new version of the application is to copy the setup image from the previous version of the application, and then make any changes necessary to update that copy to the patched version.</span></span>

<span data-ttu-id="463cf-198">Une fois que vous disposez de toutes les images d’installation nécessaires, vous pouvez créer les correctifs à l’aide de Msimsp.exe, qui est un outil de création de correctifs disponible dans le cadre du kit de développement logiciel (SDK) de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="463cf-198">Once you have all of the necessary setup images, you can create the patches using Msimsp.exe, which is a patch creation tool available as part of the Platform SDK.</span></span> <span data-ttu-id="463cf-199">L’outil vous demandera les emplacements de chacune des images d’installation, puis déterminera comment représenter efficacement les différences entre les versions successives.</span><span class="sxs-lookup"><span data-stu-id="463cf-199">The tool will ask for the locations of each of the setup images, and then determine how to efficiently represent the differences between the successive versions.</span></span> <span data-ttu-id="463cf-200">La sortie de l’outil est le dernier fichier correctif (identifié par le MSP de l’extension).</span><span class="sxs-lookup"><span data-stu-id="463cf-200">The output of the tool is the final patch file (identified by the extension MSP).</span></span> <span data-ttu-id="463cf-201">Pour installer le correctif par programme, appelez l’API [**MsiApplyPatch**](/windows/desktop/api/msi/nf-msi-msiapplypatcha) .</span><span class="sxs-lookup"><span data-stu-id="463cf-201">In order to install the patch programmatically, call the [**MsiApplyPatch**](/windows/desktop/api/msi/nf-msi-msiapplypatcha) API.</span></span> <span data-ttu-id="463cf-202">L’utilisateur peut également installer le correctif manuellement en double-cliquant sur le fichier MSP dans l’Explorateur.</span><span class="sxs-lookup"><span data-stu-id="463cf-202">The user can also install the patch manually by double-clicking on the MSP file in Explorer.</span></span>

## <a name="other-resources"></a><span data-ttu-id="463cf-203">Autres ressources</span><span class="sxs-lookup"><span data-stu-id="463cf-203">Other Resources</span></span>

-   <span data-ttu-id="463cf-204">Pour plus d’informations sur l’API Windows Installer, consultez [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="463cf-204">For detailed info on the Windows Installer API, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>
-   <span data-ttu-id="463cf-205">Pour plus d’informations sur les meilleures pratiques pour l’installation de jeux, consultez [installation et maintenance des jeux](/windows/desktop/DxTechArts/installation-and-maintenance-of-games).</span><span class="sxs-lookup"><span data-stu-id="463cf-205">For info on best practices for game installation, see [Installation and Maintenance of Games](/windows/desktop/DxTechArts/installation-and-maintenance-of-games).</span></span>

 

 