---
title: Explorateur de jeux Windows pour les développeurs de jeux
description: Cet article décrit le processus d’inscription d’un jeu avec l’Explorateur de jeux et les contrôles parents sur Windows Vista et Windows 7 en utilisant le nouveau schéma GDF.
ms.assetid: 628f14bf-2714-0d68-8267-4f7f48c2774a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c7f59b90a23f407be3990a6a4e24b92d39e66852
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "106513536"
---
# <a name="windows-games-explorer-for-game-developers"></a><span data-ttu-id="d89a2-103">Explorateur de jeux Windows pour les développeurs de jeux</span><span class="sxs-lookup"><span data-stu-id="d89a2-103">Windows Games Explorer for Game Developers</span></span>

<span data-ttu-id="d89a2-104">Windows Vista améliore l’expérience utilisateur des jeux sur Windows en incluant l’Explorateur de jeux.</span><span class="sxs-lookup"><span data-stu-id="d89a2-104">Windows Vista improves the user experience of gaming on Windows by including Games Explorer.</span></span> <span data-ttu-id="d89a2-105">L’Explorateur de jeux est exposé dans le menu Démarrer de Windows Vista en tant que dossier Games et fournit un emplacement central pour accéder aux jeux.</span><span class="sxs-lookup"><span data-stu-id="d89a2-105">Games Explorer is exposed in the Windows Vista Start Menu as the Games folder and provides a central location for accessing games.</span></span>

<span data-ttu-id="d89a2-106">À partir de la version de mars 2009 du kit de développement logiciel (SDK) DirectX, un nouveau schéma de fichier de définition de jeu (GDF) est utilisé pour prendre en charge les fonctionnalités de Windows 7, du fournisseur de jeux et du flux RSS, et IGameExplorer2.</span><span class="sxs-lookup"><span data-stu-id="d89a2-106">Starting with the March 2009 release of the DirectX SDK, a new game definition file (GDF) schema is used to support features in Windows 7, Game Provider and RSS feed, and IGameExplorer2.</span></span> <span data-ttu-id="d89a2-107">IGameExplorer2 est une nouvelle interface de Windows 7 qui simplifie le processus d’intégration d’un jeu avec l’Explorateur de jeux.</span><span class="sxs-lookup"><span data-stu-id="d89a2-107">IGameExplorer2 is a new interface on Windows 7 that simplifies the process of integrating a game with Games Explorer.</span></span>

<span data-ttu-id="d89a2-108">Cet article décrit le processus d’inscription d’un jeu avec l’Explorateur de jeux et les contrôles parents sur Windows Vista et Windows 7 en utilisant le nouveau schéma GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-108">This article outlines the process of registering a game with Games Explorer and parental controls on Windows Vista and Windows 7 by using the new GDF schema.</span></span>

<span data-ttu-id="d89a2-109">Contenu :</span><span class="sxs-lookup"><span data-stu-id="d89a2-109">Contents:</span></span>

-   [<span data-ttu-id="d89a2-110">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="d89a2-110">Prerequisites</span></span>](#prerequisites)
-   [<span data-ttu-id="d89a2-111">Intégration à un programme d’installation</span><span class="sxs-lookup"><span data-stu-id="d89a2-111">Integrating with an Installer</span></span>](#integrating-with-an-installer)
-   [<span data-ttu-id="d89a2-112">Processus d’intégration</span><span class="sxs-lookup"><span data-stu-id="d89a2-112">Integration Process</span></span>](#integration-process)
-   [<span data-ttu-id="d89a2-113">Tâches de l’Explorateur de jeux</span><span class="sxs-lookup"><span data-stu-id="d89a2-113">Games Explorer Tasks</span></span>](#games-explorer-tasks)
-   [<span data-ttu-id="d89a2-114">Intégration dans InstallScript</span><span class="sxs-lookup"><span data-stu-id="d89a2-114">Integrating into InstallScript</span></span>](#integrating-into-installscript)
-   [<span data-ttu-id="d89a2-115">Intégration dans un package MSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-115">Integrating into an MSI Package</span></span>](#integrating-into-an-msi-package)
-   [<span data-ttu-id="d89a2-116">Conseils de débogage</span><span class="sxs-lookup"><span data-stu-id="d89a2-116">Debugging Tips</span></span>](#debugging-tips)
    -   [<span data-ttu-id="d89a2-117">Tester avec l’exemple de code</span><span class="sxs-lookup"><span data-stu-id="d89a2-117">Test with sample code</span></span>](#test-with-sample-code)
    -   [<span data-ttu-id="d89a2-118">Assurez-vous que votre jeu a été correctement supprimé</span><span class="sxs-lookup"><span data-stu-id="d89a2-118">Make sure that your game was removed properly</span></span>](#make-sure-that-your-game-was-removed-properly)
    -   [<span data-ttu-id="d89a2-119">Veillez à signer à l’aide d’Authenticode</span><span class="sxs-lookup"><span data-stu-id="d89a2-119">Be sure to sign using Authenticode</span></span>](#be-sure-to-sign-using-authenticode)
    -   [<span data-ttu-id="d89a2-120">Assurez-vous que les contrôles parentaux sont disponibles</span><span class="sxs-lookup"><span data-stu-id="d89a2-120">Be sure that parental controls are available</span></span>](#be-sure-that-parental-controls-are-available)
    -   [<span data-ttu-id="d89a2-121">Vérifier que les tâches sont de type correct</span><span class="sxs-lookup"><span data-stu-id="d89a2-121">Verify that tasks are of the correct type</span></span>](#verify-that-tasks-are-of-the-correct-type)
    -   [<span data-ttu-id="d89a2-122">Vérifier les données dans le fichier binaire GDF</span><span class="sxs-lookup"><span data-stu-id="d89a2-122">Verify the data in GDF binary</span></span>](#verify-the-data-in-gdf-binary)
-   [<span data-ttu-id="d89a2-123">Résumé</span><span class="sxs-lookup"><span data-stu-id="d89a2-123">Summary</span></span>](#summary)

## <a name="prerequisites"></a><span data-ttu-id="d89a2-124">Prérequis</span><span class="sxs-lookup"><span data-stu-id="d89a2-124">Prerequisites</span></span>

<span data-ttu-id="d89a2-125">Avant de pouvoir intégrer un jeu dans l’Explorateur de jeux, vous devez créer un fichier de définition de jeu (GDF).</span><span class="sxs-lookup"><span data-stu-id="d89a2-125">Before you can integrate a game into Games Explorer, you must create a game definition file (GDF).</span></span> <span data-ttu-id="d89a2-126">Une GDF est un fichier XML qui contient des métadonnées décrivant le jeu.</span><span class="sxs-lookup"><span data-stu-id="d89a2-126">A GDF is an XML file that contains metadata that describes the game.</span></span> <span data-ttu-id="d89a2-127">Dans la version de mars 2009 du kit de développement logiciel (SDK) DirectX, une section pour le fournisseur de jeux, le flux RSS et la tâche de jeu a été ajoutée au schéma GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-127">In the March 2009 release of the DirectX SDK, a section for game provider, RSS feed, and game task has been added to the GDF schema.</span></span> <span data-ttu-id="d89a2-128">Pour suivre les instructions de cet article, vous devez utiliser ce nouveau format GDF pour créer votre fichier GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-128">To use the instructions in this article, you must use this new GDF format to create your GDF file.</span></span>

<span data-ttu-id="d89a2-129">Microsoft fournit un outil de création de GDFs dans le kit de développement logiciel (SDK) DirectX, éditeur de fichiers de définition de jeu, pour faciliter ce processus de création.</span><span class="sxs-lookup"><span data-stu-id="d89a2-129">Microsoft provides a tool for authoring GDFs in the DirectX SDK, Game Definition File Editor, to make this creation process easier.</span></span> <span data-ttu-id="d89a2-130">Cet outil vous permet également de créer des versions localisées d’un GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-130">This tool also helps you create localized versions of a GDF.</span></span>

<span data-ttu-id="d89a2-131">Une fois qu’un GDF a été créé et localisé, il doit être encapsulé dans une section de ressources d’un fichier binaire (exécutable ou DLL), avec la miniature et l’icône du jeu.</span><span class="sxs-lookup"><span data-stu-id="d89a2-131">Once a GDF has been authored and localized, it must be encapsulated within a resource section of a binary file (either an executable or DLL), along with the game's thumbnail and icon.</span></span> <span data-ttu-id="d89a2-132">GDF contient toutes les métadonnées associées au jeu, y compris l’évaluation du jeu.</span><span class="sxs-lookup"><span data-stu-id="d89a2-132">The GDF contains all of the metadata associated with the game, including the game's rating.</span></span> <span data-ttu-id="d89a2-133">Le contrôle parental Windows utilise l’évaluation du jeu pour permettre aux parents de contrôler l’accès au jeu.</span><span class="sxs-lookup"><span data-stu-id="d89a2-133">Windows Parental Controls use the game's rating to allow parents to control access to the game.</span></span> <span data-ttu-id="d89a2-134">Le fichier binaire qui contient le GDF doit être signé numériquement avec un certificat Authenticode valide. dans le cas contraire, l’Explorateur de jeux et le système de contrôle parental ignorent l’évaluation du jeu, car les informations d’évaluation ne peuvent pas être approuvées sans certification.</span><span class="sxs-lookup"><span data-stu-id="d89a2-134">The binary file which contains the GDF must be digitally signed with a valid Authenticode certificate; otherwise, Games Explorer and the parental control system ignores the game's rating, because the rating information cannot be trusted without certification.</span></span> <span data-ttu-id="d89a2-135">Pour plus d’informations sur la signature de code avec Authenticode, consultez [signature Authenticode pour les développeurs de jeux](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="d89a2-135">For more details about signing code with Authenticode, see [Authenticode Signing for Game Developers](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span></span>

## <a name="integrating-with-an-installer"></a><span data-ttu-id="d89a2-136">Intégration à un programme d’installation</span><span class="sxs-lookup"><span data-stu-id="d89a2-136">Integrating with an Installer</span></span>

<span data-ttu-id="d89a2-137">Pour simplifier l’intégration de l’Explorateur de jeux, l’exemple GameUXInstallHelper fournit une API commune qui peut être appelée sur Windows XP, Windows Vista et Windows 7.</span><span class="sxs-lookup"><span data-stu-id="d89a2-137">To simplify Games Explorer integration, the GameUXInstallHelper sample provides a common API that can be called on Windows XP, Windows Vista, and Windows 7.</span></span> <span data-ttu-id="d89a2-138">Il est conçu pour utiliser des scripts pour InstallShield et le système d’installation Wise, ainsi que des actions personnalisées MSI et des outils d’installation personnalisés.</span><span class="sxs-lookup"><span data-stu-id="d89a2-138">It is designed to work with scripts for InstallShield and Wise Installation System, as well as MSI custom actions and custom installation tools.</span></span> <span data-ttu-id="d89a2-139">La détection du système d’exploitation est gérée à l’intérieur de cet exemple de DLL. par conséquent, l’appelant n’a pas à se préoccuper de savoir si le client exécute Windows XP, Windows Vista ou Windows 7.</span><span class="sxs-lookup"><span data-stu-id="d89a2-139">Detection of the operating system is handled inside this sample DLL, so the caller does not need to worry whether the client is running Windows XP, Windows Vista, or Windows 7.</span></span>

<span data-ttu-id="d89a2-140">Les fonctions exportées par cette DLL sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="d89a2-140">The functions exported by this DLL are the following:</span></span>

<dl> <dt>

<span data-ttu-id="d89a2-141"><span id="GameExplorerInstallW"></span><span id="gameexplorerinstallw"></span><span id="GAMEEXPLORERINSTALLW"></span>**GameExplorerInstallW**</span><span class="sxs-lookup"><span data-stu-id="d89a2-141"><span id="GameExplorerInstallW"></span><span id="gameexplorerinstallw"></span><span id="GAMEEXPLORERINSTALLW"></span>**GameExplorerInstallW**</span></span>
</dt> <dd>

<span data-ttu-id="d89a2-142">Inscrit un jeu avec l’Explorateur de jeux, en fonction d’un chemin d’accès au fichier binaire GDF, un chemin d’accès complet au dossier où le jeu est installé et l’étendue de l’installation.</span><span class="sxs-lookup"><span data-stu-id="d89a2-142">Registers a game with Games Explorer, given a path to the GDF binary, a full path to the folder where the game is installed, and the installation scope.</span></span>

</dd> <dt>

<span data-ttu-id="d89a2-143"><span id="GameExplorerInstallA"></span><span id="gameexplorerinstalla"></span><span id="GAMEEXPLORERINSTALLA"></span>**GameExplorerInstallA**</span><span class="sxs-lookup"><span data-stu-id="d89a2-143"><span id="GameExplorerInstallA"></span><span id="gameexplorerinstalla"></span><span id="GAMEEXPLORERINSTALLA"></span>**GameExplorerInstallA**</span></span>
</dt> <dd>

<span data-ttu-id="d89a2-144">Inscrit un jeu avec l’Explorateur de jeux ; Version ANSI de **GameExplorerInstallW**.</span><span class="sxs-lookup"><span data-stu-id="d89a2-144">Registers a game with Games Explorer; ANSI version of **GameExplorerInstallW**.</span></span>

</dd> <dt>

<span data-ttu-id="d89a2-145"><span id="GameExplorerUninstallW"></span><span id="gameexploreruninstallw"></span><span id="GAMEEXPLORERUNINSTALLW"></span>**GameExplorerUninstallW**</span><span class="sxs-lookup"><span data-stu-id="d89a2-145"><span id="GameExplorerUninstallW"></span><span id="gameexploreruninstallw"></span><span id="GAMEEXPLORERUNINSTALLW"></span>**GameExplorerUninstallW**</span></span>
</dt> <dd>

<span data-ttu-id="d89a2-146">Supprime un jeu de l’inscription avec l’Explorateur de jeux, en fonction d’un chemin d’accès au fichier binaire GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-146">Removes a game from registration with Games Explorer, given a path to the GDF binary.</span></span>

</dd> <dt>

<span data-ttu-id="d89a2-147"><span id="GameExplorerUninstallA"></span><span id="gameexploreruninstalla"></span><span id="GAMEEXPLORERUNINSTALLA"></span>**GameExplorerUninstallA**</span><span class="sxs-lookup"><span data-stu-id="d89a2-147"><span id="GameExplorerUninstallA"></span><span id="gameexploreruninstalla"></span><span id="GAMEEXPLORERUNINSTALLA"></span>**GameExplorerUninstallA**</span></span>
</dt> <dd>

<span data-ttu-id="d89a2-148">Supprime un jeu de l’inscription avec l’Explorateur de jeux ; Version ANSI de **GameExplorerUninstallW**.</span><span class="sxs-lookup"><span data-stu-id="d89a2-148">Removes a game from registration with Games Explorer; ANSI version of **GameExplorerUninstallW**.</span></span>

</dd> <dt>

<span data-ttu-id="d89a2-149"><span id="GameExplorerSetMSIProperties"></span><span id="gameexplorersetmsiproperties"></span><span id="GAMEEXPLORERSETMSIPROPERTIES"></span>**GameExplorerSetMSIProperties**</span><span class="sxs-lookup"><span data-stu-id="d89a2-149"><span id="GameExplorerSetMSIProperties"></span><span id="gameexplorersetmsiproperties"></span><span id="GAMEEXPLORERSETMSIPROPERTIES"></span>**GameExplorerSetMSIProperties**</span></span>
</dt> <dd>

<span data-ttu-id="d89a2-150">Configure les propriétés CustomActionData pour les actions d’une installation personnalisée dépendante MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-150">Configures the CustomActionData properties for the actions of an MSI deferred custom installation.</span></span> <span data-ttu-id="d89a2-151">L’utilisation de cette fonction est décrite en détail plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="d89a2-151">Usage of this function is described in detail later in this article.</span></span>

</dd> <dt>

<span data-ttu-id="d89a2-152"><span id="GameExplorerInstallUsingMSI"></span><span id="gameexplorerinstallusingmsi"></span><span id="GAMEEXPLORERINSTALLUSINGMSI"></span>**GameExplorerInstallUsingMSI**</span><span class="sxs-lookup"><span data-stu-id="d89a2-152"><span id="GameExplorerInstallUsingMSI"></span><span id="gameexplorerinstallusingmsi"></span><span id="GAMEEXPLORERINSTALLUSINGMSI"></span>**GameExplorerInstallUsingMSI**</span></span>
</dt> <dd>

<span data-ttu-id="d89a2-153">Ajoute un jeu à l’Explorateur de jeux ; à utiliser lors de l’installation d’une action personnalisée MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-153">Adds a game to Games Explorer; for use during an MSI custom action installation.</span></span>

</dd> <dt>

<span data-ttu-id="d89a2-154"><span id="GameExplorerUninstallUsingMSI"></span><span id="gameexploreruninstallusingmsi"></span><span id="GAMEEXPLORERUNINSTALLUSINGMSI"></span>**GameExplorerUninstallUsingMSI**</span><span class="sxs-lookup"><span data-stu-id="d89a2-154"><span id="GameExplorerUninstallUsingMSI"></span><span id="gameexploreruninstallusingmsi"></span><span id="GAMEEXPLORERUNINSTALLUSINGMSI"></span>**GameExplorerUninstallUsingMSI**</span></span>
</dt> <dd>

<span data-ttu-id="d89a2-155">Supprimer un jeu de l’Explorateur de jeux ; à utiliser lors de l’installation d’une action personnalisée MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-155">Remove a game from Games Explorer; for use during an MSI custom action installation.</span></span>

</dd> </dl>

<span data-ttu-id="d89a2-156">Ces fonctions sont expliquées plus en détail dans l’en-tête GameUXInstallHelper. h.</span><span class="sxs-lookup"><span data-stu-id="d89a2-156">These functions are further explained in the GameUXInstallHelper.h header.</span></span>

## <a name="integration-process"></a><span data-ttu-id="d89a2-157">Processus d’intégration</span><span class="sxs-lookup"><span data-stu-id="d89a2-157">Integration Process</span></span>

<span data-ttu-id="d89a2-158">Une fois que le GDF et les fichiers associés ont été ajoutés à une ressource binaire, il est alors possible d’intégrer le jeu à l’Explorateur de jeux.</span><span class="sxs-lookup"><span data-stu-id="d89a2-158">Once the GDF and related files have been added to a binary resource, it is then possible to integrate the game with Games Explorer.</span></span> <span data-ttu-id="d89a2-159">L’utilisation de **GameUXInstallHelper** simplifie le processus d’intégration.</span><span class="sxs-lookup"><span data-stu-id="d89a2-159">Using **GameUXInstallHelper** will simplify the integration process.</span></span> <span data-ttu-id="d89a2-160">Pour inscrire le jeu avec l’Explorateur de jeux, appelez **GameExplorerInstall** avec un chemin d’accès au fichier binaire GDF, un chemin d’accès complet au dossier où le jeu est installé et l’étendue de l’installation.</span><span class="sxs-lookup"><span data-stu-id="d89a2-160">To register the game with Games Explorer, call the **GameExplorerInstall** with a path to the GDF binary, a full path to the folder where the game is installed, and the installation scope.</span></span> <span data-ttu-id="d89a2-161">Pour supprimer l’inscription du jeu, appelez **GameExplorerUninstall** avec un chemin d’accès au fichier binaire GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-161">To remove the game's registration, call **GameExplorerUninstall** with a path to the GDF binary.</span></span>

<span data-ttu-id="d89a2-162">Notez que le processus de suppression ne supprime qu’une seule installation unique.</span><span class="sxs-lookup"><span data-stu-id="d89a2-162">Note that the removal process only removes one unique installation.</span></span> <span data-ttu-id="d89a2-163">Si un jeu a été installé plusieurs fois, ce processus doit être répété pour chaque installation unique.</span><span class="sxs-lookup"><span data-stu-id="d89a2-163">If a game has been installed multiple times, this process must be repeated for each unique installation.</span></span>

## <a name="games-explorer-tasks"></a><span data-ttu-id="d89a2-164">Tâches de l’Explorateur de jeux</span><span class="sxs-lookup"><span data-stu-id="d89a2-164">Games Explorer Tasks</span></span>

<span data-ttu-id="d89a2-165">Les tâches de l’Explorateur de jeux s’affichent dans le menu contextuel d’un élément dans l’Explorateur de jeux.</span><span class="sxs-lookup"><span data-stu-id="d89a2-165">Games Explorer tasks will appear in the context menu of an item in Games Explorer.</span></span> <span data-ttu-id="d89a2-166">Les tâches sont réparties entre les tâches de lecture et les tâches de support.</span><span class="sxs-lookup"><span data-stu-id="d89a2-166">Tasks are divided into play tasks and support tasks.</span></span> <span data-ttu-id="d89a2-167">Les tâches de lecture lancent un jeu dans un mode particulier, tandis que les tâches de support servent à d’autres fins, y compris la liaison à des sites Web.</span><span class="sxs-lookup"><span data-stu-id="d89a2-167">Play tasks launch a game into a particular mode, while support tasks serve any other purpose, including linking to web sites.</span></span>

<span data-ttu-id="d89a2-168">Dans Windows Vista, les tâches sont simplement des raccourcis qui se trouvent dans des dossiers spécifiques.</span><span class="sxs-lookup"><span data-stu-id="d89a2-168">In Windows Vista, tasks are simply shortcuts that are located in specific folders.</span></span> <span data-ttu-id="d89a2-169">Les tâches de lecture et les tâches de support sont stockées dans des dossiers avec les noms correspondants PlayTasks et SupportTasks.</span><span class="sxs-lookup"><span data-stu-id="d89a2-169">Play tasks and support tasks are stored in folders with the corresponding names PlayTasks and SupportTasks.</span></span> <span data-ttu-id="d89a2-170">GameUXInstallHelper peut lire les informations sur les tâches du jeu à partir du fichier binaire GDF et créer tous les raccourcis automatiquement.</span><span class="sxs-lookup"><span data-stu-id="d89a2-170">GameUXInstallHelper can read the game's task information from the GDF binary file and create all of the shortcuts automatically.</span></span>

<span data-ttu-id="d89a2-171">Dans Windows 7, les raccourcis vers les tâches ne sont pas nécessaires, car l’Explorateur de jeux obtient toutes les informations de tâche directement à partir du fichier binaire GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-171">In Windows 7, the shortcuts to the tasks are not needed, because Games Explorer obtains all of the task information directly from the GDF binary file.</span></span>

## <a name="integrating-into-installscript"></a><span data-ttu-id="d89a2-172">Intégration dans InstallScript</span><span class="sxs-lookup"><span data-stu-id="d89a2-172">Integrating into InstallScript</span></span>

<span data-ttu-id="d89a2-173">L’appel d’API de l’Explorateur de jeux depuis l’InstallScript d’InstallShield est simplifié à l’aide de l’exemple GameUXInstallHelper.</span><span class="sxs-lookup"><span data-stu-id="d89a2-173">Calling Games Explorer APIs from InstallShield's InstallScript is made easy by using the GameUXInstallHelper sample.</span></span> <span data-ttu-id="d89a2-174">Les étapes requises pour l’intégration à InstallShield sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="d89a2-174">The steps required to integrate with InstallShield are as follows:</span></span>

1.  <span data-ttu-id="d89a2-175">Ouvrez un projet InstallScript dans l’éditeur InstallShield.</span><span class="sxs-lookup"><span data-stu-id="d89a2-175">Open an InstallScript project in the InstallShield editor.</span></span>
2.  <span data-ttu-id="d89a2-176">Ajoutez GameUXInstallHelper.dll au projet à installer dans le répertoire cible.</span><span class="sxs-lookup"><span data-stu-id="d89a2-176">Add GameUXInstallHelper.dll to the project to be installed to the target directory.</span></span>

    <span data-ttu-id="d89a2-177">**Pour ajouter GameUXInstallHelper.dll à un projet InstallScript :**</span><span class="sxs-lookup"><span data-stu-id="d89a2-177">**To add GameUXInstallHelper.dll to an InstallScript project:**</span></span>

    1.  <span data-ttu-id="d89a2-178">Sous l’onglet **Concepteur d’installation** , cliquez sur données d' **application** dans le volet de navigation de gauche.</span><span class="sxs-lookup"><span data-stu-id="d89a2-178">On the **Installation Designer** tab, click **Application Data** in the navigation pane on the left.</span></span>
    2.  <span data-ttu-id="d89a2-179">Cliquez sur **fichiers et dossiers** , puis parcourez les **dossiers de l’ordinateur source** pour localiser GameUXInstallerHelper.dll dans les **fichiers de l’ordinateur source**.</span><span class="sxs-lookup"><span data-stu-id="d89a2-179">Click **Files and Folders** and browse in **Source computer's folders** to locate GameUXInstallerHelper.dll in **Source computer's files**.</span></span>

        <span data-ttu-id="d89a2-180">L’emplacement par défaut de GameUXInstallerHelper.dll est DirectX SDK root \\ Samples \\ C++ \\ misc \\ bin \\ x86.</span><span class="sxs-lookup"><span data-stu-id="d89a2-180">The default location for GameUXInstallerHelper.dll is DirectX SDK root\\Samples\\C++\\Misc\\Bin\\x86.</span></span>

    3.  <span data-ttu-id="d89a2-181">Sous **dossiers de l’ordinateur de destination**, cliquez sur **dossier cible** de l’application.</span><span class="sxs-lookup"><span data-stu-id="d89a2-181">Under **Destination computer's folders**, click **Application Target Folder**.</span></span>
    4.  <span data-ttu-id="d89a2-182">Faites glisser GameUXInstallerHelper.dll des **fichiers de l’ordinateur source** vers les **fichiers de l’ordinateur de destination**.</span><span class="sxs-lookup"><span data-stu-id="d89a2-182">Drag GameUXInstallerHelper.dll from **Source computer's files** to **Destination computer's files**.</span></span>

3.  <span data-ttu-id="d89a2-183">Dans l’Explorateur InstallScript, cliquez sur le fichier InstallScript (généralement Setup. vie utile restante) qui appelle la fonction DLL.</span><span class="sxs-lookup"><span data-stu-id="d89a2-183">In the InstallScript explorer, click the InstallScript file (usually setup.rul) that calls the DLL function.</span></span>
4.  <span data-ttu-id="d89a2-184">Collez l’InstallScript suivant dans le fichier :</span><span class="sxs-lookup"><span data-stu-id="d89a2-184">Paste the following InstallScript into the file:</span></span>

    ``` syntax
    typedef GUID
    begin
    LONG  Data1;
    SHORT Data2;
    SHORT Data3;
    CHAR  Data4(8);
    end;

    prototype LONG GameUXInstallHelper.GameExplorerInstallW(WSTRING, WSTRING, NUMBER);
    prototype LONG GameUXInstallHelper.GameExplorerUninstallW(WSTRING);

    function OnMoved()

    WSTRING gdfbin[256];
    WSTRING path[256];
    NUMBER scope;

    begin

    if !MAINTENANCE then

    UseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UseDLL( WINSYSDIR ^ "OLE32.dll" );

    path = TARGETDIR;
    gdfbin = TARGETDIR ^ "bin\\ExampleGame.exe";  // TODO: Change this to point to binary containing the GDF

    if ALLUSERS == 1 then
    scope = 3;
    else
    scope = 2;
    endif;

    GameUXInstallHelper.GameExplorerInstallW( gdfbin, path, scope);

    UnUseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UnUseDLL( WINSYSDIR ^ "OLE32.dll" );

    endif;

    end;

    function OnMoving()

    WSTRING gdfbin[256];

    begin

    if MAINTENANCE && UNINST != "" then

    UseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UseDLL( WINSYSDIR ^ "OLE32.dll" );

    gdfbin = path ^ "bin\\ExampleGame.exe";  // TODO: Change this to point to binary containing the GDF

    GameUXInstallHelper.GameExplorerUninstallW(gdfbin);
    UnUseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UnUseDLL( WINSYSDIR ^ "OLE32.dll" );

    endif;

    end;
    ```

## <a name="integrating-into-an-msi-package"></a><span data-ttu-id="d89a2-185">Intégration dans un package MSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-185">Integrating into an MSI Package</span></span>

<span data-ttu-id="d89a2-186">Vous trouverez ci-dessous une description détaillée des étapes requises pour appeler les API de l’Explorateur de jeux à l’aide des actions personnalisées MSI :</span><span class="sxs-lookup"><span data-stu-id="d89a2-186">The following is a high-level description of the steps required to call the Games Explorer APIs using MSI custom actions:</span></span>

1.  <span data-ttu-id="d89a2-187">Ajoutez une propriété à la table de propriétés MSI nommée « RelativePathToGDF » contenant le chemin d’accès relatif au fichier binaire GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-187">Add a property to the MSI Property table called "RelativePathToGDF" containing the relative path to the GDF binary.</span></span>
2.  <span data-ttu-id="d89a2-188">Après l’action CostFinalize, appelez la fonction GameUXInstallHelper DLL **SetMSIGameExplorerProperties** dans une action personnalisée immédiate pour définir les propriétés MSI appropriées pour les autres actions personnalisées.</span><span class="sxs-lookup"><span data-stu-id="d89a2-188">After the CostFinalize action, call the GameUXInstallHelper DLL function **SetMSIGameExplorerProperties** in an immediate custom action to set the appropriate MSI properties for the other custom actions.</span></span>
3.  <span data-ttu-id="d89a2-189">Lors de l’installation, déclenchez une action personnalisée différée après l’action InstallFiles qui appelle la fonction DLL GameUXInstallHelper **AddToGameExplorerUsingMSI**.</span><span class="sxs-lookup"><span data-stu-id="d89a2-189">Upon installation, trigger a deferred custom action after the InstallFiles action that calls the GameUXInstallHelper DLL function **AddToGameExplorerUsingMSI**.</span></span> <span data-ttu-id="d89a2-190">Si l’installation est destinée à tous les utilisateurs, l’action personnalisée doit définir l’indicateur msidbCustomActionTypeNoImpersonate ; dans le cas contraire, il ne doit pas définir cet indicateur.</span><span class="sxs-lookup"><span data-stu-id="d89a2-190">If the installation is for all users, then the custom action must set the flag msidbCustomActionTypeNoImpersonate; otherwise, it must not set this flag.</span></span> <span data-ttu-id="d89a2-191">Par conséquent, deux actions personnalisées quasiment identiques sont définies : GameUXAddAsAdmin et GameUXAddAsCurUser.</span><span class="sxs-lookup"><span data-stu-id="d89a2-191">Therefore, two nearly identical custom actions are defined: GameUXAddAsAdmin and GameUXAddAsCurUser.</span></span>
4.  <span data-ttu-id="d89a2-192">Lors de la suppression de l’installation, déclenchez une action personnalisée différée avant l’action RemoveFiles qui appelle la fonction GameUXInstallHelper DLL **RemoveFromGameExplorerUsingMSI**.</span><span class="sxs-lookup"><span data-stu-id="d89a2-192">Upon removal of the installation, trigger a deferred custom action before the RemoveFiles action that calls the GameUXInstallHelper DLL function **RemoveFromGameExplorerUsingMSI**.</span></span> <span data-ttu-id="d89a2-193">Si l’installation a été effectuée pour tous les utilisateurs, l’action personnalisée doit définir l’indicateur msidbCustomActionTypeNoImpersonate ; dans le cas contraire, il ne doit pas définir cet indicateur.</span><span class="sxs-lookup"><span data-stu-id="d89a2-193">If the installation was for all users, then the custom action must set the flag msidbCustomActionTypeNoImpersonate; otherwise, it must not set this flag.</span></span> <span data-ttu-id="d89a2-194">Par conséquent, deux actions personnalisées quasiment identiques sont définies : GameUXRemoveAsAdmin et GameUXRemoveAsCurUser.</span><span class="sxs-lookup"><span data-stu-id="d89a2-194">Therefore, two nearly identical custom actions are defined: GameUXRemoveAsAdmin and GameUXRemoveAsCurUser.</span></span>
5.  <span data-ttu-id="d89a2-195">Définissez des actions personnalisées de restauration pour gérer le cas où l’utilisateur annule l’installation ou la suppression une fois que l’une des actions personnalisées a déjà eu lieu.</span><span class="sxs-lookup"><span data-stu-id="d89a2-195">Define rollback custom actions to handle the case where the user cancels installing or removing after one of the these custom actions has already happened.</span></span> <span data-ttu-id="d89a2-196">Il en résulte des 4 actions personnalisées supplémentaires : GameUXRollBackAddAsAdmin, GameUXRollBackAddAsCurUser, GameUXRollBackRemoveAsAdmin et GameUXRollBackRemoveAsCurUser.</span><span class="sxs-lookup"><span data-stu-id="d89a2-196">This results in an additional 4 custom actions: GameUXRollBackAddAsAdmin, GameUXRollBackAddAsCurUser, GameUXRollBackRemoveAsAdmin, and GameUXRollBackRemoveAsCurUser.</span></span>

<span data-ttu-id="d89a2-197">Cette procédure est décrite en détail dans les instructions suivantes, qui décrivent un processus qui peut être effectué à l’aide d’un éditeur MSI, tel que l’éditeur Orca situé dans le kit de développement logiciel (SDK) de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="d89a2-197">This procedure is described in detail in the following instructions, which describe a process that can be done using an MSI editor, such as the Orca editor found in the Platform SDK.</span></span> <span data-ttu-id="d89a2-198">Certains éditeurs MSI possèdent des assistants qui simplifient certaines de ces étapes de configuration.</span><span class="sxs-lookup"><span data-stu-id="d89a2-198">Some MSI editors have wizards which simplify some of these configuration steps.</span></span>

<span data-ttu-id="d89a2-199">**Pour configurer un package MSI pour l’intégration avec l’Explorateur de jeux**</span><span class="sxs-lookup"><span data-stu-id="d89a2-199">**To configure an MSI package for integration with Games Explorer**</span></span>

1.  <span data-ttu-id="d89a2-200">Ouvrez le package MSI dans Orca.</span><span class="sxs-lookup"><span data-stu-id="d89a2-200">Open the MSI package in Orca.</span></span>
2.  <span data-ttu-id="d89a2-201">Ajoutez la ligne indiquée dans le tableau suivant à la table **binaire** dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-201">Add the row shown in the following table to the **Binary** table in the MSI package.</span></span> 

    | <span data-ttu-id="d89a2-202">Nom</span><span class="sxs-lookup"><span data-stu-id="d89a2-202">Name</span></span>   | <span data-ttu-id="d89a2-203">Données</span><span class="sxs-lookup"><span data-stu-id="d89a2-203">Data</span></span>                                          |
    |--------|-----------------------------------------------|
    | <span data-ttu-id="d89a2-204">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-204">GAMEUX</span></span> | <span data-ttu-id="d89a2-205">chemin d’accès au fichier DLL \\GameUXInstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="d89a2-205">file path to the DLL\\GameUXInstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="d89a2-206">Ce fichier sera incorporé dans le package MSI. vous devez donc effectuer cette étape chaque fois que vous recompilez GameUXInstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="d89a2-206">This file will be embedded in the MSI package, so you must do this step every time you recompile GameUXInstallHelper.dll.</span></span>

     

3.  <span data-ttu-id="d89a2-207">Ajoutez les lignes indiquées dans le tableau suivant à la table **CustomAction** dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-207">Add the rows shown in the following table to the **CustomAction** table in the MSI package.</span></span>

    | <span data-ttu-id="d89a2-208">Action</span><span class="sxs-lookup"><span data-stu-id="d89a2-208">Action</span></span>                        | <span data-ttu-id="d89a2-209">Type</span><span class="sxs-lookup"><span data-stu-id="d89a2-209">Type</span></span>                                                                                                                                                                                                   | <span data-ttu-id="d89a2-210">Source</span><span class="sxs-lookup"><span data-stu-id="d89a2-210">Source</span></span> | <span data-ttu-id="d89a2-211">Cible</span><span class="sxs-lookup"><span data-stu-id="d89a2-211">Target</span></span>                         |
    |-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------|--------------------------------|
    | <span data-ttu-id="d89a2-212">GameUXSetMSIProperties</span><span class="sxs-lookup"><span data-stu-id="d89a2-212">GameUXSetMSIProperties</span></span>        | <span data-ttu-id="d89a2-213">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span><span class="sxs-lookup"><span data-stu-id="d89a2-213">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                                                        | <span data-ttu-id="d89a2-214">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-214">GAMEUX</span></span> | <span data-ttu-id="d89a2-215">SetMSIGameExplorerProperties</span><span class="sxs-lookup"><span data-stu-id="d89a2-215">SetMSIGameExplorerProperties</span></span>   |
    | <span data-ttu-id="d89a2-216">GameUXAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-216">GameUXAddAsAdmin</span></span>              | <span data-ttu-id="d89a2-217">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span><span class="sxs-lookup"><span data-stu-id="d89a2-217">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span></span>                                 | <span data-ttu-id="d89a2-218">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-218">GAMEUX</span></span> | <span data-ttu-id="d89a2-219">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-219">AddToGameExplorerUsingMSI</span></span>      |
    | <span data-ttu-id="d89a2-220">GameUXAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-220">GameUXAddAsCurUser</span></span>            | <span data-ttu-id="d89a2-221">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span><span class="sxs-lookup"><span data-stu-id="d89a2-221">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span></span>                                                                      | <span data-ttu-id="d89a2-222">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-222">GAMEUX</span></span> | <span data-ttu-id="d89a2-223">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-223">AddToGameExplorerUsingMSI</span></span>      |
    | <span data-ttu-id="d89a2-224">GameUXRollBackAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-224">GameUXRollBackAddAsAdmin</span></span>      | <span data-ttu-id="d89a2-225">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span><span class="sxs-lookup"><span data-stu-id="d89a2-225">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span></span> | <span data-ttu-id="d89a2-226">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-226">GAMEUX</span></span> | <span data-ttu-id="d89a2-227">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-227">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="d89a2-228">GameUXRollBackAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-228">GameUXRollBackAddAsCurUser</span></span>    | <span data-ttu-id="d89a2-229">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span><span class="sxs-lookup"><span data-stu-id="d89a2-229">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span></span>                                      | <span data-ttu-id="d89a2-230">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-230">GAMEUX</span></span> | <span data-ttu-id="d89a2-231">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-231">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="d89a2-232">GameUXRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-232">GameUXRemoveAsAdmin</span></span>           | <span data-ttu-id="d89a2-233">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span><span class="sxs-lookup"><span data-stu-id="d89a2-233">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span></span>                                 | <span data-ttu-id="d89a2-234">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-234">GAMEUX</span></span> | <span data-ttu-id="d89a2-235">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-235">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="d89a2-236">GameUXRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-236">GameUXRemoveAsCurUser</span></span>         | <span data-ttu-id="d89a2-237">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span><span class="sxs-lookup"><span data-stu-id="d89a2-237">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span></span>                                                                      | <span data-ttu-id="d89a2-238">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-238">GAMEUX</span></span> | <span data-ttu-id="d89a2-239">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-239">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="d89a2-240">GameUXRollBackRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-240">GameUXRollBackRemoveAsAdmin</span></span>   | <span data-ttu-id="d89a2-241">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span><span class="sxs-lookup"><span data-stu-id="d89a2-241">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span></span> | <span data-ttu-id="d89a2-242">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-242">GAMEUX</span></span> | <span data-ttu-id="d89a2-243">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-243">AddToGameExplorerUsingMSI</span></span>      |
    | <span data-ttu-id="d89a2-244">GameUXRollBackRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-244">GameUXRollBackRemoveAsCurUser</span></span> | <span data-ttu-id="d89a2-245">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span><span class="sxs-lookup"><span data-stu-id="d89a2-245">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span></span>                                      | <span data-ttu-id="d89a2-246">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="d89a2-246">GAMEUX</span></span> | <span data-ttu-id="d89a2-247">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="d89a2-247">AddToGameExplorerUsingMSI</span></span>      |

    

     

4.  <span data-ttu-id="d89a2-248">Ajoutez les valeurs indiquées pour action, condition et séquence dans le tableau suivant à la table **InstallExecuteSequence** dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-248">Add the values shown for Action, Condition, and Sequence in the following table to the **InstallExecuteSequence** table in the MSI package.</span></span>

    | <span data-ttu-id="d89a2-249">Action</span><span class="sxs-lookup"><span data-stu-id="d89a2-249">Action</span></span>                        | <span data-ttu-id="d89a2-250">Condition</span><span class="sxs-lookup"><span data-stu-id="d89a2-250">Condition</span></span>                      | <span data-ttu-id="d89a2-251">Séquence</span><span class="sxs-lookup"><span data-stu-id="d89a2-251">Sequence</span></span> | <span data-ttu-id="d89a2-252">Notes</span><span class="sxs-lookup"><span data-stu-id="d89a2-252">Notes</span></span>                                                                                                                                                                                            |
    |-------------------------------|--------------------------------|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="d89a2-253">GameUXSetMSIProperties</span><span class="sxs-lookup"><span data-stu-id="d89a2-253">GameUXSetMSIProperties</span></span>        |                                | <span data-ttu-id="d89a2-254">1015</span><span class="sxs-lookup"><span data-stu-id="d89a2-254">1015</span></span>     | <span data-ttu-id="d89a2-255">Le numéro de séquence place l’action juste après CostFinalize.</span><span class="sxs-lookup"><span data-stu-id="d89a2-255">The sequence number places the action soon after CostFinalize.</span></span>                                                                                                                                   |
    | <span data-ttu-id="d89a2-256">GameUXAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-256">GameUXAddAsAdmin</span></span>              | <span data-ttu-id="d89a2-257">NON installé et ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-257">NOT Installed AND ALLUSERS</span></span>     | <span data-ttu-id="d89a2-258">4003</span><span class="sxs-lookup"><span data-stu-id="d89a2-258">4003</span></span>     | <span data-ttu-id="d89a2-259">Cette action personnalisée ne se produit qu’au cours d’une nouvelle installation pour tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="d89a2-259">This custom action will only happen during a fresh installation for all users.</span></span> <span data-ttu-id="d89a2-260">Le numéro de séquence place l’action après InstallFiles et après les restaurations.</span><span class="sxs-lookup"><span data-stu-id="d89a2-260">The sequence number places the action after InstallFiles and after the rollbacks.</span></span>                                 |
    | <span data-ttu-id="d89a2-261">GameUXAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-261">GameUXAddAsCurUser</span></span>            | <span data-ttu-id="d89a2-262">NON installé et non ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-262">NOT Installed AND NOT ALLUSERS</span></span> | <span data-ttu-id="d89a2-263">4004</span><span class="sxs-lookup"><span data-stu-id="d89a2-263">4004</span></span>     | <span data-ttu-id="d89a2-264">Cette action personnalisée ne se produit qu’au cours d’une nouvelle installation de l’utilisateur actuel.</span><span class="sxs-lookup"><span data-stu-id="d89a2-264">This custom action will only happen during a fresh installation for the current user only.</span></span> <span data-ttu-id="d89a2-265">Le numéro de séquence place l’action après InstallFiles et après les restaurations.</span><span class="sxs-lookup"><span data-stu-id="d89a2-265">The sequence number places the action after InstallFiles and after the rollbacks.</span></span>                     |
    | <span data-ttu-id="d89a2-266">GameUXRollBackAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-266">GameUXRollBackAddAsAdmin</span></span>      | <span data-ttu-id="d89a2-267">NON installé et ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-267">NOT Installed AND ALLUSERS</span></span>     | <span data-ttu-id="d89a2-268">4001</span><span class="sxs-lookup"><span data-stu-id="d89a2-268">4001</span></span>     | <span data-ttu-id="d89a2-269">Cette action personnalisée se produit uniquement lorsqu’une nouvelle installation de tous les utilisateurs est annulée.</span><span class="sxs-lookup"><span data-stu-id="d89a2-269">This custom action will only happen when a fresh installation for all users is cancelled.</span></span> <span data-ttu-id="d89a2-270">Le numéro de séquence place l’action après InstallFiles et avant l’action personnalisée ajouter.</span><span class="sxs-lookup"><span data-stu-id="d89a2-270">The sequence number places the action after InstallFiles and before the Add custom action.</span></span>             |
    | <span data-ttu-id="d89a2-271">GameUXRollBackAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-271">GameUXRollBackAddAsCurUser</span></span>    | <span data-ttu-id="d89a2-272">NON installé et non ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-272">NOT Installed AND NOT ALLUSERS</span></span> | <span data-ttu-id="d89a2-273">4002</span><span class="sxs-lookup"><span data-stu-id="d89a2-273">4002</span></span>     | <span data-ttu-id="d89a2-274">Cette action personnalisée se produit uniquement lorsqu’une nouvelle installation de l’utilisateur actuel est annulée.</span><span class="sxs-lookup"><span data-stu-id="d89a2-274">This custom action will only happen when a fresh installation for the current user only is cancelled.</span></span> <span data-ttu-id="d89a2-275">Le numéro de séquence place l’action après InstallFiles et avant l’action personnalisée ajouter.</span><span class="sxs-lookup"><span data-stu-id="d89a2-275">The sequence number places the action after InstallFiles and before the Add custom action.</span></span> |
    | <span data-ttu-id="d89a2-276">GameUXRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-276">GameUXRemoveAsAdmin</span></span>           | <span data-ttu-id="d89a2-277">SUPPRIMER ~ = "ALL" ET ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-277">REMOVE~="ALL" AND ALLUSERS</span></span>     | <span data-ttu-id="d89a2-278">3452</span><span class="sxs-lookup"><span data-stu-id="d89a2-278">3452</span></span>     | <span data-ttu-id="d89a2-279">Cette action personnalisée se produira uniquement pendant la suppression de tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="d89a2-279">This custom action will only happen during removal for all users.</span></span> <span data-ttu-id="d89a2-280">Le numéro de séquence place l’action directement avant RemoveFiles et après les restaurations.</span><span class="sxs-lookup"><span data-stu-id="d89a2-280">The sequence number places the action directly before RemoveFiles and after the rollbacks.</span></span>                                     |
    | <span data-ttu-id="d89a2-281">GameUXRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-281">GameUXRemoveAsCurUser</span></span>         | <span data-ttu-id="d89a2-282">SUPPRIMER ~ = "ALL" ET NON ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-282">REMOVE~="ALL" AND NOT ALLUSERS</span></span> | <span data-ttu-id="d89a2-283">3453</span><span class="sxs-lookup"><span data-stu-id="d89a2-283">3453</span></span>     | <span data-ttu-id="d89a2-284">Cette action personnalisée se produit uniquement lors de la suppression de l’utilisateur actuel.</span><span class="sxs-lookup"><span data-stu-id="d89a2-284">This custom action will only happen during removal for the current user.</span></span> <span data-ttu-id="d89a2-285">Le numéro de séquence place l’action directement avant RemoveFiles et après les restaurations.</span><span class="sxs-lookup"><span data-stu-id="d89a2-285">The sequence number places the action directly before RemoveFiles and after the rollbacks.</span></span>                              |
    | <span data-ttu-id="d89a2-286">GameUXRollBackRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="d89a2-286">GameUXRollBackRemoveAsAdmin</span></span>   | <span data-ttu-id="d89a2-287">SUPPRIMER ~ = "ALL" ET ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-287">REMOVE~="ALL" AND ALLUSERS</span></span>     | <span data-ttu-id="d89a2-288">3450</span><span class="sxs-lookup"><span data-stu-id="d89a2-288">3450</span></span>     | <span data-ttu-id="d89a2-289">Cette action personnalisée se produit uniquement lorsque la suppression de tous les utilisateurs est annulée.</span><span class="sxs-lookup"><span data-stu-id="d89a2-289">This custom action will only happen when removal for all users is cancelled.</span></span> <span data-ttu-id="d89a2-290">Le numéro de séquence place l’action directement avant RemoveFiles et avant l’action personnalisée Remove.</span><span class="sxs-lookup"><span data-stu-id="d89a2-290">The sequence number places the action directly before RemoveFiles and before the Remove custom action.</span></span>              |
    | <span data-ttu-id="d89a2-291">GameUXRollBackRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="d89a2-291">GameUXRollBackRemoveAsCurUser</span></span> | <span data-ttu-id="d89a2-292">SUPPRIMER ~ = "ALL" ET NON ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="d89a2-292">REMOVE~="ALL" AND NOT ALLUSERS</span></span> | <span data-ttu-id="d89a2-293">3451</span><span class="sxs-lookup"><span data-stu-id="d89a2-293">3451</span></span>     | <span data-ttu-id="d89a2-294">Cette action personnalisée se produit uniquement lorsque la suppression de l’utilisateur actuel est annulée.</span><span class="sxs-lookup"><span data-stu-id="d89a2-294">This custom action will only happen when removal for the current user is cancelled.</span></span> <span data-ttu-id="d89a2-295">Le numéro de séquence place l’action directement avant RemoveFiles et avant l’action personnalisée Remove.</span><span class="sxs-lookup"><span data-stu-id="d89a2-295">The sequence number places the action directly before RemoveFiles and before the Remove custom action.</span></span>       |

    

     

5.  <span data-ttu-id="d89a2-296">Ajoutez la ligne indiquée dans le tableau suivant à la table des propriétés dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-296">Add the row shown in the following table to the Property table in the MSI package.</span></span>

    | <span data-ttu-id="d89a2-297">Propriété</span><span class="sxs-lookup"><span data-stu-id="d89a2-297">Property</span></span>          | <span data-ttu-id="d89a2-298">Valeur</span><span class="sxs-lookup"><span data-stu-id="d89a2-298">Value</span></span>                                                         |
    |-------------------|---------------------------------------------------------------|
    | <span data-ttu-id="d89a2-299">RelativePathToGDF</span><span class="sxs-lookup"><span data-stu-id="d89a2-299">RelativePathToGDF</span></span> | <span data-ttu-id="d89a2-300">nom de chemin d’accès relatif \\ du fichier binaire qui contient GDF</span><span class="sxs-lookup"><span data-stu-id="d89a2-300">relative file path\\name of binary file that contains the GDF</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="d89a2-301">L’emplacement spécifié par le chemin d’accès est relatif à l’emplacement spécifié par le chemin d’installation.</span><span class="sxs-lookup"><span data-stu-id="d89a2-301">The location specified by the path is relative to the location specified by the installation path.</span></span> <span data-ttu-id="d89a2-302">Par exemple, bin \\GDF.dll.</span><span class="sxs-lookup"><span data-stu-id="d89a2-302">For example, bin\\GDF.dll.</span></span>

     

6.  <span data-ttu-id="d89a2-303">Enregistrez le package MSI.</span><span class="sxs-lookup"><span data-stu-id="d89a2-303">Save the MSI package.</span></span>

<span data-ttu-id="d89a2-304">Pour plus d’informations sur les packages et les Windows Installer MSI, consultez [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="d89a2-304">For more detailed information about MSI packages and Windows Installer, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>

## <a name="debugging-tips"></a><span data-ttu-id="d89a2-305">Conseils de débogage</span><span class="sxs-lookup"><span data-stu-id="d89a2-305">Debugging Tips</span></span>

<span data-ttu-id="d89a2-306">Voici quelques conseils pour vous aider à déboguer des problèmes lors de l’appel des API de l’Explorateur de jeux :</span><span class="sxs-lookup"><span data-stu-id="d89a2-306">The following are some tips to help debug issues when calling Games Explorer APIs:</span></span>

### <a name="test-with-sample-code"></a><span data-ttu-id="d89a2-307">Tester avec l’exemple de code</span><span class="sxs-lookup"><span data-stu-id="d89a2-307">Test with sample code</span></span>

<span data-ttu-id="d89a2-308">La création de l’exemple de solution GameUXInstallHelper créera une GameUXInstallHelper.dll et un GDFInstall.exe.</span><span class="sxs-lookup"><span data-stu-id="d89a2-308">Building the GameUXInstallHelper sample solution will create a GameUXInstallHelper.dll and a GDFInstall.exe.</span></span> <span data-ttu-id="d89a2-309">Le GDFInstall.exe est un exemple d’application qui utilise des GameUXInstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="d89a2-309">The GDFInstall.exe is a sample application that uses GameUXInstallHelper.dll.</span></span> <span data-ttu-id="d89a2-310">L’exécution de GDFInstall.exe demande si vous souhaitez installer ou supprimer un fichier binaire GDF de l’Explorateur de jeux.</span><span class="sxs-lookup"><span data-stu-id="d89a2-310">Running GDFInstall.exe will prompt if you want install or remove a GDF binary from game explorer.</span></span> <span data-ttu-id="d89a2-311">Vous pouvez tester votre fichier binaire GDF en le transmettant en tant que premier ARG de ligne de commande à GDFInstall.exe.</span><span class="sxs-lookup"><span data-stu-id="d89a2-311">You can test your GDF binary file by passing it in as the first command line arg to GDFInstall.exe.</span></span>

<span data-ttu-id="d89a2-312">Si vous n’avez pas de fichier binaire GDF ou que vous ne parvenez pas à installer, essayez d’utiliser l’exemple GDF dans le kit de développement logiciel (SDK) DirectX.</span><span class="sxs-lookup"><span data-stu-id="d89a2-312">If you don't have a GDF binary or yours fails to install, try using the sample GDF in the DirectX SDK.</span></span> <span data-ttu-id="d89a2-313">L’exemple GDFExampleBinary se trouve dans le kit de développement logiciel (SDK) DirectX et est simplement une DLL qui contient uniquement un fichier GDF.</span><span class="sxs-lookup"><span data-stu-id="d89a2-313">The GDFExampleBinary sample is found in the DirectX SDK and is just a DLL that only contains a GDF file.</span></span> <span data-ttu-id="d89a2-314">Le projet GDFMaker est également inclus dans la source.</span><span class="sxs-lookup"><span data-stu-id="d89a2-314">Also included in the source is its GDFMaker project.</span></span> <span data-ttu-id="d89a2-315">Vous pouvez le créer et le tester à l’aide de GDFInstall.exe.</span><span class="sxs-lookup"><span data-stu-id="d89a2-315">You can build it and test it using GDFInstall.exe.</span></span> <span data-ttu-id="d89a2-316">Vous pouvez également comparer son XML à la vôtre pour identifier précisément l’endroit où se trouve le problème.</span><span class="sxs-lookup"><span data-stu-id="d89a2-316">You can also compare the its XML to yours to pinpoint exactly where the issue is.</span></span>

### <a name="make-sure-that-your-game-was-removed-properly"></a><span data-ttu-id="d89a2-317">Assurez-vous que votre jeu a été correctement supprimé</span><span class="sxs-lookup"><span data-stu-id="d89a2-317">Make sure that your game was removed properly</span></span>

<span data-ttu-id="d89a2-318">Si le jeu est déjà installé dans l’Explorateur de jeux, les appels suivants à **IGameExplorer :: AddGame** renverront E Fail, vérifiez que \_ votre jeu n’est pas installé avant le test.</span><span class="sxs-lookup"><span data-stu-id="d89a2-318">If the game is already installed in Games Explorer, then subsequent calls to **IGameExplorer::AddGame** will return E\_FAIL so make sure your game isn't installed before testing.</span></span> <span data-ttu-id="d89a2-319">Cela s’applique également si vous installez le GDF uniquement pour l’utilisateur actuel, puis essayez d’installer le GDF pour tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="d89a2-319">This also applies if you install the GDF for only the current user and then try to install the GDF for all users.</span></span> <span data-ttu-id="d89a2-320">Vous devez d’abord supprimer le jeu des utilisateurs actuels avant que **IGameExplorer :: AddGame** aboutisse.</span><span class="sxs-lookup"><span data-stu-id="d89a2-320">You must first remove the game from the current users before **IGameExplorer::AddGame** will succeed.</span></span>

<span data-ttu-id="d89a2-321">Si vous exécutez **GDFInstall.exe enum**, l’exemple d’application entrera dans un autre mode qui énumère tous les jeux installés de l’Explorateur de jeux et vous invite à les supprimer.</span><span class="sxs-lookup"><span data-stu-id="d89a2-321">If you run **GDFInstall.exe enum**, the sample application will enter a different mode which will enumerate all of the installed Games Explorer games and prompt you to remove them.</span></span> <span data-ttu-id="d89a2-322">Vous pouvez également parcourir et Rechercher dans le registre dans HKEY \_ local \_ machine \\ Software \\ Microsoft \\ Windows \\ CurrentVersion \\ GameUX pour vous assurer que votre jeu n’est pas installé pour un autre utilisateur sur le système.</span><span class="sxs-lookup"><span data-stu-id="d89a2-322">You can also browse and search the registry in HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\GameUX to make sure that your game isn't installed for another user on the system.</span></span> <span data-ttu-id="d89a2-323">Toutefois, ne modifiez pas ces paramètres de Registre à d’autres fins, car ils ne sont pas toujours compatibles dans les versions ultérieures du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="d89a2-323">However, do not alter these registry settings for any other purpose, as they are not guaranteed to remain compatible in future versions of the operating system.</span></span>

### <a name="be-sure-to-sign-using-authenticode"></a><span data-ttu-id="d89a2-324">Veillez à signer à l’aide d’Authenticode</span><span class="sxs-lookup"><span data-stu-id="d89a2-324">Be sure to sign using Authenticode</span></span>

<span data-ttu-id="d89a2-325">Si vous avez fourni une évaluation, mais que vous ne la voyez pas dans l’Explorateur de jeux, assurez-vous que vous avez utilisé Authenticode pour signer le fichier exécutable ou DLL qui contient l’évaluation.</span><span class="sxs-lookup"><span data-stu-id="d89a2-325">If you have provided a rating, but are not seeing it in Games Explorer, make sure that you have used Authenticode to sign the executable or DLL file that contains the rating.</span></span> <span data-ttu-id="d89a2-326">L’Explorateur de jeux ignore les informations de classement dans les fichiers non signés.</span><span class="sxs-lookup"><span data-stu-id="d89a2-326">Games Explorer ignores ratings information in unsigned files.</span></span> <span data-ttu-id="d89a2-327">Pour plus d’informations sur Authenticode, consultez [signature Authenticode pour les développeurs de jeux](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="d89a2-327">For more information about Authenticode, see [Authenticode Signing for Game Developers](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span></span>

### <a name="be-sure-that-parental-controls-are-available"></a><span data-ttu-id="d89a2-328">Assurez-vous que les contrôles parentaux sont disponibles</span><span class="sxs-lookup"><span data-stu-id="d89a2-328">Be sure that parental controls are available</span></span>

<span data-ttu-id="d89a2-329">Veillez à tester les contrôles parentaux sur une édition de Windows Vista qui fournit des contrôles de contrôle parental : édition familiale basique, édition familiale Premium ou édition intégrale.</span><span class="sxs-lookup"><span data-stu-id="d89a2-329">Ensure that you are testing parental controls on an edition of Windows Vista that provides parental controls: Home Basic, Home Premium, or Ultimate.</span></span> <span data-ttu-id="d89a2-330">Windows Vista Professionnel et Windows Vista entreprise n’offrent pas de contrôle parental. Toutefois, si vous effectuez des tests sur Windows Vista Édition intégrale et que l’ordinateur de test est joint à un domaine, vous devez modifier un paramètre de stratégie de groupe rendre les contrôles de contrôle parental visibles.</span><span class="sxs-lookup"><span data-stu-id="d89a2-330">Windows Vista Business and Windows Vista Enterprise do not provide parental controls however if you are testing on Windows Vista Ultimate, and the test computer is joined to a domain, you must change a group policy setting make parental controls visible.</span></span> <span data-ttu-id="d89a2-331">Pour ce faire, consultez [prise en main avec l’Explorateur de jeux](/previous-versions/windows/desktop/legacy/ee417682(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="d89a2-331">To do this, see [Getting Started with Games Explorer](/previous-versions/windows/desktop/legacy/ee417682(v=vs.85)).</span></span>

### <a name="verify-that-tasks-are-of-the-correct-type"></a><span data-ttu-id="d89a2-332">Vérifier que les tâches sont de type correct</span><span class="sxs-lookup"><span data-stu-id="d89a2-332">Verify that tasks are of the correct type</span></span>

<span data-ttu-id="d89a2-333">Si vous avez spécifié des tâches de support qui n’apparaissent pas dans l’Explorateur de jeux, vérifiez qu’il s’agit de liens Web.</span><span class="sxs-lookup"><span data-stu-id="d89a2-333">If you have specified support tasks that do not appear in Games Explorer, verify that they are all Web links.</span></span> <span data-ttu-id="d89a2-334">Toutes les autres tâches de raccourci doivent être créées en tant que tâches de lecture.</span><span class="sxs-lookup"><span data-stu-id="d89a2-334">Any other shortcut tasks must be created as play tasks.</span></span> <span data-ttu-id="d89a2-335">Les tâches sont décrites plus haut dans cet article dans les tâches de l' [Explorateur de jeux](#games-explorer-tasks).</span><span class="sxs-lookup"><span data-stu-id="d89a2-335">Tasks are covered earlier in this article in [Games Explorer Tasks](#games-explorer-tasks).</span></span>

### <a name="verify-the-data-in-gdf-binary"></a><span data-ttu-id="d89a2-336">Vérifier les données dans le fichier binaire GDF</span><span class="sxs-lookup"><span data-stu-id="d89a2-336">Verify the data in GDF binary</span></span>

<span data-ttu-id="d89a2-337">GDFTrace.exe est un outil disponible dans le kit de développement logiciel (SDK) DirectX.</span><span class="sxs-lookup"><span data-stu-id="d89a2-337">GDFTrace.exe is a tool found in the DirectX SDK.</span></span> <span data-ttu-id="d89a2-338">Vous pouvez exécuter GDFTrace.exe sur votre fichier binaire GDF et générer toutes les métadonnées GDF contenues dans le fichier binaire pour chaque langue prise en charge pour une validation rapide.</span><span class="sxs-lookup"><span data-stu-id="d89a2-338">You can run GDFTrace.exe on your GDF binary and it will output all the GDF metadata contained in the binary for every supported language for quick validation.</span></span> <span data-ttu-id="d89a2-339">Il affiche également les avertissements concernant les informations manquantes ou obsolètes.</span><span class="sxs-lookup"><span data-stu-id="d89a2-339">It also displays any warnings about missing or outdated information.</span></span>

## <a name="summary"></a><span data-ttu-id="d89a2-340">Résumé</span><span class="sxs-lookup"><span data-stu-id="d89a2-340">Summary</span></span>

<span data-ttu-id="d89a2-341">L’Explorateur de jeux de Windows Vista offre un moyen facile et personnalisable de présenter votre jeu aux utilisateurs de Windows Vista, mais vous devez également inscrire le jeu auprès du système pendant le processus d’installation.</span><span class="sxs-lookup"><span data-stu-id="d89a2-341">Games Explorer in Windows Vista provides an easy, customizable way to present your game to users of Windows Vista, but it also requires you to register the game with the system during the installation process.</span></span> <span data-ttu-id="d89a2-342">L’exemple GameUXInstallHelper simplifie grandement ce processus pour les développeurs.</span><span class="sxs-lookup"><span data-stu-id="d89a2-342">The GameUXInstallHelper sample greatly simplifies this process for developers.</span></span>

 

 