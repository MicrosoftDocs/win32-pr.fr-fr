---
title: Débogage avec des symboles
description: Cet article fournit une vue d’ensemble de l’utilisation optimale des symboles dans votre processus de débogage.
ms.assetid: 7ce0c9c7-485c-8d72-0353-27fd2e369a7c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ff63e2404a07a2f0ab5adcb156d83dc989b42fd4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104508017"
---
# <a name="debugging-with-symbols"></a><span data-ttu-id="65879-103">Débogage avec des symboles</span><span class="sxs-lookup"><span data-stu-id="65879-103">Debugging with Symbols</span></span>

<span data-ttu-id="65879-104">Cet article fournit une vue d’ensemble de l’utilisation optimale des symboles dans votre processus de débogage.</span><span class="sxs-lookup"><span data-stu-id="65879-104">This article provides a high level overview of how to best use symbols in your debugging process.</span></span> <span data-ttu-id="65879-105">Il explique comment utiliser le serveur de symboles Microsoft et comment configurer et utiliser votre propre serveur de symboles privé.</span><span class="sxs-lookup"><span data-stu-id="65879-105">It explains how to use the Microsoft symbol server, and also how to set up and use your own private symbol server.</span></span> <span data-ttu-id="65879-106">Ces meilleures pratiques peuvent vous aider à augmenter votre efficacité et votre capacité à déboguer les problèmes, même dans les cas où tous les symboles et fichiers exécutables liés à un problème ne se trouvent pas sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="65879-106">These best practices can help increase your effectiveness and ability to debug issues, even in cases where all the symbols and executable files that are related to a problem are not located on your computer.</span></span>

-   [<span data-ttu-id="65879-107">Symboles</span><span class="sxs-lookup"><span data-stu-id="65879-107">Symbols</span></span>](#debugging-with-symbols)
-   [<span data-ttu-id="65879-108">Utilisation de symboles pour le débogage</span><span class="sxs-lookup"><span data-stu-id="65879-108">Using Symbols for Debugging</span></span>](#using-symbols-for-debugging)
-   [<span data-ttu-id="65879-109">Obtention des symboles dont vous avez besoin</span><span class="sxs-lookup"><span data-stu-id="65879-109">Getting the Symbols You Need</span></span>](#getting-the-symbols-you-need)
    -   [<span data-ttu-id="65879-110">Vérifier si une DLL ou un fichier. exe donné et PDB dans le même dossier correspondent</span><span class="sxs-lookup"><span data-stu-id="65879-110">Check if a given DLL or .exe file and PDB in the same folder match</span></span>](#check-if-a-given-dll-or-exe-file-and-pdb-in-the-same-folder-match)
    -   [<span data-ttu-id="65879-111">Vérifier si toutes les dll et tous les fichiers exécutables d’un ensemble de dossiers ont des pdb correspondants</span><span class="sxs-lookup"><span data-stu-id="65879-111">Check if all the DLLs and executable files in a set of folders have matching PDBs</span></span>](#check-if-all-the-dlls-and-executable-files-in-a-set-of-folders-have-matching-pdbs)
    -   [<span data-ttu-id="65879-112">Fonctionnement de Symchk</span><span class="sxs-lookup"><span data-stu-id="65879-112">How symchk Works</span></span>](#how-symchk-works)
-   [<span data-ttu-id="65879-113">Serveurs de symboles</span><span class="sxs-lookup"><span data-stu-id="65879-113">Symbol Servers</span></span>](#symbol-servers)
-   [<span data-ttu-id="65879-114">Utilisation du serveur de symboles Microsoft</span><span class="sxs-lookup"><span data-stu-id="65879-114">Using the Microsoft Symbol Server</span></span>](#using-the-microsoft-symbol-server)
-   [<span data-ttu-id="65879-115">Obtention manuelle des symboles</span><span class="sxs-lookup"><span data-stu-id="65879-115">Getting Symbols Manually</span></span>](#getting-symbols-manually)
-   [<span data-ttu-id="65879-116">Configuration d’un serveur de symboles</span><span class="sxs-lookup"><span data-stu-id="65879-116">Setting Up a Symbol Server</span></span>](#setting-up-a-symbol-server)
-   [<span data-ttu-id="65879-117">Ajout de symboles à un serveur de symboles</span><span class="sxs-lookup"><span data-stu-id="65879-117">Adding Symbols to a Symbol Server</span></span>](#adding-symbols-to-a-symbol-server)
-   [<span data-ttu-id="65879-118">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="65879-118">Best Practices</span></span>](#best-practices)

## <a name="symbols"></a><span data-ttu-id="65879-119">symboles</span><span class="sxs-lookup"><span data-stu-id="65879-119">Symbols</span></span>

<span data-ttu-id="65879-120">Un certain nombre de types différents de symboles sont disponibles pour le débogage.</span><span class="sxs-lookup"><span data-stu-id="65879-120">A number of different types of symbols are available for debugging.</span></span> <span data-ttu-id="65879-121">Ils incluent les symboles CodeView, COFF, DBG, SYM, PDB et même les symboles d’exportation générés à partir d’une table d’exportation de fichiers binaires.</span><span class="sxs-lookup"><span data-stu-id="65879-121">They include CodeView symbols, COFF, DBG, SYM, PDB, and even export symbols that are generated from a binary files export table.</span></span> <span data-ttu-id="65879-122">Ce livre blanc traite uniquement VS.NET et les symboles de format PDB, car il s’agit du format le plus récent et préféré.</span><span class="sxs-lookup"><span data-stu-id="65879-122">This white paper discusses only VS.NET and the PDB format symbols, because they are the most recent, preferred format.</span></span> <span data-ttu-id="65879-123">Ils sont générés par défaut pour les projets qui sont compilés à l’aide de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="65879-123">They are generated by default for projects that are compiled by using Visual Studio.</span></span>

<span data-ttu-id="65879-124">La génération de fichiers PDB pour les exécutables de version n’affecte pas les optimisations ou la modification significative de la taille des fichiers générés.</span><span class="sxs-lookup"><span data-stu-id="65879-124">Generating PDB files for release executables does not affect any optimizations, or significantly alter the size of the generated files.</span></span> <span data-ttu-id="65879-125">En règle générale, la seule différence est le chemin d’accès et le nom de fichier du fichier PDB est incorporé dans l’exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-125">Typically, the only difference is the path, and the file name of the PDB file is embedded in the executable.</span></span> <span data-ttu-id="65879-126">Pour cette raison, vous devez toujours produire des fichiers PDB, même si vous ne souhaitez pas les livrer avec l’exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-126">For this reason, you should always produce PDB files, even if you don't want to ship them with the executable.</span></span>

<span data-ttu-id="65879-127">Les fichiers PDB sont générés si un projet est généré à l’aide du commutateur de compilateur **/Zi** ou **/Zi** (produire les informations PDB), ainsi que du commutateur de l’éditeur de liens **/Debug** (générer les informations de débogage).</span><span class="sxs-lookup"><span data-stu-id="65879-127">PDB files are generated if a project is built by using the **/Zi** or **/ZI** (Produce PDB Information) compiler switch, together with the **/DEBUG** (Generate Debug Info) linker switch.</span></span> <span data-ttu-id="65879-128">Les fichiers PDB générés par le compilateur sont combinés et écrits dans un fichier PDB unique qui est placé dans le même répertoire que l’exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-128">The compiler-generated PDB files are combined and written into a single PDB file that is placed in the same directory as the executable.</span></span>

<span data-ttu-id="65879-129">Par défaut, les fichiers PDB contiennent les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="65879-129">By default, PDB files contain the following information:</span></span>

-   <span data-ttu-id="65879-130">Symboles publics (en général, toutes les fonctions, variables statiques et variables globales)</span><span class="sxs-lookup"><span data-stu-id="65879-130">Public symbols (typically all functions, static and global variables)</span></span>
-   <span data-ttu-id="65879-131">Liste des fichiers objets qui sont responsables des sections de code dans l’exécutable</span><span class="sxs-lookup"><span data-stu-id="65879-131">A list of object files that are responsible for sections of code in the executable</span></span>
-   <span data-ttu-id="65879-132">Informations d’optimisation du pointeur de frame (FPO)</span><span class="sxs-lookup"><span data-stu-id="65879-132">Frame pointer optimization information (FPO)</span></span>
-   <span data-ttu-id="65879-133">Informations de nom et de type pour les variables locales et les structures de données</span><span class="sxs-lookup"><span data-stu-id="65879-133">Name and type information for local variables and data structures</span></span>
-   <span data-ttu-id="65879-134">Informations sur le fichier source et le numéro de ligne</span><span class="sxs-lookup"><span data-stu-id="65879-134">Source file and line number information</span></span>

<span data-ttu-id="65879-135">Si vous craignez que des personnes utilisent les informations de fichier PDB pour les aider à rétroconcevoir votre exécutable, vous pouvez également générer des fichiers PDB supprimés à l’aide de l’option de l’éditeur de liens **/PDBSTRIPPED : filename** .</span><span class="sxs-lookup"><span data-stu-id="65879-135">If you are concerned about people using the PDB file information to help them reverse engineer your executable, you can also generate stripped PDB files, by using the **/PDBSTRIPPED:filename** linker option.</span></span> <span data-ttu-id="65879-136">Si vous disposez de fichiers PDB existants à partir desquels vous voulez supprimer des informations privées, vous pouvez utiliser un outil appelé pdbcopy, qui fait partie des outils de débogage pour Windows.</span><span class="sxs-lookup"><span data-stu-id="65879-136">If you have existing PDB files that you would like to strip private information from, you can use a tool called pdbcopy, which is part of the debugging tools for Windows.</span></span>

<span data-ttu-id="65879-137">Par défaut, les fichiers PDB supprimés contiennent les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="65879-137">By default, stripped PDB files contain the following information:</span></span>

-   <span data-ttu-id="65879-138">Symboles publics (en général, seules les fonctions non statiques et les variables globales)</span><span class="sxs-lookup"><span data-stu-id="65879-138">Public symbols (typically only non-static functions and global variables)</span></span>
-   <span data-ttu-id="65879-139">Liste des fichiers objets qui sont responsables des sections de code dans l’exécutable</span><span class="sxs-lookup"><span data-stu-id="65879-139">A list of object files that are responsible for sections of code in the executable</span></span>
-   <span data-ttu-id="65879-140">Informations d’optimisation du pointeur de frame (FPO)</span><span class="sxs-lookup"><span data-stu-id="65879-140">Frame pointer optimization information (FPO)</span></span>

<span data-ttu-id="65879-141">Il s’agit des informations minimales requises pour autoriser le débogage fiable.</span><span class="sxs-lookup"><span data-stu-id="65879-141">This is the minimum information that is required to allow reliable debugging.</span></span> <span data-ttu-id="65879-142">Les informations minimales rendent également difficile l’obtention d’informations supplémentaires sur votre code source d’origine.</span><span class="sxs-lookup"><span data-stu-id="65879-142">Minimum information also makes it difficult to obtain any additional information about your original source code.</span></span> <span data-ttu-id="65879-143">Étant donné qu’un fichier PDB supprimé et un fichier PDB standard sont générés, vous pouvez fournir la version supprimée aux utilisateurs qui ont besoin de capacités de débogage limitées, tout en conservant la confidentialité complète des fichiers PDB.</span><span class="sxs-lookup"><span data-stu-id="65879-143">Because both a stripped PDB file and a regular PDB file are generated, you can provide the stripped version to users who may need limited debugging abilities, but keep the full PDBs confidential.</span></span> <span data-ttu-id="65879-144">Notez que **/PDBSTRIPPED** génère un deuxième fichier PDB plus petit, donc assurez-vous que vous utilisez le fichier PDB correct lorsque vous générez des builds à distribuer de manière générale.</span><span class="sxs-lookup"><span data-stu-id="65879-144">Note that **/PDBSTRIPPED** generates a second, smaller PDB file, so make sure that you use the correct PDB file when you generate builds to distribute broadly.</span></span> <span data-ttu-id="65879-145">Pour un projet standard, un fichier PDB standard peut avoir une taille de quelques mégaoctets, mais une version supprimée du fichier PDB peut être seulement de quelques centaines de kilo-octets.</span><span class="sxs-lookup"><span data-stu-id="65879-145">For a typical project, a regular PDB may be a few megabytes in size, but a stripped version of the PDB may be only a few hundred kilobytes.</span></span>

## <a name="using-symbols-for-debugging"></a><span data-ttu-id="65879-146">Utilisation de symboles pour le débogage</span><span class="sxs-lookup"><span data-stu-id="65879-146">Using Symbols for Debugging</span></span>

<span data-ttu-id="65879-147">Quand vous déboguez une application qui s’est bloquée, le débogueur tente de vous montrer les fonctions de la pile qui ont conduit à l’incident.</span><span class="sxs-lookup"><span data-stu-id="65879-147">When you are debugging an application that has crashed, the debugger attempts to show you the functions on the stack that led up to the crash.</span></span> <span data-ttu-id="65879-148">Sans fichier PDB, le débogueur ne peut pas résoudre les noms de fonction, leurs paramètres ou toute variable locale stockée sur la pile.</span><span class="sxs-lookup"><span data-stu-id="65879-148">Without a PDB file, the debugger can not resolve the function names, their parameters, or any local variables that are stored on the stack.</span></span> <span data-ttu-id="65879-149">Si vous déboguez des exécutables 32 bits, il existe des situations où vous ne pouvez pas même vous procurer des traces de pile fiables sans symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-149">If you debug 32-bit executables, there are situations where you cannot even get reliable stack traces without symbols.</span></span> <span data-ttu-id="65879-150">Il est parfois possible d’examiner les valeurs brutes de la pile, et de déterminer les valeurs qui peuvent être des adresses de retour, mais elles peuvent être facilement confondues avec les références de fonction ou les données.</span><span class="sxs-lookup"><span data-stu-id="65879-150">Sometimes it's possible to look at the raw values on the stack, and work out which values might be return addresses, but these can be easily confused with function references or data.</span></span>

<span data-ttu-id="65879-151">Si les fonctions de la pile active ont été compilées à l’aide de l’optimisation de pointeurs de frames (**/Oy**) et si les symboles ne sont pas présents, le débogueur ne peut pas déterminer de manière fiable la fonction appelée la fonction active.</span><span class="sxs-lookup"><span data-stu-id="65879-151">If functions on the current stack were compiled by using the Omit Frame Pointers (**/Oy**) optimization, and if symbols are not present, the debugger cannot reliably determine which function called the current function.</span></span> <span data-ttu-id="65879-152">En effet, sans les informations d’optimisation du pointeur de frame (FPO) que PDB contiennent, le débogueur ne peut pas reposer sur le registre de pointeur de frame (EBP) pour pointer vers le pointeur de frame précédent enregistré et à l’adresse de retour de la fonction parente.</span><span class="sxs-lookup"><span data-stu-id="65879-152">This is because without the Frame Pointer Optimization (FPO) information that PDBs contain, the debugger cannot rely on the frame pointer register (EBP) to point at the saved previous frame pointer and at the return address of the parent function.</span></span> <span data-ttu-id="65879-153">Au lieu de cela, il devine.</span><span class="sxs-lookup"><span data-stu-id="65879-153">Instead, it guesses.</span></span> <span data-ttu-id="65879-154">Parfois, il est correct.</span><span class="sxs-lookup"><span data-stu-id="65879-154">Sometimes it gets it right.</span></span> <span data-ttu-id="65879-155">Toutefois, il est souvent erroné, ce qui peut être trompeur.</span><span class="sxs-lookup"><span data-stu-id="65879-155">However, it often gets it wrong, which can be misleading.</span></span> <span data-ttu-id="65879-156">Si vous voyez un avertissement concernant des symboles manquants ou si aucun symbole n’est chargé, comme dans l’exemple suivant, ne faites pas confiance à la pile à partir de ce point.</span><span class="sxs-lookup"><span data-stu-id="65879-156">If you see a warning about missing symbols, or no symbols loaded, as in the following example, do not trust the stack from that point down.</span></span>

``` syntax
SWPerfTest.exe!TextFunction(... ...)    Line 59    C++
d3dx9d.dll!008829b5()
[Frames below may be incorrect and/or missing, no symbols loaded for d3dx9d.dll]
SWPerfTest.exe!main(int argc=, const char * * argv=)  Line 328 + 0x12 bytes     C++
SWPerfTest.exe!__mainCRTStartup() Line 716 + 0x17 bytes    C
kernel32.dll!@BaseThreadInitThunk@12() + 0x12 bytes
ntdll.dll!__RtlUserThreadStart@8() + 0x27 bytes
```

<span data-ttu-id="65879-157">Dans de nombreux cas, il est possible de continuer le débogage sans symboles, car le problème se trouve dans un emplacement avec des symboles exacts, et vous n’avez pas besoin d’examiner les fonctions plus loin dans la pile des appels.</span><span class="sxs-lookup"><span data-stu-id="65879-157">In many cases, it's possible to continue debugging without symbols, because the problem is in a location that has accurate symbols, and you don't need to look at functions further down the call stack.</span></span> <span data-ttu-id="65879-158">Même si une bibliothèque qui se trouve dans votre pile des appels n’a pas de PDB disponibles, tant qu’ils ont été compilés avec des pointeurs de frame, le débogueur doit être en mesure de deviner correctement les fonctions parentes.</span><span class="sxs-lookup"><span data-stu-id="65879-158">Even if a library that is in your call stack doesn't have PDBs available, as long as they were compiled with frame pointers, the debugger should be able to guess correctly at the parent functions.</span></span> <span data-ttu-id="65879-159">À compter de Windows XP Service Pack 2, tous les fichiers DLL et exécutables Windows sont compilés avec FPO désactivé, car cela rend le débogage plus précis.</span><span class="sxs-lookup"><span data-stu-id="65879-159">Starting with Windows XP Service Pack 2, all Windows DLL and executable files are compiled with FPO disabled, because it makes debugging more accurate.</span></span> <span data-ttu-id="65879-160">La désactivation de FPO permet également aux profileurs d’échantillonnage de parcourir la pile pendant l’exécution, avec un impact minime sur les performances.</span><span class="sxs-lookup"><span data-stu-id="65879-160">Disabling FPO also allows sampling profilers to walk the stack during run-time, with minimal performance impact.</span></span> <span data-ttu-id="65879-161">Dans les versions de Windows antérieures à Windows XP SP2, tous les fichiers binaires du système d’exploitation nécessitent des fichiers de symboles correspondants qui contiennent des informations FPO, pour permettre un débogage et un profilage précis.</span><span class="sxs-lookup"><span data-stu-id="65879-161">On versions of Windows before Windows XP SP2, all operating system binaries require matching symbol files that contain FPO information, to allow accurate debugging and profiling.</span></span>

<span data-ttu-id="65879-162">Si vous déboguez des exécutables natifs 64 bits, vous n’avez pas besoin de fichiers de symboles pour produire des traces de pile valides, car les systèmes d’exploitation et les compilateurs x64 sont conçus pour ne pas les exiger.</span><span class="sxs-lookup"><span data-stu-id="65879-162">If you debug 64-bit native executables, you do not need symbol files to produce valid stack traces, because x64 operating systems and compilers are designed not to require them.</span></span> <span data-ttu-id="65879-163">Toutefois, vous avez toujours besoin de fichiers de symboles pour récupérer les noms de fonction, les paramètres d’appel et les variables locales.</span><span class="sxs-lookup"><span data-stu-id="65879-163">However, you still need symbol files to retrieve the function names, call parameters and local variables.</span></span>

<span data-ttu-id="65879-164">Toutefois, certains cas sont particulièrement difficiles à déboguer sans symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-164">However, some cases are particularly difficult to debug without symbols.</span></span> <span data-ttu-id="65879-165">Par exemple, si vous déboguez un programme pour lequel vous avez généré un fichier PDB et si vous bloquez un rappel d’une fonction dans une DLL pour laquelle vous n’avez pas de symboles, vous ne pourrez pas voir quelle fonction a provoqué le rappel, car vous ne pourrez pas décoder la pile.</span><span class="sxs-lookup"><span data-stu-id="65879-165">For example, if you debug a program for which you built a PDB file, and if you crash in a callback from a function in a DLL that you don't have symbols for, you will not be able to see which function caused the callback, because you will not be able to decode the stack.</span></span> <span data-ttu-id="65879-166">Cela se produit fréquemment dans les bibliothèques tierces, si les fichiers PDB ne sont pas fournis ou dans les anciens composants du système d’exploitation, si les fichiers PDB ne sont pas disponibles.</span><span class="sxs-lookup"><span data-stu-id="65879-166">This frequently happens in third-party libraries, if PDBs are not provided, or in old operating system components, if PDBs are not available.</span></span> <span data-ttu-id="65879-167">Les rappels se produisent souvent pendant le passage de messages, l’énumération, l’allocation de mémoire ou la gestion des exceptions.</span><span class="sxs-lookup"><span data-stu-id="65879-167">Callbacks often happen during message passing, enumeration, memory allocation, or exception handling.</span></span> <span data-ttu-id="65879-168">Le débogage de ces fonctions sans une pile précise peut être frustrant.</span><span class="sxs-lookup"><span data-stu-id="65879-168">Debugging these functions without an accurate stack can be frustrating.</span></span>

<span data-ttu-id="65879-169">Pour déboguer de manière fiable les mini-vidages qui sont générés sur un autre ordinateur ou qui se sont bloqués dans du code dont vous n’êtes pas propriétaire, il est important de pouvoir accéder à tous les symboles et binaires des fichiers exécutables référencés dans le mini-vidage.</span><span class="sxs-lookup"><span data-stu-id="65879-169">To reliably debug mini-dumps that are generated on a different computer, or that crashed in code that you do not own, it's important to be able to access all the symbols and binaries for the executables that are referenced in the mini-dump.</span></span> <span data-ttu-id="65879-170">Si les symboles et les binaires sont disponibles à partir d’un serveur de symboles, ils sont automatiquement obtenus par le débogueur.</span><span class="sxs-lookup"><span data-stu-id="65879-170">If the symbols and binaries are available from a symbol server, they are automatically obtained by the debugger.</span></span> <span data-ttu-id="65879-171">Pour plus d’informations sur les mini-vidages, consultez le livre blanc [analyse de vidage sur incident](/windows/desktop/DxTechArts/crash-dump-analysis) .</span><span class="sxs-lookup"><span data-stu-id="65879-171">For more information on mini-dumps, see the [Crash Dump Analysis](/windows/desktop/DxTechArts/crash-dump-analysis) white paper.</span></span>

## <a name="getting-the-symbols-you-need"></a><span data-ttu-id="65879-172">Obtention des symboles dont vous avez besoin</span><span class="sxs-lookup"><span data-stu-id="65879-172">Getting the Symbols You Need</span></span>

<span data-ttu-id="65879-173">Visual Studio et d’autres débogueurs Microsoft, tels que WinDbg, sont généralement configurés pour fonctionner uniquement si vous générez une application et que vous la déboguez sur votre propre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="65879-173">Visual Studio and other Microsoft debuggers, such as WinDbg, are typically set up to just work if you are building an application and debugging it on your own computer.</span></span> <span data-ttu-id="65879-174">Si vous avez besoin de fournir votre exécutable à une autre personne, si vous avez plusieurs versions d’une DLL ou d’un fichier. exe sur votre ordinateur, ou si vous souhaitez déboguer avec précision une application qui utilise Windows ou d’autres bibliothèques, telles que DirectX, vous devez comprendre comment les débogueurs recherchent et chargent les symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-174">If you need to give your executable to someone else, if you have multiple versions of a DLL or an .exe file on your computer, or if you want to accurately debug an application that uses Windows or other libraries, such as DirectX, you need to understand how debuggers find and load symbols.</span></span> <span data-ttu-id="65879-175">Le débogueur utilise soit le chemin de recherche de symboles spécifié par l’utilisateur, qui se trouve dans options de \\ débogage \\ symboles dans Visual Studio, soit la \_ \_ \_ variable d’environnement chemin d’accès aux symboles NT.</span><span class="sxs-lookup"><span data-stu-id="65879-175">The debugger uses either the symbol search path that is specified by the user—which is found in Options\\Debugging\\Symbols in Visual Studio—or the \_NT\_SYMBOL\_PATH environment variable.</span></span> <span data-ttu-id="65879-176">En règle générale, le débogueur recherche les fichiers PDB correspondants aux emplacements suivants :</span><span class="sxs-lookup"><span data-stu-id="65879-176">Typically, the debugger searches for matching PDBs in the following locations:</span></span>

-   <span data-ttu-id="65879-177">Emplacement spécifié à l'intérieur de la DLL ou du fichier exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-177">The location that is specified inside the DLL or the executable file.</span></span>

    <span data-ttu-id="65879-178">Si vous avez créé une DLL ou un fichier exécutable sur votre ordinateur, par défaut, l’éditeur de liens place le chemin d’accès complet et le nom du fichier PDB associé à l’intérieur de la DLL ou du fichier exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-178">If you have built a DLL or an executable file on your computer, by default the linker places the full path and file name of the associated PDB file inside the DLL or the executable file.</span></span> <span data-ttu-id="65879-179">Quand vous déboguez, le débogueur vérifie d’abord si le fichier de symboles existe dans l’emplacement spécifié dans la DLL ou le fichier exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-179">When you debug, the debugger first checks to see if the symbol file exists in the location that is specified inside the DLL or the executable file.</span></span> <span data-ttu-id="65879-180">Cela est utile, car vous avez toujours des symboles disponibles pour le code que vous avez compilé sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="65879-180">This is helpful, because you always have symbols available for code that you have compiled on your computer.</span></span>

-   <span data-ttu-id="65879-181">Fichiers PDB qui peuvent être présents dans le même dossier que la DLL ou le fichier exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-181">PDBs that may be present in the same folder as the DLL or executable file.</span></span>
-   <span data-ttu-id="65879-182">Tout dossier de cache de symboles local.</span><span class="sxs-lookup"><span data-stu-id="65879-182">Any local symbol cache folders.</span></span>
-   <span data-ttu-id="65879-183">Tous les serveurs de symboles de partage de fichiers de réseau local.</span><span class="sxs-lookup"><span data-stu-id="65879-183">Any local network file share symbol servers.</span></span>
-   <span data-ttu-id="65879-184">Tous les serveurs de symboles Internet, tels que le serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-184">Any Internet symbol servers, such as the Microsoft symbol server.</span></span>

<span data-ttu-id="65879-185">Pour vous assurer que vous disposez de tous les fichiers PDB dont vous avez besoin pour un débogage précis, installez les outils de débogage pour Windows.</span><span class="sxs-lookup"><span data-stu-id="65879-185">To make sure that you have all the PDBs that you need for accurate debugging, install the debugging tools for Windows.</span></span> <span data-ttu-id="65879-186">Les versions 32 et 64 bits se trouvent dans [outils de débogage pour Windows](/windows-hardware/drivers/debugger/).</span><span class="sxs-lookup"><span data-stu-id="65879-186">The 32 and 64 bit versions can be found at [Debugging Tools for Windows](/windows-hardware/drivers/debugger/).</span></span>

<span data-ttu-id="65879-187">symchk.exe est un outil utile qui est installé avec ce package.</span><span class="sxs-lookup"><span data-stu-id="65879-187">A useful tool that is installed with this package is symchk.exe.</span></span> <span data-ttu-id="65879-188">Il peut aider à identifier les symboles manquants ou incorrects.</span><span class="sxs-lookup"><span data-stu-id="65879-188">It can help to identify missing or incorrect symbols.</span></span> <span data-ttu-id="65879-189">Cet outil comporte un grand nombre d’options de ligne de commande potentielles.</span><span class="sxs-lookup"><span data-stu-id="65879-189">This tool has a large number of potential command line options.</span></span> <span data-ttu-id="65879-190">Voici deux des plus utiles et les plus couramment utilisés.</span><span class="sxs-lookup"><span data-stu-id="65879-190">Here are two of the more useful and commonly used ones.</span></span>

### <a name="check-if-a-given-dll-or-exe-file-and-pdb-in-the-same-folder-match"></a><span data-ttu-id="65879-191">Vérifier si une DLL ou un fichier. exe donné et PDB dans le même dossier correspondent</span><span class="sxs-lookup"><span data-stu-id="65879-191">Check if a given DLL or .exe file and PDB in the same folder match</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symchk" testing.dll /s

SYMCHK: FAILED files = 0
SYMCHK: PASSED + IGNORED files = 1
```

<span data-ttu-id="65879-192">L’option **/s** indique à **Symchk** de rechercher les symboles uniquement dans le dossier actif, et de ne pas consulter les serveurs de symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-192">The **/s** option tells **symchk** to look for symbols only in the current folder, and not to look in any symbol servers.</span></span>

### <a name="check-if-all-the-dlls-and-executable-files-in-a-set-of-folders-have-matching-pdbs"></a><span data-ttu-id="65879-193">Vérifier si toutes les dll et tous les fichiers exécutables d’un ensemble de dossiers ont des pdb correspondants</span><span class="sxs-lookup"><span data-stu-id="65879-193">Check if all the DLLs and executable files in a set of folders have matching PDBs</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symchk" *.* /r
```

<span data-ttu-id="65879-194">L’option **/r** définit **Symchk** pour parcourir de manière récursive les dossiers, afin de vérifier que tous les fichiers exécutables ont des fichiers PDB correspondants.</span><span class="sxs-lookup"><span data-stu-id="65879-194">The **/r** option sets **symchk** to recursively traverse through folders, to check that all the executable files have matching PDBs.</span></span> <span data-ttu-id="65879-195">Sans l’option **/s** , **Symchk** utilise le \_ \_ \_ chemin d’accès aux symboles NT en cours pour rechercher des symboles sur un serveur privé ou local, ou sur les serveurs de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-195">Without the **/s** option, **symchk** uses the current \_NT\_SYMBOL\_PATH to search for symbols on any private or local server, or on the Microsoft symbol servers.</span></span> <span data-ttu-id="65879-196">L’outil **Symchk** recherche uniquement les symboles pour les fichiers exécutables (. exe,. dll et similaires).</span><span class="sxs-lookup"><span data-stu-id="65879-196">The **symchk** tool searches only for symbols for executable files (.exe, .dll, and similar).</span></span> <span data-ttu-id="65879-197">Vous ne pouvez pas utiliser des caractères génériques pour rechercher des symboles pour les fichiers non exécutables.</span><span class="sxs-lookup"><span data-stu-id="65879-197">You cannot use wild cards search for symbols for non-executable files.</span></span>

### <a name="how-symchk-works"></a><span data-ttu-id="65879-198">Fonctionnement de Symchk</span><span class="sxs-lookup"><span data-stu-id="65879-198">How symchk Works</span></span>

<span data-ttu-id="65879-199">Lorsque l’éditeur de liens génère des fichiers. dll, exécutables et PDB, il stocke des GUID identiques dans chaque fichier.</span><span class="sxs-lookup"><span data-stu-id="65879-199">When the linker generates .dll, executable, and PDB files, it stores identical GUIDs in each file.</span></span> <span data-ttu-id="65879-200">Le GUID est utilisé par les outils pour déterminer si un fichier PDB donné correspond à une DLL ou à un fichier exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-200">The GUID is used by tools to determine if a given PDB file matches a DLL or an executable file.</span></span> <span data-ttu-id="65879-201">Si vous modifiez une DLL ou un fichier exécutable (à l’aide d’un éditeur de ressources ou d’un encodage de protection de copie, ou en modifiant ses informations de version), le GUID est mis à jour et le débogueur ne peut pas charger le fichier PDB.</span><span class="sxs-lookup"><span data-stu-id="65879-201">If you alter a DLL or an executable file—by using a resource editor or copy protection encoding, or by altering its version information—the GUID is updated and the debugger cannot load the PDB file.</span></span> <span data-ttu-id="65879-202">Pour cette raison, il est très important de ne pas manipuler la DLL ou le fichier exécutable après sa création par l’éditeur de liens.</span><span class="sxs-lookup"><span data-stu-id="65879-202">For this reason, it's very important to avoid manipulating the DLL or executable file after it is created by the linker.</span></span>

<span data-ttu-id="65879-203">Vous pouvez également utiliser l’utilitaire DUMPBIN fourni avec VS.NET pour afficher les chemins d’accès aux symboles recherchés et pour voir si des fichiers de symboles qui correspondent à une DLL ou à un fichier exécutable donné sont trouvés.</span><span class="sxs-lookup"><span data-stu-id="65879-203">You can also use the DUMPBIN utility that comes with VS.NET to show the symbol paths that are searched, and to see if symbol files are found that match a given DLL or executable file.</span></span> <span data-ttu-id="65879-204">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="65879-204">For example:</span></span>

``` syntax
DUMPBIN /PDBPATH:VERBOSE filename.exe
```

## <a name="symbol-servers"></a><span data-ttu-id="65879-205">Serveurs de symboles</span><span class="sxs-lookup"><span data-stu-id="65879-205">Symbol Servers</span></span>

<span data-ttu-id="65879-206">Un serveur de symboles est un référentiel pour plusieurs versions des fichiers exécutables et de symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-206">A symbol server is a repository for multiple versions of executable and symbol files.</span></span> <span data-ttu-id="65879-207">Il contient les fichiers de symboles eux-mêmes ou les pointeurs vers les fichiers de symboles associés.</span><span class="sxs-lookup"><span data-stu-id="65879-207">It contains either the symbol files themselves, or pointers to the associated symbol files.</span></span> <span data-ttu-id="65879-208">Les débogueurs comprennent l’utilisation des serveurs de symboles et peuvent les utiliser pour rechercher des symboles manquants ou inconnus.</span><span class="sxs-lookup"><span data-stu-id="65879-208">Debuggers understand how to use symbol servers, and can use them to search for missing or unknown symbols.</span></span>

<span data-ttu-id="65879-209">La DLL et les fichiers exécutables sont également disponibles à partir du serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-209">DLL and executable files are also available from the Microsoft symbol server.</span></span> <span data-ttu-id="65879-210">Cela permet de déboguer les incidents et d’examiner le code pour les fichiers de système d’exploitation qui peuvent ne pas exister sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="65879-210">This makes it possible to debug crashes and examine code for operating system files that may not exist on your machine.</span></span> <span data-ttu-id="65879-211">Si un débogueur rencontre un fichier exécutable ou une DLL qui n’existe pas sur le système que vous utilisez pour le débogage, il demande automatiquement les symboles et une copie du fichier binaire à partir des serveurs de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-211">If a debugger encounters an executable file or a DLL that does not exist on the system that you are using for debugging, it automatically requests both the symbols and a copy of the binary file from the Microsoft symbol servers.</span></span> <span data-ttu-id="65879-212">Cela est utile si vous déboguez un composant qui comporte de nombreuses versions (par exemple, msvcrt.dll) et que vous devez examiner le code pour une version qui n’existe pas sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="65879-212">This is helpful if you are debugging a component that has many versions—for example, msvcrt.dll—and you need to examine the code for a version that does not exist on your computer.</span></span> <span data-ttu-id="65879-213">Cela permet également de déboguer les mini-vidages générés sur un système d’exploitation différent du système que vous utilisez pour le débogage.</span><span class="sxs-lookup"><span data-stu-id="65879-213">This also helps debug mini-dumps that are generated on an operating system that is different from the system that you are using for debugging.</span></span>

<span data-ttu-id="65879-214">Microsoft publie tous les fichiers PDB pour tous les systèmes d’exploitation et autres composants redistribués, tels que le kit de développement logiciel (SDK) DirectX, sur son serveur de symboles accessible en externe.</span><span class="sxs-lookup"><span data-stu-id="65879-214">Microsoft publishes all the PDB files for all operating systems and other redistributed components, such as the DirectX SDK, on its externally accessible symbol server.</span></span> <span data-ttu-id="65879-215">Cela facilite le débogage d’une application qui utilise ces fichiers DLL ou exécutables.</span><span class="sxs-lookup"><span data-stu-id="65879-215">This makes it easy to debug an application that uses these DLL or executable files.</span></span> <span data-ttu-id="65879-216">Vous pouvez utiliser le serveur de symboles Microsoft pour résoudre les symboles, ainsi que tous les symboles locaux des composants qui ont été créés sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="65879-216">You can use the Microsoft symbol server to resolve symbols, together with any local symbols for components that were built on your computer.</span></span>

<span data-ttu-id="65879-217">Vous pouvez configurer votre ordinateur pour qu’il utilise le serveur de symboles Microsoft, qui vous permet d’accéder à tous les fichiers de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-217">You can set up your computer to use the Microsoft symbol server, which gives you access to all Microsoft symbol files.</span></span> <span data-ttu-id="65879-218">Vous pouvez également configurer un serveur de symboles privé pour votre entreprise, votre équipe ou votre réseau, qui peut être utilisé pour stocker plusieurs versions antérieures d’un projet sur lequel vous travaillez, ou pour fournir un cache local pour les symboles que vous utilisez à partir du serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-218">You can also set up a private symbol server for your company, team or network, which can be used to store multiple older versions of a project you are working on, or to provide a local cache for the symbols that you use from the Microsoft symbol server.</span></span>

<span data-ttu-id="65879-219">Pour utiliser un serveur de symboles, spécifiez le chemin de recherche dans une variable d’environnement appelée \_ \_ \_ chemin d’accès aux symboles NT.</span><span class="sxs-lookup"><span data-stu-id="65879-219">To use a symbol server, specify the search path in an environment variable that is called \_NT\_SYMBOL\_PATH.</span></span> <span data-ttu-id="65879-220">Les débogueurs et les outils modernes, tels que WinDbg, NTSD ou Visual Studio, utilisent automatiquement ce chemin d’accès pour rechercher des symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-220">Debuggers and modern tools, such as WinDbg, NTSD or Visual Studio, automatically use this path to search for symbols.</span></span>

<span data-ttu-id="65879-221">Quand un débogueur recherche des symboles, il commence par Rechercher localement.</span><span class="sxs-lookup"><span data-stu-id="65879-221">When a debugger searches for symbols, it first searches locally.</span></span> <span data-ttu-id="65879-222">Il recherche ensuite les serveurs de symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-222">Then it looks on symbol servers.</span></span> <span data-ttu-id="65879-223">Lorsqu’il trouve un symbole correspondant, il transfère le fichier de symboles dans votre cache local.</span><span class="sxs-lookup"><span data-stu-id="65879-223">When it finds a matching symbol, it transfers the symbol file to your local cache.</span></span> <span data-ttu-id="65879-224">La taille des symboles d’une DLL ou d’un fichier exécutable standard est comprise entre 1 et 100 Mo.</span><span class="sxs-lookup"><span data-stu-id="65879-224">The symbols for a typical DLL or executable file range from 1 to 100 MB in size.</span></span> <span data-ttu-id="65879-225">Par conséquent, si vous déboguez un processus qui comprend de nombreuses dll, il peut être nécessaire de résoudre tous les symboles et de les transférer vers un cache local.</span><span class="sxs-lookup"><span data-stu-id="65879-225">Therefore, if you are debugging a process that includes many DLLs, it can take some time to resolve all the symbols and transfer them to a local cache.</span></span>

## <a name="using-the-microsoft-symbol-server"></a><span data-ttu-id="65879-226">Utilisation du serveur de symboles Microsoft</span><span class="sxs-lookup"><span data-stu-id="65879-226">Using the Microsoft Symbol Server</span></span>

<span data-ttu-id="65879-227">Le serveur de symboles Microsoft vous permet d’obtenir tous les symboles les plus récents, y compris les symboles des fichiers corrigés ou mis à jour.</span><span class="sxs-lookup"><span data-stu-id="65879-227">The Microsoft symbol server allows you to obtain all the latest symbols, including symbols for patched or updated files.</span></span> <span data-ttu-id="65879-228">Le serveur de symboles Microsoft est disponible à l’adresse <https://msdl.microsoft.com/download/symbols> .</span><span class="sxs-lookup"><span data-stu-id="65879-228">The Microsoft symbol server is available at <https://msdl.microsoft.com/download/symbols>.</span></span>

<span data-ttu-id="65879-229">Vous pouvez accéder au serveur de symboles de l’une des manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="65879-229">You can access the symbol server in one of the following ways:</span></span>

-   <span data-ttu-id="65879-230">Entrez l’adresse du serveur directement.</span><span class="sxs-lookup"><span data-stu-id="65879-230">Enter the server address directly.</span></span> <span data-ttu-id="65879-231">Dans Visual Studio, dans le menu **Outils** , choisissez **options**, puis **débogage**, puis **symboles**.</span><span class="sxs-lookup"><span data-stu-id="65879-231">In Visual Studio, from the **Tools** menu, choose **Options**, then choose **Debugging**, and then choose **Symbols**.</span></span>
-   <span data-ttu-id="65879-232">Utilisez le \_ \_ chemin d’accès aux symboles NT de la variable \_ d’environnement.</span><span class="sxs-lookup"><span data-stu-id="65879-232">Use the environment variable \_NT\_SYMBOL\_PATH.</span></span> <span data-ttu-id="65879-233">Nous recommandons cette méthode.</span><span class="sxs-lookup"><span data-stu-id="65879-233">We recommend this method.</span></span>

    <span data-ttu-id="65879-234">Cela est utilisé par tous les outils de débogage.</span><span class="sxs-lookup"><span data-stu-id="65879-234">This is used by all debugging tools.</span></span> <span data-ttu-id="65879-235">Elle est également utilisée par Visual Studio et est lue et décodée quand Visual Studio s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="65879-235">It is also used by Visual Studio, and is read and decoded when Visual Studio opens.</span></span> <span data-ttu-id="65879-236">Par conséquent, si vous le modifiez, vous devez redémarrer Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="65879-236">Therefore, if you change it, you need to restart Visual Studio.</span></span>

    <span data-ttu-id="65879-237">Cette variable d’environnement vous permet de spécifier plusieurs serveurs de symboles, par exemple un serveur de symboles privé interne.</span><span class="sxs-lookup"><span data-stu-id="65879-237">This environment variable allows you to specify multiple symbol servers—for example, an internal private symbol server.</span></span> <span data-ttu-id="65879-238">Elle vous permet également de spécifier un répertoire de cache local pour stocker des fichiers PDB pour tous les symboles que vous recherchez à partir de serveurs de symboles, à la fois en interne et sur Internet.</span><span class="sxs-lookup"><span data-stu-id="65879-238">It also allows you to specify a local cache directory to store PDBs for all symbols that you look up from symbol servers, both internally and over the Internet.</span></span>

<span data-ttu-id="65879-239">La syntaxe de la \_ \_ variable de \_ chemin d’accès aux symboles NT est la suivante :</span><span class="sxs-lookup"><span data-stu-id="65879-239">The syntax for the \_NT\_SYMBOL\_PATH variable is:</span></span>

``` syntax
srv*[local cache]*[private symbol server]*https://msdl.microsoft.com/download/symbols
```

<span data-ttu-id="65879-240">Remplacez \[ le cache local \] par le nom d’un répertoire sur votre ordinateur où vous souhaitez stocker un cache de tous les symboles utilisés, par exemple,% systemroot% \\ Symbols ou c : \\ Symbols.</span><span class="sxs-lookup"><span data-stu-id="65879-240">Replace \[local cache\] with the name of a directory on your computer where you want to store a cache of any symbols used—for example, %SYSTEMROOT%\\Symbols, or c:\\symbols.</span></span>

<span data-ttu-id="65879-241">Le \[ serveur de symboles privés \] est facultatif.</span><span class="sxs-lookup"><span data-stu-id="65879-241">The \[private symbol server\] is optional.</span></span> <span data-ttu-id="65879-242">Il peut pointer vers un serveur de symboles situé sur votre réseau, ou il peut pointer vers un serveur de symboles qui est partagé par votre équipe, groupe de produits ou société.</span><span class="sxs-lookup"><span data-stu-id="65879-242">It can point to a symbol server that is located on your network, or it can point to a symbol server that is shared by your team, product group, or company.</span></span>

<span data-ttu-id="65879-243">Pour utiliser uniquement le serveur de symboles Microsoft avec un cache local de symboles, pour accélérer l’accès via Internet, utilisez le paramètre suivant pour le \_ \_ chemin d’accès aux symboles NT \_ :</span><span class="sxs-lookup"><span data-stu-id="65879-243">To use only the Microsoft symbol server together with a local cache of symbols, to speed up access over the Internet, use the following setting for \_NT\_SYMBOL\_PATH:</span></span>

``` syntax
srv*c:\symbols*https://msdl.microsoft.com/download/symbols
```

<span data-ttu-id="65879-244">Vous trouverez d’autres options pour le \_ \_ \_ chemin d’accès aux symboles NT dans le fichier d’aide qui est installé avec le package outils de débogage Microsoft pour Windows.</span><span class="sxs-lookup"><span data-stu-id="65879-244">You can find other options for the \_NT\_SYMBOL\_PATH in the help file that is installed with the Microsoft Debugging Tools for Windows package.</span></span>

<span data-ttu-id="65879-245">Les exécutables sans symboles peuvent augmenter le temps nécessaire au lancement d’un débogueur si vous utilisez un serveur de symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-245">Executables without symbols can increase the time it takes to launch a debugger if you use a symbol server.</span></span> <span data-ttu-id="65879-246">Cela est dû au fait que le débogueur interroge le serveur de symboles chaque fois qu’il essaie de charger l’exécutable.</span><span class="sxs-lookup"><span data-stu-id="65879-246">This is because the debugger queries the symbol server each time it tries to load the executable.</span></span> <span data-ttu-id="65879-247">Pour cette raison, il est préférable de toujours demander des symboles pour tous les composants.</span><span class="sxs-lookup"><span data-stu-id="65879-247">For this reason, it is best to always request symbols for all components.</span></span>

<span data-ttu-id="65879-248">Il se peut qu’il ne soit pas possible de demander des symboles pour chaque composant (par exemple, les pilotes vidéo peuvent avoir des dll dans votre espace de processus et les fichiers PDB requis sont disponibles sur le serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-248">It may not be possible to request symbols for every component—for example, video drivers may have DLLs in your process space, and the required PDB files are available on the Microsoft symbol server.</span></span> <span data-ttu-id="65879-249">Dans ce cas, il y a un petit délai quand vous démarrez une session de débogage.</span><span class="sxs-lookup"><span data-stu-id="65879-249">In this case, there is a small delay when you start a debugging session.</span></span>

<span data-ttu-id="65879-250">Pour éviter même ce petit délai, vous pouvez exécuter le débogueur une seule fois, pour mettre en cache tous les symboles localement à partir du serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-250">To avoid even this small delay, you can run the debugger once, to cache all the symbols locally from the Microsoft symbol server.</span></span> <span data-ttu-id="65879-251">Ensuite, modifiez \_ \_ \_ le chemin d’accès aux symboles NT pour supprimer le serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-251">Then, modify your \_NT\_SYMBOL\_PATH to remove the Microsoft symbol server.</span></span> <span data-ttu-id="65879-252">À moins que les fichiers exécutables ne soient modifiés, les recherches de fichiers exécutables qui n’ont pas de symboles ne nécessitent pas de requête sur Internet, car vous avez des copies en cache locales de tous les symboles dont vous avez besoin à partir du serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-252">Unless the executable files change, checks for executable files that do not have symbols will not require a query over the Internet, because you have local cached copies of all the symbols that you need from the Microsoft symbol server.</span></span>

## <a name="getting-symbols-manually"></a><span data-ttu-id="65879-253">Obtention manuelle des symboles</span><span class="sxs-lookup"><span data-stu-id="65879-253">Getting Symbols Manually</span></span>

<span data-ttu-id="65879-254">Si vous avez correctement configuré votre débogueur, il charge automatiquement tous les symboles nécessaires à partir de votre cache local ou d’un serveur de symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-254">If you have set up your debugger correctly, it automatically loads any symbols that it requires from your local cache or from a symbol server.</span></span> <span data-ttu-id="65879-255">Si vous souhaitez obtenir les symboles d’un seul exécutable ou d’un dossier d’exécutables, vous pouvez utiliser **Symchk**.</span><span class="sxs-lookup"><span data-stu-id="65879-255">If you would like to get the symbols for just a single executable, or for a folder of executables, you can use **symchk**.</span></span> <span data-ttu-id="65879-256">Par exemple, si vous souhaitez télécharger les symboles pour le fichier de \_30.dll d3dx9 dans le dossier système Windows dans le répertoire actif, vous pouvez utiliser la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="65879-256">For example, if you want to download the symbols for the d3dx9\_30.dll file in the Windows System folder into the current directory, you can use the following command:</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symchk" c:\Windows\System32\d3dx9_30.dll /oc \.
```

<span data-ttu-id="65879-257">L’outil **Symchk** a de nombreuses autres utilisations.</span><span class="sxs-lookup"><span data-stu-id="65879-257">The **symchk** tool has many other uses.</span></span> <span data-ttu-id="65879-258">Pour plus d’informations, consultez **Symchk/ ?**, ou consultez la documentation Microsoft débogage Tools pour Windows.</span><span class="sxs-lookup"><span data-stu-id="65879-258">For details, see **symchk /?**, or look in the Microsoft Debugging Tools for Windows documentation.</span></span>

## <a name="setting-up-a-symbol-server"></a><span data-ttu-id="65879-259">Configuration d’un serveur de symboles</span><span class="sxs-lookup"><span data-stu-id="65879-259">Setting Up a Symbol Server</span></span>

<span data-ttu-id="65879-260">La configuration d’un serveur de symboles est très simple.</span><span class="sxs-lookup"><span data-stu-id="65879-260">Setting up a symbol server is very simple.</span></span> <span data-ttu-id="65879-261">Elle est utile pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="65879-261">It is useful for the following reasons:</span></span>

-   <span data-ttu-id="65879-262">Pour économiser de la bande passante ou pour accélérer la résolution des symboles pour votre entreprise, votre équipe ou votre produit.</span><span class="sxs-lookup"><span data-stu-id="65879-262">To save bandwidth, or to speed up symbol resolution for your company, team or product.</span></span> <span data-ttu-id="65879-263">Un serveur de symboles interne sur un partage de fichiers local sur votre réseau met en cache toutes les références aux serveurs de symboles externes, tels que le serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-263">An internal symbol server on a local file share on your network caches any references to external symbol servers, such as the Microsoft symbol server.</span></span> <span data-ttu-id="65879-264">Un serveur de symboles local ou interne est accessible rapidement par de nombreuses personnes.</span><span class="sxs-lookup"><span data-stu-id="65879-264">A local or internal symbol server can be accessed quickly by many people at the same time.</span></span> <span data-ttu-id="65879-265">Par conséquent, elle économise la bande passante et la latence que les demandes de symboles dupliquées peuvent créer.</span><span class="sxs-lookup"><span data-stu-id="65879-265">Therefore, it saves bandwidth and the latency that duplicate symbol requests can create.</span></span>
-   <span data-ttu-id="65879-266">Pour stocker des symboles pour les anciennes builds, versions ou versions externes de votre application.</span><span class="sxs-lookup"><span data-stu-id="65879-266">To store symbols for old builds, versions or external releases of your application.</span></span> <span data-ttu-id="65879-267">En stockant les symboles de ces builds sur un serveur de symboles auquel vous pouvez accéder facilement, vous pouvez déboguer des incidents et des problèmes dans ces builds sur n’importe quel ordinateur doté d’un débogueur et d’une connexion au serveur de symboles local.</span><span class="sxs-lookup"><span data-stu-id="65879-267">By storing the symbols for these builds on a symbol server that you can easily access, you can debug crashes and problems in these builds on any computer that has a debugger and a connection to the local symbol server.</span></span> <span data-ttu-id="65879-268">Cela s’avère particulièrement utile si vous déboguez des mini-vidages générés par des exécutables que vous n’avez pas créés vous-même, c’est-à-dire des builds qui ont été générées par un autre programmeur ou par un ordinateur de Build.</span><span class="sxs-lookup"><span data-stu-id="65879-268">This is particularly useful if you debug mini-dumps that are generated by executables that you did not build yourself—that is, builds that were generated by another programmer or by a build machine.</span></span> <span data-ttu-id="65879-269">Si les symboles de ces Builds sont stockés sur votre serveur de symboles, vous obtiendrez un débogage fiable et précis.</span><span class="sxs-lookup"><span data-stu-id="65879-269">If the symbols for these builds are stored on your symbol server, you will have reliable and accurate debugging.</span></span>
-   <span data-ttu-id="65879-270">Pour tenir à jour les symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-270">To keep symbols up to date.</span></span> <span data-ttu-id="65879-271">Lorsque les composants sont mis à jour, tels que les composants du système d’exploitation qui sont modifiés par Windows Update ou par le kit de développement logiciel (SDK) DirectX, vous pouvez toujours déboguer à l’aide de tous les symboles les plus récents.</span><span class="sxs-lookup"><span data-stu-id="65879-271">When components are updated, such as OS components that are modified by Windows Update or by the DirectX SDK, you can still debug by using all the latest symbols.</span></span>

<span data-ttu-id="65879-272">La configuration d’un serveur de symboles sur votre propre réseau local est aussi simple que la création d’un partage de fichiers sur un serveur et l’octroi d’autorisations complètes aux utilisateurs pour accéder au partage, afin de créer des fichiers et des dossiers.</span><span class="sxs-lookup"><span data-stu-id="65879-272">Setting up a symbol server on your own local network is as simple as creating a file share on a server and giving users full permissions to access the share, to create files and folders.</span></span> <span data-ttu-id="65879-273">Ce partage doit être créé sur un système d’exploitation serveur, tel que Windows Server 2003, de sorte que le nombre de personnes qui peuvent accéder simultanément au partage n’est pas limité.</span><span class="sxs-lookup"><span data-stu-id="65879-273">This share should be created on a server operating system, such as Windows Server 2003, so that the number of people who can access the share simultaneously is not limited.</span></span>

<span data-ttu-id="65879-274">Par exemple, si vous configurez un partage de fichiers sur les \\ \\ \\ symboles mainserver, les membres de votre équipe définissent le \_ \_ \_ chemin d’accès aux symboles NT comme suit :</span><span class="sxs-lookup"><span data-stu-id="65879-274">For example, if you set up a file share on \\\\mainserver\\symbols, then the members of your team set the \_NT\_SYMBOL\_PATH to the following:</span></span>

``` syntax
Srv*c:\symbols*\\mainserver\symbols*https://msdl.microsoft.com/download/symbols
```

<span data-ttu-id="65879-275">À mesure que les symboles sont récupérés, les fichiers et les dossiers apparaissent dans le \\ \\ \\ répertoire partagé de symboles mainserver, ainsi que dans les caches individuels, dans le répertoire c : \\ Symbols.</span><span class="sxs-lookup"><span data-stu-id="65879-275">As symbols are retrieved, files and folders appear in the \\\\mainserver\\symbols shared directory, as well as in individual caches, in the c:\\symbols directory.</span></span>

<span data-ttu-id="65879-276">Il s’agit en général de tout ce qui est impliqué dans la configuration et l’utilisation de votre propre serveur de symboles ou du serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-276">This is typically all that is involved in setting up and using either your own symbol server, or the Microsoft symbol server.</span></span>

## <a name="adding-symbols-to-a-symbol-server"></a><span data-ttu-id="65879-277">Ajout de symboles à un serveur de symboles</span><span class="sxs-lookup"><span data-stu-id="65879-277">Adding Symbols to a Symbol Server</span></span>

<span data-ttu-id="65879-278">Pour ajouter, supprimer ou modifier des fichiers sur un partage de serveur de symboles, utilisez l’outil symstore.exe.</span><span class="sxs-lookup"><span data-stu-id="65879-278">To add, delete or edit files on a symbol server share, use the symstore.exe tool.</span></span> <span data-ttu-id="65879-279">Cet outil fait partie du package outils de débogage Microsoft pour Windows.</span><span class="sxs-lookup"><span data-stu-id="65879-279">This tool is part of the Microsoft Debugging Tools for Windows package.</span></span> <span data-ttu-id="65879-280">La documentation complète sur les serveurs de symboles, l’outil SymStore et les symboles d’indexation est incluse dans le package outils de débogage pour Windows.</span><span class="sxs-lookup"><span data-stu-id="65879-280">Full documentation on symbol servers, the symstore tool, and indexing symbols is included in the Debugging Tools for Windows package.</span></span>

<span data-ttu-id="65879-281">Vous pouvez ajouter des symboles directement à votre propre serveur de symboles, dans le cadre d’un processus de génération, ou pour rendre les symboles disponibles pour l’ensemble de votre équipe pour les bibliothèques ou les outils tiers.</span><span class="sxs-lookup"><span data-stu-id="65879-281">You may want to add symbols directly to your own symbol server, as part of a build process, or to make symbols available to your whole team for third-party libraries or tools.</span></span> <span data-ttu-id="65879-282">Le processus d’ajout d’un symbole à un partage de fichiers de serveur de symboles est appelé « symboles d’indexation ».</span><span class="sxs-lookup"><span data-stu-id="65879-282">The process of adding a symbol to a symbol server file share is called indexing symbols.</span></span> <span data-ttu-id="65879-283">Il existe deux façons courantes d’indexer des symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-283">There are two common ways to index symbols.</span></span> <span data-ttu-id="65879-284">Un fichier de symboles peut être copié sur le serveur de symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-284">A symbol file can be copied to the symbol server.</span></span> <span data-ttu-id="65879-285">Ou bien, un pointeur vers l’emplacement du symbole peut être copié sur le serveur de symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-285">Or, a pointer to the location of the symbol can be copied to the symbol server.</span></span> <span data-ttu-id="65879-286">Si vous disposez d’un dossier d’archive qui contient vos anciennes builds, vous pouvez indexer les pointeurs vers les fichiers PDB qui se trouvent déjà sur le partage, au lieu de dupliquer les symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-286">If you have an archive folder that contains your old builds, you may want to index pointers to the PDB files that are already on the share, instead of duplicating symbols.</span></span> <span data-ttu-id="65879-287">Étant donné que la taille des symboles peut parfois être de dizaines de mégaoctets, il est judicieux de planifier à l’avance l’espace dont vous pouvez avoir besoin pour archiver toutes les builds de votre projet tout au long du développement.</span><span class="sxs-lookup"><span data-stu-id="65879-287">Because symbols can sometimes be tens of megabytes in size, it's a good idea to plan ahead for how much space you may require to archive all the builds of your project throughout development.</span></span> <span data-ttu-id="65879-288">Si vous indexez uniquement les pointeurs vers des symboles, vous risquez de rencontrer des problèmes si vous supprimez les anciennes builds ou si vous modifiez le nom d’un partage de fichiers.</span><span class="sxs-lookup"><span data-stu-id="65879-288">If you index only pointers to symbols, you may have problems if you remove old builds, or change the name of a file share.</span></span>

<span data-ttu-id="65879-289">Par exemple, pour indexer de manière récursive tous les symboles des symboles c : \\ dxsym \\ extras \\ que vous avez obtenus à partir du kit de développement logiciel (SDK) DirectX d’octobre 2006 sur un partage de fichiers de serveur de symboles appelé \\ \\ mainserver \\ Symbols, vous pouvez utiliser la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="65879-289">For example, to index recursively all the symbols in c:\\dxsym\\Extras\\Symbols that you obtained from the October 2006 DirectX SDK onto a symbol server file share called \\\\mainserver\\symbols, you can use the following command:</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symstore" add /f "C:\dxsym\Extras\Symbols\*.pdb"
/s \\mainserver\symbols /t "October 2006 DirectX SDK " /r
```

<span data-ttu-id="65879-290">Le paramètre **/t "Comment"** est utilisé pour ajouter une description à la transaction qui a ajouté les symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-290">The **/t "comment"** parameter is used to add a description to the transaction that added the symbols.</span></span> <span data-ttu-id="65879-291">Cela peut être utile lors de l’exécution de tâches d’administration sur les symboles.</span><span class="sxs-lookup"><span data-stu-id="65879-291">This can be useful when performing administrative tasks on the symbols.</span></span>

## <a name="best-practices"></a><span data-ttu-id="65879-292">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="65879-292">Best Practices</span></span>

-   <span data-ttu-id="65879-293">Configurez votre propre partage de fichiers de serveur de symboles pour votre équipe, société ou produit.</span><span class="sxs-lookup"><span data-stu-id="65879-293">Set up your own symbol server file share for your team, company, or product.</span></span>
-   <span data-ttu-id="65879-294">Configurez \_ \_ \_ le chemin d’accès des symboles NT pour qu’il pointe vers un cache local, un serveur de symboles privé et le serveur de symboles Microsoft.</span><span class="sxs-lookup"><span data-stu-id="65879-294">Set up \_NT\_SYMBOL\_PATH to point to a local cache, to a private symbol server, and to the Microsoft symbol server.</span></span>
-   <span data-ttu-id="65879-295">Si un débogueur ne peut pas charger les symboles d’un composant que vous déboguez, contactez le propriétaire du composant pour demander des symboles, au moins un fichier PDB supprimé.</span><span class="sxs-lookup"><span data-stu-id="65879-295">If a debugger cannot load symbols for a component you are debugging, contact the owner of the component to request symbols—at least a stripped PDB.</span></span>
-   <span data-ttu-id="65879-296">Configurez un système de génération automatisé pour indexer les symboles sur votre serveur de symboles privé pour chaque Build produite.</span><span class="sxs-lookup"><span data-stu-id="65879-296">Set up an automated build system to index symbols on your private symbol server for each build that is produced.</span></span> <span data-ttu-id="65879-297">Assurez-vous que les builds que vous distribuez sont les builds générées par ce processus.</span><span class="sxs-lookup"><span data-stu-id="65879-297">Make sure that the builds that you distribute are the builds that are generated by this process.</span></span> <span data-ttu-id="65879-298">Cela permet de s’assurer que les symboles sont toujours disponibles pour les problèmes de débogage.</span><span class="sxs-lookup"><span data-stu-id="65879-298">This ensures that symbols are always available to debug problems.</span></span>
-   <span data-ttu-id="65879-299">Configurez un serveur de symboles pour permettre aux débogueurs d’accéder au code source d’un module spécifique directement à partir d’un système de contrôle de code source Visual Source Safe ou Perforce.</span><span class="sxs-lookup"><span data-stu-id="65879-299">Set up a symbol server to allow debuggers to access the source code for a specific module directly from a Visual Source Safe or Perforce based source control system.</span></span> <span data-ttu-id="65879-300">Si les informations de fichier source et les symboles d’une version finale d’un jeu sont indexés, les développeurs qui ont accès à votre serveur de symboles peuvent avoir un débogage complet au niveau de la source des problèmes signalés, sans conserver les environnements de génération ou les anciennes versions des fichiers sources sur leurs ordinateurs de développement.</span><span class="sxs-lookup"><span data-stu-id="65879-300">If the source file information and symbols for a released version of a game are indexed, developers who have access to your symbol server can have full source level debugging of reported issues, without keeping build environments or old versions of source files on their development computers.</span></span> <span data-ttu-id="65879-301">Pour configurer votre serveur de symboles afin d’autoriser l’indexation d’informations sur les fichiers sources, consultez la documentation du serveur source.</span><span class="sxs-lookup"><span data-stu-id="65879-301">To set up your symbol server to allow indexing of source file information, see source server documentation.</span></span>

 

 