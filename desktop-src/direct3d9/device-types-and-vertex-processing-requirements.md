---
description: Les performances des opérations de traitement des vertex, y compris la transformation et l’éclairage, dépendent fortement de l’emplacement de la mémoire tampon de vertex dans la mémoire et du type de périphérique de rendu utilisé.
ms.assetid: 4f9ca83d-c9d6-4749-944d-78f831b0f44e
title: Types d’appareils et exigences de traitement des vertex (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 590cf2f5423d9c3bdf3e19c91f30b3e8c0586687
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104521444"
---
# <a name="device-types-and-vertex-processing-requirements-direct3d-9"></a><span data-ttu-id="9ea55-103">Types d’appareils et exigences de traitement des vertex (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="9ea55-103">Device Types and Vertex Processing Requirements (Direct3D 9)</span></span>

<span data-ttu-id="9ea55-104">Les performances des opérations de traitement des vertex, y compris la transformation et l’éclairage, dépendent fortement de l’emplacement de la mémoire tampon de vertex dans la mémoire et du type de périphérique de rendu utilisé.</span><span class="sxs-lookup"><span data-stu-id="9ea55-104">The performance of vertex processing operations, including transformation and lighting, depends heavily on where the vertex buffer exists in memory and what type of rendering device is being used.</span></span> <span data-ttu-id="9ea55-105">Les applications contrôlent l’allocation de mémoire pour les mémoires tampons de vertex lorsqu’elles sont créées.</span><span class="sxs-lookup"><span data-stu-id="9ea55-105">Applications control the memory allocation for vertex buffers when they are created.</span></span> <span data-ttu-id="9ea55-106">Lorsque l' \_ indicateur de mémoire D3DPOOL SYSTEMMEM est défini, la mémoire tampon de vertex est créée dans la mémoire système.</span><span class="sxs-lookup"><span data-stu-id="9ea55-106">When the D3DPOOL\_SYSTEMMEM memory flag is set, the vertex buffer is created in system memory.</span></span> <span data-ttu-id="9ea55-107">Lorsque l' \_ indicateur de mémoire par défaut D3DPOOL est utilisé, le pilote de périphérique détermine l’emplacement de la mémoire pour la mémoire tampon de vertex, souvent appelée mémoire optimale pour le pilote.</span><span class="sxs-lookup"><span data-stu-id="9ea55-107">When the D3DPOOL\_DEFAULT memory flag is used, the device driver determines where the memory for the vertex buffer is best allocated, often referred to as driver-optimal memory.</span></span> <span data-ttu-id="9ea55-108">La mémoire optimale pour le pilote peut être une mémoire vidéo locale, une mémoire vidéo non locale ou une mémoire système.</span><span class="sxs-lookup"><span data-stu-id="9ea55-108">Driver-optimal memory can be local video memory, nonlocal video memory, or system memory.</span></span>

<span data-ttu-id="9ea55-109">La définition de la \_ constante D3DUSAGE SOFTWAREPROCESSING avec [**IDirect3DDevice9 :: CreateVertexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createvertexbuffer) active le traitement du vertex logiciel sur les données de la mémoire tampon du vertex.</span><span class="sxs-lookup"><span data-stu-id="9ea55-109">Setting the D3DUSAGE\_SOFTWAREPROCESSING constant with [**IDirect3DDevice9::CreateVertexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createvertexbuffer) enables software vertex processing on the vertex buffer data.</span></span> <span data-ttu-id="9ea55-110">Cet indicateur est requis pour le traitement des vertex logiciels en mode mixte.</span><span class="sxs-lookup"><span data-stu-id="9ea55-110">This flag is required for software vertex processing while in mixed mode.</span></span> <span data-ttu-id="9ea55-111">L’indicateur ne peut pas être utilisé pour le mode de traitement du vertex matériel.</span><span class="sxs-lookup"><span data-stu-id="9ea55-111">The flag may not be used for hardware vertex processing mode.</span></span> <span data-ttu-id="9ea55-112">Les mémoires tampons de vertex utilisées avec le traitement du vertex logiciel sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="9ea55-112">Vertex buffers used with software vertex processing include the following:</span></span>

-   <span data-ttu-id="9ea55-113">Tous les flux d’entrée pour [**IDirect3DDevice9 ::P rocessvertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span><span class="sxs-lookup"><span data-stu-id="9ea55-113">All input streams for [**IDirect3DDevice9::ProcessVertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span></span>
-   <span data-ttu-id="9ea55-114">Tous les flux d’entrée pour [**IDirect3DDevice9 ::D rawprimitive**](/windows/desktop/api) et [**IDirect3DDevice9 ::D rawindexedprimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive).</span><span class="sxs-lookup"><span data-stu-id="9ea55-114">All input streams for [**IDirect3DDevice9::DrawPrimitive**](/windows/desktop/api) and [**IDirect3DDevice9::DrawIndexedPrimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive).</span></span>

<span data-ttu-id="9ea55-115">Le raisonnement que vous utilisez pour déterminer l’emplacement de la mémoire-système ou pilote optimal pour les mémoires tampons de vertex est le même que pour les textures.</span><span class="sxs-lookup"><span data-stu-id="9ea55-115">The reasoning you use to determine the memory location - system or driver optimal - for vertex buffers is the same as that for textures.</span></span> <span data-ttu-id="9ea55-116">Le traitement des vertex, y compris la transformation et l’éclairage, dans le matériel fonctionne mieux lorsque les tampons de vertex sont alloués dans la mémoire optimale du pilote, tandis que le traitement du vertex logiciel fonctionne mieux avec les mémoires tampons de vertex allouées dans la mémoire système.</span><span class="sxs-lookup"><span data-stu-id="9ea55-116">Vertex processing, including transformation and lighting, in hardware works best when the vertex buffers are allocated in driver-optimal memory, while software vertex processing works best with vertex buffers allocated in system memory.</span></span> <span data-ttu-id="9ea55-117">Pour les textures, la pixellisation matérielle fonctionne mieux lorsque les textures sont allouées dans la mémoire optimale du pilote, tandis que la pixellisation des logiciels fonctionne mieux avec les textures de mémoire système.</span><span class="sxs-lookup"><span data-stu-id="9ea55-117">For textures, hardware rasterization works best when textures are allocated in driver-optimal memory, while software rasterization works best with system-memory textures.</span></span>

<span data-ttu-id="9ea55-118">Microsoft Direct3D 9 prend en charge le traitement autonome des vertex, sans rendu de primitive avec la méthode [**IDirect3DDevice9 ::P rocessvertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices) .</span><span class="sxs-lookup"><span data-stu-id="9ea55-118">Microsoft Direct3D 9 supports standalone processing of vertices, without rendering any primitive with the [**IDirect3DDevice9::ProcessVertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices) method.</span></span> <span data-ttu-id="9ea55-119">Ce traitement de vertex autonome est toujours effectué dans le logiciel sur le processeur hôte.</span><span class="sxs-lookup"><span data-stu-id="9ea55-119">This standalone vertex processing is always performed in software on the host processor.</span></span> <span data-ttu-id="9ea55-120">Pour cette raison, les mémoires tampons de vertex utilisées comme sources définies avec [**IDirect3DDevice9 :: SetStreamSource**](/windows/desktop/api) doivent être créées avec l' \_ indicateur SOFTWAREPROCESSING D3DUSAGE.</span><span class="sxs-lookup"><span data-stu-id="9ea55-120">Because of this, vertex buffers used as sources set with [**IDirect3DDevice9::SetStreamSource**](/windows/desktop/api) must be created with the D3DUSAGE\_SOFTWAREPROCESSING flag.</span></span> <span data-ttu-id="9ea55-121">La fonctionnalité fournie par **IDirect3DDevice9 ::P rocessvertices** est identique à celle des méthodes [**IDirect3DDevice9 ::D rawprimitive**](/windows/desktop/api) et [**IDirect3DDevice9 ::D rawindexedprimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) lors de l’utilisation du traitement du vertex logiciel.</span><span class="sxs-lookup"><span data-stu-id="9ea55-121">The functionality provided by **IDirect3DDevice9::ProcessVertices** is identical to that of the [**IDirect3DDevice9::DrawPrimitive**](/windows/desktop/api) and [**IDirect3DDevice9::DrawIndexedPrimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) methods while using software vertex processing.</span></span>

<span data-ttu-id="9ea55-122">Si votre application effectue son propre traitement de vertex et passe des sommets transformés, allumés et découpés aux méthodes de rendu, l’application peut écrire directement des vertex dans une mémoire tampon de vertex allouée dans la mémoire optimale du pilote.</span><span class="sxs-lookup"><span data-stu-id="9ea55-122">If your application performs its own vertex processing and passes transformed, lit, and clipped vertices to rendering methods, then the application can directly write vertices to a vertex buffer allocated in driver-optimal memory.</span></span> <span data-ttu-id="9ea55-123">Cette technique empêche ultérieurement une opération de copie redondante.</span><span class="sxs-lookup"><span data-stu-id="9ea55-123">This technique prevents a redundant copy operation later.</span></span> <span data-ttu-id="9ea55-124">Notez que cette technique ne fonctionne pas correctement si votre application lit les données à partir d’une mémoire tampon de vertex, car les opérations de lecture effectuées par l’hôte à partir de la mémoire optimale du pilote peuvent être très lentes.</span><span class="sxs-lookup"><span data-stu-id="9ea55-124">Note that this technique will not work well if your application reads data back from a vertex buffer, because read operations done by the host from driver-optimal memory can be very slow.</span></span> <span data-ttu-id="9ea55-125">Par conséquent, si votre application doit lire au cours du traitement ou écrire des données dans la mémoire tampon de façon erratique, une mémoire tampon de vertex de mémoire système est un meilleur choix.</span><span class="sxs-lookup"><span data-stu-id="9ea55-125">Therefore, if your application needs to read during processing or writes data to the buffer erratically, a system-memory vertex buffer is a better choice.</span></span>

<span data-ttu-id="9ea55-126">Lors de l’utilisation des fonctionnalités de traitement du vertex Direct3D (en passant des vertex non transformés aux méthodes de rendu de la mémoire tampon de vertex), le traitement peut avoir lieu sur le matériel ou les logiciels selon le type d’appareil et les indicateurs de création de périphérique.</span><span class="sxs-lookup"><span data-stu-id="9ea55-126">When using the Direct3D vertex processing features (by passing untransformed vertices to vertex-buffer rendering methods), processing can occur in either hardware or software depending on the device type and device creation flags.</span></span> <span data-ttu-id="9ea55-127">Il est recommandé d’allouer des tampons de vertex dans le pool D3DPOOL \_ par défaut pour des performances optimales dans presque tous les cas.</span><span class="sxs-lookup"><span data-stu-id="9ea55-127">It is recommended that vertex buffers be allocated in pool D3DPOOL\_DEFAULT for best performance in virtually all cases.</span></span> <span data-ttu-id="9ea55-128">Lorsqu’un appareil utilise le traitement du vertex matériel, il existe un certain nombre d’optimisations supplémentaires qui peuvent être effectuées en fonction des indicateurs D3DUSAGE \_ dynamique et D3DUSAGE \_ WRITEONLY.</span><span class="sxs-lookup"><span data-stu-id="9ea55-128">When a device is using hardware vertex processing, there are a number of additional optimizations that may be done based on the flags D3DUSAGE\_DYNAMIC and D3DUSAGE\_WRITEONLY.</span></span> <span data-ttu-id="9ea55-129">Pour plus d’informations sur l’utilisation de ces indicateurs, consultez IDirect3DDevice9 :: CreateVertexBuffer.</span><span class="sxs-lookup"><span data-stu-id="9ea55-129">See IDirect3DDevice9::CreateVertexBuffer for more information about using these flags.</span></span>

## <a name="related-topics"></a><span data-ttu-id="9ea55-130">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="9ea55-130">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9ea55-131">Mémoires tampons de vertex</span><span class="sxs-lookup"><span data-stu-id="9ea55-131">Vertex Buffers</span></span>](vertex-buffers.md)
</dt> </dl>

 

 
