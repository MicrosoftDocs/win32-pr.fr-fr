---
description: Cette section vous montre comment utiliser des primitives d’ordre supérieur dans votre application.
ms.assetid: 7aa4f3ab-cfce-4f8f-a538-384f038fd324
title: Utilisation de primitives Higher-Order (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e8d1447635c38e5e5df3d16ebca5ee3ee142020
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104565529"
---
# <a name="using-higher-order-primitives-direct3d-9"></a><span data-ttu-id="bd096-103">Utilisation de primitives Higher-Order (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="bd096-103">Using Higher-Order Primitives (Direct3D 9)</span></span>

<span data-ttu-id="bd096-104">Cette section vous montre comment utiliser des primitives d’ordre supérieur dans votre application.</span><span class="sxs-lookup"><span data-stu-id="bd096-104">This section shows you how to use higher-order primitives in your application.</span></span>

-   [<span data-ttu-id="bd096-105">Détermination de la prise en charge de la primitive Higher-Order</span><span class="sxs-lookup"><span data-stu-id="bd096-105">Determining Higher-Order Primitive Support</span></span>](#determining-higher-order-primitive-support)
-   [<span data-ttu-id="bd096-106">Dessin des correctifs</span><span class="sxs-lookup"><span data-stu-id="bd096-106">Drawing Patches</span></span>](#drawing-patches)
-   [<span data-ttu-id="bd096-107">Génération de normales et de coordonnées de texture</span><span class="sxs-lookup"><span data-stu-id="bd096-107">Generating Normals and Texture Coordinates</span></span>](#generating-normals-and-texture-coordinates)

## <a name="determining-higher-order-primitive-support"></a><span data-ttu-id="bd096-108">Détermination de la prise en charge de la primitive Higher-Order</span><span class="sxs-lookup"><span data-stu-id="bd096-108">Determining Higher-Order Primitive Support</span></span>

<span data-ttu-id="bd096-109">Le membre DevCaps de la structure [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) peut être interrogé pour déterminer le niveau de prise en charge pour les opérations impliquant des primitives d’ordre supérieur.</span><span class="sxs-lookup"><span data-stu-id="bd096-109">The [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's DevCaps member can be queried to determine the level of support for operations involving higher-order primitives.</span></span> <span data-ttu-id="bd096-110">Le tableau suivant répertorie les fonctionnalités de l’appareil liées aux primitives d’ordre supérieur dans Direct3D 9.</span><span class="sxs-lookup"><span data-stu-id="bd096-110">The following table lists the device capabilities related to higher-order primitives in Direct3D 9.</span></span>



| <span data-ttu-id="bd096-111">Fonctionnalité d’appareil</span><span class="sxs-lookup"><span data-stu-id="bd096-111">Device capability</span></span>             | <span data-ttu-id="bd096-112">Description</span><span class="sxs-lookup"><span data-stu-id="bd096-112">Description</span></span>                                                                                                                                                  |
|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bd096-113">D3DDEVCAPS \_ NPATCHES</span><span class="sxs-lookup"><span data-stu-id="bd096-113">D3DDEVCAPS\_NPATCHES</span></span>          | <span data-ttu-id="bd096-114">L’appareil prend en charge N-patchs et est basé sur des [triangles PN incurvés](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (un type spécial de triangles de Bézier cubiques).</span><span class="sxs-lookup"><span data-stu-id="bd096-114">Device supports N-patches and is based on [Curved PN Triangles](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (a special kind of cubic Bézier triangles).</span></span> |
| <span data-ttu-id="bd096-115">D3DDEVCAPS \_ QUINTICRTPATCHES</span><span class="sxs-lookup"><span data-stu-id="bd096-115">D3DDEVCAPS\_QUINTICRTPATCHES</span></span>  | <span data-ttu-id="bd096-116">L’appareil prend en charge les courbes de Bézier quintaux et les splines B-splines.</span><span class="sxs-lookup"><span data-stu-id="bd096-116">Device supports quintic Bezier curves and B-splines.</span></span>                                                                                                         |
| <span data-ttu-id="bd096-117">D3DDEVCAPS \_ RTPATCHES</span><span class="sxs-lookup"><span data-stu-id="bd096-117">D3DDEVCAPS\_RTPATCHES</span></span>         | <span data-ttu-id="bd096-118">L’appareil prend en charge les correctifs rectangulaires et triangulaires (RT-patches).</span><span class="sxs-lookup"><span data-stu-id="bd096-118">Device supports rectangular and triangular patches (RT-patches).</span></span>                                                                                             |
| <span data-ttu-id="bd096-119">D3DDEVCAPS \_ RTPATCHHANDLEZERO</span><span class="sxs-lookup"><span data-stu-id="bd096-119">D3DDEVCAPS\_RTPATCHHANDLEZERO</span></span> | <span data-ttu-id="bd096-120">RT-les correctifs peuvent être tracés efficacement à l’aide du handle zéro.</span><span class="sxs-lookup"><span data-stu-id="bd096-120">RT-patches might be drawn efficiently using handle zero.</span></span>                                                                                                     |



 

<span data-ttu-id="bd096-121">Notez que D3DDEVCAPS \_ RTPATCHHANDLEZERO ne signifie pas qu’un correctif avec le descripteur zéro peut être dessiné.</span><span class="sxs-lookup"><span data-stu-id="bd096-121">Note that D3DDEVCAPS\_RTPATCHHANDLEZERO does not mean that a patch with handle zero can be drawn.</span></span> <span data-ttu-id="bd096-122">Un handle Zero patch peut toujours être dessiné, que cette fonctionnalité de périphérique soit définie ou non.</span><span class="sxs-lookup"><span data-stu-id="bd096-122">A handle zero patch can always be drawn, whether this device capability is set or not.</span></span> <span data-ttu-id="bd096-123">Lorsque cette fonctionnalité est définie, l’architecture matérielle ne nécessite pas la mise en cache de toutes les informations et les correctifs non mis en cache (handle zéro) sont dessinés aussi efficacement que les correctifs mis en cache.</span><span class="sxs-lookup"><span data-stu-id="bd096-123">When this capability is set, the hardware architecture does not require caching of any information and that uncached patches (handle zero) be drawn as efficiently as cached ones.</span></span>

## <a name="drawing-patches"></a><span data-ttu-id="bd096-124">Dessin des correctifs</span><span class="sxs-lookup"><span data-stu-id="bd096-124">Drawing Patches</span></span>

<span data-ttu-id="bd096-125">Direct3D 9 prend en charge deux types de primitives d’ordre supérieur ou les correctifs.</span><span class="sxs-lookup"><span data-stu-id="bd096-125">Direct3D 9 supports two types of higher-order primitives, or patches.</span></span> <span data-ttu-id="bd096-126">Ils sont appelés correctifs N-patchs et Rect/tri.</span><span class="sxs-lookup"><span data-stu-id="bd096-126">These are referred to as N-Patches and Rect/Tri patches.</span></span> <span data-ttu-id="bd096-127">N-les correctifs peuvent être rendus à l’aide de n’importe quel appel de rendu de triangle en activant N-patchs via l’appel à [**IDirect3DDevice9 :: SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)(nSegments) avec une valeur nSegments supérieure à 1,0.</span><span class="sxs-lookup"><span data-stu-id="bd096-127">N-patches can be rendered using any triangle rendering call by enabling N-patches through the call to [**IDirect3DDevice9::SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)( nSegments ) with nSegments value greater than 1.0.</span></span> <span data-ttu-id="bd096-128">Les correctifs Rect/tri doivent être rendus à l’aide des points d’entrée explicites suivants.</span><span class="sxs-lookup"><span data-stu-id="bd096-128">Rect/Tri patches must be rendered using the following explicit entry points.</span></span>

<span data-ttu-id="bd096-129">Vous pouvez utiliser les méthodes suivantes pour dessiner des correctifs.</span><span class="sxs-lookup"><span data-stu-id="bd096-129">You can use the following methods to draw patches.</span></span>

-   <span data-ttu-id="bd096-130">[**IDirect3DDevice9 ::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span><span class="sxs-lookup"><span data-stu-id="bd096-130">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span></span> <span data-ttu-id="bd096-131">Pour mieux comprendre comment les données des correctifs sont référencées dans la mémoire tampon de vertex, consultez [**D3DRECTPATCH \_ info**](d3drectpatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="bd096-131">To better understand how the patch data is referenced in the vertex buffer, see [**D3DRECTPATCH\_INFO**](d3drectpatch-info.md).</span></span>
-   <span data-ttu-id="bd096-132">[**IDirect3DDevice9 ::D rawtripatch**](/windows/desktop/api).</span><span class="sxs-lookup"><span data-stu-id="bd096-132">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api).</span></span> <span data-ttu-id="bd096-133">Pour mieux comprendre comment les données des correctifs sont référencées dans la mémoire tampon de vertex, consultez [**D3DTRIPATCH \_ info**](d3dtripatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="bd096-133">To better understand how the patch data is referenced in the vertex buffer, see [**D3DTRIPATCH\_INFO**](d3dtripatch-info.md).</span></span>

<span data-ttu-id="bd096-134">[**IDirect3DDevice9 ::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) dessine un correctif de poids fort rectangulaire spécifié par le paramètre pRectPatchInfo à l’aide des flux actuellement définis.</span><span class="sxs-lookup"><span data-stu-id="bd096-134">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) draws a rectangular high-order patch specified by the pRectPatchInfo parameter using the currently set streams.</span></span> <span data-ttu-id="bd096-135">Le paramètre descripteur est utilisé pour associer le correctif à un handle, de sorte que la prochaine fois que le correctif est dessiné, il n’est pas nécessaire de respécifier pRectPatchInfo.</span><span class="sxs-lookup"><span data-stu-id="bd096-135">The Handle parameter is used to associate the patch with a handle, so that the next time the patch is drawn, there is no need to respecify pRectPatchInfo.</span></span> <span data-ttu-id="bd096-136">Cela permet de précalculer et de mettre en cache les coefficients de différence ou d’autres informations qui, à leur tour, permettent les appels suivants à **IDirect3DDevice9 ::D rawrectpatch** utilisant le même handle pour s’exécuter efficacement.</span><span class="sxs-lookup"><span data-stu-id="bd096-136">This makes it possible to precompute and cache forward difference coefficients or other information, which in turn enables subsequent calls to **IDirect3DDevice9::DrawRectPatch** using the same handle to run efficiently.</span></span>

<span data-ttu-id="bd096-137">Il est conçu pour les correctifs statiques, une application qui définit le nuanceur de sommets et les flux appropriés, fournit des informations sur les correctifs dans le paramètre pRectPatchInfo et spécifie un descripteur afin que Direct3D puisse capturer et mettre en cache les informations.</span><span class="sxs-lookup"><span data-stu-id="bd096-137">It is intended that for static patches, an application would set the vertex shader and appropriate streams, supply patch information in the pRectPatchInfo parameter, and specify a handle so that Direct3D can capture and cache information.</span></span> <span data-ttu-id="bd096-138">L’application peut ensuite appeler [**IDirect3DDevice9 ::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) par la suite avec pRectPatchInfo défini sur la **valeur null** pour dessiner efficacement le correctif.</span><span class="sxs-lookup"><span data-stu-id="bd096-138">The application can then call [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) subsequently with pRectPatchInfo set to **NULL** to efficiently draw the patch.</span></span> <span data-ttu-id="bd096-139">Lors du dessin d’un correctif mis en cache, les flux actuellement définis sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="bd096-139">When drawing a cached patch, the currently set streams are ignored.</span></span> <span data-ttu-id="bd096-140">Toutefois, il est possible de substituer les pNumSegs mis en cache en spécifiant de nouvelles valeurs pour pNumSegs.</span><span class="sxs-lookup"><span data-stu-id="bd096-140">However, it is possible to override the cached pNumSegs by specifying new values for pNumSegs.</span></span> <span data-ttu-id="bd096-141">En outre, il est nécessaire de définir le même nuanceur vertex lors du rendu d’un correctif mis en cache tel qu’il a été défini lors de sa capture.</span><span class="sxs-lookup"><span data-stu-id="bd096-141">Also, it is required to set the same vertex shader when rendering a cached patch as was set when it was captured.</span></span>

<span data-ttu-id="bd096-142">Pour les correctifs dynamiques, les données des correctifs sont modifiées pour chaque rendu du correctif. il n’est donc pas efficace de mettre en cache les informations.</span><span class="sxs-lookup"><span data-stu-id="bd096-142">For dynamic patches, the patch data changes for every rendering of the patch, so it is not efficient to cache information.</span></span> <span data-ttu-id="bd096-143">L’application peut transmettre cela à Direct3D en affectant à handle la valeur 0.</span><span class="sxs-lookup"><span data-stu-id="bd096-143">The application can convey this to Direct3D by setting Handle to 0.</span></span> <span data-ttu-id="bd096-144">Dans ce cas, Direct3D dessine le correctif à l’aide des flux actuellement définis et des valeurs pNumSegs et ne met pas en cache les informations.</span><span class="sxs-lookup"><span data-stu-id="bd096-144">In this case, Direct3D draws the patch using the currently set streams and the pNumSegs values and does not cache any information.</span></span> <span data-ttu-id="bd096-145">Il n’est pas possible de définir simultanément un handle sur 0 et pPatch sur **null**.</span><span class="sxs-lookup"><span data-stu-id="bd096-145">It is not valid to simultaneously set Handle to 0 and pPatch to **NULL**.</span></span>

<span data-ttu-id="bd096-146">En respécifiant pRectPatchInfo pour le même handle, l’application peut remplacer les informations précédemment mises en cache.</span><span class="sxs-lookup"><span data-stu-id="bd096-146">By respecifying pRectPatchInfo for the same handle, the application can overwrite the previously cached information.</span></span>

<span data-ttu-id="bd096-147">[**IDirect3DDevice9 ::D rawtripatch**](/windows/desktop/api) est semblable à [**IDirect3DDevice9 ::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) , à ceci près qu’il dessine un correctif de poids fort triangulaire.</span><span class="sxs-lookup"><span data-stu-id="bd096-147">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api) is similar to [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) except that it draws a triangular high-order patch.</span></span>

## <a name="generating-normals-and-texture-coordinates"></a><span data-ttu-id="bd096-148">Génération de normales et de coordonnées de texture</span><span class="sxs-lookup"><span data-stu-id="bd096-148">Generating Normals and Texture Coordinates</span></span>

<span data-ttu-id="bd096-149">Si vous utilisez un nuanceur de format de vertex flexible, la génération automatique de normales et de coordonnées de texture n’est pas possible.</span><span class="sxs-lookup"><span data-stu-id="bd096-149">If you are using a flexible vertex format (FVF) shader, automatic generation of normals and texture coordinates is not possible.</span></span>

<span data-ttu-id="bd096-150">Pour les normales, vous pouvez soit les fournir directement, soit faire en sorte que Direct3D les calcule pour vous.</span><span class="sxs-lookup"><span data-stu-id="bd096-150">For normals, you can either directly supply them or have Direct3D calculate them for you.</span></span>

<span data-ttu-id="bd096-151">Les coordonnées générées pour les correctifs rectangulaires sont des coordonnées splines, comme indiqué dans les illustrations suivantes.</span><span class="sxs-lookup"><span data-stu-id="bd096-151">The coordinates generated for rectangular patches are spline-based coordinates, as shown in the following illustrations.</span></span>

![illustration d’une texture d’origine et de la texture avec des coordonnées reposant sur une spline](images/texturespline.png)

<span data-ttu-id="bd096-153">Les coordonnées générées pour les correctifs triangulaires sont des coordonnées basées sur une spline Barycentric, comme illustré dans les illustrations suivantes.</span><span class="sxs-lookup"><span data-stu-id="bd096-153">The coordinates generated for triangular patches are barycentric spline-based coordinates, as shown in the following illustrations.</span></span>

![illustration d’une texture d’origine et de la texture avec des coordonnées basées sur spline Barycentric](images/texturebarycentricspline.png)

<span data-ttu-id="bd096-155">Si une application doit modifier la plage des coordonnées de texture générées, cette opération peut être effectuée à l’aide de transformations de texture.</span><span class="sxs-lookup"><span data-stu-id="bd096-155">If an application must change the range of the generated texture coordinates, this can be done using texture transforms.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bd096-156">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="bd096-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bd096-157">Primitives d’ordre supérieur</span><span class="sxs-lookup"><span data-stu-id="bd096-157">Higher-Order Primitives</span></span>](higher-order-primitives.md)
</dt> </dl>

 

 
