---
description: Les contrôles gamma vous permettent de modifier la façon dont le système affiche le contenu de la surface, sans affecter le contenu de la surface elle-même.
ms.assetid: 74f106be-8f47-4875-9908-32ff35912968
title: Contrôles gamma (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6484bcf7e8fa5e07a3bf4bb718cd361330560f8c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104562141"
---
# <a name="gamma-controls-direct3d-9"></a><span data-ttu-id="d9847-103">Contrôles gamma (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="d9847-103">Gamma Controls (Direct3D 9)</span></span>

<span data-ttu-id="d9847-104">Les contrôles gamma vous permettent de modifier la façon dont le système affiche le contenu de la surface, sans affecter le contenu de la surface elle-même.</span><span class="sxs-lookup"><span data-stu-id="d9847-104">Gamma controls allow you to change how the system displays the contents of the surface, without affecting the contents of the surface itself.</span></span> <span data-ttu-id="d9847-105">Considérez ces contrôles comme des filtres très simples que Direct3D applique aux données lorsqu’il quitte une surface et avant qu’il ne soit rendu à l’écran.</span><span class="sxs-lookup"><span data-stu-id="d9847-105">Think of these controls as very simple filters that Direct3D applies to data as it leaves a surface and before it is rendered on the screen.</span></span>

<span data-ttu-id="d9847-106">Les contrôles gamma sont une propriété d’une chaîne de permutation.</span><span class="sxs-lookup"><span data-stu-id="d9847-106">Gamma controls are a property of a swap chain.</span></span> <span data-ttu-id="d9847-107">Les contrôles gamma permettent de modifier dynamiquement la manière dont les niveaux rouge, vert et bleu d’une surface correspondent aux niveaux réels affichés par le système.</span><span class="sxs-lookup"><span data-stu-id="d9847-107">Gamma controls make it possible to dynamically change how a surface's red, green, and blue levels map to the actual levels that the system displays.</span></span> <span data-ttu-id="d9847-108">En définissant des niveaux gamma, vous pouvez faire en sorte que l’écran de l’utilisateur clignote en rouge lorsque le caractère de l’utilisateur est capturé, en vert lorsque le caractère récupère un nouvel élément, et ainsi de suite, sans copier les nouvelles images dans la mémoire tampon de trame pour obtenir l’effet.</span><span class="sxs-lookup"><span data-stu-id="d9847-108">By setting gamma levels, you can cause the user's screen to flash colors - red when the user's character is shot, green when the character picks up a new item, and so on - without copying new images to the frame buffer to achieve the effect.</span></span> <span data-ttu-id="d9847-109">Vous pouvez également ajuster les niveaux de couleurs pour appliquer un décalage de couleur aux images de la mémoire tampon d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="d9847-109">Or, you might adjust color levels to apply a color bias to the images in the back buffer.</span></span>

<span data-ttu-id="d9847-110">Il y a toujours au moins une chaîne de permutation (la chaîne de permutation implicite) pour chaque appareil, car Direct3D 9 a une chaîne de permutation en tant que propriété de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="d9847-110">There is always at least one swap chain (the implicit swap chain) for each device because Direct3D 9 has one swap chain as a property of the device.</span></span> <span data-ttu-id="d9847-111">Étant donné que la rampe gamma est une propriété de la chaîne de permutation, la rampe gamma peut être appliquée lorsque la chaîne de permutation est fenêtre.</span><span class="sxs-lookup"><span data-stu-id="d9847-111">Because the gamma ramp is a property of the swap chain, the gamma ramp can be applied when the swap chain is windowed.</span></span> <span data-ttu-id="d9847-112">La rampe gamma prend effet immédiatement.</span><span class="sxs-lookup"><span data-stu-id="d9847-112">The gamma ramp takes effect immediately.</span></span> <span data-ttu-id="d9847-113">Aucune opération de synchronisation verticale n’est en attente.</span><span class="sxs-lookup"><span data-stu-id="d9847-113">There is no waiting for a vertical sync operation.</span></span>

<span data-ttu-id="d9847-114">Les méthodes [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) et [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) vous permettent de manipuler des niveaux de rampe qui affectent les composants de couleur rouge, vert et bleu des pixels de la surface avant qu’ils ne soient envoyés au convertisseur numérique-analogique (DAC) pour l’affichage.</span><span class="sxs-lookup"><span data-stu-id="d9847-114">The [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) and [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) methods allow you to manipulate ramp levels that affect the red, green, and blue color components of pixels from the surface before they are sent to the digital-to-analog converter (DAC) for display.</span></span>

## <a name="gamma-ramp-levels"></a><span data-ttu-id="d9847-115">Niveaux de rampe gamma</span><span class="sxs-lookup"><span data-stu-id="d9847-115">Gamma Ramp Levels</span></span>

<span data-ttu-id="d9847-116">Dans Direct3D, le terme rampe gamma décrit un ensemble de valeurs qui mappent le niveau d’un composant de couleur particulier-rouge, vert, bleu-pour tous les pixels de la mémoire tampon de trame aux nouveaux niveaux reçus par la DAC pour l’affichage.</span><span class="sxs-lookup"><span data-stu-id="d9847-116">In Direct3D, the term gamma ramp describes a set of values that map the level of a particular color component - red, green, blue - for all pixels in the frame buffer to new levels that are received by the DAC for display.</span></span> <span data-ttu-id="d9847-117">Le remappage est effectué par le biais de trois tables de recherche, une pour chaque composant de couleur.</span><span class="sxs-lookup"><span data-stu-id="d9847-117">The remapping is performed by way of three look-up tables, one for each color component.</span></span>

<span data-ttu-id="d9847-118">Voici comment cela fonctionne : Direct3D prend un pixel de la mémoire tampon de trame et évalue ses composants de couleur rouge, vert et bleu individuels.</span><span class="sxs-lookup"><span data-stu-id="d9847-118">Here's how it works: Direct3D takes a pixel from the frame buffer and evaluates its individual red, green, and blue color components.</span></span> <span data-ttu-id="d9847-119">Chaque composant est représenté par une valeur comprise entre 0 et 65535.</span><span class="sxs-lookup"><span data-stu-id="d9847-119">Each component is represented by a value from 0 to 65535.</span></span> <span data-ttu-id="d9847-120">Direct3D prend la valeur d’origine et l’utilise pour indexer un tableau de 256 éléments (rampe), où chaque élément contient une valeur qui remplace la valeur d’origine.</span><span class="sxs-lookup"><span data-stu-id="d9847-120">Direct3D takes the original value and uses it to index a 256-element array (the ramp), where each element contains a value that replaces the original one.</span></span> <span data-ttu-id="d9847-121">Direct3D effectue ce processus de recherche et de remplacement pour chaque composant de couleur de chaque pixel de la mémoire tampon de trame, modifiant ainsi les couleurs finales de tous les pixels de l’écran.</span><span class="sxs-lookup"><span data-stu-id="d9847-121">Direct3D performs this look-up and replace process for each color component of each pixel in the frame buffer, thereby changing the final colors for all the on-screen pixels.</span></span>

<span data-ttu-id="d9847-122">Il est pratique de visualiser les valeurs de rampe en les subgraphies, comme illustré dans les deux graphiques suivants.</span><span class="sxs-lookup"><span data-stu-id="d9847-122">It's handy to visualize the ramp values by graphing them, as shown in the following two graphs.</span></span> <span data-ttu-id="d9847-123">Le graphique de gauche montre une rampe qui ne modifie pas du tout les couleurs.</span><span class="sxs-lookup"><span data-stu-id="d9847-123">The left graph shows a ramp that doesn't modify colors at all.</span></span> <span data-ttu-id="d9847-124">Le graphique de droite montre une rampe qui impose un écart négatif au composant de couleur auquel elle est appliquée.</span><span class="sxs-lookup"><span data-stu-id="d9847-124">The right graph shows a ramp that imposes a negative bias to the color component to which it is applied.</span></span>

![graphiques des valeurs de rampe gamma](images/gammalv.png)

<span data-ttu-id="d9847-126">Les éléments de tableau du graphique sur la gauche contiennent des valeurs identiques à leur index-0 dans l’élément à l’index 0, et 65535 à l’index 255.</span><span class="sxs-lookup"><span data-stu-id="d9847-126">The array elements for the graph on the left contain values identical to their index - 0 in the element at index 0, and 65535 at index 255.</span></span> <span data-ttu-id="d9847-127">Ce type de rampe est la valeur par défaut, car elle ne modifie pas les valeurs d’entrée avant qu’elles ne soient affichées.</span><span class="sxs-lookup"><span data-stu-id="d9847-127">This type of ramp is the default, as it doesn't change the input values before they're displayed.</span></span> <span data-ttu-id="d9847-128">Le graphe droit fournit plus de variantes ; son rampe contient des valeurs comprises entre 0 dans le premier élément et 32768 dans le dernier élément, avec des valeurs comprises entre elles.</span><span class="sxs-lookup"><span data-stu-id="d9847-128">The right graph provides more variation; its ramp contains values that range from 0 in the first element to 32768 in the last element, with values ranging uniformly in between.</span></span> <span data-ttu-id="d9847-129">L’effet est que le composant de couleur qui utilise cette rampe apparaît en sourdine sur l’écran.</span><span class="sxs-lookup"><span data-stu-id="d9847-129">The effect is that the color component that uses this ramp appears muted on the display.</span></span> <span data-ttu-id="d9847-130">Vous n’êtes pas limité à l’utilisation de graphiques linéaires ; Si votre application peut assigner un mappage arbitraire si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="d9847-130">You are not limited to using linear graphs; if your application can assign arbitrary mapping if needed.</span></span> <span data-ttu-id="d9847-131">Vous pouvez même définir les entrées sur des zéros pour supprimer complètement un composant de couleur de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="d9847-131">You can even set the entries to all zeroes to remove a color component completely from the display.</span></span>

## <a name="setting-and-retrieving-gamma-ramp-levels"></a><span data-ttu-id="d9847-132">Définition et récupération des niveaux de rampe gamma</span><span class="sxs-lookup"><span data-stu-id="d9847-132">Setting and Retrieving Gamma Ramp Levels</span></span>

<span data-ttu-id="d9847-133">Les niveaux de rampe gamma sont des tables de recherche effectives que Direct3D utilise pour mapper les composants de couleur de la mémoire tampon de frame aux nouveaux niveaux qui seront affichés.</span><span class="sxs-lookup"><span data-stu-id="d9847-133">Gamma ramp levels are effectively look-up tables that Direct3D uses to map the frame buffer color components to new levels that will be displayed.</span></span> <span data-ttu-id="d9847-134">Vous pouvez définir et récupérer des niveaux de rampe pour la surface principale en appelant les méthodes [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) et [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) .</span><span class="sxs-lookup"><span data-stu-id="d9847-134">You can set and retrieve ramp levels for the primary surface by calling the [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) and [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) methods.</span></span> <span data-ttu-id="d9847-135">**SetGammaRamp** accepte deux paramètres et **GetGammaRamp** accepte un paramètre.</span><span class="sxs-lookup"><span data-stu-id="d9847-135">**SetGammaRamp** accepts two parameters and **GetGammaRamp** accepts one parameter.</span></span> <span data-ttu-id="d9847-136">Pour **SetGammaRamp**, le premier paramètre est D3DSGR \_ CALIBRATE ou D3DSGR \_ no \_ étalonnage.</span><span class="sxs-lookup"><span data-stu-id="d9847-136">For **SetGammaRamp**, the first parameter is either D3DSGR\_CALIBRATE or D3DSGR\_NO\_CALIBRATION.</span></span> <span data-ttu-id="d9847-137">Le deuxième paramètre, pRamp, est un pointeur vers une structure [**D3DGAMMARAMP**](d3dgammaramp.md) .</span><span class="sxs-lookup"><span data-stu-id="d9847-137">The second parameter, pRamp, is a pointer to a [**D3DGAMMARAMP**](d3dgammaramp.md) structure.</span></span> <span data-ttu-id="d9847-138">La structure **D3DGAMMARAMP** contient des tableaux de mots de 3 256 éléments, un tableau contenant chacun les rampes gamma rouge, vert et bleu.</span><span class="sxs-lookup"><span data-stu-id="d9847-138">The **D3DGAMMARAMP** structure contains three 256-element arrays of WORDs, one array each to contain the red, green, and blue gamma ramps.</span></span> <span data-ttu-id="d9847-139">**GetGammaRamp** possède un paramètre qui prend un pointeur vers un type **D3DGAMMARAMP** qui sera rempli avec la rampe gamma actuelle.</span><span class="sxs-lookup"><span data-stu-id="d9847-139">**GetGammaRamp** has one parameter that takes a pointer to a **D3DGAMMARAMP** type that will be filled with the current gamma ramp.</span></span>

<span data-ttu-id="d9847-140">Vous pouvez inclure la \_ valeur D3DSGR CALIBRATE pour le premier paramètre de [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) pour appeler le étalonnage lors de la définition de nouveaux niveaux gamma.</span><span class="sxs-lookup"><span data-stu-id="d9847-140">You can include the D3DSGR\_CALIBRATE value for the first parameter of [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) to invoke the calibrator when setting new gamma levels.</span></span> <span data-ttu-id="d9847-141">L’étalonnage des rampes gamma entraîne une surcharge de traitement et ne doit pas être utilisé fréquemment.</span><span class="sxs-lookup"><span data-stu-id="d9847-141">Calibrating gamma ramps incurs some processing overhead, and should not be used frequently.</span></span> <span data-ttu-id="d9847-142">La définition d’une rampe gamma étalonnée fournit une valeur gamma cohérente et absolue pour l’utilisateur, indépendamment de la carte graphique et du moniteur.</span><span class="sxs-lookup"><span data-stu-id="d9847-142">Setting a calibrated gamma ramp provides a consistent and absolute gamma value for the user, regardless of the display adapter and monitor.</span></span>

<span data-ttu-id="d9847-143">Tous les systèmes ne prennent pas en charge l’étalonnage gamma.</span><span class="sxs-lookup"><span data-stu-id="d9847-143">Not all systems support gamma calibration.</span></span> <span data-ttu-id="d9847-144">Pour déterminer si l’étalonnage gamma est pris en charge, appelez [**GetDeviceCaps**](/windows/desktop/api), puis examinez le membre Caps2 de la structure [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) associée après le retour de la méthode.</span><span class="sxs-lookup"><span data-stu-id="d9847-144">To determine if gamma calibration is supported, call [**GetDeviceCaps**](/windows/desktop/api), and examine the Caps2 member of the associated [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure after the method returns.</span></span> <span data-ttu-id="d9847-145">Si l' \_ indicateur de capacité D3DCAPS2 CANCALIBRATEGAMMA est présent, l’étalonnage gamma est pris en charge.</span><span class="sxs-lookup"><span data-stu-id="d9847-145">If the D3DCAPS2\_CANCALIBRATEGAMMA capability flag is present, then gamma calibration is supported.</span></span>

<span data-ttu-id="d9847-146">Lorsque vous définissez de nouveaux niveaux de rampe, gardez à l’esprit que les niveaux que vous définissez dans les tableaux sont utilisés uniquement quand votre application est en mode plein écran, en mode exclusif.</span><span class="sxs-lookup"><span data-stu-id="d9847-146">When setting new ramp levels, keep in mind that the levels you set in the arrays are only used when your application is in full-screen, exclusive mode.</span></span> <span data-ttu-id="d9847-147">Chaque fois que votre application passe en mode normal, les niveaux de rampe sont mis de côté et prennent effet à nouveau lorsque l’application rétablit le mode plein écran.</span><span class="sxs-lookup"><span data-stu-id="d9847-147">Whenever your application changes to normal mode, the ramp levels are set aside, taking effect again when the application reinstates full-screen mode.</span></span>

<span data-ttu-id="d9847-148">Si l’appareil ne prend pas en charge les rampes gamma dans le mode de présentation actuel de la chaîne de permutation (plein écran ou avec fenêtre), aucune valeur d’erreur n’est retournée.</span><span class="sxs-lookup"><span data-stu-id="d9847-148">If the device does not support gamma ramps in the swap chain's current presentation mode (full-screen or windowed), no error value is returned.</span></span> <span data-ttu-id="d9847-149">Les applications peuvent vérifier les \_ bits de capacité D3DCAPS2 FULLSCREENGAMMA et D3DCAPS2 \_ CANCALIBRATEGAMMA dans le membre Caps2 du type D3DCAPS9 pour déterminer les fonctionnalités de l’appareil et si un étalonnage est installé.</span><span class="sxs-lookup"><span data-stu-id="d9847-149">Applications can check the D3DCAPS2\_FULLSCREENGAMMA and D3DCAPS2\_CANCALIBRATEGAMMA capability bits in the Caps2 member of the D3DCAPS9 type to determine the capabilities of the device and whether a calibrator is installed.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d9847-150">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="d9847-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d9847-151">Surfaces Direct3D</span><span class="sxs-lookup"><span data-stu-id="d9847-151">Direct3D Surfaces</span></span>](direct3d-surfaces.md)
</dt> </dl>

 

 
