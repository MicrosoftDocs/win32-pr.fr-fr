---
description: En bref, l’habillage de texture modifie la façon dont Direct3D pixellise les polygones texturés à l’aide des coordonnées de texture spécifiées pour chaque vertex.
ms.assetid: 00683d3f-3e3c-4ee4-9aec-a0d7fd9c8941
title: Habillage de texture (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d7c0f8cb6d7793536999d5f3df128849572d3dd
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104521420"
---
# <a name="texture-wrapping-direct3d-9"></a><span data-ttu-id="306f9-103">Habillage de texture (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="306f9-103">Texture Wrapping (Direct3D 9)</span></span>

<span data-ttu-id="306f9-104">En bref, l’habillage de texture modifie la façon dont Direct3D pixellise les polygones texturés à l’aide des coordonnées de texture spécifiées pour chaque vertex.</span><span class="sxs-lookup"><span data-stu-id="306f9-104">In short, texture wrapping changes the basic way that Direct3D rasterizes textured polygons using the texture coordinates specified for each vertex.</span></span> <span data-ttu-id="306f9-105">Lors de la pixellisation d’un polygone, le système interpole entre les coordonnées de la texture à chacun des sommets du polygone pour déterminer les texels à utiliser pour chaque pixel du polygone.</span><span class="sxs-lookup"><span data-stu-id="306f9-105">While rasterizing a polygon, the system interpolates between the texture coordinates at each of the polygon's vertices to determine the texels that should be used for every pixel of the polygon.</span></span> <span data-ttu-id="306f9-106">Normalement, le système traite la texture comme un plan 2D, en interpolant les nouveaux texels en utilisant l’itinéraire le plus bref du point A dans une texture jusqu’au point B. Si le point A représente la position u, v (0,8, 0,1) et que le point B est à (0.1, 0.1), la ligne d’interpolation ressemble au diagramme suivant.</span><span class="sxs-lookup"><span data-stu-id="306f9-106">Normally, the system treats the texture as a 2D plane, interpolating new texels by taking the shortest route from point A within a texture to point B. If point A represents the u, v position (0.8, 0.1), and point B is at (0.1,0.1), the line of interpolation looks like the following diagram.</span></span>

![diagramme d’une ligne d’interpolation entre deux points](images/interp1.png)

<span data-ttu-id="306f9-108">Notez que la distance la plus petite entre A et B dans cette illustration s’exécute approximativement au milieu de la texture.</span><span class="sxs-lookup"><span data-stu-id="306f9-108">Note that the shortest distance between A and B in this illustration runs roughly through the middle of the texture.</span></span> <span data-ttu-id="306f9-109">L’activation de l’encapsulation de la coordonnée u ou v-texture change la façon dont Direct3D perçoit l’itinéraire le plus rapide entre les coordonnées de texture dans les directions u et v.</span><span class="sxs-lookup"><span data-stu-id="306f9-109">Enabling u-texture or v-texture coordinate wrapping changes how Direct3D perceives the shortest route between texture coordinates in the u-direction and v-direction.</span></span> <span data-ttu-id="306f9-110">Par définition, l’habillage de texture amène le rastériseur à prendre l’itinéraire le plus bref entre les jeux de coordonnées de texture, en supposant que 0,0 et 1,0 coïncident.</span><span class="sxs-lookup"><span data-stu-id="306f9-110">By definition, texture wrapping causes the rasterizer to take the shortest route between texture coordinate sets, assuming that 0.0 and 1.0 are coincident.</span></span> <span data-ttu-id="306f9-111">Le dernier bit est la partie délicate : vous pouvez imaginer que l’activation de l’habillage de texture dans une seule direction amène le système à traiter une texture comme si elle avait été entourée d’un cylindre.</span><span class="sxs-lookup"><span data-stu-id="306f9-111">The last bit is the tricky part: You can imagine that enabling texture wrapping in one direction causes the system to treat a texture as though it were wrapped around a cylinder.</span></span> <span data-ttu-id="306f9-112">Par exemple, considérons le diagramme ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="306f9-112">For example, consider the following diagram.</span></span>

![diagramme d’une texture et deux points encapsulés autour d’un cylindre](images/interp2.png)

<span data-ttu-id="306f9-114">L’illustration précédente montre comment l’habillage dans la direction u affecte la façon dont le système interpole les coordonnées de texture.</span><span class="sxs-lookup"><span data-stu-id="306f9-114">The preceding illustration shows how wrapping in the u - direction affects how the system interpolates texture coordinates.</span></span> <span data-ttu-id="306f9-115">À l’aide des mêmes points que dans l’exemple pour les textures normales, ou non encapsulées, vous pouvez voir que l’itinéraire le plus rapide entre les points A et B n’est plus au milieu de la texture. C’est à présent dans la frontière que 0,0 et 1,0 existent ensemble.</span><span class="sxs-lookup"><span data-stu-id="306f9-115">Using the same points as in the example for normal, or nonwrapped, textures, you can see that the shortest route between points A and B is no longer across the middle of the texture; it's now across the border where 0.0 and 1.0 exist together.</span></span> <span data-ttu-id="306f9-116">L’habillage dans l’axe v est similaire, à ceci près qu’il encapsule la texture autour d’un cylindre situé de son côté.</span><span class="sxs-lookup"><span data-stu-id="306f9-116">Wrapping in the v-direction is similar, except that it wraps the texture around a cylinder that is lying on its side.</span></span> <span data-ttu-id="306f9-117">L’habillage dans la direction u et la direction v est plus complexe.</span><span class="sxs-lookup"><span data-stu-id="306f9-117">Wrapping in both the u-direction and v-direction is more complex.</span></span> <span data-ttu-id="306f9-118">Dans ce cas, vous pouvez envisager la texture sous forme de tores, ou en anneau.</span><span class="sxs-lookup"><span data-stu-id="306f9-118">In this situation, you can envision the texture as a torus, or doughnut.</span></span>

<span data-ttu-id="306f9-119">L’application pratique la plus courante pour l’habillage de texture consiste à effectuer un mappage d’environnement.</span><span class="sxs-lookup"><span data-stu-id="306f9-119">The most common practical application for texture wrapping is to perform environment mapping.</span></span> <span data-ttu-id="306f9-120">En règle générale, un objet texturé avec une carte d’environnement apparaît très réfléchissant, affichant une image en miroir de l’environnement de l’objet dans la scène.</span><span class="sxs-lookup"><span data-stu-id="306f9-120">Usually, an object textured with an environment map appears very reflective, showing a mirrored image of the object's surroundings in the scene.</span></span> <span data-ttu-id="306f9-121">Pour les besoins de cette discussion, Imaginez une salle avec quatre murs, chacun peint avec une lettre R, G, B, Y et les couleurs correspondantes : rouge, vert, bleu et jaune.</span><span class="sxs-lookup"><span data-stu-id="306f9-121">For the sake of this discussion, picture a room with four walls, each one painted with a letter R, G, B, Y and the corresponding colors: red, green, blue, and yellow.</span></span> <span data-ttu-id="306f9-122">La carte d’environnement pour une salle de ce type peut se présenter comme dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="306f9-122">The environment map for such a simple room might look like the following illustration.</span></span>

![illustration de rayures verticales de rouge, vert, bleu et jaune](images/envmap.png)

<span data-ttu-id="306f9-124">Imaginez que le plafond de la pièce est maintenu par un pilier parfaitement réfléchissant et à quatre côtés.</span><span class="sxs-lookup"><span data-stu-id="306f9-124">Imagine that the room's ceiling is held up by a perfectly reflective, four-sided, pillar.</span></span> <span data-ttu-id="306f9-125">Le mappage de la texture de la carte de l’environnement au pilier est simple ; le fait de donner au pilier la même chose qu’il reflète les lettres et les couleurs n’est pas aussi simple.</span><span class="sxs-lookup"><span data-stu-id="306f9-125">Mapping the environment map texture to the pillar is simple; making the pillar look as though it is reflecting the letters and colors is not as easy.</span></span> <span data-ttu-id="306f9-126">Le diagramme suivant montre une trame de câble du pilier avec les coordonnées de texture applicables figurant près des sommets supérieurs.</span><span class="sxs-lookup"><span data-stu-id="306f9-126">The following diagram shows a wire frame of the pillar with the applicable texture coordinates listed near the top vertices.</span></span> <span data-ttu-id="306f9-127">La jointure dans laquelle le renvoi à la ligne franchira les bords de la texture est indiquée par une ligne en pointillés.</span><span class="sxs-lookup"><span data-stu-id="306f9-127">The seam where wrapping will cross the edges of the texture is shown with a dotted line.</span></span>

![diagramme d’un rectangle avec une ligne en pointillés bisectée](images/seam.png)

<span data-ttu-id="306f9-129">Lorsque l’habillage est activé dans la direction u, le pilier texturé affiche les couleurs et les symboles de la carte de l’environnement de manière appropriée et, à la couture au début de la texture, le rastériseur choisit correctement l’itinéraire le plus bref entre les coordonnées de la texture, en supposant que les coordonnées u 0,0 et 1,0 partagent le même emplacement.</span><span class="sxs-lookup"><span data-stu-id="306f9-129">With wrapping enabled in the u-direction, the textured pillar shows the colors and symbols from the environment map appropriately and, at the seam in the front of the texture, the rasterizer properly chooses the shortest route between the texture coordinates, assuming that u-coordinates 0.0 and 1.0 share the same location.</span></span> <span data-ttu-id="306f9-130">Le pilier texturé ressemble à l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="306f9-130">The textured pillar looks like the following illustration.</span></span>

![illustration d’un pilier constitué de quadrants rouge, vert, bleu et jaune](images/tex-seam.png)

<span data-ttu-id="306f9-132">Si l’habillage de texture n’est pas activé, le rastériseur n’effectue pas d’interpolation dans la direction nécessaire pour générer une image réfléchie et incroyable.</span><span class="sxs-lookup"><span data-stu-id="306f9-132">If texture wrapping isn't enabled, the rasterizer does not interpolate in the direction needed to generate a believable, reflected image.</span></span> <span data-ttu-id="306f9-133">Au lieu de cela, la zone au début du pilier contient une version compressée horizontalement des texels entre les coordonnées u-0,175 et 0,875, lorsqu’elles passent par le centre de la texture.</span><span class="sxs-lookup"><span data-stu-id="306f9-133">Rather, the area at the front of the pillar contains a horizontally compressed version of the texels between u-coordinates 0.175 and 0.875, as they pass through the center of the texture.</span></span> <span data-ttu-id="306f9-134">L’effet de retour à la ligne est détruit.</span><span class="sxs-lookup"><span data-stu-id="306f9-134">The wrap effect is ruined.</span></span>

## <a name="using-texture-wrapping"></a><span data-ttu-id="306f9-135">Utilisation de l’habillage de texture</span><span class="sxs-lookup"><span data-stu-id="306f9-135">Using Texture Wrapping</span></span>

<span data-ttu-id="306f9-136">Pour activer l’encapsulation de texture, appelez la méthode [**IDirect3DDevice9 :: SetRenderState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) comme indiqué dans l’exemple de code ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="306f9-136">To enable texture wrapping, call the [**IDirect3DDevice9::SetRenderState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) method as shown in the code example below.</span></span>


```
d3dDevice->SetRenderState(D3DRS_WRAP0, D3DWRAPCOORD_0);
```



<span data-ttu-id="306f9-137">Le premier paramètre accepté par [**IDirect3DDevice9 :: SetRenderState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) est un état de rendu à définir.</span><span class="sxs-lookup"><span data-stu-id="306f9-137">The first parameter accepted by [**IDirect3DDevice9::SetRenderState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) is a render state to set.</span></span> <span data-ttu-id="306f9-138">Spécifiez l’un des D3DRS \_ WRAP0 à l’aide de \_ valeurs énumérées D3DRS WRAP7 qui spécifient le niveau de texture pour lequel le renvoi à la valeur doit être défini.</span><span class="sxs-lookup"><span data-stu-id="306f9-138">Specify one of the D3DRS\_WRAP0 through D3DRS\_WRAP7 enumerated values which specify which texture level to set the wrapping for.</span></span> <span data-ttu-id="306f9-139">Spécifiez les \_ indicateurs D3DWRAPCOORD 0 à D3DWRAPCOORD \_ 3 dans le second paramètre pour activer l’habillage de la texture dans la direction correspondante, ou combinez-les pour activer le retour à la position dans plusieurs directions.</span><span class="sxs-lookup"><span data-stu-id="306f9-139">Specify the D3DWRAPCOORD\_0 through D3DWRAPCOORD\_3 flags in the second parameter to enable texture wrapping in the corresponding direction, or combine them to enable wrapping in multiple directions.</span></span> <span data-ttu-id="306f9-140">Si vous omettez un indicateur, l’habillage de texture dans la direction correspondante est désactivé.</span><span class="sxs-lookup"><span data-stu-id="306f9-140">If you omit a flag, texture wrapping in the corresponding direction is disabled.</span></span> <span data-ttu-id="306f9-141">Pour désactiver l’habillage de texture pour un ensemble de coordonnées de texture, affectez la valeur 0 à l’état de rendu correspondant.</span><span class="sxs-lookup"><span data-stu-id="306f9-141">To disable texture wrapping for a set of texture coordinates, set the value for the corresponding render state to 0.</span></span>

<span data-ttu-id="306f9-142">Ne confondez pas l’habillage de texture avec les modes d’adressage de texture nommés de la même façon.</span><span class="sxs-lookup"><span data-stu-id="306f9-142">Do not confuse texture wrapping with the similarly named texture addressing modes.</span></span> <span data-ttu-id="306f9-143">L’habillage de texture est effectué avant l’adressage de texture.</span><span class="sxs-lookup"><span data-stu-id="306f9-143">Texture wrapping is performed before texture addressing.</span></span> <span data-ttu-id="306f9-144">Veillez à ce que les données d’habillage de texture ne contiennent pas de coordonnées de texture en dehors de la plage \[ 0,0, 1,0, \] car cela produira des résultats indéfinis.</span><span class="sxs-lookup"><span data-stu-id="306f9-144">Be sure the texture wrapping data does not contain any texture coordinates outside of the range of \[0.0, 1.0\] because this will produce undefined results.</span></span> <span data-ttu-id="306f9-145">Pour plus d’informations sur l’adressage des textures, consultez [modes d’adressage des textures (Direct3D 9)](texture-addressing-modes.md).</span><span class="sxs-lookup"><span data-stu-id="306f9-145">For more information about texture addressing, see [Texture Addressing Modes (Direct3D 9)](texture-addressing-modes.md).</span></span>

## <a name="displacement-map-wrapping"></a><span data-ttu-id="306f9-146">Habillage de la carte de déplacement</span><span class="sxs-lookup"><span data-stu-id="306f9-146">Displacement Map Wrapping</span></span>

<span data-ttu-id="306f9-147">Les mappages de déplacement sont interpolés par le moteur géométrique.</span><span class="sxs-lookup"><span data-stu-id="306f9-147">Displacement maps are interpolated by the tesselation engine.</span></span> <span data-ttu-id="306f9-148">Étant donné que le mode habillage ne peut pas être spécifié pour le moteur de polygonalisation, l’habillage de texture ne peut pas être effectué avec les mappages de déplacement.</span><span class="sxs-lookup"><span data-stu-id="306f9-148">Because the wrap mode cannot be specified for the tessellation engine, texture wrapping cannot be performed with displacement maps.</span></span> <span data-ttu-id="306f9-149">Une application peut utiliser un ensemble de vertex qui force l’interpolation à s’encapsuler dans n’importe quelle direction.</span><span class="sxs-lookup"><span data-stu-id="306f9-149">An application is able to use a set of vertices that forces the interpolation to wrap in any direction.</span></span> <span data-ttu-id="306f9-150">L’application peut également spécifier l’interpolation à effectuer en tant qu’interpolation linéaire simple.</span><span class="sxs-lookup"><span data-stu-id="306f9-150">The application can also specify the interpolation to be done as a simple linear interpolation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="306f9-151">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="306f9-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="306f9-152">Textures Direct3D</span><span class="sxs-lookup"><span data-stu-id="306f9-152">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
