---
description: La gestion de texture est le processus qui consiste à déterminer les textures nécessaires au rendu à un moment donné et à s’assurer que ces textures sont chargées dans la mémoire vidéo.
ms.assetid: ea6d64ee-f570-49eb-b5fd-67fcde3f8ddc
title: Gestion automatique de la texture (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d0eb14eede197661bc127a062229ebed31274ae8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103861542"
---
# <a name="automatic-texture-management-direct3d-9"></a><span data-ttu-id="667f1-103">Gestion automatique de la texture (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="667f1-103">Automatic Texture Management (Direct3D 9)</span></span>

<span data-ttu-id="667f1-104">La gestion de texture est le processus qui consiste à déterminer les textures nécessaires au rendu à un moment donné et à s’assurer que ces textures sont chargées dans la mémoire vidéo.</span><span class="sxs-lookup"><span data-stu-id="667f1-104">Texture management is the process of determining which textures are needed for rendering at a given time and ensuring that those textures are loaded into video memory.</span></span> <span data-ttu-id="667f1-105">Comme pour n’importe quel algorithme, les schémas de gestion de texture varient en fonction de la complexité, mais toute approche de la gestion de texture implique les tâches clés suivantes.</span><span class="sxs-lookup"><span data-stu-id="667f1-105">As with any algorithm, texture management schemes vary in complexity, but any approach to texture management involves the following key tasks.</span></span>

-   <span data-ttu-id="667f1-106">Suivi de la quantité de mémoire de texture disponible.</span><span class="sxs-lookup"><span data-stu-id="667f1-106">Tracking the amount of available texture memory.</span></span>
-   <span data-ttu-id="667f1-107">Calcul des textures nécessaires pour le rendu, et qui ne le sont pas.</span><span class="sxs-lookup"><span data-stu-id="667f1-107">Calculating which textures are needed for rendering, and which are not.</span></span>
-   <span data-ttu-id="667f1-108">Détermination des ressources de texture existantes qui peuvent être rechargées avec une autre image de texture, et quelles surfaces doivent être détruites et remplacées par de nouvelles ressources de texture.</span><span class="sxs-lookup"><span data-stu-id="667f1-108">Determining which existing texture resources can be reloaded with another texture image, and which surfaces should be destroyed and replaced with new texture resources.</span></span>

<span data-ttu-id="667f1-109">Direct3D implémente la gestion des textures prise en charge par le système pour s’assurer que les textures sont chargées pour des performances optimales.</span><span class="sxs-lookup"><span data-stu-id="667f1-109">Direct3D implements system-supported texture management to ensure that textures are loaded for optimal performance.</span></span> <span data-ttu-id="667f1-110">Les ressources de texture que Direct3D gère sont appelées textures gérées.</span><span class="sxs-lookup"><span data-stu-id="667f1-110">Texture resources that Direct3D manages are referred to as managed textures.</span></span>

<span data-ttu-id="667f1-111">Le gestionnaire de texture effectue le suivi des textures avec un horodatage qui identifie le moment où la texture a été utilisée pour la dernière fois.</span><span class="sxs-lookup"><span data-stu-id="667f1-111">The texture manager tracks textures with a time-stamp that identifies when the texture was last used.</span></span> <span data-ttu-id="667f1-112">Il utilise ensuite un algorithme utilisé le moins récemment pour déterminer les textures à supprimer.</span><span class="sxs-lookup"><span data-stu-id="667f1-112">It then uses a least-recently-used algorithm to determine which textures should be removed.</span></span> <span data-ttu-id="667f1-113">Les priorités de texture sont utilisées comme séparateurs de liaison lorsque deux textures sont destinées à être supprimées de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="667f1-113">Texture priorities are used as tie breakers when two textures are targeted for removal from memory.</span></span> <span data-ttu-id="667f1-114">Si deux textures ont la même valeur de priorité, la texture utilisée le moins récemment est supprimée.</span><span class="sxs-lookup"><span data-stu-id="667f1-114">If two textures have the same priority value, the least-recently-used texture is removed.</span></span> <span data-ttu-id="667f1-115">Toutefois, si deux textures ont le même horodatage, la texture qui a une priorité inférieure est supprimée en premier.</span><span class="sxs-lookup"><span data-stu-id="667f1-115">However, if two textures have the same time-stamp, the texture that has a lower priority is removed first.</span></span>

<span data-ttu-id="667f1-116">Vous demandez une gestion automatique de la texture pour les surfaces de texture lorsque vous les créez.</span><span class="sxs-lookup"><span data-stu-id="667f1-116">You request automatic texture management for texture surfaces when you create them.</span></span> <span data-ttu-id="667f1-117">Pour récupérer une texture managée dans une application C++, créez une ressource de texture en appelant [**IDirect3DDevice9 :: CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) et en spécifiant le D3DPOOL \_ géré pour le paramètre de pool.</span><span class="sxs-lookup"><span data-stu-id="667f1-117">To retrieve a managed texture in a C++ application, create a texture resource by calling [**IDirect3DDevice9::CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) and specifying the D3DPOOL\_MANAGED for the Pool parameter.</span></span> <span data-ttu-id="667f1-118">Vous n’êtes pas autorisé à spécifier l’endroit où vous souhaitez créer la texture.</span><span class="sxs-lookup"><span data-stu-id="667f1-118">You are not allowed to specify where you want the texture created.</span></span> <span data-ttu-id="667f1-119">Vous ne pouvez pas utiliser les \_ indicateurs D3DPOOL par défaut ou D3DPOOL \_ SYSTEMMEM lors de la création d’une texture managée.</span><span class="sxs-lookup"><span data-stu-id="667f1-119">You cannot use the D3DPOOL\_DEFAULT or D3DPOOL\_SYSTEMMEM flags when creating a managed texture.</span></span> <span data-ttu-id="667f1-120">Après avoir créé la texture managée, vous pouvez appeler la méthode [**IDirect3DDevice9 :: SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) pour lui affecter une étape dans la texture de texture de l’appareil de rendu.</span><span class="sxs-lookup"><span data-stu-id="667f1-120">After creating the managed texture, you can call the [**IDirect3DDevice9::SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) method to set it to a stage in the rendering device's texture cascade.</span></span>

<span data-ttu-id="667f1-121">Vous pouvez affecter une priorité aux textures gérées en appelant la méthode [**IDirect3DResource9 :: SetPriority**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) pour la surface de texture.</span><span class="sxs-lookup"><span data-stu-id="667f1-121">You can assign a priority to managed textures by calling the [**IDirect3DResource9::SetPriority**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) method for the texture surface.</span></span>

<span data-ttu-id="667f1-122">Direct3D télécharge automatiquement les textures dans la mémoire vidéo en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="667f1-122">Direct3D automatically downloads textures into video memory as needed.</span></span> <span data-ttu-id="667f1-123">Le système peut mettre en cache des textures gérées dans la mémoire vidéo locale ou non locale, en fonction de la disponibilité de la mémoire vidéo non locale ou d’autres facteurs.</span><span class="sxs-lookup"><span data-stu-id="667f1-123">The system might cache managed textures in local or nonlocal video memory, depending on the availability of nonlocal video memory or other factors.</span></span> <span data-ttu-id="667f1-124">L’emplacement du cache de vos Textures gérées n’est pas communiqué à votre application, et ces informations ne sont pas requises pour utiliser la gestion automatique de la texture.</span><span class="sxs-lookup"><span data-stu-id="667f1-124">The cache location of your managed textures is not communicated to your application, nor is this information required to use automatic texture management.</span></span> <span data-ttu-id="667f1-125">Si votre application utilise plus de textures que la mémoire vidéo ne peut en contenir, Direct3D supprime les textures plus anciennes de la mémoire vidéo pour libérer de l’espace pour les nouvelles textures.</span><span class="sxs-lookup"><span data-stu-id="667f1-125">If your application uses more textures than can fit in video memory, Direct3D removes older textures from video memory to make room for the new textures.</span></span> <span data-ttu-id="667f1-126">Si vous réutilisez une texture supprimée, le système utilise la surface d’origine de la texture de mémoire système pour recharger la texture dans le cache de la mémoire vidéo.</span><span class="sxs-lookup"><span data-stu-id="667f1-126">If you use a removed texture again, the system uses the original system-memory texture surface to reload the texture in the video-memory cache.</span></span> <span data-ttu-id="667f1-127">Même si le rechargement de la texture est nécessaire, elle réduit également les performances de l’application.</span><span class="sxs-lookup"><span data-stu-id="667f1-127">Although reloading the texture is necessary, it also decreases the application's performance.</span></span>

<span data-ttu-id="667f1-128">Vous pouvez modifier dynamiquement la copie mémoire système d’origine de la texture en mettant à jour ou en verrouillant la ressource de texture.</span><span class="sxs-lookup"><span data-stu-id="667f1-128">You can dynamically modify the original system-memory copy of the texture by updating or locking the texture resource.</span></span> <span data-ttu-id="667f1-129">Lorsque le système détecte une surface incorrecte, après qu’une mise à jour est terminée ou lorsque la surface est déverrouillée, le gestionnaire de texture met automatiquement à jour la copie de la mémoire vidéo de la texture.</span><span class="sxs-lookup"><span data-stu-id="667f1-129">When the system detects a dirty surface - after an update is completed, or when the surface is unlocked - the texture manager automatically updates the video-memory copy of the texture.</span></span> <span data-ttu-id="667f1-130">Le gain de performance entraîné est semblable au rechargement d’une texture supprimée.</span><span class="sxs-lookup"><span data-stu-id="667f1-130">The performance hit incurred is similar to reloading a removed texture.</span></span>

<span data-ttu-id="667f1-131">Lorsque vous entrez un nouveau niveau dans un jeu, votre application peut avoir besoin de vider toutes les textures gérées de la mémoire vidéo (en appelant [**IDirect3DDevice9 :: EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span><span class="sxs-lookup"><span data-stu-id="667f1-131">When entering a new level in a game, your application might need to flush all managed textures from video memory (by calling [**IDirect3DDevice9::EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span></span>

<span data-ttu-id="667f1-132">Pour plus d’informations sur la gestion des ressources, consultez [gestion des ressources (Direct3D 9)](managing-resources.md).</span><span class="sxs-lookup"><span data-stu-id="667f1-132">For more information about resource management, see [Managing Resources (Direct3D 9)](managing-resources.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="667f1-133">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="667f1-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="667f1-134">Textures Direct3D</span><span class="sxs-lookup"><span data-stu-id="667f1-134">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
