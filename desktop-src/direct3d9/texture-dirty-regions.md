---
description: Les applications peuvent optimiser le sous-ensemble d’une texture qui est copiée en spécifiant &\# 0034 ; sale&\# 0034 ; régions sur les textures.
ms.assetid: 102081bc-d5d5-4ec1-b935-00d4eda8f470
title: Régions de modification de texture (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35e3f1ce350a2728c99c49455b5fb8b638c47d10
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "106515746"
---
# <a name="texture-dirty-regions-direct3d-9"></a><span data-ttu-id="f63fe-103">Régions de modification de texture (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="f63fe-103">Texture Dirty Regions (Direct3D 9)</span></span>

<span data-ttu-id="f63fe-104">Les applications peuvent optimiser le sous-ensemble d’une texture qui est copiée en spécifiant des régions « modifiées » sur les textures.</span><span class="sxs-lookup"><span data-stu-id="f63fe-104">Applications can optimize which subset of a texture is copied by specifying "dirty" regions on textures.</span></span> <span data-ttu-id="f63fe-105">Seules les régions marquées comme modifiées sont copiées par un appel à [**IDirect3DDevice9 :: UpdateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture).</span><span class="sxs-lookup"><span data-stu-id="f63fe-105">Only those regions marked as dirty are copied by a call to [**IDirect3DDevice9::UpdateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture).</span></span> <span data-ttu-id="f63fe-106">Toutefois, les régions modifiées peuvent être développées pour optimiser l’alignement.</span><span class="sxs-lookup"><span data-stu-id="f63fe-106">However, the dirty regions may be expanded to optimize alignment.</span></span> <span data-ttu-id="f63fe-107">Quand une texture est créée, la texture entière est considérée comme modifiée.</span><span class="sxs-lookup"><span data-stu-id="f63fe-107">When a texture is created, the entire texture is considered dirty.</span></span> <span data-ttu-id="f63fe-108">Seules les opérations suivantes affectent l’état de modification d’une texture :</span><span class="sxs-lookup"><span data-stu-id="f63fe-108">Only the following operations affect the dirty state of a texture:</span></span>

-   <span data-ttu-id="f63fe-109">Ajout d’une région modifiée à une texture.</span><span class="sxs-lookup"><span data-stu-id="f63fe-109">Adding a dirty region to a texture.</span></span>
-   <span data-ttu-id="f63fe-110">Verrouillage d’une mémoire tampon dans la texture.</span><span class="sxs-lookup"><span data-stu-id="f63fe-110">Locking some buffer in the texture.</span></span> <span data-ttu-id="f63fe-111">Cette opération ajoute la région verrouillée en tant que région modifiée.</span><span class="sxs-lookup"><span data-stu-id="f63fe-111">This operation adds the locked region as a dirty region.</span></span> <span data-ttu-id="f63fe-112">L’application peut désactiver cette mise à jour automatique de la région de modification s’il a une meilleure connaissance des régions de modification réelles.</span><span class="sxs-lookup"><span data-stu-id="f63fe-112">The application can turn off this automatic dirty region update if it has better knowledge of the actual dirty regions.</span></span>
-   <span data-ttu-id="f63fe-113">L’utilisation d’un niveau de surface de la texture comme destination dans [**IDirect3DDevice9 :: UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface) marque l’intégralité de la texture comme étant modifiée.</span><span class="sxs-lookup"><span data-stu-id="f63fe-113">Using a surface level of the texture as a destination in [**IDirect3DDevice9::UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface) marks the entire texture as dirty.</span></span>
-   <span data-ttu-id="f63fe-114">L’utilisation de la texture comme source dans [**IDirect3DDevice9 :: UpdateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture) efface toutes les régions modifiées sur la texture source.</span><span class="sxs-lookup"><span data-stu-id="f63fe-114">Using the texture as a source in [**IDirect3DDevice9::UpdateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture) clears all the dirty regions on the source texture.</span></span>
-   <span data-ttu-id="f63fe-115">Utilisation de [**IDirect3DSurface9 :: GetDC**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dsurface9-getdc) pour retourner un contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="f63fe-115">Using [**IDirect3DSurface9::GetDC**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dsurface9-getdc) to return a device context.</span></span>
-   <span data-ttu-id="f63fe-116">L’appel de [**IDirect3DBaseTexture9 :: GenerateMipSubLevels**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-generatemipsublevels) marque l’intégralité de la texture comme étant modifiée.</span><span class="sxs-lookup"><span data-stu-id="f63fe-116">Calling [**IDirect3DBaseTexture9::GenerateMipSubLevels**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-generatemipsublevels) marks the entire texture as dirty.</span></span>
-   <span data-ttu-id="f63fe-117">L’appel de [**IDirect3DBaseTexture9 :: SetAutoGenFilterType**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-setautogenfiltertype) marque l’intégralité de la texture comme étant modifiée.</span><span class="sxs-lookup"><span data-stu-id="f63fe-117">Calling [**IDirect3DBaseTexture9::SetAutoGenFilterType**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-setautogenfiltertype) marks the entire texture as dirty.</span></span>

<span data-ttu-id="f63fe-118">Les régions modifiées sont définies au niveau supérieur d’une texture mipmapped et [**IDirect3DDevice9 :: UpdateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture) peut développer la région modifiée vers le haut de la chaîne MIP afin de réduire le nombre d’octets copiés pour chaque sous-niveau.</span><span class="sxs-lookup"><span data-stu-id="f63fe-118">Dirty regions are set on the top level of a mipmapped texture, and [**IDirect3DDevice9::UpdateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture) can expand the dirty region down the mip chain in order to minimize the number of bytes copied for each sublevel.</span></span> <span data-ttu-id="f63fe-119">Notez que les coordonnées de la région de modification de niveau inférieur sont arrondies vers l’extérieur, c’est-à-dire que leurs parties fractionnaires sont arrondies vers le bord le plus proche de la texture.</span><span class="sxs-lookup"><span data-stu-id="f63fe-119">Note that the sublevel dirty region coordinates are rounded outward, that is, their fractional parts are rounded toward the nearest edge of the texture.</span></span>

<span data-ttu-id="f63fe-120">Étant donné que chaque type de texture a des types différents de régions modifiées, il existe des méthodes sur chaque type de texture.</span><span class="sxs-lookup"><span data-stu-id="f63fe-120">Because each type of texture has different types of dirty regions, there are methods on each texture type.</span></span> <span data-ttu-id="f63fe-121">les textures 2D utilisent le rectangle sale et les zones d’utilisation des textures de volume.</span><span class="sxs-lookup"><span data-stu-id="f63fe-121">2D textures use dirty rectangle, and volume textures use boxes.</span></span>

-   [<span data-ttu-id="f63fe-122">**IDirect3DCubeTexture9::AddDirtyRect**</span><span class="sxs-lookup"><span data-stu-id="f63fe-122">**IDirect3DCubeTexture9::AddDirtyRect**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dcubetexture9-adddirtyrect)
-   [<span data-ttu-id="f63fe-123">**IDirect3DTexture9::AddDirtyRect**</span><span class="sxs-lookup"><span data-stu-id="f63fe-123">**IDirect3DTexture9::AddDirtyRect**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dtexture9-adddirtyrect)
-   [<span data-ttu-id="f63fe-124">**IDirect3DVolumeTexture9::AddDirtyBox**</span><span class="sxs-lookup"><span data-stu-id="f63fe-124">**IDirect3DVolumeTexture9::AddDirtyBox**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dvolumetexture9-adddirtybox)

<span data-ttu-id="f63fe-125">Si vous transmettez la **valeur null** pour les paramètres PDirtyRect ou pDirtyBox des méthodes ci-dessus, la zone modifiée est développée pour couvrir la texture entière.</span><span class="sxs-lookup"><span data-stu-id="f63fe-125">Passing **NULL** for the pDirtyRect or pDirtyBox parameters for the above methods expands the dirty region to cover the entire texture.</span></span>

<span data-ttu-id="f63fe-126">Chaque méthode de verrouillage peut prendre \_ D3DLOCK \_ aucune \_ mise à jour incorrecte, ce qui empêche toute modification de l’état de modification de la texture.</span><span class="sxs-lookup"><span data-stu-id="f63fe-126">Each lock method can take D3DLOCK\_NO\_DIRTY\_UPDATE, which prevents any changes to the dirty state of the texture.</span></span> <span data-ttu-id="f63fe-127">Pour plus d’informations, consultez [verrouillage des ressources (Direct3D 9)](locking-resources.md).</span><span class="sxs-lookup"><span data-stu-id="f63fe-127">For more information, see [Locking Resources (Direct3D 9)](locking-resources.md).</span></span>

<span data-ttu-id="f63fe-128">Lorsque des informations sur l’ensemble réel des régions modifiées pendant une opération de verrouillage sont disponibles, les applications doivent utiliser D3DLOCK \_ aucune \_ \_ mise à jour incorrecte.</span><span class="sxs-lookup"><span data-stu-id="f63fe-128">When more information about the true set of regions that are changed during a lock operation is available, applications should use D3DLOCK\_NO\_DIRTY\_UPDATE.</span></span> <span data-ttu-id="f63fe-129">Notez qu’un verrou ou une copie vers un sous-niveau de texture uniquement (autrement dit, sans verrouillage ou copie au niveau supérieur) ne met pas à jour les régions modifiées pour cette texture.</span><span class="sxs-lookup"><span data-stu-id="f63fe-129">Note that a lock or a copy to a texture sublevel only (that is, without locking or copying to the top level) does not update the dirty regions for that texture.</span></span> <span data-ttu-id="f63fe-130">Les applications assument la même responsabilité pour la mise à jour des régions modifiées lorsqu’elles verrouillent des niveaux inférieurs sans verrouiller le niveau le plus élevé.</span><span class="sxs-lookup"><span data-stu-id="f63fe-130">Applications assume the same responsibility for updating dirty regions when they lock lower levels without locking the topmost level.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f63fe-131">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f63fe-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f63fe-132">Concepts de base de la texturation</span><span class="sxs-lookup"><span data-stu-id="f63fe-132">Basic Texturing Concepts</span></span>](basic-texturing-concepts.md)
</dt> </dl>

 

 
