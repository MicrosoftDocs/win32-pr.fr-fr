---
description: Les textures traditionnelles sont considérées comme des textures à un seul élément.
ms.assetid: 8fe8da80-0879-413a-a7db-617d2f558b28
title: Textures à plusieurs éléments (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 78a434d1e6c6a892c794551aa0caf34890f3def9
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "106513090"
---
# <a name="multiple-element-textures-direct3d-9"></a><span data-ttu-id="484fc-103">Textures à plusieurs éléments (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="484fc-103">Multiple-element Textures (Direct3D 9)</span></span>

<span data-ttu-id="484fc-104">Les textures traditionnelles sont considérées comme des textures à un seul élément.</span><span class="sxs-lookup"><span data-stu-id="484fc-104">Traditional textures are considered to be single-element textures.</span></span> <span data-ttu-id="484fc-105">Les textures à plusieurs éléments permettent aux applications d’écrire simultanément sur plusieurs éléments d’une texture à partir du nuanceur de pixels.</span><span class="sxs-lookup"><span data-stu-id="484fc-105">Multiple-element textures enable applications to write simultaneously to multiple elements of a texture from the pixel shader.</span></span> <span data-ttu-id="484fc-106">Le résultat de la prochaine passe de rendu est qu’une application peut utiliser un ou plusieurs des éléments comme une texture à un seul élément, c’est-à-dire en tant qu’entrées dans le nuanceur de pixels.</span><span class="sxs-lookup"><span data-stu-id="484fc-106">The result in the next rendering pass is that an application can use one or more of the elements as a single-element texture - that is, as inputs to the pixel shader.</span></span> <span data-ttu-id="484fc-107">Ces éléments supplémentaires peuvent être considérés comme un magasin temporaire pour les résultats intermédiaires qui seront utilisés ultérieurement par l’application.</span><span class="sxs-lookup"><span data-stu-id="484fc-107">These additional elements can be thought of as a temporary store for intermediate results that will be used in a later pass by the application.</span></span>

<span data-ttu-id="484fc-108">La première génération de matériel qui expose cette fonctionnalité présente les restrictions suivantes :</span><span class="sxs-lookup"><span data-stu-id="484fc-108">The first generation of hardware that exposes this feature has the following restrictions:</span></span>

-   <span data-ttu-id="484fc-109">Toutes les surfaces de texture à plusieurs éléments sont automatiquement allouées.</span><span class="sxs-lookup"><span data-stu-id="484fc-109">All multiple-element texture surfaces will be allocated automatically.</span></span> <span data-ttu-id="484fc-110">Cette limitation est traitée en traitant cela comme un nouveau type de format de surface avec plusieurs canaux RVBA entrelacés.</span><span class="sxs-lookup"><span data-stu-id="484fc-110">This limitation is addressed by treating this as a new type of surface format with multiple RGBA channels interleaved.</span></span>
-   <span data-ttu-id="484fc-111">Tous les éléments de la texture à éléments multiples peuvent avoir la même profondeur de bit.</span><span class="sxs-lookup"><span data-stu-id="484fc-111">All elements of the multiple element texture can have the same bit depth.</span></span> <span data-ttu-id="484fc-112">Cette limitation est exprimée par le nom des nouveaux formats de surface.</span><span class="sxs-lookup"><span data-stu-id="484fc-112">This limitation is expressed by the name of the new surface formats.</span></span>
-   <span data-ttu-id="484fc-113">Une texture à plusieurs éléments ne peut pas être la primaire/affichable.</span><span class="sxs-lookup"><span data-stu-id="484fc-113">A multiple-element texture cannot be the primary/displayable.</span></span> <span data-ttu-id="484fc-114">En d’autres termes, il doit être hors écran uniquement.</span><span class="sxs-lookup"><span data-stu-id="484fc-114">In other words, it must be off-screen only.</span></span> <span data-ttu-id="484fc-115">Cette limitation est exprimée par l’énumération de format de surface.</span><span class="sxs-lookup"><span data-stu-id="484fc-115">This limitation is expressed by the surface-format enumeration.</span></span>
-   <span data-ttu-id="484fc-116">Aucun tramage, test alpha, buée, fusion, Raster-op ou masquage n’est autorisé.</span><span class="sxs-lookup"><span data-stu-id="484fc-116">No dithering, alpha test, fogging, blending, raster-op, or masking is allowed.</span></span> <span data-ttu-id="484fc-117">Aucun traitement de nuanceur de pixel postérieur n’est effectué, à l’exception du test z-test et du stencil.</span><span class="sxs-lookup"><span data-stu-id="484fc-117">No post-pixel shader processing is done, except the z-test and stencil test.</span></span>
-   <span data-ttu-id="484fc-118">La texture ne peut pas être un mipmap.</span><span class="sxs-lookup"><span data-stu-id="484fc-118">The texture cannot be a mipmap.</span></span> <span data-ttu-id="484fc-119">La création de la chaîne MIP échoue.</span><span class="sxs-lookup"><span data-stu-id="484fc-119">Creation of the mip chain will fail.</span></span>
-   <span data-ttu-id="484fc-120">Le même élément ne peut pas être défini comme une texture en même temps qu’il s’agit d’une cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="484fc-120">The same element cannot be set as a texture at the same time it is a render target.</span></span> <span data-ttu-id="484fc-121">Toutefois, différents éléments de la même surface de texture à élément multiple peuvent être simultanément des textures et des cibles de rendu.</span><span class="sxs-lookup"><span data-stu-id="484fc-121">However, different elements of the same multiple-element texture surface can simultaneously be textures and render targets.</span></span>
-   <span data-ttu-id="484fc-122">Aucun anticrénelage n’est pris en charge.</span><span class="sxs-lookup"><span data-stu-id="484fc-122">No antialiasing is supported.</span></span>
-   <span data-ttu-id="484fc-123">Les surfaces de texture à plusieurs éléments, lorsqu’elles sont utilisées comme texture, ne peuvent pas être filtrées.</span><span class="sxs-lookup"><span data-stu-id="484fc-123">Multiple-element texture surfaces, when used as a texture, cannot be filtered.</span></span> <span data-ttu-id="484fc-124">Cette limitation peut être vérifiée à l’aide de [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat).</span><span class="sxs-lookup"><span data-stu-id="484fc-124">This limitation can be verified using [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat).</span></span>
-   <span data-ttu-id="484fc-125">Les surfaces de texture à plusieurs éléments ne peuvent pas être verrouillées.</span><span class="sxs-lookup"><span data-stu-id="484fc-125">Multiple-element texture surfaces cannot be locked.</span></span>
-   <span data-ttu-id="484fc-126">Plusieurs surfaces de texture à élément multiple peuvent être utilisées simultanément en affectant chacune à différentes étapes, tout comme avec les textures normales.</span><span class="sxs-lookup"><span data-stu-id="484fc-126">More than one multiple-element texture surface can be used simultaneously by assigning each to various stages, just as with normal textures.</span></span>
-   <span data-ttu-id="484fc-127">Les surfaces de texture à plusieurs éléments prennent en charge la conversion de la valeur gamma de 2,2 à 1,0 conversion en une opération de lecture, tout comme avec d’autres formats de texture.</span><span class="sxs-lookup"><span data-stu-id="484fc-127">Multiple-element texture surfaces support conversion of gamma from 2.2 to 1.0 conversion on a read operation, just as with other texture formats.</span></span>
-   <span data-ttu-id="484fc-128">Certaines implémentations n’appliquent pas le masque d’écriture de sortie (D3DRS \_ COLORWRITEENABLE).</span><span class="sxs-lookup"><span data-stu-id="484fc-128">Some of the implementations do not apply the output write mask (D3DRS\_COLORWRITEENABLE).</span></span> <span data-ttu-id="484fc-129">Ceux qui peuvent avoir des masques d’écriture de couleur indépendants.</span><span class="sxs-lookup"><span data-stu-id="484fc-129">Those that can have independent color write masks.</span></span> <span data-ttu-id="484fc-130">Cela est exprimé à l’aide d’un nouveau bit de fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="484fc-130">This is expressed using a new capability bit.</span></span> <span data-ttu-id="484fc-131">Le nombre de masques d’écriture de couleur indépendants disponibles sera égal au nombre maximal d’éléments dont l’appareil est autorisé.</span><span class="sxs-lookup"><span data-stu-id="484fc-131">The number of independent color write masks available will be equal to the maximum number of elements of which the device is capable.</span></span>
-   <span data-ttu-id="484fc-132">[**Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) efface tous les éléments de la texture à plusieurs éléments qui est définie en tant que cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="484fc-132">[**Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) clears all elements of the multiple-element texture which is set as the render target.</span></span>

<span data-ttu-id="484fc-133">L’utilisation de textures à plusieurs éléments suit les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="484fc-133">The usage of multiple-element textures follows these steps:</span></span>

1.  <span data-ttu-id="484fc-134">Les applications découvrent la prise en charge de cette fonctionnalité en vérifiant la disponibilité des formats de texture à plusieurs éléments.</span><span class="sxs-lookup"><span data-stu-id="484fc-134">Applications discover support for this feature by checking for the availability of multiple-element texture formats.</span></span>
2.  <span data-ttu-id="484fc-135">L’application crée ces surfaces en appelant [**CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture).</span><span class="sxs-lookup"><span data-stu-id="484fc-135">The application creates these surfaces by calling [**CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture).</span></span>
3.  <span data-ttu-id="484fc-136">L’application définit la surface en tant que cible de rendu à l’aide de l’appel [**SetRenderTarget**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="484fc-136">The application sets the surface as a render target using the [**SetRenderTarget**](/windows/desktop/api) call.</span></span> <span data-ttu-id="484fc-137">Le nuanceur de pixels fournit une sortie aux surfaces à l’aide de l’instruction [MOV-PS](../direct3dhlsl/mov---ps.md) .</span><span class="sxs-lookup"><span data-stu-id="484fc-137">The pixel shader provides output to the surfaces using the [mov - ps](../direct3dhlsl/mov---ps.md) instruction.</span></span>
4.  <span data-ttu-id="484fc-138">[**SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) est appelé pour définir une surface de texture à plusieurs éléments à une étape particulière.</span><span class="sxs-lookup"><span data-stu-id="484fc-138">[**SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) is called to set a multiple-element texture surface to a particular stage.</span></span> <span data-ttu-id="484fc-139">Comme pour les autres textures, la même surface peut être définie à plusieurs étapes à la fois.</span><span class="sxs-lookup"><span data-stu-id="484fc-139">As with other textures, the same surface is allowed to be set to multiple stages at once.</span></span>
5.  <span data-ttu-id="484fc-140">[**SetSamplerState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) est appelé pour définir D3DSAMP \_ ELEMENTINDEX sur le numéro d’élément approprié dans la texture à plusieurs éléments à partir de laquelle l’échantillonneur échantillonne.</span><span class="sxs-lookup"><span data-stu-id="484fc-140">[**SetSamplerState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) is called to set D3DSAMP\_ELEMENTINDEX to the appropriate element number in the multiple-element texture from which the sampler samples.</span></span> <span data-ttu-id="484fc-141">La valeur par défaut de cet État est 0, ce qui signifie que les textures qui ne sont pas à plusieurs éléments fonctionneront.</span><span class="sxs-lookup"><span data-stu-id="484fc-141">Default value for this state is 0, which means non-multiple-element textures will work.</span></span> <span data-ttu-id="484fc-142">L’affectation d’un nombre inapproprié à cet État entraîne un comportement indéfini : si la texture à plusieurs éléments est composée uniquement de deux éléments larges, alors que l’échantillonneur est invité à échantillonner à partir du quatrième élément, par exemple.</span><span class="sxs-lookup"><span data-stu-id="484fc-142">Setting this state to an inappropriate number results in an undefined behavior - if the multiple-element texture is only two elements wide but the sampler is asked to sample from the fourth element, for example.</span></span>

## <a name="api-support"></a><span data-ttu-id="484fc-143">Prise en charge des API</span><span class="sxs-lookup"><span data-stu-id="484fc-143">API Support</span></span>

<span data-ttu-id="484fc-144">Voici un résumé des éléments d’API qui prennent en charge les textures à plusieurs éléments :</span><span class="sxs-lookup"><span data-stu-id="484fc-144">The following is a summary of the API elements that support multiple-element textures:</span></span>

-   <span data-ttu-id="484fc-145">Le format de surface d' [D3DFMT \_ MULTI2 \_ ARGB8](d3dformat.md) exprime la nature entrelacée du format.</span><span class="sxs-lookup"><span data-stu-id="484fc-145">The [D3DFMT\_MULTI2\_ARGB8](d3dformat.md) surface format expresses the interleaved nature of the format.</span></span>
-   <span data-ttu-id="484fc-146">L' \_ État de l’échantillonneur D3DSAMP ELEMENTINDEX indique l’index d’élément à utiliser.</span><span class="sxs-lookup"><span data-stu-id="484fc-146">The D3DSAMP\_ELEMENTINDEX sampler state indicates which element index to use.</span></span>
-   <span data-ttu-id="484fc-147">Les États de rendu suivants prennent en charge les textures à plusieurs éléments :</span><span class="sxs-lookup"><span data-stu-id="484fc-147">The following render states support multiple-element textures:</span></span>

    -   <span data-ttu-id="484fc-148">D3DRS \_ COLORWRITEENABLE1</span><span class="sxs-lookup"><span data-stu-id="484fc-148">D3DRS\_COLORWRITEENABLE1</span></span>
    -   <span data-ttu-id="484fc-149">D3DRS \_ COLORWRITEENABLE2</span><span class="sxs-lookup"><span data-stu-id="484fc-149">D3DRS\_COLORWRITEENABLE2</span></span>
    -   <span data-ttu-id="484fc-150">D3DRS \_ COLORWRITEENABLE3</span><span class="sxs-lookup"><span data-stu-id="484fc-150">D3DRS\_COLORWRITEENABLE3</span></span>

    <span data-ttu-id="484fc-151">D3DRS \_ COLORWRITEENABLE s’applique à la cible de rendu (ou à l’élément) zéro.</span><span class="sxs-lookup"><span data-stu-id="484fc-151">D3DRS\_COLORWRITEENABLE applies to render target (or element) zero.</span></span>

-   <span data-ttu-id="484fc-152">L’indicateur [D3DPMISCCAPS \_ INDEPENDENTWRITEMASKS](d3dpmisccaps.md) indique que l’appareil prend en charge des masques d’écriture indépendants pour plusieurs textures d’élément ou plusieurs cibles de rendu.</span><span class="sxs-lookup"><span data-stu-id="484fc-152">The [D3DPMISCCAPS\_INDEPENDENTWRITEMASKS](d3dpmisccaps.md) flag indicates that the device supports independent write masks for multiple element textures or multiple render targets.</span></span>

## <a name="related-topics"></a><span data-ttu-id="484fc-153">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="484fc-153">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="484fc-154">Pipeline de pixels</span><span class="sxs-lookup"><span data-stu-id="484fc-154">Pixel Pipeline</span></span>](pixel-pipeline.md)
</dt> </dl>

 

 
