---
description: La gestion des ressources est le processus dans lequel les ressources sont promues du stockage de mémoire système vers le stockage accessible aux appareils et ignorées à partir du stockage accessible à l’appareil.
ms.assetid: 4aa55313-b86c-48e7-829a-a0917c2ebae7
title: Gestion des ressources (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30ef7a8be0e71c652b6e3f2ed467e866fd922791
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104200718"
---
# <a name="managing-resources-direct3d-9"></a><span data-ttu-id="c3fa0-103">Gestion des ressources (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="c3fa0-103">Managing Resources (Direct3D 9)</span></span>

<span data-ttu-id="c3fa0-104">La gestion des ressources est le processus dans lequel les ressources sont promues du stockage de mémoire système vers le stockage accessible aux appareils et ignorées à partir du stockage accessible à l’appareil.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-104">Resource management is the process where resources are promoted from system-memory storage to device-accessible storage and discarded from device-accessible storage.</span></span> <span data-ttu-id="c3fa0-105">Le temps d’exécution de Direct3D a son propre algorithme de gestion basé sur une technique de priorité la moins récemment utilisée.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-105">The Direct3D run time has its own management algorithm based on a least-recently-used priority technique.</span></span> <span data-ttu-id="c3fa0-106">Direct3D bascule vers une technique de priorité la plus récemment utilisée lorsqu’il détecte que plus de ressources que ne peut coexister dans la mémoire accessible par l’appareil sont utilisées dans une seule trame entre [**IDirect3DDevice9 :: BeginScene**](/windows/desktop/api) et [**IDirect3DDevice9 :: EndScene**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) appels.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-106">Direct3D switches to a most-recently-used priority technique when it detects that more resources than can coexist in device-accessible memory are used in a single frame - between [**IDirect3DDevice9::BeginScene**](/windows/desktop/api) and [**IDirect3DDevice9::EndScene**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) calls.</span></span>

<span data-ttu-id="c3fa0-107">Utilisez l’indicateur [**D3DPOOL \_ par défaut**](./d3dpool.md) au moment de la création pour spécifier qu’une ressource est placée dans le pool de mémoires le plus approprié pour l’ensemble des utilisations demandées pour la ressource donnée.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-107">Use the [**D3DPOOL\_DEFAULT**](./d3dpool.md) flag at creation time to specify that a resource are placed in the memory pool most appropriate for the set of usages requested for the given resource.</span></span> <span data-ttu-id="c3fa0-108">Il s’agit généralement de la mémoire vidéo, y compris la mémoire vidéo locale et la mémoire AGP (Accelerated Graphics Port).</span><span class="sxs-lookup"><span data-stu-id="c3fa0-108">This is usually video memory, including both local video memory and accelerated graphics port (AGP) memory.</span></span> <span data-ttu-id="c3fa0-109">Les ressources dans le pool par défaut ne sont pas conservées par le biais de transitions entre les États perdus et opérationnels de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-109">Resources in the default pool do not persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="c3fa0-110">Ces ressources doivent être libérées avant d’appeler Reset et doivent ensuite être recréées.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-110">These resources must be released before calling reset and must then be re-created.</span></span>

<span data-ttu-id="c3fa0-111">Utilisez l' [**indicateur \_ managé D3DPOOL**](./d3dpool.md) au moment de la création pour spécifier une ressource managée.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-111">Use the [**D3DPOOL\_MANAGED**](./d3dpool.md) flag at creation time to specify a managed resource.</span></span> <span data-ttu-id="c3fa0-112">Les ressources managées sont conservées par le biais de transitions entre les États perdus et opérationnels de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-112">Managed resources persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="c3fa0-113">Ces ressources existent à la fois dans la mémoire vidéo et la mémoire système.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-113">These resources exist both in video and system memory.</span></span> <span data-ttu-id="c3fa0-114">Une ressource managée est copiée dans la mémoire vidéo quand elle est nécessaire pendant le rendu.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-114">A managed resource will be copied into video memory when it is needed during rendering.</span></span> <span data-ttu-id="c3fa0-115">L’appareil peut être restauré à l’aide d’un appel à [**IDirect3DDevice9 :: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), et ces ressources continuent à fonctionner normalement sans être rechargées avec des données.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-115">The device can be restored with a call to [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), and such resources continue to function normally without being reloaded with data.</span></span> <span data-ttu-id="c3fa0-116">Toutefois, si l’appareil doit être détruit et recréé, toutes les ressources doivent être recréées.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-116">However, if the device must be destroyed and re-created, all resources must be re-created.</span></span>

<span data-ttu-id="c3fa0-117">La gestion des ressources n’est pas recommandée pour les ressources qui changent avec une fréquence élevée.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-117">Resource management is not recommended for resources which change with high frequency.</span></span> <span data-ttu-id="c3fa0-118">Par exemple, les tampons de vertex et d’index qui sont utilisés pour parcourir un graphique de scène chaque image qui rend uniquement la géométrie visible par l’utilisateur modifie chaque frame.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-118">For example, vertex and index buffers which are used to traverse a scene graph every frame rendering only geometry visible to the user changes every frame.</span></span> <span data-ttu-id="c3fa0-119">Étant donné que les ressources managées sont sauvegardées par la mémoire système, les modifications constantes doivent être mises à jour dans la mémoire système, ce qui peut entraîner une sérieuse dégradation des performances.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-119">Since managed resources are backed by system memory, the constant changes must be updated in system memory, which can cause a severe degradation in performance.</span></span> <span data-ttu-id="c3fa0-120">Pour ce scénario particulier, vous devez utiliser [**D3DPOOL \_ par défaut**](./d3dpool.md) avec [**D3DUSAGE \_ Dynamic**](d3dusage.md) .</span><span class="sxs-lookup"><span data-stu-id="c3fa0-120">For this particular scenario, [**D3DPOOL\_DEFAULT**](./d3dpool.md) along with [**D3DUSAGE\_DYNAMIC**](d3dusage.md) should be used.</span></span>

<span data-ttu-id="c3fa0-121">Un autre exemple pour lequel la gestion des ressources n’est pas recommandée (et qui n’est pas explicitement autorisée par le Runtime) est la gestion d’une texture créée avec [**D3DUSAGE \_ RENDERTARGET**](d3dusage.md).</span><span class="sxs-lookup"><span data-stu-id="c3fa0-121">Another example for which resource management is not recommended (and explicitly not allowed by the runtime) is management of a texture created with [**D3DUSAGE\_RENDERTARGET**](d3dusage.md).</span></span> <span data-ttu-id="c3fa0-122">Si la mémoire utilisée par les cibles de rendu était gérée par le runtime, son contenu doit constamment être copié dans la mémoire système pendant le rendu, ce qui entraîne des pénalités en matière de performances.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-122">If the memory used by render targets were managed by the runtime, it's contents would have to constantly be copied to system memory during rendering, causing large performance penalties.</span></span> <span data-ttu-id="c3fa0-123">Pour cette raison, les cibles de rendu doivent être créées dans le pool par défaut.</span><span class="sxs-lookup"><span data-stu-id="c3fa0-123">For this reason, render targets must be created in the default pool.</span></span> <span data-ttu-id="c3fa0-124">Si l’accès au processeur des données contenues dans une cible de rendu est nécessaire, les données doivent être copiées dans une ressource créée dans [**D3DPOOL \_ SYSTEMMEM**](./d3dpool.md) à l’aide de [**IDirect3DDevice9 :: UpdateTexture**](/windows/desktop/api)ou [**IDirect3DDevice9 :: UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span><span class="sxs-lookup"><span data-stu-id="c3fa0-124">If CPU access of the data contained in a render target is needed, the data must be copied to a resource created in [**D3DPOOL\_SYSTEMMEM**](./d3dpool.md) using [**IDirect3DDevice9::UpdateTexture**](/windows/desktop/api), or [**IDirect3DDevice9::UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span></span>

<span data-ttu-id="c3fa0-125">Pour plus d’informations sur l’état perdu d’un appareil, consultez [appareils perdus (Direct3D 9)](lost-devices.md).</span><span class="sxs-lookup"><span data-stu-id="c3fa0-125">For more information about the lost state of a device, see [Lost Devices (Direct3D 9)](lost-devices.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="c3fa0-126">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c3fa0-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c3fa0-127">Ressources Direct3D</span><span class="sxs-lookup"><span data-stu-id="c3fa0-127">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> </dl>

 

 
