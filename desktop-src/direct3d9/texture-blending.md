---
description: Direct3D peut mélanger jusqu’à huit textures sur des primitives en une seule passe.
ms.assetid: vs|directx_sdk|~\texture_blending.htm
title: Fusion de texture (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6a89a87160bb85c1f62339380d46fa4b39736609
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "103747620"
---
# <a name="texture-blending-direct3d-9"></a><span data-ttu-id="2d1f0-103">Fusion de texture (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="2d1f0-103">Texture Blending (Direct3D 9)</span></span>

<span data-ttu-id="2d1f0-104">Direct3D peut mélanger jusqu’à huit textures sur des primitives en une seule passe.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-104">Direct3D can blend as many as eight textures onto primitives in a single pass.</span></span> <span data-ttu-id="2d1f0-105">L’utilisation de plusieurs fusions de textures peut augmenter de façon indéterminée la fréquence d’images d’une application Direct3D.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-105">The use of multiple texture blending can profoundly increase the frame rate of a Direct3D application.</span></span> <span data-ttu-id="2d1f0-106">Une application utilise plusieurs fusions de texture pour appliquer des textures, des ombres, de l’éclairage spéculaire, un éclairage diffus et d’autres effets spéciaux en une seule passe.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-106">An application employs multiple texture blending to apply textures, shadows, specular lighting, diffuse lighting, and other special effects in a single pass.</span></span>

<span data-ttu-id="2d1f0-107">Pour utiliser la fusion de texture, votre application doit d’abord vérifier si le matériel de l’utilisateur la prend en charge.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-107">To use texture blending, your application should first check if the user's hardware supports it.</span></span> <span data-ttu-id="2d1f0-108">Ces informations se trouvent dans le membre TextureCaps de la structure [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) .</span><span class="sxs-lookup"><span data-stu-id="2d1f0-108">This information is found in the TextureCaps member of the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure.</span></span> <span data-ttu-id="2d1f0-109">Pour plus d’informations sur la façon d’interroger le matériel de l’utilisateur sur les fonctionnalités de fusion de texture, consultez [**IDirect3DDevice9 :: GetDeviceCaps**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps).</span><span class="sxs-lookup"><span data-stu-id="2d1f0-109">For details about how to query the user's hardware for texture blending capabilities, see [**IDirect3DDevice9::GetDeviceCaps**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps).</span></span>

## <a name="texture-stages-and-the-texture-blending-cascade"></a><span data-ttu-id="2d1f0-110">Étapes de texture et cascade de fusion</span><span class="sxs-lookup"><span data-stu-id="2d1f0-110">Texture Stages and the Texture Blending Cascade</span></span>

<span data-ttu-id="2d1f0-111">Direct3D prend en charge la fusion de plusieurs textures à passage unique par le biais de l’utilisation d’étapes de texture.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-111">Direct3D supports single-pass multiple texture blending through the use of texture stages.</span></span> <span data-ttu-id="2d1f0-112">Une étape de texture accepte deux arguments et effectue une opération de fusion sur ces derniers, en passant le résultat pour un traitement ultérieur ou pour la pixellisation.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-112">A texture stage takes two arguments and performs a blending operation on them, passing on the result for further processing or for rasterization.</span></span> <span data-ttu-id="2d1f0-113">Vous pouvez visualiser une étape de texture comme indiqué dans le diagramme suivant.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-113">You can visualize a texture stage as shown in the following diagram.</span></span>

![diagramme d’une étape de texture](images/texstg.png)

<span data-ttu-id="2d1f0-115">Comme le montre le diagramme précédent, les étapes de texture fusionnent deux arguments à l’aide d’un opérateur spécifié.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-115">As the preceding diagram shows, texture stages blend two arguments by using a specified operator.</span></span> <span data-ttu-id="2d1f0-116">Les opérations courantes incluent la modulation simple ou l’ajout de la couleur ou des composants alpha des arguments, mais plus de deux douzaines d’opérations sont prises en charge.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-116">Common operations include simple modulation or addition of the color or alpha components of the arguments, but more than two dozen operations are supported.</span></span> <span data-ttu-id="2d1f0-117">Les arguments d’une phase peuvent être associés à une texture, à la couleur itérée ou à l’alpha (itération au cours de l’ombrage Gouraud), à la couleur et à l’alpha arbitraires ou au résultat de l’étape de texture précédente.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-117">The arguments for a stage can be an associated texture, the iterated color or alpha (iterated during Gouraud shading), arbitrary color and alpha, or the result from the previous texture stage.</span></span> <span data-ttu-id="2d1f0-118">Pour plus d’informations, consultez [opérations et arguments de fusion de texture (Direct3D 9)](texture-blending-operations-and-arguments.md).</span><span class="sxs-lookup"><span data-stu-id="2d1f0-118">For more information, see [Texture Blending Operations and Arguments (Direct3D 9)](texture-blending-operations-and-arguments.md).</span></span>

> [!Note]  
> <span data-ttu-id="2d1f0-119">Direct3D distingue la fusion des couleurs de la fusion alpha.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-119">Direct3D distinguishes color blending from alpha blending.</span></span> <span data-ttu-id="2d1f0-120">Les applications définissent des opérations de fusion et des arguments pour la couleur et l’alpha individuellement, et les résultats de ces paramètres sont indépendants les uns des autres.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-120">Applications set blending operations and arguments for color and alpha individually, and the results of those settings are independent of one another.</span></span>

 

<span data-ttu-id="2d1f0-121">La combinaison des arguments et des opérations utilisées par plusieurs étapes de fusion définit un langage de fusion simple basé sur un fluide.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-121">The combination of arguments and operations used by multiple blending stages define a simple flow-based blending language.</span></span> <span data-ttu-id="2d1f0-122">Les résultats d’une étape passent à une autre étape, de cette étape à la suivante, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-122">The results from one stage flow down to another stage, from that stage to the next, and so on.</span></span> <span data-ttu-id="2d1f0-123">Le concept de résultats allant d’un niveau à l’autres à une étape finale sur un polygone est souvent appelé la texture de la fusion.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-123">The concept of results flowing from stage to stage to eventually be rasterized on a polygon is often called the texture blending cascade.</span></span> <span data-ttu-id="2d1f0-124">Le diagramme suivant montre comment les différentes étapes de texture composent la texture en cascade.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-124">The following diagram shows how individual texture stages make up the texture blending cascade.</span></span>

![diagramme des étapes de texture dans la cascade de fusion](images/tcascade.png)

<span data-ttu-id="2d1f0-126">Chaque étape d’un appareil a un index de base zéro.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-126">Each stage in a device has a zero-based index.</span></span> <span data-ttu-id="2d1f0-127">Direct3D autorise jusqu’à huit étapes de fusion, même si vous devez toujours vérifier les capacités de l’appareil pour déterminer le nombre d’étapes prises en charge par le matériel actuel.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-127">Direct3D allows up to eight blending stages, although you should always check device capabilities to determine how many stages the current hardware supports.</span></span> <span data-ttu-id="2d1f0-128">La première étape de fusion se trouve à l’index 0, la seconde à 1, et ainsi de suite, jusqu’à l’index 7.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-128">The first blending stage is at index 0, the second is at 1, and so on, up to index 7.</span></span> <span data-ttu-id="2d1f0-129">Le système fusionne les étapes dans l’ordre d’index de plus en plus important.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-129">The system blends stages in increasing index order.</span></span>

<span data-ttu-id="2d1f0-130">Utilisez uniquement le nombre d’étapes dont vous avez besoin. les étapes de fusion inutilisées sont désactivées par défaut.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-130">Use only the number of stages you need; the unused blending stages are disabled by default.</span></span> <span data-ttu-id="2d1f0-131">Par conséquent, si votre application utilise uniquement les deux premières étapes, elle doit uniquement définir des opérations et des arguments pour les étapes 0 et 1.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-131">So, if your application only uses the first two stages, it need only set operations and arguments for stage 0 and 1.</span></span> <span data-ttu-id="2d1f0-132">Le système fusionne les deux étapes et ignore les étapes désactivées.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-132">The system blends the two stages, and ignores the disabled stages.</span></span>

> [!Note]  
> <span data-ttu-id="2d1f0-133">Si votre application varie le nombre d’étapes qu’elle utilise pour différentes situations, par exemple quatre étapes pour certains objets, et seulement deux pour d’autres, vous n’avez pas besoin de désactiver explicitement toutes les étapes précédemment utilisées.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-133">If your application varies the number of stages it uses for different situations - such as four stages for some objects, and only two for others - you don't need to explicitly disable all previously used stages.</span></span> <span data-ttu-id="2d1f0-134">L’une des options consiste à désactiver l’opération de couleur pour la première étape non utilisée, alors toutes les étapes avec un index plus élevé ne sont pas appliquées.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-134">One option is to disable the color operation for the first unused stage, then all stages with a higher index will not be applied.</span></span> <span data-ttu-id="2d1f0-135">Une autre option consiste à désactiver complètement le mappage de texture en définissant l’opération de couleur pour la première étape de texture (étape 0) sur D3DTOP \_ Désactiver.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-135">Another option is to disable texture mapping altogether by setting the color operation for the first texture stage (stage 0) to D3DTOP\_DISABLE.</span></span> <span data-ttu-id="2d1f0-136">Une troisième option est lorsqu’une étape de texture a D3DTSS \_ COLORARG1 égal à D3DTA \_ texture et que le pointeur de texture pour l’étape est **null**, cette étape et toutes les étapes après qu’elle n’est pas traitée.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-136">A third option is when a texture stage has D3DTSS\_COLORARG1 equal to D3DTA\_TEXTURE and the texture pointer for the stage is **NULL**, this stage and all stages after it are not processed.</span></span>

 

<span data-ttu-id="2d1f0-137">Des informations supplémentaires sont contenues dans les rubriques suivantes.</span><span class="sxs-lookup"><span data-stu-id="2d1f0-137">Additional information is contained in the following topics.</span></span>

-   [<span data-ttu-id="2d1f0-138">Opérations et arguments de fusion de texture (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="2d1f0-138">Texture Blending Operations and Arguments (Direct3D 9)</span></span>](texture-blending-operations-and-arguments.md)
-   [<span data-ttu-id="2d1f0-139">Affectation des textures actuelles (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="2d1f0-139">Assigning the Current Textures (Direct3D 9)</span></span>](assigning-the-current-textures.md)
-   [<span data-ttu-id="2d1f0-140">Création de phases de fusion (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="2d1f0-140">Creating Blending Stages (Direct3D 9)</span></span>](creating-blending-stages.md)
-   [<span data-ttu-id="2d1f0-141">Fusion de texture alpha (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="2d1f0-141">Alpha Texture Blending (Direct3D 9)</span></span>](alpha-texture-blending.md)
-   [<span data-ttu-id="2d1f0-142">Fusion de texture multipasse (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="2d1f0-142">Multipass Texture Blending (Direct3D 9)</span></span>](multipass-texture-blending.md)
-   [<span data-ttu-id="2d1f0-143">Mise en correspondance de la lumière avec les textures (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="2d1f0-143">Light Mapping with Textures (Direct3D 9)</span></span>](light-mapping-with-textures.md)

## <a name="related-topics"></a><span data-ttu-id="2d1f0-144">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="2d1f0-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2d1f0-145">Textures Direct3D</span><span class="sxs-lookup"><span data-stu-id="2d1f0-145">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
