---
description: Vous trouverez ci-dessous un guide pas à pas pour la prise en main de la programmation Windows Sockets.
ms.assetid: 905cd5bc-44af-4d3f-841a-9e9a2700a785
title: Prise en main avec Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 43751663a637fafb2eec453a48c329ff8e4499f2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106539059"
---
# <a name="getting-started-with-winsock"></a><span data-ttu-id="4ea39-103">Prise en main avec Winsock</span><span class="sxs-lookup"><span data-stu-id="4ea39-103">Getting Started with Winsock</span></span>

<span data-ttu-id="4ea39-104">Vous trouverez ci-dessous un guide pas à pas pour la prise en main de la programmation Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="4ea39-104">The following is a step-by-step guide to getting started with Windows Sockets programming.</span></span> <span data-ttu-id="4ea39-105">Il est conçu pour vous permettre de comprendre les fonctions et structures de données de base de Winsock, et comment elles fonctionnent ensemble.</span><span class="sxs-lookup"><span data-stu-id="4ea39-105">It is designed to provide an understanding of basic Winsock functions and data structures, and how they work together.</span></span>

<span data-ttu-id="4ea39-106">L’application cliente et serveur utilisée pour l’illustration est un client et un serveur de base.</span><span class="sxs-lookup"><span data-stu-id="4ea39-106">The client and server application that is used for illustration is a very basic client and server.</span></span> <span data-ttu-id="4ea39-107">Des exemples de code plus avancés sont inclus dans les exemples inclus dans le kit de développement logiciel (SDK) Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="4ea39-107">More advanced code examples are included in the samples included with the Microsoft Windows Software Development Kit (SDK).</span></span>

<span data-ttu-id="4ea39-108">Les premières étapes sont identiques pour les applications client et serveur.</span><span class="sxs-lookup"><span data-stu-id="4ea39-108">The first few steps are the same for both client and server applications.</span></span>

-   [<span data-ttu-id="4ea39-109">À propos des serveurs et des clients</span><span class="sxs-lookup"><span data-stu-id="4ea39-109">About Servers and Clients</span></span>](about-clients-and-servers.md)
-   [<span data-ttu-id="4ea39-110">Création d’une application Winsock de base</span><span class="sxs-lookup"><span data-stu-id="4ea39-110">Creating a Basic Winsock Application</span></span>](creating-a-basic-winsock-application.md)
-   [<span data-ttu-id="4ea39-111">Initialisation de Winsock</span><span class="sxs-lookup"><span data-stu-id="4ea39-111">Initializing Winsock</span></span>](initializing-winsock.md)

<span data-ttu-id="4ea39-112">Les sections suivantes décrivent les étapes restantes pour créer une application cliente Winsock.</span><span class="sxs-lookup"><span data-stu-id="4ea39-112">The following sections describe the remaining steps for creating a Winsock client application.</span></span>

-   [<span data-ttu-id="4ea39-113">Création d’un socket pour le client</span><span class="sxs-lookup"><span data-stu-id="4ea39-113">Creating a Socket for the Client</span></span>](creating-a-socket-for-the-client.md)
-   [<span data-ttu-id="4ea39-114">Connexion à un socket</span><span class="sxs-lookup"><span data-stu-id="4ea39-114">Connecting to a Socket</span></span>](connecting-to-a-socket.md)
-   [<span data-ttu-id="4ea39-115">Envoi et réception de données sur le client</span><span class="sxs-lookup"><span data-stu-id="4ea39-115">Sending and Receiving Data on the Client</span></span>](sending-and-receiving-data-on-the-client.md)
-   [<span data-ttu-id="4ea39-116">Déconnexion du client</span><span class="sxs-lookup"><span data-stu-id="4ea39-116">Disconnecting the Client</span></span>](disconnecting-the-client.md)

<span data-ttu-id="4ea39-117">Les sections suivantes décrivent les étapes restantes pour créer une application de serveur Winsock.</span><span class="sxs-lookup"><span data-stu-id="4ea39-117">The following sections describe the remaining steps for creating a Winsock server application.</span></span>

-   [<span data-ttu-id="4ea39-118">Création d’un socket pour le serveur</span><span class="sxs-lookup"><span data-stu-id="4ea39-118">Creating a Socket for the Server</span></span>](creating-a-socket-for-the-server.md)
-   [<span data-ttu-id="4ea39-119">Liaison d’un socket</span><span class="sxs-lookup"><span data-stu-id="4ea39-119">Binding a Socket</span></span>](binding-a-socket.md)
-   [<span data-ttu-id="4ea39-120">Écoute sur un socket</span><span class="sxs-lookup"><span data-stu-id="4ea39-120">Listening on a Socket</span></span>](listening-on-a-socket.md)
-   [<span data-ttu-id="4ea39-121">Acceptation d’une connexion</span><span class="sxs-lookup"><span data-stu-id="4ea39-121">Accepting a Connection</span></span>](accepting-a-connection.md)
-   [<span data-ttu-id="4ea39-122">Réception et envoi de données sur le serveur</span><span class="sxs-lookup"><span data-stu-id="4ea39-122">Receiving and Sending Data on the Server</span></span>](receiving-and-sending-data-on-the-server.md)
-   [<span data-ttu-id="4ea39-123">Déconnexion du serveur</span><span class="sxs-lookup"><span data-stu-id="4ea39-123">Disconnecting the Server</span></span>](disconnecting-the-server.md)

<span data-ttu-id="4ea39-124">Le code source complet de ces exemples de base.</span><span class="sxs-lookup"><span data-stu-id="4ea39-124">The complete source code for these basic examples.</span></span>

-   [<span data-ttu-id="4ea39-125">Exécution de l’exemple de code du client et du serveur Winsock</span><span class="sxs-lookup"><span data-stu-id="4ea39-125">Running the Winsock Client and Server Code Sample</span></span>](finished-server-and-client-code.md)
-   [<span data-ttu-id="4ea39-126">Code client Winsock complet</span><span class="sxs-lookup"><span data-stu-id="4ea39-126">Complete Winsock Client Code</span></span>](complete-client-code.md)
-   [<span data-ttu-id="4ea39-127">Compléter le code du serveur Winsock</span><span class="sxs-lookup"><span data-stu-id="4ea39-127">Complete Winsock Server Code</span></span>](complete-server-code.md)

## <a name="advanced-winsock-samples"></a><span data-ttu-id="4ea39-128">Exemples de Winsock avancés</span><span class="sxs-lookup"><span data-stu-id="4ea39-128">Advanced Winsock Samples</span></span>

<span data-ttu-id="4ea39-129">Plusieurs exemples plus avancés de client et de serveur Winsock sont inclus dans le SDK Windows.</span><span class="sxs-lookup"><span data-stu-id="4ea39-129">Several more advanced Winsock client and server samples are included with the Windows SDK.</span></span> <span data-ttu-id="4ea39-130">Par défaut, le code source de l’exemple Winsock est installé dans le répertoire suivant par le SDK Windows pour Windows 7 :</span><span class="sxs-lookup"><span data-stu-id="4ea39-130">By default, the Winsock sample source code is installed in the following directory by the Windows SDK for Windows 7:</span></span>

<span data-ttu-id="4ea39-131">*C : \\ Program Files \\ Microsoft SDK \\ \\ exemples Windows v \\ 7.0 \\ NetDs \\ Winsock*</span><span class="sxs-lookup"><span data-stu-id="4ea39-131">*C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Samples\\NetDs\\winsock*</span></span>

<span data-ttu-id="4ea39-132">Dans les versions antérieures du SDK Windows, le numéro de version dans le chemin d’accès ci-dessus change.</span><span class="sxs-lookup"><span data-stu-id="4ea39-132">On earlier versions of the Windows SDK, the version number in the above path would change.</span></span> <span data-ttu-id="4ea39-133">Par exemple, le code source de l’exemple Winsock est installé dans le répertoire par défaut suivant par le SDK Windows pour Windows Vista</span><span class="sxs-lookup"><span data-stu-id="4ea39-133">For example, the Winsock sample source code is installed in the following default directory by the Windows SDK for Windows Vista</span></span>

<span data-ttu-id="4ea39-134">*C : \\ Program Files \\ Microsoft SDK \\ \\ exemples Windows v \\ 6.0 \\ NetDs \\ Winsock*</span><span class="sxs-lookup"><span data-stu-id="4ea39-134">*C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0\\Samples\\NetDs\\winsock*</span></span>

<span data-ttu-id="4ea39-135">Les exemples les plus avancés répertoriés ci-dessous dans l’ordre et les performances les plus basses sont disponibles dans les répertoires suivants :</span><span class="sxs-lookup"><span data-stu-id="4ea39-135">The more advanced samples listed below in order from higher to lower performance are found in the following directories:</span></span>

-   <span data-ttu-id="4ea39-136">iocp</span><span class="sxs-lookup"><span data-stu-id="4ea39-136">iocp</span></span>

    <span data-ttu-id="4ea39-137">Ce répertoire contient trois exemples de programmes qui utilisent des ports de terminaison d’e/s.</span><span class="sxs-lookup"><span data-stu-id="4ea39-137">This directory contains three sample programs that use I/O completion ports.</span></span> <span data-ttu-id="4ea39-138">Les programmes incluent un serveur Winsock (iocpserver) qui utilise la fonction [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) , un serveur Winsock (iocpserverex) qui utilise la fonction [**accepteur**](/windows/win32/api/mswsock/nf-mswsock-acceptex) et un client Winsock multithread simple (iocpclient) utilisé pour tester l’un de ces serveurs.</span><span class="sxs-lookup"><span data-stu-id="4ea39-138">The programs include a Winsock server (iocpserver) that uses the [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) function, a Winsock server (iocpserverex) that uses the [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) function, and a simple multithreaded Winsock client (iocpclient) used to test either of these servers.</span></span> <span data-ttu-id="4ea39-139">Les programmes serveur prennent en charge plusieurs clients qui se connectent via TCP/IP et envoient des tampons de données de taille arbitraire que le serveur renvoie ensuite au client.</span><span class="sxs-lookup"><span data-stu-id="4ea39-139">The server programs support multiple clients connecting via TCP/IP and sending arbitrary sized data buffers which the server then echoes back to the client.</span></span> <span data-ttu-id="4ea39-140">Pour des raisons pratiques, un programme client simple, iocpclient, a été développé pour se connecter et envoyer continuellement des données au serveur afin de le stresser à l’aide de plusieurs threads.</span><span class="sxs-lookup"><span data-stu-id="4ea39-140">For convenience, a simple client program, iocpclient, was developed to connect and continually send data to the server to stress it using multiple threads.</span></span> <span data-ttu-id="4ea39-141">Les serveurs Winsock qui utilisent des ports de terminaison d’e/s offrent la plus grande capacité de performances.</span><span class="sxs-lookup"><span data-stu-id="4ea39-141">Winsock servers that use I/O completion ports provide the most performance capability.</span></span>

-   <span data-ttu-id="4ea39-142">éviter</span><span class="sxs-lookup"><span data-stu-id="4ea39-142">overlap</span></span>

    <span data-ttu-id="4ea39-143">Ce répertoire contient un exemple de programme serveur qui utilise des e/s avec chevauchement.</span><span class="sxs-lookup"><span data-stu-id="4ea39-143">This directory contains a sample server program that uses overlapped I/O.</span></span> <span data-ttu-id="4ea39-144">L’exemple de programme utilise la fonction [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) et des e/s avec chevauchement pour gérer efficacement plusieurs demandes de connexion asynchrones des clients.</span><span class="sxs-lookup"><span data-stu-id="4ea39-144">The sample program uses the [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) function and overlapped I/O to handle multiple asynchronous connection requests from clients effectively.</span></span> <span data-ttu-id="4ea39-145">Le serveur utilise la fonction **AcceptEx** pour multiplexer différentes connexions clientes dans une application Win32 à thread unique.</span><span class="sxs-lookup"><span data-stu-id="4ea39-145">The server uses the **AcceptEx** function to multiplex different client connections in a single-threaded Win32 application.</span></span> <span data-ttu-id="4ea39-146">L’utilisation des e/s avec chevauchement permet une plus grande évolutivité.</span><span class="sxs-lookup"><span data-stu-id="4ea39-146">Using overlapped I/O allows for greater scalability.</span></span>

-   <span data-ttu-id="4ea39-147">WSAPoll</span><span class="sxs-lookup"><span data-stu-id="4ea39-147">WSAPoll</span></span>

    <span data-ttu-id="4ea39-148">Ce répertoire contient un exemple de programme de base qui illustre l’utilisation de la fonction [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) .</span><span class="sxs-lookup"><span data-stu-id="4ea39-148">This directory contains a basic sample program that demonstrates the use of the [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) function.</span></span> <span data-ttu-id="4ea39-149">Le programme client et serveur combiné est non bloquant et utilise la fonction **WSAPoll** pour déterminer quand il est possible d’envoyer ou de recevoir sans blocage.</span><span class="sxs-lookup"><span data-stu-id="4ea39-149">The combined client and server program are non-blocking and use the **WSAPoll** function to determine when it is possible to send or receive without blocking.</span></span> <span data-ttu-id="4ea39-150">Cet exemple est plus pour l’illustration et n’est pas un serveur à hautes performances.</span><span class="sxs-lookup"><span data-stu-id="4ea39-150">This sample is more for illustration and is not a high-performance server.</span></span>

-   <span data-ttu-id="4ea39-151">simple</span><span class="sxs-lookup"><span data-stu-id="4ea39-151">simple</span></span>

    <span data-ttu-id="4ea39-152">Ce répertoire contient trois exemples de programmes de base qui illustrent l’utilisation de plusieurs threads par un serveur.</span><span class="sxs-lookup"><span data-stu-id="4ea39-152">This directory contains three basic sample programs that demonstrate the use of multiple threads by a server.</span></span> <span data-ttu-id="4ea39-153">Les programmes incluent un serveur TCP/UDP simple (simple), un serveur TCP uniquement (simple \_ IOCTL) qui utilise la fonction [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) dans une application console Win32 pour prendre en charge plusieurs requêtes client et un programme TCP/UDP client (simplec) pour tester les serveurs.</span><span class="sxs-lookup"><span data-stu-id="4ea39-153">The programs include a simple TCP/UDP server (simples), a TCP-only server (simples\_ioctl) that uses the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) function in a Win32 console application to support multiple client requests, and a client TCP/UDP program (simplec) for testing the servers.</span></span> <span data-ttu-id="4ea39-154">Les serveurs illustrent l’utilisation de plusieurs threads pour gérer plusieurs demandes du client.</span><span class="sxs-lookup"><span data-stu-id="4ea39-154">The servers demonstrates the use of multiple threads to handle multiple client requests.</span></span> <span data-ttu-id="4ea39-155">Cette méthode présente des problèmes d’extensibilité, car un thread distinct est créé pour chaque demande du client.</span><span class="sxs-lookup"><span data-stu-id="4ea39-155">This method has scalability issues since a separate thread is created for each client request.</span></span>

-   <span data-ttu-id="4ea39-156">accepter</span><span class="sxs-lookup"><span data-stu-id="4ea39-156">accept</span></span>

    <span data-ttu-id="4ea39-157">Ce répertoire contient un exemple de serveur et un programme client de base.</span><span class="sxs-lookup"><span data-stu-id="4ea39-157">This directory contains a basic sample server and client program.</span></span> <span data-ttu-id="4ea39-158">Le serveur montre l’utilisation d’une acceptation non bloquante à l’aide de la fonction [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) ou d’une acceptation asynchrone à l’aide de la fonction [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) .</span><span class="sxs-lookup"><span data-stu-id="4ea39-158">The server demonstrates the use of either non-blocking accept using the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) function or asynchronous accept using the [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) function.</span></span> <span data-ttu-id="4ea39-159">Cet exemple est plus pour l’illustration et n’est pas un serveur à hautes performances.</span><span class="sxs-lookup"><span data-stu-id="4ea39-159">This sample is more for illustration and is not a high-performance server.</span></span>

 

 
