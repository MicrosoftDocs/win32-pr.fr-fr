---
description: Cette section décrit les pratiques recommandées pour le portage d’une application de diffusion IPv6 vers les fonctionnalités de multidiffusion disponibles avec Windows Sockets.
ms.assetid: 12e491fd-650f-43b4-afa1-9f37b1c30240
title: Portage d’applications de diffusion vers IPv6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b9f7dce09db6822a6f9b0a61873ca6bbff5a256b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104484920"
---
# <a name="porting-broadcast-applications-to-ipv6"></a><span data-ttu-id="a9f04-103">Portage d’applications de diffusion vers IPv6</span><span class="sxs-lookup"><span data-stu-id="a9f04-103">Porting Broadcast Applications to IPv6</span></span>

<span data-ttu-id="a9f04-104">Cette section décrit les pratiques recommandées pour le portage d’une application de diffusion IPv6 vers les fonctionnalités de multidiffusion disponibles avec Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="a9f04-104">This section describes best practices for porting an IPv6 broadcast application to the multicast capabilities available with Windows Sockets.</span></span>

## <a name="comparing-ipv4-to-ipv6"></a><span data-ttu-id="a9f04-105">Comparaison de IPv4 et IPv6</span><span class="sxs-lookup"><span data-stu-id="a9f04-105">Comparing IPv4 to IPv6</span></span>

<span data-ttu-id="a9f04-106">La considération la plus notable lors de la préparation du Portage d’une application de diffusion IPv4 vers IPv6 est la suivante : IPv6 n’a aucun concept de diffusion implémenté.</span><span class="sxs-lookup"><span data-stu-id="a9f04-106">The most notable consideration when preparing to port an IPv4 broadcast application to IPv6 is this: IPv6 has no implemented concept of broadcast.</span></span> <span data-ttu-id="a9f04-107">Au lieu de cela, IPv6 utilise la multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="a9f04-107">Instead, IPv6 uses multicast.</span></span>

<span data-ttu-id="a9f04-108">La multidiffusion pour IPv6 peut émuler les fonctionnalités de diffusion traditionnelles disponibles dans IPv4.</span><span class="sxs-lookup"><span data-stu-id="a9f04-108">Multicast for IPv6 can emulate traditional broadcast capabilities found in IPv4.</span></span> <span data-ttu-id="a9f04-109">La définition de l’option [IPv6 \_ ajouter \_ un](ipproto-ipv6-socket-options.md) socket d’appartenance avec l’adresse IPv6 définie sur l’adresse de l’étendue lien-local de l’ensemble des nœuds (FF02 :: 1) équivaut à diffuser sur les adresses de diffusion IPv4 à l’aide de l’option de socket de [ \_ diffusion so](socket-options.md) .</span><span class="sxs-lookup"><span data-stu-id="a9f04-109">Setting the [IPV6\_ADD\_MEMBERSHIP](ipproto-ipv6-socket-options.md) socket option with the IPv6 address set to the link-local scope all nodes address (FF02::1) is equivalent to broadcasting on IPv4 broadcast addresses using the [SO\_BROADCAST](socket-options.md) socket option.</span></span> <span data-ttu-id="a9f04-110">Cette adresse est parfois appelée *groupe de multidiffusion tous les nœuds*.</span><span class="sxs-lookup"><span data-stu-id="a9f04-110">This address is sometimes called the *all-nodes multicast group*.</span></span> <span data-ttu-id="a9f04-111">Pour les applications qui veulent simplement une émulation de diffusion pour IPv6, cette approche est fonctionnellement équivalente.</span><span class="sxs-lookup"><span data-stu-id="a9f04-111">For applications that simply want broadcast emulation for IPv6, that approach is operationally equivalent.</span></span> <span data-ttu-id="a9f04-112">Toutefois, il existe une différence notable avec IPv6 : les multidiffusions sur l’adresse du groupe de multidiffusion tous les nœuds ne sont pas reçues par défaut (les diffusions IPv4 sont reçues par défaut).</span><span class="sxs-lookup"><span data-stu-id="a9f04-112">One notable difference with IPv6, however, is that multicasts on the all-nodes multicast group address are not received by default (IPv4 broadcasts are received by default).</span></span> <span data-ttu-id="a9f04-113">Les programmeurs d’applications doivent utiliser \_ l' \_ option IPv6 ajouter un socket d’appartenance pour activer la réception par multidiffusion à partir de n’importe quelle source, y compris l’adresse du groupe de multidiffusion tous les nœuds.</span><span class="sxs-lookup"><span data-stu-id="a9f04-113">Application programmers must use the IPV6\_ADD\_MEMBERSHIP socket option to enable multicast reception from any source, including the all-nodes multicast group address.</span></span>

> [!Note]  
> <span data-ttu-id="a9f04-114">Dans IPv6, la sélection de l’interface est spécifiée dans la structure d’arguments passée à l’option de socket multidiffusion ou IOCTL.</span><span class="sxs-lookup"><span data-stu-id="a9f04-114">In IPv6, interface selection is specified in the argument structure passed to the multicast socket option or IOCTL.</span></span>

 

<span data-ttu-id="a9f04-115">Mais pour des transmissions plus riches, plus robustes, plus sélectives et plus faciles à gérer sur plusieurs hôtes, les développeurs d’applications doivent envisager de passer à un modèle de multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="a9f04-115">But for richer, more robust, more selective and more manageable transmissions to multiple hosts, application developers should consider moving to a multicast model.</span></span>

## <a name="moving-to-multicast"></a><span data-ttu-id="a9f04-116">Passage à la multidiffusion</span><span class="sxs-lookup"><span data-stu-id="a9f04-116">Moving to Multicast</span></span>

<span data-ttu-id="a9f04-117">Avec la multidiffusion, les programmeurs d’applications peuvent choisir de manière sélective une paire source/groupe particulière, en activant un modèle de réception sélective.</span><span class="sxs-lookup"><span data-stu-id="a9f04-117">With multicast, application programmers can selectively choose a particular source/group pair, enabling a selective reception model.</span></span> <span data-ttu-id="a9f04-118">La découverte de l’écouteur de multidiffusion (MLD) sur IPv6 et la version 3 du protocole IGMPv3 (Internet Group Management Protocol) sur IPv4 prennent en charge la programmation de la multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="a9f04-118">The Multicast Listener Discovery (MLD) on IPv6 and version 3 of the Internet Group Management Protocol (IGMPv3) on IPv4 support multicasting programming.</span></span> <span data-ttu-id="a9f04-119">En outre, la multidiffusion permet aux applications de bloquer spécifiquement (ou débloquer) des expéditeurs dans un groupe, et de protéger les applications contre les diffuseurs non autorisés.</span><span class="sxs-lookup"><span data-stu-id="a9f04-119">In addition, multicast enables applications to specifically block (or unblock) senders within a group, further protecting applications from rogue broadcasters.</span></span> <span data-ttu-id="a9f04-120">Cette fonctionnalité est disponible pour IPv4 (requiert IGMPv3) et IPv6 (nécessite MLDv2).</span><span class="sxs-lookup"><span data-stu-id="a9f04-120">This capability is available for IPv4 (requires IGMPv3) as well as IPv6 (requires MLDv2).</span></span>

<span data-ttu-id="a9f04-121">Il existe deux principaux scénarios pour les programmeurs d’applications utilisant la multidiffusion : le portage d’applications de diffusion IPv4 (ou de multidiffusion) vers IPv6, et ceux qui créent de nouvelles applications de multidiffusion IPv6.</span><span class="sxs-lookup"><span data-stu-id="a9f04-121">There are two primary scenarios for application programmers using multicast: those porting from IPv4 broadcast (or multicast) applications to IPv6, and those creating new IPv6 multicast applications.</span></span>

<span data-ttu-id="a9f04-122">Pour le portage des applications existantes, vous pouvez passer à la multidiffusion IPv6 en utilisant les options de socket et les IOCTL.</span><span class="sxs-lookup"><span data-stu-id="a9f04-122">For porting existing applications, there are two options to move to IPv6 multicast: using socket options and using IOCTLs.</span></span>

-   <span data-ttu-id="a9f04-123">L’utilisation des options de socket est une approche basée sur les modifications, qui permet aux développeurs de modifier les propriétés de socket en fonction des besoins (tels que le blocage ou le déblocage d’un expéditeur, l’ajout d’une nouvelle source, etc.).</span><span class="sxs-lookup"><span data-stu-id="a9f04-123">Using socket options is a change-based approach, which enables developers to change the socket properties as required (such as blocking or unblocking a sender, adding a new source, and so on).</span></span> <span data-ttu-id="a9f04-124">Cette approche est plus intuitive et l’approche recommandée.</span><span class="sxs-lookup"><span data-stu-id="a9f04-124">This approach is more intuitive and the recommended approach.</span></span> <span data-ttu-id="a9f04-125">Pour plus d’informations sur l’approche basée sur les modifications de la programmation de multidiffusion, consultez [MLD et IGMP à l’aide de Windows Sockets](igmp-and-windows-sockets.md).</span><span class="sxs-lookup"><span data-stu-id="a9f04-125">For more information on the change-based approach to multicast programming, see [MLD and IGMP Using Windows Sockets](igmp-and-windows-sockets.md).</span></span>
-   <span data-ttu-id="a9f04-126">L’utilisation d’IOCTL est une approche basée sur l’état final, car elle permet aux développeurs de fournir un état de socket entièrement configuré, y compris des listes d’inclusion et d’exclusion, avec un appel.</span><span class="sxs-lookup"><span data-stu-id="a9f04-126">Using IOCTLs is a final-state based approach, because it enables developers to provide a fully-configured socket state, including inclusion and exclusion lists, with one call.</span></span> <span data-ttu-id="a9f04-127">Pour plus d’informations sur l’approche basée sur l’état final, consultez programmation de la [multidiffusion basée sur l’état final](final-state-based-multicast-programming.md).</span><span class="sxs-lookup"><span data-stu-id="a9f04-127">For more information on the final-state based approach, see [Final-State-Based Multicast Programming](final-state-based-multicast-programming.md).</span></span>

<span data-ttu-id="a9f04-128">Pour les utilisateurs qui créent de nouvelles applications de multidiffusion IPv6, la pratique recommandée consiste à utiliser des options de socket plutôt que des ioctl.</span><span class="sxs-lookup"><span data-stu-id="a9f04-128">For those creating new IPv6 multicast applications, the recommended practice is to use socket options, rather than using IOCTLs.</span></span>

<span data-ttu-id="a9f04-129">Il existe une autre approche pour créer des applications de multidiffusion avec IPv6, et cela implique l’utilisation de la fonction [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) .</span><span class="sxs-lookup"><span data-stu-id="a9f04-129">There is one other approach to creating multicast applications with IPv6, and that entails using the [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) function.</span></span> <span data-ttu-id="a9f04-130">Bien que l’utilisation de la fonction **WSAJoinLeaf** ne soit pas la pratique recommandée, il existe des situations qui peuvent en imposer l’utilisation.</span><span class="sxs-lookup"><span data-stu-id="a9f04-130">While using the **WSAJoinLeaf** function is not the recommended practice, there are situations that may dictate its use.</span></span> <span data-ttu-id="a9f04-131">Par exemple, l’un des inconvénients de l’utilisation des options de socket sur Windows Server 2003 et versions antérieures est qu’elles sont spécifiques à la version IP.</span><span class="sxs-lookup"><span data-stu-id="a9f04-131">For example, one drawback to using socket options on Windows Server 2003 and earlier is that they are IP version specific.</span></span> <span data-ttu-id="a9f04-132">Sur ces versions antérieures de Windows, les différentes options de sockets doivent être pour IPv6 et IPv4.</span><span class="sxs-lookup"><span data-stu-id="a9f04-132">On these older versions of Windows, different sockets options must be for IPv6 and IPv4.</span></span> <span data-ttu-id="a9f04-133">Sur Windows Vista et versions ultérieures, les nouvelles options de socket sont prises en charge et peuvent être utilisées avec IPv4 et IPv6.</span><span class="sxs-lookup"><span data-stu-id="a9f04-133">On Windows Vista and later, new socket options are supported that can be used with both IPv4 and IPv6.</span></span> <span data-ttu-id="a9f04-134">La fonction **WSAJoinLeaf** , en revanche, est dépendante de la version IP et du protocole, et il peut donc s’agir d’une approche utile pour créer une application qui doit fonctionner avec plusieurs versions d’IP sur Windows Server 2003 et versions antérieures.</span><span class="sxs-lookup"><span data-stu-id="a9f04-134">The **WSAJoinLeaf** function, in contrast, is IP version and protocol agnostic, and therefore it can be a useful approach for building an application that must work with multiple IP versions on Windows Server 2003 and earlier.</span></span> <span data-ttu-id="a9f04-135">L’utilisation de la fonction **WSAJoinLeaf** peut être plus appropriée dans certaines situations où le agnostique protocole et IP-version est requis.</span><span class="sxs-lookup"><span data-stu-id="a9f04-135">Using the **WSAJoinLeaf** function may be more appropriate in certain situations where protocol and IP-version agnosticism is required.</span></span>

 

 



