---
description: La multidiffusion IP se trouve dans la catégorie du plan de données et du plan de contrôle qui ne sont pas associés à une racine.
ms.assetid: 474a1c7f-0ece-4192-a2d9-6e2f3df2ac02
title: Multidiffusion IP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3bf9469822ae974b7c616b7904f9dc7120682acb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106544658"
---
# <a name="ip-multicast"></a><span data-ttu-id="81c34-103">Multidiffusion IP</span><span class="sxs-lookup"><span data-stu-id="81c34-103">IP Multicast</span></span>

<span data-ttu-id="81c34-104">La multidiffusion IP se trouve dans la catégorie du plan de données et du plan de contrôle qui ne sont pas associés à une racine.</span><span class="sxs-lookup"><span data-stu-id="81c34-104">IP multicast falls into the category of nonrooted data plane and nonrooted control plane.</span></span> <span data-ttu-id="81c34-105">Toutes les applications jouent un rôle feuille.</span><span class="sxs-lookup"><span data-stu-id="81c34-105">All applications play a leaf role.</span></span> <span data-ttu-id="81c34-106">Actuellement, la plupart des implémentations de multidiffusion IP utilisent un ensemble d’options de socket proposées par Steve Deering à l’IETF (Internet Engineering Task Force).</span><span class="sxs-lookup"><span data-stu-id="81c34-106">Currently, most IP multicast implementations use a set of socket options proposed by Steve Deering to the Internet Engineering Task Force (IETF).</span></span> <span data-ttu-id="81c34-107">Cinq opérations sont donc rendues disponibles :</span><span class="sxs-lookup"><span data-stu-id="81c34-107">Five operations are thus made available:</span></span>

-   <span data-ttu-id="81c34-108">\_TTL de multidiffusion IP \_ : définit la portée de la durée de vie et contrôle l’étendue d’une session de multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="81c34-108">IP\_MULTICAST\_TTL—Sets time-to-live, controls scope of a multicast session.</span></span>
-   <span data-ttu-id="81c34-109">Multidiffusion IP \_ \_ si : détermine l’interface à utiliser pour la multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="81c34-109">IP\_MULTICAST\_IF—Determines interface to be used for multicasting.</span></span>
-   <span data-ttu-id="81c34-110">IP \_ Add \_ MEMBERSHI : joint une session de multidiffusion spécifiée.</span><span class="sxs-lookup"><span data-stu-id="81c34-110">IP\_ADD\_MEMBERSHI —Joins a specified multicast session.</span></span>
-   <span data-ttu-id="81c34-111">\_Adhésion IP Drop \_ : abandon d’une session de multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="81c34-111">IP\_DROP\_MEMBERSHIP—Drops out of a multicast session.</span></span>
-   <span data-ttu-id="81c34-112">\_Boucle de multidiffusion IP \_ : contrôle le bouclage du trafic de multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="81c34-112">IP\_MULTICAST\_LOOP—Controls loopback of multicast traffic.</span></span>

<span data-ttu-id="81c34-113">La définition de la durée de vie d’un socket IP-multicast correspond directement à l’utilisation du \_ \_ Code de commande d’étendue de multidiffusion SIO pour [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl).</span><span class="sxs-lookup"><span data-stu-id="81c34-113">Setting the time-to-live for an IP-multicast socket maps directly to using the SIO\_MULTICAST\_SCOPE command code for [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl).</span></span>

<span data-ttu-id="81c34-114">La méthode permettant de déterminer l’interface IP à utiliser pour la multidiffusion consiste à utiliser une option de socket spécifique à TCP/IP, comme décrit dans l’annexe Windows Sockets 2 Protocol-Specific.</span><span class="sxs-lookup"><span data-stu-id="81c34-114">The method for determining the IP interface to be used for multicasting is through a TCP/IP-specific socket option as described in the Windows Sockets 2 Protocol-Specific Annex.</span></span> <span data-ttu-id="81c34-115">Les trois opérations restantes sont traitées correctement avec la sémantique Windows Sockets 2 décrite ici.</span><span class="sxs-lookup"><span data-stu-id="81c34-115">The remaining three operations are covered well with the Windows Sockets 2 semantics described here.</span></span>

<span data-ttu-id="81c34-116">L’application ouvre les sockets avec des \_ indicateurs feuille p feuille/d \_ dans [**WSASocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa).</span><span class="sxs-lookup"><span data-stu-id="81c34-116">The application would open sockets with c\_leaf/d\_leaf flags in [**WSASocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa).</span></span> <span data-ttu-id="81c34-117">Elle utilise [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) pour s’ajouter à un groupe de multidiffusion sur l’interface par défaut désignée pour les opérations de multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="81c34-117">It would use [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) to add itself to a multicast group on the default interface designated for multicast operations.</span></span> <span data-ttu-id="81c34-118">Si l’indicateur dans **WSAJoinLeaf** indique que ce socket n’est qu’un expéditeur, l’opération de jointure est essentiellement un non-op et aucun message IGMP n’a besoin d’être envoyé.</span><span class="sxs-lookup"><span data-stu-id="81c34-118">If the flag in **WSAJoinLeaf** indicates that this socket is only a sender, then the join operation is essentially a no-op and no IGMP messages need to be sent.</span></span> <span data-ttu-id="81c34-119">Dans le cas contraire, un paquet IGMP est envoyé au routeur pour indiquer les intérêts de réception des paquets envoyés à l’adresse de multidiffusion spécifiée.</span><span class="sxs-lookup"><span data-stu-id="81c34-119">Otherwise, an IGMP packet is sent out to the router to indicate interests in receiving packets sent to the specified multicast address.</span></span> <span data-ttu-id="81c34-120">Étant donné que l’application a créé des \_ sockets feuille c feuille/d spéciaux \_ , utilisés uniquement pour l’exécution de la multidiffusion, la fonction [**opération closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) standard serait utilisée pour sortir de la session de multidiffusion.</span><span class="sxs-lookup"><span data-stu-id="81c34-120">Since the application created special c\_leaf/d\_leaf sockets used only for performing multicast, the standard [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) function would be used to drop out of the multicast session.</span></span> <span data-ttu-id="81c34-121">Le \_ \_ Code de commande de bouclage multipoint SIO pour [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) fournit un mécanisme de contrôle générique permettant de déterminer si les données envoyées sur un \_ Socket de feuille d dans un schéma multipoint sans racine peuvent également être reçues sur le même socket.</span><span class="sxs-lookup"><span data-stu-id="81c34-121">The SIO\_MULTIPOINT\_LOOPBACK command code for [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) provides a generic control mechanism for determining whether data sent on a d\_leaf socket in a nonrooted multipoint scheme can also be received on the same socket.</span></span>

> [!Note]  
> <span data-ttu-id="81c34-122">La version Winsock de l' \_ option de boucle de multidiffusion IP \_ est sémantiquement différente de la version UNIX de l' \_ option de boucle de multidiffusion IP \_ :</span><span class="sxs-lookup"><span data-stu-id="81c34-122">The Winsock version of the IP\_MULTICAST\_LOOP option is semantically different than the UNIX version of the IP\_MULTICAST\_LOOP option:</span></span>

 

-   <span data-ttu-id="81c34-123">Dans Winsock, l' \_ option de boucle de multidiffusion IP \_ s’applique uniquement au chemin de réception.</span><span class="sxs-lookup"><span data-stu-id="81c34-123">In Winsock, the IP\_MULTICAST\_LOOP option applies only to the receive path.</span></span>
-   <span data-ttu-id="81c34-124">Dans la version UNIX, l' \_ option de boucle de multidiffusion IP \_ s’applique au chemin d’envoi.</span><span class="sxs-lookup"><span data-stu-id="81c34-124">In the UNIX version, the IP\_MULTICAST\_LOOP option applies to the send path.</span></span>

<span data-ttu-id="81c34-125">Par exemple, les applications ACTIVÉes et désactivées (plus faciles à suivre que X et Y) rejoignent le même groupe sur la même interface ; application sur définit l' \_ \_ option de boucle de multidiffusion IP activée, la désactivation de l’application définit l' \_ option de boucle de multidiffusion IP \_ désactivée.</span><span class="sxs-lookup"><span data-stu-id="81c34-125">For example, applications ON and OFF (which are easier to track than X and Y) join the same group on the same interface; application ON sets the IP\_MULTICAST\_LOOP option on, application OFF sets the IP\_MULTICAST\_LOOP option off.</span></span> <span data-ttu-id="81c34-126">Si ON et OFF sont des applications Winsock, OFF peut envoyer à ON, mais ON ne peut pas l’envoyer à OFF.</span><span class="sxs-lookup"><span data-stu-id="81c34-126">If ON and OFF are Winsock applications, OFF can send to ON, but ON cannot sent to OFF.</span></span> <span data-ttu-id="81c34-127">En revanche, si ON et OFF sont des applications UNIX, ON peut envoyer à OFF, mais OFF ne peut pas envoyer à ON.</span><span class="sxs-lookup"><span data-stu-id="81c34-127">In contrast, if ON and OFF are UNIX applications, ON can send to OFF, but OFF cannot send to ON.</span></span>

 

 



