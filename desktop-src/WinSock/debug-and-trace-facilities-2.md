---
description: Fonctionnalités de débogage et de suivi et Windows Sockets 2.
ms.assetid: eb29fc21-92d6-4471-860a-fd1c531686f6
title: Fonctionnalités de débogage et de suivi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7288c6b4d72a7a375ee16da23a25b0a04a46df91
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106515242"
---
# <a name="debug-and-trace-facilities"></a><span data-ttu-id="943f7-103">Fonctionnalités de débogage et de suivi</span><span class="sxs-lookup"><span data-stu-id="943f7-103">Debug and Trace Facilities</span></span>

<span data-ttu-id="943f7-104">Les développeurs d’applications Windows Sockets 2 doivent isoler les bogues dans :</span><span class="sxs-lookup"><span data-stu-id="943f7-104">Windows Sockets 2 application developers need to isolate bugs in:</span></span>

-   <span data-ttu-id="943f7-105">Application.</span><span class="sxs-lookup"><span data-stu-id="943f7-105">The application.</span></span>
-   <span data-ttu-id="943f7-106">*Ws2 \_32.dll* ou l’une des dll de shim de compatibilité.</span><span class="sxs-lookup"><span data-stu-id="943f7-106">The *Ws2\_32.dll* or one of the compatibility shim DLLs.</span></span>
-   <span data-ttu-id="943f7-107">Fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="943f7-107">The service provider.</span></span>

<span data-ttu-id="943f7-108">Windows Sockets 2 répond à ce besoin par le biais de plusieurs composants et fonctionnalités :</span><span class="sxs-lookup"><span data-stu-id="943f7-108">Windows Sockets 2 addresses this need through several components and features:</span></span>

-   <span data-ttu-id="943f7-109">Prise en charge intégrée du suivi Winsock sur Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="943f7-109">Integrated support for Winsock tracing on Windows Vista and later.</span></span>
-   <span data-ttu-id="943f7-110">Une version de débogage spécialement conçue de *la \_32.dllWs2* sur Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="943f7-110">A specially devised debug version of the *Ws2\_32.dll* on Windows Vista.</span></span>
-   <span data-ttu-id="943f7-111">Une fonctionnalité de débogage et de traçage primitive distincte pour une utilisation sur Windows Server 2003 et Windows XP.</span><span class="sxs-lookup"><span data-stu-id="943f7-111">A separate primitive debug and trace facility for use on Windows Server 2003 and Windows XP.</span></span>

## <a name="winsock-tracing-using-event-tracing-for-windows"></a><span data-ttu-id="943f7-112">Suivi Winsock à l’aide de Suivi d’v nements pour Windows</span><span class="sxs-lookup"><span data-stu-id="943f7-112">Winsock Tracing using Event Tracing for Windows</span></span>

<span data-ttu-id="943f7-113">La prise en charge intégrée du suivi Winsock à l’aide d’Suivi d’v nements pour Windows (ETW) est incluse sur Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="943f7-113">Integrated support for Winsock tracing using Event Tracing for Windows (ETW) is included on Windows Vista and later.</span></span> <span data-ttu-id="943f7-114">Il s’agit de la méthode recommandée pour le suivi des appels Winsock sur Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="943f7-114">This is the preferred method for tracing Winsock calls on Windows Vista and later.</span></span> <span data-ttu-id="943f7-115">Le suivi Winsock à l’aide d’ETW est léger et fonctionne sur les versions commerciales de Windows.</span><span class="sxs-lookup"><span data-stu-id="943f7-115">Winsock tracing using ETW is lightweight and works on retail versions of Windows.</span></span> <span data-ttu-id="943f7-116">Aucun logiciel ou composant supplémentaire n’est requis.</span><span class="sxs-lookup"><span data-stu-id="943f7-116">No additional software or components are required.</span></span> <span data-ttu-id="943f7-117">Cette fonctionnalité doit simplement être activée sur Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="943f7-117">This feature just needs to be enabled on Windows Vista and later.</span></span> <span data-ttu-id="943f7-118">Pour plus d’informations, consultez les rubriques de [suivi Winsock](winsock-tracing.md) .</span><span class="sxs-lookup"><span data-stu-id="943f7-118">For more detailed information, see the [Winsock Tracing](winsock-tracing.md) topics.</span></span>

## <a name="using-a-debug-version-of-ws2_32dll"></a><span data-ttu-id="943f7-119">Utilisation d’une version de débogage de Ws2 \_32.dll</span><span class="sxs-lookup"><span data-stu-id="943f7-119">Using a Debug Version of Ws2\_32.dll</span></span>

<span data-ttu-id="943f7-120">La combinaison d’une version de débogage de la *\_32.dllWs2* sur Windows Vista et le suivi Winsock permet d’analyser tous les appels de procédure sur l’API Windows Sockets 2 ou SPI et, dans une certaine mesure, contrôlés.</span><span class="sxs-lookup"><span data-stu-id="943f7-120">The combination of a debug version of the *Ws2\_32.dll* on Windows Vista and Winsock tracing allows all procedure calls across the Windows Sockets 2 API or SPI to be monitored and, to some extent, controlled.</span></span>

<span data-ttu-id="943f7-121">Si une version du kit de développement logiciel (SDK) Microsoft Windows pour Windows Vista est installée à l’emplacement par défaut, les versions Debug de la *\_32.dllWs2* pour différentes architectures se trouvent dans le dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="943f7-121">If a version of the Microsoft Windows Software Development Kit (SDK) for Windows Vista is installed to the default location, debug versions of the *Ws2\_32.dll* for various architectures are located under the following folder:</span></span>

<span data-ttu-id="943f7-122">**C : \\ Program Files \\ Microsoft SDK \\ Windows \\ v 6.0 \\ noredimst**</span><span class="sxs-lookup"><span data-stu-id="943f7-122">**C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0\\NoRedist**</span></span>

<span data-ttu-id="943f7-123">Une version vérifiée de *l' \_32.dllWs2* qui correspond à la version de Windows et au Service Pack sur lequel vous effectuez le test doit être utilisée.</span><span class="sxs-lookup"><span data-stu-id="943f7-123">A checked version of the *Ws2\_32.dll* that matches the version of Windows and the Service Pack you are testing on should be used.</span></span> <span data-ttu-id="943f7-124">Sachez que des correctifs de sécurité ont peut-être été appliqués et mis à jour le *\_32.dllWs2* sur votre système de test.</span><span class="sxs-lookup"><span data-stu-id="943f7-124">Be aware that security patches may have been applied that updated the *Ws2\_32.dll* on your test system.</span></span> <span data-ttu-id="943f7-125">La SDK Windows pour Windows Vista et les anciens abonnements de DVD/CD du kit de développement logiciel (SDK) de la plateforme précédente incluent les builds vérifiées pour les différentes versions de Windows.</span><span class="sxs-lookup"><span data-stu-id="943f7-125">The Windows SDK for Windows Vista and the earlier Platform Software Development Kit (SDK) DVD/CD subscriptions include checked builds for the various versions of Windows.</span></span> <span data-ttu-id="943f7-126">Vous devez utiliser la même version vérifiée de *la \_32.dllWs2* que la version commerciale qui a été utilisée sur le système en cours de test.</span><span class="sxs-lookup"><span data-stu-id="943f7-126">You should use the same checked version of the *Ws2\_32.dll* as the retail version that was used on the system being tested.</span></span> <span data-ttu-id="943f7-127">Notez également que le comportement qui s’exécute sous une build vérifiée n’est pas le même que celui de l’exécution avec une version commerciale.</span><span class="sxs-lookup"><span data-stu-id="943f7-127">Note also that behavior running under a checked build will not be the same as running with a retail build.</span></span>

<span data-ttu-id="943f7-128">**Remarque**  Les SDK Windows pour Windows Server 2008 et versions ultérieures n’incluent plus les versions de débogage spéciales du *\_32.dllWs2*.</span><span class="sxs-lookup"><span data-stu-id="943f7-128">**Note**  The Windows SDK for Windows Server 2008 and later no longer includes special debug versions of the *Ws2\_32.dll*.</span></span> <span data-ttu-id="943f7-129">Les développeurs doivent utiliser le suivi Winsock à l’aide d’ETW, car cette fonctionnalité ne nécessite pas de versions Debug.</span><span class="sxs-lookup"><span data-stu-id="943f7-129">Developers should use Winsock tracing using ETW instead, since this feature does not require debug builds.</span></span>

## <a name="winsock-debug-and-trace-facility-on-windows-server-2003-and-windows-xp"></a><span data-ttu-id="943f7-130">Fonctionnalité de débogage et de traçage Winsock sur Windows Server 2003 et Windows XP</span><span class="sxs-lookup"><span data-stu-id="943f7-130">Winsock Debug and Trace Facility on Windows Server 2003 and Windows XP</span></span>

<span data-ttu-id="943f7-131">Les versions antérieures de Windows antérieures à Windows 8 et Windows Server 2012 prennent en charge une fonctionnalité de débogage et de traçage primitive distincte qui est incluse comme un exemple avec les SDK Windows et l’ancien SDK de plateforme.</span><span class="sxs-lookup"><span data-stu-id="943f7-131">Older versions of Windows prior to Windows 8 and Windows Server 2012 support a separate primitive debug and trace facility that is included as a sample with the Windows SDK and the older Platform SDK.</span></span> <span data-ttu-id="943f7-132">La fonction de débogage/trace ne doit être utilisée que sur Windows Server 2003 et Windows XP où le suivi Winsock n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="943f7-132">The debug/trace facility should only be used on Windows Server 2003 and Windows XP where Winsock tracing is not supported.</span></span>

<span data-ttu-id="943f7-133">Si le SDK Windows pour Windows 7 est installé à l’emplacement par défaut, cette fonctionnalité de suivi Winsock primitive est installée dans le dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="943f7-133">If the Windows SDK for Windows 7 is installed to the default location, this primitive Winsock tracing feature is installed in the following folder:</span></span>

<span data-ttu-id="943f7-134">**C : \\ Program Files \\ Microsoft SDK \\ Windows \\ v 7.0 \\ exemples \\ NetDs \\ Winsock \\ DT \_ dll**</span><span class="sxs-lookup"><span data-stu-id="943f7-134">**C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Samples\\NetDs\\winsock\\dt\_dll**</span></span>

<span data-ttu-id="943f7-135">Le fichier *DbgSpec.doc* dans ce dossier fournit une documentation sur cette fonctionnalité de trace primitive.</span><span class="sxs-lookup"><span data-stu-id="943f7-135">The *DbgSpec.doc* file in this folder provides documentation on this primitive trace facility.</span></span> <span data-ttu-id="943f7-136">L’exemple de code dans le \_ dossier de la dll DT doit être compilé pour utiliser cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="943f7-136">The sample code in the dt\_dll folder needs to be compiled to use this facility.</span></span> <span data-ttu-id="943f7-137">Les développeurs sont libres d’utiliser le code source pour développer des versions de la DLL Debug/trace qui répondent à leurs besoins spécifiques.</span><span class="sxs-lookup"><span data-stu-id="943f7-137">Developers are free to use the source code to develop versions of the debug/trace DLL that meet their specific needs.</span></span>

<span data-ttu-id="943f7-138">Notez que cette fonctionnalité de trace Winsock primitive ne fonctionne que si la version de débogage de *Ws2 \_32.dll* installée.</span><span class="sxs-lookup"><span data-stu-id="943f7-138">Note that this primitive Winsock trace feature will only work with the debug version of *Ws2\_32.dll* installed.</span></span> <span data-ttu-id="943f7-139">Vous devez donc obtenir une version vérifiée de la *\_32.dllWs2* qui correspond à la version de Windows et au Service Pack sur lequel vous effectuez le test.</span><span class="sxs-lookup"><span data-stu-id="943f7-139">So you will need to get a checked version of the *Ws2\_32.dll* that matches the version of Windows and the Service Pack you are testing on.</span></span>

<span data-ttu-id="943f7-140">Une limitation de cette fonctionnalité de \_ trace de dll DT primitive est que l’exemple de code utilise un verrou global (section critique) pour chaque appel de fonction Winsock.</span><span class="sxs-lookup"><span data-stu-id="943f7-140">A limitation of this primitive dt\_dll trace facility is that the sample code uses a global lock (critical section) for each Winsock function call.</span></span> <span data-ttu-id="943f7-141">Cette fonctionnalité n’est donc pas utile dans le traitement des conditions de concurrence.</span><span class="sxs-lookup"><span data-stu-id="943f7-141">So this facility is not useful in dealing with race conditions.</span></span> <span data-ttu-id="943f7-142">L’exemple de code doit être largement réécrit pour rendre cette fonctionnalité de trace utile pour gérer la plupart des problèmes Winsock réels (en remplaçant les verrous globaux).</span><span class="sxs-lookup"><span data-stu-id="943f7-142">The sample code would need to be substantially rewritten to make this trace facility useful for dealing with most real Winsock problems (replacing the global locks).</span></span> <span data-ttu-id="943f7-143">Cet exemple de code permet aux développeurs de suivre les appels de procédure, les retours de procédure, les valeurs de paramètre et les valeurs de retour.</span><span class="sxs-lookup"><span data-stu-id="943f7-143">This sample code does allow developers to trace the procedure calls, procedure returns, parameter values, and return values.</span></span>

<span data-ttu-id="943f7-144">Les développeurs peuvent utiliser ce mécanisme primitif pour suivre les appels de procédure, les retours de procédure, les valeurs de paramètre et les valeurs de retour.</span><span class="sxs-lookup"><span data-stu-id="943f7-144">Developers can use this primitive mechanism to trace procedure calls, procedure returns, parameter values, and return values.</span></span> <span data-ttu-id="943f7-145">Les valeurs de paramètre et les valeurs de retour peuvent être modifiées lors de l’appel de procédure ou du retour de procédure.</span><span class="sxs-lookup"><span data-stu-id="943f7-145">Parameter values and return values can be altered on procedure call or procedure return.</span></span> <span data-ttu-id="943f7-146">Si vous le souhaitez, un appel de procédure peut être empêché ou redirigé.</span><span class="sxs-lookup"><span data-stu-id="943f7-146">If desired, a procedure call can be prevented or redirected.</span></span> <span data-ttu-id="943f7-147">Avec un accès à ce niveau d’informations et de contrôle, un développeur est mieux en mesure d’isoler un problème dans l’application, le service *Ws2 \_32.dll* ou le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="943f7-147">With access to this level of information and control, a developer is better able to isolate a problem in the application, *Ws2\_32.dll*, or service provider.</span></span>

## <a name="related-topics"></a><span data-ttu-id="943f7-148">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="943f7-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="943f7-149">Suivi Winsock</span><span class="sxs-lookup"><span data-stu-id="943f7-149">Winsock Tracing</span></span>](winsock-tracing.md)
</dt> </dl>

 

 



