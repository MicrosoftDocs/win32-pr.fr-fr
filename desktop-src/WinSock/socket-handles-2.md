---
description: Un handle de socket peut éventuellement être un descripteur de fichier dans Windows Sockets 2. Un descripteur de socket d’un fournisseur Winsock peut être utilisé avec d’autres fonctions non-Winsock, telles que ReadFile, WriteFile, ReadFileEx et WriteFileEx.
ms.assetid: 986dd9d8-52be-47aa-92b2-6cd40b83f5de
title: Handles de socket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ca6ca8ed935819e018a59c52fb43dcf816530c07
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106534199"
---
# <a name="socket-handles"></a><span data-ttu-id="480e0-104">Handles de socket</span><span class="sxs-lookup"><span data-stu-id="480e0-104">Socket Handles</span></span>

<span data-ttu-id="480e0-105">Un handle de socket peut éventuellement être un descripteur de fichier dans Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="480e0-105">A socket handle can optionally be a file handle in Windows Sockets 2.</span></span> <span data-ttu-id="480e0-106">Un descripteur de socket d’un fournisseur Winsock peut être utilisé avec d’autres fonctions non-Winsock, telles que [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/win32/api/fileapi/nf-fileapi-readfileex)et [**WriteFileEx**](/windows/win32/api/fileapi/nf-fileapi-writefileex).</span><span class="sxs-lookup"><span data-stu-id="480e0-106">A socket handle from a Winsock provider can be used with other non-Winsock functions such as [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/win32/api/fileapi/nf-fileapi-readfileex), and [**WriteFileEx**](/windows/win32/api/fileapi/nf-fileapi-writefileex).</span></span>

<span data-ttu-id="480e0-107">Le membre **XP1 \_ IFS \_ gère** la structure d’informations de protocole pour un fournisseur détermine si un handle de socket d’un fournisseur est un handle IFS (Installable File System).</span><span class="sxs-lookup"><span data-stu-id="480e0-107">The **XP1\_IFS\_HANDLES** member in the protocol information structure for a provider determines whether a socket handle from a provider is an Installable File System (IFS) handle.</span></span> <span data-ttu-id="480e0-108">Les descripteurs de socket qui sont des handles IFS peuvent être utilisés sans aucune altération des performances avec d’autres fonctions non-Winsock ([**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) et [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), par exemple).</span><span class="sxs-lookup"><span data-stu-id="480e0-108">Socket handles that are IFS handles can be used without a performance penalty with other non-Winsock functions ([**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), for example).</span></span> <span data-ttu-id="480e0-109">Les descripteurs de socket non-IFS lorsqu’ils sont utilisés avec des fonctions non-Winsock (**ReadFile** et **WriteFile**, par exemple) entraînent des interactions entre le fournisseur et le système de fichiers où une surcharge de traitement supplémentaire est impliquée, ce qui peut entraîner une baisse significative des performances.</span><span class="sxs-lookup"><span data-stu-id="480e0-109">Any non-IFS socket handles when used with non-Winsock functions (**ReadFile** and **WriteFile**, for example) result in interactions between the provider and the file system where extra processing overhead is involved that can result in a significant performance penalty.</span></span> <span data-ttu-id="480e0-110">Lorsque vous utilisez des descripteurs de socket avec des fonctions non-Winsock, les codes d’erreur propagés à partir du système de fichiers de base ne sont pas toujours mappés aux codes d’erreur Winsock.</span><span class="sxs-lookup"><span data-stu-id="480e0-110">When using socket handles with non-Winsock functions, the error codes propagated from the base file system are not always mapped to Winsock error codes.</span></span> <span data-ttu-id="480e0-111">Par conséquent, il est recommandé d’utiliser les descripteurs de socket uniquement avec les fonctions Winsock.</span><span class="sxs-lookup"><span data-stu-id="480e0-111">Consequently, it is recommended that socket handles be used only with Winsock functions.</span></span>

<span data-ttu-id="480e0-112">Un descripteur de socket ne doit pas être utilisé avec la fonction [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) .</span><span class="sxs-lookup"><span data-stu-id="480e0-112">A socket handle should not be used with the [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) function.</span></span> <span data-ttu-id="480e0-113">La présence de fournisseurs de services en couche (LSP) peut provoquer l’échec de cette opération et il n’existe aucun moyen pour le processus de destination d’importer le descripteur de Socket.</span><span class="sxs-lookup"><span data-stu-id="480e0-113">The presence of layered service providers (LSPs) can cause this to fail and there is no way for the destination process to import the socket handle.</span></span>

> [!Note]  
> <span data-ttu-id="480e0-114">Les fournisseurs de services en couche sont déconseillés.</span><span class="sxs-lookup"><span data-stu-id="480e0-114">Layered Service Providers are deprecated.</span></span> <span data-ttu-id="480e0-115">À compter de Windows 8 et de Windows Server 2012, utilisez la [plateforme de filtrage Windows](../fwp/windows-filtering-platform-start-page.md).</span><span class="sxs-lookup"><span data-stu-id="480e0-115">Starting with Windows 8 and Windows Server 2012, use [Windows Filtering Platform](../fwp/windows-filtering-platform-start-page.md).</span></span>

 

<span data-ttu-id="480e0-116">Windows Sockets 2 a développé certaines fonctions qui transfèrent les données entre les sockets à l’aide de handles.</span><span class="sxs-lookup"><span data-stu-id="480e0-116">Windows Sockets 2 has expanded certain functions that transfer data between sockets using handles.</span></span> <span data-ttu-id="480e0-117">Les fonctions offrent des avantages spécifiques aux sockets pour transférer des données et incluent [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend)et [**WSADuplicateSocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsaduplicatesocketa).</span><span class="sxs-lookup"><span data-stu-id="480e0-117">The functions offer advantages specific to sockets for transferring data and include [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), and [**WSADuplicateSocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsaduplicatesocketa).</span></span>

 

 
