---
description: 'Plusieurs options sont disponibles pour recevoir des indications de saisie semi-automatique, fournissant ainsi aux applications des niveaux de flexibilité appropriés. Celles-ci incluent : en attente (ou blocage) sur les objets d’événement, les objets d’événement d’interrogation et les routines d’exécution d’e/s de Socket.'
ms.assetid: 071cf198-6b4c-445e-9bd9-044f57f994a3
title: Réception des indications d’achèvement
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd05d8297af17c26393b5db113fac283b39fcbb3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106534068"
---
# <a name="receiving-completion-indications"></a><span data-ttu-id="1099b-104">Réception des indications d’achèvement</span><span class="sxs-lookup"><span data-stu-id="1099b-104">Receiving Completion Indications</span></span>

<span data-ttu-id="1099b-105">Plusieurs options sont disponibles pour recevoir des indications de saisie semi-automatique, fournissant ainsi aux applications des niveaux de flexibilité appropriés.</span><span class="sxs-lookup"><span data-stu-id="1099b-105">Several options are available for receiving completion indications, thus providing applications with appropriate levels of flexibility.</span></span> <span data-ttu-id="1099b-106">Celles-ci incluent : en attente (ou blocage) sur les objets d’événement, les objets d’événement d’interrogation et les routines d’exécution d’e/s de Socket.</span><span class="sxs-lookup"><span data-stu-id="1099b-106">These include: waiting (or blocking) on event objects, polling event objects, and socket I/O completion routines.</span></span>

## <a name="blocking-and-waiting-for-completion-indication"></a><span data-ttu-id="1099b-107">Blocage et attente de l’indication d’achèvement</span><span class="sxs-lookup"><span data-stu-id="1099b-107">Blocking and Waiting for Completion Indication</span></span>

<span data-ttu-id="1099b-108">Les applications peuvent bloquer en attendant qu’un ou plusieurs objets d’événement soient définis à l’aide de la fonction [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) .</span><span class="sxs-lookup"><span data-stu-id="1099b-108">Applications can block while waiting for one or more event objects to become set using the [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) function.</span></span> <span data-ttu-id="1099b-109">Dans les implémentations de Windows, le processus ou le thread se bloque véritablement.</span><span class="sxs-lookup"><span data-stu-id="1099b-109">In Windows implementations, the process or thread truly blocks.</span></span> <span data-ttu-id="1099b-110">Étant donné que les objets d’événement Windows Sockets 2 sont implémentés en tant qu’événements Windows, la fonction Windows native, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) peut également être utilisée à cet effet.</span><span class="sxs-lookup"><span data-stu-id="1099b-110">Since Windows Sockets 2 event objects are implemented as Windows events, the native Windows function, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) can also be used for this purpose.</span></span> <span data-ttu-id="1099b-111">Cela s’avère particulièrement utile si le thread doit attendre les événements socket et non Socket.</span><span class="sxs-lookup"><span data-stu-id="1099b-111">This is especially useful if the thread needs to wait on both socket and nonsocket events.</span></span>

## <a name="polling-for-completion-indication"></a><span data-ttu-id="1099b-112">Interrogation de l’indication d’achèvement</span><span class="sxs-lookup"><span data-stu-id="1099b-112">Polling for Completion Indication</span></span>

<span data-ttu-id="1099b-113">Les applications qui préfèrent ne pas bloquer peuvent utiliser la fonction [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) pour interroger l’état d’achèvement associé à un objet d’événement particulier.</span><span class="sxs-lookup"><span data-stu-id="1099b-113">Applications that prefer not to block can use the [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) function to poll for the completion status associated with any particular event object.</span></span> <span data-ttu-id="1099b-114">Cette fonction indique si l’opération Overlapped est terminée et, si elle est terminée, organise la fonction [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) pour récupérer l’état d’erreur de l’opération Overlapped.</span><span class="sxs-lookup"><span data-stu-id="1099b-114">This function indicates whether or not the overlapped operation has completed, and if completed, arranges for the [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) function to retrieve the error status of the overlapped operation.</span></span>

## <a name="using-socket-io-completion-routines"></a><span data-ttu-id="1099b-115">Utilisation des routines d’exécution d’e/s de socket</span><span class="sxs-lookup"><span data-stu-id="1099b-115">Using Socket I/O Completion Routines</span></span>

<span data-ttu-id="1099b-116">Les fonctions utilisées pour initier des e/s avec chevauchement ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) prennent toutes *lpCompletionRoutine* comme paramètre d’entrée facultatif.</span><span class="sxs-lookup"><span data-stu-id="1099b-116">The functions used to initiate overlapped I/O ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) all take *lpCompletionRoutine* as an optional input parameter.</span></span> <span data-ttu-id="1099b-117">Il s’agit d’un pointeur vers une fonction spécifique à l’application qui est appelée après l’exécution d’une opération d’e/s avec chevauchement correctement lancée (avec succès ou autre).</span><span class="sxs-lookup"><span data-stu-id="1099b-117">This is a pointer to an application-specific function that is called after a successfully initiated overlapped I/O operation completes (successfully or otherwise).</span></span> <span data-ttu-id="1099b-118">La routine de saisie semi-automatique suit les mêmes règles que celles stipulées pour les routines d’exécution d’e/s de fichier Windows.</span><span class="sxs-lookup"><span data-stu-id="1099b-118">The completion routine follows the same rules as stipulated for Windows file I/O completion routines.</span></span> <span data-ttu-id="1099b-119">Autrement dit, la routine d’achèvement n’est pas appelée tant que le thread n’est pas dans un état d’attente alerté, par exemple lorsque la fonction [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) est appelée avec l' `fAlertable` indicateur défini.</span><span class="sxs-lookup"><span data-stu-id="1099b-119">That is, the completion routine is not invoked until the thread is in an alertable wait state, such as when the function [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) is invoked with the `fAlertable` flag set.</span></span> <span data-ttu-id="1099b-120">Une application qui utilise l’option de routine d’achèvement pour une requête d’e/s avec chevauchement particulière peut ne pas utiliser l’option wait de [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) pour cette même demande d’e/s avec chevauchement.</span><span class="sxs-lookup"><span data-stu-id="1099b-120">An application that uses the completion routine option for a particular overlapped I/O request may not use the wait option of [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) for that same overlapped I/O request.</span></span>

<span data-ttu-id="1099b-121">Les transports permettent à une application d’appeler des opérations d’envoi et de réception à partir du contexte de la routine d’exécution d’e/s de socket et de garantir que, pour un socket donné, les routines d’exécution d’e/s ne sont pas imbriquées.</span><span class="sxs-lookup"><span data-stu-id="1099b-121">The transports allow an application to invoke send and receive operations from within the context of the socket I/O completion routine and guarantee that, for a given socket, I/O completion routines will not be nested.</span></span> <span data-ttu-id="1099b-122">Cela permet de faire en sorte que les transmissions de données sensibles au temps se produisent entièrement dans un contexte préemptif.</span><span class="sxs-lookup"><span data-stu-id="1099b-122">This permits time-sensitive data transmissions to occur entirely within a preemptive context.</span></span>

## <a name="summary-of-overlapped-completion-indication-mechanisms"></a><span data-ttu-id="1099b-123">Résumé des mécanismes d’indication de fin avec chevauchement</span><span class="sxs-lookup"><span data-stu-id="1099b-123">Summary of Overlapped Completion Indication Mechanisms</span></span>

<span data-ttu-id="1099b-124">L’indication d’achèvement d’e/s avec chevauchement particulière à utiliser pour une opération Overlapped donnée est déterminée par le fait que l’application fournit un pointeur vers une fonction d’achèvement, si une structure [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) est référencée et par la valeur du membre **hEvent** dans la structure **WSAOVERLAPPED** (si elle est fournie).</span><span class="sxs-lookup"><span data-stu-id="1099b-124">The particular overlapped I/O completion indication to be used for a given overlapped operation is determined by whether the application supplies a pointer to a completion function, whether a [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) structure is referenced, and by the value of the **hEvent** member within the **WSAOVERLAPPED** structure (if supplied).</span></span> <span data-ttu-id="1099b-125">Le tableau suivant résume la sémantique de saisie semi-automatique pour un socket Overlapped et montre les différentes combinaisons de *lpOverlapped*, **hEvent** et *lpCompletionRoutine*:</span><span class="sxs-lookup"><span data-stu-id="1099b-125">The following table summarizes the completion semantics for an overlapped socket and shows the various combinations of *lpOverlapped*, **hEvent**, and *lpCompletionRoutine*:</span></span>

| <span data-ttu-id="1099b-126">*lpOverlapped*</span><span class="sxs-lookup"><span data-stu-id="1099b-126">*lpOverlapped*</span></span> | <span data-ttu-id="1099b-127">hEvent</span><span class="sxs-lookup"><span data-stu-id="1099b-127">hEvent</span></span>         | <span data-ttu-id="1099b-128">*lpCompletionRoutine*</span><span class="sxs-lookup"><span data-stu-id="1099b-128">*lpCompletionRoutine*</span></span> | <span data-ttu-id="1099b-129">Indication de la saisie semi-automatique</span><span class="sxs-lookup"><span data-stu-id="1099b-129">Completion indication</span></span>                                                                                                                                                                                                    |
|----------------|----------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1099b-130">NULL</span><span class="sxs-lookup"><span data-stu-id="1099b-130">NULL</span></span>           | <span data-ttu-id="1099b-131">Non applicable</span><span class="sxs-lookup"><span data-stu-id="1099b-131">Not applicable</span></span> | <span data-ttu-id="1099b-132">Ignoré</span><span class="sxs-lookup"><span data-stu-id="1099b-132">Ignored</span></span>               | <span data-ttu-id="1099b-133">L’opération se termine de façon synchrone.</span><span class="sxs-lookup"><span data-stu-id="1099b-133">Operation completes synchronously.</span></span> <span data-ttu-id="1099b-134">Il se comporte comme s’il s’agissait d’un socket nonoverlapped.</span><span class="sxs-lookup"><span data-stu-id="1099b-134">It behaves as if it were a nonoverlapped socket.</span></span>                                                                                                                                      |
| <span data-ttu-id="1099b-135">! NUL</span><span class="sxs-lookup"><span data-stu-id="1099b-135">!NULL</span></span>          | <span data-ttu-id="1099b-136">NULL</span><span class="sxs-lookup"><span data-stu-id="1099b-136">NULL</span></span>           | <span data-ttu-id="1099b-137">NULL</span><span class="sxs-lookup"><span data-stu-id="1099b-137">NULL</span></span>                  | <span data-ttu-id="1099b-138">L’opération se termine, mais il n’existe pas de mécanisme de saisie semi-automatique pris en charge par Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="1099b-138">Operation completes overlapped, but there is no Windows Sockets 2-supported completion mechanism.</span></span> <span data-ttu-id="1099b-139">Le mécanisme de port de terminaison (s’il est pris en charge) peut être utilisé dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="1099b-139">The completion port mechanism (if supported) can be used in this case.</span></span> <span data-ttu-id="1099b-140">Sinon, il n’y a aucune notification de fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="1099b-140">Otherwise, there is no completion notification.</span></span> |
| <span data-ttu-id="1099b-141">! NUL</span><span class="sxs-lookup"><span data-stu-id="1099b-141">!NULL</span></span>          | <span data-ttu-id="1099b-142">! NUL</span><span class="sxs-lookup"><span data-stu-id="1099b-142">!NULL</span></span>          | <span data-ttu-id="1099b-143">NULL</span><span class="sxs-lookup"><span data-stu-id="1099b-143">NULL</span></span>                  | <span data-ttu-id="1099b-144">L’opération termine la superposition, la notification par l’objet d’événement de signalisation.</span><span class="sxs-lookup"><span data-stu-id="1099b-144">Operation completes overlapped, notification by signaling event object.</span></span>                                                                                                                                                  |
| <span data-ttu-id="1099b-145">! NUL</span><span class="sxs-lookup"><span data-stu-id="1099b-145">!NULL</span></span>          | <span data-ttu-id="1099b-146">Ignoré</span><span class="sxs-lookup"><span data-stu-id="1099b-146">Ignored</span></span>        | <span data-ttu-id="1099b-147">! NUL</span><span class="sxs-lookup"><span data-stu-id="1099b-147">!NULL</span></span>                 | <span data-ttu-id="1099b-148">L’opération se termine par la routine de fin de la planification.</span><span class="sxs-lookup"><span data-stu-id="1099b-148">Operation completes overlapped, notification by scheduling completion routine.</span></span>                                                                                                                                           |



 

 

 
