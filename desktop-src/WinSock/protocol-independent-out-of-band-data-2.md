---
description: L’abstraction de socket de flux comprend la notion de données hors bande (OOB).
ms.assetid: 1a517885-2688-421f-9389-2d329e5c3d56
title: Protocol-Independent des données hors bande
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a929f4273d9cc9f268a296b711649406622ca9b4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104318365"
---
# <a name="protocol-independent-out-of-band-data"></a><span data-ttu-id="c964d-103">Protocol-Independent des données hors bande</span><span class="sxs-lookup"><span data-stu-id="c964d-103">Protocol-Independent Out-of-Band Data</span></span>

<span data-ttu-id="c964d-104">L’abstraction de socket de flux comprend la notion de données hors bande (OOB).</span><span class="sxs-lookup"><span data-stu-id="c964d-104">The stream socket abstraction includes the notion of out of band (OOB) data.</span></span> <span data-ttu-id="c964d-105">De nombreux protocoles permettent de marquer des parties de données entrantes comme spéciales d’une certaine façon, et ces blocs de données spéciaux peuvent être remis à l’utilisateur en dehors de la séquence normale.</span><span class="sxs-lookup"><span data-stu-id="c964d-105">Many protocols allow portions of incoming data to be marked as special in some way, and these special data blocks can be delivered to the user out of the normal sequence.</span></span> <span data-ttu-id="c964d-106">Il peut s’agir, par exemple, de données expédiées dans X. 25 et d’autres protocoles OSI, ainsi que de données urgentes dans l’utilisation de TCP par BSD UNIX.</span><span class="sxs-lookup"><span data-stu-id="c964d-106">Examples include expedited data in X.25 and other OSI protocols, and urgent data in BSD UNIX's use of TCP.</span></span> <span data-ttu-id="c964d-107">La section suivante décrit la gestion des données OOB de manière indépendante du protocole.</span><span class="sxs-lookup"><span data-stu-id="c964d-107">The following section describes OOB data handling in a protocol-independent manner.</span></span> <span data-ttu-id="c964d-108">Une discussion sur les données OOB implémentées à l’aide de données TCP urgentes suit l’explication indépendante du protocole.</span><span class="sxs-lookup"><span data-stu-id="c964d-108">A discussion of OOB data implemented using TCP urgent data follows the protocol-independent explanation.</span></span> <span data-ttu-id="c964d-109">Dans chaque discussion, l’utilisation de [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) implique également [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv)et [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom), et les références à [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) s’appliquent également à [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect).</span><span class="sxs-lookup"><span data-stu-id="c964d-109">In each discussion, the use of [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) also implies [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), and [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom), and references to [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) also apply to [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect).</span></span>

## <a name="protocol-independent-oob-data"></a><span data-ttu-id="c964d-110">Données OOB indépendantes du protocole</span><span class="sxs-lookup"><span data-stu-id="c964d-110">Protocol Independent OOB Data</span></span>

<span data-ttu-id="c964d-111">Les données OOB sont un canal de transmission logiquement indépendant associé à chaque paire de sockets de flux connectés.</span><span class="sxs-lookup"><span data-stu-id="c964d-111">OOB data is a logically independent transmission channel associated with each pair of connected stream sockets.</span></span> <span data-ttu-id="c964d-112">Les données OOB peuvent être fournies à l’utilisateur indépendamment des données normales.</span><span class="sxs-lookup"><span data-stu-id="c964d-112">OOB data may be delivered to the user independently of normal data.</span></span> <span data-ttu-id="c964d-113">L’abstraction définit que les fonctionnalités de données OOB doivent prendre en charge la remise fiable d’au moins un bloc de données OOB à la fois.</span><span class="sxs-lookup"><span data-stu-id="c964d-113">The abstraction defines that the OOB data facilities must support the reliable delivery of at least one OOB data block at a time.</span></span> <span data-ttu-id="c964d-114">Ce bloc de données peut contenir au moins un octet de données, et au moins un bloc de données OOB peut être remis en attente à l’utilisateur à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="c964d-114">This data block can contain at least one byte of data, and at least one OOB data block can be pending delivery to the user at any one time.</span></span> <span data-ttu-id="c964d-115">Pour les protocoles de communication qui prennent en charge la signalisation intrabande (tels que TCP, où les données urgentes sont fournies en séquence avec les données normales), le système extrait normalement les données OOB du flux de données normal et les stocke séparément (en laissant un intervalle dans le flux de données normal).</span><span class="sxs-lookup"><span data-stu-id="c964d-115">For communications protocols that support in-band signaling (such as TCP, where the urgent data is delivered in sequence with the normal data), the system normally extracts the OOB data from the normal data stream and stores it separately (leaving a gap in the normal data stream).</span></span> <span data-ttu-id="c964d-116">Cela permet aux utilisateurs de choisir de recevoir les données OOB dans l’ordre et de les recevoir hors séquence sans avoir à mettre en mémoire tampon toutes les données intermédiaires.</span><span class="sxs-lookup"><span data-stu-id="c964d-116">This allows users to choose between receiving the OOB data in order and receiving it out of sequence without having to buffer all the intervening data.</span></span> <span data-ttu-id="c964d-117">Il est possible de lire les données hors bande (OOB).</span><span class="sxs-lookup"><span data-stu-id="c964d-117">It is possible to peek at out-of-band (OOB) data.</span></span>

<span data-ttu-id="c964d-118">Un utilisateur peut déterminer si des données OOB sont en attente de lecture à l’aide de la fonction [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) ou [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) avec l’IOCTL **SIOCATMARK** .</span><span class="sxs-lookup"><span data-stu-id="c964d-118">A user can determine if any OOB data is waiting to be read using the [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) or [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function with the **SIOCATMARK** IOCTL.</span></span> <span data-ttu-id="c964d-119">Pour les protocoles où le concept de la position du bloc de données OOB dans le flux de données normal est explicite, tel que TCP, un fournisseur de services Windows Sockets gère un marqueur conceptuel indiquant la position du dernier octet des données OOB dans le flux de données normal.</span><span class="sxs-lookup"><span data-stu-id="c964d-119">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful, such as TCP, a Windows Sockets service provider maintains a conceptual marker indicating the position of the last byte of OOB data within the normal data stream.</span></span> <span data-ttu-id="c964d-120">Cela n’est pas nécessaire pour l’implémentation des fonctions **ioctlsocket** ou **WSAIoctl** qui prennent en charge **SIOCATMARK**.</span><span class="sxs-lookup"><span data-stu-id="c964d-120">This is not necessary for the implementation of the **ioctlsocket** or **WSAIoctl** functions that support **SIOCATMARK**.</span></span> <span data-ttu-id="c964d-121">La présence ou l’absence de données OOB est obligatoire.</span><span class="sxs-lookup"><span data-stu-id="c964d-121">The presence or absence of OOB data is all is required.</span></span>

<span data-ttu-id="c964d-122">Pour les protocoles où le concept de la position du bloc de données OOB dans le flux de données normal est significatif, une application peut traiter les données hors bande en ligne, dans le cadre du flux de données normal.</span><span class="sxs-lookup"><span data-stu-id="c964d-122">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful, an application might process out-of-band data inline, as part of the normal data stream.</span></span> <span data-ttu-id="c964d-123">Cela est possible en définissant l’option de socket de sorte que \_ OOBINLINE avec la fonction [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) .</span><span class="sxs-lookup"><span data-stu-id="c964d-123">This is achieved by setting the socket option SO\_OOBINLINE with the [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) function.</span></span> <span data-ttu-id="c964d-124">Pour les autres protocoles où les blocs de données OOB sont véritablement indépendants du flux de données normal, toute tentative de définition de SO \_ OOBINLINE génère une erreur.</span><span class="sxs-lookup"><span data-stu-id="c964d-124">For other protocols where the OOB data blocks are truly independent of the normal data stream, attempting to set SO\_OOBINLINE results in an error.</span></span> <span data-ttu-id="c964d-125">Une application peut utiliser la fonction [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) ou [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) avec l’IOCTL **SIOCATMARK** pour déterminer si des données OOB non lues sont précédées de la marque.</span><span class="sxs-lookup"><span data-stu-id="c964d-125">An application can use the [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) or [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function with the **SIOCATMARK** IOCTL to determine whether there is any unread OOB data preceding the mark.</span></span> <span data-ttu-id="c964d-126">Par exemple, il peut utiliser ces informations pour se resynchroniser avec son homologue en s’assurant que toutes les données jusqu’à la marque dans le flux de données sont ignorées lorsque cela est approprié.</span><span class="sxs-lookup"><span data-stu-id="c964d-126">For example, it can use this information to resynchronize with its peer by ensuring that all data up to the mark in the data stream is discarded when appropriate.</span></span>

<span data-ttu-id="c964d-127">Avec SO \_ OOBINLINE désactivé (paramètre par défaut) :</span><span class="sxs-lookup"><span data-stu-id="c964d-127">With SO\_OOBINLINE disabled (the default setting):</span></span>

-   <span data-ttu-id="c964d-128">Windows Sockets notifie une application d’un \_ événement OOB FD, si l’application inscrite pour la notification avec [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect), exactement de la même façon que FD \_ Read est utilisée pour notifier la présence de données normales.</span><span class="sxs-lookup"><span data-stu-id="c964d-128">Windows Sockets notifies an application of an FD\_OOB event, if the application registered for notification with [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect), in exactly the same way FD\_READ is used to notify of the presence of normal data.</span></span> <span data-ttu-id="c964d-129">Autrement dit, FD \_ OOB est publié quand des données OOB arrivent sans données OOB mises en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c964d-129">That is, FD\_OOB is posted when OOB data arrives with no OOB data previously queued.</span></span> <span data-ttu-id="c964d-130">La \_ file d’attente FD est également publiée lorsque les données sont lues à l’aide de l’indicateur de message \_ OOB alors que certaines données OOB restent en file d’attente après le retour de l’opération de lecture.</span><span class="sxs-lookup"><span data-stu-id="c964d-130">The FD\_OOB is also posted when data is read using the MSG\_OOB flag while some OOB data remains queued after the read operation has returned.</span></span> <span data-ttu-id="c964d-131">Les \_ messages de lecture FD ne sont pas publiés pour les données OOB.</span><span class="sxs-lookup"><span data-stu-id="c964d-131">FD\_READ messages are not posted for OOB data.</span></span>
-   <span data-ttu-id="c964d-132">Windows Sockets retourne de [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) avec le jeu de Sockets *exceptfds* approprié si les données OOB sont mises en file d’attente sur le Socket.</span><span class="sxs-lookup"><span data-stu-id="c964d-132">Windows Sockets returns from [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) with the appropriate *exceptfds* socket set if OOB data is queued on the socket.</span></span>
-   <span data-ttu-id="c964d-133">L’application peut appeler [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) avec MSG \_ OOB pour lire le bloc de données urgent à tout moment.</span><span class="sxs-lookup"><span data-stu-id="c964d-133">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) with MSG\_OOB to read the urgent data block at any time.</span></span> <span data-ttu-id="c964d-134">Le bloc de données OOB déplace la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c964d-134">The block of OOB data jumps the queue.</span></span>
-   <span data-ttu-id="c964d-135">L’application peut appeler [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) sans msg \_ OOB pour lire le flux de données normal.</span><span class="sxs-lookup"><span data-stu-id="c964d-135">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) without MSG\_OOB to read the normal data stream.</span></span> <span data-ttu-id="c964d-136">Le bloc de données OOB n’apparaît pas dans le flux de données avec des données normales.</span><span class="sxs-lookup"><span data-stu-id="c964d-136">The OOB data block does not appear in the data stream with normal data.</span></span> <span data-ttu-id="c964d-137">Si les données OOB sont conservées après un appel à **recv**, Windows Sockets avertit l’application avec FD \_ OOB ou avec *exceptfds* lors de l’utilisation de [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select).</span><span class="sxs-lookup"><span data-stu-id="c964d-137">If OOB data remains after any call to **recv**, Windows Sockets notifies the application with FD\_OOB or with *exceptfds* when using [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select).</span></span>
-   <span data-ttu-id="c964d-138">Pour les protocoles où les données OOB ont une position dans le flux de données normal, une seule opération de [**réception**](/windows/desktop/api/winsock/nf-winsock-recv) ne couvre pas cette position.</span><span class="sxs-lookup"><span data-stu-id="c964d-138">For protocols where the OOB data has a position within the normal data stream, a single [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) operation does not span that position.</span></span> <span data-ttu-id="c964d-139">Un **recv** retourne les données normales avant la marque, et une deuxième **réception** est nécessaire pour commencer à lire les données après la marque.</span><span class="sxs-lookup"><span data-stu-id="c964d-139">One **recv** returns the normal data before the mark, and a second **recv** is required to begin reading data after the mark.</span></span>

<span data-ttu-id="c964d-140">Avec SO \_ OOBINLINE activé :</span><span class="sxs-lookup"><span data-stu-id="c964d-140">With SO\_OOBINLINE enabled:</span></span>

-   <span data-ttu-id="c964d-141">Les \_ messages OOB FD ne sont pas publiés pour les données OOB.</span><span class="sxs-lookup"><span data-stu-id="c964d-141">FD\_OOB messages are not posted for OOB data.</span></span> <span data-ttu-id="c964d-142">Les données OOB sont considérées comme normales dans le cadre des fonctions [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) et [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) et sont indiquées en définissant le socket dans *readfds* ou en envoyant un \_ message FD Read respectivement.</span><span class="sxs-lookup"><span data-stu-id="c964d-142">OOB data is treated as normal for the purpose of the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) and [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) functions, and indicated by setting the socket in *readfds* or by sending an FD\_READ message respectively.</span></span>
-   <span data-ttu-id="c964d-143">L’application ne peut pas appeler [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) avec l’indicateur de message \_ OOB défini pour lire le bloc de données OOB.</span><span class="sxs-lookup"><span data-stu-id="c964d-143">The application cannot call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) with the MSG\_OOB flag set to read the OOB data block.</span></span> <span data-ttu-id="c964d-144">Le code d’erreur WSAEINVAL est retourné.</span><span class="sxs-lookup"><span data-stu-id="c964d-144">The error code WSAEINVAL is returned.</span></span>
-   <span data-ttu-id="c964d-145">L’application peut appeler [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) sans l’indicateur de message \_ OOB défini.</span><span class="sxs-lookup"><span data-stu-id="c964d-145">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) without the MSG\_OOB flag set.</span></span> <span data-ttu-id="c964d-146">Toutes les données OOB sont remises dans le bon ordre dans le flux de données normal.</span><span class="sxs-lookup"><span data-stu-id="c964d-146">Any OOB data is delivered in its correct order within the normal data stream.</span></span> <span data-ttu-id="c964d-147">Les données OOB ne sont jamais mélangées avec des données normales.</span><span class="sxs-lookup"><span data-stu-id="c964d-147">OOB data is never mixed with normal data.</span></span> <span data-ttu-id="c964d-148">Il doit y avoir trois demandes de lecture pour se trouver au-delà des données OOB.</span><span class="sxs-lookup"><span data-stu-id="c964d-148">There must be three read requests to get past the OOB data.</span></span> <span data-ttu-id="c964d-149">La première retourne les données normales avant le bloc de données OOB, le second retourne les données OOB, le troisième retourne les données normales qui suivent les données OOB.</span><span class="sxs-lookup"><span data-stu-id="c964d-149">The first returns the normal data prior to the OOB data block, the second returns the OOB data, the third returns the normal data following the OOB data.</span></span> <span data-ttu-id="c964d-150">En d’autres termes, les limites du bloc de données OOB sont conservées.</span><span class="sxs-lookup"><span data-stu-id="c964d-150">In other words, the OOB data block boundaries are preserved.</span></span>

<span data-ttu-id="c964d-151">La routine [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) est particulièrement bien adaptée pour gérer la notification de la présence de données hors bande lorsque \_ OOBINLINE est désactivé.</span><span class="sxs-lookup"><span data-stu-id="c964d-151">The [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) routine is particularly well suited to handling notification of the presence of out-of-band-data when SO\_OOBINLINE is off.</span></span>

## <a name="oob-data-in-tcp"></a><span data-ttu-id="c964d-152">Données OOB dans TCP</span><span class="sxs-lookup"><span data-stu-id="c964d-152">OOB Data in TCP</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c964d-153">La discussion suivante sur les données hors bande (OOB), implémentées à l’aide de données urgentes TCP, suit le modèle utilisé dans la distribution de logiciels Berkeley.</span><span class="sxs-lookup"><span data-stu-id="c964d-153">The following discussion of out-of-band data (OOB), implemented using TCP urgent data, follows the model used in the Berkeley software distribution.</span></span> <span data-ttu-id="c964d-154">Les utilisateurs et les responsables de l’implémentation doivent savoir que :</span><span class="sxs-lookup"><span data-stu-id="c964d-154">Users and implementers should be aware that:</span></span>

 

-   <span data-ttu-id="c964d-155">Il existe actuellement deux interprétations conflictuelles de [RFC 793](https://www.ietf.org/rfc/rfc793.txt) (où le concept est introduit).</span><span class="sxs-lookup"><span data-stu-id="c964d-155">There are, at present, two conflicting interpretations of [RFC 793](https://www.ietf.org/rfc/rfc793.txt) (where the concept is introduced).</span></span>
-   <span data-ttu-id="c964d-156">L’implémentation de données OOB dans la distribution de logiciels Berkeley (BSD) n’est pas conforme aux exigences de l’ordinateur hôte spécifiées dans le [document RFC 1122](https://www.ietf.org/rfc/rfc1122.txt).</span><span class="sxs-lookup"><span data-stu-id="c964d-156">The implementation of OOB data in the Berkeley Software Distribution (BSD) does not conform to the Host Requirements specified in [RFC 1122](https://www.ietf.org/rfc/rfc1122.txt).</span></span>

    <span data-ttu-id="c964d-157">Plus précisément, le pointeur d’urgence TCP dans BSD pointe vers l’octet qui suit l’octet de données urgent et un pointeur TCP urgent conforme aux spécifications RFC pointe vers l’octet de données urgent.</span><span class="sxs-lookup"><span data-stu-id="c964d-157">Specifically, the TCP urgent pointer in BSD points to the byte after the urgent data byte, and an RFC-compliant TCP urgent pointer points to the urgent data byte.</span></span> <span data-ttu-id="c964d-158">Par conséquent, si une application envoie des données urgentes d’une implémentation compatible BSD à une implémentation compatible avec la norme RFC 1122, le destinataire lit l’octet de données urgent incorrect (il lit l’octet situé après l’octet correct dans le flux de données en tant qu’octet de données urgent).</span><span class="sxs-lookup"><span data-stu-id="c964d-158">As a result, if an application sends urgent data from a BSD-compatible implementation to an implementation compatible with RFC 1122, the receiver reads the wrong urgent data byte (it reads the byte located after the correct byte in the data stream as the urgent data byte).</span></span>

    <span data-ttu-id="c964d-159">Pour réduire les problèmes d’interopérabilité, les auteurs d’applications sont invités à ne pas utiliser les données OOB, sauf si cela est nécessaire pour interagir avec un service existant.</span><span class="sxs-lookup"><span data-stu-id="c964d-159">To minimize interoperability problems, applications writers are advised not to use OOB data unless this is required to interoperate with an existing service.</span></span> <span data-ttu-id="c964d-160">Les fournisseurs de Windows Sockets sont invités à documenter la sémantique OOB (BSD ou RFC 1122) implémentée par le produit.</span><span class="sxs-lookup"><span data-stu-id="c964d-160">Windows Sockets suppliers are urged to document the OOB semantics (BSD or RFC 1122) that their product implements.</span></span>

<span data-ttu-id="c964d-161">L’arrivée d’un segment TCP avec l’indicateur URG (pour urgent) indique l’existence d’un seul octet de données OOB dans le flux de données TCP.</span><span class="sxs-lookup"><span data-stu-id="c964d-161">The arrival of a TCP segment with the URG (for urgent) flag set indicates the existence of a single byte of OOB data within the TCP data stream.</span></span> <span data-ttu-id="c964d-162">La taille du bloc de données OOB est d’un octet.</span><span class="sxs-lookup"><span data-stu-id="c964d-162">The OOB data block is one byte in size.</span></span> <span data-ttu-id="c964d-163">Le pointeur urgent est un décalage positif par rapport au numéro de séquence actuel dans l’en-tête TCP qui indique l’emplacement du bloc de données OOB (ambigu, comme indiqué dans le précédent).</span><span class="sxs-lookup"><span data-stu-id="c964d-163">The urgent pointer is a positive offset from the current sequence number in the TCP header that indicates the location of the OOB data block (ambiguously, as noted in the preceding).</span></span> <span data-ttu-id="c964d-164">Elle peut donc pointer vers des données qui n’ont pas encore été reçues.</span><span class="sxs-lookup"><span data-stu-id="c964d-164">It might, therefore, point to data that has not yet been received.</span></span>

<span data-ttu-id="c964d-165">Si SO \_ OOBINLINE est désactivé (valeur par défaut) lorsque le segment TCP contenant l’octet pointé par le pointeur urgent arrive, le bloc de données OOB (un octet) est supprimé du flux de données et mis en mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="c964d-165">If SO\_OOBINLINE is disabled (the default) when the TCP segment containing the byte pointed to by the urgent pointer arrives, the OOB data block (one byte) is removed from the data stream and buffered.</span></span> <span data-ttu-id="c964d-166">Si un segment TCP suivant arrive avec l’indicateur urgent défini (et un nouveau pointeur urgent), l’octet OOB mis en file d’attente peut être perdu, car il est remplacé par le nouveau bloc de données OOB (comme c’est le cas dans Berkeley Software Distribution).</span><span class="sxs-lookup"><span data-stu-id="c964d-166">If a subsequent TCP segment arrives with the urgent flag set (and a new urgent pointer), the OOB byte currently queued can be lost as it is replaced by the new OOB data block (as occurs in Berkeley Software Distribution).</span></span> <span data-ttu-id="c964d-167">Toutefois, il n’est jamais remplacé dans le flux de données.</span><span class="sxs-lookup"><span data-stu-id="c964d-167">It is never replaced in the data stream, however.</span></span>

<span data-ttu-id="c964d-168">Si \_ OOBINLINE est activé, les données urgentes restent dans le flux de données.</span><span class="sxs-lookup"><span data-stu-id="c964d-168">With SO\_OOBINLINE enabled, the urgent data remains in the data stream.</span></span> <span data-ttu-id="c964d-169">Par conséquent, le bloc de données OOB n’est jamais perdu lorsqu’un nouveau segment TCP arrive contenant des données urgentes.</span><span class="sxs-lookup"><span data-stu-id="c964d-169">As a result, the OOB data block is never lost when a new TCP segment arrives containing urgent data.</span></span> <span data-ttu-id="c964d-170">La marque de données OOB existante est mise à jour vers la nouvelle position.</span><span class="sxs-lookup"><span data-stu-id="c964d-170">The existing OOB data mark is updated to the new position.</span></span>

> [!Note]  
> <span data-ttu-id="c964d-171">Lorsque l' \_ option de socket so OOBINLINE est définie, l’IOCTL SIOCATMARK retourne toujours la **valeur true** et les données OOB sont renvoyées à l’utilisateur sous forme de données normales.</span><span class="sxs-lookup"><span data-stu-id="c964d-171">When the SO\_OOBINLINE socket option is set, the SIOCATMARK IOCTL always returns **TRUE**, and OOB data is returned to the user as normal data.</span></span>

 

 

 



