---
description: NLA est en charge de fournir à ses clients la notification des modifications d’emplacement réseau. Le mécanisme utilisé pour demander la notification des événements de modification est une combinaison des fonctions WSALookupServiceBegin, WSANSPIoctl et WSALookupServiceNext.
ms.assetid: fed5a90d-0bc5-46e7-b3d3-edc4b303d305
title: Notification de NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13ee0ad0530725db27c8f5df39b6fc573f7e97c4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104526127"
---
# <a name="notification-from-nla"></a><span data-ttu-id="99225-104">Notification de NLA</span><span class="sxs-lookup"><span data-stu-id="99225-104">Notification from NLA</span></span>

<span data-ttu-id="99225-105">NLA est en charge de fournir à ses clients la notification des modifications d’emplacement réseau.</span><span class="sxs-lookup"><span data-stu-id="99225-105">NLA is capable of providing its clients with notification of network location changes.</span></span> <span data-ttu-id="99225-106">Le mécanisme utilisé pour demander la notification des événements de modification est une combinaison des fonctions [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl)et [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="99225-106">The mechanism used to request notification of change events is a combination of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl), and [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) functions.</span></span>

<span data-ttu-id="99225-107">Pour recevoir une notification de modification d’NLA, un client doit d’abord appeler [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) pour obtenir un handle de recherche NLA SP valide.</span><span class="sxs-lookup"><span data-stu-id="99225-107">In order to receive change notification from NLA, a client must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) to obtain a valid NLA SP lookup handle.</span></span> <span data-ttu-id="99225-108">Ensuite, le client peut appeler [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) ou [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) dans n’importe quel ordre ; pour vous inscrire à la notification, appelez la fonction **WSANSPIoctl** avec \_ l' \_ ensemble de codes de \_ contrôle de modification de la NSP SIO dans le paramètre *dwControlCode* .</span><span class="sxs-lookup"><span data-stu-id="99225-108">Next, the client can call [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) or [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) in any order; to register for notification, call the **WSANSPIoctl** function with the SIO\_NSP\_NOTIFY\_CHANGE control code set in the *dwControlCode* parameter.</span></span>

<span data-ttu-id="99225-109">La fonction [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) retourne le WSA \_ E plus \_ \_ comme délimiteur défini.</span><span class="sxs-lookup"><span data-stu-id="99225-109">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function returns WSA\_E\_NO\_MORE as a set delimiter.</span></span> <span data-ttu-id="99225-110">Lorsqu’un client s’est inscrit à la notification à l’aide de la fonction [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) et que **WSALOOKUPSERVICENEXT** retourne \_ un WSA E \_ \_ plus, l’appel de **WSALookupServiceNext** indique si une modification a eu lieu :</span><span class="sxs-lookup"><span data-stu-id="99225-110">When a client has registered for notification using the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function and **WSALookupServiceNext** returns WSA\_E\_NO\_MORE, calling **WSALookupServiceNext** again reveals whether a change has occurred:</span></span>

-   <span data-ttu-id="99225-111">Si aucune modification n’a eu lieu depuis le WSA précédent \_ e \_ , le \_ WSA \_ e \_ n' \_ est pas retourné.</span><span class="sxs-lookup"><span data-stu-id="99225-111">If no changes have occurred since the previous WSA\_E\_NO\_MORE, WSA\_E\_NO\_MORE is returned.</span></span>
-   <span data-ttu-id="99225-112">Si une modification est apportée, ou si une modification s’est produite et un appel d’interrogation, l’appel de fonction [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) retourne des réseaux en tant que structures [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) , avec l’un des indicateurs suivants définis dans son membre **dwOutputFlags** :</span><span class="sxs-lookup"><span data-stu-id="99225-112">If a change has occurred, or if a change has occurred and a polling call is made, the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function call returns networks as [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structures, with one of the following flags set in its **dwOutputFlags** member:</span></span>

    <dl> <span data-ttu-id="99225-113">le résultat \_ est \_ ajouté</span><span class="sxs-lookup"><span data-stu-id="99225-113">RESULT\_IS\_ADDED</span></span>  
    <span data-ttu-id="99225-114">RÉSULTAT \_ \_ modifié</span><span class="sxs-lookup"><span data-stu-id="99225-114">RESULT\_IS\_CHANGED</span></span>  
    <span data-ttu-id="99225-115">le résultat \_ est \_ supprimé</span><span class="sxs-lookup"><span data-stu-id="99225-115">RESULT\_IS\_DELETED</span></span>  
    </dl>

<span data-ttu-id="99225-116">La notification de modification est fournie pour tous les champs qui ont été modifiés depuis l’obtention du handle de recherche NLA avec l’appel de fonction [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) , ou depuis la dernière énumération qui a provoqué l’erreur du WSA \_ E \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="99225-116">Change notification is provided for any fields that changed since the NLA lookup handle was obtained with the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call, or since the last enumeration that resulted in the WSA\_E\_NO\_MORE error.</span></span> <span data-ttu-id="99225-117">Lorsque toutes les informations d’emplacement réseau modifiées sont fournies, le WSA \_ E n' \_ \_ est pas retourné.</span><span class="sxs-lookup"><span data-stu-id="99225-117">When all changed network location information is provided, WSA\_E\_NO\_MORE is returned.</span></span> <span data-ttu-id="99225-118">Les clients peuvent réémettre un appel de fonction [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) sur le même handle de requête à tout moment, l’un après l’autre, avec l' \_ indicateur de changement de notification NSP SIO \_ \_ défini.</span><span class="sxs-lookup"><span data-stu-id="99225-118">Clients can reissue a [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function call on the same query handle at any time, one at a time, with the SIO\_NSP\_NOTIFY\_CHANGE flag set.</span></span> <span data-ttu-id="99225-119">Cette fonctionnalité permet à un client de recycler le descripteur de requête en continu, ce qui évite au client d’avoir à gérer les informations d’état de modification de manière autonome.</span><span class="sxs-lookup"><span data-stu-id="99225-119">This capability enables a client to recycle the query handle on an ongoing basis, thereby relieving the client from having to maintain change-state information on its own.</span></span> <span data-ttu-id="99225-120">Une fois qu’un client n’a plus besoin de notifications de modifications, il doit fermer le descripteur de requête à l’aide de la fonction [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="99225-120">Once a client no longer needs change notifications, it should close the query handle using the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function.</span></span>

 

 



