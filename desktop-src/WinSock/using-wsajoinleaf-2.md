---
description: Comme mentionné précédemment, la fonction WSAJoinLeaf est utilisée pour joindre un nœud terminal dans une session multipoint.
ms.assetid: eaa1593a-36eb-4d92-a3d9-91566fc0216b
title: Utilisation de WSAJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 027262a117edc5541a4809481aa4607837343b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103865681"
---
# <a name="using-wsajoinleaf"></a><span data-ttu-id="51a25-103">Utilisation de WSAJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="51a25-103">Using WSAJoinLeaf</span></span>

<span data-ttu-id="51a25-104">Comme mentionné précédemment, la fonction [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) est utilisée pour joindre un nœud terminal dans une session multipoint.</span><span class="sxs-lookup"><span data-stu-id="51a25-104">As mentioned previously, the function [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="51a25-105">**WSAJoinLeaf** a les mêmes paramètres et la même sémantique que [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) , sauf qu’il retourne un descripteur de socket (comme dans [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)) et qu’il a un paramètre *dwFlags* supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="51a25-105">**WSAJoinLeaf** has the same parameters and semantics as [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) except that it returns a socket descriptor (as in [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)), and it has an additional *dwFlags* parameter.</span></span>

<span data-ttu-id="51a25-106">Le paramètre *dwFlags* est utilisé pour indiquer si le socket doit agir uniquement comme un expéditeur, uniquement comme récepteur, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="51a25-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="51a25-107">Seuls les sockets multipoint peuvent être utilisés pour les *paramètres d'* entrée dans cette fonction.</span><span class="sxs-lookup"><span data-stu-id="51a25-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="51a25-108">Si le socket multipoint est en mode non bloquant, le descripteur de socket retourné n’est pas utilisable tant qu’une \_ indication FD Connect correspondante n’a pas été reçue.</span><span class="sxs-lookup"><span data-stu-id="51a25-108">If the multipoint socket is in nonblocking mode, the returned socket descriptor is not usable until after a corresponding FD\_CONNECT indication is received.</span></span> <span data-ttu-id="51a25-109">Une application racine dans une session multipoint peut appeler [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) une ou plusieurs fois pour ajouter un certain nombre de nœuds terminaux, mais au plus une demande de connexion multipoint peut être en suspens à la fois.</span><span class="sxs-lookup"><span data-stu-id="51a25-109">A root application in a multipoint session may call [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="51a25-110">Le descripteur de socket retourné par [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) diffère selon que le descripteur de socket d’entrée, *s*, est une \_ racine c ou une \_ feuille c.</span><span class="sxs-lookup"><span data-stu-id="51a25-110">The socket descriptor returned by [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) differs depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="51a25-111">Lorsqu’il est utilisé avec un \_ Socket racine c, le paramètre *Name* désigne un nœud terminal particulier à ajouter et le descripteur de socket retourné est un \_ Socket feuille c correspondant au nœud terminal qui vient d’être ajouté.</span><span class="sxs-lookup"><span data-stu-id="51a25-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="51a25-112">Il n’est pas destiné à être utilisé pour l’échange de données multipoint, mais il est plutôt utilisé pour recevoir des \_ indications FD xxx (par exemple, FD \_ Close) pour la connexion qui existe à la \_ feuille c particulière.</span><span class="sxs-lookup"><span data-stu-id="51a25-112">It is not intended to be used for the exchange of multipoint data, but rather it is used to receive FD\_XXX indications (for example, FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="51a25-113">Certaines implémentations multipoint peuvent également permettre l’utilisation de ce Socket pour les conversations latérales entre la racine et un nœud terminal individuel.</span><span class="sxs-lookup"><span data-stu-id="51a25-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="51a25-114">Une \_ indication FD Close est reçue pour ce Socket si le nœud terminal correspondant appelle [**opération closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) à supprimer de la session multipoint.</span><span class="sxs-lookup"><span data-stu-id="51a25-114">An FD\_CLOSE indication is received for this socket if the corresponding leaf node calls [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) to drop out of the multipoint session.</span></span> <span data-ttu-id="51a25-115">De manière symétrique, l’appel de **opération closesocket** sur le \_ Socket feuille c retourné par **WSAJoinLeaf** amène le socket dans le nœud terminal correspondant à recevoir une \_ notification FD Close.</span><span class="sxs-lookup"><span data-stu-id="51a25-115">Symmetrically, invoking **closesocket** on the c\_leaf socket returned from **WSAJoinLeaf** causes the socket in the corresponding leaf node to get an FD\_CLOSE notification.</span></span>

<span data-ttu-id="51a25-116">Quand [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) est appelé avec un \_ Socket feuille c, le paramètre *Name* contient l’adresse de l’application racine (pour un schéma de contrôle enraciné) ou une session multipoint existante (schéma de contrôle non enraciné) et le descripteur de socket retourné est le même que le descripteur de socket d’entrée.</span><span class="sxs-lookup"><span data-stu-id="51a25-116">When [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="51a25-117">Dans un schéma de contrôle avec racine, l’application racine place son \_ Socket racine c en mode d’écoute en appelant [**Listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span><span class="sxs-lookup"><span data-stu-id="51a25-117">In a rooted control scheme, the root application puts its c\_root socket in listening mode by calling [**listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span></span> <span data-ttu-id="51a25-118">La notification d' \_ acceptation FD standard est fournie lorsque le nœud terminal demande de se joindre à la session multipoint.</span><span class="sxs-lookup"><span data-stu-id="51a25-118">The standard FD\_ACCEPT notification is delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="51a25-119">L’application racine utilise les fonctions [**Accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept) / [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) habituelles pour admettre le nouveau nœud terminal.</span><span class="sxs-lookup"><span data-stu-id="51a25-119">The root application uses the usual [**accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept)/[**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) functions to admit the new leaf node.</span></span> <span data-ttu-id="51a25-120">La valeur retournée par **Accept** ou **WSAAccept** est également un \_ descripteur de socket feuille c, comme ceux retournés par **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="51a25-120">The value returned from either **accept** or **WSAAccept** is also a c\_leaf socket descriptor just like those returned from **WSAJoinLeaf**.</span></span> <span data-ttu-id="51a25-121">Pour prendre en charge les schémas multipoint qui autorisent les jointures lancées à la racine et initiées par les feuilles, il est acceptable pour un \_ Socket racine c qui est déjà en mode d’écoute d’être utilisé en tant qu’entrée dans **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="51a25-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as input to **WSAJoinLeaf**.</span></span>

<span data-ttu-id="51a25-122">Une application racine multipoint est généralement chargée du démontage ordonné d’une session multipoint.</span><span class="sxs-lookup"><span data-stu-id="51a25-122">A multipoint root application is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="51a25-123">Une telle application peut utiliser [**Shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) ou [**opération closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) sur un \_ Socket racine c pour provoquer tous les \_ sockets de feuille c associés, y compris ceux retournés à partir de [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) et leurs Sockets de feuille c correspondants \_ dans les nœuds terminaux distants, pour obtenir une \_ notification FD Close.</span><span class="sxs-lookup"><span data-stu-id="51a25-123">Such an application may use [**shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) or [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 



