---
description: Comme mentionné précédemment, WSPJoinLeaf est utilisé pour joindre un nœud terminal dans une session multipoint.
ms.assetid: 03325f5e-4d4a-405b-b644-3d8c03435e17
title: Utilisation de WSPJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef4426c0d22657b26dcc2217d856865d9ebe98db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104201421"
---
# <a name="using-wspjoinleaf"></a><span data-ttu-id="374de-103">Utilisation de WSPJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="374de-103">Using WSPJoinLeaf</span></span>

<span data-ttu-id="374de-104">Comme mentionné précédemment, [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) est utilisé pour joindre un nœud terminal dans une session multipoint.</span><span class="sxs-lookup"><span data-stu-id="374de-104">As mentioned previously, [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="374de-105">**WSPJoinLeaf** a les mêmes paramètres et la même sémantique que [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) , sauf qu’il retourne un descripteur de socket (comme dans [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)) et qu’il a un paramètre *dwFlags* supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="374de-105">**WSPJoinLeaf** has the same parameters and semantics as [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) except that it returns a socket descriptor (as in [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)), and it has an additional *dwFlags* parameter.</span></span> <span data-ttu-id="374de-106">Le paramètre *dwFlags* est utilisé pour indiquer si le socket doit agir uniquement comme un expéditeur, uniquement comme récepteur, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="374de-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="374de-107">Seuls les sockets multipoint peuvent être utilisés pour les *paramètres d'* entrée dans cette fonction.</span><span class="sxs-lookup"><span data-stu-id="374de-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="374de-108">Si le socket multipoint est en mode non bloquant, le descripteur de socket retourné n’est pas utilisable tant qu’une indication FD Connect correspondante n' \_ a pas été reçue.</span><span class="sxs-lookup"><span data-stu-id="374de-108">If the multipoint socket is in the nonblocking mode, the returned socket descriptor will not be usable until after a corresponding FD\_CONNECT indication has been received.</span></span> <span data-ttu-id="374de-109">Une application racine dans une session multipoint peut appeler **WSPJoinLeaf** une ou plusieurs fois pour ajouter un certain nombre de nœuds terminaux, mais au plus une demande de connexion multipoint peut être en suspens à la fois.</span><span class="sxs-lookup"><span data-stu-id="374de-109">A root application in a multipoint session may call **WSPJoinLeaf** one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="374de-110">Le descripteur de socket retourné par [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) est différent selon que le descripteur de socket d’entrée, *s*, est une \_ racine c ou une \_ feuille c.</span><span class="sxs-lookup"><span data-stu-id="374de-110">The socket descriptor returned by [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is different depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="374de-111">Lorsqu’il est utilisé avec un \_ Socket racine c, le paramètre *Name* désigne un nœud terminal particulier à ajouter et le descripteur de socket retourné est un \_ Socket feuille c correspondant au nœud terminal qui vient d’être ajouté.</span><span class="sxs-lookup"><span data-stu-id="374de-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="374de-112">Il n’est pas destiné à être utilisé pour l’échange de données multipoint, mais est plutôt utilisé pour recevoir des indications d’événements réseau (par exemple \_ , FD Close) pour la connexion qui existe à la feuille c particulière \_ .</span><span class="sxs-lookup"><span data-stu-id="374de-112">It is not intended to be used for exchange of multipoint data, but rather is used to receive network event indications (for example FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="374de-113">Certaines implémentations multipoint peuvent également permettre l’utilisation de ce Socket pour les conversations latérales entre la racine et un nœud terminal individuel.</span><span class="sxs-lookup"><span data-stu-id="374de-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="374de-114">Une \_ indication FD Close doit être fournie pour ce Socket si le nœud terminal correspondant appelle [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) à supprimer de la session multipoint.</span><span class="sxs-lookup"><span data-stu-id="374de-114">An FD\_CLOSE indication should be given for this socket if the corresponding leaf node calls [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) to drop out of the multipoint session.</span></span> <span data-ttu-id="374de-115">En effet, l’appel de **WSPCloseSocket** sur le \_ Socket feuille c retourné par [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) amène le socket dans le nœud terminal correspondant à recevoir la \_ notification FD Close.</span><span class="sxs-lookup"><span data-stu-id="374de-115">Symmetrically, invoking **WSPCloseSocket** on the c\_leaf socket returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) will cause the socket in the corresponding leaf node to get FD\_CLOSE notification.</span></span>

<span data-ttu-id="374de-116">Quand [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) est appelé avec un \_ Socket feuille c, le paramètre *Name* contient l’adresse de l’application racine (pour un schéma de contrôle enraciné) ou une session multipoint existante (schéma de contrôle non enraciné) et le descripteur de socket retourné est le même que le descripteur de socket d’entrée.</span><span class="sxs-lookup"><span data-stu-id="374de-116">When [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="374de-117">Dans un schéma de contrôle enraciné, le client racine place son \_ Socket racine c en mode d’écoute en appelant [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="374de-117">In a rooted control scheme, the root client would put its c\_root socket in the listening mode by calling [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span></span> <span data-ttu-id="374de-118">La notification d’acceptation FD standard est \_ remise lorsque le nœud terminal demande de se joindre à la session multipoint.</span><span class="sxs-lookup"><span data-stu-id="374de-118">The standard FD\_ACCEPT notification will be delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="374de-119">Le client racine utilise la fonction [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) habituelle pour admettre le nouveau nœud terminal.</span><span class="sxs-lookup"><span data-stu-id="374de-119">The root client uses the usual [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) function to admit the new leaf node.</span></span> <span data-ttu-id="374de-120">La valeur retournée par **WSPAccept** est également un \_ descripteur de socket feuille c comme ceux retournés par **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="374de-120">The value returned from **WSPAccept** is also a c\_leaf socket descriptor just like those returned from **WSPJoinLeaf**.</span></span> <span data-ttu-id="374de-121">Pour prendre en charge les schémas multipoint qui autorisent les jointures lancées à la racine et initiées par les feuilles, il est acceptable pour un \_ Socket racine c qui est déjà en mode d’écoute d’être utilisé comme entrée dans **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="374de-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as in input to **WSPJoinLeaf**.</span></span>

<span data-ttu-id="374de-122">Un client racine multipoint est généralement responsable du démontage ordonné d’une session multipoint.</span><span class="sxs-lookup"><span data-stu-id="374de-122">A multipoint root client is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="374de-123">Une telle application peut utiliser [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) ou [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) sur un \_ Socket racine c pour provoquer tous les \_ sockets de feuille c associés, y compris ceux retournés à partir de [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) et leurs Sockets de feuille c correspondants \_ dans les nœuds terminaux distants, pour obtenir une \_ notification FD Close.</span><span class="sxs-lookup"><span data-stu-id="374de-123">Such an application may use [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) or [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 
