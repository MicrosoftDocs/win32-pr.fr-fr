---
description: Pour qu’un protocole de transport soit accessible via Windows Sockets, il doit être correctement installé sur le système et enregistré auprès de Windows Sockets.
ms.assetid: 0f0b22e4-81b7-43a7-bc2f-7124fa32d925
title: Configuration et installation du transport
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ea980740f727e39338c7568f4cc30a961b5484df
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106516459"
---
# <a name="transport-configuration-and-installation"></a><span data-ttu-id="7493c-103">Configuration et installation du transport</span><span class="sxs-lookup"><span data-stu-id="7493c-103">Transport Configuration and Installation</span></span>

<span data-ttu-id="7493c-104">Pour qu’un protocole de transport soit accessible via Windows Sockets, il doit être correctement installé sur le système et enregistré auprès de Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="7493c-104">In order for a transport protocol to be accessible through Windows Sockets it must be properly installed on the system and registered with Windows Sockets.</span></span> <span data-ttu-id="7493c-105">Lorsqu’un fournisseur de services de transport est installé en invoquant le programme d’installation d’un fournisseur, les informations de configuration doivent être ajoutées à une base de données de configuration pour fournir au \_ service Ws232.dll informations nécessaires concernant le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="7493c-105">When a transport service provider is installed by invoking a vendor's installation program, configuration information must be added to a configuration database to give the Ws2\_32.dll required information regarding the service provider.</span></span> <span data-ttu-id="7493c-106">L' \_32.dll Ws2 exporte plusieurs fonctions d’installation, [**WSCInstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) et [**WSCInstallProviderAndChains**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), pour que le programme d’installation du fournisseur fournisse les informations pertinentes sur le fournisseur de services à installer.</span><span class="sxs-lookup"><span data-stu-id="7493c-106">The Ws2\_32.dll exports several installation functions, [**WSCInstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) and [**WSCInstallProviderAndChains**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), for the vendor's installation program to supply the relevant information about the service provider to be installed.</span></span> <span data-ttu-id="7493c-107">Ces informations incluent, par exemple, le nom et le chemin d’accès à la DLL du fournisseur de services, ainsi qu’une liste de structures d' [**\_ informations WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) que ce fournisseur peut prendre en charge.</span><span class="sxs-lookup"><span data-stu-id="7493c-107">This information includes, for example, the name and path to the service provider DLL and a list of [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures that this provider can support.</span></span> <span data-ttu-id="7493c-108">Le \_32.dll Ws2 fournit également une fonction, [**WSCDeinstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider), pour le programme de désinstallation d’un fournisseur afin de supprimer toutes les informations pertinentes de la base de données de configuration gérée par le \_32.dll Ws2.</span><span class="sxs-lookup"><span data-stu-id="7493c-108">The Ws2\_32.dll also provides a function, [**WSCDeinstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider), for a vendor's deinstallation program to remove all the relevant information from the configuration database maintained by the Ws2\_32.dll.</span></span> <span data-ttu-id="7493c-109">L’emplacement et le format exacts de ces informations de configuration sont privés pour le \_32.dll Ws2 et ne peuvent être manipulés que par les fonctions mentionnées ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="7493c-109">The exact location and format of this configuration information is private to the Ws2\_32.dll, and can only be manipulated by the above-mentioned functions.</span></span>

<span data-ttu-id="7493c-110">Sur les plateformes 64 bits, il existe des fonctions similaires qui fonctionnent sur les catalogues 32 bits et 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7493c-110">On 64-bit platforms, there are similar functions that operate on a 32-bit and 64-bit catalogs.</span></span> <span data-ttu-id="7493c-111">Ces fonctions incluent [**WSCInstallProvider64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32)et [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span><span class="sxs-lookup"><span data-stu-id="7493c-111">These functions include [**WSCInstallProvider64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32), and [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span></span>

<span data-ttu-id="7493c-112">L’ordre dans lequel les fournisseurs de services de transport sont installés initialement régit l’ordre dans lequel ils sont énumérés via [**WSCEnumProtocols**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) et [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) au niveau de l’interface du fournisseur de services, ou via [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) au niveau de l’interface de l’application.</span><span class="sxs-lookup"><span data-stu-id="7493c-112">The order in which transport service providers are initially installed governs the order in which they are enumerated through [**WSCEnumProtocols**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) and [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) at the service provider interface, or through [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) at the application interface.</span></span> <span data-ttu-id="7493c-113">Plus important encore, cet ordre régit également l’ordre dans lequel les protocoles et les fournisseurs de services sont pris en compte lorsqu’un client demande la création d’un socket en fonction de sa famille d’adresses, de son type et de son identificateur de protocole.</span><span class="sxs-lookup"><span data-stu-id="7493c-113">More importantly, this order also governs the order in which protocols and service providers are considered when a client requests creation of a socket based on its address family, type, and protocol identifier.</span></span> <span data-ttu-id="7493c-114">Windows Sockets 2 comprend une applet appelée Sporder.exe qui permet de réorganiser de manière interactive le catalogue des protocoles installés une fois que les protocoles ont déjà été installés.</span><span class="sxs-lookup"><span data-stu-id="7493c-114">Windows Sockets 2 includes an applet called Sporder.exe that allows the catalog of installed protocols to be reordered interactively after protocols have already been installed.</span></span> <span data-ttu-id="7493c-115">Windows Sockets 2 comprend également une DLL auxiliaire, Sporder.dll, qui exporte une interface procédurale pour réorganiser les protocoles.</span><span class="sxs-lookup"><span data-stu-id="7493c-115">Windows Sockets 2 also includes an auxiliary DLL, Sporder.dll, that exports a procedural interface for reordering protocols.</span></span> <span data-ttu-id="7493c-116">Cette interface procédurale se compose d’une procédure unique appelée [**WSCWriteProviderOrder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span><span class="sxs-lookup"><span data-stu-id="7493c-116">This procedural interface consists of a single procedure called [**WSCWriteProviderOrder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span></span>

## <a name="installing-layered-protocols-and-protocol-chains"></a><span data-ttu-id="7493c-117">Installation de protocoles et de chaînes de protocole en couches</span><span class="sxs-lookup"><span data-stu-id="7493c-117">Installing Layered Protocols and Protocol Chains</span></span>

<span data-ttu-id="7493c-118">La structure d' [**\_ informations WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) fournie avec chaque protocole à installer indique si le protocole est un protocole de base, un protocole en couche ou une chaîne de protocole.</span><span class="sxs-lookup"><span data-stu-id="7493c-118">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure supplied with each protocol to be installed indicates whether the protocol is a base protocol, layered protocol, or protocol chain.</span></span> <span data-ttu-id="7493c-119">La valeur du paramètre *ProtocolChain. ChainLen* est interprétée comme indiqué dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="7493c-119">The value of the *ProtocolChain.ChainLen* parameter is interpreted as shown in the following table.</span></span>

| <span data-ttu-id="7493c-120">Valeur</span><span class="sxs-lookup"><span data-stu-id="7493c-120">Value</span></span> | <span data-ttu-id="7493c-121">Signification</span><span class="sxs-lookup"><span data-stu-id="7493c-121">Meaning</span></span>                                           |
|-------|---------------------------------------------------|
| <span data-ttu-id="7493c-122">0</span><span class="sxs-lookup"><span data-stu-id="7493c-122">0</span></span>     | <span data-ttu-id="7493c-123">Protocole superposé.</span><span class="sxs-lookup"><span data-stu-id="7493c-123">Layered protocol.</span></span>                                 |
| <span data-ttu-id="7493c-124">1</span><span class="sxs-lookup"><span data-stu-id="7493c-124">1</span></span>     | <span data-ttu-id="7493c-125">Protocole de base (ou chaîne avec un seul composant).</span><span class="sxs-lookup"><span data-stu-id="7493c-125">Base protocol (or chain with only one component).</span></span> |
| <span data-ttu-id="7493c-126">>1</span><span class="sxs-lookup"><span data-stu-id="7493c-126">>1</span></span> | <span data-ttu-id="7493c-127">Chaîne de protocole.</span><span class="sxs-lookup"><span data-stu-id="7493c-127">Protocol chain.</span></span>                                   |



 

<span data-ttu-id="7493c-128">L’installation de chaînes de protocole ne peut se produire qu’après l’installation réussie de tous les composants constitutifs (protocoles de base et protocoles en couches).</span><span class="sxs-lookup"><span data-stu-id="7493c-128">Installation of protocol chains can only occur after successful installation of all of the constituent components (base protocols and layered protocols).</span></span> <span data-ttu-id="7493c-129">La structure [**WSAPROTOCOL \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) pour une chaîne de protocole utilise le paramètre *ProtocolChain* pour décrire la longueur de la chaîne et l’identité de chaque composant.</span><span class="sxs-lookup"><span data-stu-id="7493c-129">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure for a protocol chain uses the *ProtocolChain* parameter to describe the length of the chain and the identity of each component.</span></span> <span data-ttu-id="7493c-130">Les protocoles individuels qui composent une chaîne sont répertoriés dans l’ordre dans le tableau ProtocolChain. ChainEntries, avec l’élément avant toute chose du tableau correspondant au premier fournisseur superposé.</span><span class="sxs-lookup"><span data-stu-id="7493c-130">The individual protocols that make up a chain are listed in order in the ProtocolChain.ChainEntries array, with the zeroth element of the array corresponding to the first layered provider.</span></span> <span data-ttu-id="7493c-131">Les protocoles sont identifiés par leurs valeurs *CatalogEntryID* , qui sont affectées par l' \_32.dll Ws2 à l’heure d’installation du protocole et se trouvent dans la structure **WSAPROTOCOL \_ info** pour chaque protocole.</span><span class="sxs-lookup"><span data-stu-id="7493c-131">Protocols are identified by their *CatalogEntryID* values, which are assigned by the Ws2\_32.dll at protocol installation time, and can be found in the **WSAPROTOCOL\_INFO** structure for each protocol.</span></span>

<span data-ttu-id="7493c-132">Les valeurs des autres paramètres de la structure [**WSAPROTOCOL \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) de la chaîne de protocole doivent être choisies pour refléter les attributs et les identificateurs qui caractérisent le mieux la chaîne de protocole dans son ensemble.</span><span class="sxs-lookup"><span data-stu-id="7493c-132">The values for the remaining parameters in the protocol chain's [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure should be chosen to reflect the attributes and identifiers that best characterize the protocol chain as a whole.</span></span> <span data-ttu-id="7493c-133">Lorsque vous sélectionnez ces valeurs, les développeurs doivent garder à l’esprit que les communications sur les chaînes de protocole ne peuvent se produire que lorsque les deux points de terminaison ont des chaînes de protocole compatibles installées et que les applications doivent être en mesure de reconnaître la structure d' **\_ informations WSAPROTOCOL** correspondante.</span><span class="sxs-lookup"><span data-stu-id="7493c-133">When selecting these values, developers should bear in mind that communications over protocol chains can only occur when both endpoints have compatible protocol chains installed, and that applications must be able to recognize the corresponding **WSAPROTOCOL\_INFO** structure.</span></span>

<span data-ttu-id="7493c-134">Lorsqu’un protocole de base est installé, il n’est pas nécessaire de créer des entrées dans le tableau *ProtocolChain. ChainEntries* .</span><span class="sxs-lookup"><span data-stu-id="7493c-134">When a base protocol is installed, it is not necessary to make any entries in the *ProtocolChain.ChainEntries* array.</span></span> <span data-ttu-id="7493c-135">Il est implicitement compris que le seul composant de cette chaîne est déjà identifié dans le paramètre *CatalogEntryID* de la même structure [**WSAPROTOCOL \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) .</span><span class="sxs-lookup"><span data-stu-id="7493c-135">It is implicitly understood that the sole component of this chain is already identified in the *CatalogEntryID* parameter of the same [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span> <span data-ttu-id="7493c-136">Notez également que les chaînes de protocole peuvent ne pas inclure plusieurs instances du même protocole en couches.</span><span class="sxs-lookup"><span data-stu-id="7493c-136">Also note that protocol chains may not include multiple instances of the same layered protocol.</span></span>

 

 
