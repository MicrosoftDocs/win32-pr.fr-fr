---
description: Windows Sockets 2 offre un ensemble étendu d’opérations qui peuvent se produire en coïncidant avec l’établissement d’une connexion de Socket. Les conditions requises par le fournisseur de services pour implémenter ces fonctionnalités sont décrites ci-dessous.
ms.assetid: fbc7055e-ea25-4d17-8039-f0fef300353c
title: Amélioration des fonctionnalités au moment de la connexion
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d33c6d7ee928fe7e97f535363e9e842285eef7fe
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104113083"
---
# <a name="enhanced-functionality-at-connect-time"></a><span data-ttu-id="dee45-104">Amélioration des fonctionnalités au moment de la connexion</span><span class="sxs-lookup"><span data-stu-id="dee45-104">Enhanced Functionality at Connect Time</span></span>

<span data-ttu-id="dee45-105">Windows Sockets 2 offre un ensemble étendu d’opérations qui peuvent se produire en coïncidant avec l’établissement d’une connexion de Socket.</span><span class="sxs-lookup"><span data-stu-id="dee45-105">Windows Sockets 2 offers an expanded set of operations that can occur coincident to establishing a socket connection.</span></span> <span data-ttu-id="dee45-106">Les conditions requises par le fournisseur de services pour implémenter ces fonctionnalités sont décrites ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="dee45-106">The service provider requirements for implementing these features are described below.</span></span>

## <a name="conditional-acceptance"></a><span data-ttu-id="dee45-107">Acceptation conditionnelle</span><span class="sxs-lookup"><span data-stu-id="dee45-107">Conditional Acceptance</span></span>

<span data-ttu-id="dee45-108">Comme décrit précédemment, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) appelle une fonction de condition fournie par le client qui utilise des paramètres d’entrée pour fournir des informations sur la demande de connexion en attente.</span><span class="sxs-lookup"><span data-stu-id="dee45-108">As described previously, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) invokes a client-supplied condition function that uses input parameters to supply information about the pending connection request.</span></span> <span data-ttu-id="dee45-109">Ces informations peuvent être utilisées par le client pour accepter ou refuser une demande de connexion en fonction des informations de l’appelant, telles que l’identificateur de l’appelant, la qualité de service (QoS), etc. Si la fonction condition retourne l' \_ acceptation CF, un nouveau socket est créé avec les mêmes propriétés que le socket d’écoute et un handle vers le nouveau socket est retourné.</span><span class="sxs-lookup"><span data-stu-id="dee45-109">This information can be used by the client to accept or reject a connection request based on caller information such as caller identifier, QoS, etc. If the condition function returns CF\_ACCEPT, a new socket is created with the same properties as the listening socket, and a handle to the new socket is returned.</span></span> <span data-ttu-id="dee45-110">Si la fonction condition retourne CF \_ Reject, la demande de connexion doit être rejetée.</span><span class="sxs-lookup"><span data-stu-id="dee45-110">If the condition function returns CF\_REJECT, the connection request should be rejected.</span></span> <span data-ttu-id="dee45-111">Si la fonction condition retourne CF \_ Defer, la décision accepter/refuser ne peut pas être effectuée immédiatement et le fournisseur de services doit conserver la demande de connexion dans la file d’attente du Backlog.</span><span class="sxs-lookup"><span data-stu-id="dee45-111">If the condition function returns CF\_DEFER, the accept/reject decision cannot be made immediately, and the service provider must leave the connection request on the backlog queue.</span></span> <span data-ttu-id="dee45-112">Le client doit appeler **WSPAccept** à nouveau, lorsqu’il est prêt à prendre une décision et organiser la fonction condition pour qu’elle retourne les fonctions d' \_ acceptation ou de \_ rejet cf.</span><span class="sxs-lookup"><span data-stu-id="dee45-112">The client must call **WSPAccept** again, when it is ready to make a decision, and arrange for the condition function to return either CF\_ACCEPT or CF\_REJECT.</span></span> <span data-ttu-id="dee45-113">Alors qu’une demande de connexion différée est en haut de la file d’attente des travaux en souffrance, le fournisseur de services n’émet aucune indication supplémentaire pour les demandes de connexion en attente.</span><span class="sxs-lookup"><span data-stu-id="dee45-113">While a deferred connection request is at the top of the backlog queue, the service provider does not issue any further indications for pending connection requests.</span></span>

## <a name="exchanging-user-data-at-connect-time"></a><span data-ttu-id="dee45-114">Échange de données utilisateur au moment de la connexion</span><span class="sxs-lookup"><span data-stu-id="dee45-114">Exchanging User Data at Connect Time</span></span>

<span data-ttu-id="dee45-115">Certains protocoles autorisent l’échange d’une petite quantité de données utilisateur au moment de la connexion.</span><span class="sxs-lookup"><span data-stu-id="dee45-115">Some protocols allow a small amount of user data to be exchanged at connect time.</span></span> <span data-ttu-id="dee45-116">Si ces données ont été reçues de l’hôte qui se connecte, elles sont placées dans une mémoire tampon du fournisseur de services, et un pointeur vers cette mémoire tampon avec une valeur de longueur est fourni au client Winsock SPI via des paramètres d’entrée pour la fonction de condition [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) .</span><span class="sxs-lookup"><span data-stu-id="dee45-116">If such data has been received from the connecting host, it is placed in a service provider buffer, and a pointer to this buffer along with a length value are supplied to the Winsock SPI client through input parameters to the [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) condition function.</span></span> <span data-ttu-id="dee45-117">Si le client Winsock SPI a des données de réponse à retourner à l’hôte qui se connecte, il peut le copier dans une mémoire tampon fournie par le fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="dee45-117">If the Winsock SPI client has response data to return to the connecting host, it may copy this into a buffer that is supplied by the service provider.</span></span> <span data-ttu-id="dee45-118">Un pointeur vers cette mémoire tampon et un entier indiquant la taille de la mémoire tampon sont également fournis comme paramètres d’entrée de la fonction de condition (si pris en charge par le protocole).</span><span class="sxs-lookup"><span data-stu-id="dee45-118">A pointer to this buffer and an integer indicating buffer size are also supplied as condition function input parameters (if supported by the protocol).</span></span>

## <a name="establishing-socket-groups"></a><span data-ttu-id="dee45-119">Établissement des groupes de Sockets</span><span class="sxs-lookup"><span data-stu-id="dee45-119">Establishing Socket Groups</span></span>

<span data-ttu-id="dee45-120">Toutes les utilisation des groupes de sockets sont réservées.</span><span class="sxs-lookup"><span data-stu-id="dee45-120">All use of socket groups is reserved.</span></span>

 

 



