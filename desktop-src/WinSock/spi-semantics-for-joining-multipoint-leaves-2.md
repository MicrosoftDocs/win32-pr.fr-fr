---
description: Dans l’exemple suivant, un socket multipoint est souvent caractérisé par la description de son rôle dans l’un des deux plans (contrôle ou données).
ms.assetid: 35e4a8c9-d943-44b8-be61-605b60a6cf5d
title: Sémantique SPI pour joindre des feuilles multipoint
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa0e77203e5405f6cb820baba5d545de03e3a8ce
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106530579"
---
# <a name="spi-semantics-for-joining-multipoint-leaves"></a><span data-ttu-id="5b152-103">Sémantique SPI pour joindre des feuilles multipoint</span><span class="sxs-lookup"><span data-stu-id="5b152-103">SPI Semantics for Joining Multipoint Leaves</span></span>

<span data-ttu-id="5b152-104">Dans l’exemple suivant, un socket multipoint est souvent caractérisé par la description de son rôle dans l’un des deux plans (contrôle ou données).</span><span class="sxs-lookup"><span data-stu-id="5b152-104">In the following, a multipoint socket is frequently characterized by describing its role in one of the two planes (control or data).</span></span> <span data-ttu-id="5b152-105">Il est important de comprendre que ce même socket a un rôle dans l’autre plan, mais cela n’est pas mentionné afin de conserver les références courtes.</span><span class="sxs-lookup"><span data-stu-id="5b152-105">It should be understood that this same socket has a role in the other plane, but this is not mentioned in order to keep the references short.</span></span> <span data-ttu-id="5b152-106">Par exemple, une référence à un \_ Socket racine c peut faire référence à une racine racine \_ /d ou à un \_ \_ Socket feuille c racine/d \_ .</span><span class="sxs-lookup"><span data-stu-id="5b152-106">For example a reference to a c\_root socket could refer to either a c\_root/d\_root or a c\_root/d\_leaf socket.</span></span>

<span data-ttu-id="5b152-107">Dans les schémas de plan de contrôle enracinés, de nouveaux nœuds terminaux sont ajoutés à une session multipoint dans l’une ou l’autre des deux méthodes.</span><span class="sxs-lookup"><span data-stu-id="5b152-107">In rooted control plane schemes, new leaf nodes are added to a multipoint session in one or both of two different ways.</span></span> <span data-ttu-id="5b152-108">Dans la première méthode, la racine utilise [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) pour établir une connexion avec un nœud terminal et l’inviter à devenir participant.</span><span class="sxs-lookup"><span data-stu-id="5b152-108">In the first method, the root uses [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) to initiate a connection with a leaf node and invite it to become a participant.</span></span> <span data-ttu-id="5b152-109">Sur le nœud terminal, l’application homologue doit avoir créé un \_ Socket feuille c et utilisé [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)) pour le définir en mode écoute.</span><span class="sxs-lookup"><span data-stu-id="5b152-109">On the leaf node, the peer application must have created a c\_leaf socket and used [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)) to set it into listen mode.</span></span> <span data-ttu-id="5b152-110">Le nœud terminal reçoit une indication FD \_ Accept lorsqu’il est invité à rejoindre la session, et signale sa volonté de s’y joindre en appelant [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span><span class="sxs-lookup"><span data-stu-id="5b152-110">The leaf node will receive an FD\_ACCEPT indication when invited to join the session, and signals its willingness to join by calling [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span></span> <span data-ttu-id="5b152-111">L’application racine reçoit une indication FD \_ Connect lorsque l’opération de jointure est terminée.</span><span class="sxs-lookup"><span data-stu-id="5b152-111">The root application will receive an FD\_CONNECT indication when the join operation has been completed.</span></span>

<span data-ttu-id="5b152-112">Dans la deuxième méthode, les rôles sont fondamentalement inversés.</span><span class="sxs-lookup"><span data-stu-id="5b152-112">In the second method, the roles are essentially reversed.</span></span> <span data-ttu-id="5b152-113">Le client racine crée un \_ Socket racine c et le définit en mode écoute.</span><span class="sxs-lookup"><span data-stu-id="5b152-113">The root client creates a c\_root socket and sets it into listen mode.</span></span> <span data-ttu-id="5b152-114">Un nœud feuille souhaitant rejoindre la session crée un \_ Socket feuille c et utilise [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) pour initier la connexion et demander des admission.</span><span class="sxs-lookup"><span data-stu-id="5b152-114">A leaf node wishing to join the session creates a c\_leaf socket and uses [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) to initiate the connection and request admittance.</span></span> <span data-ttu-id="5b152-115">Le client racine reçoit le FD \_ Accept lorsqu’une demande admission entrante arrive et admet le nœud terminal en appelant [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span><span class="sxs-lookup"><span data-stu-id="5b152-115">The root client receives FD\_ACCEPT when an incoming admittance request arrives, and admits the leaf node by calling [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span></span> <span data-ttu-id="5b152-116">Le nœud terminal reçoit FD \_ Connect lorsqu’il a été admis.</span><span class="sxs-lookup"><span data-stu-id="5b152-116">The leaf node receives FD\_CONNECT when it has been admitted.</span></span>

<span data-ttu-id="5b152-117">Dans un plan de contrôle sans racine, où tous les nœuds sont des \_ feuilles c, la fonction [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) est utilisée pour initialiser l’inclusion d’un nœud dans une session multipoint existante.</span><span class="sxs-lookup"><span data-stu-id="5b152-117">In a nonrooted control plane, where all nodes are c\_leafs, the [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) function is used to initiate the inclusion of a node into an existing multipoint session.</span></span> <span data-ttu-id="5b152-118">Une \_ indication FD Connect est fournie lorsque la jointure est terminée et que le descripteur de socket retourné est utilisable dans la session multipoint.</span><span class="sxs-lookup"><span data-stu-id="5b152-118">An FD\_CONNECT indication is provided when the join has been completed and the returned socket descriptor is usable in the multipoint session.</span></span> <span data-ttu-id="5b152-119">Dans le cas de la multidiffusion IP, cela correspond à l' \_ option IP ajouter \_ un socket d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="5b152-119">In the case of IP multicast, this would correspond to the IP\_ADD\_MEMBERSHIP socket option.</span></span>

<span data-ttu-id="5b152-120">Il existe, par conséquent, trois instances où un client utilise [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf):</span><span class="sxs-lookup"><span data-stu-id="5b152-120">There are, therefore, three instances where a client would use [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf):</span></span>

-   <span data-ttu-id="5b152-121">Agir comme racine multipoint et inviter une nouvelle feuille pour rejoindre la session.</span><span class="sxs-lookup"><span data-stu-id="5b152-121">Acting as a multipoint root and inviting a new leaf to join the session.</span></span>
-   <span data-ttu-id="5b152-122">Action en tant que feuille effectuant une demande admission à une session multipoint avec racine.</span><span class="sxs-lookup"><span data-stu-id="5b152-122">Acting as a leaf making an admittance request to a rooted multipoint session.</span></span>
-   <span data-ttu-id="5b152-123">Agissant comme une feuille de recherche de admission dans une session multipoint sans racine (par exemple, la multidiffusion IP).</span><span class="sxs-lookup"><span data-stu-id="5b152-123">Acting as a leaf seeking admittance to a nonrooted multipoint session (for example, IP multicast.)</span></span>

 

 
