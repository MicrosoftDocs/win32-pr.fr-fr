---
title: Vue d’ensemble du fournisseur
description: Vue d’ensemble conceptuelle d’une application de fournisseur.
ms.assetid: <GUID-GOES-HERE>
ms.date: 01/17/2020
ms.topic: article
ms.openlocfilehash: 89b49096b7b68a723b52b4eb998c446661b7d3c9
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104464030"
---
# <a name="provider-overview"></a><span data-ttu-id="5724e-103">Vue d’ensemble du fournisseur</span><span class="sxs-lookup"><span data-stu-id="5724e-103">Provider Overview</span></span>

<span data-ttu-id="5724e-104">Le fournisseur est une application en mode utilisateur qui gère et comprend un magasin de données de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="5724e-104">The provider is a user-mode application that maintains and understands a backing data store.</span></span>  <span data-ttu-id="5724e-105">Le fournisseur implémente les rappels ProjFS et utilise l’API ProjFS pour projeter ce magasin de données dans le système de fichiers où il apparaît à l’utilisateur sous la forme de fichiers et de répertoires.</span><span class="sxs-lookup"><span data-stu-id="5724e-105">The provider implements ProjFS callbacks and uses the ProjFS API to project this data store into the file system where it appears to the user as files and directories.</span></span>  <span data-ttu-id="5724e-106">Le magasin de stockage du fournisseur peut être local sur le système de l’utilisateur ou il peut être placé à distance.</span><span class="sxs-lookup"><span data-stu-id="5724e-106">The provider’s backing store may be local to the user’s system, or it may be located remotely.</span></span>

## <a name="data-projection"></a><span data-ttu-id="5724e-107">Projection de données</span><span class="sxs-lookup"><span data-stu-id="5724e-107">Data Projection</span></span>

<span data-ttu-id="5724e-108">La partie du système de fichiers que le fournisseur possède, où ses données sont projetées, est enracinée dans un répertoire appelé « racine de virtualisation ».</span><span class="sxs-lookup"><span data-stu-id="5724e-108">The part of the file system that the provider owns, where its data is projected, is rooted in a directory called the “virtualization root”.</span></span>  <span data-ttu-id="5724e-109">Lorsque le fournisseur souhaite commencer à projeter ses données, il démarre une « instance de virtualisation », qui est un objet qui gère la communication entre le fournisseur et ProjFS pour l’ensemble de fichiers et de répertoires situés sous une racine de virtualisation particulière.</span><span class="sxs-lookup"><span data-stu-id="5724e-109">When the provider wants to start projecting its data it starts a "virtualization instance", which is an object that manages communication between the provider and ProjFS for the set of files and directories located under a particular virtualization root.</span></span>  <span data-ttu-id="5724e-110">Tous les fichiers et répertoires qui sont des descendants de la racine de virtualisation qui n’ont pas été créés localement par l’utilisateur sont matérialisés par le fournisseur via l’API ProjFS.</span><span class="sxs-lookup"><span data-stu-id="5724e-110">Any files and directories that are descendants of the virtualization root that have not been created locally by the user are materialized by the provider via the ProjFS API.</span></span>  <span data-ttu-id="5724e-111">Ces éléments démarrent sous la forme de fichiers et de répertoires virtuels, ce qui signifie qu’ils n’existent pas sur le périphérique de stockage local de l’utilisateur, mais sont injectés dans les résultats de l’énumération par ProjFS.</span><span class="sxs-lookup"><span data-stu-id="5724e-111">These items start off as virtual files and directories, meaning that they do not exist on the user’s local storage device, but are injected into enumeration results by ProjFS.</span></span>  <span data-ttu-id="5724e-112">À mesure que les éléments sont ouverts et lus, ProjFS appelle les rappels implémentés par le fournisseur pour demander des données, et le fournisseur utilise les API ProjFS pour envoyer ces données au stockage local où elles sont mises en cache pour un accès ultérieur.</span><span class="sxs-lookup"><span data-stu-id="5724e-112">As the items are opened and read, ProjFS invokes callbacks implemented by the provider to request data, and the provider uses ProjFS APIs to send that data to the local storage where it is cached for subsequent access.</span></span>  <span data-ttu-id="5724e-113">Si la vue de l’utilisateur du magasin de données de stockage doit être modifiée, par exemple si le contenu du magasin de données a changé, le fournisseur peut utiliser des API ProjFS pour mettre à jour ou supprimer des éléments locaux afin de refléter la nouvelle vue du magasin de données.</span><span class="sxs-lookup"><span data-stu-id="5724e-113">If the user's view of the backing data store needs to change, for instance if the contents of the data store have changed, the provider can use ProjFS APIs to update or delete local items to reflect the new view of the data store.</span></span>

## <a name="callback-return-codes"></a><span data-ttu-id="5724e-114">Codes de retour de rappel</span><span class="sxs-lookup"><span data-stu-id="5724e-114">Callback return codes</span></span>

<span data-ttu-id="5724e-115">Chaque rappel répertorie plusieurs valeurs de retour possibles spécifiques à ce rappel.</span><span class="sxs-lookup"><span data-stu-id="5724e-115">Each callback lists a number of possible return values specific to that callback.</span></span>  <span data-ttu-id="5724e-116">En plus des valeurs de retour listées pour un rappel donné, un rappel peut également retourner certains autres codes d’erreur.</span><span class="sxs-lookup"><span data-stu-id="5724e-116">In addition to the return values listed for a given callback, a callback may also return certain other error codes.</span></span>  <span data-ttu-id="5724e-117">Il s’agit de la liste complète des codes d’erreur pouvant être renvoyés par un rappel :</span><span class="sxs-lookup"><span data-stu-id="5724e-117">This is the complete list of error codes that a callback may return:</span></span>

| <span data-ttu-id="5724e-118">Code d'erreur</span><span class="sxs-lookup"><span data-stu-id="5724e-118">Error Code</span></span>                                    | <span data-ttu-id="5724e-119">Signification</span><span class="sxs-lookup"><span data-stu-id="5724e-119">Meaning</span></span>
|-----------------------------------------------|--------
| <span data-ttu-id="5724e-120">S_OK</span><span class="sxs-lookup"><span data-stu-id="5724e-120">S_OK</span></span>                                          | <span data-ttu-id="5724e-121">Opération réussie</span><span class="sxs-lookup"><span data-stu-id="5724e-121">Operation Successful</span></span>
| <span data-ttu-id="5724e-122">E_OUTOFMEMORY</span><span class="sxs-lookup"><span data-stu-id="5724e-122">E_OUTOFMEMORY</span></span>                                 | <span data-ttu-id="5724e-123">Impossible d’allouer la mémoire nécessaire.</span><span class="sxs-lookup"><span data-stu-id="5724e-123">Failed to allocate necessary memory.</span></span>
| <span data-ttu-id="5724e-124">HRESULT_FROM_WIN32 (ERROR_IO_PENDING)</span><span class="sxs-lookup"><span data-stu-id="5724e-124">HRESULT_FROM_WIN32(ERROR_IO_PENDING)</span></span>          | <span data-ttu-id="5724e-125">Le fournisseur souhaite terminer l’opération ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="5724e-125">The provider wishes to complete the operation at a later time.</span></span>
| <span data-ttu-id="5724e-126">HRESULT_FROM_WIN32(ERROR_INSUFFICIENT_BUFFER)</span><span class="sxs-lookup"><span data-stu-id="5724e-126">HRESULT_FROM_WIN32(ERROR_INSUFFICIENT_BUFFER)</span></span> | <span data-ttu-id="5724e-127">Une mémoire tampon passée à un rappel est trop petite.</span><span class="sxs-lookup"><span data-stu-id="5724e-127">A buffer passed to a callback was too small.</span></span>
| <span data-ttu-id="5724e-128">HRESULT_FROM_WIN32(ERROR_FILE_NOT_FOUND)</span><span class="sxs-lookup"><span data-stu-id="5724e-128">HRESULT_FROM_WIN32(ERROR_FILE_NOT_FOUND)</span></span>      | <span data-ttu-id="5724e-129">Le fichier n’existe pas dans le magasin de stockage du fournisseur.</span><span class="sxs-lookup"><span data-stu-id="5724e-129">The file does not exist in the provider’s backing store.</span></span>
| <span data-ttu-id="5724e-130">HRESULT_FROM_WIN32 (ERROR_INVALID_PARAMETER)</span><span class="sxs-lookup"><span data-stu-id="5724e-130">HRESULT_FROM_WIN32(ERROR_INVALID_PARAMETER)</span></span>   | <span data-ttu-id="5724e-131">Un argument de rappel n’est pas valide.</span><span class="sxs-lookup"><span data-stu-id="5724e-131">A callback argument is invalid.</span></span>  <span data-ttu-id="5724e-132">Par exemple, un ID d’énumération ne correspond pas à une session d’énumération active.</span><span class="sxs-lookup"><span data-stu-id="5724e-132">For example, an enumeration ID doesn't correspond to an active enumeration session.</span></span>
| <span data-ttu-id="5724e-133">HRESULT_FROM_WIN32(ERROR_ACCESS_DENIED)</span><span class="sxs-lookup"><span data-stu-id="5724e-133">HRESULT_FROM_WIN32(ERROR_ACCESS_DENIED)</span></span>       | <span data-ttu-id="5724e-134">Le fournisseur souhaite empêcher une opération, telle qu’un changement de nom ou une suppression, de se produire.</span><span class="sxs-lookup"><span data-stu-id="5724e-134">The provider wishes to prevent an operation, such as a rename or delete, from taking place.</span></span>

<span data-ttu-id="5724e-135">Les rappels peuvent également retourner toutes les erreurs qu’ils peuvent recevoir des appels aux API ProjFS.</span><span class="sxs-lookup"><span data-stu-id="5724e-135">Callbacks may also return any errors they may receive from calls to ProjFS APIs.</span></span>
<span data-ttu-id="5724e-136">Si un rappel retourne un code d’erreur qui ne figure pas dans la liste précédente ou qui ne provient pas d’une API ProjFS, ProjFS le renverra au système de fichiers en tant que STATUS_INTERNAL_ERROR.</span><span class="sxs-lookup"><span data-stu-id="5724e-136">If a callback returns an error code that is not on the preceding list or that did not come from a ProjFS API, ProjFS will return it to the file system as STATUS_INTERNAL_ERROR.</span></span>
