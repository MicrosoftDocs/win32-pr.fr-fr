---
description: Microsoft fournit des analyseurs lexicaux et des générateurs de formes dérivées pour un certain nombre de langages. Cette rubrique décrit comment implémenter et utiliser des analyseurs lexicaux et des générateurs de formes dérivées personnalisés pour les langues, et les paramètres régionaux au-delà de ceux fournis par Microsoft.
ms.assetid: 47768691-7071-440e-bfbf-975713880c00
title: Implémentation d’un analyseur lexical et du générateur de formes dérivées
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4bd4f4e3210e7f4e17bb035115fd694656cc6e6d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104033878"
---
# <a name="implementing-a-word-breaker-and-stemmer"></a><span data-ttu-id="cf196-104">Implémentation d’un analyseur lexical et du générateur de formes dérivées</span><span class="sxs-lookup"><span data-stu-id="cf196-104">Implementing a Word Breaker and Stemmer</span></span>

<span data-ttu-id="cf196-105">Microsoft fournit des analyseurs lexicaux et des générateurs de formes dérivées pour un certain nombre de langages.</span><span class="sxs-lookup"><span data-stu-id="cf196-105">Microsoft provides word breakers and stemmers for a number of languages.</span></span> <span data-ttu-id="cf196-106">Cette rubrique décrit comment implémenter et utiliser des analyseurs lexicaux et des générateurs de formes dérivées personnalisés pour les langues, et les paramètres régionaux au-delà de ceux fournis par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cf196-106">This topic describes how to implement, and use custom word breakers and stemmers for languages, and locales beyond those provided by Microsoft.</span></span>

> [!Note]
> <span data-ttu-id="cf196-107">Depuis le 2018 juillet, une modification de sécurité a été apportée à Windows Server 2019, qui empêche les dll sans signature Microsoft d’être chargées par SearchIndexer.exe.</span><span class="sxs-lookup"><span data-stu-id="cf196-107">As of July 2018 a security change was made to Windows Server 2019 that prevents DLLs without a Microsoft signature from being loaded by SearchIndexer.exe.</span></span> <span data-ttu-id="cf196-108">Par conséquent, Windows Server 2019 ne prend plus en charge les analyseurs lexicaux personnalisés non signés par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cf196-108">As a result Windows Server 2019 no longer supports non-Microsoft signed custom word breakers.</span></span> 

<span data-ttu-id="cf196-109">Cette rubrique est organisée comme suit :</span><span class="sxs-lookup"><span data-stu-id="cf196-109">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="cf196-110">Inscription d’une DLL de ressource de langue</span><span class="sxs-lookup"><span data-stu-id="cf196-110">Registering a Language Resource DLL</span></span>](#registering-a-language-resource-dll)
-   [<span data-ttu-id="cf196-111">Inscription d’une langue</span><span class="sxs-lookup"><span data-stu-id="cf196-111">Registering a Language</span></span>](#registering-a-language-resource-dll)
-   [<span data-ttu-id="cf196-112">Implémentation d’un bécher de mot</span><span class="sxs-lookup"><span data-stu-id="cf196-112">Implementing a Word Beaker</span></span>](#implementing-a-word-beaker)
    -   [<span data-ttu-id="cf196-113">WordSink et PhraseSink</span><span class="sxs-lookup"><span data-stu-id="cf196-113">WordSink and PhraseSink</span></span>](#wordsink-and-phrasesink)
    -   [<span data-ttu-id="cf196-114">Sauts</span><span class="sxs-lookup"><span data-stu-id="cf196-114">Breaks</span></span>](#breaks)
    -   [<span data-ttu-id="cf196-115">Évolutivité, Performancy et sécurité</span><span class="sxs-lookup"><span data-stu-id="cf196-115">Scalability, Performancy, and Security</span></span>](#scalability-performancy-and-security)
-   [<span data-ttu-id="cf196-116">Implémentation d’un générateur de formes dérivées</span><span class="sxs-lookup"><span data-stu-id="cf196-116">Implementing a Stemmer</span></span>](#implementing-a-stemmer)
    -   [<span data-ttu-id="cf196-117">Évolutivité, Performancy et sécurité</span><span class="sxs-lookup"><span data-stu-id="cf196-117">Scalability, Performancy, and Security</span></span>](#scalability-performancy-and-security)
-   [<span data-ttu-id="cf196-118">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="cf196-118">Related topics</span></span>](#related-topics)

## <a name="registering-a-language-resource-dll"></a><span data-ttu-id="cf196-119">Inscription d’une DLL de ressource de langue</span><span class="sxs-lookup"><span data-stu-id="cf196-119">Registering a Language Resource DLL</span></span>

<span data-ttu-id="cf196-120">Chaque DLL de ressource de langue doit implémenter et exporter les points d’entrée suivants.</span><span class="sxs-lookup"><span data-stu-id="cf196-120">Each language resource DLL must implement and export the following entry points.</span></span> <span data-ttu-id="cf196-121">La DLL peut être inscrite dans n’importe quel dossier.</span><span class="sxs-lookup"><span data-stu-id="cf196-121">The DLL can be registered to be in any folder.</span></span>

-   <span data-ttu-id="cf196-122">DllMain est le point d’entrée standard de la DLL.</span><span class="sxs-lookup"><span data-stu-id="cf196-122">DllMain is the standard entry point to DLL.</span></span>
-   <span data-ttu-id="cf196-123">DllRegisterServer inscrit la DLL dans le registre, par exemple `regsvr32.exe %SystemRoot%\MyFolder\wordbreaker.dll`</span><span class="sxs-lookup"><span data-stu-id="cf196-123">DllRegisterServer registers the DLL in the registry, such as `regsvr32.exe %SystemRoot%\MyFolder\wordbreaker.dll`</span></span>
-   <span data-ttu-id="cf196-124">DllCanUnloadNow permet aux clients d’appeler ce point d’entrée par le biais du modèle COM (Component Object Model) pour déterminer s’il est possible de décharger la DLL de ressources de langue.</span><span class="sxs-lookup"><span data-stu-id="cf196-124">DllCanUnloadNow enables clients to call this entry point through Component Object Model (COM) to determine whether it is possible to unload the language resource DLL.</span></span>
-   <span data-ttu-id="cf196-125">DllUnRegisterServer supprime la DLL du Registre.</span><span class="sxs-lookup"><span data-stu-id="cf196-125">DllUnRegisterServer removes the DLL from the registry.</span></span>

## <a name="registering-a-language"></a><span data-ttu-id="cf196-126">Inscription d’une langue</span><span class="sxs-lookup"><span data-stu-id="cf196-126">Registering a Language</span></span>

<span data-ttu-id="cf196-127">Le registre contient des entrées spécifiques à la langue pour la langue en cours d’indexation, et ces entrées contrôlent les parties des processus d’indexation et de requête qui sont spécifiques à la langue.</span><span class="sxs-lookup"><span data-stu-id="cf196-127">The registry contains language-specific entries for the language being indexed, and these entries control the parts of the indexing and query processes that are language specific.</span></span> <span data-ttu-id="cf196-128">Ces entrées de Registre se trouvent sous la clé de Registre suivante.</span><span class="sxs-lookup"><span data-stu-id="cf196-128">These registry entries can be found under the following registry key.</span></span>

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         ContentIndex
            Control
               Language
                  
```

## <a name="implementing-a-word-beaker"></a><span data-ttu-id="cf196-129">Implémentation d’un bécher de mot</span><span class="sxs-lookup"><span data-stu-id="cf196-129">Implementing a Word Beaker</span></span>

<span data-ttu-id="cf196-130">Les analyseurs lexicaux implémentent [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span><span class="sxs-lookup"><span data-stu-id="cf196-130">Word breakers implement [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span></span> <span data-ttu-id="cf196-131">La méthode [**IWordBreaker :: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) effectue toutes les opérations de traitement et d’analyse de texte.</span><span class="sxs-lookup"><span data-stu-id="cf196-131">The [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method performs all text processing and parsing.</span></span> <span data-ttu-id="cf196-132">Pour implémenter un composant analyseur lexical, vous devez disposer de l’heuristique de langue pour votre langage.</span><span class="sxs-lookup"><span data-stu-id="cf196-132">To implement a word breaker component, you must have language heuristics for your language.</span></span> <span data-ttu-id="cf196-133">Cela comprend des informations sur la syntaxe et la morphologie.</span><span class="sxs-lookup"><span data-stu-id="cf196-133">This includes information about syntax and morphology.</span></span> <span data-ttu-id="cf196-134">Vous pouvez également avoir besoin d’une liste de mots à exclure ou inclure.</span><span class="sxs-lookup"><span data-stu-id="cf196-134">You may also need a list of words to exclude or include.</span></span> <span data-ttu-id="cf196-135">Vous générez le fichier de mots parasites pour vos paramètres régionaux de langue à partir de la liste des mots exclus.</span><span class="sxs-lookup"><span data-stu-id="cf196-135">You build the file of noise words for your language locale from the list of excluded words.</span></span> <span data-ttu-id="cf196-136">Pour plus d’informations sur les considérations linguistiques et sur la façon dont ces considérations affectent les implémentations de l’analyseur lexical, consultez [Considérations linguistiques et Unicode](linguistic-and-unicode-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="cf196-136">For more information about linguistic considerations and how these considerations affect word breaker implementations, see [Linguistic and Unicode Considerations](linguistic-and-unicode-considerations.md).</span></span>

<span data-ttu-id="cf196-137">L’objectif principal de [**IWordBreaker :: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) est de traiter le texte en continu à partir de la [**\_ source de texte**](/windows/win32/api/indexsrv/ns-indexsrv-text_source) jusqu’à ce que tout le texte soit traité ou jusqu’à ce que l’analyseur lexical rencontre une erreur.</span><span class="sxs-lookup"><span data-stu-id="cf196-137">The main purpose of [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) is to process text continuously from the [**TEXT\_SOURCE**](/windows/win32/api/indexsrv/ns-indexsrv-text_source) until all the text is processed, or until the word breaker encounters an error.</span></span> <span data-ttu-id="cf196-138">Dans cette boucle de traitement des données, **IWordBreaker :: BreakText** appelle l’analyse et les méthodes utilitaires qui effectuent des tâches spécifiques pour ce processus.</span><span class="sxs-lookup"><span data-stu-id="cf196-138">While in this data processing loop, **IWordBreaker::BreakText** calls parsing and utility methods that perform specific tasks for that process.</span></span> <span data-ttu-id="cf196-139">Par exemple, l’analyseur lexical allemand peut gérer les mots composés, tandis que l’analyseur lexical français peut traiter les [signes diacritiques](surface-form-normalization.md) ou [clitics](surface-form-normalization.md).</span><span class="sxs-lookup"><span data-stu-id="cf196-139">For example, the German word breaker may handle compound words, whereas the French word breaker may process [diacritics](surface-form-normalization.md) or [clitics](surface-form-normalization.md).</span></span> <span data-ttu-id="cf196-140">Les fonctions spécifiques exécutées par l’analyseur lexical et la stratégie qu’il utilise pour effectuer ces tâches dépendent entièrement des exigences de cette langue.</span><span class="sxs-lookup"><span data-stu-id="cf196-140">The specific functions that the word breaker performs and the strategy that it uses in performing these tasks depend entirely on the requirements for that language.</span></span>

<span data-ttu-id="cf196-141">Lorsque vous scindez du texte, les analyseurs lexicaux identifient les formes « alternatives » pour les mots qui peuvent avoir plusieurs représentations.</span><span class="sxs-lookup"><span data-stu-id="cf196-141">When breaking text, word breakers identify "alternative" forms for words that may have multiple representations.</span></span> <span data-ttu-id="cf196-142">Aucune relation sémantique n’est implicite entre les mots générés.</span><span class="sxs-lookup"><span data-stu-id="cf196-142">No semantic relationship is implied between the generated words.</span></span> <span data-ttu-id="cf196-143">En fait, le mot d’origine ne peut pas être inclus dans la liste des alternatives.</span><span class="sxs-lookup"><span data-stu-id="cf196-143">In fact, the original word may not be included among the list of alternatives.</span></span> <span data-ttu-id="cf196-144">Les autres formulaires sont enregistrés à la même position dans l’index que le mot d’origine pour indiquer qu’ils sont identiques.</span><span class="sxs-lookup"><span data-stu-id="cf196-144">The alternative forms are saved in the same position in the index as the original word to indicate that they are identical.</span></span>

<span data-ttu-id="cf196-145">Lorsqu’un document est inclus dans l’index, chaque mot reçoit une valeur entière qui représente le décalage, ou la distance entre le mot et le début d’un document.</span><span class="sxs-lookup"><span data-stu-id="cf196-145">When a document is included in the index, each word is assigned an integer value that represents the offset, or the distance of the word from the beginning of a document.</span></span> <span data-ttu-id="cf196-146">La distance relative entre les mots d’une requête est comparée aux décalages stockés dans l’index de recherche en texte intégral.</span><span class="sxs-lookup"><span data-stu-id="cf196-146">The relative distance between words in a query is compared against the offsets stored in the full-text index.</span></span> <span data-ttu-id="cf196-147">La requête « where is Kyle document » correspond à n’importe quel document avec « WHERE » au décalage n, « a » à n + 1, « Kyle » à n + 2 et « document » à n + 3.</span><span class="sxs-lookup"><span data-stu-id="cf196-147">The query "Where is Kyle's document" matches any document with "Where" at offset n, "is" at n+1, "Kyle's" at n+2, and "document" at n+3.</span></span> <span data-ttu-id="cf196-148">« Où est enregistré le document Kyle dans la base de données ? »</span><span class="sxs-lookup"><span data-stu-id="cf196-148">"Where is Kyle's document filed in the data-base?"</span></span> <span data-ttu-id="cf196-149">est représenté comme suit :</span><span class="sxs-lookup"><span data-stu-id="cf196-149">is represented as:</span></span>



|       |     |                        |          |       |     |     |                               |
|-------|-----|------------------------|----------|-------|-----|-----|-------------------------------|
| <span data-ttu-id="cf196-150">Where</span><span class="sxs-lookup"><span data-stu-id="cf196-150">Where</span></span> | <span data-ttu-id="cf196-151">is</span><span class="sxs-lookup"><span data-stu-id="cf196-151">is</span></span>  | <span data-ttu-id="cf196-152">Kyle Kyle</span><span class="sxs-lookup"><span data-stu-id="cf196-152">Kyle Kyle's</span></span><br/> | <span data-ttu-id="cf196-153">document</span><span class="sxs-lookup"><span data-stu-id="cf196-153">document</span></span> | <span data-ttu-id="cf196-154">classer</span><span class="sxs-lookup"><span data-stu-id="cf196-154">filed</span></span> | <span data-ttu-id="cf196-155">in</span><span class="sxs-lookup"><span data-stu-id="cf196-155">in</span></span>  | <span data-ttu-id="cf196-156">le</span><span class="sxs-lookup"><span data-stu-id="cf196-156">the</span></span> | <span data-ttu-id="cf196-157">base de données de base de données</span><span class="sxs-lookup"><span data-stu-id="cf196-157">database data base</span></span><br/> |



 

<span data-ttu-id="cf196-158">Dans cet exemple, l’analyseur lexical stocke d’autres formulaires pour « Kyle » (« Kyle ») et « Database » (« base de données ») dans l’index.</span><span class="sxs-lookup"><span data-stu-id="cf196-158">In this example, the word breaker stores alternative forms for "Kyle" ("Kyle's") and "database" ("data base") in the index.</span></span> <span data-ttu-id="cf196-159">L’analyseur lexical génère et stocke des mots alternatifs pendant le processus de création d’index dans les conditions suivantes :</span><span class="sxs-lookup"><span data-stu-id="cf196-159">The word breaker generates and stores alternative words during the index creation process under the following conditions:</span></span>

-   <span data-ttu-id="cf196-160">Si un autre mot est susceptible de s’afficher sous la forme d’un mot unique dans une requête</span><span class="sxs-lookup"><span data-stu-id="cf196-160">If an alternative word is likely to appear as a single word in a query</span></span>
-   <span data-ttu-id="cf196-161">Si un générateur de formes dérivées ne risque pas de dériver le mot d’origine à partir de l’autre</span><span class="sxs-lookup"><span data-stu-id="cf196-161">If a stemmer is not likely to derive the original word from the alternative</span></span>

<span data-ttu-id="cf196-162">La génération de mots de passe alternatifs augmente le nombre de façons dont les requêtes représentent et correspondent à une phrase, comme indiqué dans les variations suivantes :</span><span class="sxs-lookup"><span data-stu-id="cf196-162">Generating alternative word forms increases the number of ways that queries represent and match a sentence, as shown in the following variations:</span></span>

1.  <span data-ttu-id="cf196-163">Où est archivé le document Kyle dans la base de données</span><span class="sxs-lookup"><span data-stu-id="cf196-163">Where is Kyle document filed in the database</span></span>
2.  <span data-ttu-id="cf196-164">Où est archivé le document Kyle dans la base de données</span><span class="sxs-lookup"><span data-stu-id="cf196-164">Where is Kyle's document filed in the database</span></span>
3.  <span data-ttu-id="cf196-165">Où le document Kyle est-il archivé dans la base de données ?</span><span class="sxs-lookup"><span data-stu-id="cf196-165">Where is Kyle document filed in the data base</span></span>
4.  <span data-ttu-id="cf196-166">Où est classé le document Kyle dans la base de données</span><span class="sxs-lookup"><span data-stu-id="cf196-166">Where is Kyle's document filed in the data base</span></span>

### <a name="wordsink-and-phrasesink"></a><span data-ttu-id="cf196-167">WordSink et PhraseSink</span><span class="sxs-lookup"><span data-stu-id="cf196-167">WordSink and PhraseSink</span></span>

<span data-ttu-id="cf196-168">Les analyseurs lexicaux utilisent les objets [**IWordSink**](iwordsink.md) et [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) pour collecter et stocker tous les mots et expressions qu’ils extraient du texte.</span><span class="sxs-lookup"><span data-stu-id="cf196-168">Word breakers use the [**IWordSink**](iwordsink.md) and [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) objects to collect and store all words and phrases that they extract from text.</span></span> <span data-ttu-id="cf196-169">Un analyseur lexical stocke des mots dans un formulaire le plus proche possible du formulaire Word d’origine dans le document.</span><span class="sxs-lookup"><span data-stu-id="cf196-169">A word breaker stores words in a form that is as close as possible to the original word form in the document.</span></span> <span data-ttu-id="cf196-170">**IPhraseSink** stocke les expressions au moment de la requête.</span><span class="sxs-lookup"><span data-stu-id="cf196-170">**IPhraseSink** stores phrases at query time.</span></span> <span data-ttu-id="cf196-171">Les expressions améliorent la pertinence des résultats de la requête, car les séquences de mots plus longues sont plus rares et offrent une plus grande différence par rapport aux expressions plus petites.</span><span class="sxs-lookup"><span data-stu-id="cf196-171">Phrases improve the relevance of query results because longer sequences of words are rarer and provide greater distinction than smaller phrases.</span></span> <span data-ttu-id="cf196-172">Lorsque l’indexeur place une expression dans le **IPhraseSink** au moment de la requête, il crée une instance de l’analyseur lexical pour décomposer l’expression en mots.</span><span class="sxs-lookup"><span data-stu-id="cf196-172">When the indexer places a phrase in the **IPhraseSink** at query time, it creates an instance of the word breaker to break the phrase into words.</span></span> <span data-ttu-id="cf196-173">L’indexeur évalue ensuite l’expression en vérifiant si les mots de l’expression apparaissent adjacents l’un à l’autre dans l’index.</span><span class="sxs-lookup"><span data-stu-id="cf196-173">The indexer then evaluates the phrase by checking whether the words in the phrase occur adjacent to one another in the index.</span></span> <span data-ttu-id="cf196-174">Par exemple, si « ABCD » se trouve dans l’index aux positions *x*, *x*+ 1, *x*+ 2 et *x*+ 3, la correspondance d’expression se produit si une sous-chaîne adjacente de « abcd » est soumise dans une requête.</span><span class="sxs-lookup"><span data-stu-id="cf196-174">For example, if "ABCD" occurs in the index at positions *x*, *x*+1, *x*+2, and *x*+3, the phrase match will occur if any adjacent substring of "ABCD" is submitted in a query.</span></span> <span data-ttu-id="cf196-175">Cette stratégie est efficace pour les analyseurs lexicaux basés sur des caractères qui fractionnent les expressions et les mots longs pendant la création de l’index et qui génèrent des expressions au moment de la requête.</span><span class="sxs-lookup"><span data-stu-id="cf196-175">This strategy is effective for character-based word breakers that split phrases and long words during index creation and that generate phrases during query time.</span></span>

### <a name="breaks"></a><span data-ttu-id="cf196-176">Sauts</span><span class="sxs-lookup"><span data-stu-id="cf196-176">Breaks</span></span>

<span data-ttu-id="cf196-177">Les sauts sont les espaces entre les mots.</span><span class="sxs-lookup"><span data-stu-id="cf196-177">Breaks are the spaces between words.</span></span> <span data-ttu-id="cf196-178">Un espace blanc, une ponctuation, une mise en forme ou simplement la nature du langage lui-même peut entraîner des ruptures.</span><span class="sxs-lookup"><span data-stu-id="cf196-178">White space, punctuation, formatting, or just the nature of the language itself can cause breaks.</span></span> <span data-ttu-id="cf196-179">L’indexeur utilise quatre types différents de sauts : fin de mot (EOW), fin de phrase (EOS), fin de paragraphe (EOP) et fin de chapitre (EOC).</span><span class="sxs-lookup"><span data-stu-id="cf196-179">There are four different types of breaks that the indexer uses: end of word (EOW), end of sentence (EOS), end of paragraph (EOP) and end of chapter (EOC).</span></span> <span data-ttu-id="cf196-180">L’arrêt EOW est l’arrêt par défaut.</span><span class="sxs-lookup"><span data-stu-id="cf196-180">The EOW break is the default break.</span></span> <span data-ttu-id="cf196-181">Après chaque jeton, chaque saut indique une distance sémantique différente entre les mots situés de part et d’autre.</span><span class="sxs-lookup"><span data-stu-id="cf196-181">After each token, each break indicates a different semantic distance between the words on either side.</span></span> <span data-ttu-id="cf196-182">Les mots séparés par EOW ont le lien sémantique le plus étroit, suivi de EOS, EOP et EOC.</span><span class="sxs-lookup"><span data-stu-id="cf196-182">Words separated by EOW have the tightest semantic link, followed by EOS, EOP, and EOC.</span></span> <span data-ttu-id="cf196-183">Plusieurs appels à [**IWordSink ::P utbreak**](iwordsink-putbreak.md) sont cumulatifs et sont analogues à l’insertion de mots ou de phrases null.</span><span class="sxs-lookup"><span data-stu-id="cf196-183">Multiple calls to [**IWordSink::PutBreak**](iwordsink-putbreak.md) are cumulative, and are analogous to inserting null words or sentences.</span></span>

### <a name="scalability-performancy-and-security"></a><span data-ttu-id="cf196-184">Évolutivité, Performancy et sécurité</span><span class="sxs-lookup"><span data-stu-id="cf196-184">Scalability, Performancy, and Security</span></span>

<span data-ttu-id="cf196-185">La manière dont l’analyseur lexical répond aux appels simultanés est en grande partie déterminée par votre choix de modèle de thread.</span><span class="sxs-lookup"><span data-stu-id="cf196-185">The way the word breaker responds to simultaneous calls is largely determined by your choice of threading model.</span></span> <span data-ttu-id="cf196-186">L’indexeur est une application à thread unique.</span><span class="sxs-lookup"><span data-stu-id="cf196-186">The indexer is a single-threaded application.</span></span> <span data-ttu-id="cf196-187">Pour que les analyseurs lexicaux fonctionnent dans un environnement à thread unique, les analyseurs lexicaux doivent être écrits à l’aide d’un modèle de thread « gratuit » ou « les deux ».</span><span class="sxs-lookup"><span data-stu-id="cf196-187">For word breakers to work in a single-threaded environment, word breakers must be written using a "free" or "both" threading model.</span></span> <span data-ttu-id="cf196-188">Les analyseurs lexicaux ne doivent pas s’inscrire auprès de COM à l’aide du modèle de thread « Apartment ».</span><span class="sxs-lookup"><span data-stu-id="cf196-188">Word breakers must not register with COM by using the "apartment" threading model.</span></span>

<span data-ttu-id="cf196-189">Nous recommandons que les analyseurs lexicaux évitent les États globaux et stockent les données dans l’instance de l’analyseur lexical.</span><span class="sxs-lookup"><span data-stu-id="cf196-189">We recommend that word breakers avoid global states and store data in the instance for the word breaker.</span></span> <span data-ttu-id="cf196-190">Le seul contenu qui doit être stocké dans l’implémentation de l’analyseur lexical concerne les paramètres *fQuery* et *ulMaxTokenSize*.</span><span class="sxs-lookup"><span data-stu-id="cf196-190">The only content that should be stored in the word breaker implementation are for the parameters *fQuery* and *ulMaxTokenSize*.</span></span> <span data-ttu-id="cf196-191">Les analyseurs lexicaux ne doivent pas être plus de deux fois plus lents que le benchmark établi par l’analyseur lexical anglais.</span><span class="sxs-lookup"><span data-stu-id="cf196-191">Word breakers should be no more than two times slower than the benchmark established by the English word breaker.</span></span> <span data-ttu-id="cf196-192">Les performances de l’analyseur lexical doivent également améliorer l’augmentation de la capacité du matériel.</span><span class="sxs-lookup"><span data-stu-id="cf196-192">Word breaker performance should also improve with increased hardware capability.</span></span>

<span data-ttu-id="cf196-193">Les analyseurs lexicaux de l’indexeur s’exécutent dans le contexte de sécurité du système local.</span><span class="sxs-lookup"><span data-stu-id="cf196-193">Word breakers for the indexer run in the Local System security context.</span></span> <span data-ttu-id="cf196-194">Elles doivent être écrites pour gérer les mémoires tampons et les empiler correctement.</span><span class="sxs-lookup"><span data-stu-id="cf196-194">They should be written to manage buffers and to stack correctly.</span></span> <span data-ttu-id="cf196-195">Toutes les copies de chaînes doivent avoir des vérifications explicites pour se protéger contre les dépassements de mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="cf196-195">All string copies must have explicit checks to guard against buffer overruns.</span></span> <span data-ttu-id="cf196-196">Vous devez toujours vérifier la taille allouée de la mémoire tampon et tester la taille des données en fonction de la taille de la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="cf196-196">You should always verify the allocated size of the buffer and test the size of the data against the size of the buffer.</span></span> <span data-ttu-id="cf196-197">Les analyseurs lexicaux ne peuvent pas supposer que le texte transmis à la méthode [**IWordBreaker :: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) est bien formé.</span><span class="sxs-lookup"><span data-stu-id="cf196-197">Word breakers cannot assume that the text passed to the [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method is well formed.</span></span> <span data-ttu-id="cf196-198">Pour plus d’informations sur la résolution des problèmes des analyseurs lexicaux, consultez [Dépannage des ressources et des meilleures pratiques en matière de langage](troubleshooting-language-resources.md).</span><span class="sxs-lookup"><span data-stu-id="cf196-198">For more information about troubleshooting word breakers, see [Troubleshooting Language Resources and Best Practices](troubleshooting-language-resources.md).</span></span>

## <a name="implementing-a-stemmer"></a><span data-ttu-id="cf196-199">Implémentation d’un générateur de formes dérivées</span><span class="sxs-lookup"><span data-stu-id="cf196-199">Implementing a Stemmer</span></span>

<span data-ttu-id="cf196-200">Les générateurs de formes dérivées implémentent l’interface [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) .</span><span class="sxs-lookup"><span data-stu-id="cf196-200">Stemmers implement the [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) interface.</span></span> <span data-ttu-id="cf196-201">La méthode [**IStemmer :: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) génère une liste de formes de mots pour un mot d’entrée particulier.</span><span class="sxs-lookup"><span data-stu-id="cf196-201">The [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) method generates a list of inflected word forms for a particular input word.</span></span> <span data-ttu-id="cf196-202">Pour implémenter un composant de générateur de formes dérivées, vous devez disposer de l’heuristique de langue pour votre langage.</span><span class="sxs-lookup"><span data-stu-id="cf196-202">To implement a stemmer component, you must have language heuristics for your language.</span></span> <span data-ttu-id="cf196-203">Cela comprend des informations sur la morphologie.</span><span class="sxs-lookup"><span data-stu-id="cf196-203">This includes information about morphology.</span></span> <span data-ttu-id="cf196-204">Vous pouvez également avoir besoin d’une liste de mots à exclure ou inclure.</span><span class="sxs-lookup"><span data-stu-id="cf196-204">You may also need a list of words to exclude or include.</span></span> <span data-ttu-id="cf196-205">Pour plus d’informations sur les considérations linguistiques et sur la façon dont ces considérations affectent les implémentations de générateur de formes dérivées, consultez [Considérations linguistiques et Unicode](linguistic-and-unicode-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="cf196-205">For more information about linguistic considerations and how these considerations affect stemmer implementations, see [Linguistic and Unicode Considerations](linguistic-and-unicode-considerations.md).</span></span>

<span data-ttu-id="cf196-206">Nous recommandons que les générateurs de formes dérivées ne doivent pas générer le génitif, ou disposer, de mots.</span><span class="sxs-lookup"><span data-stu-id="cf196-206">We recommend that stemmers should not generate the genitive, or possessive, case for words.</span></span> <span data-ttu-id="cf196-207">Par exemple, « David » n’est pas généré comme autre formulaire pour « David ».</span><span class="sxs-lookup"><span data-stu-id="cf196-207">For example, "David" is not generated as an alternative form for "David's."</span></span> <span data-ttu-id="cf196-208">Le séparateur de mots génère « David » et « David » lorsqu’il analyse « David ».</span><span class="sxs-lookup"><span data-stu-id="cf196-208">The word breaker generates both "David" and "David's" when it parses "David's."</span></span>

<span data-ttu-id="cf196-209">Le générateur de formes dérivées utilise l’objet [IWordFormSink](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) pour recueillir la liste des mots alternatifs.</span><span class="sxs-lookup"><span data-stu-id="cf196-209">The stemmer uses the [IWordFormSink](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) object to gather the list of alternative words.</span></span> <span data-ttu-id="cf196-210">[**IWordFormSink ::P utword**](iwordformsink-putword.md) génère le mot final à partir du générateur de formes dérivées.</span><span class="sxs-lookup"><span data-stu-id="cf196-210">[**IWordFormSink::PutWord**](iwordformsink-putword.md) generates the final word from the stemmer.</span></span> <span data-ttu-id="cf196-211">Dans tous les cas, ce mot final est le même que le mot d’entrée de [**IStemmer :: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms).</span><span class="sxs-lookup"><span data-stu-id="cf196-211">In all cases, this final word is the same as the input word from [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms).</span></span> <span data-ttu-id="cf196-212">Par exemple, étant donné le mot « natation », le générateur de formes dérivées génère les mots suivants : « natation », « nageur », « natation », « SWAM » et « SWUM », par le biais des appels à [**IWordFormSink ::P utaltword**](iwordformsink-putphrase.md).</span><span class="sxs-lookup"><span data-stu-id="cf196-212">For example, given the word "swim," the stemmer generates the following word forms: "swimming," "swimmer," "swims," "swam," and "swum," through calls to [**IWordFormSink::PutAltWord**](iwordformsink-putphrase.md).</span></span> <span data-ttu-id="cf196-213">Le générateur de formes dérivées génère une « natation » via **IWordFormSink ::P utword**.</span><span class="sxs-lookup"><span data-stu-id="cf196-213">The stemmer generates "swim" through **IWordFormSink::PutWord**.</span></span>

### <a name="scalability-performancy-and-security"></a><span data-ttu-id="cf196-214">Évolutivité, Performancy et sécurité</span><span class="sxs-lookup"><span data-stu-id="cf196-214">Scalability, Performancy, and Security</span></span>

<span data-ttu-id="cf196-215">Les générateurs de formes dérivées, tels que les analyseurs lexicaux, doivent utiliser un modèle de thread « gratuit » et s’inscrire auprès de COM avec leur modèle de thread défini sur « gratuit » ou « les deux ».</span><span class="sxs-lookup"><span data-stu-id="cf196-215">Stemmers, like word breakers, must use a "free" threading model and register with COM with their threading model set to "free" or "both."</span></span> <span data-ttu-id="cf196-216">Windows Search appelle des instances distinctes du générateur de formes dérivées à partir de différents threads en même temps.</span><span class="sxs-lookup"><span data-stu-id="cf196-216">Windows Search calls separate instances of the stemmer from different threads at the same time.</span></span> <span data-ttu-id="cf196-217">Les générateurs de formes dérivées doivent donc disposer de données d’instance minimales.</span><span class="sxs-lookup"><span data-stu-id="cf196-217">Stemmers should therefore have minimal instance data.</span></span>

<span data-ttu-id="cf196-218">La précision de la conjugaison a un impact significatif sur la pertinence des requêtes.</span><span class="sxs-lookup"><span data-stu-id="cf196-218">Stemmer accuracy has a significant impact on query relevance.</span></span> <span data-ttu-id="cf196-219">Si le générateur de formes dérivées ne génère pas correctement le texte, les requêtes peuvent retourner des résultats imprévisibles et inexacts.</span><span class="sxs-lookup"><span data-stu-id="cf196-219">If the stemmer stems the text incorrectly, queries may return unpredictable and inaccurate results.</span></span> <span data-ttu-id="cf196-220">Les générateurs de formes dérivées doivent gérer des centaines de requêtes par seconde sans affecter négativement les performances des requêtes.</span><span class="sxs-lookup"><span data-stu-id="cf196-220">Stemmers must handle hundreds of queries per second without negatively affecting query performance.</span></span> <span data-ttu-id="cf196-221">Les performances du générateur de formes dérivées doivent s’améliorer avec une capacité matérielle accrue.</span><span class="sxs-lookup"><span data-stu-id="cf196-221">Stemmer performance should improve with increased hardware capability.</span></span> <span data-ttu-id="cf196-222">Pour plus d’informations sur le dépannage des générateurs de formes dérivées, consultez [Dépannage des ressources linguistiques et des meilleures pratiques](troubleshooting-language-resources.md).</span><span class="sxs-lookup"><span data-stu-id="cf196-222">For information about troubleshooting stemmers, see [Troubleshooting Language Resources and Best Practices](troubleshooting-language-resources.md).</span></span>

<span data-ttu-id="cf196-223">Les générateurs de formes dérivées pour Windows Search s’exécutent dans le contexte de sécurité local.</span><span class="sxs-lookup"><span data-stu-id="cf196-223">Stemmers for Windows Search run in the Local Security context.</span></span> <span data-ttu-id="cf196-224">Elles doivent être écrites pour gérer les mémoires tampons et les empiler correctement.</span><span class="sxs-lookup"><span data-stu-id="cf196-224">They should be written to manage buffers and to stack correctly.</span></span> <span data-ttu-id="cf196-225">Toutes les copies de chaînes doivent avoir des vérifications explicites pour se protéger contre les dépassements de mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="cf196-225">All string copies must have explicit checks to guard against buffer overruns.</span></span> <span data-ttu-id="cf196-226">Vous devez toujours vérifier la taille allouée de la mémoire tampon et tester la taille des données en fonction de la taille de la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="cf196-226">You should always verify the allocated size of the buffer and test the size of the data against the size of the buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cf196-227">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="cf196-227">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cf196-228">Extension des ressources linguistiques</span><span class="sxs-lookup"><span data-stu-id="cf196-228">Extending Language Resources</span></span>](extending-language-resources-in-windows-search.md)
</dt> <dt>

[<span data-ttu-id="cf196-229">Fonctionnement des composants de ressources linguistiques</span><span class="sxs-lookup"><span data-stu-id="cf196-229">Understanding Language Resource Components</span></span>](understanding-language-resource-components.md)
</dt> <dt>

[<span data-ttu-id="cf196-230">Considérations linguistiques et Unicode</span><span class="sxs-lookup"><span data-stu-id="cf196-230">Linguistic and Unicode Considerations</span></span>](linguistic-and-unicode-considerations.md)
</dt> <dt>

[<span data-ttu-id="cf196-231">Ressources et meilleures pratiques pour la résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="cf196-231">Troubleshooting Language Resources and Best Practices</span></span>](troubleshooting-language-resources.md)
</dt> </dl>

 

 
