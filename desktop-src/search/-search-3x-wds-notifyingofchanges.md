---
description: En utilisant les composants API de notification, vous pouvez informer l’indexeur qu’un élément a été modifié, déplacé ou supprimé et peut ajouter des étendues de recherche à la file d’attente de l’indexeur de recherche Windows des URL qui nécessitent une indexation.
ms.assetid: 817550e2-a256-48d5-9fa6-1ea04f8b8589
title: Notification de l’index des modifications (Windows Search)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5a89112da20c4010e1fc23fab16778309195d20
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104112486"
---
# <a name="notifying-the-index-of-changes-windows-search"></a><span data-ttu-id="964a3-103">Notification de l’index des modifications (Windows Search)</span><span class="sxs-lookup"><span data-stu-id="964a3-103">Notifying the Index of Changes (Windows Search)</span></span>

<span data-ttu-id="964a3-104">En utilisant les composants API de notification, vous pouvez informer l’indexeur qu’un élément a été modifié, déplacé ou supprimé et peut ajouter des étendues de recherche à la file d’attente de l’indexeur de recherche Windows des URL qui nécessitent une indexation.</span><span class="sxs-lookup"><span data-stu-id="964a3-104">By using the notification APIs components can notify the indexer that an item has been changed, moved or deleted, and can add search scopes to the Windows Search indexer's queue of URLs that require indexing.</span></span>

<span data-ttu-id="964a3-105">Les composants peuvent notifier à l’indexeur de recherche Windows que les données de leur magasin ont changé.</span><span class="sxs-lookup"><span data-stu-id="964a3-105">Components can notify the Windows Search indexer that data in their store has changed.</span></span> <span data-ttu-id="964a3-106">En règle générale, vous pouvez vous appuyer sur les analyses planifiées de l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-106">Typically, you can rely on the indexer's scheduled crawls.</span></span> <span data-ttu-id="964a3-107">Toutefois, le fait de fournir des notifications à l’indexeur peut améliorer les performances en veillant à ce que l’indexeur n’analyse pas l’intégralité du magasin sur les index incrémentiels.</span><span class="sxs-lookup"><span data-stu-id="964a3-107">However, providing notifications to the indexer can improve performance by ensuring the indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="964a3-108">Par exemple, cela peut être recommandé si vous vous attendez à ce que votre magasin de données soit exceptionnellement volumineux et/ou exceptionnellement occupé, par exemple dans le cas d’un magasin de données de messagerie électronique.</span><span class="sxs-lookup"><span data-stu-id="964a3-108">For example, this might recommended if you expect your data store to be exceptionally large and/or exceptionally busy, such as an email data store for example.</span></span>

-   [<span data-ttu-id="964a3-109">Implémentation des notifications gérées par l’indexeur</span><span class="sxs-lookup"><span data-stu-id="964a3-109">Implementing Indexer-managed Notifications</span></span>](#implementing-indexer-managed-notifications)
    -   [<span data-ttu-id="964a3-110">File d’attente des notifications</span><span class="sxs-lookup"><span data-stu-id="964a3-110">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="964a3-111">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="964a3-111">ISearchPersistentItemsChangedSink</span></span>](#isearchpersistentitemschangedsink)
-   [<span data-ttu-id="964a3-112">Implémentation des notifications gérées par le fournisseur</span><span class="sxs-lookup"><span data-stu-id="964a3-112">Implementing Provider-managed Notifications</span></span>](#implementing-provider-managed-notifications)
    -   [<span data-ttu-id="964a3-113">File d’attente des notifications</span><span class="sxs-lookup"><span data-stu-id="964a3-113">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="964a3-114">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="964a3-114">ISearchItemsChangedSink</span></span>](#isearchitemschangedsink)
    -   [<span data-ttu-id="964a3-115">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="964a3-115">ISearchNotifyInlineSite</span></span>](#isearchnotifyinlinesite)
-   [<span data-ttu-id="964a3-116">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="964a3-116">Additional Resources</span></span>](#additional-resources)
-   [<span data-ttu-id="964a3-117">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="964a3-117">Related topics</span></span>](#related-topics)

## <a name="implementing-indexer-managed-notifications"></a><span data-ttu-id="964a3-118">Implémentation des notifications gérées par l’indexeur</span><span class="sxs-lookup"><span data-stu-id="964a3-118">Implementing Indexer-managed Notifications</span></span>

<span data-ttu-id="964a3-119">Les notifications gérées par l’indexeur vous permettent de contrôler l’accès à votre magasin de données tout en vous libérant de la file d’attente de notifications tout au long du processus d’indexation.</span><span class="sxs-lookup"><span data-stu-id="964a3-119">Indexer-managed notifications enable you to control access to your data store while freeing you of maintaining the notifications queue throughout the entire indexing process.</span></span> <span data-ttu-id="964a3-120">Votre fournisseur de notifications doit surveiller les modifications apportées au magasin de données et créer une file d’attente de notifications.</span><span class="sxs-lookup"><span data-stu-id="964a3-120">Your notifications provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="964a3-121">Régulièrement, votre fournisseur envoie un lot de notifications de modifications à l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-121">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="964a3-122">Lorsque l’indexeur reçoit vos notifications, il renvoie un accusé de réception et vous pouvez supprimer le ou les éléments de votre file d’attente.</span><span class="sxs-lookup"><span data-stu-id="964a3-122">When the indexer receives your notifications, it returns an acknowledgement and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="964a3-123">Si, après un certain laps de temps, vous ne recevez pas d’accusé de réception, vous pouvez renvoyer les notifications.</span><span class="sxs-lookup"><span data-stu-id="964a3-123">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="964a3-124">En cas d’échec, l’indexeur reconstruit sa file d’attente interne d’éléments pour analyser ou effectue une analyse incrémentielle du magasin.</span><span class="sxs-lookup"><span data-stu-id="964a3-124">In case of failure, the indexer rebuilds its internal queue of items to crawl or performs an incremental crawl of the store.</span></span>

<span data-ttu-id="964a3-125">Pour implémenter des notifications gérées par l’indexeur, vous devez implémenter les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="964a3-125">To implement indexer-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="964a3-126">Mécanisme permettant de surveiller les modifications apportées à votre magasin de données.</span><span class="sxs-lookup"><span data-stu-id="964a3-126">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="964a3-127">Structure de données pour les informations de mise en file d’attente (plusieurs structures de [**\_ \_ \_ modification persistantes d’éléments de recherche**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) ) relatives à ces modifications.</span><span class="sxs-lookup"><span data-stu-id="964a3-127">A data structure to queue up information (multiple [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures) about those changes.</span></span>
-   <span data-ttu-id="964a3-128">Interface [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) pour envoyer vos notifications à l’indexeur et recevoir des accusés de réception de notification de l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-128">[**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="964a3-129">File d’attente des notifications</span><span class="sxs-lookup"><span data-stu-id="964a3-129">Notifications Queue</span></span>

<span data-ttu-id="964a3-130">Vous devez surveiller et mettre en file d’attente chaque modification de votre magasin de données à envoyer à l’indexeur en tant que notification.</span><span class="sxs-lookup"><span data-stu-id="964a3-130">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="964a3-131">Le nombre de notifications mises en file d’attente et la fréquence à laquelle vous les envoyez à l’indexeur dépend de vos circonstances.</span><span class="sxs-lookup"><span data-stu-id="964a3-131">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="964a3-132">Vous pouvez peut-être envoyer un lot de notifications pour chaque *n* nombre de modifications ou après un intervalle de temps *t* , ou une combinaison des deux.</span><span class="sxs-lookup"><span data-stu-id="964a3-132">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="964a3-133">L’indexeur s’attend à ce que les notifications se trouvent dans un tableau de structures de [**\_ \_ \_ modification permanentes**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) de l’élément de recherche. vous pouvez donc choisir d’implémenter la file d’attente de la même manière.</span><span class="sxs-lookup"><span data-stu-id="964a3-133">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures, so you may choose to implement your queue similarly.</span></span>

### <a name="isearchpersistentitemschangedsink"></a><span data-ttu-id="964a3-134">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="964a3-134">ISearchPersistentItemsChangedSink</span></span>

<span data-ttu-id="964a3-135">Pour accéder à cette interface, vous devez d’abord instancier un objet [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) pour accéder à un objet [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="964a3-135">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="964a3-136">À partir de cet objet **ISearchCatalogManager** , vous instanciez un objet [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) et avertissez l’indexeur des modifications apportées aux données à l’aide d’un appel à la méthode **OnItemsChanged** .</span><span class="sxs-lookup"><span data-stu-id="964a3-136">From that **ISearchCatalogManager** object, you instantiate an [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="964a3-137">Dans l’appel à cette méthode, vous incluez le nombre de modifications signalées et un tableau de structures de [**\_ \_ \_ modification persistantes d’éléments de recherche**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) .</span><span class="sxs-lookup"><span data-stu-id="964a3-137">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures.</span></span> <span data-ttu-id="964a3-138">Vous récupérez un tableau de codes de saisie semi-automatique des RH indiquant si chaque URL a été acceptée pour l’indexation.</span><span class="sxs-lookup"><span data-stu-id="964a3-138">You get back an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="964a3-139">Il s’agit de votre accusé de réception de l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-139">This is your acknowledgement from the indexer.</span></span>

## <a name="implementing-provider-managed-notifications"></a><span data-ttu-id="964a3-140">Implémentation des notifications gérées par le fournisseur</span><span class="sxs-lookup"><span data-stu-id="964a3-140">Implementing Provider-managed Notifications</span></span>

<span data-ttu-id="964a3-141">Les notifications gérées par le fournisseur vous permettent de contrôler l’accès à votre magasin de données et de surveiller la progression de l’indexeur lorsqu’il met à jour le catalogue de recherche Windows.</span><span class="sxs-lookup"><span data-stu-id="964a3-141">Provider-managed notifications enable you to control access to your data store and to monitor the progress of the indexer as it updates the Windows Search catalog.</span></span> <span data-ttu-id="964a3-142">Votre fournisseur doit surveiller les modifications apportées au magasin de données et créer une file d’attente de notifications.</span><span class="sxs-lookup"><span data-stu-id="964a3-142">Your provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="964a3-143">Régulièrement, votre fournisseur envoie un lot de notifications de modifications à l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-143">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="964a3-144">Lorsque l’indexeur reçoit vos notifications, il renvoie un accusé de réception.</span><span class="sxs-lookup"><span data-stu-id="964a3-144">When the indexer receives your notifications, it returns an acknowledgement.</span></span> <span data-ttu-id="964a3-145">Si, après un certain laps de temps, vous ne recevez pas d’accusé de réception, vous pouvez renvoyer les notifications.</span><span class="sxs-lookup"><span data-stu-id="964a3-145">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="964a3-146">Étant donné que l’indexeur analyse le magasin de données et met à jour le catalogue de recherche Windows, il avertit votre fournisseur de chaque mise à jour du catalogue et vous permet de supprimer les éléments de votre file d’attente.</span><span class="sxs-lookup"><span data-stu-id="964a3-146">As the indexer crawls the data store and updates the Windows Search catalog, it notifies your provider of each catalog update and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="964a3-147">Votre fournisseur gère sa file d’attente de notification tout au long de ce processus. ainsi, en cas de défaillance, vous pouvez renvoyer des notifications à l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-147">Your provider maintains its notification queue throughout this process so that in case of failure, you can resend notifications to the indexer.</span></span>

<span data-ttu-id="964a3-148">Pour implémenter des notifications gérées par le fournisseur, vous devez implémenter les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="964a3-148">To implement provider-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="964a3-149">Mécanisme permettant de surveiller les modifications apportées à votre magasin de données.</span><span class="sxs-lookup"><span data-stu-id="964a3-149">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="964a3-150">Structure de données pour les informations de mise en file d’attente (plusieurs structures de [**\_ \_ modification d’élément de recherche**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) ) relatives à ces modifications.</span><span class="sxs-lookup"><span data-stu-id="964a3-150">A data structure to queue up information (multiple [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures) about those changes.</span></span>
-   <span data-ttu-id="964a3-151">Interface [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) pour envoyer vos notifications à l’indexeur et recevoir des accusés de réception de notification de l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-151">[**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>
-   <span data-ttu-id="964a3-152">Interface [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) pour recevoir des mises à jour sur l’état de l’indexation.</span><span class="sxs-lookup"><span data-stu-id="964a3-152">[**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface to receive updates about the status of indexing.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="964a3-153">File d’attente des notifications</span><span class="sxs-lookup"><span data-stu-id="964a3-153">Notifications Queue</span></span>

<span data-ttu-id="964a3-154">Vous devez surveiller et mettre en file d’attente chaque modification de votre magasin de données à envoyer à l’indexeur en tant que notification.</span><span class="sxs-lookup"><span data-stu-id="964a3-154">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="964a3-155">Le nombre de notifications mises en file d’attente et la fréquence à laquelle vous les envoyez à l’indexeur dépend de vos circonstances.</span><span class="sxs-lookup"><span data-stu-id="964a3-155">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="964a3-156">Vous pouvez peut-être envoyer un lot de notifications pour chaque *n* nombre de modifications ou après un intervalle de temps *t* , ou une combinaison des deux.</span><span class="sxs-lookup"><span data-stu-id="964a3-156">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="964a3-157">L’indexeur s’attend à ce que les notifications se trouvent dans un tableau de structures de [**\_ \_ modification d’élément de recherche**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) . vous pouvez donc choisir de stocker les informations de modification de la même façon.</span><span class="sxs-lookup"><span data-stu-id="964a3-157">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures, so you may choose to store change information similarly.</span></span> <span data-ttu-id="964a3-158">Toutefois, vous devez également être en mesure de mettre en correspondance les notifications que vous envoyez avec les accusés de réception et les mises à jour renvoyés par l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-158">However, you also need to be able to match the notifications you send with the acknowledgements and updates returned by the indexer.</span></span> <span data-ttu-id="964a3-159">Vous pouvez également être en mesure de déterminer le temps nécessaire pour obtenir les accusés de réception, afin de déterminer si/à quel moment renvoyer les notifications.</span><span class="sxs-lookup"><span data-stu-id="964a3-159">You may also want to be able to detect how long it takes to get acknowledgements, so you can decide if/when to resend notifications.</span></span>

### <a name="isearchitemschangedsink"></a><span data-ttu-id="964a3-160">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="964a3-160">ISearchItemsChangedSink</span></span>

<span data-ttu-id="964a3-161">Pour accéder à cette interface, vous devez d’abord instancier un objet [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) pour accéder à un objet [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="964a3-161">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="964a3-162">À partir de cet objet **ISearchCatalogManager** , vous instanciez un objet [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) et avertissez l’indexeur des modifications apportées aux données à l’aide d’un appel à la méthode **OnItemsChanged** .</span><span class="sxs-lookup"><span data-stu-id="964a3-162">From that **ISearchCatalogManager** object, you instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="964a3-163">Dans l’appel à cette méthode, vous incluez le nombre de modifications signalées et un tableau de structures de [**\_ \_ modification d’élément de recherche**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) .</span><span class="sxs-lookup"><span data-stu-id="964a3-163">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures.</span></span> <span data-ttu-id="964a3-164">Vous revenez à un tableau de DocIds affectés par un indexeur qui représentent chaque modification, ainsi qu’un tableau de codes de saisie semi-automatique des RH indiquant si chaque URL a été acceptée pour l’indexation.</span><span class="sxs-lookup"><span data-stu-id="964a3-164">You get back an array of indexer-assigned DocIds that represent each change as well as an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="964a3-165">Il s’agit de votre accusé de réception de l’indexeur qu’il a reçu vos notifications et qu’il est en train de préparer l’indexation des éléments.</span><span class="sxs-lookup"><span data-stu-id="964a3-165">This is your acknowledgement from the indexer that it has received your notifications and is preparing to index the items.</span></span>

<span data-ttu-id="964a3-166">À partir de là, l’indexeur envoie des mises à jour à l’aide de l’interface [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) .</span><span class="sxs-lookup"><span data-stu-id="964a3-166">From that point forward the indexer sends updates using the [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface.</span></span>

### <a name="isearchnotifyinlinesite"></a><span data-ttu-id="964a3-167">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="964a3-167">ISearchNotifyInlineSite</span></span>

<span data-ttu-id="964a3-168">Pour obtenir des mises à jour sur l’état de vos éléments et du catalogue, vous devez inscrire votre interface [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) auprès de l’indexeur afin de pouvoir envoyer des rappels.</span><span class="sxs-lookup"><span data-stu-id="964a3-168">In order to get updates about the status of both your items and the catalog, you must register your [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface with the indexer so it can send you callbacks.</span></span> <span data-ttu-id="964a3-169">Chaque mise à jour envoyée à l’aide de [**ISearchNotifyInlineSite :: OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifie les éléments par ID de produit, l’état de chaque élément ([**Rechercher l' \_ \_ \_ État**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)de l’indexation) et la phase d’indexation ([**\_ \_ phase d’indexation**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)de la recherche) dans laquelle se trouvent les éléments.</span><span class="sxs-lookup"><span data-stu-id="964a3-169">Each update sent using [**ISearchNotifyInlineSite::OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifies the items by DocId, the status of each item ([**SEARCH\_ITEM\_INDEXING\_STATUS**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)) and the indexing phase ([**SEARCH\_INDEXING\_PHASE**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)) the items are in.</span></span>

<span data-ttu-id="964a3-170">Non seulement vous recevez des mises à jour sur l’état de chaque élément, comme décrit précédemment, vous obtenez également des informations importantes sur l’état du catalogue.</span><span class="sxs-lookup"><span data-stu-id="964a3-170">Not only do you receive updates on the status of each item, as described earlier, you also get important information about the status of the catalog itself.</span></span> <span data-ttu-id="964a3-171">Le service de recherche Windows peut être interrompu ou redémarré par l’utilisateur final, une application tierce ou une autre défaillance.</span><span class="sxs-lookup"><span data-stu-id="964a3-171">The Windows Search service can be interrupted or restarted by the end user, a third party application, or some other failure.</span></span> <span data-ttu-id="964a3-172">Dans ce cas, vous avez besoin d’un moyen de déterminer les notifications à réexécuter vers l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="964a3-172">When this happens, you need a way to determine what notifications to repush to the indexer.</span></span>

<span data-ttu-id="964a3-173">La méthode [**ISearchNotifyInlineSite :: OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) , appelée par le service de recherche Windows, informe les clients sur l’état du catalogue à l’aide des paramètres décrits dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="964a3-173">The [**ISearchNotifyInlineSite::OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) method, called by the Windows Search service, informs clients about the status of the catalog using the parameters described in the following table.</span></span>



| <span data-ttu-id="964a3-174">Paramètre</span><span class="sxs-lookup"><span data-stu-id="964a3-174">Parameter</span></span>                 | <span data-ttu-id="964a3-175">Description</span><span class="sxs-lookup"><span data-stu-id="964a3-175">Description</span></span>                                                                                                                                           |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="964a3-176">guidCatalogResetSignature</span><span class="sxs-lookup"><span data-stu-id="964a3-176">guidCatalogResetSignature</span></span> | <span data-ttu-id="964a3-177">GUID représentant la réinitialisation du catalogue.</span><span class="sxs-lookup"><span data-stu-id="964a3-177">A GUID representing the catalog reset.</span></span> <span data-ttu-id="964a3-178">Si ce GUID change, toutes les notifications doivent être renvoyées.</span><span class="sxs-lookup"><span data-stu-id="964a3-178">If this GUID changes, all notifications must be resent.</span></span>                                                        |
| <span data-ttu-id="964a3-179">guidCheckPointSignature</span><span class="sxs-lookup"><span data-stu-id="964a3-179">guidCheckPointSignature</span></span>   | <span data-ttu-id="964a3-180">GUID représentant le dernier point de contrôle restauré.</span><span class="sxs-lookup"><span data-stu-id="964a3-180">A GUID representing the last checkpoint restored.</span></span> <span data-ttu-id="964a3-181">Si ce GUID change, toutes les notifications accumulées depuis le dernier point de contrôle enregistré doivent être renvoyées.</span><span class="sxs-lookup"><span data-stu-id="964a3-181">If this GUID changes, all notifications accumulated since the last saved checkpoint must be resent.</span></span> |
| <span data-ttu-id="964a3-182">dwLastCheckPointNumber</span><span class="sxs-lookup"><span data-stu-id="964a3-182">dwLastCheckPointNumber</span></span>    | <span data-ttu-id="964a3-183">Nombre indiquant le dernier point de contrôle enregistré.</span><span class="sxs-lookup"><span data-stu-id="964a3-183">A number indicating the last checkpoint saved.</span></span>                                                                                                        |



 

 

<span data-ttu-id="964a3-184">Lorsqu’un point de contrôle de catalogue se produit, le service de recherche met à jour le *dwLastCheckPointNumber*, et toutes les notifications envoyées avant ce point de contrôle sont sûres et récupérables en cas de défaillance d’un service.</span><span class="sxs-lookup"><span data-stu-id="964a3-184">When a catalog checkpoint occurs, the search service updates the *dwLastCheckPointNumber*, and all notifications sent prior to that checkpoint are safe and recoverable in the event of a service failure.</span></span> <span data-ttu-id="964a3-185">Les fournisseurs de notifications doivent suivre uniquement les notifications envoyées entre les points de contrôle et les réexécuter dans le cas d’une restauration ou d’une réinitialisation du catalogue.</span><span class="sxs-lookup"><span data-stu-id="964a3-185">Notifications providers need to track only those notifications sent between checkpoints and repush in case of a catalog restore or reset.</span></span>

<span data-ttu-id="964a3-186">Si une restauration de catalogue se produit, le service de recherche restaure le catalogue jusqu’au dernier point de contrôle enregistré et met à jour le *guidCheckPointSignature*.</span><span class="sxs-lookup"><span data-stu-id="964a3-186">If a catalog restore occurs, the search service rolls back the catalog to the last saved checkpoint and updates the *guidCheckPointSignature*.</span></span> <span data-ttu-id="964a3-187">Dans ce cas, les fournisseurs de notifications doivent réexécuter toutes les notifications accumulées depuis le point de contrôle enregistré le plus récent, tel qu’il est identifié par *dwLastCheckPointNumber*.</span><span class="sxs-lookup"><span data-stu-id="964a3-187">In this situation, notifications providers must repush all notifications accumulated since the most recent saved checkpoint as identified by the *dwLastCheckPointNumber*.</span></span>

<span data-ttu-id="964a3-188">Si une réinitialisation du catalogue doit avoir lieu, le service de recherche réinitialise l’intégralité du catalogue et met à jour le *guidCatalogResetSignature*.</span><span class="sxs-lookup"><span data-stu-id="964a3-188">If a catalog reset should occur, the search service resets the entire catalog and updates the *guidCatalogResetSignature*.</span></span> <span data-ttu-id="964a3-189">Le fournisseur de notifications doit réexécuter à nouveau la totalité de l’étendue de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="964a3-189">Notifications provider must repush its entire crawl scope again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="964a3-190">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="964a3-190">Additional Resources</span></span>

-   <span data-ttu-id="964a3-191">Pour obtenir une vue d’ensemble du processus d’indexation, consultez [processus d’indexation](-search-indexing-process-overview.md).</span><span class="sxs-lookup"><span data-stu-id="964a3-191">For an overview of the indexing process, see [The Indexing Process](-search-indexing-process-overview.md).</span></span>
-   <span data-ttu-id="964a3-192">Pour obtenir une vue d’ensemble du gestionnaire de catalogues et du gestionnaire de recherche de catalogue (CSM), consultez [utilisation du gestionnaire de catalogues](-search-3x-wds-mngidx-catalog-manager.md) et [utilisation du gestionnaire de portée d’analyse](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="964a3-192">For overviews of the Catalog Manager and Catalog Search Manager (CSM), see [Using the Catalog Manager](-search-3x-wds-mngidx-catalog-manager.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>
-   <span data-ttu-id="964a3-193">Pour plus d’informations sur la création d’un magasin de données Shell, consultez [implémentation des interfaces d’objet de dossier de base](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="964a3-193">For information about creating a Shell data store, see [Implementing the Basic Folder Object Interfaces](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="964a3-194">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="964a3-194">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="964a3-195">**Méthodologique**</span><span class="sxs-lookup"><span data-stu-id="964a3-195">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="964a3-196">Développement de gestionnaires de protocole</span><span class="sxs-lookup"><span data-stu-id="964a3-196">Developing Protocol Handlers</span></span>](-search-3x-wds-phaddins.md)
</dt> <dt>

[<span data-ttu-id="964a3-197">Fonctionnement des gestionnaires de protocole</span><span class="sxs-lookup"><span data-stu-id="964a3-197">Understanding Protocol Handlers</span></span>](-search-3x-wds-extidx-prot-implementing.md)
</dt> <dt>

[<span data-ttu-id="964a3-198">Ajout d’icônes et de menus contextuels</span><span class="sxs-lookup"><span data-stu-id="964a3-198">Adding Icons and Context Menus</span></span>](-search-3x-wds-ph-ui-extensions.md)
</dt> <dt>

[<span data-ttu-id="964a3-199">Exemple de code : extensions de Shell pour les gestionnaires de protocole</span><span class="sxs-lookup"><span data-stu-id="964a3-199">Code Sample: Shell Extensions for Protocol Handlers</span></span>](-search-3x-wds-ph-ui-samplecode.md)
</dt> <dt>

[<span data-ttu-id="964a3-200">Installation et inscription de gestionnaires de protocole</span><span class="sxs-lookup"><span data-stu-id="964a3-200">Installing and Registering Protocol Handlers</span></span>](-search-3x-wds-ph-install-registration.md)
</dt> <dt>

[<span data-ttu-id="964a3-201">Création d’un connecteur de recherche pour un gestionnaire de protocole</span><span class="sxs-lookup"><span data-stu-id="964a3-201">Creating a Search Connector for a Protocol Handler</span></span>](-search-3x-wds-ph-search-connector.md)
</dt> <dt>

[<span data-ttu-id="964a3-202">Débogage de gestionnaires de protocole</span><span class="sxs-lookup"><span data-stu-id="964a3-202">Debugging Protocol Handlers</span></span>](-search-ws-protocolhandlertesting.md)
</dt> </dl>

 

 
