---
description: Cette rubrique décrit les trois étapes du processus d’indexation et les principaux composants impliqués dans chacun d’entre eux, explique le minutage de l’activité d’indexation et fournit des notes pour les développeurs tiers qui souhaitent des magasins de données ou des formats de fichiers indexés.
ms.assetid: cfba12eb-4123-4b57-8311-d4fc8f9f514e
title: Processus d’indexation dans la recherche Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b819a056b9a3dd44ea799ee56ae6b2e87606f552
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/30/2021
ms.locfileid: "113119534"
---
# <a name="indexing-process-in-windows-search"></a><span data-ttu-id="f5516-103">Processus d’indexation dans la recherche Windows</span><span class="sxs-lookup"><span data-stu-id="f5516-103">Indexing Process in Windows Search</span></span>

<span data-ttu-id="f5516-104">Cette rubrique décrit les trois étapes du processus d’indexation et les principaux composants impliqués dans chacun d’entre eux, explique le minutage de l’activité d’indexation et fournit des notes pour les développeurs tiers qui souhaitent des magasins de données ou des formats de fichiers indexés.</span><span class="sxs-lookup"><span data-stu-id="f5516-104">This topic describes the three stages of the indexing process and the primary components involved in each, explains the timing of indexing activity, and provides some notes for third-party developers who want their data stores or file formats indexed.</span></span>

<span data-ttu-id="f5516-105">Cette rubrique est organisée comme suit :</span><span class="sxs-lookup"><span data-stu-id="f5516-105">This topic is organized as follows:</span></span>

- [<span data-ttu-id="f5516-106">Présentation</span><span class="sxs-lookup"><span data-stu-id="f5516-106">Overview</span></span>](#overview)
- [<span data-ttu-id="f5516-107">Étape 1 : mise en file d’attente des URL pour l’indexation</span><span class="sxs-lookup"><span data-stu-id="f5516-107">Stage 1: Queuing URLs for Indexing</span></span>](#stage-1-queuing-urls-for-indexing)
- [<span data-ttu-id="f5516-108">Étape 2 : analyse des URL</span><span class="sxs-lookup"><span data-stu-id="f5516-108">Stage 2: Crawling URLs</span></span>](#stage-2-crawling-urls)
- [<span data-ttu-id="f5516-109">Étape 3 : mise à jour de l’index</span><span class="sxs-lookup"><span data-stu-id="f5516-109">Stage 3: Updating the Index</span></span>](#stage-3-updating-the-index)
- [<span data-ttu-id="f5516-110">Planification de l’indexation</span><span class="sxs-lookup"><span data-stu-id="f5516-110">How Indexing is Scheduled</span></span>](#how-indexing-is-scheduled)
- [<span data-ttu-id="f5516-111">Notes pour les responsables de l’implémentation</span><span class="sxs-lookup"><span data-stu-id="f5516-111">Notes to Implementers</span></span>](#notes-to-implementers)
- [<span data-ttu-id="f5516-112">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f5516-112">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="f5516-113">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="f5516-113">Overview</span></span>

<span data-ttu-id="f5516-114">Windows Search prend en charge l’indexation de propriétés et de contenu à partir de fichiers de différents formats de fichiers, tels que des formats .doc ou. jpeg, et de magasins de données, tels que les boîtes aux lettres du système de fichiers ou de Windows Outlook.</span><span class="sxs-lookup"><span data-stu-id="f5516-114">Windows Search supports the indexing of properties and content from files of different file formats, such as .doc or .jpeg formats, and data stores, such as the file system or Windows Outlook mailboxes.</span></span> <span data-ttu-id="f5516-115">Il existe deux types d’index : les index de valeur qui permettent le filtrage et le tri par la valeur entière d’une propriété et les index inversés qui indexent les mots dans les propriétés textuelles ou le contenu.</span><span class="sxs-lookup"><span data-stu-id="f5516-115">There are two kinds of indices: value indices that allow filtering and sorting by the whole value of a property and inverted indices that index words within textual properties or content.</span></span> <span data-ttu-id="f5516-116">Si vous disposez d’un format de fichier personnalisé ou d’un magasin de données, vous devez comprendre comment Windows Search indexe pour que vos éléments soient indexés correctement.</span><span class="sxs-lookup"><span data-stu-id="f5516-116">If you have a custom file format or data store, you need to understand how Windows Search indexes in order to get your items indexed correctly.</span></span>

<span data-ttu-id="f5516-117">Le processus d’indexation s’effectue en trois étapes, contrôlées par un composant de recherche Windows appelé rassembleur.</span><span class="sxs-lookup"><span data-stu-id="f5516-117">The indexing process happens in three stages controlled by a Windows Search component called the gatherer.</span></span> <span data-ttu-id="f5516-118">Dans la première étape, le rassembleur ajoute des URL aux files d’attente.</span><span class="sxs-lookup"><span data-stu-id="f5516-118">In the first stage, the gatherer adds URLs to queues.</span></span> <span data-ttu-id="f5516-119">Les URL identifient les éléments à indexer et les files d’attente sont simplement des listes de priorités d’URL.</span><span class="sxs-lookup"><span data-stu-id="f5516-119">The URLs identify items to be indexed, and the queues are merely prioritized lists of URLs.</span></span> <span data-ttu-id="f5516-120">Au cours de la deuxième étape, le rassembleur coordonne d’autres composants Windows Search et tiers pour accéder aux éléments et collecter des données à leur sujet.</span><span class="sxs-lookup"><span data-stu-id="f5516-120">In the second stage, the gatherer coordinates other Windows Search and third-party components to access the items and collect data about them.</span></span> <span data-ttu-id="f5516-121">Enfin, dans la troisième étape, les données collectées sont ajoutées à l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-121">Finally, in the third stage, the data collected is added to the index.</span></span>

<span data-ttu-id="f5516-122">Le diagramme suivant montre les principaux composants et le workflow des données via le processus d’indexation.</span><span class="sxs-lookup"><span data-stu-id="f5516-122">The following diagram shows the principal components and flow of data through the indexing process.</span></span> <span data-ttu-id="f5516-123">Un certain nombre de composants sont impliqués dans la collecte de données pour l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-123">A number of components are involved in collecting data for the index.</span></span> <span data-ttu-id="f5516-124">Certaines d’entre elles font partie de Windows Search et d’autres proviennent d’applications tierces.</span><span class="sxs-lookup"><span data-stu-id="f5516-124">Some of these are a part of Windows Search, and some come from third-party applications.</span></span> <span data-ttu-id="f5516-125">Si vous disposez d’un magasin de données ou d’un format de fichier personnalisé, Windows Search s’appuie sur le gestionnaire de protocole et le filtre pour accéder aux URL et émettre des propriétés pour l’indexation.</span><span class="sxs-lookup"><span data-stu-id="f5516-125">If you have a custom data store or file format, Windows Search relies on your protocol handler and filter for accessing URLs and emitting properties for indexing.</span></span> <span data-ttu-id="f5516-126">Les composants de recherche Windows sont affichés en bleu et les composants tiers en vert.</span><span class="sxs-lookup"><span data-stu-id="f5516-126">Windows Search components are shown in blue, and third-party components are shown in green.</span></span>

![Diagramme montrant l’interaction entre les composants pendant le processus d’indexation](images/indexingcompoverview.jpg)

## <a name="stage-1-queuing-urls-for-indexing"></a><span data-ttu-id="f5516-128">Étape 1 : mise en file d’attente des URL pour l’indexation</span><span class="sxs-lookup"><span data-stu-id="f5516-128">Stage 1: Queuing URLs for Indexing</span></span>

<span data-ttu-id="f5516-129">Lors de la première étape de l’indexation, le rassembleur collecte des informations sur les mises à jour des magasins de données, compare ces informations à l’étendue de l’analyse connue, puis crée une file d’attente d’URL à parcourir pour collecter les données de l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-129">In the first stage of indexing, the gatherer collects information about updates to data stores, compares that information to the known crawl scope, and then builds a queue of URLs to traverse to collect data for the index.</span></span> <span data-ttu-id="f5516-130">Pour les sources qui ne sont pas basées sur la notification, telles que les lecteurs FAT, le rassembleur initie régulièrement une traversée complète de l’étendue de l’analyse afin que les données de l’index soient actualisées.</span><span class="sxs-lookup"><span data-stu-id="f5516-130">For sources that are not based on notification, such as FAT drives, the gatherer periodically initiates a full traversal of the crawl scope so that the data in the index is kept fresh.</span></span> <span data-ttu-id="f5516-131">Pour les sources telles que NTFS, il n’existe qu’une seule analyse et tout le reste est géré par les notifications à partir du [Journal des modifications USN](/windows/desktop/FileIO/change-journals).</span><span class="sxs-lookup"><span data-stu-id="f5516-131">For sources such as NTFS, there is only a single crawl and everything else is handled by notifications from the [USN Change Journal](/windows/desktop/FileIO/change-journals).</span></span> <span data-ttu-id="f5516-132">Il n’y a pas non plus d’analyse de Microsoft Outlook.</span><span class="sxs-lookup"><span data-stu-id="f5516-132">There is also no crawl of Microsoft Outlook.</span></span> <span data-ttu-id="f5516-133">Le diagramme suivant présente une vue d’ensemble du processus de mise en file d’attente pour l’indexation sans analyse.</span><span class="sxs-lookup"><span data-stu-id="f5516-133">The following diagram shows a high-level view of the queuing process for non-crawl indexing.</span></span>

![Diagramme montrant le processus d’interrogation pour l’indexation non-analyse](images/queuingurls.jpg)

<span data-ttu-id="f5516-135">Le reste de cette section explique comment la recherche Windows détermine les URL à analyser et définit des termes importants en cours de route.</span><span class="sxs-lookup"><span data-stu-id="f5516-135">The rest of this section explains how Windows Search determines what URLs to crawl, and defines some important terms along the way.</span></span>

<span data-ttu-id="f5516-136">**Étendue**  de l’analyse  La portée de l’analyse est un ensemble d’URL que Windows Search parcourt pour collecter des données sur les éléments que l’utilisateur souhaite indexer pour accélérer les recherches.</span><span class="sxs-lookup"><span data-stu-id="f5516-136">**Crawl Scope**  The crawl scope is a set of URLs that Windows Search traverses to collect data about items that the user wants indexed for faster searches.</span></span> <span data-ttu-id="f5516-137">La recherche Windows ajoute des URL à la portée de l’analyse par défaut, comme les chemins d’accès aux dossiers **documents** et **images** des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="f5516-137">Windows Search adds some URLs to the crawl scope by default, like paths to users' **Documents** and **Pictures** folders.</span></span> <span data-ttu-id="f5516-138">D’autres URL peuvent être ajoutées par des applications tierces, des utilisateurs et des stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="f5516-138">Other URLs can be added by third-party applications, users, and Group Policy.</span></span> <span data-ttu-id="f5516-139">Enfin, les utilisateurs et les stratégie de groupe peuvent exclure explicitement des URL.</span><span class="sxs-lookup"><span data-stu-id="f5516-139">Finally, both users and Group Policy can explicitly exclude URLs.</span></span> <span data-ttu-id="f5516-140">Windows Search prend toutes les URL ajoutées et supprime les URL exclues pour déterminer la portée de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="f5516-140">Windows Search takes all the added URLs and removes the excluded URLs to determine the crawl scope.</span></span> <span data-ttu-id="f5516-141">Il s’agit de la plage de travail des URL à partir de laquelle le rassembleur commence son travail.</span><span class="sxs-lookup"><span data-stu-id="f5516-141">This is the working set of URLs from which the gatherer begins its work.</span></span>

<span data-ttu-id="f5516-142">**Rassembleur**  Le rassembleur est un composant de recherche Windows qui collecte des informations sur les URL au sein de l’étendue de l’analyse et crée une file d’attente d’URL à analyser par l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="f5516-142">**Gatherer**  The gatherer is a Windows Search component that collects information about URLs within the crawl scope and creates a queue of URLs for the indexer to crawl.</span></span> <span data-ttu-id="f5516-143">Lorsqu’un élément de la portée d’analyse est ajouté, supprimé ou mis à jour, le rassembleur est averti par le fournisseur de notifications de la Banque de données.</span><span class="sxs-lookup"><span data-stu-id="f5516-143">When an item in the crawl scope is added, deleted, or updated, the gatherer is notified by the data store's notifications provider.</span></span> <span data-ttu-id="f5516-144">Il existe une analyse initiale où le rassembleur démarre à la racine de l’étendue de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="f5516-144">There is an initial crawl where the gatherer starts at the crawl scope root.</span></span> <span data-ttu-id="f5516-145">L’URL est transmise au gestionnaire de protocole puis au [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)approprié.</span><span class="sxs-lookup"><span data-stu-id="f5516-145">The URL is passed to the protocol handler and then to the appropriate [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter).</span></span> <span data-ttu-id="f5516-146">Le filtre est généralement une énumération de répertoires qui génère plus d’URL.</span><span class="sxs-lookup"><span data-stu-id="f5516-146">The filter is usually a directory enumeration that produces more URLs.</span></span> <span data-ttu-id="f5516-147">Les notifications sont à l’état stable.</span><span class="sxs-lookup"><span data-stu-id="f5516-147">Notifications are the steady-state.</span></span> <span data-ttu-id="f5516-148">En règle générale, chaque magasin de données a son propre gestionnaire de protocole qui fournit ces notifications.</span><span class="sxs-lookup"><span data-stu-id="f5516-148">Typically, each data store has its own protocol handler that provides these notifications.</span></span> <span data-ttu-id="f5516-149">Par exemple, sur le système de fichiers local, le [Journal des modifications USN](/windows/desktop/FileIO/change-journals) agit comme un fournisseur de notifications pour toutes les URL sous le protocole file://.</span><span class="sxs-lookup"><span data-stu-id="f5516-149">For example, on the local file system, the [USN Change Journal](/windows/desktop/FileIO/change-journals) acts as a notifications provider for all URLs under the file:// protocol.</span></span> <span data-ttu-id="f5516-150">De même, Microsoft Outlook joue le rôle de fournisseur de notifications pour toutes les URL sous le protocole mapi://.</span><span class="sxs-lookup"><span data-stu-id="f5516-150">Similarly, Microsoft Outlook acts as a notifications provider for all URLs under the mapi:// protocol.</span></span> <span data-ttu-id="f5516-151">Lorsqu’un utilisateur reçoit, déplace ou supprime un message électronique, Outlook avertit le rassembleur de l’état modifié de l’e-mail.</span><span class="sxs-lookup"><span data-stu-id="f5516-151">When a user receives, moves, or deletes email, Outlook notifies the gatherer of the changed status of the email.</span></span> <span data-ttu-id="f5516-152">À partir de ces notifications, le rassembleur crée des files d’attente d’indexation des URL à analyser.</span><span class="sxs-lookup"><span data-stu-id="f5516-152">From these notifications, the gatherer creates indexing queues of URLs to crawl.</span></span>

<span data-ttu-id="f5516-153">**Indexation des files d’attente**  Les files d’attente d’indexation sont des listes d’URL qui identifient les éléments qui doivent être indexés ou réindexés.</span><span class="sxs-lookup"><span data-stu-id="f5516-153">**Indexing Queues**  The indexing queues are lists of URLs that identify items that need to be indexed or re-indexed.</span></span> <span data-ttu-id="f5516-154">Le rassembleur compare les URL qu’il reçoit des fournisseurs de notification aux URL dans l’étendue de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="f5516-154">The gatherer compares the URLs it receives from notifications providers to the URLs in the crawl scope.</span></span> <span data-ttu-id="f5516-155">Chaque URL des fournisseurs de notifications qui se trouve dans l’étendue de l’analyse est ajoutée à une file d’attente utilisée par le rassembleur pour hiérarchiser les URL à traiter par la suite.</span><span class="sxs-lookup"><span data-stu-id="f5516-155">Every URL from notifications providers that falls within the crawl scope is added to a queue that the gatherer uses to prioritize which URLs to process next.</span></span>

<span data-ttu-id="f5516-156">Il existe trois files d’attente : les notifications de haute priorité, les notifications normales et les analyses périodiques.</span><span class="sxs-lookup"><span data-stu-id="f5516-156">There are three queues: high priority notifications, normal notifications, and periodic crawls.</span></span> <span data-ttu-id="f5516-157">La file d’attente à priorité élevée concerne les notifications qui doivent être traitées immédiatement.</span><span class="sxs-lookup"><span data-stu-id="f5516-157">The high priority queue is for notifications that should be processed immediately.</span></span> <span data-ttu-id="f5516-158">Par exemple, lorsqu’un utilisateur modifie la propriété titre d’un élément dans l’Explorateur Windows, l’affichage de l’Explorateur Windows doit être mis à jour immédiatement après la modification.</span><span class="sxs-lookup"><span data-stu-id="f5516-158">For example, when a user changes an item's title property in Windows Explorer, the Windows Explorer view needs to be updated immediately after the change.</span></span> <span data-ttu-id="f5516-159">La file d’attente de notifications normale concerne toutes les notifications de modifications restantes.</span><span class="sxs-lookup"><span data-stu-id="f5516-159">The normal notification queue is for all remaining change notifications.</span></span> <span data-ttu-id="f5516-160">Les files d’attente de notification sont traitées avant la file d’attente d’analyse, car les éléments modifiés sont plus susceptibles d’intéresser un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f5516-160">The notification queues are processed before the crawl queue because changed items are more likely to be of interest to a user.</span></span> <span data-ttu-id="f5516-161">Le rassembleur accède aux données des URL sur chaque file d’attente dans l’ordre premier entré, premier sorti (FIFO).</span><span class="sxs-lookup"><span data-stu-id="f5516-161">The gatherer accesses data for the URLs on each queue in first in, first out (FIFO) order.</span></span>

<span data-ttu-id="f5516-162">Pour plus d’informations sur la hiérarchisation et les API d’événements introduites dans Windows 7, consultez [indexation des événements d’ensemble de priorités et d’ensembles de lignes dans Windows 7](indexing-prioritization-and-rowset-events.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-162">For more information on prioritization, and eventing APIs introduced in Windows 7, see [Indexing Prioritization and Rowset Events in Windows 7](indexing-prioritization-and-rowset-events.md).</span></span> <span data-ttu-id="f5516-163">Pour plus d’informations sur la gestion des étendues de l’analyse et les notifications, consultez [fourniture de notifications de modification](-search-3x-wds-notifyingofchanges.md) et [utilisation du gestionnaire de portée d’analyse](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-163">For more information on crawl scope management and notifications, see [Providing Change Notifications](-search-3x-wds-notifyingofchanges.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>

## <a name="stage-2-crawling-urls"></a><span data-ttu-id="f5516-164">Étape 2 : analyse des URL</span><span class="sxs-lookup"><span data-stu-id="f5516-164">Stage 2: Crawling URLs</span></span>

<span data-ttu-id="f5516-165">Au cours de la deuxième étape de l’indexation, le rassembleur analyse les files d’attente, en accédant aux magasins de données et en récupérant les flux d’éléments.</span><span class="sxs-lookup"><span data-stu-id="f5516-165">In the second stage of indexing, the gatherer crawls through the queues, accessing data stores and retrieving item streams.</span></span> <span data-ttu-id="f5516-166">Tout d’abord, le rassembleur recherche le gestionnaire de protocole approprié pour chaque URL.</span><span class="sxs-lookup"><span data-stu-id="f5516-166">First, the gatherer finds the appropriate protocol handler for each URL.</span></span> <span data-ttu-id="f5516-167">Ensuite, le rassembleur passe l’URL au gestionnaire de protocole.</span><span class="sxs-lookup"><span data-stu-id="f5516-167">Then, the gatherer passes the URL to the protocol handler.</span></span> <span data-ttu-id="f5516-168">Le gestionnaire de protocole accède à l’élément et retourne les métadonnées d’élément au Rassembleur.</span><span class="sxs-lookup"><span data-stu-id="f5516-168">The protocol handler accesses the item and passes item metadata back to the gatherer.</span></span> <span data-ttu-id="f5516-169">Le rassembleur utilise les métadonnées pour identifier le filtre correct.</span><span class="sxs-lookup"><span data-stu-id="f5516-169">The gatherer uses the metadata to identify the correct filter.</span></span>

<span data-ttu-id="f5516-170">Le diagramme suivant présente une vue d’ensemble du processus d’analyse d’URL.</span><span class="sxs-lookup"><span data-stu-id="f5516-170">The following diagram shows a high-level view of the URL-crawling process.</span></span> <span data-ttu-id="f5516-171">Cette étape comprend une coordination et une communication considérables entre les composants.</span><span class="sxs-lookup"><span data-stu-id="f5516-171">This stage includes considerable coordination and communication between components.</span></span>

![Diagramme montrant le processus d’analyse des URL et d’accès aux éléments](images/crawlingqueues.jpg)

<span data-ttu-id="f5516-173">Le reste de cette section décrit comment la recherche Windows accède aux éléments pour l’indexation et explique les rôles de chacun des composants impliqués.</span><span class="sxs-lookup"><span data-stu-id="f5516-173">The rest of this section describes how Windows Search accesses items for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="f5516-174">**Rassembleur**  À l’étape 2, la phase d’analyse, le rassembleur traite les URL dans les files d’attente, en commençant par la file d’attente à priorité élevée.</span><span class="sxs-lookup"><span data-stu-id="f5516-174">**Gatherer**  In stage 2, the crawling stage, the gatherer processes the URLs in the queues, beginning with the high priority queue.</span></span> <span data-ttu-id="f5516-175">Chaque URL est examinée pour identifier son protocole.</span><span class="sxs-lookup"><span data-stu-id="f5516-175">Each URL is examined to identify its protocol.</span></span> <span data-ttu-id="f5516-176">Le rassembleur recherche ensuite le gestionnaire de protocole inscrit pour ce protocole et l’instancie dans le processus hôte du protocole de recherche.</span><span class="sxs-lookup"><span data-stu-id="f5516-176">The gatherer then looks up the protocol handler registered for that protocol and instantiates it in the search protocol host process.</span></span>

<span data-ttu-id="f5516-177">**Hôte de protocole de recherche**  L’hôte de protocole de recherche est simplement un processus hôte boxed pour les gestionnaires de protocole.</span><span class="sxs-lookup"><span data-stu-id="f5516-177">**Search Protocol Host**  The search protocol host is merely a boxed, host process for protocol handlers.</span></span> <span data-ttu-id="f5516-178">En règle générale, Windows Search crée deux processus hôtes de ce type, un qui s’exécute dans le contexte de sécurité système et un autre qui s’exécute dans le contexte de sécurité de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f5516-178">Typically, Windows Search creates two such host processes, one that runs in the system security context and one that runs in the user security context.</span></span> <span data-ttu-id="f5516-179">Cette séparation garantit que les données spécifiques à un utilisateur ne sont jamais exécutées dans le contexte du système.</span><span class="sxs-lookup"><span data-stu-id="f5516-179">This separation ensures that data specific to a user is never run in the system context.</span></span>

<span data-ttu-id="f5516-180">Windows Search utilise également le processus hôte pour isoler une instance d’un gestionnaire de protocole à partir d’autres processus ou applications.</span><span class="sxs-lookup"><span data-stu-id="f5516-180">Windows Search also uses the host process to isolate an instance of a protocol handler from other processes or applications.</span></span> <span data-ttu-id="f5516-181">De cette façon, aucune application externe ne peut accéder à cette instance spécifique du gestionnaire de protocole et si le gestionnaire de protocole échoue de façon inattendue, seul le processus d’indexation est affecté.</span><span class="sxs-lookup"><span data-stu-id="f5516-181">This way, no outside application can access that specific instance of the protocol handler, and if the protocol handler fails unexpectedly, only the indexing process is affected.</span></span> <span data-ttu-id="f5516-182">Étant donné que le processus hôte exécute du code tiers (gestionnaires de protocole), Windows Search recycle régulièrement le processus afin de réduire le temps nécessaire à la réussite d’une attaque pour exploiter les informations du processus.</span><span class="sxs-lookup"><span data-stu-id="f5516-182">Because the host process runs third party code (protocol handlers), Windows Search periodically recycles the process to minimize the time a successful attack has to exploit information in the process.</span></span> <span data-ttu-id="f5516-183">Au-delà, l’hôte de protocole de recherche n’affecte pas l’analyse des URL ou l’indexation des éléments.</span><span class="sxs-lookup"><span data-stu-id="f5516-183">Beyond this, the search protocol host does not affect the crawling of URLs or indexing of items.</span></span>

<span data-ttu-id="f5516-184">**Gestionnaires de protocole**  Les gestionnaires de protocole permettent d’accéder aux éléments d’un magasin de données à l’aide du protocole du magasin de données.</span><span class="sxs-lookup"><span data-stu-id="f5516-184">**Protocol Handlers**  Protocol handlers provide access to items in a data store using the data store's protocol.</span></span> <span data-ttu-id="f5516-185">Par exemple, le gestionnaire de protocole NTFS fournit l’accès aux fichiers sur un lecteur local à l’aide du protocole file://.</span><span class="sxs-lookup"><span data-stu-id="f5516-185">For example, the NTFS protocol handler provides access to files on a local drive using the file:// protocol.</span></span> <span data-ttu-id="f5516-186">Le gestionnaire de protocole sait comment parcourir le magasin de données, identifier les éléments nouveaux ou mis à jour et notifier le rassembleur.</span><span class="sxs-lookup"><span data-stu-id="f5516-186">The protocol handler knows how to traverse the data store, identify new or updated items, and notify the gatherer.</span></span> <span data-ttu-id="f5516-187">Ensuite, lorsque l’analyse commence, le gestionnaire de protocole fournit un objet [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) au Rassembleur pour établir une liaison avec le flux sous-jacent de l’élément et retourner des métadonnées d’élément, telles que des restrictions de sécurité et l’heure de dernière modification.</span><span class="sxs-lookup"><span data-stu-id="f5516-187">Then, when crawling begins, the protocol handler provides an [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object to the gatherer to bind to the item's underlying stream and return item metadata such as security restrictions and last modified time.</span></span>

> [!NOTE]  
> <span data-ttu-id="f5516-188">Les gestionnaires de protocole ne sont pas des composants de recherche Windows ; Il s’agit de composants du protocole et du magasin de données spécifiques auxquels ils sont destinés à accéder.</span><span class="sxs-lookup"><span data-stu-id="f5516-188">Protocol handlers are not Windows Search components; they are components of the specific protocol and data store they are designed to access.</span></span> <span data-ttu-id="f5516-189">Si vous avez un magasin de données personnalisé que vous souhaitez indexer, vous devez implémenter un gestionnaire de protocole.</span><span class="sxs-lookup"><span data-stu-id="f5516-189">If you have a custom data store you want indexed, you need to implement a protocol handler.</span></span> <span data-ttu-id="f5516-190">Pour plus d’informations sur les gestionnaires de protocole et sur la façon d’en implémenter un, consultez [développement de gestionnaires de protocole](-search-3x-wds-phaddins.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-190">For more information on protocol handlers and how to implement one, refer to [Developing Protocol Handlers](-search-3x-wds-phaddins.md).</span></span>

<span data-ttu-id="f5516-191">**Métadonnées et flux**  À l’aide des métadonnées retournées par l’objet [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) du gestionnaire de protocole, le rassembleur identifie le filtre correct pour l’URL.</span><span class="sxs-lookup"><span data-stu-id="f5516-191">**Metadata and Stream**  Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for the URL.</span></span> <span data-ttu-id="f5516-192">Le rassembleur analyse l’extension de nom de fichier de l’élément et recherche le filtre inscrit pour cette extension.</span><span class="sxs-lookup"><span data-stu-id="f5516-192">The gatherer parses the item's file name extension and looks up the filter registered for that extension.</span></span> <span data-ttu-id="f5516-193">Si le Rassembleur ne parvient pas à trouver un filtre, Windows Search utilise les métadonnées pour dériver un ensemble minimal d’informations sur les propriétés système (telles que System. ItemName) et met à jour l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-193">If the gatherer is unable to find a filter, Windows Search uses the metadata to derive a minimal set of system property information (like System.ItemName) and updates the index.</span></span> <span data-ttu-id="f5516-194">Dans le cas contraire, si le rassembleur trouve le filtre, la troisième étape de l’indexation commence.</span><span class="sxs-lookup"><span data-stu-id="f5516-194">Otherwise, if the gatherer finds the filter, the third stage of indexing begins.</span></span>

## <a name="stage-3-updating-the-index"></a><span data-ttu-id="f5516-195">Étape 3 : mise à jour de l’index</span><span class="sxs-lookup"><span data-stu-id="f5516-195">Stage 3: Updating the Index</span></span>

<span data-ttu-id="f5516-196">Au cours de la troisième étape de l’indexation, le rassembleur instancie le filtre correct pour l’URL et initialise le filtre avec le flux de l’objet [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) .</span><span class="sxs-lookup"><span data-stu-id="f5516-196">In the third stage of indexing, the gatherer instantiates the correct filter for the URL and initializes the filter with the stream from the [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object.</span></span> <span data-ttu-id="f5516-197">Le filtre accède ensuite à l’élément et retourne le contenu de l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-197">The filter then accesses the item and returns content for the index.</span></span> <span data-ttu-id="f5516-198">Si vous disposez d’un format de fichier personnalisé, Windows Search s’appuie sur votre filtre pour accéder aux URL et émettre du contenu et des propriétés pour l’indexation.</span><span class="sxs-lookup"><span data-stu-id="f5516-198">If you have a custom file format, Windows Search relies on your filter to access URLs and emit content and properties for indexing.</span></span>

<span data-ttu-id="f5516-199">Le diagramme suivant présente une vue d’ensemble du processus d’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="f5516-199">The following diagram shows a high-level view of the data access process.</span></span> <span data-ttu-id="f5516-200">Cette étape comprend une coordination et une communication considérables entre les composants.</span><span class="sxs-lookup"><span data-stu-id="f5516-200">This stage includes considerable coordination and communication between components.</span></span>

![Diagramme montrant les données d’élément émises pour l’index](images/filteringdata.jpg)

<span data-ttu-id="f5516-202">Le reste de cette section décrit comment Windows Search accède aux données d’élément pour l’indexation et explique les rôles de chacun des composants impliqués.</span><span class="sxs-lookup"><span data-stu-id="f5516-202">The rest of this section describes how Windows Search accesses item data for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="f5516-203">**Rassembleur**  Au début de cette étape, le rôle du Rassembleur est d’instancier le filtre correct pour l’élément et de lui passer le flux de l’élément.</span><span class="sxs-lookup"><span data-stu-id="f5516-203">**Gatherer**  At the beginning of this stage, the gatherer's role is to instantiate the correct filter for the item and pass it the item stream.</span></span> <span data-ttu-id="f5516-204">À la fin de cette étape, le rassembleur prend le contenu et les propriétés émis par le gestionnaire de propriétés et le filtre et met à jour l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-204">At the end of this stage, the gatherer takes the content and properties emitted by the filter and property handler and updates the index.</span></span>

<span data-ttu-id="f5516-205">**Hôte de filtre**  L’hôte de filtre est simplement un processus hôte pour les filtres et les gestionnaires de propriétés et sert d’objectif similaire à l’hôte de protocole de recherche.</span><span class="sxs-lookup"><span data-stu-id="f5516-205">**Filter Host**  The filter host is merely a host process for filters and property handlers and serves a purpose similar to the search protocol host.</span></span> <span data-ttu-id="f5516-206">Le processus hôte isole les filtres et les gestionnaires de propriétés du reste du système pour les mêmes raisons de sécurité et de stabilité que celles que les processus hôtes de protocole de recherche isolent les gestionnaires de protocole.</span><span class="sxs-lookup"><span data-stu-id="f5516-206">The host process isolates filters and property handlers from the rest of the system for the same security and stability reasons that search protocol host processes isolate protocol handlers.</span></span> <span data-ttu-id="f5516-207">Le processus hôte s’exécute avec des droits minimaux (il ne peut même pas accéder au système de fichiers) et il est parfois recyclé pour vous protéger contre les attaques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="f5516-207">The host process runs with minimal rights (it can't even access the file system) and is occasionally recycled to protect against security attacks.</span></span> <span data-ttu-id="f5516-208">Windows Search surveille également l’utilisation des ressources, de sorte que si un filtre consomme un trop grand nombre de ressources, le processus hôte est recyclé.</span><span class="sxs-lookup"><span data-stu-id="f5516-208">Windows Search also monitors resource use so that if a filter consumes too many resources, the host process is recycled.</span></span>

<span data-ttu-id="f5516-209">**Filtres**  Les filtres sont des composants essentiels du processus d’indexation qui émettent des informations sur les éléments du Rassembleur.</span><span class="sxs-lookup"><span data-stu-id="f5516-209">**Filters**  Filters are critical components in the indexing process that emit item information for the gatherer.</span></span> <span data-ttu-id="f5516-210">Les filtres sont nommés d’après l’interface principale utilisée dans leur implémentation, l’interface [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) et, par conséquent, sont parfois appelés IFilters.</span><span class="sxs-lookup"><span data-stu-id="f5516-210">Filters are named after the principal interface used in their implementation, the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface, and consequently are sometimes referred to as IFilters.</span></span> <span data-ttu-id="f5516-211">Il existe deux types de filtres : un qui interagit avec des éléments individuels tels que des fichiers et un autre qui interagit avec des conteneurs tels que des dossiers.</span><span class="sxs-lookup"><span data-stu-id="f5516-211">There are two kinds of filters: one that interacts with individual items like files and one that interacts with containers like folders.</span></span> <span data-ttu-id="f5516-212">Les deux fournissent des données pour l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-212">Both provide data for the index.</span></span>

<span data-ttu-id="f5516-213">À l’aide des métadonnées retournées par l’objet [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) du gestionnaire de protocole, le rassembleur identifie le filtre correct pour une URL particulière et le transmet au flux.</span><span class="sxs-lookup"><span data-stu-id="f5516-213">Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for a particular URL and passes it to the stream.</span></span> <span data-ttu-id="f5516-214">Le rassembleur identifie le filtre correct à l’aide d’un gestionnaire de protocole ou de l’extension de nom de fichier, du type MIME ou de l’identificateur de classe (CLSID).</span><span class="sxs-lookup"><span data-stu-id="f5516-214">The gatherer identifies the correct filter either through a protocol handler or by the file name extension, MIME type, or class identifier (CLSID).</span></span> <span data-ttu-id="f5516-215">Si l’URL pointe vers un conteneur, le filtre émet des propriétés pour le conteneur et énumère les éléments dans le conteneur (URL enfants).</span><span class="sxs-lookup"><span data-stu-id="f5516-215">If the URL points to a container, the filter emits properties for the container and enumerates the items in the container (child URLs).</span></span> <span data-ttu-id="f5516-216">Si l’URL pointe vers un élément, le filtre retourne le contenu textuel, si la lecture des propriétés est plus complexe que les gestionnaires de propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-216">If the URL points to an item, the filter returns the textual content, if any the reading of properties and are more complex than property handlers.</span></span> <span data-ttu-id="f5516-217">En général, nous recommandons que les filtres émettent le contenu des éléments alors que les gestionnaires de propriétés émettent des propriétés d’élément.</span><span class="sxs-lookup"><span data-stu-id="f5516-217">Generally, we recommend that filters emit item contents while property handlers emit item properties.</span></span> <span data-ttu-id="f5516-218">Toutefois, si votre filtre doit fonctionner avec des applications plus anciennes qui ne reconnaissent pas les gestionnaires de propriétés, vous pouvez également implémenter le filtre pour émettre des propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-218">However, if your filter needs to work with older applications that do not recognize property handlers, you can implement the filter to emit properties as well.</span></span>

> [!NOTE]  
> <span data-ttu-id="f5516-219">Les filtres ne sont pas des composants de recherche Windows ; Il s’agit de composants liés au format de fichier spécifique ou au conteneur auquel ils sont destinés à accéder.</span><span class="sxs-lookup"><span data-stu-id="f5516-219">Filters are not Windows Search components; they are components related to the specific file format or container they are designed to access.</span></span> <span data-ttu-id="f5516-220">Pour plus d’informations sur les filtres et sur la façon d’en implémenter un pour un format de fichier ou un conteneur personnalisé, consultez [meilleures pratiques pour la création de gestionnaires de filtres dans Windows Search](-search-3x-wds-extidx-filters.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-220">For more information on filters and how to implement one for a custom file format or container, see [Best Practices for Creating Filter Handlers in Windows Search](-search-3x-wds-extidx-filters.md).</span></span>

<span data-ttu-id="f5516-221">Le tableau suivant répertorie les résultats que le rassembleur reçoit d’un filtre ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) et d’un gestionnaire de propriétés ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) pendant le processus d’indexation.</span><span class="sxs-lookup"><span data-stu-id="f5516-221">The following table lists the results that the gatherer receives from a filter ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) and property handler ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) during the indexing process.</span></span>

|                            | [<span data-ttu-id="f5516-222">**Filtres**</span><span class="sxs-lookup"><span data-stu-id="f5516-222">**IFilter**</span></span>](/windows/win32/api/filter/nn-filter-ifilter) | [<span data-ttu-id="f5516-223">**IPropertyStore**</span><span class="sxs-lookup"><span data-stu-id="f5516-223">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore) |
|----------------------------|------------------------------------|-------------------------------------------------|
| <span data-ttu-id="f5516-224">**Autoriser l’écriture**</span><span class="sxs-lookup"><span data-stu-id="f5516-224">**Allow write**</span></span>                | <span data-ttu-id="f5516-225">Non</span><span class="sxs-lookup"><span data-stu-id="f5516-225">No</span></span>                                 | <span data-ttu-id="f5516-226">Oui</span><span class="sxs-lookup"><span data-stu-id="f5516-226">Yes</span></span>                                             |
| <span data-ttu-id="f5516-227">**Mélanger le contenu et les propriétés**</span><span class="sxs-lookup"><span data-stu-id="f5516-227">**Mix content and properties**</span></span> | <span data-ttu-id="f5516-228">Oui</span><span class="sxs-lookup"><span data-stu-id="f5516-228">Yes</span></span>                                | <span data-ttu-id="f5516-229">Non</span><span class="sxs-lookup"><span data-stu-id="f5516-229">No</span></span>                                              |
| <span data-ttu-id="f5516-230">**Multilingue**</span><span class="sxs-lookup"><span data-stu-id="f5516-230">**Multilingual**</span></span>               | <span data-ttu-id="f5516-231">Oui</span><span class="sxs-lookup"><span data-stu-id="f5516-231">Yes</span></span>                                | <span data-ttu-id="f5516-232">Non</span><span class="sxs-lookup"><span data-stu-id="f5516-232">No</span></span>                                              |
| <span data-ttu-id="f5516-233">**Émettre des liens**</span><span class="sxs-lookup"><span data-stu-id="f5516-233">**Emit links**</span></span>                 | <span data-ttu-id="f5516-234">Oui</span><span class="sxs-lookup"><span data-stu-id="f5516-234">Yes</span></span>                                | <span data-ttu-id="f5516-235">Non</span><span class="sxs-lookup"><span data-stu-id="f5516-235">No</span></span>                                              |
| <span data-ttu-id="f5516-236">**MIME**</span><span class="sxs-lookup"><span data-stu-id="f5516-236">**MIME**</span></span>                       | <span data-ttu-id="f5516-237">Oui</span><span class="sxs-lookup"><span data-stu-id="f5516-237">Yes</span></span>                                | <span data-ttu-id="f5516-238">Non</span><span class="sxs-lookup"><span data-stu-id="f5516-238">No</span></span>                                              |
| <span data-ttu-id="f5516-239">**Limites du texte**</span><span class="sxs-lookup"><span data-stu-id="f5516-239">**Text boundaries**</span></span>            | <span data-ttu-id="f5516-240">Phrase, paragraphe, chapitre</span><span class="sxs-lookup"><span data-stu-id="f5516-240">Sentence, paragraph, chapter</span></span>       | <span data-ttu-id="f5516-241">Aucun</span><span class="sxs-lookup"><span data-stu-id="f5516-241">None</span></span>                                            |
| <span data-ttu-id="f5516-242">**Client/serveur**</span><span class="sxs-lookup"><span data-stu-id="f5516-242">**Client / server**</span></span>            | <span data-ttu-id="f5516-243">Les deux</span><span class="sxs-lookup"><span data-stu-id="f5516-243">Both</span></span>                               | <span data-ttu-id="f5516-244">Client</span><span class="sxs-lookup"><span data-stu-id="f5516-244">Client</span></span>                                          |
| <span data-ttu-id="f5516-245">**Implémentation**</span><span class="sxs-lookup"><span data-stu-id="f5516-245">**Implementation**</span></span>             | <span data-ttu-id="f5516-246">Complex</span><span class="sxs-lookup"><span data-stu-id="f5516-246">Complex</span></span>                            | <span data-ttu-id="f5516-247">Simple</span><span class="sxs-lookup"><span data-stu-id="f5516-247">Simple</span></span>                                          |

<span data-ttu-id="f5516-248">**Gestionnaires de propriétés**  Les gestionnaires de propriétés sont des composants qui lisent et écrivent des propriétés pour un format de fichier particulier.</span><span class="sxs-lookup"><span data-stu-id="f5516-248">**Property Handlers**  Property handlers are components that read and write properties for a particular file format.</span></span> <span data-ttu-id="f5516-249">Ils accèdent aux éléments et émettent des propriétés pour le rassembleur de la même façon que les filtres pour le contenu.</span><span class="sxs-lookup"><span data-stu-id="f5516-249">They access items and emit properties for the gatherer in the same way that filters do for content.</span></span> <span data-ttu-id="f5516-250">Les gestionnaires de propriétés sont plus faciles à implémenter que les filtres.</span><span class="sxs-lookup"><span data-stu-id="f5516-250">Property handlers are easier to implement than filters.</span></span> <span data-ttu-id="f5516-251">Si un format de fichier texte est très simple ou si les fichiers sont censés être très petits, le gestionnaire de propriétés peut émettre des propriétés et du contenu.</span><span class="sxs-lookup"><span data-stu-id="f5516-251">If a text-based file format is very simple or the files are expected to be very small, the property handler can emit both properties and content.</span></span>

> [!NOTE]  
> <span data-ttu-id="f5516-252">Les gestionnaires de propriétés ne sont pas des composants Windows Search ; Il s’agit de composants liés au format de fichier spécifique auquel ils sont destinés à accéder.</span><span class="sxs-lookup"><span data-stu-id="f5516-252">Property handlers are not Windows Search components; they are components related to the specific file format they are designed to access.</span></span> <span data-ttu-id="f5516-253">Pour plus d’informations sur les gestionnaires de propriétés et sur la façon d’en implémenter un pour un format de fichier personnalisé, consultez [développement de gestionnaires de propriétés pour Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-253">For more information on property handlers and how to implement one for a custom file format, see [Developing Property Handlers for Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span></span>

<span data-ttu-id="f5516-254">**Propriétés** de Windows Search fournit un [système de propriétés](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) qui inclut une grande bibliothèque de propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-254">**Properties** Windows Search provides a [property system](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) that includes a large library of properties.</span></span> <span data-ttu-id="f5516-255">Une propriété peut apparaître sur n’importe quel élément tel que défini par le gestionnaire de filtres ou de propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-255">Any property can appear on any item as defined by the filter or property handler.</span></span> <span data-ttu-id="f5516-256">Si vous disposez d’un format de fichier personnalisé, vous pouvez mapper les propriétés de votre format de fichier à ces propriétés système, et vous pouvez créer des propriétés personnalisées.</span><span class="sxs-lookup"><span data-stu-id="f5516-256">If you have a custom file format, you can map your file format's properties to these system properties, and you can create new custom properties.</span></span> <span data-ttu-id="f5516-257">Lorsque votre gestionnaire de filtres ou de propriétés émet ces propriétés, le rassembleur met à jour l’index afin que les utilisateurs puissent effectuer une recherche à l’aide de vos propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-257">When your filter or property handler emits these properties, the gatherer updates the index so users can search using your properties.</span></span> <span data-ttu-id="f5516-258">Pour plus d’informations sur la création et l’inscription de propriétés personnalisées pour un format de fichier, consultez [système de propriétés](../properties/building-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-258">For more information on creating and registering custom properties for a file format, see [Property System](../properties/building-property-handlers.md).</span></span>

<span data-ttu-id="f5516-259">**SystemIndex**  L’index, appelé SystemIndex, stocke les données indexées et se compose d’un magasin de propriétés et d’index sur les propriétés et le contenu des propriétés d’élément, ainsi qu’un index inversé pour le contenu textuel et les propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-259">**SystemIndex**  The index, called SystemIndex, stores indexed data and is composed of a property store and indices over the properties and content for item properties, and an inverted index for textual content and properties.</span></span> <span data-ttu-id="f5516-260">Une fois que le rassembleur a mis à jour l’index, l’index peut être interrogé par Windows Search et d’autres applications.</span><span class="sxs-lookup"><span data-stu-id="f5516-260">After the gatherer updates the index, the index can be queried by Windows Search and other applications.</span></span> <span data-ttu-id="f5516-261">Pour plus d’informations sur les méthodes d’interrogation de l’index, consultez [interrogation de l’index par programmation](-search-3x-wds-qryidx-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-261">For more information on ways to query the index, see [Querying the Index Programmatically](-search-3x-wds-qryidx-overview.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="f5516-262">N’oubliez pas que lorsque vous réinscrivez un schéma, les modifications apportées aux attributs des propriétés précédemment définies peuvent ne pas être respectées par l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="f5516-262">Remember that when you re-register a schema, changes made to attributes of previously defined properties may not be respected by the indexer.</span></span> <span data-ttu-id="f5516-263">La solution consiste soit à reconstruire l’index, soit à introduire de nouvelles propriétés reflétant les modifications au lieu de mettre à jour les anciennes.</span><span class="sxs-lookup"><span data-stu-id="f5516-263">The solution is either to rebuild the index, or introduce new properties that reflect the changes instead of updating old ones (not recommended).</span></span> <span data-ttu-id="f5516-264">Pour plus d’informations, consultez la section [Remarque sur les implémenteurs](#notes-to-implementers) dans la [vue d’ensemble du système de propriétés](../properties/property-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f5516-264">For more information, see [Note to Implementers](#notes-to-implementers) in [Properties System Overview](../properties/property-system-overview.md).</span></span>

## <a name="how-indexing-is-scheduled"></a><span data-ttu-id="f5516-265">Planification de l’indexation</span><span class="sxs-lookup"><span data-stu-id="f5516-265">How Indexing is Scheduled</span></span>

<span data-ttu-id="f5516-266">Lorsque la recherche Windows est installée pour la première fois, elle effectue une indexation complète de l’étendue de l’analyse, en s’interrompant pendant les périodes d’e/s élevées et de l’activité utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f5516-266">When Windows Search is first installed, it performs a full indexing of the crawl scope, pausing during periods of high I/O and user activity.</span></span> <span data-ttu-id="f5516-267">L’étendue de l’analyse par défaut se compose des emplacements de bibliothèque par défaut, tels que **documents**, **musique**, **images** et **vidéos**.</span><span class="sxs-lookup"><span data-stu-id="f5516-267">The default crawl scope consists of the default library locations, such as **Documents**, **Music**, **Pictures**, and **Videos**.</span></span> <span data-ttu-id="f5516-268">Les notifications sont traitées avant la fin de l’analyse initiale.</span><span class="sxs-lookup"><span data-stu-id="f5516-268">Notifications are processed even before the initial crawl is finished.</span></span> <span data-ttu-id="f5516-269">Parfois, le rassembleur analyse les URL à partir de l’étendue de l’analyse complète.</span><span class="sxs-lookup"><span data-stu-id="f5516-269">Occasionally, the gatherer crawls the URLs from the full crawl scope.</span></span> <span data-ttu-id="f5516-270">Ces analyses complètes garantissent que les données de l’index sont actualisées.</span><span class="sxs-lookup"><span data-stu-id="f5516-270">These full crawls ensure that the data in the index is fresh.</span></span> <span data-ttu-id="f5516-271">Par exemple, si un fournisseur de notification ne parvient pas à envoyer des notifications ou si le service de recherche Windows se termine de manière inattendue, le rassembleur n’aurait aucune connaissance des éléments nouveaux ou modifiés et n’indexerait pas ces éléments.</span><span class="sxs-lookup"><span data-stu-id="f5516-271">For example, if a notification provider fails to send notifications or if the Windows Search service is terminated unexpectedly, the gatherer would have no knowledge of new or changed items and would not index these items.</span></span> <span data-ttu-id="f5516-272">Il existe deux types de sources : notification uniquement et notification activée.</span><span class="sxs-lookup"><span data-stu-id="f5516-272">There are two kinds of sources: notification only and notification enabled.</span></span> <span data-ttu-id="f5516-273">Dans les deux sources, le rassembleur analyse initialement l’index.</span><span class="sxs-lookup"><span data-stu-id="f5516-273">In both sources, the gatherer initially crawls the index.</span></span> <span data-ttu-id="f5516-274">Après l’analyse initiale, les sources de notification uniquement ne réeffectuent jamais une analyse complète à moins qu’il y ait un échec, tel que le [Journal des modifications USN](/windows/desktop/FileIO/change-journals) .</span><span class="sxs-lookup"><span data-stu-id="f5516-274">After the initial crawl, the notification-only sources will never do a full crawl again unless there is a failure, such as the [USN Change Journal](/windows/desktop/FileIO/change-journals) rolling over.</span></span> <span data-ttu-id="f5516-275">Les sources activées pour les notifications effectuent une analyse incrémentielle lorsque l’indexeur est démarré, mais écoutent ensuite les notifications lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="f5516-275">Notification-enabled sources do an incremental crawl when the indexer is started, but then listen to notifications while running.</span></span> <span data-ttu-id="f5516-276">NTFS et Microsoft Outlook sont uniquement des notifications.</span><span class="sxs-lookup"><span data-stu-id="f5516-276">NTFS and Microsoft Outlook are notification only.</span></span> <span data-ttu-id="f5516-277">La notification est activée pour Internet Explorer et FAT.</span><span class="sxs-lookup"><span data-stu-id="f5516-277">Internet Explorer and FAT are notification enabled.</span></span>

## <a name="notes-to-implementers"></a><span data-ttu-id="f5516-278">Notes pour les responsables de l’implémentation</span><span class="sxs-lookup"><span data-stu-id="f5516-278">Notes to Implementers</span></span>

<span data-ttu-id="f5516-279">La qualité des données dans l’index et l’efficacité du processus d’indexation dépendent en grande partie de votre implémentation de filtre et de gestionnaire de propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-279">The quality of the data in the index and the efficiency of the indexing process depend largely on your filter and property handler implementation.</span></span> <span data-ttu-id="f5516-280">Étant donné que le filtre est appelé chaque fois qu’une URL identifie votre format de fichier, le processus d’indexation peut ralentir considérablement si votre filtre est inefficace.</span><span class="sxs-lookup"><span data-stu-id="f5516-280">Because the filter is called every time a URL identifies your file format, the indexing process can slow down dramatically if your filter is inefficient.</span></span> <span data-ttu-id="f5516-281">Si votre gestionnaire de propriétés ne mappe pas correctement toutes les propriétés du fichier aux propriétés système ou n’émet pas correctement ces propriétés, les données de l’index sont incorrectes et les recherches ultérieures de ces propriétés renverront des résultats incorrects.</span><span class="sxs-lookup"><span data-stu-id="f5516-281">If your property handler doesn't correctly map all file properties to system properties or doesn't correctly emit these properties, the data in the index will be incorrect and later searches for those properties will return incorrect results.</span></span> <span data-ttu-id="f5516-282">Si votre gestionnaire de filtres ou de propriétés échoue, l’indexeur ne peut pas indexer les données.</span><span class="sxs-lookup"><span data-stu-id="f5516-282">If your filter or property handler fails, the indexer won't be able to index data.</span></span>

<span data-ttu-id="f5516-283">Les applications et les processus autres que Windows Search s’appuient sur des gestionnaires de protocole, des filtres et des gestionnaires de propriétés.</span><span class="sxs-lookup"><span data-stu-id="f5516-283">Applications and processes other than Windows Search rely on protocol handlers, filters, and property handlers.</span></span> <span data-ttu-id="f5516-284">Vos implémentations peuvent affecter ces applications de façon inattendue.</span><span class="sxs-lookup"><span data-stu-id="f5516-284">Your implementations can affect those applications in ways you may not expect.</span></span> <span data-ttu-id="f5516-285">Le [Guide de développement de Windows Search](-search-developers-guide-entry-page.md) fournit des conseils sur les choix de conception et sur le test de chacun de ces composants.</span><span class="sxs-lookup"><span data-stu-id="f5516-285">The [Windows Search Development Guide](-search-developers-guide-entry-page.md) provides advice on design choices and on testing each of these components.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f5516-286">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f5516-286">Related topics</span></span>

[<span data-ttu-id="f5516-287">Indexation, interrogation et notifications dans Windows Search</span><span class="sxs-lookup"><span data-stu-id="f5516-287">Indexing, Querying and Notifications in Windows Search</span></span>](-search-3x-wds-included-in-index.md)

[<span data-ttu-id="f5516-288">Ce qui est inclus dans l’index</span><span class="sxs-lookup"><span data-stu-id="f5516-288">What is Included in the Index</span></span>](-search-indexing-process-overview.md)

[<span data-ttu-id="f5516-289">Interrogation du processus dans la recherche Windows</span><span class="sxs-lookup"><span data-stu-id="f5516-289">Querying Process in Windows Search</span></span>](querying-process--windows-search-.md)

[<span data-ttu-id="f5516-290">Processus de notification dans Windows Search</span><span class="sxs-lookup"><span data-stu-id="f5516-290">Notifications Process in Windows Search</span></span>](-search-3x-wds-support.md)

[<span data-ttu-id="f5516-291">Configuration requise pour la mise en forme des URL</span><span class="sxs-lookup"><span data-stu-id="f5516-291">URL Formatting Requirements</span></span>](url-formatting-requirements.md)
