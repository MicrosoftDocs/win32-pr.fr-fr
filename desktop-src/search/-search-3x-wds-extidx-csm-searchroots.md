---
description: Le gestionnaire de portée d’analyse (CSM) vous permet d’ajouter et de supprimer des racines de recherche pour vos magasins de données dans et dans la portée de l’analyse de Windows Search.
ms.assetid: 0f1ff41f-7c4c-4516-bb55-bf09a8f2f3bc
title: Gestion des racines de recherche
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cbdd63e5e71cd18d3028c6d08019890f90c0228a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104201305"
---
# <a name="managing-search-roots"></a><span data-ttu-id="eccab-103">Gestion des racines de recherche</span><span class="sxs-lookup"><span data-stu-id="eccab-103">Managing Search Roots</span></span>

<span data-ttu-id="eccab-104">Le gestionnaire de portée d’analyse (CSM) vous permet d’ajouter et de supprimer des racines de recherche pour vos magasins de données dans et dans la portée de l’analyse de Windows Search.</span><span class="sxs-lookup"><span data-stu-id="eccab-104">The Crawl Scope Manager (CSM) enables you to add and remove search roots for your data stores to and from the Windows Search crawl scope.</span></span>

<span data-ttu-id="eccab-105">Cette rubrique traite des sujets suivants :</span><span class="sxs-lookup"><span data-stu-id="eccab-105">This topic includes the following subjects:</span></span>

-   [<span data-ttu-id="eccab-106">À propos des racines de recherche</span><span class="sxs-lookup"><span data-stu-id="eccab-106">About Search Roots</span></span>](#about-search-roots)
-   [<span data-ttu-id="eccab-107">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="eccab-107">Before You Begin</span></span>](#before-you-begin)
-   [<span data-ttu-id="eccab-108">Windows 7 : nouvelle API du gestionnaire de l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-108">Windows 7: New Crawl Scope Manager API</span></span>](#windows-7-new-crawl-scope-manager-api)
-   [<span data-ttu-id="eccab-109">Ajout de racines à l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-109">Adding Roots to the Crawl Scope</span></span>](#adding-roots-to-the-crawl-scope)
-   [<span data-ttu-id="eccab-110">Suppression de racines de l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-110">Removing Roots from the Crawl Scope</span></span>](#removing-roots-from-the-crawl-scope)
-   [<span data-ttu-id="eccab-111">Énumération des racines dans l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-111">Enumerating Roots in the Crawl Scope</span></span>](#enumerating-roots-in-the-crawl-scope)
-   [<span data-ttu-id="eccab-112">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="eccab-112">Related topics</span></span>](#related-topics)

 

## <a name="about-search-roots"></a><span data-ttu-id="eccab-113">À propos des racines de recherche</span><span class="sxs-lookup"><span data-stu-id="eccab-113">About Search Roots</span></span>

<span data-ttu-id="eccab-114">Une racine de recherche définit la base d’un espace de noms Shell dans lequel des étendues spécifiques peuvent être incluses ou exclues, et est généralement le conteneur de niveau le plus élevé dans un protocole qui peut être énuméré.</span><span class="sxs-lookup"><span data-stu-id="eccab-114">A search root defines the base of a Shell namespace where specific scopes could be included or excluded, and is usually the highest level container in a protocol that can be enumerated.</span></span> <span data-ttu-id="eccab-115">Elle ne spécifie pas les parties de ce magasin qui doivent ou ne doivent pas être indexées ; Il signale simplement qu’un magasin de contenu existe et est associé à un gestionnaire de protocole inscrit.</span><span class="sxs-lookup"><span data-stu-id="eccab-115">It does not specify which parts of this store should or should not be indexed; it merely signals that a content store exists and is associated with a registered protocol handler.</span></span> <span data-ttu-id="eccab-116">La syntaxe permettant d’identifier une URL racine de recherche comprend le protocole, l’identificateur de sécurité de l’utilisateur ou du magasin, le chemin d’accès et éventuellement un élément spécifique (par exemple, un fichier).</span><span class="sxs-lookup"><span data-stu-id="eccab-116">The syntax for identifying a search root URL includes the protocol, the store or user's security identifier, the path, and optionally a specific item (like a file).</span></span> <span data-ttu-id="eccab-117">Les exemples suivants illustrent deux formes de syntaxe pour une racine de recherche.</span><span class="sxs-lookup"><span data-stu-id="eccab-117">The following examples show two forms of the syntax for a search root.</span></span>


```
<protocol>://<store or SID>\<path>\[item]
or
<protocol>://<store or SID>/<path>/[item]
```



<span data-ttu-id="eccab-118">Le <protocol> segment doit être suivi de deux (2) barres obliques (« / »), sauf s’il s’agit du fichier : Protocol, qui requiert trois barres obliques (file:///).</span><span class="sxs-lookup"><span data-stu-id="eccab-118">The <protocol> segment must be followed by two (2) forward slashes ('/') unless it is the file: protocol, which requires three slashes (file:///).</span></span> <span data-ttu-id="eccab-119">Le <site or SID> segment représente soit un magasin de contenu, soit un identificateur de sécurité de l’utilisateur si la racine de recherche est destinée à être spécifique à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eccab-119">The <site or SID> segment represents either a content store or a user security identifier if the search root is meant to be specific to the user.</span></span> <span data-ttu-id="eccab-120">Le <path> segment est un ensemble de conteneurs, comme des répertoires ou des dossiers, et peut inclure le caractère générique « \* ».</span><span class="sxs-lookup"><span data-stu-id="eccab-120">The <path> segment is a set of containers, like directories or folders, and can include the wildcard character '\*'.</span></span> <span data-ttu-id="eccab-121">Les</span><span class="sxs-lookup"><span data-stu-id="eccab-121">The</span></span> <item> <span data-ttu-id="eccab-122">le segment est facultatif et peut également inclure le caractère générique « \* ».</span><span class="sxs-lookup"><span data-stu-id="eccab-122">segment is optional and can also include the wildcard character '\*'.</span></span> <span data-ttu-id="eccab-123">Si vous n’incluez pas d’élément, veillez à terminer le segment de chemin d’accès par une barre oblique ou l’indexeur supposera que le dernier sous-conteneur est un élément.</span><span class="sxs-lookup"><span data-stu-id="eccab-123">If you do not include an item, be sure to finish your path segment with a slash or the indexer will assume that the last subcontainer is an item.</span></span>

<span data-ttu-id="eccab-124">Par exemple, supposons que vous avez implémenté un gestionnaire de protocole (myPH) pour gérer les fichiers de type \* . myext pour une application personnalisée.</span><span class="sxs-lookup"><span data-stu-id="eccab-124">For example, suppose you have implemented a protocol handler (myPH) to handle files of type \*.myext for a custom application.</span></span> <span data-ttu-id="eccab-125">Tous ces fichiers se trouvent dans le dossier WorkteamA \\ ProjectFiles sur un ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="eccab-125">All of these files will be located in the folder WorkteamA\\ProjectFiles on a local computer.</span></span> <span data-ttu-id="eccab-126">La racine de recherche de qui peut se présenter comme suit :</span><span class="sxs-lookup"><span data-stu-id="eccab-126">The search root for that might look like this:</span></span>

-   <span data-ttu-id="eccab-127">myPH:///C : \\ WorkteamA \\ ProjectFiles</span><span class="sxs-lookup"><span data-stu-id="eccab-127">myPH:///C:\\WorkteamA\\ProjectFiles</span></span>\\

<span data-ttu-id="eccab-128">Supposons que vous envisagez d’inclure tous les fichiers. myext, mais rien d’autre de ce conteneur dans l’index.</span><span class="sxs-lookup"><span data-stu-id="eccab-128">Suppose you are planning to include all .myext files but nothing else from that container in the index.</span></span> <span data-ttu-id="eccab-129">La racine de recherche de qui peut se présenter comme suit :</span><span class="sxs-lookup"><span data-stu-id="eccab-129">The search root for that might look like this:</span></span>

-   <span data-ttu-id="eccab-130">myPH:///C : \\ WorkteamA \\ ProjectFiles \\ \* . myext.</span><span class="sxs-lookup"><span data-stu-id="eccab-130">myPH:///C:\\WorkteamA\\ProjectFiles\\\*.myext.</span></span>

<span data-ttu-id="eccab-131">Les modèles de caractères génériques définissent des URL en utilisant le caractère générique « \* » et sont considérés comme un modèle plutôt qu’une URL, mais la terminologie est souvent utilisée de façon interchangeable.</span><span class="sxs-lookup"><span data-stu-id="eccab-131">Wildcard patterns define URLs by using the wildcard character '\*' and are considered a pattern rather than a URL, but the terminology is often used interchangeably.</span></span> <span data-ttu-id="eccab-132">Par exemple, file:///C : \\ \\ \* \\ les données ProjectA \\ correspondent aux URL suivantes :</span><span class="sxs-lookup"><span data-stu-id="eccab-132">For example, file:///C:\\ProjectA\\\*\\data\\ would match the following URLs:</span></span>

-   <span data-ttu-id="eccab-133">C : \\ ProjectA \\ **version1** \\ données</span><span class="sxs-lookup"><span data-stu-id="eccab-133">C:\\ProjectA\\**version1**\\data</span></span>\\
-   <span data-ttu-id="eccab-134">C : \\ ProjectA \\ **version2** \\ données</span><span class="sxs-lookup"><span data-stu-id="eccab-134">C:\\ProjectA\\**version2**\\data</span></span>\\

<span data-ttu-id="eccab-135">Mais ce modèle ne correspond pas à cette URL :</span><span class="sxs-lookup"><span data-stu-id="eccab-135">But that pattern would not match this URL:</span></span>

-   <span data-ttu-id="eccab-136">C : \\ ProjectA \\ **version1 \\**- \\ données temporaires</span><span class="sxs-lookup"><span data-stu-id="eccab-136">C:\\ProjectA\\**version1\\temp**\\data</span></span>\\

<span data-ttu-id="eccab-137">Vous devez créer de nouvelles racines de recherche pour les conteneurs qui ne se trouvent pas déjà dans l’étendue de l’analyse de l’indexeur.</span><span class="sxs-lookup"><span data-stu-id="eccab-137">You should create new search roots for containers that are not already in the crawl scope of the indexer.</span></span> <span data-ttu-id="eccab-138">Si le chemin d’accès C : \\ ParentScope est déjà inclus dans l’étendue de l’analyse, vous n’avez pas besoin d’ajouter une nouvelle racine de recherche pour C : \\ ParentScope \\ ChildScope, sauf si vous savez que l’étendue enfant a été précédemment exclue.</span><span class="sxs-lookup"><span data-stu-id="eccab-138">If path C:\\ParentScope is already included in the crawl scope, you do not need to add a new search root for C:\\ParentScope\\ChildScope unless you know that the child scope was previously excluded.</span></span>

<span data-ttu-id="eccab-139">L’interface utilisateur permettant de définir les options de recherche Windows affiche les racines de recherche aux utilisateurs afin qu’ils puissent affiner les règles d’étendue pour leurs recherches.</span><span class="sxs-lookup"><span data-stu-id="eccab-139">The user interface for setting Windows Search options displays search roots to users so they can refine the scope rules for their searches.</span></span> <span data-ttu-id="eccab-140">Dans le cadre du processus d’installation de votre gestionnaire de protocole personnalisé, de votre conteneur et/ou de votre application, vous pouvez définir une étendue d’analyse par défaut avec des règles d’inclusion et d’exclusion.</span><span class="sxs-lookup"><span data-stu-id="eccab-140">As part of the installation process for your custom protocol handler, container, and/or application, you might define a default crawl scope, with inclusion and exclusion rules.</span></span> <span data-ttu-id="eccab-141">Ces règles sont présentées aux utilisateurs finaux en tant qu’emplacements.</span><span class="sxs-lookup"><span data-stu-id="eccab-141">These rules are presented to end users as locations.</span></span> <span data-ttu-id="eccab-142">Les utilisateurs peuvent naviguer dans les sous-répertoires de votre racine de recherche prédéfinie et sélectionner ceux qu’ils souhaitent inclure dans les recherches ou effacer ceux qu’ils souhaitent exclure.</span><span class="sxs-lookup"><span data-stu-id="eccab-142">Users can navigate within the subdirectories of your predefined search root and select the ones they want to include in searches or clear the ones they want to exclude.</span></span>

 

## <a name="before-you-begin"></a><span data-ttu-id="eccab-143">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="eccab-143">Before You Begin</span></span>

<span data-ttu-id="eccab-144">Avant de pouvoir utiliser l’une des interfaces CSM (Analysis Scope Manager), vous devez effectuer les étapes préalables suivantes :</span><span class="sxs-lookup"><span data-stu-id="eccab-144">Before you can use any of the Crawl Scope Manager (CSM) interfaces, you must perform the following prerequisite steps:</span></span>

1.  <span data-ttu-id="eccab-145">Créez l’objet **CrawlSearchManager** et obtenez son interface [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) .</span><span class="sxs-lookup"><span data-stu-id="eccab-145">Create the **CrawlSearchManager** object and obtain its [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) interface.</span></span>
2.  <span data-ttu-id="eccab-146">Appelez [**ISearchManager :: getCatalog,**](/windows/desktop/api/Searchapi/nf-searchapi-isearchmanager-getcatalog) pour « SystemIndex » pour obtenir une instance d’une interface [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="eccab-146">Call [**ISearchManager::GetCatalog**](/windows/desktop/api/Searchapi/nf-searchapi-isearchmanager-getcatalog) for "SystemIndex" to obtain an instance of an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) interface.</span></span>
3.  <span data-ttu-id="eccab-147">Appelez [**ISearchCatalogManager :: GetCrawlScopeManager**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcatalogmanager-getcrawlscopemanager) pour obtenir une instance de l’interface [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) .</span><span class="sxs-lookup"><span data-stu-id="eccab-147">Call [**ISearchCatalogManager::GetCrawlScopeManager**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcatalogmanager-getcrawlscopemanager) to obtain an instance of [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface.</span></span>

<span data-ttu-id="eccab-148">Après avoir apporté des modifications au gestionnaire de l’étendue de l’analyse (CSM), vous devez appeler [**ISearchCrawlScopeManager ::**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall)saproduction.</span><span class="sxs-lookup"><span data-stu-id="eccab-148">After making any changes to the Crawl Scope Manager (CSM), you must call [**ISearchCrawlScopeManager::SaveAll**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall).</span></span> <span data-ttu-id="eccab-149">Cette méthode ne prend pas de paramètres et retourne S \_ OK en cas de réussite.</span><span class="sxs-lookup"><span data-stu-id="eccab-149">This method takes no parameters and returns S\_OK on success.</span></span>

 

## <a name="windows-7-new-crawl-scope-manager-api"></a><span data-ttu-id="eccab-150">Windows 7 : nouvelle API du gestionnaire de l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-150">Windows 7: New Crawl Scope Manager API</span></span>

<span data-ttu-id="eccab-151">Dans **Windows 7 et versions ultérieures**, [**ISearchCrawlScopeManager2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager2) étend les fonctionnalités de l’interface [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) .</span><span class="sxs-lookup"><span data-stu-id="eccab-151">In **Windows 7 and later**, [**ISearchCrawlScopeManager2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager2) extends the functionality of the [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface.</span></span> <span data-ttu-id="eccab-152">La méthode [**ISearchCrawlScopeManager2 :: GetVersion**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager2-getversion) obtient la version du gestionnaire de portée d’analyse (CSM), qui informe les clients si l’état du CSM a changé.</span><span class="sxs-lookup"><span data-stu-id="eccab-152">The [**ISearchCrawlScopeManager2::GetVersion**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager2-getversion) method gets the Crawl Scope Manager (CSM) version, which informs clients if the state of the CSM has changed.</span></span> <span data-ttu-id="eccab-153">**ISearchCrawlScopeManager2 :: GetVersion** n’entraîne pas d’appel interprocessus.</span><span class="sxs-lookup"><span data-stu-id="eccab-153">**ISearchCrawlScopeManager2::GetVersion** does not result in a cross-process call.</span></span> <span data-ttu-id="eccab-154">Si la fonction est réussie, le pointeur retourné reste valide jusqu’à ce que le client appelle **UnmapViewOfFile** sur le pointeur et **CloseHandle** sur le handle retourné.</span><span class="sxs-lookup"><span data-stu-id="eccab-154">If the function succeeds, then the pointer that is returned remains valid until the client calls **UnmapViewOfFile** on the pointer and **CloseHandle** on the returned handle.</span></span>

 

## <a name="adding-roots-to-the-crawl-scope"></a><span data-ttu-id="eccab-155">Ajout de racines à l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-155">Adding Roots to the Crawl Scope</span></span>

<span data-ttu-id="eccab-156">Le [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) indique au moteur de recherche les conteneurs à analyser et/ou à surveiller, ainsi que les éléments sous ces conteneurs à inclure ou exclure.</span><span class="sxs-lookup"><span data-stu-id="eccab-156">The [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) tells the search engine about containers to crawl and/or watch, and items under those containers to include or exclude.</span></span> <span data-ttu-id="eccab-157">Pour ajouter une nouvelle racine de recherche, instanciez un objet [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot) , définissez les attributs racine, puis appelez [**ISearchCrawlScopeManager :: AddRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-addroot) et transmettez-lui un pointeur vers votre objet **ISearchRoot** .</span><span class="sxs-lookup"><span data-stu-id="eccab-157">To add a new search root, instantiate an [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot) object, set the root attributes, and then call [**ISearchCrawlScopeManager::AddRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-addroot) and pass it a pointer to your **ISearchRoot** object.</span></span> <span data-ttu-id="eccab-158">L’URL racine de recherche prend la même forme que la racine de recherche décrite précédemment.</span><span class="sxs-lookup"><span data-stu-id="eccab-158">The search root URL takes the same form as the search root described earlier.</span></span>

<span data-ttu-id="eccab-159">Le tableau suivant décrit les méthodes put pertinentes pour [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot); les autres méthodes put de l’interface ne sont pas utilisées actuellement par Windows Search.</span><span class="sxs-lookup"><span data-stu-id="eccab-159">The following table describes the relevant put methods for [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot); the interface's other put methods are not used currently by Windows Search.</span></span> <span data-ttu-id="eccab-160">Pour une meilleure sécurité, nous vous recommandons d’inclure les identificateurs de sécurité (SID) des utilisateurs dans toutes les racines.</span><span class="sxs-lookup"><span data-stu-id="eccab-160">We recommend including the users' security identifiers (SIDs) in all roots for better security.</span></span> <span data-ttu-id="eccab-161">Les racines par utilisateur sont plus sécurisées, car les requêtes sont exécutées dans un processus par utilisateur, ce qui garantit qu’un utilisateur ne peut pas voir les éléments indexés à partir de la boîte de réception d’un autre utilisateur, par exemple.</span><span class="sxs-lookup"><span data-stu-id="eccab-161">Per-user roots are more secure as queries are run in a per-user process, ensuring that one user cannot see items indexed from another user's inbox, for example.</span></span>



| <span data-ttu-id="eccab-162">Méthode</span><span class="sxs-lookup"><span data-stu-id="eccab-162">Method</span></span>                     | <span data-ttu-id="eccab-163">Description</span><span class="sxs-lookup"><span data-stu-id="eccab-163">Description</span></span>                                                                                                                                                                                         |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="eccab-164">put \_ ProvidesNotifications</span><span class="sxs-lookup"><span data-stu-id="eccab-164">put\_ProvidesNotifications</span></span> | <span data-ttu-id="eccab-165">Affectez la valeur **true** si un gestionnaire de protocole ou une autre application informe le moteur de recherche des modifications apportées aux URL sous la racine de recherche.</span><span class="sxs-lookup"><span data-stu-id="eccab-165">Set to **TRUE** if a protocol handler or other application will notify the search engine about changes to the URLs under the search root.</span></span> <span data-ttu-id="eccab-166">La notification indique que les URL doivent être réindexées.</span><span class="sxs-lookup"><span data-stu-id="eccab-166">The notification indicates that the URLs need reindexing.</span></span> |
| <span data-ttu-id="eccab-167">put \_ RootURL</span><span class="sxs-lookup"><span data-stu-id="eccab-167">put\_RootURL</span></span>               | <span data-ttu-id="eccab-168">Définit l’URL racine de la recherche actuelle.</span><span class="sxs-lookup"><span data-stu-id="eccab-168">Sets the root URL of the current search.</span></span> <span data-ttu-id="eccab-169">L’URL prend le formulaire racine de recherche décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="eccab-169">The URL takes the search root form described earlier.</span></span>                                                                                                      |



 

 

<span data-ttu-id="eccab-170">Par défaut, l’indexeur n’analyse pas une étendue lorsque vous ajoutez une racine de recherche.</span><span class="sxs-lookup"><span data-stu-id="eccab-170">By default, the indexer does not crawl a scope when you add a search root.</span></span> <span data-ttu-id="eccab-171">Vous devez également ajouter une règle d’inclusion pour la racine.</span><span class="sxs-lookup"><span data-stu-id="eccab-171">You must also add an include rule for the root.</span></span> <span data-ttu-id="eccab-172">Si vous souhaitez ajouter une racine spécifique à l’utilisateur pour une application, cette application doit ajouter les racines appropriées pour les nouveaux utilisateurs au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="eccab-172">If you want to add a user-specific root for an application, that application should add the appropriate roots for new users when the application starts.</span></span>

<span data-ttu-id="eccab-173">Pour ajouter les racines appropriées pour les nouveaux utilisateurs :</span><span class="sxs-lookup"><span data-stu-id="eccab-173">To add the appropriate roots for new users:</span></span>

1.  <span data-ttu-id="eccab-174">Obtient le SID de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eccab-174">Get the user's SID.</span></span>
2.  <span data-ttu-id="eccab-175">Énumérer toutes les racines pour vérifier si elle existe pour ce SID.</span><span class="sxs-lookup"><span data-stu-id="eccab-175">Enumerate all roots to check whether one exists for this SID.</span></span>
3.  <span data-ttu-id="eccab-176">Ajoutez une nouvelle racine, en utilisant le SID, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="eccab-176">Add a new root, using the SID, if necessary.</span></span>

 

## <a name="removing-roots-from-the-crawl-scope"></a><span data-ttu-id="eccab-177">Suppression de racines de l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-177">Removing Roots from the Crawl Scope</span></span>

<span data-ttu-id="eccab-178">Vous pouvez utiliser [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) pour supprimer une racine de l’étendue de l’analyse lorsque vous ne voulez plus que cette URL soit indexée.</span><span class="sxs-lookup"><span data-stu-id="eccab-178">You can use [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) to remove a root from the crawl scope when you no longer want that URL indexed.</span></span> <span data-ttu-id="eccab-179">La suppression d’une racine entraîne également la suppression de toutes les règles d’étendue pour cette URL.</span><span class="sxs-lookup"><span data-stu-id="eccab-179">Removing a root also deletes all scope rules for that URL.</span></span> <span data-ttu-id="eccab-180">Par exemple, supposons que vous souhaitez désinstaller un magasin de contenu et/ou son gestionnaire de protocole d’un système.</span><span class="sxs-lookup"><span data-stu-id="eccab-180">For example, suppose you want to uninstall a content store and/or its protocol handler from a system.</span></span> <span data-ttu-id="eccab-181">Vous pouvez désinstaller l’application, supprimer toutes les données, puis supprimer la racine de recherche de l’étendue de l’analyse, et le gestionnaire de l’étendue de l’analyse supprime la racine et toutes les règles d’étendue associées à la racine.</span><span class="sxs-lookup"><span data-stu-id="eccab-181">You can uninstall the application, remove all data, and then remove the search root from the crawl scope, and the Crawl Scope Manager will remove the root and all scope rules associated with the root.</span></span>

<span data-ttu-id="eccab-182">Pour supprimer une racine de recherche existante, appelez [**ISearchCrawlScopeManager :: RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) avec la racine de recherche que vous souhaitez supprimer.</span><span class="sxs-lookup"><span data-stu-id="eccab-182">To remove an existing search root, call [**ISearchCrawlScopeManager::RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) with the search root you want to remove.</span></span> <span data-ttu-id="eccab-183">L’URL racine de recherche prend la même forme que la racine de recherche décrite précédemment.</span><span class="sxs-lookup"><span data-stu-id="eccab-183">The search root URL takes the same form as the search root described earlier.</span></span> <span data-ttu-id="eccab-184">Cette méthode retourne S \_ false si la racine est introuvable et un code d’erreur si une erreur s’est produite lors de la suppression d’une racine qui a été trouvée.</span><span class="sxs-lookup"><span data-stu-id="eccab-184">This method returns S\_FALSE if the root is not found and an error code if there was an error removing a root that was found.</span></span>

<span data-ttu-id="eccab-185">La suppression d’une racine de recherche supprime également l’URL de l’interface utilisateur pour les options de recherche Windows, afin que les utilisateurs ne soient pas en mesure de rajouter ce conteneur ou cet emplacement à l’aide de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eccab-185">Removing a search root also removes the URL from the user interface for Windows Search options, so users may not be able to re-add that container or location using the user interface.</span></span> <span data-ttu-id="eccab-186">Il est également possible de supprimer tous les remplacements définis par l’utilisateur d’une racine de recherche et de rétablir les règles de la racine et de l’étendue de la recherche d’origine.</span><span class="sxs-lookup"><span data-stu-id="eccab-186">It is also possible to remove all user-set overrides of a search root and revert to the original search root and scope rules.</span></span> <span data-ttu-id="eccab-187">Pour plus d’informations, consultez [gestion des règles d’étendue](-search-3x-wds-extidx-csm-scoperules.md).</span><span class="sxs-lookup"><span data-stu-id="eccab-187">For more information, see [Managing Scope Rules](-search-3x-wds-extidx-csm-scoperules.md).</span></span>

> [!Note]  
> <span data-ttu-id="eccab-188">Sur Windows Vista, si les utilisateurs sont supprimés par le biais de profils utilisateur dans le panneau de configuration, CSM supprime toutes les règles et toutes les racines avec leur SID et supprime leurs éléments indexés du catalogue.</span><span class="sxs-lookup"><span data-stu-id="eccab-188">On Windows Vista, if users are removed through User Profiles in Control Panel, CSM removes all rules and roots with their SID and removes their indexed items from the catalog.</span></span> <span data-ttu-id="eccab-189">Sur Windows XP, vous devez supprimer manuellement les racines et les règles des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="eccab-189">On Windows XP, you need to remove the users' roots and rules manually.</span></span>

 

 

## <a name="enumerating-roots-in-the-crawl-scope"></a><span data-ttu-id="eccab-190">Énumération des racines dans l’étendue de l’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-190">Enumerating Roots in the Crawl Scope</span></span>

<span data-ttu-id="eccab-191">CSM énumère les racines de recherche à l’aide d’une interface d’énumérateur de style COM standard, [**IEnumSearchRoots**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchroots).</span><span class="sxs-lookup"><span data-stu-id="eccab-191">The CSM enumerates search roots using a standard COM-style enumerator interface, [**IEnumSearchRoots**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchroots).</span></span> <span data-ttu-id="eccab-192">Vous pouvez utiliser cette interface pour énumérer les racines de recherche à plusieurs fins.</span><span class="sxs-lookup"><span data-stu-id="eccab-192">You can use this interface to enumerate search roots for a number of purposes.</span></span> <span data-ttu-id="eccab-193">Par exemple, vous pouvez afficher l’intégralité de l’étendue de l’analyse dans une interface utilisateur ou déterminer si une racine particulière ou l’enfant d’une racine se trouve déjà dans l’étendue de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="eccab-193">For example, you might want to display the entire crawl scope in a user interface, or discover whether a particular root or the child of a root is already in the crawl scope.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="eccab-194">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="eccab-194">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="eccab-195">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="eccab-195">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="eccab-196">**ISearchCrawlScopeManager**</span><span class="sxs-lookup"><span data-stu-id="eccab-196">**ISearchCrawlScopeManager**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager)
</dt> <dt>

[<span data-ttu-id="eccab-197">**ISearchRoot**</span><span class="sxs-lookup"><span data-stu-id="eccab-197">**ISearchRoot**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot)
</dt> <dt>

[<span data-ttu-id="eccab-198">**IEnumSearchRoots**</span><span class="sxs-lookup"><span data-stu-id="eccab-198">**IEnumSearchRoots**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchroots)
</dt> <dt>

<span data-ttu-id="eccab-199">**Méthodologique**</span><span class="sxs-lookup"><span data-stu-id="eccab-199">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="eccab-200">Utilisation du gestionnaire de portée d’analyse</span><span class="sxs-lookup"><span data-stu-id="eccab-200">Using the Crawl Scope Manager</span></span>](-search-3x-wds-extidx-csm.md)
</dt> <dt>

[<span data-ttu-id="eccab-201">Gestion des règles d’étendue</span><span class="sxs-lookup"><span data-stu-id="eccab-201">Managing Scope Rules</span></span>](-search-3x-wds-extidx-csm-scoperules.md)
</dt> </dl>

 

 



