---
description: AWE (Address Windowing Extensions) est un ensemble d’extensions qui permet à une application de manipuler rapidement la mémoire physique supérieure à 4 Go.
ms.assetid: 48a29922-8130-4540-86b0-0faa120566a6
title: Address Windowing Extensions
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8cb311bf9ecef2de334018ca3f9982a31f0b072
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103864866"
---
# <a name="address-windowing-extensions"></a><span data-ttu-id="5aadc-103">Address Windowing Extensions</span><span class="sxs-lookup"><span data-stu-id="5aadc-103">Address Windowing Extensions</span></span>

<span data-ttu-id="5aadc-104">AWE (Address Windowing Extensions) est un ensemble d’extensions qui permet à une application de manipuler rapidement la mémoire physique supérieure à 4 Go.</span><span class="sxs-lookup"><span data-stu-id="5aadc-104">Address Windowing Extensions (AWE) is a set of extensions that allows an application to quickly manipulate physical memory greater than 4GB.</span></span> <span data-ttu-id="5aadc-105">Certaines applications gourmandes en données, telles que les systèmes de gestion de base de données et les logiciels scientifiques et d’ingénierie, ont besoin d’accéder à des caches de données très volumineux.</span><span class="sxs-lookup"><span data-stu-id="5aadc-105">Certain data-intensive applications, such as database management systems and scientific and engineering software, need access to very large caches of data.</span></span> <span data-ttu-id="5aadc-106">Dans le cas de jeux de données très volumineux, la restriction du cache pour qu’il s’adapte aux 2 Go d’espace d’adressage utilisateur d’une application est une restriction grave.</span><span class="sxs-lookup"><span data-stu-id="5aadc-106">In the case of very large data sets, restricting the cache to fit within an application's 2GB of user address space is a severe restriction.</span></span> <span data-ttu-id="5aadc-107">Dans ce cas, le cache est trop petit pour prendre en charge correctement l’application.</span><span class="sxs-lookup"><span data-stu-id="5aadc-107">In these situations, the cache is too small to properly support the application.</span></span>

<span data-ttu-id="5aadc-108">AWE résout ce problème en permettant aux applications de traiter directement de grandes quantités de mémoire tout en continuant à utiliser des pointeurs 32 bits.</span><span class="sxs-lookup"><span data-stu-id="5aadc-108">AWE solves this problem by allowing applications to directly address huge amounts of memory while continuing to use 32-bit pointers.</span></span> <span data-ttu-id="5aadc-109">AWE permet aux applications d’avoir des caches de données supérieurs à 4 Go (lorsque la mémoire physique est suffisante).</span><span class="sxs-lookup"><span data-stu-id="5aadc-109">AWE allows applications to have data caches larger than 4GB (where sufficient physical memory is present).</span></span> <span data-ttu-id="5aadc-110">AWE utilise la mémoire physique non paginée et les vues de fenêtre de différentes parties de cette mémoire physique dans un espace d’adressage virtuel 32 bits.</span><span class="sxs-lookup"><span data-stu-id="5aadc-110">AWE uses physical nonpaged memory and window views of various portions of this physical memory within a 32-bit virtual address space.</span></span>

<span data-ttu-id="5aadc-111">AWE impose quelques restrictions sur la façon dont cette mémoire peut être utilisée, principalement parce que ces restrictions autorisent un mappage, un remappage et une libération extrêmement rapides.</span><span class="sxs-lookup"><span data-stu-id="5aadc-111">AWE places a few restrictions on how this memory may be used, primarily because these restrictions allow extremely fast mapping, remapping, and freeing.</span></span> <span data-ttu-id="5aadc-112">La gestion de mémoire rapide est importante pour ces espaces d’adressage potentiellement énormes.</span><span class="sxs-lookup"><span data-stu-id="5aadc-112">Fast memory management is important for these potentially enormous address spaces.</span></span>

-   <span data-ttu-id="5aadc-113">Les plages d’adresses virtuelles allouées pour AWE ne sont pas partageables avec d’autres processus (et ne peuvent donc pas être héritées).</span><span class="sxs-lookup"><span data-stu-id="5aadc-113">Virtual address ranges allocated for the AWE are not sharable with other processes (and therefore not inheritable).</span></span> <span data-ttu-id="5aadc-114">En fait, deux adresses virtuelles AWE différentes au sein du même processus ne sont pas autorisées à mapper la même page physique.</span><span class="sxs-lookup"><span data-stu-id="5aadc-114">In fact, two different AWE virtual addresses within the same process are not allowed to map the same physical page.</span></span> <span data-ttu-id="5aadc-115">Ces restrictions fournissent un remappage et un nettoyage rapides lorsque la mémoire est libérée.</span><span class="sxs-lookup"><span data-stu-id="5aadc-115">These restrictions provide fast remapping and cleanup when memory is freed.</span></span>
-   <span data-ttu-id="5aadc-116">Les pages physiques qui peuvent être allouées pour une région AWE sont limitées par le nombre de pages physiques présentes dans l’ordinateur, car cette mémoire n’est jamais paginée – elle est verrouillée jusqu’à ce que l’application la libère ou la ferme explicitement.</span><span class="sxs-lookup"><span data-stu-id="5aadc-116">The physical pages that can be allocated for an AWE region are limited by the number of physical pages present in the machine, since this memory is never paged – it is locked down until the application explicitly frees it or exits.</span></span> <span data-ttu-id="5aadc-117">Les pages physiques allouées pour un processus donné peuvent être mappées à n’importe quelle région virtuelle AWE au sein du même processus.</span><span class="sxs-lookup"><span data-stu-id="5aadc-117">The physical pages allocated for a given process can be mapped into any AWE virtual region within the same process.</span></span> <span data-ttu-id="5aadc-118">Les applications qui utilisent AWE doivent veiller à ne pas prendre trop de mémoire physique, car elles provoquent la pagination excessive d’autres applications ou empêchent la création de nouveaux processus ou threads en raison d’un manque de ressources.</span><span class="sxs-lookup"><span data-stu-id="5aadc-118">Applications that use AWE must be careful not to take so much physical memory that they cause other applications to page excessively or prevent creation of new processes or threads due to lack of resources.</span></span> <span data-ttu-id="5aadc-119">Utilisez la fonction [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) pour surveiller l’utilisation de la mémoire physique.</span><span class="sxs-lookup"><span data-stu-id="5aadc-119">Use the [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) function to monitor physical memory use.</span></span>
-   <span data-ttu-id="5aadc-120">Les adresses virtuelles AWE sont toujours en lecture/écriture et ne peuvent pas être protégées par le biais d’appels à [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) (autrement dit, aucune mémoire en lecture seule, mémoire NoAccess, pages de garde et like ne peut être spécifiée).</span><span class="sxs-lookup"><span data-stu-id="5aadc-120">AWE virtual addresses are always read/write and cannot be protected via calls to [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) (that is, no read-only memory, noaccess memory, guard pages, and the like can be specified).</span></span>
-   <span data-ttu-id="5aadc-121">Les plages d’adresses AWE ne peuvent pas être utilisées pour mettre en mémoire tampon des données pour des appels graphiques ou vidéo.</span><span class="sxs-lookup"><span data-stu-id="5aadc-121">AWE address ranges cannot be used to buffer data for graphics or video calls.</span></span>
-   <span data-ttu-id="5aadc-122">Une plage de mémoire AWE ne peut pas être fractionnée et elle ne peut pas être supprimée.</span><span class="sxs-lookup"><span data-stu-id="5aadc-122">An AWE memory range cannot be split, nor can pieces of it be deleted.</span></span> <span data-ttu-id="5aadc-123">Au lieu de cela, vous devez supprimer l’intégralité de la plage d’adresses virtuelles en tant qu’unité lorsque la suppression est requise.</span><span class="sxs-lookup"><span data-stu-id="5aadc-123">Instead, the entire virtual address range must be deleted as a unit when deletion is required.</span></span> <span data-ttu-id="5aadc-124">Cela signifie que vous devez spécifier la **\_ libération** de la mémoire lors de l’appel de [**VirtualFree**](/windows/win32/api/memoryapi/nf-memoryapi-virtualfree).</span><span class="sxs-lookup"><span data-stu-id="5aadc-124">This means you must specify **MEM\_RELEASE** when calling [**VirtualFree**](/windows/win32/api/memoryapi/nf-memoryapi-virtualfree).</span></span>
-   <span data-ttu-id="5aadc-125">Les applications peuvent mapper plusieurs régions simultanément, à condition qu’elles ne se chevauchent pas.</span><span class="sxs-lookup"><span data-stu-id="5aadc-125">Applications can map multiple regions simultaneously, provided they do not overlap.</span></span>
-   <span data-ttu-id="5aadc-126">Les applications qui utilisent AWE ne sont pas prises en charge en mode émulation.</span><span class="sxs-lookup"><span data-stu-id="5aadc-126">Applications that use AWE are not supported in emulation mode.</span></span> <span data-ttu-id="5aadc-127">Autrement dit, une application x86 qui utilise des fonctions AWE doit être recompilée pour s’exécuter sur un autre processeur, alors que la plupart des applications peuvent s’exécuter sans recompilation sous un émulateur sur d’autres plateformes.</span><span class="sxs-lookup"><span data-stu-id="5aadc-127">That is, an x86 application that uses AWE functions must be recompiled to run on another processor, whereas most applications can run without recompiling under an emulator on other platforms.</span></span>

<span data-ttu-id="5aadc-128">Cette solution résout les problèmes de mémoire physique de manière très générale et applicable.</span><span class="sxs-lookup"><span data-stu-id="5aadc-128">This solution addresses the physical memory issues in a very general, widely applicable manner.</span></span> <span data-ttu-id="5aadc-129">Voici quelques-uns des avantages des extensions AWE :</span><span class="sxs-lookup"><span data-stu-id="5aadc-129">Some of the benefits of AWE are:</span></span>

-   <span data-ttu-id="5aadc-130">Un petit groupe de nouvelles fonctions est défini pour manipuler la mémoire AWE.</span><span class="sxs-lookup"><span data-stu-id="5aadc-130">A small group of new functions is defined to manipulate AWE memory.</span></span>
-   <span data-ttu-id="5aadc-131">AWE offre une fonctionnalité de remappage très rapide.</span><span class="sxs-lookup"><span data-stu-id="5aadc-131">AWE provides a very fast remapping capability.</span></span> <span data-ttu-id="5aadc-132">Le remappage est effectué en manipulant les tables de mémoire virtuelle, et non en déplaçant les données dans la mémoire physique.</span><span class="sxs-lookup"><span data-stu-id="5aadc-132">Remapping is done by manipulating virtual memory tables, not by moving data in physical memory.</span></span>
-   <span data-ttu-id="5aadc-133">AWE offre une granularité de taille de page adaptée au processeur (par exemple, 4 Ko sur x86), ce qui est plus utile pour les applications que les grandes pages (par exemple, 2 Mo ou 4 Mo sur x86).</span><span class="sxs-lookup"><span data-stu-id="5aadc-133">AWE provides page size granularity appropriate to the processor (for example, 4 KB on x86), which is more useful to applications than large pages (for example, 2MB or 4MB on x86).</span></span>

<span data-ttu-id="5aadc-134">Une application doit disposer du privilège verrouiller les pages en mémoire pour utiliser AWE.</span><span class="sxs-lookup"><span data-stu-id="5aadc-134">An application must have the Lock Pages in Memory privilege to use AWE.</span></span> <span data-ttu-id="5aadc-135">Pour obtenir ce privilège, un administrateur doit ajouter **des pages de verrouillage en mémoire** aux **attributions des droits utilisateur** de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="5aadc-135">To obtain this privilege, an administrator must add **Lock Pages in Memory** to the user's **User Rights Assignments**.</span></span> <span data-ttu-id="5aadc-136">Pour plus d’informations sur la façon de procéder, consultez la rubrique « droits d’utilisateur » dans l’aide du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="5aadc-136">For more information on how to do this, see "User Rights" in the operating system help.</span></span>

<span data-ttu-id="5aadc-137">Les fonctions suivantes composent l’API AWE (Address Windowing Extensions).</span><span class="sxs-lookup"><span data-stu-id="5aadc-137">The following functions make up the Address Windowing Extensions (AWE) API.</span></span>



| <span data-ttu-id="5aadc-138">Fonction</span><span class="sxs-lookup"><span data-stu-id="5aadc-138">Function</span></span>                                                                          | <span data-ttu-id="5aadc-139">Description</span><span class="sxs-lookup"><span data-stu-id="5aadc-139">Description</span></span>                                                                                                                                                                                                                                               |
|-----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5aadc-140">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) et [ **VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)</span><span class="sxs-lookup"><span data-stu-id="5aadc-140">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) and [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)</span></span> | <span data-ttu-id="5aadc-141">Réserver une partie de l’espace d’adressage virtuel à utiliser pour AWE, en utilisant le **MEM \_ physique**.</span><span class="sxs-lookup"><span data-stu-id="5aadc-141">Reserve a portion of virtual address space to use for AWE, using **MEM\_PHYSICAL**.</span></span>                                                                                                                                                                       |
| [<span data-ttu-id="5aadc-142">**AllocateUserPhysicalPages**</span><span class="sxs-lookup"><span data-stu-id="5aadc-142">**AllocateUserPhysicalPages**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages)                    | <span data-ttu-id="5aadc-143">Allouez de la mémoire physique pour une utilisation avec AWE.</span><span class="sxs-lookup"><span data-stu-id="5aadc-143">Allocate physical memory for use with AWE.</span></span>                                                                                                                                                                                                                |
| [<span data-ttu-id="5aadc-144">**MapUserPhysicalPages**</span><span class="sxs-lookup"><span data-stu-id="5aadc-144">**MapUserPhysicalPages**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-mapuserphysicalpages)                              | <span data-ttu-id="5aadc-145">Mapper (ou invalider) des adresses virtuelles AWE sur un ensemble de pages physiques obtenues avec [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages).</span><span class="sxs-lookup"><span data-stu-id="5aadc-145">Map (or invalidate) AWE virtual addresses onto any set of physical pages obtained with [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages).</span></span>                                                                                                    |
| [<span data-ttu-id="5aadc-146">**MapUserPhysicalPagesScatter**</span><span class="sxs-lookup"><span data-stu-id="5aadc-146">**MapUserPhysicalPagesScatter**</span></span>](/windows/desktop/api/WinBase/nf-winbase-mapuserphysicalpagesscatter)                | <span data-ttu-id="5aadc-147">Mapper (ou invalider) des adresses virtuelles AWE sur tout ensemble de pages physiques obtenues avec [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages), mais avec un contrôle plus précis que celui fourni par [**MapUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-mapuserphysicalpages).</span><span class="sxs-lookup"><span data-stu-id="5aadc-147">Map (or invalidate) AWE virtual addresses onto any set of physical pages obtained with [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages), but with finer control than that provided by [**MapUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-mapuserphysicalpages).</span></span> |
| [<span data-ttu-id="5aadc-148">**FreeUserPhysicalPages**</span><span class="sxs-lookup"><span data-stu-id="5aadc-148">**FreeUserPhysicalPages**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-freeuserphysicalpages)                            | <span data-ttu-id="5aadc-149">Mémoire physique libre utilisée pour AWE.</span><span class="sxs-lookup"><span data-stu-id="5aadc-149">Free physical memory that was used for AWE.</span></span>                                                                                                                                                                                                               |



 

 

 
