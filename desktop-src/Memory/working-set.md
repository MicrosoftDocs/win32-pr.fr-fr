---
description: La plage de travail d’un processus correspond à l’ensemble de pages dans l’espace d’adressage virtuel du processus qui résident actuellement dans la mémoire physique.
ms.assetid: ff05276a-1d40-4844-b649-10e32e3f1937
title: Plage de travail
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4985e7eb526d5dda8469ccc2f46bfe6fd050c745
ms.sourcegitcommit: b01ad017c152c6756f3638623fe335877644d414
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/06/2021
ms.locfileid: "111549891"
---
# <a name="working-set"></a><span data-ttu-id="df97d-103">Plage de travail</span><span class="sxs-lookup"><span data-stu-id="df97d-103">Working Set</span></span>

<span data-ttu-id="df97d-104">La plage de travail d’un processus correspond à l’ensemble de pages dans l’espace d’adressage virtuel du processus qui résident actuellement dans la mémoire physique.</span><span class="sxs-lookup"><span data-stu-id="df97d-104">The working set of a process is the set of pages in the virtual address space of the process that are currently resident in physical memory.</span></span> <span data-ttu-id="df97d-105">La plage de travail contient uniquement des allocations de mémoire paginables ; les allocations de mémoire non paginables telles que AWE ( [Address Windowing Extensions](address-windowing-extensions.md) ) ou les [allocations de pages de grande taille](large-page-support.md) ne sont pas incluses dans la plage de travail.</span><span class="sxs-lookup"><span data-stu-id="df97d-105">The working set contains only pageable memory allocations; nonpageable memory allocations such as [Address Windowing Extensions](address-windowing-extensions.md) (AWE) or [large page allocations](large-page-support.md) are not included in the working set.</span></span>

<span data-ttu-id="df97d-106">Lorsqu’un processus fait référence à une mémoire paginable qui ne se trouve pas actuellement dans sa plage de travail, une *erreur de page* se produit.</span><span class="sxs-lookup"><span data-stu-id="df97d-106">When a process references pageable memory that is not currently in its working set, a *page fault* occurs.</span></span> <span data-ttu-id="df97d-107">Le gestionnaire d’erreurs de page système tente de résoudre l’erreur de page et, si elle est réussie, la page est ajoutée à la plage de travail.</span><span class="sxs-lookup"><span data-stu-id="df97d-107">The system page fault handler attempts to resolve the page fault and, if it succeeds, the page is added to the working set.</span></span> <span data-ttu-id="df97d-108">(L’accès à AWE ou aux allocations de pages volumineuses ne provoque jamais d’erreur de page, car ces allocations ne sont pas paginables.)</span><span class="sxs-lookup"><span data-stu-id="df97d-108">(Accessing AWE or large page allocations never causes a page fault, because these allocations are not pageable .)</span></span>

<span data-ttu-id="df97d-109">Une *erreur de page matérielle* doit être résolue en lisant le contenu de la page à partir du *magasin* de stockage de la page, qui est le fichier de pagination système ou un fichier mappé en mémoire créé par le processus.</span><span class="sxs-lookup"><span data-stu-id="df97d-109">A *hard page fault* must be resolved by reading page contents from the page's *backing store*, which is either the system paging file or a memory-mapped file created by the process.</span></span> <span data-ttu-id="df97d-110">Un *défaut de page conditionnelle* peut être résolu sans accéder au magasin de stockage.</span><span class="sxs-lookup"><span data-stu-id="df97d-110">A *soft page fault* can be resolved without accessing the backing store.</span></span> <span data-ttu-id="df97d-111">Une erreur de page conditionnelle se produit dans les cas suivants :</span><span class="sxs-lookup"><span data-stu-id="df97d-111">A soft page fault occurs when:</span></span>

-   <span data-ttu-id="df97d-112">La page se trouve dans la plage de travail d’un autre processus. elle est donc déjà résidente en mémoire.</span><span class="sxs-lookup"><span data-stu-id="df97d-112">The page is in the working set of some other process, so it is already resident in memory.</span></span>
-   <span data-ttu-id="df97d-113">La page est en cours de transition, car elle a été supprimée des jeux de travail de tous les processus qui utilisaient la page et n’a pas encore été réaffectée, ou elle est déjà en train de se produire en raison d’une opération de prérécupération du gestionnaire de mémoire.</span><span class="sxs-lookup"><span data-stu-id="df97d-113">The page is in transition, because it either has been removed from the working sets of all processes that were using the page and has not yet been repurposed, or it is already resident as a result of a memory manager prefetch operation.</span></span>
-   <span data-ttu-id="df97d-114">Un processus fait référence à une page virtuelle allouée pour la première fois (parfois appelée une *erreur de demande nulle*).</span><span class="sxs-lookup"><span data-stu-id="df97d-114">A process references an allocated virtual page for the first time (sometimes called a *demand-zero fault*).</span></span>

<span data-ttu-id="df97d-115">Les pages peuvent être supprimées d’une plage de travail de processus suite aux actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="df97d-115">Pages can be removed from a process working set as a result of the following actions:</span></span>

-   <span data-ttu-id="df97d-116">Le processus réduit ou vide la plage de travail en appelant la fonction [**SetProcessWorkingSetSize**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsize), [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) ou [**EmptyWorkingSet**](/windows/win32/api/psapi/nf-psapi-emptyworkingset) .</span><span class="sxs-lookup"><span data-stu-id="df97d-116">The process reduces or empties the working set by calling the [**SetProcessWorkingSetSize**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsize), [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) or [**EmptyWorkingSet**](/windows/win32/api/psapi/nf-psapi-emptyworkingset) function.</span></span>
-   <span data-ttu-id="df97d-117">Le processus appelle la fonction [**VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) sur une plage mémoire qui n’est pas verrouillée.</span><span class="sxs-lookup"><span data-stu-id="df97d-117">The process calls the [**VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) function on a memory range that is not locked.</span></span>
-   <span data-ttu-id="df97d-118">Le processus annule le mappage d’une vue mappée d’un fichier à l’aide de la fonction [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) .</span><span class="sxs-lookup"><span data-stu-id="df97d-118">The process unmaps a mapped view of a file using the [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) function.</span></span>
-   <span data-ttu-id="df97d-119">Le gestionnaire de mémoire supprime les pages de la plage de travail pour créer plus de mémoire disponible.</span><span class="sxs-lookup"><span data-stu-id="df97d-119">The memory manager trims pages from the working set to create more available memory.</span></span>
-   <span data-ttu-id="df97d-120">Le gestionnaire de mémoire doit supprimer une page de la plage de travail pour faire de la place pour une nouvelle page (par exemple, parce que la plage de travail est à sa taille maximale).</span><span class="sxs-lookup"><span data-stu-id="df97d-120">The memory manager must remove a page from the working set to make room for a new page (for example, because the working set is at its maximum size).</span></span>

<span data-ttu-id="df97d-121">Si plusieurs processus partagent une page, la suppression de la page de la plage de travail d’un processus n’affecte pas les autres processus.</span><span class="sxs-lookup"><span data-stu-id="df97d-121">If several processes share a page, removing the page from the working set of one process does not affect other processes.</span></span> <span data-ttu-id="df97d-122">Une fois qu’une page est supprimée des jeux de travail de tous les processus qui l’utilisaient, la page devient une *page de transition*.</span><span class="sxs-lookup"><span data-stu-id="df97d-122">After a page is removed from the working sets of all processes that were using it, the page becomes a *transition page*.</span></span> <span data-ttu-id="df97d-123">Les pages de transition restent mises en cache dans la mémoire RAM jusqu’à ce que la page soit à nouveau référencée par un processus ou réaffectée (par exemple, remplie de zéros et donnée à un autre processus).</span><span class="sxs-lookup"><span data-stu-id="df97d-123">Transition pages remain cached in RAM until the page is either referenced again by some process or repurposed (for example, filled with zeros and given to another process).</span></span> <span data-ttu-id="df97d-124">Si une page de transition a été modifiée depuis sa dernière écriture sur le disque (autrement dit, si la page est « modifiée »), la page doit être écrite dans le magasin de stockage avant de pouvoir être réaffectée.</span><span class="sxs-lookup"><span data-stu-id="df97d-124">If a transition page has been modified since it was last written to disk (that is, if the page is "dirty"), then the page must be written to its backing store before it can be repurposed.</span></span> <span data-ttu-id="df97d-125">Le système peut commencer à écrire des pages de transition erronées dans le magasin de stockage dès que ces pages sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="df97d-125">The system may start writing dirty transition pages to their backing store as soon as such pages become available.</span></span>

<span data-ttu-id="df97d-126">Chaque processus a une taille de jeu de travail minimale et maximale qui affecte le comportement de pagination de la mémoire virtuelle du processus.</span><span class="sxs-lookup"><span data-stu-id="df97d-126">Each process has a minimum and maximum working set size that affect the virtual memory paging behavior of the process.</span></span> <span data-ttu-id="df97d-127">Pour obtenir la taille actuelle de la plage de travail d’un processus spécifié, utilisez la fonction [**GetProcessMemoryInfo**](/windows/win32/api/psapi/nf-psapi-getprocessmemoryinfo) .</span><span class="sxs-lookup"><span data-stu-id="df97d-127">To obtain the current size of the working set of a specified process, use the [**GetProcessMemoryInfo**](/windows/win32/api/psapi/nf-psapi-getprocessmemoryinfo) function.</span></span> <span data-ttu-id="df97d-128">Pour obtenir ou modifier les tailles de plage de travail minimale et maximale, utilisez les fonctions [**GetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-getprocessworkingsetsizeex) et [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) .</span><span class="sxs-lookup"><span data-stu-id="df97d-128">To obtain or change the minimum and maximum working set sizes, use the [**GetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-getprocessworkingsetsizeex) and [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) functions.</span></span>

<span data-ttu-id="df97d-129">L’interface de programmation d’applications (PSAPI) process Status fournit un certain nombre de fonctions qui retournent des informations détaillées sur la plage de travail d’un processus.</span><span class="sxs-lookup"><span data-stu-id="df97d-129">The process status application programming interface (PSAPI) provides a number of functions that return detailed information about the working set of a process.</span></span> <span data-ttu-id="df97d-130">Pour plus d’informations, consultez [Working Set information](../psapi/working-set-information.md).</span><span class="sxs-lookup"><span data-stu-id="df97d-130">For details, see [Working Set Information](../psapi/working-set-information.md).</span></span>

 

 
