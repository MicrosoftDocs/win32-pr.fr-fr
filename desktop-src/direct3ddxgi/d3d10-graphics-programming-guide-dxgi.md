---
description: Cette rubrique contient les sections suivantes.
ms.assetid: 0522ccbf-e754-470a-8199-004fcbaa927d
title: Présentation de DXGI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 324a5be26aade17385a6ab0b7d347015497a2a3f
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104481088"
---
# <a name="dxgi-overview"></a><span data-ttu-id="01f1b-103">Présentation de DXGI</span><span class="sxs-lookup"><span data-stu-id="01f1b-103">DXGI overview</span></span>

<span data-ttu-id="01f1b-104">Microsoft DirectX Graphics infrastructure (DXGI) reconnaît que certaines parties des graphiques évoluent plus lentement que d’autres.</span><span class="sxs-lookup"><span data-stu-id="01f1b-104">Microsoft DirectX Graphics Infrastructure (DXGI) recognizes that some parts of graphics evolve more slowly than others.</span></span> <span data-ttu-id="01f1b-105">L’objectif principal de DXGI est de gérer les tâches de bas niveau qui peuvent être indépendantes du runtime Graphics DirectX.</span><span class="sxs-lookup"><span data-stu-id="01f1b-105">The primary goal of DXGI is to manage low-level tasks that can be independent of the DirectX graphics runtime.</span></span> <span data-ttu-id="01f1b-106">DXGI fournit une infrastructure commune pour les futurs composants graphiques. le premier composant qui tire parti de DXGI est Microsoft Direct3D 10.</span><span class="sxs-lookup"><span data-stu-id="01f1b-106">DXGI provides a common framework for future graphics components; the first component that takes advantage of DXGI is Microsoft Direct3D 10.</span></span>

<span data-ttu-id="01f1b-107">Dans les versions précédentes de Direct3D, les tâches de bas niveau telles que l’énumération des périphériques matériels, la présentation des frames rendus à une sortie, le contrôle de la valeur gamma et la gestion d’une transition en plein écran étaient incluses dans le runtime Direct3D.</span><span class="sxs-lookup"><span data-stu-id="01f1b-107">In previous versions of Direct3D, low-level tasks like enumeration of hardware devices, presenting rendered frames to an output, controlling gamma, and managing a full-screen transition were included in the Direct3D runtime.</span></span> <span data-ttu-id="01f1b-108">Ces tâches sont maintenant implémentées dans DXGI.</span><span class="sxs-lookup"><span data-stu-id="01f1b-108">These tasks are now implemented in DXGI.</span></span>

<span data-ttu-id="01f1b-109">L’objectif de DXGI est de communiquer avec le pilote en mode noyau et le matériel système, comme indiqué dans le diagramme suivant.</span><span class="sxs-lookup"><span data-stu-id="01f1b-109">DXGI's purpose is to communicate with the kernel mode driver and the system hardware, as shown in the following diagram.</span></span>

![diagramme de la communication entre les applications, DXGI, et les pilotes et le matériel](images/dxgi-dll.png)

<span data-ttu-id="01f1b-111">Une application peut accéder directement à DXGI, ou appeler les API Direct3D dans D3D11 \_ 1. h, d3d11. h, D3D10 \_ 1. h ou d3d10. h, qui gère les communications avec DXGI pour vous.</span><span class="sxs-lookup"><span data-stu-id="01f1b-111">An application can access DXGI directly, or call the Direct3D APIs in D3D11\_1.h, D3D11.h, D3D10\_1.h, or D3D10.h, which handles the communications with DXGI for you.</span></span> <span data-ttu-id="01f1b-112">Vous pouvez utiliser DXGI directement si votre application doit énumérer des appareils ou contrôler la façon dont les données sont présentées à une sortie.</span><span class="sxs-lookup"><span data-stu-id="01f1b-112">You may want to work with DXGI directly if your application needs to enumerate devices or control how data is presented to an output.</span></span>

<span data-ttu-id="01f1b-113">Cette rubrique contient les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="01f1b-113">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="01f1b-114">Énumération des adaptateurs</span><span class="sxs-lookup"><span data-stu-id="01f1b-114">Enumerating Adapters</span></span>](#enumerating-adapters)
    -   [<span data-ttu-id="01f1b-115">Nouvelles informations sur l’énumération des adaptateurs pour Windows 8</span><span class="sxs-lookup"><span data-stu-id="01f1b-115">New info about enumerating adapters for Windows 8</span></span>](#new-info-about-enumerating-adapters-for-windows-8)
-   [<span data-ttu-id="01f1b-116">Présentation</span><span class="sxs-lookup"><span data-stu-id="01f1b-116">Presentation</span></span>](#presentation)
    -   [<span data-ttu-id="01f1b-117">Créer une chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-117">Create a Swap Chain</span></span>](#create-a-swap-chain)
    -   [<span data-ttu-id="01f1b-118">Soins et alimentation de la chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-118">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
    -   [<span data-ttu-id="01f1b-119">Gérer le redimensionnement de fenêtre</span><span class="sxs-lookup"><span data-stu-id="01f1b-119">Handling Window Resizing</span></span>](#handling-window-resizing)
    -   [<span data-ttu-id="01f1b-120">Choix de la sortie et de la taille DXGI</span><span class="sxs-lookup"><span data-stu-id="01f1b-120">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
    -   [<span data-ttu-id="01f1b-121">Débogage en mode Full-Screen</span><span class="sxs-lookup"><span data-stu-id="01f1b-121">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
    -   [<span data-ttu-id="01f1b-122">Destruction d’une chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-122">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
    -   [<span data-ttu-id="01f1b-123">Utilisation d’une analyse pivotée</span><span class="sxs-lookup"><span data-stu-id="01f1b-123">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
    -   [<span data-ttu-id="01f1b-124">Modes de basculement</span><span class="sxs-lookup"><span data-stu-id="01f1b-124">Switching Modes</span></span>](#switching-modes)
    -   [<span data-ttu-id="01f1b-125">Conseil sur les performances plein écran</span><span class="sxs-lookup"><span data-stu-id="01f1b-125">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
    -   [<span data-ttu-id="01f1b-126">Considérations multithread</span><span class="sxs-lookup"><span data-stu-id="01f1b-126">Multithread Considerations</span></span>](#multithread-considerations)
-   [<span data-ttu-id="01f1b-127">DXGI les réponses de DLLMain</span><span class="sxs-lookup"><span data-stu-id="01f1b-127">DXGI Responses from DLLMain</span></span>](#dxgi-responses-from-dllmain)
-   [<span data-ttu-id="01f1b-128">Modifications apportées à DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="01f1b-128">DXGI 1.1 Changes</span></span>](#dxgi-11-changes)
-   [<span data-ttu-id="01f1b-129">Modifications apportées à DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="01f1b-129">DXGI 1.2 Changes</span></span>](#dxgi-12-changes)
-   [<span data-ttu-id="01f1b-130">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="01f1b-130">Related topics</span></span>](#related-topics)

<span data-ttu-id="01f1b-131">Pour connaître les formats pris en charge par le matériel Direct3D 11 :</span><span class="sxs-lookup"><span data-stu-id="01f1b-131">To see which formats are supported by Direct3D 11 hardware:</span></span>

-   [<span data-ttu-id="01f1b-132">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 12,1</span><span class="sxs-lookup"><span data-stu-id="01f1b-132">DXGI Format Support for Direct3D Feature Level 12.1 Hardware</span></span>](hardware-support-for-direct3d-12-1-formats.md)
-   [<span data-ttu-id="01f1b-133">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 12,0</span><span class="sxs-lookup"><span data-stu-id="01f1b-133">DXGI Format Support for Direct3D Feature Level 12.0 Hardware</span></span>](hardware-support-for-direct3d-12-0-formats.md)
-   [<span data-ttu-id="01f1b-134">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="01f1b-134">DXGI Format Support for Direct3D Feature Level 11.1 Hardware</span></span>](format-support-for-direct3d-11-1-feature-level-hardware.md)
-   [<span data-ttu-id="01f1b-135">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 11,0</span><span class="sxs-lookup"><span data-stu-id="01f1b-135">DXGI Format Support for Direct3D Feature Level 11.0 Hardware</span></span>](format-support-for-direct3d-11-0-feature-level-hardware.md)
-   <span data-ttu-id="01f1b-136">[Prise en charge matérielle pour les formats Direct3D 10Level9](/previous-versions//ff471324(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="01f1b-136">[Hardware Support for Direct3D 10Level9 Formats](/previous-versions//ff471324(v=vs.85))</span></span>
-   <span data-ttu-id="01f1b-137">[Prise en charge du matériel pour les formats Direct3D 10,1](/previous-versions//cc627091(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="01f1b-137">[Hardware Support for Direct3D 10.1 Formats](/previous-versions//cc627091(v=vs.85))</span></span>
-   <span data-ttu-id="01f1b-138">[Prise en charge matérielle pour les formats Direct3D 10](/previous-versions//cc627090(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="01f1b-138">[Hardware Support for Direct3D 10 Formats](/previous-versions//cc627090(v=vs.85))</span></span>

## <a name="enumerating-adapters"></a><span data-ttu-id="01f1b-139">Énumération des adaptateurs</span><span class="sxs-lookup"><span data-stu-id="01f1b-139">Enumerating adapters</span></span>

<span data-ttu-id="01f1b-140">Un adaptateur est une abstraction du matériel et des fonctionnalités logicielles de votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="01f1b-140">An adapter is an abstraction of the hardware and the software capability of your computer.</span></span> <span data-ttu-id="01f1b-141">Il y a généralement de nombreux adaptateurs sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="01f1b-141">There are generally many adapters on your machine.</span></span> <span data-ttu-id="01f1b-142">Certains périphériques sont implémentés dans le matériel (comme votre carte vidéo) et d’autres sont implémentés dans le logiciel (comme le rastériseur de référence Direct3D).</span><span class="sxs-lookup"><span data-stu-id="01f1b-142">Some devices are implemented in hardware (like your video card) and some are implemented in software (like the Direct3D reference rasterizer).</span></span> <span data-ttu-id="01f1b-143">Les adaptateurs implémentent les fonctionnalités utilisées par une application graphique.</span><span class="sxs-lookup"><span data-stu-id="01f1b-143">Adapters implement functionality used by a graphic application.</span></span> <span data-ttu-id="01f1b-144">Le diagramme suivant illustre un système avec un seul ordinateur, deux cartes (cartes vidéo) et trois moniteurs de sortie.</span><span class="sxs-lookup"><span data-stu-id="01f1b-144">The following diagram shows a system with a single computer, two adapters (video cards), and three output monitors.</span></span>

![diagramme d’un ordinateur avec deux cartes vidéo et trois moniteurs](images/dxgi-terms.png)

<span data-ttu-id="01f1b-146">Lors de l’énumération de ces éléments matériels, DXGI crée une interface [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) pour chaque sortie (ou analyse) et une interface [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) pour chaque carte vidéo (même s’il s’agit d’une carte vidéo intégrée à une carte mère).</span><span class="sxs-lookup"><span data-stu-id="01f1b-146">When enumerating these pieces of hardware, DXGI creates an [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) interface for each output (or monitor) and an [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) interface for each video card (even if it is a video card built into a motherboard).</span></span> <span data-ttu-id="01f1b-147">L’énumération est effectuée à l’aide d’un appel d’interface [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) , [**IDXGIFactory :: EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), pour retourner un jeu d’interfaces [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) qui représentent le matériel vidéo.</span><span class="sxs-lookup"><span data-stu-id="01f1b-147">Enumeration is done by using an [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) interface call, [**IDXGIFactory::EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), to return a set of [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) interfaces that represent the video hardware.</span></span>

<span data-ttu-id="01f1b-148">DXGI 1,1 a ajouté l’interface [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) .</span><span class="sxs-lookup"><span data-stu-id="01f1b-148">DXGI 1.1 added the [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) interface.</span></span> <span data-ttu-id="01f1b-149">[**IDXGIFactory1 :: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) retourne un jeu d’interfaces [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) qui représente le matériel vidéo.</span><span class="sxs-lookup"><span data-stu-id="01f1b-149">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) returns a set of [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) interfaces that represents the video hardware.</span></span>

<span data-ttu-id="01f1b-150">Si vous souhaitez sélectionner des fonctionnalités matérielles vidéo spécifiques quand vous utilisez des API Direct3D, nous vous recommandons d’appeler de manière itérative la fonction [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) ou [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) avec chaque descripteur d’adaptateur et [niveau de fonctionnalité](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md)matérielle possible.</span><span class="sxs-lookup"><span data-stu-id="01f1b-150">If you want to select specific video hardware capabilities when you use Direct3D APIs, we recommend that you iteratively call the [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) or [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) function with each adapter handle and possible hardware [feature level](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md).</span></span> <span data-ttu-id="01f1b-151">Cette fonction s’exécute correctement si le niveau de fonctionnalité est pris en charge par l’adaptateur spécifié.</span><span class="sxs-lookup"><span data-stu-id="01f1b-151">This function succeeds if the feature level is supported by the specified adapter.</span></span>

### <a name="new-info-about-enumerating-adapters-for-windows-8"></a><span data-ttu-id="01f1b-152">Nouvelles informations sur l’énumération des adaptateurs pour Windows 8</span><span class="sxs-lookup"><span data-stu-id="01f1b-152">New info about enumerating adapters for Windows 8</span></span>

<span data-ttu-id="01f1b-153">À compter de Windows 8, un adaptateur appelé « pilote de rendu de base Microsoft » est toujours présent.</span><span class="sxs-lookup"><span data-stu-id="01f1b-153">Starting with Windows 8, an adapter called the "Microsoft Basic Render Driver" is always present.</span></span> <span data-ttu-id="01f1b-154">Cet adaptateur a un ID de **0x1414** et un DeviceID de **0x8C**.</span><span class="sxs-lookup"><span data-stu-id="01f1b-154">This adapter has a VendorId of **0x1414** and a DeviceID of **0x8c**.</span></span> <span data-ttu-id="01f1b-155">La valeur [**\_ \_ \_ logicielle**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) de l’indicateur de l’adaptateur DXGI est également définie dans le membre **Flags** de sa structure DESC2 de l' [**\_ adaptateur \_ dxgi**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) .</span><span class="sxs-lookup"><span data-stu-id="01f1b-155">This adapter also has the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set in the **Flags** member of its [**DXGI\_ADAPTER\_DESC2**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) structure.</span></span> <span data-ttu-id="01f1b-156">Cet adaptateur est un appareil de rendu uniquement qui n’a pas de sortie d’affichage.</span><span class="sxs-lookup"><span data-stu-id="01f1b-156">This adapter is a render-only device that has no display outputs.</span></span> <span data-ttu-id="01f1b-157">DXGI ne retourne jamais l' [**\_ appareil d’erreur dxgi \_ \_ supprimé**](dxgi-error.md) pour cet adaptateur.</span><span class="sxs-lookup"><span data-stu-id="01f1b-157">DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter.</span></span>

<span data-ttu-id="01f1b-158">Si le pilote d’affichage d’un ordinateur ne fonctionne pas ou est désactivé, l’adaptateur principal (**null**) de l’ordinateur peut également être appelé « pilote de rendu de base Microsoft ».</span><span class="sxs-lookup"><span data-stu-id="01f1b-158">If a computer's display driver is not functioning or is disabled, the computer's primary (**NULL**) adapter might also be called "Microsoft Basic Render Driver."</span></span> <span data-ttu-id="01f1b-159">Toutefois, cet adaptateur a des sorties et n’a pas de valeur de logiciel pour l’indicateur de l' [**\_ adaptateur \_ \_ dxgi**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) .</span><span class="sxs-lookup"><span data-stu-id="01f1b-159">But this adapter has outputs and doesn't have the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set.</span></span> <span data-ttu-id="01f1b-160">Le système d’exploitation et les applications utilisent cet adaptateur par défaut.</span><span class="sxs-lookup"><span data-stu-id="01f1b-160">The operating system and apps use this adapter by default.</span></span> <span data-ttu-id="01f1b-161">Si un pilote d’affichage est installé ou activé, les applications peuvent recevoir l' [**\_ appareil d’erreur dxgi \_ \_ supprimé**](dxgi-error.md) pour cet adaptateur, puis recommencer l’énumération des adaptateurs.</span><span class="sxs-lookup"><span data-stu-id="01f1b-161">If a display driver is installed or enabled, apps can receive [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter and then must re-enumerate adapters again.</span></span>

<span data-ttu-id="01f1b-162">Quand la carte d’affichage principale d’un ordinateur est la « carte d’affichage de base Microsoft » (adaptateur de[déviation](../direct3d11/overviews-direct3d-11-devices-create-warp.md) ), cet ordinateur possède également un deuxième adaptateur.</span><span class="sxs-lookup"><span data-stu-id="01f1b-162">When a computer's primary display adapter is the "Microsoft Basic Display Adapter" ([WARP](../direct3d11/overviews-direct3d-11-devices-create-warp.md) adapter), that computer also has a second adapter.</span></span> <span data-ttu-id="01f1b-163">Ce deuxième adaptateur est le périphérique de rendu uniquement qui n’a pas de sortie d’affichage et pour lequel DXGI ne retourne jamais [**dxgi \_ périphérique d’erreur \_ \_ supprimé**](dxgi-error.md).</span><span class="sxs-lookup"><span data-stu-id="01f1b-163">This second adapter is the render-only device that has no display outputs and for which DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md).</span></span>

<span data-ttu-id="01f1b-164">Si vous souhaitez utiliser la distorsion pour le rendu, le calcul ou d’autres tâches longues, nous vous recommandons d’utiliser l’appareil de rendu uniquement.</span><span class="sxs-lookup"><span data-stu-id="01f1b-164">If you want to use WARP for rendering, compute, or other long running tasks, we recommend to use the render-only device.</span></span> <span data-ttu-id="01f1b-165">Vous pouvez obtenir un pointeur vers l’appareil de rendu uniquement en appelant la méthode [**IDXGIFactory1 :: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) .</span><span class="sxs-lookup"><span data-stu-id="01f1b-165">You can obtain a pointer to the render-only device by calling the [**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) method.</span></span> <span data-ttu-id="01f1b-166">Vous créez également l’appareil de rendu uniquement lorsque vous spécifiez la [**Warp de type de \_ pilote \_ \_ D3D**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) dans le paramètre *DriverType* de [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) , car l’appareil Warp utilise également l’adaptateur de Warping-only.</span><span class="sxs-lookup"><span data-stu-id="01f1b-166">You also create the render-only device when you specify [**D3D\_DRIVER\_TYPE\_WARP**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) in the *DriverType* parameter of [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) because the WARP device also uses the render-only WARP adapter.</span></span>

## <a name="presentation"></a><span data-ttu-id="01f1b-167">Présentation</span><span class="sxs-lookup"><span data-stu-id="01f1b-167">Presentation</span></span>

<span data-ttu-id="01f1b-168">Le travail de votre application consiste à afficher des frames et à demander à DXGI de présenter ces frames à la sortie.</span><span class="sxs-lookup"><span data-stu-id="01f1b-168">Your application's job is to render frames and ask DXGI to present those frames to the output.</span></span> <span data-ttu-id="01f1b-169">Si deux mémoires tampons sont disponibles pour l’application, elles peuvent afficher une seule mémoire tampon tout en en présentant une autre.</span><span class="sxs-lookup"><span data-stu-id="01f1b-169">If the application has two buffers available, it can render one buffer while presenting another one.</span></span> <span data-ttu-id="01f1b-170">L’application peut nécessiter plus de deux mémoires tampons en fonction du temps nécessaire au rendu d’un frame ou de la fréquence d’images souhaitée pour la présentation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-170">The application might require more than two buffers depending on the time it takes to render a frame or the desired frame rate for presentation.</span></span> <span data-ttu-id="01f1b-171">L’ensemble de mémoires tampons créé est appelé chaîne de permutation, comme illustré ici.</span><span class="sxs-lookup"><span data-stu-id="01f1b-171">The set of buffers created is called a swap chain, as shown here.</span></span>

![illustration d’une chaîne de permutation](images/dxgi-swap-chain.png)

-   [<span data-ttu-id="01f1b-173">Créer une chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-173">Create a Swap Chain</span></span>](#create-a-swap-chain)
-   [<span data-ttu-id="01f1b-174">Soins et alimentation de la chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-174">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
-   [<span data-ttu-id="01f1b-175">Gérer le redimensionnement de fenêtre</span><span class="sxs-lookup"><span data-stu-id="01f1b-175">Handling Window Resizing</span></span>](#handling-window-resizing)
-   [<span data-ttu-id="01f1b-176">Choix de la sortie et de la taille DXGI</span><span class="sxs-lookup"><span data-stu-id="01f1b-176">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
-   [<span data-ttu-id="01f1b-177">Débogage en mode Full-Screen</span><span class="sxs-lookup"><span data-stu-id="01f1b-177">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
-   [<span data-ttu-id="01f1b-178">Destruction d’une chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-178">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
-   [<span data-ttu-id="01f1b-179">Utilisation d’une analyse pivotée</span><span class="sxs-lookup"><span data-stu-id="01f1b-179">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
-   [<span data-ttu-id="01f1b-180">Modes de basculement</span><span class="sxs-lookup"><span data-stu-id="01f1b-180">Switching Modes</span></span>](#switching-modes)
-   [<span data-ttu-id="01f1b-181">Conseil sur les performances plein écran</span><span class="sxs-lookup"><span data-stu-id="01f1b-181">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
-   [<span data-ttu-id="01f1b-182">Considérations multithread</span><span class="sxs-lookup"><span data-stu-id="01f1b-182">Multithread Considerations</span></span>](#multithread-considerations)

<span data-ttu-id="01f1b-183">Une chaîne de permutation possède un tampon d’avant et une ou plusieurs mémoires tampons d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="01f1b-183">A swap chain has one front buffer and one or more back buffers.</span></span> <span data-ttu-id="01f1b-184">Chaque application crée sa propre chaîne de permutation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-184">Each application creates its own swap chain.</span></span> <span data-ttu-id="01f1b-185">Pour maximiser la vitesse de présentation des données dans une sortie, une chaîne de permutation est presque toujours créée dans la mémoire d’un sous-système d’affichage, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="01f1b-185">To maximize the speed of the presentation of the data to an output, a swap chain is almost always created in the memory of a display sub-system, which is shown in the following illustration.</span></span>

![illustration d’un sous-système d’affichage](images/dxgi-adapter.png)

<span data-ttu-id="01f1b-187">Le sous-système d’affichage (qui est souvent une carte vidéo mais qui peut être implémenté sur une carte mère) contient un GPU, un convertisseur numérique-analogique (DAC) et la mémoire.</span><span class="sxs-lookup"><span data-stu-id="01f1b-187">The display sub-system (which is often a video card but could be implemented on a motherboard) contains a GPU, a digital to analog converter (DAC), and memory.</span></span> <span data-ttu-id="01f1b-188">La chaîne de permutation est allouée dans cette mémoire pour accélérer la présentation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-188">The swap chain is allocated within this memory to make presentation very fast.</span></span> <span data-ttu-id="01f1b-189">Le sous-système d’affichage présente les données dans la mémoire tampon d’avant de la sortie.</span><span class="sxs-lookup"><span data-stu-id="01f1b-189">The display sub-system presents the data in the front buffer to the output.</span></span>

<span data-ttu-id="01f1b-190">Une chaîne de permutation est configurée pour dessiner en mode plein écran ou en fenêtre, ce qui évite d’avoir à savoir si une sortie est en mode fenêtre ou plein écran.</span><span class="sxs-lookup"><span data-stu-id="01f1b-190">A swap chain is set up to draw in full-screen or windowed mode, this eliminates the need to know whether an output is windowed or full screen.</span></span> <span data-ttu-id="01f1b-191">Une chaîne de permutation en mode plein écran peut optimiser les performances en basculant la résolution d’affichage.</span><span class="sxs-lookup"><span data-stu-id="01f1b-191">A full-screen mode swap chain can optimize performance by switching the display resolution.</span></span>

### <a name="create-a-swap-chain"></a><span data-ttu-id="01f1b-192">Créer une chaîne d’échange</span><span class="sxs-lookup"><span data-stu-id="01f1b-192">Create a swap chain</span></span>

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><span data-ttu-id="01f1b-193">Différences entre Direct3D 9 et Direct3D 10 : Direct3D 10 est le premier composant graphique à utiliser DXGI.</span><span class="sxs-lookup"><span data-stu-id="01f1b-193">Differences between Direct3D 9 and Direct3D 10: Direct3D 10 is the first graphics component to use DXGI.</span></span> <span data-ttu-id="01f1b-194">DXGI présente des comportements de chaîne de permutation différents.</span><span class="sxs-lookup"><span data-stu-id="01f1b-194">DXGI has some different swap chain behaviors.</span></span><br/>
<ul>
<li><span data-ttu-id="01f1b-195">Dans DXGI, une chaîne de permutation est liée à une fenêtre lorsque la chaîne de permutation est créée.</span><span class="sxs-lookup"><span data-stu-id="01f1b-195">In DXGI, a swap chain is tied to a window when the swap chain is created.</span></span> <span data-ttu-id="01f1b-196">Cette modification améliore les performances et économise de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="01f1b-196">This change improves performance and saves memory.</span></span> <span data-ttu-id="01f1b-197">Les versions précédentes de Direct3D permettaient à la chaîne de permutation de modifier la fenêtre à laquelle la chaîne de permutation est liée.</span><span class="sxs-lookup"><span data-stu-id="01f1b-197">Previous versions of Direct3D allowed the swap chain to change the window that the swap chain is tied to.</span></span></li>
<li><span data-ttu-id="01f1b-198">Dans DXGI, une chaîne de permutation est liée à un périphérique de rendu à la création.</span><span class="sxs-lookup"><span data-stu-id="01f1b-198">In DXGI, a swap chain is tied to a rendering device on creation.</span></span> <span data-ttu-id="01f1b-199">L’objet d’appareil que les fonctions de création de périphérique Direct3D retournent implémente l’interface <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="01f1b-199">The device object that the Direct3D create device functions return implements the <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> interface.</span></span> <span data-ttu-id="01f1b-200">Vous pouvez appeler <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> pour Rechercher l’interface <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> correspondante de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="01f1b-200">You can call <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> to query for the device's corresponding <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> interface.</span></span> <span data-ttu-id="01f1b-201">Une modification apportée au périphérique de rendu requiert la recréation de la chaîne de permutation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-201">A change to the rendering device requires the swap chain to be recreated.</span></span></li>
<li><p><span data-ttu-id="01f1b-202">Dans DXGI, les effets d’échange disponibles sont DXGI_SWAP_EFFECT_DISCARD et DXGI_SWAP_EFFECT_SEQUENTIAL.</span><span class="sxs-lookup"><span data-stu-id="01f1b-202">In DXGI, the swap effects available are DXGI_SWAP_EFFECT_DISCARD and DXGI_SWAP_EFFECT_SEQUENTIAL.</span></span> <span data-ttu-id="01f1b-203">À compter de Windows 8, l’effet d’échange DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL est également disponible.</span><span class="sxs-lookup"><span data-stu-id="01f1b-203">Starting with Windows 8 the DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL swap effect is also available.</span></span> <span data-ttu-id="01f1b-204">Le tableau suivant montre un mappage de l’effet Direct3D 9 à DXGI swap.</span><span class="sxs-lookup"><span data-stu-id="01f1b-204">The following table shows a mapping of Direct3D 9 to DXGI swap effect defines.</span></span> </p>
<table>
<thead>
<tr class="header">
<th><span data-ttu-id="01f1b-205">D3D9 l’effet d’échange</span><span class="sxs-lookup"><span data-stu-id="01f1b-205">D3D9 Swap Effect</span></span></th>
<th><span data-ttu-id="01f1b-206">DXGI l’effet d’échange</span><span class="sxs-lookup"><span data-stu-id="01f1b-206">DXGI Swap Effect</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="01f1b-207">D3DSWAPEFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="01f1b-207">D3DSWAPEFFECT_DISCARD</span></span></td>
<td><span data-ttu-id="01f1b-208">DXGI_SWAP_EFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="01f1b-208">DXGI_SWAP_EFFECT_DISCARD</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="01f1b-209">D3DSWAPEFFECT_COPY</span><span class="sxs-lookup"><span data-stu-id="01f1b-209">D3DSWAPEFFECT_COPY</span></span></td>
<td><span data-ttu-id="01f1b-210">DXGI_SWAP_EFFECT_SEQUENTIAL avec 1 tampon</span><span class="sxs-lookup"><span data-stu-id="01f1b-210">DXGI_SWAP_EFFECT_SEQUENTIAL with 1 buffer</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="01f1b-211">D3DSWAPEFFECT_FLIP</span><span class="sxs-lookup"><span data-stu-id="01f1b-211">D3DSWAPEFFECT_FLIP</span></span></td>
<td><span data-ttu-id="01f1b-212">DXGI_SWAP_EFFECT_SEQUENTIAL avec au moins 2 tampons</span><span class="sxs-lookup"><span data-stu-id="01f1b-212">DXGI_SWAP_EFFECT_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="01f1b-213">D3DSWAPEFFECT_FLIPEX</span><span class="sxs-lookup"><span data-stu-id="01f1b-213">D3DSWAPEFFECT_FLIPEX</span></span></td>
<td><span data-ttu-id="01f1b-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL avec au moins 2 tampons</span><span class="sxs-lookup"><span data-stu-id="01f1b-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
</tbody>
</table>
<p></p>
<p> </p></li>
</ul></td>
</tr>
</tbody>
</table>



 

<span data-ttu-id="01f1b-215">Les mémoires tampons d’une chaîne de permutation sont créées à une taille particulière et dans un format particulier.</span><span class="sxs-lookup"><span data-stu-id="01f1b-215">A swap chain's buffers are created at a particular size and in a particular format.</span></span> <span data-ttu-id="01f1b-216">L’application spécifie ces valeurs (ou vous pouvez hériter de la taille de la fenêtre cible) au démarrage, puis peut éventuellement les modifier au fur et à mesure que la taille de la fenêtre change en réponse à l’entrée utilisateur ou aux événements du programme.</span><span class="sxs-lookup"><span data-stu-id="01f1b-216">The application specifies these values (or you can inherit the size from the target window) at startup, and can then optionally modify them as the window size changes in response to user input or program events.</span></span>

<span data-ttu-id="01f1b-217">Une fois que vous avez créé la chaîne de permutation, vous souhaiterez généralement afficher des images dans celle-ci.</span><span class="sxs-lookup"><span data-stu-id="01f1b-217">After you create the swap chain, you will typically want to render images into it.</span></span> <span data-ttu-id="01f1b-218">Voici un fragment de code qui configure un contexte Direct3D pour le rendu dans une chaîne de permutation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-218">Here's a code fragment that sets up a Direct3D context to render into a swap chain.</span></span> <span data-ttu-id="01f1b-219">Ce code extrait une mémoire tampon de la chaîne de permutation, crée un affichage de rendu-cible à partir de cette mémoire tampon, puis le définit sur l’appareil :</span><span class="sxs-lookup"><span data-stu-id="01f1b-219">This code extracts a buffer from the swap chain, creates a render-target-view from that buffer, then sets it on the device:</span></span>


```
ID3D11Resource * pBB;
ThrowFailure( pSwapChain->GetBuffer(0, __uuidof(pBB),    
  reinterpret_cast<void**>(&pBB)), "Couldn't get back buffer");
ID3D11RenderTargetView * pView;
ThrowFailure( pD3D11Device->CreateRenderTargetView(pBB, NULL, &pView), 
  "Couldn't create view" );
pD3D11DeviceContext->OMSetRenderTargets(1, &pView, 0);
        
```



<span data-ttu-id="01f1b-220">Une fois que votre application a rendu un frame dans une mémoire tampon de chaîne d’échange, appelez [**IDXGISwapChain1 ::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span><span class="sxs-lookup"><span data-stu-id="01f1b-220">After your application renders a frame into a swap-chain buffer, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span></span> <span data-ttu-id="01f1b-221">L’application peut ensuite effectuer le rendu de l’image suivante.</span><span class="sxs-lookup"><span data-stu-id="01f1b-221">The application can then go render the next image.</span></span>

### <a name="care-and-feeding-of-the-swap-chain"></a><span data-ttu-id="01f1b-222">Soins et alimentation de la chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-222">Care and feeding of the swap chain</span></span>

<span data-ttu-id="01f1b-223">Une fois que vous avez rendu votre image, appelez [**IDXGISwapChain1 ::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) et Go Affichez l’image suivante.</span><span class="sxs-lookup"><span data-stu-id="01f1b-223">After you render your image, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) and go render the next image.</span></span> <span data-ttu-id="01f1b-224">Il s’agit de l’étendue de votre responsabilité.</span><span class="sxs-lookup"><span data-stu-id="01f1b-224">That is the extent of your responsibility.</span></span>

<span data-ttu-id="01f1b-225">Si vous avez précédemment appelé [**IDXGIFactory :: MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), l’utilisateur peut appuyer sur la combinaison de touches Alt-Enter et dxgi passera votre application entre le mode fenêtre et le mode plein écran.</span><span class="sxs-lookup"><span data-stu-id="01f1b-225">If you previously called [**IDXGIFactory::MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), the user can press the Alt-Enter key combination and DXGI will transition your application between windowed and full-screen mode.</span></span> <span data-ttu-id="01f1b-226">**IDXGIFactory :: MakeWindowAssociation** est recommandé, car un mécanisme de contrôle standard pour l’utilisateur est fortement souhaité.</span><span class="sxs-lookup"><span data-stu-id="01f1b-226">**IDXGIFactory::MakeWindowAssociation** is recommended, because a standard control mechanism for the user is strongly desired.</span></span>

<span data-ttu-id="01f1b-227">Si vous n’avez pas besoin d’écrire davantage de code que celui qui a été décrit, quelques étapes simples peuvent rendre votre application plus réactive.</span><span class="sxs-lookup"><span data-stu-id="01f1b-227">While you don't have to write any more code than has been described, a few simple steps can make your application more responsive.</span></span> <span data-ttu-id="01f1b-228">La considération la plus importante est le redimensionnement des mémoires tampons de la chaîne d’échange en réponse au redimensionnement de la fenêtre de sortie.</span><span class="sxs-lookup"><span data-stu-id="01f1b-228">The most important consideration is the resizing of the swap chain's buffers in response to the resizing of the output window.</span></span> <span data-ttu-id="01f1b-229">Naturellement, le meilleur itinéraire de l’application consiste à répondre à la taille de WM \_ et à appeler [**IDXGISwapChain :: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), en passant la taille contenue dans les paramètres du message.</span><span class="sxs-lookup"><span data-stu-id="01f1b-229">Naturally, the application's best route is to respond to WM\_SIZE, and call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), passing the size contained in the message's parameters.</span></span> <span data-ttu-id="01f1b-230">Ce comportement fait évidemment que votre application réponde bien à l’utilisateur lorsqu’il fait glisser les bordures de la fenêtre, mais c’est aussi exactement ce qui permet une transition en plein écran lisse.</span><span class="sxs-lookup"><span data-stu-id="01f1b-230">This behavior obviously makes your application respond well to the user when he or she drags the window's borders, but it is also exactly what enables a smooth full-screen transition.</span></span> <span data-ttu-id="01f1b-231">Votre fenêtre reçoit un message de \_ taille WM à chaque fois qu’une telle transition se produit, et l’appel de **IDXGISwapChain :: ResizeBuffers** est l’occasion pour la chaîne de permutation de réallouer le stockage des mémoires tampons pour une présentation optimale.</span><span class="sxs-lookup"><span data-stu-id="01f1b-231">Your window will receive a WM\_SIZE message whenever such a transition happens, and calling **IDXGISwapChain::ResizeBuffers** is the swap chain's chance to re-allocate the buffers' storage for optimal presentation.</span></span> <span data-ttu-id="01f1b-232">C’est la raison pour laquelle l’application doit libérer toutes les références qu’elle possède sur les mémoires tampons existantes avant d’appeler **IDXGISwapChain :: ResizeBuffers**.</span><span class="sxs-lookup"><span data-stu-id="01f1b-232">This is why the application is required to release any references it has on the existing buffers before it calls **IDXGISwapChain::ResizeBuffers**.</span></span>

<span data-ttu-id="01f1b-233">L’échec de l’appel de [**IDXGISwapChain :: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) en réponse au basculement en mode plein écran (le plus naturellement, en réponse à \_ la taille de WM), peut empêcher l’optimisation de la rotation, où dxgi peut simplement permuter la mémoire tampon affichée, plutôt que de copier les données d’un plein écran.</span><span class="sxs-lookup"><span data-stu-id="01f1b-233">Failure to call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response to switching to full-screen mode (most naturally, in response to WM\_SIZE), can preclude the optimization of flipping, wherein DXGI can simply swap which buffer is being displayed, rather than copying a full screen's worth of data around.</span></span>

<span data-ttu-id="01f1b-234">[**IDXGISwapChain1 ::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) vous indique si votre fenêtre de sortie est entièrement bloqués via **dxgi \_ Status \_ bloqués**.</span><span class="sxs-lookup"><span data-stu-id="01f1b-234">[**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) will inform you if your output window is entirely occluded via **DXGI\_STATUS\_OCCLUDED**.</span></span> <span data-ttu-id="01f1b-235">Dans ce cas, nous vous recommandons de passer en mode veille (en appelant **IDXGISwapChain1 ::P resent1** avec le **\_ \_ test dxgi présent**), car les ressources utilisées pour le rendu du frame sont gaspillées.</span><span class="sxs-lookup"><span data-stu-id="01f1b-235">When this occurs, we recommended that your application go into standby mode (by calling **IDXGISwapChain1::Present1** with **DXGI\_PRESENT\_TEST**) since resources used to render the frame are wasted.</span></span> <span data-ttu-id="01f1b-236">L’utilisation de **dxgi \_ présente un \_ test** empêchera la présentation de toutes les données pendant que le contrôle d’occlusion est toujours en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="01f1b-236">Using **DXGI\_PRESENT\_TEST** will prevent any data from being presented while still performing the occlusion check.</span></span> <span data-ttu-id="01f1b-237">Une fois **IDXGISwapChain1 ::P resent1** retourne S \_ OK, vous devez quitter le mode veille ; n’utilisez pas le code de retour pour basculer en mode veille, car cela peut permettre à la chaîne de permutation de quitter le mode plein écran.</span><span class="sxs-lookup"><span data-stu-id="01f1b-237">Once **IDXGISwapChain1::Present1** returns S\_OK, you should exit standby mode; do not use the return code to switch to standby mode as doing so can leave the swap chain unable to relinquish full-screen mode.</span></span>

<span data-ttu-id="01f1b-238">Le runtime Direct3D 11,1, qui est disponible à partir de Windows 8, fournit une chaîne de permutation de modèle (autrement dit, une chaîne de permutation qui a l' [**effet d’échange dxgi retourne une valeur \_ \_ \_ \_ séquentielle**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) définie dans le membre **SwapEffect** de la chaîne d’échange [**dxgi \_ \_ \_ desc**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc) ou dxgi chaîne de permutation [**\_ \_ \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="01f1b-238">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc) or [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="01f1b-239">Lorsque vous présentez des frames dans une sortie avec une chaîne de permutation-modèle, DXGI dissocie la mémoire tampon d’arrière-plan de tous les emplacements d’état de pipeline, comme une cible de rendu de fusion de sortie, qui écrivent dans la mémoire tampon d’arrière-plan 0.</span><span class="sxs-lookup"><span data-stu-id="01f1b-239">When you present frames to an output with a flip-model swap chain, DXGI unbinds the back buffer from all pipeline state locations, like an output-merger render target, that write to back buffer 0.</span></span> <span data-ttu-id="01f1b-240">Par conséquent, nous vous recommandons d’appeler [**ID3D11DeviceContext :: OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) immédiatement avant d’effectuer le rendu dans la mémoire tampon d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="01f1b-240">Therefore, we recommend that you call [**ID3D11DeviceContext::OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) immediately before you render to the back buffer.</span></span> <span data-ttu-id="01f1b-241">Par exemple, n’appelez pas **OMSetRenderTargets** , puis effectuez le calcul du nuanceur de calcul qui n’finit pas par le rendu de la ressource.</span><span class="sxs-lookup"><span data-stu-id="01f1b-241">For example, don't call **OMSetRenderTargets** and then perform compute shader work that doesn't end up rendering to the resource.</span></span> <span data-ttu-id="01f1b-242">Pour plus d’informations sur les chaînes de permutation-modèle et leurs avantages, consultez [dxgi Flip Model](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="01f1b-242">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="01f1b-243">Dans Direct3D 10 et Direct3D 11, vous n’avez pas besoin d’appeler [**IDXGISwapChain :: GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) pour récupérer la mémoire tampon d’arrière-plan 0 après avoir appelé [**IDXGISwapChain1 ::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) , car pour des raisons pratiques, les identités des mémoires tampons d’arrière-plan changent.</span><span class="sxs-lookup"><span data-stu-id="01f1b-243">In Direct3D 10 and Direct3D 11, you don't have to call [**IDXGISwapChain::GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) to retrieve back buffer 0 after you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) because for convenience the identities of back buffers change.</span></span> <span data-ttu-id="01f1b-244">Cela ne se produit pas dans Direct3D 12, et votre application doit à la place suivre manuellement les index de mémoire tampon d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="01f1b-244">This doesn't happen in Direct3D 12, and your application must instead manually track back buffer indices.</span></span>

### <a name="handling-window-resizing"></a><span data-ttu-id="01f1b-245">Gérer le redimensionnement de fenêtre</span><span class="sxs-lookup"><span data-stu-id="01f1b-245">Handling window resizing</span></span>

<span data-ttu-id="01f1b-246">Vous pouvez utiliser la méthode [**IDXGISwapChain :: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) pour gérer le redimensionnement de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="01f1b-246">You can use the [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) method to handle window resizing.</span></span> <span data-ttu-id="01f1b-247">Avant d’appeler **ResizeBuffers**, vous devez libérer toutes les références en suspens aux mémoires tampons de la chaîne d’échange.</span><span class="sxs-lookup"><span data-stu-id="01f1b-247">Before you call **ResizeBuffers**, you must release all outstanding references to the swap chain's buffers.</span></span> <span data-ttu-id="01f1b-248">L’objet qui contient généralement une référence à la mémoire tampon d’une chaîne de permutation est une vue de rendu-cible.</span><span class="sxs-lookup"><span data-stu-id="01f1b-248">The object that typically holds a reference to a swap chain's buffer is a render-target-view.</span></span>

<span data-ttu-id="01f1b-249">L’exemple de code suivant montre comment appeler [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) à partir du gestionnaire WindowProc pour les \_ messages de taille WM :</span><span class="sxs-lookup"><span data-stu-id="01f1b-249">The following example code shows how to call [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) from within the WindowProc handler for WM\_SIZE messages:</span></span>


```
    case WM_SIZE:
        if (g_pSwapChain)
        {
            g_pd3dDeviceContext->OMSetRenderTargets(0, 0, 0);

            // Release all outstanding references to the swap chain's buffers.
            g_pRenderTargetView->Release();

            HRESULT hr;
            // Preserve the existing buffer count and format.
            // Automatically choose the width and height to match the client rect for HWNDs.
            hr = g_pSwapChain->ResizeBuffers(0, 0, 0, DXGI_FORMAT_UNKNOWN, 0);
                                            
            // Perform error handling here!

            // Get buffer and create a render-target-view.
            ID3D11Texture2D* pBuffer;
            hr = g_pSwapChain->GetBuffer(0, __uuidof( ID3D11Texture2D),
                                         (void**) &pBuffer );
            // Perform error handling here!

            hr = g_pd3dDevice->CreateRenderTargetView(pBuffer, NULL,
                                                     &g_pRenderTargetView);
            // Perform error handling here!
            pBuffer->Release();

            g_pd3dDeviceContext->OMSetRenderTargets(1, &g_pRenderTargetView, NULL );

            // Set up the viewport.
            D3D11_VIEWPORT vp;
            vp.Width = width;
            vp.Height = height;
            vp.MinDepth = 0.0f;
            vp.MaxDepth = 1.0f;
            vp.TopLeftX = 0;
            vp.TopLeftY = 0;
            g_pd3dDeviceContext->RSSetViewports( 1, &vp );
        }
        return 1;
```



### <a name="choosing-the-dxgi-output-and-size"></a><span data-ttu-id="01f1b-250">Choix de la sortie et de la taille DXGI</span><span class="sxs-lookup"><span data-stu-id="01f1b-250">Choosing the DXGI output and size</span></span>

<span data-ttu-id="01f1b-251">Par défaut, DXGI choisit la sortie qui contient la plus grande partie de la zone cliente de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="01f1b-251">By default, DXGI chooses the output that contains most of the client area of the window.</span></span> <span data-ttu-id="01f1b-252">Il s’agit de la seule option disponible pour DXGI lorsqu’elle s’affiche en plein écran en réponse à Alt-Entrée.</span><span class="sxs-lookup"><span data-stu-id="01f1b-252">This is the only option available to DXGI when it goes full-screen itself in response to alt-enter.</span></span> <span data-ttu-id="01f1b-253">Si l’application choisit de passer en mode plein écran par lui-même, elle peut appeler [**IDXGISwapChain :: SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) et passer un [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) explicite (ou **null**, si l’application est heureux de laisser dxgi décider).</span><span class="sxs-lookup"><span data-stu-id="01f1b-253">If the application chooses to go to full-screen mode by itself, then it can call [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) and pass an explicit [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) (or **NULL**, if the application is happy to let DXGI decide).</span></span>

<span data-ttu-id="01f1b-254">Pour redimensionner la sortie en mode plein écran ou dans une fenêtre, nous vous recommandons d’appeler [**IDXGISwapChain :: ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), car cette méthode redimensionne également la fenêtre cible.</span><span class="sxs-lookup"><span data-stu-id="01f1b-254">To resize the output while either full screen or windowed, we recommend to call [**IDXGISwapChain::ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), since this method resizes the target window also.</span></span> <span data-ttu-id="01f1b-255">Étant donné que la fenêtre cible est redimensionnée, le système d’exploitation envoie la **\_ taille de WM** et votre code appellera naturellement [**IDXGISwapChain :: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="01f1b-255">Since the target window is resized, the operating system sends **WM\_SIZE**, and your code will naturally call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response.</span></span> <span data-ttu-id="01f1b-256">Il s’agit donc d’un gaspillage de l’effort pour redimensionner vos mémoires tampons, puis de redimensionner ensuite la cible.</span><span class="sxs-lookup"><span data-stu-id="01f1b-256">It's thus a waste of effort to resize your buffers, and then subsequently resize the target.</span></span>

### <a name="debugging-in-full-screen-mode"></a><span data-ttu-id="01f1b-257">Débogage en mode plein écran</span><span class="sxs-lookup"><span data-stu-id="01f1b-257">Debugging in full-screen mode</span></span>

<span data-ttu-id="01f1b-258">Une chaîne de permutation DXGI abandonne le mode plein écran uniquement lorsque cela est absolument nécessaire.</span><span class="sxs-lookup"><span data-stu-id="01f1b-258">A DXGI swap chain relinquishes full-screen mode only when absolutely necessary.</span></span> <span data-ttu-id="01f1b-259">Cela signifie que vous pouvez déboguer une application en plein écran à l’aide de plusieurs moniteurs, à condition que la fenêtre de débogage ne chevauche pas la fenêtre cible de la chaîne de permutation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-259">This means that you can debug a full-screen application using multiple monitors, as long as the debug window doesn't overlap the swap chain's target window.</span></span> <span data-ttu-id="01f1b-260">Vous pouvez également empêcher le basculement du mode en ne définissant pas l’indicateur de commutateur de la **\_ chaîne d’échange dxgi \_ \_ \_ allow \_ mode \_** .</span><span class="sxs-lookup"><span data-stu-id="01f1b-260">Alternatively, you can prevent mode switching altogether by not setting the **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** flag.</span></span>

<span data-ttu-id="01f1b-261">Si le basculement de mode est autorisé, une chaîne de permutation abandonnera le mode plein écran chaque fois que sa fenêtre de sortie sera bloqués par une autre fenêtre.</span><span class="sxs-lookup"><span data-stu-id="01f1b-261">If mode switching is allowed, a swap chain will relinquish full-screen mode whenever its output window is occluded by another window.</span></span> <span data-ttu-id="01f1b-262">Le contrôle d’occlusion est effectué pendant [**IDXGISwapChain1 ::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)ou par un thread distinct dont l’objectif est de surveiller si l’application ne répond plus (et n’appelle plus **IDXGISwapChain1 ::P resent1**).</span><span class="sxs-lookup"><span data-stu-id="01f1b-262">The occlusion check is performed during [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), or by a separate thread whose purpose is to watch to see if the application has becomes unresponsive (and no longer calls **IDXGISwapChain1::Present1**).</span></span> <span data-ttu-id="01f1b-263">Pour désactiver la capacité du thread distinct à provoquer un basculement, définissez la clé de Registre suivante sur une valeur différente de zéro.</span><span class="sxs-lookup"><span data-stu-id="01f1b-263">To disable the ability of the separate thread to cause a switch, set the following registry key to any non-zero value.</span></span>

<span data-ttu-id="01f1b-264">**\\Logiciel HKCU \\ Microsoft \\ dxgi \\ DisableFullscreenWatchdog**</span><span class="sxs-lookup"><span data-stu-id="01f1b-264">**HKCU\\Software\\Microsoft\\DXGI\\DisableFullscreenWatchdog**</span></span>

### <a name="destroying-a-swap-chain"></a><span data-ttu-id="01f1b-265">Destruction d’une chaîne de permutation</span><span class="sxs-lookup"><span data-stu-id="01f1b-265">Destroying a swap chain</span></span>

<span data-ttu-id="01f1b-266">Vous ne pouvez pas libérer une chaîne de permutation en mode plein écran, car cela risque de créer une contention de thread (ce qui entraîne la levée d’une exception non continuable par DXGI).</span><span class="sxs-lookup"><span data-stu-id="01f1b-266">You may not release a swap chain in full-screen mode because doing so may create thread contention (which will cause DXGI to raise a non-continuable exception).</span></span> <span data-ttu-id="01f1b-267">Avant de libérer une chaîne de permutation, passez tout d’abord en mode fenêtre (à l’aide de [**IDXGISwapChain :: SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **false**, **null** )), puis appelez [**IUnknown :: Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span><span class="sxs-lookup"><span data-stu-id="01f1b-267">Before releasing a swap chain, first switch to windowed mode (using [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **FALSE**, **NULL** )) and then call [**IUnknown::Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span></span>

### <a name="using-a-rotated-monitor"></a><span data-ttu-id="01f1b-268">Utilisation d’une analyse pivotée</span><span class="sxs-lookup"><span data-stu-id="01f1b-268">Using a rotated monitor</span></span>

<span data-ttu-id="01f1b-269">Une application n’a pas besoin de se soucier de l’orientation du moniteur, DXGI fera pivoter une mémoire tampon de chaîne d’échange pendant la présentation, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="01f1b-269">An application does not need to worry about monitor orientation, DXGI will rotate a swap-chain buffer during presentation, if necessary.</span></span> <span data-ttu-id="01f1b-270">Bien entendu, cette rotation supplémentaire peut avoir un impact sur les performances.</span><span class="sxs-lookup"><span data-stu-id="01f1b-270">Of course, this additional rotation can impact performance.</span></span> <span data-ttu-id="01f1b-271">Pour de meilleures performances, prenez en charge la rotation dans votre application en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="01f1b-271">For best performance, take care of the rotation in your application by doing the following:</span></span>

-   <span data-ttu-id="01f1b-272">Utilisez l' **\_ indicateur de chaîne d’échange dxgi \_ \_ \_ NONPREROTATED**.</span><span class="sxs-lookup"><span data-stu-id="01f1b-272">Use the **DXGI\_SWAP\_CHAIN\_FLAG\_NONPREROTATED**.</span></span> <span data-ttu-id="01f1b-273">Cela indique à DXGI que l’application produit une image pivotée (par exemple, en modifiant sa matrice de projection).</span><span class="sxs-lookup"><span data-stu-id="01f1b-273">This notifies DXGI that the application will produce a rotated image (for example, by altering its projection matrix).</span></span> <span data-ttu-id="01f1b-274">Une chose à noter, cet indicateur est uniquement valide en mode plein écran.</span><span class="sxs-lookup"><span data-stu-id="01f1b-274">One thing to note, this flag is only valid while in full-screen mode.</span></span>
-   <span data-ttu-id="01f1b-275">Allouez chaque mémoire tampon de chaîne d’échange dans sa taille pivotée.</span><span class="sxs-lookup"><span data-stu-id="01f1b-275">Allocate each swap-chain buffer in its rotated size.</span></span> <span data-ttu-id="01f1b-276">Utilisez [**IDXGIOutput :: GetDesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) pour récupérer ces valeurs, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="01f1b-276">Use [**IDXGIOutput::GetDesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) to get these values, if necessary.</span></span>

<span data-ttu-id="01f1b-277">En effectuant la rotation dans votre application, DXGI effectue simplement une copie au lieu d’une copie et d’une rotation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-277">By performing the rotation in your application, DXGI will simply do a copy instead of a copy and a rotate.</span></span>

<span data-ttu-id="01f1b-278">Le runtime Direct3D 11,1, qui est disponible à partir de Windows 8, fournit une chaîne de permutation de modèle (autrement dit, une chaîne de permutation qui a l' [**effet d’échange dxgi retourne une valeur \_ \_ \_ \_ séquentielle**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) définie dans le membre **SwapEffect** de la [**chaîne de \_ permutation dxgi \_ \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="01f1b-278">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="01f1b-279">Pour optimiser les optimisations de présentation disponibles avec une chaîne de permutation-modèle, nous vous recommandons de faire en sorte que vos applications orientent le contenu pour correspondre à la sortie particulière sur laquelle le contenu réside lorsque ce contenu occupe entièrement la sortie.</span><span class="sxs-lookup"><span data-stu-id="01f1b-279">To maximize the presentation optimizations available with a flip-model swap chain, we recommend that you make your applications orient content to match the particular output on which the content resides when that content fully occupies the output.</span></span> <span data-ttu-id="01f1b-280">Pour plus d’informations sur les chaînes de permutation-modèle et leurs avantages, consultez [dxgi Flip Model](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="01f1b-280">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

### <a name="switching-modes"></a><span data-ttu-id="01f1b-281">Modes de basculement</span><span class="sxs-lookup"><span data-stu-id="01f1b-281">Switching modes</span></span>

<span data-ttu-id="01f1b-282">La chaîne de permutation DXGI peut modifier le mode d’affichage d’une sortie lors d’une transition en plein écran.</span><span class="sxs-lookup"><span data-stu-id="01f1b-282">The DXGI swap chain might change the display mode of an output when making a full-screen transition.</span></span> <span data-ttu-id="01f1b-283">Pour activer la modification du mode d’affichage automatique, vous devez spécifier le **\_ \_ \_ \_ \_ \_ commutateur du mode allow de l’indicateur de chaîne d’échange dxgi** dans la description de la chaîne d’échange.</span><span class="sxs-lookup"><span data-stu-id="01f1b-283">To enable the automatic display mode change, you must specify **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** in the swap-chain description.</span></span> <span data-ttu-id="01f1b-284">Si le mode d’affichage change automatiquement, DXGI choisit le mode le plus modeste (la taille et la résolution ne changent pas, mais la profondeur de couleur peut être).</span><span class="sxs-lookup"><span data-stu-id="01f1b-284">If the display mode automatically changes, DXGI will choose the most modest mode (size and resolution will not change, but the color depth may).</span></span> <span data-ttu-id="01f1b-285">Le redimensionnement des tampons de chaîne d’échange n’entraîne pas de basculement de mode.</span><span class="sxs-lookup"><span data-stu-id="01f1b-285">Resizing swap chain buffers will not cause a mode switch.</span></span> <span data-ttu-id="01f1b-286">La chaîne de permutation fait une promesse implicite que si vous choisissez une mémoire tampon d’arrière-plan qui correspond exactement à un mode d’affichage pris en charge par la sortie cible, elle bascule sur ce mode d’affichage lors de l’entrée en mode plein écran sur cette sortie.</span><span class="sxs-lookup"><span data-stu-id="01f1b-286">The swap chain makes an implicit promise that if you choose a back buffer that exactly matches a display mode supported by the target output, then it will switch to that display mode when entering full-screen mode on that output.</span></span> <span data-ttu-id="01f1b-287">Par conséquent, vous choisissez un mode d’affichage en choisissant la taille et le format de la mémoire tampon d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="01f1b-287">Consequently, you choose a display mode by choosing your back buffer size and format.</span></span>

### <a name="full-screen-performance-tip"></a><span data-ttu-id="01f1b-288">Conseil sur les performances plein écran</span><span class="sxs-lookup"><span data-stu-id="01f1b-288">Full-screen performance tip</span></span>

<span data-ttu-id="01f1b-289">Quand vous appelez [**IDXGISwapChain1 ::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) sur une application en plein écran, la chaîne de permutation retourne (par opposition à BLITS) le contenu de la mémoire tampon d’arrière-plan dans la mémoire tampon d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="01f1b-289">When you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) on a full-screen application, the swap chain flips (as opposed to blits) the contents of the back buffer to the front buffer.</span></span> <span data-ttu-id="01f1b-290">Cela nécessite la création de la chaîne de permutation à l’aide d’un mode d’affichage énuméré (spécifié dans la [**\_ chaîne de permutation dxgi \_ \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="01f1b-290">This requires that the swap chain was created by using an enumerated display mode (specified in [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="01f1b-291">Si vous ne parvenez pas à énumérer les modes d’affichage ou si vous spécifiez incorrectement le mode d’affichage dans la description, la chaîne de permutation peut effectuer un transfert de bloc de bits (BitBlt) à la place.</span><span class="sxs-lookup"><span data-stu-id="01f1b-291">If you fail to enumerate display modes, or incorrectly specify the display mode in the description, the swap chain may perform a bit-block transfer (bitblt) instead.</span></span> <span data-ttu-id="01f1b-292">Le BitBlt provoque une copie d’étirement supplémentaire, ainsi qu’une augmentation de l’utilisation de la mémoire vidéo et est difficile à détecter.</span><span class="sxs-lookup"><span data-stu-id="01f1b-292">The bitblt causes an extra stretching copy as well as some increased video memory usage, and is difficult to detect.</span></span> <span data-ttu-id="01f1b-293">Pour éviter ce problème, énumérez les modes d’affichage et initialisez correctement la description de la chaîne de permutation avant de créer la chaîne de permutation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-293">To avoid this problem, enumerate display modes, and initialize the swap chain description correctly before you create the swap chain.</span></span> <span data-ttu-id="01f1b-294">Cela permet de garantir des performances optimales lors du basculement en mode plein écran et d’éviter la surcharge de mémoire supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="01f1b-294">This will ensure maximum performance when flipping in full-screen mode and avoid the extra memory overhead.</span></span>

### <a name="multithread-considerations"></a><span data-ttu-id="01f1b-295">Considérations multithread</span><span class="sxs-lookup"><span data-stu-id="01f1b-295">Multithread considerations</span></span>

<span data-ttu-id="01f1b-296">Quand vous utilisez DXGI dans une application avec plusieurs threads, vous devez veiller à éviter de créer un interblocage, où deux threads différents attendent l’un l’autre.</span><span class="sxs-lookup"><span data-stu-id="01f1b-296">When you use DXGI in an application with multiple threads, you need to be careful to avoid creating a deadlock, where two different threads are waiting on each other to complete.</span></span> <span data-ttu-id="01f1b-297">Il existe deux situations dans lesquelles cela peut se produire.</span><span class="sxs-lookup"><span data-stu-id="01f1b-297">There are two situations where this can occur.</span></span>

-   <span data-ttu-id="01f1b-298">Le thread de rendu n’est pas le thread de pompe de messages.</span><span class="sxs-lookup"><span data-stu-id="01f1b-298">The rendering thread is not the message-pump thread.</span></span>
-   <span data-ttu-id="01f1b-299">Le thread qui exécute une API DXGI n’est pas le même que celui qui a créé la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="01f1b-299">The thread executing a DXGI API is not the same thread that created the window.</span></span>

<span data-ttu-id="01f1b-300">Veillez à ne jamais attendre le thread de pompe de messages sur le thread de rendu quand vous utilisez des chaînes d’échange plein écran.</span><span class="sxs-lookup"><span data-stu-id="01f1b-300">Be careful that you never have the message-pump thread wait on the render thread when you use full-screen swap chains.</span></span> <span data-ttu-id="01f1b-301">Par exemple, l’appel de [**IDXGISwapChain1 ::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (à partir du thread de rendu) peut entraîner l’attente du thread de rendu sur le thread de pompe de messages.</span><span class="sxs-lookup"><span data-stu-id="01f1b-301">For instance, calling [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (from the render thread) may cause the render thread to wait on the message-pump thread.</span></span> <span data-ttu-id="01f1b-302">Quand une modification du mode se produit, ce scénario est possible si **Present1** appelle :: SetWindowPos () ou :: SetWindowStyle () et que l’une ou l’autre de ces méthodes appelle :: SendMessage ().</span><span class="sxs-lookup"><span data-stu-id="01f1b-302">When a mode change occurs, this scenario is possible if **Present1** calls ::SetWindowPos() or ::SetWindowStyle() and either of these methods call ::SendMessage().</span></span> <span data-ttu-id="01f1b-303">Dans ce scénario, si le thread de pompe de messages a une section critique qui le protège ou si le thread de rendu est bloqué, les deux threads se bloquent.</span><span class="sxs-lookup"><span data-stu-id="01f1b-303">In this scenario, if the message-pump thread has a critical section guarding it or if the render thread is blocked, then the two threads will deadlock.</span></span>

<span data-ttu-id="01f1b-304">Pour plus d’informations sur l’utilisation de DXGI avec plusieurs threads, consultez [Multithreading et dxgi](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span><span class="sxs-lookup"><span data-stu-id="01f1b-304">For more info about using DXGI with multiple threads, see [Multithreading and DXGI](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span></span>

## <a name="dxgi-responses-from-dllmain"></a><span data-ttu-id="01f1b-305">DXGI les réponses de DLLMain</span><span class="sxs-lookup"><span data-stu-id="01f1b-305">DXGI responses from DLLMain</span></span>

<span data-ttu-id="01f1b-306">Étant donné qu’une fonction [**DllMain**](../dlls/dllmain.md) ne peut pas garantir l’ordre de chargement et de déchargement des dll, il est recommandé que la fonction **DllMain** de votre application n’appelle pas les fonctions ou méthodes Direct3D ou dxgi, y compris les fonctions ou les méthodes qui créent ou libèrent des objets.</span><span class="sxs-lookup"><span data-stu-id="01f1b-306">Because a [**DllMain**](../dlls/dllmain.md) function can't guarantee the order in which it loads and unloads DLLs, we recommend that your app's **DllMain** function not call Direct3D or DXGI functions or methods, including functions or methods that create or release objects.</span></span> <span data-ttu-id="01f1b-307">Si la fonction **DllMain** de votre application appelle un composant particulier, ce composant peut appeler une autre dll qui n’est pas présente sur le système d’exploitation, ce qui entraîne l’arrêt du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="01f1b-307">If your app's **DllMain** function calls into a particular component, that component might call another DLL that isn't present on the operating system, which causes the operating system to crash.</span></span> <span data-ttu-id="01f1b-308">Direct3D et DXGI peuvent charger un ensemble de dll, généralement un ensemble de pilotes, qui diffère d’un ordinateur à l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="01f1b-308">Direct3D and DXGI might load a set of DLLs, typically a set of drivers, that differs from computer to computer.</span></span> <span data-ttu-id="01f1b-309">Par conséquent, même si votre application ne se bloque pas sur vos ordinateurs de développement et de test lorsque sa fonction **DllMain** appelle des fonctions ou des méthodes Direct3D ou dxgi, elle peut se bloquer lorsqu’elle s’exécute sur un autre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="01f1b-309">Therefore, even if your app doesn t crash on your development and test computers when its **DllMain** function calls Direct3D or DXGI functions or methods, it might crash when it runs on another computer.</span></span>

<span data-ttu-id="01f1b-310">Pour vous empêcher de créer une application susceptible de provoquer le blocage du système d’exploitation, DXGI fournit les réponses suivantes dans les situations spécifiées :</span><span class="sxs-lookup"><span data-stu-id="01f1b-310">To prevent you from creating an app that might cause the operating system to crash, DXGI provides the following responses in the specified situations:</span></span>

-   <span data-ttu-id="01f1b-311">Si la fonction [**DllMain**](../dlls/dllmain.md) de votre application libère sa dernière référence à une fabrique DXGI, DXGI lève une exception.</span><span class="sxs-lookup"><span data-stu-id="01f1b-311">If your app's [**DllMain**](../dlls/dllmain.md) function releases its last reference to a DXGI factory, DXGI raises an exception.</span></span>
-   <span data-ttu-id="01f1b-312">Si la fonction [**DllMain**](../dlls/dllmain.md) de votre application crée une fabrique DXGI, DXGI retourne un code d’erreur.</span><span class="sxs-lookup"><span data-stu-id="01f1b-312">If your app's [**DllMain**](../dlls/dllmain.md) function creates a DXGI factory, DXGI returns an error code.</span></span>

## <a name="dxgi-11-changes"></a><span data-ttu-id="01f1b-313">Modifications apportées à DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="01f1b-313">DXGI 1.1 changes</span></span>

<span data-ttu-id="01f1b-314">Nous avons ajouté les fonctionnalités suivantes dans DXGI 1,1.</span><span class="sxs-lookup"><span data-stu-id="01f1b-314">We added the following functionality in DXGI 1.1.</span></span>

-   <span data-ttu-id="01f1b-315">Prise en charge des surfaces partagées synchronisées</span><span class="sxs-lookup"><span data-stu-id="01f1b-315">Synchronized Shared Surfaces Support</span></span>

    <span data-ttu-id="01f1b-316">Les surfaces partagées synchronisées pour Direct3D 10,1 et Direct3D 11 permettent un partage des surfaces de lecture et d’écriture efficace entre plusieurs périphériques Direct3D (le partage entre les appareils Direct3D 10 et Direct3D 11 est possible).</span><span class="sxs-lookup"><span data-stu-id="01f1b-316">Synchronized shared surfaces for Direct3D 10.1 and Direct3D 11 enables efficient read and write surface sharing between multiple Direct3D devices (sharing between Direct3D 10 and Direct3D 11 devices is possible).</span></span> <span data-ttu-id="01f1b-317">Consultez [**IDXGIKeyedMutex :: AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) et [**IDXGIKeyedMutex :: ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span><span class="sxs-lookup"><span data-stu-id="01f1b-317">See [**IDXGIKeyedMutex::AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) and [**IDXGIKeyedMutex::ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span></span>

-   <span data-ttu-id="01f1b-318">Prise en charge des couleurs élevées</span><span class="sxs-lookup"><span data-stu-id="01f1b-318">High Color Support</span></span>

    <span data-ttu-id="01f1b-319">Prend en charge \_ le \_ format dxgi R10G10B10 \_ XR \_ Bias \_ a2 \_ UNORM.</span><span class="sxs-lookup"><span data-stu-id="01f1b-319">Supports the DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM format.</span></span>

-   <span data-ttu-id="01f1b-320">[**IDXGIDevice1 :: SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) et [ **IDXGIDevice1 :: GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span><span class="sxs-lookup"><span data-stu-id="01f1b-320">[**IDXGIDevice1::SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) and [**IDXGIDevice1::GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span></span>
-   <span data-ttu-id="01f1b-321">[**IDXGIFactory1 :: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) énumère les adaptateurs locaux sans moniteurs ou sorties attachés, ainsi que les adaptateurs avec des sorties attachées.</span><span class="sxs-lookup"><span data-stu-id="01f1b-321">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) enumerates local adapter(s) without any monitors or outputs attached, as well as adapters(s) with outputs attached.</span></span> <span data-ttu-id="01f1b-322">Le premier adaptateur retourné sera l’adaptateur local sur lequel le bureau principal est affiché.</span><span class="sxs-lookup"><span data-stu-id="01f1b-322">The first adapter returned will be the local adapter on which the Desktop primary is displayed.</span></span>
-   <span data-ttu-id="01f1b-323">Prise en charge du format BGRA</span><span class="sxs-lookup"><span data-stu-id="01f1b-323">BGRA format support</span></span>

    <span data-ttu-id="01f1b-324">DXGI \_ format \_ B8G8R8A8 \_ UNORM et dxgi \_ format \_ B8G8R8A8 \_ UNORM \_ sRGB, consultez [**IDXGISurface1 :: GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) et [**IDXGISurface1 :: ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span><span class="sxs-lookup"><span data-stu-id="01f1b-324">DXGI\_FORMAT\_B8G8R8A8\_UNORM and DXGI\_FORMAT\_B8G8R8A8\_UNORM\_SRGB, see [**IDXGISurface1::GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) and [**IDXGISurface1::ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span></span>

## <a name="dxgi-12-changes"></a><span data-ttu-id="01f1b-325">Modifications apportées à DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="01f1b-325">DXGI 1.2 changes</span></span>

<span data-ttu-id="01f1b-326">Nous avons ajouté les fonctionnalités suivantes dans DXGI 1,2.</span><span class="sxs-lookup"><span data-stu-id="01f1b-326">We added the following functionality in DXGI 1.2.</span></span>

-   <span data-ttu-id="01f1b-327">Chaîne d’échange stéréo</span><span class="sxs-lookup"><span data-stu-id="01f1b-327">Stereo swap chain</span></span>
-   [<span data-ttu-id="01f1b-328">Chaîne d’échange Flip-Model</span><span class="sxs-lookup"><span data-stu-id="01f1b-328">Flip-model swap chain</span></span>](dxgi-flip-model.md)
-   <span data-ttu-id="01f1b-329">Présentation optimisée (défilement, rectangles modifiés et rotation)</span><span class="sxs-lookup"><span data-stu-id="01f1b-329">Optimized presentation (scrolling, dirty rectangles, and rotation)</span></span>
-   <span data-ttu-id="01f1b-330">Amélioration des ressources partagées et de la synchronisation</span><span class="sxs-lookup"><span data-stu-id="01f1b-330">Improved shared resources and synchronization</span></span>
-   [<span data-ttu-id="01f1b-331">Duplication des postes de travail</span><span class="sxs-lookup"><span data-stu-id="01f1b-331">Desktop Duplication</span></span>](desktop-dup-api.md)
-   <span data-ttu-id="01f1b-332">Utilisation optimisée de la mémoire vidéo</span><span class="sxs-lookup"><span data-stu-id="01f1b-332">Optimized use of video memory</span></span>
-   <span data-ttu-id="01f1b-333">Prise en charge des formats de 16 bits par pixel (BPP) (DXGI \_ format \_ B5G6R5 \_ UNORM, DXGI \_ format \_ B5G5R5A1 \_ UNORM, DXGI \_ format \_ \_ B4G4R4A4 UNORM)</span><span class="sxs-lookup"><span data-stu-id="01f1b-333">Support for 16 bits per pixel (bpp) formats (DXGI\_FORMAT\_B5G6R5\_UNORM, DXGI\_FORMAT\_B5G5R5A1\_UNORM, DXGI\_FORMAT\_B4G4R4A4\_UNORM)</span></span>
-   <span data-ttu-id="01f1b-334">API de débogage</span><span class="sxs-lookup"><span data-stu-id="01f1b-334">Debugging APIs</span></span>

<span data-ttu-id="01f1b-335">Pour plus d’informations sur DXGI 1,2, consultez [améliorations apportées à DXGI 1,2](dxgi-1-2-improvements.md).</span><span class="sxs-lookup"><span data-stu-id="01f1b-335">For more info about DXGI 1.2, see [DXGI 1.2 Improvements](dxgi-1-2-improvements.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="01f1b-336">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="01f1b-336">Related topics</span></span>

[<span data-ttu-id="01f1b-337">Guide de programmation pour DXGI</span><span class="sxs-lookup"><span data-stu-id="01f1b-337">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
