---
description: Pour composer à l’écran ou effectuer des opérations à virgule flottante, vous devez travailler dans l’espace de couleurs correct.
ms.assetid: 1DD8E2D3-430F-4EE4-9C41-78736C904920
title: Conversion de données pour l’espace colorimétrique
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 91b5dbec2f826c40d5274cbddb3b54d1cdd9f695
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "103745933"
---
# <a name="converting-data-for-the-color-space"></a><span data-ttu-id="c7dd8-103">Conversion de données pour l’espace colorimétrique</span><span class="sxs-lookup"><span data-stu-id="c7dd8-103">Converting data for the color space</span></span>

<span data-ttu-id="c7dd8-104">Pour composer à l’écran ou effectuer des opérations à virgule flottante, vous devez travailler dans l’espace de couleurs correct.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-104">To compose to the screen or perform floating-point operations, you need to work in the correct color space.</span></span> <span data-ttu-id="c7dd8-105">Nous vous recommandons d’effectuer des opérations en virgule flottante dans un espace colorimétrique linéaire.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-105">We recommend that you perform floating point operations in a linear color space.</span></span> <span data-ttu-id="c7dd8-106">Ensuite, pour présenter vos images à l’écran, convertissez les données en données RVB standard (sRGB, gamma 2,2-corrigé).</span><span class="sxs-lookup"><span data-stu-id="c7dd8-106">Then, to present your images to the screen, convert the data to standard RGB data (sRGB, gamma 2.2-corrected) color space.</span></span> <span data-ttu-id="c7dd8-107">La présentation de l’espace de couleurs sRVB à l’écran est importante pour la précision des couleurs.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-107">Presenting to the screen in sRGB color space is important for color accuracy.</span></span> <span data-ttu-id="c7dd8-108">Si les images ne sont pas gamma 2,2-corrigées, elles allouent trop de bits ou trop de bande passante pour mettre en évidence que les gens ne peuvent pas différencier, et trop peu de bits ou de bande passante pour les valeurs fantômes auxquelles les personnes sont sensibles, et nécessitent donc plus de bits ou de bande passante pour maintenir la même qualité visuelle.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-108">If images are not gamma 2.2-corrected, they allocate too many bits or too much bandwidth to highlights that people can't differentiate, and too few bits or bandwidth to shadow values that people are sensitive to, and so would require more bits or bandwidth to maintain the same visual quality.</span></span> <span data-ttu-id="c7dd8-109">Par conséquent, pour garantir une meilleure précision des couleurs, présentez les images à l’écran correspondant à la valeur gamma 2,2-corrigée.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-109">Therefore, to ensure the best color accuracy, present images to the screen that are gamma 2.2-corrected.</span></span>

-   [<span data-ttu-id="c7dd8-110">Précision des couleurs</span><span class="sxs-lookup"><span data-stu-id="c7dd8-110">Color accuracy</span></span>](#color-accuracy)
-   [<span data-ttu-id="c7dd8-111">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c7dd8-111">Related topics</span></span>](#related-topics)

## <a name="color-accuracy"></a><span data-ttu-id="c7dd8-112">Précision des couleurs</span><span class="sxs-lookup"><span data-stu-id="c7dd8-112">Color accuracy</span></span>

<span data-ttu-id="c7dd8-113">Pour la présentation, les formats d’affichage à valeurs entières (tels que [**dxgi \_ format \_ B8G8R8A8 \_ UNORM \_ sRGB**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format), [**dxgi \_ format \_ R10G10B10 \_ XR \_ Bias \_ a2 \_ UNORM**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format), etc.) contiennent toujours des données de correction gamma RVB.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-113">For presentation, integer-valued display formats (such as [**DXGI\_FORMAT\_B8G8R8A8\_UNORM\_SRGB**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format), [**DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format), and so on) always contain sRGB gamma-corrected data.</span></span> <span data-ttu-id="c7dd8-114">Les formats d’affichage à valeurs float (actuellement uniquement [**dxgi \_ format \_ R16G16B16A16 \_ float**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format)) contiennent des données linéaires.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-114">Float-valued display formats (currently only [**DXGI\_FORMAT\_R16G16B16A16\_FLOAT**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format)) contain linear-valued data.</span></span>

<span data-ttu-id="c7dd8-115">Le \_ [modificateur de format](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) sRVB indique au système d’exploitation d’aider l’application à placer des données sRVB à l’écran.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-115">The \_SRGB [format modifier](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) indicates to the operating system to help the app place sRGB data on the screen.</span></span> <span data-ttu-id="c7dd8-116">L’application doit toujours placer les données sRVB dans des mémoires tampons d’arrière-plan avec des formats à valeurs entières pour présenter les données sRVB à l’écran, même si les données n’ont pas ce modificateur de format dans son nom de format.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-116">The app must always place sRGB data into back buffers with integer-valued formats to present the sRGB data to the screen, even if the data doesn't have this format modifier in its format name.</span></span> <span data-ttu-id="c7dd8-117">Pour obtenir la liste complète des formats d’analyse d’affichage :</span><span class="sxs-lookup"><span data-stu-id="c7dd8-117">For a complete list of display scan-out formats:</span></span>

-   [<span data-ttu-id="c7dd8-118">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 12,1</span><span class="sxs-lookup"><span data-stu-id="c7dd8-118">DXGI Format Support for Direct3D Feature Level 12.1 Hardware</span></span>](hardware-support-for-direct3d-12-1-formats.md)
-   [<span data-ttu-id="c7dd8-119">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 12,0</span><span class="sxs-lookup"><span data-stu-id="c7dd8-119">DXGI Format Support for Direct3D Feature Level 12.0 Hardware</span></span>](hardware-support-for-direct3d-12-0-formats.md)
-   [<span data-ttu-id="c7dd8-120">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="c7dd8-120">DXGI Format Support for Direct3D Feature Level 11.1 Hardware</span></span>](format-support-for-direct3d-11-1-feature-level-hardware.md)
-   [<span data-ttu-id="c7dd8-121">Prise en charge du format DXGI pour le matériel de niveau de fonctionnalité Direct3D 11,0</span><span class="sxs-lookup"><span data-stu-id="c7dd8-121">DXGI Format Support for Direct3D Feature Level 11.0 Hardware</span></span>](format-support-for-direct3d-11-0-feature-level-hardware.md)
-   <span data-ttu-id="c7dd8-122">[Prise en charge matérielle pour les formats Direct3D 10Level9](/previous-versions//ff471324(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="c7dd8-122">[Hardware Support for Direct3D 10Level9 Formats](/previous-versions//ff471324(v=vs.85))</span></span>
-   <span data-ttu-id="c7dd8-123">[Prise en charge du matériel pour les formats Direct3D 10,1](/previous-versions//cc627091(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="c7dd8-123">[Hardware Support for Direct3D 10.1 Formats](/previous-versions//cc627091(v=vs.85))</span></span>
-   <span data-ttu-id="c7dd8-124">[Prise en charge matérielle pour les formats Direct3D 10](/previous-versions//cc627090(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="c7dd8-124">[Hardware Support for Direct3D 10 Formats](/previous-versions//cc627090(v=vs.85))</span></span>

<span data-ttu-id="c7dd8-125">Lorsque vous écrivez des valeurs de sortie à virgule flottante à partir du nuanceur de pixels dans des vues de cible de rendu (**RenderTargetView**) avec le \_ [modificateur de format](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) sRVB lié au [pipeline](/windows/desktop/direct3d11/overviews-direct3d-11-graphics-pipeline), vous les convertissez en espace de couleurs corrigé gamma 2,2.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-125">When you write floating-point output values from the pixel shader into render-target views (**RenderTargetView** s) with the \_SRGB [format modifier](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) that are bound to the [pipeline](/windows/desktop/direct3d11/overviews-direct3d-11-graphics-pipeline), you convert them to gamma 2.2-corrected color space.</span></span> <span data-ttu-id="c7dd8-126">De même, lorsque les vues de ressource de nuanceur (**ShaderResourceView**) avec le \_ modificateur de format sRVB sont liées au pipeline, vous convertissez les valeurs de l’espace de couleurs gamma 2,2-corrigé en espace de couleurs linéaire lorsque vous les Lisez à partir de **ShaderResourceView** s.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-126">Similarly, when shader-resource views (**ShaderResourceView** s) with the \_SRGB format modifier are bound to the pipeline, you convert the values from gamma 2.2-corrected color space to linear color space when you read them from the **ShaderResourceView** s.</span></span> <span data-ttu-id="c7dd8-127">Le nuanceur peut ensuite effectuer des opérations sur ceux-ci.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-127">The shader can then perform operations on them.</span></span>

<span data-ttu-id="c7dd8-128">Par exemple, utilisez un code similaire à celui-ci pour écrire des valeurs de sortie à virgule flottante à partir d’un nuanceur dans un format **RenderTargetView** :</span><span class="sxs-lookup"><span data-stu-id="c7dd8-128">For example, use code similar to this to write floating-point output values from a shader into a **RenderTargetView** format:</span></span>


```
struct PSOut
{
    float4 color : SV_Target;
};

PSOut S( PSIn input )
{
    PSOut output;
    output.color = float4( 1.0, 0.0, 0.0, 1.0 );
    return output;
}
```



<span data-ttu-id="c7dd8-129">Lorsque la routine de est retournée, les valeurs à virgule flottante (1, 0, 0, 1) sont converties au format **RenderTargetView** .</span><span class="sxs-lookup"><span data-stu-id="c7dd8-129">When the 'S' routine returns, the floating point (1, 0, 0, 1) values are converted to the **RenderTargetView** format.</span></span> <span data-ttu-id="c7dd8-130">Ensuite, si vous assignez le \_ [modificateur de format](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) sRGB à **RenderTargetView**, la conversion gamma se produit.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-130">Then, if you assign the \_SRGB [format modifier](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) to the **RenderTargetView**, the gamma conversion occurs.</span></span>

<span data-ttu-id="c7dd8-131">Voici les étapes à suivre pour vous assurer que le contenu affiché sur l’écran présente la meilleure précision en matière de couleurs.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-131">These are steps to follow to ensure that the content that is displayed on the screen has the best color accuracy.</span></span>

<span data-ttu-id="c7dd8-132">**Pour garantir la précision des couleurs dans le pipeline**</span><span class="sxs-lookup"><span data-stu-id="c7dd8-132">**To ensure color accuracy in the pipeline**</span></span>

1.  <span data-ttu-id="c7dd8-133">Si une texture contient du contenu sRVB, assurez-vous que le **ShaderResourceView** a le \_ [modificateur de format](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) sRVB. ainsi, lorsque vous lisez à partir du **ShaderResourceView** dans le nuanceur, vous convertissez le contenu de la texture de l’espace de couleurs gamma 2,2-corrigé en espace colorimétrique linéaire.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-133">If a texture has sRGB content, ensure the **ShaderResourceView** has the \_SRGB [format modifier](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) so when you read from the **ShaderResourceView** into the shader, you convert the texture content from gamma 2.2-corrected color space to linear color space.</span></span>
2.  <span data-ttu-id="c7dd8-134">Assurez-vous que le **RenderTargetView** a également le \_ [modificateur de format](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) sRGB afin que les valeurs de sortie du nuanceur soient converties.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-134">Ensure the **RenderTargetView** also has the \_SRGB [format modifier](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) so the shader output values are gamma converted.</span></span>

<span data-ttu-id="c7dd8-135">Si vous suivez les étapes précédentes, quand vous appelez la méthode [**IDXGISwapChain1 ::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) , le contenu qui s’affiche sur l’écran présente le meilleur niveau de précision des couleurs.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-135">If you follow the preceding steps, when you call the [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) method, the content that is displayed on the screen has the best color accuracy.</span></span>

<span data-ttu-id="c7dd8-136">Vous pouvez utiliser la méthode [**ID3D11Device :: CreateRenderTargetView**](/windows/desktop/api/d3d11/nf-d3d11-id3d11device-createrendertargetview) pour créer des vues **\_ \_ \* \_ sRVB au format dxgi** sur les mémoires tampons d’arrière-plan à partir d’une chaîne de permutation que vous créez uniquement avec un format **dxgi \_ \_ \* \_ UNORM** .</span><span class="sxs-lookup"><span data-stu-id="c7dd8-136">You can use the [**ID3D11Device::CreateRenderTargetView**](/windows/desktop/api/d3d11/nf-d3d11-id3d11device-createrendertargetview) method to create **DXGI\_FORMAT\_\*\_SRGB** views on back buffers from a swap chain that you create only with a **DXGI\_FORMAT\_\*\_UNORM** format.</span></span> <span data-ttu-id="c7dd8-137">Il s’agit d’une exception spéciale à la règle pour créer des vues de cible de rendu, ce qui indique que vous pouvez utiliser un format différent avec **ID3D11Device :: CreateRenderTargetView** uniquement si vous avez créé la ressource que vous souhaitez afficher avec le **format dxgi sans \_ \_ \* \_ type**.</span><span class="sxs-lookup"><span data-stu-id="c7dd8-137">This is a special exception to the rule for creating render-target views, which states that you can use a different format with **ID3D11Device::CreateRenderTargetView** only if you created the resource that you want to view with **DXGI\_FORMAT\_\*\_TYPELESS**.</span></span>

<span data-ttu-id="c7dd8-138">Pour plus d’informations sur les règles de conversion des données, consultez [règles de conversion des données](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-data-conversion).</span><span class="sxs-lookup"><span data-stu-id="c7dd8-138">For more info about rules for converting data, see [Data Conversion Rules](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-data-conversion).</span></span>

<span data-ttu-id="c7dd8-139">Pour plus d’informations sur la façon de lire et d’écrire simultanément dans une texture, consultez [décompresser et empaqueter le \_ format DXGI pour la modification d’image In-Place](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-unpacking-packing-dxgi-format).</span><span class="sxs-lookup"><span data-stu-id="c7dd8-139">For info about how to simultaneously both read from and write to a texture, see [Unpacking and Packing DXGI\_FORMAT for In-Place Image Editing](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-unpacking-packing-dxgi-format).</span></span>

## <a name="related-topics"></a><span data-ttu-id="c7dd8-140">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c7dd8-140">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c7dd8-141">Amélioration de la présentation avec le modèle de retournement, les rectangles modifiés et les zones défilantes</span><span class="sxs-lookup"><span data-stu-id="c7dd8-141">Enhancing presentation with the flip model, dirty rectangles, and scrolled areas</span></span>](dxgi-1-2-presentation-improvements.md)
</dt> </dl>

 

 
