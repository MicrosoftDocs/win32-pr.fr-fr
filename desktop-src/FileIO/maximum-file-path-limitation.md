---
description: Limite de longueur maximale du chemin d’accès.
title: Limite de longueur maximale du chemin d’accès
ms.topic: article
ms.custom: contperf-fy21q1
ms.date: 09/15/2020
ms.openlocfilehash: 3d71d87f69aeb224cde256ce78bd29fd0bf5c291
ms.sourcegitcommit: 78b64f3865e64768b5319d4f010032ee68924a98
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/13/2021
ms.locfileid: "107314802"
---
# <a name="maximum-path-length-limitation"></a><span data-ttu-id="4473d-103">Limite de longueur maximale du chemin d’accès</span><span class="sxs-lookup"><span data-stu-id="4473d-103">Maximum Path Length Limitation</span></span>

<span data-ttu-id="4473d-104">Dans l’API Windows (avec quelques exceptions décrites dans les paragraphes suivants), la longueur maximale d’un chemin d’accès est le **\_ chemin d’accès** maximal, qui est défini sous la forme de 260 caractères.</span><span class="sxs-lookup"><span data-stu-id="4473d-104">In the Windows API (with some exceptions discussed in the following paragraphs), the maximum length for a path is **MAX\_PATH**, which is defined as 260 characters.</span></span> <span data-ttu-id="4473d-105">Un chemin d’accès local est structuré dans l’ordre suivant : lettre de lecteur, signe deux-points, barre oblique inverse, composants de nom séparés par des barres obliques inverses et caractère null de fin.</span><span class="sxs-lookup"><span data-stu-id="4473d-105">A local path is structured in the following order: drive letter, colon, backslash, name components separated by backslashes, and a terminating null character.</span></span> <span data-ttu-id="4473d-106">Par exemple, le chemin d’accès maximal sur le lecteur D est « D : \\ *une chaîne de chemin d’accès de 256 caractères* &lt; &gt; nulle », où « &lt; nul &gt; » représente le caractère null de fin invisible pour la page de codes actuelle du système.</span><span class="sxs-lookup"><span data-stu-id="4473d-106">For example, the maximum path on drive D is "D:\\*some 256-character path string*&lt;NUL&gt;" where "&lt;NUL&gt;" represents the invisible terminating null character for the current system codepage.</span></span> <span data-ttu-id="4473d-107">(Les caractères < > sont utilisés ici pour une clarté visuelle et ne peuvent pas faire partie d’une chaîne de chemin d’accès valide.)</span><span class="sxs-lookup"><span data-stu-id="4473d-107">(The characters < > are used here for visual clarity and cannot be part of a valid path string.)</span></span>

<span data-ttu-id="4473d-108">Par exemple, vous pouvez atteindre cette limitation si vous clonez un référentiel git qui contient des noms de fichiers longs dans un dossier qui a lui-même un nom long.</span><span class="sxs-lookup"><span data-stu-id="4473d-108">For example, you may hit this limitation if you are cloning a git repo that has long file names into a folder that itself has a long name.</span></span>


> [!Note]  
> <span data-ttu-id="4473d-109">Les fonctions d’e/s de fichier de l’API Windows convertissent « / » en « » dans le cadre \\ de la conversion du nom en nom de style NT, sauf en cas d’utilisation du \\ \\ \\ préfixe « ? », comme indiqué dans les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="4473d-109">File I/O functions in the Windows API convert "/" to "\\" as part of converting the name to an NT-style name, except when using the "\\\\?\\" prefix as detailed in the following sections.</span></span>

<span data-ttu-id="4473d-110">L’API Windows possède de nombreuses fonctions qui ont également des versions Unicode pour autoriser un chemin d’accès de longueur étendue pour une longueur maximale du chemin d’accès de 32 767 caractères.</span><span class="sxs-lookup"><span data-stu-id="4473d-110">The Windows API has many functions that also have Unicode versions to permit an extended-length path for a maximum total path length of 32,767 characters.</span></span> <span data-ttu-id="4473d-111">Ce type de chemin d’accès est composé de composants séparés par des barres obliques inverses, jusqu’à la valeur retournée dans le paramètre *lpMaximumComponentLength* de la fonction [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) (cette valeur est généralement de 255 caractères).</span><span class="sxs-lookup"><span data-stu-id="4473d-111">This type of path is composed of components separated by backslashes, each up to the value returned in the *lpMaximumComponentLength* parameter of the [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) function (this value is commonly 255 characters).</span></span> <span data-ttu-id="4473d-112">Pour spécifier un chemin d’accès de longueur étendue, utilisez le \\ \\ \\ préfixe «  ? ».</span><span class="sxs-lookup"><span data-stu-id="4473d-112">To specify an extended-length path, use the "\\\\?\\" prefix.</span></span> <span data-ttu-id="4473d-113">Par exemple, « \\ \\ ? \\ D : \\ *chemin d’accès très long*».</span><span class="sxs-lookup"><span data-stu-id="4473d-113">For example, "\\\\?\\D:\\*very long path*".</span></span>

> [!Note]  
> <span data-ttu-id="4473d-114">Le chemin d’accès maximal de 32 767 caractères est approximatif, car le \\ \\ \\ préfixe «  ? » peut être étendu à une chaîne plus longue par le système au moment de l’exécution, et cette expansion s’applique à la longueur totale.</span><span class="sxs-lookup"><span data-stu-id="4473d-114">The maximum path of 32,767 characters is approximate, because the "\\\\?\\" prefix may be expanded to a longer string by the system at run time, and this expansion applies to the total length.</span></span>

<span data-ttu-id="4473d-115">Le \\ \\ \\ préfixe «  ? » peut également être utilisé avec les chemins d’accès construits selon la Convention d’affectation des noms (UNC).</span><span class="sxs-lookup"><span data-stu-id="4473d-115">The "\\\\?\\" prefix can also be used with paths constructed according to the universal naming convention (UNC).</span></span> <span data-ttu-id="4473d-116">Pour spécifier un tel chemin d’accès à l’aide de l’UNC, utilisez le signe « \\ \\ ? \\ Préfixe UNC \\ .</span><span class="sxs-lookup"><span data-stu-id="4473d-116">To specify such a path using UNC, use the "\\\\?\\UNC\\" prefix.</span></span> <span data-ttu-id="4473d-117">Par exemple, « \\ \\ ? \\ \\ \\ Partage de serveur UNC», où « serveur » est le nom de l’ordinateur et « partage » est le nom du dossier partagé.</span><span class="sxs-lookup"><span data-stu-id="4473d-117">For example, "\\\\?\\UNC\\server\\share", where "server" is the name of the computer and "share" is the name of the shared folder.</span></span> <span data-ttu-id="4473d-118">Ces préfixes ne sont pas utilisés dans le chemin d’accès lui-même.</span><span class="sxs-lookup"><span data-stu-id="4473d-118">These prefixes are not used as part of the path itself.</span></span> <span data-ttu-id="4473d-119">Elles indiquent que le chemin d’accès doit être passé au système avec une modification minimale, ce qui signifie que vous ne pouvez pas utiliser des barres obliques pour représenter des séparateurs de chemin d’accès, ou un point pour représenter le répertoire actif, ou des points doubles pour représenter le répertoire parent.</span><span class="sxs-lookup"><span data-stu-id="4473d-119">They indicate that the path should be passed to the system with minimal modification, which means that you cannot use forward slashes to represent path separators, or a period to represent the current directory, or double dots to represent the parent directory.</span></span> <span data-ttu-id="4473d-120">Étant donné que vous ne pouvez pas utiliser le \\ \\ \\ préfixe «  ? » avec un chemin d’accès relatif, les chemins d’accès relatifs sont toujours limités à un nombre maximal de caractères de **chemin d' \_ accès** .</span><span class="sxs-lookup"><span data-stu-id="4473d-120">Because you cannot use the "\\\\?\\" prefix with a relative path, relative paths are always limited to a total of **MAX\_PATH** characters.</span></span>

<span data-ttu-id="4473d-121">Il n’est pas nécessaire d’effectuer une normalisation Unicode sur les chaînes de chemin d’accès et de nom de fichier pour une utilisation par les fonctions d’API d’e/s de fichier Windows, car le système de fichiers traite les noms de chemin et de fichier comme une séquence opaque de **WCHAR** s.</span><span class="sxs-lookup"><span data-stu-id="4473d-121">There is no need to perform any Unicode normalization on path and file name strings for use by the Windows file I/O API functions because the file system treats path and file names as an opaque sequence of **WCHAR** s.</span></span> <span data-ttu-id="4473d-122">Toute normalisation nécessaire à votre application doit être effectuée avec cela à l’esprit, à l’extérieur des appels aux fonctions d’API d’e/s de fichier Windows associées.</span><span class="sxs-lookup"><span data-stu-id="4473d-122">Any normalization that your application requires should be performed with this in mind, external of any calls to related Windows file I/O API functions.</span></span>

<span data-ttu-id="4473d-123">Lors de l’utilisation d’une API pour créer un répertoire, le chemin d’accès spécifié ne peut pas être tellement long que vous ne pouvez pas ajouter un nom de fichier 8,3 (autrement dit, le nom du répertoire ne peut pas dépasser le **\_ chemin d’accès maximal** moins 12).</span><span class="sxs-lookup"><span data-stu-id="4473d-123">When using an API to create a directory, the specified path cannot be so long that you cannot append an 8.3 file name (that is, the directory name cannot exceed **MAX\_PATH** minus 12).</span></span>

<span data-ttu-id="4473d-124">L’interpréteur de commandes et le système de fichiers ont des exigences différentes.</span><span class="sxs-lookup"><span data-stu-id="4473d-124">The shell and the file system have different requirements.</span></span> <span data-ttu-id="4473d-125">Il est possible de créer un chemin d’accès avec l’API Windows que l’interface utilisateur de l’interpréteur de commandes ne peut pas interpréter correctement.</span><span class="sxs-lookup"><span data-stu-id="4473d-125">It is possible to create a path with the Windows API that the shell user interface is not able to interpret properly.</span></span>

## <a name="enable-long-paths-in-windows-10-version-1607-and-later"></a><span data-ttu-id="4473d-126">Activer les chemins d’accès longs dans Windows 10, version 1607 et versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="4473d-126">Enable Long Paths in Windows 10, Version 1607, and Later</span></span>

<span data-ttu-id="4473d-127">À partir de Windows 10, version 1607, les limitations de **\_ chemin d’accès maximales** ont été supprimées des fonctions de répertoire et de fichier Win32 courantes.</span><span class="sxs-lookup"><span data-stu-id="4473d-127">Starting in Windows 10, version 1607, **MAX\_PATH** limitations have been removed from common Win32 file and directory functions.</span></span> <span data-ttu-id="4473d-128">Toutefois, vous devez vous abonner au nouveau comportement.</span><span class="sxs-lookup"><span data-stu-id="4473d-128">However, you must opt-in to the new behavior.</span></span>

<span data-ttu-id="4473d-129">Pour activer le nouveau comportement de chemin d’accès long, les deux conditions suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="4473d-129">To enable the new long path behavior, both of the following conditions must be met:</span></span>

* <span data-ttu-id="4473d-130">La clé de Registre `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` doit exister et avoir la valeur 1.</span><span class="sxs-lookup"><span data-stu-id="4473d-130">The registry key `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` must exist and be set to 1.</span></span> <span data-ttu-id="4473d-131">La valeur de la clé est mise en cache par le système (par processus) après le premier appel à une fonction de répertoire ou de fichier Win32 affectée (voir ci-dessous pour obtenir la liste des fonctions).</span><span class="sxs-lookup"><span data-stu-id="4473d-131">The key's value will be cached by the system (per process) after the first call to an affected Win32 file or directory function (see below for the list of functions).</span></span> <span data-ttu-id="4473d-132">La clé de registre ne sera pas rechargée pendant la durée de vie du processus.</span><span class="sxs-lookup"><span data-stu-id="4473d-132">The registry key will not be reloaded during the lifetime of the process.</span></span> <span data-ttu-id="4473d-133">Pour que toutes les applications sur le système reconnaissent la valeur de la clé, un redémarrage peut être nécessaire car certains processus peuvent avoir démarré avant que la clé ait été définie.</span><span class="sxs-lookup"><span data-stu-id="4473d-133">In order for all apps on the system to recognize the value of the key, a reboot might be required because some processes may have started before the key was set.</span></span>

<span data-ttu-id="4473d-134">Vous pouvez également copier ce code dans un `.reg` fichier que vous pouvez définir pour vous :</span><span class="sxs-lookup"><span data-stu-id="4473d-134">You can also copy this code to a `.reg` file which can set this for you:</span></span>
```cmd
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem]
"LongPathsEnabled"=dword:00000001

```

> [!NOTE]  
> <span data-ttu-id="4473d-135">Cette clé de Registre peut également être contrôlée via stratégie de groupe à l’adresse `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths` .</span><span class="sxs-lookup"><span data-stu-id="4473d-135">This registry key can also be controlled via Group Policy at `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths`.</span></span>

* <span data-ttu-id="4473d-136">Le [manifeste d’application](../sbscs/application-manifests.md) doit également inclure l' `longPathAware` élément.</span><span class="sxs-lookup"><span data-stu-id="4473d-136">The [application manifest](../sbscs/application-manifests.md) must also include the `longPathAware` element.</span></span>

    ```XML
    <application xmlns="urn:schemas-microsoft-com:asm.v3">
        <windowsSettings xmlns:ws2="http://schemas.microsoft.com/SMI/2016/WindowsSettings">
            <ws2:longPathAware>true</ws2:longPathAware>
        </windowsSettings>
    </application>
    ```

<span data-ttu-id="4473d-137">Il s’agit des fonctions de gestion d’annuaire qui n’ont plus de restrictions de **\_ chemin d’accès maximales** si vous optez pour un chemin d’accès long : CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span><span class="sxs-lookup"><span data-stu-id="4473d-137">These are the directory management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span></span>

<span data-ttu-id="4473d-138">Il s’agit des fonctions de gestion de fichiers qui n’ont plus de restrictions de **\_ chemin d’accès au nombre maximal** si vous optez pour le comportement de chemin d’accès long : CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW</span><span class="sxs-lookup"><span data-stu-id="4473d-138">These are the file management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span></span>
