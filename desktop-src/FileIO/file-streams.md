---
description: Dans le système de fichiers NTFS, les flux contiennent les données écrites dans un fichier et qui fournissent plus d’informations sur un fichier que les attributs et les propriétés.
ms.assetid: 41dda6f1-a6d1-4e76-94f3-a72f9e491bee
title: Flux de fichiers (systèmes de fichiers locaux)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4a934a51225a886e3d5a7de4d9e1e91900fab460
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103755164"
---
# <a name="file-streams-local-file-systems"></a><span data-ttu-id="51b23-103">Flux de fichiers (systèmes de fichiers locaux)</span><span class="sxs-lookup"><span data-stu-id="51b23-103">File Streams (Local File Systems)</span></span>

<span data-ttu-id="51b23-104">Un flux est une séquence d’octets.</span><span class="sxs-lookup"><span data-stu-id="51b23-104">A stream is a sequence of bytes.</span></span> <span data-ttu-id="51b23-105">Dans le système de fichiers NTFS, les flux contiennent les données écrites dans un fichier et qui fournissent plus d’informations sur un fichier que les attributs et les propriétés.</span><span class="sxs-lookup"><span data-stu-id="51b23-105">In the NTFS file system, streams contain the data that is written to a file, and that gives more information about a file than attributes and properties.</span></span> <span data-ttu-id="51b23-106">Par exemple, vous pouvez créer un flux qui contient des mots clés de recherche ou l’identité du compte d’utilisateur qui crée un fichier.</span><span class="sxs-lookup"><span data-stu-id="51b23-106">For example, you can create a stream that contains search keywords, or the identity of the user account that creates a file.</span></span>

<span data-ttu-id="51b23-107">Chaque flux associé à un fichier a sa propre taille d’allocation, sa propre taille réelle et sa longueur de données valides :</span><span class="sxs-lookup"><span data-stu-id="51b23-107">Each stream that is associated with a file has its own allocation size, actual size, and valid data length:</span></span>

-   <span data-ttu-id="51b23-108">La taille d’allocation correspond à la quantité d’espace disque réservée pour un flux.</span><span class="sxs-lookup"><span data-stu-id="51b23-108">The allocation size is the amount of disk space that is reserved for a stream.</span></span>
-   <span data-ttu-id="51b23-109">La taille réelle est le nombre d’octets utilisés par un appelant.</span><span class="sxs-lookup"><span data-stu-id="51b23-109">The actual size is the number of bytes that are being used by a caller.</span></span>
-   <span data-ttu-id="51b23-110">La longueur de données valide (VDL) est le nombre d’octets qui sont initialisés à partir de la taille d’allocation pour le flux.</span><span class="sxs-lookup"><span data-stu-id="51b23-110">The valid data length (VDL) is the number of bytes that are initialized from the allocation size for the stream.</span></span>

<span data-ttu-id="51b23-111">Chaque flux conserve également son propre État pour la compression, le chiffrement et la plus faible.</span><span class="sxs-lookup"><span data-stu-id="51b23-111">Each stream also maintains its own state for compression, encryption, and sparseness.</span></span> <span data-ttu-id="51b23-112">L’attribut de fichier épars de l’attribut de fichier sur le fichier est défini dans le membre **dwFileAttributes** de la structure de [**\_ \_ données de recherche Win32**](/windows/desktop/api/MinWinBase/ns-minwinbase-win32_find_dataa) retournée par les fonctions [**FindFirstFile**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfileexa)et [**FindNextFile**](/windows/desktop/api/FileAPI/nf-fileapi-findnextfilea) si l’un des flux a déjà été fragmenté. **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="51b23-112">The **FILE\_ATTRIBUTE\_SPARSE\_FILE** attribute on the file is set in the **dwFileAttributes** member of the [**WIN32\_FIND\_DATA**](/windows/desktop/api/MinWinBase/ns-minwinbase-win32_find_dataa) structure returned from the [**FindFirstFile**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfileexa), and [**FindNextFile**](/windows/desktop/api/FileAPI/nf-fileapi-findnextfilea) functions if any of the streams have ever been sparse.</span></span> <span data-ttu-id="51b23-113">[**GetFileAttributes**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesa), [**GetFileAttributesEx**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesexa), [**GetFileAttributesTransacted**](/windows/desktop/api/WinBase/nf-winbase-getfileattributestransacteda), [**GetFileInformationByHandle**](/windows/desktop/api/FileAPI/nf-fileapi-getfileinformationbyhandle)et [**GetFileInformationByHandleEx**](/windows/desktop/api/WinBase/nf-winbase-getfileinformationbyhandleex) retournent l’État épars du flux de données par défaut si aucun flux n’est spécifié.</span><span class="sxs-lookup"><span data-stu-id="51b23-113">[**GetFileAttributes**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesa), [**GetFileAttributesEx**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesexa), [**GetFileAttributesTransacted**](/windows/desktop/api/WinBase/nf-winbase-getfileattributestransacteda), [**GetFileInformationByHandle**](/windows/desktop/api/FileAPI/nf-fileapi-getfileinformationbyhandle), and [**GetFileInformationByHandleEx**](/windows/desktop/api/WinBase/nf-winbase-getfileinformationbyhandleex) return the sparse state of the default data stream if no stream is specified.</span></span>

<span data-ttu-id="51b23-114">Aucun fichier n’est associé à un flux.</span><span class="sxs-lookup"><span data-stu-id="51b23-114">There are no file times associated with a stream.</span></span> <span data-ttu-id="51b23-115">Les heures de fichier d’un fichier sont mises à jour lorsqu’un flux de fichier est mis à jour.</span><span class="sxs-lookup"><span data-stu-id="51b23-115">The file times for a file are updated when any stream in a file is updated.</span></span>

<span data-ttu-id="51b23-116">Les verrous opportunistes sont conservés par flux.</span><span class="sxs-lookup"><span data-stu-id="51b23-116">Opportunistic locks are maintained per stream.</span></span> <span data-ttu-id="51b23-117">Les modes de partage sont également gérés par flux.</span><span class="sxs-lookup"><span data-stu-id="51b23-117">Sharing modes are also maintained per stream.</span></span> <span data-ttu-id="51b23-118">Lorsque l’accès en suppression est demandé sur un fichier, le système d’exploitation vérifie l’accès en suppression sur tous les flux ouverts dans un fichier.</span><span class="sxs-lookup"><span data-stu-id="51b23-118">When delete access is requested on a file, the operating system checks for delete access on all open streams in a file.</span></span> <span data-ttu-id="51b23-119">Si un autre processus a ouvert un flux sans l’autorisation de **\_ \_ Suppression de partage de fichiers** , vous ne pouvez pas ouvrir le fichier pour l’accès en suppression.</span><span class="sxs-lookup"><span data-stu-id="51b23-119">If another process has opened a stream without the **FILE\_SHARE\_DELETE** permission, you cannot open the file for delete access.</span></span>

<span data-ttu-id="51b23-120">Si un fichier en cours de copie a un flux de données et que le redirecteur réseau est utilisé, le fichier peut être copié uniquement si le client dispose à la fois de l’autorisation lecture et de l’autorisation attributs de lecture.</span><span class="sxs-lookup"><span data-stu-id="51b23-120">If a file being copied has a data stream and the network redirector is used, the file can only be copied if the client has both the read permission and the read attributes permission.</span></span>

## <a name="naming-conventions-for-streams"></a><span data-ttu-id="51b23-121">Conventions d’affectation des noms pour les flux</span><span class="sxs-lookup"><span data-stu-id="51b23-121">Naming Conventions for Streams</span></span>

<span data-ttu-id="51b23-122">Lorsqu’il est spécifié à partir de la ligne de commande de l’interpréteur de commandes Windows, le nom complet d’un flux est «*nom_fichier*:*nom du flux*: type de *flux*», comme dans l’exemple suivant : « myfile. dat : STREAM1 : $Data ».</span><span class="sxs-lookup"><span data-stu-id="51b23-122">When specified from the Windows shell command line, the full name of a stream is "*filename*:*stream name*:*stream type*", as in the following example: "myfile.dat:stream1:$DATA".</span></span>

<span data-ttu-id="51b23-123">Les caractères valides pour un nom de fichier sont également valides pour le nom du flux, y compris les espaces.</span><span class="sxs-lookup"><span data-stu-id="51b23-123">Any characters that are legal for a file name are also legal for the stream name, including spaces.</span></span> <span data-ttu-id="51b23-124">Pour plus d’informations, consultez [attribution d’un nom à un fichier](naming-a-file.md).</span><span class="sxs-lookup"><span data-stu-id="51b23-124">For more information, see [Naming a File](naming-a-file.md).</span></span> <span data-ttu-id="51b23-125">Le type de flux (également appelé code de type d’attribut) est interne au système de fichiers NTFS.</span><span class="sxs-lookup"><span data-stu-id="51b23-125">The stream type (also called an attribute type code) is internal to the NTFS file system.</span></span> <span data-ttu-id="51b23-126">Par conséquent, les utilisateurs ne peuvent pas créer de nouveaux types de flux, mais ils peuvent ouvrir des types de système de fichiers NTFS existants.</span><span class="sxs-lookup"><span data-stu-id="51b23-126">Users therefore can't create new stream types, but they can open existing NTFS file system types.</span></span> <span data-ttu-id="51b23-127">Les valeurs du spécificateur de type de flux commencent toujours par le symbole dollar ($).</span><span class="sxs-lookup"><span data-stu-id="51b23-127">Stream type specifier values always start with the dollar sign ($) symbol.</span></span> <span data-ttu-id="51b23-128">Pour obtenir la liste des types de flux, voir ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="51b23-128">See below for a list of stream types.</span></span>

<span data-ttu-id="51b23-129">Par défaut, le flux de données par défaut est sans nom.</span><span class="sxs-lookup"><span data-stu-id="51b23-129">By default, the default data stream is unnamed.</span></span> <span data-ttu-id="51b23-130">Pour spécifier entièrement le flux de données par défaut, utilisez «*filename*:: $Data », où $Data est le type de flux.</span><span class="sxs-lookup"><span data-stu-id="51b23-130">To fully specify the default data stream, use "*filename*::$DATA", where $DATA is the stream type.</span></span> <span data-ttu-id="51b23-131">Il s’agit de l’équivalent de «*filename*».</span><span class="sxs-lookup"><span data-stu-id="51b23-131">This is the equivalent of "*filename*".</span></span> <span data-ttu-id="51b23-132">Vous pouvez créer un flux nommé dans le fichier à l’aide des [conventions d’affectation des noms de fichiers](naming-a-file.md).</span><span class="sxs-lookup"><span data-stu-id="51b23-132">You can create a named stream in the file using the [file naming conventions](naming-a-file.md).</span></span> <span data-ttu-id="51b23-133">Notez que « $DATA » est un nom de flux légal.</span><span class="sxs-lookup"><span data-stu-id="51b23-133">Note that "$DATA" is a legal stream name.</span></span> <span data-ttu-id="51b23-134">Par exemple, le nom complet d’un flux nommé « $DATA » sur un fichier nommé «*Sample*» serait «*Sample*: $Data : $Data ».</span><span class="sxs-lookup"><span data-stu-id="51b23-134">For example, the full name of a stream named "$DATA" on a file named "*sample*" would be "*sample*:$DATA:$DATA".</span></span> <span data-ttu-id="51b23-135">Si vous avez créé un flux nommé « bar » dans le même fichier, son nom complet est «*Sample*: bar : $Data ».</span><span class="sxs-lookup"><span data-stu-id="51b23-135">If you created a stream named "bar" on the same file its full name would be "*sample*:bar:$DATA".</span></span>

<span data-ttu-id="51b23-136">Lorsque vous créez et utilisez des fichiers qui ont des noms à un seul caractère, préfixez le nom de fichier par un point suivi d’une barre oblique inverse (. \) ou utilisez un nom de chemin d’accès qualifié complet.</span><span class="sxs-lookup"><span data-stu-id="51b23-136">When creating and working with files that have one-character names, prefix the file name with period followed by a backslash (.\) or use a fully qualified path name.</span></span> <span data-ttu-id="51b23-137">Cela est dû au fait que Windows traite les noms de fichiers à un seul caractère comme des lettres de lecteur.</span><span class="sxs-lookup"><span data-stu-id="51b23-137">The reason to do this is that Windows treats one-character file names as drive letters.</span></span> <span data-ttu-id="51b23-138">Quand une lettre de lecteur est spécifiée avec un chemin d’accès relatif, un signe deux-points sépare la lettre de lecteur du chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="51b23-138">When a drive letter is specified with a relative path, a colon separates the drive letter from the path.</span></span> <span data-ttu-id="51b23-139">En cas d’ambiguïté quant au fait qu’un nom à un seul caractère est une lettre de lecteur ou un nom de fichier, Windows part du principe qu’il s’agit d’une lettre de lecteur si la chaîne qui suit le signe deux-points est un chemin d’accès valide, même si la lettre de lecteur n’est pas valide.</span><span class="sxs-lookup"><span data-stu-id="51b23-139">When there is an ambiguity about whether a one-character name is a drive letter or a file name, Windows assumes it is a a drive letter if the string following the colon is a valid path, even if the drive letter is invalid.</span></span>

## <a name="stream-types"></a><span data-ttu-id="51b23-140">Types de flux</span><span class="sxs-lookup"><span data-stu-id="51b23-140">Stream Types</span></span>

<span data-ttu-id="51b23-141">Voici la liste des types de flux NTFS, également appelés codes de type d’attribut.</span><span class="sxs-lookup"><span data-stu-id="51b23-141">Following is the list of NTFS stream types, also called attribute type codes.</span></span> <span data-ttu-id="51b23-142">Certains types de flux sont internes au système de fichiers NTFS et leur format n’est pas documenté.</span><span class="sxs-lookup"><span data-stu-id="51b23-142">Some of the stream types are internal to NTFS and their format is undocumented.</span></span>



| <span data-ttu-id="51b23-143">Type de flux</span><span class="sxs-lookup"><span data-stu-id="51b23-143">Stream Type</span></span>                | <span data-ttu-id="51b23-144">Description</span><span class="sxs-lookup"><span data-stu-id="51b23-144">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="51b23-145">:: $ATTRIBUTE \_ liste</span><span class="sxs-lookup"><span data-stu-id="51b23-145">::$ATTRIBUTE\_LIST</span></span>         | <span data-ttu-id="51b23-146">Contient une liste de tous les attributs qui composent le fichier et identifie l’emplacement de chaque attribut.</span><span class="sxs-lookup"><span data-stu-id="51b23-146">Contains a list of all attributes that make up the file and identifies where each attribute is located.</span></span>                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="51b23-147">:: $BITMAP</span><span class="sxs-lookup"><span data-stu-id="51b23-147">::$BITMAP</span></span>                  | <span data-ttu-id="51b23-148">Bitmap utilisée par les index pour gérer l’espace libre de l’arborescence b pour un répertoire.</span><span class="sxs-lookup"><span data-stu-id="51b23-148">A bitmap used by indexes to manage the b-tree free space for a directory.</span></span> <span data-ttu-id="51b23-149">L’arborescence binaire (b-Tree) est gérée par blocs de 4 Ko (quelle que soit la taille du cluster), ce qui permet de gérer l’allocation de ces segments.</span><span class="sxs-lookup"><span data-stu-id="51b23-149">The b-tree is managed in 4 KB chunks (regardless of cluster size) and this is used to manage the allocation of these chunks.</span></span> <span data-ttu-id="51b23-150">Ce type de flux est présent sur chaque répertoire.</span><span class="sxs-lookup"><span data-stu-id="51b23-150">This stream type is present on every directory.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="51b23-151">:: $DATA</span><span class="sxs-lookup"><span data-stu-id="51b23-151">::$DATA</span></span>                    | <span data-ttu-id="51b23-152">Flux de données.</span><span class="sxs-lookup"><span data-stu-id="51b23-152">Data stream.</span></span> <span data-ttu-id="51b23-153">Le flux de données par défaut n’a pas de nom.</span><span class="sxs-lookup"><span data-stu-id="51b23-153">The default data stream has no name.</span></span> <span data-ttu-id="51b23-154">Les flux de données peuvent être énumérés à l’aide des fonctions [**FindFirstStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findfirststreamw) et [**FindNextStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findnextstreamw) .</span><span class="sxs-lookup"><span data-stu-id="51b23-154">Data streams can be enumerated using the [**FindFirstStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findfirststreamw) and [**FindNextStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findnextstreamw) functions.</span></span>                                                                                                                                                                                                                                                |
| <span data-ttu-id="51b23-155">:: $EA</span><span class="sxs-lookup"><span data-stu-id="51b23-155">::$EA</span></span>                      | <span data-ttu-id="51b23-156">Contient des données d’attributs étendus.</span><span class="sxs-lookup"><span data-stu-id="51b23-156">Contains Extended Attributes data.</span></span>|
| <span data-ttu-id="51b23-157">:: \_ informations $EA</span><span class="sxs-lookup"><span data-stu-id="51b23-157">::$EA\_INFORMATION</span></span>         | <span data-ttu-id="51b23-158">Contient des informations de prise en charge sur les attributs étendus.</span><span class="sxs-lookup"><span data-stu-id="51b23-158">Contains support information about the Extended Attributes.</span></span>                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="51b23-159">:: $FILE \_ nom</span><span class="sxs-lookup"><span data-stu-id="51b23-159">::$FILE\_NAME</span></span>              | <span data-ttu-id="51b23-160">Nom du fichier, en caractères Unicode.</span><span class="sxs-lookup"><span data-stu-id="51b23-160">The name of the file, in Unicode characters.</span></span> <span data-ttu-id="51b23-161">Cela comprend le nom abrégé du fichier, ainsi que les liens physiques.</span><span class="sxs-lookup"><span data-stu-id="51b23-161">This includes the short name of the file as well as any hard links.</span></span>                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="51b23-162">:: $INDEX \_ allocation</span><span class="sxs-lookup"><span data-stu-id="51b23-162">::$INDEX\_ALLOCATION</span></span>       | <span data-ttu-id="51b23-163">Type de flux d’un répertoire.</span><span class="sxs-lookup"><span data-stu-id="51b23-163">The stream type of a directory.</span></span> <span data-ttu-id="51b23-164">Utilisé pour implémenter l’allocation de noms de fichiers pour des répertoires volumineux.</span><span class="sxs-lookup"><span data-stu-id="51b23-164">Used to implement filename allocation for large directories.</span></span> <span data-ttu-id="51b23-165">Ce flux représente le répertoire lui-même et contient toutes les données du répertoire.</span><span class="sxs-lookup"><span data-stu-id="51b23-165">This stream represents the directory itself and contains all of the data of the directory.</span></span> <span data-ttu-id="51b23-166">Les modifications apportées aux flux de ce type sont enregistrées dans le journal des modifications NTFS.</span><span class="sxs-lookup"><span data-stu-id="51b23-166">Changes to streams of this type are logged to the NTFS change journal.</span></span> <span data-ttu-id="51b23-167">Le nom de flux par défaut d’un $INDEX \_ type de flux d’allocation est $I 30 donc «*dirname*», «*dirname*:: $index \_ allocation » et «*dirname*: $I 30 : $index \_ allocation » sont tous équivalents.</span><span class="sxs-lookup"><span data-stu-id="51b23-167">The default stream name of an $INDEX\_ALLOCATION stream type is $I30 so "*DirName*", "*DirName*::$INDEX\_ALLOCATION", and "*DirName*:$I30:$INDEX\_ALLOCATION" are all equivalent.</span></span> |
| <span data-ttu-id="51b23-168">:: $INDEX \_ racine</span><span class="sxs-lookup"><span data-stu-id="51b23-168">::$INDEX\_ROOT</span></span>             | <span data-ttu-id="51b23-169">Ce flux représente la racine de l’arborescence binaire (b-Tree) d’un index.</span><span class="sxs-lookup"><span data-stu-id="51b23-169">This stream represents root of the b-tree of an index.</span></span> <span data-ttu-id="51b23-170">Ce type de flux est présent sur chaque répertoire.</span><span class="sxs-lookup"><span data-stu-id="51b23-170">This stream type is present on every directory.</span></span>                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="51b23-171">:: $LOGGED \_ flux de l’utilitaire \_</span><span class="sxs-lookup"><span data-stu-id="51b23-171">::$LOGGED\_UTILITY\_STREAM</span></span> | <span data-ttu-id="51b23-172">Semblable à :: $DATA mais les opérations sont journalisées dans le journal des modifications NTFS.</span><span class="sxs-lookup"><span data-stu-id="51b23-172">Similar to ::$DATA but operations are logged to the NTFS change journal.</span></span> <span data-ttu-id="51b23-173">Utilisé par EFS et le [NTFS transactionnel (TxF)](transactional-ntfs-portal.md).</span><span class="sxs-lookup"><span data-stu-id="51b23-173">Used by EFS and [Transactional NTFS (TxF)](transactional-ntfs-portal.md).</span></span> <span data-ttu-id="51b23-174">La paire «  :*StreamName*: $*STREAMTYPE*» pour EFS est «  : $EFS : $logged \_ Stream Utility \_ » et pour TxF est «  : $TxF \_ Data : $logged \_ Stream Utility \_ ».</span><span class="sxs-lookup"><span data-stu-id="51b23-174">The ":*StreamName*:$*StreamType*" pair for EFS is ":$EFS:$LOGGED\_UTILITY\_STREAM" and for TxF is ":$TXF\_DATA:$LOGGED\_UTILITY\_STREAM".</span></span>                                                                                                                                                    |
| <span data-ttu-id="51b23-175">:: $OBJECT \_ ID</span><span class="sxs-lookup"><span data-stu-id="51b23-175">::$OBJECT\_ID</span></span>              | <span data-ttu-id="51b23-176">ID de 16 octets permettant d’identifier le fichier du service de suivi des liaisons.</span><span class="sxs-lookup"><span data-stu-id="51b23-176">An 16-byte ID used to identify the file for the link-tracking service.</span></span>                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="51b23-177">:: $REPARSE \_ point</span><span class="sxs-lookup"><span data-stu-id="51b23-177">::$REPARSE\_POINT</span></span>          | <span data-ttu-id="51b23-178">Données du [point d’analyse](reparse-points.md) .</span><span class="sxs-lookup"><span data-stu-id="51b23-178">The [reparse point](reparse-points.md) data.</span></span>|



 

## <a name="related-topics"></a><span data-ttu-id="51b23-179">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="51b23-179">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="51b23-180">Utilisation des flux</span><span class="sxs-lookup"><span data-stu-id="51b23-180">Using Streams</span></span>](using-streams.md)
</dt> </dl>

 

 



