---
description: Considérations relatives au déplacement et au remplacement de fichiers à l’aide des fonctions CopyFileEx, CreateFile, ReplaceFile et MoveFileEx.
ms.assetid: 4872af0d-42e8-4576-9aa9-4b8671375f2e
title: Déplacement et remplacement de fichiers
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7d7f08d2bd8d07645076620e839d7d12f5969502
ms.sourcegitcommit: 3d9dce1bd6c84e2b51759e940aa95aa9b459cd20
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/04/2021
ms.locfileid: "106522891"
---
# <a name="moving-and-replacing-files"></a><span data-ttu-id="227af-103">Déplacement et remplacement de fichiers</span><span class="sxs-lookup"><span data-stu-id="227af-103">Moving and Replacing Files</span></span>

<span data-ttu-id="227af-104">Avant de pouvoir effectuer une opération de copie, le fichier source doit être fermé ou ouvert uniquement pour la lecture.</span><span class="sxs-lookup"><span data-stu-id="227af-104">Before a copy operation can be performed, the source file must be closed or opened only for reading.</span></span> <span data-ttu-id="227af-105">Aucun thread ne peut ouvrir le fichier source pour l’écriture.</span><span class="sxs-lookup"><span data-stu-id="227af-105">No thread can have the the source file opened for writing.</span></span> <span data-ttu-id="227af-106">Pour copier un fichier existant vers un nouveau fichier, utilisez la fonction [**CopyFile**](/windows/desktop/api/WinBase/nf-winbase-copyfile) ou [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) .</span><span class="sxs-lookup"><span data-stu-id="227af-106">To copy an existing file to a new one, use the [**CopyFile**](/windows/desktop/api/WinBase/nf-winbase-copyfile) or [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) function.</span></span> <span data-ttu-id="227af-107">Les applications peuvent spécifier si **CopyFile** et **CopyFileEx** échouent si le fichier de destination existe déjà.</span><span class="sxs-lookup"><span data-stu-id="227af-107">Applications can specify whether **CopyFile** and **CopyFileEx** fail if the destination file already exists.</span></span> <span data-ttu-id="227af-108">Si le fichier de destination existe et qu’il est ouvert, il doit avoir été ouvert avec les autorisations de partage applicables.</span><span class="sxs-lookup"><span data-stu-id="227af-108">If the destination file does exist and is open, it must have been opened with applicable sharing permissions.</span></span> <span data-ttu-id="227af-109">Pour plus d’informations, consultez [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea).</span><span class="sxs-lookup"><span data-stu-id="227af-109">For more information, see [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea).</span></span>

<span data-ttu-id="227af-110">La fonction [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) permet également à une application de spécifier l’adresse d’une fonction de rappel (voir [**CopyProgressRoutine**](/windows/desktop/api/WinBase/nc-winbase-lpprogress_routine)) qui est appelée chaque fois qu’une autre partie du fichier a été copiée.</span><span class="sxs-lookup"><span data-stu-id="227af-110">The [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) function also allows an application to specify the address of a callback function (see [**CopyProgressRoutine**](/windows/desktop/api/WinBase/nc-winbase-lpprogress_routine)) that is called each time another portion of the file has been copied.</span></span> <span data-ttu-id="227af-111">L’application peut utiliser ces informations pour afficher un indicateur qui indique le nombre total d’octets copiés en pourcentage de la taille totale du fichier.</span><span class="sxs-lookup"><span data-stu-id="227af-111">The application can use this information to display an indicator that shows the total number of bytes copied as a percent of the total file size.</span></span>

<span data-ttu-id="227af-112">La fonction [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) remplace un fichier par un autre fichier, avec la possibilité de créer une copie de sauvegarde du fichier d’origine.</span><span class="sxs-lookup"><span data-stu-id="227af-112">The [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) function replaces one file with another file, with the option of creating a backup copy of the original file.</span></span> <span data-ttu-id="227af-113">La fonction conserve les attributs du fichier d’origine, tels que l’heure de création, les listes de contrôle d’accès et l’attribut de chiffrement.</span><span class="sxs-lookup"><span data-stu-id="227af-113">The function preserves attributes of the original file, such as its creation time, ACLs, and encryption attribute.</span></span>

<span data-ttu-id="227af-114">Un fichier doit également être fermé avant qu’une application puisse le déplacer.</span><span class="sxs-lookup"><span data-stu-id="227af-114">A file must also be closed before an application can move it.</span></span> <span data-ttu-id="227af-115">Les fonctions [**MoveFile**](/windows/desktop/api/WinBase/nf-winbase-movefile) et [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) copient un fichier existant vers un nouvel emplacement et supprime l’original.</span><span class="sxs-lookup"><span data-stu-id="227af-115">The [**MoveFile**](/windows/desktop/api/WinBase/nf-winbase-movefile) and [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) functions copy an existing file to a new location and deletes the original.</span></span>

<span data-ttu-id="227af-116">La fonction [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) permet également à une application de spécifier le mode de déplacement du fichier.</span><span class="sxs-lookup"><span data-stu-id="227af-116">The [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) function also allows an application to specify how to move the file.</span></span> <span data-ttu-id="227af-117">La fonction peut remplacer un fichier existant, déplacer un fichier sur plusieurs volumes et retarder le déplacement du fichier jusqu’au redémarrage du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="227af-117">The function can replace an existing file, move a file across volumes, and delay moving the file until the operating system is restarted.</span></span>

 

 



