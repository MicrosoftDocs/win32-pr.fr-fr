---
description: Cette rubrique décrit les alternatives à l’utilisation de l’API NTFS transactionnelle (TxF) dans les scénarios d’utilisation courants.
ms.assetid: 9ee26e7e-990e-4cd3-8180-f0fcaac2b752
title: Alternatives à l’utilisation de NTFS transactionnel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cc69974f27abfba0323ea4d3f16a720e5e99e69d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106533816"
---
# <a name="alternatives-to-using-transactional-ntfs"></a><span data-ttu-id="bb21e-103">Alternatives à l’utilisation de NTFS transactionnel</span><span class="sxs-lookup"><span data-stu-id="bb21e-103">Alternatives to using Transactional NTFS</span></span>

-   [<span data-ttu-id="bb21e-104">Résumé</span><span class="sxs-lookup"><span data-stu-id="bb21e-104">Abstract</span></span>](#abstract)
-   [<span data-ttu-id="bb21e-105">Introduction</span><span class="sxs-lookup"><span data-stu-id="bb21e-105">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="bb21e-106">Alternatives à TxF par scénario</span><span class="sxs-lookup"><span data-stu-id="bb21e-106">Alternatives to TxF by Scenario</span></span>](#alternatives-to-txf-by-scenario)
-   [<span data-ttu-id="bb21e-107">Applications mettant à jour un seul fichier avec des données de type « document »</span><span class="sxs-lookup"><span data-stu-id="bb21e-107">Applications updating a single file with "document-like" data</span></span>](#applications-updating-a-single-file-with-document-like-data)
-   [<span data-ttu-id="bb21e-108">Applications effectuant des mises à jour de plusieurs fichiers et/ou de la ruche du Registre</span><span class="sxs-lookup"><span data-stu-id="bb21e-108">Applications performing updates to multiple files and/or to the registry hive</span></span>](#applications-performing-updates-to-multiple-files-andor-to-the-registry-hive)
-   [<span data-ttu-id="bb21e-109">Applications gérant un ensemble de données structurées</span><span class="sxs-lookup"><span data-stu-id="bb21e-109">Applications managing a set of structured data</span></span>](#applications-managing-a-set-of-structured-data)
-   [<span data-ttu-id="bb21e-110">Applications avec transactions impliquant des fichiers sur un volume NTFS local et des tables dans une base de données SQL externe</span><span class="sxs-lookup"><span data-stu-id="bb21e-110">Applications with Transactions involving files on a local NTFS volume and Tables in an external SQL database</span></span>](#applications-with-transactions-involving-files-on-a-local-ntfs-volume-and-tables-in-an-external-sql-database)
-   [<span data-ttu-id="bb21e-111">Fermeture & action recommandée</span><span class="sxs-lookup"><span data-stu-id="bb21e-111">Closing & Recommended Action</span></span>](/windows)

## <a name="abstract"></a><span data-ttu-id="bb21e-112">Résumé</span><span class="sxs-lookup"><span data-stu-id="bb21e-112">Abstract</span></span>

<span data-ttu-id="bb21e-113">Microsoft recommande vivement aux développeurs d’examiner l’utilisation des alternatives décrites (ou, dans certains cas, d’examiner d’autres solutions) au lieu d’adopter une plateforme d’API qui n’est peut-être pas disponible dans les futures versions de Windows.</span><span class="sxs-lookup"><span data-stu-id="bb21e-113">Microsoft strongly recommends developers investigate utilizing the discussed alternatives (or in some cases, investigate other alternatives) rather than adopting an API platform which may not be available in future versions of Windows.</span></span>

## <a name="introduction"></a><span data-ttu-id="bb21e-114">Introduction</span><span class="sxs-lookup"><span data-stu-id="bb21e-114">Introduction</span></span>

<span data-ttu-id="bb21e-115">TxF a été introduit avec Windows Vista comme un moyen d’introduire des transactions de fichier atomiques pour Windows.</span><span class="sxs-lookup"><span data-stu-id="bb21e-115">TxF was introduced with Windows Vista as a means to introduce atomic file transactions to Windows.</span></span> <span data-ttu-id="bb21e-116">Elle permet aux développeurs Windows d’avoir une atomicité transactionnelle pour les opérations de fichier dans les transactions avec un seul fichier, dans les transactions impliquant plusieurs fichiers et dans les transactions qui couvrent plusieurs sources, telles que le registre (via TxR) et les bases de données (telles que SQL).</span><span class="sxs-lookup"><span data-stu-id="bb21e-116">It allows for Windows developers to have transactional atomicity for file operations in transactions with a single file, in transactions involving multiple files, and in transactions spanning multiple sources – such as the Registry (through TxR), and databases (such as SQL).</span></span> <span data-ttu-id="bb21e-117">Tandis que TxF est un ensemble puissant d’API, il a été très limité en ce qui concerne les développeurs dans cette plateforme d’API, depuis Windows Vista, principalement en raison de sa complexité et de différentes nuances que les développeurs doivent prendre en compte dans le cadre du développement d’applications.</span><span class="sxs-lookup"><span data-stu-id="bb21e-117">While TxF is a powerful set of APIs, there has been extremely limited developer interest in this API platform since Windows Vista primarily due to its complexity and various nuances which developers need to consider as part of application development.</span></span> <span data-ttu-id="bb21e-118">Par conséquent, Microsoft envisage de déprécier les API TxF dans une future version de Windows afin de concentrer les efforts de développement et de maintenance sur d’autres fonctionnalités et API qui ont plus de valeur pour une plus grande majorité des clients.</span><span class="sxs-lookup"><span data-stu-id="bb21e-118">As a result, Microsoft is considering deprecating TxF APIs in a future version of Windows to focus development and maintenance efforts on other features and APIs which have more value to a larger majority of customers.</span></span> <span data-ttu-id="bb21e-119">La section suivante décrit des exemples de méthodes alternatives pour obtenir des résultats similaires à ceux de TxF pour plusieurs types de scénarios d’application.</span><span class="sxs-lookup"><span data-stu-id="bb21e-119">The next section describes sample alternative methods to achieve similar results as TxF would for several types of application scenarios.</span></span>

## <a name="alternatives-to-txf-by-scenario"></a><span data-ttu-id="bb21e-120">Alternatives à TxF par scénario</span><span class="sxs-lookup"><span data-stu-id="bb21e-120">Alternatives to TxF by Scenario</span></span>

<span data-ttu-id="bb21e-121">Avec les limitations décrites ci-dessus, les développeurs doivent examiner les alternatives à TxF pour couvrir les scénarios d’application qui ne sont pas satisfaits par TxF.</span><span class="sxs-lookup"><span data-stu-id="bb21e-121">With the limitations described above, developers should investigate alternatives to TxF to cover application scenarios which are not met by TxF.</span></span> <span data-ttu-id="bb21e-122">Voici quelques suggestions d’alternatives aux utilisations courantes de TxF que les développeurs peuvent prendre en compte.</span><span class="sxs-lookup"><span data-stu-id="bb21e-122">Discussed here are some suggested alternatives to common uses of TxF for developers to consider.</span></span> <span data-ttu-id="bb21e-123">Notez que cette liste n’est ni exhaustive, ni complète.</span><span class="sxs-lookup"><span data-stu-id="bb21e-123">Note that this list is neither exhaustive nor complete.</span></span>

## <a name="applications-updating-a-single-file-with-document-like-data"></a><span data-ttu-id="bb21e-124">Applications mettant à jour un seul fichier avec des données de type « document »</span><span class="sxs-lookup"><span data-stu-id="bb21e-124">Applications updating a single file with "document-like" data</span></span>

<span data-ttu-id="bb21e-125">De nombreuses applications qui traitent des données de type « document » tendent à charger l’intégralité du document dans la mémoire, à les utiliser, puis à les réécrire pour enregistrer les modifications.</span><span class="sxs-lookup"><span data-stu-id="bb21e-125">Many applications which deal with "document-like" data tend to load the entire document into memory, operate on it, and then write it back out to save the changes.</span></span> <span data-ttu-id="bb21e-126">L’atomicité nécessaire ici est que les modifications sont complètement appliquées ou non appliquées, car un état incohérent rendrait le fichier endommagé.</span><span class="sxs-lookup"><span data-stu-id="bb21e-126">The needed atomicity here is that the changes either are completely applied or not applied at all, as an inconsistent state would render the file corrupt.</span></span> <span data-ttu-id="bb21e-127">Une approche courante consiste à écrire le document dans un nouveau fichier, puis à remplacer le fichier d’origine par le nouveau.</span><span class="sxs-lookup"><span data-stu-id="bb21e-127">A common approach is to write the document to a new file, then replace the original file with the new one.</span></span> <span data-ttu-id="bb21e-128">Pour ce faire, vous pouvez utiliser l’API [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) .</span><span class="sxs-lookup"><span data-stu-id="bb21e-128">One method to do this is with the [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) API.</span></span>

## <a name="applications-performing-updates-to-multiple-files-andor-to-the-registry-hive"></a><span data-ttu-id="bb21e-129">Applications effectuant des mises à jour de plusieurs fichiers et/ou de la ruche du Registre</span><span class="sxs-lookup"><span data-stu-id="bb21e-129">Applications performing updates to multiple files and/or to the registry hive</span></span>

<span data-ttu-id="bb21e-130">De nombreuses applications doivent effectuer atomiquement une mise à jour d’un ensemble de fichiers et du Registre.</span><span class="sxs-lookup"><span data-stu-id="bb21e-130">There are many applications which need to atomically perform an update to a set of files and to the registry.</span></span> <span data-ttu-id="bb21e-131">Ce scénario est le plus souvent réalisé par le biais d’une application de programme d’installation, par exemple Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="bb21e-131">This scenario is most commonly achieved through an installer application, such as Windows Installer.</span></span> <span data-ttu-id="bb21e-132">Pour plus d’informations sur Windows Installer, consultez [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="bb21e-132">For more information on Windows Installer, please refer to [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>

## <a name="applications-managing-a-set-of-structured-data"></a><span data-ttu-id="bb21e-133">Applications gérant un ensemble de données structurées</span><span class="sxs-lookup"><span data-stu-id="bb21e-133">Applications managing a set of structured data</span></span>

<span data-ttu-id="bb21e-134">De nombreuses applications gèrent un ensemble de structures de données propriétaires de types variables comme un moyen de stocker des données.</span><span class="sxs-lookup"><span data-stu-id="bb21e-134">Many applications manage some set of proprietary data structures of varying types as a means to store data.</span></span> <span data-ttu-id="bb21e-135">Un défi majeur pour ces applications est le processus de maintien de l’intégrité des pointeurs/références internes si une défaillance se produit pendant une opération de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="bb21e-135">A significant challenge for these applications is the process of maintaining the integrity of internal pointers/references if a failure occurs during an update operation.</span></span> <span data-ttu-id="bb21e-136">La création du mécanisme pour cela est en fait un « problème difficile » et, par conséquent, la plupart des applications s’appuient sur un véritable serveur de base de données pour gérer leur jeu de données.</span><span class="sxs-lookup"><span data-stu-id="bb21e-136">Creating the mechanism for this is indeed a "hard problem", and therefore most applications will rely on a true database server to manage their dataset.</span></span>

<span data-ttu-id="bb21e-137">Voici deux suggestions pour vous aider à gérer les données structurées :</span><span class="sxs-lookup"><span data-stu-id="bb21e-137">Two suggestions to help manage structured data are:</span></span>

-   <span data-ttu-id="bb21e-138">Microsoft fournit la boîte de réception ESE (Extensible Storage Engine) dans Windows pour permettre aux applications d’effectuer des opérations de mise à jour et de récupération des données transactionnelles.</span><span class="sxs-lookup"><span data-stu-id="bb21e-138">Microsoft provides the Extensible Storage Engine (ESE) inbox in Windows to enable applications to perform transacted data update and retrieval operations.</span></span> <span data-ttu-id="bb21e-139">Pour plus d’informations sur le moteur de stockage extensible (ESE), consultez <https://msdn.microsoft.com/library/gg269259.aspx> .</span><span class="sxs-lookup"><span data-stu-id="bb21e-139">For more information on the Extensible Storage Engine (ESE), please see <https://msdn.microsoft.com/library/gg269259.aspx>.</span></span>
-   <span data-ttu-id="bb21e-140">Pour les applications qui requièrent un fournisseur de base de données plus puissant, robuste et évolutif, il est recommandé que les clients envisagent d’utiliser la fonctionnalité FileStream disponible avec Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bb21e-140">For applications that require a more powerful, robust, and scalable database provider, it is recommended that customers consider using the Filestream feature available with Microsoft SQL Server.</span></span> <span data-ttu-id="bb21e-141">Pour plus d’informations sur les flux de données SQL, consultez <https://technet.microsoft.com/library/bb933993.aspx> .</span><span class="sxs-lookup"><span data-stu-id="bb21e-141">For more information on SQL Filestreams, please see <https://technet.microsoft.com/library/bb933993.aspx>.</span></span>

## <a name="applications-with-transactions-involving-files-on-a-local-ntfs-volume-and-tables-in-an-external-sql-database"></a><span data-ttu-id="bb21e-142">Applications avec transactions impliquant des fichiers sur un volume NTFS local et des tables dans une base de données SQL externe</span><span class="sxs-lookup"><span data-stu-id="bb21e-142">Applications with Transactions involving files on a local NTFS volume and Tables in an external SQL database</span></span>

<span data-ttu-id="bb21e-143">Il existe des classes d’applications qui ont des besoins de jeu de données volumineux, ou qui doivent avoir une atomicité transactionnelle dans une opération impliquant une base de données externe et un stockage local.</span><span class="sxs-lookup"><span data-stu-id="bb21e-143">There are classes of applications which either have large dataset needs, or need to have transactional atomicity in an operation involving an external database and local storage.</span></span> <span data-ttu-id="bb21e-144">Pour ce scénario, il est fortement recommandé que les développeurs envisagent d’utiliser des flux de fichier SQL pour effectuer des opérations de fichier transactionnel.</span><span class="sxs-lookup"><span data-stu-id="bb21e-144">For this scenario, it is highly recommended that developers consider using SQL Filestreams to perform transactional file operations.</span></span> <span data-ttu-id="bb21e-145">Pour plus d’informations sur les flux de données SQL, consultez <https://technet.microsoft.com/library/bb933993.aspx> .</span><span class="sxs-lookup"><span data-stu-id="bb21e-145">For more information on SQL Filestreams, please see <https://technet.microsoft.com/library/bb933993.aspx>.</span></span>

## <a name="closing--recommended-action"></a><span data-ttu-id="bb21e-146">Fermeture & action recommandée</span><span class="sxs-lookup"><span data-stu-id="bb21e-146">Closing & Recommended Action</span></span>

<span data-ttu-id="bb21e-147">TxF est un ensemble complexe et en nuances d’API qui ne sont pas couramment utilisés par des applications tierces.</span><span class="sxs-lookup"><span data-stu-id="bb21e-147">TxF is a complex and nuanced set of APIs which are not commonly used by 3rd party applications.</span></span> <span data-ttu-id="bb21e-148">Avec la possibilité que ces API ne soient pas disponibles dans les futures versions de Windows, et le fait qu’il existe des moyens plus simples d’effectuer un grand nombre des scénarios pour lesquels TxF a été développé, Microsoft recommande fortement aux développeurs d’examiner ces autres moyens au lieu de créer une dépendance sur TxF dans leurs applications.</span><span class="sxs-lookup"><span data-stu-id="bb21e-148">With the possibility that these APIs may not be available in future versions of Windows, and the fact that there are simpler alternative means to achieve many of the scenarios which TxF was developed for, Microsoft strongly recommends developers to investigate those alternative means instead of creating a dependency on TxF in their applications.</span></span>

 

 
