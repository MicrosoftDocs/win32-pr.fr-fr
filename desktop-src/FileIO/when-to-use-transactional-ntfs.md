---
description: Utilisez le NTFS transactionnel pour maintenir l’intégrité des données.
ms.assetid: 886d6075-57e8-47db-aec5-77660d0a53f9
title: Quand utiliser le NTFS transactionnel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 28c0a134a8cb5824337022fedf14fe3db3c6f76c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106533947"
---
# <a name="when-to-use-transactional-ntfs"></a><span data-ttu-id="97d22-103">Quand utiliser le NTFS transactionnel</span><span class="sxs-lookup"><span data-stu-id="97d22-103">When to Use Transactional NTFS</span></span>

<span data-ttu-id="97d22-104">Une application peut utiliser le NTFS transactionnel (TxF) pour préserver l’intégrité des données sur le disque pendant des conditions d’erreur inattendues.</span><span class="sxs-lookup"><span data-stu-id="97d22-104">An application can use Transactional NTFS (TxF) to preserve the integrity of data on disk during unexpected error conditions.</span></span> <span data-ttu-id="97d22-105">En général, une application doit envisager d’utiliser TxF si l’application vide des fichiers et utilise d’autres techniques pour maintenir l’intégrité des données.</span><span class="sxs-lookup"><span data-stu-id="97d22-105">In general, an application should consider using TxF if the application is flushing files and using other techniques to maintain data integrity.</span></span> <span data-ttu-id="97d22-106">TxF peut offrir de meilleures performances et simplifier le code de gestion des erreurs de l’application tout en améliorant la récupération et la fiabilité des erreurs.</span><span class="sxs-lookup"><span data-stu-id="97d22-106">TxF can perform better and simplify the application's error handling code while improving error recovery and reliability.</span></span> <span data-ttu-id="97d22-107">Les sections suivantes de cette rubrique fournissent des exemples de scénarios d’utilisation de TxF.</span><span class="sxs-lookup"><span data-stu-id="97d22-107">The following sections in this topic provide examples of scenarios for you to use TxF.</span></span>

## <a name="updating-a-file"></a><span data-ttu-id="97d22-108">Mise à jour d’un fichier</span><span class="sxs-lookup"><span data-stu-id="97d22-108">Updating a File</span></span>

<span data-ttu-id="97d22-109">La mise à jour d’un fichier est une opération courante et généralement simple.</span><span class="sxs-lookup"><span data-stu-id="97d22-109">The updating of a file is a common and typically simple operation.</span></span> <span data-ttu-id="97d22-110">Toutefois, si le système ou l’application échoue pendant qu’une application met à jour des informations sur un disque, le résultat peut être catastrophique, car les données utilisateur peuvent être endommagées par une opération de mise à jour de fichier qui est partiellement terminée.</span><span class="sxs-lookup"><span data-stu-id="97d22-110">However, if the system or application fails while an application is updating information on a disk, the result can be catastrophic, because the user data can be corrupted by a file update operation that is partially completed.</span></span> <span data-ttu-id="97d22-111">Les applications robustes exécutent souvent des séquences complexes de copies de fichiers et de renommages de fichiers pour s’assurer que les données ne sont pas endommagées en cas de défaillance d’un système.</span><span class="sxs-lookup"><span data-stu-id="97d22-111">Robust applications often perform complex sequences of file copies and file renames to ensure that data is not corrupted if a system fails.</span></span>

<span data-ttu-id="97d22-112">TxF permet à une application de protéger facilement les opérations de mise à jour des fichiers en cas de défaillance du système ou de l’application.</span><span class="sxs-lookup"><span data-stu-id="97d22-112">TxF makes it simple for an application to protect file update operations from system or application failure.</span></span> <span data-ttu-id="97d22-113">Pour mettre à jour un fichier en toute sécurité, l’application ouvre le fichier en mode traité, effectue les mises à jour nécessaires, puis valide la transaction.</span><span class="sxs-lookup"><span data-stu-id="97d22-113">To update a file safely, the application opens the file in transacted mode, makes the necessary updates, and then commits the transaction.</span></span> <span data-ttu-id="97d22-114">Si le système ou l’application échoue au cours de la mise à jour du fichier, TxF restaure automatiquement le fichier à l’État où il se trouvait avant le début de la mise à jour des fichiers, ce qui évite l’endommagement des fichiers.</span><span class="sxs-lookup"><span data-stu-id="97d22-114">If the system or application fails during the file update, then TxF automatically restores the file to the state that it had before the file update began, which avoids file corruption.</span></span>

## <a name="multi-file-updates"></a><span data-ttu-id="97d22-115">Mises à jour de plusieurs fichiers</span><span class="sxs-lookup"><span data-stu-id="97d22-115">Multi-File Updates</span></span>

<span data-ttu-id="97d22-116">TxF est encore plus important quand une seule opération logique affecte plusieurs fichiers.</span><span class="sxs-lookup"><span data-stu-id="97d22-116">TxF is even more important when a single logical operation affects multiple files.</span></span> <span data-ttu-id="97d22-117">Par exemple, si vous souhaitez utiliser un outil pour renommer l’une des pages HTML ou ASP sur un site Web, un outil bien conçu corrige également tous les liens pour utiliser le nouveau nom de fichier.</span><span class="sxs-lookup"><span data-stu-id="97d22-117">For example, if you want to use a tool to rename one of the HTML or ASP pages on a website, a well-designed tool would also fix all links to use the new file name.</span></span> <span data-ttu-id="97d22-118">Toutefois, un échec au cours de cette opération laisse le site Web dans un état incohérent, avec certains liens faisant toujours référence à l’ancien nom de fichier.</span><span class="sxs-lookup"><span data-stu-id="97d22-118">However, a failure during this operation leaves the website in an inconsistent state, with some of the links still referring to the old file name.</span></span> <span data-ttu-id="97d22-119">En faisant de l’opération de changement de nom de fichier et de l’opération de résolution de lien une seule transaction, TxF garantit que le changement de nom de fichier et le correctif de lien réussissent ou échouent comme une seule opération.</span><span class="sxs-lookup"><span data-stu-id="97d22-119">By making the file rename operation and the link fixing operation a single transaction, TxF ensures that the file rename and link fix succeed or fail as a single operation.</span></span>

## <a name="consistent-concurrent-updates"></a><span data-ttu-id="97d22-120">Mises à jour simultanées cohérentes</span><span class="sxs-lookup"><span data-stu-id="97d22-120">Consistent Concurrent Updates</span></span>

<span data-ttu-id="97d22-121">TxF isole les transactions simultanées.</span><span class="sxs-lookup"><span data-stu-id="97d22-121">TxF isolates concurrent transactions.</span></span> <span data-ttu-id="97d22-122">Si une application ouvre un fichier pour une lecture transactionnelle alors qu’une autre application a le même fichier ouvert pour une mise à jour transactionnelle, TxF isole les effets des deux transactions les unes des autres.</span><span class="sxs-lookup"><span data-stu-id="97d22-122">If an application opens a file for a transactional read while another application has the same file open for a transactional update, TxF isolates the effects of the two transactions from one another.</span></span> <span data-ttu-id="97d22-123">En d’autres termes, le lecteur transactionnel affiche toujours une version unique et cohérente du fichier, même si ce fichier est en cours de mise à jour par une autre transaction.</span><span class="sxs-lookup"><span data-stu-id="97d22-123">In other words, the transactional reader always views a single, consistent version of the file, even while that file is in the process of being updated by another transaction.</span></span>

<span data-ttu-id="97d22-124">Une application peut utiliser cette fonctionnalité pour permettre aux clients d’afficher les fichiers pendant que d’autres clients effectuent des mises à jour.</span><span class="sxs-lookup"><span data-stu-id="97d22-124">An application can use this functionality to allow customers to view files while other customers make updates.</span></span> <span data-ttu-id="97d22-125">Par exemple, un serveur Web transactionnel peut fournir une vue unique et cohérente des fichiers, tandis qu’un autre outil met à jour ces fichiers simultanément.</span><span class="sxs-lookup"><span data-stu-id="97d22-125">For example, a transactional web server can provide a single, consistent view of files while another tool concurrently updates those files.</span></span>

> [!Note]  
> <span data-ttu-id="97d22-126">TxF ne prend pas en charge les mises à jour simultanées de plusieurs rédacteurs dans différentes transactions.</span><span class="sxs-lookup"><span data-stu-id="97d22-126">TxF does not support concurrent updates by multiple writers in different transactions.</span></span> <span data-ttu-id="97d22-127">TxF ne prend en charge qu’un seul enregistreur avec plusieurs lecteurs simultanés et cohérents.</span><span class="sxs-lookup"><span data-stu-id="97d22-127">TxF supports only a single writer with multiple concurrent and consistent readers.</span></span>

 

## <a name="coordinating-with-other-transacted-resource-managers"></a><span data-ttu-id="97d22-128">Coordination avec d’autres gestionnaires de ressources transactionnelles</span><span class="sxs-lookup"><span data-stu-id="97d22-128">Coordinating With Other Transacted Resource Managers</span></span>

<span data-ttu-id="97d22-129">Les transactions utilisées avec les systèmes de fichiers traités peuvent également être utilisées avec le registre traité.</span><span class="sxs-lookup"><span data-stu-id="97d22-129">Transactions used with transacted file systems may also be used with the transacted registry.</span></span> <span data-ttu-id="97d22-130">Les mises à jour apportées au fichier et au Registre sont coordonnées avec une seule transaction.</span><span class="sxs-lookup"><span data-stu-id="97d22-130">Updates to the file and the registry are coordinated with a single transaction.</span></span>

<span data-ttu-id="97d22-131">En utilisant des transactions [Distributed Transaction Coordinator](/previous-versions/windows/desktop/mscs/distributed-transaction-coordinator) (DTC) ou System. transactions, les mises à jour apportées à SQL, MSMQ et d’autres ressources transactionnelles peuvent être coordonnées avec les mises à jour des fichiers traités.</span><span class="sxs-lookup"><span data-stu-id="97d22-131">By using [Distributed Transaction Coordinator](/previous-versions/windows/desktop/mscs/distributed-transaction-coordinator) (DTC) transactions or System.Transactions, updates made to SQL, MSMQ, and other transactional resources can be coordinated with transacted file updates.</span></span> <span data-ttu-id="97d22-132">Pour plus d’informations, consultez [IKernelTransaction](/previous-versions/windows/desktop/aa344210(v=vs.85))du DTC.</span><span class="sxs-lookup"><span data-stu-id="97d22-132">For more information, see DTC's [IKernelTransaction](/previous-versions/windows/desktop/aa344210(v=vs.85)).</span></span>

## <a name="unsupported-scenarios"></a><span data-ttu-id="97d22-133">Scénarios non pris en charge</span><span class="sxs-lookup"><span data-stu-id="97d22-133">Unsupported Scenarios</span></span>

<span data-ttu-id="97d22-134">TxF ne prend pas en charge les scénarios de transaction suivants :</span><span class="sxs-lookup"><span data-stu-id="97d22-134">TxF does not support the following transaction scenarios:</span></span>

-   <span data-ttu-id="97d22-135">Transactions sur des volumes réseau, par exemple sur des partages de fichiers.</span><span class="sxs-lookup"><span data-stu-id="97d22-135">Transactions on network volumes, for example on file shares.</span></span> <span data-ttu-id="97d22-136">TxF n’est pas pris en charge par les protocoles CIFS/SMB.</span><span class="sxs-lookup"><span data-stu-id="97d22-136">TxF is not supported by the CIFS/SMB protocols.</span></span>
-   <span data-ttu-id="97d22-137">Transactions sur n’importe quel système de fichiers autre que NTFS.</span><span class="sxs-lookup"><span data-stu-id="97d22-137">Transactions on any file system other than NTFS.</span></span>
-   <span data-ttu-id="97d22-138">Opérations traitées sur des fichiers mis en cache par la mise en cache côté client.</span><span class="sxs-lookup"><span data-stu-id="97d22-138">Transacted operations against files cached by client-side caching.</span></span>
-   <span data-ttu-id="97d22-139">Accès aux fichiers à l’aide des ID d’objet.</span><span class="sxs-lookup"><span data-stu-id="97d22-139">File access using object IDs.</span></span>
-   <span data-ttu-id="97d22-140">Tout scénario d’écriture partagée.</span><span class="sxs-lookup"><span data-stu-id="97d22-140">Any shared writer scenario.</span></span>
-   <span data-ttu-id="97d22-141">Toute situation dans laquelle un fichier est ouvert pendant une période prolongée (jours ou semaines).</span><span class="sxs-lookup"><span data-stu-id="97d22-141">Any situation where a file is opened for an extended period of time (days or weeks).</span></span>

 

 
