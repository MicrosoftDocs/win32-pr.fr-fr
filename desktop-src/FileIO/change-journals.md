---
description: Quand une modification est apportée à un fichier ou à un répertoire dans un volume, le journal des modifications USN pour ce volume est mis à jour avec une description de la modification et le nom du fichier ou du répertoire.
ms.assetid: 9a158c2b-da8e-4ca9-b3c1-2185cf41eb7d
title: Journaux des modifications
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb5052ec87830a822270071a6ee00f1c3f7cffdd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103868254"
---
# <a name="change-journals"></a><span data-ttu-id="21ae9-103">Journaux des modifications</span><span class="sxs-lookup"><span data-stu-id="21ae9-103">Change Journals</span></span>

<span data-ttu-id="21ae9-104">Une application de sauvegarde automatique est un exemple de programme qui doit vérifier les modifications apportées à l’état d’un volume pour effectuer sa tâche.</span><span class="sxs-lookup"><span data-stu-id="21ae9-104">An automatic backup application is one example of a program that must check for changes to the state of a volume to perform its task.</span></span> <span data-ttu-id="21ae9-105">La méthode d’analyse en force brute de la vérification des modifications dans les répertoires ou les fichiers consiste à analyser l’ensemble du volume.</span><span class="sxs-lookup"><span data-stu-id="21ae9-105">The brute force method of checking for changes in directories or files is to scan the entire volume.</span></span> <span data-ttu-id="21ae9-106">Toutefois, il ne s’agit pas d’une approche acceptable en raison de la baisse des performances du système.</span><span class="sxs-lookup"><span data-stu-id="21ae9-106">However, this is often not an acceptable approach because of the decrease in system performance it would cause.</span></span> <span data-ttu-id="21ae9-107">Une autre méthode consiste à ce que l’application enregistre une notification de répertoire (en appelant les fonctions [**FindFirstChangeNotification**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstchangenotificationa) ou [**ReadDirectoryChangesW**](/windows/desktop/api/WinBase/nf-winbase-readdirectorychangesw) ) pour les répertoires à sauvegarder.</span><span class="sxs-lookup"><span data-stu-id="21ae9-107">Another method is for the application to register a directory notification (by calling the [**FindFirstChangeNotification**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstchangenotificationa) or [**ReadDirectoryChangesW**](/windows/desktop/api/WinBase/nf-winbase-readdirectorychangesw) functions) for the directories to be backed up.</span></span> <span data-ttu-id="21ae9-108">Cette méthode est plus efficace que la première méthode. Toutefois, elle nécessite qu’une application s’exécute en permanence.</span><span class="sxs-lookup"><span data-stu-id="21ae9-108">This is more efficient than the first method, however, it requires that an application be running at all times.</span></span> <span data-ttu-id="21ae9-109">En outre, si un grand nombre de répertoires et de fichiers doivent être sauvegardés, la quantité de traitement et la surcharge de mémoire pour une telle application peuvent également entraîner une diminution des performances du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="21ae9-109">Also, if a large number of directories and files must be backed up, the amount of processing and memory overhead for such an application might also cause the operating system's performance to decrease.</span></span>

<span data-ttu-id="21ae9-110">Pour éviter ces inconvénients, le système de fichiers NTFS gère un journal des modifications du numéro de séquence de mise à jour (USN).</span><span class="sxs-lookup"><span data-stu-id="21ae9-110">To avoid these disadvantages, the NTFS file system maintains an update sequence number (USN) change journal.</span></span> <span data-ttu-id="21ae9-111">Quand une modification est apportée à un fichier ou à un répertoire dans un volume, le journal des modifications USN pour ce volume est mis à jour avec une description de la modification et le nom du fichier ou du répertoire.</span><span class="sxs-lookup"><span data-stu-id="21ae9-111">When any change is made to a file or directory in a volume, the USN change journal for that volume is updated with a description of the change and the name of the file or directory.</span></span>

<span data-ttu-id="21ae9-112">Les journaux des modifications sont également nécessaires pour récupérer l’indexation du système de fichiers, par exemple après une défaillance de volume ou d’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="21ae9-112">Change journals are also needed to recover file system indexing for example after a computer or volume failure.</span></span> <span data-ttu-id="21ae9-113">La possibilité de récupérer l’indexation signifie que le système de fichiers peut éviter le processus fastidieux de réindexation de l’ensemble du volume dans de tels cas.</span><span class="sxs-lookup"><span data-stu-id="21ae9-113">The ability to recover indexing means the file system can avoid the time-consuming process of reindexing the entire volume in such cases.</span></span>

<span data-ttu-id="21ae9-114">Les rubriques suivantes traitent des journaux des modifications.</span><span class="sxs-lookup"><span data-stu-id="21ae9-114">The following topics discuss change journals.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="21ae9-115">Contenu de cette section</span><span class="sxs-lookup"><span data-stu-id="21ae9-115">In this section</span></span>



| <span data-ttu-id="21ae9-116">Rubrique</span><span class="sxs-lookup"><span data-stu-id="21ae9-116">Topic</span></span>                                                                                                                             | <span data-ttu-id="21ae9-117">Description</span><span class="sxs-lookup"><span data-stu-id="21ae9-117">Description</span></span>                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="21ae9-118">Modifier les enregistrements de journal</span><span class="sxs-lookup"><span data-stu-id="21ae9-118">Change Journal Records</span></span>](change-journal-records.md)<br/>                                                                   | <span data-ttu-id="21ae9-119">À mesure que des fichiers, des répertoires et d’autres objets de système de fichiers NTFS sont ajoutés, supprimés et modifiés, le système de fichiers NTFS entre les enregistrements de journal de modification dans les flux, un pour chaque volume de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="21ae9-119">As files, directories, and other NTFS file system objects are added, deleted, and modified, the NTFS file system enters change journal records in streams, one for each volume on the computer.</span></span><br/>                                           |
| [<span data-ttu-id="21ae9-120">Utilisation de l’identificateur du journal des modifications</span><span class="sxs-lookup"><span data-stu-id="21ae9-120">Using the Change Journal Identifier</span></span>](using-the-change-journal-identifier.md)<br/>                                         | <span data-ttu-id="21ae9-121">Le système de fichiers NTFS associe un identificateur non signé 64 bits à chaque journal des modifications.</span><span class="sxs-lookup"><span data-stu-id="21ae9-121">The NTFS file system associates an unsigned 64-bit identifier with each change journal.</span></span><br/>                                                                                                                                                   |
| [<span data-ttu-id="21ae9-122">Création, modification et suppression d’un journal des modifications</span><span class="sxs-lookup"><span data-stu-id="21ae9-122">Creating, Modifying, and Deleting a Change Journal</span></span>](creating-modifying-and-deleting-a-change-journal.md)<br/>             | <span data-ttu-id="21ae9-123">Les administrateurs peuvent créer, supprimer et recréer des journaux de modifications.</span><span class="sxs-lookup"><span data-stu-id="21ae9-123">Administrators can create, delete, and re-create change journals.</span></span><br/>                                                                                                                                                                         |
| [<span data-ttu-id="21ae9-124">Obtention d’un handle de volume pour les opérations de journal des modifications</span><span class="sxs-lookup"><span data-stu-id="21ae9-124">Obtaining a Volume Handle for Change Journal Operations</span></span>](obtaining-a-volume-handle-for-change-journal-operations.md)<br/> | <span data-ttu-id="21ae9-125">Pour obtenir un handle vers un volume en vue d’une utilisation avec des opérations de journal des modifications du numéro de séquence de mise à jour (USN), appelez la fonction [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) avec le paramètre *lpFileName* défini sur une chaîne au format suivant : \\ \\ . \\ *X*.</span><span class="sxs-lookup"><span data-stu-id="21ae9-125">To obtain a handle to a volume for use with update sequence number (USN) change journal operations, call the [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) function with the *lpFileName* parameter set to a string of the following form: \\\\.\\*X*.</span></span><br/> |
| [<span data-ttu-id="21ae9-126">Opérations de journal des modifications</span><span class="sxs-lookup"><span data-stu-id="21ae9-126">Change Journal Operations</span></span>](change-journal-operations.md)<br/>                                                             | <span data-ttu-id="21ae9-127">Codes et structures de contrôle à utiliser avec le journal des modifications du numéro de séquence de mise à jour (USN) du système de fichiers NTFS.</span><span class="sxs-lookup"><span data-stu-id="21ae9-127">Control codes and structures to use with the NTFS file system update sequence number (USN) change journal.</span></span><br/>                                                                                                                                |



 

 

 




