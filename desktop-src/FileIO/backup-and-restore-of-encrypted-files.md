---
description: Les fonctions de chiffrement brutes permettent de sauvegarder des fichiers chiffrés.
ms.assetid: 00f9b00e-305d-4554-8b43-7061228c92c3
title: Sauvegarde et restauration de fichiers chiffrés
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fbc5d1babbbbb92cef9e78f9a0dade702fd63d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104034147"
---
# <a name="backup-and-restore-of-encrypted-files"></a><span data-ttu-id="8c313-103">Sauvegarde et restauration de fichiers chiffrés</span><span class="sxs-lookup"><span data-stu-id="8c313-103">Backup and Restore of Encrypted Files</span></span>

<span data-ttu-id="8c313-104">Le système de fichiers EFS (EFS) filtre l’ouverture d’un fichier chiffré de telle sorte que l’application qui a ouvert le fichier ait accès aux informations non chiffrées, à condition qu’il dispose des informations d’identification appropriées pour accéder au fichier et obtenir la clé nécessaire pour déchiffrer le fichier.</span><span class="sxs-lookup"><span data-stu-id="8c313-104">The Encrypting File System (EFS) filters the opening of an encrypted file in such a way that the application that opened the file gets access to the unencrypted information, provided of course it has the proper credentials to access the file and get the key necessary to decrypt the file.</span></span> <span data-ttu-id="8c313-105">Les opérations de lecture ultérieures sur ce fichier produiront du texte non chiffré.</span><span class="sxs-lookup"><span data-stu-id="8c313-105">Subsequent read operations on this file will yield unencrypted text.</span></span> <span data-ttu-id="8c313-106">Cela est très souhaitable pour un accès standard aux fichiers chiffrés, et assure la transparence du chiffrement et du déchiffrement des fichiers.</span><span class="sxs-lookup"><span data-stu-id="8c313-106">This is very desirable for typical access to encrypted files, and keeps the encryption and decryption of the files transparent.</span></span> <span data-ttu-id="8c313-107">Toutefois, elle entrave la sauvegarde des fichiers chiffrés, car si la sauvegarde est tentée avec les appels d’e/s de fichier standard tels que [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea), [**ReadFile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile)et [**WriteFile**](/windows/desktop/api/FileAPI/nf-fileapi-writefile), les fichiers sauvegardés seront la version en texte brut.</span><span class="sxs-lookup"><span data-stu-id="8c313-107">However, it hinders backup of encrypted files, because if backup is attempted with the standard file I/O calls like [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea), [**ReadFile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile), and [**WriteFile**](/windows/desktop/api/FileAPI/nf-fileapi-writefile), the files backed up will be the plain text version.</span></span>

<span data-ttu-id="8c313-108">Les fonctions de chiffrement brutes sont fournies pour résoudre ce problème.</span><span class="sxs-lookup"><span data-stu-id="8c313-108">The raw encryption functions are provided to solve this problem.</span></span> <span data-ttu-id="8c313-109">Les applications de sauvegarde sont un utilisateur principal prévu pour ces fonctions.</span><span class="sxs-lookup"><span data-stu-id="8c313-109">Backup applications are a primary intended user for these functions.</span></span> <span data-ttu-id="8c313-110">Les fonctions de chiffrement brutes diffèrent des autres fonctions de système de fichiers dans le sens où les fonctions d’ouverture, de lecture et d’écriture autorisent l’accès aux flux de données chiffrées brutes et autorisent également la lecture/écriture du flux de $EFS.</span><span class="sxs-lookup"><span data-stu-id="8c313-110">Raw encryption functions differ from other file system functions in that open, read, and write functions allow access to the raw encrypted data streams and also allow reading/writing of the $EFS stream.</span></span> <span data-ttu-id="8c313-111">Par conséquent, l’appelant des fonctions de chiffrement brutes n’a pas besoin d’accéder aux clés de chiffrement qui déchiffrent le fichier.</span><span class="sxs-lookup"><span data-stu-id="8c313-111">Therefore, the caller of the raw encryption functions does not need access to the cryptographic keys that decrypt the file.</span></span> <span data-ttu-id="8c313-112">Les API de chiffrement brut suivantes peuvent être utilisées avec les applications de sauvegarde et de restauration :</span><span class="sxs-lookup"><span data-stu-id="8c313-112">The following raw encryption APIs are available for use with backup and restore applications:</span></span> 

| <span data-ttu-id="8c313-113">API de chiffrement brut</span><span class="sxs-lookup"><span data-stu-id="8c313-113">Raw Encryption API</span></span>                                     | <span data-ttu-id="8c313-114">Description</span><span class="sxs-lookup"><span data-stu-id="8c313-114">Description</span></span>                                                                                                                                                                                                                                                                   |
|--------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8c313-115">**OpenEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="8c313-115">**OpenEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)   | <span data-ttu-id="8c313-116">Ouvrir un fichier chiffré avec accès aux données au format chiffré.</span><span class="sxs-lookup"><span data-stu-id="8c313-116">Open an encrypted file with access to data in encrypted format.</span></span> <span data-ttu-id="8c313-117">Si l’appelant n’a pas accès à la clé du fichier, l’appelant a besoin de [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) pour exporter des fichiers chiffrés ou SeRestorePrivilege pour importer des fichiers chiffrés.</span><span class="sxs-lookup"><span data-stu-id="8c313-117">If the caller does not have access to the key for the file, the caller needs [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) to export encrypted files or SeRestorePrivilege to import encrypted files.</span></span> |
| [<span data-ttu-id="8c313-118">**CloseEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="8c313-118">**CloseEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-closeencryptedfileraw) | <span data-ttu-id="8c313-119">Fermer un fichier chiffré ouvert avec [ **OpenEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span><span class="sxs-lookup"><span data-stu-id="8c313-119">Close an encrypted file opened with [**OpenEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span></span>                                                                                                                                                                                      |
| [<span data-ttu-id="8c313-120">**ReadEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="8c313-120">**ReadEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)   | <span data-ttu-id="8c313-121">Lire un fichier chiffré en laissant ses données dans un format chiffré</span><span class="sxs-lookup"><span data-stu-id="8c313-121">Read an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="8c313-122">**WriteEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="8c313-122">**WriteEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw) | <span data-ttu-id="8c313-123">Écrire un fichier chiffré en laissant ses données dans un format chiffré</span><span class="sxs-lookup"><span data-stu-id="8c313-123">Write an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                  |
| [<span data-ttu-id="8c313-124">**ImportCallback**</span><span class="sxs-lookup"><span data-stu-id="8c313-124">**ImportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_import_func)               | <span data-ttu-id="8c313-125">Rappel défini par l’application à utiliser avec [ **WriteEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="8c313-125">Application-defined callback for use with [**WriteEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span></span>                                                                                                                                                                              |
| [<span data-ttu-id="8c313-126">**ExportCallback**</span><span class="sxs-lookup"><span data-stu-id="8c313-126">**ExportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_export_func)               | <span data-ttu-id="8c313-127">Rappel défini par l’application à utiliser avec [ **ReadEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="8c313-127">Application-defined callback for use with [**ReadEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span></span>                                                                                                                                                                                |



 

 

 
