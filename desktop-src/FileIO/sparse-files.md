---
description: La compression de fichiers de fichiers qui contiennent principalement des zéros permet d’utiliser efficacement l’espace disque.
ms.assetid: 7326041d-f11e-4b80-ac4e-07173e418ce7
title: Fichiers partiellement alloués
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21c282ca89c9dc9e44800a2a7fc969c3f883006b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106514648"
---
# <a name="sparse-files"></a><span data-ttu-id="6ddaa-103">Fichiers partiellement alloués</span><span class="sxs-lookup"><span data-stu-id="6ddaa-103">Sparse Files</span></span>

<span data-ttu-id="6ddaa-104">Un fichier dans lequel la plupart des données est égale à zéro est dit qu’il contient un *jeu de données éparses*.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-104">A file in which much of the data is zeros is said to contain a *sparse data set*.</span></span> <span data-ttu-id="6ddaa-105">Les fichiers comme ceux-ci sont généralement très volumineux par exemple, un fichier qui contient des données d’image à traiter ou une matrice au sein d’une base de données à haut débit.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-105">Files like these are typically very large for example, a file that contains image data to be processed or a matrix within a high-speed database.</span></span> <span data-ttu-id="6ddaa-106">Le problème avec les fichiers qui contiennent des jeux de données éparses est que la majorité du fichier ne contient pas de données utiles et, pour cette raison, il s’agit d’une utilisation inefficace de l’espace disque.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-106">The problem with files that contain sparse data sets is that the majority of the file does not contain useful data and, because of this, they are an inefficient use of disk space.</span></span>

<span data-ttu-id="6ddaa-107">La compression de fichiers dans le système de fichiers NTFS est une solution partielle au problème.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-107">The file compression in the NTFS file system is a partial solution to the problem.</span></span> <span data-ttu-id="6ddaa-108">Toutes les données du fichier qui ne sont pas écrites explicitement sont explicitement définies à zéro.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-108">All data in the file that is not explicitly written is explicitly set to zero.</span></span> <span data-ttu-id="6ddaa-109">La compression de fichiers compacte ces plages de zéros.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-109">File compression compacts these ranges of zeros.</span></span> <span data-ttu-id="6ddaa-110">Toutefois, l’inconvénient de la compression de fichiers est que le temps d’accès peut augmenter en raison de la compression et de la décompression des données.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-110">However, a drawback of file compression is that access time may increase due to data compression and decompression.</span></span>

<span data-ttu-id="6ddaa-111">La prise en charge des fichiers partiellement alloués est introduite dans le système de fichiers NTFS pour une utilisation plus efficace de l’espace disque.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-111">Support for sparse files is introduced in the NTFS file system as another way to make disk space usage more efficient.</span></span> <span data-ttu-id="6ddaa-112">Lorsque la fonctionnalité de fichier partiellement alloué est activée, le système n’alloue pas d’espace disque dur à un fichier, sauf dans les régions où il contient des données différentes de zéro.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-112">When sparse file functionality is enabled, the system does not allocate hard disk drive space to a file except in regions where it contains nonzero data.</span></span> <span data-ttu-id="6ddaa-113">Lorsqu’une opération d’écriture est tentée alors qu’une grande quantité de données dans la mémoire tampon est égale à zéro, les zéros ne sont pas écrits dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-113">When a write operation is attempted where a large amount of the data in the buffer is zeros, the zeros are not written to the file.</span></span> <span data-ttu-id="6ddaa-114">Au lieu de cela, le système de fichiers crée une liste interne qui contient les emplacements des zéros dans le fichier, et cette liste est consultée pendant toutes les opérations de lecture.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-114">Instead, the file system creates an internal list containing the locations of the zeros in the file, and this list is consulted during all read operations.</span></span> <span data-ttu-id="6ddaa-115">Lorsqu’une opération de lecture est effectuée dans des zones du fichier où des zéros se trouvent, le système de fichiers retourne le nombre approprié de zéros dans la mémoire tampon allouée pour l’opération de lecture.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-115">When a read operation is performed in areas of the file where zeros were located, the file system returns the appropriate number of zeros in the buffer allocated for the read operation.</span></span> <span data-ttu-id="6ddaa-116">De cette façon, la maintenance du fichier partiellement alloué est transparente pour tous les processus qui y accèdent et est plus efficace que la compression pour ce scénario particulier.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-116">In this way, maintenance of the sparse file is transparent to all processes that access it, and is more efficient than compression for this particular scenario.</span></span>

<span data-ttu-id="6ddaa-117">La valeur de données par défaut d’un fichier partiellement alloué est zéro ; Toutefois, il peut être défini sur d’autres valeurs.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-117">The default data value of a sparse file is zero; however, it can be set to other values.</span></span>

<span data-ttu-id="6ddaa-118">Pour plus d’informations sur les fichiers partiellement alloués, consultez les rubriques suivantes.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-118">For more information about sparse files, see the following topics.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="6ddaa-119">Contenu de cette section</span><span class="sxs-lookup"><span data-stu-id="6ddaa-119">In this section</span></span>



| <span data-ttu-id="6ddaa-120">Rubrique</span><span class="sxs-lookup"><span data-stu-id="6ddaa-120">Topic</span></span>                                                                                     | <span data-ttu-id="6ddaa-121">Description</span><span class="sxs-lookup"><span data-stu-id="6ddaa-121">Description</span></span>                                                                                                                                                                                   |
|-------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="6ddaa-122">Opérations sur les fichiers partiellement alloués</span><span class="sxs-lookup"><span data-stu-id="6ddaa-122">Sparse File Operations</span></span>](sparse-file-operations.md)<br/>                           | <span data-ttu-id="6ddaa-123">Déterminez si un système de fichiers prend en charge les fichiers partiellement alloués en appelant la fonction GetVolumeInformation.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-123">Determine whether a file system supports sparse files by calling the GetVolumeInformation function.</span></span><br/>                                                                                |
| [<span data-ttu-id="6ddaa-124">Obtention de la taille d’un fichier partiellement alloué</span><span class="sxs-lookup"><span data-stu-id="6ddaa-124">Obtaining the Size of a Sparse File</span></span>](obtaining-the-size-of-a-sparse-file.md)<br/> | <span data-ttu-id="6ddaa-125">Obtenir la taille allouée ou la taille totale d’un fichier à l’aide de la fonction [**GetCompressedFileSize**](/windows/desktop/api/fileapi/nf-fileapi-getcompressedfilesizea) ou [**GetFileSize**](/windows/desktop/api/FileAPI/nf-fileapi-getfilesize) .</span><span class="sxs-lookup"><span data-stu-id="6ddaa-125">Get the allocated size or the total size for a file by using either the [**GetCompressedFileSize**](/windows/desktop/api/fileapi/nf-fileapi-getcompressedfilesizea) or the [**GetFileSize**](/windows/desktop/api/FileAPI/nf-fileapi-getfilesize) function.</span></span><br/> |
| [<span data-ttu-id="6ddaa-126">Fichiers partiellement alloués et quotas de disque</span><span class="sxs-lookup"><span data-stu-id="6ddaa-126">Sparse Files and Disk Quotas</span></span>](sparse-files-and-disk-quota.md)<br/>                | <span data-ttu-id="6ddaa-127">Un fichier partiellement alloué affecte les quotas de l’utilisateur par la taille nominale du fichier, et non par la quantité réelle d’espace disque allouée.</span><span class="sxs-lookup"><span data-stu-id="6ddaa-127">A sparse file affects user quotas by the nominal size of the file, not the actual allocated amount of disk space.</span></span><br/>                                                                  |



 

 

 




