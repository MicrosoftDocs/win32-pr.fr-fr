---
title: IPropertyStorage-implémentation du système de fichiers NTFS
description: La version NTFS 5,0 fournit une implémentation de l’interface IPropertyStorage pour les fichiers sur un volume NTFS lorsque les fichiers ne sont pas des fichiers composés.
ms.assetid: d0ffd975-5bc2-4de3-b0c1-c9188541f46a
keywords:
- IPropertyStorage Strctd STG, implémentations, système de fichiers NTFS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ca359bebbd05e67a034494023d7fc23089396b32
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "106530792"
---
# <a name="ipropertystorage-ntfs-file-system-implementation"></a><span data-ttu-id="30367-104">IPropertyStorage-implémentation du système de fichiers NTFS</span><span class="sxs-lookup"><span data-stu-id="30367-104">IPropertyStorage-NTFS File System Implementation</span></span>

<span data-ttu-id="30367-105">La version NTFS 5,0 fournit une implémentation de l’interface [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) pour les fichiers sur un volume NTFS lorsque les fichiers ne sont pas des fichiers composés.</span><span class="sxs-lookup"><span data-stu-id="30367-105">The NTFS version 5.0 provides an implementation of the [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) interface for files on an NTFS volume when the files are not compound files.</span></span>

<span data-ttu-id="30367-106">**Pour obtenir un pointeur vers l’implémentation du système de fichiers NTFS de IPropertySetStorage**</span><span class="sxs-lookup"><span data-stu-id="30367-106">**To get a pointer to the NTFS file system implementation of IPropertySetStorage**</span></span>

1.  <span data-ttu-id="30367-107">Appelez [**IPropertySetStorage :: Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) à l’aide de l’implémentation NTFS de [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span><span class="sxs-lookup"><span data-stu-id="30367-107">Call [**IPropertySetStorage::Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) using the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span></span>
2.  <span data-ttu-id="30367-108">Appelez [**IPropertySetStorage :: Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) à l’aide de l’implémentation NTFS de [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span><span class="sxs-lookup"><span data-stu-id="30367-108">Call [**IPropertySetStorage::Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) using the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span></span>

## <a name="when-to-use"></a><span data-ttu-id="30367-109">Quand l’utiliser</span><span class="sxs-lookup"><span data-stu-id="30367-109">When to Use</span></span>

<span data-ttu-id="30367-110">Utilisez [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) pour gérer les propriétés dans un même jeu de propriétés.</span><span class="sxs-lookup"><span data-stu-id="30367-110">Use [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) to manage properties within a single property set.</span></span> <span data-ttu-id="30367-111">Ses méthodes prennent en charge la lecture, l’écriture et la suppression de propriétés, ainsi que les noms de chaînes facultatifs qui peuvent être associés à des identificateurs de propriété.</span><span class="sxs-lookup"><span data-stu-id="30367-111">Its methods support reading, writing, and deleting properties and the optional string names that can be associated with property identifiers.</span></span> <span data-ttu-id="30367-112">Une autre méthode vous permet de définir les heures associées au stockage des propriétés, et une autre permet l’affectation d’un CLSID, utilisé pour associer un autre code, tel que le code de l’interface utilisateur, au jeu de propriétés.</span><span class="sxs-lookup"><span data-stu-id="30367-112">Another method enables you to set times associated with the property storage, and another permits the assignment of a CLSID, used to associate other code, such as user interface (UI) code, with the property set.</span></span> <span data-ttu-id="30367-113">L’appel de la méthode [**enum**](/windows/desktop/api/Propidl/nf-propidl-ipropertystorage-enum) fournit un pointeur vers l’implémentation NTFS de [**IEnumSTATPROPSTG**](/windows/win32/api/propidlbase/nn-propidlbase-ienumstatpropstg), qui vous permet d’énumérer les propriétés du jeu.</span><span class="sxs-lookup"><span data-stu-id="30367-113">Calling the [**Enum**](/windows/desktop/api/Propidl/nf-propidl-ipropertystorage-enum) method supplies a pointer to the NTFS implementation of [**IEnumSTATPROPSTG**](/windows/win32/api/propidlbase/nn-propidlbase-ienumstatpropstg), which enables you to enumerate the properties in the set.</span></span>

## <a name="remarks"></a><span data-ttu-id="30367-114">Notes</span><span class="sxs-lookup"><span data-stu-id="30367-114">Remarks</span></span>

<span data-ttu-id="30367-115">L’implémentation NTFS fournit essentiellement les mêmes fonctionnalités que l’implémentation de fichiers composés.</span><span class="sxs-lookup"><span data-stu-id="30367-115">The NTFS implementation provides essentially the same features as the compound file implementation.</span></span> <span data-ttu-id="30367-116">Pour plus d’informations, consultez [IPropertyStorage-composed file Implementation](ipropertystorage-compound-file-implementation.md).</span><span class="sxs-lookup"><span data-stu-id="30367-116">For more information, see [IPropertyStorage-Compound File Implementation](ipropertystorage-compound-file-implementation.md).</span></span>

<span data-ttu-id="30367-117">Étant donné que NTFS est un système de fichiers robuste, un jeu de propriétés NTFS ne sera jamais dans un état incorrect.</span><span class="sxs-lookup"><span data-stu-id="30367-117">Because NTFS is a robust file system, an NTFS property set will never be left in an incorrect state.</span></span> <span data-ttu-id="30367-118">Lorsque le contenu d’un [**IPROPERTYSTORAGE**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) NTFS est vidé dans le fichier NTFS sous-jacent, tout ou partie de l’État est écrit dans le fichier sous la forme d’une opération atomique, même en cas d’échec au cours de l’opération, comme un arrêt anormal du processus.</span><span class="sxs-lookup"><span data-stu-id="30367-118">When the content of an NTFS [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) is flushed to the underlying NTFS file, either all or none of the state is written to the file as an atomic operation, even if there is a failure during the operation such as an abnormal process termination.</span></span> <span data-ttu-id="30367-119">Pour obtenir un comportement similaire avec l’implémentation de fichier composé, l’interface [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) parente doit être ouverte en mode traité.</span><span class="sxs-lookup"><span data-stu-id="30367-119">To achieve similar behavior with the compound file implementation, the parent [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) interface must be opened in transacted mode.</span></span>

<span data-ttu-id="30367-120">Ce niveau de robustesse est uniquement possible lors de l’accès à une propriété NTFS définie sur un volume NTFS 5,0.</span><span class="sxs-lookup"><span data-stu-id="30367-120">This level of robustness is only possible when accessing an NTFS property set on an NTFS 5.0 volume.</span></span> <span data-ttu-id="30367-121">Il est possible d’accéder à des jeux de propriétés NTFS sur des versions antérieures de NTFS (par exemple, un ordinateur fonctionnant sous Windows NT ou Windows 2000 qui accède aux jeux de propriétés sur un serveur de fichiers qui s’exécute sur Windows NT 4,0), mais il n’est pas garanti qu’il se trouve dans un état correct en cas de défaillance inattendue.</span><span class="sxs-lookup"><span data-stu-id="30367-121">It is possible to access NTFS property sets on earlier versions of NTFS (for example, a computer running on Windows NT or Windows 2000 that accesses the property sets on a file server computer running on Windows NT 4.0), but they are not guaranteed to be in a correct state in the event of an unexpected failure.</span></span>

<span data-ttu-id="30367-122">Bien que l’implémentation NTFS de [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) ne prenne pas en charge la transaction, l’implémentation NTFS de [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) la prend en charge.</span><span class="sxs-lookup"><span data-stu-id="30367-122">Although the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) does not support transactioning, the NTFS implementation of [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) supports it.</span></span> <span data-ttu-id="30367-123">Autrement dit, **STGM \_ traitée** peut être spécifiée dans le paramètre *grfMode* aux méthodes [**Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) et [**Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) de **IPropertySetStorage**.</span><span class="sxs-lookup"><span data-stu-id="30367-123">That is, **STGM\_TRANSACTED** may be specified in the *grfMode* parameter to the [**Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) and [**Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) methods of **IPropertySetStorage**.</span></span> <span data-ttu-id="30367-124">Comme dans l’implémentation de fichier composé, le mode transactionnel est possible uniquement pour les stockages de propriétés non simples (en spécifiant **PROPSETFLAG non \_ simple** dans le paramètre *grfFlags* ).</span><span class="sxs-lookup"><span data-stu-id="30367-124">As in the compound file implementation, transacted mode is possible only for nonsimple property storages (specifying **PROPSETFLAG\_NONSIMPLE** in the *grfFlags* parameter).</span></span>

## <a name="related-topics"></a><span data-ttu-id="30367-125">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="30367-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="30367-126">**IPropertyStorage**</span><span class="sxs-lookup"><span data-stu-id="30367-126">**IPropertyStorage**</span></span>](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage)
</dt> <dt>

[<span data-ttu-id="30367-127">IPropertySetStorage-implémentation du système de fichiers NTFS</span><span class="sxs-lookup"><span data-stu-id="30367-127">IPropertySetStorage-NTFS File System Implementation</span></span>](ipropertysetstorage-ntfs-file-system-implementation.md)
</dt> </dl>

 

 