---
title: Comment générer des exemples
description: Pour générer un exemple COM, l’environnement de l’ordinateur doit être configuré pour générer des applications Microsoft Win32 C++.
ms.assetid: c62b8b4d-a9d2-4587-8bb6-7b2c30d1c00d
keywords:
- Comment générer des exemples
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 593d3465d3ebcc32a6768dd8b2dffe1f0a653d07
ms.sourcegitcommit: c2a1c4314550ea9bd202d28adfcc7bfe6180932f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/11/2020
ms.locfileid: "106545739"
---
# <a name="how-to-build-samples"></a><span data-ttu-id="2b5c8-104">Comment générer des exemples</span><span class="sxs-lookup"><span data-stu-id="2b5c8-104">How to Build Samples</span></span>

<span data-ttu-id="2b5c8-105">Pour générer un exemple COM, l’environnement de l’ordinateur doit être configuré pour générer des applications Microsoft Win32 C++.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-105">To build a COM sample, the computer environment must be set up to build Microsoft Win32 C++ applications.</span></span>

## <a name="preparing-a-computer-to-create-com-samples"></a><span data-ttu-id="2b5c8-106">Préparation d’un ordinateur pour créer des exemples COM</span><span class="sxs-lookup"><span data-stu-id="2b5c8-106">Preparing a Computer to Create COM Samples</span></span>

<span data-ttu-id="2b5c8-107">L’environnement de l’ordinateur doit être configuré avec un compilateur C++ 32 bits, un éditeur de liens et un compilateur de ressources correctement installés et compatibles avec Microsoft Visual C++ 4. x ou version ultérieure, et un SDK Windows correctement installé.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-107">The computer environment must be set up with a properly installed 32-bit C++ compiler, linker, and resource compiler that are compatible with Microsoft Visual C++ 4.x or later, and a properly installed Windows SDK.</span></span> <span data-ttu-id="2b5c8-108">Il est préférable d’installer le SDK Windows dernier.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-108">It is best to install the Windows SDK last.</span></span> <span data-ttu-id="2b5c8-109">Le SDK Windows fournit des fichiers de bibliothèque et. lib requis pour la fonctionnalité COM codée dans les exemples.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-109">The Windows SDK provides .h include and .lib library files required for the COM functionality coded in the samples.</span></span>

<span data-ttu-id="2b5c8-110">Pour exécuter correctement les exemples Remclien, Freserve et Freclien, les fonctionnalités système disponibles dans les systèmes d’exploitation Windows sont les suivantes : Windows Server 2003, Windows XP, Windows 2000 ou Windows NT 4,0.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-110">To successfully run the Remclien, Freserve, and Freclien samples requires system facilities that are available in the Windows operating systems: Windows Server 2003, Windows XP, Windows 2000, or Windows NT 4.0.</span></span> <span data-ttu-id="2b5c8-111">Les exemples Remclien, Freserve et Freclien sont générés, mais ne s’exécutent pas sur les systèmes d’exploitation Windows Me, Windows 98 ou Windows 95, sauf si DCOM (Distributed COM) et COM avec thread libre font partie du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-111">The Remclien, Freserve, and Freclien samples will build but will not run on the Windows Me, Windows 98, or Windows 95 operating systems unless Distributed COM (DCOM) and free threaded COM are part of the operating system.</span></span> <span data-ttu-id="2b5c8-112">Cette prise en charge est disponible pour les systèmes d’exploitation Windows Me, Windows 98 et Windows 95 dans le module complémentaire DCOM95.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-112">This support is available for the Windows Me, Windows 98, and Windows 95 operating systems in the DCOM95 add on.</span></span> <span data-ttu-id="2b5c8-113">DCOM95 peut actuellement être obtenu par [téléchargement à partir de Microsoft](https://www.microsoft.com/download/details.aspx?id=31661).</span><span class="sxs-lookup"><span data-stu-id="2b5c8-113">DCOM95 can currently be obtained by [download from Microsoft](https://www.microsoft.com/download/details.aspx?id=31661).</span></span>

<span data-ttu-id="2b5c8-114">Chaque répertoire d’exemple contient les fichiers sources nécessaires pour générer et exécuter l’exemple.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-114">Each sample directory has the necessary source files to build and run the sample.</span></span> <span data-ttu-id="2b5c8-115">Le répertoire de l’exemple parent contient un fichier Makeall.bat, que vous pouvez exécuter à partir de l’invite de commandes pour rendre tous les exemples de code dans la branche ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-115">The parent sample directory has a Makeall.bat file, which you can run from the command prompt to make all the code samples in the branch below.</span></span> <span data-ttu-id="2b5c8-116">Pour plus d’informations, consultez le fichier Makeall.bat.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-116">For more information, see the Makeall.bat file.</span></span> <span data-ttu-id="2b5c8-117">Si votre environnement est configuré pour générer des applications C++ Win32, vous pouvez simplement exécuter Makeall.bat à partir du répertoire où il réside pour générer tous les exemples de code dans la branche ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-117">If your environment is set up to build Win32 C++ applications, you can simply run Makeall.bat from the directory where it resides to build all the code samples in the branch below.</span></span> <span data-ttu-id="2b5c8-118">Makeall garantit l’ordre correct de la build afin que toutes les dépendances de l’exemple de code soient satisfaites.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-118">Makeall ensures the correct order to the build so that all the code sample dependencies are satisfied.</span></span>

<span data-ttu-id="2b5c8-119">Le répertoire principal possède également un Makefile qui génère tous les exemples de code du didacticiel à l’aide d’options similaires à celles prises en charge par Makeall.bat.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-119">The main directory also has a makefile that builds all the tutorial code samples using options similar to those supported by Makeall.bat.</span></span> <span data-ttu-id="2b5c8-120">Pour plus d’informations, consultez ce Makefile.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-120">For more information, see this makefile.</span></span> <span data-ttu-id="2b5c8-121">Ce makefile suppose que l’intégralité de la branche Samples code est installée dans le cadre de la SDK Windows.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-121">This makefile assumes that the entire code samples branch is installed as part of the Windows SDK.</span></span> <span data-ttu-id="2b5c8-122">À l’heure actuelle, cet emplacement a un chemin d’accès similaire à *D : \\ MSSDK \\ Samples \\ com \\ TUTSAMP*, où D : représente le lecteur d’installation.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-122">Currently this location has a path similar to *D:\\MSSDK\\SAMPLES\\COM\\TUTSAMP*, where D: represents the installation drive.</span></span> <span data-ttu-id="2b5c8-123">Si vous avez extrait l’exemple de branche de code du didacticiel (par exemple, le répertoire com COM et ses sous-répertoires) vers un autre emplacement en dehors du SDK Windows (ou si vous avez obtenu l’exemple défini en tant que téléchargement distinct à partir du site Web de Microsoft), utilisez Makeall.bat pour compiler tous les exemples de la branche.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-123">If you have extracted the tutorial code sample branch (for example, the COM directory COM and its subdirectories) to another location outside the Windows SDK (or if you obtained the sample set as a separate download from the Microsoft website), then use Makeall.bat to compile all the samples in the branch.</span></span> <span data-ttu-id="2b5c8-124">En général, Makeall.bat est recommandé.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-124">In general, Makeall.bat is recommended.</span></span> <span data-ttu-id="2b5c8-125">Un fichier de Logmall.bat est également fourni.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-125">A Logmall.bat file is also provided.</span></span> <span data-ttu-id="2b5c8-126">Il est identique au fichier de commandes makeall, sauf qu’il journalise toute la sortie de compilation dans un fichier Errorlog.txt dans le répertoire principal du didacticiel.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-126">It does the same as Makeall batch file except that it logs all compilation output to file Errorlog.txt in the main tutorial directory.</span></span>

<span data-ttu-id="2b5c8-127">Deux fichiers de commandes, Regall.bat et Unregall.bat, sont également fournis dans le répertoire principal pour inscrire et annuler l’inscription de tous les serveurs COM dans la série d’exemples de code du didacticiel.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-127">Two batch files, Regall.bat and Unregall.bat, are also provided in the main directory to register and unregister all COM servers in the tutorial code sample series.</span></span> <span data-ttu-id="2b5c8-128">Pour inscrire tous les serveurs, exécutez Regall.bat fichier à partir du répertoire principal.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-128">To register all servers, run Regall.bat file from the main directory.</span></span> <span data-ttu-id="2b5c8-129">Pour annuler l’inscription de tous les serveurs, exécutez Unregall.bat de la même manière.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-129">To unregister all servers, run Unregall.bat in the same manner.</span></span> <span data-ttu-id="2b5c8-130">Ces fichiers de commandes requièrent une génération antérieure des exemples de code REGISTER, MARSHAL, DLLSERVE, LICSERVE, LOCSERVE, APTSERVE, FRESERVE et conserved.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-130">These batch files require a prior build of the REGISTER, MARSHAL, DLLSERVE, LICSERVE, LOCSERVE, APTSERVE, FRESERVE, and CONSERVE code samples.</span></span> <span data-ttu-id="2b5c8-131">Si vous effectuez une génération normale des exemples de code, les Makefiles serveur inscriront automatiquement les serveurs.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-131">If you perform a normal build of the code samples, the server makefiles will automatically register the servers.</span></span> <span data-ttu-id="2b5c8-132">Dans ce cas, il n’est pas nécessaire d’exécuter le fichier de commandes Regall.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-132">In this case, it is not necessary to run the Regall batch file.</span></span>

<span data-ttu-id="2b5c8-133">Exécutez le fichier de commandes Cleanall.bat pour effectuer une cleanall exhaustive de tous les exemples de didacticiels COM.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-133">Run the Cleanall.bat batch file to perform an exhaustive Cleanall of all the COM Tutorial Samples.</span></span>

> [!WARNING]
> <span data-ttu-id="2b5c8-134">Ce fichier de commandes supprime tous les fichiers projet Visual Studio et d’autres fichiers de travail temporaires créés par Visual C++ dans les exemples.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-134">This batch file deletes all Visual Studio project files and other temporary work files created by Visual C++ in the samples.</span></span> <span data-ttu-id="2b5c8-135">Tous les serveurs COM générés dans les exemples de code du didacticiel sont désinscrits du Registre.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-135">All of the COM servers built in the tutorial code samples are unregistered from the registry.</span></span> <span data-ttu-id="2b5c8-136">Tous les fichiers exe et. dll exécutables sont supprimés.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-136">All executable exe and .dll files are deleted.</span></span> <span data-ttu-id="2b5c8-137">Tous les fichiers de symboles de débogage sont supprimés.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-137">All debug symbol files are deleted.</span></span> <span data-ttu-id="2b5c8-138">Les fichiers générés dans divers environnements de génération sont également supprimés.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-138">Files generated in a variety of build environments are also deleted.</span></span>

 

<span data-ttu-id="2b5c8-139">Exécutez « makeall Clean » pour effectuer un nettoyage plus rapide, mais plus modeste, de tous les exemples de code.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-139">Run 'Makeall Clean' to perform a faster, but more modest, cleanup of all the code samples.</span></span> <span data-ttu-id="2b5c8-140">Cette opération de nettoyage ne tente pas d’être aussi complète que celle exécutée par Cleanall.bat.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-140">This cleaning operation does not attempt to be as comprehensive as that performed by Cleanall.bat.</span></span> <span data-ttu-id="2b5c8-141">Les fichiers. obj sont supprimés, mais les binaires de sortie sont conservés.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-141">The .obj files are deleted, but the output binaries are retained.</span></span> <span data-ttu-id="2b5c8-142">Les serveurs COM ne sont pas désinscrits du Registre.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-142">The COM servers are not unregistered from the registry.</span></span>

<span data-ttu-id="2b5c8-143">Cette série d’exemples provient d’une partie intégrante de la SDK Windows. par conséquent, la narration du didacticiel part du principe qu’un environnement avec le SDK Windows correctement installé.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-143">This sample series originated as an integral part of the Windows SDK, therefore the tutorial narrative assumes an environment with the Windows SDK properly installed.</span></span>

<span data-ttu-id="2b5c8-144">Toutefois, les versions de Microsoft Visual C++ version 4,0 et ultérieure peuvent également fournir les fichiers de bibliothèque include et. lib requis pour la compilation.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-144">However, releases of Microsoft Visual C++ version 4.0 and later may also provide the .h include and .lib library files required for compilation.</span></span> <span data-ttu-id="2b5c8-145">Dans ce cas, l’installation du SDK Windows peut ne pas être nécessaire pour compiler les exemples.</span><span class="sxs-lookup"><span data-stu-id="2b5c8-145">In such cases, installation of the Windows SDK may not be required to compile the samples.</span></span>

<span data-ttu-id="2b5c8-146">Pour plus d’informations et pour obtenir des exemples détaillés de génération, consultez :</span><span class="sxs-lookup"><span data-stu-id="2b5c8-146">For more information and complete sample build details, see:</span></span>

[<span data-ttu-id="2b5c8-147">Configuration de l’environnement</span><span class="sxs-lookup"><span data-stu-id="2b5c8-147">Environment Setup</span></span>](environment-setup.md)

[<span data-ttu-id="2b5c8-148">Makefiles</span><span class="sxs-lookup"><span data-stu-id="2b5c8-148">Makefiles</span></span>](makefiles.md)

[<span data-ttu-id="2b5c8-149">Utilisation de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="2b5c8-149">Using Visual Studio</span></span>](using-visual-studio.md)

[<span data-ttu-id="2b5c8-150">Extraction des exemples de code</span><span class="sxs-lookup"><span data-stu-id="2b5c8-150">Extracting the Code Samples</span></span>](extracting-the-code-samples.md)

[<span data-ttu-id="2b5c8-151">Conventions de style de codage</span><span class="sxs-lookup"><span data-stu-id="2b5c8-151">Coding Style Conventions</span></span>](coding-style-conventions.md)

 

 




