---
title: 64-considérations sur les bits
description: Avec la disponibilité accrue de Windows 64 bits, les utilisateurs attendent des méthodes d’entrée, telles que des claviers internationaux dans différents langages ou éditeurs de méthode d’entrée (IME) dans les langues d’Extrême-Orient, pour fonctionner correctement avec les applications 32 bits et 64 bits.
ms.assetid: 6a99ad45-202c-4fbb-9707-341bc9fde21e
keywords:
- Text Services Framework (TSF), Windows 64 bits
- TSF (Text Services Framework), Windows 64 bits
- services de texte, Windows 64 bits
- Windows 64 bits
- Text Services Framework (TSF), éditeur de méthode d’entrée (IME)
- TSF (Text Services Framework), éditeur de méthode d’entrée (IME)
- services de texte, éditeur de méthode d’entrée (IME)
- Éditeur de méthode d'entrée (IME)
- IME (éditeur de méthode d’entrée)
- Text Services Framework (TSF), claviers internationaux
- TSF (Text Services Framework), claviers internationaux
- services de texte, claviers internationaux
- claviers internationaux
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 045ec699c7a433f15b92467e3072d30acbf01936
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104382121"
---
# <a name="64-bit-considerations"></a><span data-ttu-id="431f4-116">64-considérations sur les bits</span><span class="sxs-lookup"><span data-stu-id="431f4-116">64-Bit Considerations</span></span>

<span data-ttu-id="431f4-117">Avec la disponibilité accrue de Windows 64 bits, les utilisateurs attendent des méthodes d’entrée, telles que des claviers internationaux dans différents langages ou éditeurs de méthode d’entrée (IME) dans les langues d’Extrême-Orient, pour fonctionner correctement avec les applications 32 bits et 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-117">With the increasing availability of 64-bit Windows, users expect input methods, such as international keyboards in various languages or Input Method Editors (IMEs) in East Asian languages, to work properly with both 32-bit and 64-bit applications.</span></span> <span data-ttu-id="431f4-118">Lors du développement de composants de méthode d’entrée ou de services de texte pour Microsoft Windows, il est important de considérer Windows 64 bits comme une plateforme cible potentielle pour votre produit.</span><span class="sxs-lookup"><span data-stu-id="431f4-118">When developing input method components or text services for Microsoft Windows, it is important to consider 64-bit Windows as a potential target platform for your product.</span></span>

<span data-ttu-id="431f4-119">Étant donné que les éditeurs de contenu et les services de texte (basés sur l’infrastructure de services de texte) sont généralement implémentés en tant que bibliothèques de liens dynamiques (dll), il est important de noter que les dll sont générées spécifiquement pour une utilisation dans des environnements 32 bits ou des environnements 64 bits. une DLL générée pour une utilisation dans des environnements 32 bits ne peut pas être utilisée par les applications 64 bits, et inversement.</span><span class="sxs-lookup"><span data-stu-id="431f4-119">Because IMEs and text services (based on the Text Services Framework) are typically implemented as dynamic-link libraries (DLLs), it is important to note that DLLs are built specifically for use in either 32-bit environments or 64-bit environments; a DLL built for use in 32-bit environments cannot be used by 64-bit applications, and vice versa.</span></span>

> [!Note]  
> <span data-ttu-id="431f4-120">WOW64 n’atténue pas cette restriction de DLL spécifique à un bit.</span><span class="sxs-lookup"><span data-stu-id="431f4-120">WOW64 does not mitigate this bit-specific DLL restriction.</span></span> <span data-ttu-id="431f4-121">Pour plus d’informations sur WOW64, consultez [exécution d’Applications 32 bits](/windows/desktop/WinProg64/running-32-bit-applications).</span><span class="sxs-lookup"><span data-stu-id="431f4-121">For information about WOW64, see [Running 32-bit Applications](/windows/desktop/WinProg64/running-32-bit-applications).</span></span>

 

<span data-ttu-id="431f4-122">Cette rubrique aborde les considérations de conception importantes pour le développement d’éditeurs et de services de texte pour une utilisation sur Windows 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-122">This topic discusses important design considerations for developing IMEs and text services for use on 64-bit Windows.</span></span>

## <a name="64-bit-considerations-for-imes"></a><span data-ttu-id="431f4-123">64-points à prendre en considération pour les IME</span><span class="sxs-lookup"><span data-stu-id="431f4-123">64-Bit Considerations for IMEs</span></span>

<span data-ttu-id="431f4-124">Cette section décrit les considérations spéciales impliquées dans la création d’IME pour une utilisation avec Windows 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-124">This section describes the special considerations involved with building IMEs for use with 64-bit Windows.</span></span> <span data-ttu-id="431f4-125">Pour plus d’informations sur les éditeurs de [méthode d’entrée, consultez Éditeur de méthode d’entrée](/previous-versions/windows/desktop/dnacc/input-method-editor-and-text-services-framework-accessibility).</span><span class="sxs-lookup"><span data-stu-id="431f4-125">For information about IMEs, see [Input Method Editor](/previous-versions/windows/desktop/dnacc/input-method-editor-and-text-services-framework-accessibility).</span></span>

## <a name="building-32-bit-and-64-bit-versions-of-an-ime"></a><span data-ttu-id="431f4-126">Génération de versions 32 bits et 64 bits d’un IME</span><span class="sxs-lookup"><span data-stu-id="431f4-126">Building 32-Bit and 64-Bit Versions of an IME</span></span>

<span data-ttu-id="431f4-127">En raison du problème de compatibilité 32 bits/64 bits précédemment mentionné avec les dll, certaines précautions doivent être prises pour s’assurer que les éditeurs IME fonctionnent de manière transparente avec n’importe quelle application (32 bits ou 64 bits) exécutée sous Windows 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-127">Because of the previously mentioned 32-bit/64-bit compatibility issue with DLLs, some precautions must be taken to ensure that IMEs work transparently with any application (32-bit or 64-bit) running on 64-bit Windows.</span></span> <span data-ttu-id="431f4-128">La solution recommandée pour permettre à votre IME de fonctionner de manière transparente avec les applications 32 bits et 64 bits sur une plateforme 64 bits consiste à créer et à installer des versions parallèles 32 bits et 64 bits de la DLL IME.</span><span class="sxs-lookup"><span data-stu-id="431f4-128">The recommended solution for enabling your IME to work transparently with both 32-bit and 64-bit applications on a 64-bit platform is to build and install parallel 32-bit and 64-bit versions of the IME DLL.</span></span> <span data-ttu-id="431f4-129">En règle générale, les développeurs génèrent des dll parallèles à partir d’une source unique en ajustant les paramètres de plateforme cible dans leur environnement de génération.</span><span class="sxs-lookup"><span data-stu-id="431f4-129">Typically, developers build parallel DLLs from a single source by adjusting the target platform settings in their build environment.</span></span> <span data-ttu-id="431f4-130">Pour plus d’informations sur les applications 32 bits et 64 bits à source unique, consultez se [préparer pour Windows 64 bits](/windows/desktop/WinProg64/getting-ready-for-64-bit-windows).</span><span class="sxs-lookup"><span data-stu-id="431f4-130">For more information about single-sourcing 32-bit and 64-bit applications, see [Getting Ready for 64-bit Windows](/windows/desktop/WinProg64/getting-ready-for-64-bit-windows).</span></span>

## <a name="side-by-side-installation-of-64-bit-and-32-bit-input-method-editors"></a><span data-ttu-id="431f4-131">Installation côte à côte des éditeurs de méthode d’entrée 64 bits et 32 bits</span><span class="sxs-lookup"><span data-stu-id="431f4-131">Side-by-Side Installation of 64-Bit and 32-Bit Input Method Editors</span></span>

<span data-ttu-id="431f4-132">Les développeurs d’IME et de services de texte doivent connaître les considérations 64 bits décrites dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="431f4-132">Developers of IMEs and text services should be aware of the 64-bit considerations described throughout this topic.</span></span> <span data-ttu-id="431f4-133">Heureusement, les utilisateurs finaux de ces services n’ont pas à se préoccuper de ces détails spécifiques à l’implémentation.</span><span class="sxs-lookup"><span data-stu-id="431f4-133">Fortunately, end users of these services need not be concerned with these implementation-specific details.</span></span> <span data-ttu-id="431f4-134">Une fonctionnalité de Windows 64 bits est la possibilité de masquer les versions spécifiques à 64 bits et 32 bits des dll IME des utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="431f4-134">A feature of 64-bit Windows is the ability to hide the need for 64-bit and 32-bit-specific versions of the IME DLLs from end users.</span></span> <span data-ttu-id="431f4-135">Lorsque les deux versions de l’IME sont correctement installées côte à côte, Windows 64 bits reconnaît la présence des versions 64 bits et 32 bits de l’IME et présente ces éditeurs IME spécifiques à l’utilisateur final comme un IME *logique* unique.</span><span class="sxs-lookup"><span data-stu-id="431f4-135">When both versions of the IME are properly installed in a side-by-side manner, 64-bit Windows recognizes the presence of both 64-bit and 32-bit versions of the IME and presents these bit-specific IMEs to the end user as a single *logical* IME.</span></span> <span data-ttu-id="431f4-136">Lorsqu’un utilisateur final doit utiliser un IME, Windows 64 bits choisit en toute transparence la version de l’IME (32 bits ou 64 bits) appropriée pour les circonstances données.</span><span class="sxs-lookup"><span data-stu-id="431f4-136">When an end user needs to use an IME, 64-bit Windows transparently chooses the version of the IME (32-bit or 64-bit) that is appropriate for the given circumstances.</span></span>

<span data-ttu-id="431f4-137">Pour que les installations côte à côte des IME 64 bits et 32 bits fonctionnent correctement (autrement dit, pour représenter les deux dll propres à la plateforme comme un IME logique unique à l’utilisateur), les conditions suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="431f4-137">For side-by-side installations of 64-bit and 32-bit IMEs to function properly (that is, to represent the two platform-specific DLLs as a single logical IME to the user), the following conditions must be met:</span></span>

-   <span data-ttu-id="431f4-138">Les développeurs doivent créer des versions spécifiques à la plateforme (une pour Windows 32 bits et une pour Windows 64 bits) de la DLL IME.</span><span class="sxs-lookup"><span data-stu-id="431f4-138">Developers must build platform-specific versions (one for 32-bit Windows and one for 64-bit Windows) of the IME DLL.</span></span>
-   <span data-ttu-id="431f4-139">Les dll 32 bits et 64 bits doivent partager le même nom de fichier.</span><span class="sxs-lookup"><span data-stu-id="431f4-139">The 32-bit and 64-bit DLLs must share the same file name.</span></span>
-   <span data-ttu-id="431f4-140">La configuration requise pour le répertoire d’installation doit être suivie.</span><span class="sxs-lookup"><span data-stu-id="431f4-140">Installation directory requirements must be followed.</span></span> <span data-ttu-id="431f4-141">Pour plus d’informations, consultez Configuration requise pour le répertoire d’installation.</span><span class="sxs-lookup"><span data-stu-id="431f4-141">For more information, see Installation Directory Requirements.</span></span>

<span data-ttu-id="431f4-142">Les installations côte à côte des dll IME 32 bits et 64 bits partagent la même clé de Registre pour le stockage des données de configuration (y compris le nom du fichier DLL) :</span><span class="sxs-lookup"><span data-stu-id="431f4-142">Side-by-side installations of 32-bit and 64-bit IME DLLs share the same registry key for storing configuration data (including the DLL file name):</span></span>


```C++
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Keyboard Layouts
```



<span data-ttu-id="431f4-143">La fonction [**ImmInstallIME**](/windows/desktop/api/imm/nf-imm-imminstallimea) est utilisée pour créer cette clé de registre.</span><span class="sxs-lookup"><span data-stu-id="431f4-143">The [**ImmInstallIME**](/windows/desktop/api/imm/nf-imm-imminstallimea) function is used to create this registry key.</span></span> <span data-ttu-id="431f4-144">Le programme d’installation et d’installation d’un IME doit appeler cette fonction pour inscrire l’IME en tant que disposition de clavier prise en charge.</span><span class="sxs-lookup"><span data-stu-id="431f4-144">The setup and installation program for an IME must call this function to register the IME as a supported keyboard layout.</span></span> <span data-ttu-id="431f4-145">La fonction **ImmInstallIME** ne doit être appelée qu’une seule fois, que ce soit à partir de la version 32 bits ou 64 bits de la dll IME.</span><span class="sxs-lookup"><span data-stu-id="431f4-145">The **ImmInstallIME** function should be called only once, either from the 32-bit or 64-bit version of the IME DLL.</span></span>

## <a name="mismatched-ime-dlls"></a><span data-ttu-id="431f4-146">Dll IME non appariées</span><span class="sxs-lookup"><span data-stu-id="431f4-146">Mismatched IME DLLs</span></span>

<span data-ttu-id="431f4-147">L’installation de la version 32 bits d’un IME sur Windows 64 bits n’est ni recommandée ni prise en charge.</span><span class="sxs-lookup"><span data-stu-id="431f4-147">Installing only the 32-bit version of an IME on 64-bit Windows is neither recommended nor supported.</span></span> <span data-ttu-id="431f4-148">Si une application 64 bits tente de charger un IME 32 bits, l’IME échoue en silence quand l’application tente de charger la disposition de clavier associée.</span><span class="sxs-lookup"><span data-stu-id="431f4-148">If a 64-bit application attempts to load a 32-bit IME, the IME fails silently when the application attempts to load the associated keyboard layout.</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="431f4-149">Aucune boîte de dialogue d’avertissement ou message ne s’affiche lorsqu’une application 64 bits/une erreur de conflit IME 32 bits se produit.</span><span class="sxs-lookup"><span data-stu-id="431f4-149">No warning dialog or message displays when a 64-bit application/32-bit IME conflict error occurs.</span></span>

 

<span data-ttu-id="431f4-150">64-points à prendre en compte pour les services de texte</span><span class="sxs-lookup"><span data-stu-id="431f4-150">64-Bit Considerations for Text Services</span></span>

<span data-ttu-id="431f4-151">Cette section décrit les considérations spéciales impliquées dans la création de services de texte pour une utilisation dans les environnements 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-151">This section describes the special considerations involved with building text services for use in 64-bit environments.</span></span> <span data-ttu-id="431f4-152">Pour plus d’informations sur les services de texte et l’infrastructure de services de texte, consultez [Text Services Framework](text-services-framework.md).</span><span class="sxs-lookup"><span data-stu-id="431f4-152">For more information about text services and the Text Services Framework, see [Text Services Framework](text-services-framework.md).</span></span>

## <a name="building-32-bit-and-64-bit-text-services"></a><span data-ttu-id="431f4-153">Génération de services de texte 32 bits et 64 bits</span><span class="sxs-lookup"><span data-stu-id="431f4-153">Building 32-Bit and 64-Bit Text Services</span></span>

<span data-ttu-id="431f4-154">Un service de texte est implémenté en tant qu’objet COM (Component Object Model) exposé sur une DLL.</span><span class="sxs-lookup"><span data-stu-id="431f4-154">A text service is implemented as a Component Object Model (COM) object exposed on a DLL.</span></span> <span data-ttu-id="431f4-155">Par conséquent, des conflits de DLL 32 bits/64 bits peuvent se produire avec les services de texte installés sur Windows 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-155">Consequently, 32-bit/64-bit DLL conflicts can occur with text services installed on 64-bit Windows.</span></span> <span data-ttu-id="431f4-156">Tout comme avec les éditeurs IME, la solution recommandée pour permettre à votre service de texte de fonctionner de manière transparente avec les applications 32 bits et 64 bits sur une plateforme 64 bits consiste à créer et à installer des versions parallèles 32 bits et 64 bits de la DLL du service de texte.</span><span class="sxs-lookup"><span data-stu-id="431f4-156">Just as with IMEs, the recommended solution for enabling your text service to work transparently with both 32-bit and 64-bit applications on a 64-bit platform is to build and install parallel 32-bit and 64-bit versions of the text service DLL.</span></span>

## <a name="side-by-side-installation-of-64-bit-and-32-bit-text-services"></a><span data-ttu-id="431f4-157">Installation côte à côte de services de texte 64 bits et 32 bits</span><span class="sxs-lookup"><span data-stu-id="431f4-157">Side-by-Side Installation of 64-Bit and 32-Bit Text Services</span></span>

<span data-ttu-id="431f4-158">Pour une version 32 bits et une version 64 bits d’un service de texte à installer côte à côte et représentées à l’utilisateur sous la forme d’un service de texte logique unique, les conditions suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="431f4-158">For a 32-bit version and a 64-bit version of a text service to be installed side-by-side and represented to the user as a single, logical text service, the following conditions must be met:</span></span>

-   <span data-ttu-id="431f4-159">Les deux versions du service de texte spécifient le même identificateur de classe (CLSID) lorsqu’elles sont inscrites auprès du sous-système COM.</span><span class="sxs-lookup"><span data-stu-id="431f4-159">Both versions of the text service specify the same class identifier (CLSID) when they are registered with the COM subsystem.</span></span>
-   <span data-ttu-id="431f4-160">Les deux versions du service de texte sont inscrites indépendamment.</span><span class="sxs-lookup"><span data-stu-id="431f4-160">Both versions of the text service are registered independently.</span></span> <span data-ttu-id="431f4-161">Pour plus d’informations, consultez [inscription d’applications com](/windows/desktop/com/registering-com-applications).</span><span class="sxs-lookup"><span data-stu-id="431f4-161">For more information, see [Registering COM Applications](/windows/desktop/com/registering-com-applications).</span></span>

<span data-ttu-id="431f4-162">Quand un service de texte 32 bits est inscrit avec Windows 64 bits, l’opération d’inscription est redirigée de façon transparente vers la clé de Registre suivante :</span><span class="sxs-lookup"><span data-stu-id="431f4-162">When a 32-bit text service is registered with 64-bit Windows, the registration operation is transparently redirected to the following registry key:</span></span>


```C++
HKEY_CLASS_ROOT\Wow6432Node\CLSID
```



[<span data-ttu-id="431f4-163">Redirecteur du Registre</span><span class="sxs-lookup"><span data-stu-id="431f4-163">Registry Redirector</span></span>](/windows/desktop/WinProg64/registry-redirector)


```C++
HKEY_LOCAL_MACHINE\Software\Microsoft\CTF\TIP
```



<span data-ttu-id="431f4-164">[](/windows/desktop/api/Msctf/nn-msctf-itfinputprocessorprofiles)[Inscription du service de texte](text-service-registration.md) ITfInputProcessorProfiles</span><span class="sxs-lookup"><span data-stu-id="431f4-164">[ITfInputProcessorProfiles](/windows/desktop/api/Msctf/nn-msctf-itfinputprocessorprofiles)[Text Service Registration](text-service-registration.md)</span></span>

<span data-ttu-id="431f4-165">La version 64 bits et la version 32 bits d’un service de texte peuvent être en cours d’utilisation simultanément.</span><span class="sxs-lookup"><span data-stu-id="431f4-165">The 64-bit version and the 32-bit version of a text service might be in use simultaneously.</span></span> <span data-ttu-id="431f4-166">Dans les cas où les deux versions d’un service de texte doivent manipuler des objets partagés, la coordination des objets partagés d’accès doit être conçue dans le service de texte.</span><span class="sxs-lookup"><span data-stu-id="431f4-166">In cases where both versions of a text service need to manipulate any shared objects, coordination for access shared objects should be designed into the text service.</span></span> <span data-ttu-id="431f4-167">Chaque service de texte est responsable de la gestion des objets partagés qui sont utilisés ou nécessaires.</span><span class="sxs-lookup"><span data-stu-id="431f4-167">Each text service is responsible for managing any shared objects that are used or needed.</span></span>

## <a name="installing-only-32-bit-text-services-on-64-bit-windows"></a><span data-ttu-id="431f4-168">Installation des services de texte 32 bits sur Windows 64 bits</span><span class="sxs-lookup"><span data-stu-id="431f4-168">Installing Only 32-Bit Text Services on 64-Bit Windows</span></span>

<span data-ttu-id="431f4-169">L’installation de la version 32 bits d’un service de texte sur une plate-forme Windows 64 bits n’est ni recommandée ni prise en charge.</span><span class="sxs-lookup"><span data-stu-id="431f4-169">Installing only the 32-bit version of a text service on a 64-bit Windows platform is neither recommended nor supported.</span></span> <span data-ttu-id="431f4-170">En raison du mappage d’inscription effectué sur les plateformes Windows 64 bits, une application 64 bits peut énumérer les services d’un service de texte de 32 bits par le biais de l’interface **ITfInputProcessorProfiles** .</span><span class="sxs-lookup"><span data-stu-id="431f4-170">Because of the registration mapping that is done on 64-bit Windows platforms, a 64-bit application can enumerate the services of a 32-bit Text Service through the **ITfInputProcessorProfiles** interface.</span></span> <span data-ttu-id="431f4-171">Toutefois, si une application 64 bits tente de charger un service de texte 32 bits, le chargement échoue en silence.</span><span class="sxs-lookup"><span data-stu-id="431f4-171">However, if a 64-bit application attempts to load a 32-bit text service, the load fails silently.</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="431f4-172">Aucune boîte de dialogue d’avertissement ou message ne s’affiche lorsqu’une erreur de conflit de service de texte 32 bits ou une application 64 bits se produit.</span><span class="sxs-lookup"><span data-stu-id="431f4-172">No warning dialog or message displays when a 64-bit application/32-bit text service conflict error occurs.</span></span>

 

<span data-ttu-id="431f4-173">Autres considérations</span><span class="sxs-lookup"><span data-stu-id="431f4-173">Other Considerations</span></span>

## <a name="installation-directory-requirements"></a><span data-ttu-id="431f4-174">Configuration requise pour le répertoire d’installation</span><span class="sxs-lookup"><span data-stu-id="431f4-174">Installation Directory Requirements</span></span>

<span data-ttu-id="431f4-175">Cette section décrit la configuration requise pour l’installation des fichiers binaires IME et de services texte.</span><span class="sxs-lookup"><span data-stu-id="431f4-175">This section describes requirements for where to install IME and text service binary files.</span></span> <span data-ttu-id="431f4-176">Si ces exigences ne sont pas respectées, votre service de texte ou IME risque de ne pas fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="431f4-176">If these requirements are not followed, your text service or IME might not function correctly.</span></span>

<span data-ttu-id="431f4-177">**Dll IME**</span><span class="sxs-lookup"><span data-stu-id="431f4-177">**IME DLLs**</span></span>

<span data-ttu-id="431f4-178">Sur les plateformes Windows 64 bits, installez les dll IME 32 bits et 64 bits dans les répertoires suivants :</span><span class="sxs-lookup"><span data-stu-id="431f4-178">On 64-bit Windows platforms, install the 32-bit and 64-bit IME DLLs in the following directories:</span></span>

-   <span data-ttu-id="431f4-179">Installer des dll IME 32 bits dans le répertoire système SysWOW64 ; Appelez [**GetSystemWow64Directory**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directorya)ou [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) avec **CSIDL \_ SYSTEMX86** pour récupérer ce chemin d’accès au répertoire.</span><span class="sxs-lookup"><span data-stu-id="431f4-179">Install 32-bit IME DLLs in the SysWOW64 system directory; call [**GetSystemWow64Directory**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directorya), or [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) with **CSIDL\_SYSTEMX86** to retrieve this directory path.</span></span> <span data-ttu-id="431f4-180">Sinon, si vous utilisez [Windows Installer](/windows/desktop/Msi/about-windows-installer), utilisez la propriété [**SystemFolder**](/windows/desktop/Msi/systemfolder) .</span><span class="sxs-lookup"><span data-stu-id="431f4-180">Alternately, if you are using [Windows Installer](/windows/desktop/Msi/about-windows-installer), use the [**SystemFolder**](/windows/desktop/Msi/systemfolder) property.</span></span>
-   <span data-ttu-id="431f4-181">Installer des dll IME 64 bits dans le répertoire système system32 ; Appelez [**GetSystemDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsystemdirectorya)ou **SHGetFolderPath** avec le [ \_ système CSIDL](/windows/desktop/shell/csidl) pour récupérer ce chemin d’accès au répertoire.</span><span class="sxs-lookup"><span data-stu-id="431f4-181">Install 64-bit IME DLLs in the System32 system directory; call [**GetSystemDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsystemdirectorya), or **SHGetFolderPath** with [CSIDL\_SYSTEM](/windows/desktop/shell/csidl) to retrieve this directory path.</span></span> <span data-ttu-id="431f4-182">Ou, pour Windows Installer, utilisez la propriété [**System64Folder**](/windows/desktop/Msi/system64folder) .</span><span class="sxs-lookup"><span data-stu-id="431f4-182">Or, for Windows Installer, use the [**System64Folder**](/windows/desktop/Msi/system64folder) property.</span></span>

<span data-ttu-id="431f4-183">**Dll du service de texte et fichiers binaires associés**</span><span class="sxs-lookup"><span data-stu-id="431f4-183">**Text Service DLLs and Related Binary Files**</span></span>

<span data-ttu-id="431f4-184">Sur les plateformes Windows 64 bits, installez les dll du service de texte 32 bits et 64 bits, ainsi que tous les autres fichiers binaires associés à votre service de texte ou à votre IME, dans les répertoires suivants :</span><span class="sxs-lookup"><span data-stu-id="431f4-184">On 64-bit Windows platforms, install the 32-bit and 64-bit text service DLLs, as well as any other binary files related to your text service or IME, in the following directories:</span></span>

-   <span data-ttu-id="431f4-185">Installez les dll du service de texte 32 bits et tout autre fichier binaire 32 bits dans un sous-répertoire du répertoire Program Files (x86); Appelez **SHGetFolderPath** avec **le \_ programme CSIDL \_ FILESX86** pour récupérer ce chemin d’accès au répertoire.</span><span class="sxs-lookup"><span data-stu-id="431f4-185">Install 32-bit text service DLLs and any other 32-bit binary files in a subdirectory in the Program Files (x86) directory; call **SHGetFolderPath** with **CSIDL\_PROGRAM\_FILESX86** to retrieve this directory path.</span></span> <span data-ttu-id="431f4-186">Ou, pour Windows Installer, utilisez la propriété [**ProgramFilesFolder**](/windows/desktop/Msi/programfilesfolder) .</span><span class="sxs-lookup"><span data-stu-id="431f4-186">Or, for Windows Installer, use the [**ProgramFilesFolder**](/windows/desktop/Msi/programfilesfolder) property.</span></span>
-   <span data-ttu-id="431f4-187">Installez les dll du service de texte 64 bits et tout autre fichier binaire 64 bits dans un sous-répertoire du répertoire Program Files. Appelez **SHGetFolderPath** avec **les \_ \_ fichiers programme CSIDL** pour récupérer ce chemin d’accès au répertoire.</span><span class="sxs-lookup"><span data-stu-id="431f4-187">Install 64-bit text service DLLs and any other 64-bit binary files in a subdirectory under the Program Files directory; call **SHGetFolderPath** with **CSIDL\_PROGRAM\_FILES** to retrieve this directory path.</span></span> <span data-ttu-id="431f4-188">Ou, pour Windows Installer, utilisez la propriété [**ProgramFiles64Folder**](/windows/desktop/Msi/programfiles64folder) .</span><span class="sxs-lookup"><span data-stu-id="431f4-188">Or, for Windows Installer, use the [**ProgramFiles64Folder**](/windows/desktop/Msi/programfiles64folder) property.</span></span>

<span data-ttu-id="431f4-189">Si vous n’utilisez pas de package d’Windows Installer pour installer votre IME ou votre service de texte, il est fortement recommandé d’utiliser une application d’installation 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-189">If you are not using a Windows Installer package to install your IME or text service, it is strongly recommnded that you use a 64-bit installation application.</span></span> <span data-ttu-id="431f4-190">Le redirecteur du système de fichiers WOW64 peut entraîner la mise en place de fichiers dans les répertoires incorrects dans les programmes d’installation 32 bits (par exemple, la redirection du système de fichiers WOW64 peut entraîner l’installation des fichiers destinés au répertoire system32 dans le répertoire SysWOW64 à la place).</span><span class="sxs-lookup"><span data-stu-id="431f4-190">The WOW64 file system redirector might cause 32-bit installers to place files in the wrong directories (for example, WOW64 file system redirection might cause files intended for the System32 directory to be installed in the SysWOW64 directory instead).</span></span> <span data-ttu-id="431f4-191">Si vous devez utiliser un programme d’installation 32 bits, désactivez la redirection de fichiers WOW64 au cours du processus d’installation pour vous assurer que le service redirecteur de fichiers n’entraîne pas de redirection inattendue pendant le processus d’installation.</span><span class="sxs-lookup"><span data-stu-id="431f4-191">If you must use a 32-bit installer, disable WOW64 file redirection during the installation process to ensure that the file-redirector service does not cause any unintended redirection during the installation process.</span></span> <span data-ttu-id="431f4-192">Pour plus d’informations sur le redirecteur de système de fichiers WOW64, consultez [redirecteur de système de fichiers](/windows/desktop/WinProg64/file-system-redirector).</span><span class="sxs-lookup"><span data-stu-id="431f4-192">For information about the WOW64 file system redirector, see [File System Redirector](/windows/desktop/WinProg64/file-system-redirector).</span></span> <span data-ttu-id="431f4-193">Pour plus d’informations sur la façon de désactiver ou d’activer la redirection du système de fichiers WOW64, consultez [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection).</span><span class="sxs-lookup"><span data-stu-id="431f4-193">For information about how to disable or enable WOW64 file system redirection, see [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection).</span></span>

> [!TIP]
>
> <span data-ttu-id="431f4-194">Évitez les chemins d’installation codés en dur.</span><span class="sxs-lookup"><span data-stu-id="431f4-194">Avoid hard-coded installation paths.</span></span> <span data-ttu-id="431f4-195">Pour plus d’informations, consultez [localiser des répertoires à l’aide de l’interface de programmation d’applications non Hard-Coded chemins d’accès](/previous-versions//ms675638(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="431f4-195">For more information, see [Locate Directories Using the Application Programming Interface Not Hard-Coded Paths](/previous-versions//ms675638(v=vs.85))</span></span>

 

> [!IMPORTANT]
>
> <span data-ttu-id="431f4-196">N’installez aucun fichier IME ou de service de texte dans le répertoire spécial% WINDIR% \\ IME (par défaut, c : \\ Windows \\ IME).</span><span class="sxs-lookup"><span data-stu-id="431f4-196">Do not install any IME or text service files in the special directory %WINDIR%\\IME (by default, c:\\Windows\\IME ).</span></span> <span data-ttu-id="431f4-197">Ce répertoire contient des fichiers système qui prennent en charge les services de texte et les éditeurs IME. elle n’est pas destinée à contenir des fichiers IME ou de service de texte tiers, et la redirection du système de fichiers WOW64 n’est pas prise en charge pour ce répertoire.</span><span class="sxs-lookup"><span data-stu-id="431f4-197">This directory contains system files that support text services and IMEs; it is not intended to contain any third-party IME or text service files, and WOW64 file system redirection is not supported for this directory.</span></span>

 

## <a name="dual-ctfmonexe-processes-run-on-64-bit-windows-platforms"></a><span data-ttu-id="431f4-198">Les processus à double Ctfmon.exe s’exécutent sur des plateformes Windows 64 bits</span><span class="sxs-lookup"><span data-stu-id="431f4-198">Dual Ctfmon.exe Processes Run on 64-Bit Windows Platforms</span></span>

<span data-ttu-id="431f4-199">Le processus de ctfmon.exe gère l’infrastructure de services de texte sur le bureau et fournit également l’interface utilisateur de la barre de langue.</span><span class="sxs-lookup"><span data-stu-id="431f4-199">The ctfmon.exe process manages the Text Services Framework on the desktop and also provides the language bar user interface (UI).</span></span> <span data-ttu-id="431f4-200">Sur Windows 64 bits, une version 32 bits et une version 64 bits du processus de ctfmon.exe s’exécutent simultanément.</span><span class="sxs-lookup"><span data-stu-id="431f4-200">On 64-bit Windows, a 32-bit version and a 64-bit version of the ctfmon.exe process run simultaneously.</span></span> <span data-ttu-id="431f4-201">Le processus de ctfmon.exe 64 bits gère les services de texte 64 bits et, de même, le processus de ctfmon.exe de 32 bits gère les services de texte 32 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-201">The 64-bit ctfmon.exe process manages 64-bit text services, and, likewise, the 32-bit ctfmon.exe process manages 32-bit text services.</span></span>

## <a name="display-behavior-for-different-versions-of-the-language-bar-ui"></a><span data-ttu-id="431f4-202">Comportement d’affichage pour les différentes versions de l’interface utilisateur de la barre de langue</span><span class="sxs-lookup"><span data-stu-id="431f4-202">Display Behavior for Different Versions of the Language Bar UI</span></span>

<span data-ttu-id="431f4-203">Sur Windows 64 bits, seule l’interface utilisateur de la barre de langue associée à la version 64 bits d’un service de texte est toujours affichée.</span><span class="sxs-lookup"><span data-stu-id="431f4-203">On 64-bit Windows, only the language bar UI associated with the 64-bit version of a text service is ever shown.</span></span> <span data-ttu-id="431f4-204">Dans les cas où une application 32 bits utilise la version 32 bits d’un service de texte, Windows 64 bits insère automatiquement l’interface utilisateur de la barre de langue pour le service de texte 64 équivalent.</span><span class="sxs-lookup"><span data-stu-id="431f4-204">In cases where a 32-bit application is using the 32-bit version of a text service, 64-bit Windows automatically inserts the language bar UI for the equivalent 64-bit text service.</span></span> <span data-ttu-id="431f4-205">Cela garantit qu’aucun travail spécial n’est requis pour que les services de texte 32 bits s’affichent dans la version 64 bits de la barre de langue.</span><span class="sxs-lookup"><span data-stu-id="431f4-205">This ensures that no special work is required for 32-bit text services to appear in the 64-bit version of the language bar.</span></span>

## <a name="control-panel-considerations-on-64-bit-windows"></a><span data-ttu-id="431f4-206">Considérations sur le panneau de configuration sur Windows 64 bits</span><span class="sxs-lookup"><span data-stu-id="431f4-206">Control Panel Considerations on 64-Bit Windows</span></span>

<span data-ttu-id="431f4-207">Windows 64 bits fournit un accès aux versions 32 bits et 64 bits des services de texte et des éditeurs IME via le panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="431f4-207">64-bit Windows provides access to both 32-bit and 64-bit versions of text services and IMEs through the Control Panel.</span></span> <span data-ttu-id="431f4-208">Pour accéder aux paramètres du panneau de configuration pour des versions spécifiques de Text services ou des éditeurs IME, consultez les emplacements suivants.</span><span class="sxs-lookup"><span data-stu-id="431f4-208">To access Control Panel settings for specific versions of text services or IMEs, look in the following locations.</span></span>

-   <span data-ttu-id="431f4-209">**Accès au panneau de configuration pour les services de texte et les ime 32 bits :** Paramètres start->-> panneau de configuration-> afficher les icônes du panneau de configuration x86</span><span class="sxs-lookup"><span data-stu-id="431f4-209">**Control Panel access for 32-bit Text Services and IMEs:** Start -> Settings -> Control Panel -> View x86 Control Panel Icons</span></span>
-   <span data-ttu-id="431f4-210">**Accès au panneau de configuration pour les services de texte et les ime 64 bits :** Paramètres start->-> panneau de configuration-> Options régionales et linguistiques</span><span class="sxs-lookup"><span data-stu-id="431f4-210">**Control Panel access for 64-bit Text Services and IMEs:** Start -> Settings -> Control Panel -> Regional and Language Options</span></span>

<span data-ttu-id="431f4-211">Dans certains cas, certains paramètres peuvent être disponibles uniquement via le panneau de configuration 32 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-211">There may be circumstances where some settings might be available only through the 32-bit Control Panel.</span></span> <span data-ttu-id="431f4-212">Dans ce cas, assurez-vous que les utilisateurs de votre service de texte ou de l’éditeur IME en sont conscients, en fournissant la documentation appropriée ou en proposant des indicateurs d’interface utilisateur dans votre interface de paramètres 64 bits.</span><span class="sxs-lookup"><span data-stu-id="431f4-212">In these cases, be sure that users of your text service or IME are aware of this, by providing appropriate documentation or offering UI hints in your 64-bit settings interface.</span></span>

 

 