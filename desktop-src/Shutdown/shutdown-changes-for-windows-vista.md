---
description: Le tableau suivant résume les différences entre l’arrêt sur Windows Vista et Windows XP.
ms.assetid: da7985d2-85c8-47e1-a172-c9e92f450e24
title: Modifications de l’arrêt de Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e04bb20099349ce378384cf01c39e53ca03a896
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104034565"
---
# <a name="shutdown-changes-for-windows-vista"></a><span data-ttu-id="75bb6-103">Modifications de l’arrêt de Windows Vista</span><span class="sxs-lookup"><span data-stu-id="75bb6-103">Shutdown Changes for Windows Vista</span></span>

<span data-ttu-id="75bb6-104">Le tableau suivant résume les différences entre l’arrêt sur Windows Vista et Windows XP.</span><span class="sxs-lookup"><span data-stu-id="75bb6-104">The following table summarizes the differences between shutdown on Windows Vista and Windows XP.</span></span>



| <span data-ttu-id="75bb6-105">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="75bb6-105">Feature</span></span>                 | <span data-ttu-id="75bb6-106">Windows XP</span><span class="sxs-lookup"><span data-stu-id="75bb6-106">Windows XP</span></span>                                                                                                                                                                                                                                                                                                                                                                                | <span data-ttu-id="75bb6-107">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="75bb6-107">Windows Vista</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="75bb6-108">Blocage de l’arrêt</span><span class="sxs-lookup"><span data-stu-id="75bb6-108">Blocking shutdown</span></span>       | <span data-ttu-id="75bb6-109">Les applications peuvent retarder la réponse à [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) pendant 5 secondes, puis le système autorise l’utilisateur à mettre fin à l’application.</span><span class="sxs-lookup"><span data-stu-id="75bb6-109">Applications can delay responding to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) for 5 seconds, then the system allows the user to terminate the application.</span></span> <span data-ttu-id="75bb6-110">Les applications qui retournent la **valeur true** en réponse à **WM \_ QUERYENDSESSION** peuvent différer la réponse à [**WM \_ ENDSESSION**](wm-endsession.md) pendant 5 secondes, puis le système autorise l’utilisateur à mettre fin à l’application.</span><span class="sxs-lookup"><span data-stu-id="75bb6-110">Applications that return **TRUE** in response to **WM\_QUERYENDSESSION** can delay responding to [**WM\_ENDSESSION**](wm-endsession.md) for 5 seconds, then the system allows the user to terminate the application.</span></span> | <span data-ttu-id="75bb6-111">Les applications peuvent retarder la réponse à [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) pendant 5 secondes, puis le système autorise l’utilisateur à continuer ou à annuler l’arrêt.</span><span class="sxs-lookup"><span data-stu-id="75bb6-111">Applications can delay responding to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) for 5 seconds, then the system allows the user to continue or cancel shutdown.</span></span> <span data-ttu-id="75bb6-112">Les applications qui retournent la **valeur true** en réponse à **WM \_ QUERYENDSESSION** peuvent différer la réponse à [**WM \_ ENDSESSION**](wm-endsession.md) pendant 5 secondes, puis le système autorise l’utilisateur à continuer ou à annuler l’arrêt.</span><span class="sxs-lookup"><span data-stu-id="75bb6-112">Applications that return **TRUE** in response to **WM\_QUERYENDSESSION** can delay responding to [**WM\_ENDSESSION**](wm-endsession.md) for 5 seconds, then the system allows the user to continue or cancel shutdown.</span></span>                                                                                                      |
| <span data-ttu-id="75bb6-113">Annulation de l’arrêt</span><span class="sxs-lookup"><span data-stu-id="75bb6-113">Canceling shutdown</span></span>      | <span data-ttu-id="75bb6-114">Si une application retourne la **valeur false** en réponse à [**WM \_ QUERYENDSESSION**](wm-queryendsession.md), Shutdown est annulé dans la plupart des cas.</span><span class="sxs-lookup"><span data-stu-id="75bb6-114">If an application returns **FALSE** in response to [**WM\_QUERYENDSESSION**](wm-queryendsession.md), shutdown is canceled in most cases.</span></span> <span data-ttu-id="75bb6-115">Toutefois, aucune interface utilisateur n’est affichée. l’utilisateur peut donc ne pas savoir que l’arrêt a été annulé.</span><span class="sxs-lookup"><span data-stu-id="75bb6-115">However, no UI is displayed, so the user may not be aware that shutdown has been canceled.</span></span>                                                                                                                                                      | <span data-ttu-id="75bb6-116">Si une application retourne la **valeur false** en réponse à [**WM \_ QUERYENDSESSION**](wm-queryendsession.md), elle apparaît toujours dans l’interface utilisateur d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="75bb6-116">If an application returns **FALSE** in response to [**WM\_QUERYENDSESSION**](wm-queryendsession.md), it still appears in the shutdown UI.</span></span> <span data-ttu-id="75bb6-117">Notez que le système n’autorise pas les applications console ou les applications sans fenêtre visible à annuler l’arrêt.</span><span class="sxs-lookup"><span data-stu-id="75bb6-117">Note that the system does not allow console applications or applications without a visible window to cancel shutdown.</span></span> <span data-ttu-id="75bb6-118">Ces applications sont automatiquement arrêtées si elles ne répondent pas à **WM \_ QUERYENDSESSION** ou [**WM \_ ENDSESSION**](wm-endsession.md) dans les 5 secondes ou si elles retournent **false** en réponse à **WM \_ QUERYENDSESSION**.</span><span class="sxs-lookup"><span data-stu-id="75bb6-118">These applications are automatically terminated if they do not respond to **WM\_QUERYENDSESSION** or [**WM\_ENDSESSION**](wm-endsession.md) within 5 seconds or if they return **FALSE** in response to **WM\_QUERYENDSESSION**.</span></span> |
| <span data-ttu-id="75bb6-119">Arrêter l’interface utilisateur</span><span class="sxs-lookup"><span data-stu-id="75bb6-119">Shutdown user interface</span></span> | <span data-ttu-id="75bb6-120">Le système affiche une boîte de dialogue pour chaque arrêt bloquant de l’application.</span><span class="sxs-lookup"><span data-stu-id="75bb6-120">The system displays a dialog box for each application blocking shutdown.</span></span> <span data-ttu-id="75bb6-121">Si l’utilisateur clique sur le bouton **Terminer maintenant** , l’application est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="75bb6-121">If the user click the **End Now** button, the application is terminated.</span></span> <span data-ttu-id="75bb6-122">Si l’utilisateur clique sur le bouton **Annuler** , Shutdown est annulé et l’application continue de s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="75bb6-122">If the user clicks the **Cancel** button, shutdown is canceled and the application continues to run.</span></span>                                                                                                                                    | <span data-ttu-id="75bb6-123">Le système affiche une interface utilisateur plein écran qui identifie toutes les applications bloquant l’arrêt et leurs raisons (si elles ont inscrit une raison à l’aide de [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate)).</span><span class="sxs-lookup"><span data-stu-id="75bb6-123">The system displays a full-screen UI that identifies all applications blocking shutdown and their reasons for doing so (if they have registered a reason using [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate)).</span></span>                                                                                                                                                                                                                                                                    |



 

## <a name="best-practices"></a><span data-ttu-id="75bb6-124">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="75bb6-124">Best Practices</span></span>

-   <span data-ttu-id="75bb6-125">Les applications ne doivent pas bloquer l’arrêt.</span><span class="sxs-lookup"><span data-stu-id="75bb6-125">Applications should not block shutdown.</span></span> <span data-ttu-id="75bb6-126">Répondez à [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) aussi rapidement que possible et reportez les activités de nettoyage jusqu’à ce que le message [**WM \_ ENDSESSION**](wm-endsession.md) soit traité.</span><span class="sxs-lookup"><span data-stu-id="75bb6-126">Respond to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) as quickly as possible and postpone cleanup activities until processing the [**WM\_ENDSESSION**](wm-endsession.md) message.</span></span>
-   <span data-ttu-id="75bb6-127">Les applications qui doivent bloquer l’arrêt doivent utiliser la nouvelle fonction [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) pour inscrire une chaîne expliquant la raison de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="75bb6-127">Applications that must block shutdown should use the new [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) function to register a string that explains the reason to the user.</span></span> <span data-ttu-id="75bb6-128">L’utilisateur peut décider s’il faut continuer ou annuler l’arrêt.</span><span class="sxs-lookup"><span data-stu-id="75bb6-128">The user can decide whether to continue or cancel shutdown.</span></span>
-   <span data-ttu-id="75bb6-129">Les applications ne peuvent pas s’appuyer sur la possibilité de bloquer l’arrêt.</span><span class="sxs-lookup"><span data-stu-id="75bb6-129">Applications cannot rely on being able to block shutdown.</span></span>

 

 



