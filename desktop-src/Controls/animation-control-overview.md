---
title: À propos des contrôles d’animation
description: Un contrôle d’animation est une fenêtre qui affiche un clip Audio-Video entrelacé (AVI). Un clip AVI est une série de frames bitmap tels qu’un film. Les contrôles d’animation peuvent uniquement afficher des clips AVI qui ne contiennent pas de données audio.
ms.assetid: 6be69d1a-5b2c-41d5-b6d7-e86ddac2cb0d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1625828e5f4febce7314da365c9db93ce3a07136
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "106509280"
---
# <a name="about-animation-controls"></a><span data-ttu-id="f9481-105">À propos des contrôles d’animation</span><span class="sxs-lookup"><span data-stu-id="f9481-105">About Animation Controls</span></span>

<span data-ttu-id="f9481-106">Un *contrôle d’animation* est une fenêtre qui affiche un clip Audio-Video entrelacé (AVI).</span><span class="sxs-lookup"><span data-stu-id="f9481-106">An *animation control* is a window that displays an Audio-Video Interleaved (AVI) clip.</span></span> <span data-ttu-id="f9481-107">Un clip AVI est une série de frames bitmap tels qu’un film.</span><span class="sxs-lookup"><span data-stu-id="f9481-107">An AVI clip is a series of bitmap frames like a movie.</span></span> <span data-ttu-id="f9481-108">Les contrôles d’animation peuvent uniquement afficher des clips AVI qui ne contiennent pas de données audio.</span><span class="sxs-lookup"><span data-stu-id="f9481-108">Animation controls can only display AVI clips that do not contain audio.</span></span>

<span data-ttu-id="f9481-109">Une utilisation courante d’un contrôle d’animation consiste à indiquer l’activité du système au cours d’une opération de longue durée.</span><span class="sxs-lookup"><span data-stu-id="f9481-109">One common use for an animation control is to indicate system activity during a lengthy operation.</span></span> <span data-ttu-id="f9481-110">Cela est possible, car le thread d’opération continue de s’exécuter pendant que le clip AVI est affiché.</span><span class="sxs-lookup"><span data-stu-id="f9481-110">This is possible because the operation thread continues executing while the AVI clip is displayed.</span></span> <span data-ttu-id="f9481-111">Par exemple, la boîte de dialogue Rechercher de l’Explorateur Windows affiche une loupe mobile lorsque le système recherche un fichier.</span><span class="sxs-lookup"><span data-stu-id="f9481-111">For example, the Find dialog box of Windows Explorer displays a moving magnifying glass as the system searches for a file.</span></span>

> [!Note]  
> <span data-ttu-id="f9481-112">Si vous utilisez ComCtl32.dll version 6, le thread n’est pas pris en charge ; Assurez-vous que votre application ne bloque pas l’interface utilisateur, sinon l’animation ne se produira pas.</span><span class="sxs-lookup"><span data-stu-id="f9481-112">If you are using ComCtl32.dll version 6 the thread is not supported; make sure that your application does not block the UI, or else the animation will not occur.</span></span>

 

<span data-ttu-id="f9481-113">Un contrôle d’animation peut afficher un clip AVI provenant d’un fichier AVI non compressé ou d’un fichier AVI compressé à l’aide de l’encodage d’exécution (BI \_ RLE8).</span><span class="sxs-lookup"><span data-stu-id="f9481-113">An animation control can display an AVI clip originating from either an uncompressed AVI file or from an AVI file that was compressed using run-length (BI\_RLE8) encoding.</span></span> <span data-ttu-id="f9481-114">Vous pouvez ajouter le clip AVI à votre application en tant que ressource AVI, ou le clip peut accompagner votre application sous la forme d’un fichier AVI distinct.</span><span class="sxs-lookup"><span data-stu-id="f9481-114">You can add the AVI clip to your application as an AVI resource, or the clip can accompany your application as a separate AVI file.</span></span>

> [!Note]  
> <span data-ttu-id="f9481-115">Le fichier AVI, ou ressource, ne doit pas avoir de canal sonore.</span><span class="sxs-lookup"><span data-stu-id="f9481-115">The AVI file, or resource, must not have a sound channel.</span></span> <span data-ttu-id="f9481-116">Les fonctionnalités du contrôle d’animation sont très limitées et peuvent faire l’objet de modifications.</span><span class="sxs-lookup"><span data-stu-id="f9481-116">The capabilities of the animation control are very limited and are subject to change.</span></span> <span data-ttu-id="f9481-117">Si vous avez besoin d’un contrôle pour fournir des fonctionnalités de lecture et d’enregistrement multimédias pour votre application, vous pouvez utiliser le contrôle MCIWnd.</span><span class="sxs-lookup"><span data-stu-id="f9481-117">If you need a control to provide multimedia playback and recording capabilities for your application, you can use the MCIWnd control.</span></span> <span data-ttu-id="f9481-118">Pour plus d’informations, consultez [classe de fenêtre MCIWnd](/windows/desktop/Multimedia/mciwnd-window-class).</span><span class="sxs-lookup"><span data-stu-id="f9481-118">For more information, see [MCIWnd Window Class](/windows/desktop/Multimedia/mciwnd-window-class).</span></span>

 

<span data-ttu-id="f9481-119">Cette section décrit les rubriques suivantes.</span><span class="sxs-lookup"><span data-stu-id="f9481-119">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="f9481-120">Création d’un contrôle d’animation</span><span class="sxs-lookup"><span data-stu-id="f9481-120">Animation Control Creation</span></span>](#animation-control-creation)
-   [<span data-ttu-id="f9481-121">À propos des messages de contrôle d’animation</span><span class="sxs-lookup"><span data-stu-id="f9481-121">About Animation Control Messages</span></span>](#about-animation-control-messages)
-   [<span data-ttu-id="f9481-122">Traitement des messages par défaut</span><span class="sxs-lookup"><span data-stu-id="f9481-122">Default Message Processing</span></span>](#default-message-processing)

## <a name="animation-control-creation"></a><span data-ttu-id="f9481-123">Création d’un contrôle d’animation</span><span class="sxs-lookup"><span data-stu-id="f9481-123">Animation Control Creation</span></span>

<span data-ttu-id="f9481-124">Un contrôle d’animation appartient à la classe de fenêtre [**animer la \_ classe**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="f9481-124">An animation control belongs to the [**ANIMATE\_CLASS**](common-control-window-classes.md) window class.</span></span> <span data-ttu-id="f9481-125">Vous créez un contrôle d’animation à l’aide de la fonction [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) ou [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) ou de la macro [**Animate \_ Create**](/windows/desktop/api/Commctrl/nf-commctrl-animate_create) .</span><span class="sxs-lookup"><span data-stu-id="f9481-125">You create an animation control by using the [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function or the [**Animate\_Create**](/windows/desktop/api/Commctrl/nf-commctrl-animate_create) macro.</span></span> <span data-ttu-id="f9481-126">La macro positionne le contrôle d’animation dans l’angle supérieur gauche de la fenêtre parente et, si le style de [**\_ Centre ACS**](animation-control-styles.md) n’est pas spécifié, définit la largeur et la hauteur du contrôle en fonction des dimensions d’un cadre dans le clip avi.</span><span class="sxs-lookup"><span data-stu-id="f9481-126">The macro positions the animation control in the upper-left corner of the parent window and, if the [**ACS\_CENTER**](animation-control-styles.md) style is not specified, sets the width and height of the control based on the dimensions of a frame in the AVI clip.</span></span> <span data-ttu-id="f9481-127">Si **le \_ Centre ACS** est spécifié, l' **animation \_ créer** affecte la valeur zéro à la largeur et à la hauteur du contrôle.</span><span class="sxs-lookup"><span data-stu-id="f9481-127">If **ACS\_CENTER** is specified, **Animate\_Create** sets the width and height of the control to zero.</span></span> <span data-ttu-id="f9481-128">Vous pouvez utiliser la fonction [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) pour définir la position et la taille du contrôle.</span><span class="sxs-lookup"><span data-stu-id="f9481-128">You can use the [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) function to set the position and size of the control.</span></span>

<span data-ttu-id="f9481-129">Si vous créez un contrôle d’animation dans une boîte de dialogue ou à partir d’une ressource de boîte de dialogue, le contrôle est détruit automatiquement lorsque l’utilisateur ferme la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="f9481-129">If you create an animation control within a dialog box or from a dialog box resource, the control is automatically destroyed when the user closes the dialog box.</span></span> <span data-ttu-id="f9481-130">Si vous créez un contrôle d’animation dans une fenêtre, vous devez détruire explicitement le contrôle.</span><span class="sxs-lookup"><span data-stu-id="f9481-130">If you create an animation control within a window, you must explicitly destroy the control.</span></span>

## <a name="about-animation-control-messages"></a><span data-ttu-id="f9481-131">À propos des messages de contrôle d’animation</span><span class="sxs-lookup"><span data-stu-id="f9481-131">About Animation Control Messages</span></span>

<span data-ttu-id="f9481-132">Une application envoie des messages à un contrôle d’animation pour ouvrir, lire, arrêter et fermer le clip AVI correspondant.</span><span class="sxs-lookup"><span data-stu-id="f9481-132">An application sends messages to an animation control to open, play, stop, and close the corresponding AVI clip.</span></span> <span data-ttu-id="f9481-133">Chaque message comporte une ou plusieurs macros que vous pouvez utiliser au lieu d’envoyer le message explicitement.</span><span class="sxs-lookup"><span data-stu-id="f9481-133">Each message has one or more macros that you can use instead of sending the message explicitly.</span></span>

<span data-ttu-id="f9481-134">Après la création d’un contrôle d’animation, une application envoie le message [**ACM \_ Open**](acm-open.md) pour ouvrir un clip AVI et le charger en mémoire.</span><span class="sxs-lookup"><span data-stu-id="f9481-134">After creating an animation control, an application sends the [**ACM\_OPEN**](acm-open.md) message to open an AVI clip and load it into memory.</span></span> <span data-ttu-id="f9481-135">Le message spécifie le chemin d’accès d’un fichier AVI ou le nom d’une ressource AVI.</span><span class="sxs-lookup"><span data-stu-id="f9481-135">The message specifies either the path of an AVI file or the name of an AVI resource.</span></span> <span data-ttu-id="f9481-136">Le système charge la ressource AVI à partir du module qui a créé le contrôle d’animation.</span><span class="sxs-lookup"><span data-stu-id="f9481-136">The system loads the AVI resource from the module that created the animation control.</span></span>

<span data-ttu-id="f9481-137">Si le contrôle d’animation a le style d' [**\_ exécution automatique**](animation-control-styles.md) des services ACS, le contrôle commence la lecture du clip AVI immédiatement après l’ouverture du fichier AVI ou de la ressource avi.</span><span class="sxs-lookup"><span data-stu-id="f9481-137">If the animation control has the [**ACS\_AUTOPLAY**](animation-control-styles.md) style, the control begins playing the AVI clip immediately after the AVI file or AVI resource is opened.</span></span> <span data-ttu-id="f9481-138">Dans le cas contraire, une application peut utiliser le message de [**\_ lecture ACM**](acm-play.md) pour démarrer le clip avi.</span><span class="sxs-lookup"><span data-stu-id="f9481-138">Otherwise, an application can use the [**ACM\_PLAY**](acm-play.md) message to start the AVI clip.</span></span> <span data-ttu-id="f9481-139">Une application peut arrêter le clip à tout moment en envoyant le message d' [**\_ arrêt ACM**](acm-stop.md) .</span><span class="sxs-lookup"><span data-stu-id="f9481-139">An application can stop the clip at any time by sending the [**ACM\_STOP**](acm-stop.md) message.</span></span> <span data-ttu-id="f9481-140">La dernière image lue reste affichée lorsque le contrôle termine la lecture du clip AVI ou lorsque l' **\_ arrêt ACM** est envoyé.</span><span class="sxs-lookup"><span data-stu-id="f9481-140">The last frame played remains displayed when the control finishes playing the AVI clip or when **ACM\_STOP** is sent.</span></span>

<span data-ttu-id="f9481-141">Un contrôle d’animation peut envoyer deux codes de notification à sa fenêtre parente : [ACN \_ Start](acn-start.md) et [ACN \_ Stop](acn-stop.md).</span><span class="sxs-lookup"><span data-stu-id="f9481-141">An animation control can send two notification codes to its parent window: [ACN\_START](acn-start.md) and [ACN\_STOP](acn-stop.md).</span></span> <span data-ttu-id="f9481-142">La plupart des applications ne gèrent aucune notification.</span><span class="sxs-lookup"><span data-stu-id="f9481-142">Most applications do not handle either notification.</span></span>

<span data-ttu-id="f9481-143">Pour fermer le fichier AVI ou la ressource AVI et le supprimer de la mémoire, une application peut utiliser la macro [**Animate \_ Close**](/windows/desktop/api/Commctrl/nf-commctrl-animate_close) , qui envoie l' [**ACM \_ Open**](acm-open.md) avec le nom de fichier ou le nom de la ressource ayant la valeur **null**.</span><span class="sxs-lookup"><span data-stu-id="f9481-143">To close the AVI file or AVI resource and remove it from memory, an application can use the [**Animate\_Close**](/windows/desktop/api/Commctrl/nf-commctrl-animate_close) macro, which sends [**ACM\_OPEN**](acm-open.md) with the file name or resource name set to **NULL**.</span></span>

## <a name="default-message-processing"></a><span data-ttu-id="f9481-144">Traitement des messages par défaut</span><span class="sxs-lookup"><span data-stu-id="f9481-144">Default Message Processing</span></span>

<span data-ttu-id="f9481-145">Cette section décrit les messages de fenêtre gérés par la procédure de fenêtre pour la classe de fenêtre [**animer la \_ classe**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="f9481-145">This section describes the window messages handled by the window procedure for the [**ANIMATE\_CLASS**](common-control-window-classes.md) window class.</span></span>



| <span data-ttu-id="f9481-146">Message</span><span class="sxs-lookup"><span data-stu-id="f9481-146">Message</span></span>                                    | <span data-ttu-id="f9481-147">Traitement effectué</span><span class="sxs-lookup"><span data-stu-id="f9481-147">Processing performed</span></span>                                                                                                                                                                                                                                                                        |
|--------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="f9481-148">**\_Fermer WM**</span><span class="sxs-lookup"><span data-stu-id="f9481-148">**WM\_CLOSE**</span></span>](/windows/desktop/winmsg/wm-close)           | <span data-ttu-id="f9481-149">Libère le fichier AVI ou la ressource AVI associée au contrôle animation.</span><span class="sxs-lookup"><span data-stu-id="f9481-149">Frees the AVI file or AVI resource associated with the animation control.</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="f9481-150">**\_destructeur WM**</span><span class="sxs-lookup"><span data-stu-id="f9481-150">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)       | <span data-ttu-id="f9481-151">Libère le fichier AVI ou la ressource AVI, libère une structure de données interne, puis appelle la fonction [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="f9481-151">Frees the AVI file or AVI resource, frees an internal data structure, and then calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span>                                                                                                                                                |
| [<span data-ttu-id="f9481-152">**\_ERASEBKGND WM**</span><span class="sxs-lookup"><span data-stu-id="f9481-152">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd) | <span data-ttu-id="f9481-153">Efface l’arrière-plan de la fenêtre à l’aide de la couleur d’arrière-plan actuelle pour les contrôles statiques.</span><span class="sxs-lookup"><span data-stu-id="f9481-153">Erases the window background using the current background color for static controls.</span></span>                                                                                                                                                                                                        |
| [<span data-ttu-id="f9481-154">**\_NCCREATE WM**</span><span class="sxs-lookup"><span data-stu-id="f9481-154">**WM\_NCCREATE**</span></span>](/windows/desktop/winmsg/wm-nccreate)     | <span data-ttu-id="f9481-155">Alloue et Initialise une structure de données interne, puis appelle [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="f9481-155">Allocates and initializes an internal data structure and then calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>                                                                                                                                                                              |
| [<span data-ttu-id="f9481-156">**\_NCHITTEST WM**</span><span class="sxs-lookup"><span data-stu-id="f9481-156">**WM\_NCHITTEST**</span></span>](/windows/desktop/inputdev/wm-nchittest) | <span data-ttu-id="f9481-157">Retourne la valeur du test de positionnement HTTRANSPARENT.</span><span class="sxs-lookup"><span data-stu-id="f9481-157">Returns the HTTRANSPARENT hit test value.</span></span>                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="f9481-158">**\_peinture WM**</span><span class="sxs-lookup"><span data-stu-id="f9481-158">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)              | <span data-ttu-id="f9481-159">Dessine un frame AVI dans le contrôle d’animation.</span><span class="sxs-lookup"><span data-stu-id="f9481-159">Draws an AVI frame in the animation control.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="f9481-160">**taille du WM \_**</span><span class="sxs-lookup"><span data-stu-id="f9481-160">**WM\_SIZE**</span></span>](/windows/desktop/winmsg/wm-size)             | <span data-ttu-id="f9481-161">Vérifie si le contrôle a le style de [**\_ Centre ACS**](animation-control-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="f9481-161">Checks if the control has the [**ACS\_CENTER**](animation-control-styles.md) style.</span></span> <span data-ttu-id="f9481-162">Si le contrôle ne le fait pas, il appelle [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="f9481-162">If the control does not, it calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span> <span data-ttu-id="f9481-163">Dans le cas contraire, il Centre l’animation dans le contrôle, invalide le contrôle, puis appelle **DefWindowProc**.</span><span class="sxs-lookup"><span data-stu-id="f9481-163">Otherwise, it centers the animation in the control, invalidates the control, and then calls **DefWindowProc**.</span></span> |



 

 

 