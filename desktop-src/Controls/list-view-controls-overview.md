---
title: À propos des contrôles List-View
description: Un contrôle List-View est une fenêtre qui affiche une collection d’éléments.
ms.assetid: 163f7778-690c-4166-b0c5-c7be1a03ae98
ms.topic: article
ms.date: 05/31/2018
ms.custom: project-verbatim
ms.openlocfilehash: 592684378b4264319d790b1e2e05eb9e0ae37f28
ms.sourcegitcommit: 0f7a8198bacd5493ab1e78a9583c7a3578794765
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/25/2021
ms.locfileid: "110424329"
---
# <a name="about-list-view-controls"></a><span data-ttu-id="5ed8e-103">À propos des contrôles List-View</span><span class="sxs-lookup"><span data-stu-id="5ed8e-103">About List-View Controls</span></span>

<span data-ttu-id="5ed8e-104">Consultez l' [exemple de contrôle ListView virtuel](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/controls/common/vlistvw).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-104">See the [Virtual listview control sample](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/controls/common/vlistvw).</span></span>

<span data-ttu-id="5ed8e-105">Un contrôle List-View est une fenêtre qui affiche une collection d’éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-105">A list-view control is a window that displays a collection of items.</span></span> <span data-ttu-id="5ed8e-106">Les contrôles de liste offrent plusieurs moyens d’organiser et d’afficher des éléments et sont bien plus flexibles que les [zones de liste](list-boxes.md)simples.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-106">List-view controls provide several ways to arrange and display items and are much more flexible than simple [List Boxes](list-boxes.md).</span></span> <span data-ttu-id="5ed8e-107">Par exemple, des informations supplémentaires sur chaque élément peuvent être affichées dans les colonnes à droite de l’icône et de l’étiquette.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-107">For example, additional information about each item can be displayed in columns to the right of the icon and label.</span></span>

-   [<span data-ttu-id="5ed8e-108">Styles et affichages de liste</span><span class="sxs-lookup"><span data-stu-id="5ed8e-108">List-View Styles and Views</span></span>](#list-view-styles-and-views)
    -   [<span data-ttu-id="5ed8e-109">Styles de List-View étendus</span><span class="sxs-lookup"><span data-stu-id="5ed8e-109">Extended List-View Styles</span></span>](#extended-list-view-styles)
-   [<span data-ttu-id="5ed8e-110">Style de List-View virtuel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-110">Virtual List-View Style</span></span>](#virtual-list-view-style)
    -   [<span data-ttu-id="5ed8e-111">Création d’un contrôle de List-View virtuel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-111">Creating a Virtual List-View Control</span></span>](#creating-a-virtual-list-view-control)
    -   [<span data-ttu-id="5ed8e-112">Problèmes de compatibilité</span><span class="sxs-lookup"><span data-stu-id="5ed8e-112">Compatibility Issues</span></span>](#compatibility-issues)
    -   [<span data-ttu-id="5ed8e-113">Gestion des codes de notification de contrôle de List-View virtuel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-113">Handling Virtual List-View Control Notification Codes</span></span>](#handling-virtual-list-view-control-notification-codes)
    -   [<span data-ttu-id="5ed8e-114">Gestion du cache</span><span class="sxs-lookup"><span data-stu-id="5ed8e-114">Cache Management</span></span>](#cache-management)
-   [<span data-ttu-id="5ed8e-115">Liste-afficher les zones de travail</span><span class="sxs-lookup"><span data-stu-id="5ed8e-115">List-View Working Areas</span></span>](#list-view-working-areas)
-   [<span data-ttu-id="5ed8e-116">Liste-afficher les listes d’images</span><span class="sxs-lookup"><span data-stu-id="5ed8e-116">List-View Image Lists</span></span>](#list-view-image-lists)
-   [<span data-ttu-id="5ed8e-117">Répertorier les éléments et les sous-éléments</span><span class="sxs-lookup"><span data-stu-id="5ed8e-117">List-View Items and Subitems</span></span>](#list-view-items-and-subitems)
    -   [<span data-ttu-id="5ed8e-118">Liste-afficher les États des éléments</span><span class="sxs-lookup"><span data-stu-id="5ed8e-118">List-View Item States</span></span>](#list-view-item-states)
    -   [<span data-ttu-id="5ed8e-119">Éléments de rappel et masque de rappel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-119">Callback Items and the Callback Mask</span></span>](#callback-items-and-the-callback-mask)
    -   [<span data-ttu-id="5ed8e-120">Liste-afficher la position des éléments</span><span class="sxs-lookup"><span data-stu-id="5ed8e-120">List-View Item Position</span></span>](#list-view-item-position)
    -   [<span data-ttu-id="5ed8e-121">Organisation, tri et recherche d’éléments</span><span class="sxs-lookup"><span data-stu-id="5ed8e-121">Arranging, Sorting, and Finding Items</span></span>](#arranging-sorting-and-finding-items)
-   [<span data-ttu-id="5ed8e-122">Colonnes de mode liste</span><span class="sxs-lookup"><span data-stu-id="5ed8e-122">List-View Columns</span></span>](#list-view-columns)
-   [<span data-ttu-id="5ed8e-123">Position de défilement de la liste</span><span class="sxs-lookup"><span data-stu-id="5ed8e-123">List-View Scroll Position</span></span>](#list-view-scroll-position)
-   [<span data-ttu-id="5ed8e-124">Modification des étiquettes d’affichage de liste</span><span class="sxs-lookup"><span data-stu-id="5ed8e-124">List-View Label Editing</span></span>](#list-view-label-editing)
-   [<span data-ttu-id="5ed8e-125">Afficher les couleurs de la liste</span><span class="sxs-lookup"><span data-stu-id="5ed8e-125">List-View Colors</span></span>](#list-view-colors)
-   [<span data-ttu-id="5ed8e-126">Organisation des éléments de liste par groupe</span><span class="sxs-lookup"><span data-stu-id="5ed8e-126">Arranging List Items by Group</span></span>](#arranging-list-items-by-group)
-   [<span data-ttu-id="5ed8e-127">Marques d’insertion</span><span class="sxs-lookup"><span data-stu-id="5ed8e-127">Insertion Marks</span></span>](#insertion-marks)

## <a name="list-view-styles-and-views"></a><span data-ttu-id="5ed8e-128">Styles et vues List-View</span><span class="sxs-lookup"><span data-stu-id="5ed8e-128">List-View Styles and Views</span></span>

<span data-ttu-id="5ed8e-129">Les contrôles List-View peuvent afficher des éléments dans cinq vues différentes.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-129">List-view controls can display items in five different views.</span></span> <span data-ttu-id="5ed8e-130">Le style de fenêtre du contrôle spécifie la vue par défaut.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-130">The control's window style specifies the default view.</span></span> <span data-ttu-id="5ed8e-131">Des styles de fenêtre supplémentaires spécifient l’alignement des éléments et des fonctionnalités spécifiques aux contrôles.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-131">Additional window styles specify the alignment of items and control-specific features.</span></span> <span data-ttu-id="5ed8e-132">Le tableau suivant décrit les vues.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-132">The following table describes the views.</span></span>



| <span data-ttu-id="5ed8e-133">Nom de l'affichage</span><span class="sxs-lookup"><span data-stu-id="5ed8e-133">View Name</span></span>             | <span data-ttu-id="5ed8e-134">Description</span><span class="sxs-lookup"><span data-stu-id="5ed8e-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5ed8e-135">Mode icône</span><span class="sxs-lookup"><span data-stu-id="5ed8e-135">Icon view</span></span>             | <span data-ttu-id="5ed8e-136">Spécifié par le style de fenêtre d' [**\_ icône LVS**](list-view-window-styles.md) ou en passant l' **\_ \_ icône d’affichage LV** au message [**\_ SETVIEW LVM**](lvm-setview.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-136">Specified by the [**LVS\_ICON**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_ICON** with the [**LVM\_SETVIEW**](lvm-setview.md) message.</span></span> <span data-ttu-id="5ed8e-137">Chaque élément s'affiche sous forme d'une icône de taille normale, avec une étiquette placée au-dessous.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-137">Each item appears as a full-sized icon with a label below it.</span></span> <span data-ttu-id="5ed8e-138">L’utilisateur peut faire glisser les éléments vers n’importe quel emplacement dans la fenêtre de liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-138">The user can drag the items to any location in the list-view window.</span></span>                                                                                                                                                                                                                                         |
| <span data-ttu-id="5ed8e-139">Affichage des petites icônes</span><span class="sxs-lookup"><span data-stu-id="5ed8e-139">Small icon view</span></span>       | <span data-ttu-id="5ed8e-140">Spécifié par le style de fenêtre [**\_ SmallIcon LVS**](list-view-window-styles.md) ou en passant **VL \_ View \_ SmallIcon** avec [**LVM \_ SETVIEW**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-140">Specified by the [**LVS\_SMALLICON**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_SMALLICON** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="5ed8e-141">Chaque élément apparaît sous la forme d’une petite icône avec l’étiquette à droite de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-141">Each item appears as a small icon with the label to the right of it.</span></span> <span data-ttu-id="5ed8e-142">L’utilisateur peut faire glisser les éléments vers n’importe quel emplacement.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-142">The user can drag the items to any location.</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="5ed8e-143">Affichage Liste</span><span class="sxs-lookup"><span data-stu-id="5ed8e-143">List view</span></span>             | <span data-ttu-id="5ed8e-144">Spécifié par le style de la fenêtre de [**\_ liste LVS**](list-view-window-styles.md) ou en passant la **\_ \_ liste de vue LV** avec [**LVM \_ SETVIEW**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-144">Specified by the [**LVS\_LIST**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_LIST** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="5ed8e-145">Chaque élément apparaît sous la forme d’une petite icône avec une étiquette à droite de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-145">Each item appears as a small icon with a label to the right of it.</span></span> <span data-ttu-id="5ed8e-146">Les éléments sont organisés en colonnes et l’utilisateur ne peut pas les faire glisser vers un emplacement arbitraire.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-146">Items are arranged in columns and the user cannot drag them to an arbitrary location.</span></span>                                                                                                                                                                                                                               |
| <span data-ttu-id="5ed8e-147">Affichage des rapports (détails)</span><span class="sxs-lookup"><span data-stu-id="5ed8e-147">Report (details) view</span></span> | <span data-ttu-id="5ed8e-148">Spécifié par le style de la fenêtre de [**\_ rapport LVS**](list-view-window-styles.md) ou en passant les détails de la **\_ vue \_ LV** avec le [**LVM \_ SETVIEW**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-148">Specified by the [**LVS\_REPORT**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_DETAILS** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="5ed8e-149">Chaque élément apparaît sur sa propre ligne, avec les informations organisées en colonnes.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-149">Each item appears on its own line, with information arranged in columns.</span></span> <span data-ttu-id="5ed8e-150">La colonne la plus à gauche est toujours justifiée à gauche et contient la petite icône et l’étiquette.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-150">The leftmost column is always left justified and contains the small icon and label.</span></span> <span data-ttu-id="5ed8e-151">Les colonnes suivantes contiennent des sous-éléments tels que spécifiés par l’application.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-151">Subsequent columns contain subitems as specified by the application.</span></span> <span data-ttu-id="5ed8e-152">Chaque colonne possède un en-tête, sauf si vous spécifiez également le style de fenêtre [**LVS \_ NOCOLUMNHEADER**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-152">Each column has a header, unless you also specify the [**LVS\_NOCOLUMNHEADER**](list-view-window-styles.md) window style.</span></span> |
| <span data-ttu-id="5ed8e-153">Mode Mosaïque</span><span class="sxs-lookup"><span data-stu-id="5ed8e-153">Tile View</span></span>             | <span data-ttu-id="5ed8e-154">**Version 6 et versions ultérieures.**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-154">**Version 6 and later.**</span></span> <span data-ttu-id="5ed8e-155">Spécifié en passant **la \_ \_ vignette de la vue LV** avec [**LVM \_ SETVIEW**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-155">Specified by passing **LV\_VIEW\_TILE** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="5ed8e-156">Chaque élément apparaît sous la forme d’une icône de taille complète avec une étiquette d’une ou plusieurs lignes à côté.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-156">Each item appears as a full-sized icon with a label of one or more lines beside it.</span></span>                                                                                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="5ed8e-157">Les captures d’écran suivantes utilisent des affichages pour montrer différentes quantités d’informations sur chacun des sept animaux familiers.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-157">The following screen shots use views to show different amounts of information about each of seven pets.</span></span> <span data-ttu-id="5ed8e-158">Les vues montrent comment les informations peuvent apparaître sur Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-158">The views demonstrate how the information might appear on Windows Vista.</span></span> <span data-ttu-id="5ed8e-159">Les styles visuels du contrôle ont été définis sur le thème « Explorer » à l’aide de [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-159">The visual styles for the control have been set to the "Explorer" theme by using [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme).</span></span>

<span data-ttu-id="5ed8e-160">La capture d’écran suivante montre le mode Détails.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-160">The following screen shot shows the details view.</span></span>

![capture d’écran qui affiche des informations dans cinq colonnes et sept lignes](images/lv-detailsview.png)

<span data-ttu-id="5ed8e-162">La capture d’écran suivante montre l’affichage des icônes.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-162">The following screen shot shows the icon view.</span></span>

![capture d’écran qui affiche uniquement le nom de chaque animal de compagnie et une icône indiquant l’espèce](images/lv-iconview.png)

<span data-ttu-id="5ed8e-164">La capture d’écran suivante montre le mode liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-164">The following screen shot shows the list view.</span></span>

![capture d’écran qui montre, pour chaque animal de compagnie, une grande icône à côté du nom, de la race et du prix de l’animal de compagnie](images/lv-listview.png)

<span data-ttu-id="5ed8e-166">La capture d’écran suivante montre l’affichage en mosaïque.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-166">The following screen shot shows the tile view.</span></span>

![affichage en mosaïque.](images/lv-tileview.png)

<span data-ttu-id="5ed8e-168">Vous pouvez modifier le type d’affichage après avoir créé un contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-168">You can change the view type after you create a list-view control.</span></span> <span data-ttu-id="5ed8e-169">Pour récupérer et modifier le style de la fenêtre, utilisez les fonctions [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) et [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-169">To retrieve and change the window style, use the [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) and [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) functions.</span></span> <span data-ttu-id="5ed8e-170">Pour déterminer les styles de fenêtre de l’affichage actuel, utilisez la valeur [**LVS \_ TYPEMASK**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-170">To determine the window styles of the current view, use the [**LVS\_TYPEMASK**](list-view-window-styles.md) value.</span></span>

<span data-ttu-id="5ed8e-171">Vous pouvez contrôler la façon dont les éléments sont organisés en mode icône ou petite icône en spécifiant le style de fenêtre [**LVS \_ ALIGNTOP**](list-view-window-styles.md) (valeur par défaut) ou [**LVS \_ ALIGNLEFT**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-171">You can control the way items are arranged in icon or small icon view by specifying either the [**LVS\_ALIGNTOP**](list-view-window-styles.md) (default) or [**LVS\_ALIGNLEFT**](list-view-window-styles.md) window style.</span></span>

<span data-ttu-id="5ed8e-172">Vous pouvez modifier l’alignement après avoir créé un contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-172">You can change the alignment after you create a list-view control.</span></span> <span data-ttu-id="5ed8e-173">Pour déterminer l’alignement actuel, utilisez la valeur [**LVS \_ ALIGNMASK**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-173">To determine the current alignment, use the [**LVS\_ALIGNMASK**](list-view-window-styles.md) value.</span></span>

<span data-ttu-id="5ed8e-174">Des styles de fenêtre supplémentaires fournissent d’autres options, par exemple si un utilisateur peut modifier des étiquettes ou sélectionner plusieurs éléments à la fois.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-174">Additional window styles provide other options, such as whether a user can edit labels or select more than one item at a time.</span></span> <span data-ttu-id="5ed8e-175">Pour obtenir une liste complète, consultez [styles de fenêtre d’affichage de liste](list-view-window-styles.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-175">For a complete list, see [List-View Window Styles](list-view-window-styles.md).</span></span>

### <a name="extended-list-view-styles"></a><span data-ttu-id="5ed8e-176">Styles de List-View étendus</span><span class="sxs-lookup"><span data-stu-id="5ed8e-176">Extended List-View Styles</span></span>

<span data-ttu-id="5ed8e-177">Les styles de contrôle de liste étendus fournissent des options telles que les cases à cocher, les barres de défilement plat, le quadrillage et le suivi à chaud.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-177">The extended list-view control styles provide options such as check boxes, flat scroll bars, grid lines, and hot-tracking.</span></span> <span data-ttu-id="5ed8e-178">Pour obtenir une liste complète, consultez [Extended List-View styles](extended-list-view-styles.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-178">For a complete list, see [Extended List-View Styles](extended-list-view-styles.md).</span></span> <span data-ttu-id="5ed8e-179">Vous n’accédez pas aux styles de vue de liste étendus de la même manière que les styles de fenêtre standard.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-179">You do not access extended list-view styles in the same manner as standard window styles.</span></span> <span data-ttu-id="5ed8e-180">Vous n’utilisez pas les fonctions [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) et [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) pour apporter des modifications de style étendues.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-180">You do not use the [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) and [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) functions to make extended style changes.</span></span>

<span data-ttu-id="5ed8e-181">Il existe deux messages qui définissent et récupèrent les informations de style étendu, [**LVM \_ SETEXTENDEDLISTVIEWSTYLE**](lvm-setextendedlistviewstyle.md) et [**LVM \_ GETEXTENDEDLISTVIEWSTYLE**](lvm-getextendedlistviewstyle.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-181">There are two messages that set and retrieve extended style information, [**LVM\_SETEXTENDEDLISTVIEWSTYLE**](lvm-setextendedlistviewstyle.md) and [**LVM\_GETEXTENDEDLISTVIEWSTYLE**](lvm-getextendedlistviewstyle.md).</span></span> <span data-ttu-id="5ed8e-182">Au lieu d’envoyer les messages de manière explicite, vous pouvez utiliser les macros correspondantes suivantes : [**ListView \_ SetExtendedListViewStyle**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyle), [**ListView \_ SetExtendedListViewStyleEx**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyleex)et [**ListView \_ GetExtendedListViewStyle**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getextendedlistviewstyle).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-182">Instead of sending the messages explicitly, you can use the following corresponding macros: [**ListView\_SetExtendedListViewStyle**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyle), [**ListView\_SetExtendedListViewStyleEx**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyleex), and [**ListView\_GetExtendedListViewStyle**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getextendedlistviewstyle).</span></span>

## <a name="virtual-list-view-style"></a><span data-ttu-id="5ed8e-183">Style de List-View virtuel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-183">Virtual List-View Style</span></span>

<span data-ttu-id="5ed8e-184">Un affichage de liste virtuel est un contrôle List-View qui a le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-184">A virtual list view is a list-view control that has the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="5ed8e-185">Ce style permet au contrôle de gérer des millions d’éléments, car le propriétaire reçoit la charge de gestion des données d’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-185">This style enables the control to handle millions of items because the owner receives the burden of managing item data.</span></span> <span data-ttu-id="5ed8e-186">Cela vous permet d’utiliser le contrôle Virtual List-View avec de grandes bases de données d’informations, où des méthodes spécifiques d’accès aux données sont déjà en place.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-186">This allows you to use the virtual list-view control with large databases of information, where specific methods of data access are already in place.</span></span>

<span data-ttu-id="5ed8e-187">Un contrôle List-View virtuel gère très peu les informations sur les éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-187">A virtual list-view control maintains very little item information itself.</span></span> <span data-ttu-id="5ed8e-188">À l’exception des informations de sélection d’élément et de focus, le propriétaire du contrôle doit gérer toutes les informations d’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-188">Except for the item selection and focus information, the owner of the control must manage all item information.</span></span> <span data-ttu-id="5ed8e-189">D’autres processus demandent des informations d’élément au propriétaire à l’aide de codes de notification [LVN \_ GETDISPINFO](lvn-getdispinfo.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-189">Other processes request item information from the owner by using [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification codes.</span></span>

<span data-ttu-id="5ed8e-190">Étant donné que ce type de contrôle de liste est destiné aux jeux de données volumineux, il est recommandé de mettre en cache les données d’élément demandées pour améliorer les performances de récupération.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-190">Because this type of list control is intended for large data sets, it is recommended that you cache requested item data to improve retrieval performance.</span></span> <span data-ttu-id="5ed8e-191">Le mode liste fournit un mécanisme d’affinage du cache pour faciliter l’optimisation du cache.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-191">The list view provides a cache-hinting mechanism to assist in optimizing the cache.</span></span> <span data-ttu-id="5ed8e-192">L’indicateur est implémenté sous la forme d’un code de notification [LVN \_ ODCACHEHINT](lvn-odcachehint.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-192">The hint is implemented in the form of an [LVN\_ODCACHEHINT](lvn-odcachehint.md) notification code.</span></span>

### <a name="creating-a-virtual-list-view-control"></a><span data-ttu-id="5ed8e-193">Création d’un contrôle de List-View virtuel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-193">Creating a Virtual List-View Control</span></span>

<span data-ttu-id="5ed8e-194">Vous pouvez créer des contrôles d’affichage de liste virtuels à l’aide de la fonction [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) ou [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , en spécifiant le style de fenêtre [**LVS \_ OWNERDATA**](list-view-window-styles.md) dans le cadre du paramètre de fonction *dwStyle* .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-194">You create virtual list-view controls using the [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, specifying the [**LVS\_OWNERDATA**](list-view-window-styles.md) window style as part of the *dwStyle* function parameter.</span></span> <span data-ttu-id="5ed8e-195">Le basculement dynamique vers et depuis le style **LVS \_ OWNERDATA** n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-195">Dynamically switching to and from the **LVS\_OWNERDATA** style is not supported.</span></span>

<span data-ttu-id="5ed8e-196">Vous pouvez utiliser le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) en association avec la plupart des autres styles de fenêtre, à l’exception du style [**LVS \_ SORTASCENDING**](list-view-window-styles.md) ou [**LVS \_**](list-view-window-styles.md) SORTDESCENDING.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-196">You can use the [**LVS\_OWNERDATA**](list-view-window-styles.md) style in combination with most other window styles, except the [**LVS\_SORTASCENDING**](list-view-window-styles.md) or [**LVS\_SORTDESCENDING**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="5ed8e-197">Tous les contrôles de liste virtuelle affichent par défaut le style de [**\_ réorganisation LVS**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-197">All virtual list-view controls default to the [**LVS\_AUTOARRANGE**](list-view-window-styles.md) style.</span></span>

<span data-ttu-id="5ed8e-198">Pour permettre l’affichage des éléments dans la liste, vous devez d’abord envoyer le message [**\_ SETITEMCOUNT LVM**](lvm-setitemcount.md) , explicitement ou à l’aide de la macro [**ListView \_ SetItemCountEx**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemcountex) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-198">To enable items to be displayed in the list, you must first send the [**LVM\_SETITEMCOUNT**](lvm-setitemcount.md) message, either explicitly or by using the [**ListView\_SetItemCountEx**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemcountex) macro.</span></span>

<span data-ttu-id="5ed8e-199">Les messages suivants ne sont pas pris en charge sous le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) : [**LVM \_ ENABLEGROUPVIEW**](lvm-enablegroupview.md), [**LVM \_ GETITEMTEXT**](lvm-getitemtext.md), [**LVM \_ SETTILEINFO**](lvm-settileinfo.md)et [**LVM \_ MAPIDTOINDEX**](lvm-mapidtoindex.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-199">The following messages are not supported under the [**LVS\_OWNERDATA**](list-view-window-styles.md) style: [**LVM\_ENABLEGROUPVIEW**](lvm-enablegroupview.md), [**LVM\_GETITEMTEXT**](lvm-getitemtext.md), [**LVM\_SETTILEINFO**](lvm-settileinfo.md), and [**LVM\_MAPIDTOINDEX**](lvm-mapidtoindex.md).</span></span>

### <a name="compatibility-issues"></a><span data-ttu-id="5ed8e-200">Problèmes de compatibilité</span><span class="sxs-lookup"><span data-stu-id="5ed8e-200">Compatibility Issues</span></span>

<span data-ttu-id="5ed8e-201">Les quatre styles de vue de liste (icône, petite icône, liste et rapport) prennent en charge le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-201">All four of the list-view styles—icon, small icon, list, and report view—support the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="5ed8e-202">Les contrôles List-View qui ont le style **LVS \_ OWNERDATA** ne stockent pas d’informations spécifiques à l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-202">List-view controls that have the **LVS\_OWNERDATA** style do not store any item-specific information.</span></span> <span data-ttu-id="5ed8e-203">Par conséquent, les seuls indicateurs d’état d’élément valides que vous pouvez appliquer à un élément sont [**Lvis \_ Selected**](list-view-item-states.md) et [**Lvis \_ Focused**](list-view-item-states.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-203">Therefore, the only valid item state flags that you can apply to an item are [**LVIS\_SELECTED**](list-view-item-states.md) and [**LVIS\_FOCUSED**](list-view-item-states.md).</span></span> <span data-ttu-id="5ed8e-204">Aucune autre information d’État n’est stockée.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-204">No other state information is stored.</span></span> <span data-ttu-id="5ed8e-205">En particulier, le contrôle List-View ne conserve pas les images d’État ou de superposition pour chaque élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-205">In particular, the list-view control does not maintain state or overlay images for each item.</span></span> <span data-ttu-id="5ed8e-206">Toutefois, vous pouvez faire en sorte que le contrôle de vue de liste interroge votre application sur ces images en lui envoyant un message [**\_ SETCALLBACKMASK LVM**](lvm-setcallbackmask.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-206">However, you can have the list-view control query your application for these images by sending it an [**LVM\_SETCALLBACKMASK**](lvm-setcallbackmask.md) message.</span></span>

<span data-ttu-id="5ed8e-207">La plupart des messages de contrôle d’affichage de liste et les macros associées sont entièrement pris en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-207">Most list-view control messages and the associated macros are fully supported.</span></span> <span data-ttu-id="5ed8e-208">Toutefois, certains messages présentent des limitations ou ne sont pas pris en charge lorsque vous utilisez le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-208">However, some messages have limitations or are unsupported when you use the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="5ed8e-209">Le tableau suivant récapitule les messages affectés.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-209">The following table summarizes the affected messages.</span></span>



| <span data-ttu-id="5ed8e-210">Message</span><span class="sxs-lookup"><span data-stu-id="5ed8e-210">Message</span></span>                                             | <span data-ttu-id="5ed8e-211">Limitation</span><span class="sxs-lookup"><span data-stu-id="5ed8e-211">Limitation</span></span>                                                                                                                                                                                                                                                      |
|-----------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5ed8e-212">**réorganisation LVM \_**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-212">**LVM\_ARRANGE**</span></span>](lvm-arrange.md)                 | <span data-ttu-id="5ed8e-213">Ne prend pas en charge le style **LVA \_ SNAPTOGRID** .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-213">Does not support the **LVA\_SNAPTOGRID** style.</span></span>                                                                                                                                                                                                                 |
| [<span data-ttu-id="5ed8e-214">**\_DELETEALLITEMS LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-214">**LVM\_DELETEALLITEMS**</span></span>](lvm-deleteallitems.md)   | <span data-ttu-id="5ed8e-215">Définit le nombre d’éléments à zéro et efface toutes les variables de sélection internes, mais ne supprime pas réellement les éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-215">Sets the item count to zero and clears all internal selection variables, but it does not actually delete any items.</span></span> <span data-ttu-id="5ed8e-216">Il effectue un rappel de notification.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-216">It makes a notification callback.</span></span>                                                                                                           |
| [<span data-ttu-id="5ed8e-217">**LVM \_ DELETEITEM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-217">**LVM\_DELETEITEM**</span></span>](lvm-deleteitem.md)           | <span data-ttu-id="5ed8e-218">Est pris en charge pour l’intégrité de la sélection uniquement et ne supprime pas réellement un élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-218">Is supported for selection integrity only and does not actually delete an item.</span></span>                                                                                                                                                                                 |
| [<span data-ttu-id="5ed8e-219">**\_GETITEMSTATE LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-219">**LVM\_GETITEMSTATE**</span></span>](lvm-getitemstate.md)       | <span data-ttu-id="5ed8e-220">Retourne uniquement les États de focus et de sélection (autrement dit, les États stockés par le contrôle List-View).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-220">Returns only focus and selection states (that is, those states stored by the list-view control).</span></span>                                                                                                                                                                |
| [<span data-ttu-id="5ed8e-221">**\_GETNEXTITEM LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-221">**LVM\_GETNEXTITEM**</span></span>](lvm-getnextitem.md)         | <span data-ttu-id="5ed8e-222">Ne prend pas en charge les critères de recherche List-View **LVNI \_ Cut**, **LVNI \_ Hidden** ou **LVNI \_ DROPHILITED**.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-222">Does not support the list-view search criteria **LVNI\_CUT**, **LVNI\_HIDDEN**, or **LVNI\_DROPHILITED**.</span></span> <span data-ttu-id="5ed8e-223">Tous les autres critères sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-223">All other criteria are supported.</span></span>                                                                                                                     |
| [<span data-ttu-id="5ed8e-224">**\_GETWORKAREAS LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-224">**LVM\_GETWORKAREAS**</span></span>](lvm-getworkareas.md)       | <span data-ttu-id="5ed8e-225">Non prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-225">Is not supported.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="5ed8e-226">**INSERTITEM de LVM \_**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-226">**LVM\_INSERTITEM**</span></span>](lvm-insertitem.md)           | <span data-ttu-id="5ed8e-227">Est pris en charge pour l’intégrité de la sélection uniquement.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-227">Is supported for selection integrity only.</span></span>                                                                                                                                                                                                                      |
| [<span data-ttu-id="5ed8e-228">**\_SETITEM LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-228">**LVM\_SETITEM**</span></span>](lvm-setitem.md)                 | <span data-ttu-id="5ed8e-229">Non prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-229">Is not supported.</span></span> <span data-ttu-id="5ed8e-230">Pour définir l’état de l’élément, utilisez le message [**ListView \_ SetItemState**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemstate) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-230">To set the item state, use the [**ListView\_SetItemState**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemstate) message.</span></span>                                                                                                                                               |
| [<span data-ttu-id="5ed8e-231">**\_SETITEMCOUNT LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-231">**LVM\_SETITEMCOUNT**</span></span>](lvm-setitemcount.md)       | <span data-ttu-id="5ed8e-232">Définit le nombre d’éléments actuellement dans la liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-232">Sets the number of items currently in the list.</span></span> <span data-ttu-id="5ed8e-233">Si le contrôle d’affichage de liste envoie une notification qui demande des données pour tout élément jusqu’à la valeur maximale définie, le propriétaire doit être prêt à fournir ces données.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-233">If the list-view control sends a notification that requests data for any item up to the maximum set, the owner must be prepared to supply that data.</span></span> <span data-ttu-id="5ed8e-234">Les paramètres de message prennent en charge les contrôles de liste virtuels.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-234">The message parameters support virtual list-view controls.</span></span> |
| [<span data-ttu-id="5ed8e-235">**\_SETITEMPOSITION LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-235">**LVM\_SETITEMPOSITION**</span></span>](lvm-setitemposition.md) | <span data-ttu-id="5ed8e-236">Non prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-236">Is not supported.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="5ed8e-237">**\_SETITEMSTATE LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-237">**LVM\_SETITEMSTATE**</span></span>](lvm-setitemstate.md)       | <span data-ttu-id="5ed8e-238">Autorise uniquement la modification des États de sélection et de focus pour l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-238">Allows only the selection and focus states to be changed for the item.</span></span>                                                                                                                                                                                          |
| [<span data-ttu-id="5ed8e-239">**\_SETITEMTEXT LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-239">**LVM\_SETITEMTEXT**</span></span>](lvm-setitemtext.md)         | <span data-ttu-id="5ed8e-240">Non prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-240">Is not supported.</span></span> <span data-ttu-id="5ed8e-241">Il incombe à l’application de conserver les textes des éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-241">It is the application's responsibility to maintain the item texts.</span></span>                                                                                                                                                                            |
| [<span data-ttu-id="5ed8e-242">**\_SETWORKAREAS LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-242">**LVM\_SETWORKAREAS**</span></span>](lvm-setworkareas.md)       | <span data-ttu-id="5ed8e-243">Non prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-243">Is not supported.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="5ed8e-244">**\_SORTITEMS LVM**</span><span class="sxs-lookup"><span data-stu-id="5ed8e-244">**LVM\_SORTITEMS**</span></span>](lvm-sortitems.md)             | <span data-ttu-id="5ed8e-245">Non prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-245">Is not supported.</span></span> <span data-ttu-id="5ed8e-246">Il incombe à l’application de présenter les éléments dans l’ordre souhaité.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-246">It is the application's responsibility to present the items in the desired order.</span></span>                                                                                                                                                             |



 

### <a name="handling-virtual-list-view-control-notification-codes"></a><span data-ttu-id="5ed8e-247">Gestion des codes de notification de contrôle de List-View virtuel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-247">Handling Virtual List-View Control Notification Codes</span></span>

<span data-ttu-id="5ed8e-248">Les contrôles List-View avec le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) envoient les mêmes codes de notification que les autres contrôles de vue de liste et deux autres : [LVN \_ ODCACHEHINT](lvn-odcachehint.md) et [LVN \_ ODFINDITEM](lvn-odfinditem.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-248">List-view controls with the [**LVS\_OWNERDATA**](list-view-window-styles.md) style send the same notification codes as other list-view controls and two additional ones: [LVN\_ODCACHEHINT](lvn-odcachehint.md) and [LVN\_ODFINDITEM](lvn-odfinditem.md).</span></span> <span data-ttu-id="5ed8e-249">Voici les notifications les plus courantes que le contrôle List-View avec le style **LVS \_ OWNERDATA** envoie.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-249">The following are the most common notifications that the list-view control with the **LVS\_OWNERDATA** style sends.</span></span>



|      <span data-ttu-id="5ed8e-250">Notification</span><span class="sxs-lookup"><span data-stu-id="5ed8e-250">Notification</span></span>                    |     <span data-ttu-id="5ed8e-251">Description</span><span class="sxs-lookup"><span data-stu-id="5ed8e-251">Description</span></span>                         |
|-----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5ed8e-252">LVN \_ GETDISPINFO</span><span class="sxs-lookup"><span data-stu-id="5ed8e-252">LVN\_GETDISPINFO</span></span>](lvn-getdispinfo.md) | <span data-ttu-id="5ed8e-253">Un contrôle Virtual List-View gère très peu les informations sur les éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-253">A virtual list-view control maintains very little item information on its own.</span></span> <span data-ttu-id="5ed8e-254">Par conséquent, il envoie souvent le code de notification [LVN \_ GETDISPINFO](lvn-getdispinfo.md) pour demander des informations sur l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-254">As a result, it often sends the [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification code to request item information.</span></span> <span data-ttu-id="5ed8e-255">Ce message est traité à peu près de la même façon que les éléments de rappel dans un contrôle de liste standard.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-255">This message is handled in much the same way as callback items in a standard list control.</span></span> <span data-ttu-id="5ed8e-256">Étant donné que le nombre d’éléments pris en charge par le contrôle peut être très volumineux, la mise en cache des données d’élément améliore les performances.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-256">Because the number of items supported by the control can be very large, caching item data improves performance.</span></span> <span data-ttu-id="5ed8e-257">Lors de la gestion de LVN \_ GETDISPINFO, le propriétaire du contrôle tente d’abord de fournir les informations d’élément demandées à partir du cache (pour plus d’informations, consultez [gestion du cache](#cache-management)).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-257">When handling LVN\_GETDISPINFO, the owner of the control first attempts to supply requested item information from the cache (for more information, see [Cache Management](#cache-management)).</span></span> <span data-ttu-id="5ed8e-258">Si l’élément demandé n’est pas mis en cache, le propriétaire doit être prêt à fournir les informations par d’autres moyens.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-258">If the requested item is not cached, the owner must be prepared to supply the information by other means.</span></span> |
| [<span data-ttu-id="5ed8e-259">LVN \_ ODCACHEHINT</span><span class="sxs-lookup"><span data-stu-id="5ed8e-259">LVN\_ODCACHEHINT</span></span>](lvn-odcachehint.md) | <span data-ttu-id="5ed8e-260">Une vue de liste virtuelle envoie le code de notification [LVN \_ ODCACHEHINT](lvn-odcachehint.md) pour faciliter l’optimisation du cache.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-260">A virtual list view sends the [LVN\_ODCACHEHINT](lvn-odcachehint.md) notification code to assist in optimizing the cache.</span></span> <span data-ttu-id="5ed8e-261">Le code de notification fournit des valeurs d’index inclusives pour une plage d’éléments qu’il est recommandé de mettre en cache.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-261">The notification code provides inclusive index values for a range of items that it recommends be cached.</span></span> <span data-ttu-id="5ed8e-262">À la réception du code de notification, le propriétaire doit être prêt à charger le cache avec les informations relatives à l’élément pour la plage demandée afin que les informations soient immédiatement disponibles lorsqu’un message [LVN \_ GETDISPINFO](lvn-getdispinfo.md) est envoyé.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-262">Upon receiving the notification code, the owner must be prepared to load the cache with item information for the requested range so that the information will be readily available when an [LVN\_GETDISPINFO](lvn-getdispinfo.md) message is sent.</span></span>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="5ed8e-263">LVN \_ ODFINDITEM</span><span class="sxs-lookup"><span data-stu-id="5ed8e-263">LVN\_ODFINDITEM</span></span>](lvn-odfinditem.md)   | <span data-ttu-id="5ed8e-264">Le code de notification [LVN \_ ODFINDITEM](lvn-odfinditem.md) est envoyé par un contrôle List-View virtuel lorsque le contrôle a besoin du propriétaire pour rechercher un élément de rappel particulier.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-264">The [LVN\_ODFINDITEM](lvn-odfinditem.md) notification code is sent by a virtual list-view control when the control needs the owner to find a particular callback item.</span></span> <span data-ttu-id="5ed8e-265">Le code de notification est envoyé lorsque le contrôle List-View reçoit un accès à la clé rapide ou lorsqu’il reçoit un message [**\_ FINDITEM LVM**](lvm-finditem.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-265">The notification code is sent when the list-view control receives quick key access or when it receives an [**LVM\_FINDITEM**](lvm-finditem.md) message.</span></span> <span data-ttu-id="5ed8e-266">Les informations de recherche sont envoyées sous la forme d’une structure [**LVFINDINFO**](/windows/win32/api/commctrl/ns-commctrl-lvfindinfoa) , qui est membre de la structure [**NMLVFINDITEM**](/windows/win32/api/commctrl/ns-commctrl-nmlvfinditema) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-266">Search information is sent in the form of an [**LVFINDINFO**](/windows/win32/api/commctrl/ns-commctrl-lvfindinfoa) structure, which is a member of the [**NMLVFINDITEM**](/windows/win32/api/commctrl/ns-commctrl-nmlvfinditema) structure.</span></span> <span data-ttu-id="5ed8e-267">Le propriétaire doit être prêt à rechercher un élément qui correspond aux informations fournies par le contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-267">The owner must be prepared to search for an item that matches the information given by the list-view control.</span></span> <span data-ttu-id="5ed8e-268">Le propriétaire retourne l’index de l’élément en cas de réussite, ou-1 si aucun élément correspondant n’est trouvé.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-268">The owner returns the index of the item if successful, or -1 if no matching item is found.</span></span>               |



 

### <a name="cache-management"></a><span data-ttu-id="5ed8e-269">Gestion du cache</span><span class="sxs-lookup"><span data-stu-id="5ed8e-269">Cache Management</span></span>

<span data-ttu-id="5ed8e-270">Un contrôle List-View avec le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) produit un grand nombre de codes de notification [LVN \_ GETDISPINFO](lvn-getdispinfo.md) et, pour faciliter l’optimisation du cache, un message LVN [ \_ ODCACHEHINT](lvn-odcachehint.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-270">A list-view control with the [**LVS\_OWNERDATA**](list-view-window-styles.md) style produces a large number of [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification codes and, to assist in optimizing the cache, an [LVN\_ODCACHEHINT](lvn-odcachehint.md) message.</span></span> <span data-ttu-id="5ed8e-271">Les \_ messages LVN ODCACHEHINT fournissent des informations sur les éléments recommandés à inclure dans le cache.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-271">LVN\_ODCACHEHINT messages provide information about the recommended items to include within the cache.</span></span> <span data-ttu-id="5ed8e-272">Ces messages sont envoyés sous forme de messages de [**\_ notification WM**](wm-notify.md) , avec la valeur *lParam* qui agit comme l’adresse d’une structure [**NMLVCACHEHINT**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-272">These messages are sent as [**WM\_NOTIFY**](wm-notify.md) messages, with the *lParam* value acting as the address of an [**NMLVCACHEHINT**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) structure.</span></span>

<span data-ttu-id="5ed8e-273">La structure [**NMLVCACHEHINT**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) inclut deux membres entiers, **iFrom** et **ITO**, qui représentent les points de terminaison inclusifs d’une plage d’éléments qui sont les plus susceptibles d’être nécessaires.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-273">The [**NMLVCACHEHINT**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) structure includes two integer members, **iFrom** and **iTo**, that represent the inclusive endpoints of a range of items that most likely will be needed.</span></span> <span data-ttu-id="5ed8e-274">Le propriétaire doit être prêt à charger le cache avec les informations d’élément pour chacun des éléments dans la plage recommandée.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-274">The owner must be prepared to load the cache with the item information for each of the items within the recommended range.</span></span>

<span data-ttu-id="5ed8e-275">Le contrôle de liste a souvent besoin d’informations sur l’élément pour le premier élément (décalage 0).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-275">The list control often needs item information for the first item (offset 0).</span></span> <span data-ttu-id="5ed8e-276">Le code de notification [LVN \_ ODCACHEHINT](lvn-odcachehint.md) peut ne pas toujours inclure l’élément 0, mais il doit toujours être inclus dans le cache.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-276">The [LVN\_ODCACHEHINT](lvn-odcachehint.md) notification code might not always include item 0, but it must always be included in the cache.</span></span>

<span data-ttu-id="5ed8e-277">Les derniers éléments de la liste font l’objet d’un accès fréquent.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-277">The last items in the list are accessed often.</span></span> <span data-ttu-id="5ed8e-278">Par conséquent, le propriétaire peut vouloir conserver un deuxième cache qui comprend les éléments à la fin de la liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-278">Therefore, the owner might want to keep a second cache that includes the items at the end of the list.</span></span> <span data-ttu-id="5ed8e-279">La plage demandée à partir de [LVN \_ ODCACHEHINT](lvn-odcachehint.md) peut être vérifiée par rapport au cache de fin pour qu’elle soit disponible automatiquement au lieu de recharger la même plage de fin à chaque fois.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-279">The requested range from [LVN\_ODCACHEHINT](lvn-odcachehint.md) can be checked against the end cache to make it available automatically instead of reloading the same end range each time.</span></span>

## <a name="list-view-working-areas"></a><span data-ttu-id="5ed8e-280">List-View les zones de travail</span><span class="sxs-lookup"><span data-stu-id="5ed8e-280">List-View Working Areas</span></span>

<span data-ttu-id="5ed8e-281">Les contrôles List-View prennent en charge les zones de travail, qui sont des zones virtuelles rectangulaires que le contrôle List-View utilise pour réorganiser ses éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-281">List-view controls support working areas, which are rectangular virtual areas that the list-view control uses to arrange its items.</span></span> <span data-ttu-id="5ed8e-282">Une zone de travail n’est pas une fenêtre et ne peut pas avoir de bordure visible.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-282">A working area is not a window and cannot have a visible border.</span></span> <span data-ttu-id="5ed8e-283">Par défaut, le contrôle d’affichage de liste n’a pas de zones de travail.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-283">By default, the list-view control has no working areas.</span></span> <span data-ttu-id="5ed8e-284">En créant une zone de travail, vous pouvez créer une bordure vide à gauche, en haut ou à droite des éléments ou provoquer l’affichage d’une barre de défilement horizontale quand il n’y en a pas normalement.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-284">By creating a working area, you can create an empty border on the left, top, or right of the items or cause a horizontal scroll bar to be displayed when there normally would not be one.</span></span>

<span data-ttu-id="5ed8e-285">Lorsqu’une zone de travail est créée, les éléments qui se trouvent dans la zone de travail deviennent membres de la zone de travail.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-285">When a working area is created, items that lie within the working area become members of the working area.</span></span> <span data-ttu-id="5ed8e-286">De même, si un élément est déplacé dans une zone de travail, l’élément devient membre de cette zone de travail.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-286">Similarly, if an item is moved into a working area, the item becomes a member of that working area.</span></span> <span data-ttu-id="5ed8e-287">Si un élément ne se trouve dans aucune zone de travail, il devient automatiquement membre de la première zone de travail (index 0).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-287">If an item does not lie within any working area, it automatically becomes a member of the first (index 0) working area.</span></span> <span data-ttu-id="5ed8e-288">Pour placer un nouvel élément dans une zone de travail spécifique, vous devez d’abord créer l’élément, puis utiliser le [**\_ SETITEMPOSITION LVM**](lvm-setitemposition.md) ou le message [**LVM \_ SETITEMPOSITION32**](lvm-setitemposition32.md) pour le déplacer dans la zone de travail de votre choix.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-288">To place new item within a specific working area, you must first create the item and then use either the [**LVM\_SETITEMPOSITION**](lvm-setitemposition.md) or the [**LVM\_SETITEMPOSITION32**](lvm-setitemposition32.md) message to move it into the desired working area.</span></span>

<span data-ttu-id="5ed8e-289">L’illustration suivante est un exemple de contrôle List-View qui contient quatre zones de travail, chacune dans un autre quadrant de la zone cliente.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-289">The following illustration is an example of a list-view control that contains four working areas, each in a different quadrant of the client area.</span></span>

![capture d’écran d’un contrôle List-View avec une zone de travail dans chaque quadrant de la zone cliente](images/working.jpg)

<span data-ttu-id="5ed8e-291">Plusieurs zones de travail peuvent être utilisées pour la création de différentes zones dans une vue.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-291">Multiple working areas can be used for creating different areas within one view.</span></span> <span data-ttu-id="5ed8e-292">Vous pouvez créer des zones dans une vue unique qui ont des significations différentes.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-292">You can create areas in a single view that have different meanings.</span></span> <span data-ttu-id="5ed8e-293">Par exemple, une vue d’un système de fichiers peut avoir une zone pour les fichiers en lecture/écriture et une autre zone pour les fichiers en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-293">For example, a view of a file system might have an area for read/write files and another area for read-only files.</span></span> <span data-ttu-id="5ed8e-294">L’utilisateur peut catégoriser les éléments en les plaçant dans des zones de travail différentes.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-294">The user can categorize items by placing them in different working areas.</span></span> <span data-ttu-id="5ed8e-295">Si un fichier est déplacé dans la zone en lecture seule, il est automatiquement en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-295">If a file is moved into the read-only area, it will automatically become read-only.</span></span>

<span data-ttu-id="5ed8e-296">Plusieurs zones de travail peuvent se croiser, mais les éléments qui se trouvent dans l’intersection deviennent membres de la zone avec l’index inférieur ; par conséquent, il est préférable d’éviter cette situation.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-296">Multiple working areas can intersect, but any items that lie within the intersection become members of the area with the lower index; therefore, it is best to avoid this situation.</span></span> <span data-ttu-id="5ed8e-297">Lorsque vous triez plusieurs zones de travail, les éléments sont triés par rapport aux autres éléments dans la même zone de travail.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-297">When sorting multiple work areas, the items are sorted compared to the other items in the same working area.</span></span>

<span data-ttu-id="5ed8e-298">Le nombre de zones de travail peut être récupéré avec le message [**LVM \_ GETNUMBEROFWORKAREAS**](lvm-getnumberofworkareas.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-298">The number of working areas can be retrieved with the [**LVM\_GETNUMBEROFWORKAREAS**](lvm-getnumberofworkareas.md) message.</span></span> <span data-ttu-id="5ed8e-299">Les zones de travail sont modifiées à l’aide du message [**\_ SETWORKAREAS LVM**](lvm-setworkareas.md) et peuvent être récupérées avec le message [**LVM \_ GETWORKAREAS**](lvm-getworkareas.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-299">The working areas are changed with the [**LVM\_SETWORKAREAS**](lvm-setworkareas.md) message and can be retrieved with the [**LVM\_GETWORKAREAS**](lvm-getworkareas.md) message.</span></span> <span data-ttu-id="5ed8e-300">Ces deux messages prennent l’adresse d’un tableau de structures [**Rect**](/previous-versions//dd162897(v=vs.85)) comme *lParam* et le nombre de structures **Rect** comme *wParam*.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-300">Both of these messages take the address of an array of [**RECT**](/previous-versions//dd162897(v=vs.85)) structures as the *lParam* and the number of **RECT** structures as the *wParam*.</span></span> <span data-ttu-id="5ed8e-301">Les membres **gauche** et **supérieur** de ces structures spécifient les coordonnées de l’angle supérieur gauche (l’origine) de la zone de travail, tandis que les membres **droits** et **inférieurs** spécifient le coin inférieur droit de la zone de travail.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-301">The **left** and **top** members of these structures specify the coordinates of the upper-left corner (the origin) of the working area, and the **right** and **bottom** members specify the lower-right corner of the working area.</span></span> <span data-ttu-id="5ed8e-302">Toutes les coordonnées sont exprimées en coordonnées clientes de la vue liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-302">All the coordinates are in client coordinates of the list view.</span></span> <span data-ttu-id="5ed8e-303">Le nombre maximal de zones de travail autorisées est défini par la valeur **LV \_ Max \_ WORKAREAS** .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-303">The maximum number of working areas allowed is defined by the **LV\_MAX\_WORKAREAS** value.</span></span>

<span data-ttu-id="5ed8e-304">La modification de la zone de travail n’a aucun effet sur les contrôles d’affichage de liste qui ont la [**\_ liste LVS**](list-view-window-styles.md) ou la vue de [**\_ rapport LVS**](list-view-window-styles.md) , mais les zones de travail sont conservées lorsque le type de vue est modifié.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-304">Changing the working area has no effect on list-view controls that have the [**LVS\_LIST**](list-view-window-styles.md) or [**LVS\_REPORT**](list-view-window-styles.md) view, but the working areas will be maintained when the view type is changed.</span></span> <span data-ttu-id="5ed8e-305">Avec l' [**\_ icône LVS**](list-view-window-styles.md) et les vues [**LVS \_ SmallIcon**](list-view-window-styles.md) , la zone de travail peut être modifiée pour modifier la façon dont les éléments sont affichés.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-305">With the [**LVS\_ICON**](list-view-window-styles.md) and [**LVS\_SMALLICON**](list-view-window-styles.md) views, the working area can be modified to change the way the items are displayed.</span></span> <span data-ttu-id="5ed8e-306">La définition de la largeur de la zone de travail (à gauche) par rapport à la largeur du client du contrôle entraîne l’encapsulation des éléments à cette largeur et la barre de défilement horizontale à afficher.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-306">Making the width of the working area (right - left) greater than the client width of the control causes the items to be wrapped at that width and the horizontal scroll bar to be displayed.</span></span> <span data-ttu-id="5ed8e-307">Si vous faites en sorte que la largeur de la zone de travail soit plus étroite que la largeur de la zone cliente du contrôle, les éléments sont encapsulés dans la zone de travail et non dans la zone cliente.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-307">Making the width of the working area narrower than the width of the control's client area causes the items to be wrapped within the working area and not the client area.</span></span> <span data-ttu-id="5ed8e-308">La définition du membre de **gauche** ou du **haut** sur une valeur positive entraîne l’affichage des éléments à partir de la zone de travail, en créant un espace vide entre le bord du contrôle et les éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-308">Setting the **left** or **top** member to a positive value causes the items to be displayed starting at the working area, creating an empty space between the edge of the control and the items.</span></span> <span data-ttu-id="5ed8e-309">Un espace vide peut également être créé entre le bord droit du contrôle et les éléments en faisant en sorte que la largeur de la zone de travail soit inférieure à la largeur du client du contrôle.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-309">An empty space can also be created between the right edge of the control and the items by making the width of the working area less than the client width of the control.</span></span>

## <a name="list-view-image-lists"></a><span data-ttu-id="5ed8e-310">List-View les listes d’images</span><span class="sxs-lookup"><span data-stu-id="5ed8e-310">List-View Image Lists</span></span>

<span data-ttu-id="5ed8e-311">Par défaut, un contrôle List-View n’affiche pas d’images d’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-311">By default, a list-view control does not display item images.</span></span> <span data-ttu-id="5ed8e-312">Pour afficher des images d’élément, vous devez créer des listes d’images et les associer au contrôle.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-312">To display item images, you must create image lists and associate them with the control.</span></span> <span data-ttu-id="5ed8e-313">Un contrôle List-View peut avoir trois listes d’images :</span><span class="sxs-lookup"><span data-stu-id="5ed8e-313">A list-view control can have three image lists:</span></span>

-   <span data-ttu-id="5ed8e-314">Liste d’images qui contient les icônes de taille réelle affichées lorsque le contrôle est en mode icône.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-314">An image list that contains full-sized icons displayed when the control is in icon view.</span></span>
-   <span data-ttu-id="5ed8e-315">Liste d’images qui contient de petites icônes affichées lorsque le contrôle est en mode petite icône, liste ou rapport.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-315">An image list that contains small icons displayed when the control is in small icon view, list view, or report view.</span></span>
-   <span data-ttu-id="5ed8e-316">Liste d’images qui contient des images d’État qui sont affichées à gauche de l’icône de taille complète ou petite.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-316">An image list that contains state images, which are displayed to the left of the full-sized or small icon.</span></span> <span data-ttu-id="5ed8e-317">Vous pouvez utiliser des images d’État, telles que des cases à cocher activées et désactivées, pour indiquer les États des éléments définis par l’application.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-317">You can use state images, such as checked and cleared check boxes, to indicate application-defined item states.</span></span> <span data-ttu-id="5ed8e-318">Les images d’État sont affichées en mode icône, en mode petite icône, en mode liste et en mode rapport.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-318">State images are displayed in icon view, small icon view, list view, and report view.</span></span>

<span data-ttu-id="5ed8e-319">Les listes d’images complètes et petites icônes peuvent également contenir des *images de superposition*, qui sont conçues pour être dessinées de manière transparente sur les icônes d’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-319">The full-sized and small icon image lists can also contain *overlay images*, which are designed to be drawn transparently over the item icons.</span></span>

<span data-ttu-id="5ed8e-320">Pour utiliser des images de superposition dans un contrôle List-View :</span><span class="sxs-lookup"><span data-stu-id="5ed8e-320">To use overlay images in a list-view control:</span></span>

1.  <span data-ttu-id="5ed8e-321">Appelez la fonction [**ImageList \_ SetOverlayImage**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_setoverlayimage) pour affecter un index d’image de superposition à une image dans les listes d’images d’icône de taille réelle et réduite.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-321">Call the [**ImageList\_SetOverlayImage**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_setoverlayimage) function to assign an overlay image index to an image in the full-sized and small icon image lists.</span></span> <span data-ttu-id="5ed8e-322">Une image de superposition est identifiée par un index de base un.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-322">An overlay image is identified by a one-based index.</span></span>
2.  <span data-ttu-id="5ed8e-323">Vous pouvez associer un index d’image de superposition à un élément lorsque vous appelez la macro [**ListView \_ InsertItem**](/windows/desktop/api/Commctrl/nf-commctrl-listview_insertitem) ou [**ListView \_ SetItem**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitem) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-323">You can associate an overlay image index with an item when you call the [**ListView\_InsertItem**](/windows/desktop/api/Commctrl/nf-commctrl-listview_insertitem) or [**ListView\_SetItem**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitem) macro.</span></span> <span data-ttu-id="5ed8e-324">Utilisez la macro [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) pour spécifier un index d’image de superposition dans le membre d' **État** de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-324">Use the [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) macro to specify an overlay image index in the **state** member of the item's [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="5ed8e-325">Vous devez également définir les bits [**Lvis \_ OVERLAYMASK**](list-view-item-states.md) dans le membre **stateMask** .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-325">You must also set the [**LVIS\_OVERLAYMASK**](list-view-item-states.md) bits in the **stateMask** member.</span></span>

<span data-ttu-id="5ed8e-326">Si une liste d’images d’État est spécifiée, un contrôle d’affichage de liste réserve l’espace à gauche de l’icône de chaque élément pour une image d’État.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-326">If a state image list is specified, a list-view control reserves space to the left of each item's icon for a state image.</span></span>

<span data-ttu-id="5ed8e-327">Pour associer une image d’État à un élément, utilisez la macro [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) pour spécifier un index d’image d’État dans le membre d' **État** de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-327">To associate a state image with an item, use the [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) macro to specify a state image index in the **state** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="5ed8e-328">L’index identifie une image dans la liste d’images d’État du contrôle.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-328">The index identifies an image in the control's state image list.</span></span> <span data-ttu-id="5ed8e-329">Bien que les index de liste d’images soient de base zéro, le contrôle utilise des index de base 1 pour identifier les images d’État.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-329">Although image list indexes are zero-based, the control uses one-based indexes to identify state images.</span></span> <span data-ttu-id="5ed8e-330">Un index d’image d’état de zéro indique qu’un élément n’a pas d’image d’État.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-330">A state image index of zero indicates that an item has no state image.</span></span>

<span data-ttu-id="5ed8e-331">Par défaut, lorsqu’un contrôle List-View est détruit, il détruit les listes d’images qui lui sont assignées.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-331">By default, when a list-view control is destroyed, it destroys the image lists assigned to it.</span></span> <span data-ttu-id="5ed8e-332">Toutefois, si un contrôle List-View a le style de fenêtre [**LVS \_ SHAREIMAGELISTS**](list-view-window-styles.md) , l’application est responsable de la destruction des listes d’images lorsqu’elles ne sont plus utilisées.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-332">However, if a list-view control has the [**LVS\_SHAREIMAGELISTS**](list-view-window-styles.md) window style, the application is responsible for destroying the image lists when they are no longer in use.</span></span> <span data-ttu-id="5ed8e-333">Vous devez spécifier ce style si vous assignez les mêmes listes d’images à plusieurs contrôles de vue de liste. dans le cas contraire, plusieurs contrôles peuvent tenter de détruire la même liste d’images.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-333">You should specify this style if you assign the same image lists to multiple list-view controls; otherwise, more than one control might try to destroy the same image list.</span></span>

## <a name="list-view-items-and-subitems"></a><span data-ttu-id="5ed8e-334">Éléments et sous-éléments List-View</span><span class="sxs-lookup"><span data-stu-id="5ed8e-334">List-View Items and Subitems</span></span>

<span data-ttu-id="5ed8e-335">Chaque élément d’un contrôle List-View a une icône, une étiquette, un état actuel et une valeur définie par l’application.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-335">Each item in a list-view control has an icon, a label, a current state, and an application-defined value.</span></span> <span data-ttu-id="5ed8e-336">En utilisant des messages de liste, vous pouvez ajouter, modifier et supprimer des éléments, ainsi que récupérer des informations sur les éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-336">By using list-view messages, you can add, modify, and delete items as well as retrieve information about items.</span></span>

<span data-ttu-id="5ed8e-337">Chaque élément peut avoir un ou plusieurs sous- *éléments*.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-337">Each item can have one or more *subitems*.</span></span> <span data-ttu-id="5ed8e-338">Un sous-élément est une chaîne qui, en mode rapport, s’affiche dans une colonne distincte de l’icône et de l’étiquette de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-338">A subitem is a string that, in report view, is displayed in a column separate from the item's icon and label.</span></span> <span data-ttu-id="5ed8e-339">Pour spécifier le texte d’un sous-élément, utilisez le message [**LVM \_ SETITEMTEXT**](lvm-setitemtext.md) ou [**LVM \_ SETITEM**](lvm-setitem.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-339">To specify the text of a subitem, use the [**LVM\_SETITEMTEXT**](lvm-setitemtext.md) or [**LVM\_SETITEM**](lvm-setitem.md) message.</span></span> <span data-ttu-id="5ed8e-340">Tous les éléments d’un contrôle List-View ont le même nombre de sous-éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-340">All items in a list-view control have the same number of subitems.</span></span> <span data-ttu-id="5ed8e-341">Le nombre de sous-éléments est déterminé par le nombre de colonnes dans le contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-341">The number of subitems is determined by the number of columns in the list-view control.</span></span> <span data-ttu-id="5ed8e-342">Lorsque vous ajoutez une colonne à un contrôle List-View, vous spécifiez son index de sous-élément associé.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-342">When you add a column to a list-view control, you specify its associated subitem index.</span></span>

<span data-ttu-id="5ed8e-343">La structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) définit un élément de vue de liste ou un sous-élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-343">The [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure defines a list-view item or subitem.</span></span> <span data-ttu-id="5ed8e-344">Le membre **iItem** est l’index de base zéro de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-344">The **iItem** member is the zero-based index of the item.</span></span> <span data-ttu-id="5ed8e-345">Le membre **iSubItem** est l’index de base un d’un sous-élément ou zéro si la structure contient des informations sur un élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-345">The **iSubItem** member is the one-based index of a subitem or zero if the structure contains information about an item.</span></span> <span data-ttu-id="5ed8e-346">Les membres supplémentaires spécifient le texte, l’icône, l’État et les données d’élément de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-346">Additional members specify the item's text, icon, state, and item data.</span></span> <span data-ttu-id="5ed8e-347">Les *données d’élément* sont une valeur définie par l’application associée à un élément de vue de liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-347">*Item data* is an application-defined value associated with a list-view item.</span></span>

<span data-ttu-id="5ed8e-348">Pour ajouter un élément à un contrôle List View, utilisez le message [**LVM \_ INSERTITEM**](lvm-insertitem.md) , en spécifiant l’adresse d’une structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-348">To add an item to a list-view control, use the [**LVM\_INSERTITEM**](lvm-insertitem.md) message, specifying the address of an [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="5ed8e-349">Avant d’ajouter plusieurs éléments, vous pouvez envoyer au contrôle un message [**\_ SETITEMCOUNT LVM**](lvm-setitemcount.md) , en spécifiant le nombre d’éléments que le contrôle doit finalement contenir.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-349">Before adding multiple items, you can send the control an [**LVM\_SETITEMCOUNT**](lvm-setitemcount.md) message, specifying the number of items the control will ultimately contain.</span></span> <span data-ttu-id="5ed8e-350">Ce message permet au contrôle de vue de liste de réallouer ses structures de données internes une seule fois plutôt qu’à chaque fois que vous ajoutez un élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-350">This message enables the list-view control to reallocate its internal data structures only once rather than every time you add an item.</span></span> <span data-ttu-id="5ed8e-351">Vous pouvez déterminer le nombre d’éléments dans un contrôle List-View en utilisant le message [**LVM \_ GETITEMCOUNT**](lvm-getitemcount.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-351">You can determine the number of items in a list-view control by using the [**LVM\_GETITEMCOUNT**](lvm-getitemcount.md) message.</span></span> <span data-ttu-id="5ed8e-352">Si vous ajoutez un grand nombre d’éléments à un contrôle List-View, vous pouvez accélérer le processus en désactivant le redessinage avant d’ajouter les éléments, puis activer le redessin après l’ajout des éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-352">If you are adding a large number of items to a list-view control, you can speed up the process by disabling redrawing before adding the items, then enable redrawing after the items are added.</span></span> <span data-ttu-id="5ed8e-353">Utilisez le message [**WM \_ SETREDRAW**](/windows/desktop/gdi/wm-setredraw) pour activer et désactiver le rafraîchissement.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-353">Use the [**WM\_SETREDRAW**](/windows/desktop/gdi/wm-setredraw) message to enable and disable redrawing.</span></span>

<span data-ttu-id="5ed8e-354">Pour modifier les attributs d’un élément de liste, utilisez le message [**LVM \_ SETITEM**](lvm-setitem.md) , en spécifiant l’adresse d’une structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-354">To change the attributes of a list-view item, use the [**LVM\_SETITEM**](lvm-setitem.md) message, specifying the address of an [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="5ed8e-355">Le membre de **masque** de cette structure spécifie les attributs d’élément que vous souhaitez modifier.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-355">The **mask** member of this structure specifies the item attributes you want to change.</span></span> <span data-ttu-id="5ed8e-356">Par exemple, pour modifier uniquement le texte d’un élément ou d’un sous-élément, utilisez le message [**LVM \_ SETITEMTEXT**](lvm-setitemtext.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-356">For example, to change only the text of an item or subitem, use the [**LVM\_SETITEMTEXT**](lvm-setitemtext.md) message.</span></span>

<span data-ttu-id="5ed8e-357">Pour extraire des informations sur un élément de liste, utilisez le message [**LVM \_ GETITEM**](lvm-getitem.md) , en spécifiant l’adresse de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) à remplir.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-357">To retrieve information about a list-view item, use the [**LVM\_GETITEM**](lvm-getitem.md) message, specifying the address of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure to fill in.</span></span> <span data-ttu-id="5ed8e-358">Le membre de **masque** de cette structure spécifie les attributs d’élément à récupérer.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-358">The **mask** member of this structure specifies the item attributes to be retrieved.</span></span> <span data-ttu-id="5ed8e-359">Pour récupérer uniquement le texte d’un élément ou d’un sous-élément, utilisez le message [**LVM \_ GETITEMTEXT**](lvm-getitemtext.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-359">To retrieve only an item or subitem's text, use the [**LVM\_GETITEMTEXT**](lvm-getitemtext.md) message.</span></span>

<span data-ttu-id="5ed8e-360">Pour supprimer un élément de liste, utilisez le message [**LVM \_ DELETEITEM**](lvm-deleteitem.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-360">To delete a list-view item, use the [**LVM\_DELETEITEM**](lvm-deleteitem.md) message.</span></span> <span data-ttu-id="5ed8e-361">Vous pouvez supprimer tous les éléments d’un contrôle List-View en utilisant le message [**LVM \_ DELETEALLITEMS**](lvm-deleteallitems.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-361">You can delete all items in a list-view control by using the [**LVM\_DELETEALLITEMS**](lvm-deleteallitems.md) message.</span></span>

### <a name="list-view-item-states"></a><span data-ttu-id="5ed8e-362">États de l’élément List-View</span><span class="sxs-lookup"><span data-stu-id="5ed8e-362">List-View Item States</span></span>

<span data-ttu-id="5ed8e-363">L’état d’un élément est une valeur qui spécifie la disponibilité de l’élément, indique les actions de l’utilisateur ou reflète l’état de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-363">An item's state is a value that specifies the item's availability, indicates user actions, or otherwise reflects the item's status.</span></span> <span data-ttu-id="5ed8e-364">Un contrôle List-View modifie certains bits d’État, par exemple lorsque l’utilisateur sélectionne un élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-364">A list-view control changes some state bits, such as when the user selects an item.</span></span> <span data-ttu-id="5ed8e-365">Une application peut modifier d’autres bits d’État pour désactiver ou masquer l’élément ou pour spécifier une image de superposition ou une image d’État.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-365">An application might change other state bits to disable or hide the item or to specify an overlay image or state image.</span></span> <span data-ttu-id="5ed8e-366">Pour plus d’informations sur les images de superposition et les images d’État, consultez listes d’images [en mode liste](#list-view-image-lists).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-366">For more information about overlay images and state images, see [List-View Image Lists](#list-view-image-lists).</span></span>

<span data-ttu-id="5ed8e-367">L’état d’un élément est spécifié par le membre d' **État** de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-367">An item's state is specified by the **state** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="5ed8e-368">Lorsque vous spécifiez ou modifiez l’état d’un élément, le membre **stateMask** spécifie les bits d’État que vous devez modifier.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-368">When you specify or change an item's state, the **stateMask** member specifies which state bits you need to change.</span></span> <span data-ttu-id="5ed8e-369">Vous pouvez modifier l’état d’un élément à l’aide du message [**LVM \_ SETITEMSTATE**](lvm-setitemstate.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-369">You can change an item's state by using the [**LVM\_SETITEMSTATE**](lvm-setitemstate.md) message.</span></span> <span data-ttu-id="5ed8e-370">Vous pouvez spécifier l’état d’un élément lorsque vous le créez ou lorsque vous modifiez ses attributs à l’aide du message [**LVM \_ SETITEM**](lvm-setitem.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-370">You can specify an item's state when you create it or when you change its attributes by using the [**LVM\_SETITEM**](lvm-setitem.md) message.</span></span> <span data-ttu-id="5ed8e-371">Pour déterminer l’état actuel d’un élément, utilisez le message [**LVM \_ GETITEMSTATE**](lvm-getitemstate.md) ou [**LVM \_ GETITEM**](lvm-getitem.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-371">To determine an item's current state, use the [**LVM\_GETITEMSTATE**](lvm-getitemstate.md) or [**LVM\_GETITEM**](lvm-getitem.md) message.</span></span>

<span data-ttu-id="5ed8e-372">Pour définir l’image de superposition d’un élément, le membre **stateMask** de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) doit inclure la valeur [**\_ OVERLAYMASK Lvis**](list-view-item-states.md) et le membre d' **État** doit inclure l’index de base un de l’image de superposition décalée vers la gauche 8 bits à l’aide de la macro [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-372">To set an item's overlay image, the **stateMask** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure must include the [**LVIS\_OVERLAYMASK**](list-view-item-states.md) value, and the **state** member must include the one-based index of the overlay image shifted left 8 bits by using the [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) macro.</span></span> <span data-ttu-id="5ed8e-373">L’index peut être égal à zéro pour ne spécifier aucune image de superposition.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-373">The index can be zero to specify no overlay image.</span></span>

<span data-ttu-id="5ed8e-374">Pour définir l’image d’état d’un élément, le membre **stateMask** de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) doit inclure la valeur [**\_ STATEIMAGEMASK Lvis**](list-view-item-states.md) et le membre d' **État** doit inclure l’index de base un de l’image d’État décalée vers la gauche 12 bits à l’aide de la macro [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-374">To set an item's state image, the **stateMask** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure must include the [**LVIS\_STATEIMAGEMASK**](list-view-item-states.md) value, and the **state** member must include the one-based index of the state image shifted left 12 bits by using the [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) macro.</span></span> <span data-ttu-id="5ed8e-375">L’index peut être égal à zéro pour ne spécifier aucune image d’État.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-375">The index can be zero to specify no state image.</span></span>

### <a name="callback-items-and-the-callback-mask"></a><span data-ttu-id="5ed8e-376">Éléments de rappel et masque de rappel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-376">Callback Items and the Callback Mask</span></span>

<span data-ttu-id="5ed8e-377">Pour chacun de ses éléments, un contrôle List-View stocke généralement le texte de l’étiquette, l’index de la liste d’images des icônes de l’élément et un jeu d’indicateurs binaires pour l’état de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-377">For each of its items, a list-view control typically stores the label text, the image list index of the item's icons, and a set of bit flags for the item's state.</span></span> <span data-ttu-id="5ed8e-378">Vous pouvez définir des éléments de rappel ou modifier le masque de rappel du contrôle pour indiquer que l’application, plutôt que le contrôle, stocke une partie ou la totalité de ces informations.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-378">You can define callback items or change the control's callback mask to indicate that the application, rather than the control, stores some or all of this information.</span></span> <span data-ttu-id="5ed8e-379">Vous souhaiterez peut-être utiliser des rappels si votre application stocke certaines de ces informations.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-379">You might want to use callbacks if your application stores some of this information.</span></span>

<span data-ttu-id="5ed8e-380">Un *élément de rappel* dans un contrôle List-View est un élément pour lequel l’application stocke le texte ou l’index de l’icône, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-380">A *callback item* in a list-view control is an item for which the application stores the text or icon index, or both.</span></span> <span data-ttu-id="5ed8e-381">Vous pouvez définir des éléments de rappel lorsque vous envoyez le message du [**LVM \_ INSERTITEM**](lvm-insertitem.md) pour ajouter un élément au contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-381">You can define callback items when you send the [**LVM\_INSERTITEM**](lvm-insertitem.md) message to add an item to the list-view control.</span></span> <span data-ttu-id="5ed8e-382">Si l’application stocke le texte pour l’élément ou le sous-élément, définissez le membre **pszText** de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) de l’élément sur **LPSTR \_ TEXTCALLBACK**.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-382">If the application stores the text for the item or subitem, set the **pszText** member of the item's [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure to **LPSTR\_TEXTCALLBACK**.</span></span> <span data-ttu-id="5ed8e-383">Si l’application stocke l’index d’icône d’un élément, définissez le membre **IImage** de la structure **LVITEM** de l’élément sur **I \_ IMAGECALLBACK**.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-383">If the application stores the icon index for an item, set the **iImage** member of the item's **LVITEM** structure to **I\_IMAGECALLBACK**.</span></span>

<span data-ttu-id="5ed8e-384">Le *masque de rappel* d’un contrôle List-View est un jeu d’indicateurs binaires qui spécifient les États de l’élément pour lesquels l’application, plutôt que le contrôle, stocke les données actuelles.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-384">The *callback mask* of a list-view control is a set of bit flags that specify the item states for which the application, rather than the control, stores the current data.</span></span> <span data-ttu-id="5ed8e-385">Le masque de rappel s’applique à tous les éléments du contrôle, contrairement à la désignation de l’élément de rappel, qui s’applique à un élément spécifique.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-385">The callback mask applies to all of the control's items, unlike the callback item designation, which applies to a specific item.</span></span> <span data-ttu-id="5ed8e-386">Le masque de rappel a la valeur zéro par défaut, ce qui signifie que le contrôle List-View stocke toutes les informations sur l’état de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-386">The callback mask is zero by default, meaning that the list-view control stores all item state information.</span></span> <span data-ttu-id="5ed8e-387">Après avoir créé un contrôle List-View et initialisé ses éléments, vous pouvez envoyer le [**message \_ SETCALLBACKMASK LVM**](lvm-setcallbackmask.md) pour modifier le masque de rappel.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-387">After creating a list-view control and initializing its items, you can send the [**LVM\_SETCALLBACKMASK**](lvm-setcallbackmask.md) message to change the callback mask.</span></span> <span data-ttu-id="5ed8e-388">Pour récupérer le masque de rappel actuel, envoyez le message [**\_ GETCALLBACKMASK LVM**](lvm-getcallbackmask.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-388">To retrieve the current callback mask, send the [**LVM\_GETCALLBACKMASK**](lvm-getcallbackmask.md) message.</span></span>

<span data-ttu-id="5ed8e-389">Quand un contrôle List-View doit afficher ou trier un élément de vue liste pour lequel l’application stocke des informations de rappel, le contrôle envoie le code de notification [LVN \_ GETDISPINFO](lvn-getdispinfo.md) à la fenêtre parente du contrôle.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-389">When a list-view control must display or sort a list-view item for which the application stores callback information, the control sends the [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification code to the control's parent window.</span></span> <span data-ttu-id="5ed8e-390">Ce message spécifie une structure [**NMLVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) qui contient le type d’informations requis et identifie l’élément ou le sous-élément à récupérer.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-390">This message specifies an [**NMLVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) structure that contains the type of information required and identifies the item or subitem to retrieve.</span></span> <span data-ttu-id="5ed8e-391">La fenêtre parente doit traiter LVN \_ GETDISPINFO pour fournir les données demandées.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-391">The parent window must process LVN\_GETDISPINFO to provide the requested data.</span></span>

<span data-ttu-id="5ed8e-392">Si le contrôle d’affichage de liste détecte une modification dans les informations de rappel d’un élément, telles qu’une modification du texte, de l’icône ou des informations d’État, le contrôle envoie un code de notification [LVN \_ SETDISPINFO](lvn-setdispinfo.md) pour vous avertir de la modification.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-392">If the list-view control detects a change in an item's callback information, such as a change in the text, icon, or state information, the control sends an [LVN\_SETDISPINFO](lvn-setdispinfo.md) notification code to notify you of the change.</span></span>

<span data-ttu-id="5ed8e-393">Si vous modifiez les attributs ou les bits d’état d’un élément de rappel, vous utilisez le message de [**\_ mise à jour LVM**](lvm-update.md) pour forcer le contrôle à repeindre l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-393">If you change a callback item's attributes or state bits, you use the [**LVM\_UPDATE**](lvm-update.md) message to force the control to repaint the item.</span></span> <span data-ttu-id="5ed8e-394">Ce message fait également en sorte que le contrôle réorganise ses éléments s’il a le style [**\_ AutoArrange LVS**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-394">This message also causes the control to arrange its items if it has the [**LVS\_AUTOARRANGE**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="5ed8e-395">Vous pouvez utiliser le message [**LVM \_ REDRAWITEMS**](lvm-redrawitems.md) pour redessiner une plage d’éléments en invalidant les parties correspondantes de la zone cliente du contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-395">You can use the [**LVM\_REDRAWITEMS**](lvm-redrawitems.md) message to redraw a range of items by invalidating the corresponding portions of the list-view control's client area.</span></span>

<span data-ttu-id="5ed8e-396">En utilisant efficacement les éléments de rappel et le masque de rappel, vous pouvez vous assurer que chaque attribut d’élément est conservé dans un seul emplacement.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-396">By effectively using callback items and the callback mask, you can ensure that each item attribute is maintained in only one place.</span></span> <span data-ttu-id="5ed8e-397">Cela peut simplifier votre application, mais le seul espace enregistré est la mémoire qui serait autrement nécessaire pour stocker des étiquettes d’élément et du texte de sous-élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-397">Doing this can simplify your application, but the only space saved is the memory that would otherwise be required to store item labels and subitem text.</span></span>

### <a name="list-view-item-position"></a><span data-ttu-id="5ed8e-398">Position de l’élément de List-View</span><span class="sxs-lookup"><span data-stu-id="5ed8e-398">List-View Item Position</span></span>

<span data-ttu-id="5ed8e-399">Chaque élément de l’affichage de liste a une position et une taille que vous pouvez récupérer et définir à l’aide de messages.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-399">Every list-view item has a position and size, which you can retrieve and set using messages.</span></span> <span data-ttu-id="5ed8e-400">Vous pouvez également déterminer l’élément, le cas échéant, à une position spécifiée.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-400">You can also determine which item, if any, is at a specified position.</span></span> <span data-ttu-id="5ed8e-401">La position des éléments de mode liste est spécifiée dans les coordonnées de la *vue*, qui correspondent aux coordonnées clientes qui sont décalées par la position de défilement.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-401">The position of list-view items is specified in *view coordinates*, which are client coordinates offset by the scroll position.</span></span>

<span data-ttu-id="5ed8e-402">Pour récupérer et définir la position d’un élément, utilisez les messages [**LVM \_ GETITEMPOSITION**](lvm-getitemposition.md) et [**LVM \_ SETITEMPOSITION**](lvm-setitemposition.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-402">To retrieve and set an item's position, use the [**LVM\_GETITEMPOSITION**](lvm-getitemposition.md) and [**LVM\_SETITEMPOSITION**](lvm-setitemposition.md) messages.</span></span> <span data-ttu-id="5ed8e-403">**LVM \_ GETITEMPOSITION** fonctionne pour tous les affichages, mais **LVM \_ SETITEMPOSITION** fonctionne uniquement pour les affichages icône et petite icône.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-403">**LVM\_GETITEMPOSITION** works for all views, but **LVM\_SETITEMPOSITION** works only for icon and small icon views.</span></span>

<span data-ttu-id="5ed8e-404">Vous pouvez déterminer l’élément, le cas échéant, situé à un emplacement particulier à l' [**aide \_ du message lvm lvm**](lvm-hittest.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-404">You can determine which item, if any, is at a particular location by using the [**LVM\_HITTEST**](lvm-hittest.md) message.</span></span>

<span data-ttu-id="5ed8e-405">Pour récupérer le rectangle englobant d’un élément de liste ou uniquement pour son icône ou son étiquette, utilisez le message [**LVM \_ GETITEMRECT**](lvm-getitemrect.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-405">To retrieve the bounding rectangle for a list item or only for its icon or label, use the [**LVM\_GETITEMRECT**](lvm-getitemrect.md) message.</span></span>

### <a name="arranging-sorting-and-finding-items"></a><span data-ttu-id="5ed8e-406">Organisation, tri et recherche d’éléments</span><span class="sxs-lookup"><span data-stu-id="5ed8e-406">Arranging, Sorting, and Finding Items</span></span>

<span data-ttu-id="5ed8e-407">Vous pouvez utiliser des messages d’affichage de liste pour organiser et trier des éléments et pour rechercher des éléments en fonction de leurs attributs ou positions.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-407">You can use list-view messages to arrange and sort items and to find items based on their attributes or positions.</span></span> <span data-ttu-id="5ed8e-408">L’organisation repositionne les éléments pour les aligner sur une grille, mais les index des éléments ne changent pas.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-408">Arranging repositions items to align on a grid, but the indexes of the items do not change.</span></span> <span data-ttu-id="5ed8e-409">Le tri modifie la séquence d’éléments (et leurs index correspondants), puis les repositionne en conséquence.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-409">Sorting changes the sequence of items (and their corresponding indexes) and then repositions them accordingly.</span></span> <span data-ttu-id="5ed8e-410">Vous pouvez organiser les éléments uniquement dans les affichages icône et petite icône, mais vous pouvez trier les éléments dans n’importe quelle vue.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-410">You can arrange items only in icon and small icon views, but you can sort items in any view.</span></span> <span data-ttu-id="5ed8e-411">Pour rechercher des éléments, vous envoyez des messages de vue de liste qui spécifient un emplacement ou une propriété de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-411">To find items, you send list-view messages that specify an item location or property.</span></span>

<span data-ttu-id="5ed8e-412">Pour réorganiser les éléments, utilisez le message de [**\_ réorganisation LVM**](lvm-arrange.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-412">To arrange items, use the [**LVM\_ARRANGE**](lvm-arrange.md) message.</span></span> <span data-ttu-id="5ed8e-413">Vous pouvez vous assurer que les éléments sont disposés à tout moment en spécifiant le style de la fenêtre de [**\_ réorganisation LVS**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-413">You can ensure that items are arranged at all times by specifying the [**LVS\_AUTOARRANGE**](list-view-window-styles.md) window style.</span></span>

<span data-ttu-id="5ed8e-414">Pour trier les éléments, utilisez le message [**LVM \_ SORTITEMS**](lvm-sortitems.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-414">To sort items, use the [**LVM\_SORTITEMS**](lvm-sortitems.md) message.</span></span> <span data-ttu-id="5ed8e-415">Quand vous triez à l’aide de ce message, vous spécifiez une fonction de rappel définie par l’application appelée par le contrôle List-View pour comparer l’ordre relatif de deux éléments quelconques.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-415">When you sort using this message, you specify an application-defined callback function that the list-view control calls to compare the relative order of any two items.</span></span> <span data-ttu-id="5ed8e-416">Le contrôle passe à la fonction de comparaison les données d’élément associées à chacun des deux éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-416">The control passes to the comparison function the item data associated with each of the two items.</span></span> <span data-ttu-id="5ed8e-417">Les données de l’élément sont la valeur spécifiée dans le membre **lParam** de la structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) de l’élément lorsqu’il a été inséré dans la liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-417">The item data is the value that was specified in the **lParam** member of the item's [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure when it was inserted into the list.</span></span> <span data-ttu-id="5ed8e-418">En spécifiant les données d’élément appropriées et en fournissant une fonction de comparaison appropriée, vous pouvez trier les éléments en fonction de leur étiquette, de n’importe quel sous-élément ou de toute autre propriété.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-418">By specifying the appropriate item data and supplying an appropriate comparison function, you can sort items by their label, by any subitem, or by any other property.</span></span> <span data-ttu-id="5ed8e-419">Notez que le tri des éléments ne réorganise pas les sous-éléments correspondants.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-419">Note that sorting items does not reorder the corresponding subitems.</span></span> <span data-ttu-id="5ed8e-420">Lorsque les éléments sont réorganisés, leurs sous-éléments correspondants sont transportés avec eux. autrement dit, les lignes entières sont conservées ensemble.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-420">When items are reordered, their corresponding subitems are carried with them; that is, whole rows are kept together.</span></span> <span data-ttu-id="5ed8e-421">Pour trier les colonnes séparément les unes des autres, en détachant les sous-éléments de leurs éléments, vous devez régénérer les colonnes après le tri à l’aide de [**LVM \_ SETITEM**](lvm-setitem.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-421">To order the columns separately from one another, detaching the subitems from their items, you must regenerate the columns after sorting using [**LVM\_SETITEM**](lvm-setitem.md).</span></span>

<span data-ttu-id="5ed8e-422">Vous pouvez vous assurer qu’un contrôle List-View est toujours trié en spécifiant le style de fenêtre [**LVS \_ SORTASCENDING**](list-view-window-styles.md) ou [**LVS \_ SORTDESCENDING**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-422">You can ensure that a list-view control is always sorted by specifying the [**LVS\_SORTASCENDING**](list-view-window-styles.md) or [**LVS\_SORTDESCENDING**](list-view-window-styles.md) window style.</span></span> <span data-ttu-id="5ed8e-423">Les contrôles avec ces styles utilisent le texte d’étiquette des éléments pour les trier par ordre croissant ou décroissant.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-423">Controls with these styles use the label text of the items to sort them in ascending or descending order.</span></span> <span data-ttu-id="5ed8e-424">Vous ne pouvez pas fournir de fonction de comparaison lorsque vous utilisez ces styles de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-424">You cannot supply a comparison function when using these window styles.</span></span> <span data-ttu-id="5ed8e-425">Si un contrôle List-View possède l’un de ces styles, un message d' [**\_ INSERTITEM LVM**](lvm-insertitem.md) échoue si vous essayez d’insérer un élément qui a **LPSTR \_ TEXTCALLBACK** comme membre **pszText** de sa structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-425">If a list-view control has either of these styles, an [**LVM\_INSERTITEM**](lvm-insertitem.md) message will fail if you try to insert an item that has **LPSTR\_TEXTCALLBACK** as the **pszText** member of its [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span>

<span data-ttu-id="5ed8e-426">Vous pouvez rechercher un élément de liste avec des propriétés spécifiques à l’aide du message [**LVM \_ FINDITEM**](lvm-finditem.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-426">You can find a list-view item with specific properties by using the [**LVM\_FINDITEM**](lvm-finditem.md) message.</span></span> <span data-ttu-id="5ed8e-427">Vous pouvez trouver un élément de vue liste qui est dans un état spécifié et qui a une relation spécifiée avec un élément donné à l’aide du message [**\_ GETNEXTITEM LVM**](lvm-getnextitem.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-427">You can find a list-view item that is in a specified state and has a specified relationship to a given item by using the [**LVM\_GETNEXTITEM**](lvm-getnextitem.md) message.</span></span> <span data-ttu-id="5ed8e-428">Par exemple, vous pouvez récupérer l’élément sélectionné suivant à droite d’un élément spécifié.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-428">For example, you can retrieve the next selected item to the right of a specified item.</span></span>

## <a name="list-view-columns"></a><span data-ttu-id="5ed8e-429">List-View les colonnes</span><span class="sxs-lookup"><span data-stu-id="5ed8e-429">List-View Columns</span></span>

<span data-ttu-id="5ed8e-430">Les colonnes contrôlent la façon dont les éléments et leurs sous-éléments sont affichés dans la vue rapport.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-430">Columns control the way items and their subitems are displayed in report view.</span></span> <span data-ttu-id="5ed8e-431">Chaque colonne a un titre et une largeur et est associée à un sous-élément spécifique ; le sous-élément zéro est l’icône et l’étiquette de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-431">Each column has a title and width and is associated with a specific subitem; subitem zero is the item's icon and label.</span></span> <span data-ttu-id="5ed8e-432">Les attributs d’une colonne sont définis par une structure [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-432">The attributes of a column are defined by an [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) structure.</span></span>

<span data-ttu-id="5ed8e-433">Pour ajouter une colonne à un contrôle List View, utilisez le message [**LVM \_ INSERTCOLUMN**](lvm-insertcolumn.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-433">To add a column to a list-view control, use the [**LVM\_INSERTCOLUMN**](lvm-insertcolumn.md) message.</span></span> <span data-ttu-id="5ed8e-434">Pour supprimer une colonne, utilisez le message [**LVM \_ DELETECOLUMN**](lvm-deletecolumn.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-434">To delete a column, use the [**LVM\_DELETECOLUMN**](lvm-deletecolumn.md) message.</span></span>

> [!Note]  
> <span data-ttu-id="5ed8e-435">La suppression de la colonne zéro d’un contrôle List-View est uniquement prise en charge dans ComCtl32.dll version 6 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-435">Deleting column zero of a list-view control is supported only in ComCtl32.dll version 6 and later.</span></span> <span data-ttu-id="5ed8e-436">La version 5 prend également en charge la suppression de la colonne zéro, mais uniquement après avoir utilisé [**CCM \_ SETVERSION**](ccm-setversion.md) pour définir la version sur 5 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-436">Version 5 also supports deleting column zero, but only after you use [**CCM\_SETVERSION**](ccm-setversion.md) to set the version to 5 or later.</span></span> <span data-ttu-id="5ed8e-437">Les versions antérieures à la version 5 ne prennent pas en charge la suppression de la colonne zéro.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-437">Versions prior to version 5 do not support deleting column zero.</span></span>

 

<span data-ttu-id="5ed8e-438">Vous pouvez récupérer et modifier les propriétés d’une colonne existante à l’aide des messages [**LVM \_ GETCOLUMN**](lvm-getcolumn.md) et [**LVM \_ SETCOLUMN**](lvm-setcolumn.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-438">You can retrieve and change the properties of an existing column by using the [**LVM\_GETCOLUMN**](lvm-getcolumn.md) and [**LVM\_SETCOLUMN**](lvm-setcolumn.md) messages.</span></span> <span data-ttu-id="5ed8e-439">Pour récupérer ou modifier la largeur d’une colonne, utilisez les messages [**LVM \_ GETCOLUMNWIDTH**](lvm-getcolumnwidth.md) et [**LVM \_ SETCOLUMNWIDTH**](lvm-setcolumnwidth.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-439">To retrieve or change a column's width, use the [**LVM\_GETCOLUMNWIDTH**](lvm-getcolumnwidth.md) and [**LVM\_SETCOLUMNWIDTH**](lvm-setcolumnwidth.md) messages.</span></span>

<span data-ttu-id="5ed8e-440">À moins que le style de fenêtre [**LVS \_ NOCOLUMNHEADER**](list-view-window-styles.md) soit spécifié, les en-têtes de colonne s’affichent dans la vue rapport.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-440">Unless the [**LVS\_NOCOLUMNHEADER**](list-view-window-styles.md) window style is specified, column headers appear in report view.</span></span> <span data-ttu-id="5ed8e-441">L’utilisateur peut cliquer sur un en-tête de colonne, provoquant l’envoi d’un code de notification [**LVN \_ COLUMNCLICK**](lvn-columnclick.md) à la fenêtre parente.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-441">The user can click a column header, causing an [**LVN\_COLUMNCLICK**](lvn-columnclick.md) notification code to be sent to the parent window.</span></span> <span data-ttu-id="5ed8e-442">En règle générale, la fenêtre parente trie le contrôle d’affichage de liste selon la colonne spécifiée lorsque ce clic se produit.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-442">Typically, the parent window sorts the list-view control by the specified column when this clicking occurs.</span></span> <span data-ttu-id="5ed8e-443">L’utilisateur peut également faire glisser les repères de colonne entre les en-têtes pour dimensionner les colonnes.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-443">The user can also drag the column guides between the headers to size the columns.</span></span>

<span data-ttu-id="5ed8e-444">Les contrôles List-View peuvent afficher des images en regard des titres des colonnes.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-444">List-view controls can display images next to column titles.</span></span> <span data-ttu-id="5ed8e-445">Pour implémenter cette fonctionnalité, spécifiez la valeur de l' **\_ image LVCF** et assignez l’index de l’image au membre **IImage** dans la structure [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-445">To implement this feature, specify the **LVCF\_IMAGE** value and assign the index of the image to the **iImage** member in the [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) structure.</span></span>

<span data-ttu-id="5ed8e-446">Les contrôles List-View peuvent définir l’ordre dans lequel les colonnes sont affichées.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-446">List-view controls can set the order in which columns are displayed.</span></span> <span data-ttu-id="5ed8e-447">Pour implémenter cette fonctionnalité, spécifiez la valeur d' **\_ ordre LVCF** et affectez l’ordre des colonnes au membre **IOrder** dans la structure [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-447">To implement this feature, specify the **LVCF\_ORDER** value and assign the column order to the **iOrder** member in the [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) structure.</span></span> <span data-ttu-id="5ed8e-448">L’ordre des colonnes est de base zéro et est dans l’ordre de gauche à droite.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-448">The column order is zero-based and is in left-to-right order.</span></span> <span data-ttu-id="5ed8e-449">Par exemple, la valeur zéro indique la colonne la plus à gauche.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-449">For example, zero indicates the leftmost column.</span></span>

## <a name="list-view-scroll-position"></a><span data-ttu-id="5ed8e-450">Position de défilement List-View</span><span class="sxs-lookup"><span data-stu-id="5ed8e-450">List-View Scroll Position</span></span>

<span data-ttu-id="5ed8e-451">À moins que le style de fenêtre [**LVS \_ NoScroll**](list-view-window-styles.md) ne soit spécifié, un contrôle List-View peut faire l’objet d’un défilement pour afficher plus d’éléments que la zone cliente du contrôle ne peut en contenir.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-451">Unless the [**LVS\_NOSCROLL**](list-view-window-styles.md) window style is specified, a list-view control can be scrolled to show more items than can fit in the client area of the control.</span></span> <span data-ttu-id="5ed8e-452">Vous pouvez récupérer la position de défilement d’un contrôle List-View et les informations connexes, faire défiler un contrôle d’affichage de liste d’une valeur spécifiée, ou faire défiler un contrôle List View pour qu’un élément de liste spécifié soit visible.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-452">You can retrieve a list-view control's scroll position and related information, scroll a list-view control by a specified amount, or scroll a list-view control so that a specified list item is visible.</span></span>

<span data-ttu-id="5ed8e-453">En mode icône ou petite icône, la position de défilement actuelle est définie par l' *origine* de la vue.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-453">In icon view or small icon view, the current scroll position is defined by the *view origin*.</span></span> <span data-ttu-id="5ed8e-454">L’origine de la vue est l’ensemble de coordonnées, par rapport à la zone visible du contrôle List-View, qui correspond aux coordonnées de la vue (0,0).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-454">The view origin is the set of coordinates, relative to the visible area of the list-view control, that correspond to the view coordinates (0, 0).</span></span> <span data-ttu-id="5ed8e-455">Pour récupérer l’origine de la vue actuelle, utilisez le message [**LVM \_ GETORIGIN**](lvm-getorigin.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-455">To retrieve the current view origin, use the [**LVM\_GETORIGIN**](lvm-getorigin.md) message.</span></span> <span data-ttu-id="5ed8e-456">Ce message doit être utilisé uniquement en mode icône ou petite icône ; elle retourne une erreur dans la vue liste ou rapport.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-456">This message should be used only in icon or small icon view; it returns an error in list or report view.</span></span>

<span data-ttu-id="5ed8e-457">Dans la vue liste ou rapport, la position de défilement actuelle est définie par l' *index de niveau supérieur*.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-457">In list or report view, the current scroll position is defined by the *top index*.</span></span> <span data-ttu-id="5ed8e-458">L’index supérieur est l’index du premier élément visible dans le contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-458">The top index is the index of the first visible item in the list-view control.</span></span> <span data-ttu-id="5ed8e-459">Pour récupérer l’index actuel, utilisez le message [**LVM \_ GETTOPINDEX**](lvm-gettopindex.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-459">To retrieve the current top index, use the [**LVM\_GETTOPINDEX**](lvm-gettopindex.md) message.</span></span> <span data-ttu-id="5ed8e-460">Ce message retourne un résultat valide uniquement dans une vue de liste ou de rapport ; elle retourne zéro en mode icône ou petite icône.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-460">This message returns a valid result only in list or report view; it returns zero in icon or small icon view.</span></span>

<span data-ttu-id="5ed8e-461">Vous pouvez utiliser le message [**LVM \_ GETVIEWRECT**](lvm-getviewrect.md) pour récupérer le rectangle englobant de tous les éléments d’un contrôle List-View, par rapport à la zone visible du contrôle.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-461">You can use the [**LVM\_GETVIEWRECT**](lvm-getviewrect.md) message to retrieve the bounding rectangle of all items in a list-view control, relative to the visible area of the control.</span></span>

<span data-ttu-id="5ed8e-462">Le [**message \_ GETCOUNTPERPAGE LVM**](lvm-getcountperpage.md) retourne le nombre d’éléments qui tiennent dans une page du contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-462">The [**LVM\_GETCOUNTPERPAGE**](lvm-getcountperpage.md) message returns the number of items that fit in one page of the list-view control.</span></span> <span data-ttu-id="5ed8e-463">Ce message retourne un résultat valide uniquement dans les vues de liste et de rapport ; dans les affichages icône et petite icône, retourne le nombre total d’éléments.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-463">This message returns a valid result only in list and report views; in icon and small icon views, it returns the total number of items.</span></span>

<span data-ttu-id="5ed8e-464">Pour faire défiler un contrôle d’affichage de liste d’une quantité spécifique, utilisez le message de [**\_ défilement LVM**](lvm-scroll.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-464">To scroll a list-view control by a specific amount, use the [**LVM\_SCROLL**](lvm-scroll.md) message.</span></span> <span data-ttu-id="5ed8e-465">À l’aide du message [**\_ ENSUREVISIBLE LVM**](lvm-ensurevisible.md) , vous pouvez faire défiler le contrôle List-View, si nécessaire, pour vous assurer qu’un élément spécifié est visible.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-465">Using the [**LVM\_ENSUREVISIBLE**](lvm-ensurevisible.md) message, you can scroll the list-view control, if necessary, to ensure that a specified item is visible.</span></span>

## <a name="list-view-label-editing"></a><span data-ttu-id="5ed8e-466">Modification des étiquettes List-View</span><span class="sxs-lookup"><span data-stu-id="5ed8e-466">List-View Label Editing</span></span>

<span data-ttu-id="5ed8e-467">Un contrôle List-View avec le style de fenêtre [**LVS \_ EDITLABELS**](list-view-window-styles.md) permet à un utilisateur de modifier des étiquettes d’élément sur place.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-467">A list-view control that has the [**LVS\_EDITLABELS**](list-view-window-styles.md) window style enables a user to edit item labels in place.</span></span> <span data-ttu-id="5ed8e-468">L’utilisateur commence la modification en cliquant sur l’étiquette d’un élément qui a le focus.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-468">The user begins editing by clicking the label of an item that has the focus.</span></span> <span data-ttu-id="5ed8e-469">Une application peut également commencer la modification automatiquement à l’aide du message [**LVM \_ EDITLABEL**](lvm-editlabel.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-469">Alternatively, an application can begin editing automatically by using the [**LVM\_EDITLABEL**](lvm-editlabel.md) message.</span></span> <span data-ttu-id="5ed8e-470">Le contrôle List-View notifie la fenêtre parente lorsque la modification commence et lorsqu’elle est annulée ou terminée.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-470">The list-view control notifies the parent window when editing begins and when it is canceled or completed.</span></span> <span data-ttu-id="5ed8e-471">Lorsque la modification est terminée, la fenêtre parente est chargée de mettre à jour l’étiquette de l’élément, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-471">When editing is completed, the parent window is responsible for updating the item's label, if appropriate.</span></span>

<span data-ttu-id="5ed8e-472">Lorsque la modification d’étiquette commence, un [contrôle d’édition](edit-controls.md) est créé, positionné et initialisé.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-472">When label editing begins, an [edit control](edit-controls.md) is created, positioned, and initialized.</span></span> <span data-ttu-id="5ed8e-473">Avant qu’il ne soit affiché, le contrôle List-View envoie sa fenêtre parente à un code de notification [LVN \_ BEGINLABELEDIT](lvn-beginlabeledit.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-473">Before it is displayed, the list-view control sends its parent window an [LVN\_BEGINLABELEDIT](lvn-beginlabeledit.md) notification code.</span></span> <span data-ttu-id="5ed8e-474">Si vous avez besoin de modifier le processus de modification des étiquettes, vous pouvez implémenter un gestionnaire pour cette notification.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-474">If you need to modify the label editing process, you can implement a handler for this notification.</span></span>

<span data-ttu-id="5ed8e-475">Une utilisation pour un gestionnaire de notification [LVN \_ BEGINLABELEDIT](lvn-beginlabeledit.md) consiste à contrôler les étiquettes que l’utilisateur peut modifier.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-475">One use for an [LVN\_BEGINLABELEDIT](lvn-beginlabeledit.md) notification handler is to control which labels the user can edit.</span></span> <span data-ttu-id="5ed8e-476">Pour empêcher la modification des étiquettes, retournez une valeur différente de zéro.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-476">To prevent label editing, return a nonzero value.</span></span> <span data-ttu-id="5ed8e-477">Pour personnaliser la modification des étiquettes, vous devez faire en sorte que le gestionnaire de notification récupère un handle pour le contrôle d’édition en envoyant un message [**\_ GETEDITCONTROL LVM**](lvm-geteditcontrol.md) au contrôle List-View.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-477">To customize label editing, have the notification handler retrieve a handle to the edit control by sending an [**LVM\_GETEDITCONTROL**](lvm-geteditcontrol.md) message to the list-view control.</span></span> <span data-ttu-id="5ed8e-478">Une fois que vous disposez de ce handle, vous pouvez personnaliser le contrôle d’édition en envoyant les messages EM xxx habituels \_ .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-478">Once you have that handle, you can customize the edit control by sending the usual EM\_XXX messages.</span></span> <span data-ttu-id="5ed8e-479">Par exemple, pour limiter la quantité de texte qu’un utilisateur peut entrer, envoyez le contrôle d’édition à un message [**em \_ LIMITTEXT**](em-limittext.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-479">For instance, to limit the amount of text a user can enter, send the edit control an [**EM\_LIMITTEXT**](em-limittext.md) message.</span></span> <span data-ttu-id="5ed8e-480">Vous pouvez modifier le texte par défaut du contrôle d’édition avec [**SetWindowText**](/windows/desktop/api/winuser/nf-winuser-setwindowtexta).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-480">You can change the edit control's default text with [**SetWindowText**](/windows/desktop/api/winuser/nf-winuser-setwindowtexta).</span></span> <span data-ttu-id="5ed8e-481">Vous pouvez même sous-définir le contrôle d’édition pour intercepter et ignorer les caractères non valides.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-481">You can even subclass the edit control to intercept and discard invalid characters.</span></span>

<span data-ttu-id="5ed8e-482">Lorsque la modification d’étiquette est annulée ou terminée, un contrôle de liste d’affichage envoie sa fenêtre parente à un code de notification [LVN \_ ENDLABELEDIT](lvn-endlabeledit.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-482">When label editing is canceled or completed, a list-view control sends its parent window an [LVN\_ENDLABELEDIT](lvn-endlabeledit.md) notification code.</span></span> <span data-ttu-id="5ed8e-483">Le paramètre *lParam* est l’adresse d’une structure [**NMLVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-483">The *lParam* parameter is the address of an [**NMLVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) structure.</span></span> <span data-ttu-id="5ed8e-484">Le membre d' **élément** de cette structure est une structure [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) dont le membre **iItem** identifie l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-484">The **item** member of this structure is an [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure whose **iItem** member identifies the item.</span></span> <span data-ttu-id="5ed8e-485">Si la modification est annulée, le membre **pszText** de la structure **LVITEM** est **null**; Sinon, **pszText** est l’adresse du texte modifié.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-485">If editing is canceled, the **pszText** member of the **LVITEM** structure is **NULL**; otherwise, **pszText** is the address of the edited text.</span></span> <span data-ttu-id="5ed8e-486">La fenêtre parente est responsable de la mise à jour de l’étiquette de l’élément si elle souhaite conserver la nouvelle étiquette.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-486">The parent window is responsible for updating the item's label if it wants to keep the new label.</span></span>

## <a name="list-view-colors"></a><span data-ttu-id="5ed8e-487">List-View les couleurs</span><span class="sxs-lookup"><span data-stu-id="5ed8e-487">List-View Colors</span></span>

<span data-ttu-id="5ed8e-488">Une application peut récupérer et définir trois couleurs pour un contrôle d’affichage de liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-488">An application can retrieve and set three colors for a list-view control.</span></span>



| <span data-ttu-id="5ed8e-489">Color</span><span class="sxs-lookup"><span data-stu-id="5ed8e-489">Color</span></span>                   | <span data-ttu-id="5ed8e-490">Messages utilisés pour récupérer et définir des couleurs</span><span class="sxs-lookup"><span data-stu-id="5ed8e-490">Messages used to retrieve and set colors</span></span>                                                             |
|-------------------------|------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5ed8e-491">Couleur du texte</span><span class="sxs-lookup"><span data-stu-id="5ed8e-491">Text color</span></span>              | <span data-ttu-id="5ed8e-492">[**LVM \_ GETTEXTCOLOR**](lvm-gettextcolor.md), [ **LVM \_ SETTEXTCOLOR**](lvm-settextcolor.md)</span><span class="sxs-lookup"><span data-stu-id="5ed8e-492">[**LVM\_GETTEXTCOLOR**](lvm-gettextcolor.md), [**LVM\_SETTEXTCOLOR**](lvm-settextcolor.md)</span></span>         |
| <span data-ttu-id="5ed8e-493">Couleur d’arrière-plan du texte</span><span class="sxs-lookup"><span data-stu-id="5ed8e-493">Text background color</span></span>   | <span data-ttu-id="5ed8e-494">[**LVM \_ GETTEXTBKCOLOR**](lvm-gettextbkcolor.md), [ **LVM \_ SETTEXTBKCOLOR**](lvm-settextbkcolor.md)</span><span class="sxs-lookup"><span data-stu-id="5ed8e-494">[**LVM\_GETTEXTBKCOLOR**](lvm-gettextbkcolor.md), [**LVM\_SETTEXTBKCOLOR**](lvm-settextbkcolor.md)</span></span> |
| <span data-ttu-id="5ed8e-495">Couleur d’arrière-plan de la fenêtre</span><span class="sxs-lookup"><span data-stu-id="5ed8e-495">Window background color</span></span> | <span data-ttu-id="5ed8e-496">[**LVM \_ GETBKCOLOR**](lvm-getbkcolor.md), [ **LVM \_ SETBKCOLOR**](lvm-setbkcolor.md)</span><span class="sxs-lookup"><span data-stu-id="5ed8e-496">[**LVM\_GETBKCOLOR**](lvm-getbkcolor.md), [**LVM\_SETBKCOLOR**](lvm-setbkcolor.md)</span></span>                 |



 

<span data-ttu-id="5ed8e-497">Pour personnaliser l’apparence d’un contrôle List-View de manière plus significative, utilisez [ \_ CUSTOMDRAW nm (mode liste)](nm-customdraw-list-view.md) ou utilisez des styles visuels (consultez [styles](themes-overview.md) visuels et [activation des styles visuels](cookbook-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-497">To customize the appearance of a list-view control more significantly, use [NM\_CUSTOMDRAW (list view)](nm-customdraw-list-view.md) or use visual styles (see [Visual Styles](themes-overview.md) and [Enabling Visual Styles](cookbook-overview.md)).</span></span>

## <a name="arranging-list-items-by-group"></a><span data-ttu-id="5ed8e-498">Organisation des éléments de liste par groupe</span><span class="sxs-lookup"><span data-stu-id="5ed8e-498">Arranging List Items by Group</span></span>

<span data-ttu-id="5ed8e-499">Les fonctionnalités de regroupement du contrôle List-View vous permettent de regrouper visuellement des ensembles d’éléments liés de manière logique.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-499">The grouping features of the list-view control enable you to visually group logically related sets of items.</span></span> <span data-ttu-id="5ed8e-500">Les groupes peuvent être créés en fonction des propriétés, des attributs ou d’autres caractéristiques de l’élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-500">Groups can be created based on item properties, attributes, or other characteristics.</span></span> <span data-ttu-id="5ed8e-501">Ces groupes sont généralement séparés sur l’écran par un en-tête horizontal qui contient le nom du groupe.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-501">These groups are typically separated on the screen by a horizontal header that contains the name of the group.</span></span> <span data-ttu-id="5ed8e-502">La capture d’écran suivante montre des éléments groupés.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-502">The following screen shot shows grouped items.</span></span>

![capture d’écran d’un contrôle List-View, avec des chiens dans un groupe et des chats dans un autre groupe](images/lv-groups.png)

<span data-ttu-id="5ed8e-504">Vous utilisez la structure [**LVGROUP**](/windows/win32/api/commctrl/ns-commctrl-lvgroup) pour stocker des informations sur un groupe, telles que le texte d’en-tête et de pied de page, l’état actuel du groupe, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-504">You use the [**LVGROUP**](/windows/win32/api/commctrl/ns-commctrl-lvgroup) structure to store information about a group, such as the header and footer text, the current state of the group, and so on.</span></span> <span data-ttu-id="5ed8e-505">L’API de regroupement comprend des messages qui vous permettent de gérer des groupes et des éléments de groupe en ajoutant des éléments à des groupes, en ajoutant des groupes aux affichages, en triant des éléments de groupe et en interrogeant des groupes pour la taille d’élément et d’autres informations.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-505">The grouping API includes messages that enable you to manage groups and group elements by adding items to groups, adding groups to views, sorting group items, and querying groups for item size and other information.</span></span> <span data-ttu-id="5ed8e-506">Par exemple, vous pouvez définir et récupérer des paramètres d’affichage pour chaque groupe à l’aide des macros [**ListView \_ SetGroupMetrics**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setgroupmetrics) et [**ListView \_ GetGroupMetrics**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getgroupmetrics) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-506">For example, you can set and retrieve display parameters for each group by using the [**ListView\_SetGroupMetrics**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setgroupmetrics) and [**ListView\_GetGroupMetrics**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getgroupmetrics) macros.</span></span>

<span data-ttu-id="5ed8e-507">Le regroupement est disponible dans toutes les vues, à l’exception de la vue liste.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-507">Grouping is available in all views except list view.</span></span> <span data-ttu-id="5ed8e-508">Elle n’est pas disponible sur les contrôles qui ont le style [**LVS \_ OWNERDATA**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="5ed8e-508">It is not available on controls that have the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span>

<span data-ttu-id="5ed8e-509">Pour plus d’informations, consultez [utilisation de contrôles List-View](using-list-view-controls.md).</span><span class="sxs-lookup"><span data-stu-id="5ed8e-509">For more information, see [Using List-View Controls](using-list-view-controls.md).</span></span>

## <a name="insertion-marks"></a><span data-ttu-id="5ed8e-510">Marques d’insertion</span><span class="sxs-lookup"><span data-stu-id="5ed8e-510">Insertion Marks</span></span>

<span data-ttu-id="5ed8e-511">Les marques d’insertion montrent les utilisateurs où les éléments déplacés seront placés.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-511">Insertion marks show users where dragged items will be placed.</span></span> <span data-ttu-id="5ed8e-512">Les marques d’insertion s’affichent actuellement lorsque l’utilisateur fait glisser un élément dans le menu **Démarrer** ou la barre de lancement rapide.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-512">Insertion marks currently display when the user drags an item into the **Start** menu or Quick Launch bar.</span></span> <span data-ttu-id="5ed8e-513">La marque d’insertion fonctionne également pour les listes qui sont configurées pour se réorganiser.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-513">The insertion mark also works for lists that are set to autoarrange.</span></span> <span data-ttu-id="5ed8e-514">Quand un utilisateur fait glisser un élément vers un point entre deux autres éléments, la marque d'insertion indique le nouvel emplacement prévu de l'élément.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-514">When a user drags an item to a point between two other items, the insertion mark shows the item's expected new location.</span></span> <span data-ttu-id="5ed8e-515">La capture d’écran suivante montre une marque d’insertion.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-515">The following screen shot shows an insertion mark.</span></span>

![capture d’écran montrant une marque d’insertion lors du glissement d’un fichier entre deux autres dans un contrôle List-View](images/insertmark.png)

<span data-ttu-id="5ed8e-517">Les éléments d’API de marque d’insertion permettent de placer des marques d’insertion en fournissant des messages et des indicateurs qui effectuent la détection des accès, qui spécifient l’emplacement et l’apparence de la marque d’insertion par élément, et qui recherchent des informations sur la taille et l’apparence actuelles de la marque d’insertion.</span><span class="sxs-lookup"><span data-stu-id="5ed8e-517">The insertion mark API elements enable placement of insertion marks by providing messages and flags that perform hit detection, that specify the location and appearance of the insertion mark by item, and that query for information about the current size and appearance of the insertion mark.</span></span>

## <a name="see-also"></a><span data-ttu-id="5ed8e-518">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="5ed8e-518">See also</span></span>

* [<span data-ttu-id="5ed8e-519">Exemple de contrôle ListView virtuel</span><span class="sxs-lookup"><span data-stu-id="5ed8e-519">Virtual listview control sample</span></span>](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/controls/common/vlistvw)
