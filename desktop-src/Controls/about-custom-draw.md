---
title: À propos du dessin personnalisé
description: Cette section contient des informations générales sur la fonctionnalité de dessin personnalisée et fournit une vue d’ensemble conceptuelle de la façon dont une application peut prendre en charge le dessin personnalisé.
ms.assetid: dd104661-1e0c-4569-9753-817bcded1894
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 121a4df5aa6fab222a5c4387ebdcfba51a7977b2
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/09/2020
ms.locfileid: "104463863"
---
# <a name="about-custom-draw"></a><span data-ttu-id="f1305-103">À propos du dessin personnalisé</span><span class="sxs-lookup"><span data-stu-id="f1305-103">About Custom Draw</span></span>

<span data-ttu-id="f1305-104">Cette section contient des informations générales sur la fonctionnalité de dessin personnalisée et fournit une vue d’ensemble conceptuelle de la façon dont une application peut prendre en charge le dessin personnalisé.</span><span class="sxs-lookup"><span data-stu-id="f1305-104">This section contains general information about custom draw functionality and provides a conceptual overview of how an application can support custom draw.</span></span> <span data-ttu-id="f1305-105">Actuellement, les contrôles suivants prennent en charge la fonctionnalité de dessin personnalisée :</span><span class="sxs-lookup"><span data-stu-id="f1305-105">Currently, the following controls support custom draw functionality:</span></span>

-   <span data-ttu-id="f1305-106">Contrôles Header</span><span class="sxs-lookup"><span data-stu-id="f1305-106">Header controls</span></span>
-   <span data-ttu-id="f1305-107">Contrôles de liste</span><span class="sxs-lookup"><span data-stu-id="f1305-107">List-view controls</span></span>
-   <span data-ttu-id="f1305-108">Contrôles Rebar</span><span class="sxs-lookup"><span data-stu-id="f1305-108">Rebar controls</span></span>
-   <span data-ttu-id="f1305-109">Contrôles de barre d’outils</span><span class="sxs-lookup"><span data-stu-id="f1305-109">Toolbar controls</span></span>
-   <span data-ttu-id="f1305-110">Contrôles ToolTip</span><span class="sxs-lookup"><span data-stu-id="f1305-110">Tooltip controls</span></span>
-   <span data-ttu-id="f1305-111">Contrôles TrackBar</span><span class="sxs-lookup"><span data-stu-id="f1305-111">Trackbar controls</span></span>
-   <span data-ttu-id="f1305-112">Contrôles d’arborescence</span><span class="sxs-lookup"><span data-stu-id="f1305-112">Tree-view controls</span></span>

<!-- -->

-   [<span data-ttu-id="f1305-113">À propos des messages de notification de dessin personnalisés</span><span class="sxs-lookup"><span data-stu-id="f1305-113">About Custom Draw Notification Messages</span></span>](#about-custom-draw-notification-messages)
-   [<span data-ttu-id="f1305-114">Cycles de peinture, étapes de dessin et messages de notification</span><span class="sxs-lookup"><span data-stu-id="f1305-114">Paint Cycles, Drawing Stages, and Notification Messages</span></span>](#paint-cycles-drawing-stages-and-notification-messages)
-   [<span data-ttu-id="f1305-115">Tirer parti des services de dessin personnalisés</span><span class="sxs-lookup"><span data-stu-id="f1305-115">Taking Advantage of Custom Draw Services</span></span>](#taking-advantage-of-custom-draw-services)
    -   [<span data-ttu-id="f1305-116">Réponse à la notification de prépaint</span><span class="sxs-lookup"><span data-stu-id="f1305-116">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
    -   [<span data-ttu-id="f1305-117">Demande de notifications spécifiques à un élément</span><span class="sxs-lookup"><span data-stu-id="f1305-117">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
    -   [<span data-ttu-id="f1305-118">Dessin de l’élément vous-même</span><span class="sxs-lookup"><span data-stu-id="f1305-118">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
    -   [<span data-ttu-id="f1305-119">Modification des polices et des couleurs</span><span class="sxs-lookup"><span data-stu-id="f1305-119">Changing fonts and colors</span></span>](#changing-fonts-and-colors)
-   [<span data-ttu-id="f1305-120">Dessin personnalisé avec les contrôles List-View et Tree-View</span><span class="sxs-lookup"><span data-stu-id="f1305-120">Custom Draw With List-View and Tree-View Controls</span></span>](#custom-draw-with-list-view-and-tree-view-controls)
    -   [<span data-ttu-id="f1305-121">Dessin personnalisé avec des contrôles de List-View</span><span class="sxs-lookup"><span data-stu-id="f1305-121">Custom Draw With List-View Controls</span></span>](#custom-draw-with-list-view-controls)
-   [<span data-ttu-id="f1305-122">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f1305-122">Related topics</span></span>](#related-topics)

## <a name="about-custom-draw-notification-messages"></a><span data-ttu-id="f1305-123">À propos des messages de notification de dessin personnalisés</span><span class="sxs-lookup"><span data-stu-id="f1305-123">About Custom Draw Notification Messages</span></span>

<span data-ttu-id="f1305-124">Tous les contrôles communs qui prennent en charge les codes de notification [ \_ CUSTOMDRAW](nm-customdraw.md) d’envoi de dessin nm personnalisés à des points spécifiques pendant les opérations de dessin.</span><span class="sxs-lookup"><span data-stu-id="f1305-124">All common controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes at specific points during drawing operations.</span></span> <span data-ttu-id="f1305-125">Ces codes de notification décrivent les opérations de dessin qui s’appliquent à l’ensemble du contrôle, ainsi que les opérations de dessin spécifiques aux éléments dans le contrôle.</span><span class="sxs-lookup"><span data-stu-id="f1305-125">These notification codes describe drawing operations that apply to the entire control as well as drawing operations specific to items within the control.</span></span> <span data-ttu-id="f1305-126">Comme de nombreux codes de notification, les \_ notifications CUSTOMDRAW nm sont envoyées en tant que messages de notification [**WM \_**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="f1305-126">Like many notification codes, NM\_CUSTOMDRAW notifications are sent as [**WM\_NOTIFY**](wm-notify.md) messages.</span></span>

<span data-ttu-id="f1305-127">Le paramètre *lParam* d’une notification de dessin personnalisée est l’adresse d’une structure [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) ou d’une structure spécifique au contrôle qui contient une structure **NMCUSTOMDRAW** comme premier membre.</span><span class="sxs-lookup"><span data-stu-id="f1305-127">The *lParam* parameter of a custom draw notification will be the address of an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or a control-specific structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span> <span data-ttu-id="f1305-128">Le tableau suivant illustre la relation entre les contrôles et les structures qu’ils utilisent.</span><span class="sxs-lookup"><span data-stu-id="f1305-128">The following table illustrates the relationship between the controls and the structures they use.</span></span>



| <span data-ttu-id="f1305-129">Structure</span><span class="sxs-lookup"><span data-stu-id="f1305-129">Structure</span></span>                                | <span data-ttu-id="f1305-130">Utilisée par</span><span class="sxs-lookup"><span data-stu-id="f1305-130">Used by</span></span>                              |
|------------------------------------------|--------------------------------------|
| [<span data-ttu-id="f1305-131">**NMCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="f1305-131">**NMCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw)     | <span data-ttu-id="f1305-132">Contrôles rebar, TrackBar et Header</span><span class="sxs-lookup"><span data-stu-id="f1305-132">Rebar, trackbar, and header controls</span></span> |
| [<span data-ttu-id="f1305-133">**NMLVCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="f1305-133">**NMLVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) | <span data-ttu-id="f1305-134">Contrôles de liste</span><span class="sxs-lookup"><span data-stu-id="f1305-134">List-view controls</span></span>                   |
| [<span data-ttu-id="f1305-135">**NMTBCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="f1305-135">**NMTBCUSTOMDRAW**</span></span>](/windows/desktop/api/Commctrl/ns-commctrl-nmtbcustomdraw) | <span data-ttu-id="f1305-136">Contrôles de barre d’outils</span><span class="sxs-lookup"><span data-stu-id="f1305-136">Toolbar controls</span></span>                     |
| [<span data-ttu-id="f1305-137">**NMTTCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="f1305-137">**NMTTCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmttcustomdraw) | <span data-ttu-id="f1305-138">Contrôles ToolTip</span><span class="sxs-lookup"><span data-stu-id="f1305-138">Tooltip controls</span></span>                     |
| [<span data-ttu-id="f1305-139">**NMTVCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="f1305-139">**NMTVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) | <span data-ttu-id="f1305-140">Contrôles d’arborescence</span><span class="sxs-lookup"><span data-stu-id="f1305-140">Tree-view controls</span></span>                   |



 

## <a name="paint-cycles-drawing-stages-and-notification-messages"></a><span data-ttu-id="f1305-141">Cycles de peinture, étapes de dessin et messages de notification</span><span class="sxs-lookup"><span data-stu-id="f1305-141">Paint Cycles, Drawing Stages, and Notification Messages</span></span>

<span data-ttu-id="f1305-142">Comme toutes les applications Windows, les contrôles communs se dessinent et s’effacent régulièrement en fonction des messages reçus du système ou d’autres applications.</span><span class="sxs-lookup"><span data-stu-id="f1305-142">Like all Windows applications, common controls periodically paint and erase themselves based on messages received from the system or other applications.</span></span> <span data-ttu-id="f1305-143">Le processus d’un contrôle qui se dessine ou efface lui-même est appelé « *cycle de peinture*».</span><span class="sxs-lookup"><span data-stu-id="f1305-143">The process of a control painting or erasing itself is called a *paint cycle*.</span></span> <span data-ttu-id="f1305-144">Les contrôles qui prennent en charge les codes de notification [ \_ CUSTOMDRAW](nm-customdraw.md) d’envoi de dessin en nm personnalisés périodiquement à chaque cycle de peinture.</span><span class="sxs-lookup"><span data-stu-id="f1305-144">Controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes periodically through each paint cycle.</span></span> <span data-ttu-id="f1305-145">Ce code de notification est accompagné d’une structure [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) ou d’une autre structure qui contient une structure **NMCUSTOMDRAW** en tant que premier membre.</span><span class="sxs-lookup"><span data-stu-id="f1305-145">This notification code is accompanied by an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or another structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span>

<span data-ttu-id="f1305-146">L’une des informations que contient la structure [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) est l’étape actuelle du cycle de peinture.</span><span class="sxs-lookup"><span data-stu-id="f1305-146">One piece of information that the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure contains is the current stage of the paint cycle.</span></span> <span data-ttu-id="f1305-147">C’est ce que l’on appelle la *phase de dessin* et est représenté par la valeur dans le membre **dwDrawStage** de la structure.</span><span class="sxs-lookup"><span data-stu-id="f1305-147">This is referred to as the *draw stage* and is represented by the value in the structure's **dwDrawStage** member.</span></span> <span data-ttu-id="f1305-148">Un contrôle informe son parent des quatre étapes de dessin de base.</span><span class="sxs-lookup"><span data-stu-id="f1305-148">A control informs its parent about four basic draw stages.</span></span> <span data-ttu-id="f1305-149">Ces étapes de base, ou globale, de dessin sont représentées dans la structure par les valeurs d’indicateur suivantes (définies dans commctrl. h).</span><span class="sxs-lookup"><span data-stu-id="f1305-149">These basic, or global, draw stages are represented in the structure by the following flag values (defined in Commctrl.h).</span></span>



| <span data-ttu-id="f1305-150">Valeurs de l’étape de dessin global</span><span class="sxs-lookup"><span data-stu-id="f1305-150">Global draw stage values</span></span> | <span data-ttu-id="f1305-151">Description</span><span class="sxs-lookup"><span data-stu-id="f1305-151">Description</span></span>                        |
|--------------------------|------------------------------------|
| <span data-ttu-id="f1305-152">CDDS \_ PRÉpaint</span><span class="sxs-lookup"><span data-stu-id="f1305-152">CDDS\_PREPAINT</span></span>           | <span data-ttu-id="f1305-153">Avant le début du cycle de peinture.</span><span class="sxs-lookup"><span data-stu-id="f1305-153">Before the paint cycle begins.</span></span>     |
| <span data-ttu-id="f1305-154">CDDS \_ POSTPAINT</span><span class="sxs-lookup"><span data-stu-id="f1305-154">CDDS\_POSTPAINT</span></span>          | <span data-ttu-id="f1305-155">Une fois le cycle de peinture terminé.</span><span class="sxs-lookup"><span data-stu-id="f1305-155">After the paint cycle is complete.</span></span> |
| <span data-ttu-id="f1305-156">\_PRÉeffacement CDDS</span><span class="sxs-lookup"><span data-stu-id="f1305-156">CDDS\_PREERASE</span></span>           | <span data-ttu-id="f1305-157">Avant le début du cycle d’effacement.</span><span class="sxs-lookup"><span data-stu-id="f1305-157">Before the erase cycle begins.</span></span>     |
| <span data-ttu-id="f1305-158">CDDS \_ POSTERASE</span><span class="sxs-lookup"><span data-stu-id="f1305-158">CDDS\_POSTERASE</span></span>          | <span data-ttu-id="f1305-159">Une fois le cycle d’effacement terminé.</span><span class="sxs-lookup"><span data-stu-id="f1305-159">After the erase cycle is complete.</span></span> |



 

<span data-ttu-id="f1305-160">Chacune des valeurs précédentes peut être combinée à l' \_ indicateur d’élément CDDS pour spécifier les étapes de dessin spécifiques aux éléments.</span><span class="sxs-lookup"><span data-stu-id="f1305-160">Each of the preceding values can be combined with the CDDS\_ITEM flag to specify draw stages specific to items.</span></span> <span data-ttu-id="f1305-161">Pour plus de commodité, commctrl. h contient les valeurs spécifiques aux éléments suivantes.</span><span class="sxs-lookup"><span data-stu-id="f1305-161">For convenience, Commctrl.h contains the following item-specific values.</span></span>



| <span data-ttu-id="f1305-162">Valeurs des étapes de dessin spécifiques à l’élément</span><span class="sxs-lookup"><span data-stu-id="f1305-162">Item-specific draw stage values</span></span> | <span data-ttu-id="f1305-163">Description</span><span class="sxs-lookup"><span data-stu-id="f1305-163">Description</span></span>                                                                                                                                                                                                                                                                         |
|---------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f1305-164">CDDS \_ ITEMPREPAINT</span><span class="sxs-lookup"><span data-stu-id="f1305-164">CDDS\_ITEMPREPAINT</span></span>              | <span data-ttu-id="f1305-165">Avant qu’un élément soit dessiné.</span><span class="sxs-lookup"><span data-stu-id="f1305-165">Before an item is drawn.</span></span>                                                                                                                                                                                                                                                            |
| <span data-ttu-id="f1305-166">CDDS \_ ITEMPOSTPAINT</span><span class="sxs-lookup"><span data-stu-id="f1305-166">CDDS\_ITEMPOSTPAINT</span></span>             | <span data-ttu-id="f1305-167">Après qu’un élément a été dessiné.</span><span class="sxs-lookup"><span data-stu-id="f1305-167">After an item has been drawn.</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="f1305-168">CDDS \_ ITEMPREERASE</span><span class="sxs-lookup"><span data-stu-id="f1305-168">CDDS\_ITEMPREERASE</span></span>              | <span data-ttu-id="f1305-169">Avant qu’un élément soit effacé.</span><span class="sxs-lookup"><span data-stu-id="f1305-169">Before an item is erased.</span></span>                                                                                                                                                                                                                                                           |
| <span data-ttu-id="f1305-170">CDDS \_ ITEMPOSTERASE</span><span class="sxs-lookup"><span data-stu-id="f1305-170">CDDS\_ITEMPOSTERASE</span></span>             | <span data-ttu-id="f1305-171">Une fois qu’un élément a été effacé.</span><span class="sxs-lookup"><span data-stu-id="f1305-171">After an item has been erased.</span></span>                                                                                                                                                                                                                                                      |
| <span data-ttu-id="f1305-172">sous- \_ élément CDDS</span><span class="sxs-lookup"><span data-stu-id="f1305-172">CDDS\_SUBITEM</span></span>                   | <span data-ttu-id="f1305-173">[Versions de contrôle communes](common-control-versions.md) 4,71.</span><span class="sxs-lookup"><span data-stu-id="f1305-173">[Common Control Versions](common-control-versions.md) 4.71.</span></span> <span data-ttu-id="f1305-174">Indicateur combiné à CDDS \_ ITEMPREPAINT ou CDDS \_ ITEMPOSTPAINT si un sous-élément est en train d’être dessiné.</span><span class="sxs-lookup"><span data-stu-id="f1305-174">Flag combined with CDDS\_ITEMPREPAINT or CDDS\_ITEMPOSTPAINT if a subitem is being drawn.</span></span> <span data-ttu-id="f1305-175">Cette valeur est définie uniquement si [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md) est retourné à partir de CDDS \_ prépaint.</span><span class="sxs-lookup"><span data-stu-id="f1305-175">This will only be set if [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) is returned from CDDS\_PREPAINT.</span></span> |



 

<span data-ttu-id="f1305-176">Votre application doit traiter le code de notification [ \_ CUSTOMDRAW nm](nm-customdraw.md) , puis retourner une valeur spécifique qui informe le contrôle de ce qu’il doit faire.</span><span class="sxs-lookup"><span data-stu-id="f1305-176">Your application must process the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code and then return a specific value that informs the control what it must do.</span></span> <span data-ttu-id="f1305-177">Consultez les sections suivantes pour plus d’informations sur ces valeurs de retour.</span><span class="sxs-lookup"><span data-stu-id="f1305-177">See the following sections for more information about these return values.</span></span>

## <a name="taking-advantage-of-custom-draw-services"></a><span data-ttu-id="f1305-178">Tirer parti des services de dessin personnalisés</span><span class="sxs-lookup"><span data-stu-id="f1305-178">Taking Advantage of Custom Draw Services</span></span>

<span data-ttu-id="f1305-179">La clé de l’exploitation de la fonctionnalité de dessin personnalisé est de répondre aux codes de notification [ \_ CUSTOMDRAW nm](nm-customdraw.md) qu’un contrôle envoie.</span><span class="sxs-lookup"><span data-stu-id="f1305-179">The key to harnessing custom draw functionality is in responding to the [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes that a control sends.</span></span> <span data-ttu-id="f1305-180">Les valeurs de retour que votre application envoie en réponse à ces notifications déterminent le comportement du contrôle pour ce cycle de peinture.</span><span class="sxs-lookup"><span data-stu-id="f1305-180">The return values your application sends in response to these notifications determine the control's behavior for that paint cycle.</span></span>

<span data-ttu-id="f1305-181">Cette section contient des informations sur la façon dont votre application peut utiliser les valeurs de retour de notification [ \_ CUSTOMDRAW nm](nm-customdraw.md) pour déterminer le comportement du contrôle.</span><span class="sxs-lookup"><span data-stu-id="f1305-181">This section contains information about how your application can use [NM\_CUSTOMDRAW](nm-customdraw.md) notification return values to determine the control's behavior.</span></span>

<span data-ttu-id="f1305-182">Les détails sont répartis dans les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="f1305-182">Details are broken into the following topics:</span></span>

-   [<span data-ttu-id="f1305-183">Réponse à la notification de prépaint</span><span class="sxs-lookup"><span data-stu-id="f1305-183">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
-   [<span data-ttu-id="f1305-184">Demande de notifications spécifiques à un élément</span><span class="sxs-lookup"><span data-stu-id="f1305-184">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
-   [<span data-ttu-id="f1305-185">Dessin de l’élément vous-même</span><span class="sxs-lookup"><span data-stu-id="f1305-185">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
-   [<span data-ttu-id="f1305-186">Modification des polices et des couleurs</span><span class="sxs-lookup"><span data-stu-id="f1305-186">Changing fonts and colors</span></span>](#changing-fonts-and-colors)

### <a name="responding-to-the-prepaint-notification"></a><span data-ttu-id="f1305-187">Réponse à la notification de prépaint</span><span class="sxs-lookup"><span data-stu-id="f1305-187">Responding to the prepaint notification</span></span>

<span data-ttu-id="f1305-188">Au début de chaque cycle de peinture, le contrôle envoie le code de notification [ \_ CUSTOMDRAW nm](nm-customdraw.md) , en spécifiant la \_ valeur de prépaint CDDS dans le membre **DWDRAWSTAGE** de la \_ structure CUSTOMDRAW nm associée.</span><span class="sxs-lookup"><span data-stu-id="f1305-188">At the beginning of each paint cycle, the control sends the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code, specifying the CDDS\_PREPAINT value in the **dwDrawStage** member of the accompanying NM\_CUSTOMDRAW structure.</span></span> <span data-ttu-id="f1305-189">La valeur renvoyée par votre application à cette première notification détermine le mode et le moment où le contrôle envoie les notifications de dessin personnalisées suivantes pour le reste du cycle de peinture.</span><span class="sxs-lookup"><span data-stu-id="f1305-189">The value that your application returns to this first notification dictates how and when the control sends subsequent custom draw notifications for the rest of that paint cycle.</span></span> <span data-ttu-id="f1305-190">Votre application peut retourner une combinaison des indicateurs suivants en réponse à la première notification.</span><span class="sxs-lookup"><span data-stu-id="f1305-190">Your application can return a combination of the following flags in response to the first notification.</span></span>



| <span data-ttu-id="f1305-191">Valeur retournée</span><span class="sxs-lookup"><span data-stu-id="f1305-191">Return value</span></span>            | <span data-ttu-id="f1305-192">Résultat</span><span class="sxs-lookup"><span data-stu-id="f1305-192">Effect</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f1305-193">CDRF \_ par défaut</span><span class="sxs-lookup"><span data-stu-id="f1305-193">CDRF\_DODEFAULT</span></span>         | <span data-ttu-id="f1305-194">Le contrôle se dessine lui-même.</span><span class="sxs-lookup"><span data-stu-id="f1305-194">The control will draw itself.</span></span> <span data-ttu-id="f1305-195">Il n’enverra pas de notifications [ \_ CUSTOMDRAW nm](nm-customdraw.md) supplémentaires pour ce cycle de peinture.</span><span class="sxs-lookup"><span data-stu-id="f1305-195">It will not send additional [NM\_CUSTOMDRAW](nm-customdraw.md) notifications for this paint cycle.</span></span> <span data-ttu-id="f1305-196">Cet indicateur ne peut pas être utilisé avec un autre indicateur.</span><span class="sxs-lookup"><span data-stu-id="f1305-196">This flag cannot be used with any other flag.</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="f1305-197">CDRF, \_ INerase</span><span class="sxs-lookup"><span data-stu-id="f1305-197">CDRF\_DOERASE</span></span>           | <span data-ttu-id="f1305-198">Le contrôle dessinera uniquement l’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="f1305-198">The control will only draw the background.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="f1305-199">CDRF \_ NEWFONT</span><span class="sxs-lookup"><span data-stu-id="f1305-199">CDRF\_NEWFONT</span></span>           | <span data-ttu-id="f1305-200">Votre application a spécifié une nouvelle police pour l’élément. le contrôle utilise la nouvelle police.</span><span class="sxs-lookup"><span data-stu-id="f1305-200">Your application specified a new font for the item; the control will use the new font.</span></span> <span data-ttu-id="f1305-201">Pour plus d’informations sur la modification des polices, consultez [modification des polices et des couleurs](#changing-fonts-and-colors).</span><span class="sxs-lookup"><span data-stu-id="f1305-201">For more information on changing fonts, see [Changing fonts and colors](#changing-fonts-and-colors).</span></span> <span data-ttu-id="f1305-202">Cela se produit lorsque **dwDrawStage** est égal à CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="f1305-202">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                       |
| <span data-ttu-id="f1305-203">CDRF \_ NOTIFYITEMDRAW</span><span class="sxs-lookup"><span data-stu-id="f1305-203">CDRF\_NOTIFYITEMDRAW</span></span>    | <span data-ttu-id="f1305-204">Le contrôle notifie le parent de toutes les opérations de dessin spécifiques à l’élément.</span><span class="sxs-lookup"><span data-stu-id="f1305-204">The control will notify the parent of any item-specific drawing operations.</span></span> <span data-ttu-id="f1305-205">Il envoie les codes de notification [ \_ CUSTOMDRAW nm](nm-customdraw.md) avant et après le dessin des éléments. Cela se produit lorsque **dwDrawStage** est égal à CDDS \_ prépaint.</span><span class="sxs-lookup"><span data-stu-id="f1305-205">It will send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes before and after it draws items.This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                       |
| <span data-ttu-id="f1305-206">CDRF \_ NOTIFYPOSTERASE</span><span class="sxs-lookup"><span data-stu-id="f1305-206">CDRF\_NOTIFYPOSTERASE</span></span>   | <span data-ttu-id="f1305-207">Le contrôle notifie le parent après l’effacement d’un élément.</span><span class="sxs-lookup"><span data-stu-id="f1305-207">The control will notify the parent after erasing an item.</span></span> <span data-ttu-id="f1305-208">Cela se produit lorsque **dwDrawStage** est égal à CDDS \_ prépaint.</span><span class="sxs-lookup"><span data-stu-id="f1305-208">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="f1305-209">CDRF \_ NOTIFYPOSTPAINT</span><span class="sxs-lookup"><span data-stu-id="f1305-209">CDRF\_NOTIFYPOSTPAINT</span></span>   | <span data-ttu-id="f1305-210">Le contrôle enverra une notification [ \_ CUSTOMDRAW nm](nm-customdraw.md) lorsque le cycle de peinture pour l’ensemble du contrôle est terminé.</span><span class="sxs-lookup"><span data-stu-id="f1305-210">The control will send an [NM\_CUSTOMDRAW](nm-customdraw.md) notification when the painting cycle for the entire control is complete.</span></span> <span data-ttu-id="f1305-211">Cela se produit lorsque **dwDrawStage** est égal à CDDS \_ prépaint.</span><span class="sxs-lookup"><span data-stu-id="f1305-211">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="f1305-212">CDRF \_ NOTIFYSUBITEMDRAW</span><span class="sxs-lookup"><span data-stu-id="f1305-212">CDRF\_NOTIFYSUBITEMDRAW</span></span> | <span data-ttu-id="f1305-213">[Version 4,71](common-control-versions.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-213">[Version 4.71](common-control-versions.md).</span></span> <span data-ttu-id="f1305-214">Votre application recevra une [notification \_ CUSTOMDRAW nm](nm-customdraw.md) avec **dwDrawStage** défini sur CDDS \_ ITEMPREPAINT \| CDDS sous- \_ élément avant que chaque sous-élément de vue liste soit dessiné.</span><span class="sxs-lookup"><span data-stu-id="f1305-214">Your application will receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT \| CDDS\_SUBITEM before each list-view subitem is drawn.</span></span> <span data-ttu-id="f1305-215">Vous pouvez ensuite spécifier la police et la couleur de chaque sous-élément séparément ou retourner [**CDRF \_ par défaut**](cdrf-constants.md) pour le traitement par défaut.</span><span class="sxs-lookup"><span data-stu-id="f1305-215">You can then specify font and color for each subitem separately or return [**CDRF\_DODEFAULT**](cdrf-constants.md) for default processing.</span></span> <span data-ttu-id="f1305-216">Cela se produit lorsque **dwDrawStage** est égal à CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="f1305-216">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span> |
| <span data-ttu-id="f1305-217">CDRF \_ SKIPDEFAULT</span><span class="sxs-lookup"><span data-stu-id="f1305-217">CDRF\_SKIPDEFAULT</span></span>       | <span data-ttu-id="f1305-218">Votre application a dessiné l’élément manuellement.</span><span class="sxs-lookup"><span data-stu-id="f1305-218">Your application drew the item manually.</span></span> <span data-ttu-id="f1305-219">Le contrôle ne dessine pas l’élément.</span><span class="sxs-lookup"><span data-stu-id="f1305-219">The control will not draw the item.</span></span> <span data-ttu-id="f1305-220">Cela se produit lorsque **dwDrawStage** est égal à CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="f1305-220">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="f1305-221">CDRF \_ SKIPPOSTPAINT</span><span class="sxs-lookup"><span data-stu-id="f1305-221">CDRF\_SKIPPOSTPAINT</span></span>     | <span data-ttu-id="f1305-222">Le contrôle ne dessine pas le rectangle de focus autour d’un élément.</span><span class="sxs-lookup"><span data-stu-id="f1305-222">The control will not draw the focus rectangle around an item.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                 |



 

### <a name="requesting-item-specific-notifications"></a><span data-ttu-id="f1305-223">Demande de notifications spécifiques à un élément</span><span class="sxs-lookup"><span data-stu-id="f1305-223">Requesting item-specific notifications</span></span>

<span data-ttu-id="f1305-224">Si votre application renvoie [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md) à la notification de dessin personnalisée de prépaint initiale, le contrôle enverra des notifications pour chaque élément qu’il dessine pendant ce cycle de peinture.</span><span class="sxs-lookup"><span data-stu-id="f1305-224">If your application returns [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) to the initial prepaint custom draw notification, the control will send notifications for each item it draws during that paint cycle.</span></span> <span data-ttu-id="f1305-225">Ces notifications spécifiques à l’élément comporteront la \_ valeur CDDS ITEMPREPAINT dans le membre **dwDrawStage** de la structure [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associée.</span><span class="sxs-lookup"><span data-stu-id="f1305-225">These item-specific notifications will have the CDDS\_ITEMPREPAINT value in the **dwDrawStage** member of the accompanying [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure.</span></span> <span data-ttu-id="f1305-226">Vous pouvez demander que le contrôle envoie une autre notification quand il a terminé de dessiner l’élément en retournant [**CDRF \_ NOTIFYPOSTPAINT**](cdrf-constants.md) à ces notifications spécifiques à l’élément.</span><span class="sxs-lookup"><span data-stu-id="f1305-226">You can request that the control send another notification when it is finished drawing the item by returning [**CDRF\_NOTIFYPOSTPAINT**](cdrf-constants.md) to these item-specific notifications.</span></span> <span data-ttu-id="f1305-227">Sinon, retournez [**CDRF \_ par défaut**](cdrf-constants.md) et le contrôle n’avertira pas la fenêtre parente jusqu’à ce qu’il commence à dessiner l’élément suivant.</span><span class="sxs-lookup"><span data-stu-id="f1305-227">Otherwise, return [**CDRF\_DODEFAULT**](cdrf-constants.md) and the control will not notify the parent window until it starts to draw the next item.</span></span>

### <a name="drawing-the-item-yourself"></a><span data-ttu-id="f1305-228">Dessin de l’élément vous-même</span><span class="sxs-lookup"><span data-stu-id="f1305-228">Drawing the item yourself</span></span>

<span data-ttu-id="f1305-229">Si votre application dessine la totalité de l’élément, retournez [**CDRF \_ SKIPDEFAULT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-229">If your application draws the entire item, return [**CDRF\_SKIPDEFAULT**](cdrf-constants.md).</span></span> <span data-ttu-id="f1305-230">Cela permet au contrôle d’ignorer les éléments qu’il n’a pas besoin de dessiner, ce qui réduit la surcharge du système.</span><span class="sxs-lookup"><span data-stu-id="f1305-230">This allows the control to skip items that it does not need to draw, thereby decreasing system overhead.</span></span> <span data-ttu-id="f1305-231">N’oubliez pas que le retour de cette valeur signifie que le contrôle ne dessinera aucune partie de l’élément.</span><span class="sxs-lookup"><span data-stu-id="f1305-231">Keep in mind that returning this value means the control will not draw any portion of the item.</span></span>

### <a name="changing-fonts-and-colors"></a><span data-ttu-id="f1305-232">Modification des polices et des couleurs</span><span class="sxs-lookup"><span data-stu-id="f1305-232">Changing fonts and colors</span></span>

<span data-ttu-id="f1305-233">Votre application peut utiliser un dessin personnalisé pour modifier la police d’un élément.</span><span class="sxs-lookup"><span data-stu-id="f1305-233">Your application can use custom draw to change an item's font.</span></span> <span data-ttu-id="f1305-234">Sélectionnez simplement le HFONT souhaité dans le contexte de périphérique spécifié par le membre **HDC** de la structure [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associée à la notification de dessin personnalisée.</span><span class="sxs-lookup"><span data-stu-id="f1305-234">Simply select the HFONT you want into the device context specified by the **hdc** member of the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure associated with the custom draw notification.</span></span> <span data-ttu-id="f1305-235">Étant donné que la police que vous sélectionnez peut avoir des métriques différentes de la police par défaut, veillez à inclure le bit [**CDRF \_ NEWFONT**](cdrf-constants.md) dans la valeur de retour du message de notification.</span><span class="sxs-lookup"><span data-stu-id="f1305-235">Since the font you select might have different metrics than the default font, make sure you include the [**CDRF\_NEWFONT**](cdrf-constants.md) bit in the return value for the notification message.</span></span> <span data-ttu-id="f1305-236">Pour plus d’informations sur l’utilisation de cette fonctionnalité, consultez l’exemple de code dans utilisation d’un [dessin personnalisé](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-236">For more information on using this functionality, see the sample code in [Using Custom Draw](using-custom-draw.md).</span></span> <span data-ttu-id="f1305-237">La police que votre application spécifie est utilisée pour afficher cet élément lorsqu’il n’est pas sélectionné.</span><span class="sxs-lookup"><span data-stu-id="f1305-237">The font that your application specifies is used to display that item when it is not selected.</span></span> <span data-ttu-id="f1305-238">L’option dessin personnalisé ne vous permet pas de modifier les attributs de police des éléments sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="f1305-238">Custom draw does not allow you to change the font attributes for selected items.</span></span>

<span data-ttu-id="f1305-239">Pour modifier les couleurs de texte pour tous les contrôles qui prennent en charge le dessin personnalisé, à l’exception de la vue liste et de l’arborescence, définissez simplement le texte et les couleurs d’arrière-plan souhaités dans le contexte de périphérique fourni dans la structure de notification de dessin personnalisée avec les fonctions [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) et [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) .</span><span class="sxs-lookup"><span data-stu-id="f1305-239">To change text colors for all controls that support custom draw except for the list view and tree view, simply set the desired text and background colors in the device context supplied in the custom draw notification structure with the [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) and [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) functions.</span></span> <span data-ttu-id="f1305-240">Pour modifier les couleurs de texte dans l’affichage de liste ou l’arborescence, vous devez placer les valeurs de couleur souhaitées dans les membres **clrText** et **clrTextBk** de la structure [**NMLVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) ou [**NMTVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) .</span><span class="sxs-lookup"><span data-stu-id="f1305-240">To modify the text colors in the list view or tree view, you need to place the desired color values in the **clrText** and **clrTextBk** members of the [**NMLVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) or [**NMTVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) structure.</span></span>

> [!Note]  
> <span data-ttu-id="f1305-241">Avant la [Version 6,0](common-control-versions.md) des contrôles communs, les barres d’outils ignorent l’indicateur [**CDRF \_ NEWFONT**](cdrf-constants.md) .</span><span class="sxs-lookup"><span data-stu-id="f1305-241">Prior to [Version 6.0](common-control-versions.md) of the common controls, toolbars ignore the [**CDRF\_NEWFONT**](cdrf-constants.md) flag.</span></span> <span data-ttu-id="f1305-242">La version 6,0 prend en charge l’indicateur **CDRF \_ NEWFONT** , et vous pouvez l’utiliser pour sélectionner une police différente pour la barre d’outils.</span><span class="sxs-lookup"><span data-stu-id="f1305-242">Version 6.0 supports the **CDRF\_NEWFONT** flag, and you can use it to select a different font for the toolbar.</span></span> <span data-ttu-id="f1305-243">Toutefois, vous ne pouvez pas modifier la couleur d’une barre d’outils quand un style visuel est actif.</span><span class="sxs-lookup"><span data-stu-id="f1305-243">However, you cannot change a toolbar's color when a visual style is active.</span></span> <span data-ttu-id="f1305-244">Pour modifier la couleur d’une barre d’outils dans la version 6,0, vous devez d’abord désactiver les styles visuels en appelant [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) et en ne spécifiant aucun style visuel :</span><span class="sxs-lookup"><span data-stu-id="f1305-244">To change a toolbar's color in Version 6.0, you must first disable visual styles by calling [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) and specifying no visual style:</span></span>

 


```
SetWindowTheme (hwnd, "", "");
```



## <a name="custom-draw-with-list-view-and-tree-view-controls"></a><span data-ttu-id="f1305-245">Dessin personnalisé avec les contrôles List-View et Tree-View</span><span class="sxs-lookup"><span data-stu-id="f1305-245">Custom Draw With List-View and Tree-View Controls</span></span>

<span data-ttu-id="f1305-246">La plupart des contrôles courants peuvent être gérés de la même façon.</span><span class="sxs-lookup"><span data-stu-id="f1305-246">Most common controls can be handled in essentially the same way.</span></span> <span data-ttu-id="f1305-247">Toutefois, les contrôles d’affichage de liste et d’arborescence disposent de certaines fonctionnalités qui nécessitent une approche quelque peu différente du dessin personnalisé.</span><span class="sxs-lookup"><span data-stu-id="f1305-247">However, the list-view and tree-view controls have some features that require a somewhat different approach to custom draw.</span></span>

<span data-ttu-id="f1305-248">Pour la [Version 5,0](common-control-versions.md), ces deux contrôles peuvent afficher du texte tronqué si vous modifiez la police en retournant [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-248">For [Version 5.0](common-control-versions.md), these two controls may display clipped text if you change the font by returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="f1305-249">Ce comportement est nécessaire pour la compatibilité descendante avec les versions antérieures des contrôles communs.</span><span class="sxs-lookup"><span data-stu-id="f1305-249">This behavior is necessary for backward compatibility with earlier versions of the common controls.</span></span> <span data-ttu-id="f1305-250">Si vous souhaitez modifier la police d’un contrôle d’affichage de liste ou d’arborescence, vous obtiendrez de meilleurs résultats si vous envoyez un message [**CCM \_ SETVERSION**](ccm-setversion.md) avec la valeur *wParam* définie sur 5 avant d’ajouter des éléments au contrôle.</span><span class="sxs-lookup"><span data-stu-id="f1305-250">If you want to change the font of a list-view or tree-view control, you will get better results if you send a [**CCM\_SETVERSION**](ccm-setversion.md) message with the *wParam* value set to 5 before adding any items to the control.</span></span> <span data-ttu-id="f1305-251">Pour obtenir un exemple de contrôle d’arborescence qui utilise un dessin personnalisé, consultez l’exemple d’article de la base de connaissances [: CustDTv illustre un dessin personnalisé dans un contrôle TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span><span class="sxs-lookup"><span data-stu-id="f1305-251">For an example of a tree-view control that uses custom draw see Knowledge Base article [SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span></span>

### <a name="custom-draw-with-list-view-controls"></a><span data-ttu-id="f1305-252">Dessin personnalisé avec des contrôles de List-View</span><span class="sxs-lookup"><span data-stu-id="f1305-252">Custom Draw With List-View Controls</span></span>

<span data-ttu-id="f1305-253">Étant donné que les contrôles List-View possèdent des sous-éléments et plusieurs modes d’affichage, vous devez gérer la notification [ \_ CUSTOMDRAW nm](nm-customdraw.md) différemment de celle des autres contrôles communs.</span><span class="sxs-lookup"><span data-stu-id="f1305-253">Because list-view controls have subitems and multiple display modes, you will need to handle the [NM\_CUSTOMDRAW](nm-customdraw.md) notification somewhat differently than for the other common controls.</span></span>

<span data-ttu-id="f1305-254">Pour le mode rapport, utilisez la procédure suivante.</span><span class="sxs-lookup"><span data-stu-id="f1305-254">For report mode, use the following procedure.</span></span>

1.  <span data-ttu-id="f1305-255">La première [notification \_ CUSTOMDRAW nm](nm-customdraw.md) aura le membre **DwDrawStage** de la structure [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associée définie sur CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="f1305-255">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="f1305-256">Retourne [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-256">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="f1305-257">Vous recevrez ensuite une [notification \_ CUSTOMDRAW nm](nm-customdraw.md) avec **dwDrawStage** défini sur CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="f1305-257">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="f1305-258">Si vous spécifiez de nouvelles polices ou couleurs et que vous renvoyez [**CDRF \_ NEWFONT**](cdrf-constants.md), tous les sous-éléments de l’élément seront modifiés.</span><span class="sxs-lookup"><span data-stu-id="f1305-258">If you specify new fonts or colors and return [**CDRF\_NEWFONT**](cdrf-constants.md), all subitems of the item will be changed.</span></span> <span data-ttu-id="f1305-259">Si vous souhaitez plutôt gérer chaque sous-élément séparément, retournez [**CDRF \_ NOTIFYSUBITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-259">If you want instead to handle each subitem separately, return [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md).</span></span>
3.  <span data-ttu-id="f1305-260">Si vous avez retourné [**CDRF \_ NOTIFYSUBITEMDRAW**](cdrf-constants.md) à l’étape précédente, vous recevrez une [notification \_ CUSTOMDRAW nm](nm-customdraw.md) pour chaque sous-élément avec **dwDrawStage** défini sur CDDS sous-élément CDDS ITEMPREPAINT \_ \| \_ .</span><span class="sxs-lookup"><span data-stu-id="f1305-260">If you returned [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md) in the previous step, you will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification for each subitem with **dwDrawStage** set to CDDS\_SUBITEM \| CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="f1305-261">Pour modifier la police ou la couleur de ce sous-élément, spécifiez une nouvelle police ou couleur et retournez [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-261">To change the font or color for that subitem, specify a new font or color and return [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span>

<span data-ttu-id="f1305-262">Pour les grandes icônes, les petites icônes et les modes de liste, utilisez la procédure suivante.</span><span class="sxs-lookup"><span data-stu-id="f1305-262">For the large icon, small icon, and list modes, use the following procedure.</span></span>

1.  <span data-ttu-id="f1305-263">La première [notification \_ CUSTOMDRAW nm](nm-customdraw.md) aura le membre **DwDrawStage** de la structure [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associée définie sur CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="f1305-263">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="f1305-264">Retourne [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-264">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="f1305-265">Vous recevrez ensuite une [notification \_ CUSTOMDRAW nm](nm-customdraw.md) avec **dwDrawStage** défini sur CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="f1305-265">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="f1305-266">Vous pouvez modifier les polices ou les couleurs d’un élément en spécifiant de nouvelles polices et couleurs et en retournant [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-266">You can change the fonts or colors of an item by specifying new fonts and colors and returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="f1305-267">Comme ces modes n’ont pas de sous-éléments, vous ne recevrez pas de \_ notifications CUSTOMDRAW nm supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="f1305-267">Because these modes do not have subitems, you will not receive any additional NM\_CUSTOMDRAW notifications.</span></span>

<span data-ttu-id="f1305-268">Pour obtenir un exemple de gestionnaire de notification [ \_ CUSTOMDRAW](nm-customdraw.md) en mode liste, consultez [utilisation d’un dessin personnalisé](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="f1305-268">For an example of a list-view [NM\_CUSTOMDRAW](nm-customdraw.md) notification handler, see [Using Custom Draw](using-custom-draw.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="f1305-269">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="f1305-269">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="f1305-270">**Méthodologique**</span><span class="sxs-lookup"><span data-stu-id="f1305-270">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="f1305-271">Utilisation d’un dessin personnalisé</span><span class="sxs-lookup"><span data-stu-id="f1305-271">Using Custom Draw</span></span>](using-custom-draw.md)
</dt> <dt>

[<span data-ttu-id="f1305-272">Référence de dessin personnalisée</span><span class="sxs-lookup"><span data-stu-id="f1305-272">Custom Draw Reference</span></span>](custom-draw-reference.md)
</dt> <dt>

<span data-ttu-id="f1305-273">**Autres ressources**</span><span class="sxs-lookup"><span data-stu-id="f1305-273">**Other Resources**</span></span>
</dt> <dt>

[<span data-ttu-id="f1305-274">EXEMPLE : CustDTv illustre un dessin personnalisé dans un contrôle TreeView (Q248496)</span><span class="sxs-lookup"><span data-stu-id="f1305-274">SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)</span></span>]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496)
</dt> </dl>

 

 