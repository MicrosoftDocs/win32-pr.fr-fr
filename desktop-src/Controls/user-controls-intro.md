---
title: Contrôles personnalisés
description: Cette section contient des informations sur les contrôles personnalisés ou définis par l’application.
ms.assetid: 220f7058-db04-46d0-acee-ed5e676790b3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e82ed9394ec06257e524153b86ef487f4507f35b
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "104102373"
---
# <a name="custom-controls"></a><span data-ttu-id="b37fb-103">Contrôles personnalisés</span><span class="sxs-lookup"><span data-stu-id="b37fb-103">Custom Controls</span></span>

<span data-ttu-id="b37fb-104">Cette section contient des informations sur les contrôles personnalisés ou définis par l’application.</span><span class="sxs-lookup"><span data-stu-id="b37fb-104">This section contains information about application-defined or custom controls.</span></span>

<span data-ttu-id="b37fb-105">Les rubriques suivantes sont présentées.</span><span class="sxs-lookup"><span data-stu-id="b37fb-105">The following topics are discussed.</span></span>

-   [<span data-ttu-id="b37fb-106">Création de contrôles Owner-Drawn</span><span class="sxs-lookup"><span data-stu-id="b37fb-106">Creating Owner-Drawn Controls</span></span>](#creating-owner-drawn-controls)
-   [<span data-ttu-id="b37fb-107">Sous-classement de la classe de fenêtre d’un contrôle existant</span><span class="sxs-lookup"><span data-stu-id="b37fb-107">Subclassing the Window Class of an Existing Control</span></span>](#subclassing-the-window-class-of-an-existing-control)
-   [<span data-ttu-id="b37fb-108">Implémentation d’une classe de fenêtre Application-Defined</span><span class="sxs-lookup"><span data-stu-id="b37fb-108">Implementing an Application-Defined Window Class</span></span>](#implementing-an-application-defined-window-class)
-   [<span data-ttu-id="b37fb-109">Envoi de notifications à partir d’un contrôle</span><span class="sxs-lookup"><span data-stu-id="b37fb-109">Sending Notifications from a Control</span></span>](#sending-notifications-from-a-control)
-   [<span data-ttu-id="b37fb-110">Accessibilité</span><span class="sxs-lookup"><span data-stu-id="b37fb-110">Accessibility</span></span>](#accessibility)
-   [<span data-ttu-id="b37fb-111">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="b37fb-111">Related topics</span></span>](#related-topics)

## <a name="creating-owner-drawn-controls"></a><span data-ttu-id="b37fb-112">Création de contrôles Owner-Drawn</span><span class="sxs-lookup"><span data-stu-id="b37fb-112">Creating Owner-Drawn Controls</span></span>

<span data-ttu-id="b37fb-113">Les boutons, les menus, les contrôles de texte statiques, les zones de liste et les zones de liste modifiable peuvent être créés avec un indicateur de style owner-drawn.</span><span class="sxs-lookup"><span data-stu-id="b37fb-113">Buttons, menus, static text controls, list boxes, and combo boxes can be created with an owner-drawn style flag.</span></span> <span data-ttu-id="b37fb-114">Lorsqu’un contrôle a le style owner-drawn, le système gère l’interaction de l’utilisateur avec le contrôle comme d’habitude, en effectuant des tâches telles que la détection lorsqu’un utilisateur a choisi un bouton et avertit le propriétaire de l’événement du bouton.</span><span class="sxs-lookup"><span data-stu-id="b37fb-114">When a control has the owner-drawn style, the system handles the user's interaction with the control as usual, performing such tasks as detecting when a user has chosen a button and notifying the button's owner of the event.</span></span> <span data-ttu-id="b37fb-115">Toutefois, étant donné que le contrôle est owner-drawn, la fenêtre parente du contrôle est responsable de l’apparence visuelle du contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-115">However, because the control is owner-drawn, the parent window of the control is responsible for the visual appearance of the control.</span></span> <span data-ttu-id="b37fb-116">La fenêtre parente reçoit un message chaque fois que le contrôle doit être dessiné.</span><span class="sxs-lookup"><span data-stu-id="b37fb-116">The parent window receives a message whenever the control must be drawn.</span></span>

<span data-ttu-id="b37fb-117">Pour les boutons et les contrôles de texte statique, le style owner-drawn affecte la façon dont le système dessine l’ensemble du contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-117">For buttons and static text controls, the owner-drawn style affects how the system draws the entire control.</span></span> <span data-ttu-id="b37fb-118">Pour les zones de liste et les zones de liste modifiable, la fenêtre parente dessine les éléments dans le contrôle et le contrôle dessine son propre plan.</span><span class="sxs-lookup"><span data-stu-id="b37fb-118">For list boxes and combo boxes, the parent window draws the items within the control, and the control draws its own outline.</span></span> <span data-ttu-id="b37fb-119">Par exemple, une application peut personnaliser une zone de liste pour qu’elle affiche une petite bitmap en regard de chaque élément de la liste.</span><span class="sxs-lookup"><span data-stu-id="b37fb-119">For example, an application can customize a list box so that it displays a small bitmap next to each item in the list.</span></span>

<span data-ttu-id="b37fb-120">L’exemple de code suivant montre comment créer un contrôle de texte statique owner-drawn.</span><span class="sxs-lookup"><span data-stu-id="b37fb-120">The following example code shows how to create an owner-drawn static text control.</span></span> <span data-ttu-id="b37fb-121">Supposons que Unicode est défini.</span><span class="sxs-lookup"><span data-stu-id="b37fb-121">Assume that Unicode is defined.</span></span>


```
// g_myStatic is a global HWND variable.
g_myStatic = CreateWindowEx(0, L"STATIC", L"Some static text", 
            WS_CHILD | WS_VISIBLE | SS_OWNERDRAW, 
            25, 125, 150, 20, hDlg, 0, 0, 0);
```



<span data-ttu-id="b37fb-122">Dans l’exemple suivant, dans la procédure de fenêtre pour la boîte de dialogue qui contient le contrôle créé dans l’exemple précédent, le message [**WM \_ DRAWITEM**](wm-drawitem.md) est géré en affichant le texte dans une couleur personnalisée, à l’aide de la police par défaut.</span><span class="sxs-lookup"><span data-stu-id="b37fb-122">In the following example, from the window procedure for the dialog box that contains the control created in the previous example, the [**WM\_DRAWITEM**](wm-drawitem.md) message is handled by displaying the text in a custom color, using the default font.</span></span> <span data-ttu-id="b37fb-123">Notez que vous n’avez pas besoin d’appeler [**BeginPaint**](/windows/desktop/api/winuser/nf-winuser-beginpaint) et [**EndPaint**](/windows/desktop/api/winuser/nf-winuser-endpaint) lors du traitement de **WM \_ DRAWITEM**.</span><span class="sxs-lookup"><span data-stu-id="b37fb-123">Note that you do not need to call [**BeginPaint**](/windows/desktop/api/winuser/nf-winuser-beginpaint) and [**EndPaint**](/windows/desktop/api/winuser/nf-winuser-endpaint) when handling **WM\_DRAWITEM**.</span></span>


```
case WM_DRAWITEM:
{
    LPDRAWITEMSTRUCT pDIS = (LPDRAWITEMSTRUCT)lParam;
    if (pDIS->hwndItem == g_myStatic)
    {
        SetTextColor(pDIS->hDC, RGB(100, 0, 100));
        WCHAR staticText[99];
        int len = SendMessage(myStatic, WM_GETTEXT, 
            ARRAYSIZE(staticText), (LPARAM)staticText);
        TextOut(pDIS->hDC, pDIS->rcItem.left, pDIS->rcItem.top, staticText, len);
    }
    return TRUE;
}
```



<span data-ttu-id="b37fb-124">Pour plus d’informations sur les contrôles owner-drawn, consultez [création d’une zone de liste owner-drawn](using-list-boxes.md) et de zones de liste [déroulante owner drawn](about-combo-boxes.md).</span><span class="sxs-lookup"><span data-stu-id="b37fb-124">For more information about owner-drawn controls, see [Creating an Owner-drawn List Box](using-list-boxes.md) and [Owner Drawn Combo Boxes](about-combo-boxes.md).</span></span>

## <a name="subclassing-the-window-class-of-an-existing-control"></a><span data-ttu-id="b37fb-125">Sous-classement de la classe de fenêtre d’un contrôle existant</span><span class="sxs-lookup"><span data-stu-id="b37fb-125">Subclassing the Window Class of an Existing Control</span></span>

<span data-ttu-id="b37fb-126">Le sous-classement d’un contrôle existant est une autre façon de créer un contrôle personnalisé.</span><span class="sxs-lookup"><span data-stu-id="b37fb-126">Subclassing an existing control is another way to create a custom control.</span></span> <span data-ttu-id="b37fb-127">La procédure de sous-classe peut modifier les comportements sélectionnés du contrôle en traitant les messages qui affectent les comportements sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="b37fb-127">The subclass procedure can alter selected behaviors of the control by processing those messages that affect the selected behaviors.</span></span> <span data-ttu-id="b37fb-128">Tous les autres messages passent à la procédure de fenêtre d’origine pour le contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-128">All other messages pass to the original window procedure for the control.</span></span> <span data-ttu-id="b37fb-129">Par exemple, une application peut afficher une petite bitmap en regard du texte d’un contrôle d’édition en lecture seule sur une seule ligne en sous-classant le contrôle et en traitant le message de [**\_ peinture WM**](/windows/desktop/gdi/wm-paint) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-129">For example, an application can display a small bitmap next to the text in a read-only, single-line edit control by subclassing the control and processing the [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) message.</span></span> <span data-ttu-id="b37fb-130">Pour plus d’informations, consultez [à propos des procédures de fenêtre](/windows/desktop/winmsg/about-window-procedures) et des contrôles de sous- [classe](subclassing-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b37fb-130">For more information, see [About Window Procedures](/windows/desktop/winmsg/about-window-procedures) and [Subclassing Controls](subclassing-overview.md).</span></span>

## <a name="implementing-an-application-defined-window-class"></a><span data-ttu-id="b37fb-131">Implémentation d’une classe de fenêtre Application-Defined</span><span class="sxs-lookup"><span data-stu-id="b37fb-131">Implementing an Application-Defined Window Class</span></span>

<span data-ttu-id="b37fb-132">Pour créer un contrôle qui n’est pas explicitement basé sur un contrôle existant, l’application doit créer et inscrire une classe de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="b37fb-132">To create a control that is not explicitly based on an existing control, the application must create and register a window class.</span></span> <span data-ttu-id="b37fb-133">Le processus d’inscription d’une classe de fenêtre définie par l’application pour un contrôle personnalisé est identique à l’inscription d’une classe pour une fenêtre ordinaire.</span><span class="sxs-lookup"><span data-stu-id="b37fb-133">The process for registering an application-defined window class for a custom control is the same as registering a class for an ordinary window.</span></span> <span data-ttu-id="b37fb-134">Pour créer un contrôle personnalisé, spécifiez le nom de la classe de fenêtre dans la fonction [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) ou dans un modèle de boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="b37fb-134">To create a custom control, specify the name of the window class in the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function or in a dialog box template.</span></span> <span data-ttu-id="b37fb-135">Chaque classe doit avoir un nom unique, une procédure de fenêtre correspondante et d’autres informations.</span><span class="sxs-lookup"><span data-stu-id="b37fb-135">Each class must have a unique name, a corresponding window procedure, and other information.</span></span>

<span data-ttu-id="b37fb-136">Au minimum, la procédure de fenêtre dessine le contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-136">At a minimum, the window procedure draws the control.</span></span> <span data-ttu-id="b37fb-137">Si une application utilise le contrôle pour permettre à l’utilisateur de taper des informations, la procédure de fenêtre traite également les messages d’entrée à partir du clavier et de la souris et envoie des messages de notification à la fenêtre parente.</span><span class="sxs-lookup"><span data-stu-id="b37fb-137">If an application uses the control to let the user type information, the window procedure also processes input messages from the keyboard and mouse and sends notification messages to the parent window.</span></span> <span data-ttu-id="b37fb-138">En outre, si le contrôle prend en charge les messages de contrôle, la procédure de fenêtre traite les messages qui lui sont envoyés par la fenêtre parente ou d’autres fenêtres.</span><span class="sxs-lookup"><span data-stu-id="b37fb-138">In addition, if the control supports control messages, the window procedure processes messages sent to it by the parent window or other windows.</span></span> <span data-ttu-id="b37fb-139">Par exemple, les contrôles traitent souvent le message [**WM \_ GETDLGCODE**](/windows/desktop/dlgbox/wm-getdlgcode) envoyé par les boîtes de dialogue pour indiquer à une boîte de dialogue de traiter l’entrée au clavier d’une manière donnée.</span><span class="sxs-lookup"><span data-stu-id="b37fb-139">For example, controls often process the [**WM\_GETDLGCODE**](/windows/desktop/dlgbox/wm-getdlgcode) message sent by dialog boxes to direct a dialog box to process keyboard input in a given way.</span></span>

<span data-ttu-id="b37fb-140">La procédure de fenêtre pour un contrôle défini par l’application doit traiter n’importe quel message de contrôle prédéfini dans le tableau suivant si le message affecte le fonctionnement du contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-140">The window procedure for an application-defined control should process any predefined control message in the following table if the message affects the operation of the control.</span></span>



| <span data-ttu-id="b37fb-141">Message</span><span class="sxs-lookup"><span data-stu-id="b37fb-141">Message</span></span>                                          | <span data-ttu-id="b37fb-142">Recommandation</span><span class="sxs-lookup"><span data-stu-id="b37fb-142">Recommendation</span></span>                                                                                                                                                                                                                                  |
|--------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b37fb-143">**\_GETDLGCODE WM**</span><span class="sxs-lookup"><span data-stu-id="b37fb-143">**WM\_GETDLGCODE**</span></span>](/windows/desktop/dlgbox/wm-getdlgcode)       | <span data-ttu-id="b37fb-144">Processus si le contrôle utilise les touches entrée, ÉCHAP, TAB ou flèche.</span><span class="sxs-lookup"><span data-stu-id="b37fb-144">Process if the control uses the ENTER, ESC, TAB, or arrow keys.</span></span> <span data-ttu-id="b37fb-145">La fonction [**IsDialogMessage**](/windows/desktop/api/winuser/nf-winuser-isdialogmessagea) envoie ce message aux contrôles dans une boîte de dialogue pour déterminer s’il faut traiter les clés ou les passer au contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-145">The [**IsDialogMessage**](/windows/desktop/api/winuser/nf-winuser-isdialogmessagea) function sends this message to controls in a dialog box to determine whether to process the keys or pass them to the control.</span></span> |
| [<span data-ttu-id="b37fb-146">**WM \_ GETFONT**</span><span class="sxs-lookup"><span data-stu-id="b37fb-146">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)             | <span data-ttu-id="b37fb-147">Processus si le message [**WM \_ SetFont**](/windows/desktop/winmsg/wm-setfont) est également traité.</span><span class="sxs-lookup"><span data-stu-id="b37fb-147">Process if the [**WM\_SETFONT**](/windows/desktop/winmsg/wm-setfont) message is also processed.</span></span>                                                                                                                                                                  |
| [<span data-ttu-id="b37fb-148">**WM \_ GETTEXT**</span><span class="sxs-lookup"><span data-stu-id="b37fb-148">**WM\_GETTEXT**</span></span>](/windows/desktop/winmsg/wm-gettext)             | <span data-ttu-id="b37fb-149">Processus si le texte du contrôle n’est pas le même que le titre spécifié par la fonction [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-149">Process if the control text is not the same as the title specified by the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span>                                                                                                                 |
| [<span data-ttu-id="b37fb-150">**\_GETTEXTLENGTH WM**</span><span class="sxs-lookup"><span data-stu-id="b37fb-150">**WM\_GETTEXTLENGTH**</span></span>](/windows/desktop/winmsg/wm-gettextlength) | <span data-ttu-id="b37fb-151">Processus si le texte du contrôle n’est pas le même que le titre spécifié par la fonction [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-151">Process if the control text is not the same as the title specified by the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span>                                                                                                                 |
| [<span data-ttu-id="b37fb-152">**\_KILLFOCUS WM**</span><span class="sxs-lookup"><span data-stu-id="b37fb-152">**WM\_KILLFOCUS**</span></span>](/windows/desktop/inputdev/wm-killfocus)       | <span data-ttu-id="b37fb-153">Processus si le contrôle affiche un signe insertion, un rectangle de focus ou un autre élément pour indiquer qu’il a le focus d’entrée.</span><span class="sxs-lookup"><span data-stu-id="b37fb-153">Process if the control displays a caret, a focus rectangle, or another item to indicate that it has the input focus.</span></span>                                                                                                                            |
| [<span data-ttu-id="b37fb-154">**WM \_ SetFocus**</span><span class="sxs-lookup"><span data-stu-id="b37fb-154">**WM\_SETFOCUS**</span></span>](/windows/desktop/inputdev/wm-setfocus)         | <span data-ttu-id="b37fb-155">Processus si le contrôle affiche un signe insertion, un rectangle de focus ou un autre élément pour indiquer qu’il a le focus d’entrée.</span><span class="sxs-lookup"><span data-stu-id="b37fb-155">Process if the control displays a caret, a focus rectangle, or another item to indicate that it has the input focus.</span></span>                                                                                                                            |
| [<span data-ttu-id="b37fb-156">**WM, \_ SETTEXT**</span><span class="sxs-lookup"><span data-stu-id="b37fb-156">**WM\_SETTEXT**</span></span>](/windows/desktop/winmsg/wm-settext)             | <span data-ttu-id="b37fb-157">Processus si le texte du contrôle n’est pas le même que le titre spécifié par la fonction [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-157">Process if the control text is not the same as the title specified by the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span>                                                                                                                 |
| [<span data-ttu-id="b37fb-158">**\_SetFont WM**</span><span class="sxs-lookup"><span data-stu-id="b37fb-158">**WM\_SETFONT**</span></span>](/windows/desktop/winmsg/wm-setfont)             | <span data-ttu-id="b37fb-159">Processus si le contrôle affiche du texte.</span><span class="sxs-lookup"><span data-stu-id="b37fb-159">Process if the control displays text.</span></span> <span data-ttu-id="b37fb-160">Le système envoie ce message lors de la création d’une boîte de dialogue avec le \_ style DS setfont.</span><span class="sxs-lookup"><span data-stu-id="b37fb-160">The system sends this message when creating a dialog box that has the DS\_SETFONT style.</span></span>                                                                                                                  |



 

<span data-ttu-id="b37fb-161">Les messages de contrôle définis par l’application sont spécifiques au contrôle donné et doivent être envoyés explicitement au contrôle à l’aide d’une fonction [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) ou [**SendDlgItemMessage**](/windows/desktop/api/winuser/nf-winuser-senddlgitemmessagea) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-161">Application-defined control messages are specific to the given control and must be explicitly sent to the control by using a [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) or [**SendDlgItemMessage**](/windows/desktop/api/winuser/nf-winuser-senddlgitemmessagea) function.</span></span> <span data-ttu-id="b37fb-162">La valeur numérique de chaque message doit être unique et ne doit pas être en conflit avec les valeurs d’autres messages de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="b37fb-162">The numeric value for each message must be unique and must not conflict with the values of other window messages.</span></span> <span data-ttu-id="b37fb-163">Pour s’assurer que les valeurs des messages définis par l’application ne sont pas en conflit, une application doit créer chaque valeur en ajoutant un numéro unique à la valeur de l' [**\_ utilisateur WM**](/windows/desktop/winmsg/wm-user) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-163">To ensure that application-defined message values do not conflict, an application should create each value by adding a unique number to the [**WM\_USER**](/windows/desktop/winmsg/wm-user) value.</span></span>

## <a name="sending-notifications-from-a-control"></a><span data-ttu-id="b37fb-164">Envoi de notifications à partir d’un contrôle</span><span class="sxs-lookup"><span data-stu-id="b37fb-164">Sending Notifications from a Control</span></span>

<span data-ttu-id="b37fb-165">Des contrôles personnalisés peuvent être nécessaires pour envoyer des notifications d’événements à la fenêtre parente afin que l’application hôte puisse répondre à ces événements.</span><span class="sxs-lookup"><span data-stu-id="b37fb-165">Custom controls might be required to send notifications of events to the parent window so that the host application can respond to these events.</span></span> <span data-ttu-id="b37fb-166">Par exemple, un affichage de liste personnalisé peut envoyer une notification lorsque l’utilisateur sélectionne un élément et une autre notification lors d’un double-clic sur un élément.</span><span class="sxs-lookup"><span data-stu-id="b37fb-166">For example, a custom list view might send a notification when the user selects an item, and another notification when an item is double-clicked.</span></span>

<span data-ttu-id="b37fb-167">Les notifications sont envoyées en tant que [**\_ commandes WM**](/windows/desktop/menurc/wm-command) ou messages de [**\_ notification WM**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-167">Notifications are sent as [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) or [**WM\_NOTIFY**](wm-notify.md) messages.</span></span> <span data-ttu-id="b37fb-168">**WM \_** Les messages de notification contiennent plus d’informations que les messages de **\_ commande WM** .</span><span class="sxs-lookup"><span data-stu-id="b37fb-168">**WM\_NOTIFY** messages carry more information than **WM\_COMMAND** messages.</span></span>

<span data-ttu-id="b37fb-169">L’identificateur de contrôle est un nombre unique que l’application utilise pour identifier le contrôle qui envoie le message.</span><span class="sxs-lookup"><span data-stu-id="b37fb-169">The control identifier is a unique number the application uses to identify the control sending the message.</span></span> <span data-ttu-id="b37fb-170">L’application définit l’identificateur d’un contrôle lorsqu’il crée le contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-170">The application sets the identifier for a control when it creates the control.</span></span> <span data-ttu-id="b37fb-171">L’application spécifie l’identificateur dans le paramètre *HMENU* de la fonction [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) ou dans le membre **ID** de la structure [**DLGITEMTEMPLATEEX**](/windows/desktop/dlgbox/dlgitemtemplateex) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-171">The application specifies the identifier either in the *hMenu* parameter of the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function or in the **id** member of the [**DLGITEMTEMPLATEEX**](/windows/desktop/dlgbox/dlgitemtemplateex) structure.</span></span>

<span data-ttu-id="b37fb-172">Étant donné que le contrôle lui-même ne définit pas l’identificateur de contrôle, le contrôle doit récupérer l’identificateur avant de pouvoir envoyer des messages de notification.</span><span class="sxs-lookup"><span data-stu-id="b37fb-172">Because the control itself does not set the control identifier, the control must retrieve the identifier before it can send notification messages.</span></span> <span data-ttu-id="b37fb-173">Un contrôle doit utiliser la fonction [**GetDlgCtrlID**](/windows/desktop/api/winuser/nf-winuser-getdlgctrlid) pour récupérer son propre identificateur de contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-173">A control must use the [**GetDlgCtrlID**](/windows/desktop/api/winuser/nf-winuser-getdlgctrlid) function to retrieve its own control identifier.</span></span> <span data-ttu-id="b37fb-174">Bien que l’identificateur de contrôle soit spécifié comme handle de menu lorsque le contrôle est créé, la fonction [**GetMenu**](/windows/desktop/api/winuser/nf-winuser-getmenu) ne peut pas être utilisée pour récupérer l’identificateur.</span><span class="sxs-lookup"><span data-stu-id="b37fb-174">Although the control identifier is specified as the menu handle when the control is created, the [**GetMenu**](/windows/desktop/api/winuser/nf-winuser-getmenu) function cannot be used to retrieve the identifier.</span></span> <span data-ttu-id="b37fb-175">Un contrôle peut également récupérer l’identificateur du membre **HMENU** dans la structure [**CREATESTRUCT**](/windows/win32/api/winuser/ns-winuser-createstructa) lors du traitement du message [**WM \_ Create**](/windows/desktop/winmsg/wm-create) .</span><span class="sxs-lookup"><span data-stu-id="b37fb-175">Alternatively, a control can retrieve the identifier from the **hMenu** member in the [**CREATESTRUCT**](/windows/win32/api/winuser/ns-winuser-createstructa) structure while processing the [**WM\_CREATE**](/windows/desktop/winmsg/wm-create) message.</span></span>

<span data-ttu-id="b37fb-176">Les exemples suivants, où *hwndControl* est le descripteur de la fenêtre de contrôle et que la définition de la \_ notification CN est une définition de notification personnalisée, illustrent les deux façons d’envoyer une notification spécifique au contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-176">The following examples, where *hwndControl* is the handle of the control window and CN\_VALUECHANGED is a custom notification definition, show the two ways of sending a control-specific notification.</span></span>


```
 // Send as WM_COMMAND.
SendMessage(GetParent(hwndControl), 
    WM_COMMAND,
    MAKEWPARAM(GetDlgCtrlID(hwndControl), CN_VALUECHANGED),
    (LPARAM)hwndControl);

// Send as WM_NOTIFY.           
NMHDR nmh;
nmh.code = CN_VALUECHANGED;
nmh.idFrom = GetDlgCtrlID(hwndControl);
nmh.hwndFrom = hwndControl;
SendMessage(GetParent(hwndControl), 
    WM_NOTIFY, 
    (WPARAM)hwndControl, 
    (LPARAM)&nmh);
```



<span data-ttu-id="b37fb-177">Notez que la structure [**NMHDR**](/windows/desktop/api/richedit/ns-richedit-nmhdr) peut faire partie d’une plus grande structure définie par le contrôle qui contient des informations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="b37fb-177">Note that the [**NMHDR**](/windows/desktop/api/richedit/ns-richedit-nmhdr) structure can be part of a larger control-defined structure that contains additional information.</span></span> <span data-ttu-id="b37fb-178">Dans l’exemple, les valeurs anciennes et nouvelles du contrôle peuvent être contenues dans cette structure.</span><span class="sxs-lookup"><span data-stu-id="b37fb-178">In the example, the old and new values of the control might be contained in this structure.</span></span> <span data-ttu-id="b37fb-179">(Ces structures étendues sont utilisées avec de nombreuses notifications standard ; par exemple, consultez [LVN \_ INSERTITEM](lvn-insertitem.md), qui utilise la structure [**NMLISTVIEW**](/windows/win32/api/commctrl/ns-commctrl-nmlistview) .)</span><span class="sxs-lookup"><span data-stu-id="b37fb-179">(Such extended structures are used with many standard notifications; for example, see [LVN\_INSERTITEM](lvn-insertitem.md), which uses the [**NMLISTVIEW**](/windows/win32/api/commctrl/ns-commctrl-nmlistview) structure.)</span></span>

## <a name="accessibility"></a><span data-ttu-id="b37fb-180">Accessibilité</span><span class="sxs-lookup"><span data-stu-id="b37fb-180">Accessibility</span></span>

<span data-ttu-id="b37fb-181">Tous les contrôles communs prennent en charge Microsoft Active Accessibility (MSAA), qui permet l’accès par programme aux applications de technologie accessibles telles que les lecteurs d’écran.</span><span class="sxs-lookup"><span data-stu-id="b37fb-181">All the common controls support Microsoft Active Accessibility (MSAA), which enables programmatic access by accessible-technology applications such as screen-readers.</span></span> <span data-ttu-id="b37fb-182">MSAA permet également l’automatisation d’interface utilisateur, une technologie plus récente, pour interagir avec les contrôles.</span><span class="sxs-lookup"><span data-stu-id="b37fb-182">MSAA also enables UI Automation, a newer technology, to interact with controls.</span></span>

<span data-ttu-id="b37fb-183">Les contrôles personnalisés doivent implémenter l’interface [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) (pour prendre en charge MSAA) ou les interfaces UI Automation, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="b37fb-183">Custom controls should implement either the [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) interface (to support MSAA) or the UI Automation interfaces, or both.</span></span> <span data-ttu-id="b37fb-184">Dans le cas contraire, les produits de technologie accessible ne pourront obtenir que des informations très limitées sur la fenêtre de contrôle, n’auront pas accès aux propriétés du contrôle et ne pourront pas déclencher d’événements dans le contrôle.</span><span class="sxs-lookup"><span data-stu-id="b37fb-184">Otherwise, accessible-technology products will be able to obtain only very limited information about the control window, will not have access to the control's properties, and will be unable to trigger events in the control.</span></span>

<span data-ttu-id="b37fb-185">Pour plus d’informations sur la mise à disposition de votre contrôle, consultez [API Windows Automation](/windows/desktop/WinAuto/windows-automation-api-portal).</span><span class="sxs-lookup"><span data-stu-id="b37fb-185">For more information about making your control accessible, see [Windows Automation API](/windows/desktop/WinAuto/windows-automation-api-portal).</span></span>

## <a name="related-topics"></a><span data-ttu-id="b37fb-186">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="b37fb-186">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="b37fb-187">**Méthodologique**</span><span class="sxs-lookup"><span data-stu-id="b37fb-187">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="b37fb-188">Référence de contrôle générale</span><span class="sxs-lookup"><span data-stu-id="b37fb-188">General Control Reference</span></span>](common-control-reference.md)
</dt> <dt>

[<span data-ttu-id="b37fb-189">Personnalisation de l’apparence d’un contrôle à l’aide d’un dessin personnalisé</span><span class="sxs-lookup"><span data-stu-id="b37fb-189">Customizing a Control's Appearance Using Custom Draw</span></span>](custom-draw.md)
</dt> <dt>

[<span data-ttu-id="b37fb-190">Messages de contrôle</span><span class="sxs-lookup"><span data-stu-id="b37fb-190">Control Messages</span></span>](control-messages.md)
</dt> <dt>

[<span data-ttu-id="b37fb-191">Utilisation de styles visuels avec des contrôles Owner-Drawn</span><span class="sxs-lookup"><span data-stu-id="b37fb-191">Using Visual Styles with Owner-Drawn Controls</span></span>](using-visual-styles.md)
</dt> </dl>

 

 