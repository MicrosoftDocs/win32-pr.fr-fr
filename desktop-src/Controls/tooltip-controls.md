---
title: À propos des contrôles ToolTip
description: Les info-bulles s’affichent automatiquement ou s’affichent quand l’utilisateur place le pointeur de la souris sur un outil ou un autre élément d’interface utilisateur.
ms.assetid: 1020cec7-57b4-4463-9419-f80fd14fa12c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9c1042523c86e794865da5d38fb023ee37d60b4
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "104031937"
---
# <a name="about-tooltip-controls"></a><span data-ttu-id="68904-103">À propos des contrôles ToolTip</span><span class="sxs-lookup"><span data-stu-id="68904-103">About Tooltip Controls</span></span>

<span data-ttu-id="68904-104">Les info-bulles s’affichent automatiquement ou s’affichent quand l’utilisateur place le pointeur de la souris sur un outil ou un autre élément d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68904-104">Tooltips appear automatically, or pop up, when the user pauses the mouse pointer over a tool or some other UI element.</span></span> <span data-ttu-id="68904-105">L’info-bulle apparaît près du pointeur et disparaît lorsque l’utilisateur clique sur un bouton de la souris, éloigne le pointeur de l’outil ou attend simplement quelques secondes.</span><span class="sxs-lookup"><span data-stu-id="68904-105">The tooltip appears near the pointer and disappears when the user clicks a mouse button, moves the pointer away from the tool, or simply waits for a few seconds.</span></span>

<span data-ttu-id="68904-106">Le contrôle ToolTip de l’illustration suivante affiche des informations sur un fichier sur le bureau Windows.</span><span class="sxs-lookup"><span data-stu-id="68904-106">The tooltip control in the following illustration displays information about a file on the Windows desktop.</span></span> <span data-ttu-id="68904-107">Lorsque vous déplacez la souris sur l’illustration, vous devez également voir une info-bulle en direct qui contient du texte descriptif.</span><span class="sxs-lookup"><span data-stu-id="68904-107">As you move the mouse over the illustration, you should also see a live tooltip that contains descriptive text.</span></span>

![capture d’écran montrant du texte dans une info-bulle qui apparaît sur un fichier sur le Bureau](images/tt-desktop.png)

<span data-ttu-id="68904-109">Cette section décrit le fonctionnement des contrôles ToolTip et la façon dont vous les créez.</span><span class="sxs-lookup"><span data-stu-id="68904-109">This section describes how tooltip controls work and how you create them.</span></span>

-   [<span data-ttu-id="68904-110">Comportement et apparence de l’info-bulle</span><span class="sxs-lookup"><span data-stu-id="68904-110">Tooltip Behavior and Appearance</span></span>](#tooltip-behavior-and-appearance)
-   [<span data-ttu-id="68904-111">Création de contrôles ToolTip</span><span class="sxs-lookup"><span data-stu-id="68904-111">Creating Tooltip Controls</span></span>](#creating-tooltip-controls)
-   [<span data-ttu-id="68904-112">Activation des contrôles ToolTip</span><span class="sxs-lookup"><span data-stu-id="68904-112">Activating Tooltip Controls</span></span>](#activating-tooltip-controls)
-   [<span data-ttu-id="68904-113">Outils de prise en charge</span><span class="sxs-lookup"><span data-stu-id="68904-113">Supporting Tools</span></span>](#supporting-tools)
-   [<span data-ttu-id="68904-114">Affichage du texte</span><span class="sxs-lookup"><span data-stu-id="68904-114">Displaying Text</span></span>](#displaying-text)
-   [<span data-ttu-id="68904-115">Messagerie et notification</span><span class="sxs-lookup"><span data-stu-id="68904-115">Messaging and Notification</span></span>](#messaging-and-notification)
-   [<span data-ttu-id="68904-116">Test des résultats</span><span class="sxs-lookup"><span data-stu-id="68904-116">Hit Testing</span></span>](#hit-testing)
-   [<span data-ttu-id="68904-117">Traitement des messages par défaut</span><span class="sxs-lookup"><span data-stu-id="68904-117">Default Message Processing</span></span>](#default-message-processing)

## <a name="tooltip-behavior-and-appearance"></a><span data-ttu-id="68904-118">Comportement et apparence de l’info-bulle</span><span class="sxs-lookup"><span data-stu-id="68904-118">Tooltip Behavior and Appearance</span></span>

<span data-ttu-id="68904-119">Les contrôles ToolTip peuvent afficher une seule ligne de texte ou plusieurs lignes.</span><span class="sxs-lookup"><span data-stu-id="68904-119">Tooltip controls can display a single line of text or multiple lines.</span></span> <span data-ttu-id="68904-120">Leurs angles peuvent être arrondis ou carrés.</span><span class="sxs-lookup"><span data-stu-id="68904-120">Their corners can be rounded or square.</span></span> <span data-ttu-id="68904-121">Ils peuvent avoir ou non une tige qui pointe vers les outils comme une bulle d’outils de synthèse vocale.</span><span class="sxs-lookup"><span data-stu-id="68904-121">They might or might not have a stem that points to the tools like a cartoon speech balloon.</span></span> <span data-ttu-id="68904-122">Le texte d’info-bulle peut être stationnaire ou peut se déplacer avec le pointeur de la souris, appelé suivi.</span><span class="sxs-lookup"><span data-stu-id="68904-122">Tooltip text can be stationary or can move with the mouse pointer, called tracking.</span></span> <span data-ttu-id="68904-123">Le texte fixe peut être affiché à côté d’un outil ou il peut être affiché sur un outil, appelé sur place.</span><span class="sxs-lookup"><span data-stu-id="68904-123">Stationary text can be displayed adjacent to a tool or it can be displayed over a tool, which is referred to as in-place.</span></span> <span data-ttu-id="68904-124">Les info-bulles standard sont fixes, affichent une seule ligne de texte, ont des angles carrés et n’ont pas de tige pointant sur l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-124">Standard tooltips are stationary, display a single line of text, have square corners, and have no stem pointing to the tool.</span></span>

<span data-ttu-id="68904-125">Les info-bulles de suivi, qui sont prises en charge par la [version 4,70](common-control-versions.md) des contrôles communs, modifient la position sur l’écran dynamiquement.</span><span class="sxs-lookup"><span data-stu-id="68904-125">Tracking tooltips, which are supported by [version 4.70](common-control-versions.md) of the common controls, change position on the screen dynamically.</span></span> <span data-ttu-id="68904-126">En mettant à jour rapidement la position, ces contrôles ToolTip semblent se déplacer correctement ou « suivre ».</span><span class="sxs-lookup"><span data-stu-id="68904-126">By rapidly updating the position, these tooltip controls appear to move smoothly, or "track."</span></span> <span data-ttu-id="68904-127">Elles sont utiles lorsque vous souhaitez que le texte info-bulle suive la position du pointeur de la souris à mesure qu’il se déplace.</span><span class="sxs-lookup"><span data-stu-id="68904-127">These are useful when you want tooltip text to follow the position of the mouse pointer as it moves.</span></span> <span data-ttu-id="68904-128">Pour plus d’informations sur le suivi des info-bulles et un exemple de code qui montre comment les créer, consultez [suivi des info-bulles](using-tooltip-contro.md).</span><span class="sxs-lookup"><span data-stu-id="68904-128">For more information about tracking tooltips and an example with code that shows how you create them, see [Tracking Tooltips](using-tooltip-contro.md).</span></span>

<span data-ttu-id="68904-129">Les info-bulles multilignes, qui sont également prises en charge par la version 4,70 des contrôles communs, affichent du texte sur plusieurs lignes.</span><span class="sxs-lookup"><span data-stu-id="68904-129">Multiline tooltips, which are also supported by version 4.70 of the common controls, display text on more than one line.</span></span> <span data-ttu-id="68904-130">Ils sont utiles pour afficher des messages longs.</span><span class="sxs-lookup"><span data-stu-id="68904-130">These are useful for displaying lengthy messages.</span></span> <span data-ttu-id="68904-131">Pour plus d’informations et pour obtenir un exemple qui montre comment créer des info-bulles multilignes, consultez [info-bulles multilignes](using-tooltip-contro.md).</span><span class="sxs-lookup"><span data-stu-id="68904-131">For more information and an example that shows how to create multiline tooltips, see [Multiline Tooltips](using-tooltip-contro.md).</span></span>

<span data-ttu-id="68904-132">Les info-bulles sont affichées dans une zone avec des angles arrondis et une tige pointant sur l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-132">Balloon tooltips are displayed in a box with rounded corners and a stem pointing to the tool.</span></span> <span data-ttu-id="68904-133">Il peut s’agir d’une ligne ou d’une ligne multiligne.</span><span class="sxs-lookup"><span data-stu-id="68904-133">They can be either single-line or multiline.</span></span> <span data-ttu-id="68904-134">L’illustration suivante montre une info-bulle avec la tige et le rectangle dans leurs positions par défaut.</span><span class="sxs-lookup"><span data-stu-id="68904-134">The following illustration shows a balloon tooltip with the stem and rectangle in their default positions.</span></span> <span data-ttu-id="68904-135">Pour plus d’informations sur les info-bulles et un exemple qui montre comment les créer, consultez [utilisation de contrôles ToolTip](using-tooltip-contro.md).</span><span class="sxs-lookup"><span data-stu-id="68904-135">For more information about balloon tooltips and an example that shows how to create them, see [Using Tooltip Controls](using-tooltip-contro.md).</span></span>

![capture d’écran montrant une info-bulle contenant une ligne de texte, positionnée au-dessus d’un bouton sur une boîte de dialogue](images/tt-balloon.png)

<span data-ttu-id="68904-137">Une info-bulle peut également comporter un texte de titre et une icône, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="68904-137">A tooltip can also have title text and an icon, as shown in the following illustration.</span></span> <span data-ttu-id="68904-138">Notez que l’info-bulle doit contenir du texte. s’il n’a qu’un texte de titre, l’info-bulle ne s’affiche pas.</span><span class="sxs-lookup"><span data-stu-id="68904-138">Note that the tooltip must have text; if it has only title text, the tooltip does not display.</span></span> <span data-ttu-id="68904-139">De même, l’icône n’apparaît pas, sauf s’il existe un titre.</span><span class="sxs-lookup"><span data-stu-id="68904-139">Also the icon does not appear unless there is a title.</span></span>

![capture d’écran montrant une info-bulle avec une icône, un titre et un texte, positionné sous un bouton dans une boîte de dialogue](images/tt-titled.png)

<span data-ttu-id="68904-141">Parfois, les chaînes de texte sont découpées, car elles sont trop longues pour s’afficher complètement dans une petite fenêtre.</span><span class="sxs-lookup"><span data-stu-id="68904-141">Sometimes text strings are clipped because they are too long to be displayed completely in a small window.</span></span> <span data-ttu-id="68904-142">Les info-bulles sur place sont utilisées pour afficher des chaînes de texte pour les objets qui ont été découpés, tels que le nom de fichier dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="68904-142">In-place tooltips are used to display text strings for objects that have been clipped, such as the file name in the following illustration.</span></span> <span data-ttu-id="68904-143">Pour obtenir un exemple qui montre comment créer des info-bulles sur place, consultez [info-bulles sur place](using-tooltip-contro.md).</span><span class="sxs-lookup"><span data-stu-id="68904-143">For an example that shows how to create in-place tooltips, see [In-Place Tooltips](using-tooltip-contro.md).</span></span>

![capture d’écran montrant une info-bulle contenant un nom de fichier positionné en regard d’une icône de fichier dans un contrôle d’arborescence](images/tt-inplace.png)

<span data-ttu-id="68904-145">Le curseur doit pointer sur un outil pendant une période de temps avant que l’info-bulle ne s’affiche.</span><span class="sxs-lookup"><span data-stu-id="68904-145">The cursor must hover over a tool for a period of time before the tooltip is displayed.</span></span> <span data-ttu-id="68904-146">La durée par défaut de ce délai est contrôlée par le double-clic de l’utilisateur et correspond généralement à environ une demi-seconde.</span><span class="sxs-lookup"><span data-stu-id="68904-146">The default duration of this timeout is controlled by the user's double click time and is typically about one-half second.</span></span> <span data-ttu-id="68904-147">Pour spécifier une valeur de délai d’attente non définie par défaut, envoyez au contrôle ToolTip un message [**atténuation \_ SETDELAYTIME**](ttm-setdelaytime.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-147">To specify a non-default timeout value, send the tooltip control a [**TTM\_SETDELAYTIME**](ttm-setdelaytime.md) message.</span></span>

## <a name="creating-tooltip-controls"></a><span data-ttu-id="68904-148">Création de contrôles ToolTip</span><span class="sxs-lookup"><span data-stu-id="68904-148">Creating Tooltip Controls</span></span>

<span data-ttu-id="68904-149">Pour créer un contrôle ToolTip, appelez [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) et spécifiez la classe de fenêtre d' [**info-bulle \_ Class**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-149">To create a tooltip control, call [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) and specify the [**TOOLTIPS\_CLASS**](common-control-window-classes.md) window class.</span></span> <span data-ttu-id="68904-150">Cette classe est inscrite lors du chargement de la DLL de contrôles communs.</span><span class="sxs-lookup"><span data-stu-id="68904-150">This class is registered when the common control DLL is loaded.</span></span> <span data-ttu-id="68904-151">Pour vous assurer que cette DLL est chargée, incluez la fonction [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) dans votre application.</span><span class="sxs-lookup"><span data-stu-id="68904-151">To ensure that this DLL is loaded, include the [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) function in your application.</span></span> <span data-ttu-id="68904-152">Vous devez définir explicitement un contrôle ToolTip comme étant le plus haut.</span><span class="sxs-lookup"><span data-stu-id="68904-152">You must explicitly define a tooltip control as topmost.</span></span> <span data-ttu-id="68904-153">Dans le cas contraire, elle peut être couverte par la fenêtre parente.</span><span class="sxs-lookup"><span data-stu-id="68904-153">Otherwise, it might be covered by the parent window.</span></span> <span data-ttu-id="68904-154">Le fragment de code suivant montre comment créer un contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-154">The following code fragment shows how to create a tooltip control.</span></span>


```
HWND hwndTip = CreateWindowEx(NULL, TOOLTIPS_CLASS, NULL,
                            WS_POPUP | TTS_NOPREFIX | TTS_ALWAYSTIP,
                            CW_USEDEFAULT, CW_USEDEFAULT,
                            CW_USEDEFAULT, CW_USEDEFAULT,
                            hwndParent, NULL, hinstMyDll,
                            NULL);

SetWindowPos(hwndTip, HWND_TOPMOST,0, 0, 0, 0,
             SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE);
```



<span data-ttu-id="68904-155">La procédure de fenêtre pour le contrôle ToolTip définit automatiquement la taille, la position et la visibilité du contrôle.</span><span class="sxs-lookup"><span data-stu-id="68904-155">The window procedure for the tooltip control automatically sets the size, position, and visibility of the control.</span></span> <span data-ttu-id="68904-156">La hauteur de la fenêtre d’info-bulle est basée sur la hauteur de la police actuellement sélectionnée dans le contexte de périphérique pour le contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-156">The height of the tooltip window is based on the height of the font currently selected into the device context for the tooltip control.</span></span> <span data-ttu-id="68904-157">La largeur varie en fonction de la longueur de la chaîne actuellement dans la fenêtre d’info-bulle.</span><span class="sxs-lookup"><span data-stu-id="68904-157">The width varies based on the length of the string currently in the tooltip window.</span></span>

## <a name="activating-tooltip-controls"></a><span data-ttu-id="68904-158">Activation des contrôles ToolTip</span><span class="sxs-lookup"><span data-stu-id="68904-158">Activating Tooltip Controls</span></span>

<span data-ttu-id="68904-159">Un contrôle ToolTip peut être actif ou inactif.</span><span class="sxs-lookup"><span data-stu-id="68904-159">A tooltip control can be either active or inactive.</span></span> <span data-ttu-id="68904-160">Lorsqu’il est actif, le texte d’info-bulle s’affiche lorsque le pointeur de la souris se trouve sur un outil.</span><span class="sxs-lookup"><span data-stu-id="68904-160">When it is active, the tooltip text appears when the mouse pointer is on a tool.</span></span> <span data-ttu-id="68904-161">Lorsqu’il est inactif, le texte d’info-bulle ne s’affiche pas, même si le pointeur se trouve sur un outil.</span><span class="sxs-lookup"><span data-stu-id="68904-161">When it is inactive, the tooltip text does not appear, even if the pointer is on a tool.</span></span> <span data-ttu-id="68904-162">Le message d' [**\_ activation atténuation**](ttm-activate.md) active et désactive un contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-162">The [**TTM\_ACTIVATE**](ttm-activate.md) message activates and deactivates a tooltip control.</span></span>

## <a name="supporting-tools"></a><span data-ttu-id="68904-163">Outils de prise en charge</span><span class="sxs-lookup"><span data-stu-id="68904-163">Supporting Tools</span></span>

<span data-ttu-id="68904-164">Un contrôle ToolTip peut prendre en charge n’importe quel nombre d’outils.</span><span class="sxs-lookup"><span data-stu-id="68904-164">A tooltip control can support any number of tools.</span></span> <span data-ttu-id="68904-165">Pour prendre en charge un outil particulier, vous devez inscrire l’outil avec le contrôle ToolTip en envoyant le contrôle au message [**atténuation \_ ADDTOOL**](ttm-addtool.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-165">To support a particular tool, you must register the tool with the tooltip control by sending the control the [**TTM\_ADDTOOL**](ttm-addtool.md) message.</span></span> <span data-ttu-id="68904-166">Le message inclut l’adresse d’une structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) , qui fournit les informations dont le contrôle ToolTip a besoin pour afficher le texte de l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-166">The message includes the address of a [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure, which provides information the tooltip control needs to display text for the tool.</span></span> <span data-ttu-id="68904-167">Le membre **uID** de la structure **TOOLINFO** est défini par l’application.</span><span class="sxs-lookup"><span data-stu-id="68904-167">The **uID** member of the **TOOLINFO** structure is defined by the application.</span></span> <span data-ttu-id="68904-168">Chaque fois que vous ajoutez un outil, votre application fournit un identificateur unique.</span><span class="sxs-lookup"><span data-stu-id="68904-168">Each time you add a tool, your application provides a unique identifier.</span></span> <span data-ttu-id="68904-169">Le membre **cbSize** de la structure **TOOLINFO** est requis et doit spécifier la taille de la structure.</span><span class="sxs-lookup"><span data-stu-id="68904-169">The **cbSize** member of the **TOOLINFO** structure is required, and must specify the size of the structure.</span></span>

<span data-ttu-id="68904-170">Un contrôle ToolTip prend en charge les outils implémentés en tant que fenêtres (telles que les fenêtres enfants ou les fenêtres de contrôle) et en tant que zones rectangulaires dans la zone cliente d’une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="68904-170">A tooltip control supports tools implemented as windows (such as child windows or control windows) and as rectangular areas within a window's client area.</span></span> <span data-ttu-id="68904-171">Lorsque vous ajoutez un outil implémenté en tant que zone rectangulaire, le membre **HWND** de la structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) doit spécifier le handle de la fenêtre qui contient la zone, et le membre **Rect** doit spécifier les coordonnées clientes du rectangle englobant de la zone.</span><span class="sxs-lookup"><span data-stu-id="68904-171">When you add a tool implemented as a rectangular area, the **hwnd** member of the [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure must specify the handle to the window that contains the area, and the **rect** member must specify the client coordinates of the area's bounding rectangle.</span></span> <span data-ttu-id="68904-172">En outre, le membre **uID** doit spécifier l’identificateur défini par l’application pour l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-172">In addition, the **uID** member must specify the application-defined identifier for the tool.</span></span>

<span data-ttu-id="68904-173">Lorsque vous ajoutez un outil implémenté en tant que fenêtre, le membre **uID** de la structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) doit contenir le handle de fenêtre de l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-173">When you add a tool implemented as a window, the **uID** member of the [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure must contain the window handle to the tool.</span></span> <span data-ttu-id="68904-174">En outre, le membre **uFlags** doit spécifier la valeur **ttf \_ IDISHWND** , qui indique au contrôle ToolTip d’interpréter le membre **uID** comme un handle de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="68904-174">Also, the **uFlags** member must specify the **TTF\_IDISHWND** value, which tells the tooltip control to interpret the **uID** member as a window handle.</span></span>

## <a name="displaying-text"></a><span data-ttu-id="68904-175">Affichage du texte</span><span class="sxs-lookup"><span data-stu-id="68904-175">Displaying Text</span></span>

<span data-ttu-id="68904-176">Lorsque vous ajoutez un outil à un contrôle ToolTip, le membre **lpszText** de la structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) doit spécifier l’adresse de la chaîne à afficher pour l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-176">When you add a tool to a tooltip control, the **lpszText** member of the [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure must specify the address of the string to display for the tool.</span></span> <span data-ttu-id="68904-177">Après avoir ajouté un outil, vous pouvez modifier le texte à l’aide du message [**atténuation \_ UPDATETIPTEXT**](ttm-updatetiptext.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-177">After you add a tool, you can change the text using the [**TTM\_UPDATETIPTEXT**](ttm-updatetiptext.md) message.</span></span>

<span data-ttu-id="68904-178">Si le mot de poids fort de **lpszText** est égal à zéro, le mot de poids faible doit être l’identificateur d’une ressource de type chaîne.</span><span class="sxs-lookup"><span data-stu-id="68904-178">If the high-order word of **lpszText** is zero, the low-order word must be the identifier of a string resource.</span></span> <span data-ttu-id="68904-179">Lorsque le contrôle ToolTip a besoin du texte, le système charge la ressource de chaîne spécifiée à partir de l’instance d’application identifiée par le membre **HINST** de la structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) .</span><span class="sxs-lookup"><span data-stu-id="68904-179">When the tooltip control needs the text, the system loads the specified string resource from the application instance identified by the **hinst** member of the [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure.</span></span>

<span data-ttu-id="68904-180">Si vous spécifiez la \_ valeur LPSTR TEXTCALLBACK dans le membre **lpszText** , le contrôle ToolTip notifie la fenêtre spécifiée dans le membre **HWND** de la structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa)chaque fois que le contrôle ToolTip a besoin d’afficher du texte pour l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-180">If you specify the LPSTR\_TEXTCALLBACK value in the **lpszText** member, the tooltip control notifies the window specified in the **hwnd** member of the [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa)structure whenever the tooltip control needs to display text for the tool.</span></span> <span data-ttu-id="68904-181">Le contrôle ToolTip envoie le code de notification [ttn \_ GETDISPINFO](ttn-getdispinfo.md) à la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="68904-181">The tooltip control sends the [TTN\_GETDISPINFO](ttn-getdispinfo.md) notification code to the window.</span></span> <span data-ttu-id="68904-182">Le message inclut l’adresse d’une structure [**NMTTDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmttdispinfoa) , qui contient le handle de fenêtre ainsi que l’identificateur défini par l’application pour l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-182">The message includes the address of a [**NMTTDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmttdispinfoa) structure, which contains the window handle as well as the application-defined identifier for the tool.</span></span> <span data-ttu-id="68904-183">La fenêtre examine la structure pour déterminer l’outil pour lequel le texte est nécessaire, et remplit les membres de structure appropriés avec les informations dont le contrôle ToolTip a besoin pour afficher la chaîne.</span><span class="sxs-lookup"><span data-stu-id="68904-183">The window examines the structure to determine the tool for which text is needed, and it fills the appropriate structure members with information that the tooltip control needs in order to display the string.</span></span>

> [!Note]  
> <span data-ttu-id="68904-184">La longueur maximale du texte d’info-bulle standard est de 80 caractères.</span><span class="sxs-lookup"><span data-stu-id="68904-184">The maximum length for standard tooltip text is 80 characters.</span></span> <span data-ttu-id="68904-185">Pour plus d’informations, consultez la structure [**NMTTDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmttdispinfoa) .</span><span class="sxs-lookup"><span data-stu-id="68904-185">For more information, see the [**NMTTDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmttdispinfoa) structure.</span></span> <span data-ttu-id="68904-186">Le texte info-bulle multiligne peut être plus long.</span><span class="sxs-lookup"><span data-stu-id="68904-186">Multiline tooltip text can be longer.</span></span>

 

<span data-ttu-id="68904-187">De nombreuses applications créent des barres d’outils qui contiennent des outils qui correspondent à des commandes de menu.</span><span class="sxs-lookup"><span data-stu-id="68904-187">Many applications create toolbars containing tools that correspond to menu commands.</span></span> <span data-ttu-id="68904-188">Pour ces outils, il est pratique que le contrôle ToolTip affiche le même texte que l’élément de menu correspondant.</span><span class="sxs-lookup"><span data-stu-id="68904-188">For such tools, it is convenient for the tooltip control to display the same text as the corresponding menu item.</span></span> <span data-ttu-id="68904-189">Le système supprime automatiquement les caractères d’accélérateur esperluette (&) de toutes les chaînes passées à un contrôle ToolTip, puis met fin à la chaîne au premier caractère de tabulation ( \\ t), à moins que le contrôle n’ait le style de [**\_ préfixe TTS**](tooltip-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-189">The system automatically strips the ampersand (&) accelerator characters from all strings passed to a tooltip control, and terminates the string at the first tab character (\\t), unless the control has the [**TTS\_NOPREFIX**](tooltip-styles.md) style.</span></span>

<span data-ttu-id="68904-190">Pour récupérer le texte d’un outil, utilisez le message [**atténuation \_ GETTEXT**](ttm-gettext.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-190">To retrieve the text for a tool, use the [**TTM\_GETTEXT**](ttm-gettext.md) message.</span></span>

## <a name="messaging-and-notification"></a><span data-ttu-id="68904-191">Messagerie et notification</span><span class="sxs-lookup"><span data-stu-id="68904-191">Messaging and Notification</span></span>

<span data-ttu-id="68904-192">Le texte info-bulle s’affiche normalement lorsque le pointeur de la souris est placé sur une zone, généralement le rectangle défini par un outil tel qu’un contrôle bouton.</span><span class="sxs-lookup"><span data-stu-id="68904-192">Tooltip text is normally displayed when the mouse pointer hovers over an area, typically the rectangle defined by a tool such as a button control.</span></span> <span data-ttu-id="68904-193">Toutefois, Microsoft Windows envoie uniquement des messages liés à la souris à la fenêtre qui contient le pointeur, pas le contrôle ToolTip lui-même.</span><span class="sxs-lookup"><span data-stu-id="68904-193">However, Microsoft Windows only sends mouse-related messages to the window that contains the pointer, not the tooltip control itself.</span></span> <span data-ttu-id="68904-194">Les informations relatives à la souris doivent être relayées vers le contrôle ToolTip afin qu’il affiche le texte d’info-bulle à l’heure et au lieu appropriés.</span><span class="sxs-lookup"><span data-stu-id="68904-194">Mouse-related information must be relayed to the tooltip control in order for it to display the tooltip text at the appropriate time and place.</span></span>

<span data-ttu-id="68904-195">Vous pouvez avoir des messages relayés automatiquement dans les cas suivants :</span><span class="sxs-lookup"><span data-stu-id="68904-195">You can have messages relayed automatically if:</span></span>

-   <span data-ttu-id="68904-196">L’outil est un contrôle ou est défini comme un rectangle dans la structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) de l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-196">The tool is a control or is defined as a rectangle in the tool's [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure.</span></span>
-   <span data-ttu-id="68904-197">La fenêtre associée à l’outil se trouve dans le même thread que le contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-197">The window associated with the tool is in the same thread as the tooltip control.</span></span>

<span data-ttu-id="68904-198">Si ces deux conditions sont remplies, définissez l’indicateur de **\_ sous-classe ttf** dans le membre **UFlags** de la structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) de l’outil lorsque vous ajoutez l’outil au contrôle ToolTip avec [**atténuation \_ ADDTOOL**](ttm-addtool.md).</span><span class="sxs-lookup"><span data-stu-id="68904-198">If these two conditions are met, set the **TTF\_SUBCLASS** flag in the **uFlags** member of the tool's [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure when you add the tool to the tooltip control with [**TTM\_ADDTOOL**](ttm-addtool.md).</span></span> <span data-ttu-id="68904-199">Les messages de souris nécessaires sont ensuite relayés automatiquement vers le contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-199">The necessary mouse messages then will be relayed automatically to the tooltip control.</span></span>

<span data-ttu-id="68904-200">La définition de la **\_ sous-classe ttf** pour que les messages de souris relayés vers le contrôle soient suffisants dans la plupart des cas.</span><span class="sxs-lookup"><span data-stu-id="68904-200">Setting **TTF\_SUBCLASS** to have mouse messages relayed to the control is sufficient for most purposes.</span></span> <span data-ttu-id="68904-201">Toutefois, il ne fonctionne pas dans les cas où il n’existe aucune connexion directe entre le contrôle ToolTip et la fenêtre de l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-201">However, it will not work in cases where there is no direct connection between the tooltip control and the tool's window.</span></span> <span data-ttu-id="68904-202">Par exemple, si un outil est implémenté en tant que zone rectangulaire dans une fenêtre définie par l’application, la procédure de fenêtre reçoit les messages de la souris.</span><span class="sxs-lookup"><span data-stu-id="68904-202">For example, if a tool is implemented as a rectangular area in an application-defined window, the window procedure receives the mouse messages.</span></span> <span data-ttu-id="68904-203">La définition de la **\_ sous-classe ttf** suffit pour s’assurer qu’elle est passée au contrôle.</span><span class="sxs-lookup"><span data-stu-id="68904-203">Setting **TTF\_SUBCLASS** is sufficient to ensure that they are passed to the control.</span></span> <span data-ttu-id="68904-204">Toutefois, si un outil est implémenté en tant que fenêtre définie par le système, les messages de la souris sont envoyés à cette fenêtre et ne sont pas directement disponibles pour l’application.</span><span class="sxs-lookup"><span data-stu-id="68904-204">However, if a tool is implemented as a system-defined window, mouse messages are sent to that window and are not directly available to the application.</span></span> <span data-ttu-id="68904-205">Dans ce cas, vous devez sous-classer la fenêtre ou utiliser un raccordement de message pour accéder aux messages de la souris.</span><span class="sxs-lookup"><span data-stu-id="68904-205">In this case, you must either subclass the window or use a message hook to access the mouse messages.</span></span> <span data-ttu-id="68904-206">Vous devez ensuite relayer explicitement les messages de la souris vers le contrôle ToolTip avec [**atténuation \_ RELAYEVENT**](ttm-relayevent.md).</span><span class="sxs-lookup"><span data-stu-id="68904-206">You must then explicitly relay mouse messages to the tooltip control with [**TTM\_RELAYEVENT**](ttm-relayevent.md).</span></span> <span data-ttu-id="68904-207">Pour obtenir un exemple d’utilisation de **atténuation \_ RELAYEVENT**, consultez [suivi des info-bulles](using-tooltip-contro.md).</span><span class="sxs-lookup"><span data-stu-id="68904-207">For an example of how to use **TTM\_RELAYEVENT**, see [Tracking Tooltips](using-tooltip-contro.md).</span></span>

<span data-ttu-id="68904-208">Lorsqu’un contrôle ToolTip reçoit un message [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) , il détermine si le pointeur de la souris se trouve dans le rectangle englobant d’un outil.</span><span class="sxs-lookup"><span data-stu-id="68904-208">When a tooltip control receives a [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) message, it determines whether the mouse pointer is in the bounding rectangle of a tool.</span></span> <span data-ttu-id="68904-209">Si c’est le cas, le contrôle ToolTip définit un minuteur.</span><span class="sxs-lookup"><span data-stu-id="68904-209">If it is, the tooltip control sets a timer.</span></span> <span data-ttu-id="68904-210">À la fin de l’intervalle de délai d’attente, le contrôle ToolTip vérifie la position du pointeur pour voir s’il a été déplacé.</span><span class="sxs-lookup"><span data-stu-id="68904-210">At the end of the time-out interval, the tooltip control checks the position of the pointer to see if it has moved.</span></span> <span data-ttu-id="68904-211">Si ce n’est pas le cas, le contrôle ToolTip récupère le texte de l’outil et affiche l’info-bulle.</span><span class="sxs-lookup"><span data-stu-id="68904-211">If it hasn't, the tooltip control retrieves the text for the tool and displays the tooltip.</span></span> <span data-ttu-id="68904-212">Le contrôle ToolTip continue d’afficher la fenêtre jusqu’à ce qu’il reçoive un message de bouton ou de bouton vers le haut relayé ou jusqu’à ce qu’un message **WM \_ MOUSEMOVE** indique que le pointeur a été déplacé en dehors du rectangle englobant de l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-212">The tooltip control continues to show the window until it receives a relayed button-up or button-down message or until a **WM\_MOUSEMOVE** message indicates that the pointer has moved outside the bounding rectangle of the tool.</span></span>

<span data-ttu-id="68904-213">Un contrôle ToolTip a en fait trois durées d’expiration associées.</span><span class="sxs-lookup"><span data-stu-id="68904-213">A tooltip control actually has three time-out durations associated with it.</span></span> <span data-ttu-id="68904-214">La durée initiale est l’heure à laquelle le pointeur de la souris doit rester immobile dans le rectangle englobant d’un outil avant que la fenêtre d’info-bulle ne s’affiche.</span><span class="sxs-lookup"><span data-stu-id="68904-214">The initial duration is the time that the mouse pointer must remain stationary within the bounding rectangle of a tool before the tooltip window is displayed.</span></span> <span data-ttu-id="68904-215">La durée du réaffichage correspond à la longueur du délai avant l’affichage des fenêtres d’info-bulle suivantes lorsque le pointeur se déplace d’un outil à un autre.</span><span class="sxs-lookup"><span data-stu-id="68904-215">The reshow duration is the length of the delay before subsequent tooltip windows are displayed when the pointer moves from one tool to another.</span></span> <span data-ttu-id="68904-216">La durée contextuelle est l’heure à laquelle la fenêtre d’info-bulle reste affichée avant d’être masquée.</span><span class="sxs-lookup"><span data-stu-id="68904-216">The pop-up duration is the time that the tooltip window remains displayed before it is hidden.</span></span> <span data-ttu-id="68904-217">Autrement dit, si le pointeur reste immobile dans le rectangle englobant après l’affichage de la fenêtre d’info-bulle, la fenêtre d’info-bulle est automatiquement masquée à la fin de la durée de la fenêtre contextuelle.</span><span class="sxs-lookup"><span data-stu-id="68904-217">That is, if the pointer remains stationary within the bounding rectangle after the tooltip window is displayed, the tooltip window is automatically hidden at the end of the pop-up duration.</span></span> <span data-ttu-id="68904-218">Vous pouvez ajuster toutes les durées de délai d’attente à l’aide du message [**atténuation \_ SETDELAYTIME**](ttm-setdelaytime.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-218">You can adjust all of the time-out durations by using the [**TTM\_SETDELAYTIME**](ttm-setdelaytime.md) message.</span></span>

<span data-ttu-id="68904-219">Si une application comprend un outil implémenté comme zone rectangulaire et que la taille ou la position du contrôle change, l’application peut utiliser le message [**atténuation \_ NEWTOOLRECT**](ttm-newtoolrect.md) pour signaler la modification au contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-219">If an application includes a tool implemented as a rectangular area and the size or position of the control changes, the application can use the [**TTM\_NEWTOOLRECT**](ttm-newtoolrect.md) message to report the change to the tooltip control.</span></span> <span data-ttu-id="68904-220">Une application n’a pas besoin de signaler les modifications de taille et de position pour un outil implémenté en tant que fenêtre, car le contrôle ToolTip utilise le handle de fenêtre de l’outil pour déterminer si le pointeur de la souris se trouve sur l’outil, et non sur le rectangle englobant de l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-220">An application does not need to report size and position changes for a tool implemented as a window because the tooltip control uses the tool's window handle to determine if the mouse pointer is on the tool, not the tool's bounding rectangle.</span></span>

<span data-ttu-id="68904-221">Quand une info-bulle va être affichée, le contrôle ToolTip envoie à la fenêtre propriétaire un code de notification [ttn \_ Show](ttn-show.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-221">When a tooltip is about to be displayed, the tooltip control sends the owner window a [TTN\_SHOW](ttn-show.md) notification code.</span></span> <span data-ttu-id="68904-222">La fenêtre propriétaire reçoit un code de notification [ \_ pop ttn](ttn-pop.md) quand une info-bulle va être masquée.</span><span class="sxs-lookup"><span data-stu-id="68904-222">The owner window receives a [TTN\_POP](ttn-pop.md) notification code when a tooltip is about to be hidden.</span></span> <span data-ttu-id="68904-223">Chaque code de notification est envoyé dans le contexte d’un message [**WM \_ Notify**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="68904-223">Each notification code is sent in the context of a [**WM\_NOTIFY**](wm-notify.md) message.</span></span>

## <a name="hit-testing"></a><span data-ttu-id="68904-224">Test des résultats</span><span class="sxs-lookup"><span data-stu-id="68904-224">Hit Testing</span></span>

<span data-ttu-id="68904-225">Le message [**atténuation \_ HITTEST**](ttm-hittest.md) vous permet de récupérer des informations qu’un contrôle ToolTip gère à propos de l’outil occupant un point particulier.</span><span class="sxs-lookup"><span data-stu-id="68904-225">The [**TTM\_HITTEST**](ttm-hittest.md) message allows you to retrieve information that a tooltip control maintains about the tool occupying a particular point.</span></span> <span data-ttu-id="68904-226">Le message inclut une structure [**TTHITTESTINFO**](/windows/win32/api/commctrl/ns-commctrl-tthittestinfoa) qui contient un handle de fenêtre, les coordonnées d’un point et l’adresse d’une structure [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) .</span><span class="sxs-lookup"><span data-stu-id="68904-226">The message includes a [**TTHITTESTINFO**](/windows/win32/api/commctrl/ns-commctrl-tthittestinfoa) structure that contains a window handle, the coordinates of a point, and the address of a [**TOOLINFO**](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) structure.</span></span> <span data-ttu-id="68904-227">Le contrôle ToolTip détermine si un outil occupe le point et, si c’est le cas, remplit **TOOLINFO** avec des informations sur l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-227">The tooltip control determines whether a tool occupies the point and, if it does, fills **TOOLINFO** with information about the tool.</span></span>

## <a name="default-message-processing"></a><span data-ttu-id="68904-228">Traitement des messages par défaut</span><span class="sxs-lookup"><span data-stu-id="68904-228">Default Message Processing</span></span>

<span data-ttu-id="68904-229">Le tableau suivant décrit les messages traités par la procédure de fenêtre pour le contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-229">The following table describes the messages handled by the window procedure for the tooltip control.</span></span>



| <span data-ttu-id="68904-230">Message</span><span class="sxs-lookup"><span data-stu-id="68904-230">Message</span></span>                                        | <span data-ttu-id="68904-231">Description</span><span class="sxs-lookup"><span data-stu-id="68904-231">Description</span></span>                                                                                                                                                                                                                                                       |
|------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="68904-232">**création de WM \_**</span><span class="sxs-lookup"><span data-stu-id="68904-232">**WM\_CREATE**</span></span>](/windows/desktop/winmsg/wm-create)             | <span data-ttu-id="68904-233">Garantit que le contrôle ToolTip a les styles de fenêtre [**\_ contextuelle**](/windows/desktop/winmsg/window-styles) [**WS \_ ex \_ TOOLWINDOW**](/windows/desktop/winmsg/window-styles) et WS.</span><span class="sxs-lookup"><span data-stu-id="68904-233">Ensures that the tooltip control has the [**WS\_EX\_TOOLWINDOW**](/windows/desktop/winmsg/window-styles) and [**WS\_POPUP**](/windows/desktop/winmsg/window-styles) window styles.</span></span> <span data-ttu-id="68904-234">Elle alloue également de la mémoire et initialise des variables internes.</span><span class="sxs-lookup"><span data-stu-id="68904-234">It also allocates memory and initializes internal variables.</span></span> |
| [<span data-ttu-id="68904-235">**\_destructeur WM**</span><span class="sxs-lookup"><span data-stu-id="68904-235">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)           | <span data-ttu-id="68904-236">Libère les ressources allouées pour le contrôle ToolTip.</span><span class="sxs-lookup"><span data-stu-id="68904-236">Frees resources allocated for the tooltip control.</span></span>                                                                                                                                                                                                                |
| [<span data-ttu-id="68904-237">**WM \_ GETFONT**</span><span class="sxs-lookup"><span data-stu-id="68904-237">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)           | <span data-ttu-id="68904-238">Retourne le handle de la police que le contrôle ToolTip utilisera pour dessiner du texte.</span><span class="sxs-lookup"><span data-stu-id="68904-238">Returns the handle of the font that the tooltip control will use to draw text.</span></span>                                                                                                                                                                                    |
| [<span data-ttu-id="68904-239">**WM \_ MOUSEMOVE**</span><span class="sxs-lookup"><span data-stu-id="68904-239">**WM\_MOUSEMOVE**</span></span>](/windows/desktop/inputdev/wm-mousemove)     | <span data-ttu-id="68904-240">Masque la fenêtre d’info-bulle.</span><span class="sxs-lookup"><span data-stu-id="68904-240">Hides the tooltip window.</span></span>                                                                                                                                                                                                                                         |
| [<span data-ttu-id="68904-241">**\_peinture WM**</span><span class="sxs-lookup"><span data-stu-id="68904-241">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)                  | <span data-ttu-id="68904-242">Dessine la fenêtre d’info-bulle.</span><span class="sxs-lookup"><span data-stu-id="68904-242">Draws the tooltip window.</span></span>                                                                                                                                                                                                                                         |
| [<span data-ttu-id="68904-243">**\_SetFont WM**</span><span class="sxs-lookup"><span data-stu-id="68904-243">**WM\_SETFONT**</span></span>](/windows/desktop/winmsg/wm-setfont)           | <span data-ttu-id="68904-244">Définit le handle de la police que le contrôle ToolTip utilisera pour dessiner du texte.</span><span class="sxs-lookup"><span data-stu-id="68904-244">Sets the handle of the font that the tooltip control will use to draw text.</span></span>                                                                                                                                                                                       |
| [<span data-ttu-id="68904-245">**\_minuteur WM**</span><span class="sxs-lookup"><span data-stu-id="68904-245">**WM\_TIMER**</span></span>](/windows/desktop/winmsg/wm-timer)               | <span data-ttu-id="68904-246">Masque la fenêtre d’info-bulle si l’outil a changé de position ou si le pointeur de la souris est déplacé en dehors de l’outil.</span><span class="sxs-lookup"><span data-stu-id="68904-246">Hides the tooltip window if the tool has changed position or if the mouse pointer has moved outside the tool.</span></span> <span data-ttu-id="68904-247">Dans le cas contraire, elle affiche la fenêtre d’info-bulle.</span><span class="sxs-lookup"><span data-stu-id="68904-247">Otherwise, it shows the tooltip window.</span></span>                                                                                                             |
| [<span data-ttu-id="68904-248">**\_WININICHANGE WM**</span><span class="sxs-lookup"><span data-stu-id="68904-248">**WM\_WININICHANGE**</span></span>](/windows/desktop/winmsg/wm-wininichange) | <span data-ttu-id="68904-249">Réinitialise les variables internes qui sont basées sur les métriques du système.</span><span class="sxs-lookup"><span data-stu-id="68904-249">Resets internal variables that are based on system metrics.</span></span>                                                                                                                                                                                                       |



 

 

 