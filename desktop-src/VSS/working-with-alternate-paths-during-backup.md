---
description: Dans certains cas, les fichiers à sauvegarder ne sont pas l’emplacement par défaut de ces fichiers.
ms.assetid: b9e96827-a678-45ca-8ede-4508a406f071
title: Utilisation de chemins alternatifs pendant la sauvegarde
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a98e93af4d12b804032a64841542e731ff77e048
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106515858"
---
# <a name="working-with-alternate-paths-during-backup"></a><span data-ttu-id="d50e5-103">Utilisation de chemins alternatifs pendant la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="d50e5-103">Working with Alternate Paths during Backup</span></span>

<span data-ttu-id="d50e5-104">Dans certains cas, les fichiers à sauvegarder ne sont pas l’emplacement par défaut de ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="d50e5-104">There are certain circumstances where the files to be backed up are not the default location for those files.</span></span>

<span data-ttu-id="d50e5-105">Par exemple, certains enregistreurs ne peuvent pas garantir que leurs données ont été vidées dans la fenêtre de temps entre les événements [*figer*](vssgloss-f.md) et [*libérer*](vssgloss-t.md) .</span><span class="sxs-lookup"><span data-stu-id="d50e5-105">For example, some writers cannot guarantee to have flushed of their data within the time window between [*Freeze*](vssgloss-f.md) and [*Thaw*](vssgloss-t.md) events.</span></span> <span data-ttu-id="d50e5-106">Ces enregistreurs peuvent choisir de générer des fichiers dupliqués contenant une dernière configuration correcte connue dans un répertoire source autre que celui par défaut, ou un [*autre chemin d’accès*](vssgloss-a.md).</span><span class="sxs-lookup"><span data-stu-id="d50e5-106">Such writers may choose to generate duplicate files containing a last known good configuration in a non-default source directory, or [*alternate path*](vssgloss-a.md).</span></span>

<span data-ttu-id="d50e5-107">Le terme autre chemin, utilisé avec VSS, ne doit pas être confondu avec le terme [*autre mappage d’emplacement*](vssgloss-a.md).</span><span class="sxs-lookup"><span data-stu-id="d50e5-107">The term alternate path, as used with VSS, should not be confused with the term [*alternate location mapping*](vssgloss-a.md).</span></span> <span data-ttu-id="d50e5-108">Les chemins d’accès alternatifs sont utilisés uniquement pendant les opérations de sauvegarde et font référence à une autre source à partir de laquelle effectuer la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="d50e5-108">Alternate paths are used only during backup operations, and refer to an alternate source from which to back up.</span></span> <span data-ttu-id="d50e5-109">Les mappages d’emplacements alternatifs sont utilisés uniquement pendant les opérations de restauration et font référence à une autre destination pour les opérations de restauration.</span><span class="sxs-lookup"><span data-stu-id="d50e5-109">Alternate location mappings are used only during restore operations, and refer to an alternate destination for restore operations.</span></span>

<span data-ttu-id="d50e5-110">**Pour utiliser un autre chemin pendant la sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="d50e5-110">**To use an alternate path during backup**</span></span>

1.  <span data-ttu-id="d50e5-111">Pendant la phase de découverte d’une opération de sauvegarde (voir [vue d’ensemble de la phase de découverte de sauvegarde](overview-of-the-backup-discovery-phase.md)), un demandeur examine les données du composant de ce writer à l’aide de [**IVssExamineWriterMetadata :: GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) et obtient les instances de l’interface [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) .</span><span class="sxs-lookup"><span data-stu-id="d50e5-111">During the discovery phase of a backup operation (see [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md)) a requester would examine each writer's component data using [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) and get instances of the [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) interface.</span></span>
2.  <span data-ttu-id="d50e5-112">Un demandeur obtient ensuite le jeu de [*fichiers*](vssgloss-f.md) géré par chaque composant, représenté par les instances de l’interface [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) , en appelant la méthode [**IVssWMComponent :: GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile) .</span><span class="sxs-lookup"><span data-stu-id="d50e5-112">A requester then obtains the [*file set*](vssgloss-f.md) managed by each component, represented by instances of the [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) interface, by calling the [**IVssWMComponent::GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile) method.</span></span>
3.  <span data-ttu-id="d50e5-113">En plus d’un chemin d’accès ([**IVssWMFiledesc :: GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)), d’une spécification de fichier ([**IVssWMFiledesc :: GetFilespec**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getfilespec)) et d’un indicateur de récurrence ([**IVssWMFiledesc :: GetRecursive**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getrecursive)), un objet [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) peut contenir un autre emplacement (utilisé comme autre chemin pour les opérations de sauvegarde et un autre mappage d’emplacement pour les opérations de restauration) à l’aide de la méthode [**IVssWMFiledesc :: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) .</span><span class="sxs-lookup"><span data-stu-id="d50e5-113">In addition to a path ([**IVssWMFiledesc::GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)), a file specification ([**IVssWMFiledesc::GetFilespec**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getfilespec)), and a recursion flag ([**IVssWMFiledesc::GetRecursive**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getrecursive)), a [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) object may contain an alternate location (used as an alternate path for backup operations and an alternate location mapping for restore operations) by using the [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) method.</span></span>
4.  <span data-ttu-id="d50e5-114">Si la valeur retournée par [**IVssWMFiledesc :: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) n’est pas null, les applications de sauvegarde utilisent cette valeur au lieu de la valeur obtenue à partir de [**IVssWMFiledesc :: GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath) pour sélectionner et localiser les fichiers à sauvegarder.</span><span class="sxs-lookup"><span data-stu-id="d50e5-114">If the value returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) is non-NULL, backup applications use that value instead of the value obtained from [**IVssWMFiledesc::GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath) to select and locate files to back up.</span></span>
5.  <span data-ttu-id="d50e5-115">Malgré l’utilisation d’un chemin alternatif, les demandeurs doivent respecter la spécification de fichier et les paramètres récursifs retournés par [**IVssWMFiledesc :: GetFilespec**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getfilespec) et [**IVssWMFiledesc :: GetRecursive**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getrecursive).</span><span class="sxs-lookup"><span data-stu-id="d50e5-115">Despite using an alternate path, requesters should still respect the file specification and recursive settings returned by [**IVssWMFiledesc::GetFilespec**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getfilespec) and [**IVssWMFiledesc::GetRecursive**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getrecursive).</span></span>

<span data-ttu-id="d50e5-116">Notez que lors de la restauration, tout autre chemin d’accès, autrement dit, un autre emplacement retourné par une instance de [**IVssWMFiledesc :: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) obtenu à partir d’une instance de [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent), qui a été obtenue à partir d’une instance de [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) obtenue en récupérant un document de métadonnées d’écriture stocké, n’est pas utilisé lors de la restauration.</span><span class="sxs-lookup"><span data-stu-id="d50e5-116">Note that on restore, any alternate path—that is, an alternate location returned by an instance of [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) gotten from an instance of [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent), which in turn was obtained from an instance of [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) gotten by retrieving a stored Writer Metadata Document—is not used during restoration.</span></span>

<span data-ttu-id="d50e5-117">Le chemin d’accès par défaut (retourné par la méthode [**GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath) de la même instance de [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)) est utilisé pour définir un emplacement de restauration, ou un autre mappage d’emplacement (trouvé à l’aide de la méthode [**IVssWMFiledesc :: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) ) indique l’emplacement de restauration d’un fichier (voir [utilisation d’autres emplacements pendant la restauration](working-with-alternate-locations-during-restore.md)).</span><span class="sxs-lookup"><span data-stu-id="d50e5-117">Either the default path (returned by the [**GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath) method of the same instance of [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)) is used to define a restore location, or an alternate location mapping—found by using the [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) method—indicates where a file is to be restored (see [Working with Alternate Locations during Restore](working-with-alternate-locations-during-restore.md)).</span></span>

 

 



