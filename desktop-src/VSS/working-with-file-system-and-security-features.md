---
description: Vous trouverez ci-dessous des conseils pour l’interopérabilité correcte avec divers systèmes de fichiers et fonctionnalités de sécurité qui ont été introduits dans Windows Vista et Windows Server 2008.
ms.assetid: 3e8a1fd2-59e5-4f18-aafc-0ce5ac1e1cfa
title: Utilisation du système de fichiers et des fonctionnalités de sécurité
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12903599beb7ed153965f4b803ad8147fd32067a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104113155"
---
# <a name="working-with-file-system-and-security-features"></a><span data-ttu-id="26120-103">Utilisation du système de fichiers et des fonctionnalités de sécurité</span><span class="sxs-lookup"><span data-stu-id="26120-103">Working with File System and Security Features</span></span>

<span data-ttu-id="26120-104">Vous trouverez ci-dessous des conseils pour l’interopérabilité correcte avec divers systèmes de fichiers et fonctionnalités de sécurité qui ont été introduits dans Windows Vista et Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="26120-104">The following are hints for interoperating correctly with various file system and security features that were introduced in Windows Vista and Windows Server 2008.</span></span>

## <a name="interoperability-with-transactions"></a><span data-ttu-id="26120-105">Interopérabilité avec les transactions</span><span class="sxs-lookup"><span data-stu-id="26120-105">Interoperability with Transactions</span></span>

<span data-ttu-id="26120-106">Pour prendre en charge les transactions, VSS s’assure que le gestionnaire de transactions KTM (Kernel Transaction Manager) et le Distributed Transaction Coordinator (DTC) sont gelés avant la création de clichés instantanés de volume.</span><span class="sxs-lookup"><span data-stu-id="26120-106">To support transactions, VSS ensures that both the Kernel Transaction Manager (KTM) and the Distributed Transaction Coordinator (DTC) are frozen prior to the creation of volume shadow copies.</span></span> <span data-ttu-id="26120-107">Si le système ne parvient pas à geler ou à libérer KTM ou DTC, les erreurs de délai d’attente suivantes peuvent être retournées par la méthode [**IVssBackupComponents ::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) :</span><span class="sxs-lookup"><span data-stu-id="26120-107">If the system fails to freeze or thaw KTM or DTC, the following timeout errors may be returned by the [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) method:</span></span>

<dl> <span data-ttu-id="26120-108">\_ \_ \_ \_ délai d’expiration de la transaction VSS E</span><span class="sxs-lookup"><span data-stu-id="26120-108">VSS\_E\_TRANSACTION\_FREEZE\_TIMEOUT</span></span>  
<span data-ttu-id="26120-109">\_ \_ \_ \_ délai d’expiration de la transaction VSS E</span><span class="sxs-lookup"><span data-stu-id="26120-109">VSS\_E\_TRANSACTION\_THAW\_TIMEOUT</span></span>  
</dl>

<span data-ttu-id="26120-110">Si le demandeur reçoit l’un de ces codes d’erreur, il doit retenter la création du cliché instantané.</span><span class="sxs-lookup"><span data-stu-id="26120-110">If the requester receives one of these error codes, it must retry the shadow copy creation.</span></span>

<span data-ttu-id="26120-111">Les opérations de Registre et de système de fichiers peuvent également être traitées.</span><span class="sxs-lookup"><span data-stu-id="26120-111">Registry and file system operations can also be transacted.</span></span> <span data-ttu-id="26120-112">Dans le cas du Registre, l’enregistreur du Registre est chargé de garantir la cohérence transactionnelle.</span><span class="sxs-lookup"><span data-stu-id="26120-112">In the case of the registry, the registry writer is responsible for ensuring transactional consistency.</span></span> <span data-ttu-id="26120-113">Dans le cas d’opérations du système de fichiers NTFS transactionnel (TxF), le fournisseur système est chargé de garantir la cohérence transactionnelle.</span><span class="sxs-lookup"><span data-stu-id="26120-113">In the case of Transactional NTFS (TxF) file system operations, the system provider is responsible for ensuring transactional consistency.</span></span> <span data-ttu-id="26120-114">Pour ce faire, vous devez monter le cliché instantané en lecture/écriture après qu’il a été créé pour permettre la récupération automatique.</span><span class="sxs-lookup"><span data-stu-id="26120-114">This is accomplished by mounting the shadow copy as read/write after it is created to allow for auto-recovery.</span></span> <span data-ttu-id="26120-115">Lors de la phase de récupération automatique, KTM restaure toutes les transactions incomplètes.</span><span class="sxs-lookup"><span data-stu-id="26120-115">During the auto-recovery phase, KTM rolls back any incomplete transactions.</span></span>

## <a name="identifying-and-creating-hard-links"></a><span data-ttu-id="26120-116">Identification et création de liens physiques</span><span class="sxs-lookup"><span data-stu-id="26120-116">Identifying and Creating Hard Links</span></span>

<span data-ttu-id="26120-117">Lors de la sauvegarde de fichiers, une application de sauvegarde doit identifier toutes les liaisons physiques vers chaque fichier afin d’éviter de sauvegarder le même fichier plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="26120-117">When backing up files, a backup application must identify all hard links to each file to avoid backing up the same file more than once.</span></span> <span data-ttu-id="26120-118">Deux nouvelles fonctions sont disponibles pour énumérer les liens physiques : [**FindFirstFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilenamew) et [**FindNextFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findnextfilenamew).</span><span class="sxs-lookup"><span data-stu-id="26120-118">Two new functions are available for enumerating hard links: [**FindFirstFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilenamew) and [**FindNextFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findnextfilenamew).</span></span>

<span data-ttu-id="26120-119">De même, lors de la restauration de fichiers, l’application de sauvegarde doit restaurer les liens physiques à l’aide de la fonction [**CreateHardLink**](/windows/win32/api/winbase/nf-winbase-createhardlinka) .</span><span class="sxs-lookup"><span data-stu-id="26120-119">Similarly, when restoring files, the backup application must restore hard links using the [**CreateHardLink**](/windows/win32/api/winbase/nf-winbase-createhardlinka) function.</span></span>

<span data-ttu-id="26120-120">Les applications de sauvegarde doivent également déclarer le privilège de nom de sauvegarde de SE \_ \_ pendant la phase de sauvegarde et le nom de restauration de se \_ \_ pendant la phase de restauration.</span><span class="sxs-lookup"><span data-stu-id="26120-120">Backup applications must also assert the SE\_BACKUP\_NAME privilege during the backup phase and the SE\_RESTORE\_NAME during the restore phase.</span></span>

## <a name="permissions-and-privileges-required-by-backup-applications"></a><span data-ttu-id="26120-121">Autorisations et privilèges requis par les applications de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="26120-121">Permissions and Privileges Required by Backup Applications</span></span>

<span data-ttu-id="26120-122">Les applications de sauvegarde qui restaurent les fichiers système requièrent les privilèges suivants :</span><span class="sxs-lookup"><span data-stu-id="26120-122">Backup applications that restore system files require the following privileges:</span></span>

<dl> <span data-ttu-id="26120-123">nom de la sauvegarde de SE \_ \_</span><span class="sxs-lookup"><span data-stu-id="26120-123">SE\_BACKUP\_NAME</span></span>  
<span data-ttu-id="26120-124">nom de la restauration de la SE \_ \_</span><span class="sxs-lookup"><span data-stu-id="26120-124">SE\_RESTORE\_NAME</span></span>  
<span data-ttu-id="26120-125">\_nom de sécurité de se \_</span><span class="sxs-lookup"><span data-stu-id="26120-125">SE\_SECURITY\_NAME</span></span>  
<span data-ttu-id="26120-126">SE \_ prendre le nom de la \_ propriété \_</span><span class="sxs-lookup"><span data-stu-id="26120-126">SE\_TAKE\_OWNERSHIP\_NAME</span></span>  
</dl>

<span data-ttu-id="26120-127">Les applications de sauvegarde doivent également demander \_ des droits d’accès en écriture au propriétaire lors de la phase de restauration.</span><span class="sxs-lookup"><span data-stu-id="26120-127">Backup applications must also request WRITE\_OWNER access rights during the restore phase.</span></span>

## <a name="windows-media-digital-rights-management"></a><span data-ttu-id="26120-128">Rights Management Windows Media Digital</span><span class="sxs-lookup"><span data-stu-id="26120-128">Windows Media Digital Rights Management</span></span>

<span data-ttu-id="26120-129">Le client Windows Media Digital Rights Management (DRM) conserve un répertoire de fichiers d’État et de licence sensibles dans le répertoire% ProgramData% \\ Microsoft \\ Windows \\ DRM.</span><span class="sxs-lookup"><span data-stu-id="26120-129">Windows Media Digital Rights Management (DRM) client maintains a directory of sensitive state and license files in the %ProgramData%\\Microsoft\\Windows\\DRM directory.</span></span> <span data-ttu-id="26120-130">Les fichiers de ce répertoire doivent être purgés en même temps que les fichiers temporaires et les fichiers cache.</span><span class="sxs-lookup"><span data-stu-id="26120-130">The files in this directory should be purged at the same time as temporary and cache files.</span></span> <span data-ttu-id="26120-131">Pour vous assurer que le client Windows DRM reste dans un état cohérent, vous devez éviter de sauvegarder ou de restaurer ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="26120-131">To ensure that the Windows DRM client remains in a consistent state, you must avoid backing up or restoring these files.</span></span> <span data-ttu-id="26120-132">Ce répertoire est listé dans la clé de Registre FilesNotToBackup.</span><span class="sxs-lookup"><span data-stu-id="26120-132">This directory is listed in the FilesNotToBackup registry key.</span></span> <span data-ttu-id="26120-133">Pour plus d’informations sur la clé FilesNotToBackup, consultez [génération d’un jeu de sauvegarde](generating-a-backup-set.md).</span><span class="sxs-lookup"><span data-stu-id="26120-133">For more information about the FilesNotToBackup key, see [Generating a Backup Set](generating-a-backup-set.md).</span></span>

## <a name="user-account-control"></a><span data-ttu-id="26120-134">Contrôle de compte d'utilisateur</span><span class="sxs-lookup"><span data-stu-id="26120-134">User Account Control</span></span>

<span data-ttu-id="26120-135">L’introduction du contrôle de compte d’utilisateur (UAC) dans Windows Vista signifie que, sauf indication contraire, les applications doivent s’exécuter sous un compte d’utilisateur standard.</span><span class="sxs-lookup"><span data-stu-id="26120-135">The introduction of User Account Control (UAC) in Windows Vista means that unless specified otherwise, applications must run under a standard user account.</span></span> <span data-ttu-id="26120-136">En outre, la fonctionnalité de virtualisation des fichiers et du Registre du contrôle de compte d’utilisateur modifie les emplacements où sont stockées les données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="26120-136">Additionally, the file and registry virtualization feature of UAC alters the locations where user data is stored.</span></span> <span data-ttu-id="26120-137">Pour plus d’informations sur l’utilisation du contrôle de compte d’utilisateur et la virtualisation de fichier et de Registre, consultez les références suivantes :</span><span class="sxs-lookup"><span data-stu-id="26120-137">For more information about how to work with UAC and file and registry virtualization, see the following references:</span></span>

<dl>

<span data-ttu-id="26120-138">[Windows Vista et Windows Server 2008 Developer Story : exigences de développement d’applications Windows Vista pour le contrôle de compte d’utilisateur (UAC)](/previous-versions/aa905330(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="26120-138">[The Windows Vista and Windows Server 2008 Developer Story: Windows Vista Application Development Requirements for User Account Control (UAC)](/previous-versions/aa905330(v=msdn.10))</span></span>  
<span data-ttu-id="26120-139">[Exigences de développement d’applications Windows Vista pour la compatibilité du contrôle de compte d’utilisateur](/previous-versions/dotnet/articles/bb530410(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="26120-139">[Windows Vista Application Development Requirements for User Account Control Compatibility](/previous-versions/dotnet/articles/bb530410(v=msdn.10))</span></span>  
[<span data-ttu-id="26120-140">Mise à jour corrective du contrôle de compte d’utilisateur (UAC)</span><span class="sxs-lookup"><span data-stu-id="26120-140">User Account Control (UAC) Patching</span></span>](../msi/user-account-control--uac--patching.md)  
</dl>

## <a name="bitlocker-drive-encryption"></a><span data-ttu-id="26120-141">Chiffrement de lecteur BitLocker</span><span class="sxs-lookup"><span data-stu-id="26120-141">BitLocker Drive Encryption</span></span>

<span data-ttu-id="26120-142">Chiffrement de lecteur BitLocker est une nouvelle fonctionnalité de Windows Vista Enterprise, Windows Vista Ultimate et Windows Server 2008 qui offre un démarrage sécurisé et un chiffrement de volume complet.</span><span class="sxs-lookup"><span data-stu-id="26120-142">BitLocker Drive Encryption is a new feature in Windows Vista Enterprise, Windows Vista Ultimate, and Windows Server 2008 that offers secure startup and full volume encryption.</span></span> <span data-ttu-id="26120-143">La compréhension de cette fonctionnalité est importante pour les développeurs d’applications de sauvegarde qui effectuent des restaurations hors connexion où les données devront peut-être être restaurées sur un lecteur chiffré.</span><span class="sxs-lookup"><span data-stu-id="26120-143">Understanding this feature is important for developers of backup applications that perform offline restores where data may need to be restored onto an encrypted drive.</span></span>

<span data-ttu-id="26120-144">Pour restaurer des données sur un lecteur chiffré, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="26120-144">To restore data onto an encrypted drive, perform the following steps:</span></span>

1.  <span data-ttu-id="26120-145">Déverrouillez le lecteur.</span><span class="sxs-lookup"><span data-stu-id="26120-145">Unlock the drive.</span></span>
2.  <span data-ttu-id="26120-146">Désactivez Chiffrement de lecteur BitLocker.</span><span class="sxs-lookup"><span data-stu-id="26120-146">Turn off BitLocker Drive Encryption.</span></span>
3.  <span data-ttu-id="26120-147">Effectuez la restauration.</span><span class="sxs-lookup"><span data-stu-id="26120-147">Perform the restore.</span></span>
4.  <span data-ttu-id="26120-148">Démarrez dans le système d’exploitation restauré et activez Chiffrement de lecteur BitLocker.</span><span class="sxs-lookup"><span data-stu-id="26120-148">Boot into the restored operating system and turn on BitLocker Drive Encryption.</span></span>

<span data-ttu-id="26120-149">Pour obtenir des informations détaillées sur Chiffrement de lecteur BitLocker, y compris un guide pas à pas, consultez [chiffrement de lecteur BitLocker](https://www.microsoft.com/technet/windowsvista/security/bitlockr.mspx) sur le site Web Microsoft TechNet Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="26120-149">For detailed information about BitLocker Drive Encryption, including a step-by-step guide, see [BitLocker Drive Encryption](https://www.microsoft.com/technet/windowsvista/security/bitlockr.mspx) on the Microsoft TechNet Windows Vista website.</span></span> <span data-ttu-id="26120-150">Pour plus d’informations sur le fournisseur WMI Chiffrement de lecteur BitLocker, consultez [chiffrement de lecteur BitLocker Provider](../secprov/bitlocker-drive-encryption-provider.md).</span><span class="sxs-lookup"><span data-stu-id="26120-150">For information about the BitLocker Drive Encryption WMI provider, see [BitLocker Drive Encryption Provider](../secprov/bitlocker-drive-encryption-provider.md).</span></span>

 

 
