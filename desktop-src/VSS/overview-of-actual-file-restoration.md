---
description: Après avoir effectué les actions décrites dans vue d’ensemble de l’initialisation de la restauration et vue d’ensemble de la préparation pour la restauration, le demandeur dispose de suffisamment d’informations pour commencer la restauration des fichiers.
ms.assetid: 15df39fa-1eb1-4e96-9e26-14470f391de4
title: Vue d’ensemble de la restauration réelle des fichiers
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6527a10d0880b1e599377abb797449816019ab89
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106531888"
---
# <a name="overview-of-actual-file-restoration"></a><span data-ttu-id="b9987-103">Vue d’ensemble de la restauration réelle des fichiers</span><span class="sxs-lookup"><span data-stu-id="b9987-103">Overview of Actual File Restoration</span></span>

<span data-ttu-id="b9987-104">Après avoir effectué les actions décrites dans [vue d’ensemble de l’initialisation](overview-of-restore-initialization.md) de la restauration et vue d' [ensemble de la préparation pour la restauration](overview-of-preparing-for-restore.md), le demandeur dispose de suffisamment d’informations pour commencer la restauration des fichiers.</span><span class="sxs-lookup"><span data-stu-id="b9987-104">After performing the actions described in [Overview of Restore Initialization](overview-of-restore-initialization.md) and [Overview of Preparing for Restore](overview-of-preparing-for-restore.md), the requester has sufficient information to begin restoring files.</span></span> <span data-ttu-id="b9987-105">La restauration des fichiers n’implique pas les interactions de l’enregistreur ou la génération d’événements.</span><span class="sxs-lookup"><span data-stu-id="b9987-105">File restoration does not involve writer interactions or the generation of events.</span></span> <span data-ttu-id="b9987-106">Pour plus d’informations, consultez [vue d’ensemble du traitement d’une restauration sous VSS](overview-of-processing-a-restore-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="b9987-106">For more information, see [Overview of Processing a Restore Under VSS](overview-of-processing-a-restore-under-vss.md).</span></span>

<span data-ttu-id="b9987-107">Le tableau suivant présente la séquence des actions et des événements qui sont nécessaires à la restauration des fichiers.</span><span class="sxs-lookup"><span data-stu-id="b9987-107">The following table shows the sequence of actions and events that are required to restore files.</span></span>



| <span data-ttu-id="b9987-108">Action du demandeur</span><span class="sxs-lookup"><span data-stu-id="b9987-108">Requester action</span></span>                                                                                                                                                                                                                                                                                                          | <span data-ttu-id="b9987-109">Événement</span><span class="sxs-lookup"><span data-stu-id="b9987-109">Event</span></span> | <span data-ttu-id="b9987-110">Action d’écriture</span><span class="sxs-lookup"><span data-stu-id="b9987-110">Writer action</span></span> |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|---------------|
| <span data-ttu-id="b9987-111">Générer une liste de jeux de restauration pour les fichiers sur le support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="b9987-111">Generate a restore set listing for files on backup media.</span></span>                                                                                                                                                                                                                                                                 | <span data-ttu-id="b9987-112">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-112">None</span></span>  | <span data-ttu-id="b9987-113">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-113">None</span></span>          |
| <span data-ttu-id="b9987-114">Gérez les [*cibles dirigées*](vssgloss-d.md) ou la restauration de [*fichiers partielle*](vssgloss-p.md) (consultez [**IVssComponent :: GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget), [**IVssComponent :: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)).</span><span class="sxs-lookup"><span data-stu-id="b9987-114">Handle [*directed targets*](vssgloss-d.md) or [*partial file*](vssgloss-p.md) restoration (see [**IVssComponent::GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget), [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)).</span></span> | <span data-ttu-id="b9987-115">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-115">None</span></span>  | <span data-ttu-id="b9987-116">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-116">None</span></span>          |
| <span data-ttu-id="b9987-117">Si nécessaire, ignorez tous les emplacements de restauration spécifiés et restaurez un nouvel emplacement spécifié dans un appel antérieur à [**IVssBackupComponents :: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span><span class="sxs-lookup"><span data-stu-id="b9987-117">If necessary, ignore all specified restore locations and restore to a new location specified in an earlier call to [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span></span>                                                                                                                       | <span data-ttu-id="b9987-118">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-118">None</span></span>  | <span data-ttu-id="b9987-119">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-119">None</span></span>          |
| <span data-ttu-id="b9987-120">Si la restauration est incrémentielle et que d’autres restaurations sont nécessaires, indiquez (consultez [**IVssBackupComponents :: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) et [sauvegardes incrémentielles et différentielles](incremental-and-differential-backups.md)).</span><span class="sxs-lookup"><span data-stu-id="b9987-120">If the restore is incremental and further restores are needed, indicate (see [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) and [Incremental and Differential Backups](incremental-and-differential-backups.md)).</span></span>                                                     | <span data-ttu-id="b9987-121">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-121">None</span></span>  | <span data-ttu-id="b9987-122">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-122">None</span></span>          |
| <span data-ttu-id="b9987-123">Pour savoir si un enregistreur a modifié le contenu du document des composants de sauvegarde, appelez [**IVssBackupComponents :: GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span><span class="sxs-lookup"><span data-stu-id="b9987-123">To learn whether a writer has modified the contents of the Backup Components Document, call [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span></span> <span data-ttu-id="b9987-124">Par exemple, l’enregistreur a peut-être modifié la cible de restauration.</span><span class="sxs-lookup"><span data-stu-id="b9987-124">For example, the writer might have changed the restore target.</span></span>                                                                 | <span data-ttu-id="b9987-125">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-125">None</span></span>  | <span data-ttu-id="b9987-126">Aucune</span><span class="sxs-lookup"><span data-stu-id="b9987-126">None</span></span>          |



 

## <a name="requester-actions-during-restoring-files"></a><span data-ttu-id="b9987-127">Actions du demandeur lors de la restauration des fichiers</span><span class="sxs-lookup"><span data-stu-id="b9987-127">Requester Actions during Restoring Files</span></span>

<span data-ttu-id="b9987-128">Pour la plupart des fichiers sur le support de sauvegarde, le demandeur doit déterminer ses emplacements d’origine et les nouveaux emplacements ou mappages d’emplacements de remplacement qui s’y appliquent.</span><span class="sxs-lookup"><span data-stu-id="b9987-128">For most files on the backup media, the requester needs to determine their original locations and any new locations or alternate location mappings that apply to them.</span></span> <span data-ttu-id="b9987-129">(Pour plus d’informations sur les meilleures pratiques en matière de détermination des fichiers à restaurer et de leur restauration, consultez [génération d’un jeu de restauration](generating-a-restore-set.md) .)</span><span class="sxs-lookup"><span data-stu-id="b9987-129">(See [Generating a Restore Set](generating-a-restore-set.md) for a discussion of best practices in determining which files to restore and where to restore them.)</span></span>

<span data-ttu-id="b9987-130">En outre, certains fichiers peuvent avoir des [*cibles dirigées*](vssgloss-d.md) ou prendre en charge la restauration de [*fichiers partielle*](vssgloss-p.md) .</span><span class="sxs-lookup"><span data-stu-id="b9987-130">In addition, some files may have [*directed targets*](vssgloss-d.md) or support [*partial file*](vssgloss-p.md) restoration.</span></span> <span data-ttu-id="b9987-131">Vous pouvez trouver le nombre de ces fichiers en appelant [**IVssComponent :: GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) et [**IVssComponent :: GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount). pour plus d’informations sur les instructions de restauration détaillées, appelez [**IVssComponent :: AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget) et [**IVssComponent :: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span><span class="sxs-lookup"><span data-stu-id="b9987-131">The number of such files can be found by calling [**IVssComponent::GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) and [**IVssComponent::GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount), and information on detailed restoration instructions can be found by calling [**IVssComponent::AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget) and [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span> <span data-ttu-id="b9987-132">(Les fichiers partiels et les fichiers dirigés peuvent faire partie des composants ajoutés implicitement ou explicitement à la sauvegarde d’origine. pour plus d’informations, consultez Utilisation de la [sélectivité pour la restauration et](working-with-selectability-for-restore-and-subcomponents.md) les sous-composants.)</span><span class="sxs-lookup"><span data-stu-id="b9987-132">(Partial and directed files can be part of components added implicitly or explicitly to the original backup, see [Working with Selectability For Restore and Subcomponents](working-with-selectability-for-restore-and-subcomponents.md) for more information.)</span></span>

<span data-ttu-id="b9987-133">La réussite ou l’échec d’une restauration est indiqué composant par composant à l’aide de [**IVssBackupComponents :: SetFileRestoreStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setfilerestorestatus).</span><span class="sxs-lookup"><span data-stu-id="b9987-133">Success or failure of a restore is indicated on a component-by-component basis using [**IVssBackupComponents::SetFileRestoreStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setfilerestorestatus).</span></span> <span data-ttu-id="b9987-134">La nécessité d’effectuer d’autres opérations de restauration (dans le cas de restaurations incrémentielles ou différentielles) est également indiquée par composant à l’aide de [**IVssBackupComponents :: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span><span class="sxs-lookup"><span data-stu-id="b9987-134">The need for further restore operations (in the case of incremental or differential restores) is also indicated on a component-by-component basis using [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span>

<span data-ttu-id="b9987-135">En général, VSS ne spécifie pas de mécanisme pour récupérer des données à partir d’un support de stockage, choisir un support de stockage ou déterminer les fichiers à restaurer.</span><span class="sxs-lookup"><span data-stu-id="b9987-135">In general, VSS does not specify a mechanism for retrieving data from a storage media, a choice of storage medium, or how to determine which files should be restored where.</span></span>

<span data-ttu-id="b9987-136">Toutefois, pour certains Writers, la restauration de fichiers peut impliquer l’utilisation d’une interface et d’une procédure personnalisées documentées.</span><span class="sxs-lookup"><span data-stu-id="b9987-136">However, for certain writers, restoring files may involve the use of a documented custom interface and procedure.</span></span> <span data-ttu-id="b9987-137">Les enregistreurs système Windows, qui requièrent actuellement une telle prise en charge, sont documentés dans des [cas d’utilisation VSS spéciaux](special-vss-usage-cases.md).</span><span class="sxs-lookup"><span data-stu-id="b9987-137">Windows system writers, which currently require such support, are documented in [Special VSS Usage Cases](special-vss-usage-cases.md).</span></span>

<span data-ttu-id="b9987-138">En général, il est recommandé de traiter les fichiers de chaque composant de chaque [*instance du writer*](vssgloss-w.md) comme une unité.</span><span class="sxs-lookup"><span data-stu-id="b9987-138">In general, it is recommended that the files of each component of each [*writer instance*](vssgloss-w.md) be processed as a unit.</span></span> <span data-ttu-id="b9987-139">Ce tutoriel requiert les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="b9987-139">This requires the following:</span></span>

-   <span data-ttu-id="b9987-140">Association de chaque fichier à restaurer avec le composant qui l’a géré.</span><span class="sxs-lookup"><span data-stu-id="b9987-140">Associating each file to be restored with the component that managed it.</span></span> <span data-ttu-id="b9987-141">Cela nécessite l’utilisation de documents de métadonnées d’écriture.</span><span class="sxs-lookup"><span data-stu-id="b9987-141">This requires the use of Writer Metadata Documents.</span></span>
-   <span data-ttu-id="b9987-142">Obtention des informations correctes sur la cible de restauration.</span><span class="sxs-lookup"><span data-stu-id="b9987-142">Obtaining correct restoration target information.</span></span> <span data-ttu-id="b9987-143">Cela nécessite des informations du document sur les composants de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="b9987-143">This requires information from the Backup Components Document.</span></span>

 

 



