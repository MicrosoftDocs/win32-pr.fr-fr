---
description: Les composants sont définis par les writers et instanciés dans leur document de métadonnées d’écriture en réponse à un événement d’identification au démarrage d’une opération de sauvegarde (consultez vue d’ensemble de l’initialisation de la sauvegarde) lorsque le document de métadonnées de l’enregistreur est rempli.
ms.assetid: 5e1c3f9b-ca83-4e70-963b-0a237c6f4b0d
title: Définition des composants par les rédacteurs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa5383e9bc87620f23bb2a3ab067c1913a323782
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103868762"
---
# <a name="definition-of-components-by-writers"></a><span data-ttu-id="3e6dd-103">Définition des composants par les rédacteurs</span><span class="sxs-lookup"><span data-stu-id="3e6dd-103">Definition of Components by Writers</span></span>

<span data-ttu-id="3e6dd-104">Les composants sont définis par les writers et instanciés dans leur document de métadonnées d’écriture en réponse à un [*événement d’identification*](vssgloss-i.md) au démarrage d’une opération de sauvegarde (consultez [vue d’ensemble de l’initialisation de la sauvegarde](overview-of-backup-initialization.md)) lorsque le document de métadonnées de l’enregistreur est rempli.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-104">Components are defined by and instantiated by writers in their Writer Metadata Document in response to an [*Identify event*](vssgloss-i.md) at the start of a backup operation (see [Overview of Backup Initialization](overview-of-backup-initialization.md)) when the Writer Metadata Document is populated.</span></span>

<span data-ttu-id="3e6dd-105">Quand vous créez un composant dans son document de métadonnées d’écriture à l’aide de [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) et de [**IVssCreateWriterMetadata :: AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent), un enregistreur doit spécifier les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-105">When creating a component in its Writer Metadata Document, using [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) and [**IVssCreateWriterMetadata::AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent), a writer must specify:</span></span>

-   <span data-ttu-id="3e6dd-106">Indique si le composant peut être [ *sélectionné pour la sauvegarde*](vssgloss-s.md)</span><span class="sxs-lookup"><span data-stu-id="3e6dd-106">Whether the component is [*selectable for backup*](vssgloss-s.md)</span></span>
-   <span data-ttu-id="3e6dd-107">Un type de composant</span><span class="sxs-lookup"><span data-stu-id="3e6dd-107">A component type</span></span>
-   <span data-ttu-id="3e6dd-108">Nom de composant (qui doit être unique non seulement dans une [*instance de writer*](vssgloss-w.md) donnée, mais dans toutes les instances d’écriture)</span><span class="sxs-lookup"><span data-stu-id="3e6dd-108">A component name (which must be unique not only within a given [*writer instance*](vssgloss-w.md) but across all writer instances)</span></span>
-   <span data-ttu-id="3e6dd-109">Si les métadonnées spécifiques au writer sont associées au composant</span><span class="sxs-lookup"><span data-stu-id="3e6dd-109">Whether the component has any writer-specific metadata associated with it</span></span>
-   <span data-ttu-id="3e6dd-110">Si l’enregistreur requiert une notification après une sauvegarde réussie</span><span class="sxs-lookup"><span data-stu-id="3e6dd-110">Whether the writer requires notification following a successful backup</span></span>

<span data-ttu-id="3e6dd-111">Les enregistreurs peuvent éventuellement spécifier :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-111">Writers can optionally specify:</span></span>

-   <span data-ttu-id="3e6dd-112">[*Chemin logique*](vssgloss-l.md) d’un composant (qui doit être unique non seulement dans une instance de writer donnée, mais dans toutes les instances d’écriture)</span><span class="sxs-lookup"><span data-stu-id="3e6dd-112">A component's [*logical path*](vssgloss-l.md) (which must be unique not only within a given writer instance but across all writer instances)</span></span>
-   <span data-ttu-id="3e6dd-113">Description d’un composant (ou légende)</span><span class="sxs-lookup"><span data-stu-id="3e6dd-113">A component description (or caption)</span></span>
-   <span data-ttu-id="3e6dd-114">Icône à utiliser avec les interfaces graphiques pour indiquer le composant</span><span class="sxs-lookup"><span data-stu-id="3e6dd-114">An icon to be used with GUIs to indicate the component</span></span>

<span data-ttu-id="3e6dd-115">Il n’est pas nécessaire qu’un composant contienne réellement des fichiers.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-115">It is not necessary for a component to actually contain any files.</span></span> <span data-ttu-id="3e6dd-116">Ce type de composant vide ou « factice » peut être utile pour organiser les composants.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-116">This sort of empty or "dummy" component can be useful in organizing components.</span></span> <span data-ttu-id="3e6dd-117">Ce type de composant peut être utilisé pour définir un [*jeu de composants*](vssgloss-c.md) et un composant d’enregistreur (consultez [chemin logique des composants](logical-pathing-of-components.md)).</span><span class="sxs-lookup"><span data-stu-id="3e6dd-117">Such a component can be used to define a [*component set*](vssgloss-c.md) and a writer's component (see [Logical Pathing of Components](logical-pathing-of-components.md)).</span></span>

## <a name="setting-up-component-organization"></a><span data-ttu-id="3e6dd-118">Configuration de l’Organisation des composants</span><span class="sxs-lookup"><span data-stu-id="3e6dd-118">Setting Up Component Organization</span></span>

<span data-ttu-id="3e6dd-119">La définition de la [*sélectivité*](vssgloss-s.md) d’un composant (sa [*sélectivité pour la sauvegarde*](vssgloss-s.md)et [*sa sélectivité pour la restauration*](/windows)) et de ses [*chemins logiques*](vssgloss-l.md) permet à un enregistreur d’imposer ou de rendre facultatif l’inclusion de certains composants dans une opération de sauvegarde ou de restauration, et de regrouper des composants en [*ensembles*](vssgloss-c.md) de composants avec un composant sélectionnable agissant comme point d’entrée pour l’ensemble du groupe.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-119">Setting a component's [*selectability*](vssgloss-s.md) (its [*selectability for backup*](vssgloss-s.md), and its [*selectability for restore*](/windows)) and its [*logical paths*](vssgloss-l.md) allows a writer to mandate or make optional the inclusion of certain components in a backup or restore operation, and to group components into [*component sets*](vssgloss-c.md) with one selectable component acting as an entry point to the whole group.</span></span>

<span data-ttu-id="3e6dd-120">L’appartenance à ces regroupements détermine les composants qui seront utilisés pendant les opérations de sauvegarde et de restauration.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-120">Membership in these groupings determines which components will be used during backup and restore operations.</span></span> <span data-ttu-id="3e6dd-121">À l’aide de « sélectionnable » pour signifier qu’il est sélectionnable pour l’opération de sauvegarde et sélectionnable pour la restauration pour l’opération de restauration, les développeurs doivent comprendre ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-121">Using "selectable" to mean selectable for back for backup operation, and selectable for restore for restore operation, developers should understand that:</span></span>

-   <span data-ttu-id="3e6dd-122">Si des composants gérés par un writer donné sont sauvegardés, un demandeur doit [*inclure explicitement*](vssgloss-e.md) tous les [*composants*](vssgloss-c.md) non sélectionnables sans les ancêtres sélectionnables dans leur [*chemin logique*](vssgloss-l.md) vers le document des composants de sauvegarde et les sauvegarder et les restaurer en tant que groupe.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-122">If any components managed by a given writer are backed up, then a requester must [*explicitly include*](vssgloss-e.md) all nonselectable [*components*](vssgloss-c.md) without selectable ancestors in their [*logical path*](vssgloss-l.md) to the Backup Components Document and back up and restore those components as a group.</span></span>
-   <span data-ttu-id="3e6dd-123">Un demandeur a la possibilité d’ajouter explicitement des composants sélectionnables au document des composants de sauvegarde pendant les opérations de sauvegarde et de restauration ; une fois ajouté, le composant doit être sauvegardé ou restauré.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-123">A requester has the option of explicitly adding selectable components to the Backup Components Document during backup and restore operations; once added, the component must be backed up or restored.</span></span>
-   <span data-ttu-id="3e6dd-124">Si un composant peut être sélectionné, le composant et tous ses sous- [*composants*](vssgloss-s.md) (tels que définis par les chemins logiques) forment un jeu de composants, qui peut être traité comme une unité unique qui peut éventuellement participer à des opérations de sauvegarde et de restauration.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-124">If a component is selectable, the component and all of its [*subcomponents*](vssgloss-s.md) (as defined by logical paths) form a component set, which can be treated as a single unit that may optionally participate in backup and restore operations.</span></span>
-   <span data-ttu-id="3e6dd-125">Un demandeur n’ajoute jamais explicitement un composant non sélectionnable avec des ancêtres sélectionnables, un sous-composant d’un jeu de composants, à son document de composants de sauvegarde pendant les opérations de sauvegarde et de restauration.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-125">A requester never explicitly adds a nonselectable component with selectable ancestors, a subcomponent in a component set, to its Backup Components Document during backup and restore operations.</span></span> <span data-ttu-id="3e6dd-126">Ces composants doivent être [*inclus implicitement*](/windows) si leur ancêtre sélectionnable est explicitement ajouté, auquel cas ils doivent être sauvegardés ou restaurés (voir [utilisation de composants par le demandeur](use-of-components-by-the-requestor.md)).</span><span class="sxs-lookup"><span data-stu-id="3e6dd-126">These components must be [*implicitly included*](/windows) if their selectable ancestor is explicitly added, in which case they must be backed up or restored (see [Use of Components by the Requester](use-of-components-by-the-requestor.md)).</span></span>
-   <span data-ttu-id="3e6dd-127">Un composant sélectionnable avec un ancêtre sélectionnable est toujours un sous- [*composant*](vssgloss-s.md) (un membre d’un jeu de composants) et peut être inclus implicitement si son ancêtre sélectionnable est explicitement inclus dans l’opération.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-127">A selectable component with a selectable ancestor is still a [*subcomponent*](vssgloss-s.md) (a member of a component set) and may be implicitly included if its selectable ancestor is explicitly included in the operation.</span></span> <span data-ttu-id="3e6dd-128">Dans ce cas, ses informations ne sont pas ajoutées au document sur les composants de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-128">In this case, its information is not added to the Backup Components Document.</span></span> <span data-ttu-id="3e6dd-129">Si son ancêtre sélectionnable n’est pas inclus dans l’opération, le composant peut être explicitement sélectionné pour être inclus dans l’opération, auquel cas ses informations sont incluses dans le document sur les composants de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-129">If its selectable ancestor is not included in the operation, the component can be explicitly selected for inclusion in the operation, in which case its information is included in the Backup Components Document.</span></span>
-   <span data-ttu-id="3e6dd-130">Un sous-composant inclus implicitement dans une sauvegarde peut être inclus explicitement dans une opération de restauration, indépendamment de l’état d’un ancêtre sélectionnable, s’il peut être sélectionné pour la restauration.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-130">A subcomponent implicitly included in a backup can be explicitly included in a restore operation, regardless of the status of any selectable ancestor, if it is selectable for restore.</span></span> <span data-ttu-id="3e6dd-131">Tout élément sélectionnable pour le sous-composant Restore inclus lors d’une opération de restauration doit avoir ses informations ajoutées au document des composants de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-131">Any selectable for restore subcomponent included during a restore operation must have its information added to the Backup Components Document.</span></span>
-   <span data-ttu-id="3e6dd-132">Un enregistreur qui n’avait aucun composant explicitement ajouté au document des composants de sauvegarde avant la génération de [*PrepareForBackup*](vssgloss-p.md) et les événements de [*prérestauration*](vssgloss-p.md) ne recevront pas d’événements VSS supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-132">A writer that has had no component explicitly added to the Backup Components Document prior to the generation of [*PrepareForBackup*](vssgloss-p.md) and [*PreRestore*](vssgloss-p.md) events will not receive any further VSS events.</span></span>

<span data-ttu-id="3e6dd-133">Pour plus d’informations, consultez [utilisation de la sélectivité et des chemins d’accès logiques](working-with-selectability-and-logical-paths.md).</span><span class="sxs-lookup"><span data-stu-id="3e6dd-133">For more information, see [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md).</span></span>

## <a name="adding-files-to-a-component"></a><span data-ttu-id="3e6dd-134">Ajout de fichiers à un composant</span><span class="sxs-lookup"><span data-stu-id="3e6dd-134">Adding Files to a Component</span></span>

<span data-ttu-id="3e6dd-135">Un composant contient des informations de fichier sous la forme d’un [*jeu de fichiers*](vssgloss-f.md) qui contient :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-135">A component contains file information in the form of a [*file set*](vssgloss-f.md) that contains:</span></span>

-   <span data-ttu-id="3e6dd-136">Répertoire racine des fichiers dans le composant.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-136">A root directory of the files in the component.</span></span>
-   <span data-ttu-id="3e6dd-137">Spécification de fichier pour les fichiers dans le composant.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-137">A file specification for the files in the component.</span></span>
-   <span data-ttu-id="3e6dd-138">Indicateur qui spécifie si la spécification du composant est récursive.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-138">A flag that indicates whether the component's specification is recursive.</span></span>

<span data-ttu-id="3e6dd-139">Selon le type de composant, qui peut être une base de données ou un groupe de fichiers, et (dans le cas des composants de base de données) si les fichiers à charger sont des fichiers de données ou des fichiers journaux, un enregistreur appelle [**IVssCreateWriterMetadata :: AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup), [**IVssCreateWriterMetadata :: AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles)ou [**IVssCreateWriterMetadata :: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) pour ajouter un jeu de fichiers.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-139">Depending on component type, which can be a database or a file group, and (in the case of database components) whether the files to be loaded are data or log files, a writer calls [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup), [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), or [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) to add a file set.</span></span>

<span data-ttu-id="3e6dd-140">Lorsque vous utilisez ces fonctions, vous devez spécifier les fichiers à ajouter au jeu de fichiers comme suit :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-140">When using these functions, you should specify the files to be added to the file set as follows:</span></span>

-   <span data-ttu-id="3e6dd-141">*wszPath*: chemin d’accès au répertoire qui contient les fichiers à ajouter au jeu de fichiers.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-141">*wszPath*: This is the path to the directory that contains the files to be added to the file set.</span></span> <span data-ttu-id="3e6dd-142">Si le paramètre *bRecursive* est défini sur **true**, le paramètre *wszPath* spécifie une hiérarchie de répertoires à traverser de manière récursive, et tous les répertoires doivent être recréés, y compris les répertoires vides.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-142">If the *bRecursive* parameter is set to **true**, the *wszPath* parameter specifies a hierarchy of directories to be traversed recursively, and all directories should be recreated, including empty directories.</span></span>
-   <span data-ttu-id="3e6dd-143">*wszFilespec*: cette chaîne spécifie les fichiers de chaque répertoire à ajouter au jeu de fichiers.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-143">*wszFilespec*: This string specifies the files in each directory to be added to the file set.</span></span>

<span data-ttu-id="3e6dd-144">Par exemple, supposons que la structure de répertoires suivante existe :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-144">For example, suppose the following directory structure exists:</span></span>

<dl> <span data-ttu-id="3e6dd-145">C : \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-145">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="3e6dd-146">C : \\ Directory1 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-146">C:\\Directory1\\File2.txt</span></span>  
<span data-ttu-id="3e6dd-147">C : \\ Directory1 \\ Directory2 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-147">C:\\Directory1\\Directory2\\File1.txt</span></span>  
<span data-ttu-id="3e6dd-148">C : \\ Directory1 \\ Directory2 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-148">C:\\Directory1\\Directory2\\File2.txt</span></span>  
<span data-ttu-id="3e6dd-149">C : \\ Directory1 \\ Directory3</span><span class="sxs-lookup"><span data-stu-id="3e6dd-149">C:\\Directory1\\Directory3</span></span>\\  
</dl>

<span data-ttu-id="3e6dd-150">Si le writer spécifie « C : \\ Directory1 » pour *wszPath*, « fichier1. \* » pour *wszFilespec* et **true** pour *bRecursive*, le demandeur doit inclure les fichiers suivants :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-150">If the writer specifies "C:\\Directory1" for *wszPath*, "File1.\*" for *wszFilespec*, and **true** for *bRecursive*, the requester should include these files:</span></span>

<dl> <span data-ttu-id="3e6dd-151">C : \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-151">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="3e6dd-152">C : \\ Directory1 \\ Directory2 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-152">C:\\Directory1\\Directory2\\File1.txt</span></span>  
</dl>

<span data-ttu-id="3e6dd-153">Si, à la place, le writer spécifie « C : \\ Directory1 » pour *wszPath*, « \* » pour *wszFilespec* et **true** pour *bRecursive*, le demandeur doit inclure les fichiers suivants :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-153">If the writer instead specifies "C:\\Directory1" for *wszPath*, "\*" for *wszFilespec*, and **true** for *bRecursive*, the requester should include these files:</span></span>

<dl> <span data-ttu-id="3e6dd-154">C : \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-154">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="3e6dd-155">C : \\ Directory1 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-155">C:\\Directory1\\File2.txt</span></span>  
<span data-ttu-id="3e6dd-156">C : \\ Directory1 \\ Directory2 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-156">C:\\Directory1\\Directory2\\File1.txt</span></span>  
<span data-ttu-id="3e6dd-157">C : \\ Directory1 \\ Directory2 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-157">C:\\Directory1\\Directory2\\File2.txt</span></span>  
</dl>

<span data-ttu-id="3e6dd-158">Si le writer spécifie « C : \\ Directory1 » pour *wszPath*, « \* » pour *WszFilespec* et **false** pour *bRecursive*, le demandeur doit inclure les fichiers suivants :</span><span class="sxs-lookup"><span data-stu-id="3e6dd-158">If the writer specifies "C:\\Directory1" for *wszPath*, "\*" for *wszFilespec*, and **false** for *bRecursive*, the requester should include these files:</span></span>

<dl> <span data-ttu-id="3e6dd-159">C : \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-159">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="3e6dd-160">C : \\ Directory1 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="3e6dd-160">C:\\Directory1\\File2.txt</span></span>  
</dl>

<span data-ttu-id="3e6dd-161">Dans tous les exemples précédents, chaque fois que le writer spécifie **true** pour *bRecursive*, le répertoire vide C : \\ Directory1 \\ Directory3 \\ doit être recréé.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-161">In all of the preceding examples, whenever the writer specifies **true** for *bRecursive*, the empty directory C:\\Directory1\\Directory3\\ should be recreated.</span></span>

<span data-ttu-id="3e6dd-162">Pour un jeu de fichiers ajouté à un composant de groupe de fichiers, dans les cas où les fichiers qui se trouvent actuellement sur le disque ne sont pas dans ce que le rédacteur considère comme l’emplacement approprié ou par défaut, un enregistreur a la possibilité d’ajouter un autre chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-162">For a file set added to a file group component, in cases where files currently on disk are not in what the writer would consider the appropriate or default location, a writer has the option of adding an alternate path.</span></span> <span data-ttu-id="3e6dd-163">Dans ce cas, la définition du chemin d’accès du jeu de fichiers contient l’emplacement normal des fichiers et de l’emplacement où les fichiers doivent être restaurés, tandis que l’autre chemin d’accès contient l’emplacement actuel des fichiers à sauvegarder.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-163">In these cases, the file set's definition of the path contains the normal location of the files and to where files should be restored, while the alternate path contains the current location of files to be backed up.</span></span>

<span data-ttu-id="3e6dd-164">Tous les fichiers du jeu de fichiers doivent exister au moment de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-164">All files in the file set must exist at the time of the backup.</span></span> <span data-ttu-id="3e6dd-165">Les demandeurs doivent supposer que tous les fichiers répertoriés dans le jeu de fichiers sont requis pour la sauvegarde et échoueront à la sauvegarde si des fichiers sont manquants.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-165">Requesters must assume that all files listed in the file set are required for the backup and will fail the backup if any files are missing.</span></span> <span data-ttu-id="3e6dd-166">Notez que lorsque « \* » est spécifié pour le paramètre *wszFilespec* , il peut correspondre à zéro ou plusieurs fichiers.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-166">Note that when "\*" is specified for the *wszFilespec* parameter, it can match zero or more files.</span></span>

<span data-ttu-id="3e6dd-167">Notez que les attributs du document de métadonnées de l’enregistreur sont des mappages d’emplacements alternatifs, des fichiers explicitement inclus et exclus, et que les méthodes de restauration sont définies au niveau du writer, et non au niveau du composant.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-167">Note that such Writer Metadata Document attributes as alternate location mappings, explicitly included and excluded files, and restore methods are set at the writer level, not the component level.</span></span> <span data-ttu-id="3e6dd-168">(Pour plus d’informations, consultez [utilisation du document de métadonnées de l’enregistreur](working-with-the-writer-metadata-document.md).)</span><span class="sxs-lookup"><span data-stu-id="3e6dd-168">(For more information, see [Working with the Writer Metadata Document](working-with-the-writer-metadata-document.md).)</span></span>

## <a name="component-definition-for-backup-and-restore-operations"></a><span data-ttu-id="3e6dd-169">Définition de composant pour les opérations de sauvegarde et de restauration</span><span class="sxs-lookup"><span data-stu-id="3e6dd-169">Component Definition for Backup and Restore Operations</span></span>

<span data-ttu-id="3e6dd-170">Les opérations de restauration et de sauvegarde génèrent nécessairement un [*événement d’identification*](vssgloss-i.md), et pour les sauvegardes et les restaurations, elles sont gérées par la même méthode [**CVssWriter :: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) .</span><span class="sxs-lookup"><span data-stu-id="3e6dd-170">Both restore and backup operations necessarily generate an [*Identify event*](vssgloss-i.md), and for both backups and restores it will be handled by the same [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) method.</span></span>

<span data-ttu-id="3e6dd-171">Pendant les opérations de sauvegarde, les demandeurs utilisent les informations retournées par les méthodes [**CVssWriter :: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) d’un writer pour déterminer quels Writers sont présents sur le système, puis pour déterminer ceux de leurs fichiers à sauvegarder.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-171">During backup operations, requesters use the information returned by a writer's [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) methods to determine which writers are present on the system and then to determine which of their files to back up.</span></span>

<span data-ttu-id="3e6dd-172">Pendant les opérations de restauration, les informations retournées par l’événement [**CVssWriter :: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) d’un writer sont utilisées uniquement pour établir l’identité et l’état des enregistreurs actuellement présents sur le système. les informations de spécification de fichier générées au cours d’une restauration ne sont pas utilisées.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-172">During restore operations, the information returned by a writer's [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) event is used only to establish the identity and status of writers currently present on the system; the file specification information generated during a restore is not used.</span></span> <span data-ttu-id="3e6dd-173">Au lieu de cela, les documents de métadonnées d’écriture stockés au moment de la sauvegarde sont utilisés pour obtenir ces données.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-173">Instead, Writer Metadata Documents stored at backup time are used to obtain this data.</span></span>

<span data-ttu-id="3e6dd-174">Une fois générés au cours d’une opération de sauvegarde, les informations du composant d’écriture, ainsi que le reste des informations de l’enregistreur, sont enregistrées pour être récupérées afin de prendre en charge les opérations de restauration.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-174">Once generated during a backup operation, the writer component information, along with the rest of the writer information, is saved to be retrieved to support restore operations.</span></span> <span data-ttu-id="3e6dd-175">Il incombe généralement au demandeur de stocker ces informations.</span><span class="sxs-lookup"><span data-stu-id="3e6dd-175">It is typically the responsibility of the requester to store this information.</span></span>

 

 
