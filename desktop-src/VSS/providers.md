---
description: Les fournisseurs gèrent les volumes en cours d’exécution et créent des clichés instantanés à la demande.
ms.assetid: 4e6b46b0-df9e-4458-b0ac-e237d7656337
title: Fournisseurs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6bb336dbb51fcbd715ea236ecdc0c62d81daf29d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106519050"
---
# <a name="providers"></a><span data-ttu-id="ca721-103">Fournisseurs</span><span class="sxs-lookup"><span data-stu-id="ca721-103">Providers</span></span>

<span data-ttu-id="ca721-104">Les [*fournisseurs*](vssgloss-p.md) gèrent les volumes en cours d’exécution et créent des clichés instantanés à la demande.</span><span class="sxs-lookup"><span data-stu-id="ca721-104">[*Providers*](vssgloss-p.md) manage running volumes and create the shadow copies of them on demand.</span></span>

<span data-ttu-id="ca721-105">En réponse à une demande d’un demandeur, un fournisseur génère des événements COM pour signaler les applications d’un cliché instantané à venir, puis crée et gère cette copie jusqu’à ce qu’elle ne soit plus nécessaire.</span><span class="sxs-lookup"><span data-stu-id="ca721-105">In response to a request from a requester, a provider generates COM events to signal applications of a coming shadow copy, then creates and maintains that copy until it is no longer needed.</span></span>

<span data-ttu-id="ca721-106">Lorsqu’un cliché instantané est en cours d’existence, le fournisseur crée un environnement où il existe effectivement deux copies indépendantes de tout volume qui a fait l’objet de clichés instantanés : un disque en cours d’exécution utilisé et mis à jour normalement, l’autre copie qui est fixe et stable pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="ca721-106">While a shadow copy is in existence, the provider creates an environment where there are effectively two independent copies of any volume that has been shadow copied: one the running disk being used and updated as normal, the other a copy that is disk fixed and stable for backup.</span></span>

<span data-ttu-id="ca721-107">Même si un fournisseur par défaut est fourni avec Windows, d’autres fournisseurs sont libres de fournir leurs propres implémentations qui sont optimisées pour leur propre matériel de stockage et leurs propres offres logicielles.</span><span class="sxs-lookup"><span data-stu-id="ca721-107">While a default provider is supplied as part of Windows, other vendors are free to supply their own implementations that are optimized for their own storage hardware and software offerings.</span></span>

<span data-ttu-id="ca721-108">Du point de vue d’un développeur d’applications de sauvegarde/restauration ou de l’utilisateur final, tous les fournisseurs disposent de la même interface (consultez [sélection des fournisseurs](selecting-providers.md)).</span><span class="sxs-lookup"><span data-stu-id="ca721-108">From the point of view of an end-user or backup/restore application developer, all providers will have the same interface (see [Selecting Providers](selecting-providers.md)).</span></span>

<span data-ttu-id="ca721-109">Tous les fournisseurs doivent être en mesure d’effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="ca721-109">All providers must be able to do the following:</span></span>

-   <span data-ttu-id="ca721-110">Interceptez les demandes d’e/s entre le système de fichiers et le système de stockage de masse sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="ca721-110">Intercept I/O requests between the file system and the underlying mass storage system.</span></span>
-   <span data-ttu-id="ca721-111">Capturez et récupérez l’état d’un volume au moment du cliché instantané, en conservant une vue « limite dans le temps » des fichiers sur le disque sans que les opérations d’e/s partielles soient reflétées dans leur état.</span><span class="sxs-lookup"><span data-stu-id="ca721-111">Capture and retrieve the status of a volume at the time of shadow copy, maintaining a "point in time" view of the files on the disk with no partial I/O operations reflected in its state.</span></span>
-   <span data-ttu-id="ca721-112">Utilisez cette vue « ponctuelle » pour exposer (au minimum les applications compatibles VSS) un volume virtuel contenant les données des clichés instantanés.</span><span class="sxs-lookup"><span data-stu-id="ca721-112">Use this "point in time" view to expose (minimally to VSS-enabled applications) a virtual volume containing the shadow copied data.</span></span>

<span data-ttu-id="ca721-113">Selon la procédure à suivre, un fournisseur peut être de l’un des trois types suivants :</span><span class="sxs-lookup"><span data-stu-id="ca721-113">Depending on how this is done, a provider can be one of three types:</span></span>

-   [<span data-ttu-id="ca721-114">Fournisseur système</span><span class="sxs-lookup"><span data-stu-id="ca721-114">System Provider</span></span>](#system-provider)
-   [<span data-ttu-id="ca721-115">Fournisseurs de logiciels</span><span class="sxs-lookup"><span data-stu-id="ca721-115">Software Providers</span></span>](#software-providers)
-   [<span data-ttu-id="ca721-116">Fournisseurs de matériel</span><span class="sxs-lookup"><span data-stu-id="ca721-116">Hardware Providers</span></span>](#hardware-providers)

## <a name="system-provider"></a><span data-ttu-id="ca721-117">Fournisseur système</span><span class="sxs-lookup"><span data-stu-id="ca721-117">System Provider</span></span>

<span data-ttu-id="ca721-118">Un fournisseur de clichés instantanés, le [*fournisseur système*](vssgloss-s.md), est fourni par défaut dans le cadre de l’installation d’un système d’exploitation Windows.</span><span class="sxs-lookup"><span data-stu-id="ca721-118">One shadow copy provider, the [*system provider*](vssgloss-s.md), is supplied as a default part of a Windows operating system installation.</span></span> <span data-ttu-id="ca721-119">Actuellement, le fournisseur système est une instance particulière d’un fournisseur de logiciels.</span><span class="sxs-lookup"><span data-stu-id="ca721-119">Currently, the system provider is a particular instance of a software provider.</span></span> <span data-ttu-id="ca721-120">Toutefois, cela peut changer à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="ca721-120">However, this may change in the future.</span></span>

<span data-ttu-id="ca721-121">Pour conserver une vue « limite dans le temps » d’un volume contenu dans le cliché instantané, le fournisseur système utilise une technique de copie sur écriture.</span><span class="sxs-lookup"><span data-stu-id="ca721-121">To maintain a "point in time" view of a volume contained in the shadow copy, the system provider uses a copy-on-write technique.</span></span> <span data-ttu-id="ca721-122">Les copies des secteurs sur le disque qui ont été modifiés (appelées « différences ») depuis le début de la création de clichés instantanés sont stockées dans une zone de stockage de clichés instantanés.</span><span class="sxs-lookup"><span data-stu-id="ca721-122">Copies of the sectors on disk that have been modified (called "diffs") since the beginning of the shadow copy creation are stored in a shadow copy storage area.</span></span>

<span data-ttu-id="ca721-123">Par conséquent, le fournisseur système peut exposer le volume actif, qui peut être écrit et lu normalement, et appliquer les « différences » aux données du volume actif pour exposer efficacement les données figées du cliché instantané.</span><span class="sxs-lookup"><span data-stu-id="ca721-123">Therefore, the system provider can expose the live volume, which can be written to and read from normally, and apply the "diffs" to the live volume's data to effectively expose the frozen data of the shadow copy.</span></span>

<span data-ttu-id="ca721-124">Pour le fournisseur système, la zone de stockage de cliché instantané doit se trouver sur un volume NTFS.</span><span class="sxs-lookup"><span data-stu-id="ca721-124">For the system provider, the shadow copy storage area must be on an NTFS volume.</span></span> <span data-ttu-id="ca721-125">Le volume qui fait l’objet du cliché instantané n’a pas besoin d’être un volume NTFS, mais au moins un volume monté sur le système doit en être un.</span><span class="sxs-lookup"><span data-stu-id="ca721-125">The volume to be shadow copied does not need to be an NTFS volume, but at least one volume mounted on the system must be an NTFS volume.</span></span>

## <a name="software-providers"></a><span data-ttu-id="ca721-126">Fournisseurs de logiciels</span><span class="sxs-lookup"><span data-stu-id="ca721-126">Software Providers</span></span>

<span data-ttu-id="ca721-127">Les fournisseurs de clichés instantanés logiciels interceptent et traitent les demandes d’e/s dans une couche logicielle entre le système de fichiers et le logiciel du gestionnaire de volume.</span><span class="sxs-lookup"><span data-stu-id="ca721-127">Software shadow copy providers intercept and process I/O requests in a software layer between the file system and the volume manager software.</span></span> <span data-ttu-id="ca721-128">Ces fournisseurs sont implémentés en tant que composant DLL en mode utilisateur et au moins un pilote de périphérique en mode noyau, généralement (mais pas nécessairement) un pilote de filtre de stockage.</span><span class="sxs-lookup"><span data-stu-id="ca721-128">These providers are implemented as a user-mode DLL component and at least one kernel-mode device driver, typically (but not necessarily) a storage filter driver.</span></span> <span data-ttu-id="ca721-129">Le travail de création de ces clichés instantanés s’effectue dans le logiciel.</span><span class="sxs-lookup"><span data-stu-id="ca721-129">The work of creating these shadow copies is done in software.</span></span>

<span data-ttu-id="ca721-130">Un fournisseur de clichés instantanés logiciel doit conserver une vue « ponctuelle » d’un volume en ayant accès à un ensemble de fichiers qui peuvent être utilisés pour recréer avec précision l’état du volume avant le cliché instantané.</span><span class="sxs-lookup"><span data-stu-id="ca721-130">A software shadow copy provider must maintain a "point-in-time" view of a volume by having access to a set of files that can be used to accurately re-create volume status prior to the shadow copy.</span></span> <span data-ttu-id="ca721-131">Par exemple, il s’agit de la technique de copie sur écriture du fournisseur système.</span><span class="sxs-lookup"><span data-stu-id="ca721-131">An example of this is the copy-on-write technique of the system provider.</span></span>

<span data-ttu-id="ca721-132">Toutefois, VSS n’impose aucune restriction quant à la technique utilisée par les fournisseurs de logiciels pour créer et gérer des clichés instantanés, et les fournisseurs tiers sont libres de mettre en œuvre leurs fournisseurs de logiciels tels qu’ils s’affichent.</span><span class="sxs-lookup"><span data-stu-id="ca721-132">However, VSS places no restrictions on what technique that software providers use to create and maintain shadow copies, and third-party vendors are free to implement their software providers as they see fit.</span></span>

<span data-ttu-id="ca721-133">En outre, VSS prend en charge la plupart des fonctionnalités des fournisseurs de clichés instantanés logiciels, telles que la définition du point dans le temps, la synchronisation et le vidage des données, la fourniture d’une interface commune pour les applications de sauvegarde et la gestion du cliché instantané.</span><span class="sxs-lookup"><span data-stu-id="ca721-133">In addition, VSS provides support for much of the functionality of software shadow copy providers, such as defining the point-in-time, data synchronization and flushing, providing a common interface for backup applications, and management of the shadow copy.</span></span>

<span data-ttu-id="ca721-134">Un fournisseur de logiciels, par définition, s’applique à un plus grand nombre de plates-formes de stockage qu’un fournisseur de matériel, et doit être en mesure d’utiliser les disques de base ou les volumes logiques également.</span><span class="sxs-lookup"><span data-stu-id="ca721-134">A software provider will, by definition, be applicable to a wider range of storage platforms than a hardware provider, and should be able to work with basic disks or logical volumes equally well.</span></span> <span data-ttu-id="ca721-135">Cette généralisation sacrifie les performances qui peuvent être disponibles en implémentant des clichés instantanés sur le matériel et n’utilise pas les fonctionnalités de capture de volume ou de mise en miroir de fichiers spécifiques au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="ca721-135">This generality sacrifices the performance that may be available by implementing shadow copies in hardware and does not make use of any vendor-specific volume capture or file mirroring features.</span></span>

## <a name="hardware-providers"></a><span data-ttu-id="ca721-136">Fournisseurs de matériel</span><span class="sxs-lookup"><span data-stu-id="ca721-136">Hardware Providers</span></span>

<span data-ttu-id="ca721-137">Les fournisseurs de clichés instantanés matériels interceptent les demandes d’e/s du système de fichiers au niveau du matériel en travaillant conjointement avec un adaptateur de stockage matériel ou un contrôleur.</span><span class="sxs-lookup"><span data-stu-id="ca721-137">Hardware shadow copy providers intercept I/O requests from the file system at the hardware level by working in conjunction with a hardware storage adapter or controller.</span></span> <span data-ttu-id="ca721-138">La tâche de création du cliché instantané est effectuée par un adaptateur hôte, un dispositif de stockage ou un contrôleur RAID en dehors du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="ca721-138">The work of creating the shadow copy is performed by a host adapter, storage appliance, or RAID controller outside of the operating system.</span></span>

<span data-ttu-id="ca721-139">Ces fournisseurs sont implémentés en tant que composant DLL en mode utilisateur communiquant avec le matériel qui expose les données de cliché instantané : par conséquent, les fournisseurs de clichés instantanés de matériel peuvent avoir besoin d’appeler ou de créer d’autres composants en mode noyau.</span><span class="sxs-lookup"><span data-stu-id="ca721-139">These providers are implemented as a user-mode DLL component communicating with the hardware that will expose the shadow copy data: therefore, hardware shadow copy providers may need to call or create other kernel-mode components.</span></span>

<span data-ttu-id="ca721-140">Les fournisseurs de matériel exposent aux clichés instantanés VSS de disques complets ou d’unités logiques (LUN).</span><span class="sxs-lookup"><span data-stu-id="ca721-140">Hardware providers expose to VSS shadow copies of entire disks or logical units (LUNs).</span></span> <span data-ttu-id="ca721-141">Les demandeurs gèrent toujours les clichés instantanés de volumes ; tout le mappage de volume à disque est géré en interne par VSS.</span><span class="sxs-lookup"><span data-stu-id="ca721-141">Requesters still deal with shadow copies of volumes; all the volume-to-disk mapping is handled internally by VSS.</span></span> <span data-ttu-id="ca721-142">Les clichés instantanés créés par les fournisseurs de matériel des volumes qui résident sur des disques dynamiques ont une exigence spécifique : ils ne peuvent pas être importés sur le même système.</span><span class="sxs-lookup"><span data-stu-id="ca721-142">Shadow copies created by hardware providers of volumes that reside on dynamic disks have a specific requirement:  They cannot be imported onto the same system.</span></span> <span data-ttu-id="ca721-143">Ils doivent être créés et transportables et importés sur un deuxième système.</span><span class="sxs-lookup"><span data-stu-id="ca721-143">They must be created transportable and imported on a second system.</span></span>

<span data-ttu-id="ca721-144">Bien qu’un fournisseur de clichés instantanés matériel utilise des fonctionnalités VSS qui définissent le point dans le temps, permet la synchronisation des données, gère le cliché instantané et fournit une interface commune avec les applications de sauvegarde, VSS ne spécifie pas le mécanisme sous-jacent par lequel le fournisseur de matériel produit et gère les clichés instantanés.</span><span class="sxs-lookup"><span data-stu-id="ca721-144">While a hardware shadow copy provider makes use of VSS functionality that defines the point in time, allows data synchronization, manages the shadow copy, and provides a common interface with backup applications, VSS does not specify the underlying mechanism by which the hardware provider produces and maintains shadow copies.</span></span>

 

 



