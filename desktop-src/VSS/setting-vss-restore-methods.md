---
description: La configuration des opérations de restauration commence en fait pendant la sauvegarde des données, lorsque les enregistreurs spécifient, dans leurs documents de métadonnées d’écriture, comment leurs données doivent être restaurées.
ms.assetid: b1f948cd-d3b0-4637-b76d-b54a74bb5948
title: Définition des méthodes de restauration VSS
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 412cb699fb791a973e280f63fec03bd2854ccd1d
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/04/2021
ms.locfileid: "104211159"
---
# <a name="setting-vss-restore-methods"></a><span data-ttu-id="9cf18-103">Définition des méthodes de restauration VSS</span><span class="sxs-lookup"><span data-stu-id="9cf18-103">Setting VSS Restore Methods</span></span>

<span data-ttu-id="9cf18-104">La configuration des opérations de restauration commence en fait pendant la sauvegarde des données, lorsque les enregistreurs spécifient, dans leurs documents de métadonnées d’écriture, comment leurs données doivent être restaurées.</span><span class="sxs-lookup"><span data-stu-id="9cf18-104">The configuration of restore operations actually begins during data backup, when writers specify, in their Writer Metadata Documents, how their data should be restored.</span></span>

<span data-ttu-id="9cf18-105">Ces spécifications, appelées méthodes de [*restauration*](vssgloss-r.md) ou cibles de [*restauration*](vssgloss-r.md)d’origine, peuvent être modifiées lors de la restauration par les rédacteurs définissant de nouvelles cibles de restauration ou par les demandeurs restaurant les nouveaux emplacements (voir [les emplacements de sauvegarde et de restauration non définis par défaut](non-default-backup-and-restore-locations.md)).</span><span class="sxs-lookup"><span data-stu-id="9cf18-105">These specifications, referred to either as [*restore methods*](vssgloss-r.md) or original [*restore targets*](vssgloss-r.md), can be modified during restore by writers setting new restore targets or by requesters restoring to new locations (see [Non-Default Backup and Restore Locations](non-default-backup-and-restore-locations.md)).</span></span>

<span data-ttu-id="9cf18-106">En appelant [**IVssCreateWriterMetadata :: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), un writer indique quelle méthode de restauration doit être utilisée dans son document de métadonnées d’écriture.</span><span class="sxs-lookup"><span data-stu-id="9cf18-106">By calling [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), a writer indicates which restore method should be used in its Writer Metadata Document.</span></span> <span data-ttu-id="9cf18-107">La méthode Restore est définie sur la valeur Writer et appliquée à tous les fichiers de tous les composants gérés par un writer.</span><span class="sxs-lookup"><span data-stu-id="9cf18-107">The restore method is set writer wide and applied to all files in all components that a writer manages.</span></span>

<span data-ttu-id="9cf18-108">Un demandeur obtient (et doit respecter) ces informations en appelant [**IVssExamineWriterMetadata :: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="9cf18-108">A requester obtains (and must respect) this information by calling [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="9cf18-109">La méthode Restore est définie par une énumération [**VSS \_ RESTOREMETHOD \_ enum**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) , qui est transmise à [**IVssCreateWriterMetadata :: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) et retournée à partir de [**IVssExamineWriterMetadata :: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="9cf18-109">The restore method is defined by a [**VSS\_RESTOREMETHOD\_ENUM**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) enumeration, which is passed to [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) and returned from [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="9cf18-110">Le document de métadonnées de l’enregistreur prend en charge les méthodes de restauration valides suivantes (une méthode de restauration de la \_ RME VSS \_ non définie indique une erreur d’écriture).</span><span class="sxs-lookup"><span data-stu-id="9cf18-110">The Writer Metadata Document supports the following valid restore methods (a restore method of VSS\_RME\_UNDEFINED indicates a writer error).</span></span> <span data-ttu-id="9cf18-111">Les figures résument la manière dont les différentes méthodes de restauration prises en charge et définies doivent être implémentées (VSS \_ RME \_ personnalisé n’a aucune figure associée, car, par définition, elle est spécifique à l’enregistreur et doit suivre les API et la documentation spécifiques du writer) :</span><span class="sxs-lookup"><span data-stu-id="9cf18-111">The figures summarize how the various supported and defined restore methods should be implemented (VSS\_RME\_CUSTOM has no figure associated with it, because by definition it is specific to the writer and must follow the specific writer APIs and documentation):</span></span>

-   <span data-ttu-id="9cf18-112">VSS \_ RME \_ Restore \_ si ce \_ n’est pas le cas \_ .</span><span class="sxs-lookup"><span data-stu-id="9cf18-112">VSS\_RME\_RESTORE\_IF\_NOT\_THERE.</span></span> <span data-ttu-id="9cf18-113">Restaurez les fichiers du composant sur le disque si aucun des fichiers ne se trouve déjà sur le disque.</span><span class="sxs-lookup"><span data-stu-id="9cf18-113">Restore component files to disk if none of the files are on the disk already.</span></span> <span data-ttu-id="9cf18-114">L’état du fichier cible doit être vérifié après un événement de [**prérestauration**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="9cf18-114">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="9cf18-115">![Diagramme qui montre une arborescence de résolution des problèmes pour VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span><span class="sxs-lookup"><span data-stu-id="9cf18-115">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span></span>
-   <span data-ttu-id="9cf18-116">\_Restore RME VSS \_ \_ si \_ peut \_ remplacer.</span><span class="sxs-lookup"><span data-stu-id="9cf18-116">VSS\_RME\_RESTORE\_IF\_CAN\_REPLACE.</span></span> <span data-ttu-id="9cf18-117">Restaurez les fichiers sur le disque si tous les fichiers peuvent être remplacés.</span><span class="sxs-lookup"><span data-stu-id="9cf18-117">Restore files to disk if all the files can be replaced.</span></span> <span data-ttu-id="9cf18-118">L’état du fichier cible doit être vérifié après un événement de [**prérestauration**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="9cf18-118">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="9cf18-119">![Diagramme qui montre une arborescence de résolution des problèmes pour VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span><span class="sxs-lookup"><span data-stu-id="9cf18-119">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span></span>
-   <span data-ttu-id="9cf18-120">VSS \_ RME \_ arrêter le démarrage de la \_ restauration \_ .</span><span class="sxs-lookup"><span data-stu-id="9cf18-120">VSS\_RME\_STOP\_RESTORE\_START.</span></span> <span data-ttu-id="9cf18-121">Un service sera arrêté avant la restauration des fichiers.</span><span class="sxs-lookup"><span data-stu-id="9cf18-121">A service will be stopped prior to restoring the files.</span></span>
    <span data-ttu-id="9cf18-122">![Diagramme qui montre une arborescence de résolution des problèmes pour VSS_RME_STOP_RESTORE_START.](images/srr.png)</span><span class="sxs-lookup"><span data-stu-id="9cf18-122">![Diagram that shows a troubleshooting tree for VSS_RME_STOP_RESTORE_START.](images/srr.png)</span></span>
-   <span data-ttu-id="9cf18-123">\_ \_ restauration de RME VSS vers un \_ \_ autre \_ emplacement.</span><span class="sxs-lookup"><span data-stu-id="9cf18-123">VSS\_RME\_RESTORE\_TO\_ALTERNATE\_LOCATION.</span></span> <span data-ttu-id="9cf18-124">Restaurez les fichiers sur le disque à un autre emplacement.</span><span class="sxs-lookup"><span data-stu-id="9cf18-124">Restore files to disk in an alternate location.</span></span> <span data-ttu-id="9cf18-125">Les mappages d’emplacement de remplacement sont spécifiés dans le document de métadonnées de l’enregistreur.</span><span class="sxs-lookup"><span data-stu-id="9cf18-125">The alternate location mappings are specified in the Writer Metadata Document.</span></span>
    <span data-ttu-id="9cf18-126">![Diagramme qui montre une arborescence de résolution des problèmes pour VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span><span class="sxs-lookup"><span data-stu-id="9cf18-126">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span></span>
-   <span data-ttu-id="9cf18-127">\_restauration RME \_ VSS \_ au \_ redémarrage.</span><span class="sxs-lookup"><span data-stu-id="9cf18-127">VSS\_RME\_RESTORE\_AT\_REBOOT.</span></span> <span data-ttu-id="9cf18-128">Entraîner la restauration des fichiers (remplacés) lors du redémarrage de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="9cf18-128">Cause files to be restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="9cf18-129">![Diagramme qui montre une arborescence de résolution des problèmes pour VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span><span class="sxs-lookup"><span data-stu-id="9cf18-129">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span></span>
-   <span data-ttu-id="9cf18-130">\_restauration RME \_ VSS \_ au \_ redémarrage \_ si \_ ne peut pas être \_ remplacé.</span><span class="sxs-lookup"><span data-stu-id="9cf18-130">VSS\_RME\_RESTORE\_AT\_REBOOT\_IF\_CANNOT\_REPLACE.</span></span> <span data-ttu-id="9cf18-131">Si un fichier n’a pas pu être restauré sur le disque d’un système en cours d’exécution, il est restauré (remplacé) lors du redémarrage de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="9cf18-131">If a file could not be restored to disk on a running system, then it is restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="9cf18-132">![Diagramme qui affiche une forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE de l’arborescence de résolution des problèmes.</span><span class="sxs-lookup"><span data-stu-id="9cf18-132">![Diagram that shows a troubleshooting tree forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE.</span></span> ](images/raricr.png)
-   <span data-ttu-id="9cf18-133">\_RME VSS \_ personnalisé.</span><span class="sxs-lookup"><span data-stu-id="9cf18-133">VSS\_RME\_CUSTOM.</span></span> <span data-ttu-id="9cf18-134">Aucune des méthodes prédéfinies ne fonctionnera. l’application de sauvegarde doit utiliser des API spécialisées pour effectuer l’opération de restauration.</span><span class="sxs-lookup"><span data-stu-id="9cf18-134">None of the predefined methods will work; the backup application must use specialized APIs to perform the restore operation.</span></span> <span data-ttu-id="9cf18-135">Pour cette méthode de sauvegarde, le demandeur doit entièrement comprendre le writer en question.</span><span class="sxs-lookup"><span data-stu-id="9cf18-135">For this backup method, the requester must completely understand the writer in question.</span></span> <span data-ttu-id="9cf18-136">Consultez les [cas d’utilisation de VSS spéciaux](special-vss-usage-cases.md) pour les instances actuellement prises en charge.</span><span class="sxs-lookup"><span data-stu-id="9cf18-136">See [Special VSS Usage Cases](special-vss-usage-cases.md) for currently supported instances.</span></span>

 

 



