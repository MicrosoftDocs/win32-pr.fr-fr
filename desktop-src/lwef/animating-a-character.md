---
title: Animation d’un caractère
description: Animation d’un caractère
ms.assetid: ed42de30-acac-41e8-bacb-4caaff254724
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3ed47b30a9bcfcdb5e305b87ced5f02526ae0056
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104031117"
---
# <a name="animating-a-character"></a><span data-ttu-id="57bcb-103">Animation d’un caractère</span><span class="sxs-lookup"><span data-stu-id="57bcb-103">Animating a Character</span></span>

<span data-ttu-id="57bcb-104">\[Microsoft Agent est déconseillé à partir de Windows 7 et peut ne pas être disponible dans les versions ultérieures de Windows.\]</span><span class="sxs-lookup"><span data-stu-id="57bcb-104">\[Microsoft Agent is deprecated as of Windows 7, and may be unavailable in subsequent versions of Windows.\]</span></span>

<span data-ttu-id="57bcb-105">Une fois qu’un caractère est chargé, vous pouvez utiliser plusieurs méthodes de Microsoft Agent pour animer le caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-105">Once a character is loaded, you can use several of Microsoft Agent's methods for animating the character.</span></span> <span data-ttu-id="57bcb-106">La première que vous utilisez est généralement la méthode [**Show**](show-method.md) .</span><span class="sxs-lookup"><span data-stu-id="57bcb-106">The first one you use is typically the [**Show**](show-method.md) method.</span></span> <span data-ttu-id="57bcb-107">**Afficher** rend le frame du caractère visible et lit l’animation affectée à l’état d' **affichage** du caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-107">**Show** makes the character's frame visible and plays the animation assigned to the character's **Showing** state.</span></span>

<span data-ttu-id="57bcb-108">Une fois que le frame du caractère est visible, vous pouvez utiliser la méthode [**Play**](play-method.md) , en spécifiant le nom d’une animation, pour lire cette animation.</span><span class="sxs-lookup"><span data-stu-id="57bcb-108">Once the character's frame is visible, you can use the [**Play**](play-method.md) method, specifying the name of an animation, to play that animation.</span></span> <span data-ttu-id="57bcb-109">Les noms d’animation sont spécifiques à une définition de caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-109">Animation names are specific to a character definition.</span></span> <span data-ttu-id="57bcb-110">À mesure qu’une animation est lue, la forme de sa fenêtre change pour correspondre à l’image dans le cadre.</span><span class="sxs-lookup"><span data-stu-id="57bcb-110">As an animation plays, the shape of its window changes to match the image in the frame.</span></span> <span data-ttu-id="57bcb-111">Une image de graphique mobile, ou un *Sprite*, s’affiche par-dessus le bureau et toutes les fenêtres, ou l' *ordre de plan*.</span><span class="sxs-lookup"><span data-stu-id="57bcb-111">This results in a movable graphic image, or *sprite*, displayed on top of the desktop and all windows, or *z-order*.</span></span>

<span data-ttu-id="57bcb-112">Si le fichier du caractère est stocké localement, il vous suffit d’appeler la méthode [**Play**](play-method.md) .</span><span class="sxs-lookup"><span data-stu-id="57bcb-112">If the character's file is stored locally, you can simply call the [**Play**](play-method.md) method.</span></span> <span data-ttu-id="57bcb-113">Dans d’autres cas, par exemple, lorsque vous avez chargé un. Caractère ACF à partir d’un serveur HTTP, vous devez utiliser la méthode d’extraction (ou de [**préparation**](/windows/desktop/lwef/iagentcharacter--prepare)) pour récupérer d' [**abord les données**](get-method.md) d’animation.</span><span class="sxs-lookup"><span data-stu-id="57bcb-113">In other cases, such as when you have loaded an .ACF character from an HTTP server, you must use the [**Get**](get-method.md) (or [**Prepare**](/windows/desktop/lwef/iagentcharacter--prepare)) method to first retrieve the animation data.</span></span> <span data-ttu-id="57bcb-114">L’agent demande alors le fichier d’animation sur le serveur et le stocke dans la mémoire tampon du navigateur sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="57bcb-114">This will cause Agent to request the animation file from the server and store it in the browser's buffer on the local machine.</span></span>

<span data-ttu-id="57bcb-115">La méthode [**Speak**](speak-method.md) vous permet de programmer le caractère à parler, en synchronisant automatiquement la sortie de la lèvre.</span><span class="sxs-lookup"><span data-stu-id="57bcb-115">The [**Speak**](speak-method.md) method enables you to program the character to speak, automatically lip-syncing the output.</span></span> <span data-ttu-id="57bcb-116">Pour plus d’informations, reportez-vous à la section sortie de ce document.</span><span class="sxs-lookup"><span data-stu-id="57bcb-116">Further details are covered in the Output section of this document.</span></span>

<span data-ttu-id="57bcb-117">Vous pouvez utiliser la méthode [**MoveTo**](moveto-method.md) pour positionner le caractère à un nouvel emplacement.</span><span class="sxs-lookup"><span data-stu-id="57bcb-117">You can use the [**MoveTo**](moveto-method.md) method to position the character at a new location.</span></span> <span data-ttu-id="57bcb-118">Lorsque vous appelez la méthode **MoveTo** , Microsoft Agent lit automatiquement l’animation appropriée en fonction de l’emplacement actuel du caractère, puis déplace le cadre du caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-118">When you call the **MoveTo** method, Microsoft Agent automatically plays the appropriate animation based on the character's current location, then moves the character's frame.</span></span> <span data-ttu-id="57bcb-119">De même, quand vous appelez [**GestureAt**](gestureat-method.md), Microsoft Agent lit l’animation gesturing appropriée en fonction de l’emplacement du caractère et de l’emplacement spécifié dans l’appel.</span><span class="sxs-lookup"><span data-stu-id="57bcb-119">Similarly, when you call [**GestureAt**](gestureat-method.md), Microsoft Agent plays the appropriate gesturing animation based on the character's location and the location specified in the call.</span></span>

<span data-ttu-id="57bcb-120">Pour masquer le caractère, appelez la méthode [Hide](hide-method.md) .</span><span class="sxs-lookup"><span data-stu-id="57bcb-120">To hide the character, call the [Hide](hide-method.md) method.</span></span> <span data-ttu-id="57bcb-121">Cela lit automatiquement le caractère associé à l’état de **masquage** du caractère, puis masque le frame du caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-121">This automatically plays the character associated with the character's **Hiding** state, then hides the character's frame.</span></span> <span data-ttu-id="57bcb-122">Toutefois, vous pouvez également masquer ou afficher un caractère en définissant la propriété [**visible**](visible-property.md) du caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-122">However, you can also hide or show a character by setting the character's [**Visible**](visible-property.md) property.</span></span>

<span data-ttu-id="57bcb-123">Microsoft Agent traite tous les appels d’animation, ou *demandes*, de manière asynchrone.</span><span class="sxs-lookup"><span data-stu-id="57bcb-123">Microsoft Agent processes all animation calls, or *requests*, asynchronously.</span></span> <span data-ttu-id="57bcb-124">Cela permet au code de votre application de continuer à gérer d’autres événements pendant le traitement de la requête.</span><span class="sxs-lookup"><span data-stu-id="57bcb-124">This enables your application's code to continue handling other events while the request is being processed.</span></span> <span data-ttu-id="57bcb-125">Par exemple, les appels à la méthode [**Play**](play-method.md) placent l’animation dans une file d’attente pour le caractère afin que les animations puissent être lues de manière séquentielle.</span><span class="sxs-lookup"><span data-stu-id="57bcb-125">For example, calls to the [**Play**](play-method.md) method place the animation in a queue for the character so that the animations can be played sequentially.</span></span> <span data-ttu-id="57bcb-126">Toutefois, cela signifie que vous ne pouvez pas supposer qu’un appel à d’autres fonctions s’exécutera nécessairement après l’animation qu’il suit dans votre code.</span><span class="sxs-lookup"><span data-stu-id="57bcb-126">However, this means you cannot assume that a call to other functions will necessarily execute after an animation it follows in your code.</span></span> <span data-ttu-id="57bcb-127">Par exemple, en général, une instruction qui suit un appel à **Play** ou [**MoveTo**](moveto-method.md) s’exécute avant la fin de l’animation.</span><span class="sxs-lookup"><span data-stu-id="57bcb-127">For example, typically, a statement following a call to **Play** or [**MoveTo**](moveto-method.md) will execute before the animation finishes.</span></span>

<span data-ttu-id="57bcb-128">Vous pouvez synchroniser votre code avec des animations dans la file d’attente d’un caractère en créant une référence d’objet à la demande d’animation et, lorsque l’animation démarre ou se termine, en surveillant les événements de [requête](the-request-object.md) que le serveur utilise pour notifier les clients du caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-128">You can synchronize your code with animations in a character's queue by creating an object reference to the animation request, and, when the animation starts or completes, monitoring the [Request](the-request-object.md) events that the server uses to notify clients of the character.</span></span> <span data-ttu-id="57bcb-129">Par exemple, si vous souhaitez qu’une boîte de message s’affiche lorsque le caractère termine une animation, vous pouvez placer l’appel de la boîte de message dans la sous-routine de gestion des événements [**RequestComplete**](requestcomplete-event.md) , en vérifiant l’ID de demande particulier.</span><span class="sxs-lookup"><span data-stu-id="57bcb-129">For example, if you want a message box to appear when the character finishes an animation, you can put the message box call in your [**RequestComplete**](requestcomplete-event.md) event handling subroutine, checking for the particular request ID.</span></span>

<span data-ttu-id="57bcb-130">Lorsqu’un caractère est masqué, le serveur ne joue pas les animations ; Toutefois, il met toujours en file d’attente et traite la demande d’animation (lit l’animation) et transmet à nouveau l’état de la demande au client.</span><span class="sxs-lookup"><span data-stu-id="57bcb-130">When a character is hidden, the server does not play animations; however, it still queues and processes the animation request (plays the animation) and passes a request status back to the client.</span></span> <span data-ttu-id="57bcb-131">Dans l’état masqué, le caractère ne peut pas devenir en entrée-actif.</span><span class="sxs-lookup"><span data-stu-id="57bcb-131">In the hidden state, the character cannot become input-active.</span></span> <span data-ttu-id="57bcb-132">Toutefois, si l’utilisateur parle du nom du caractère (lorsque l’entrée vocale est activée), le serveur affiche automatiquement le caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-132">However, if the user speaks the name of the character (when speech input is enabled), the server automatically shows the character.</span></span>

<span data-ttu-id="57bcb-133">Lorsque votre application cliente charge plusieurs caractères en même temps, les services d’animation de Microsoft agent vous permettent d’animer des caractères indépendamment ou d’utiliser les méthodes d' [**attente**](wait-method.md), d' [**interruption**](interrupt-method.md)ou d' [**arrêt**](stop-method.md) pour synchroniser leur animation les unes avec les autres.</span><span class="sxs-lookup"><span data-stu-id="57bcb-133">When your client application loads multiple characters at the same time, Microsoft Agent's animation services enable you to animate characters independently or use the [**Wait**](wait-method.md), [**Interrupt**](interrupt-method.md), or [**Stop**](stop-method.md) methods to synchronize their animation with each other.</span></span>

<span data-ttu-id="57bcb-134">Microsoft Agent est également en lecture automatique d’autres animations.</span><span class="sxs-lookup"><span data-stu-id="57bcb-134">Microsoft Agent also plays other animations automatically for you.</span></span> <span data-ttu-id="57bcb-135">Par exemple, si l’état du caractère n’a pas été modifié pendant plusieurs secondes, l’agent commence à exécuter les animations assignées aux animations au **ralenti** du personnage.</span><span class="sxs-lookup"><span data-stu-id="57bcb-135">For example, if the character's state has not changed for several seconds, Agent begins playing animations assigned to the character's **Idling** animations.</span></span> <span data-ttu-id="57bcb-136">De même, lorsque l’entrée vocale est activée, l’agent lit les animations d' **écoute** du personnage, puis émet **des animations lorsqu'** un énoncé est détecté.</span><span class="sxs-lookup"><span data-stu-id="57bcb-136">Similarly, when speech input is enabled, Agent plays the character's **Listening** animations and then **Hearing** animations when an utterance is detected.</span></span> <span data-ttu-id="57bcb-137">Ces animations gérées par le serveur sont appelées des *États* et sont définies lors de la création d’un caractère.</span><span class="sxs-lookup"><span data-stu-id="57bcb-137">These server-managed animations are called *states*, and are defined when a character is created.</span></span> <span data-ttu-id="57bcb-138">Pour plus d’informations, consultez [conception de caractères pour Microsoft Agent](agent-states.md).</span><span class="sxs-lookup"><span data-stu-id="57bcb-138">For more information, see [Designing Characters for Microsoft Agent](agent-states.md).</span></span>

 

 