---
description: Les ensembles d’API sont des groupes fonctionnels d’API Win32 dans le système d’exploitation principal. Ils fournissent une séparation architecturale à partir de la DLL hôte dans laquelle une API Win32 donnée est définie et du groupe fonctionnel auquel appartient l’API.
title: Ensembles d’API Windows
ms.topic: article
ms.date: 10/14/2020
ms.openlocfilehash: 15c8e6ad8124abf06e6ab3c2a8ca2bcd83772855
ms.sourcegitcommit: db89157e3be911fdce2e543e99faa31fb2403bc8
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/18/2020
ms.locfileid: "104463979"
---
# <a name="windows-api-sets"></a><span data-ttu-id="30bf0-104">Ensembles d’API Windows</span><span class="sxs-lookup"><span data-stu-id="30bf0-104">Windows API sets</span></span>

<span data-ttu-id="30bf0-105">Toutes les versions de Windows 10 partagent une base commune de composants du système d’exploitation appelée *système d’exploitation* de base (dans certains contextes, cette base commune est également appelée *OneCore*).</span><span class="sxs-lookup"><span data-stu-id="30bf0-105">All versions of Windows 10 share a common base of OS components that is called the *core OS* (in some contexts this common base is also called *OneCore*).</span></span> <span data-ttu-id="30bf0-106">Dans les composants du système d’exploitation de base, les API Win32 sont organisées en groupes fonctionnels appelés *ensembles d’API*.</span><span class="sxs-lookup"><span data-stu-id="30bf0-106">In core OS components, Win32 APIs are organized into functional groups called *API sets*.</span></span>

<span data-ttu-id="30bf0-107">L’objectif d’un ensemble d’API est de fournir une séparation architecturale à partir de la DLL hôte dans laquelle une API Win32 donnée est implémentée et le contrat fonctionnel auquel appartient l’API.</span><span class="sxs-lookup"><span data-stu-id="30bf0-107">The purpose of an API set is to provide an architectural separation from the host DLL in which a given Win32 API is implemented and the functional contract to which the API belongs.</span></span> <span data-ttu-id="30bf0-108">Le découplage que les ensembles d’API offrent entre les implémentations et les contrats offre de nombreux avantages en matière d’ingénierie pour les développeurs.</span><span class="sxs-lookup"><span data-stu-id="30bf0-108">The decoupling that API sets provide between implementation and contracts offers many engineering advantages for developers.</span></span> <span data-ttu-id="30bf0-109">En particulier, l’utilisation d’ensembles d’API dans votre code peut améliorer la compatibilité avec tous les appareils Windows 10.</span><span class="sxs-lookup"><span data-stu-id="30bf0-109">In particular, using API sets in your code can improve compatibility with all Windows 10 devices.</span></span>

<span data-ttu-id="30bf0-110">Les ensembles d’API concernent spécifiquement les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="30bf0-110">API sets specifically address the following scenarios:</span></span>

- <span data-ttu-id="30bf0-111">Bien que la totalité de l’API Win32 soit prise en charge sur les PC, seul un sous-ensemble de l’API Win32 est disponible sur d’autres appareils Windows 10 tels que HoloLens, Xbox et d’autres appareils exécutant Windows 10x.</span><span class="sxs-lookup"><span data-stu-id="30bf0-111">Although the full breadth of the Win32 API is supported on PCs, only a subset of the Win32 API is available on other Windows 10 devices such as HoloLens, Xbox, and other devices running Windows 10x.</span></span> <span data-ttu-id="30bf0-112">Le nom de l’ensemble d’API fournit un mécanisme de requête pour détecter correctement si une API est disponible sur un appareil donné.</span><span class="sxs-lookup"><span data-stu-id="30bf0-112">The API set name provides a query mechanism to cleanly detect whether an API is available on any given device.</span></span>

- <span data-ttu-id="30bf0-113">Certaines implémentations de l’API Win32 existent dans des dll avec des noms différents sur différents appareils Windows 10.</span><span class="sxs-lookup"><span data-stu-id="30bf0-113">Some Win32 API implementations exist in DLLs with different names across different Windows 10 devices.</span></span> <span data-ttu-id="30bf0-114">Le fait d’utiliser des noms d’ensemble d’API au lieu de noms de DLL lors de la détection des API de disponibilité et de chargement différé fournit un itinéraire correct à l’implémentation, quel que soit l’endroit où l’API est implémentée.</span><span class="sxs-lookup"><span data-stu-id="30bf0-114">Using API set names instead of DLL names when detecting API availability and delay loading APIs provide a correct route to the implementation no matter where the API is actually implemented.</span></span>

<span data-ttu-id="30bf0-115">Pour plus d’informations, consultez [API Set Loader Operation](api-set-loader-operation.md) et [Detect API Set Availability](detect-api-set-availability.md).</span><span class="sxs-lookup"><span data-stu-id="30bf0-115">For more details, see [API set loader operation](api-set-loader-operation.md) and [Detect API set availability](detect-api-set-availability.md).</span></span>

## <a name="linking-to-umbrella-libraries"></a><span data-ttu-id="30bf0-116">Liaison à des bibliothèques de parapluie</span><span class="sxs-lookup"><span data-stu-id="30bf0-116">Linking to umbrella libraries</span></span>

<span data-ttu-id="30bf0-117">Pour faciliter la restriction de votre code aux API Win32 qui sont prises en charge dans le système d’exploitation de base, nous fournissons une série de *bibliothèques de parapluie*.</span><span class="sxs-lookup"><span data-stu-id="30bf0-117">To make it easier to restrict your code to Win32 APIs that are supported in the core OS, we provide a series of *umbrella libraries*.</span></span> <span data-ttu-id="30bf0-118">Par exemple, une bibliothèque de parapluie nommée OneCore. lib fournit les exportations pour le sous-ensemble d’API Win32 qui sont communes à tous les appareils Windows 10.</span><span class="sxs-lookup"><span data-stu-id="30bf0-118">For example, an umbrella library named OneCore.lib provides the exports for the subset of Win32 APIs that are common to all Windows 10 devices.</span></span>

<span data-ttu-id="30bf0-119">Les API d’une bibliothèque de parapluie peuvent être implémentées dans une plage de modules.</span><span class="sxs-lookup"><span data-stu-id="30bf0-119">The APIs in an umbrella library may be implemented across a range of modules.</span></span> <span data-ttu-id="30bf0-120">La bibliothèque parapluie résume ces détails en dehors de vous, ce qui rend votre code plus portable sur les versions et les appareils Windows 10.</span><span class="sxs-lookup"><span data-stu-id="30bf0-120">The umbrella library abstracts those details away from you, making your code more portable across Windows 10 versions and devices.</span></span> <span data-ttu-id="30bf0-121">Au lieu de créer des liens vers des bibliothèques telles que kernel32. lib et advapi32. lib, il vous suffit de lier votre application de bureau ou pilote à la bibliothèque parapluie qui contient l’ensemble des API de système d’exploitation principales qui vous intéressent.</span><span class="sxs-lookup"><span data-stu-id="30bf0-121">Instead of linking to libraries such as kernel32.lib and advapi32.lib, simply link your desktop app or driver with the umbrella library that contains the set of core OS APIs that you're interested in.</span></span>

<span data-ttu-id="30bf0-122">Pour plus d’informations, consultez [bibliothèques de parapluie Windows](windows-umbrella-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="30bf0-122">For more details, see [Windows umbrella libraries](windows-umbrella-libraries.md).</span></span>

## <a name="api-set-contract-names"></a><span data-ttu-id="30bf0-123">Noms de contrat de l’ensemble d’API</span><span class="sxs-lookup"><span data-stu-id="30bf0-123">API set contract names</span></span>

<span data-ttu-id="30bf0-124">Les ensembles d’API sont identifiés par un nom de contrat fort qui respecte les conventions standard reconnues par le chargeur de bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="30bf0-124">API sets are identified by a strong contract name that follows these standard conventions recognized by the library loader.</span></span> 

- <span data-ttu-id="30bf0-125">Le nom doit commencer par l' **API de** chaîne ou **ext-**.</span><span class="sxs-lookup"><span data-stu-id="30bf0-125">The name must begin either with the string **api-** or **ext-**.</span></span> 
    - <span data-ttu-id="30bf0-126">Les noms qui commencent par **API-** représentent des API qui sont garanties d’exister sur toutes les versions de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="30bf0-126">Names that begin with **api-** represent APIs that are guaranteed to exist on all Windows 10 versions.</span></span>
    - <span data-ttu-id="30bf0-127">Les noms qui commencent par **ext-** représentent des API qui n’existent peut-être pas dans toutes les versions de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="30bf0-127">Names that begin with **ext-** represent APIs that may not exist on all Windows 10 versions.</span></span>
- <span data-ttu-id="30bf0-128">Le nom doit se terminer par la **séquence \<n\> - \<n\> - \<n\> l**, où **n** est constitué de chiffres décimaux.</span><span class="sxs-lookup"><span data-stu-id="30bf0-128">The name must end with the sequence **l\<n\>-\<n\>-\<n\>**, where **n** consists of decimal digits.</span></span>
- <span data-ttu-id="30bf0-129">Le corps du nom peut être des caractères alphanumériques ou des tirets ( **-** ).</span><span class="sxs-lookup"><span data-stu-id="30bf0-129">The body of the name can be alphanumeric characters, or dashes (**-**).</span></span>
- <span data-ttu-id="30bf0-130">Le nom ne respecte pas la casse.</span><span class="sxs-lookup"><span data-stu-id="30bf0-130">The name is case insensitive.</span></span>

<span data-ttu-id="30bf0-131">Voici quelques exemples de noms de contrat d’ensemble d’API :</span><span class="sxs-lookup"><span data-stu-id="30bf0-131">Here are some examples of API set contract names:</span></span>

- <span data-ttu-id="30bf0-132">**API-MS-Win-Core-UMS-L1-1-0**</span><span class="sxs-lookup"><span data-stu-id="30bf0-132">**api-ms-win-core-ums-l1-1-0**</span></span>
- <span data-ttu-id="30bf0-133">**ext-MS-Win-com-ole32-L1-1-5**</span><span class="sxs-lookup"><span data-stu-id="30bf0-133">**ext-ms-win-com-ole32-l1-1-5**</span></span>
- <span data-ttu-id="30bf0-134">**ext-MS-Win-Ntuser-Window-L1-1-0**</span><span class="sxs-lookup"><span data-stu-id="30bf0-134">**ext-ms-win-ntuser-window-l1-1-0**</span></span>
- <span data-ttu-id="30bf0-135">**ext-MS-Win-Ntuser-Window-L1-1-1**</span><span class="sxs-lookup"><span data-stu-id="30bf0-135">**ext-ms-win-ntuser-window-l1-1-1**</span></span>

<span data-ttu-id="30bf0-136">Vous pouvez utiliser un nom d’ensemble d’API dans le contexte d’une opération de chargement comme [LoadLibrary](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) ou [P/Invoke](/dotnet/standard/native-interop/pinvoke) à la place d’un nom de module dll pour garantir un itinéraire correct vers l’implémentation, quel que soit l’endroit où l’API est réellement implémentée sur l’appareil actuel.</span><span class="sxs-lookup"><span data-stu-id="30bf0-136">You can use an API set name in the context of a loader operation such as [LoadLibrary](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) or [P/Invoke](/dotnet/standard/native-interop/pinvoke) instead of a DLL module name to ensure a correct route to the implementation no matter where the API is actually implemented on the current device.</span></span> <span data-ttu-id="30bf0-137">Toutefois, lorsque vous effectuez cette opération, vous devez ajouter le **fichier String. dll** à la fin du nom du contrat.</span><span class="sxs-lookup"><span data-stu-id="30bf0-137">However, when you do this you must append the string **.dll** at the end of the contract name.</span></span> <span data-ttu-id="30bf0-138">Il s’agit d’une condition requise du chargeur pour fonctionner correctement et n’est pas considérée comme faisant partie du nom de contrat.</span><span class="sxs-lookup"><span data-stu-id="30bf0-138">This is a requirement of the loader to function properly, and is not considered actually a part of the contract name.</span></span> <span data-ttu-id="30bf0-139">Bien que les noms de contrats apparaissent comme les noms de DLL dans ce contexte, ils sont fondamentalement différents des noms de module de DLL et ne font pas directement référence à un fichier sur le disque.</span><span class="sxs-lookup"><span data-stu-id="30bf0-139">Although contract names appear similar to DLL names in this context, they are fundamentally different from DLL module names and do not directly refer to a file on disk.</span></span>

<span data-ttu-id="30bf0-140">À l’exception de l’ajout de String **. dll** dans les opérations du chargeur, les noms de contrat de l’ensemble d’API doivent être considérés comme un identificateur immuable qui correspond à une version de contrat spécifique.</span><span class="sxs-lookup"><span data-stu-id="30bf0-140">Except for appending the string **.dll** in loader operations, API set contract names should be considered an immutable identifier that corresponds to a specific contract version.</span></span>

## <a name="identifying-api-sets-for-win32-apis"></a><span data-ttu-id="30bf0-141">Identification des ensembles d’API pour les API Win32</span><span class="sxs-lookup"><span data-stu-id="30bf0-141">Identifying API sets for Win32 APIs</span></span>

<span data-ttu-id="30bf0-142">Pour déterminer si une API Win32 particulière appartient à un ensemble d’API, consultez le tableau des exigences dans la documentation de référence de l’API.</span><span class="sxs-lookup"><span data-stu-id="30bf0-142">To identify whether a particular Win32 API belongs to an API set, review the requirements table in the reference documentation for the API.</span></span> <span data-ttu-id="30bf0-143">Si l’API appartient à un ensemble d’API, le tableau des exigences de l’article répertorie le nom de l’ensemble d’API et la version de Windows dans laquelle l’API a été introduite pour la première fois dans l’ensemble d’API.</span><span class="sxs-lookup"><span data-stu-id="30bf0-143">If the API belongs to an API set, the requirements table in the article lists the API set name and the Windows version in which the API was first introduced to the API set.</span></span> <span data-ttu-id="30bf0-144">Pour obtenir des exemples d’API appartenant à un ensemble d’API, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="30bf0-144">For examples of APIs that belong to an API set, see these articles:</span></span>

- [<span data-ttu-id="30bf0-145">AllowSetForegroundWindow</span><span class="sxs-lookup"><span data-stu-id="30bf0-145">AllowSetForegroundWindow</span></span>](/windows/win32/api/winuser/nf-winuser-allowsetforegroundwindow)
- [<span data-ttu-id="30bf0-146">FindWindowsEx</span><span class="sxs-lookup"><span data-stu-id="30bf0-146">FindWindowsEx</span></span>](/windows/win32/api/winuser/nf-winuser-findwindowexa)
- [<span data-ttu-id="30bf0-147">GetClassFile</span><span class="sxs-lookup"><span data-stu-id="30bf0-147">GetClassFile</span></span>](/windows/win32/api/objbase/nf-objbase-getclassfile)

## <a name="in-this-section"></a><span data-ttu-id="30bf0-148">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="30bf0-148">In this section</span></span>

* [<span data-ttu-id="30bf0-149">Opération du chargeur de l’ensemble d’API</span><span class="sxs-lookup"><span data-stu-id="30bf0-149">API set loader operation</span></span>](api-set-loader-operation.md)
* [<span data-ttu-id="30bf0-150">Détecter la disponibilité des ensembles d’API</span><span class="sxs-lookup"><span data-stu-id="30bf0-150">Detect API set availability</span></span>](detect-api-set-availability.md)
* [<span data-ttu-id="30bf0-151">Bibliothèques parapluies Windows</span><span class="sxs-lookup"><span data-stu-id="30bf0-151">Windows umbrella libraries</span></span>](windows-umbrella-libraries.md)