---
description: Utilisation des contrôles Video Mixer
ms.assetid: 475996c6-a205-4133-8882-f55beaf9f8fd
title: Utilisation des contrôles Video Mixer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a8a062c6f984e0eac0128bd67c72bf691c95af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104034291"
---
# <a name="using-the-video-mixer-controls"></a><span data-ttu-id="424e3-103">Utilisation des contrôles Video Mixer</span><span class="sxs-lookup"><span data-stu-id="424e3-103">Using the Video Mixer Controls</span></span>

<span data-ttu-id="424e3-104">Le mélangeur EVR fournit plusieurs interfaces qu’une application peut utiliser pour contrôler la façon dont le mélangeur traite la vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-104">The EVR mixer provides several interfaces that an application can use to control how the mixer processes video.</span></span> <span data-ttu-id="424e3-105">Ces interfaces peuvent être utilisées dans DirectShow ou Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="424e3-105">These interfaces can be used in either DirectShow or Media Foundation.</span></span>



| <span data-ttu-id="424e3-106">Interface</span><span class="sxs-lookup"><span data-stu-id="424e3-106">Interface</span></span>                                                      | <span data-ttu-id="424e3-107">Description</span><span class="sxs-lookup"><span data-stu-id="424e3-107">Description</span></span>                                                                                                                                                                                                                                 |
|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="424e3-108">Interface [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)</span><span class="sxs-lookup"><span data-stu-id="424e3-108">[**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface</span></span>   | <span data-ttu-id="424e3-109">Alpha-fusionne une image bitmap statique sur la vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-109">Alpha-blends a static bitmap image onto the video.</span></span>                                                                                                                                                                                          |
| <span data-ttu-id="424e3-110">Interface [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol)</span><span class="sxs-lookup"><span data-stu-id="424e3-110">[**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface</span></span> | <span data-ttu-id="424e3-111">Contrôle la façon dont le EVR mixe les sous-flux vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-111">Controls how the EVR mixes video substreams.</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="424e3-112">Interface [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)</span><span class="sxs-lookup"><span data-stu-id="424e3-112">[**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface</span></span>       | <span data-ttu-id="424e3-113">Contrôle l’ajustement des couleurs, les filtres d’images et d’autres fonctionnalités de traitement vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-113">Controls color adjustment, image filters, and other video processing capabilities.</span></span> <span data-ttu-id="424e3-114">Cette interface fournit l’accès aux fonctionnalités implémentées par le pilote Graphics, de sorte que les fonctionnalités exactes dépendent du pilote Graphics de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="424e3-114">This interface provides access to functionality implemented by the graphics driver, so the exact capabilities will depend on the user's graphics driver.</span></span> |



 

<span data-ttu-id="424e3-115">La méthode correcte pour accéder aux pointeurs vers ces interfaces varie selon que vous utilisez la version DirectShow de EVR ou la version de Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="424e3-115">The correct way to get pointers to these interfaces depends on whether you are using the DirectShow version of the EVR or the Media Foundation version.</span></span> <span data-ttu-id="424e3-116">Pour le Media Foundation EVR, cela dépend également de l’utilisation directe du EVR ou de son utilisation par le biais de la [session multimédia](media-session.md).</span><span class="sxs-lookup"><span data-stu-id="424e3-116">For the Media Foundation EVR, it also depends on whether you are using the EVR directly or using it through the [Media Session](media-session.md).</span></span> <span data-ttu-id="424e3-117">(En général, une application utilise EVR via la session multimédia, pas directement).</span><span class="sxs-lookup"><span data-stu-id="424e3-117">(Typically an application will use the EVR through the Media Session, not directly).</span></span>

<span data-ttu-id="424e3-118">Pour obtenir un pointeur vers l’une de ces interfaces, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="424e3-118">To get a pointer to any of these interfaces, do the following:</span></span>

1.  <span data-ttu-id="424e3-119">Obtient un pointeur vers l’interface [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) sur EVR.</span><span class="sxs-lookup"><span data-stu-id="424e3-119">Get a pointer to the [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) interface on the EVR.</span></span>

    -   <span data-ttu-id="424e3-120">Si vous utilisez le filtre DirectShow EVR, appelez **QueryInterface** sur le filtre.</span><span class="sxs-lookup"><span data-stu-id="424e3-120">If you are using the DirectShow EVR filter, call **QueryInterface** on the filter.</span></span>

    -   <span data-ttu-id="424e3-121">Si vous utilisez directement le récepteur multimédia EVR, appelez **QueryInterface** sur le récepteur multimédia.</span><span class="sxs-lookup"><span data-stu-id="424e3-121">If you are using the EVR media sink directly, call **QueryInterface** on the media sink.</span></span>

    -   <span data-ttu-id="424e3-122">Si vous utilisez la session multimédia, appelez **QueryInterface** sur la session multimédia.</span><span class="sxs-lookup"><span data-stu-id="424e3-122">If you are using the Media Session, call **QueryInterface** on the Media Session.</span></span>

2.  <span data-ttu-id="424e3-123">Si vous utilisez la session de média, attendez que la session multimédia envoie l’événement [MESessionTopologyStatus](mesessiontopologystatus.md) avec la valeur d’État MF \_ TOPOSTATUS \_ Ready.</span><span class="sxs-lookup"><span data-stu-id="424e3-123">If you are using the Media Session, wait for the Media Session to send the [MESessionTopologyStatus](mesessiontopologystatus.md) event with a status value of MF\_TOPOSTATUS\_READY.</span></span> <span data-ttu-id="424e3-124">(Ignorez cette étape si vous n’utilisez pas la session multimédia.)</span><span class="sxs-lookup"><span data-stu-id="424e3-124">(Skip this step if you are not using the Media Session.)</span></span>

3.  <span data-ttu-id="424e3-125">Appelez [**IMFGetService :: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) pour accéder à l’interface de mixage.</span><span class="sxs-lookup"><span data-stu-id="424e3-125">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get the mixer interface.</span></span> <span data-ttu-id="424e3-126">Utilisez le service de mixage vidéo de l’identificateur de service MR \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="424e3-126">Use the service identifier MR\_VIDEO\_MIXER\_SERVICE.</span></span>

## <a name="alpha-blending-a-bitmap-onto-the-video"></a><span data-ttu-id="424e3-127">Alpha fusion d’une image bitmap sur la vidéo</span><span class="sxs-lookup"><span data-stu-id="424e3-127">Alpha Blending a Bitmap onto the Video</span></span>

<span data-ttu-id="424e3-128">Vous pouvez utiliser l’interface [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) pour fusionner en alpha une image bitmap statique sur la vidéo pendant la lecture.</span><span class="sxs-lookup"><span data-stu-id="424e3-128">You can use the [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface to alpha blend a static bitmap onto the video during playback.</span></span> <span data-ttu-id="424e3-129">Vous pouvez stocker l’image bitmap dans une surface Direct3D, spécifiée comme pointeur **IDirect3DSurface9** , ou utiliser une bitmap GDI.</span><span class="sxs-lookup"><span data-stu-id="424e3-129">You can store the bitmap in a Direct3D surface, specified as an **IDirect3DSurface9** pointer, or use a GDI bitmap.</span></span>

<span data-ttu-id="424e3-130">Si vous utilisez une surface Direct3D pour l’image bitmap, celle-ci peut contenir des données alpha par pixel, qui seront utilisées lorsque le mixer alpha-fusionne l’image.</span><span class="sxs-lookup"><span data-stu-id="424e3-130">If you use a Direct3D surface for the bitmap, the surface can contain per-pixel alpha data, which will be used when the mixer alpha-blends the image.</span></span> <span data-ttu-id="424e3-131">Vous pouvez également définir une clé de couleur, c’est-à-dire une couleur transparente qui sera transparente partout où elle apparaîtra dans le bitmap.</span><span class="sxs-lookup"><span data-stu-id="424e3-131">Alternatively, you can define a color key—that is, a single color that will be transparent wherever it appears in the bitmap.</span></span> <span data-ttu-id="424e3-132">En outre, vous pouvez spécifier une valeur alpha qui sera appliquée à la totalité de l’image.</span><span class="sxs-lookup"><span data-stu-id="424e3-132">Also, you can specify an alpha value that will be applied to the entire image.</span></span> <span data-ttu-id="424e3-133">Vous pouvez également définir un rectangle source pour rogner l’image bitmap et un rectangle de destination pour positionner l’image bitmap dans le cadre de la vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-133">You can also set a source rectangle to crop the bitmap, and a destination rectangle to position the bitmap within the video frame.</span></span>

<span data-ttu-id="424e3-134">Pour définir la bitmap, appelez [**IMFVideoMixerBitmap :: SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="424e3-134">To set the bitmap, call [**IMFVideoMixerBitmap::SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span></span> <span data-ttu-id="424e3-135">Cette méthode prend un pointeur vers une structure [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) qui spécifie l’image bitmap et les paramètres de fusion alpha.</span><span class="sxs-lookup"><span data-stu-id="424e3-135">This method takes a pointer to an [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) structure that specifies the bitmap and the alpha-blending parameters.</span></span> <span data-ttu-id="424e3-136">Pour obtenir un exemple de code, consultez la rubrique de référence pour la méthode **SetAlphaBitmap** .</span><span class="sxs-lookup"><span data-stu-id="424e3-136">For example code, see the reference topic for the **SetAlphaBitmap** method.</span></span>

<span data-ttu-id="424e3-137">Une fois que vous avez défini la bitmap, vous pouvez mettre à jour les paramètres de fusion, y compris les recangles source et de destination, en appelant [**IMFVideoMixerBitmap :: UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span><span class="sxs-lookup"><span data-stu-id="424e3-137">After you set the bitmap, you can update the blending parameters, including the source and destination recangles, by calling [**IMFVideoMixerBitmap::UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span></span> <span data-ttu-id="424e3-138">La mise à jour est appliquée à la prochaine image vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-138">The update takes effect on the next video frame.</span></span> <span data-ttu-id="424e3-139">La vidéo doit être lue pour que la mise à jour se produise.</span><span class="sxs-lookup"><span data-stu-id="424e3-139">The video must be playing for the update to occur.</span></span> <span data-ttu-id="424e3-140">Vous pouvez utiliser cette méthode pour exécuter des animations simples sur l’image bitmap.</span><span class="sxs-lookup"><span data-stu-id="424e3-140">You can use this method to perform simple animations on the bitmap.</span></span> <span data-ttu-id="424e3-141">(Si vous avez besoin d’effets plus sophistiqués, envisagez d’écrire un mélangeur EVR personnalisé.)</span><span class="sxs-lookup"><span data-stu-id="424e3-141">(If you need more sophisticated effects, consider writing a custom EVR mixer.)</span></span>

<span data-ttu-id="424e3-142">Pour effacer la bitmap, appelez [**IMFVideoMixerBitmap :: ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="424e3-142">To clear the bitmap, call [**IMFVideoMixerBitmap::ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span></span>

## <a name="controlling-substreams"></a><span data-ttu-id="424e3-143">Contrôle des sous-flux</span><span class="sxs-lookup"><span data-stu-id="424e3-143">Controlling Substreams</span></span>

<span data-ttu-id="424e3-144">Le EVR peut combiner un ou plusieurs sous-flux vidéo sur le flux vidéo principal.</span><span class="sxs-lookup"><span data-stu-id="424e3-144">The EVR can mix one or more video substreams onto the primary video stream.</span></span> <span data-ttu-id="424e3-145">Pour contrôler le mixage de sous-flux, utilisez l’interface [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) .</span><span class="sxs-lookup"><span data-stu-id="424e3-145">To control substream mixing, use the [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface.</span></span>

-   <span data-ttu-id="424e3-146">Appelez [**IMFVideoMixerControl :: SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) pour définir la position d’un sous-flux dans le cadre vidéo composite.</span><span class="sxs-lookup"><span data-stu-id="424e3-146">Call [**IMFVideoMixerControl::SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) to set the position of a substream within the composited video frame.</span></span>

-   <span data-ttu-id="424e3-147">Appelez [**IMFVideoMixerControl :: SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) pour définir l’ordre de plan pour les sous-flux.</span><span class="sxs-lookup"><span data-stu-id="424e3-147">Call [**IMFVideoMixerControl::SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) to set the z-order for the substreams.</span></span> <span data-ttu-id="424e3-148">Le EVR dessine les flux vidéo dans l’ordre de leurs valeurs d’ordre de plan, en commençant par zéro.</span><span class="sxs-lookup"><span data-stu-id="424e3-148">The EVR draws the video streams in the order of their z-order values, starting with zero.</span></span> <span data-ttu-id="424e3-149">Le flux vidéo principal est toujours en premier dans l’ordre de plan.</span><span class="sxs-lookup"><span data-stu-id="424e3-149">The primary video stream is always first in the z-order.</span></span>

## <a name="video-processor-settings"></a><span data-ttu-id="424e3-150">Paramètres du processeur vidéo</span><span class="sxs-lookup"><span data-stu-id="424e3-150">Video Processor Settings</span></span>

<span data-ttu-id="424e3-151">Le mélangeur EVR utilise l’accélération vidéo DirectX (DXVA) pour effectuer le traitement vidéo sur les flux d’entrée.</span><span class="sxs-lookup"><span data-stu-id="424e3-151">The EVR mixer uses DirectX Video Acceleration (DXVA) to perform video processing on the input streams.</span></span> <span data-ttu-id="424e3-152">Les fonctionnalités de traitement exactes dépendent du pilote Graphics.</span><span class="sxs-lookup"><span data-stu-id="424e3-152">The exact processing capabilities depend on the graphics driver.</span></span> <span data-ttu-id="424e3-153">Les fonctionnalités de traitement vidéo sont décrites à l’aide de la structure [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) .</span><span class="sxs-lookup"><span data-stu-id="424e3-153">Video processing capabilities are described by using the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure.</span></span> <span data-ttu-id="424e3-154">Un ensemble de fonctionnalités particulier est appelé *mode de traitement vidéo*, chaque mode étant identifié par un GUID.</span><span class="sxs-lookup"><span data-stu-id="424e3-154">A particular set of capabilities is called a *video processing mode*, each mode being identified by a GUID.</span></span> <span data-ttu-id="424e3-155">Pour obtenir la liste des GUID prédéfinis, consultez [**IDirectXVideoProcessorService :: GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span><span class="sxs-lookup"><span data-stu-id="424e3-155">For a list of predefined GUIDs, see [**IDirectXVideoProcessorService::GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span></span> <span data-ttu-id="424e3-156">Le pilote peut définir des GUID supplémentaires spécifiques au fournisseur, représentant différentes combinaisons de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="424e3-156">The driver might define additional vendor-specific GUIDs, representing different combinations of capabilities.</span></span>

<span data-ttu-id="424e3-157">Pour rechercher les modes pris en charge et les fonctionnalités de chaque mode, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="424e3-157">To find the supported modes and the capabilities of each mode, do the following:</span></span>

1.  <span data-ttu-id="424e3-158">Appelez [**IMFGetService :: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) pour obtenir un pointeur vers l’interface [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) du mixer.</span><span class="sxs-lookup"><span data-stu-id="424e3-158">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get a pointer to the mixer's [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface.</span></span>

2.  <span data-ttu-id="424e3-159">Appelez [**IMFVideoProcessor :: GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span><span class="sxs-lookup"><span data-stu-id="424e3-159">Call [**IMFVideoProcessor::GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span></span> <span data-ttu-id="424e3-160">Cette méthode retourne un tableau de GUID qui identifient les modes de processeur vidéo disponibles.</span><span class="sxs-lookup"><span data-stu-id="424e3-160">This method returns an array of GUIDs, which identify the available video processor modes.</span></span> <span data-ttu-id="424e3-161">La liste est retournée dans l’ordre de qualité décroissant, le mode avec la qualité la plus élevée apparaissant en premier dans la liste.</span><span class="sxs-lookup"><span data-stu-id="424e3-161">The list is returned in descending quality order, the mode with the highest quality appearing first in the list.</span></span> <span data-ttu-id="424e3-162">La liste peut varier en fonction du format de la vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-162">The list can change depending on the format of the video.</span></span>

3.  <span data-ttu-id="424e3-163">Pour chaque GUID de la liste, appelez [**IMFVideoProcessor :: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) pour rechercher les fonctionnalités du mode de processeur vidéo correspondant.</span><span class="sxs-lookup"><span data-stu-id="424e3-163">For each GUID in the list, call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the capabilities of the corresponding video processor mode.</span></span> <span data-ttu-id="424e3-164">La méthode remplit une structure [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) avec une description des fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="424e3-164">The method fills a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure with a description of the capabilities.</span></span>

4.  <span data-ttu-id="424e3-165">Pour sélectionner un mode, appelez [**IMFVideoProcessor :: SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span><span class="sxs-lookup"><span data-stu-id="424e3-165">To select a mode, call [**IMFVideoProcessor::SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span></span> <span data-ttu-id="424e3-166">Dans le cas contraire, le EVR sélectionne automatiquement un mode au démarrage de la diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="424e3-166">Otherwise, the EVR automatically selects a mode when streaming begins.</span></span> <span data-ttu-id="424e3-167">Dans ce cas, vous pouvez appeler [**IMFVideoProcessor :: GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) pour rechercher le mode sélectionné.</span><span class="sxs-lookup"><span data-stu-id="424e3-167">In that case, you can call [**IMFVideoProcessor::GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) to find which mode was selected.</span></span>

<span data-ttu-id="424e3-168">La plupart des champs de la structure [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) décrivent le comportement de pilote de bas niveau et ne sont pas intéressants dans une application classique.</span><span class="sxs-lookup"><span data-stu-id="424e3-168">Most of the fields in the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure describe low-level driver behavior and are not of interest in a typical application.</span></span> <span data-ttu-id="424e3-169">Les champs suivants sont susceptibles d’intéresser :</span><span class="sxs-lookup"><span data-stu-id="424e3-169">The following fields are most likely to be of interest:</span></span>

-   <span data-ttu-id="424e3-170">**DeviceCaps**.</span><span class="sxs-lookup"><span data-stu-id="424e3-170">**DeviceCaps**.</span></span> <span data-ttu-id="424e3-171">Ce champ indique si le traitement vidéo est effectué dans le matériel ou les logiciels, et si le pilote Graphics est un ancien pilote DXVA 1,0.</span><span class="sxs-lookup"><span data-stu-id="424e3-171">This field indicates whether video processing is performed in hardware or software, and whether the graphics driver is an older DXVA 1.0 driver.</span></span>

-   <span data-ttu-id="424e3-172">**DeinterlaceTechnology**.</span><span class="sxs-lookup"><span data-stu-id="424e3-172">**DeinterlaceTechnology**.</span></span> <span data-ttu-id="424e3-173">Ce champ fournit une indication du niveau de qualité de désentrelacement que vous pouvez attendre si la vidéo source est entrelacée.</span><span class="sxs-lookup"><span data-stu-id="424e3-173">This field provides some indication of what level of deinterlacing quality you can expect if the source video is interlaced.</span></span>

-   <span data-ttu-id="424e3-174">**ProcAmpControlCaps**.</span><span class="sxs-lookup"><span data-stu-id="424e3-174">**ProcAmpControlCaps**.</span></span> <span data-ttu-id="424e3-175">Ce champ spécifie les contrôles d’ajustement des couleurs disponibles.</span><span class="sxs-lookup"><span data-stu-id="424e3-175">This field specifies which color adjustment controls are available.</span></span> <span data-ttu-id="424e3-176">Pour obtenir la liste des ajustements de couleurs possibles, consultez [paramètres de ProcAmp](procamp-settings.md).</span><span class="sxs-lookup"><span data-stu-id="424e3-176">For a list of possible color adjustments, see [ProcAmp Settings](procamp-settings.md).</span></span> <span data-ttu-id="424e3-177">Si le pilote ne peut pas effectuer le réglage des couleurs, ce champ est égal à zéro.</span><span class="sxs-lookup"><span data-stu-id="424e3-177">If the driver cannot perform color adjustment, this field is zero.</span></span>

-   <span data-ttu-id="424e3-178">**VideoProcessorOperations**.</span><span class="sxs-lookup"><span data-stu-id="424e3-178">**VideoProcessorOperations**.</span></span> <span data-ttu-id="424e3-179">Ce champ contient des indicateurs qui décrivent les diverses fonctionnalités de traitement vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-179">This field contains flags that describe miscellaneous video processing capabilities.</span></span> <span data-ttu-id="424e3-180">Deux indicateurs revêtant une importance particulière sont l’indicateur de sous-flux de DXVA2 \_ VideoProcess et l’indicateur de sous-flux de données \_ \_ VideoProcess DXVA2 \_ .</span><span class="sxs-lookup"><span data-stu-id="424e3-180">Two flags of particular importance are the DXVA2\_VideoProcess\_SubStreams flag and the DXVA2\_VideoProcess\_SubStreams flag.</span></span> <span data-ttu-id="424e3-181">Au moins un de ces indicateurs doit être présent pour que le EVR mélange les sous-flux dans le flux vidéo de référence.</span><span class="sxs-lookup"><span data-stu-id="424e3-181">At least one of these flags must be present for the EVR to mix substreams onto the reference video stream.</span></span> <span data-ttu-id="424e3-182">Si aucun indicateur n’est présent, le EVR est limité à un flux vidéo.</span><span class="sxs-lookup"><span data-stu-id="424e3-182">If neither flag is present, the EVR is limited to one video stream.</span></span>

-   <span data-ttu-id="424e3-183">**NoiseFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="424e3-183">**NoiseFilterTechnology**.</span></span> <span data-ttu-id="424e3-184">Ce champ indique les filtres de bruit pris en charge par le pilote Graphics.</span><span class="sxs-lookup"><span data-stu-id="424e3-184">This field indicates which noise filters are supported by the graphics driver.</span></span> <span data-ttu-id="424e3-185">Si le pilote ne prend pas en charge le filtrage de bruit, la valeur est DXVA2 \_ NoiseFilterTech non \_ pris en charge.</span><span class="sxs-lookup"><span data-stu-id="424e3-185">If the driver does not support noise filtering, the value is DXVA2\_NoiseFilterTech\_Unsupported.</span></span>

-   <span data-ttu-id="424e3-186">**DetailFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="424e3-186">**DetailFilterTechnology**.</span></span> <span data-ttu-id="424e3-187">Ce champ indique quels filtres de détails sont pris en charge par le pilote Graphics.</span><span class="sxs-lookup"><span data-stu-id="424e3-187">This field indicates which detail filters are supported by the graphics driver.</span></span> <span data-ttu-id="424e3-188">Si le pilote ne prend pas en charge le filtrage de bruit, la valeur est DXVA2 \_ DetailFilterTech non \_ pris en charge.</span><span class="sxs-lookup"><span data-stu-id="424e3-188">If the driver does not support noise filtering, the value is DXVA2\_DetailFilterTech\_Unsupported.</span></span>

## <a name="color-adjustment-and-image-filtering"></a><span data-ttu-id="424e3-189">Réglage des couleurs et filtrage des images</span><span class="sxs-lookup"><span data-stu-id="424e3-189">Color Adjustment and Image Filtering</span></span>

<span data-ttu-id="424e3-190">Le pilote Graphics peut prendre en charge le réglage des couleurs (également appelé *amplification de processus* ou simplement *ProcAmp*) et le filtrage d’images.</span><span class="sxs-lookup"><span data-stu-id="424e3-190">The graphics driver might support color adjustment (also called *process amplification* or simply *ProcAmp*) and image filtering.</span></span> <span data-ttu-id="424e3-191">Lorsqu’il est effectué par le GPU, le réglage des couleurs et le filtrage des images peuvent être effectués en temps réel sans surcharge du processeur.</span><span class="sxs-lookup"><span data-stu-id="424e3-191">When performed by the GPU, color adjustment and image filtering can be done in real time with no CPU overhead.</span></span>

<span data-ttu-id="424e3-192">Pour utiliser ces fonctionnalités, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="424e3-192">To use these features, perform the following steps:</span></span>

1.  <span data-ttu-id="424e3-193">Sélectionnez un mode de traitement vidéo comme décrit dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="424e3-193">Select a video processing mode as described in the previous section.</span></span>

2.  <span data-ttu-id="424e3-194">Appelez [**IMFVideoProcessor :: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) pour rechercher les fonctionnalités de traitement vidéo, comme décrit dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="424e3-194">Call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the video processing capabilities as described in the previous section.</span></span> <span data-ttu-id="424e3-195">La méthode remplit une structure [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) qui décrit les fonctionnalités, notamment si le pilote prend en charge le réglage des couleurs et le filtre d’images.</span><span class="sxs-lookup"><span data-stu-id="424e3-195">The method fills in a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure which describes the capabilities, including whether the driver supports color adjustment and image filter.</span></span>

3.  <span data-ttu-id="424e3-196">Pour chaque réglage des couleurs pris en charge par le pilote, appelez [**IMFVideoProcessor :: GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) pour rechercher la plage de valeurs possibles pour ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="424e3-196">For each color adjustment that is supported by driver, call [**IMFVideoProcessor::GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) to find the possible range of value for that setting.</span></span> <span data-ttu-id="424e3-197">Cette méthode retourne également la valeur par défaut pour le paramètre.</span><span class="sxs-lookup"><span data-stu-id="424e3-197">This method also returns the default value for the setting.</span></span> <span data-ttu-id="424e3-198">Appelez [**IMFVideoProcessor :: GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) pour rechercher la valeur actuelle des paramètres.</span><span class="sxs-lookup"><span data-stu-id="424e3-198">Call [**IMFVideoProcessor::GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) to find the current value of the settings.</span></span> <span data-ttu-id="424e3-199">Les valeurs n’ont pas d’unités spécifiées.</span><span class="sxs-lookup"><span data-stu-id="424e3-199">The values do not have specified units.</span></span> <span data-ttu-id="424e3-200">Il revient au pilote de définir la plage de valeurs.</span><span class="sxs-lookup"><span data-stu-id="424e3-200">It is up to the driver to define the range of values.</span></span>

4.  <span data-ttu-id="424e3-201">Appelez [**IMFVideoProcessor :: SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) pour définir une valeur de réglage des couleurs.</span><span class="sxs-lookup"><span data-stu-id="424e3-201">Call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) to set a color adjustment value.</span></span>

5.  <span data-ttu-id="424e3-202">Si le pilote prend en charge le filtrage d’images, chaque type de filtre (bruit et détail) prend en charge trois paramètres (niveau, rayon et seuil) à la fois dans la couleur et la luminance.</span><span class="sxs-lookup"><span data-stu-id="424e3-202">If the driver supports image filtering, then each filter type (noise and detail) supports three settings—level, radius, and threshold—in both chroma and luma.</span></span> <span data-ttu-id="424e3-203">(Consultez [paramètres de filtre d’image DXVA](dxva-image-filter-settings.md).) Pour chaque paramètre, appelez [**IMFVideoProcessor :: GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) pour obtenir la plage de valeurs possibles et appelez [**IMFVideoProcessor :: GetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) pour obtenir la valeur actuelle.</span><span class="sxs-lookup"><span data-stu-id="424e3-203">(See [DXVA Image Filter Settings](dxva-image-filter-settings.md).) For each setting, call [**IMFVideoProcessor::GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) to get the range of possible values and call [**IMFVideoProcessor::GetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) to get the current value.</span></span>

6.  <span data-ttu-id="424e3-204">Pour modifier un paramètre de filtre d’image, appelez [**IMFVideoProcessor :: SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span><span class="sxs-lookup"><span data-stu-id="424e3-204">To change an image filter setting, call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span></span>

## <a name="related-topics"></a><span data-ttu-id="424e3-205">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="424e3-205">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="424e3-206">Convertisseur vidéo amélioré</span><span class="sxs-lookup"><span data-stu-id="424e3-206">Enhanced Video Renderer</span></span>](enhanced-video-renderer.md)
</dt> </dl>

 

 



