---
description: Le convertisseur vidéo amélioré (EVR) est un composant qui affiche la vidéo sur le moniteur des utilisateurs.
ms.assetid: 1c985558-d25d-4f51-978a-58c05943dab9
title: Convertisseur vidéo amélioré
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ab0881da0827e6cc757a0ea855bcb51864dd98e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104317973"
---
# <a name="enhanced-video-renderer"></a><span data-ttu-id="6380a-103">Convertisseur vidéo amélioré</span><span class="sxs-lookup"><span data-stu-id="6380a-103">Enhanced Video Renderer</span></span>

<span data-ttu-id="6380a-104">Le convertisseur vidéo amélioré (EVR) est un composant qui affiche la vidéo sur l’écran de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6380a-104">The enhanced video renderer (EVR) is a component that displays video on the user's monitor.</span></span> <span data-ttu-id="6380a-105">Il existe deux versions du EVR :</span><span class="sxs-lookup"><span data-stu-id="6380a-105">Two versions of the EVR exist:</span></span>

-   <span data-ttu-id="6380a-106">Récepteur multimédia EVR pour les applications Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="6380a-106">The EVR media sink, for Media Foundation applications.</span></span>
-   <span data-ttu-id="6380a-107">Le filtre EVR pour les applications DirectShow.</span><span class="sxs-lookup"><span data-stu-id="6380a-107">The EVR filter, for DirectShow applications.</span></span>

<span data-ttu-id="6380a-108">Les deux versions utilisent les mêmes objets internes pour effectuer le rendu de la vidéo, et elles partagent un grand nombre des mêmes interfaces.</span><span class="sxs-lookup"><span data-stu-id="6380a-108">Both versions use the same internal objects to render video, and they share many of the same interfaces.</span></span>

<span data-ttu-id="6380a-109">Le EVR peut combiner jusqu’à 16 flux vidéo.</span><span class="sxs-lookup"><span data-stu-id="6380a-109">The EVR can mix up to 16 video streams.</span></span> <span data-ttu-id="6380a-110">Le premier flux d’entrée est appelé le *flux de référence*.</span><span class="sxs-lookup"><span data-stu-id="6380a-110">The first input stream is called the *reference stream*.</span></span> <span data-ttu-id="6380a-111">Le flux de référence apparaît toujours en premier dans l’ordre de plan.</span><span class="sxs-lookup"><span data-stu-id="6380a-111">The reference stream always appears first in the z-order.</span></span> <span data-ttu-id="6380a-112">Tous les flux supplémentaires sont appelés des sous- *flux* et sont mélangés au-dessus du flux de référence.</span><span class="sxs-lookup"><span data-stu-id="6380a-112">Any additional streams are called *substreams*, and are mixed on top of the reference stream.</span></span> <span data-ttu-id="6380a-113">L’application peut modifier l’ordre de plan des sous-flux, mais aucun sous-flux ne peut être d’abord dans l’ordre de plan.</span><span class="sxs-lookup"><span data-stu-id="6380a-113">The application can change the z-order of the substreams, but no substream can be first in the z-order.</span></span>

<span data-ttu-id="6380a-114">Le pilote Graphics détermine les formats vidéo pris en charge, mais ils sont généralement limités aux éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6380a-114">The graphics driver determines which video formats are supported, but typically they are limited to the following:</span></span>

-   <span data-ttu-id="6380a-115">Flux de référence : YUV progressif ou entrelacé, sans alpha par pixel (comme NV12 ou YUY2); ou RGB progressif.</span><span class="sxs-lookup"><span data-stu-id="6380a-115">Reference stream: Progressive or interlaced YUV with no per-pixel alpha (such as NV12 or YUY2); or progressive RGB.</span></span>
-   <span data-ttu-id="6380a-116">Sous-flux : YUV progressifs avec par pixel-alpha, tels que AYUV ou AI44.</span><span class="sxs-lookup"><span data-stu-id="6380a-116">Substreams: Progressive YUV with per-pixel-alpha, such as AYUV or AI44.</span></span>

<span data-ttu-id="6380a-117">Les formats de sous-flux disponibles peuvent dépendre du format du flux de référence.</span><span class="sxs-lookup"><span data-stu-id="6380a-117">The available substream formats might depend on the format of the reference stream.</span></span> <span data-ttu-id="6380a-118">Pour plus d’informations, consultez [EVR Media type Negotiation](evr-media-type-negotiation.md).</span><span class="sxs-lookup"><span data-stu-id="6380a-118">For more information, see [EVR Media Type Negotiation](evr-media-type-negotiation.md).</span></span>

<span data-ttu-id="6380a-119">En interne, EVR utilise un objet appelé *mixer* pour combiner les frames des flux d’entrée sur une surface de rendu.</span><span class="sxs-lookup"><span data-stu-id="6380a-119">Internally, the EVR uses an object called the *mixer* to composite the frames from the input streams onto one surface for rendering.</span></span> <span data-ttu-id="6380a-120">Le mélangeur effectue également une correction de désentrelacement et de couleur.</span><span class="sxs-lookup"><span data-stu-id="6380a-120">The mixer also performs deinterlacing and color correction.</span></span> <span data-ttu-id="6380a-121">La sortie du mélangeur est la dernière image vidéo composite.</span><span class="sxs-lookup"><span data-stu-id="6380a-121">The output from the mixer is the final composited video frame.</span></span> <span data-ttu-id="6380a-122">Un deuxième objet appelé le *présentateur* restitue le cadre vidéo à l’affichage.</span><span class="sxs-lookup"><span data-stu-id="6380a-122">A second object called the *presenter* renders the video frame to the display.</span></span> <span data-ttu-id="6380a-123">Le présentateur planifie le rendu des frames et gère l’appareil Direct3D.</span><span class="sxs-lookup"><span data-stu-id="6380a-123">The presenter schedules when the frames are rendered and manages the Direct3D device.</span></span> <span data-ttu-id="6380a-124">Une application peut fournir une implémentation personnalisée du mélangeur ou du présentateur.</span><span class="sxs-lookup"><span data-stu-id="6380a-124">An application can provide a custom implementation of either the mixer or the presenter.</span></span>

<span data-ttu-id="6380a-125">La fréquence d’images de sortie est verrouillée dans le flux de référence.</span><span class="sxs-lookup"><span data-stu-id="6380a-125">The output frame rate is locked to the reference stream.</span></span> <span data-ttu-id="6380a-126">Chaque fois que les sous-flux reçoivent de nouvelles images, le mélangeur les conserve.</span><span class="sxs-lookup"><span data-stu-id="6380a-126">Whenever the substreams receive new frames, the mixer holds onto them.</span></span> <span data-ttu-id="6380a-127">Lorsque le flux de référence reçoit un nouveau Frame, le mixer composite ce frame avec les frames de sous-flux.</span><span class="sxs-lookup"><span data-stu-id="6380a-127">When the reference stream receives a new frame, the mixer composites that frame with the substream frames.</span></span> <span data-ttu-id="6380a-128">(Si le flux de référence est entrelacé, une trame de référence complète peut nécessiter plusieurs exemples de supports.) Il est possible qu’un sous-flux reçoive plusieurs frames alors que le mixer attend un frame de référence.</span><span class="sxs-lookup"><span data-stu-id="6380a-128">(If the reference stream is interlaced, a complete reference frame may require more than one media sample.) It is possible for a substream to receive more than one frame while the mixer is waiting for a reference frame.</span></span> <span data-ttu-id="6380a-129">Dans ce cas, le mélangeur ignore simplement le frame de sous-flux précédent.</span><span class="sxs-lookup"><span data-stu-id="6380a-129">In that case, the mixer simply discards the previous substream frame.</span></span>

<span data-ttu-id="6380a-130">Étant donné que le présentateur crée le périphérique Direct3D, il est également chargé de partager l’appareil avec d’autres objets de pipeline qui doivent accéder aux services d’accélération vidéo DirectX (DXVA).</span><span class="sxs-lookup"><span data-stu-id="6380a-130">Because the presenter creates the Direct3D device, it is also responsible for sharing the device with other pipeline objects that need to access DirectX Video Acceleration (DXVA) services.</span></span> <span data-ttu-id="6380a-131">En particulier, le mélangeur EVR utilise les services de traitement vidéo DXVA pour désentrelacer et mélanger la vidéo.</span><span class="sxs-lookup"><span data-stu-id="6380a-131">In particular, the EVR mixer uses the DXVA video processing services to deinterlace and mix the video.</span></span> <span data-ttu-id="6380a-132">Externe au EVR, les décodeurs logiciels peuvent utiliser DXVA pour le décodage vidéo accéléré.</span><span class="sxs-lookup"><span data-stu-id="6380a-132">External to the EVR, software decoders may use DXVA for accelerated video decoding.</span></span> <span data-ttu-id="6380a-133">Le présentateur partage le périphérique Direct3D au moyen du [Gestionnaire de périphériques Direct3D](direct3d-device-manager.md).</span><span class="sxs-lookup"><span data-stu-id="6380a-133">The presenter shares the Direct3D device by means of the [Direct3D Device Manager](direct3d-device-manager.md).</span></span> <span data-ttu-id="6380a-134">Le diagramme suivant illustre l’architecture interne de EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-134">The following diagram shows the internal architecture of the EVR.</span></span> <span data-ttu-id="6380a-135">(Le décodeur logiciel, ombré en gris, ne fait pas partie du EVR.)</span><span class="sxs-lookup"><span data-stu-id="6380a-135">(The software decoder, shaded in gray, is not part of the EVR.)</span></span>

![diagramme architectural montrant le EVR.](images/5d4a1fd9-25ff-4cc5-a486-0d22f34bbfd7.gif)

## <a name="evr-interfaces"></a><span data-ttu-id="6380a-137">Interfaces EVR</span><span class="sxs-lookup"><span data-stu-id="6380a-137">EVR Interfaces</span></span>

<span data-ttu-id="6380a-138">Le EVR prend en charge les interfaces suivantes.</span><span class="sxs-lookup"><span data-stu-id="6380a-138">The EVR supports the following interfaces.</span></span> <span data-ttu-id="6380a-139">Certaines de ces interfaces sont implémentées par le mélangeur ou le présentateur.</span><span class="sxs-lookup"><span data-stu-id="6380a-139">Some of these interfaces are implemented by the mixer or presenter.</span></span> <span data-ttu-id="6380a-140">Pour chaque interface, la rubrique de référence explique comment obtenir un pointeur vers l’interface.</span><span class="sxs-lookup"><span data-stu-id="6380a-140">For each interface, the reference topic describes how to get a pointer to the interface.</span></span>

| <span data-ttu-id="6380a-141">Interface</span><span class="sxs-lookup"><span data-stu-id="6380a-141">Interface</span></span>                                                    | <span data-ttu-id="6380a-142">Description</span><span class="sxs-lookup"><span data-stu-id="6380a-142">Description</span></span>                                                                                       |
|--------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="6380a-143">**IEVRFilterConfig**</span><span class="sxs-lookup"><span data-stu-id="6380a-143">**IEVRFilterConfig**</span></span>](/windows/desktop/api/evr/nn-evr-ievrfilterconfig)                 | <span data-ttu-id="6380a-144">Définit le nombre de broches d’entrée sur le filtre EVR (DirectShow uniquement).</span><span class="sxs-lookup"><span data-stu-id="6380a-144">Sets the number of input pins on the EVR filter (DirectShow only).</span></span>                                |
| [<span data-ttu-id="6380a-145">**IEVRFilterConfigEx**</span><span class="sxs-lookup"><span data-stu-id="6380a-145">**IEVRFilterConfigEx**</span></span>](/windows/desktop/api/evr/nn-evr-ievrfilterconfigex)             | <span data-ttu-id="6380a-146">Configure le filtre EVR (DirectShow uniquement).</span><span class="sxs-lookup"><span data-stu-id="6380a-146">Configures the EVR filter (DirectShow only).</span></span>                                                      |
| [<span data-ttu-id="6380a-147">**IEVRTrustedVideoPlugin**</span><span class="sxs-lookup"><span data-stu-id="6380a-147">**IEVRTrustedVideoPlugin**</span></span>](/windows/desktop/api/evr/nn-evr-ievrtrustedvideoplugin)     | <span data-ttu-id="6380a-148">Permet à un plug-in EVR de restituer une vidéo protégée.</span><span class="sxs-lookup"><span data-stu-id="6380a-148">Enables an EVR plug-in to render protected video.</span></span>                                                 |
| [<span data-ttu-id="6380a-149">**IMFDesiredSample**</span><span class="sxs-lookup"><span data-stu-id="6380a-149">**IMFDesiredSample**</span></span>](/windows/desktop/api/evr/nn-evr-imfdesiredsample)                 | <span data-ttu-id="6380a-150">Permet au présentateur EVR de demander un frame spécifique à partir du mélangeur.</span><span class="sxs-lookup"><span data-stu-id="6380a-150">Enables the EVR presenter to request a specific frame from the mixer.</span></span>                             |
| [<span data-ttu-id="6380a-151">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="6380a-151">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                 | <span data-ttu-id="6380a-152">Permet au gestionnaire de qualité d’ajuster la qualité vidéo EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-152">Enables the quality manager to adjust the EVR video quality.</span></span>                                      |
| [<span data-ttu-id="6380a-153">**IMFTopologyServiceLookup**</span><span class="sxs-lookup"><span data-stu-id="6380a-153">**IMFTopologyServiceLookup**</span></span>](/windows/desktop/api/evr/nn-evr-imftopologyservicelookup) | <span data-ttu-id="6380a-154">Permet à un mélangeur ou un présentateur personnalisé d’obtenir des pointeurs d’interface à partir du EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-154">Enables a custom mixer or presenter to get interface pointers from the EVR.</span></span>                       |
| [<span data-ttu-id="6380a-155">**IMFVideoDeviceID**</span><span class="sxs-lookup"><span data-stu-id="6380a-155">**IMFVideoDeviceID**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodeviceid)                 | <span data-ttu-id="6380a-156">Retourne l’identificateur d’appareil d’un mélangeur ou d’un présentateur EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-156">Returns the device identifier of an EVR mixer or presenter.</span></span>                                       |
| [<span data-ttu-id="6380a-157">**IMFVideoDisplayControl**</span><span class="sxs-lookup"><span data-stu-id="6380a-157">**IMFVideoDisplayControl**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodisplaycontrol)     | <span data-ttu-id="6380a-158">Contrôle la façon dont le EVR affiche la vidéo.</span><span class="sxs-lookup"><span data-stu-id="6380a-158">Controls how the EVR displays video.</span></span>                                                              |
| [<span data-ttu-id="6380a-159">**IMFVideoMixerBitmap**</span><span class="sxs-lookup"><span data-stu-id="6380a-159">**IMFVideoMixerBitmap**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)           | <span data-ttu-id="6380a-160">Alpha-fusionne une image bitmap statique avec la vidéo.</span><span class="sxs-lookup"><span data-stu-id="6380a-160">Alpha-blends a static bitmap image with the video.</span></span>                                                |
| [<span data-ttu-id="6380a-161">**IMFVideoMixerControl**</span><span class="sxs-lookup"><span data-stu-id="6380a-161">**IMFVideoMixerControl**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol)         | <span data-ttu-id="6380a-162">Contrôle la façon dont le convertisseur de vidéo amélioré (EVR) mixe les sous-flux vidéo.</span><span class="sxs-lookup"><span data-stu-id="6380a-162">Controls how the Enhanced Video Renderer (EVR) mixes video substreams.</span></span>                            |
| [<span data-ttu-id="6380a-163">**IMFVideoMixerControl2**</span><span class="sxs-lookup"><span data-stu-id="6380a-163">**IMFVideoMixerControl2**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol2)       | <span data-ttu-id="6380a-164">Contrôle les préférences pour le désentrelacement vidéo.</span><span class="sxs-lookup"><span data-stu-id="6380a-164">Controls preferences for video deinterlacing.</span></span>                                                     |
| [<span data-ttu-id="6380a-165">**IMFVideoPositionMapper**</span><span class="sxs-lookup"><span data-stu-id="6380a-165">**IMFVideoPositionMapper**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopositionmapper)     | <span data-ttu-id="6380a-166">Mappe une position sur un flux vidéo d’entrée à la position correspondante sur un flux vidéo de sortie.</span><span class="sxs-lookup"><span data-stu-id="6380a-166">Maps a position on an input video stream to the corresponding position on an output video stream.</span></span> |
| [<span data-ttu-id="6380a-167">**IMFVideoPresenter**</span><span class="sxs-lookup"><span data-stu-id="6380a-167">**IMFVideoPresenter**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopresenter)               | <span data-ttu-id="6380a-168">Exposé par le présentateur EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-168">Exposed by the EVR presenter.</span></span>                                                                     |
| [<span data-ttu-id="6380a-169">**IMFVideoProcessor**</span><span class="sxs-lookup"><span data-stu-id="6380a-169">**IMFVideoProcessor**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)               | <span data-ttu-id="6380a-170">Contrôle le traitement vidéo, y compris les réglages, les filtres de bruit et les filtres de détails.</span><span class="sxs-lookup"><span data-stu-id="6380a-170">Controls video processing, including adjustment, noise filters, and detail filters.</span></span>               |
| [<span data-ttu-id="6380a-171">**IMFVideoRenderer**</span><span class="sxs-lookup"><span data-stu-id="6380a-171">**IMFVideoRenderer**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideorenderer)                 | <span data-ttu-id="6380a-172">Définit un mélangeur ou un présentateur sur le EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-172">Sets a mixer or presenter on the EVR.</span></span>                                                             |
| [<span data-ttu-id="6380a-173">**IMFVideoSampleAllocator**</span><span class="sxs-lookup"><span data-stu-id="6380a-173">**IMFVideoSampleAllocator**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfvideosampleallocator)   | <span data-ttu-id="6380a-174">Alloue des exemples vidéo.</span><span class="sxs-lookup"><span data-stu-id="6380a-174">Allocates video samples.</span></span>                                                                          |



 

## <a name="in-this-section"></a><span data-ttu-id="6380a-175">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="6380a-175">In This Section</span></span>



| <span data-ttu-id="6380a-176">Rubrique</span><span class="sxs-lookup"><span data-stu-id="6380a-176">Topic</span></span>                                                                    | <span data-ttu-id="6380a-177">Description</span><span class="sxs-lookup"><span data-stu-id="6380a-177">Description</span></span>                                                                           |
|--------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
| [<span data-ttu-id="6380a-178">Utilisation du filtre DirectShow EVR</span><span class="sxs-lookup"><span data-stu-id="6380a-178">Using the DirectShow EVR Filter</span></span>](using-the-directshow-evr-filter.md)   | <span data-ttu-id="6380a-179">Comment utiliser EVR dans une application DirectShow.</span><span class="sxs-lookup"><span data-stu-id="6380a-179">How to use the EVR in a DirectShow application.</span></span>                                       |
| [<span data-ttu-id="6380a-180">Utilisation du récepteur multimédia EVR</span><span class="sxs-lookup"><span data-stu-id="6380a-180">Using the EVR Media Sink</span></span>](using-the-evr-media-sink.md)                 | <span data-ttu-id="6380a-181">Comment utiliser EVR dans une application Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="6380a-181">How to use the EVR in a Media Foundation application.</span></span>                                 |
| [<span data-ttu-id="6380a-182">Utilisation des contrôles d’affichage vidéo</span><span class="sxs-lookup"><span data-stu-id="6380a-182">Using the Video Display Controls</span></span>](using-the-video-display-controls.md) | <span data-ttu-id="6380a-183">Comment contrôler la façon dont le EVR affiche la vidéo dans la fenêtre d’application.</span><span class="sxs-lookup"><span data-stu-id="6380a-183">How to control the way in which the EVR displays video inside the application window.</span></span> |
| [<span data-ttu-id="6380a-184">Utilisation des contrôles Video Mixer</span><span class="sxs-lookup"><span data-stu-id="6380a-184">Using the Video Mixer Controls</span></span>](using-the-video-mixer-controls.md)     | <span data-ttu-id="6380a-185">Comment contrôler la façon dont le mélangeur EVR fonctionne.</span><span class="sxs-lookup"><span data-stu-id="6380a-185">How to control the way in which the EVR mixer operates.</span></span>                               |
| [<span data-ttu-id="6380a-186">Négociation de type de média EVR</span><span class="sxs-lookup"><span data-stu-id="6380a-186">EVR Media Type Negotiation</span></span>](evr-media-type-negotiation.md)             | <span data-ttu-id="6380a-187">Décrit comment le EVR détermine les formats vidéo qu’il peut accepter comme entrée.</span><span class="sxs-lookup"><span data-stu-id="6380a-187">Describes how the EVR determines which video formats it can accept as input.</span></span>          |
| [<span data-ttu-id="6380a-188">Mélangeurs personnalisés</span><span class="sxs-lookup"><span data-stu-id="6380a-188">Custom Mixers</span></span>](custom-mixers.md)                                       | <span data-ttu-id="6380a-189">Comment écrire un mélangeur personnalisé pour EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-189">How to write a custom mixer for the EVR.</span></span>                                              |
| [<span data-ttu-id="6380a-190">Comment écrire un présentateur EVR</span><span class="sxs-lookup"><span data-stu-id="6380a-190">How to Write an EVR Presenter</span></span>](how-to-write-an-evr-presenter.md)       | <span data-ttu-id="6380a-191">Comment écrire un présentateur personnalisé pour EVR.</span><span class="sxs-lookup"><span data-stu-id="6380a-191">How to write a custom presenter for the EVR.</span></span>                                          |



 

## <a name="related-topics"></a><span data-ttu-id="6380a-192">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="6380a-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6380a-193">Lecture audio/vidéo</span><span class="sxs-lookup"><span data-stu-id="6380a-193">Audio/Video Playback</span></span>](audio-video-playback.md)
</dt> </dl>

 

 



