---
description: Le récepteur de fichiers MPEG-4 crée des fichiers MP4.
ms.assetid: 069b8e72-d081-466e-ac8d-c3f81c8a6f35
title: Récepteur de fichiers MPEG-4
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6c27517463bca7dfa88fdbc09d77f7a6512c896d
ms.sourcegitcommit: 9c8ddec1e955f181beecad0478c1fb79013b5e9d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/21/2021
ms.locfileid: "106538231"
---
# <a name="mpeg-4-file-sink"></a><span data-ttu-id="35041-103">Récepteur de fichiers MPEG-4</span><span class="sxs-lookup"><span data-stu-id="35041-103">MPEG-4 File Sink</span></span>

<span data-ttu-id="35041-104">Le récepteur de fichiers MPEG-4 crée des fichiers MP4.</span><span class="sxs-lookup"><span data-stu-id="35041-104">The MPEG-4 file sink creates MP4 files.</span></span> <span data-ttu-id="35041-105">Pour plus d’informations sur le format de fichier MP4, reportez-vous aux documents standard suivants :</span><span class="sxs-lookup"><span data-stu-id="35041-105">For more information about the MP4 file format, refer to the following standards documents:</span></span>

-   <span data-ttu-id="35041-106">ISO/IEC 14496-12 : *technologies de l’information--Codage des objets audiovisuels--Partie 12 : format de fichier multimédia de base ISO*</span><span class="sxs-lookup"><span data-stu-id="35041-106">ISO/IEC 14496-12: *Information technology -- Coding of audio-visual objects -- Part 12: ISO Base Media File Format*</span></span>
-   <span data-ttu-id="35041-107">ISO/IEC 14496-14 : *technologies de l’information--Codage des objets audiovisuels--Partie 14 : format de fichier MP4*</span><span class="sxs-lookup"><span data-stu-id="35041-107">ISO/IEC 14496-14: *Information technology -- Coding of audio-visual objects -- Part 14: MP4 File Format*</span></span>

> [!Note]  
> <span data-ttu-id="35041-108">(Ces ressources peuvent ne pas être disponibles dans certaines langues et certains pays.)</span><span class="sxs-lookup"><span data-stu-id="35041-108">(These resources may not be available in some languages and countries.)</span></span>

 

<span data-ttu-id="35041-109">Le récepteur de fichiers MPEG-4 n’encapsule pas les fonctionnalités d’encodage.</span><span class="sxs-lookup"><span data-stu-id="35041-109">The MPEG-4 file sink does not encapsulate encoding functionality.</span></span>

<span data-ttu-id="35041-110">Pour créer le récepteur de fichiers MPEG-4, appelez la fonction [**MFCreateMPEG4MediaSink**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatempeg4mediasink) .</span><span class="sxs-lookup"><span data-stu-id="35041-110">To create the MPEG-4 file sink, call the [**MFCreateMPEG4MediaSink**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatempeg4mediasink) function.</span></span> <span data-ttu-id="35041-111">Le récepteur de fichiers MPEG-4 expose les interfaces suivantes via **QueryInterface**:</span><span class="sxs-lookup"><span data-stu-id="35041-111">The MPEG-4 file sink exposes the following interfaces through **QueryInterface**:</span></span>

-   [<span data-ttu-id="35041-112">**IMFClockStateSink**</span><span class="sxs-lookup"><span data-stu-id="35041-112">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)
-   [<span data-ttu-id="35041-113">**IMFFinalizableMediaSink**</span><span class="sxs-lookup"><span data-stu-id="35041-113">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)
-   [<span data-ttu-id="35041-114">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="35041-114">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)
-   [<span data-ttu-id="35041-115">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="35041-115">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)
-   [<span data-ttu-id="35041-116">**IMFMediaSink**</span><span class="sxs-lookup"><span data-stu-id="35041-116">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)

## <a name="sample-description-box"></a><span data-ttu-id="35041-117">Zone de description de l’exemple</span><span class="sxs-lookup"><span data-stu-id="35041-117">Sample Description Box</span></span>

<span data-ttu-id="35041-118">MP4 est un format de conteneur extensible.</span><span class="sxs-lookup"><span data-stu-id="35041-118">MP4 is an extensible container format.</span></span> <span data-ttu-id="35041-119">La spécification MP4 ne définit pas une structure fixe pour décrire les types de média dans un conteneur MP4.</span><span class="sxs-lookup"><span data-stu-id="35041-119">The MP4 specification does not define a fixed structure for describing media types in an MP4 container.</span></span> <span data-ttu-id="35041-120">Au lieu de cela, il définit une hiérarchie d’objets qui permet de définir des structures personnalisées pour chaque format.</span><span class="sxs-lookup"><span data-stu-id="35041-120">Instead, it defines an object hierarchy that allows custom structures to be defined for each format.</span></span> <span data-ttu-id="35041-121">La description du format est stockée dans la zone Description de l’exemple (« STSD ») pour chaque flux.</span><span class="sxs-lookup"><span data-stu-id="35041-121">The format description is stored in the sample description ('stsd') box for each stream.</span></span> <span data-ttu-id="35041-122">La zone Description de l’exemple contient une liste d’exemples d’entrées.</span><span class="sxs-lookup"><span data-stu-id="35041-122">The sample description box contains a list of sample entries.</span></span> <span data-ttu-id="35041-123">Pour chaque entrée d’exemple, un code de 4 octets, similaire à un code FOURCC, définit la structure de format.</span><span class="sxs-lookup"><span data-stu-id="35041-123">For each sample entry, a 4-byte code, similar to a FOURCC, defines the format structure.</span></span>

<span data-ttu-id="35041-124">Le récepteur de fichiers MPEG-4 peut générer la zone de description de l’exemple pour les formats suivants :</span><span class="sxs-lookup"><span data-stu-id="35041-124">The MPEG-4 File Sink can generate the sample description box for the following formats:</span></span>

-   <span data-ttu-id="35041-125">Vidéo H. 264/AVC</span><span class="sxs-lookup"><span data-stu-id="35041-125">H.264/AVC video</span></span>
-   <span data-ttu-id="35041-126">Audio AAC</span><span class="sxs-lookup"><span data-stu-id="35041-126">AAC audio</span></span>
-   <span data-ttu-id="35041-127">Audio MP3</span><span class="sxs-lookup"><span data-stu-id="35041-127">MP3 audio</span></span>

<span data-ttu-id="35041-128">Pour les autres formats, la zone Description de l’exemple doit être fournie dans le type de média pour chaque flux.</span><span class="sxs-lookup"><span data-stu-id="35041-128">For other formats, the sample description box must be provided in the media type for each stream.</span></span> <span data-ttu-id="35041-129">Pour spécifier la zone Description de l’exemple, définissez les attributs suivants sur le type de média :</span><span class="sxs-lookup"><span data-stu-id="35041-129">To specify the sample description box, set the following attributes on the media type:</span></span>



| <span data-ttu-id="35041-130">Attribut</span><span class="sxs-lookup"><span data-stu-id="35041-130">Attribute</span></span>                                                                     | <span data-ttu-id="35041-131">Description</span><span class="sxs-lookup"><span data-stu-id="35041-131">Description</span></span>                                                                                                                                                   |
|-------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="35041-132">\_Exemple de \_ Description du MPEG4 MF MT \_ \_</span><span class="sxs-lookup"><span data-stu-id="35041-132">MF\_MT\_MPEG4\_SAMPLE\_DESCRIPTION</span></span>](mf-mt-mpeg4-sample-description.md)      | <span data-ttu-id="35041-133">Contient l’exemple de zone de description en tant qu’objet blob binaire.</span><span class="sxs-lookup"><span data-stu-id="35041-133">Contains the sample description box as a binary blob.</span></span>                                                                                                         |
| [<span data-ttu-id="35041-134">\_Entrée d' \_ exemple \_ de \_ \_ ligne de code MPEG4 MF</span><span class="sxs-lookup"><span data-stu-id="35041-134">MF\_MT\_MPEG4\_CURRENT\_SAMPLE\_ENTRY</span></span>](mf-mt-mpeg4-current-sample-entry.md) | <span data-ttu-id="35041-135">Spécifie lequel des exemples d’entrées dans la zone Description de l’exemple est actuellement actif.</span><span class="sxs-lookup"><span data-stu-id="35041-135">Specifies which of the sample entries in the sample description box is currently active.</span></span> <span data-ttu-id="35041-136">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="35041-136">(Optional.)</span></span><br/> <span data-ttu-id="35041-137">Actuellement, la valeur doit être égale à zéro.</span><span class="sxs-lookup"><span data-stu-id="35041-137">Currently, the value must be zero.</span></span><br/> |



 

<span data-ttu-id="35041-138">Dans certains cas, il n’est pas possible de générer un exemple de zone de description tant que toutes les données n’ont pas été encodées.</span><span class="sxs-lookup"><span data-stu-id="35041-138">In some cases, it is not possible to generate a sample description box until all of the data has been encoded.</span></span> <span data-ttu-id="35041-139">Par exemple, les informations telles que la vitesse de transmission moyenne peuvent ne pas être connues à l’avance.</span><span class="sxs-lookup"><span data-stu-id="35041-139">For example, information such as the average bit rate might not be known ahead of time.</span></span> <span data-ttu-id="35041-140">Dans ce cas, vous pouvez mettre à jour le type de média à l’aide de l’interface [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) sur le récepteur de fichiers MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="35041-140">In that case, you can update the media type by using the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface on the MPEG-4 file sink.</span></span> <span data-ttu-id="35041-141">Cette opération doit être effectuée avant la finalisation du récepteur multimédia.</span><span class="sxs-lookup"><span data-stu-id="35041-141">This must be done before the media sink is finalized.</span></span>

<span data-ttu-id="35041-142">En général, le type de média est créé par un encodeur en amont.</span><span class="sxs-lookup"><span data-stu-id="35041-142">Typically the media type is created by an upstream encoder.</span></span> <span data-ttu-id="35041-143">L’encodeur peut générer un nouveau type de média pendant la diffusion en continu, via une modification de format dynamique.</span><span class="sxs-lookup"><span data-stu-id="35041-143">The encoder can generate a new media type during streaming, through a dynamic format change.</span></span> <span data-ttu-id="35041-144">Pour plus d’informations, consultez [modifications de format dynamique](basic-mft-processing-model.md).</span><span class="sxs-lookup"><span data-stu-id="35041-144">For more information, see [Dynamic Format Changes](basic-mft-processing-model.md).</span></span>

## <a name="h264avc-video"></a><span data-ttu-id="35041-145">Vidéo H. 264/AVC</span><span class="sxs-lookup"><span data-stu-id="35041-145">H.264/AVC Video</span></span>

<span data-ttu-id="35041-146">Le récepteur de fichiers MPEG-4 prend en charge la version du flux AVC qui possède un flux vidéo élémentaire, avec les paramètres de séquence (SPS) et le jeu de paramètres d’image (PPS) NALUs contenus dans la zone Description de l’exemple, tel que défini dans la section ISO/IEC 14496, partie 15, 5,1.</span><span class="sxs-lookup"><span data-stu-id="35041-146">The MPEG-4 file sink supports the version of the AVC stream that has an elementary video stream, with sequence parameter set (SPS) and picture parameter set (PPS) NALUs contained in the sample description box, as defined in ISO/IEC 14496 part 15 section 5.1.</span></span> <span data-ttu-id="35041-147">Le récepteur de fichiers ne prend pas en charge l’autre méthode de stockage des NALUs SPS/PPS en tant que flux élémentaire de définition de paramètres distinct.</span><span class="sxs-lookup"><span data-stu-id="35041-147">The file sink does not support the alternate method of storing SPS/PPS NALUs as a separate parameter-set elementary stream.</span></span>

<span data-ttu-id="35041-148">Le récepteur de fichiers MPEG-4 peut générer la zone de description de l’exemple, mais il doit être fourni avec les NALUs SPS et PPS.</span><span class="sxs-lookup"><span data-stu-id="35041-148">The MPEG-4 file sink can generate the sample description box, but must be provided with the SPS and PPS NALUs.</span></span> <span data-ttu-id="35041-149">Spécifiez ces informations dans le type de média en définissant l’attribut d' [**\_ \_ \_ \_ en-tête de séquence MPEG MF MT**](mf-mt-mpeg-sequence-header-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="35041-149">Specify this information in the media type by setting the [**MF\_MT\_MPEG\_SEQUENCE\_HEADER**](mf-mt-mpeg-sequence-header-attribute.md) attribute.</span></span> <span data-ttu-id="35041-150">La valeur de l’attribut est l’en-tête de séquence H. 264.</span><span class="sxs-lookup"><span data-stu-id="35041-150">The value of the attribute is the H.264 sequence header.</span></span> <span data-ttu-id="35041-151">L’en-tête de séquence doit se composer des NALUs SPS et PPS délimités par des codes de démarrage de 3 ou 4 octets.</span><span class="sxs-lookup"><span data-stu-id="35041-151">The sequence header must consist of the SPS and PPS NALUs delimited by either 3-byte or 4-byte start codes.</span></span>

<span data-ttu-id="35041-152">Si vous le souhaitez, lorsque vous configurez le récepteur de fichiers, vous pouvez omettre l’attribut d' [**\_ \_ \_ \_ en-tête de séquence MPEG MF MT**](mf-mt-mpeg-sequence-header-attribute.md) du type de média initial.</span><span class="sxs-lookup"><span data-stu-id="35041-152">Optionally, when you configure the file sink, you can omit the [**MF\_MT\_MPEG\_SEQUENCE\_HEADER**](mf-mt-mpeg-sequence-header-attribute.md) attribute from the initial media type.</span></span> <span data-ttu-id="35041-153">Dans ce cas, vous devez mettre à jour le type de média ultérieurement pour inclure l’en-tête de séquence.</span><span class="sxs-lookup"><span data-stu-id="35041-153">In that case, you must update the media type later to include the sequence header.</span></span>

<span data-ttu-id="35041-154">Le récepteur de fichiers MPEG-4 présente les exigences suivantes pour les flux de bits AVC :</span><span class="sxs-lookup"><span data-stu-id="35041-154">The MPEG-4 file sink has the following requirements for AVC bitstreams:</span></span>

-   <span data-ttu-id="35041-155">Le flux binaire doit être conforme à la spécification de format d’annexe B H. 264.</span><span class="sxs-lookup"><span data-stu-id="35041-155">The bitstream must conform to the H.264 Annex B format specification.</span></span> <span data-ttu-id="35041-156">En particulier, NALUs doit être délimité par des codes de début de 3 ou 4 octets.</span><span class="sxs-lookup"><span data-stu-id="35041-156">In particular, NALUs must be delimited with either 3-byte or 4-byte start codes.</span></span>
-   <span data-ttu-id="35041-157">Les exemples de supports doivent contenir toutes les NALUs de données de secteur et de données qui correspondent à une heure de présentation unique.</span><span class="sxs-lookup"><span data-stu-id="35041-157">Media samples must contain all slice and data NALUs that correspond to a single presentation time.</span></span>
-   <span data-ttu-id="35041-158">Lorsque vous écrivez des frames B dans un fichier MP4, vous devez définir à la fois l’horodatage de la présentation et l’horodatage de décodage.</span><span class="sxs-lookup"><span data-stu-id="35041-158">When writing B-frames into an MP4 file, you must set both the presentation time stamp and the decode time stamp.</span></span> <span data-ttu-id="35041-159">Si Stream a un frame B et que l’horodateur de décodage n’est pas défini, l’enregistreur MP4 verra le temps de tramage en arrière et supprimera le frame.</span><span class="sxs-lookup"><span data-stu-id="35041-159">If stream has a B frame and the decode timestamp is not set, the MP4 writer will see the frame time going backwards and will drop the frame.</span></span> 

## <a name="aac-audio"></a><span data-ttu-id="35041-160">Audio AAC</span><span class="sxs-lookup"><span data-stu-id="35041-160">AAC Audio</span></span>

<span data-ttu-id="35041-161">Pour l’audio AAC, le récepteur de fichiers MPEG-4 peut générer la zone de description de l’exemple pour les sous-types suivants :</span><span class="sxs-lookup"><span data-stu-id="35041-161">For AAC audio, the MPEG-4 file sink can generate the sample description box for the following subtypes:</span></span>

-   <span data-ttu-id="35041-162">**MFAudioFormat \_ AAC**</span><span class="sxs-lookup"><span data-stu-id="35041-162">**MFAudioFormat\_AAC**</span></span>
-   <span data-ttu-id="35041-163">**MEDIASUBTYPE \_ brut \_ AAC1**</span><span class="sxs-lookup"><span data-stu-id="35041-163">**MEDIASUBTYPE\_RAW\_AAC1**</span></span>

<span data-ttu-id="35041-164">Pour plus d’informations sur ces substypes, consultez [types de média AAC](aac-media-types.md).</span><span class="sxs-lookup"><span data-stu-id="35041-164">For more information about these substypes, see [AAC Media Types](aac-media-types.md).</span></span>

<span data-ttu-id="35041-165">Pour le sous-type **MFAudioFormat \_ AAC** , le type de média contient éventuellement l’attribut de [**\_ \_ \_ données utilisateur MF MT User**](mf-mt-user-data-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="35041-165">For the **MFAudioFormat\_AAC** subtype, the media type optionally contains the [**MF\_MT\_USER\_DATA**](mf-mt-user-data-attribute.md) attribute.</span></span> <span data-ttu-id="35041-166">S’il est présent, cet attribut représente la partie de la structure [**HEAACWAVEINFO**](/windows/win32/api/mmreg/ns-mmreg-heaacwaveinfo) qui apparaît après la structure **WAVEFORMATEX** (autrement dit, après le membre **wfx** ).</span><span class="sxs-lookup"><span data-stu-id="35041-166">If present, this attribute the portion of the [**HEAACWAVEINFO**](/windows/win32/api/mmreg/ns-mmreg-heaacwaveinfo) structure that appears after the **WAVEFORMATEX** structure (that is, after the **wfx** member).</span></span> <span data-ttu-id="35041-167">Cela est suivi des données AudioSpecificConfig (), telles que définies par la norme ISO/IEC 14496-3.</span><span class="sxs-lookup"><span data-stu-id="35041-167">This is followed by the AudioSpecificConfig() data, as defined by ISO/IEC 14496-3.</span></span> <span data-ttu-id="35041-168">Si l’attribut de **\_ \_ \_ données utilisateur MF MT** n’est pas présent, le flux est supposé être un profil de faible complexité AAC (LC) et le récepteur de fichiers MPEG-4 génère une zone de description d’exemple appropriée.</span><span class="sxs-lookup"><span data-stu-id="35041-168">If the **MF\_MT\_USER\_DATA** attribute is not present, the stream is assumed to be AAC Low Complexity (LC) profile, and the MPEG-4 file sink generates a suitable sample description box.</span></span>

<span data-ttu-id="35041-169">Pour le sous-type **\_ \_ AAC1 brut MEDIASUBTYPE** , le récepteur multimédia doit contenir l’attribut de [**\_ \_ \_ données utilisateur MF MT**](mf-mt-user-data-attribute.md) et l’attribut doit contenir les données AudioSpecificConfig ().</span><span class="sxs-lookup"><span data-stu-id="35041-169">For the **MEDIASUBTYPE\_RAW\_AAC1** subtype, the media sink must contain the [**MF\_MT\_USER\_DATA**](mf-mt-user-data-attribute.md) attribute, and the attribute must contain the AudioSpecificConfig() data.</span></span>

<span data-ttu-id="35041-170">Le récepteur de fichiers MPEG-4 crée la variante MPEG-4 de la zone de description de l’exemple AAC, à l’aide d’une entrée d’exemple « MP4A » avec objectTypeIndication = 0x40.</span><span class="sxs-lookup"><span data-stu-id="35041-170">The MPEG-4 file sink creates the MPEG-4 variant of the AAC sample description box, using an 'mp4a' sample entry with objectTypeIndication = 0x40.</span></span> <span data-ttu-id="35041-171">Elle n’utilise pas les types d’objets MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="35041-171">It does not use MPEG-2 object types.</span></span>

## <a name="mp3-audio"></a><span data-ttu-id="35041-172">Audio MP3</span><span class="sxs-lookup"><span data-stu-id="35041-172">MP3 Audio</span></span>

<span data-ttu-id="35041-173">Pour le son MP3, le récepteur de fichiers MPEG-4 peut générer la zone de description de l’exemple à partir d’un type de média audio standard.</span><span class="sxs-lookup"><span data-stu-id="35041-173">For MP3 audio, the MPEG-4 file sink can generate the sample description box from a standard audio media type.</span></span> <span data-ttu-id="35041-174">(Voir [types de média audio](audio-media-types.md).)</span><span class="sxs-lookup"><span data-stu-id="35041-174">(See [Audio Media Types](audio-media-types.md).)</span></span>

<span data-ttu-id="35041-175">Le récepteur de fichiers MPEG-4 crée la variante MPEG-4 de la zone de description de l’exemple MP3, à l’aide d’une entrée d’exemple « MP4A » avec objectTypeIndication = 0x6b pour MPEG-1 audio.</span><span class="sxs-lookup"><span data-stu-id="35041-175">The MPEG-4 file sink creates the MPEG-4 variant of the MP3 sample description box, using an 'mp4a' sample entry with objectTypeIndication = 0x6b for MPEG-1 audio.</span></span>

## <a name="limitations"></a><span data-ttu-id="35041-176">Limites</span><span class="sxs-lookup"><span data-stu-id="35041-176">Limitations</span></span>

-   <span data-ttu-id="35041-177">La taille maximale du fichier créé est de 4 Go.</span><span class="sxs-lookup"><span data-stu-id="35041-177">The maximum size of the authored file is 4 GB.</span></span> <span data-ttu-id="35041-178">Dans Windows 8, les fichiers de taille supérieure à 4 GBGB sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="35041-178">In Windows 8, files large than 4 GBGB are supported.</span></span>
-   <span data-ttu-id="35041-179">Le récepteur de fichiers MPEG-4 ne prend pas en charge les listes de modifications (zones « Edts » et « Elst »).</span><span class="sxs-lookup"><span data-stu-id="35041-179">The MPEG-4 file sink does not support edit lists ('edts' and 'elst' boxes).</span></span>

## <a name="windows-8-updates-to-mpeg-4-source-and-sink"></a><span data-ttu-id="35041-180">Mises à jour de Windows 8 pour la source et le récepteur MPEG-4</span><span class="sxs-lookup"><span data-stu-id="35041-180">Windows 8 updates to MPEG-4 source and sink</span></span>

-   <span data-ttu-id="35041-181">Prise en charge de la lecture et de l’écriture de rotation ajoutée dans la source et le récepteur MPEG-4 Windows 8.</span><span class="sxs-lookup"><span data-stu-id="35041-181">Rotation read and write support added in Windows 8 MPEG-4 source and sink.</span></span> <span data-ttu-id="35041-182">Cela n’est pas pris en charge dans la source et le récepteur Windows 7 MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="35041-182">This is not supported in the Windows 7 MPEG-4 source and sink.</span></span>

    <span data-ttu-id="35041-183">La source MPEG-4 lit l’angle de rotation pour une piste vidéo active en tant que somme de l’angle de rotation à partir de’mvhd’et de’tkhd'.</span><span class="sxs-lookup"><span data-stu-id="35041-183">MPEG-4 source reads the rotation angle for an active video track as the sum of the rotation angle from ‘mvhd’ and from ‘tkhd’.</span></span>

    <span data-ttu-id="35041-184">Le récepteur Microsoft MPEG-4 écrit l’angle de rotation dans’tkhd', mais écrit la matrice de 0 degré (identité) dans’mvhd'.</span><span class="sxs-lookup"><span data-stu-id="35041-184">Microsoft MPEG-4 sink writes the rotation angle in ‘tkhd’ but writes 0 degree (identity) matrix in ‘mvhd’.</span></span> <span data-ttu-id="35041-185">Notez que le récepteur Microsoft MPEG-4 ne prend en charge qu’une seule piste vidéo.</span><span class="sxs-lookup"><span data-stu-id="35041-185">Note, Microsoft MPEG-4 sink only supports single video track.</span></span>

    <span data-ttu-id="35041-186">IPropertyStore lit l’angle de rotation uniquement pour la première piste vidéo en tant que somme de l’angle de rotation à partir de « mvhd » et de « tkhd ».</span><span class="sxs-lookup"><span data-stu-id="35041-186">IPropertyStore reads the rotation angle for only the first video track as the sum of the rotation angle from ‘mvhd’ and from ‘tkhd’.</span></span>

    <span data-ttu-id="35041-187">IPropertyStore écrit l’angle de rotation uniquement pour la première piste vidéo dans « tkhd » une fois que l’angle de rotation est ajusté en fonction de l’angle de rotation dans « mvhd », s’il existe.</span><span class="sxs-lookup"><span data-stu-id="35041-187">IPropertyStore writes the rotation angle for only the first video track in ‘tkhd’ after the rotation angle is adjusted according to the rotation angle in ‘mvhd’, if it exists.</span></span>

-   <span data-ttu-id="35041-188">Les fragments de film (« moof ») sont pris en charge dans la source et le récepteur MPEG-4 de Windows 8, mais « mfra » n’est pas.</span><span class="sxs-lookup"><span data-stu-id="35041-188">Movie fragments ('moof') is supported in Windows 8 MPEG-4 source and sink, but 'mfra' is not.</span></span>
-   <span data-ttu-id="35041-189">H. 263 est pris en charge dans la source MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="35041-189">H.263 is supported in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="35041-190">La source MPEG-4 mappe désormais deux FourCC de « H263 » et 263» au format de fichier MPEG-4 sur le type de média de **MFVideoFormat \_ H263**.</span><span class="sxs-lookup"><span data-stu-id="35041-190">MPEG-4 source now maps two fourcc’s of ‘h263’ and ‘s263’ in MPEG-4 file format to the media type of **MFVideoFormat\_H263**.</span></span>

-   <span data-ttu-id="35041-191">Plus de prise en charge de FourCC ajoutée pour MJPEG dans la source MPEG-4 Windows 8.</span><span class="sxs-lookup"><span data-stu-id="35041-191">More fourcc support added for MJPEG in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="35041-192">Le mappage source MPEG-4 foucc de’DMB1 'au type de média de **MFVideoFormat \_ MJPG**.</span><span class="sxs-lookup"><span data-stu-id="35041-192">MPEG-4 source maps foucc of ‘dmb1’ to the media type of **MFVideoFormat\_MJPG**.</span></span>

-   <span data-ttu-id="35041-193">La prise en charge des métadonnées Furigana a été ajoutée dans la source MPEG-4 Windows 8.</span><span class="sxs-lookup"><span data-stu-id="35041-193">Furigana metadata support added in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="35041-194">La source MPEG-4 lit les métadonnées Furigana à partir de « SOAL », « décoller », « SOAA », « sonm » et « SOCO ».</span><span class="sxs-lookup"><span data-stu-id="35041-194">MPEG-4 source reads Furigana metadata from ’soal’, ‘soar’, ‘soaa’, ‘sonm’, and ‘soco’.</span></span> <span data-ttu-id="35041-195">IPropertyStore lit les métadonnées Furignana à travers l’ensemble des PKEYs correspondantes.</span><span class="sxs-lookup"><span data-stu-id="35041-195">IPropertyStore reads Furignana metadata through the set of corresponding PKEYs.</span></span>

    <span data-ttu-id="35041-196">Le tableau suivant montre le mappage entre le nom canonique de l’interpréteur de commandes, la clé de propriété et l’ID de zone/balise au format de fichier MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="35041-196">The following table shows the mapping between the shell canonical name, the property key, and the box/tag ID in MPEG-4 file format.</span></span>

    

    | <span data-ttu-id="35041-197">Champ</span><span class="sxs-lookup"><span data-stu-id="35041-197">Field</span></span>                                | <span data-ttu-id="35041-198">Clé de propriété</span><span class="sxs-lookup"><span data-stu-id="35041-198">Property Key</span></span>                         | <span data-ttu-id="35041-199">ID de balise/zone</span><span class="sxs-lookup"><span data-stu-id="35041-199">Tag/Box ID</span></span> |
    |--------------------------------------|--------------------------------------|------------|
    | <span data-ttu-id="35041-200">System. Music. AlbumTitleSortOverride</span><span class="sxs-lookup"><span data-stu-id="35041-200">System.Music.AlbumTitleSortOverride</span></span>  | <span data-ttu-id="35041-201">AlbumTitleSortOverride de la \_ musique \_</span><span class="sxs-lookup"><span data-stu-id="35041-201">PKEY\_Music\_AlbumTitleSortOverride</span></span>  | <span data-ttu-id="35041-202">soal</span><span class="sxs-lookup"><span data-stu-id="35041-202">soal</span></span>       |
    | <span data-ttu-id="35041-203">System. Music. ArtistSortOverride</span><span class="sxs-lookup"><span data-stu-id="35041-203">System.Music.ArtistSortOverride</span></span>      | <span data-ttu-id="35041-204">ArtistSortOverride de la \_ musique \_</span><span class="sxs-lookup"><span data-stu-id="35041-204">PKEY\_Music\_ArtistSortOverride</span></span>      | <span data-ttu-id="35041-205">soar</span><span class="sxs-lookup"><span data-stu-id="35041-205">soar</span></span>       |
    | <span data-ttu-id="35041-206">System. Music. AlbumArtistSortOverride</span><span class="sxs-lookup"><span data-stu-id="35041-206">System.Music.AlbumArtistSortOverride</span></span> | <span data-ttu-id="35041-207">AlbumArtistSortOverride de la \_ musique \_</span><span class="sxs-lookup"><span data-stu-id="35041-207">PKEY\_Music\_AlbumArtistSortOverride</span></span> | <span data-ttu-id="35041-208">soaa</span><span class="sxs-lookup"><span data-stu-id="35041-208">soaa</span></span>       |
    | <span data-ttu-id="35041-209">System. TitleSortOverride</span><span class="sxs-lookup"><span data-stu-id="35041-209">System.TitleSortOverride</span></span>             | <span data-ttu-id="35041-210">TitleSortOverride de la \_</span><span class="sxs-lookup"><span data-stu-id="35041-210">PKEY \_TitleSortOverride</span></span>             | <span data-ttu-id="35041-211">sonm</span><span class="sxs-lookup"><span data-stu-id="35041-211">sonm</span></span>       |
    | <span data-ttu-id="35041-212">System. Music. ComposerSortOverride</span><span class="sxs-lookup"><span data-stu-id="35041-212">System.Music.ComposerSortOverride</span></span>    | <span data-ttu-id="35041-213">ComposerSortOverride de la \_ musique \_</span><span class="sxs-lookup"><span data-stu-id="35041-213">PKEY\_Music\_ComposerSortOverride</span></span>    | <span data-ttu-id="35041-214">soco</span><span class="sxs-lookup"><span data-stu-id="35041-214">soco</span></span>       |

    

     

-   <span data-ttu-id="35041-215">Prise en charge stéréo 3D Atom ajoutée dans la source MPEG-4 Windows 8.</span><span class="sxs-lookup"><span data-stu-id="35041-215">Stereo 3D atom support added in Windows 8 MPEG-4 source.</span></span>

-   <span data-ttu-id="35041-216">AC3 et DD + prennent en charge ajoutés dans la source et le récepteur MPEG-4 Windows 8.</span><span class="sxs-lookup"><span data-stu-id="35041-216">AC3 and DD+ support added in Windows 8 MPEG-4 source and sink.</span></span>
-   <span data-ttu-id="35041-217">Les fichiers dont la taille est supérieure à 4 Go sont pris en charge dans le récepteur MPEG-4 Windows 8 pour MP4 non fragmenté.</span><span class="sxs-lookup"><span data-stu-id="35041-217">Files larger than 4 GB are supported in Windows 8 MPEG-4 sink for non-fragmental MP4.</span></span>
-   <span data-ttu-id="35041-218">Le nettoyage a été optimisé dans la source MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="35041-218">Scrubbing has been optimized in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="35041-219">Pour réduire la latence, les informations relatives aux deux images clés les plus proches pour une position de recherche particulière sont exposées par le biais de [**IMFSeekInfo :: GetNearestKeyFrames**](/windows/desktop/api/mfidl/nf-mfidl-imfseekinfo-getnearestkeyframes).</span><span class="sxs-lookup"><span data-stu-id="35041-219">To reduce latency, information for the two nearest key frames for a particular seek position are exposed through [**IMFSeekInfo::GetNearestKeyFrames**](/windows/desktop/api/mfidl/nf-mfidl-imfseekinfo-getnearestkeyframes).</span></span> <span data-ttu-id="35041-220">Étant donné que l’image clé n’a pas de frames dépendants, elle présente le frame après le décodage d’une seule trame.</span><span class="sxs-lookup"><span data-stu-id="35041-220">Since the key frame does not have dependent frames, it presents the frame after decoding only one frame.</span></span> <span data-ttu-id="35041-221">Utilisez [**IMFGetService :: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) pour obtenir cette interface via la source du média, le pipeline ou l’application.</span><span class="sxs-lookup"><span data-stu-id="35041-221">Use [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to obtain this interface through the media source, pipeline, or application.</span></span>

    <span data-ttu-id="35041-222">Définissez rate sur zéro dans la source MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="35041-222">Set rate to zero in MPEG-4 source.</span></span> <span data-ttu-id="35041-223">Lorsque le pipeline est en mode de nettoyage, le taux est égal à zéro.</span><span class="sxs-lookup"><span data-stu-id="35041-223">When the pipeline is in scrubbing mode, the rate is zero.</span></span>

-   <span data-ttu-id="35041-224">SPS et PPS peuvent être stockés dans des exemples de données dans un récepteur MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="35041-224">SPS and PPS can be stored in sample data in MPEG-4 sink.</span></span>

    <span data-ttu-id="35041-225">[MF \_ L' \_ attribut \_ passthrough MPEG4SINK SPSPPS](mf-mpeg4sink-spspps-passthrough.md) sur le récepteur MPEG-4 est défini pour permettre l’enregistrement des SP et des PPS avec des exemples d’entrée (données vidéo H. 264).</span><span class="sxs-lookup"><span data-stu-id="35041-225">[MF\_MPEG4SINK\_SPSPPS\_PASSTHROUGH](mf-mpeg4sink-spspps-passthrough.md) attribute on MPEG-4 sink is defined to allow SPS’s and PPS’s to be saved together with input samples (H.264 video data).</span></span> <span data-ttu-id="35041-226">Les clips MP4 générés sont capables d’être lus par la source MPEG-4 de Windows 7 et d’autres.</span><span class="sxs-lookup"><span data-stu-id="35041-226">The produced mp4 clips are play-able by Windows 7 MPEG-4 source and others.</span></span>

-   <span data-ttu-id="35041-227">SPS et PPS peuvent être extraits des exemples d’entrée du récepteur MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="35041-227">SPS and PPS can be extracted from input samples in MPEG-4 sink.</span></span>

    <span data-ttu-id="35041-228">Lorsque SPS et PPS ne sont pas définis via l' [ \_ \_ \_ \_ en-tête de séquence MPEG MF MT](mf-mt-mpeg-sequence-header-attribute.md) sur le type de média d’entrée du récepteur MPEG-4, le récepteur MPEG-4 tente d’extraire SPS et PPS des exemples d’entrée.</span><span class="sxs-lookup"><span data-stu-id="35041-228">When SPS and PPS are not set through [MF\_MT\_MPEG\_SEQUENCE\_HEADER](mf-mt-mpeg-sequence-header-attribute.md) on input media type of the MPEG-4 sink, MPEG-4 sink will try to extract SPS and PPS from input samples.</span></span> <span data-ttu-id="35041-229">Le récepteur MPEG-4 ignore les exemples d’entrée jusqu’à ce qu’il trouve les premiers SPS et PPS, car tous les exemples d’entrée sans SPS et PPS ne peuvent pas être décodés.</span><span class="sxs-lookup"><span data-stu-id="35041-229">MPEG-4 sink ignores any input samples until it finds the first SPS and PPS, because all input samples without SPS and PPS are not decode-able.</span></span>

-   <span data-ttu-id="35041-230">les informations 3D dans l’enregistrement de configuration AVC sont prises en charge pour MP4 non fragmenté.</span><span class="sxs-lookup"><span data-stu-id="35041-230">3D information in AVC configuration record is supported for non-fragmental MP4.</span></span>
-   <span data-ttu-id="35041-231">La longueur de NALU est exposée pour les exemples compressés H. 264 afin d’optimiser le décodage DXVA H. 264 VLD.</span><span class="sxs-lookup"><span data-stu-id="35041-231">NALU length is exposed for H.264 compressed samples to optimize H.264 VLD DXVA decoding.</span></span>

    <span data-ttu-id="35041-232">La source MPEG-4 définit la [ \_ longueur Nalu MF \_ \_ définie](mf-nalu-length-set.md) sur le type de média de sortie de **MFVideoFormat \_ H264 –** ou **MFVideoFormat \_ H264 –**.</span><span class="sxs-lookup"><span data-stu-id="35041-232">MPEG-4 source sets [MF\_NALU\_LENGTH\_SET](mf-nalu-length-set.md) on the output media type of **MFVideoFormat\_H264** or **MFVideoFormat\_h264**.</span></span> <span data-ttu-id="35041-233">Il définit l’objet BLOB [des \_ \_ \_ informations de longueur Nalu MF](mf-nalu-length-information.md) sur chaque échantillon de sortie, avec une longueur de Nalu de 4 octets pour différents Nalu dans un échantillon compressé.</span><span class="sxs-lookup"><span data-stu-id="35041-233">It sets the blob of [MF\_NALU\_LENGTH\_INFORMATION](mf-nalu-length-information.md) on each output sample, with four-byte NALU length for different NALU’s in one compressed sample.</span></span>

-   <span data-ttu-id="35041-234">Ajout de la prise en charge de l’audio MPEG2 ADTS dans la source MP4.</span><span class="sxs-lookup"><span data-stu-id="35041-234">Support added for MPEG2 ADTS audio in MP4 source.</span></span>

## <a name="requirements"></a><span data-ttu-id="35041-235">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="35041-235">Requirements</span></span>



| <span data-ttu-id="35041-236">Condition requise</span><span class="sxs-lookup"><span data-stu-id="35041-236">Requirement</span></span> | <span data-ttu-id="35041-237">Valeur</span><span class="sxs-lookup"><span data-stu-id="35041-237">Value</span></span> |
|-------------------------------------|---------------------------------------------------------|
| <span data-ttu-id="35041-238">Client minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="35041-238">Minimum supported client</span></span><br/> | <span data-ttu-id="35041-239">Applications de \[ Bureau Windows 7 uniquement\]</span><span class="sxs-lookup"><span data-stu-id="35041-239">Windows 7 \[desktop apps only\]</span></span><br/>              |
| <span data-ttu-id="35041-240">Serveur minimal pris en charge</span><span class="sxs-lookup"><span data-stu-id="35041-240">Minimum supported server</span></span><br/> | <span data-ttu-id="35041-241">Applications de bureau Windows Server 2008 R2 \[ uniquement\]</span><span class="sxs-lookup"><span data-stu-id="35041-241">Windows Server 2008 R2 \[desktop apps only\]</span></span><br/> |



## <a name="see-also"></a><span data-ttu-id="35041-242">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="35041-242">See also</span></span>

<dl> <dt>

[<span data-ttu-id="35041-243">Sources et récepteurs multimédias</span><span class="sxs-lookup"><span data-stu-id="35041-243">Media Sources and Sinks</span></span>](media-sources-and-sinks.md)
</dt> <dt>

[<span data-ttu-id="35041-244">Récepteurs de médias</span><span class="sxs-lookup"><span data-stu-id="35041-244">Media Sinks</span></span>](media-sinks.md)
</dt> <dt>

[<span data-ttu-id="35041-245">Prise en charge MPEG-4 dans Media Foundation</span><span class="sxs-lookup"><span data-stu-id="35041-245">MPEG-4 Support in Media Foundation</span></span>](mpeg-4-support-in-media-foundation.md)
</dt> <dt>

[<span data-ttu-id="35041-246">Formats multimédias pris en charge dans Media Foundation</span><span class="sxs-lookup"><span data-stu-id="35041-246">Supported Media Formats in Media Foundation</span></span>](supported-media-formats-in-media-foundation.md)
</dt> </dl>

 

 
