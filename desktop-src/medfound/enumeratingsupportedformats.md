---
description: Configuration du codec DMOs
ms.assetid: 431b33f1-ceb0-4f1b-a9f2-72e88b63f973
title: Configuration du codec DMOs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 564c0e6c566d9f583a495238f3ea6f0716d7adde
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104484081"
---
# <a name="configuring-codec-dmos"></a><span data-ttu-id="4ce5b-103">Configuration du codec DMOs</span><span class="sxs-lookup"><span data-stu-id="4ce5b-103">Configuring Codec DMOs</span></span>

<span data-ttu-id="4ce5b-104">Cette rubrique décrit le processus de configuration du codec DMOs.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-104">This topic describes the process of configuring the codec DMOs.</span></span> <span data-ttu-id="4ce5b-105">Chaque codec a des procédures spécifiques, mais les informations communes à toutes sont décrites ici.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-105">Each codec has specific procedures, but the information common to all is described here.</span></span>

## <a name="configuring-dmo-inputs-and-outputs"></a><span data-ttu-id="4ce5b-106">Configuration des entrées et des sorties DMO</span><span class="sxs-lookup"><span data-stu-id="4ce5b-106">Configuring DMO Inputs and Outputs</span></span>

<span data-ttu-id="4ce5b-107">Chaque DMO prend en charge des types d’entrée et de sortie spécifiques.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-107">Every DMO supports specific input and output types.</span></span> <span data-ttu-id="4ce5b-108">Vous pouvez récupérer les types pris en charge pour les entrées et les sorties en appelant [**IMediaObject :: GetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) pour les entrées et [**IMediaObject :: GetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype) pour les sorties.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-108">You can retrieve supported types for inputs and outputs by calling [**IMediaObject::GetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) for inputs and [**IMediaObject::GetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype) for outputs.</span></span> <span data-ttu-id="4ce5b-109">Vous pouvez énumérer les formats pris en charge en effectuant des appels répétés à l’une ou l’autre des méthodes, en incrémentant l’index de type avec chaque appel.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-109">You can enumerate the supported formats by making repeated calls to either method, incrementing the type index with each call.</span></span> <span data-ttu-id="4ce5b-110">Lorsque l’index dépasse celui du type final pris en charge, l’appel retourne DMO E plus d' \_ \_ \_ \_ éléments.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-110">When the index exceeds that of the final supported type, the call returns DMO\_E\_NO\_MORE\_ITEMS.</span></span>

<span data-ttu-id="4ce5b-111">Pour les codecs vidéo, un seul type de sortie ou type d’entrée est énuméré pour un sous-type de média donné.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-111">For the video codecs, only one output type or input type is enumerated for a given media subtype.</span></span> <span data-ttu-id="4ce5b-112">Pour les codecs audio, chaque type pris en charge est énuméré.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-112">For the audio codecs, each individual supported type is enumerated.</span></span> <span data-ttu-id="4ce5b-113">Pour plus d’informations sur les types pris en charge pour les codecs individuels, consultez Utilisation de l' [audio](workingwithaudio.md) et [utilisation de la vidéo](workingwithvideo.md).</span><span class="sxs-lookup"><span data-stu-id="4ce5b-113">For more information about supported types for individual codecs, see [Working with Audio](workingwithaudio.md) and [Working with Video](workingwithvideo.md).</span></span>

<span data-ttu-id="4ce5b-114">Après avoir configuré les types de médias pour les flux d’entrée et de sortie, définissez-les en appelant [**IMediaObject :: SetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) et [**IMediaObject :: SetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype) respectivement.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-114">After you configure the media types for the input and output streams, set them by calling [**IMediaObject::SetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) and [**IMediaObject::SetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype) respectively.</span></span> <span data-ttu-id="4ce5b-115">Ces deux méthodes retournent le **\_ type E DMO \_ \_ non \_ accepté** si le type spécifié n’est pas valide.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-115">Both of these methods return **DMO\_E\_TYPE\_NOT\_ACCEPTED** if the specified type is invalid.</span></span>

## <a name="configuring-the-codec-dmos-for-encoding"></a><span data-ttu-id="4ce5b-116">Configuration du codec DMOs pour l’encodage</span><span class="sxs-lookup"><span data-stu-id="4ce5b-116">Configuring the Codec DMOs for Encoding</span></span>

<span data-ttu-id="4ce5b-117">Tous les codecs vidéo et Windows Media Audio prennent en charge un large éventail de fonctionnalités d’encodage.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-117">All of the Windows Media Audio and Video codecs support a variety of encoding features.</span></span> <span data-ttu-id="4ce5b-118">Ces fonctionnalités sont généralement configurées en définissant des propriétés sur DMO à l’aide des méthodes de l’interface **IPropertyBag** .</span><span class="sxs-lookup"><span data-stu-id="4ce5b-118">These features are generally configured by setting properties on the DMO by using the methods of the **IPropertyBag** interface.</span></span> <span data-ttu-id="4ce5b-119">Certaines propriétés sont configurées à l’aide d’interfaces de codec spécialisées.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-119">Some properties are configured using specialized codec interfaces.</span></span> <span data-ttu-id="4ce5b-120">Ces interfaces sont répertoriées pour chaque codec dans la section [objets codec](codecobjects.md).</span><span class="sxs-lookup"><span data-stu-id="4ce5b-120">These interfaces are listed for each codec in the section [Codec Objects](codecobjects.md).</span></span>

<span data-ttu-id="4ce5b-121">L’ordre général des opérations de configuration d’un encodage DMO est le suivant :</span><span class="sxs-lookup"><span data-stu-id="4ce5b-121">The general order of operations for configuring an encoding DMO is as follows:</span></span>

1.  <span data-ttu-id="4ce5b-122">Configurez les fonctionnalités du codec comme vous le souhaitez à l’aide des méthodes de **IPropertyBag**.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-122">Configure codec features as desired by using the methods of **IPropertyBag**.</span></span>
2.  <span data-ttu-id="4ce5b-123">Utilisez les interfaces du codec DMO pour configurer des fonctionnalités supplémentaires, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-123">Use the codec DMO interfaces to configure additional features, if needed.</span></span>
3.  <span data-ttu-id="4ce5b-124">Configurez les types d’entrée et de sortie.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-124">Configure the input and output types.</span></span> <span data-ttu-id="4ce5b-125">L’ordre dans lequel les types doivent être configurés varie en fonction des codecs individuels.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-125">The order in which the types should be configured varies for individual codecs.</span></span> <span data-ttu-id="4ce5b-126">Pour plus d’informations, consultez [utilisation de l’audio](workingwithaudio.md) et [utilisation de la vidéo](workingwithvideo.md).</span><span class="sxs-lookup"><span data-stu-id="4ce5b-126">For more information, see [Working with Audio](workingwithaudio.md) and [Working with Video](workingwithvideo.md).</span></span>

## <a name="configuring-the-codec-dmos-for-decoding"></a><span data-ttu-id="4ce5b-127">Configuration du codec DMOs pour le décodage</span><span class="sxs-lookup"><span data-stu-id="4ce5b-127">Configuring the Codec DMOs for Decoding</span></span>

<span data-ttu-id="4ce5b-128">Le décodage est plus simple que l’encodage, car un nombre inférieur de fonctionnalités de décodeur est pris en charge.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-128">Decoding is simpler than encoding, as fewer decoder features are supported.</span></span>

<span data-ttu-id="4ce5b-129">L’ordre général des opérations de configuration d’un décodage DMO est le suivant :</span><span class="sxs-lookup"><span data-stu-id="4ce5b-129">The general order of operations for configuring a decoding DMO is as follows:</span></span>

1.  <span data-ttu-id="4ce5b-130">Configurez les fonctionnalités du décodeur comme vous le souhaitez à l’aide des méthodes de **IPropertyBag**.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-130">Configure decoder features as desired by using the methods of **IPropertyBag**.</span></span>
2.  <span data-ttu-id="4ce5b-131">Définissez le type d’entrée sur le type utilisé pour la sortie de l’encodeur.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-131">Set the input type to the type used for the encoder output.</span></span>
3.  <span data-ttu-id="4ce5b-132">Configurez le type de sortie.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-132">Configure the output type.</span></span> <span data-ttu-id="4ce5b-133">Les types de sortie pris en charge sont différents pour les différentes entrées.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-133">The supported output types are different for different inputs.</span></span>

> [!Note]  
> <span data-ttu-id="4ce5b-134">Il est important d’utiliser le même type de média pour l’entrée du décodeur que celui utilisé pour la sortie de l’encodeur.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-134">It is important to use the same media type for the decoder input as was used for the encoder output.</span></span> <span data-ttu-id="4ce5b-135">Cela est dû au fait que les codecs Windows Media Audio et vidéo utilisent des formats multimédias avec des données supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-135">This is because the Windows Media Audio and Video codecs use media formats with extra data.</span></span> <span data-ttu-id="4ce5b-136">Ces données sont ajoutées à la structure vers laquelle pointe le membre **pbFormat** de la structure [**de \_ \_ type de média DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) (généralement [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) ou [**WAVEFORMATEX**](/previous-versions/dd757713(v=vs.85))).</span><span class="sxs-lookup"><span data-stu-id="4ce5b-136">This data is appended to the structure pointed to by the **pbFormat** member of the [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure (usually [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) or [**WAVEFORMATEX**](/previous-versions/dd757713(v=vs.85))).</span></span> <span data-ttu-id="4ce5b-137">Pour certains types, les données supplémentaires font partie du type de sortie de l’encodeur énuméré.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-137">For some types the extra data is part of the enumerated encoder output type.</span></span> <span data-ttu-id="4ce5b-138">D’autres types nécessitent que vous ajoutiez ces données manuellement.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-138">Other types require you to append this data manually.</span></span> <span data-ttu-id="4ce5b-139">Sans les données de format étendu, vous ne pouvez pas décoder le contenu compressé.</span><span class="sxs-lookup"><span data-stu-id="4ce5b-139">Without the extended format data, you cannot decode the compressed content.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="4ce5b-140">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="4ce5b-140">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4ce5b-141">Utilisation du codec DMOs</span><span class="sxs-lookup"><span data-stu-id="4ce5b-141">Working with Codec DMOs</span></span>](workingwithcodecdmos.md)
</dt> </dl>

 

 
