---
description: Décrit comment ajouter des extensions d’unité de données lors de l’utilisation d’encodeurs Windows Media.
ms.assetid: fdadcb85-c564-4d05-a4d7-af53a0107455
title: Utilisation des extensions d’unités de données (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21c16053ee078f5adcd48767f53d9e6e1c0eeb02
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106524090"
---
# <a name="using-data-unit-extensions-microsoft-media-foundation"></a><span data-ttu-id="50c08-103">Utilisation des extensions d’unités de données (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="50c08-103">Using Data Unit Extensions (Microsoft Media Foundation)</span></span>

<span data-ttu-id="50c08-104">Les codecs vidéo et Windows Media Audio sont conçus pour fonctionner correctement avec le conteneur ASF (Advanced Systems Format).</span><span class="sxs-lookup"><span data-stu-id="50c08-104">The Windows Media Audio and Video codecs are designed to work well with the Advanced Systems Format (ASF) container.</span></span> <span data-ttu-id="50c08-105">ASF est le format structuré utilisé pour les fichiers Windows Media Audio (WMA) et les fichiers Windows Media Video (WMV).</span><span class="sxs-lookup"><span data-stu-id="50c08-105">ASF is the structured format used for Windows Media Audio (WMA) files and Windows Media Video (WMV) files.</span></span> <span data-ttu-id="50c08-106">Il s’agit d’un format extensible conçu pour la diffusion de données en continu.</span><span class="sxs-lookup"><span data-stu-id="50c08-106">It is an extensible format designed for streaming data.</span></span> <span data-ttu-id="50c08-107">L’une des caractéristiques inhabituelles de la structure ASF est la possibilité d’associer des métadonnées à des exemples individuels et d’incorporer ces données avec les exemples dans le flux de bits.</span><span class="sxs-lookup"><span data-stu-id="50c08-107">One of the unusual characteristics of the ASF structure is the ability to attach metadata to individual samples, and to embed that data with the samples in the bit stream.</span></span> <span data-ttu-id="50c08-108">Un élément de métadonnées stocké de cette façon est appelé *extension d’unité* de données, ou *exemple d’extension*.</span><span class="sxs-lookup"><span data-stu-id="50c08-108">An item of metadata stored in this way is called a data *unit extension*, or *sample extension*.</span></span>

<span data-ttu-id="50c08-109">Une extension d’unité de données peut contenir des informations requises par l’encodeur, le décodeur ou l’application de lecteur.</span><span class="sxs-lookup"><span data-stu-id="50c08-109">A data unit extension can contain information that is required by the encoder, the decoder, or the player application.</span></span> <span data-ttu-id="50c08-110">La plupart des types d’extension de données qui sont implémentés dans la série de codecs Windows Media 9 contiennent des données destinées à l’application qui décode et restitue le média.</span><span class="sxs-lookup"><span data-stu-id="50c08-110">Most of the data-unit-extension types that are implemented in the Windows Media 9 Series of codecs contain data intended for the application that decodes and renders the media.</span></span> <span data-ttu-id="50c08-111">Par exemple, vous pouvez gérer les codes temporels SMPTE à partir des données sources en les ajoutant en tant qu’extensions d’unité de données.</span><span class="sxs-lookup"><span data-stu-id="50c08-111">For example, you can maintain SMPTE time codes from source data by adding them as data unit extensions.</span></span> <span data-ttu-id="50c08-112">Toutefois, les fonctionnalités de codec suivantes requièrent des extensions d’unité de données :</span><span class="sxs-lookup"><span data-stu-id="50c08-112">However, the following codec features require data unit extensions:</span></span>

-   [<span data-ttu-id="50c08-113">Insertion d’une image clé forcée</span><span class="sxs-lookup"><span data-stu-id="50c08-113">Forced Key Frame Insertion</span></span>](forcedkeyframeinsertion.md)
-   [<span data-ttu-id="50c08-114">Encodage vidéo entrelacé</span><span class="sxs-lookup"><span data-stu-id="50c08-114">Interlaced Video Encoding</span></span>](interlacedvideoencoding.md)
-   <span data-ttu-id="50c08-115">La difficulté à utiliser les extensions d’unité de données lors de l’accès direct au codec est le mécanisme par lequel l’objet reçoit les données d’extension.</span><span class="sxs-lookup"><span data-stu-id="50c08-115">The difficulty in using data unit extensions when accessing the codec directly is the mechanism by which the object receives the extension data.</span></span> <span data-ttu-id="50c08-116">Pour ce faire, les objets du kit de développement logiciel (SDK) de format Windows Media utilisent des objets de mémoire tampon conçus pour prendre en charge cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="50c08-116">This is achieved by the objects of the Windows Media Format SDK by using buffer objects designed to support this feature.</span></span> <span data-ttu-id="50c08-117">Il est recommandé d’utiliser le kit de développement logiciel (SDK) de format Windows Media pour activer les fonctionnalités de codec qui requièrent des extensions d’unité de données, mais vous pouvez rendre ces fonctionnalités compatibles avec les objets de codec autonomes.</span><span class="sxs-lookup"><span data-stu-id="50c08-117">It is recommended that you use the Windows Media Format SDK to activate the codec features that require data unit extensions, but you can make these features work with the standalone codec objects.</span></span>

## <a name="passing-extended-samples-to-the-codec-objects"></a><span data-ttu-id="50c08-118">Passage d’exemples étendus aux objets codec</span><span class="sxs-lookup"><span data-stu-id="50c08-118">Passing Extended Samples to the Codec Objects</span></span>

<span data-ttu-id="50c08-119">Le kit de développement logiciel (SDK) Windows Media Format utilise des objets buffer qui exposent des interfaces [**INSSBuffer**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) .</span><span class="sxs-lookup"><span data-stu-id="50c08-119">The Windows Media Format SDK uses buffer objects that expose [**INSSBuffer**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) interfaces.</span></span> <span data-ttu-id="50c08-120">La dernière interface est [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4).</span><span class="sxs-lookup"><span data-stu-id="50c08-120">The latest interface is [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4).</span></span> <span data-ttu-id="50c08-121">Pour passer des exemples à un objet codec avec des extensions d’unité de données, vous devez utiliser un objet buffer qui implémente l’interface [**IMediaBuffer**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) ou [**IMFMediaBuffer**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) et l’interface **INSSBuffer** .</span><span class="sxs-lookup"><span data-stu-id="50c08-121">To pass samples to a codec object with data unit extensions, you must use a buffer object that implements the [**IMediaBuffer**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) or [**IMFMediaBuffer**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) interface and the **INSSBuffer** interface.</span></span> <span data-ttu-id="50c08-122">Vous pouvez utiliser des objets de mémoire tampon créés par le kit de développement logiciel (SDK) Windows Media format ou Microsoft Media Foundation pour y parvenir, ou vous pouvez créer votre propre classe de mémoire tampon qui répond aux exigences.</span><span class="sxs-lookup"><span data-stu-id="50c08-122">You can use buffer objects created by the Windows Media Format SDK or Microsoft Media Foundation to accomplish this, or you can make your own buffer class that meets the requirements.</span></span> <span data-ttu-id="50c08-123">Pour créer votre propre classe de mémoire tampon, vous devez vous conformer aux prototypes de méthode pour les interfaces **INSSBuffer** .</span><span class="sxs-lookup"><span data-stu-id="50c08-123">To create your own buffer class, you must conform to the method prototypes for the **INSSBuffer** interfaces.</span></span> <span data-ttu-id="50c08-124">Ces définitions d’interface se trouvent dans le fichier d’en-tête wmsbuffer. h qui est installé avec le kit de développement logiciel (SDK) du format Windows Media.</span><span class="sxs-lookup"><span data-stu-id="50c08-124">These interface definitions can be found in the wmsbuffer.h header file that is installed with the Windows Media Format SDK.</span></span>

## <a name="related-topics"></a><span data-ttu-id="50c08-125">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="50c08-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="50c08-126">Codecs Windows Media</span><span class="sxs-lookup"><span data-stu-id="50c08-126">Windows Media Codecs</span></span>](windows-media-codecs.md)
</dt> </dl>

 

 
