---
description: Les récepteurs de médias sont les objets de pipeline qui reçoivent des données multimédias.
ms.assetid: a0fbce1b-0a16-4449-9eca-906fd9056a1c
title: Récepteurs de médias
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9394cbfd49a631d59b9296202a2b6ca7a868869
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/03/2021
ms.locfileid: "104321474"
---
# <a name="media-sinks"></a><span data-ttu-id="0e7cf-103">Récepteurs de médias</span><span class="sxs-lookup"><span data-stu-id="0e7cf-103">Media Sinks</span></span>

<span data-ttu-id="0e7cf-104">Les *récepteurs de médias* sont les objets de pipeline qui reçoivent des données multimédias.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-104">*Media sinks* are the pipeline objects that receive media data.</span></span> <span data-ttu-id="0e7cf-105">Un récepteur multimédia est la destination d’un ou plusieurs flux multimédias.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-105">A media sink is the destination for one or more media streams.</span></span> <span data-ttu-id="0e7cf-106">Les récepteurs de médias se répartissent en deux catégories générales :</span><span class="sxs-lookup"><span data-stu-id="0e7cf-106">Media sinks fall into two general categories:</span></span>

-   <span data-ttu-id="0e7cf-107">Un *convertisseur* est un récepteur multimédia qui présente des données pour la lecture.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-107">A *renderer* is a media sink that presents data for playback.</span></span> <span data-ttu-id="0e7cf-108">Le convertisseur vidéo amélioré (EVR) affiche des images vidéo et le convertisseur audio lit les flux audio par le biais de la carte son ou d’un autre périphérique audio.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-108">The enhanced video renderer (EVR) displays video frames, and the audio renderer plays audio streams through the sound card or other audio device.</span></span>

-   <span data-ttu-id="0e7cf-109">Un *récepteur d’archives* est un récepteur multimédia qui écrit des données dans un fichier ou un autre stockage.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-109">An *archive sink* is a media sink that writes data to a file or other storage.</span></span>

<span data-ttu-id="0e7cf-110">La principale différence réside dans le fait qu’un récepteur d’archive ne consomme pas les données à un taux de lecture fixe.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-110">The main difference between them is that an archive sink does not consume the data at a fixed playback rate.</span></span> <span data-ttu-id="0e7cf-111">Au lieu de cela, il écrit les données qu’il reçoit le plus rapidement possible.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-111">Instead, it writes the data that it receives as quickly as possible.</span></span>

<span data-ttu-id="0e7cf-112">Les récepteurs multimédias exposent l’interface [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-112">Media sinks expose the [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) interface.</span></span> <span data-ttu-id="0e7cf-113">Chaque récepteur multimédia contient un ou plusieurs *récepteurs de flux*.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-113">Each media sink contains one or more *stream sinks*.</span></span> <span data-ttu-id="0e7cf-114">Chaque récepteur de flux reçoit les données d’un flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-114">Each stream sink receives the data from one stream.</span></span> <span data-ttu-id="0e7cf-115">Les récepteurs de flux exposent l’interface [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-115">Stream sinks expose the [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface.</span></span> <span data-ttu-id="0e7cf-116">En général, une application ne crée pas directement des récepteurs multimédias.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-116">Typically an application does not create media sinks directly.</span></span> <span data-ttu-id="0e7cf-117">Au lieu de cela, l’application crée un ou plusieurs objets d’activation, que la session multimédia utilise pour créer le récepteur.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-117">Instead, the application creates one or more activation objects, which the Media Session uses to create the sink.</span></span> <span data-ttu-id="0e7cf-118">Toutes les autres opérations sur le récepteur sont gérées par la session multimédia, et l’application n’appelle aucune méthode sur le récepteur multimédia ou l’un des récepteurs de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-118">All other operations on the sink are handled by the Media Session, and the application does not call any methods on the media sink or any of the stream sinks.</span></span> <span data-ttu-id="0e7cf-119">Pour plus d’informations sur les objets d’activation, consultez [objets d’activation](activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-119">For more information about activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="0e7cf-120">Vous devez lire le reste de cette rubrique si vous écrivez un récepteur multimédia personnalisé ou si vous souhaitez utiliser un récepteur multimédia directement sans la session multimédia.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-120">You should read the remainder of this topic if you are writing a custom media sink, or if you want to use a media sink directly without the Media Session.</span></span>

-   [<span data-ttu-id="0e7cf-121">Récepteurs de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-121">Stream Sinks</span></span>](#stream-sinks)
-   [<span data-ttu-id="0e7cf-122">Horloge de présentation</span><span class="sxs-lookup"><span data-stu-id="0e7cf-122">Presentation Clock</span></span>](#presentation-clock)
-   [<span data-ttu-id="0e7cf-123">Formats de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-123">Stream Formats</span></span>](#stream-formats)
-   [<span data-ttu-id="0e7cf-124">Flux de données</span><span class="sxs-lookup"><span data-stu-id="0e7cf-124">Data Flow</span></span>](#data-flow)
-   [<span data-ttu-id="0e7cf-125">Marqueurs</span><span class="sxs-lookup"><span data-stu-id="0e7cf-125">Markers</span></span>](#markers)
-   [<span data-ttu-id="0e7cf-126">Modifications d’État</span><span class="sxs-lookup"><span data-stu-id="0e7cf-126">State Changes</span></span>](#state-changes)
-   [<span data-ttu-id="0e7cf-127">En cours de finalisation</span><span class="sxs-lookup"><span data-stu-id="0e7cf-127">Finalizing</span></span>](#finalizing)
-   [<span data-ttu-id="0e7cf-128">Arrêt en cours</span><span class="sxs-lookup"><span data-stu-id="0e7cf-128">Shutting Down</span></span>](#shutting-down)
-   [<span data-ttu-id="0e7cf-129">Interfaces du récepteur multimédia</span><span class="sxs-lookup"><span data-stu-id="0e7cf-129">Media Sink Interfaces</span></span>](#media-sink-interfaces)
-   [<span data-ttu-id="0e7cf-130">Interfaces du récepteur de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-130">Stream Sink Interfaces</span></span>](#stream-sink-interfaces)
-   [<span data-ttu-id="0e7cf-131">Événements du récepteur de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-131">Stream Sink Events</span></span>](#stream-sink-events)
-   [<span data-ttu-id="0e7cf-132">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0e7cf-132">Related topics</span></span>](#related-topics)

## <a name="stream-sinks"></a><span data-ttu-id="0e7cf-133">Récepteurs de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-133">Stream Sinks</span></span>

<span data-ttu-id="0e7cf-134">Un récepteur multimédia peut avoir un nombre fixe de récepteurs de flux, ou il peut prendre en charge l’ajout et la suppression de récepteurs de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-134">A media sink can have a fixed number of stream sinks, or it can support adding and removing stream sinks.</span></span> <span data-ttu-id="0e7cf-135">S’il a un nombre fixe de récepteurs de flux, la méthode [**IMFMediaSink :: GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) retourne l' \_ indicateur de \_ flux fixe MEDIASINK.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-135">If it has a fixed number of stream sinks, the [**IMFMediaSink::GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_FIXED\_STREAMS flag.</span></span> <span data-ttu-id="0e7cf-136">Dans le cas contraire, vous pouvez ajouter et supprimer des récepteurs de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-136">Otherwise, you can add and remove stream sinks.</span></span> <span data-ttu-id="0e7cf-137">Pour ajouter un nouveau récepteur de flux, appelez [**IMFMediaSink :: AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-137">To add a new stream sink, call [**IMFMediaSink::AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span></span> <span data-ttu-id="0e7cf-138">Pour supprimer un récepteur de flux, appelez [**IMFMediaSink :: RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-138">To remove a stream sink, call [**IMFMediaSink::RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span></span> <span data-ttu-id="0e7cf-139">L' \_ indicateur MEDIASINK \_ Streams Fixed indique que le récepteur multimédia ne prend pas en charge ces deux méthodes.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-139">The MEDIASINK\_FIXED\_STREAMS flag indicates that the media sink does not support these two methods.</span></span> <span data-ttu-id="0e7cf-140">(Cela peut prendre en charge une autre façon de configurer le nombre de flux, par exemple en définissant des paramètres d’initialisation lors de la création du récepteur.) La liste des récepteurs de flux est triée.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-140">(It might support some other way to configure the number of streams, for example by setting initialization parameters when the sink is created.) The list of stream sinks is ordered.</span></span> <span data-ttu-id="0e7cf-141">Pour les énumérer par valeur d’index, appelez la méthode [**IMFMediaSink :: GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-141">To enumerate them by index value, call the [**IMFMediaSink::GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) method.</span></span>

<span data-ttu-id="0e7cf-142">Les récepteurs de flux ont également des identificateurs.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-142">Stream sinks also have identifiers.</span></span> <span data-ttu-id="0e7cf-143">Les identificateurs de flux sont uniques dans le récepteur multimédia, mais n’ont pas besoin d’être consécutifs.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-143">Stream identifiers are unique within the media sink, but do not have to be consecutive.</span></span> <span data-ttu-id="0e7cf-144">En fonction du récepteur multimédia, les identificateurs de flux peuvent avoir une signification liée au contenu.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-144">Depending on the media sink, the stream identifiers might have some meaning that is related to the content.</span></span> <span data-ttu-id="0e7cf-145">Par exemple, un récepteur d’archive peut écrire les identificateurs de flux dans l’en-tête de fichier.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-145">For example, an archive sink might write the stream identifiers into the file header.</span></span> <span data-ttu-id="0e7cf-146">Dans le cas contraire, ils sont arbitraires.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-146">Otherwise, they are arbitrary.</span></span> <span data-ttu-id="0e7cf-147">Pour obtenir un récepteur de flux par son identificateur, appelez [**IMFMediaSink :: GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-147">To get a stream sink by its identifier, call [**IMFMediaSink::GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span></span>

## <a name="presentation-clock"></a><span data-ttu-id="0e7cf-148">Horloge de présentation</span><span class="sxs-lookup"><span data-stu-id="0e7cf-148">Presentation Clock</span></span>

<span data-ttu-id="0e7cf-149">La vitesse à laquelle un récepteur multimédia consomme des échantillons est contrôlée par l' [horloge de présentation](presentation-clock.md).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-149">The rate at which a media sink consumes samples is controlled by the [Presentation Clock](presentation-clock.md).</span></span> <span data-ttu-id="0e7cf-150">La session multimédia sélectionne l’horloge de la présentation et la définit sur le récepteur multimédia en appelant la méthode [**IMFMediaSink :: SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) du récepteur multimédia.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-150">The Media Session selects the presentation clock and sets it on the media sink by calling the media sink's [**IMFMediaSink::SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) method.</span></span> <span data-ttu-id="0e7cf-151">L’horloge de la présentation doit être définie sur le récepteur multimédia avant que la diffusion en continu puisse commencer.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-151">The presentation clock must be set on the media sink before streaming can begin.</span></span> <span data-ttu-id="0e7cf-152">Chaque récepteur multimédia nécessite une horloge de présentation pour s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-152">Every media sink requires a presentation clock to run.</span></span> <span data-ttu-id="0e7cf-153">Le récepteur multimédia utilise l’horloge de présentation pour deux raisons :</span><span class="sxs-lookup"><span data-stu-id="0e7cf-153">The media sink uses the presentation clock for two purposes:</span></span>

-   <span data-ttu-id="0e7cf-154">Pour recevoir des notifications au démarrage ou à l’arrêt de la diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-154">To receive notifications when streaming starts or stops.</span></span> <span data-ttu-id="0e7cf-155">Le récepteur multimédia reçoit ces notifications par le biais de l’interface [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) , que tous les récepteurs multimédias doivent implémenter.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-155">The media sink receives these notifications through the [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface, which all media sinks must implement.</span></span>

-   <span data-ttu-id="0e7cf-156">Pour déterminer quand il doit restituer des exemples.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-156">To determine when it should render samples.</span></span> <span data-ttu-id="0e7cf-157">Lorsque le récepteur multimédia reçoit un nouvel exemple, il obtient l’horodatage de l’échantillon et tente d’afficher l’échantillon à l’heure de la présentation.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-157">When the media sink receives a new sample, it gets the time stamp from the sample and tries to render the sample at that presentation time.</span></span>

<span data-ttu-id="0e7cf-158">L’horloge de présentation dérive les temps d’horloge d’un autre objet appelé *source de temps de présentation*.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-158">The presentation clock derives its clock times from another object called the *presentation time source*.</span></span> <span data-ttu-id="0e7cf-159">Les sources de temps de présentation exposent l’interface [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-159">Presentation time sources expose the [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="0e7cf-160">Certains récepteurs multimédias ont accès à une horloge précise, de sorte qu’ils exposent cette interface.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-160">Some media sinks have access to an accurate clock, so they expose this interface.</span></span> <span data-ttu-id="0e7cf-161">Cela signifie qu’un récepteur multimédia peut planifier des échantillons par rapport à une heure fournie par sa propre horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-161">This means that a media sink might schedule samples against a time provided by its own clock.</span></span> <span data-ttu-id="0e7cf-162">Toutefois, le récepteur multimédia ne peut pas supposer que c’est le cas.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-162">However, the media sink cannot assume this to be the case.</span></span> <span data-ttu-id="0e7cf-163">Elle doit toujours utiliser l’heure de l’horloge de présentation, que l’horloge de la présentation soit pilotée par le récepteur multimédia lui-même ou par une autre horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-163">It must always use the time from the presentation clock, regardless of whether the presentation clock is driven by the media sink itself, or by some other clock.</span></span>

<span data-ttu-id="0e7cf-164">Si un récepteur multimédia ne peut pas faire correspondre les vitesses avec une horloge autre que son propre, la méthode [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) retourne le MEDIASINK \_ ne peut pas \_ correspondre à l' \_ indicateur d’horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-164">If a media sink cannot match rates with a clock other than its own, the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CANNOT\_MATCH\_CLOCK flag.</span></span> <span data-ttu-id="0e7cf-165">Si cet indicateur est présent et que l’horloge de présentation utilise une autre source de durée de présentation, le récepteur multimédia risque de mal fonctionner.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-165">If this flag is present and the presentation clock uses a different presentation time source, the media sink is likely to perform poorly.</span></span> <span data-ttu-id="0e7cf-166">Par exemple, il peut être en cours de lecture.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-166">For example, it might glitch during playback.</span></span>

<span data-ttu-id="0e7cf-167">Un récepteur de *débit* est un récepteur multimédia qui ignore les horodatages sur les échantillons et consomme des données dès que chaque exemple arrive.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-167">A *rateless* sink is a media sink that ignores the time stamps on samples and consumes data as soon as each sample arrives.</span></span> <span data-ttu-id="0e7cf-168">Un récepteur de médias sans débit retourne l' \_ indicateur de débit MEDIASINK de la méthode [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-168">A rateless media sink returns the MEDIASINK\_RATELESS flag from the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method.</span></span> <span data-ttu-id="0e7cf-169">En général, cet indicateur s’applique aux récepteurs d’archive.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-169">Typically this flag applies to archive sinks.</span></span> <span data-ttu-id="0e7cf-170">Si chaque récepteur multimédia du pipeline est sans débit, la session multimédia utilise une horloge de présentation spéciale sans frais.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-170">If every media sink in the pipeline is rateless, the Media Session uses a special rateless presentation clock.</span></span> <span data-ttu-id="0e7cf-171">Cette horloge s’exécute aussi rapidement que les récepteurs consomment des échantillons.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-171">This clock runs as quickly as the sinks consume samples.</span></span>

## <a name="stream-formats"></a><span data-ttu-id="0e7cf-172">Formats de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-172">Stream Formats</span></span>

<span data-ttu-id="0e7cf-173">Pour que le récepteur multimédia puisse recevoir des exemples, le client doit définir le type de média sur les récepteurs de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-173">Before the media sink can receive samples, the client must set the media type on the stream sinks.</span></span> <span data-ttu-id="0e7cf-174">Pour définir le type de média, appelez la méthode [**IMFStreamSink :: GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) du récepteur de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-174">To set the media type, call the stream sink's [**IMFStreamSink::GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) method.</span></span> <span data-ttu-id="0e7cf-175">Cette méthode retourne un pointeur vers l’interface [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-175">This method returns a pointer to the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface.</span></span> <span data-ttu-id="0e7cf-176">Utilisez cette interface pour récupérer la liste des types de média préférés, récupérer le type de média actuel et définir le type de média.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-176">Use this interface to get the list of preferred media types, get the current media type, and set the media type.</span></span>

<span data-ttu-id="0e7cf-177">Pour afficher la liste des types de média préférés, appelez [**IMFMediaTypeHandler :: GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-177">To get the list of preferred media types, call [**IMFMediaTypeHandler::GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span></span> <span data-ttu-id="0e7cf-178">Les types préférés doivent être considérés comme un indicateur pour le client.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-178">The preferred types should be taken as a hint to the client.</span></span> <span data-ttu-id="0e7cf-179">La liste peut être incomplète ou inclure des types de média partiels.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-179">The list might be incomplete or include partial media types.</span></span> <span data-ttu-id="0e7cf-180">Un type de média partiel est un type qui n’a pas tous les attributs nécessaires pour décrire un format valide.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-180">A partial media type is one that does not have all of the attributes needed to describe a valid format.</span></span> <span data-ttu-id="0e7cf-181">Par exemple, un type de vidéo partiel peut spécifier l’espace de couleurs et la profondeur de bits, mais pas la largeur ou la hauteur de l’image.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-181">For example, a partial video type might specify the color space and bit depth but not the image width or height.</span></span> <span data-ttu-id="0e7cf-182">Un type audio partiel peut spécifier le format de compression et le taux d’échantillonnage, mais pas le nombre de canaux audio.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-182">A partial audio type might specify the compression format and the sample rate but not the number of audio channels.</span></span>

<span data-ttu-id="0e7cf-183">Pour récupérer le type de média actuel du récepteur de flux, appelez [**IMFMediaTypeHandler :: GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-183">To get the stream sink's current media type, call [**IMFMediaTypeHandler::GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span></span> <span data-ttu-id="0e7cf-184">Lorsqu’un récepteur de flux est créé, il peut avoir un type de média par défaut déjà défini, ou il n’a peut-être pas de type de média tant que le client n’en a pas défini un.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-184">When a stream sink is first created, it might have a default media type already set, or it might have no media type until the client sets one.</span></span>

<span data-ttu-id="0e7cf-185">Pour définir le type de média, appelez [**IMFMediaTypeHandler :: SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-185">To set the media type, call [**IMFMediaTypeHandler::SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span></span> <span data-ttu-id="0e7cf-186">Certains récepteurs de flux peuvent ne pas prendre en charge la modification du type après que a été défini.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-186">Some stream sinks might not support changing the type after is has been set.</span></span> <span data-ttu-id="0e7cf-187">Par conséquent, il est utile de tester les types de médias avant de les définir.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-187">Therefore, it useful to test media types before setting them.</span></span> <span data-ttu-id="0e7cf-188">Pour vérifier si le récepteur multimédia accepte un type de média (sans définir le type), appelez [**IMFMediaTypeHandler :: IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-188">To test whether the media sink will accept a media type, (without setting the type), call [**IMFMediaTypeHandler::IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span></span>

## <a name="data-flow"></a><span data-ttu-id="0e7cf-189">Data Flow</span><span class="sxs-lookup"><span data-stu-id="0e7cf-189">Data Flow</span></span>

<span data-ttu-id="0e7cf-190">Les récepteurs de médias utilisent un *modèle d’extraction*, ce qui signifie que le flux reçoit les données de demande en fonction de leurs besoins.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-190">Media sinks use a *pull model*, which means that the stream sinks request data as they need it.</span></span> <span data-ttu-id="0e7cf-191">Le client doit répondre en temps opportun pour éviter tout problème.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-191">The client should respond in a timely manner to avoid any glitching.</span></span>

<span data-ttu-id="0e7cf-192">Certains récepteurs multimédias prennent en charge la *prérestauration*.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-192">Some media sinks support *prerolling*.</span></span> <span data-ttu-id="0e7cf-193">La prérestauration est le processus qui consiste à fournir des données au récepteur multimédia avant le démarrage de l’horloge de présentation.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-193">Prerolling is the process of giving data to the media sink before the presentation clock starts.</span></span> <span data-ttu-id="0e7cf-194">Si un récepteur multimédia prend en charge la prérestauration, le récepteur multimédia expose l’interface [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) et la méthode [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) retourne l' \_ \_ indicateur de préroll MEDIASINK.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-194">If a media sink supports prerolling, the media sink exposes the [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) interface, and the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CAN\_PREROLL flag.</span></span> <span data-ttu-id="0e7cf-195">Le prérollment garantit que le récepteur multimédia est prêt à présenter le premier exemple au démarrage de l’horloge de présentation.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-195">Prerolling ensures that the media sink is ready to present the first sample when the presentation clock starts.</span></span> <span data-ttu-id="0e7cf-196">Il est recommandé que le client soit toujours préroll si le récepteur multimédia le prend en charge, car il peut empêcher des problèmes ou des failles pendant la lecture.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-196">It is recommended that the client always preroll if the media sink supports it, because it can prevent glitching or gaps during playback.</span></span>

<span data-ttu-id="0e7cf-197">Le déplacement de données vers un récepteur multimédia fonctionne comme suit :</span><span class="sxs-lookup"><span data-stu-id="0e7cf-197">Data flow to a media sink works as follows:</span></span>

1.  <span data-ttu-id="0e7cf-198">Le client définit les types de médias et l’horloge de présentation.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-198">The client sets the media types and the presentation clock.</span></span> <span data-ttu-id="0e7cf-199">Le récepteur multimédia s’inscrit lui-même avec l’horloge de présentation pour recevoir des notifications sur les modifications de l’état de l’horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-199">The media sink registers itself with the presentation clock to receive notifications about clock state changes.</span></span>
2.  <span data-ttu-id="0e7cf-200">Le cas échéant, le client interroge [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-200">Optionally, the client queries for [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span></span> <span data-ttu-id="0e7cf-201">Si le récepteur multimédia expose cette interface, le client appelle [**IMFMediaSinkPreroll :: NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-201">If the media sink exposes this interface, the client calls [**IMFMediaSinkPreroll::NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span></span> <span data-ttu-id="0e7cf-202">Dans le cas contraire, le client passe à l’étape 5.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-202">Otherwise, the client skips to step 5.</span></span>
3.  <span data-ttu-id="0e7cf-203">Chaque récepteur de flux envoie un ou plusieurs événements [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-203">Each stream sink sends one or more [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="0e7cf-204">En réponse à chacun de ces événements, le client obtient l’exemple suivant de données pour ce flux et appelle [**IMFStreamSink ::P rocesssample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-204">In response to each of these events, the client gets the next sample of data for that stream and calls [**IMFStreamSink::ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span>
4.  <span data-ttu-id="0e7cf-205">Lorsque chaque récepteur de flux reçoit suffisamment de données de préroll, il envoie un événement [MEStreamSinkPrerolled](mestreamsinkprerolled.md) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-205">When each stream sink receives enough preroll data, it sends an [MEStreamSinkPrerolled](mestreamsinkprerolled.md) event.</span></span>
5.  <span data-ttu-id="0e7cf-206">Le client appelle [**IMFPresentationClock :: Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) pour démarrer l’horloge de la présentation.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-206">The client calls [**IMFPresentationClock::Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) to start the presentation clock.</span></span>
6.  <span data-ttu-id="0e7cf-207">L’horloge de présentation informe le récepteur multimédia que l’horloge démarre, en appelant [**IMFClockStateSink :: OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-207">The presentation clock notifies the media sink that the clock is starting, by calling [**IMFClockStateSink::OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>
7.  <span data-ttu-id="0e7cf-208">Pour obtenir plus de données, chaque récepteur de flux envoie des événements [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-208">To get more data, each stream sink sends [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="0e7cf-209">En réponse à chacun de ces événements, le client obtient l’exemple suivant et appelle [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-209">In response to each of these events, the client gets the next sample and calls [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span> <span data-ttu-id="0e7cf-210">Cette étape est répétée jusqu’à la fin de la présentation.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-210">This step is repeated until the presentation ends.</span></span>

<span data-ttu-id="0e7cf-211">La plupart des récepteurs de média traitent les exemples de manière asynchrone, de sorte que les récepteurs de flux peuvent envoyer plusieurs exemples de demandes à la fois.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-211">Most media sinks process samples asynchronously, so the stream sinks can send out more than one sample request at a time.</span></span>

<span data-ttu-id="0e7cf-212">Pendant la diffusion en continu, le client peut appeler [**IMFStreamSink ::P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) et [**IMFStreamSink :: Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) à tout moment.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-212">During streaming, the client can call [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) and [**IMFStreamSink::Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) at any time.</span></span> <span data-ttu-id="0e7cf-213">Les marqueurs sont décrits dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-213">Markers are described in the next section.</span></span> <span data-ttu-id="0e7cf-214">Le vidage provoque la suppression, par le récepteur de flux, des exemples qu’il a mis en file d’attente mais pas encore rendus.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-214">Flushing causes the stream sink to drop any samples that it has queued but not rendered yet.</span></span>

## <a name="markers"></a><span data-ttu-id="0e7cf-215">Marqueurs</span><span class="sxs-lookup"><span data-stu-id="0e7cf-215">Markers</span></span>

<span data-ttu-id="0e7cf-216">Les marqueurs permettent au client d’indiquer des points spécifiques dans le flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-216">Markers provide a way for the client to indicate specific points in the stream.</span></span> <span data-ttu-id="0e7cf-217">Un marqueur se compose des informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="0e7cf-217">A marker consists of the following information:</span></span>

-   <span data-ttu-id="0e7cf-218">Type de marqueur, défini en tant que membre de l’énumération du [**\_ \_ type de marqueur MFSTREAMSINK**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-218">The marker type, defined as a member of the [**MFSTREAMSINK\_MARKER\_TYPE**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) enumeration.</span></span>
-   <span data-ttu-id="0e7cf-219">Données associées au marqueur.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-219">Data associated with the marker.</span></span> <span data-ttu-id="0e7cf-220">La signification des données dépend du type de marqueur.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-220">The meaning of the data depends on the marker type.</span></span> <span data-ttu-id="0e7cf-221">Certains types de marqueur n’ont pas de données.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-221">Some marker types do not have data.</span></span>
-   <span data-ttu-id="0e7cf-222">Données facultatives pour l’utilisation du client.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-222">Optional data for the client's own use.</span></span>

<span data-ttu-id="0e7cf-223">Pour placer un marqueur, le client appelle [**IMFStreamSink ::P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-223">To place a marker, the client calls [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span></span> <span data-ttu-id="0e7cf-224">Le récepteur de flux termine le traitement des échantillons qu’il a reçus avant l’appel **PlaceMarker** , puis envoie un événement [MEStreamSinkMarker](mestreamsinkmarker.md) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-224">The stream sink finishes processing any samples that it received before the **PlaceMarker** call, and then sends an [MEStreamSinkMarker](mestreamsinkmarker.md) event.</span></span>

<span data-ttu-id="0e7cf-225">La plupart des récepteurs de média conservent une file d’attente d’exemples en attente, qu’ils traitent de façon asynchrone.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-225">Most media sinks keep a queue of pending samples, which they process asynchronously.</span></span> <span data-ttu-id="0e7cf-226">Les événements de marqueur doivent être sérialisés avec le traitement de l’échantillon, afin que le récepteur multimédia doive placer les marqueurs dans la même file d’attente.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-226">Marker events must be serialized with sample processing, so the media sink should place the markers in the same queue.</span></span> <span data-ttu-id="0e7cf-227">Par exemple, supposons que le client effectue les appels de méthode suivants :</span><span class="sxs-lookup"><span data-stu-id="0e7cf-227">For example, suppose the client makes the following method calls:</span></span>

1.  <span data-ttu-id="0e7cf-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (exemple \# 1)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#1)</span></span>
2.  <span data-ttu-id="0e7cf-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (exemple \# 2)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#2)</span></span>
3.  <span data-ttu-id="0e7cf-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (marqueur \# 1)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#1)</span></span>
4.  <span data-ttu-id="0e7cf-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (exemple \# 3)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#3)</span></span>
5.  <span data-ttu-id="0e7cf-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (marqueur \# 2)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#2)</span></span>

<span data-ttu-id="0e7cf-233">Dans cet exemple, le récepteur de flux doit envoyer l’événement [MEStreamSinkMarker](mestreamsinkmarker.md) pour le marqueur \# 1 après le traitement de l’exemple \# 2, et l’événement pour le marqueur \# 2 après le traitement de l’exemple \# 3.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-233">In this example, the stream sink must send the [MEStreamSinkMarker](mestreamsinkmarker.md) event for marker \#1 after it processes sample \#2, and the event for marker \#2 after it processes sample \#3.</span></span>

<span data-ttu-id="0e7cf-234">Si le client vide un récepteur de flux, le récepteur de flux traite immédiatement tous les marqueurs qui se trouvaient dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-234">If the client flushes a stream sink, the stream sink immediately processes any markers that were in the queue.</span></span> <span data-ttu-id="0e7cf-235">Il définit le code d’État sur E \_ Abort sur ces événements.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-235">It sets the status code to E\_ABORT on these events.</span></span>

<span data-ttu-id="0e7cf-236">Certains marqueurs contiennent des informations qui s’appliquent au récepteur multimédia :</span><span class="sxs-lookup"><span data-stu-id="0e7cf-236">Some markers contain information that is relevant to the media sink:</span></span>

-   <span data-ttu-id="0e7cf-237">**MFSTREAMSINK \_ \_Graduation du marqueur**: indique qu’il y a un intervalle dans le flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-237">**MFSTREAMSINK\_MARKER\_TICK**: Indicates there is a gap in the stream.</span></span> <span data-ttu-id="0e7cf-238">L’exemple suivant est une discontinuité.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-238">The next sample will be a discontinuity.</span></span>
-   <span data-ttu-id="0e7cf-239">**MFSTREAMSINK \_ MARKER \_ ENDOFSEGMENT**: indique la fin d’un segment ou la fin d’un flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-239">**MFSTREAMSINK\_MARKER\_ENDOFSEGMENT**: Indicates the end of a segment or the end of a stream.</span></span> <span data-ttu-id="0e7cf-240">L’exemple suivant (le cas échéant) peut être une discontinuité.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-240">The next sample (if any) might be a discontinuity.</span></span>
-   <span data-ttu-id="0e7cf-241">**MFSTREAMSINK \_ \_Événement marqueur**: contient un événement.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-241">**MFSTREAMSINK\_MARKER\_EVENT**: Contains an event.</span></span> <span data-ttu-id="0e7cf-242">En fonction du type d’événement et de l’implémentation du récepteur multimédia, le récepteur multimédia peut gérer l’événement ou l’ignorer.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-242">Depending on the event type and the implementation of the media sink, the media sink might handle the event or ignore it.</span></span>

## <a name="state-changes"></a><span data-ttu-id="0e7cf-243">Changements d'état</span><span class="sxs-lookup"><span data-stu-id="0e7cf-243">State Changes</span></span>

<span data-ttu-id="0e7cf-244">Un récepteur multimédia est informé des changements d’État dans l’horloge de la présentation via l’interface [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) du récepteur multimédia.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-244">A media sink is notified of state changes in the presentation clock through the media sink's [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface.</span></span> <span data-ttu-id="0e7cf-245">Lorsque le client définit l’horloge de présentation, le récepteur multimédia appelle [**IMFPresentationClock :: AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) pour s’inscrire pour les notifications à partir de l’horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-245">When the client sets the presentation clock, the media sink calls [**IMFPresentationClock::AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) to register itself for notifications from the clock.</span></span> <span data-ttu-id="0e7cf-246">Le tableau suivant résume la façon dont un récepteur multimédia se comporte en réponse aux modifications de l’état de l’horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-246">The following table summarizes how a media sink behaves in response to clock state changes.</span></span>



| <span data-ttu-id="0e7cf-247">Changement d’état de l’horloge</span><span class="sxs-lookup"><span data-stu-id="0e7cf-247">Clock state change</span></span>                                         | <span data-ttu-id="0e7cf-248">Traitement de l’échantillon</span><span class="sxs-lookup"><span data-stu-id="0e7cf-248">Sample processing</span></span>                                                                                                                                                                                                                                             | <span data-ttu-id="0e7cf-249">Traitement des marqueurs</span><span class="sxs-lookup"><span data-stu-id="0e7cf-249">Marker processing</span></span>                                                                                                                                                                                   |
|------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0e7cf-250">**OnClockStart**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-250">**OnClockStart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)     | <span data-ttu-id="0e7cf-251">Les exemples de processus dont l’horodatage est supérieur ou égal à l’heure de début de l’horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-251">Process samples whose time stamp is equal to or later than the clock start time.</span></span>                                                                                                                                                                              | <span data-ttu-id="0e7cf-252">Envoyez l’événement [MEStreamSinkMarker](mestreamsinkmarker.md) lorsque tous les exemples reçus avant que le marqueur ait été traité.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-252">Send the [MEStreamSinkMarker](mestreamsinkmarker.md) event when all of the samples received before the marker have been processed.</span></span>                                                                 |
| [<span data-ttu-id="0e7cf-253">**OnClockPause**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-253">**OnClockPause**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause)     | <span data-ttu-id="0e7cf-254">Le récepteur multimédia peut échouer [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) pendant la suspension.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-254">The media sink can fail [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) while paused.</span></span><br/> <span data-ttu-id="0e7cf-255">Si le récepteur multimédia accepte des exemples en pause, il doit les placer en file d’attente jusqu’au redémarrage de l’horloge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-255">If the media sink accepts samples while paused, it must queue them until the clock restarts.</span></span> <span data-ttu-id="0e7cf-256">Ne traitez aucun échantillon mis en file d’attente pendant la suspension.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-256">Do not process any queued samples while paused.</span></span><br/> | <span data-ttu-id="0e7cf-257">S’il existe des échantillons mis en file d’attente, placez les marqueurs dans la même file d’attente.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-257">If there are queued samples, put markers onto the same queue.</span></span> <span data-ttu-id="0e7cf-258">Envoyer l’événement de marqueur lorsque l’horloge redémarre.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-258">Send the marker event when the clock restarts.</span></span><br/> <span data-ttu-id="0e7cf-259">Sinon, envoyez immédiatement l’événement du marqueur.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-259">Otherwise, send the marker event immediately.</span></span><br/>                    |
| [<span data-ttu-id="0e7cf-260">**OnClockRestart**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-260">**OnClockRestart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart) | <span data-ttu-id="0e7cf-261">Traitez les exemples qui ont été mis en file d’attente pendant la suspension, puis traitez le même que [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-261">Process any samples that were queued while paused, and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>                                                                                                                         | <span data-ttu-id="0e7cf-262">Envoyer des événements [MEStreamSinkMarker](mestreamsinkmarker.md) pour les marqueurs en file d’attente (sérialisés avec traitement de l’échantillon), puis traiter le même que [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-262">Send [MEStreamSinkMarker](mestreamsinkmarker.md) events for queued markers (serialized with sample processing), and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span> |
| [<span data-ttu-id="0e7cf-263">**OnClockStop**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-263">**OnClockStop**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop)       | <span data-ttu-id="0e7cf-264">Supprimer tous les échantillons mis en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-264">Drop all queued samples.</span></span> <span data-ttu-id="0e7cf-265">D’autres appels à [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) peuvent échouer.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-265">Further calls to [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) can fail.</span></span>                                                                                                                                                      | <span data-ttu-id="0e7cf-266">Envoyer des événements de marqueur en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-266">Send queued marker events.</span></span> <span data-ttu-id="0e7cf-267">Lors des appels suivants à [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), envoyez immédiatement l’événement marqueur.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-267">On subsequent calls to [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), send the marker event immediately.</span></span>                                                              |



 

<span data-ttu-id="0e7cf-268">En outre, les récepteurs de flux doivent envoyer les événements suivants lorsqu’ils ont terminé les transitions d’État :</span><span class="sxs-lookup"><span data-stu-id="0e7cf-268">In addition, stream sinks must send the following events when they have completed the state transitions:</span></span>

-   <span data-ttu-id="0e7cf-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): [MEStreamSinkStarted](mestreamsinkstarted.md) , événement</span><span class="sxs-lookup"><span data-stu-id="0e7cf-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): [MEStreamSinkStarted](mestreamsinkstarted.md) event</span></span>
-   <span data-ttu-id="0e7cf-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): événement [MEStreamSinkPaused](mestreamsinkpaused.md)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): [MEStreamSinkPaused](mestreamsinkpaused.md) event</span></span>
-   <span data-ttu-id="0e7cf-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): événement [MEStreamSinkStopped](mestreamsinkstopped.md)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): [MEStreamSinkStopped](mestreamsinkstopped.md) event</span></span>

## <a name="finalizing"></a><span data-ttu-id="0e7cf-272">En cours de finalisation</span><span class="sxs-lookup"><span data-stu-id="0e7cf-272">Finalizing</span></span>

<span data-ttu-id="0e7cf-273">Certains récepteurs multimédia nécessitent une étape de traitement supplémentaire après la remise du dernier échantillon.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-273">Some media sinks require an extra processing step after the last sample is delivered.</span></span> <span data-ttu-id="0e7cf-274">En général, cette exigence s’applique aux récepteurs d’archive, qui doivent écrire des en-têtes ou des index dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-274">Typically this requirement applies to archive sinks, which must write headers or indexes into the file.</span></span> <span data-ttu-id="0e7cf-275">Si un récepteur multimédia requiert un traitement final, il expose l’interface [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-275">If a media sink requires any final processing, it exposes the [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) interface.</span></span>

<span data-ttu-id="0e7cf-276">Une fois que le client remet le dernier échantillon, le client interroge cette interface.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-276">After the client delivers the last sample, the client queries for this interface.</span></span> <span data-ttu-id="0e7cf-277">Si le récepteur multimédia prend en charge l’interface, le client appelle [**IMFFinalizableMediaSink :: BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) pour effectuer le traitement final de manière asynchrone.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-277">If the media sink supports the interface, the client calls [**IMFFinalizableMediaSink::BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) to perform the final processing asynchronously.</span></span> <span data-ttu-id="0e7cf-278">Cette méthode suit le modèle asynchrone Media Foundation standard, décrit dans [méthodes de rappel asynchrones](asynchronous-callback-methods.md).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-278">This method follows the standard Media Foundation asynchronous model, described in [Asynchronous Callback Methods](asynchronous-callback-methods.md).</span></span> <span data-ttu-id="0e7cf-279">Le récepteur multimédia peut supposer que le client appellera **BeginFinalize**.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-279">The media sink can assume that the client will call **BeginFinalize**.</span></span> <span data-ttu-id="0e7cf-280">L’échec de l’appel de **BeginFinalize** peut entraîner un fichier créé de manière incorrecte.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-280">Failure to call **BeginFinalize** can result in an incorrectly authored file.</span></span>

## <a name="shutting-down"></a><span data-ttu-id="0e7cf-281">Arrêt en cours</span><span class="sxs-lookup"><span data-stu-id="0e7cf-281">Shutting Down</span></span>

<span data-ttu-id="0e7cf-282">Lorsque le client a terminé à l’aide du récepteur multimédia, le client appelle [**IMFMediaSink :: Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-282">When the client is done using the media sink, the client calls [**IMFMediaSink::Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span></span> <span data-ttu-id="0e7cf-283">Au sein de cette méthode, le récepteur multimédia doit rompre les nombres de références circulaires.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-283">Inside this method, the media sink should break any circular reference counts.</span></span> <span data-ttu-id="0e7cf-284">En règle générale, il y aura des références circulaires entre le récepteur multimédia et les récepteurs de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-284">Typically, there will be circular references between the media sink and the stream sinks.</span></span>

<span data-ttu-id="0e7cf-285">Si vous utilisez l’objet d’assistance de la file d’attente d’événements pour implémenter [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), appelez [**IMFMediaEventQueue :: Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) dans la file d’attente d’événements.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-285">If you are using the event queue helper object to implement [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), call [**IMFMediaEventQueue::Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) on the event queue.</span></span> <span data-ttu-id="0e7cf-286">Cette méthode arrête la file d’attente des événements et signale à tout appelant qui attend un événement.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-286">This method shuts down the event queue and signals any caller that is currently waiting for an event.</span></span>

<span data-ttu-id="0e7cf-287">Après l’arrêt, toutes les méthodes sur le récepteur multimédia retournent l' \_ arrêt MF E \_ , à l’exception des méthodes **IUnknown** .</span><span class="sxs-lookup"><span data-stu-id="0e7cf-287">After shutdown, all methods on the media sink return MF\_E\_SHUTDOWN, with the exception of **IUnknown** methods.</span></span>

## <a name="media-sink-interfaces"></a><span data-ttu-id="0e7cf-288">Interfaces du récepteur multimédia</span><span class="sxs-lookup"><span data-stu-id="0e7cf-288">Media Sink Interfaces</span></span>

<span data-ttu-id="0e7cf-289">Le tableau suivant répertorie les interfaces standard que les récepteurs multimédias peuvent exposer via **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-289">The following table lists the standard interfaces that media sinks can expose through **QueryInterface**.</span></span> <span data-ttu-id="0e7cf-290">Les récepteurs multimédias peuvent également exposer des interfaces personnalisées.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-290">Media sinks can also expose custom interfaces.</span></span>



| <span data-ttu-id="0e7cf-291">Interface</span><span class="sxs-lookup"><span data-stu-id="0e7cf-291">Interface</span></span>                                                      | <span data-ttu-id="0e7cf-292">Description</span><span class="sxs-lookup"><span data-stu-id="0e7cf-292">Description</span></span>                                                                                   |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0e7cf-293">**IMFMediaSink**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-293">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)                           | <span data-ttu-id="0e7cf-294">Interface principale pour les récepteurs multimédias.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-294">The primary interface for media sinks.</span></span> <span data-ttu-id="0e7cf-295">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-295">(Required.)</span></span>                                            |
| [<span data-ttu-id="0e7cf-296">**IMFClockStateSink**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-296">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)                 | <span data-ttu-id="0e7cf-297">Utilisé pour notifier le récepteur multimédia lorsque l’horloge de présentation change d’État.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-297">Used to notify the media sink when presentation clock changes state.</span></span> <span data-ttu-id="0e7cf-298">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-298">(Required.)</span></span>              |
| [<span data-ttu-id="0e7cf-299">**IMFFinalizableMediaSink**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-299">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)     | <span data-ttu-id="0e7cf-300">Implémentez si le récepteur multimédia doit effectuer une dernière étape de traitement.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-300">Implement if the media sink must perform a final processing step.</span></span> <span data-ttu-id="0e7cf-301">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-301">(Optional.)</span></span>                 |
| [<span data-ttu-id="0e7cf-302">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-302">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                         | <span data-ttu-id="0e7cf-303">Implémentez si le récepteur multimédia expose des interfaces de service.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-303">Implement if the media sink exposes any service interfaces.</span></span> <span data-ttu-id="0e7cf-304">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-304">(Optional.)</span></span>                       |
| [<span data-ttu-id="0e7cf-305">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-305">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)       | <span data-ttu-id="0e7cf-306">Implémentez si le récepteur multimédia envoie des événements.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-306">Implement if the media sink sends any events.</span></span> <span data-ttu-id="0e7cf-307">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-307">(Optional.)</span></span>                                     |
| [<span data-ttu-id="0e7cf-308">**IMFMediaSinkPreroll**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-308">**IMFMediaSinkPreroll**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll)             | <span data-ttu-id="0e7cf-309">Implémentez si le récepteur multimédia prend en charge le préroll.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-309">Implement if the media sink supports preroll.</span></span> <span data-ttu-id="0e7cf-310">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-310">(Optional.)</span></span>                                     |
| [<span data-ttu-id="0e7cf-311">**IMFPresentationTimeSource**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-311">**IMFPresentationTimeSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) | <span data-ttu-id="0e7cf-312">Implémentez si le récepteur multimédia peut fournir une source de temps pour l’horloge de présentation.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-312">Implement if the media sink can provide a time source for the presentation clock.</span></span> <span data-ttu-id="0e7cf-313">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-313">(Optional.)</span></span> |
| [<span data-ttu-id="0e7cf-314">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-314">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                   | <span data-ttu-id="0e7cf-315">Implémentez si le récepteur multimédia peut ajuster la qualité de la lecture.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-315">Implement if the media sink can adjust playback quality.</span></span> <span data-ttu-id="0e7cf-316">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-316">(Optional.)</span></span>                          |



 

<span data-ttu-id="0e7cf-317">Éventuellement, un récepteur multimédia peut implémenter l’interface suivante en tant que service.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-317">Optionally, a media sink can implement the following interface as a service.</span></span>



| <span data-ttu-id="0e7cf-318">Interface de service</span><span class="sxs-lookup"><span data-stu-id="0e7cf-318">Service interface</span></span>                        | <span data-ttu-id="0e7cf-319">Description</span><span class="sxs-lookup"><span data-stu-id="0e7cf-319">Description</span></span>                                    |
|------------------------------------------|------------------------------------------------|
| [<span data-ttu-id="0e7cf-320">**IMFRateSupport**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-320">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) | <span data-ttu-id="0e7cf-321">Indique la plage des taux de lecture pris en charge.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-321">Reports the range of supported playback rates.</span></span> |



 

<span data-ttu-id="0e7cf-322">Pour plus d’informations sur les interfaces de service et les [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), consultez [interfaces de service](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="0e7cf-322">For more information about service interfaces and [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), see [Service Interfaces](service-interfaces.md).</span></span>

## <a name="stream-sink-interfaces"></a><span data-ttu-id="0e7cf-323">Interfaces du récepteur de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-323">Stream Sink Interfaces</span></span>

<span data-ttu-id="0e7cf-324">Les récepteurs de flux doivent exposer les interfaces suivantes via **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-324">Stream sinks must expose the following interfaces through **QueryInterface**.</span></span>



| <span data-ttu-id="0e7cf-325">Interface</span><span class="sxs-lookup"><span data-stu-id="0e7cf-325">Interface</span></span>                                                | <span data-ttu-id="0e7cf-326">Description</span><span class="sxs-lookup"><span data-stu-id="0e7cf-326">Description</span></span>                                                                                              |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0e7cf-327">**IMFStreamSink**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-327">**IMFStreamSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink)                   | <span data-ttu-id="0e7cf-328">Interface principale pour les récepteurs de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-328">The primary interface for stream sinks.</span></span> <span data-ttu-id="0e7cf-329">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-329">(Required.)</span></span>                                                      |
| [<span data-ttu-id="0e7cf-330">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="0e7cf-330">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="0e7cf-331">Met en file d’attente les événements.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-331">Queues events.</span></span> <span data-ttu-id="0e7cf-332">L’interface [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) hérite de cette interface.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-332">The [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface inherits this interface.</span></span> <span data-ttu-id="0e7cf-333">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-333">(Required.)</span></span> |



 

<span data-ttu-id="0e7cf-334">Aucune interface de service n’est actuellement définie pour les récepteurs de flux.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-334">Currently no service interfaces are defined for stream sinks.</span></span>

## <a name="stream-sink-events"></a><span data-ttu-id="0e7cf-335">Événements du récepteur de flux</span><span class="sxs-lookup"><span data-stu-id="0e7cf-335">Stream Sink Events</span></span>

<span data-ttu-id="0e7cf-336">Le tableau suivant répertorie les événements qui sont définis pour les récepteurs de flux génériques.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-336">The following table lists the events that are defined for generic stream sinks.</span></span> <span data-ttu-id="0e7cf-337">Les récepteurs de flux peuvent également envoyer des événements personnalisés qui ne sont pas répertoriés ici.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-337">Stream sinks can also send custom events not listed here.</span></span>



| <span data-ttu-id="0e7cf-338">Événement</span><span class="sxs-lookup"><span data-stu-id="0e7cf-338">Event</span></span>                                                                  | <span data-ttu-id="0e7cf-339">Description</span><span class="sxs-lookup"><span data-stu-id="0e7cf-339">Description</span></span>                                                  |
|------------------------------------------------------------------------|--------------------------------------------------------------|
| [<span data-ttu-id="0e7cf-340">MEStreamSinkFormatChanged</span><span class="sxs-lookup"><span data-stu-id="0e7cf-340">MEStreamSinkFormatChanged</span></span>](mestreamsinkformatchanged.md)             | <span data-ttu-id="0e7cf-341">Le type de média du récepteur de flux n’est plus valide.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-341">The stream sink's media type is no longer valid.</span></span> <span data-ttu-id="0e7cf-342">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-342">(Optional.)</span></span> |
| [<span data-ttu-id="0e7cf-343">MEStreamSinkMarker</span><span class="sxs-lookup"><span data-stu-id="0e7cf-343">MEStreamSinkMarker</span></span>](mestreamsinkmarker.md)                           | <span data-ttu-id="0e7cf-344">Un marqueur a été traité.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-344">A marker was processed.</span></span> <span data-ttu-id="0e7cf-345">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-345">(Required.)</span></span>                          |
| [<span data-ttu-id="0e7cf-346">MEStreamSinkPaused</span><span class="sxs-lookup"><span data-stu-id="0e7cf-346">MEStreamSinkPaused</span></span>](mestreamsinkpaused.md)                           | <span data-ttu-id="0e7cf-347">Le récepteur de flux est suspendu.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-347">The stream sink has paused.</span></span> <span data-ttu-id="0e7cf-348">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-348">(Required.)</span></span>                      |
| [<span data-ttu-id="0e7cf-349">MEStreamSinkPrerolled</span><span class="sxs-lookup"><span data-stu-id="0e7cf-349">MEStreamSinkPrerolled</span></span>](mestreamsinkprerolled.md)                     | <span data-ttu-id="0e7cf-350">Le préroll est terminé.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-350">Preroll is complete.</span></span> <span data-ttu-id="0e7cf-351">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-351">(Optional.)</span></span>                             |
| [<span data-ttu-id="0e7cf-352">MEStreamSinkRateChanged</span><span class="sxs-lookup"><span data-stu-id="0e7cf-352">MEStreamSinkRateChanged</span></span>](mestreamsinkratechanged.md)                 | <span data-ttu-id="0e7cf-353">Le récepteur de flux a changé de vitesse de lecture.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-353">The stream sink has changed playback rate.</span></span> <span data-ttu-id="0e7cf-354">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-354">(Optional.)</span></span>       |
| [<span data-ttu-id="0e7cf-355">MEStreamSinkRequestSample</span><span class="sxs-lookup"><span data-stu-id="0e7cf-355">MEStreamSinkRequestSample</span></span>](mestreamsinkrequestsample.md)             | <span data-ttu-id="0e7cf-356">Un nouvel exemple est demandé.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-356">A new sample is requested.</span></span> <span data-ttu-id="0e7cf-357">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-357">(Required.)</span></span>                       |
| [<span data-ttu-id="0e7cf-358">MEStreamSinkScrubSampleComplete</span><span class="sxs-lookup"><span data-stu-id="0e7cf-358">MEStreamSinkScrubSampleComplete</span></span>](mestreamsinkscrubsamplecomplete.md) | <span data-ttu-id="0e7cf-359">Une demande de nettoyage est terminée.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-359">A scrub request was completed.</span></span> <span data-ttu-id="0e7cf-360">(Facultatif.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-360">(Optional.)</span></span>                   |
| [<span data-ttu-id="0e7cf-361">MEStreamSinkStarted</span><span class="sxs-lookup"><span data-stu-id="0e7cf-361">MEStreamSinkStarted</span></span>](mestreamsinkstarted.md)                         | <span data-ttu-id="0e7cf-362">Le récepteur de flux a démarré.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-362">The stream sink has started.</span></span> <span data-ttu-id="0e7cf-363">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-363">(Required.)</span></span>                     |
| [<span data-ttu-id="0e7cf-364">MEStreamSinkStopped</span><span class="sxs-lookup"><span data-stu-id="0e7cf-364">MEStreamSinkStopped</span></span>](mestreamsinkstopped.md)                         | <span data-ttu-id="0e7cf-365">Le récepteur de flux s’est arrêté.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-365">The stream sink has stopped.</span></span> <span data-ttu-id="0e7cf-366">(Obligatoire.)</span><span class="sxs-lookup"><span data-stu-id="0e7cf-366">(Required.)</span></span>                     |



 

<span data-ttu-id="0e7cf-367">Actuellement, aucun événement à usage général n’est défini pour les récepteurs multimédias.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-367">Currently no general-purpose events are defined for media sinks.</span></span> <span data-ttu-id="0e7cf-368">Certains récepteurs multimédias peuvent envoyer des événements personnalisés.</span><span class="sxs-lookup"><span data-stu-id="0e7cf-368">Some media sinks might send custom events.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0e7cf-369">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0e7cf-369">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0e7cf-370">Pipeline Media Foundation</span><span class="sxs-lookup"><span data-stu-id="0e7cf-370">Media Foundation Pipeline</span></span>](media-foundation-pipeline.md)
</dt> <dt>

[<span data-ttu-id="0e7cf-371">Architecture Media Foundation</span><span class="sxs-lookup"><span data-stu-id="0e7cf-371">Media Foundation Architecture</span></span>](media-foundation-architecture.md)
</dt> </dl>

 

 




