---
description: Lors de la création d’un fichier ASF, l’objet ContentInfo doit connaître les caractéristiques du contenu multimédia afin que les différents objets d’en-tête soient renseignés avec les valeurs correctes.
ms.assetid: 30e3c10b-1310-4194-8b83-221dfe73b03c
title: Définition des propriétés dans l’objet ContentInfo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e386d5eb33dd1893b195a870425b2336ab9c316f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104114358"
---
# <a name="setting-properties-in-the-contentinfo-object"></a><span data-ttu-id="b943e-103">Définition des propriétés dans l’objet ContentInfo</span><span class="sxs-lookup"><span data-stu-id="b943e-103">Setting Properties in the ContentInfo Object</span></span>

<span data-ttu-id="b943e-104">Lors de la création d’un fichier ASF, l’objet ContentInfo doit connaître les caractéristiques du contenu multimédia afin que les différents objets d’en-tête soient renseignés avec les valeurs correctes.</span><span class="sxs-lookup"><span data-stu-id="b943e-104">While creating an ASF file, the ContentInfo object needs to know the characteristics of the media content so that the various header objects are populated with the correct values.</span></span>

-   [<span data-ttu-id="b943e-105">Paramètres relatifs au contenu dans l’objet ContentInfo</span><span class="sxs-lookup"><span data-stu-id="b943e-105">Content-Related Settings in the ContentInfo Object</span></span>](#content-related-settings-in-the-contentinfo-object)
-   [<span data-ttu-id="b943e-106">Configuration de l’objet ContentInfo avec les paramètres de l’encodeur</span><span class="sxs-lookup"><span data-stu-id="b943e-106">Configuring the ContentInfo Object with Encoder Settings</span></span>](#configuring-the-contentinfo-object-with-encoder-settings)
-   [<span data-ttu-id="b943e-107">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="b943e-107">Related topics</span></span>](#related-topics)

## <a name="content-related-settings-in-the-contentinfo-object"></a><span data-ttu-id="b943e-108">Paramètres relatifs au contenu dans l’objet ContentInfo</span><span class="sxs-lookup"><span data-stu-id="b943e-108">Content-Related Settings in the ContentInfo Object</span></span>

<span data-ttu-id="b943e-109">Les paramètres de configuration du contenu sont des paramètres de flux, qui sont contenus dans le profil et spécifient l’identificateur de flux, le type de média et les paramètres de compartiment avec fuite pour le récepteur multimédia.</span><span class="sxs-lookup"><span data-stu-id="b943e-109">Content configuration settings are stream settings, which are contained within the profile and specify the stream identifier, the media type, and the leaky bucket parameters for the media sink.</span></span> <span data-ttu-id="b943e-110">Une fois le profil défini sur l’objet ContentInfo en appelant [**IMFASFContentInfo :: SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile), ces valeurs sont reflétées dans l’objet d’en-tête ASF qui a été généré.</span><span class="sxs-lookup"><span data-stu-id="b943e-110">After the profile is set on the ContentInfo object by calling [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile), these values are reflected in the ASF Header Object that was generated.</span></span> <span data-ttu-id="b943e-111">Pour plus d’informations sur ces paramètres, consultez [création et configuration de flux ASF](creating-and-configuring-asf-streams.md).</span><span class="sxs-lookup"><span data-stu-id="b943e-111">For information about these settings, see [Creating and Configuring ASF Streams](creating-and-configuring-asf-streams.md).</span></span>

## <a name="configuring-the-contentinfo-object-with-encoder-settings"></a><span data-ttu-id="b943e-112">Configuration de l’objet ContentInfo avec les paramètres de l’encodeur</span><span class="sxs-lookup"><span data-stu-id="b943e-112">Configuring the ContentInfo Object with Encoder Settings</span></span>

<span data-ttu-id="b943e-113">Les données audio ou vidéo multimédia numériques sont complexes et occupent de grandes quantités de mémoire.</span><span class="sxs-lookup"><span data-stu-id="b943e-113">Digital media audio or video data is complex and takes up large amounts of memory.</span></span> <span data-ttu-id="b943e-114">Dans la plupart des cas, l’audio et la vidéo sont compressés à l’aide d’encodeurs avant d’être ajoutés à un fichier ASF.</span><span class="sxs-lookup"><span data-stu-id="b943e-114">Under most circumstances, both audio and video are compressed by using encoders before being added to an ASF file.</span></span> <span data-ttu-id="b943e-115">Dans Media Foundation, les encodeurs sont implémentés en tant que [Media Foundation transformations](media-foundation-transforms.md) (MFTS) avec une entrée et une sortie.</span><span class="sxs-lookup"><span data-stu-id="b943e-115">In Media Foundation, encoders are implemented as [Media Foundation Transforms](media-foundation-transforms.md) (MFTs) with one input and one output.</span></span> <span data-ttu-id="b943e-116">Vous devez sélectionner le type de média de sortie en fonction du type de média du flux d’entrée et du type d’encodage que vous choisissez pour compresser le flux.</span><span class="sxs-lookup"><span data-stu-id="b943e-116">You must select the output media type depending on the media type of the input stream and the encoding type you choose for compressing the stream.</span></span>

<span data-ttu-id="b943e-117">Avant la session d’encodage, l’encodeur doit être configuré en définissant les propriétés appropriées en fonction du type d’encodage.</span><span class="sxs-lookup"><span data-stu-id="b943e-117">Before the encoding session, the encoder must be configured by setting the relevant properties depending on the type of encoding.</span></span>

<span data-ttu-id="b943e-118">Après la configuration de l’encodeur, vous devez configurer l’objet ContentInfo avec les valeurs de l’encodeur, car le [multiplexeur ASF](asf-multiplexer.md) et le récepteur multimédia ASF, qui sont initialisés avec l’objet ContentInfo rempli, utilisent des paramètres tels que les valeurs de compartiments avec fuites pour générer des paquets de données ASF.</span><span class="sxs-lookup"><span data-stu-id="b943e-118">After configuring the encoder, you must configure the ContentInfo object with the encoder values because the [ASF Multiplexer](asf-multiplexer.md) and the ASF Media Sink, which are initialized with the populated ContentInfo object, use settings such as the leaky bucket values, to generate ASF data packets.</span></span> <span data-ttu-id="b943e-119">Les valeurs ne sont pas enregistrées dans l’objet d’en-tête ASF final.</span><span class="sxs-lookup"><span data-stu-id="b943e-119">The values are not saved in the final ASF Header Object.</span></span> <span data-ttu-id="b943e-120">Les paramètres d’encodage sont exposés en tant que propriétés.</span><span class="sxs-lookup"><span data-stu-id="b943e-120">The encoding settings are exposed as properties.</span></span> <span data-ttu-id="b943e-121">Pour configurer l’objet ContentInfo avec les propriétés de l’encodeur, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="b943e-121">To configure the ContentInfo object with the encoder properties, do the following:</span></span>

1.  <span data-ttu-id="b943e-122">Obtenir un pointeur vers la Banque de propriétés de l’encodeur en interrogeant directement l’encodeur (interface [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) ) pour l’interface **IPropertyStore** .</span><span class="sxs-lookup"><span data-stu-id="b943e-122">Get a pointer to the encoder's property store by querying the encoder ([**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface) directly for the **IPropertyStore** interface.</span></span>
2.  <span data-ttu-id="b943e-123">Appelez [**IMFASFContentInfo :: GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span><span class="sxs-lookup"><span data-stu-id="b943e-123">Call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span></span> <span data-ttu-id="b943e-124">Pour définir des propriétés spécifiques au flux, spécifiez l’identificateur de flux dans le paramètre *wStreamNumber* ; pour les propriétés au niveau du fichier, passer 0.</span><span class="sxs-lookup"><span data-stu-id="b943e-124">To set stream-specific properties, specify the stream identifier in the *wStreamNumber* parameter; for file-level properties, pass 0.</span></span> <span data-ttu-id="b943e-125">Le paramètre *ppIStore* reçoit un pointeur vers l’interface **IPropertyStore** .</span><span class="sxs-lookup"><span data-stu-id="b943e-125">The *ppIStore* parameter receives a pointer to the **IPropertyStore** interface.</span></span> <span data-ttu-id="b943e-126">La Banque de propriétés reçue est vide.</span><span class="sxs-lookup"><span data-stu-id="b943e-126">The received property store is empty.</span></span>
3.  <span data-ttu-id="b943e-127">Appelez **IPropertyStore :: GetValue** sur l’encodeur et récupérez la valeur de la propriété en spécifiant les constantes de clé de propriété.</span><span class="sxs-lookup"><span data-stu-id="b943e-127">Call **IPropertyStore::GetValue** on the encoder and get the property value by specifying the property key constants.</span></span> <span data-ttu-id="b943e-128">Pour obtenir la liste complète des propriétés d’encodage, consultez la [référence de programmation de codec](/previous-versions//aa384554(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="b943e-128">For a complete list of encoding properties, see the [Codec Programming Reference](/previous-versions//aa384554(v=vs.85)).</span></span>
4.  <span data-ttu-id="b943e-129">Appelez **IPropertyStore :: SetValue** sur l’objet ContentInfo pour définir la propriété Required dans la Banque de propriétés.</span><span class="sxs-lookup"><span data-stu-id="b943e-129">Call **IPropertyStore::SetValue** on the ContentInfo object to set the required property in the property store.</span></span>
5.  <span data-ttu-id="b943e-130">Répétez les étapes 3 et 4 pour chaque propriété que vous souhaitez définir.</span><span class="sxs-lookup"><span data-stu-id="b943e-130">Repeat steps 3 and 4 for each property that you want to set.</span></span>

<span data-ttu-id="b943e-131">Le récepteur de média ASF peut être créé à l’aide d’un objet d’activation en appelant [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span><span class="sxs-lookup"><span data-stu-id="b943e-131">The ASF media sink can be created by using an activation object by calling [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span></span> <span data-ttu-id="b943e-132">Le nouvel objet récepteur multimédia est configuré en fonction des paramètres spécifiques au récepteur multimédia qui peuvent être définis dans la Banque de propriétés de l’objet ContentInfo.</span><span class="sxs-lookup"><span data-stu-id="b943e-132">The new media sink object is configured based on media sink-specific settings that can be set in the ContentInfo object's property store.</span></span> <span data-ttu-id="b943e-133">Le tableau suivant répertorie les constantes de propriété de récepteur de média ASF.</span><span class="sxs-lookup"><span data-stu-id="b943e-133">The following table shows the ASF media sink property constants.</span></span>



| <span data-ttu-id="b943e-134">Propriété</span><span class="sxs-lookup"><span data-stu-id="b943e-134">Property</span></span>                                                                                                     | <span data-ttu-id="b943e-135">Description</span><span class="sxs-lookup"><span data-stu-id="b943e-135">Description</span></span>                                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b943e-136">**MFPKEY \_ ASFMEDIASINK \_ base \_ SENDTIME**</span><span class="sxs-lookup"><span data-stu-id="b943e-136">**MFPKEY\_ASFMEDIASINK\_BASE\_SENDTIME**</span></span>](mfpkey-asfmediasink-base-sendtime-property.md)                   | <span data-ttu-id="b943e-137">L’heure d’envoi indique quand la charge utile dans le compartiment avec fuite est libérée.</span><span class="sxs-lookup"><span data-stu-id="b943e-137">The send time indicates when the payload inside the leaky bucket will be released.</span></span> <span data-ttu-id="b943e-138">Cette valeur de propriété indique la première heure d’envoi.</span><span class="sxs-lookup"><span data-stu-id="b943e-138">This property value indicates the first send time.</span></span> <span data-ttu-id="b943e-139">Le multiplexeur utilise cette valeur pour calculer les temps d’envoi suivants pour les paquets générés et s’assure que les flux de données transitent régulièrement via le compartiment avec fuite.</span><span class="sxs-lookup"><span data-stu-id="b943e-139">The multiplexer uses this value to calculate the subsequent send times for the generated packets and ensures that data flows steadily through the leaky bucket.</span></span> |
| [<span data-ttu-id="b943e-140">**MFPKEY \_ ASFMEDIASINK \_ ajuster la \_ vitesse de transmission**</span><span class="sxs-lookup"><span data-stu-id="b943e-140">**MFPKEY\_ASFMEDIASINK\_AUTOADJUST\_BITRATE**</span></span>](mfpkey-asfmediasink-autoadjust-bitrate-property.md)         | <span data-ttu-id="b943e-141">Cette valeur **bool** indique si le multiplexeur doit ajuster la vitesse de transmission automatiquement pour s’assurer que les données ne dépassent pas le compartiment avec fuite.</span><span class="sxs-lookup"><span data-stu-id="b943e-141">This **BOOL** value indicates whether the multiplexer needs to adjust the bit rate automatically to ensure that data does not overflow the leaky bucket.</span></span>                                                                                                                                              |
| [<span data-ttu-id="b943e-142">**MFPKEY \_ ASFMEDIASINK \_ DRMACTION**</span><span class="sxs-lookup"><span data-stu-id="b943e-142">**MFPKEY\_ASFMEDIASINK\_DRMACTION**</span></span>](mfpkey-asfmediasink-drmaction-property.md)                            | <span data-ttu-id="b943e-143">Cela indique l’action DRM de récepteur multimédia ASF pour la génération de fichier.</span><span class="sxs-lookup"><span data-stu-id="b943e-143">This indicates the ASF media sink DRM action for file generation.</span></span> <span data-ttu-id="b943e-144">Dans cette version, seul le transcodage DRM est pris en charge.</span><span class="sxs-lookup"><span data-stu-id="b943e-144">In this release, only DRM transcode is supported.</span></span>                                                                                                                                                                                   |
| [<span data-ttu-id="b943e-145">**MFPKEY \_ ASFSTREAMSINK \_ corrigé \_ LEAKYBUCKET**</span><span class="sxs-lookup"><span data-stu-id="b943e-145">**MFPKEY\_ASFSTREAMSINK\_CORRECTED\_LEAKYBUCKET**</span></span>](mfpkey-asfstreamsink-corrected-leakybucket-property.md) | <span data-ttu-id="b943e-146">Cette propriété doit être définie lorsque l’encodeur détermine la fenêtre de mémoire tampon et la vitesse de transmission à utiliser.</span><span class="sxs-lookup"><span data-stu-id="b943e-146">This property must be set when the encoder decides which buffer window and bit rate to use.</span></span> <span data-ttu-id="b943e-147">Pour définir ces valeurs, utilisez l’interface [**IWMCodecLeakyBucket**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) .</span><span class="sxs-lookup"><span data-stu-id="b943e-147">To set these values, use the [**IWMCodecLeakyBucket**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) interface.</span></span> <span data-ttu-id="b943e-148">Cette valeur doit être définie pour chaque flux du fichier ASF.</span><span class="sxs-lookup"><span data-stu-id="b943e-148">This must be set for each stream in the ASF file.</span></span>                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="b943e-149">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="b943e-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b943e-150">Écriture d’un objet d’en-tête ASF pour un nouveau fichier</span><span class="sxs-lookup"><span data-stu-id="b943e-150">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 
