---
description: Mélangeurs personnalisés
ms.assetid: a0af318d-9ac2-43f9-8934-f28c472256a6
title: Mélangeurs personnalisés
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ac7e56c578a7081de7c71ae3abaf9fc45d085827
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106519241"
---
# <a name="custom-mixers"></a><span data-ttu-id="879e2-103">Mélangeurs personnalisés</span><span class="sxs-lookup"><span data-stu-id="879e2-103">Custom Mixers</span></span>

<span data-ttu-id="879e2-104">Cette rubrique explique comment écrire un mélangeur personnalisé pour le convertisseur vidéo amélioré (EVR).</span><span class="sxs-lookup"><span data-stu-id="879e2-104">This topic describes how to write a custom mixer for the enhanced video renderer (EVR).</span></span> <span data-ttu-id="879e2-105">Vous pouvez utiliser un mélangeur personnalisé avec le Media Foundation récepteur de média EVR ou le filtre EVR DirectShow.</span><span class="sxs-lookup"><span data-stu-id="879e2-105">You can use a custom mixer with either the Media Foundation EVR media sink, or the DirectShow EVR filter.</span></span> <span data-ttu-id="879e2-106">Pour plus d’informations sur les mélangeurs et les présentateurs, consultez [amélioration du rendu vidéo](enhanced-video-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="879e2-106">For more information about mixers and presenters, see [Enhanced Video Renderer](enhanced-video-renderer.md).</span></span>

<span data-ttu-id="879e2-107">Le mélangeur est une transformation de Media Foundation (MFT) avec une ou plusieurs entrées (le flux de référence et les sous-flux) et une sortie.</span><span class="sxs-lookup"><span data-stu-id="879e2-107">The mixer is a Media Foundation transform (MFT) with one or more inputs (the reference stream plus the substreams) and one output.</span></span> <span data-ttu-id="879e2-108">Le flux d’entrée reçoit des exemples de en amont.</span><span class="sxs-lookup"><span data-stu-id="879e2-108">The input stream receives samples from upstream.</span></span> <span data-ttu-id="879e2-109">Le flux de sortie remet des exemples au présentateur.</span><span class="sxs-lookup"><span data-stu-id="879e2-109">The output stream delivers samples to the presenter.</span></span> <span data-ttu-id="879e2-110">Le EVR est chargé d’appeler [**IMFTransform ::P rocessinput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) sur le mélangeur, et le présenteur est chargé d’appeler [**IMFTransform ::P rocessoutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput).</span><span class="sxs-lookup"><span data-stu-id="879e2-110">The EVR is responsible for calling [**IMFTransform::ProcessInput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) on the mixer, and the presenter is responsible for calling [**IMFTransform::ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput).</span></span>

<span data-ttu-id="879e2-111">Au minimum, un mélangeur EVR doit implémenter les interfaces suivantes :</span><span class="sxs-lookup"><span data-stu-id="879e2-111">At a minimum, an EVR mixer must implement the following interfaces:</span></span>



| <span data-ttu-id="879e2-112">Interface</span><span class="sxs-lookup"><span data-stu-id="879e2-112">Interface</span></span>                                                                | <span data-ttu-id="879e2-113">Description</span><span class="sxs-lookup"><span data-stu-id="879e2-113">Description</span></span>                                                                                      |
|--------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="879e2-114">**IMFTransform**</span><span class="sxs-lookup"><span data-stu-id="879e2-114">**IMFTransform**</span></span>](/windows/desktop/api/mftransform/nn-mftransform-imftransform)                                     | <span data-ttu-id="879e2-115">Fournit la fonctionnalité MFT de base.</span><span class="sxs-lookup"><span data-stu-id="879e2-115">Provides base MFT functionality.</span></span>                                                                 |
| [<span data-ttu-id="879e2-116">**IMFTopologyServiceLookupClient**</span><span class="sxs-lookup"><span data-stu-id="879e2-116">**IMFTopologyServiceLookupClient**</span></span>](/windows/desktop/api/evr/nn-evr-imftopologyservicelookupclient) | <span data-ttu-id="879e2-117">Permet au mélangeur d’extraire des interfaces à partir du EVR.</span><span class="sxs-lookup"><span data-stu-id="879e2-117">Enables the mixer to get interfaces from the EVR.</span></span>                                                |
| [<span data-ttu-id="879e2-118">**IMFVideoDeviceID**</span><span class="sxs-lookup"><span data-stu-id="879e2-118">**IMFVideoDeviceID**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodeviceid)                             | <span data-ttu-id="879e2-119">Permet au mélangeur d’extraire des interfaces à partir du EVR.</span><span class="sxs-lookup"><span data-stu-id="879e2-119">Enables the mixer to get interfaces from the EVR.</span></span>                                                |
| [<span data-ttu-id="879e2-120">**IMFAttributes**</span><span class="sxs-lookup"><span data-stu-id="879e2-120">**IMFAttributes**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes)                                   | <span data-ttu-id="879e2-121">Utilisé pour exposer l’attribut prenant en charge la prise en [**\_ \_ \_ charge Direct3D MF**](mf-sa-d3d-aware-attribute.md) à EVR.</span><span class="sxs-lookup"><span data-stu-id="879e2-121">Used to expose the [**MF\_SA\_D3D\_AWARE**](mf-sa-d3d-aware-attribute.md) attribute to the EVR.</span></span> |



 

<span data-ttu-id="879e2-122">Éventuellement, une table MFT peut implémenter l’une des interfaces suivantes :</span><span class="sxs-lookup"><span data-stu-id="879e2-122">Optionally, an MFT can implement any of the following interfaces:</span></span>



| <span data-ttu-id="879e2-123">Interface</span><span class="sxs-lookup"><span data-stu-id="879e2-123">Interface</span></span>                                                | <span data-ttu-id="879e2-124">Description</span><span class="sxs-lookup"><span data-stu-id="879e2-124">Description</span></span>                                                                                                                                          |
|----------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="879e2-125">**IEVRTrustedVideoPlugin**</span><span class="sxs-lookup"><span data-stu-id="879e2-125">**IEVRTrustedVideoPlugin**</span></span>](/windows/desktop/api/evr/nn-evr-ievrtrustedvideoplugin) | <span data-ttu-id="879e2-126">Requis pour lire du contenu protégé.</span><span class="sxs-lookup"><span data-stu-id="879e2-126">Required to play protected content.</span></span>                                                                                                                  |
| [<span data-ttu-id="879e2-127">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="879e2-127">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                   | <span data-ttu-id="879e2-128">Expose des interfaces telles que [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) et [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) à l’application.</span><span class="sxs-lookup"><span data-stu-id="879e2-128">Exposes interfaces such as [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) and [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) to the application.</span></span> |
| [<span data-ttu-id="879e2-129">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="879e2-129">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)             | <span data-ttu-id="879e2-130">Permet au gestionnaire de qualité d’ajuster la qualité vidéo.</span><span class="sxs-lookup"><span data-stu-id="879e2-130">Enables the quality manager to adjust the video quality.</span></span>                                                                                             |
| [<span data-ttu-id="879e2-131">**IMFVideoMixerBitmap**</span><span class="sxs-lookup"><span data-stu-id="879e2-131">**IMFVideoMixerBitmap**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)       | <span data-ttu-id="879e2-132">Permet à l’application de mélanger une image bitmap statique sur la vidéo.</span><span class="sxs-lookup"><span data-stu-id="879e2-132">Enables the application to mix a static bitmap onto the video.</span></span>                                                                                       |
| [<span data-ttu-id="879e2-133">**IMFVideoPositionMapper**</span><span class="sxs-lookup"><span data-stu-id="879e2-133">**IMFVideoPositionMapper**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopositionmapper) | <span data-ttu-id="879e2-134">Mappe les coordonnées sur l’image vidéo de sortie à des coordonnées sur l’image vidéo d’entrée.</span><span class="sxs-lookup"><span data-stu-id="879e2-134">Maps coordinates on the output video frame to coordinates on the input video frame.</span></span>                                                                  |
| [<span data-ttu-id="879e2-135">**IMFVideoProcessor**</span><span class="sxs-lookup"><span data-stu-id="879e2-135">**IMFVideoProcessor**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)           | <span data-ttu-id="879e2-136">Expose certaines fonctionnalités de traitement vidéo DXVA à l’application.</span><span class="sxs-lookup"><span data-stu-id="879e2-136">Exposes some DXVA video processing features to the application.</span></span>                                                                                      |



 

<span data-ttu-id="879e2-137">La négociation de format avec le mélangeur fonctionne comme suit :</span><span class="sxs-lookup"><span data-stu-id="879e2-137">Format negotiation with the mixer works as follows:</span></span>

1.  <span data-ttu-id="879e2-138">EVR définit le type de média sur le flux de référence.</span><span class="sxs-lookup"><span data-stu-id="879e2-138">The EVR sets the media type on the reference stream.</span></span>
2.  <span data-ttu-id="879e2-139">EVR appelle [**IMFVideoPresenter ::P rocessmessage**](/windows/desktop/api/evr/nf-evr-imfvideopresenter-processmessage) sur le présenteur avec le message **MFVP \_ \_ INVALIDATEMEDIATYPE** .</span><span class="sxs-lookup"><span data-stu-id="879e2-139">The EVR calls [**IMFVideoPresenter::ProcessMessage**](/windows/desktop/api/evr/nf-evr-imfvideopresenter-processmessage) on the presenter with the **MFVP\_MESSAGE\_INVALIDATEMEDIATYPE** message.</span></span>

3.  <span data-ttu-id="879e2-140">Le présentateur définit le type de média sur le flux de sortie de la console.</span><span class="sxs-lookup"><span data-stu-id="879e2-140">The presenter sets the media type on the mixer's output stream.</span></span>
4.  <span data-ttu-id="879e2-141">EVR définit le type de média sur les sous-flux.</span><span class="sxs-lookup"><span data-stu-id="879e2-141">The EVR sets the media type on the substreams.</span></span>

<span data-ttu-id="879e2-142">Si le type de média sur le flux de référence change, les autres types de supports de la console de mixage ne sont plus valides.</span><span class="sxs-lookup"><span data-stu-id="879e2-142">If the media type on the reference stream changes, the mixer's other media types are no longer valid.</span></span> <span data-ttu-id="879e2-143">La méthode [**IMFTransform ::P rocessoutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) du mélangeur échoue et retourne la **\_ modification du \_ \_ flux \_ de transformation MF E**.</span><span class="sxs-lookup"><span data-stu-id="879e2-143">The mixer's [**IMFTransform::ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) method will then fail and return **MF\_E\_TRANSFORM\_STREAM\_CHANGE**.</span></span> <span data-ttu-id="879e2-144">Le présenteur ne doit rien faire à ce stade.</span><span class="sxs-lookup"><span data-stu-id="879e2-144">The presenter should not do anything at this point.</span></span> <span data-ttu-id="879e2-145">Le EVR lancera à nouveau le processus de négociation de format.</span><span class="sxs-lookup"><span data-stu-id="879e2-145">The EVR will initiate the format negotiation process again.</span></span>

<span data-ttu-id="879e2-146">Quand un flux d’entrée atteint la fin du flux, EVR appelle [**IMFTransform ::P rocessmessage**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processmessage) sur le mixer avec la [**\_ \_ fin de la notification de message MFT \_ de la fin \_ du \_ flux**](mft-message-notify-end-of-stream.md).</span><span class="sxs-lookup"><span data-stu-id="879e2-146">When any input stream reaches the end of the stream, the EVR calls [**IMFTransform::ProcessMessage**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processmessage) on the mixer with [**MFT\_MESSAGE\_NOTIFY\_END\_OF\_STREAM**](mft-message-notify-end-of-stream.md).</span></span>

<span data-ttu-id="879e2-147">Le mélangeur envoie les événements suivants au EVR à l’aide de l’interface [**IMediaEventSink**](/windows/win32/api/strmif/nn-strmif-imediaeventsink) du EVR.</span><span class="sxs-lookup"><span data-stu-id="879e2-147">The mixer sends the following events to the EVR, using the EVR's [**IMediaEventSink**](/windows/win32/api/strmif/nn-strmif-imediaeventsink) interface.</span></span> <span data-ttu-id="879e2-148">Cette interface est documentée dans la documentation du kit de développement logiciel (SDK) DirectShow.</span><span class="sxs-lookup"><span data-stu-id="879e2-148">This interface is documented in the DirectShow SDK documentation.</span></span>



| <span data-ttu-id="879e2-149">Événement</span><span class="sxs-lookup"><span data-stu-id="879e2-149">Event</span></span>                                            | <span data-ttu-id="879e2-150">Description</span><span class="sxs-lookup"><span data-stu-id="879e2-150">Description</span></span>                            |
|--------------------------------------------------|----------------------------------------|
| [<span data-ttu-id="879e2-151">**\_exemple EC \_ requis**</span><span class="sxs-lookup"><span data-stu-id="879e2-151">**EC\_SAMPLE\_NEEDED**</span></span>](../directshow/ec-sample-needed.md) | <span data-ttu-id="879e2-152">Le mélangeur requiert un nouvel exemple d’entrée.</span><span class="sxs-lookup"><span data-stu-id="879e2-152">The mixer requires a new input sample.</span></span> |



 

<span data-ttu-id="879e2-153">Le EVR peut appeler [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) sur le mélangeur avant le démarrage de la diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="879e2-153">The EVR might call [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) on the mixer before streaming starts.</span></span> <span data-ttu-id="879e2-154">Le mélangeur ne doit pas faire échouer ces appels.</span><span class="sxs-lookup"><span data-stu-id="879e2-154">The mixer should not fail these calls.</span></span> <span data-ttu-id="879e2-155">Au lieu de cela, elle doit remplir la surface de sortie avec des pixels noirs.</span><span class="sxs-lookup"><span data-stu-id="879e2-155">Instead, it should fill the output surface with black pixels.</span></span> <span data-ttu-id="879e2-156">Le mélangeur doit continuer à remplir les échantillons de sortie en couleur jusqu’à ce qu’il reçoive un message de la [**diffusion en \_ \_ \_ \_ continu de la notification par message MFT**](mft-message-notify-begin-streaming.md) ou que la méthode [**ProcessInput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) soit appelée.</span><span class="sxs-lookup"><span data-stu-id="879e2-156">The mixer should continue to color-fill output samples until it receives an [**MFT\_MESSAGE\_NOTIFY\_BEGIN\_STREAMING**](mft-message-notify-begin-streaming.md) message or the [**ProcessInput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) method is called.</span></span> <span data-ttu-id="879e2-157">Si la console de mixage reçoit un message de [**\_ fin de \_ \_ \_ diffusion de message MFT**](mft-message-notify-end-streaming.md) , elle doit revenir en mode de remplissage des couleurs.</span><span class="sxs-lookup"><span data-stu-id="879e2-157">If the mixer receives an [**MFT\_MESSAGE\_NOTIFY\_END\_STREAMING**](mft-message-notify-end-streaming.md) message, it should switch back to color-fill mode.</span></span>

## <a name="implementing-imfvideodeviceid"></a><span data-ttu-id="879e2-158">Implémentation de IMFVideoDeviceID</span><span class="sxs-lookup"><span data-stu-id="879e2-158">Implementing IMFVideoDeviceID</span></span>

<span data-ttu-id="879e2-159">L’interface [**IMFVideoDeviceID**](/windows/desktop/api/evr/nn-evr-imfvideodeviceid) contient une méthode, [**GetDeviceID**](/windows/desktop/api/evr/nf-evr-imfvideodeviceid-getdeviceid), qui retourne un GUID de périphérique.</span><span class="sxs-lookup"><span data-stu-id="879e2-159">The [**IMFVideoDeviceID**](/windows/desktop/api/evr/nn-evr-imfvideodeviceid) interface contains one method, [**GetDeviceID**](/windows/desktop/api/evr/nf-evr-imfvideodeviceid-getdeviceid), which returns a device GUID.</span></span> <span data-ttu-id="879e2-160">Le GUID de l’appareil garantit que le présentateur et le mélangeur utilisent des technologies compatibles.</span><span class="sxs-lookup"><span data-stu-id="879e2-160">The device GUID ensures that the presenter and the mixer use compatible technologies.</span></span> <span data-ttu-id="879e2-161">Si les GUID d’appareil ne correspondent pas, l’initialisation du EVR échoue.</span><span class="sxs-lookup"><span data-stu-id="879e2-161">If the device GUIDs do not match, the EVR fails to initialize.</span></span>

<span data-ttu-id="879e2-162">Le mélangeur et le présentateur standard utilisent Direct3D 9, avec le GUID d’appareil égal à IID \_ IDirect3DDevice9.</span><span class="sxs-lookup"><span data-stu-id="879e2-162">The standard mixer and presenter both use Direct3D 9, with the device GUID equal to IID\_IDirect3DDevice9.</span></span> <span data-ttu-id="879e2-163">Si vous envisagez d’utiliser votre présentateur personnalisé avec le mélangeur standard, le GUID de l’appareil du présentateur doit être IID \_ IDirect3DDevice9.</span><span class="sxs-lookup"><span data-stu-id="879e2-163">If you intend to use your custom presenter with the standard mixer, the presenter's device GUID must be IID\_IDirect3DDevice9.</span></span> <span data-ttu-id="879e2-164">Si vous remplacez les deux composants, vous pouvez définir un nouveau GUID d’appareil.</span><span class="sxs-lookup"><span data-stu-id="879e2-164">If you replace both components, you could define a new device GUID.</span></span>

## <a name="implementing-imftopologyservicelookupclient"></a><span data-ttu-id="879e2-165">Implémentation de IMFTopologyServiceLookupClient</span><span class="sxs-lookup"><span data-stu-id="879e2-165">Implementing IMFTopologyServiceLookupClient</span></span>

<span data-ttu-id="879e2-166">Le mixer doit implémenter l’interface [**IMFTopologyServiceLookupClient**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookupclient) .</span><span class="sxs-lookup"><span data-stu-id="879e2-166">The mixer must implement the [**IMFTopologyServiceLookupClient**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookupclient) interface.</span></span> <span data-ttu-id="879e2-167">Avant le début de la diffusion en continu, EVR appelle [**IMFTopologyServiceLookupClient :: InitServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers) et transmet un pointeur vers l’interface [**IMFTopologyServiceLookup**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookup) du EVR.</span><span class="sxs-lookup"><span data-stu-id="879e2-167">Before streaming begins, the EVR calls [**IMFTopologyServiceLookupClient::InitServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers) and passes in a pointer to the EVR's [**IMFTopologyServiceLookup**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookup) interface.</span></span> <span data-ttu-id="879e2-168">Le mélangeur utilise ce pointeur pour récupérer les pointeurs d’interface à partir de EVR.</span><span class="sxs-lookup"><span data-stu-id="879e2-168">The mixer uses this pointer to get interface pointers from the EVR.</span></span>

<span data-ttu-id="879e2-169">Au minimum, le mélangeur doit interroger l’interface suivante :</span><span class="sxs-lookup"><span data-stu-id="879e2-169">At a minimum, the mixer must query for the following interface:</span></span>

-   [<span data-ttu-id="879e2-170">**IMediaEventSink**</span><span class="sxs-lookup"><span data-stu-id="879e2-170">**IMediaEventSink**</span></span>](/windows/win32/api/strmif/nn-strmif-imediaeventsink)

<span data-ttu-id="879e2-171">Quand EVR appelle [**IMFTopologyServiceLookupClient :: ReleaseServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-releaseservicepointers), le mixer doit libérer tous les pointeurs obtenus à partir de l’appel à [**InitServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers).</span><span class="sxs-lookup"><span data-stu-id="879e2-171">When the EVR calls [**IMFTopologyServiceLookupClient::ReleaseServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-releaseservicepointers), the mixer must release any pointers obtained from the call to [**InitServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers).</span></span>

## <a name="mixer-attributes"></a><span data-ttu-id="879e2-172">Attributs du mélangeur</span><span class="sxs-lookup"><span data-stu-id="879e2-172">Mixer Attributes</span></span>

<span data-ttu-id="879e2-173">Un mélangeur doit prendre en charge les attributs suivants.</span><span class="sxs-lookup"><span data-stu-id="879e2-173">A mixer should support the following attributes.</span></span>



| <span data-ttu-id="879e2-174">Attribut</span><span class="sxs-lookup"><span data-stu-id="879e2-174">Attribute</span></span>                                                                        | <span data-ttu-id="879e2-175">Description</span><span class="sxs-lookup"><span data-stu-id="879e2-175">Description</span></span>                                                                                                                                                                                                                                           |
|----------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="879e2-176">**Compatible avec la prise en \_ \_ charge Direct3D MF \_**</span><span class="sxs-lookup"><span data-stu-id="879e2-176">**MF\_SA\_D3D\_AWARE**</span></span>](mf-sa-d3d-aware-attribute.md)                          | <span data-ttu-id="879e2-177">Spécifie si le mélangeur prend en charge l’accélération vidéo DirectX (DXVA).</span><span class="sxs-lookup"><span data-stu-id="879e2-177">Specifies whether the mixer supports DirectX Video Acceleration (DXVA).</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="879e2-178">**\_nombre d' \_ \_ échantillons requis As MF \_**</span><span class="sxs-lookup"><span data-stu-id="879e2-178">**MF\_SA\_REQUIRED\_SAMPLE\_COUNT**</span></span>](mf-sa-required-sample-count-attribute.md) | <span data-ttu-id="879e2-179">Nombre d’échantillons vidéo que le EVR doit allouer pour chaque flux de mixage.</span><span class="sxs-lookup"><span data-stu-id="879e2-179">The number of video samples the EVR should allocate for each mixer stream.</span></span> <span data-ttu-id="879e2-180">Cet attribut s’applique aux flux individuels. Utilisez le magasin d’attributs retourné par [**IMFTransform :: GetInputStreamAttributes**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getinputstreamattributes).</span><span class="sxs-lookup"><span data-stu-id="879e2-180">This attribute applies to individual streams; use the attribute store returned by [**IMFTransform::GetInputStreamAttributes**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getinputstreamattributes).</span></span> |



 

## <a name="setting-the-mixer-on-the-evr"></a><span data-ttu-id="879e2-181">Définition du mélangeur sur le EVR</span><span class="sxs-lookup"><span data-stu-id="879e2-181">Setting the Mixer on the EVR</span></span>

<span data-ttu-id="879e2-182">Pour définir une fonction de mixage personnalisé sur le EVR, appelez [**IMFVideoRenderer :: InitializeRenderer**](/windows/desktop/api/evr/nf-evr-imfvideorenderer-initializerenderer).</span><span class="sxs-lookup"><span data-stu-id="879e2-182">To set a custom mixer on the EVR, call [**IMFVideoRenderer::InitializeRenderer**](/windows/desktop/api/evr/nf-evr-imfvideorenderer-initializerenderer).</span></span> <span data-ttu-id="879e2-183">Le filtre DirectShow EVR et le récepteur multimédia EVR implémentent cette méthode.</span><span class="sxs-lookup"><span data-stu-id="879e2-183">Both the DirectShow EVR filter and the EVR media sink implement this method.</span></span>

<span data-ttu-id="879e2-184">**Objet d’activation EVR**.</span><span class="sxs-lookup"><span data-stu-id="879e2-184">**EVR Activation Object**.</span></span> <span data-ttu-id="879e2-185">Si vous utilisez l’objet d’activation EVR, vous pouvez fournir un mélangeur personnalisé en définissant l’un des attributs suivants sur l’objet d’activation EVR :</span><span class="sxs-lookup"><span data-stu-id="879e2-185">If you are using the EVR activation object, you can provide a custom mixer by setting one of the following attributes on the EVR activation object:</span></span>



| <span data-ttu-id="879e2-186">Attribut</span><span class="sxs-lookup"><span data-stu-id="879e2-186">Attribute</span></span>                                                                                                 | <span data-ttu-id="879e2-187">Description</span><span class="sxs-lookup"><span data-stu-id="879e2-187">Description</span></span>                                                                                                                           |
|-----------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="879e2-188">**activer \_ le \_ \_ \_ MÉLANGEur vidéo \_ personnalisé MF activé**</span><span class="sxs-lookup"><span data-stu-id="879e2-188">**MF\_ACTIVATE\_CUSTOM\_VIDEO\_MIXER\_ACTIVATE**</span></span>](mf-activate-custom-video-mixer-activate-attribute.md) | <span data-ttu-id="879e2-189">Pointeur vers un objet d’activation pour le mixer.</span><span class="sxs-lookup"><span data-stu-id="879e2-189">Pointer to an activation object for the mixer.</span></span> <span data-ttu-id="879e2-190">L’objet d’activation doit implémenter l’interface [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) .</span><span class="sxs-lookup"><span data-stu-id="879e2-190">The activation object must implement the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) interface.</span></span> |
| [<span data-ttu-id="879e2-191">**\_activer le \_ \_ CLSID du \_ MÉLANGEur vidéo personnalisé \_ MF**</span><span class="sxs-lookup"><span data-stu-id="879e2-191">**MF\_ACTIVATE\_CUSTOM\_VIDEO\_MIXER\_CLSID**</span></span>](mf-activate-custom-video-mixer-clsid-attribute.md)       | <span data-ttu-id="879e2-192">CLSID du mélangeur.</span><span class="sxs-lookup"><span data-stu-id="879e2-192">CLSID of the mixer.</span></span>                                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="879e2-193">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="879e2-193">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="879e2-194">Convertisseur vidéo amélioré</span><span class="sxs-lookup"><span data-stu-id="879e2-194">Enhanced Video Renderer</span></span>](enhanced-video-renderer.md)
</dt> </dl>

 

 
