---
description: Notions de base sur DMO
ms.assetid: eaf453d2-69f8-432a-8a58-1ed70778f182
title: Notions de base sur DMO (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44b1aca2fcd7e70cf78e2e95135aee73c454b910
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104201150"
---
# <a name="dmo-basics-microsoft-media-foundation"></a><span data-ttu-id="3b5b4-103">Notions de base sur DMO (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="3b5b4-103">DMO Basics (Microsoft Media Foundation)</span></span>

<span data-ttu-id="3b5b4-104">Cette rubrique fournit une brève présentation de DMOs, car elles se rapportent aux codecs Windows Media.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-104">This topic provides a brief overview of DMOs as they relate to Windows Media Codecs.</span></span> <span data-ttu-id="3b5b4-105">Pour plus d’informations sur DMOs, consultez [objets multimédia DirectX](../directshow/directx-media-objects.md).</span><span class="sxs-lookup"><span data-stu-id="3b5b4-105">For more information about DMOs, see [DirectX Media Objects](../directshow/directx-media-objects.md).</span></span>

<span data-ttu-id="3b5b4-106">Un DMO est un objet COM qui transforme des données.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-106">A DMO is a COM object that transforms data.</span></span> <span data-ttu-id="3b5b4-107">Vous lui transmettez des données et retourne les données transformées.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-107">You pass data to it, and it returns the transformed data.</span></span> <span data-ttu-id="3b5b4-108">Dans le cas d’un encodeur de codec DMO, vous entrez des données multimédias non compressées et la solution DMO fournit des données multimédias compressées.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-108">In the case of a codec encoder DMO, you input uncompressed media data and the DMO delivers compressed media data.</span></span> <span data-ttu-id="3b5b4-109">Le principal avantage de l’utilisation de DMOs est qu’ils implémentent tous la même interface de base, [**IMediaObject**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), qui simplifie leur utilisation, car vous pouvez utiliser le même objet, quel que soit le type de transformation effectué.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-109">The primary advantage of using DMOs is that they all implement the same base interface, [**IMediaObject**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), which simplifies working with them because you can use the same object, regardless of the type of transformation being performed.</span></span>

<span data-ttu-id="3b5b4-110">Étant donné que des variables sont impliquées dans une transformation de données, la transformation audio et vidéo doit prendre en compte la large gamme de configurations de médias possibles.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-110">Because there are variables involved in any sort of data transformation, audio and video transformation must take into account the wide range of possible media configurations.</span></span> <span data-ttu-id="3b5b4-111">Les codecs Windows Media Audio et vidéo prennent également en charge un certain nombre de fonctionnalités spéciales que vous devez être en mesure de configurer à l’aide d’DMO.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-111">The Windows Media Audio and Video codecs also support a number of special features that you must be able to configure by using the DMO.</span></span>

<span data-ttu-id="3b5b4-112">En général, les informations sur les variables requises par le codec DMOs pour compresser et décompresser les supports numériques sont transmises de trois manières :</span><span class="sxs-lookup"><span data-stu-id="3b5b4-112">In general, the variable information that is needed by the codec DMOs to compress and decompress digital media is conveyed in one of three ways:</span></span>

-   <span data-ttu-id="3b5b4-113">Définissez le type d’entrée sur DMO pour transmettre les caractéristiques du support non compressé que vous transmettez à un encodeur DMO, ainsi que les caractéristiques du support compressé que vous transmettez à un décodeur DMO.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-113">Set the input type on the DMO to convey the characteristics of the uncompressed media that you pass to an encoder DMO, and the characteristics of the compressed media that you pass to a decoder DMO.</span></span>
-   <span data-ttu-id="3b5b4-114">Définissez le type de sortie sur DMO pour transmettre les caractéristiques du support compressé qui sont fournies par un encodeur DMO, ainsi que les caractéristiques du support non compressé qui sont fournies par un décodeur DMO.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-114">Set the output type on the DMO to convey the characteristics of the compressed media that are delivered by an encoder DMO, and the characteristics of the uncompressed media that are delivered by a decoder DMO.</span></span>
-   <span data-ttu-id="3b5b4-115">À l’aide des méthodes de l’interface **IPropertyBag** , configurez d’autres paramètres prenant en charge les diverses fonctionnalités du codec DMOs en tant que propriétés.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-115">Using the methods of the **IPropertyBag** interface, configure other settings that support the various features of the codec DMOs as properties.</span></span> <span data-ttu-id="3b5b4-116">**IPropertyBag** est une interface COM standard qui est prise en charge par tous les DMOs de codec.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-116">**IPropertyBag** is a standard COM interface that is supported by all of the codec DMOs.</span></span>

<span data-ttu-id="3b5b4-117">En outre, certaines fonctionnalités du codec sont gérées à l’aide d’autres interfaces spécifiques au codec DMOs.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-117">Additionally, some codec features are managed by using other interfaces that are specific to the codec DMOs.</span></span> <span data-ttu-id="3b5b4-118">Ces interfaces sont répertoriées pour chaque codec dans la section [objets codec](codecobjects.md).</span><span class="sxs-lookup"><span data-stu-id="3b5b4-118">These interfaces are listed for each codec in the section [Codec Objects](codecobjects.md).</span></span>

<span data-ttu-id="3b5b4-119">Les types d’entrée et de sortie sont spécifiques aux flux d’entrée et de sortie.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-119">Input and output types are specific to input and output streams.</span></span> <span data-ttu-id="3b5b4-120">Chaque flux représente une représentation discrète du contenu.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-120">Each stream represents a discrete representation of the content.</span></span> <span data-ttu-id="3b5b4-121">Par exemple, l’encodeur Windows Media Video DMO a un seul flux d’entrée et deux flux de sortie.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-121">For example, the Windows Media Video encoder DMO has a single input stream, and two output streams.</span></span> <span data-ttu-id="3b5b4-122">Le flux d’entrée accepte les exemples vidéo non compressés.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-122">The input stream accepts uncompressed video samples.</span></span> <span data-ttu-id="3b5b4-123">Le premier des deux flux de sortie fournit des exemples compressés. l’autre fournit des exemples non compressés.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-123">The first of the two output streams delivers compressed samples; the other provides uncompressed samples.</span></span> <span data-ttu-id="3b5b4-124">Les exemples individuels dans un flux de sortie représentent le même contenu que les échantillons correspondants dans l’autre flux, mais chaque flux remet ces exemples dans un format différent.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-124">The individual samples in one output stream represent the same content as the corresponding samples in the other stream, but each stream delivers those samples in a different format.</span></span>

<span data-ttu-id="3b5b4-125">Chaque flux (entrée ou sortie) prend en charge un ou plusieurs types de médias.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-125">Each stream (input or output) supports one or more types of media.</span></span> <span data-ttu-id="3b5b4-126">Un type de média, ou format, est décrit par une structure de [**\_ \_ type de média DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) .</span><span class="sxs-lookup"><span data-stu-id="3b5b4-126">A media type, or format, is described by a [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure.</span></span> <span data-ttu-id="3b5b4-127">Vous pouvez interroger DMO pour obtenir les types pris en charge par un flux de sortie en appelant [**IMediaObject :: GetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype).</span><span class="sxs-lookup"><span data-stu-id="3b5b4-127">You can query the DMO for the types that are supported by an output stream by calling [**IMediaObject::GetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype).</span></span> <span data-ttu-id="3b5b4-128">Cette méthode retourne un type de sortie valide (bien que dans certains cas partiellement incomplet) pour ce flux.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-128">This method returns a valid (though in some cases partially incomplete) output type for that stream.</span></span> <span data-ttu-id="3b5b4-129">Vous pouvez énumérer les types de média pris en charge pour un flux de sortie en effectuant des appels répétés à **GetOutputType**, en incrémentant le paramètre de type à chaque appel.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-129">You can enumerate the supported media types for an output stream by making repeated calls to **GetOutputType**, incrementing the type parameter with each call.</span></span> <span data-ttu-id="3b5b4-130">Lorsque l’index de type que vous transmettez est hors limites, la méthode retourne **DMO \_ E \_ \_ plus d' \_ éléments**.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-130">When the type index that you pass is out of bounds, the method returns **DMO\_E\_NO\_MORE\_ITEMS**.</span></span> <span data-ttu-id="3b5b4-131">Les formats d’entrée peuvent être énumérés de la même manière à l’aide de la méthode [**IMediaObject :: GetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) .</span><span class="sxs-lookup"><span data-stu-id="3b5b4-131">Input formats can be enumerated in the same way by using the [**IMediaObject::GetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) method.</span></span>

<span data-ttu-id="3b5b4-132">Les types qui sont énumérés par DMO sont uniquement les types « préférés », toutefois, d’autres types peuvent être pris en charge.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-132">The types that are enumerated by the DMO are only the "preferred" types, however, other types may be supported.</span></span> <span data-ttu-id="3b5b4-133">Vous pouvez valider un type de sortie en appelant [**IMediaObject :: SetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype).</span><span class="sxs-lookup"><span data-stu-id="3b5b4-133">You can validate an output type by calling [**IMediaObject::SetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype).</span></span> <span data-ttu-id="3b5b4-134">Utilisez [**IMediaObject :: SetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) pour valider un type d’entrée.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-134">Use [**IMediaObject::SetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) to validate an input type.</span></span> <span data-ttu-id="3b5b4-135">Les deux méthodes retournent le **\_ type E DMO \_ \_ non \_ accepté** si la structure de [**\_ \_ type de média DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) que vous avez transmise n’est pas valide.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-135">Both methods will return **DMO\_E\_TYPE\_NOT\_ACCEPTED** if the [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure you passed is invalid.</span></span> <span data-ttu-id="3b5b4-136">Certains DMOs vous obligent à définir un type de sortie avant d’énumérer les types d’entrée.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-136">Some DMOs require you to set an output type before enumerating any input types.</span></span> <span data-ttu-id="3b5b4-137">Windows Media Audio les DMOs et codecs vidéo possèdent tous des entrées et des sorties qui ont une validation interdépendante.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-137">The Windows Media Audio and Video codec DMOs all have inputs and outputs that have interdependent validation.</span></span> <span data-ttu-id="3b5b4-138">Autrement dit, le type de sortie que vous définissez définit les critères de validation pour le type d’entrée.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-138">That is, the output type you set will set the validation criteria for the input type.</span></span> <span data-ttu-id="3b5b4-139">Il existe également certaines propriétés qui, lorsqu’elles sont définies, modifient les types d’entrée et de sortie valides.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-139">There are also some properties that, when set, alter the valid input and output types.</span></span> <span data-ttu-id="3b5b4-140">Pour cette raison, vous devez définir toutes les propriétés souhaitées sur le DMO avant d’énumérer les types.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-140">For this reason, you should set all of the desired properties on the DMO before enumerating types.</span></span>

<span data-ttu-id="3b5b4-141">Lorsque vous avez défini les types de sortie et d’entrée pour DMO, vous pouvez commencer à traiter les exemples.</span><span class="sxs-lookup"><span data-stu-id="3b5b4-141">When you have set the output and input types for the DMO, you can begin processing samples.</span></span> <span data-ttu-id="3b5b4-142">Chaque exemple d’entrée est passé au codec à l’aide d’un appel à [**IMediaObject ::P rocessinput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput), et chaque exemple de sortie est remis par le codec lorsque vous effectuez un appel à [**IMediaObject ::P rocessoutput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processoutput).</span><span class="sxs-lookup"><span data-stu-id="3b5b4-142">Each input sample is passed to the codec using a call to [**IMediaObject::ProcessInput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput), and each output sample is delivered by the codec when you make a call to [**IMediaObject::ProcessOutput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processoutput).</span></span>

## <a name="related-topics"></a><span data-ttu-id="3b5b4-143">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="3b5b4-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3b5b4-144">Utilisation du codec DMOs</span><span class="sxs-lookup"><span data-stu-id="3b5b4-144">Working with Codec DMOs</span></span>](workingwithcodecdmos.md)
</dt> </dl>

 

 
