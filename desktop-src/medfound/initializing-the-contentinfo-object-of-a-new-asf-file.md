---
description: Initialisation de l’objet ContentInfo d’un nouveau fichier ASF
ms.assetid: a4f6c90e-1b38-4c70-8bc5-e2e16af3d87a
title: Initialisation de l’objet ContentInfo d’un nouveau fichier ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74826942700f4be8028075fcd9466414834eb8e2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104318309"
---
# <a name="initializing-the-contentinfo-object-of-a-new-asf-file"></a><span data-ttu-id="67582-103">Initialisation de l’objet ContentInfo d’un nouveau fichier ASF</span><span class="sxs-lookup"><span data-stu-id="67582-103">Initializing the ContentInfo Object of a New ASF File</span></span>

<span data-ttu-id="67582-104">Après avoir créé un objet ContentInfo vide en appelant la fonction [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) , l’application doit appeler [**IMFASFContentInfo :: SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) pour fournir le profil d’encodage.</span><span class="sxs-lookup"><span data-stu-id="67582-104">After creating an empty ContentInfo object by calling the [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) function, the application must call [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) to provide the encoding profile.</span></span> <span data-ttu-id="67582-105">Pour plus d’informations sur la création d’un profil, consultez [création d’un profil ASF](creating-an-asf-profile.md).</span><span class="sxs-lookup"><span data-stu-id="67582-105">For information about creating a profile, see [Creating an ASF Profile](creating-an-asf-profile.md).</span></span>

<span data-ttu-id="67582-106">Pour que les informations puissent être lues à partir du profil, la méthode **SetProfile** doit valider l’objet de profil spécifié en vérifiant les identificateurs de flux ou les types de média.</span><span class="sxs-lookup"><span data-stu-id="67582-106">Before information can be read from the profile, the **SetProfile** method must validate the specified profile object by checking the stream identifiers or media types.</span></span> <span data-ttu-id="67582-107">Si le profil réussit la validation, plusieurs objets d’en-tête sont générés, tels que l’objet de propriétés de fichier, l’objet de propriétés de débit binaire, l’objet de propriétés de flux et l’objet d’exclusion mutuelle.</span><span class="sxs-lookup"><span data-stu-id="67582-107">If the profile passes the validation, various header objects are generated, such as the File Properties Object, the Stream Bitrate Properties Object, the Stream Properties Object, and the Mutual Exclusion Object.</span></span>

<span data-ttu-id="67582-108">**SetProfile** calcule et définit les valeurs recommandées pour certaines propriétés, telles que la valeur de préroll.</span><span class="sxs-lookup"><span data-stu-id="67582-108">**SetProfile** computes and sets recommended values for certain properties, such as the preroll value.</span></span> <span data-ttu-id="67582-109">Si ce n’est pas déjà fait, la valeur de préroll recommandée en millisecondes dépend de la fenêtre de mémoire tampon maximale du compartiment avec fuite spécifié pour les flux dans le profil.</span><span class="sxs-lookup"><span data-stu-id="67582-109">If this is not already set, the recommended preroll value in milliseconds depends on the maximum buffer window of the leaky bucket specified for the streams in the profile.</span></span> <span data-ttu-id="67582-110">De même, les tailles de paquets de données minimale et maximale sont également définies.</span><span class="sxs-lookup"><span data-stu-id="67582-110">Similarly, the minimum and maximum data packet sizes are also set.</span></span> <span data-ttu-id="67582-111">Les valeurs recommandées peuvent remplacer les tailles de paquets définies sur le profil par le biais d’attributs.</span><span class="sxs-lookup"><span data-stu-id="67582-111">The recommended values might override the packet sizes that are set on the profile through attributes.</span></span>

<span data-ttu-id="67582-112">Étant donné que le fichier est en cours de création, le fichier est catégorisé comme type de diffusion, ce qui est indiqué par le champ Flags de l’objet de propriétés de fichier.</span><span class="sxs-lookup"><span data-stu-id="67582-112">Because the file is in the process of being created, the file is categorized as a broadcast type, which is denoted by the Flags field of the File Properties Object.</span></span> <span data-ttu-id="67582-113">Certaines valeurs inconnues, telles que le nombre de paquets de données, la durée de lecture et la durée d’envoi, sont définies sur zéro.</span><span class="sxs-lookup"><span data-stu-id="67582-113">Certain unknown values such as the number of data packets, play duration, and send duration are set to zero.</span></span> <span data-ttu-id="67582-114">Ces valeurs sont représentées par les attributs **MF \_ PD \_ ASF \_ xxx** et doivent être mises à jour par l’application une fois la création du fichier terminée.</span><span class="sxs-lookup"><span data-stu-id="67582-114">These values are represented by **MF\_PD\_ASF\_xxx** attributes and must be updated by the application after file creation is complete.</span></span>

<span data-ttu-id="67582-115">L’objet de profil spécifié remplace tout profil existant associé à l’objet ContentInfo, supprime les objets d’en-tête référencés et réinitialise les propriétés globales du fichier, telles que la taille des paquets de données et du préroll.</span><span class="sxs-lookup"><span data-stu-id="67582-115">The specified profile object replaces any existing profile associated with the ContentInfo object, removes the referenced header objects, and resets global file properties such as preroll and data packet size.</span></span>

<span data-ttu-id="67582-116">La méthode **SetProfile** crée également l’objet de données qui représente l’objet de données ASF.</span><span class="sxs-lookup"><span data-stu-id="67582-116">The **SetProfile** method also creates the data object that represents the ASF Data Object.</span></span> <span data-ttu-id="67582-117">Si vous réutilisez un objet ContentInfo qui contient des informations sur les paquets de données, **SetProfile** échoue et retourne l' \_ erreur MF E \_ déjà \_ initialisée, indiquant qu’il est déjà associé à un objet de données ASF existant.</span><span class="sxs-lookup"><span data-stu-id="67582-117">If you reuse a ContentInfo object that includes information about any data packets, **SetProfile** fails and returns the MF\_E\_ALREADY\_INITIALIZED error indicating that it is already associated with an existing ASF Data Object.</span></span> <span data-ttu-id="67582-118">Par défaut, pour un nouvel objet ContentInfo, le nombre de paquets de données est défini sur zéro et la taille de l’objet de données est définie sur 50 octets.</span><span class="sxs-lookup"><span data-stu-id="67582-118">By default, for a new ContentInfo object, the data packet count is set to zero and the data object size is set to 50 bytes.</span></span> <span data-ttu-id="67582-119">Si vous utilisez le multiplexeur pour générer des paquets de données, le multiplexeur met à jour l’objet ContentInfo pour refléter les nouvelles valeurs, telles que le nombre de paquets de données.</span><span class="sxs-lookup"><span data-stu-id="67582-119">If you use the multiplexer to generate data packets, the multiplexer updates the ContentInfo object to reflect new values such as the data packet count.</span></span> <span data-ttu-id="67582-120">Pour plus d’informations sur la génération de paquets de données, consultez [génération de nouveaux paquets de données ASF](generating-new-asf-data-packets.md).</span><span class="sxs-lookup"><span data-stu-id="67582-120">For more information about data packet generation, see [Generating New ASF Data Packets](generating-new-asf-data-packets.md).</span></span>

<span data-ttu-id="67582-121">Une fois que tous les objets d’en-tête sont ajoutés à l’objet d’en-tête ASF final, la taille totale de l’en-tête peut être récupérée en appelant [**IMFASFContentInfo :: GetHeaderSize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span><span class="sxs-lookup"><span data-stu-id="67582-121">After all the Header Objects are added to the final ASF Header Object, the total header size can be retrieved by calling [**IMFASFContentInfo::GetHeaderSize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span></span> <span data-ttu-id="67582-122">Cette taille comprend la taille initiale de l’objet de données.</span><span class="sxs-lookup"><span data-stu-id="67582-122">This size includes the initial data object size.</span></span>

## <a name="related-topics"></a><span data-ttu-id="67582-123">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="67582-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="67582-124">Définition des propriétés dans l’objet ContentInfo</span><span class="sxs-lookup"><span data-stu-id="67582-124">Setting Properties in the ContentInfo Object</span></span>](setting-properties-in-the-contentinfo-object.md)
</dt> <dt>

[<span data-ttu-id="67582-125">Écriture d’un objet d’en-tête ASF pour un nouveau fichier</span><span class="sxs-lookup"><span data-stu-id="67582-125">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 



