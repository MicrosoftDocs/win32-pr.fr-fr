---
description: À propos des topologies
ms.assetid: 4f69b099-0ca7-4ea6-8412-0f1ea02e1600
title: À propos des topologies
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35008d839e8054554370039dd13297ae7a1f0b0a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104563349"
---
# <a name="about-topologies"></a><span data-ttu-id="70a31-103">À propos des topologies</span><span class="sxs-lookup"><span data-stu-id="70a31-103">About Topologies</span></span>

<span data-ttu-id="70a31-104">Une topologie est un objet qui représente la façon dont les données circulent dans le pipeline.</span><span class="sxs-lookup"><span data-stu-id="70a31-104">A topology is an object that represents how data flows in the pipeline.</span></span> <span data-ttu-id="70a31-105">Une application crée une topologie pour décrire le chemin d’accès de chaque flux de la source du média à un récepteur multimédia.</span><span class="sxs-lookup"><span data-stu-id="70a31-105">An application creates a topology to describe the path that each stream takes from the media source to a media sink.</span></span> <span data-ttu-id="70a31-106">L’application transmet la topologie à la session multimédia, et la session multimédia utilise la topologie pour contrôler le Workflow.</span><span class="sxs-lookup"><span data-stu-id="70a31-106">The application passes the topology to the Media Session, and the Media Session uses the topology to control the data flow.</span></span>

<span data-ttu-id="70a31-107">Les composants de traitement de données dans le pipeline (sources de média, transformations et récepteurs multimédias) sont représentés dans la topologie sous forme de *nœuds*.</span><span class="sxs-lookup"><span data-stu-id="70a31-107">The data-processing components in the pipeline (media sources, transforms, and media sinks) are represented in the topology as *nodes*.</span></span> <span data-ttu-id="70a31-108">Le déroulement des données d’un composant vers un autre est représenté par une connexion entre les nœuds.</span><span class="sxs-lookup"><span data-stu-id="70a31-108">The flow of data from one component to another is represented by a connection between the nodes.</span></span> <span data-ttu-id="70a31-109">Les types de nœuds suivants sont définis :</span><span class="sxs-lookup"><span data-stu-id="70a31-109">The following node types are defined:</span></span>

-   <span data-ttu-id="70a31-110">Nœud source : représente un flux multimédia sur une source de média.</span><span class="sxs-lookup"><span data-stu-id="70a31-110">Source node: Represents a media stream on a media source.</span></span>
-   <span data-ttu-id="70a31-111">Nœud de transformation : représente une transformation de Media Foundation (MFT).</span><span class="sxs-lookup"><span data-stu-id="70a31-111">Transform node: Represents a Media Foundation transform (MFT).</span></span>
-   <span data-ttu-id="70a31-112">Nœud de sortie : représente un récepteur de flux sur un récepteur multimédia.</span><span class="sxs-lookup"><span data-stu-id="70a31-112">Output node: Represents a stream sink on a media sink.</span></span>
-   <span data-ttu-id="70a31-113">Nœud Tee : représente une fourche dans le flux.</span><span class="sxs-lookup"><span data-stu-id="70a31-113">Tee node: Represents a fork in the stream.</span></span> <span data-ttu-id="70a31-114">Les nœuds tee sont une exception à la règle qu’un nœud représente un objet Pipeline.</span><span class="sxs-lookup"><span data-stu-id="70a31-114">Tee nodes are an exception to the rule that a node represents a pipeline object.</span></span> <span data-ttu-id="70a31-115">Contrairement à d’autres types de nœuds, le nœud tee dirige simplement le workflow de données.</span><span class="sxs-lookup"><span data-stu-id="70a31-115">Unlike other node types, the tee node simply directs the flow of data.</span></span>

<span data-ttu-id="70a31-116">Une topologie fonctionnelle doit contenir au moins un nœud source connecté à un nœud de sortie, éventuellement via un ou plusieurs nœuds de transformation.</span><span class="sxs-lookup"><span data-stu-id="70a31-116">A functioning topology must contain at least one source node connected to an output node, possibly through one or more transform nodes.</span></span> <span data-ttu-id="70a31-117">Par exemple, le diagramme suivant illustre une topologie simple avec un flux.</span><span class="sxs-lookup"><span data-stu-id="70a31-117">For example, the following diagram shows a simple topology with one stream.</span></span>

![diagramme qui montre une topologie avec un flux.](images/topology01.png)

<span data-ttu-id="70a31-119">Pour la lecture de fichier, le nœud de transformation peut représenter un décodeur et le nœud de sortie représente le convertisseur audio ou vidéo.</span><span class="sxs-lookup"><span data-stu-id="70a31-119">For file playback, the transform node might represent a decoder and the output node would represent the audio or video renderer.</span></span> <span data-ttu-id="70a31-120">Pour l’encodage de fichier, le nœud de transformation représente un encodeur et le nœud de sortie représente un récepteur d’archive, tel que le récepteur de fichiers ASF.</span><span class="sxs-lookup"><span data-stu-id="70a31-120">For file encoding, the transform node would represent an encoder and the output node would represent an archive sink, such as the ASF file sink.</span></span>

<span data-ttu-id="70a31-121">Si deux nœuds sont connectés, le nœud qui produit des données est appelé nœud *amont* , et le nœud qui reçoit les données est appelé nœud en *aval* .</span><span class="sxs-lookup"><span data-stu-id="70a31-121">If two nodes are connected, the node that produces data is called the *upstream* node, and the node that receives data is called the *downstream* node.</span></span> <span data-ttu-id="70a31-122">Par exemple, dans le diagramme précédent, le nœud source est en amont du nœud transformer.</span><span class="sxs-lookup"><span data-stu-id="70a31-122">For example, in the previous diagram, the source node is upstream from the transform node.</span></span>

<span data-ttu-id="70a31-123">Dans une paire de nœuds connectés, le point de connexion sur le nœud amont est appelé une *sortie*.</span><span class="sxs-lookup"><span data-stu-id="70a31-123">In a pair of connected nodes, the connection point on the upstream node is called an *output*.</span></span> <span data-ttu-id="70a31-124">Le point de connexion sur le nœud en aval est appelé une *entrée*.</span><span class="sxs-lookup"><span data-stu-id="70a31-124">The connection point on the downstream node is called an *input*.</span></span> <span data-ttu-id="70a31-125">Le diagramme suivant montre une paire de nœuds avec leurs points de connexion, et le Flow de données entre eux.</span><span class="sxs-lookup"><span data-stu-id="70a31-125">The following diagram shows a pair of nodes with their connection points, and the flow of data between them.</span></span> <span data-ttu-id="70a31-126">Les points de connexion ne sont pas représentés en tant qu’objets distincts dans la topologie.</span><span class="sxs-lookup"><span data-stu-id="70a31-126">The connection points are not represented as separate objects in the topology.</span></span> <span data-ttu-id="70a31-127">Ils sont spécifiés par la valeur d’index sur l’objet de nœud.</span><span class="sxs-lookup"><span data-stu-id="70a31-127">They are specified by index value on the node object.</span></span>

![diagramme qui affiche deux nœuds connectés.](images/topology04.png)

<span data-ttu-id="70a31-129">Un nœud source ne peut avoir aucune entrée.</span><span class="sxs-lookup"><span data-stu-id="70a31-129">A source node cannot have any inputs.</span></span> <span data-ttu-id="70a31-130">Par conséquent, il ne peut pas y avoir de nœuds en amont d’un nœud source.</span><span class="sxs-lookup"><span data-stu-id="70a31-130">Therefore, there cannot be any nodes upstream from a source node.</span></span> <span data-ttu-id="70a31-131">De même, un nœud de sortie ne peut pas avoir de sorties, et il ne peut pas y avoir de nœuds en aval d’un nœud de sortie.</span><span class="sxs-lookup"><span data-stu-id="70a31-131">Similarly, an output node cannot have outputs, and there cannot be any nodes downstream from an output node.</span></span> <span data-ttu-id="70a31-132">Une chaîne de nœuds d’un nœud source à un nœud de sortie est appelée une *branche* de la topologie.</span><span class="sxs-lookup"><span data-stu-id="70a31-132">A chain of nodes from a source node to an output node is called a *branch* of the topology.</span></span> <span data-ttu-id="70a31-133">Le premier diagramme de cette rubrique illustre une topologie avec une seule branche.</span><span class="sxs-lookup"><span data-stu-id="70a31-133">The first diagram in this topic shows a topology with a single branch.</span></span> <span data-ttu-id="70a31-134">En général, il existe une branche par flux.</span><span class="sxs-lookup"><span data-stu-id="70a31-134">Generally there is one branch per stream.</span></span> <span data-ttu-id="70a31-135">Pour lire un fichier avec un flux audio et un flux vidéo, par exemple, nécessite une topologie avec deux branches.</span><span class="sxs-lookup"><span data-stu-id="70a31-135">To play a file with one audio stream and one video stream, for example, requires a topology with two branches.</span></span>

## <a name="partial-topologies"></a><span data-ttu-id="70a31-136">Topologies partielles</span><span class="sxs-lookup"><span data-stu-id="70a31-136">Partial Topologies</span></span>

<span data-ttu-id="70a31-137">Une topologie complète ou *complète* contient un nœud pour chaque objet de pipeline qui est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="70a31-137">A complete or *full* topology contains a node for every pipeline object that is needed.</span></span> <span data-ttu-id="70a31-138">Toutefois, l’application n’a pas toujours besoin de créer une topologie complète.</span><span class="sxs-lookup"><span data-stu-id="70a31-138">However, the application does not always need to create a full topology.</span></span> <span data-ttu-id="70a31-139">Au lieu de cela, il crée une topologie *partielle* qui omet un ou plusieurs nœuds de transformation.</span><span class="sxs-lookup"><span data-stu-id="70a31-139">Instead, it creates a *partial* topology that omits one or more transform nodes.</span></span>

<span data-ttu-id="70a31-140">La session de média termine la topologie à l’aide d’un objet appelé *chargeur de topologie*.</span><span class="sxs-lookup"><span data-stu-id="70a31-140">The Media Session completes the topology by using an object called the *topology loader*.</span></span> <span data-ttu-id="70a31-141">Le chargeur de topologie convertit les topologies partielles en topologies complètes en insérant les transformations nécessaires.</span><span class="sxs-lookup"><span data-stu-id="70a31-141">The topology loader converts partial topologies into full topologies by inserting the needed transforms.</span></span> <span data-ttu-id="70a31-142">Le processus de conversion est appelé *résolution* de la topologie.</span><span class="sxs-lookup"><span data-stu-id="70a31-142">The process of conversion is called *resolving* the topology.</span></span>

<span data-ttu-id="70a31-143">Par exemple, pour lire un flux audio encodé, la topologie doit avoir un décodeur entre les nœuds source et de sortie.</span><span class="sxs-lookup"><span data-stu-id="70a31-143">For example, to play an encoded audio stream, the topology must have a decoder between the source and output nodes.</span></span> <span data-ttu-id="70a31-144">L’application crée une topologie partielle qui connecte directement le nœud source au nœud de sortie, sans le décodeur.</span><span class="sxs-lookup"><span data-stu-id="70a31-144">The application creates a partial topology that connects the source node directly to the output node, without the decoder.</span></span> <span data-ttu-id="70a31-145">Le chargeur de topologie examine les formats de flux, recherche le décodeur approprié et insère un nœud de transformation dans la topologie.</span><span class="sxs-lookup"><span data-stu-id="70a31-145">The topology loader examines the stream formats, finds the right decoder, and inserts a transform node into the topology.</span></span>

<span data-ttu-id="70a31-146">Le diagramme suivant montre la topologie partielle créée par l’application.</span><span class="sxs-lookup"><span data-stu-id="70a31-146">The following diagram shows the partial topology created by the application.</span></span>

![diagramme qui montre un partiel avec un nœud source et un nœud de sortie.](images/topology02.png)

<span data-ttu-id="70a31-148">Le diagramme suivant montre la topologie complète une fois que le chargeur de topologie l’a résolu.</span><span class="sxs-lookup"><span data-stu-id="70a31-148">The next diagram shows the full topology after the topology loader resolves it.</span></span> <span data-ttu-id="70a31-149">Dans cet exemple, le chargeur de topologie a inséré un nœud de transformation pour le décodeur.</span><span class="sxs-lookup"><span data-stu-id="70a31-149">In this example, the topology loader has inserted a transform node for the decoder.</span></span>

![diagramme qui montre une topologie complète.](images/topology03.png)

<span data-ttu-id="70a31-151">Dans la version actuelle de Media Foundation, le chargeur de topologie prend en charge les topologies pour la lecture.</span><span class="sxs-lookup"><span data-stu-id="70a31-151">In the current version of Media Foundation, the topology loader supports topologies for playback.</span></span> <span data-ttu-id="70a31-152">Pour l’encodage de fichier et d’autres scénarios, l’application doit construire une topologie complète.</span><span class="sxs-lookup"><span data-stu-id="70a31-152">For file encoding and other scenarios, the application must construct a full topology.</span></span>

<span data-ttu-id="70a31-153">Les applications peuvent également créer le chargeur de topologie et l’utiliser directement.</span><span class="sxs-lookup"><span data-stu-id="70a31-153">Applications can also create the topology loader and use it directly.</span></span> <span data-ttu-id="70a31-154">Par exemple, vous pouvez utiliser le chargeur de topologie pour résoudre une topologie partielle, puis modifier la topologie complète avant de l’attribuer à la session multimédia.</span><span class="sxs-lookup"><span data-stu-id="70a31-154">For example, you can use the topology loader to resolve a partial topology and then modify the full topology before giving it to the Media Session.</span></span> <span data-ttu-id="70a31-155">Pour créer le chargeur de topologie, appelez [**MFCreateTopoLoader**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatetopoloader).</span><span class="sxs-lookup"><span data-stu-id="70a31-155">To create the topology loader, call [**MFCreateTopoLoader**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatetopoloader).</span></span>

## <a name="related-topics"></a><span data-ttu-id="70a31-156">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="70a31-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="70a31-157">Topologies</span><span class="sxs-lookup"><span data-stu-id="70a31-157">Topologies</span></span>](topologies.md)
</dt> </dl>

 

 



