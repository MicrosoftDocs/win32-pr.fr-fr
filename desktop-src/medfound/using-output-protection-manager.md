---
description: 'En savoir plus sur : utilisation de Output Protection Manager'
ms.assetid: 01edc17e-e71c-4772-a03c-09c9a2b8400f
title: Utilisation de Output Protection Manager
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 57bf4def3b0575dd706ae5f0c62924b6f1375a05
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106521500"
---
# <a name="using-output-protection-manager"></a><span data-ttu-id="ba4d9-103">Utilisation de Output Protection Manager</span><span class="sxs-lookup"><span data-stu-id="ba4d9-103">Using Output Protection Manager</span></span>

<span data-ttu-id="ba4d9-104">Cette rubrique explique comment utiliser le gestionnaire de protection de sortie (OPM) pour protéger le contenu vidéo lorsqu’il transite par un connecteur physique sur un périphérique d’affichage.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-104">This topic describes how to use Output Protection Manager (OPM) to protect video content as it travels over a physical connector to a display device.</span></span> <span data-ttu-id="ba4d9-105">Cette rubrique contient les sections suivantes :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-105">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="ba4d9-106">Sorties vidéo</span><span class="sxs-lookup"><span data-stu-id="ba4d9-106">Video Outputs</span></span>](#video-outputs)
-   [<span data-ttu-id="ba4d9-107">Initialisation d’une session OPM</span><span class="sxs-lookup"><span data-stu-id="ba4d9-107">Initializing an OPM Session</span></span>](#initializing-an-opm-session)
-   [<span data-ttu-id="ba4d9-108">Envoi de demandes d’État OPM</span><span class="sxs-lookup"><span data-stu-id="ba4d9-108">Sending OPM Status Requests</span></span>](#sending-opm-status-requests)
-   [<span data-ttu-id="ba4d9-109">Envoi de commandes OPM</span><span class="sxs-lookup"><span data-stu-id="ba4d9-109">Sending OPM Commands</span></span>](#sending-opm-commands)
-   [<span data-ttu-id="ba4d9-110">Gestion d’une sortie vidéo désactivée</span><span class="sxs-lookup"><span data-stu-id="ba4d9-110">Handling a Disabled Video Output</span></span>](#sending-opm-commands)
-   [<span data-ttu-id="ba4d9-111">Utilisation de HDCP pour protéger du contenu</span><span class="sxs-lookup"><span data-stu-id="ba4d9-111">Using HDCP to Protect Content</span></span>](#using-hdcp-to-protect-content)

<span data-ttu-id="ba4d9-112">Le contenu vidéo Premium est généralement chiffré pour le protéger contre la duplication non autorisée.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-112">Premium video content is usually encrypted to protect it from unauthorized duplication.</span></span> <span data-ttu-id="ba4d9-113">Bien entendu, la vidéo doit être déchiffrée avant d’être affichée.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-113">Of course, the video must be decrypted before it is displayed.</span></span> <span data-ttu-id="ba4d9-114">Les frames décompressés et non compressés doivent ensuite circuler sur le périphérique d’affichage à travers un connecteur physique.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-114">The decrypted, uncompressed frames must then travel across a physical connector to the display device.</span></span> <span data-ttu-id="ba4d9-115">Les fournisseurs de contenu peuvent exiger que les images vidéo soient protégées à ce stade, lors de leur déplacement sur le connecteur physique.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-115">Content providers may require the video frames to be protected at this point, as they travel across the physical connector.</span></span>

<span data-ttu-id="ba4d9-116">Il existe différents mécanismes de protection à cet effet, notamment High-Bandwidth Digital protection du contenu (HDCP) et DisplayPort protection du contenu (DPCP) pour les sorties numériques ; et le système de gestion de la génération de copie-analogique (CGMS-A) pour les sorties analogiques.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-116">Various protection mechanisms exist for this purpose, including High-Bandwidth Digital Content Protection (HDCP) and DisplayPort Content Protection (DPCP) for digital outputs; and Copy Generation Management System - Analog (CGMS-A) for analog outputs.</span></span> <span data-ttu-id="ba4d9-117">En règle générale, ces mécanismes impliquent le chiffrement ou le brouillage du signal avant qu’il ne passe à l’écran.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-117">Generally, these mechanisms involve encrypting or scrambling the signal befores it goes to the display.</span></span>

<span data-ttu-id="ba4d9-118">OPM permet à une application d’appliquer des mécanismes de protection de contenu sur la sortie vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-118">OPM enables an application to enforce content protection mechanisms on the video output.</span></span> <span data-ttu-id="ba4d9-119">À l’aide de OPM, l’application envoie des commandes et des demandes d’État au pilote Graphics via un canal sécurisé sécurisé.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-119">Using OPM, the application sends commands and status requests to the graphics driver through a trusted, secure channel.</span></span> <span data-ttu-id="ba4d9-120">OPM permet à une application d’effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-120">OPM enables an application to:</span></span>

-   <span data-ttu-id="ba4d9-121">Vérifiez qu’un pilote graphique a été signé par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-121">Verify that a graphics driver has been signed by Microsoft.</span></span>
-   <span data-ttu-id="ba4d9-122">Configurez un canal de communication approuvé avec le pilote.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-122">Set up a trusted communication channel with the driver.</span></span>
-   <span data-ttu-id="ba4d9-123">Appliquer des mécanismes de protection du contenu sur la sortie physique.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-123">Enforce content protection mechanisms on the physical output.</span></span>

<span data-ttu-id="ba4d9-124">OPM remplace la protection de sortie certifiée Protcol (COPP) et utilise une API similaire.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-124">OPM replaces Certified Output Protection Protcol (COPP) and uses a similar API.</span></span> <span data-ttu-id="ba4d9-125">Pour des raisons de compatibilité descendante, l’interface OPM peut émuler l’interface COPP.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-125">For backward compatibility, the OPM interface can emulate the COPP interface.</span></span> <span data-ttu-id="ba4d9-126">Les différences entre OPM et COPP sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-126">Differences between OPM and COPP include the following:</span></span>

-   <span data-ttu-id="ba4d9-127">OPM utilise des certificats X. 509, tandis que COPP utilise un format de certificat propriétaire.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-127">OPM uses X.509 certificates, while COPP uses a proprietary certificate format.</span></span>
-   <span data-ttu-id="ba4d9-128">OPM prend en charge les répéteurs HDCP.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-128">OPM supports HDCP repeaters.</span></span>
-   <span data-ttu-id="ba4d9-129">Les applications qui utilisent OPM n’ont pas besoin d’analyser les messages de renouvellement du système HDCP (SRMs).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-129">Applications that use OPM do not have to parse HDCP system renewability messages (SRMs).</span></span>
-   <span data-ttu-id="ba4d9-130">OPM peut être utilisé lorsque l’affichage graphique utilise le mode de clonage.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-130">OPM can be used when the graphics display is using clone mode.</span></span> <span data-ttu-id="ba4d9-131">COPP ne prend pas en charge le mode clone.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-131">COPP does not support clone mode.</span></span>

<span data-ttu-id="ba4d9-132">Si votre application utilise le chemin d’accès de média protégé (PMP) pour lire le contenu vidéo, vous n’avez pas besoin d’utiliser l’API OPM, car l’PMP effectue tous les appels OPM requis.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-132">If your application uses the protected media path (PMP) to play video content, you do not have to use the OPM API, because the PMP makes all of the required OPM calls.</span></span> <span data-ttu-id="ba4d9-133">L’API OPM est disponible pour les applications qui n’utilisent pas le PMP.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-133">The OPM API is available for applications that do not use the PMP.</span></span>

<span data-ttu-id="ba4d9-134">OPM est disponible dans Windows Vista et versions ultérieures, mais l’API n’a pas été rendue publique jusqu’à Windows 7.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-134">OPM is available in Windows Vista and later, but the API was not made public until Windows 7.</span></span> <span data-ttu-id="ba4d9-135">Pour utiliser OPM dans une application, vous devez disposer des en-têtes et des fichiers de bibliothèque du kit de développement logiciel (SDK) Windows 7.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-135">To use OPM in an application, you must have the headers and library files from the Windows 7 SDK.</span></span> <span data-ttu-id="ba4d9-136">Vous n’avez pas besoin de redistribuer des dll pour utiliser OPM dans Windows Vista ou Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-136">You do not have to redistribute any DLLs to use OPM in Windows Vista or Windows Server 2008.</span></span>

## <a name="video-outputs"></a><span data-ttu-id="ba4d9-137">Sorties vidéo</span><span class="sxs-lookup"><span data-stu-id="ba4d9-137">Video Outputs</span></span>

<span data-ttu-id="ba4d9-138">Une carte graphique peut avoir plusieurs sorties physiques, chacune avec ses propres fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-138">A graphics adapter can have more than one physical output, each with its own capabilities.</span></span> <span data-ttu-id="ba4d9-139">Avant qu’une application ne lise du contenu protégé, elle doit définir les mécanismes de protection appropriés sur chaque sortie vidéo associée à la carte graphique qui affichera la vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-139">Before an application plays protected content, it must set the appropriate protection mechanisms on every video output associated with the graphics card that will display the video.</span></span> <span data-ttu-id="ba4d9-140">Les mécanismes de protection à appliquer dépendent des règles d’utilisation du contenu.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-140">Which protection mechanisms to apply will depend on the usage rules for the content.</span></span>

<span data-ttu-id="ba4d9-141">Chaque sortie vidéo est représentée par une instance de l’interface [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-141">Each video output is represented by an instance of the [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) interface.</span></span> <span data-ttu-id="ba4d9-142">Vous pouvez utiliser un périphérique Direct3D ou surveiller les descripteurs pour obtenir les sorties vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-142">You can use a Direct3D device or monitor handles to get the video outputs.</span></span>

<span data-ttu-id="ba4d9-143">Utilisation d’un appareil Direct3D :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-143">Using a Direct3D device:</span></span>

1.  <span data-ttu-id="ba4d9-144">Récupérez le pointeur **IDirect3DDevice9** pour le périphérique Direct3D que votre application utilisera pour créer des surfaces qui contiendront les images vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-144">Get the **IDirect3DDevice9** pointer for the Direct3D device that your application will use to create surfaces to hold the video frames.</span></span>
2.  <span data-ttu-id="ba4d9-145">Appelez la fonction [**OPMGetVideoOutputsFromIDirect3DDevice9Object**](/windows/desktop/api/opmapi/nf-opmapi-opmgetvideooutputsfromidirect3ddevice9object) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-145">Call the [**OPMGetVideoOutputsFromIDirect3DDevice9Object**](/windows/desktop/api/opmapi/nf-opmapi-opmgetvideooutputsfromidirect3ddevice9object) function.</span></span> <span data-ttu-id="ba4d9-146">Cette fonction alloue un tableau de pointeurs [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) , un pour chaque sortie.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-146">This function allocates an array of [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) pointers, one for each output.</span></span>

<span data-ttu-id="ba4d9-147">Utilisation des handles de moniteur :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-147">Using monitor handles:</span></span>

1.  <span data-ttu-id="ba4d9-148">Appelez **EnumDisplayMonitors** pour récupérer les handles **HMONITOR** qui correspondent à la fenêtre vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-148">Call **EnumDisplayMonitors** to get the **HMONITOR** handles that correspond to the video window.</span></span> <span data-ttu-id="ba4d9-149">Plusieurs analyses peuvent être associées à la même fenêtre, de sorte que vous pouvez recevoir plusieurs descripteurs **HMONITOR** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-149">Several monitors can be associated with the same window, so you might get several **HMONITOR** handles.</span></span>
2.  <span data-ttu-id="ba4d9-150">Pour chaque handle d’analyse, appelez [**OPMGetVideoOutputsFromHMONITOR**](/windows/desktop/api/opmapi/nf-opmapi-opmgetvideooutputsfromhmonitor).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-150">For each monitor handle, call [**OPMGetVideoOutputsFromHMONITOR**](/windows/desktop/api/opmapi/nf-opmapi-opmgetvideooutputsfromhmonitor).</span></span> <span data-ttu-id="ba4d9-151">Cette fonction alloue un tableau de pointeurs [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) , un pour chaque sortie.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-151">This function allocates an array of [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) pointers, one for each output.</span></span>

## <a name="initializing-an-opm-session"></a><span data-ttu-id="ba4d9-152">Initialisation d’une session OPM</span><span class="sxs-lookup"><span data-stu-id="ba4d9-152">Initializing an OPM Session</span></span>

<span data-ttu-id="ba4d9-153">Avant d’envoyer des commandes ou des demandes d’État OPM, l’application doit vérifier que la sortie vidéo est approuvée et établir une clé de session.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-153">Before the application sends OPM commands or status requests, it must verify that the video output is trusted and establish a session key.</span></span> <span data-ttu-id="ba4d9-154">La clé de session est utilisée pour signer les données échangées entre l’application et le pilote Graphics.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-154">The session key is used to sign the data that is exchanged between the application and the graphics driver.</span></span>

<span data-ttu-id="ba4d9-155">L’API OPM définit une liaison qui établit l’approbation et définit la clé de session.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-155">The OPM API defines a handshake that establishes trust and sets the session key.</span></span> <span data-ttu-id="ba4d9-156">Vous devez effectuer cette négociation pour chaque instance de l’interface [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) , comme suit :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-156">You must perform this handshake for each instance of the [**IOPMVideoOutput**](/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput) interface, as follows:</span></span>

1.  <span data-ttu-id="ba4d9-157">Appelez [**IOPMVideoOutput :: StartInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-startinitialization).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-157">Call [**IOPMVideoOutput::StartInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-startinitialization).</span></span> <span data-ttu-id="ba4d9-158">Cette méthode récupère deux éléments de données :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-158">This method retrieves two pieces of data:</span></span>
    -   <span data-ttu-id="ba4d9-159">Nombre aléatoire, généré par le pilote.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-159">A random number, generated by the driver.</span></span> <span data-ttu-id="ba4d9-160">Vous allez utiliser ce numéro pour terminer la négociation.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-160">You will use this number to complete the handshake.</span></span>
    -   <span data-ttu-id="ba4d9-161">Chaîne de certificats X. 509 du pilote.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-161">The driver's X.509 certificate chain.</span></span>
2.  <span data-ttu-id="ba4d9-162">Vérifiez que la chaîne de certificats a été signée par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-162">Verify that the certificate chain has been signed by Microsoft.</span></span>
    > [!Note]  
    > <span data-ttu-id="ba4d9-163">La révocation de certificat est en dehors de la portée de OPM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-163">Certificate revocation is outside the scope of OPM.</span></span>

     

3.  <span data-ttu-id="ba4d9-164">Récupérez la clé publique du pilote à partir de la chaîne de certificats.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-164">Get the driver's public key from the certificate chain.</span></span>
4.  <span data-ttu-id="ba4d9-165">Générez une clé de session AES 128 bits.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-165">Generate a 128-bit AES session key.</span></span>
5.  <span data-ttu-id="ba4d9-166">Générez deux nombres aléatoires de 32 bits :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-166">Generate two random 32-bit numbers:</span></span>

    -   <span data-ttu-id="ba4d9-167">Numéro de séquence de départ pour les demandes d’État OPM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-167">The starting sequence number for OPM status requests.</span></span>
    -   <span data-ttu-id="ba4d9-168">Numéro de séquence de départ pour les commandes OPM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-168">The starting sequence number for OPM commands.</span></span>

    <span data-ttu-id="ba4d9-169">Ces valeurs doivent être générées à l’aide d’un générateur de nombres pseudo-aléatoires sécurisé par chiffrement, tel que **CryptGenRandom**.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-169">These numbers must be generated using a cryptographically secure pseudo-random number generator, such as **CryptGenRandom**.</span></span>

6.  <span data-ttu-id="ba4d9-170">Copiez le nombre aléatoire du pilote (obtenu à l’étape 1), la clé de session et les deux numéros séquentiels dans une structure de [**\_ \_ \_ paramètres d’initialisation chiffrée opm**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_encrypted_initialization_parameters) , comme décrit dans [**IOPMVideoOutput :: FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-170">Copy the driver's random number (obtained in step 1), the session key, and the two sequence numbers into an [**OPM\_ENCRYPTED\_INITIALIZATION\_PARAMETERS**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_encrypted_initialization_parameters) structure, as described in [**IOPMVideoOutput::FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization).</span></span>
7.  <span data-ttu-id="ba4d9-171">Chiffrez la structure des [**\_ \_ \_ paramètres d’initialisation chiffrée OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_encrypted_initialization_parameters) avec RSAES-OAEP, à l’aide de la clé publique du pilote, qui se trouve dans le certificat du pilote.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-171">Encrypt the [**OPM\_ENCRYPTED\_INITIALIZATION\_PARAMETERS**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_encrypted_initialization_parameters) structure with RSAES-OAEP, using the driver's public key, which is found in the driver's certificate.</span></span>
8.  <span data-ttu-id="ba4d9-172">Appelez [**IOPMVideoOutput :: FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-172">Call [**IOPMVideoOutput::FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization).</span></span>

## <a name="sending-opm-status-requests"></a><span data-ttu-id="ba4d9-173">Envoi de demandes d’État OPM</span><span class="sxs-lookup"><span data-stu-id="ba4d9-173">Sending OPM Status Requests</span></span>

<span data-ttu-id="ba4d9-174">Les demandes d’État OPM renvoient des informations sur la sortie vidéo, telles que le type de connecteur physique et le niveau de protection actuel.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-174">OPM status requests return information about the video output, such as the type of physical connector and the current protection level.</span></span> <span data-ttu-id="ba4d9-175">Pour obtenir la liste des types de demande, consultez [demandes d’État OPM](opm-status-requests.md).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-175">For a list of request types, see [OPM Status Requests](opm-status-requests.md).</span></span>

<span data-ttu-id="ba4d9-176">Pour envoyer une demande d’État, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-176">To send a status request, perform the following steps.</span></span>

1.  <span data-ttu-id="ba4d9-177">Initialisez une structure de [**\_ paramètres d’extraction d' \_ informations \_ OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) comme indiqué dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-177">Initialize an [**OPM\_GET\_INFO\_PARAMETERS**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) structure as shown in the following table.</span></span>

    | <span data-ttu-id="ba4d9-178">Membre</span><span class="sxs-lookup"><span data-stu-id="ba4d9-178">Member</span></span>               | <span data-ttu-id="ba4d9-179">Description</span><span class="sxs-lookup"><span data-stu-id="ba4d9-179">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                 |
    |----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="ba4d9-180">**omac**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-180">**omac**</span></span>             | <span data-ttu-id="ba4d9-181">Ignorez ce champ pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-181">Skip this field for now.</span></span>                                                                                                                                                                                                                                                                                                                                                    |
    | <span data-ttu-id="ba4d9-182">**rnRandomNumber**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-182">**rnRandomNumber**</span></span>   | <span data-ttu-id="ba4d9-183">Nombre aléatoire 128 bits sécurisé par chiffrement.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-183">A cryptographically secure 128-bit random number.</span></span> <span data-ttu-id="ba4d9-184">Chaque fois que vous faites une demande d’État, générez toujours un nouveau nombre aléatoire, même si vous effectuez la même requête.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-184">Whenever you make a status request, always generate a new random number, even if you are making the same request.</span></span> <span data-ttu-id="ba4d9-185">Stockez le nombre dans une variable, car vous devrez y faire référence ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-185">Store the number in a variable, because you will need to refer to it later.</span></span>                                                                                                                             |
    | <span data-ttu-id="ba4d9-186">**guidInformation**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-186">**guidInformation**</span></span>  | <span data-ttu-id="ba4d9-187">GUID qui identifie la demande d’État.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-187">A GUID that identifies the status request.</span></span> <span data-ttu-id="ba4d9-188">Pour obtenir la liste des demandes d’État, consultez [demandes d’État OPM](opm-status-requests.md).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-188">For a list of status requests, see [OPM Status Requests](opm-status-requests.md).</span></span>                                                                                                                                                                                                                                               |
    | <span data-ttu-id="ba4d9-189">**ulSequenceNumber**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-189">**ulSequenceNumber**</span></span> | <span data-ttu-id="ba4d9-190">Numéro séquentiel.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-190">The sequence number.</span></span> <span data-ttu-id="ba4d9-191">Pour la première demande d’État, utilisez le numéro de séquence de départ que vous avez spécifié dans la méthode [**IOPMVideoOutput :: FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization) (étape 5 de l' [initialisation d’une session OPM](#initializing-an-opm-session)). Chaque fois que vous effectuez une autre demande d’État, incrémentez ce nombre de 1.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-191">For the first status request, use the starting sequence number that you specified in the [**IOPMVideoOutput::FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization) method (step 5 of [Initializing an OPM Session](#initializing-an-opm-session).) Each time you make another status request, increment this number by 1.</span></span> |
    | <span data-ttu-id="ba4d9-192">**abParameters**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-192">**abParameters**</span></span>     | <span data-ttu-id="ba4d9-193">Tableau d’octets qui contient des données d’entrée supplémentaires pour la demande.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-193">A byte array that contains additional input data for the request.</span></span> <span data-ttu-id="ba4d9-194">Le format des données d’entrée est indiqué dans la rubrique de référence pour chaque demande d’État.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-194">The format of the input data is listed in the reference topic for each status request.</span></span>                                                                                                                                                                                                                    |
    | <span data-ttu-id="ba4d9-195">**cbParametersSize**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-195">**cbParametersSize**</span></span> | <span data-ttu-id="ba4d9-196">Taille des données valides dans le tableau **abParameters** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-196">The size of the valid data in the **abParameters** array.</span></span> <span data-ttu-id="ba4d9-197">Le contenu du reste du tableau n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-197">The contents of the rest of the array are undefined.</span></span>                                                                                                                                                                                                                                                              |

    

     

2.  <span data-ttu-id="ba4d9-198">Calculez l’OMAC CBC MAC (-1) pour calculer un hachage pour le bloc de données qui apparaît après le membre **OMAC** , puis affectez la valeur au membre **OMAC** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-198">Calculate the one-key CBC MAC (OMAC-1) to calculate a hash for the block of data that appears after the **omac** member, and then set the **omac** member to this value.</span></span> <span data-ttu-id="ba4d9-199">Consultez l' [exemple de code OPM](opm-example-code.md).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-199">See [OPM Example Code](opm-example-code.md).</span></span>
3.  <span data-ttu-id="ba4d9-200">Appelez la méthode [**IOPMVideoOutput :: GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-200">Call the [**IOPMVideoOutput::GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) method.</span></span> <span data-ttu-id="ba4d9-201">Transmettez un pointeur vers la structure des paramètres de l' [**\_ obtenir des \_ informations \_ OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) et un pointeur vers une structure d' [**\_ \_ informations OPM demandée**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-201">Pass in a pointer to the [**OPM\_GET\_INFO\_PARAMETERS**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) structure and a pointer to an [**OPM\_REQUESTED\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) structure.</span></span> <span data-ttu-id="ba4d9-202">La réponse du pilote est écrite dans la structure d' **\_ \_ informations demandée par OPM** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-202">The driver's response is written to the **OPM\_REQUESTED\_INFORMATION** structure.</span></span>
    -   <span data-ttu-id="ba4d9-203">Le membre **OMAC** de cette structure contient un OMAC calculé pour les données qui suivent ce membre.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-203">The **omac** member of this structure contains an OMAC computed for the data that follows this member.</span></span>
    -   <span data-ttu-id="ba4d9-204">Le membre **abRequestedInformation** est un tableau d’octets qui contient les données de sortie de la réponse.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-204">The **abRequestedInformation** member is a byte array that contains output data for the response.</span></span> <span data-ttu-id="ba4d9-205">Le format des données de sortie est indiqué dans la rubrique de référence pour chaque demande d’État.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-205">The format of the output data is listed in the reference topic for each status request.</span></span>
4.  <span data-ttu-id="ba4d9-206">Calculez un OMAC pour la structure d’informations de l' [**OPM \_ \_ demandée**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) , à l’exclusion du membre **OMAC** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-206">Calculate an OMAC for the [**OPM\_REQUESTED\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) structure, not including the **omac** member.</span></span> <span data-ttu-id="ba4d9-207">Vérifiez que OMAC correspond à la valeur du membre **OMAC** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-207">Verify that the OMAC matches the value in the **omac** member.</span></span>
5.  <span data-ttu-id="ba4d9-208">Assurez-vous que le membre **cbRequestedInformationSize** de la structure d' [**\_ \_ informations demandée par OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) donne la taille appropriée pour les données de sortie.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-208">Make sure the **cbRequestedInformationSize** member of the [**OPM\_REQUESTED\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) structure gives the correct size for the output data.</span></span> <span data-ttu-id="ba4d9-209">Par exemple, les données de sortie de la requête de [**\_ \_ \_ type de connecteur OPM obtenir**](opm-get-connector-type.md) sont une structure d' [**\_ \_ informations standard OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) , donc la valeur de **cbRequestedInformationSize** doit être `sizeof(OPM_STANDARD_INFORMATION)` .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-209">For example, the output data for the [**OPM\_GET\_CONNECTOR\_TYPE**](opm-get-connector-type.md) query is an [**OPM\_STANDARD\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) structure, so the value of **cbRequestedInformationSize** should be `sizeof(OPM_STANDARD_INFORMATION)`.</span></span>
6.  <span data-ttu-id="ba4d9-210">Effectuez un cast du membre **abRequestedInformation** de la structure d’informations de la [**\_ demande \_ OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) vers la structure de données de sortie correcte.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-210">Cast the **abRequestedInformation** member of the [**OPM\_REQUESTED\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) structure to the correct output data structure.</span></span> <span data-ttu-id="ba4d9-211">Par exemple, si la demande d’état [**est \_ \_ \_ type de connecteur OPM obtenir**](opm-get-connector-type.md), effectuez un cast de **AbRequestedInformation** en structure d' [**\_ \_ informations standard OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-211">For example, if the status request is [**OPM\_GET\_CONNECTOR\_TYPE**](opm-get-connector-type.md), cast **abRequestedInformation** to an [**OPM\_STANDARD\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) structure.</span></span>
7.  <span data-ttu-id="ba4d9-212">Assurez-vous que le membre **rnRandomNumber** de la structure de données de sortie correspond à la valeur de **rnRandomNumber** de l’étape 1.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-212">Make sure the **rnRandomNumber** member of the output data structure matches the value of **rnRandomNumber** from step 1.</span></span>
8.  <span data-ttu-id="ba4d9-213">Vérifiez le membre **ulStatusFlags** de la structure des données de sortie, comme décrit dans [gestion d’une sortie vidéo désactivée](#handling-a-disabled-video-output).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-213">Check the **ulStatusFlags** member of the output data structure, as described in [Handling a Disabled Video Output](#handling-a-disabled-video-output).</span></span>

<span data-ttu-id="ba4d9-214">Si l’une des vérifications des étapes 5 à 8 échoue, l’application doit cesser d’indiquer le contenu protégé.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-214">If any of the checks in steps 5–8 fails, the application must stop showing protected content.</span></span>

## <a name="sending-opm-commands"></a><span data-ttu-id="ba4d9-215">Envoi de commandes OPM</span><span class="sxs-lookup"><span data-stu-id="ba4d9-215">Sending OPM Commands</span></span>

<span data-ttu-id="ba4d9-216">Les commandes OPM sont utilisées pour définir le niveau de protection et d’autres paramètres sur la sortie vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-216">OPM commands are used to set the protection level and other settings on the video output.</span></span> <span data-ttu-id="ba4d9-217">L’envoi d’une commande OPM est semblable à l’envoi d’une demande d’État, à ceci près qu’il n’y a pas de données de réponse du pilote.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-217">Sending an OPM command is similar to sending a status request, except there is no response data from the driver.</span></span> <span data-ttu-id="ba4d9-218">Pour obtenir la liste des commandes, consultez les [commandes OPM](opm-commands.md).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-218">For a list of commands, see [OPM Commands](opm-commands.md).</span></span>

<span data-ttu-id="ba4d9-219">Pour envoyer une commande OPM, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-219">To send an OPM command, perform the following steps.</span></span>

1.  <span data-ttu-id="ba4d9-220">Remplissez une structure [**de \_ \_ paramètres OPM configure**](/windows/desktop/api/opmapi/ns-opmapi-opm_configure_parameters) comme indiqué dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-220">Fill in an [**OPM\_CONFIGURE\_PARAMETERS**](/windows/desktop/api/opmapi/ns-opmapi-opm_configure_parameters) structure as shown in the following table.</span></span>

    | <span data-ttu-id="ba4d9-221">Membre</span><span class="sxs-lookup"><span data-stu-id="ba4d9-221">Member</span></span>                | <span data-ttu-id="ba4d9-222">Description</span><span class="sxs-lookup"><span data-stu-id="ba4d9-222">Description</span></span>                                                                                                                                                                                                                                                                                                                                                   |
    |-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="ba4d9-223">**omac**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-223">**omac**</span></span>              | <span data-ttu-id="ba4d9-224">Ignorez ce champ pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-224">Skip this field for now.</span></span>                                                                                                                                                                                                                                                                                                                                      |
    | <span data-ttu-id="ba4d9-225">**guidSetting**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-225">**guidSetting**</span></span>       | <span data-ttu-id="ba4d9-226">GUID qui identifie la commande.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-226">A GUID that identifies the command.</span></span> <span data-ttu-id="ba4d9-227">Pour obtenir la liste des commandes, consultez les [commandes OPM](opm-commands.md).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-227">For a list of commands, see [OPM Commands](opm-commands.md).</span></span>                                                                                                                                                                                                                                                             |
    | <span data-ttu-id="ba4d9-228">**ulSequenceNumber**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-228">**ulSequenceNumber**</span></span>  | <span data-ttu-id="ba4d9-229">Numéro séquentiel.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-229">The sequence number.</span></span> <span data-ttu-id="ba4d9-230">Pour la première commande, utilisez le numéro de séquence de départ que vous avez spécifié dans la méthode [**IOPMVideoOutput :: FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization) (étape 5 de [l’initialisation d’une session OPM](#initializing-an-opm-session)). Chaque fois que vous envoyez une autre commande, incrémentez ce nombre de 1.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-230">For the first command, use the starting sequence number that you specified in the [**IOPMVideoOutput::FinishInitialization**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-finishinitialization) method (step 5 of [Initializing an OPM Session](#initializing-an-opm-session).) Each time you send another command, increment this number by 1.</span></span> |
    | <span data-ttu-id="ba4d9-231">**abParameters**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-231">**abParameters**</span></span>      | <span data-ttu-id="ba4d9-232">Tableau d’octets qui contient des données d’entrée supplémentaires pour la commande.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-232">A byte array that contains additional input data for the command.</span></span> <span data-ttu-id="ba4d9-233">Le format des données d’entrée est indiqué dans la rubrique de référence pour chaque commande.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-233">The format of the input data is listed in the reference topic for each command.</span></span>                                                                                                                                                                                                             |
    | <span data-ttu-id="ba4d9-234">**cbSettingDataSize**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-234">**cbSettingDataSize**</span></span> | <span data-ttu-id="ba4d9-235">Taille des données valides dans le tableau **abParameters** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-235">The size of the valid data in the **abParameters** array.</span></span> <span data-ttu-id="ba4d9-236">Le contenu du reste du tableau n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-236">The contents of the rest of the array are undefined.</span></span>                                                                                                                                                                                                                                                |

    

     

2.  <span data-ttu-id="ba4d9-237">Calculez un OMAC pour le bloc de données qui apparaît après le membre **OMAC** , puis définissez cette valeur pour le membre **OMAC** .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-237">Calculate an OMAC for the block of data that appears after the **omac** member, and then set the **omac** member to this value.</span></span>
3.  <span data-ttu-id="ba4d9-238">Appelez [**IOPMVideoOutput :: configure**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-configure).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-238">Call [**IOPMVideoOutput::Configure**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-configure).</span></span>

<span data-ttu-id="ba4d9-239">Pour la plupart des commandes, il existe une demande d’État correspondante qui retourne l’état de la commande.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-239">For most commands, there is a corresponding status request that returns the status of the command.</span></span> <span data-ttu-id="ba4d9-240">Par exemple, la commande [**OPM \_ Set \_ protection \_ Level**](opm-set-protection-level.md) définit le niveau de protection et la commande [**OPM obtenir le \_ \_ \_ \_ niveau**](opm-get-virtual-protection-level.md) de protection virtuel obtient le niveau de protection actuel.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-240">For example, the [**OPM\_SET\_PROTECTION\_LEVEL**](opm-set-protection-level.md) command sets the protection level, and the [**OPM\_GET\_VIRTUAL\_PROTECTION\_LEVEL**](opm-get-virtual-protection-level.md) command gets the current protection level.</span></span>

## <a name="handling-a-disabled-video-output"></a><span data-ttu-id="ba4d9-241">Gestion d’une sortie vidéo désactivée</span><span class="sxs-lookup"><span data-stu-id="ba4d9-241">Handling a Disabled Video Output</span></span>

<span data-ttu-id="ba4d9-242">Une sortie vidéo peut se désactiver à tout moment pour empêcher l’utilisation non autorisée du contenu vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-242">A video output might disable itself at any time to prevent the unauthorized use of video content.</span></span> <span data-ttu-id="ba4d9-243">Cela peut se produire si un mécanisme de protection ne fonctionne pas, car le pilote détecte une falsification, ou l’affichage a été déconnecté du connecteur physique.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-243">This might occur because a protection mechanism stops working, because the driver detects tampering, or because the display was disconnected from the physical connector.</span></span> <span data-ttu-id="ba4d9-244">Lorsqu’une sortie vidéo est désactivée, aucune image vidéo n’est affichée.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-244">While a video output is disabled, no video frames are displayed.</span></span>

<span data-ttu-id="ba4d9-245">Bien que la protection du contenu soit activée, une application doit régulièrement (au moins une fois toutes les 2 secondes) effectuer les étapes suivantes.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-245">While content protection is enabled, an application should periodically (at least once every 2 seconds) perform the following steps.</span></span>

1.  <span data-ttu-id="ba4d9-246">Appelez [**IOPMVideoOutput :: GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) pour envoyer au [**niveau de \_ protection OPM obtenir le \_ \_ \_ niveau de protection réel**](opm-get-actual-protection-level.md) ou [**OPM obtenir le \_ \_ \_ \_ niveau de protection virtuel**](opm-get-virtual-protection-level.md) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-246">Call [**IOPMVideoOutput::GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) to send either the [**OPM\_GET\_ACTUAL\_PROTECTION\_LEVEL**](opm-get-actual-protection-level.md) or [**OPM\_GET\_VIRTUAL\_PROTECTION\_LEVEL**](opm-get-virtual-protection-level.md) status request.</span></span> <span data-ttu-id="ba4d9-247">Les données de retour pour les deux commandes sont une structure d' [**\_ \_ informations standard OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-247">The return data for both commands is an [**OPM\_STANDARD\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) structure.</span></span>
2.  <span data-ttu-id="ba4d9-248">Vérifiez le membre **ulInformation** de la structure d' [**\_ \_ informations standard OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-248">Check the **ulInformation** member of the [**OPM\_STANDARD\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) structure.</span></span> <span data-ttu-id="ba4d9-249">Ce membre contient un indicateur qui indique si la protection du contenu est toujours activée.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-249">This member contains a flag indicating whether content protection is still enabled.</span></span> <span data-ttu-id="ba4d9-250">Si la protection du contenu est désactivée, arrêtez la vidéo immédiatement.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-250">If content protection is off, stop playing the video immediately.</span></span>
3.  <span data-ttu-id="ba4d9-251">Si la protection du contenu est activée, vérifiez le membre **ulStatusFlags** de la structure d' [**\_ \_ informations standard OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-251">If content protection is on, check the **ulStatusFlags** member of the [**OPM\_STANDARD\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) structure.</span></span> <span data-ttu-id="ba4d9-252">Si aucun indicateur n’est défini, la sortie vidéo fonctionne correctement.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-252">If no flags are set, the video output is working correctly.</span></span> <span data-ttu-id="ba4d9-253">Dans le cas contraire, la sortie vidéo est désactivée.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-253">Otherwise, the video output is disabled.</span></span>

<span data-ttu-id="ba4d9-254">Les indicateurs suivants sont définis pour **ulStatusFlags**.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-254">The following flags are defined for **ulStatusFlags**.</span></span>



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="ba4d9-255">Indicateur</span><span class="sxs-lookup"><span data-stu-id="ba4d9-255">Flag</span></span></th>
<th><span data-ttu-id="ba4d9-256">Description</span><span class="sxs-lookup"><span data-stu-id="ba4d9-256">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="ba4d9-257"><strong>OPM_STATUS_LINK_LOST</strong></span><span class="sxs-lookup"><span data-stu-id="ba4d9-257"><strong>OPM_STATUS_LINK_LOST</strong></span></span></td>
<td><span data-ttu-id="ba4d9-258">La protection de sortie a cessé de fonctionner pour une raison quelconque. par exemple, le périphérique d’affichage peut être débranché du conntector.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-258">Output protection stopped working for some reason; for example, the display device might be unplugged from the conntector.</span></span> <span data-ttu-id="ba4d9-259">Arrêtez la lecture et désactivez tous les mécanismes de protection de sortie.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-259">Stop playback and turn off all output protection mechanisms.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="ba4d9-260"><strong>OPM_STATUS_RENEGOTIATION_REQUIRED</strong></span><span class="sxs-lookup"><span data-stu-id="ba4d9-260"><strong>OPM_STATUS_RENEGOTIATION_REQUIRED</strong></span></span></td>
<td><span data-ttu-id="ba4d9-261">L’application doit rétablir la session OPM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-261">The application must reestablish the OPM session.</span></span> <span data-ttu-id="ba4d9-262">Répondez comme suit :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-262">Respond as follows:</span></span>
<ol>
<li><span data-ttu-id="ba4d9-263">Arrêter la lecture.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-263">Stop playback.</span></span></li>
<li><span data-ttu-id="ba4d9-264">Désactivez tous les mécanismes de protection.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-264">Turn off all protection mechanisms.</span></span></li>
<li><span data-ttu-id="ba4d9-265">Libérer l’interface <a href="/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput"><strong>IOPMVideoOutput</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-265">Release the <a href="/windows/desktop/api/opmapi/nn-opmapi-iopmvideooutput"><strong>IOPMVideoOutput</strong></a> interface.</span></span></li>
<li><span data-ttu-id="ba4d9-266">Recréez toutes les surfaces vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-266">Recreate all video surfaces.</span></span></li>
<li><span data-ttu-id="ba4d9-267">Créez un nouvel objet OPM et tentez de rétablir la protection du contenu.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-267">Create a new OPM object and attempt to reestablish content protection.</span></span> <span data-ttu-id="ba4d9-268">En cas d’échec, affiche un message d’erreur à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-268">If this fails, display an error message to the user.</span></span> <span data-ttu-id="ba4d9-269">Ne lisez plus de contenu vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-269">Do not play any more video content.</span></span></li>
</ol></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="ba4d9-270"><strong>OPM_STATUS_REVOKED_HDCP_DEVICE_ATTACHED</strong></span><span class="sxs-lookup"><span data-stu-id="ba4d9-270"><strong>OPM_STATUS_REVOKED_HDCP_DEVICE_ATTACHED</strong></span></span></td>
<td><span data-ttu-id="ba4d9-271">Cet indicateur s’applique uniquement lorsque HDCP est utilisé et indique la présence d’un appareil HDCP révoqué.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-271">This flag applies only when HDCP is used, and indicates the presence of a revoked HDCP device.</span></span> <span data-ttu-id="ba4d9-272">Arrêtez la lecture et désactivez tous les mécanismes de protection sur cette sortie vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-272">Stop playback and turn off all protection mechanisms on this video output.</span></span> <span data-ttu-id="ba4d9-273">Lorsque cet indicateur est défini, l’indicateur <strong>OPM_STATUS_LINK_LOST</strong> est également défini.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-273">When this flag is set, the <strong>OPM_STATUS_LINK_LOST</strong> flag is also set.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="ba4d9-274"><strong>OPM_STATUS_REVOKED_HDCP_DEVICE_ATTACHED</strong></span><span class="sxs-lookup"><span data-stu-id="ba4d9-274"><strong>OPM_STATUS_REVOKED_HDCP_DEVICE_ATTACHED</strong></span></span></td>
<td><span data-ttu-id="ba4d9-275">Le pilote a détecté une falsification.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-275">The driver has detected tampering.</span></span> <span data-ttu-id="ba4d9-276">Arrêter la lecture et ne pas lire d’autres vidéos à l’aide de cette sortie vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-276">Stop playback, and do not play any more video using this video output.</span></span> <span data-ttu-id="ba4d9-277">Il est également judicieux de cesser d’utiliser d’autres sorties vidéo, car le système risque d’être compromis.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-277">It is also a good idea to stop using any other video outputs, because the system might be compromised.</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="using-hdcp-to-protect-content"></a><span data-ttu-id="ba4d9-278">Utilisation de HDCP pour protéger du contenu</span><span class="sxs-lookup"><span data-stu-id="ba4d9-278">Using HDCP to Protect Content</span></span>

<span data-ttu-id="ba4d9-279">Cette section décrit comment activer la protection de sortie HDCP à l’aide de OPM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-279">This section describes how to enable HDCP output protection using OPM.</span></span> <span data-ttu-id="ba4d9-280">Voici un aperçu général des étapes que l’application doit effectuer.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-280">Here is a general outline of the steps the application must take.</span></span> <span data-ttu-id="ba4d9-281">Les détails sont fournis plus loin dans cette section.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-281">Details are given later in this section.</span></span>

1.  <span data-ttu-id="ba4d9-282">L’application devra peut-être fournir un SRM à la sortie vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-282">The application might have to provide an SRM to the video output.</span></span> <span data-ttu-id="ba4d9-283">Le mécanisme de réception des SRMs est en dehors de l’étendue de l’interface OPM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-283">The mechanism for receiving SRMs is outside the scope of the OPM interface.</span></span> <span data-ttu-id="ba4d9-284">Par exemple, SRMs peut être fourni dans le cadre d’un flux de diffusion.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-284">For example, SRMs might be delivered as part of a broadcast stream.</span></span>
2.  <span data-ttu-id="ba4d9-285">L’application active la protection de sortie HDCP.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-285">The application enables HDCP output protection.</span></span>
3.  <span data-ttu-id="ba4d9-286">L’application lit le contenu vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-286">The application plays the video content.</span></span> <span data-ttu-id="ba4d9-287">Périodiquement, l’application interroge le pilote pour s’assurer que HDCP est activé.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-287">Periodically, the application polls the driver to make sure HDCP is on.</span></span>
4.  <span data-ttu-id="ba4d9-288">Une fois la lecture terminée, l’application désactive HDCP.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-288">When playback is complete, the application turns off HDCP.</span></span>

### <a name="setting-the-srm"></a><span data-ttu-id="ba4d9-289">Configuration de SRM</span><span class="sxs-lookup"><span data-stu-id="ba4d9-289">Setting the SRM</span></span>

<span data-ttu-id="ba4d9-290">Pour définir le SRM, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-290">To set the SRM, perform the following steps.</span></span>

1.  <span data-ttu-id="ba4d9-291">Initialisez une structure de [**\_ \_ \_ \_ paramètres SRM Set HDCP**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_hdcp_srm_parameters) avec le numéro de version SRM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-291">Initialize an [**OPM\_SET\_HDCP\_SRM\_PARAMETERS**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_hdcp_srm_parameters) structure with the SRM version number.</span></span>
2.  <span data-ttu-id="ba4d9-292">Stockez le SRM dans une variable.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-292">Store the SRM in a variable.</span></span>
3.  <span data-ttu-id="ba4d9-293">Envoie une commande [**OPM \_ Set \_ HDCP \_ SRM**](opm-set-hdcp-srm.md) à la sortie vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-293">Send an [**OPM\_SET\_HDCP\_SRM**](opm-set-hdcp-srm.md) command to the video output.</span></span> <span data-ttu-id="ba4d9-294">Utilisez la procédure décrite dans la rubrique [envoi de commandes OPM](#sending-opm-commands).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-294">Use the procedure described in [Sending OPM Commands](#sending-opm-commands).</span></span>
    -   <span data-ttu-id="ba4d9-295">Le membre **abParameters** de la structure des [**\_ \_ paramètres de configuration de opm**](/windows/desktop/api/opmapi/ns-opmapi-opm_configure_parameters) contient la structure des [**\_ \_ \_ \_ paramètres OPM Set HDCP**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_hdcp_srm_parameters) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-295">The **abParameters** member of the [**OPM\_CONFIGURE\_PARAMETERS**](/windows/desktop/api/opmapi/ns-opmapi-opm_configure_parameters) structure contains the [**OPM\_SET\_HDCP\_SRM\_PARAMETERS**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_hdcp_srm_parameters) structure.</span></span>
    -   <span data-ttu-id="ba4d9-296">Le paramètre *pbAdditionalParameters* de la méthode [**IOPMVideoOutput :: configure**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-configure) pointe vers la variable qui contient le SRM.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-296">The *pbAdditionalParameters* parameter of the [**IOPMVideoOutput::Configure**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-configure) method points to the variable that contains the SRM.</span></span>
4.  <span data-ttu-id="ba4d9-297">Envoyer une demande d’état de la [**\_ \_ \_ \_ \_ version HDCP SRM actuelle**](opm-get-current-hdcp-srm-version.md) à la sortie vidéo.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-297">Send an [**OPM\_GET\_CURRENT\_HDCP\_SRM\_VERSION**](opm-get-current-hdcp-srm-version.md) status request to the video output.</span></span> <span data-ttu-id="ba4d9-298">Utilisez la procédure décrite dans la rubrique [envoi de demandes d’État OPM](#sending-opm-status-requests).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-298">Use the procedure described in [Sending OPM Status Requests](#sending-opm-status-requests).</span></span> <span data-ttu-id="ba4d9-299">Cette demande d’État n’a pas de données d’entrée, donc le contenu du membre **abParameters** de la structure des paramètres de l' [**extraction d' \_ \_ informations \_ OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-299">This status request has no input data, so the contents of the **abParameters** member of the [**OPM\_GET\_INFO\_PARAMETERS**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) structure are undefined.</span></span>
5.  <span data-ttu-id="ba4d9-300">Quand la méthode [**IOPMVideoOutput :: GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) retourne, le tableau **abRequestedInformation** dans la structure d' [**\_ \_ informations demandée par OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) contient une structure d' [**\_ \_ informations standard OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-300">When the [**IOPMVideoOutput::GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) method returns, the **abRequestedInformation** array in the [**OPM\_REQUESTED\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) structure contains an [**OPM\_STANDARD\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) structure.</span></span> <span data-ttu-id="ba4d9-301">Le membre **ulInformation** de cette structure contient le numéro de version du SRM actuel.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-301">The **ulInformation** member of this structure contains the version number of the current SRM.</span></span> <span data-ttu-id="ba4d9-302">Cette valeur doit être égale à la valeur de l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-302">This value must equal the value from step 2.</span></span>

### <a name="enabling-hdcp"></a><span data-ttu-id="ba4d9-303">Activation de HDCP</span><span class="sxs-lookup"><span data-stu-id="ba4d9-303">Enabling HDCP</span></span>

<span data-ttu-id="ba4d9-304">Pour activer HDCP, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-304">To enable HDCP, perform the following steps.</span></span>

1.  <span data-ttu-id="ba4d9-305">Initialisez une structure de paramètres de niveau de protection de l' [**\_ ensemble \_ \_ \_ OPM**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_protection_level_parameters) avec les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="ba4d9-305">Initialize an [**OPM\_SET\_PROTECTION\_LEVEL\_PARAMETERS**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_protection_level_parameters) structure with the following values:</span></span>
    -   <span data-ttu-id="ba4d9-306">**ulProtectionType**  =  **OPM \_ TYPE de PROTECTION \_ \_ HDCP**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-306">**ulProtectionType** = **OPM\_PROTECTION\_TYPE\_HDCP**</span></span>
    -   <span data-ttu-id="ba4d9-307">**ulProtectionLevel**  =  **OPM \_ HDCP \_ sur**</span><span class="sxs-lookup"><span data-stu-id="ba4d9-307">**ulProtectionLevel** = **OPM\_HDCP\_ON**</span></span>
    -   <span data-ttu-id="ba4d9-308">**Réservé** = 0</span><span class="sxs-lookup"><span data-stu-id="ba4d9-308">**Reserved** = 0</span></span>
    -   <span data-ttu-id="ba4d9-309">**Reserved2** = 0</span><span class="sxs-lookup"><span data-stu-id="ba4d9-309">**Reserved2** = 0</span></span>
2.  <span data-ttu-id="ba4d9-310">Envoie une commande de [**\_ niveau de \_ protection \_ de jeu OPM**](opm-set-protection-level.md) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-310">Send an [**OPM\_SET\_PROTECTION\_LEVEL**](opm-set-protection-level.md) command.</span></span> <span data-ttu-id="ba4d9-311">Les données d’entrée dans le tableau **abParameters** sont la structure des paramètres de niveau de protection de l' [**\_ ensemble \_ \_ \_ OPM**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_protection_level_parameters) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-311">The input data in the **abParameters** array is the [**OPM\_SET\_PROTECTION\_LEVEL\_PARAMETERS**](/windows/desktop/api/opmapi/ns-opmapi-opm_set_protection_level_parameters) structure.</span></span>
3.  <span data-ttu-id="ba4d9-312">Envoyer une demande [**OPM \_ obtenir le \_ \_ \_ niveau de protection virtuel**](opm-get-virtual-protection-level.md) pour vérifier si HDCP est activé.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-312">Send an [**OPM\_GET\_VIRTUAL\_PROTECTION\_LEVEL**](opm-get-virtual-protection-level.md) status request to check whether HDCP is enabled.</span></span> <span data-ttu-id="ba4d9-313">Les 4 premiers octets du membre **abParameters** de la structure des paramètres de l’extraction de l' [**\_ \_ information \_ OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) contiennent la valeur de **\_ protection OPM \_ type \_ HDCP**.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-313">The first 4 bytes of the **abParameters** member of the [**OPM\_GET\_INFO\_PARAMETERS**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_get_info_parameters) structure contain the value **OPM\_PROTECTION\_TYPE\_HDCP**.</span></span>

<span data-ttu-id="ba4d9-314">Lorsque la méthode [**GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) retourne, le tableau **abRequestedInformation** dans la structure d' [**\_ \_ informations demandée par OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) contient une structure d' [**\_ \_ informations standard OPM**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-314">When the [**GetInformation**](/windows/desktop/api/opmapi/nf-opmapi-iopmvideooutput-getinformation) method returns, the **abRequestedInformation** array in the [**OPM\_REQUESTED\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_requested_information) structure contains an [**OPM\_STANDARD\_INFORMATION**](/windows/desktop/api/ksopmapi/ns-ksopmapi-opm_standard_information) structure.</span></span> <span data-ttu-id="ba4d9-315">Le membre **ulInformation** de cette structure contient une valeur de l’énumération de [**\_ \_ \_ niveau de protection HDCP HDCP**](/windows/desktop/api/opmapi/ne-opmapi-opm_hdcp_protection_level) .</span><span class="sxs-lookup"><span data-stu-id="ba4d9-315">The **ulInformation** member of this structure contains a value from the [**OPM\_HDCP\_PROTECTION\_LEVEL**](/windows/desktop/api/opmapi/ne-opmapi-opm_hdcp_protection_level) enumeration.</span></span> <span data-ttu-id="ba4d9-316">Si la valeur est égale **\_ à OPM HDCP \_ sur**, cela signifie que HDCP est activé.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-316">If the value equals **OPM\_HDCP\_ON**, it means HDCP is enabled.</span></span> <span data-ttu-id="ba4d9-317">Sinon, répétez les étapes 1 à 2 jusqu’à ce que HDCP soit activé ou qu’une erreur se produise.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-317">Otherwise, repeat steps 1–2 until HDCP is enabled, or an error occurs.</span></span> <span data-ttu-id="ba4d9-318">(N’oubliez pas d’incrémenter le numéro de séquence et de générer à chaque fois un nouveau nombre aléatoire).</span><span class="sxs-lookup"><span data-stu-id="ba4d9-318">(Remember to increment the sequence number and generate a new random number each time.)</span></span>

<span data-ttu-id="ba4d9-319">Il faut généralement entre 100 et 200 millisecondes pour activer HDCP, mais cela peut prendre plus de temps.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-319">It usually takes between 100 and 200 milliseconds to enable HDCP, but it can take longer.</span></span> <span data-ttu-id="ba4d9-320">Ne partez pas du principe que HDCP est activé tant que vous ne l’avez pas vérifié.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-320">Do not assume that HDCP is enabled until you have verified it.</span></span>

<span data-ttu-id="ba4d9-321">Lorsque l’application finit de regarder du contenu protégé, désactivez la protection HDCP.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-321">When the application finishes playing protected content, turn off HDCP.</span></span> <span data-ttu-id="ba4d9-322">Les étapes sont les mêmes que pour l’activation de HDCP, mais à l’étape 1, définissez **ulProtectionLevel** sur **OPM \_ HDCP sur \_ désactivé**.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-322">The steps are the same as for enabling HDCP, but in step 1, set **ulProtectionLevel** to **OPM\_HDCP\_OFF**.</span></span>

> [!Note]  
> <span data-ttu-id="ba4d9-323">N’activez pas HDCP Si le type de connecteur est le **connecteur OPM de \_ \_ type \_ DisplayPort \_ intégré**.</span><span class="sxs-lookup"><span data-stu-id="ba4d9-323">Do not enable HDCP if the connector type is **OPM\_CONNECTOR\_TYPE\_DISPLAYPORT\_EMBEDDED**.</span></span> <span data-ttu-id="ba4d9-324">(Voir [**indicateurs de type de connecteur OPM**](opm-connector-type-flags.md).)</span><span class="sxs-lookup"><span data-stu-id="ba4d9-324">(See [**OPM Connector Type Flags**](opm-connector-type-flags.md).)</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="ba4d9-325">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="ba4d9-325">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ba4d9-326">Gestionnaire de protection de sortie</span><span class="sxs-lookup"><span data-stu-id="ba4d9-326">Output Protection Manager</span></span>](output-protection-manager.md)
</dt> </dl>

 

 



