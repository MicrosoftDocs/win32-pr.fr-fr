---
description: Fonctionnalités de la source réseau
ms.assetid: a4e20ecb-c145-4823-ae59-f6fc88593d86
title: Fonctionnalités de la source réseau
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e937a97cf743740d9cebf84ad477c52cdee5083
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104553996"
---
# <a name="network-source-features"></a><span data-ttu-id="c3891-103">Fonctionnalités de la source réseau</span><span class="sxs-lookup"><span data-stu-id="c3891-103">Network Source Features</span></span>

<span data-ttu-id="c3891-104">La source réseau fournit l’implémentation de base pour la diffusion en continu des fichiers multimédias et expose l’interface [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) .</span><span class="sxs-lookup"><span data-stu-id="c3891-104">The network source provides the base implementation for streaming media files and exposes the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface.</span></span> <span data-ttu-id="c3891-105">L’implémentation spécifique de la source réseau dépend du protocole utilisé pour ouvrir la source, par exemple RTSP ou HTTP.</span><span class="sxs-lookup"><span data-stu-id="c3891-105">The specific network source implementation depends on the protocol used to open the source such as RTSP or HTTP.</span></span> <span data-ttu-id="c3891-106">Les sources réseau spécifiques au protocole étendent les fonctionnalités réseau de base.</span><span class="sxs-lookup"><span data-stu-id="c3891-106">The protocol-specific network sources extend the basic network functionality.</span></span> <span data-ttu-id="c3891-107">Pour plus d’informations sur les schémas et les protocoles pris en charge, consultez [protocoles pris en charge](supported-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="c3891-107">For information about the supported schemes and protocols, see [Supported Protocols](supported-protocols.md).</span></span>

<span data-ttu-id="c3891-108">La source réseau :</span><span class="sxs-lookup"><span data-stu-id="c3891-108">The network source:</span></span>

-   <span data-ttu-id="c3891-109">Implémente des fonctionnalités telles que la mise en cache, la détection de proxy et la reconnexion automatique.</span><span class="sxs-lookup"><span data-stu-id="c3891-109">Implements features such as caching, proxy detection, and auto-reconnection.</span></span>
-   <span data-ttu-id="c3891-110">Convertit les appels indépendants du protocole du programme de résolution source en appels spécifiques au protocole.</span><span class="sxs-lookup"><span data-stu-id="c3891-110">Converts protocol-independent calls from the source resolver to protocol-specific calls.</span></span>
-   <span data-ttu-id="c3891-111">Interagit avec la couche de socket et le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="c3891-111">Interacts with the socket layer and the operating system.</span></span> <span data-ttu-id="c3891-112">Analyse la description SDP et l’utilise comme données de configuration, puis lit les données de flux à partir de la couche de sockets sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="c3891-112">Parses the SDP description and uses it as configuration data, and reads stream data from the underlying sockets layer.</span></span> <span data-ttu-id="c3891-113">Lors de la réception, la source réseau est responsable de la réorganisation et de la demande de retransmission des paquets.</span><span class="sxs-lookup"><span data-stu-id="c3891-113">When receiving, the network source is responsible for reordering and requesting retransmissions of packets.</span></span>

## <a name="network-source-creation"></a><span data-ttu-id="c3891-114">Création de la source réseau</span><span class="sxs-lookup"><span data-stu-id="c3891-114">Network Source Creation</span></span>

<span data-ttu-id="c3891-115">La création d’une source de média pour une source à partir du réseau n’est pas différente d’une source de média pour un fichier local.</span><span class="sxs-lookup"><span data-stu-id="c3891-115">Creating a media source for a source from the network is not different from a media source for a local file.</span></span> <span data-ttu-id="c3891-116">L’application passe l’URL pour les méthodes de programme de [résolution](source-resolver.md) source aux sources comme [**IMFSourceResolver :: CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) ou [**IMFSourceResolver :: BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) et spécifie l' \_ indicateur MEDIASOURCE de résolution MF \_ .</span><span class="sxs-lookup"><span data-stu-id="c3891-116">The application passes the URL for the source to [Source Resolver](source-resolver.md) methods such as [**IMFSourceResolver::CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) or [**IMFSourceResolver::BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) and specifies the MF\_RESOLUTION\_MEDIASOURCE flag.</span></span> <span data-ttu-id="c3891-117">Pour plus d’informations sur l’utilisation de cet indicateur, consultez [utilisation du programme de résolution source](using-the-source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="c3891-117">For more information about using this flag, see [Using the Source Resolver](using-the-source-resolver.md).</span></span>

<span data-ttu-id="c3891-118">Selon le schéma fourni par l’application, le programme de résolution source charge l’objet gestionnaire de schéma approprié, qui expose l’interface [**IMFSchemeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfschemehandler) .</span><span class="sxs-lookup"><span data-stu-id="c3891-118">Depending on the scheme provided by the application, the source resolver loads the appropriate the scheme handler object, which exposes the [**IMFSchemeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfschemehandler) interface.</span></span> <span data-ttu-id="c3891-119">L’application peut également utiliser le gestionnaire de schéma directement pour créer la source réseau en appelant [**IMFSchemeHandler :: BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span><span class="sxs-lookup"><span data-stu-id="c3891-119">The application can also use the scheme handler directly to create the network source by calling [**IMFSchemeHandler::BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span></span>

<span data-ttu-id="c3891-120">Pour plus d’informations, consultez [gestionnaires de modèles et gestionnaires de Byte-Stream](scheme-handlers-and-byte-stream-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="c3891-120">For more information, see [Scheme Handlers and Byte-Stream Handlers](scheme-handlers-and-byte-stream-handlers.md).</span></span>

<span data-ttu-id="c3891-121">Media Foundation ne prend pas en charge les flux d’octets pour les sources réseau.</span><span class="sxs-lookup"><span data-stu-id="c3891-121">Media Foundation does not support byte streams for network sources.</span></span> <span data-ttu-id="c3891-122">L’objet de flux d’octets est pris en charge uniquement dans le scénario de contenu téléchargé.</span><span class="sxs-lookup"><span data-stu-id="c3891-122">The byte stream object is only supported in the downloaded content scenario.</span></span> <span data-ttu-id="c3891-123">Toutes les données sont transmises aussi rapidement que possible afin qu’elles puissent être enregistrées sous la forme d’un fichier sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="c3891-123">All the data is transmitted as quickly as possible so that it can be saved as a file on the local machine.</span></span> <span data-ttu-id="c3891-124">les serveurs Web fournissent des données téléchargées.</span><span class="sxs-lookup"><span data-stu-id="c3891-124">web servers provide downloaded data.</span></span> <span data-ttu-id="c3891-125">Il n’y a aucune communication entre le client et le serveur une fois le téléchargement démarré.</span><span class="sxs-lookup"><span data-stu-id="c3891-125">There is no communication from the client to the server after the download begins.</span></span> <span data-ttu-id="c3891-126">Dans ce cas, le protocole de téléchargement HTTP est utilisé.</span><span class="sxs-lookup"><span data-stu-id="c3891-126">In this case the HTTP download protocol is used.</span></span>

<span data-ttu-id="c3891-127">Si l’application demande au programme de résolution de la source de créer un objet de flux d’octets pour les schémas « http : », « MMS : » ou « RTSP : », l’appel échoue avec l' \_ \_ erreur de schéma non pris en charge MF E \_ .</span><span class="sxs-lookup"><span data-stu-id="c3891-127">If the application requests the source resolver to create a byte stream object for "http:", "mms:", or "rtsp:" schemes, then the call fails with the MF\_E\_UNSUPPORTED\_SCHEME error.</span></span>

> [!Note]  
> <span data-ttu-id="c3891-128">Dans Windows 7, la source réseau prend en charge les fichiers de station Windows Media (. NSC).</span><span class="sxs-lookup"><span data-stu-id="c3891-128">In Windows 7, the network source supports Windows Media Station files (.NSC).</span></span> <span data-ttu-id="c3891-129">Ces fichiers sont utilisés dans la diffusion en continu de contenu multimédia sur un réseau.</span><span class="sxs-lookup"><span data-stu-id="c3891-129">These files are used in multicast streaming of media content over a network.</span></span> <span data-ttu-id="c3891-130">Pour créer la source réseau pour un spécifié. Fichier NSC, l’application doit utiliser le programme de résolution source.</span><span class="sxs-lookup"><span data-stu-id="c3891-130">To create the network source for a specified .NSC file, the application must use the source resolver.</span></span>

 

<span data-ttu-id="c3891-131">Si l’application utilise le gestionnaire de schémas, l’appel asynchrone ignore le paramètre *dwFlags* et retourne un pointeur vers la source réseau à l’achèvement.</span><span class="sxs-lookup"><span data-stu-id="c3891-131">If the application is using the scheme handler, then the asynchronous call ignores the *dwFlags* parameter and returns a pointer to the network source on completion.</span></span>

<span data-ttu-id="c3891-132">L’illustration suivante montre le flux de données pour la diffusion multimédia en continu à l’aide de la source réseau.</span><span class="sxs-lookup"><span data-stu-id="c3891-132">The following illustration shows the data flow for media streaming using the network source.</span></span>

![Organigramme présentant les chemins d’accès de l’application au serveur de diffusion en continu, avec une boucle entre la source réseau et la session multimédia](images/3f9186ea-53ed-4a31-a097-92f39fa08624.gif)

## <a name="network-source-configuration"></a><span data-ttu-id="c3891-134">Configuration de la source réseau</span><span class="sxs-lookup"><span data-stu-id="c3891-134">Network Source Configuration</span></span>

<span data-ttu-id="c3891-135">Cette rubrique décrit les fonctionnalités prises en charge par la source réseau et les options de configuration associées.</span><span class="sxs-lookup"><span data-stu-id="c3891-135">This topic describes the features supported by the network source and the associated configuration options.</span></span> <span data-ttu-id="c3891-136">Une application peut configurer la source réseau lors de la création de l’objet source réseau.</span><span class="sxs-lookup"><span data-stu-id="c3891-136">An application can configure the network source when creating the network source object.</span></span> <span data-ttu-id="c3891-137">Ces options sont stockées dans un objet **IPropertyStore** , que l’application doit transmettre dans le paramètre *pProps* des méthodes de résolution source ou [**IMFSchemeHandler :: BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span><span class="sxs-lookup"><span data-stu-id="c3891-137">These options are stored in an **IPropertyStore** object, which the application must pass in the *pProps* parameter of the source resolver methods or [**IMFSchemeHandler::BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span></span>

### <a name="auto-reconnect"></a><span data-ttu-id="c3891-138">Reconnexion automatique</span><span class="sxs-lookup"><span data-stu-id="c3891-138">Auto-Reconnect</span></span>

<span data-ttu-id="c3891-139">La fonctionnalité de reconnexion automatique de la source réseau permet à un client de se reconnecter automatiquement au serveur multimédia lorsque la connexion TCP au serveur échoue ou que le client ne reçoit pas de paquets.</span><span class="sxs-lookup"><span data-stu-id="c3891-139">The auto-reconnect feature of the network source enables a client to reconnect to the media server automatically when the TCP connection to the server fails or the client fails to receive packets.</span></span> <span data-ttu-id="c3891-140">En cas d’échec de la connexion, la source réseau tente de se reconnecter au serveur multimédia à l’aide de la même configuration que celle utilisée dans la connexion précédente.</span><span class="sxs-lookup"><span data-stu-id="c3891-140">When connection fails, the network source attempts to reconnect to the media server using the same configuration that was used in the previous connection.</span></span> <span data-ttu-id="c3891-141">Le processus de reconnexion est asynchrone.</span><span class="sxs-lookup"><span data-stu-id="c3891-141">The reconnection process is asynchronous.</span></span> <span data-ttu-id="c3891-142">La source réseau déclenche l’événement [MEReconnectStart](mereconnectstart.md) lorsqu’elle commence la reconnexion et l’événement [MEReconnectEnd](mereconnectend.md) lorsque la reconnexion réussit ou échoue.</span><span class="sxs-lookup"><span data-stu-id="c3891-142">The network source raises the [MEReconnectStart](mereconnectstart.md) event when it begins reconnection and the [MEReconnectEnd](mereconnectend.md) event when the reconnection succeeds or fails.</span></span>

<span data-ttu-id="c3891-143">Si le nombre de tentatives de reconnexion dépasse la valeur maximale spécifiée par la propriété [**MFNETSOURCE \_ AUTORECONNECTLIMIT**](mfnetsource-autoreconnectlimit-property.md) , l’opération de reconnexion est annulée.</span><span class="sxs-lookup"><span data-stu-id="c3891-143">If the number of reconnection attempts exceeds the maximum value specified by the [**MFNETSOURCE\_AUTORECONNECTLIMIT**](mfnetsource-autoreconnectlimit-property.md) property, the reconnection operation is canceled.</span></span> <span data-ttu-id="c3891-144">Le nombre de tentatives de reconnexion est stocké dans la propriété [**MFNETSOURCE \_ AUTORECONNECTPROGRESS**](mfnetsource-autoreconnectprogress-property.md) .</span><span class="sxs-lookup"><span data-stu-id="c3891-144">The number of reconnection attempts is stored in the [**MFNETSOURCE\_AUTORECONNECTPROGRESS**](mfnetsource-autoreconnectprogress-property.md) property.</span></span>

<span data-ttu-id="c3891-145">La reconnexion automatique permet une lecture fluide du contenu multimédia, même lorsque la connexion TCP au serveur multimédia échoue.</span><span class="sxs-lookup"><span data-stu-id="c3891-145">Auto-reconnect enables smooth playback of media content even when the TCP connection to the media server fails.</span></span> <span data-ttu-id="c3891-146">Pour une expérience de lecture sans heurts, le client doit disposer de données suffisantes, au moins 1 à 2 minutes, dans son cache pour continuer la lecture jusqu’à la reconnexion.</span><span class="sxs-lookup"><span data-stu-id="c3891-146">For a smooth playback experience, the client must have sufficient data, at least 1 to 2 minutes, in its cache to continue playback until reconnection.</span></span> <span data-ttu-id="c3891-147">La quantité maximale de données que la source réseau peut mettre en mémoire tampon peut être définie dans la propriété [**MFNETSOURCE \_ MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) .</span><span class="sxs-lookup"><span data-stu-id="c3891-147">The maximum amount of data that the network source can buffer can be set in the [**MFNETSOURCE\_MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) property.</span></span>

### <a name="fast-streaming"></a><span data-ttu-id="c3891-148">Streaming rapide</span><span class="sxs-lookup"><span data-stu-id="c3891-148">Fast Streaming</span></span>

<span data-ttu-id="c3891-149">Le client source réseau demande au serveur de diffuser une partie des données au début du contenu à un rythme plus rapide que celui spécifié par la vitesse de transmission du contenu.</span><span class="sxs-lookup"><span data-stu-id="c3891-149">The network source client requests the server to stream some of the data at the beginning of the content at a faster rate than that specified by the bit rate of the content.</span></span> <span data-ttu-id="c3891-150">Si le *démarrage rapide* est activé sur le serveur, le serveur envoie un flux à vitesse de transmission accélérée afin que le client puisse mettre en mémoire tampon une quantité de données suffisante plus rapidement que en temps réel.</span><span class="sxs-lookup"><span data-stu-id="c3891-150">If *Fast Startup* is enabled on the server, the server sends an accelerated bit-rate stream so that the client can buffer a sufficient amount of data faster than in real time.</span></span> <span data-ttu-id="c3891-151">Cela améliore l’expérience utilisateur en réduisant les délais de mise en mémoire tampon initiaux, ce qui peut être dû à plusieurs facteurs tels que la lenteur de l’ordinateur client ou du réseau, ainsi que la bande passante disponible.</span><span class="sxs-lookup"><span data-stu-id="c3891-151">This improves user experience by minimizing initial buffering delays, which can be caused by various factors such as low speed of the client computer or the network, and available bandwidth.</span></span>

<span data-ttu-id="c3891-152">Pour spécifier la quantité de données de streaming rapide que le client peut demander, définissez la propriété [**MFNETSOURCE \_ ACCELERATEDSTREAMINGDURATION**](mfnetsource-acceleratedstreamingduration-property.md) .</span><span class="sxs-lookup"><span data-stu-id="c3891-152">To specify the amount of fast-streaming data that the client can request, set the [**MFNETSOURCE\_ACCELERATEDSTREAMINGDURATION**](mfnetsource-acceleratedstreamingduration-property.md) property.</span></span> <span data-ttu-id="c3891-153">Si la source réseau utilise UDP comme protocole de transport, spécifiez la quantité maximale de données de streaming rapide en définissant la propriété [**MFNETSOURCE \_ MAXUDPACCELERATEDSTREAMINGDURATION**](mfnetsource-maxudpacceleratedstreamingduration-property.md) à la place.</span><span class="sxs-lookup"><span data-stu-id="c3891-153">If the network source is using UDP as the transport protocol, specify the maximum amount of fast-streaming data by setting the [**MFNETSOURCE\_MAXUDPACCELERATEDSTREAMINGDURATION**](mfnetsource-maxudpacceleratedstreamingduration-property.md) property instead.</span></span>

<span data-ttu-id="c3891-154">La diffusion rapide sur le client est également possible via la fonction de *mise en cache rapide* , qui diffuse le contenu à la demande plus rapidement que le temps réel et met en cache les données sur le cache local du client.</span><span class="sxs-lookup"><span data-stu-id="c3891-154">Fast streaming on the client is also possible through the *Fast Cache* feature—streaming on-demand content faster than real time and caching data on the client's local cache.</span></span> <span data-ttu-id="c3891-155">Pour utiliser ce type de diffusion rapide, le cache rapide doit être activé sur la source réseau, et le serveur doit le prendre en charge.</span><span class="sxs-lookup"><span data-stu-id="c3891-155">To use this type of fast streaming, Fast Cache must be enabled on the network source, and the server must support it.</span></span> <span data-ttu-id="c3891-156">Lorsque le client demande du contenu à partir du serveur, la source réseau vérifie d’abord si le contenu se trouve déjà dans le cache du client.</span><span class="sxs-lookup"><span data-stu-id="c3891-156">When the client requests content from the server, the network source first checks to see whether the content is already in the client's cache.</span></span> <span data-ttu-id="c3891-157">Si le contenu se trouve dans le cache local du client et n’a pas expiré, il est rendu.</span><span class="sxs-lookup"><span data-stu-id="c3891-157">If the content is in the client's local cache and has not expired, it is rendered.</span></span> <span data-ttu-id="c3891-158">Si le contenu n’est pas dans le cache local ou a déjà expiré, le contenu est diffusé et mis en cache, et la source réseau la lit à partir du cache local.</span><span class="sxs-lookup"><span data-stu-id="c3891-158">If the content is not in the local cache or has already expired, the content is streamed and cached, and the network source plays it from the local cache.</span></span> <span data-ttu-id="c3891-159">Dans les demandes suivantes, pour les sélections, seules les entrées manquantes sont mises en cache, puis lues.</span><span class="sxs-lookup"><span data-stu-id="c3891-159">In subsequent requests, for playlists, only missing entries are cached and then played.</span></span> <span data-ttu-id="c3891-160">Si une entrée de sélection se trouve déjà dans le cache local du client, elle est lue à partir de là et n’est pas mise en cache.</span><span class="sxs-lookup"><span data-stu-id="c3891-160">If a playlist entry is already in the client's local cache, it is played from there and not cached again.</span></span>

<span data-ttu-id="c3891-161">Par défaut, le cache rapide est activé sur le client source réseau.</span><span class="sxs-lookup"><span data-stu-id="c3891-161">By default, Fast Cache is enabled on the network source client.</span></span> <span data-ttu-id="c3891-162">Toutefois, les facteurs suivants déterminent également si la fonctionnalité est utilisée :</span><span class="sxs-lookup"><span data-stu-id="c3891-162">However, the following factors also determine whether the feature is used:</span></span>

-   <span data-ttu-id="c3891-163">Le client doit disposer d’une bande passante supplémentaire pour télécharger et mettre en cache le contenu plus rapidement que la vitesse normale.</span><span class="sxs-lookup"><span data-stu-id="c3891-163">The client must have extra bandwidth available to download and cache the content faster than the normal speed.</span></span>
-   <span data-ttu-id="c3891-164">Le client doit disposer d’un espace disque suffisant.</span><span class="sxs-lookup"><span data-stu-id="c3891-164">The client must have sufficient disk space.</span></span> <span data-ttu-id="c3891-165">Si le client dispose de moins de 100 Mo d’espace disque disponible après la mise en cache du contenu à la demande demandé, il n’est pas mis en cache, mais est diffusé et rendu simultanément.</span><span class="sxs-lookup"><span data-stu-id="c3891-165">If the client has less than 100 MB of free disk space after caching the requested on-demand content, it is not cached, but is streamed and rendered simultaneously.</span></span>

<span data-ttu-id="c3891-166">La fonctionnalité de mise en cache rapide est contrôlée par la propriété [**MFNETSOURCE \_ CACHEENABLED**](mfnetsource-cacheenabled-property.md) .</span><span class="sxs-lookup"><span data-stu-id="c3891-166">The Fast Cache feature is controlled by the [**MFNETSOURCE\_CACHEENABLED**](mfnetsource-cacheenabled-property.md) property.</span></span>

### <a name="buffer-management"></a><span data-ttu-id="c3891-167">Gestion des tampons</span><span class="sxs-lookup"><span data-stu-id="c3891-167">Buffer Management</span></span>

<span data-ttu-id="c3891-168">La source réseau fournit une gestion de mémoire tampon efficace qui surveille l’état de la mémoire tampon sur le client.</span><span class="sxs-lookup"><span data-stu-id="c3891-168">The network source provides efficient buffer management that monitors the buffer state on the client.</span></span> <span data-ttu-id="c3891-169">Par défaut, la source réseau met en mémoire tampon 5 secondes de données au démarrage.</span><span class="sxs-lookup"><span data-stu-id="c3891-169">By default, the network source buffers 5 seconds of data at startup.</span></span> <span data-ttu-id="c3891-170">Cette valeur peut être configurée en définissant la propriété [**MFNETSOURCE \_ BUFFERINGTIME**](mfnetsource-bufferingtime-property.md) .</span><span class="sxs-lookup"><span data-stu-id="c3891-170">This value can be configured by setting the [**MFNETSOURCE\_BUFFERINGTIME**](mfnetsource-bufferingtime-property.md) property.</span></span> <span data-ttu-id="c3891-171">Sur la base de cette valeur de propriété, la source réseau calcule la taille de la mémoire tampon qui est suffisante pour garantir une lecture fluide et ininterrompue du contenu multimédia.</span><span class="sxs-lookup"><span data-stu-id="c3891-171">Based on this property value, the network source computes the buffer size that is sufficient to ensure smooth and uninterrupted playback of the media content.</span></span> <span data-ttu-id="c3891-172">Si cette propriété a la valeur 0, la gestion de la mémoire tampon est désactivée.</span><span class="sxs-lookup"><span data-stu-id="c3891-172">If this property is set to 0, buffer management is disabled.</span></span> <span data-ttu-id="c3891-173">Lorsque la quantité de contenu de la mémoire tampon est faible, la source réseau démarre la mise en mémoire tampon et déclenche l’événement [MEBufferingStarted](mebufferingstarted.md) pour indiquer que la mise en mémoire tampon a commencé.</span><span class="sxs-lookup"><span data-stu-id="c3891-173">When the amount of content in the buffer is low, the network source starts buffering and raises the [MEBufferingStarted](mebufferingstarted.md) event to indicate that buffering has begun.</span></span> <span data-ttu-id="c3891-174">Lors de la réception de cet événement, le pipeline arrête le rendu.</span><span class="sxs-lookup"><span data-stu-id="c3891-174">Upon receiving this event, the pipeline stops rendering.</span></span> <span data-ttu-id="c3891-175">Lorsque la mise en mémoire tampon est terminée, la source réseau déclenche l’événement [MEBufferingStopped](mebufferingstopped.md) , et le client peut redémarrer le rendu.</span><span class="sxs-lookup"><span data-stu-id="c3891-175">When buffering is complete, the network source raises the [MEBufferingStopped](mebufferingstopped.md) event, and the client can start rendering again.</span></span>

<span data-ttu-id="c3891-176">Le client démarre le rendu du contenu une fois qu’il a accumulé la quantité de données indiquée par la taille de la mémoire tampon du premier échantillon.</span><span class="sxs-lookup"><span data-stu-id="c3891-176">The client starts rendering the content after it has accumulated the amount of data indicated by the buffer size of the first sample.</span></span> <span data-ttu-id="c3891-177">Si cette valeur est inférieure à la taille de la mémoire tampon calculée, la lecture démarre immédiatement.</span><span class="sxs-lookup"><span data-stu-id="c3891-177">If this value is lower than the calculated buffer size, then the playback starts immediately.</span></span> <span data-ttu-id="c3891-178">Ce comportement est très similaire à la fonctionnalité de démarrage rapide.</span><span class="sxs-lookup"><span data-stu-id="c3891-178">This behavior is very similar to the Fast Startup feature.</span></span>

<span data-ttu-id="c3891-179">La propriété [**MFNETSOURCE \_ MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) stocke la quantité maximale de données pouvant être mises en mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="c3891-179">The [**MFNETSOURCE\_MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) property stores the maximum amount of data that can be buffered.</span></span>

### <a name="bandwidth-selection"></a><span data-ttu-id="c3891-180">Sélection de la bande passante</span><span class="sxs-lookup"><span data-stu-id="c3891-180">Bandwidth Selection</span></span>

<span data-ttu-id="c3891-181">Lorsqu’un client se connecte au serveur multimédia, dans le cadre de la configuration de la connexion, la source réseau effectue *une mesure statique de paires de paquets* pour estimer la bande passante de liaison initiale entre le client et le serveur.</span><span class="sxs-lookup"><span data-stu-id="c3891-181">When a client connects to the media server, as part of the connection setup, the network source performs *static packet-pair* measurement to estimate the initial link bandwidth between client and server.</span></span> <span data-ttu-id="c3891-182">En fonction du résultat de cette mesure, le client peut sélectionner des flux audio et vidéo qui tiennent dans la bande passante estimée.</span><span class="sxs-lookup"><span data-stu-id="c3891-182">Based on the result of this measurement, the client can select audio and video streams that fit within the estimated bandwidth.</span></span> <span data-ttu-id="c3891-183">Cela garantit une lecture fluide du contenu multimédia de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="c3891-183">This ensures smooth playback of the streaming media content.</span></span>

<span data-ttu-id="c3891-184">Pendant la phase de démarrage rapide, la mesure *dynamique de paire de paquets* est exécutée.</span><span class="sxs-lookup"><span data-stu-id="c3891-184">During the Fast Startup stage, *dynamic packet-pair* measurement is performed.</span></span> <span data-ttu-id="c3891-185">Dans ce processus, le client reçoit de grandes quantités de données, qui peuvent être plusieurs paquets ou échantillons.</span><span class="sxs-lookup"><span data-stu-id="c3891-185">In this process, the client receives large amounts of data, which can be multiple packets or samples.</span></span>

<span data-ttu-id="c3891-186">Le résultat de la mesure dynamique des paires de paquets est plus précis que l’estimation de la bande passante de liaison retournée par la mesure statique de paires de paquets, car le processus de paire de paquets statiques envoie un seul paquet de taille fixe, ce qui peut ne pas produire des résultats exacts pour les réseaux à bande passante élevée.</span><span class="sxs-lookup"><span data-stu-id="c3891-186">The result of dynamic packet-pair measurement is more accurate than the link bandwidth estimate returned by static packet-pair measurement because the static packet-pair process sends a single packet of fixed size, which may not yield accurate results for high bandwidth networks.</span></span>

<span data-ttu-id="c3891-187">L’application peut récupérer la bande passante estimée à l’aide de la propriété [**MFNETSOURCE \_ PPBANDWIDTH**](mfnetsource-ppbandwidth-property.md) .</span><span class="sxs-lookup"><span data-stu-id="c3891-187">The application can get the estimated bandwidth by using the [**MFNETSOURCE\_PPBANDWIDTH**](mfnetsource-ppbandwidth-property.md) property.</span></span>

<span data-ttu-id="c3891-188">Les conditions réseau peuvent changer de manière dynamique, provoquant ainsi des problèmes de lecture de la source réseau.</span><span class="sxs-lookup"><span data-stu-id="c3891-188">Network conditions may change dynamically, causing glitches in playback of the network source.</span></span> <span data-ttu-id="c3891-189">La source réseau peut modifier la sélection du flux initial du client en fonction de la vitesse de réception et de l’état de la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="c3891-189">The network source can change the client's initial stream selection based on the receiving rate and the buffer state.</span></span> <span data-ttu-id="c3891-190">Par exemple, le client peut basculer vers une vitesse de transmission inférieure pendant la congestion du réseau et revenir à une vitesse de transmission supérieure lorsque le trafic réseau a été amélioré et que le client a accumulé un volume de contenu mis en mémoire tampon suffisant.</span><span class="sxs-lookup"><span data-stu-id="c3891-190">For example, the client might switch to a lower bit rate during network congestion and switch back to a higher bit rate when network traffic has improved and the client has accumulated a sufficient amount of buffered content.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c3891-191">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c3891-191">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c3891-192">Mise en réseau dans Media Foundation</span><span class="sxs-lookup"><span data-stu-id="c3891-192">Networking in Media Foundation</span></span>](networking-in-media-foundation.md)
</dt> </dl>

 

 



