---
description: L’API de capteur fournit une méthode que vous pouvez utiliser pour inviter l’utilisateur à entrer des autorisations d’utilisation d’un capteur ou d’une collection de capteurs.
ms.assetid: c755edcf-18c1-43d5-9dfe-c073e1f96b5f
title: Gestion des autorisations utilisateur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ecb65fa5a9962be4850aa4711cafa03fb7658212
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103951071"
---
# <a name="managing-user-permissions"></a><span data-ttu-id="ed43e-103">Gestion des autorisations utilisateur</span><span class="sxs-lookup"><span data-stu-id="ed43e-103">Managing User Permissions</span></span>

<span data-ttu-id="ed43e-104">L’API de capteur fournit une méthode que vous pouvez utiliser pour inviter l’utilisateur à entrer des autorisations d’utilisation d’un capteur ou d’une collection de capteurs.</span><span class="sxs-lookup"><span data-stu-id="ed43e-104">The Sensor API provides a method you can use to prompt the user for permissions to use a sensor or collection of sensors.</span></span>

<span data-ttu-id="ed43e-105">Étant donné que les capteurs peuvent révéler des informations sensibles, Windows requiert que les utilisateurs activent les capteurs avant que votre programme puisse accéder aux données.</span><span class="sxs-lookup"><span data-stu-id="ed43e-105">Because sensors can reveal sensitive information, Windows requires that users enable sensors before your program can access any data.</span></span>

<span data-ttu-id="ed43e-106">Vous souhaiterez peut-être demander une autorisation lorsque vous souhaitez utiliser des capteurs pour lesquels l’accès à l’état du capteur [**SensorState**](/windows/win32/api/sensorsapi/ne-sensorsapi-sensorstate) en cours est \_ \_ \_ refusé.</span><span class="sxs-lookup"><span data-stu-id="ed43e-106">You may want to request permission when you want to use sensors for which the current [**SensorState**](/windows/win32/api/sensorsapi/ne-sensorsapi-sensorstate) is SENSOR\_STATE\_ACCESS\_DENIED.</span></span>

<span data-ttu-id="ed43e-107">Pour demander des autorisations, appelez la méthode [**ISensorManager :: RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) .</span><span class="sxs-lookup"><span data-stu-id="ed43e-107">To request permissions, call the [**ISensorManager::RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) method.</span></span> <span data-ttu-id="ed43e-108">Lorsque vous appelez cette méthode, Windows ouvre la boîte de dialogue **activer les capteurs** pour inviter l’utilisateur à activer les capteurs que vous avez demandés.</span><span class="sxs-lookup"><span data-stu-id="ed43e-108">When you call this method, Windows opens the **Enable sensors** dialog box to prompt the user to enable the sensors you requested.</span></span> <span data-ttu-id="ed43e-109">Cette boîte de dialogue fournit à l’utilisateur les noms des capteurs que vous avez demandés.</span><span class="sxs-lookup"><span data-stu-id="ed43e-109">This dialog box provides the user with the names of the sensors you requested.</span></span> <span data-ttu-id="ed43e-110">L’utilisateur peut choisir l’une des options suivantes :</span><span class="sxs-lookup"><span data-stu-id="ed43e-110">The user can choose one of the following options:</span></span>

-   <span data-ttu-id="ed43e-111">**Activez ces capteurs**.</span><span class="sxs-lookup"><span data-stu-id="ed43e-111">**Enable these sensors**.</span></span>
-   <span data-ttu-id="ed43e-112">**N’activez pas ces capteurs**.</span><span class="sxs-lookup"><span data-stu-id="ed43e-112">**Don't enable these sensors**.</span></span>
-   <span data-ttu-id="ed43e-113">**Ouvrez le panneau de configuration pour plus d’options**.</span><span class="sxs-lookup"><span data-stu-id="ed43e-113">**Open Control Panel for more options**.</span></span>

<span data-ttu-id="ed43e-114">Si un utilisateur choisit **ne pas activer ces capteurs**, Windows n’affichera pas à nouveau la boîte de dialogue **activer les capteurs** pour ces capteurs, même si votre programme appelle [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions).</span><span class="sxs-lookup"><span data-stu-id="ed43e-114">If a user chooses **Don't enable these sensors**, Windows will not show the **Enable sensors** dialog box again for those particular sensors, even if your program calls [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions).</span></span> <span data-ttu-id="ed43e-115">Si l’utilisateur choisit une autre option, Windows autorisera l’affichage de la boîte de dialogue lorsqu’elle sera demandée.</span><span class="sxs-lookup"><span data-stu-id="ed43e-115">If the user chooses any other option, Windows will allow the dialog box to be displayed when requested.</span></span> <span data-ttu-id="ed43e-116">Si votre appel à **RequestPermissions** contient des capteurs que l’utilisateur a précédemment choisi de conserver désactivé, l’API de capteur supprime ces capteurs de la liste des capteurs que l’utilisateur voit.</span><span class="sxs-lookup"><span data-stu-id="ed43e-116">If your call to **RequestPermissions** contains some sensors that the user has previously chosen to keep disabled, the Sensor API will remove these sensors from the list of sensors the user sees.</span></span>

### <a name="modal-or-modeless-behavior"></a><span data-ttu-id="ed43e-117">Comportement modal ou non modal</span><span class="sxs-lookup"><span data-stu-id="ed43e-117">Modal or Modeless Behavior</span></span>

<span data-ttu-id="ed43e-118">La méthode [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) accepte un argument **booléen** qui détermine si la boîte de dialogue **activer les capteurs** est affichée en tant que fenêtre modale ou non modale.</span><span class="sxs-lookup"><span data-stu-id="ed43e-118">The [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) method takes a **Boolean** argument that determines whether the **Enable sensors** dialog box is displayed as a modal or modeless window.</span></span> <span data-ttu-id="ed43e-119">Ce paramètre affecte également si le comportement du code de retour de la boîte de dialogue est synchrone ou asynchrone.</span><span class="sxs-lookup"><span data-stu-id="ed43e-119">This setting also affects whether the behavior of the dialog box return code is synchronous or asynchronous.</span></span>

<span data-ttu-id="ed43e-120">Quand elle est modale, la boîte de dialogue a le focus exclusif sur les fenêtres d’application jusqu’à ce que l’utilisateur choisisse une option, et le code de retour **HRESULT** de votre appel à [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) indique le choix de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ed43e-120">When modal, the dialog box has exclusive focus among application windows until the user chooses an option, and the **HRESULT** return code from your call to [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) indicates the user choice.</span></span> <span data-ttu-id="ed43e-121">En cas de non-mode, la boîte de dialogue n’a pas le focus exclusif et votre appel à **RequestPermissions** est immédiatement retourné.</span><span class="sxs-lookup"><span data-stu-id="ed43e-121">When modeless, the dialog box does not have exclusive focus and your call to **RequestPermissions** returns immediately.</span></span> <span data-ttu-id="ed43e-122">Dans ce cas, le code de retour indique si la méthode a réussi, mais ne peut pas être utilisée pour déterminer le choix de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ed43e-122">In this case, the return code indicates whether the method succeeded, but cannot be used to ascertain the user's choice.</span></span> <span data-ttu-id="ed43e-123">Vous pouvez ensuite déterminer les capteurs qui ont été activés en gérant l’événement [**OnStateChanged**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensorevents-onstatechanged) et en vérifiant que chaque capteur a l’état de capteur \_ \_ Ready.</span><span class="sxs-lookup"><span data-stu-id="ed43e-123">You can then determine which sensors have been enabled by handling the [**OnStateChanged**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensorevents-onstatechanged) event and checking each sensor for SENSOR\_STATE\_READY.</span></span>

<span data-ttu-id="ed43e-124">Pour plus d’informations sur les codes de retour, consultez la page de référence [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) .</span><span class="sxs-lookup"><span data-stu-id="ed43e-124">For more information about return codes, see the [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) reference page.</span></span>

### <a name="best-practice-avoid-multiple-modeless-calls-to-requestpermissions"></a><span data-ttu-id="ed43e-125">Meilleure pratique : Évitez les appels multiples en mode RequestPermissions</span><span class="sxs-lookup"><span data-stu-id="ed43e-125">Best Practice: Avoid Multiple Modeless Calls to RequestPermissions</span></span>

<span data-ttu-id="ed43e-126">Les appels sans mode répétés à [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) affichent plusieurs instances de la boîte de dialogue **activer ces capteurs** et peuvent saturer l’écran avec des boîtes de dialogue, ce qui se traduit par une expérience utilisateur médiocre.</span><span class="sxs-lookup"><span data-stu-id="ed43e-126">Repeated modeless calls to [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) will display multiple instances of the **Enable these sensors** dialog box, and can potentially flood the screen with dialog boxes, resulting in a poor user experience.</span></span> <span data-ttu-id="ed43e-127">Si vous pensez qu’après votre premier appel à **RequestPermissions**, d’autres capteurs d’emplacement pourraient être installés, nécessitant un autre appel à **RequestPermissions**, vous devez appeler **RequestPermissions** modal ou attendre que tous les capteurs d’emplacement soient installés pour effectuer un appel non modal.</span><span class="sxs-lookup"><span data-stu-id="ed43e-127">If you think that after your first call to **RequestPermissions**, other location sensors might be installed, requiring another call to **RequestPermissions**, you should either call **RequestPermissions** modally, or wait until all location sensors are installed to make a modeless call.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ed43e-128">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="ed43e-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ed43e-129">Confidentialité et sécurité dans la plateforme capteur et emplacement</span><span class="sxs-lookup"><span data-stu-id="ed43e-129">Privacy and Security in the Sensor and Location Platform</span></span>](privacy-and-security-in-the-sensor-and-location-platform.md)
</dt> <dt>

[<span data-ttu-id="ed43e-130">Demande d’autorisations utilisateur</span><span class="sxs-lookup"><span data-stu-id="ed43e-130">Requesting User Permissions</span></span>](requesting-user-permissions.md)
</dt> </dl>

 

 
