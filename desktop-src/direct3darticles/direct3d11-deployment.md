---
title: Déploiement de Direct3D 11 pour les développeurs de jeux
description: Cet article explique comment déployer les composants Direct3D 11 sur un système, si nécessaire.
ms.assetid: 1fd43638-0d67-4a94-3be6-8789095f491e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd935aedee23ba731bc74e52c0773e6f02e5b5fc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104199332"
---
# <a name="direct3d-11-deployment-for-game-developers"></a><span data-ttu-id="80251-103">Déploiement de Direct3D 11 pour les développeurs de jeux</span><span class="sxs-lookup"><span data-stu-id="80251-103">Direct3D 11 deployment for game developers</span></span>

<span data-ttu-id="80251-104">Cet article explique comment déployer les composants Direct3D 11 sur un système, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="80251-104">This article describes how to deploy the Direct3D 11 components on a system if necessary.</span></span>

-   [<span data-ttu-id="80251-105">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="80251-105">Overview</span></span>](#overview)
-   [<span data-ttu-id="80251-106">Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="80251-106">Direct3D 11.3</span></span>](#direct3d-113)
-   [<span data-ttu-id="80251-107">Direct3D 11,2</span><span class="sxs-lookup"><span data-stu-id="80251-107">Direct3D 11.2</span></span>](#direct3d-112)
-   [<span data-ttu-id="80251-108">Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="80251-108">Direct3D 11.1</span></span>](#direct3d-111)
-   [<span data-ttu-id="80251-109">D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="80251-109">D3D11InstallHelper.dll</span></span>](#d3d11installhelperdll)
-   [<span data-ttu-id="80251-110">D3D11Install.exe</span><span class="sxs-lookup"><span data-stu-id="80251-110">D3D11Install.exe</span></span>](#d3d11installexe)
-   [<span data-ttu-id="80251-111">Intégration dans les programmes d’installation</span><span class="sxs-lookup"><span data-stu-id="80251-111">Integrating into Installation Programs</span></span>](#integrating-into-installation-programs)
    -   [<span data-ttu-id="80251-112">Intégration à InstallShield</span><span class="sxs-lookup"><span data-stu-id="80251-112">Integrating into InstallShield</span></span>](#integrating-into-installshield)
    -   [<span data-ttu-id="80251-113">Intégration dans un package MSI</span><span class="sxs-lookup"><span data-stu-id="80251-113">Integrating into an MSI Package</span></span>](#integrating-into-an-msi-package)
-   [<span data-ttu-id="80251-114">Conseils de débogage</span><span class="sxs-lookup"><span data-stu-id="80251-114">Debugging Tips</span></span>](#debugging-tips)
-   [<span data-ttu-id="80251-115">Paramètres d’entreprise</span><span class="sxs-lookup"><span data-stu-id="80251-115">Corporate Settings</span></span>](#corporate-settings)
-   [<span data-ttu-id="80251-116">Articles connexes</span><span class="sxs-lookup"><span data-stu-id="80251-116">Related Articles</span></span>](#related-articles)

## <a name="overview"></a><span data-ttu-id="80251-117">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="80251-117">Overview</span></span>

<span data-ttu-id="80251-118">L’API Direct3D 11 étend l’API Direct3D 10,1 existante avec la prise en charge du rendu multithread et de la création de ressources, du nuanceur de calcul, de la polygonalisation matérielle, de la compression de texture BC6H/BC7 et du modèle de nuanceur HLSL 5,0 avec une liaison de nuanceur dynamique.</span><span class="sxs-lookup"><span data-stu-id="80251-118">The Direct3D 11 API extends the existing Direct3D 10.1 API with support for multithreaded rendering and resource creation, Compute Shader, hardware tessellation, BC6H/BC7 texture compression, and HLSL Shader Model 5.0 with Dynamic Shader Linkage.</span></span> <span data-ttu-id="80251-119">Outre le composant Direct3D 11, un certain nombre de composants graphiques supplémentaires sont inclus dans le runtime DirectX 11 : Direct3D 11, DXGI 1,1, 10level9 Feature levels, WARP10 Software Rendering Device, Direct2D, DirectWrite et un Direct3D 10,1 mis à jour avec prise en charge de 10level9 et WARP10.</span><span class="sxs-lookup"><span data-stu-id="80251-119">In addition to the Direct3D 11 component, a number of additional graphics components are included in the DirectX 11 runtime: Direct3D 11, DXGI 1.1, 10level9 feature levels, WARP10 software rendering device, Direct2D, DirectWrite, and an updated Direct3D 10.1 with support for 10level9 and WARP10.</span></span> <span data-ttu-id="80251-120">Pour plus d’informations sur ces composants graphiques Windows et les autres, consultez [API graphiques dans Windows](graphics-apis-in-windows-vista.md).</span><span class="sxs-lookup"><span data-stu-id="80251-120">For information on these and other Windows graphics components, see [Graphics APIs in Windows](graphics-apis-in-windows-vista.md).</span></span>

<span data-ttu-id="80251-121">Tous ces nouveaux composants graphiques sont intégrés aux systèmes d’exploitation Windows 7 et Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="80251-121">All of these new graphics components are built into the Windows 7 and Windows Server 2008 R2 operating systems.</span></span> <span data-ttu-id="80251-122">L’API Direct3D 11 et les composants associés peuvent également être installés sur Windows Vista à l’aide d’une mise à jour du système à partir de Windows Update ; consultez l’article [KB 971644](https://support.microsoft.com/kb/971644)de la base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="80251-122">The Direct3D 11 API and related components can also be installed on Windows Vista by using a system update from Windows Update; see Knowledge Base article [KB 971644](https://support.microsoft.com/kb/971644).</span></span> <span data-ttu-id="80251-123">Cette mise à jour nécessite Windows Vista et Service Pack 2.</span><span class="sxs-lookup"><span data-stu-id="80251-123">This update requires Windows Vista and Service Pack 2.</span></span> <span data-ttu-id="80251-124">Les utilisateurs finaux avec des mises à jour automatiques activées auront probablement déjà installé les composants Direct3D 11, comme tous les utilisateurs de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="80251-124">End-users with automatic updates enabled will, therefore, likely already have the Direct3D 11 components installed, as will all Windows 7 users.</span></span>

<span data-ttu-id="80251-125">L’exemple D3D11InstallHelper est conçu pour simplifier la détection de l’API Direct3D 11, installer automatiquement la mise à jour du système le cas échéant sur l’ordinateur de l’utilisateur final et fournir des messages appropriés à l’utilisateur final lors de la procédure manuelle si un service pack plus récent est requis.</span><span class="sxs-lookup"><span data-stu-id="80251-125">The D3D11InstallHelper sample is designed to simplify detection of the Direct3D 11 API, automatically install the system update if applicable to an end-user's computer, and to provide appropriate messages to the end-user on manual procedure if a newer Service Pack is required.</span></span>

> [!Note]  
> <span data-ttu-id="80251-126">Le compilateur HLSL (D3DCompile \* . dll) et la bibliothèque d’utilitaire D3DX pour Direct3D 11 (D3DX11 \* . dll) ne sont pas intégrés à une version du système d’exploitation Windows, mais ils peuvent être déployés dans le cadre du programme d’installation d’une application à l’aide de la technologie DirectSetup existante. pour plus d’informations sur l’utilisation de DirectSetup, consultez [installation de DirectX pour les développeurs de jeux](/windows/desktop/DxTechArts/directx-setup-for-game-developers)</span><span class="sxs-lookup"><span data-stu-id="80251-126">The HLSL compiler (D3DCompile\*.dll) and the D3DX utility library for Direct3D 11 (D3DX11\*.dll) are not built into any version of the Windows operating system, but they can be deployed as part of an application's installer by using the existing DirectSetup technology; for more information about using DirectSetup, see [DirectX Installation for Game Developers](/windows/desktop/DxTechArts/directx-setup-for-game-developers).</span></span> <span data-ttu-id="80251-127">« Effects 11 » est disponible en tant que bibliothèque de prise en charge de source partagée aux [effets de la mise à jour Direct3D 11](https://github.com/Microsoft/FX11). vous pouvez l’inclure directement dans une application (à l’instar de la bibliothèque de l’utilitaire DXUT).</span><span class="sxs-lookup"><span data-stu-id="80251-127">"Effects 11" is available as a shared source support library at [Effects for Direct3D 11 Update](https://github.com/Microsoft/FX11), and you can include it directly into an app (much like the DXUT utility library).</span></span> <span data-ttu-id="80251-128">Par conséquent, elle n’a pas d’autres exigences de redistribution au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="80251-128">Thus, it doesn't have any additional run-time redistribution requirements.</span></span>

## <a name="direct3d-113"></a><span data-ttu-id="80251-129">Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="80251-129">Direct3D 11.3</span></span>

<span data-ttu-id="80251-130">Windows 10 est fourni avec l’API Direct3D 11,3 intégrée.</span><span class="sxs-lookup"><span data-stu-id="80251-130">Windows 10 ships with the Direct3D 11.3 API built in.</span></span> <span data-ttu-id="80251-131">Consultez [fonctionnalités direct3d 11,3](/windows/desktop/direct3d11/direct3d-11-3-features) pour obtenir la liste des nouvelles fonctionnalités de l’API Direct3D 11,3.</span><span class="sxs-lookup"><span data-stu-id="80251-131">See [Direct3D 11.3 Features](/windows/desktop/direct3d11/direct3d-11-3-features) for a list of new features in the Direct3D 11.3 API.</span></span>

## <a name="direct3d-112"></a><span data-ttu-id="80251-132">Direct3D 11,2</span><span class="sxs-lookup"><span data-stu-id="80251-132">Direct3D 11.2</span></span>

<span data-ttu-id="80251-133">Windows 8.1 et Windows Server 2012 R2 sont livrés avec l’API Direct3D 11,2 intégrée.</span><span class="sxs-lookup"><span data-stu-id="80251-133">Windows 8.1 and Windows Server 2012 R2 ship with the Direct3D 11.2 API built in.</span></span> <span data-ttu-id="80251-134">Consultez [fonctionnalités direct3d 11,2](/windows/desktop/direct3d11/direct3d-11-2-features) pour obtenir la liste des nouvelles fonctionnalités de l’API Direct3D 11,2.</span><span class="sxs-lookup"><span data-stu-id="80251-134">See [Direct3D 11.2 Features](/windows/desktop/direct3d11/direct3d-11-2-features) for a list of new features in the Direct3D 11.2 API.</span></span>

## <a name="direct3d-111"></a><span data-ttu-id="80251-135">Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="80251-135">Direct3D 11.1</span></span>

<span data-ttu-id="80251-136">Windows 8 et Windows Server 2012 sont livrés avec l' [API Direct3D 11,1](/windows/desktop/direct3d11/direct3d-11-1-features) intégrée.</span><span class="sxs-lookup"><span data-stu-id="80251-136">Windows 8 and Windows Server 2012 ship with the [Direct3D 11.1 API](/windows/desktop/direct3d11/direct3d-11-1-features) built in.</span></span> <span data-ttu-id="80251-137">La prise en charge partielle de l’API Direct3D 11,1 est disponible sur Windows 7 ou Windows Server 2008 R2 avec la [mise à jour de plateforme pour Windows 7](https://support.microsoft.com/kb/2670838) installée.</span><span class="sxs-lookup"><span data-stu-id="80251-137">Partial support for the Direct3D 11.1 API is available on Windows 7 or Windows Server 2008 R2 with the [Platform Update for Windows 7](https://support.microsoft.com/kb/2670838) installed.</span></span> <span data-ttu-id="80251-138">Pour plus d’informations sur la mise à jour de plateforme pour Windows 7, consultez [mise à jour de la plateforme pour Windows 7](platform-update-for-windows-7.md).</span><span class="sxs-lookup"><span data-stu-id="80251-138">For more info about the Platform Update for Windows 7, see [Platform Update for Windows 7](platform-update-for-windows-7.md).</span></span>

## <a name="d3d11installhelperdll"></a><span data-ttu-id="80251-139">D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="80251-139">D3D11InstallHelper.dll</span></span>

<span data-ttu-id="80251-140">D3D11InstallHelper.dll héberge les fonctionnalités de base pour la détection des composants Direct3D 11 et l’exécution de la mise à jour du système par le biais du service Windows Update, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="80251-140">D3D11InstallHelper.dll hosts the core functionality for detecting Direct3D 11 components, and performing the system update through the Windows Update service if applicable.</span></span> <span data-ttu-id="80251-141">La DLL n’affiche pas de messages ou de boîtes de dialogue directement.</span><span class="sxs-lookup"><span data-stu-id="80251-141">The DLL displays no messages or dialog boxes directly.</span></span>

<span data-ttu-id="80251-142">La DLL se compose des points d’entrée suivants :</span><span class="sxs-lookup"><span data-stu-id="80251-142">The DLL consists of the following entry points:</span></span>

<dl> <dt>

<span data-ttu-id="80251-143"><span id="CheckDirect3D11Status"></span><span id="checkdirect3d11status"></span><span id="CHECKDIRECT3D11STATUS"></span>CheckDirect3D11Status</span><span class="sxs-lookup"><span data-stu-id="80251-143"><span id="CheckDirect3D11Status"></span><span id="checkdirect3d11status"></span><span id="CHECKDIRECT3D11STATUS"></span>CheckDirect3D11Status</span></span>
</dt> <dd>

<span data-ttu-id="80251-144">Cette fonction effectue les vérifications nécessaires et retourne l’état de Direct3D 11 sur cet ordinateur.</span><span class="sxs-lookup"><span data-stu-id="80251-144">This function performs the necessary checks and returns the status of Direct3D 11 on this computer.</span></span> <span data-ttu-id="80251-145">Cette fonction ne requiert pas de droits d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="80251-145">This function does not require administrator rights.</span></span>

-   <span data-ttu-id="80251-146">L’État D3D11IH \_ \_ installed indique que Direct3D 11 est déjà installé sur l’ordinateur et qu’il est prêt à être utilisé.</span><span class="sxs-lookup"><span data-stu-id="80251-146">A status of D3D11IH\_STATUS\_INSTALLED indicates that Direct3D 11 is already installed on the computer and is ready for use.</span></span>
-   <span data-ttu-id="80251-147">\_L’État D3D11IH \_ non \_ pris en charge indique que cette version de Windows ne prend pas en charge Direct3D 11 ou les technologies associées.</span><span class="sxs-lookup"><span data-stu-id="80251-147">D3D11IH\_STATUS\_NOT\_SUPPORTED indicates that this version of Windows does not support Direct3D 11 or related technologies.</span></span>
-   <span data-ttu-id="80251-148">L’État D3D11IH \_ état \_ requis \_ dernier \_ SP indique que la dernière version de Windows Vista service pack doit être installée par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="80251-148">A status of D3D11IH\_STATUS\_NEED\_LATEST\_SP indicates that the latest Windows Vista Service Pack should be installed by the user.</span></span>
-   <span data-ttu-id="80251-149">Enfin, l’État D3D11IH \_ Status \_ require \_ Update indique que Direct3D 11 n’est pas installé sur le système, mais que la mise à jour du système s’applique à cette version de Windows.</span><span class="sxs-lookup"><span data-stu-id="80251-149">Finally, a status of D3D11IH\_STATUS\_REQUIRES\_UPDATE indicates that the system does not have Direct3D 11 installed, but that the system update does apply to this version of Windows.</span></span>

</dd> <dt>

<span data-ttu-id="80251-150"><span id="DoUpdateForDirect3D11"></span><span id="doupdatefordirect3d11"></span><span id="DOUPDATEFORDIRECT3D11"></span>DoUpdateForDirect3D11</span><span class="sxs-lookup"><span data-stu-id="80251-150"><span id="DoUpdateForDirect3D11"></span><span id="doupdatefordirect3d11"></span><span id="DOUPDATEFORDIRECT3D11"></span>DoUpdateForDirect3D11</span></span>
</dt> <dd>

<span data-ttu-id="80251-151">Cette fonction utilise l’API Windows Update pour effectuer la mise à jour du système pour l’installation de Direct3D 11 sur ce système, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="80251-151">This function uses the Windows Update API to perform the system update for installing Direct3D 11 on this system, if applicable.</span></span> <span data-ttu-id="80251-152">Notez que cette fonction nécessite une connexion réseau pour Windows Update, ainsi que des droits d’administration.</span><span class="sxs-lookup"><span data-stu-id="80251-152">Note that this function requires network connectivity to Windows Update to succeed, as well as administrative rights.</span></span> <span data-ttu-id="80251-153">Elle prend une fonction de rappel de progression facultative et un pointeur de contexte utilisateur, et retourne un code de résultat final une fois terminé.</span><span class="sxs-lookup"><span data-stu-id="80251-153">It takes an optional progress callback function and user-context pointer, and returns a final result code when complete.</span></span>

-   <span data-ttu-id="80251-154">Le résultat de la \_ \_ réussite de D3D11IH indique que la mise à jour du système a été appliquée et est prête à être utilisée, tandis que le redémarrage de la réussite de D3D11IH \_ \_ \_ indique que la mise à jour du système nécessite un redémarrage de l’ordinateur avant la fin de son exécution.</span><span class="sxs-lookup"><span data-stu-id="80251-154">The D3D11IH\_RESULT\_SUCCESS result indicates that the system update was applied and is ready for use, while D3D11IH\_RESULT\_SUCCESS\_REBOOT indicates that the system update requires the computer is restarted before it is complete.</span></span> <span data-ttu-id="80251-155">Notez que cette fonction ne planifie pas un redémarrage du système.</span><span class="sxs-lookup"><span data-stu-id="80251-155">Note that this function does not schedule a system restart.</span></span>
-   <span data-ttu-id="80251-156">\_Le résultat D3D11IH \_ non \_ pris en charge indique que la mise à jour du système ne s’applique pas à cette version de Windows.</span><span class="sxs-lookup"><span data-stu-id="80251-156">D3D11IH\_RESULT\_NOT\_SUPPORTED indicates that the system update does not apply to this version of Windows.</span></span> <span data-ttu-id="80251-157">Ce résultat ne doit pas se produire si cette fonction est appelée uniquement après l’obtention d’un \_ État D3D11IH \_ nécessite l' \_ État de mise à jour de CheckDirect3D11Status.</span><span class="sxs-lookup"><span data-stu-id="80251-157">This result should not occur if this function is only called after getting a D3D11IH\_STATUS\_REQUIRES\_UPDATE status from CheckDirect3D11Status.</span></span>
-   <span data-ttu-id="80251-158">Le résultat de la \_ \_ mise à jour du résultat D3D11IH \_ \_ introuvable indique que le package de mise à jour système est introuvable sur les serveurs Windows Update.</span><span class="sxs-lookup"><span data-stu-id="80251-158">A result of D3D11IH\_RESULT\_UPDATE\_NOT\_FOUND indicates that the system update package was not found on the Windows Update servers.</span></span>
-   <span data-ttu-id="80251-159">En cas d’échec du téléchargement de Windows Update ou de l’installation, le téléchargement de la \_ \_ mise à jour du résultat D3D11IH \_ \_ a échoué ou \_ \_ l’installation de la mise à jour du résultat D3D11IH \_ \_ est retournée comme résultat.</span><span class="sxs-lookup"><span data-stu-id="80251-159">If the Windows Update download or installation fails, then D3D11IH\_RESULT\_UPDATE\_DOWNLOAD\_FAILED or D3D11IH\_RESULT\_UPDATE\_INSTALL\_FAILED will be returned as the result.</span></span>
-   <span data-ttu-id="80251-160">Si une erreur de connectivité réseau est retournée à partir de l’API Windows Update, le résultat de l' \_ erreur de service Wu de résultat D3D11IH \_ \_ \_ est retourné, indiquant que le problème peut être intermittent ou lié à la configuration réseau ou aux paramètres de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="80251-160">If a network connectivity error is returned from the Windows Update API, then the D3D11IH\_RESULT\_WU\_SERVICE\_ERROR result is returned, indicating that the problem might be intermittent or related to network configuration or firewall settings.</span></span> <span data-ttu-id="80251-161">Toute tentative de mise à jour de la fonction peut être effectuée.</span><span class="sxs-lookup"><span data-stu-id="80251-161">Trying the update function again may succeed.</span></span>

</dd> </dl>

<span data-ttu-id="80251-162">Pour plus d’informations sur l’API Windows Update, consultez [Windows Update API de l’agent](/windows/desktop/Wua_Sdk/portal-client).</span><span class="sxs-lookup"><span data-stu-id="80251-162">For more information on the Windows Update API, see [Windows Update Agent API](/windows/desktop/Wua_Sdk/portal-client).</span></span>

## <a name="d3d11installexe"></a><span data-ttu-id="80251-163">D3D11Install.exe</span><span class="sxs-lookup"><span data-stu-id="80251-163">D3D11Install.exe</span></span>

> [!Note]  
> <span data-ttu-id="80251-164">D3D11Install.exe nécessite l’exécution de D3D11InstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="80251-164">D3D11Install.exe requires D3D11InstallHelper.dll to execute.</span></span>

<span data-ttu-id="80251-165">D3D11Install.exe est un outil qui permet d’utiliser des D3D11InstallHelper.dll en tant que programme d’installation autonome avec l’interface utilisateur et les messages de l’utilisateur final, ainsi que d’agir comme exemple pour une utilisation correcte de la DLL.</span><span class="sxs-lookup"><span data-stu-id="80251-165">D3D11Install.exe is a tool for using D3D11InstallHelper.dll as a stand-alone installer complete with UI and end-user messages, as well as acting as an example for proper use of the DLL.</span></span> <span data-ttu-id="80251-166">Le processus se termine avec 0 si Direct3D 11 est déjà installé, si la mise à jour du système s’applique correctement sans nécessiter un redémarrage du système, si une installation de Service Pack est requise ou si Direct3D 11 n’est pas pris en charge par cet ordinateur.</span><span class="sxs-lookup"><span data-stu-id="80251-166">The process exits with a 0 if Direct3D 11 is already installed, if the system update applies successfully without requiring a system restart, if a Service Pack installation is required, or if Direct3D 11 is not supported by this computer.</span></span> <span data-ttu-id="80251-167">La valeur 1 est retournée si la mise à jour du système est correctement appliquée et nécessite un redémarrage du système.</span><span class="sxs-lookup"><span data-stu-id="80251-167">A 1 is returned if the system update is applied successfully and requires a system restart to complete.</span></span> <span data-ttu-id="80251-168">Un 2 est retourné pour d’autres conditions d’erreur.</span><span class="sxs-lookup"><span data-stu-id="80251-168">A 2 is returned for other error conditions.</span></span> <span data-ttu-id="80251-169">Notez que ce fichier exécutable nécessite des droits d’administrateur pour s’exécuter et qu’il possède un manifeste qui demande une élévation lorsqu’il est exécuté sur Windows Vista ou Windows 7 avec le contrôle de compte d’utilisateur activé.</span><span class="sxs-lookup"><span data-stu-id="80251-169">Note that this executable file requires administrator rights to run, and it has a manifest that requests elevation when run on Windows Vista or Windows 7 with UAC enabled.</span></span> <span data-ttu-id="80251-170">D3D11Install.exe peut être utilisé en tant qu’outil autonome pour déployer la mise à jour Direct3D 11, ou elle peut être utilisée directement par des programmes d’installation.</span><span class="sxs-lookup"><span data-stu-id="80251-170">D3D11Install.exe can be used as a stand-alone tool for deploying the Direct3D 11 update, or it can be used directly by installers.</span></span>

<span data-ttu-id="80251-171">Il prend en charge les commutateurs de ligne de commande suivants :</span><span class="sxs-lookup"><span data-stu-id="80251-171">It supports the following command-line switches:</span></span>

<dl> <dt>

<span data-ttu-id="80251-172"><span id="_quiet__"></span><span id="_QUIET__"></span>/quiet</span><span class="sxs-lookup"><span data-stu-id="80251-172"><span id="_quiet__"></span><span id="_QUIET__"></span>/quiet</span></span> 
</dt> <dd>

<span data-ttu-id="80251-173">N’affiche aucun message, invites, boîtes de dialogue de progression ou messages d’erreur.</span><span class="sxs-lookup"><span data-stu-id="80251-173">Displays no messages, prompts, progress dialog boxes, or error messages.</span></span>

</dd> <dt>

<span data-ttu-id="80251-174"><span id="_passive__"></span><span id="_PASSIVE__"></span>/passive</span><span class="sxs-lookup"><span data-stu-id="80251-174"><span id="_passive__"></span><span id="_PASSIVE__"></span>/passive</span></span> 
</dt> <dd>

<span data-ttu-id="80251-175">N’affiche aucun message, invite ou message d’erreur, mais affiche la boîte de dialogue État d’avancement.</span><span class="sxs-lookup"><span data-stu-id="80251-175">Displays no messages, prompts, or error messages, but will show the progress dialog box.</span></span>

</dd> <dt>

<span data-ttu-id="80251-176"><span id="_minimal__"></span><span id="_MINIMAL__"></span>/minimal</span><span class="sxs-lookup"><span data-stu-id="80251-176"><span id="_minimal__"></span><span id="_MINIMAL__"></span>/minimal</span></span> 
</dt> <dd>

<span data-ttu-id="80251-177">Affiche uniquement les invites minimales.</span><span class="sxs-lookup"><span data-stu-id="80251-177">Shows only minimal prompts.</span></span>

</dd> <dt>

<span data-ttu-id="80251-178"><span id="_y__"></span><span id="_Y__"></span>/y</span><span class="sxs-lookup"><span data-stu-id="80251-178"><span id="_y__"></span><span id="_Y__"></span>/y</span></span> 
</dt> <dd>

<span data-ttu-id="80251-179">Supprime les invites de confirmation de l’installation de la mise à jour, si nécessaire et applicable, pour une installation standard et minimale.</span><span class="sxs-lookup"><span data-stu-id="80251-179">Suppresses prompting to confirm installing the update, if needed and applicable, for a standard and minimal installation.</span></span>

</dd> <dt>

<span data-ttu-id="80251-180"><span id="_langid_decimal__"></span><span id="_LANGID_DECIMAL__"></span>/langid décimal</span><span class="sxs-lookup"><span data-stu-id="80251-180"><span id="_langid_decimal__"></span><span id="_LANGID_DECIMAL__"></span>/langid decimal</span></span> 
</dt> <dd>

<span data-ttu-id="80251-181">Force le code d’identificateur de langue à utiliser lors de l’affichage des messages de l’utilisateur final et des ressources de boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="80251-181">Forces which language identifier code to use when displaying end-user messages and dialog box resources.</span></span> <span data-ttu-id="80251-182">La valeur par défaut est 1024, qui utilise le paramètre de langue par défaut du système.</span><span class="sxs-lookup"><span data-stu-id="80251-182">The default value is 1024, which uses the system default language setting.</span></span>

</dd> <dt>

<span data-ttu-id="80251-183"><span id="_wu__"></span><span id="_WU__"></span>/wu</span><span class="sxs-lookup"><span data-stu-id="80251-183"><span id="_wu__"></span><span id="_WU__"></span>/wu</span></span> 
</dt> <dd>

<span data-ttu-id="80251-184">Force l’utilisation de Windows Update plutôt que la valeur système par défaut, qui peut être Windows Server Update Services (WSUS) s’exécutant sur un serveur géré ou une autre configuration non standard.</span><span class="sxs-lookup"><span data-stu-id="80251-184">Forces use of Windows Update rather than the system default, which may be Windows Server Update Services (WSUS) running on a managed server or some other non-standard configuration.</span></span>

</dd> </dl>

## <a name="integrating-into-installation-programs"></a><span data-ttu-id="80251-185">Intégration dans les programmes d’installation</span><span class="sxs-lookup"><span data-stu-id="80251-185">Integrating into installation programs</span></span>

<span data-ttu-id="80251-186">Pour se conformer à la facilité d’installation, à l' [exigence technique 3,1 pour les jeux pour Windows](/windows/desktop/DxTechArts/games-for-windows-technical-requirements-1-1-0006), vous devez veiller à ce que les invites des utilisateurs finaux soient présentées au début du processus d’installation et pour s’assurer qu’il n’y a pas plusieurs invites d’élévation associées au contrôle de compte d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="80251-186">To comply with Support Easy Installation, [Technical Requirement 3.1 for Games for Windows](/windows/desktop/DxTechArts/games-for-windows-technical-requirements-1-1-0006), care needs to be taken so that any end-user prompts are presented early in the installation process, and to ensure that there are not multiple UAC-related elevation prompts.</span></span> <span data-ttu-id="80251-187">Il existe trois choix de base pour atteindre cet objectif :</span><span class="sxs-lookup"><span data-stu-id="80251-187">There are three basic choices for achieving this goal:</span></span>

1.  <span data-ttu-id="80251-188">La méthode la plus simple consiste à exécuter le D3D11Install.exe avec le commutateur de ligne de commande **/minimal**.</span><span class="sxs-lookup"><span data-stu-id="80251-188">The most basic method is to execute the D3D11Install.exe with the command-line switch **/minimal**.</span></span> <span data-ttu-id="80251-189">Cela doit être fait tôt dans le programme d’installation Q&A, et l’installation doit utiliser la valeur de retour 1 pour indiquer qu’un redémarrage doit être planifié à la fin de l’installation.</span><span class="sxs-lookup"><span data-stu-id="80251-189">This should be done early in the installer Q&A, and the installation should use the return value of 1 to indicate that a restart should be scheduled at the end of the installation.</span></span> <span data-ttu-id="80251-190">L’exécution du programme requiert des droits d’administration.</span><span class="sxs-lookup"><span data-stu-id="80251-190">Executing the program requires administrative rights.</span></span>
2.  <span data-ttu-id="80251-191">Utilisez D3D11InstallHelper.dll directement pour détecter la nécessité de la mise à jour, en fournissant tous les messages de l’utilisateur final nécessaires à l’État D3D11IH \_ état \_ nécessite le \_ dernier \_ SP, où la résolution requiert des opérations manuelles de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="80251-191">Use D3D11InstallHelper.dll directly to detect the need for the update, providing any end-user messages necessary for the status D3D11IH\_STATUS\_NEED\_LATEST\_SP, where the resolution requires manual user operations.</span></span> <span data-ttu-id="80251-192">Le résultat de l’état \_ D3D11IH \_ non \_ pris en charge peut être utilisé pour contrôler l’installation des ressources associées à Direct3D 11, ou en tant que condition d’erreur pour les applications Direct3D 11 uniquement, mais il ne s’agit pas nécessairement d’un message utilisateur final utile.</span><span class="sxs-lookup"><span data-stu-id="80251-192">The status result of D3D11IH\_STATUS\_NOT\_SUPPORTED could be used to control installation of Direct3D 11–related assets, or as an error condition for Direct3D 11–only applications, but it is otherwise not necessarily a useful end-user message.</span></span> <span data-ttu-id="80251-193">Pour l’État D3D11IH l’état \_ \_ requiert \_ Update, le programme d’installation peut utiliser directement le point d’entrée de la dll DoUpdateForDirect3D11 pour effectuer la mise à jour et gérer les divers messages utilisateur finaux résultants.</span><span class="sxs-lookup"><span data-stu-id="80251-193">For the status D3D11IH\_STATUS\_REQUIRES\_UPDATE, the installer can directly use the DLL entry point DoUpdateForDirect3D11 to perform the update and handle the various resulting end-user messages.</span></span> <span data-ttu-id="80251-194">Vous pouvez trouver des exemples de messages standard en consultant la boîte de dialogue D3D11Install.exe et les ressources de table de chaînes.</span><span class="sxs-lookup"><span data-stu-id="80251-194">Examples of standard messages can be found by examining the D3D11Install.exe dialog box and string table resources.</span></span> <span data-ttu-id="80251-195">Le point d’entrée de mise à jour requiert des droits d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="80251-195">The update entry point requires administrator rights.</span></span>
3.  <span data-ttu-id="80251-196">Une approche hybride consiste à vérifier l’état avec D3D11InstallHelper.dll et, dans le cas du code d’État D3D11IH, le \_ \_ \_ dernier \_ État du SP ou D3D11IH \_ \_ doit \_ être Update, D3D11Install.exe peut être exécuté avec les commutateurs **/minimal** et **/y** pour afficher la boîte de dialogue ou pour effectuer la mise à jour, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="80251-196">A hybrid approach is to check status with D3D11InstallHelper.dll, and in the case of the status code D3D11IH\_STATUS\_NEED\_LATEST\_SP or D3D11IH\_STATUS\_REQUIRES\_UPDATE, D3D11Install.exe can be executed with the switches **/minimal** and **/y** to display the dialog box or to perform the update, as needed.</span></span> <span data-ttu-id="80251-197">Ces étapes doivent être effectuées au début du processus d’installation, généralement immédiatement après le Q&A, et l’exécution de l’exécutable nécessite des droits d’administration.</span><span class="sxs-lookup"><span data-stu-id="80251-197">These steps should be performed early in the installation process, usually immediately after the Q&A, and running the executable requires administrative rights.</span></span>

### <a name="integrating-into-installshield"></a><span data-ttu-id="80251-198">Intégration à InstallShield</span><span class="sxs-lookup"><span data-stu-id="80251-198">Integrating into InstallShield</span></span>

<span data-ttu-id="80251-199">La gestion du déploiement de Direct3D 11 à partir de l’InstallScript d’InstallShield s’effectue facilement à l’aide de l’exemple D3D11InstallHelper.</span><span class="sxs-lookup"><span data-stu-id="80251-199">Handling the Direct3D 11 deployment from InstallShield's InstallScript is easily done using the D3D11InstallHelper sample.</span></span> <span data-ttu-id="80251-200">Les étapes requises pour l’intégration à InstallShield à l’aide d’InstallScript sont les suivantes (à l’aide de la méthode 3, décrite dans la section précédente) :</span><span class="sxs-lookup"><span data-stu-id="80251-200">The steps required to integrate with InstallShield using InstallScript are as follows (using method 3, described in the previous section):</span></span>

1.  <span data-ttu-id="80251-201">Ouvrez un projet InstallScript dans l’éditeur InstallShield.</span><span class="sxs-lookup"><span data-stu-id="80251-201">Open an InstallScript project in the InstallShield editor.</span></span>
2.  <span data-ttu-id="80251-202">Ajoutez D3D11InstallHelper.dll et D3D11Install.exe au projet dans les **fichiers de support**.</span><span class="sxs-lookup"><span data-stu-id="80251-202">Add D3D11InstallHelper.dll and D3D11Install.exe to the project in **Support Files**.</span></span>

    <span data-ttu-id="80251-203">**Pour ajouter les fichiers au projet InstallShield**</span><span class="sxs-lookup"><span data-stu-id="80251-203">**To add the files to the InstallShield Project**</span></span>

    1.  <span data-ttu-id="80251-204">Sous l’onglet **Concepteur d’installation** , cliquez sur fichiers de **support/panneaux** d’exploration sous **comportement et logique** dans le volet de navigation à gauche.</span><span class="sxs-lookup"><span data-stu-id="80251-204">On the **Installation Designer** tab, click **Support Files/Billboards** under **Behavior and Logic** in the navigation pane on the left.</span></span>
    2.  <span data-ttu-id="80251-205">Cliquez sur indépendant de la **langue**, puis cliquez avec le bouton droit dans la fenêtre **fichiers** et sélectionnez **Insérer des fichiers**.</span><span class="sxs-lookup"><span data-stu-id="80251-205">Click **Language Independent**, then right-click in the **Files** window and select **Insert Files**.</span></span> <span data-ttu-id="80251-206">Accédez à ajouter D3D11InstallHelper.dll et D3D11Install.exe.</span><span class="sxs-lookup"><span data-stu-id="80251-206">Browse to add D3D11InstallHelper.dll and D3D11Install.exe.</span></span> <span data-ttu-id="80251-207">L’emplacement par défaut de ces fichiers est : exemples racine SDK \\ \\ C++ \\ misc \\ bin \\ x86</span><span class="sxs-lookup"><span data-stu-id="80251-207">The default location for these files is: SDK root\\Samples\\C++\\Misc\\Bin\\x86</span></span>

3.  <span data-ttu-id="80251-208">Dans l’Explorateur InstallScript, cliquez sur le fichier InstallScript (généralement Setup. vie utile restante) qui appellera la DLL ou le fichier exécutable, situé sous **comportement et logique** dans le volet de navigation de gauche.</span><span class="sxs-lookup"><span data-stu-id="80251-208">In the InstallScript explorer, click the InstallScript file (usually Setup.rul) that will call the DLL or executable, located under **Behavior and Logic** in the navigation pane on the left.</span></span>
4.  <span data-ttu-id="80251-209">Collez l’InstallScript suivant dans le fichier vers le haut :</span><span class="sxs-lookup"><span data-stu-id="80251-209">Paste the following InstallScript into the file near the top:</span></span>

    ``` syntax
#define D3D11IH_STATUS_INSTALLED       0
#define D3D11IH_STATUS_NOT_SUPPORTED   1
#define D3D11IH_STATUS_REQUIRES_UPDATE 2
#define D3D11IH_STATUS_NEED_LATEST_SP  3
#define D3D11IH_STATUS_ERROR           -1
    prototype NUMBER D3D11InstallHelper.CheckDirect3D11StatusIS();

#define D3D11IH_RESULT_SUCCESS                0
#define D3D11IH_RESULT_SUCCESS_REBOOT         1
#define D3D11IH_RESULT_NOT_SUPPORTED          2
#define D3D11IH_RESULT_UPDATE_NOT_FOUND       3
#define D3D11IH_RESULT_UPDATE_DOWNLOAD_FAILED 4
#define D3D11IH_RESULT_UPDATE_INSTALL_FAILED  5
#define D3D11IH_RESULT_WU_SERVICE_ERROR       6
#define D3D11IH_RESULT_ERROR                  -1
    prototype NUMBER D3D11InstallHelper.DoUpdateForDirect3D11IS(BOOL);
    ```

5.  <span data-ttu-id="80251-210">Collez l’InstallScript suivant dans le fichier dans la fonction **OnFirstUIBefore** , juste avant le retour 0 :</span><span class="sxs-lookup"><span data-stu-id="80251-210">Paste the following InstallScript into the file in the **OnFirstUIBefore** function, just before the return 0:</span></span>

    ``` syntax
    Dlg_D3D11:
        UseDLL( SUPPORTDIR ^ "D3D11InstallHelper.DLL" );
        nResult = D3D11InstallHelper.CheckDirect3D11StatusIS();   
        UnUseDLL( SUPPORTDIR ^ "D3D11InstallHelper.DLL" );
        
        if ( nResult = D3D11IH_STATUS_REQUIRES_UPDATE
             || nResult = D3D11IH_STATUS_NEED_LATEST_SP) then
            nResult = LaunchAppAndWait(
    SUPPORTDIR^"D3D11Install.exe",
    "/minimal /y", WAIT);
            if ( nResult < 0 ) then
                MessageBox("Unable to launch D3D11Install.exe",
     SEVERE);
            elseif ( nResult == 1 ) then
                BATCH_INSTALL = 1;
            endif;          
        endif;
    ```

### <a name="integrating-into-an-msi-package"></a><span data-ttu-id="80251-211">Intégration dans un package MSI</span><span class="sxs-lookup"><span data-stu-id="80251-211">Integrating into an MSI package</span></span>

<span data-ttu-id="80251-212">Vous trouverez ci-dessous une description détaillée des étapes requises pour intégrer le déploiement de Direct3D 11 à l’aide d’actions personnalisées MSI (à l’aide de la méthode 3, décrite précédemment dans cette rubrique) :</span><span class="sxs-lookup"><span data-stu-id="80251-212">The following is a high-level description of the steps required to integrate Direct3D 11 deployment using MSI custom actions (using method 3, described earlier in this topic):</span></span>

1.  <span data-ttu-id="80251-213">Ajoutez une propriété à la table de propriétés MSI appelée **RelativePathToD3D11IH** qui contient le chemin d’accès relatif à D3D11Install.exe et D3D11InstallHelper.dll lors de l’installation (généralement dans l’image de média).</span><span class="sxs-lookup"><span data-stu-id="80251-213">Add a property to the MSI Property table called **RelativePathToD3D11IH** that contains the relative path to D3D11Install.exe and D3D11InstallHelper.dll during installation (this is typically in the media image).</span></span> <span data-ttu-id="80251-214">Cela définit également une propriété MSI D3D11IH \_ Status sur l’état renvoyé par CheckDirect3D11Status (une propriété de type chaîne égale au symbole d’énumération ou « Error »).</span><span class="sxs-lookup"><span data-stu-id="80251-214">This also sets an MSI property D3D11IH\_STATUS to the status returned by CheckDirect3D11Status (a string property equal to the enumeration symbol or "ERROR").</span></span>
2.  <span data-ttu-id="80251-215">Après l’action CostFinalize, appelez la fonction D3D11InstallHelper.dll **SetD3D11InstallMSIProperties** en tant qu’action personnalisée immédiate pour définir les propriétés MSI appropriées pour les autres actions personnalisées.</span><span class="sxs-lookup"><span data-stu-id="80251-215">After the CostFinalize action, call the D3D11InstallHelper.dll function **SetD3D11InstallMSIProperties** as an immediate custom action to set the appropriate MSI properties for the other custom actions.</span></span>
3.  <span data-ttu-id="80251-216">Lors de l’installation, déclenchez une action personnalisée différée après l’action InstallFiles qui appelle la fonction D3D11InstallHelper.dll **DoD3D11InstallUsingMSI**.</span><span class="sxs-lookup"><span data-stu-id="80251-216">Upon installation, trigger a deferred custom action after the InstallFiles action that calls the D3D11InstallHelper.dll function **DoD3D11InstallUsingMSI**.</span></span> <span data-ttu-id="80251-217">L’action personnalisée doit définir l’indicateur msidbCustomActionTypeNoImpersonate pour qu’elle s’exécute dans un contexte avec élévation de privilèges.</span><span class="sxs-lookup"><span data-stu-id="80251-217">The custom action must set the flag msidbCustomActionTypeNoImpersonate to run in an elevated context.</span></span>
4.  <span data-ttu-id="80251-218">Après l’action InstallFinalize, appelez la fonction D3D11InstallHelper.dll **FinishD3D11InstallUsingMSI** en tant qu’action personnalisée immédiate pour gérer le code de résultat de la demande de redémarrage réussi, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="80251-218">After the InstallFinalize action, call the D3D11InstallHelper.dll function **FinishD3D11InstallUsingMSI** as an immediate custom action to handle the successful reboot request result code, if needed.</span></span>

<span data-ttu-id="80251-219">Cette procédure est décrite en détail dans les instructions suivantes, qui décrivent un processus qui peut être effectué à l’aide d’un éditeur MSI, tel que l' [éditeur Orca](/windows/desktop/Msi/orca-exe).</span><span class="sxs-lookup"><span data-stu-id="80251-219">This procedure is described in detail in the following instructions, which describe a process that can be done using an MSI editor, such as the [Orca editor](/windows/desktop/Msi/orca-exe).</span></span> <span data-ttu-id="80251-220">Certains éditeurs MSI possèdent des assistants qui simplifient certaines de ces étapes de configuration.</span><span class="sxs-lookup"><span data-stu-id="80251-220">Some MSI editors have wizards that simplify some of these configuration steps.</span></span>

<span data-ttu-id="80251-221">**Pour configurer un package MSI en vue de l’intégrer à D3D11InstallHelper.dll**</span><span class="sxs-lookup"><span data-stu-id="80251-221">**To configure an MSI package for integration with D3D11InstallHelper.dll**</span></span>

1.  <span data-ttu-id="80251-222">Ouvrez le package MSI dans Orca.</span><span class="sxs-lookup"><span data-stu-id="80251-222">Open the MSI package in Orca.</span></span>
2.  <span data-ttu-id="80251-223">Ajoutez la ligne indiquée dans le tableau suivant à la table binaire dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="80251-223">Add the row shown in the following table to the Binary table in the MSI package.</span></span>

    | <span data-ttu-id="80251-224">Nom</span><span class="sxs-lookup"><span data-stu-id="80251-224">Name</span></span>    | <span data-ttu-id="80251-225">Données</span><span class="sxs-lookup"><span data-stu-id="80251-225">Data</span></span>                                         |
    |---------|----------------------------------------------|
    | <span data-ttu-id="80251-226">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="80251-226">D3D11IH</span></span> | <span data-ttu-id="80251-227">Chemin d’accès au fichier DLL \\D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="80251-227">File path to the DLL\\D3D11InstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="80251-228">Ce fichier sera incorporé dans le package MSI. vous devez donc effectuer cette étape chaque fois que vous recompilez D3D11InstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="80251-228">This file will be embedded in the MSI package, so you must do this step every time that you recompile D3D11InstallHelper.dll.</span></span>

     

3.  <span data-ttu-id="80251-229">Ajoutez les lignes indiquées dans le tableau suivant à la table CustomAction dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="80251-229">Add the rows shown in the following table to the CustomAction table in the MSI package.</span></span> 

    | <span data-ttu-id="80251-230">Action</span><span class="sxs-lookup"><span data-stu-id="80251-230">Action</span></span>              | <span data-ttu-id="80251-231">Type</span><span class="sxs-lookup"><span data-stu-id="80251-231">Type</span></span>                                                                                                                                                                   | <span data-ttu-id="80251-232">Source</span><span class="sxs-lookup"><span data-stu-id="80251-232">Source</span></span>  | <span data-ttu-id="80251-233">Cible</span><span class="sxs-lookup"><span data-stu-id="80251-233">Target</span></span>                       |
    |---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|------------------------------|
    | <span data-ttu-id="80251-234">Direct3D11SetProps</span><span class="sxs-lookup"><span data-stu-id="80251-234">Direct3D11SetProps</span></span>  | <span data-ttu-id="80251-235">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span><span class="sxs-lookup"><span data-stu-id="80251-235">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                        | <span data-ttu-id="80251-236">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="80251-236">D3D11IH</span></span> | <span data-ttu-id="80251-237">SetD3D11InstallMSIProperties</span><span class="sxs-lookup"><span data-stu-id="80251-237">SetD3D11InstallMSIProperties</span></span> |
    | <span data-ttu-id="80251-238">Direct3D11DoInstall</span><span class="sxs-lookup"><span data-stu-id="80251-238">Direct3D11DoInstall</span></span> | <span data-ttu-id="80251-239">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span><span class="sxs-lookup"><span data-stu-id="80251-239">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span></span> | <span data-ttu-id="80251-240">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="80251-240">D3D11IH</span></span> | <span data-ttu-id="80251-241">DoD3D11InstallUsingMSI</span><span class="sxs-lookup"><span data-stu-id="80251-241">DoD3D11InstallUsingMSI</span></span>       |
    | <span data-ttu-id="80251-242">Direct3D11Finish</span><span class="sxs-lookup"><span data-stu-id="80251-242">Direct3D11Finish</span></span>    | <span data-ttu-id="80251-243">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span><span class="sxs-lookup"><span data-stu-id="80251-243">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                        | <span data-ttu-id="80251-244">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="80251-244">D3D11IH</span></span> | <span data-ttu-id="80251-245">FinishD3D11InstallUsingMSI</span><span class="sxs-lookup"><span data-stu-id="80251-245">FinishD3D11InstallUsingMSI</span></span>   |

    

     

4.  <span data-ttu-id="80251-246">Ajoutez les valeurs indiquées pour action, condition et séquence dans le tableau suivant à la table InstallExecuteSequence dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="80251-246">Add the values shown for Action, Condition, and Sequence in the following table to the InstallExecuteSequence table in the MSI package.</span></span> 

    | <span data-ttu-id="80251-247">Action</span><span class="sxs-lookup"><span data-stu-id="80251-247">Action</span></span>              | <span data-ttu-id="80251-248">Condition</span><span class="sxs-lookup"><span data-stu-id="80251-248">Condition</span></span>     | <span data-ttu-id="80251-249">Séquence</span><span class="sxs-lookup"><span data-stu-id="80251-249">Sequence</span></span> | <span data-ttu-id="80251-250">Notes</span><span class="sxs-lookup"><span data-stu-id="80251-250">Notes</span></span>                                                                                                                                                          |
    |---------------------|---------------|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="80251-251">Direct3D11SetProps</span><span class="sxs-lookup"><span data-stu-id="80251-251">Direct3D11SetProps</span></span>  |               | <span data-ttu-id="80251-252">1016</span><span class="sxs-lookup"><span data-stu-id="80251-252">1016</span></span>     | <span data-ttu-id="80251-253">Le numéro de séquence place l’action juste après CostFinalize.</span><span class="sxs-lookup"><span data-stu-id="80251-253">The sequence number places the action soon after CostFinalize.</span></span>                                                                                                 |
    | <span data-ttu-id="80251-254">Direct3D11DoInstall</span><span class="sxs-lookup"><span data-stu-id="80251-254">Direct3D11DoInstall</span></span> | <span data-ttu-id="80251-255">NON installé</span><span class="sxs-lookup"><span data-stu-id="80251-255">NOT Installed</span></span> | <span data-ttu-id="80251-256">4004</span><span class="sxs-lookup"><span data-stu-id="80251-256">4004</span></span>     | <span data-ttu-id="80251-257">Cette action personnalisée se produit uniquement au cours d’une nouvelle installation pour tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="80251-257">This custom action will only happen during a new installation for all users.</span></span> <span data-ttu-id="80251-258">Le numéro de séquence place l’action après InstallFiles et après les restaurations.</span><span class="sxs-lookup"><span data-stu-id="80251-258">The sequence number places the action after InstallFiles and after the rollbacks.</span></span> |
    | <span data-ttu-id="80251-259">Direct3D11Finish</span><span class="sxs-lookup"><span data-stu-id="80251-259">Direct3D11Finish</span></span>    |               | <span data-ttu-id="80251-260">6615</span><span class="sxs-lookup"><span data-stu-id="80251-260">6615</span></span>     | <span data-ttu-id="80251-261">Le numéro de séquence place l’action juste après InstallFinalize.</span><span class="sxs-lookup"><span data-stu-id="80251-261">The sequence number places the action soon after InstallFinalize.</span></span>                                                                                              |

    

     

5.  <span data-ttu-id="80251-262">Ajoutez la ligne indiquée dans le tableau suivant à la table des **Propriétés** dans le package MSI.</span><span class="sxs-lookup"><span data-stu-id="80251-262">Add the row shown in the following table to the **Property** table in the MSI package.</span></span> 

    | <span data-ttu-id="80251-263">Propriété</span><span class="sxs-lookup"><span data-stu-id="80251-263">Property</span></span>              | <span data-ttu-id="80251-264">Valeur</span><span class="sxs-lookup"><span data-stu-id="80251-264">Value</span></span>                                                                        |
    |-----------------------|------------------------------------------------------------------------------|
    | <span data-ttu-id="80251-265">RelativePathToD3D11IH</span><span class="sxs-lookup"><span data-stu-id="80251-265">RelativePathToD3D11IH</span></span> | <span data-ttu-id="80251-266">chemin de fichier relatif qui contient D3D11Install.exe et D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="80251-266">relative file path that contains D3D11Install.exe and D3D11InstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="80251-267">L’emplacement spécifié par le chemin d’accès est relatif à l’emplacement spécifié par le chemin d’installation, par exemple, « Redist \\ ».</span><span class="sxs-lookup"><span data-stu-id="80251-267">The location specified by the path is relative to the location specified by the installation path—for example, "redist\\".</span></span>

     

6.  <span data-ttu-id="80251-268">Enregistrez le package MSI.</span><span class="sxs-lookup"><span data-stu-id="80251-268">Save the MSI package.</span></span> <span data-ttu-id="80251-269">Pour plus d’informations sur les packages et les Windows Installer MSI, consultez [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="80251-269">For more detailed information about MSI packages and Windows Installer, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>

## <a name="debugging-tips"></a><span data-ttu-id="80251-270">Conseils de débogage</span><span class="sxs-lookup"><span data-stu-id="80251-270">Debugging tips</span></span>

<span data-ttu-id="80251-271">D3D11InstallHelper.dll et D3D11Install.exe peuvent être générés avec la configuration Debug dans Visual Studio, et ces versions impriment les messages dans le mécanisme de sortie de débogage Windows standard.</span><span class="sxs-lookup"><span data-stu-id="80251-271">Both D3D11InstallHelper.dll and D3D11Install.exe can be built with the Debug configuration in Visual Studio, and these versions will print messages to the standard Windows debug output mechanism.</span></span>

## <a name="corporate-settings"></a><span data-ttu-id="80251-272">Paramètres Entreprise</span><span class="sxs-lookup"><span data-stu-id="80251-272">Corporate settings</span></span>

<span data-ttu-id="80251-273">L’exemple D3D11InstallHelper est conçu pour un déploiement standard via Windows Update, qui est le scénario le plus courant pour l’installation d’un jeu par les consommateurs.</span><span class="sxs-lookup"><span data-stu-id="80251-273">The D3D11InstallHelper sample is designed for standard deployment through Windows Update, which is the most common scenario for installation of a game by consumers.</span></span> <span data-ttu-id="80251-274">Toutefois, de nombreux développeurs de jeux, travaillant pour les éditeurs et les Studios de développement, le font dans les paramètres d’entreprise qui disposent d’un serveur géré localement fournissant des mises à jour logicielles à l’aide de la technologie Windows Server Update Services (WSUS).</span><span class="sxs-lookup"><span data-stu-id="80251-274">However, Many game developers, working for publishers and in development studios, do so in enterprise settings that have a locally managed server providing software updates by using Windows Server Update Services (WSUS) technology.</span></span> <span data-ttu-id="80251-275">Dans ce type d’environnement, l’administrateur informatique local a le contrôle de l’approbation des mises à jour qui sont mises à disposition des ordinateurs au sein du réseau d’entreprise, et la version standard du client de la mise à jour KB 971644 n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="80251-275">In this type of environment, the local IT administrator has approval control over which updates are made available to computers within the corporate network, and the standard consumer version of update KB 971644 is not available.</span></span>

<span data-ttu-id="80251-276">Il existe trois solutions de base pour le déploiement de DirectX 11 dans les paramètres d’entreprise/entreprise :</span><span class="sxs-lookup"><span data-stu-id="80251-276">There are three basic solutions for deploying DirectX 11 in corporate/enterprise settings:</span></span>

-   <span data-ttu-id="80251-277">Dans certaines configurations, il est possible de vérifier directement Windows Update plutôt que d’utiliser le serveur WSUS géré localement.</span><span class="sxs-lookup"><span data-stu-id="80251-277">In some configurations, it is possible to directly check Windows Update rather than use the locally managed WSUS server.</span></span> <span data-ttu-id="80251-278">Pour cette raison, D3D11InstallHelper prend en charge le commutateur de ligne de commande **/Wu** .</span><span class="sxs-lookup"><span data-stu-id="80251-278">For this reason, D3D11InstallHelper supports the **/wu** command-line switch.</span></span> <span data-ttu-id="80251-279">Toutefois, tous les réseaux d’entreprise n’autorisent pas les connexions aux serveurs publics Microsoft.</span><span class="sxs-lookup"><span data-stu-id="80251-279">However, not all corporate networks allow connections to the public Microsoft servers.</span></span>
-   <span data-ttu-id="80251-280">L’administrateur informatique local peut approuver KB 971512, une mise à jour prise en charge par l’entreprise, déployée à partir de WSUS, qui comprend l’API Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="80251-280">The local IT administrator can approve KB 971512, an enterprise-supported update deployed from WSUS, that includes the Direct3D 11 API.</span></span> <span data-ttu-id="80251-281">Il s’agit de la seule option permettant à un utilisateur standard d’obtenir la mise à jour de Direct3D 11 dans un environnement entièrement verrouillé.</span><span class="sxs-lookup"><span data-stu-id="80251-281">This is the only option for a Standard User to obtain the Direct3D 11 update in an environment that is fully locked down.</span></span>
-   <span data-ttu-id="80251-282">Vous pouvez également installer manuellement [KB 971512](https://support.microsoft.com/kb/971512/) .</span><span class="sxs-lookup"><span data-stu-id="80251-282">Alternatively, [KB 971512](https://support.microsoft.com/kb/971512/) can be manually installed.</span></span>

<span data-ttu-id="80251-283">Il est très rare que l’ordinateur d’un joueur puisse uniquement obtenir des mises à jour à partir d’un serveur WSUS géré localement, et il ne s’agit que de développeurs appartenant à des organisations de grande taille qui sont susceptibles d’être dans de tels environnements.</span><span class="sxs-lookup"><span data-stu-id="80251-283">It is very rare that a gamer's computer can only get updates from a locally managed WSUS server, and it is only developers in large organizations who are likely to be in such environments.</span></span>

## <a name="related-articles"></a><span data-ttu-id="80251-284">Articles connexes</span><span class="sxs-lookup"><span data-stu-id="80251-284">Related articles</span></span>

[<span data-ttu-id="80251-285">Pare-feu Windows pour les développeurs de jeux</span><span class="sxs-lookup"><span data-stu-id="80251-285">Windows Firewall for Game Developers</span></span>](/windows/desktop/DxTechArts/games-and-firewalls)

[<span data-ttu-id="80251-286">Explorateur de jeux Windows pour les développeurs de jeux</span><span class="sxs-lookup"><span data-stu-id="80251-286">Windows Games Explorer for Game Developers</span></span>](/windows/desktop/DxTechArts/windows-game-explorer-integration)