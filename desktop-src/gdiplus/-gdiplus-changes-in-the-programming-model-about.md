---
description: Les sections suivantes décrivent plusieurs façons dont la programmation avec Windows GDI+ diffère de la programmation avec Windows Graphics Device Interface (GDI).
ms.assetid: 89a154c1-6a49-45d6-a73c-94b0b1567408
title: Changements dans le modèle de programmation
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a90cd6f1c3a6ebab1e55562e67cb4926f0ffedf9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104034364"
---
# <a name="changes-in-the-programming-model"></a><span data-ttu-id="d641b-103">Changements dans le modèle de programmation</span><span class="sxs-lookup"><span data-stu-id="d641b-103">Changes in the Programming Model</span></span>

<span data-ttu-id="d641b-104">Les sections suivantes décrivent plusieurs façons dont la programmation avec Windows GDI+ diffère de la programmation avec Windows Graphics Device Interface (GDI).</span><span class="sxs-lookup"><span data-stu-id="d641b-104">The following sections describe several ways that programming with Windows GDI+ is different from programming with Windows Graphics Device Interface (GDI).</span></span>

-   [<span data-ttu-id="d641b-105">Contextes de périphérique, Handles et objets graphiques</span><span class="sxs-lookup"><span data-stu-id="d641b-105">Device Contexts, Handles, and Graphics Objects</span></span>](#device-contexts-handles-and-graphics-objects)
-   [<span data-ttu-id="d641b-106">Deux façons de dessiner une ligne</span><span class="sxs-lookup"><span data-stu-id="d641b-106">Two Ways to Draw a Line</span></span>](#two-ways-to-draw-a-line)
    -   [<span data-ttu-id="d641b-107">Dessin d’une ligne avec GDI</span><span class="sxs-lookup"><span data-stu-id="d641b-107">Drawing a line with GDI</span></span>](#drawing-a-line-with-gdi)
    -   [<span data-ttu-id="d641b-108">Dessin d’une ligne avec GDI+ et l’interface de classe C++</span><span class="sxs-lookup"><span data-stu-id="d641b-108">Drawing a line with GDI+ and the C++ class interface</span></span>](#drawing-a-line-with-gdi-and-the-c-class-interface)
-   [<span data-ttu-id="d641b-109">Stylets, pinceaux, tracés, images et polices en tant que paramètres</span><span class="sxs-lookup"><span data-stu-id="d641b-109">Pens, Brushes, Paths, Images, and Fonts as Parameters</span></span>](#pens-brushes-paths-images-and-fonts-as-parameters)
-   [<span data-ttu-id="d641b-110">Surcharge de méthode</span><span class="sxs-lookup"><span data-stu-id="d641b-110">Method Overloading</span></span>](#method-overloading)
-   [<span data-ttu-id="d641b-111">Plus de position actuelle</span><span class="sxs-lookup"><span data-stu-id="d641b-111">No More Current Position</span></span>](#no-more-current-position)
-   [<span data-ttu-id="d641b-112">Méthodes distinctes pour dessiner et remplir</span><span class="sxs-lookup"><span data-stu-id="d641b-112">Separate Methods for Draw and Fill</span></span>](#separate-methods-for-draw-and-fill)
-   [<span data-ttu-id="d641b-113">Construction de régions</span><span class="sxs-lookup"><span data-stu-id="d641b-113">Constructing Regions</span></span>](#constructing-regions)

## <a name="device-contexts-handles-and-graphics-objects"></a><span data-ttu-id="d641b-114">Contextes de périphérique, Handles et objets graphiques</span><span class="sxs-lookup"><span data-stu-id="d641b-114">Device Contexts, Handles, and Graphics Objects</span></span>

<span data-ttu-id="d641b-115">Si vous avez écrit des programmes à l’aide de GDI (l’interface de périphérique graphique incluse dans les versions précédentes de Windows), vous êtes familiarisé avec l’idée d’un contexte de périphérique (DC).</span><span class="sxs-lookup"><span data-stu-id="d641b-115">If you have written programs using GDI (the graphics device interface included in previous versions of Windows), you are familiar with the idea of a device context (DC).</span></span> <span data-ttu-id="d641b-116">Un contexte de périphérique est une structure utilisée par Windows pour stocker des informations sur les fonctionnalités d’un périphérique d’affichage particulier et les attributs qui spécifient la façon dont les éléments sont dessinés sur cet appareil.</span><span class="sxs-lookup"><span data-stu-id="d641b-116">A device context is a structure used by Windows to store information about the capabilities of a particular display device and attributes that specify how items will be drawn on that device.</span></span> <span data-ttu-id="d641b-117">Un contexte de périphérique pour un affichage vidéo est également associé à une fenêtre particulière sur l’écran.</span><span class="sxs-lookup"><span data-stu-id="d641b-117">A device context for a video display is also associated with a particular window on the display.</span></span> <span data-ttu-id="d641b-118">Tout d’abord, vous obtenez un handle vers un contexte de périphérique (HDC), puis vous transmettez ce handle comme argument aux fonctions GDI qui effectuent en fait le dessin.</span><span class="sxs-lookup"><span data-stu-id="d641b-118">First you obtain a handle to a device context (HDC), and then you pass that handle as an argument to GDI functions that actually do the drawing.</span></span> <span data-ttu-id="d641b-119">Vous transmettez également le handle comme argument aux fonctions GDI qui obtiennent ou définissent les attributs du contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="d641b-119">You also pass the handle as an argument to GDI functions that obtain or set the attributes of the device context.</span></span>

<span data-ttu-id="d641b-120">Lorsque vous utilisez GDI+, vous n’avez pas à vous soucier des handles et des contextes de périphérique, comme vous le feriez avec GDI.</span><span class="sxs-lookup"><span data-stu-id="d641b-120">When you use GDI+, you don't have to be as concerned with handles and device contexts as you do when you use GDI.</span></span> <span data-ttu-id="d641b-121">Il vous suffit de créer un objet [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) , puis d’appeler ses méthodes dans le style orienté objet familier, MyGraphicsObject. DrawLine (*paramètres*).</span><span class="sxs-lookup"><span data-stu-id="d641b-121">You simply create a [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object and then invoke its methods in the familiar object-oriented style — myGraphicsObject.DrawLine(*parameters*).</span></span> <span data-ttu-id="d641b-122">L’objet **Graphics** est au cœur de GDI+, tout comme le contexte de périphérique est au cœur de GDI.</span><span class="sxs-lookup"><span data-stu-id="d641b-122">The **Graphics** object is at the core of GDI+ just as the device context is at the core of GDI.</span></span> <span data-ttu-id="d641b-123">Le contexte de périphérique et l’objet **Graphics** jouent des rôles similaires, mais il existe des différences fondamentales entre le modèle de programmation basé sur les descripteurs et les contextes de périphérique (GDI) et le modèle orienté objet utilisé avec les objets **Graphics** (GDI+).</span><span class="sxs-lookup"><span data-stu-id="d641b-123">The device context and the **Graphics** object play similar roles, but there are some fundamental differences between the handle-based programming model used with device contexts (GDI) and the object-oriented model used with **Graphics** objects (GDI+).</span></span>

<span data-ttu-id="d641b-124">L’objet [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) , comme le contexte de périphérique, est associé à une fenêtre particulière à l’écran et contient des attributs (par exemple, le mode de lissage et l’indicateur de rendu de texte) qui spécifient la façon dont les éléments doivent être dessinés.</span><span class="sxs-lookup"><span data-stu-id="d641b-124">The [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object, like the device context, is associated with a particular window on the screen and contains attributes (for example, smoothing mode and text rendering hint) that specify how items are to be drawn.</span></span> <span data-ttu-id="d641b-125">Toutefois, l’objet **Graphics** n’est pas lié à un stylet, un pinceau, un tracé, une image ou une police comme contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="d641b-125">However, the **Graphics** object is not tied to a pen, brush, path, image, or font as a device context is.</span></span> <span data-ttu-id="d641b-126">Par exemple, dans GDI, avant de pouvoir utiliser un contexte de périphérique pour dessiner une ligne, vous devez appeler [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) pour associer un objet Pen au contexte de périphérique.</span><span class="sxs-lookup"><span data-stu-id="d641b-126">For example, in GDI, before you can use a device context to draw a line, you must call [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) to associate a pen object with the device context.</span></span> <span data-ttu-id="d641b-127">On parle alors de sélectionner le stylet dans le contexte de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="d641b-127">This is referred to as selecting the pen into the device context.</span></span> <span data-ttu-id="d641b-128">Toutes les lignes dessinées dans le contexte de périphérique utilisent ce stylet jusqu’à ce que vous sélectionnez un autre stylet.</span><span class="sxs-lookup"><span data-stu-id="d641b-128">All lines drawn in the device context will use that pen until you select a different pen.</span></span> <span data-ttu-id="d641b-129">Avec GDI+, vous transmettez un objet [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) en tant qu’argument à la méthode [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) de la classe **Graphics** .</span><span class="sxs-lookup"><span data-stu-id="d641b-129">With GDI+, you pass a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object as an argument to the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) method of the **Graphics** class.</span></span> <span data-ttu-id="d641b-130">Vous pouvez utiliser un objet **Pen** différent dans chacune d’une série d’appels DrawLine sans avoir à associer un objet **Pen** donné à un objet **Graphics** .</span><span class="sxs-lookup"><span data-stu-id="d641b-130">You can use a different **Pen** object in each of a series of DrawLine calls without having to associate a given **Pen** object with a **Graphics** object.</span></span>

## <a name="two-ways-to-draw-a-line"></a><span data-ttu-id="d641b-131">Deux façons de dessiner une ligne</span><span class="sxs-lookup"><span data-stu-id="d641b-131">Two Ways to Draw a Line</span></span>

<span data-ttu-id="d641b-132">Les deux exemples suivants dessinent chacun une ligne rouge de largeur 3 à partir de l’emplacement (20, 10) à l’emplacement (200 100).</span><span class="sxs-lookup"><span data-stu-id="d641b-132">The following two examples each draw a red line of width 3 from location (20, 10) to location (200,100).</span></span> <span data-ttu-id="d641b-133">Le premier exemple appelle GDI et le second appelle GDI+ via l’interface de classe C++.</span><span class="sxs-lookup"><span data-stu-id="d641b-133">The first example calls GDI, and the second calls GDI+ through the C++ class interface.</span></span>

-   [<span data-ttu-id="d641b-134">Dessin d’une ligne avec GDI</span><span class="sxs-lookup"><span data-stu-id="d641b-134">Drawing a line with GDI</span></span>](#drawing-a-line-with-gdi)
-   [<span data-ttu-id="d641b-135">Dessin d’une ligne avec GDI+ et l’interface de classe C++</span><span class="sxs-lookup"><span data-stu-id="d641b-135">Drawing a line with GDI+ and the C++ class interface</span></span>](#drawing-a-line-with-gdi-and-the-c-class-interface)

### <a name="drawing-a-line-with-gdi"></a><span data-ttu-id="d641b-136">Dessin d’une ligne avec GDI</span><span class="sxs-lookup"><span data-stu-id="d641b-136">Drawing a line with GDI</span></span>

<span data-ttu-id="d641b-137">Pour dessiner une ligne avec GDI, vous avez besoin de deux objets : un contexte de périphérique et un stylet.</span><span class="sxs-lookup"><span data-stu-id="d641b-137">To draw a line with GDI, you need two objects: a device context and a pen.</span></span> <span data-ttu-id="d641b-138">Vous pouvez obtenir un handle vers un contexte de périphérique en appelant [**BeginPaint**](/windows/win32/api/winuser/nf-winuser-beginpaint)et un handle à un stylet en appelant [CreatePen](/windows/win32/api/wingdi/nf-wingdi-createpen).</span><span class="sxs-lookup"><span data-stu-id="d641b-138">You get a handle to a device context by calling [**BeginPaint**](/windows/win32/api/winuser/nf-winuser-beginpaint), and a handle to a pen by calling [CreatePen](/windows/win32/api/wingdi/nf-wingdi-createpen).</span></span> <span data-ttu-id="d641b-139">Ensuite, vous appelez [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) pour sélectionner le stylet dans le contexte de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="d641b-139">Next, you call [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) to select the pen into the device context.</span></span> <span data-ttu-id="d641b-140">Vous définissez la position du stylet sur (20, 10) en appelant [MoveToEx](/windows/win32/api/wingdi/nf-wingdi-movetoex) , puis dessinez une ligne à partir de cette position de stylet sur (200, 100) en appelant **LineTo**.</span><span class="sxs-lookup"><span data-stu-id="d641b-140">You set the pen position to (20, 10) by calling [MoveToEx](/windows/win32/api/wingdi/nf-wingdi-movetoex) and then draw a line from that pen position to (200, 100) by calling **LineTo**.</span></span> <span data-ttu-id="d641b-141">Notez que MoveToEx et [LineTo](/windows/win32/api/wingdi/nf-wingdi-lineto) reçoivent tous deux **HDC** comme argument.</span><span class="sxs-lookup"><span data-stu-id="d641b-141">Note that MoveToEx and [LineTo](/windows/win32/api/wingdi/nf-wingdi-lineto) both receive **hdc** as an argument.</span></span>


```
HDC          hdc;
PAINTSTRUCT  ps;
HPEN         hPen;
HPEN         hPenOld;
hdc = BeginPaint(hWnd, &ps);
   hPen = CreatePen(PS_SOLID, 3, RGB(255, 0, 0));
   hPenOld = (HPEN)SelectObject(hdc, hPen);
   MoveToEx(hdc, 20, 10, NULL);
   LineTo(hdc, 200, 100);
   SelectObject(hdc, hPenOld);
   DeleteObject(hPen);
EndPaint(hWnd, &ps);
```



### <a name="drawing-a-line-with-gdi-and-the-c-class-interface"></a><span data-ttu-id="d641b-142">Dessin d’une ligne avec GDI+ et l’interface de classe C++</span><span class="sxs-lookup"><span data-stu-id="d641b-142">Drawing a line with GDI+ and the C++ class interface</span></span>

<span data-ttu-id="d641b-143">Pour dessiner une ligne avec GDI+ et l’interface de classe C++, vous avez besoin d’un objet [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) et d’un objet [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) .</span><span class="sxs-lookup"><span data-stu-id="d641b-143">To draw a line with GDI+ and the C++ class interface, you need a [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object and a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object.</span></span> <span data-ttu-id="d641b-144">Notez que vous ne demandez pas à Windows les descripteurs de ces objets.</span><span class="sxs-lookup"><span data-stu-id="d641b-144">Note that you don't ask Windows for handles to these objects.</span></span> <span data-ttu-id="d641b-145">Au lieu de cela, vous utilisez des constructeurs pour créer une instance de la classe **Graphics** (un objet **Graphics** ) et une instance de la classe **Pen** (un objet **Pen** ).</span><span class="sxs-lookup"><span data-stu-id="d641b-145">Instead, you use constructors to create an instance of the **Graphics** class (a **Graphics** object) and an instance of the **Pen** class (a **Pen** object).</span></span> <span data-ttu-id="d641b-146">Le dessin d’une ligne implique l’appel de la méthode [**Graphics ::D rawline**](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) de la classe **Graphics** .</span><span class="sxs-lookup"><span data-stu-id="d641b-146">Drawing a line involves calling the [**Graphics::DrawLine**](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) method of the **Graphics** class.</span></span> <span data-ttu-id="d641b-147">Le premier paramètre de la méthode **Graphics ::D rawline** est un pointeur vers votre objet **Pen** .</span><span class="sxs-lookup"><span data-stu-id="d641b-147">The first parameter of the **Graphics::DrawLine** method is a pointer to your **Pen** object.</span></span> <span data-ttu-id="d641b-148">Il s’agit d’un schéma plus simple et plus souple que la sélection d’un stylet dans un contexte de périphérique, comme indiqué dans l’exemple GDI précédent.</span><span class="sxs-lookup"><span data-stu-id="d641b-148">This is a simpler and more flexible scheme than selecting a pen into a device context as shown in the preceding GDI example.</span></span>


```
HDC          hdc;
PAINTSTRUCT  ps;
Pen*         myPen;
Graphics*    myGraphics;
hdc = BeginPaint(hWnd, &ps);
   myPen = new Pen(Color(255, 255, 0, 0), 3);
   myGraphics = new Graphics(hdc);
   myGraphics->DrawLine(myPen, 20, 10, 200, 100);
   delete myGraphics;
   delete myPen;
EndPaint(hWnd, &ps);
```



## <a name="pens-brushes-paths-images-and-fonts-as-parameters"></a><span data-ttu-id="d641b-149">Stylets, pinceaux, tracés, images et polices en tant que paramètres</span><span class="sxs-lookup"><span data-stu-id="d641b-149">Pens, Brushes, Paths, Images, and Fonts as Parameters</span></span>

<span data-ttu-id="d641b-150">Les exemples précédents montrent que les objets [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) peuvent être créés et gérés séparément de l’objet [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) , qui fournit les méthodes de dessin.</span><span class="sxs-lookup"><span data-stu-id="d641b-150">The preceding examples show that [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) objects can be created and maintained separately from the [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object, which supplies the drawing methods.</span></span> <span data-ttu-id="d641b-151">Les objets [**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush), [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath), [**image**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-image)et [**font**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-font) peuvent également être créés et gérés séparément de l’objet **Graphics** .</span><span class="sxs-lookup"><span data-stu-id="d641b-151">[**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush), [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath), [**Image**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-image), and [**Font**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-font) objects can also be created and maintained separately from the **Graphics** object.</span></span> <span data-ttu-id="d641b-152">La plupart des méthodes de dessin fournies par la classe **Graphics** reçoivent un objet **Brush**, **GraphicsPath**, **image** ou **font** comme argument.</span><span class="sxs-lookup"><span data-stu-id="d641b-152">Many of the drawing methods provided by the **Graphics** class receive a **Brush**, **GraphicsPath**, **Image**, or **Font** object as an argument.</span></span> <span data-ttu-id="d641b-153">Par exemple, l’adresse d’un objet **Brush** est passée comme argument à la méthode [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) , et l’adresse d’un objet **GraphicsPath** est passée comme argument à la méthode [**Graphics ::D rawpath**](/windows/win32/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-drawpath) .</span><span class="sxs-lookup"><span data-stu-id="d641b-153">For example, the address of a **Brush** object is passed as an argument to the [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) method, and the address of a **GraphicsPath** object is passed as an argument to the [**Graphics::DrawPath**](/windows/win32/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-drawpath) method.</span></span> <span data-ttu-id="d641b-154">De même, les adresses des objets **image** et **font** sont passées aux méthodes [DrawImage](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawimage(inimage_inconstpointf_)) et [DrawString](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawstring(constwchar_int_constfont_constpointf__constbrush)) .</span><span class="sxs-lookup"><span data-stu-id="d641b-154">Similarly, addresses of **Image** and **Font** objects are passed to the [DrawImage](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawimage(inimage_inconstpointf_)) and [DrawString](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawstring(constwchar_int_constfont_constpointf__constbrush)) methods.</span></span> <span data-ttu-id="d641b-155">Contrairement à GDI, vous pouvez sélectionner un pinceau, un tracé, une image ou une police dans le contexte de périphérique, puis passer un handle au contexte de périphérique en tant qu’argument d’une fonction de dessin.</span><span class="sxs-lookup"><span data-stu-id="d641b-155">This is in contrast to GDI where you select a brush, path, image, or font into the device context and then pass a handle to the device context as an argument to a drawing function.</span></span>

## <a name="method-overloading"></a><span data-ttu-id="d641b-156">Surcharge de méthode</span><span class="sxs-lookup"><span data-stu-id="d641b-156">Method Overloading</span></span>

<span data-ttu-id="d641b-157">La plupart des méthodes GDI+ sont surchargées ; autrement dit, plusieurs méthodes partagent le même nom, mais ont des listes de paramètres différentes.</span><span class="sxs-lookup"><span data-stu-id="d641b-157">Many of the GDI+ methods are overloaded; that is, several methods share the same name but have different parameter lists.</span></span> <span data-ttu-id="d641b-158">Par exemple, la méthode [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) de la classe [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) est présente sous la forme suivante :</span><span class="sxs-lookup"><span data-stu-id="d641b-158">For example, the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) method of the [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) class comes in the following forms:</span></span>


```
Status DrawLine(IN const Pen* pen,
                IN REAL x1,
                IN REAL y1,
                IN REAL x2,
                IN REAL y2);
Status DrawLine(IN const Pen* pen,
                IN const PointF& pt1,
                IN const PointF& pt2);
Status DrawLine(IN const Pen* pen,
                IN INT x1,
                IN INT y1,
                IN INT x2,
                IN INT y2);
    
Status DrawLine(IN const Pen* pen,
                IN const Point& pt1,
                IN const Point& pt2);
```



<span data-ttu-id="d641b-159">Les quatre variations [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) ci-dessus reçoivent un pointeur vers un objet [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) , les coordonnées du point de départ et les coordonnées du point de fin.</span><span class="sxs-lookup"><span data-stu-id="d641b-159">All four of the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) variations above receive a pointer to a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object, the coordinates of the starting point, and the coordinates of the ending point.</span></span> <span data-ttu-id="d641b-160">Les deux premières variations reçoivent les coordonnées sous forme de nombres à virgule flottante, et les deux dernières variations reçoivent les coordonnées sous forme d’entiers.</span><span class="sxs-lookup"><span data-stu-id="d641b-160">The first two variations receive the coordinates as floating point numbers, and the last two variations receive the coordinates as integers.</span></span> <span data-ttu-id="d641b-161">Les première et troisième variations reçoivent les coordonnées sous la forme d’une liste de quatre nombres distincts, tandis que les deuxième et quatrième versions reçoivent les coordonnées sous la forme d’un couple d’objets [**point**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-point) (ou [**PointF**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-pointf)).</span><span class="sxs-lookup"><span data-stu-id="d641b-161">The first and third variations receive the coordinates as a list of four separate numbers, while the second and fourth variations receive the coordinates as a pair of [**Point**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-point) (or [**PointF**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-pointf)) objects.</span></span>

## <a name="no-more-current-position"></a><span data-ttu-id="d641b-162">Plus de position actuelle</span><span class="sxs-lookup"><span data-stu-id="d641b-162">No More Current Position</span></span>

<span data-ttu-id="d641b-163">Notez que dans les méthodes [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) indiquées précédemment, le point de départ et le point de fin de la ligne sont reçus comme arguments.</span><span class="sxs-lookup"><span data-stu-id="d641b-163">Note that in the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) methods shown previously both the starting point and the ending point of the line are received as arguments.</span></span> <span data-ttu-id="d641b-164">Il s’agit d’un écart par rapport au schéma GDI dans lequel vous appelez **MoveToEx** pour définir la position actuelle du stylet suivie de **LineTo** pour dessiner une ligne commençant à (**x1**, **Y1**) et se terminant à (**x2**, **Y2**).</span><span class="sxs-lookup"><span data-stu-id="d641b-164">This is a departure from the GDI scheme where you call **MoveToEx** to set the current pen position followed by **LineTo** in order to draw a line starting at (**x1**, **y1**) and ending at (**x2**, **y2**).</span></span> <span data-ttu-id="d641b-165">L’ensemble de GDI+ a abandonné la notion de position actuelle.</span><span class="sxs-lookup"><span data-stu-id="d641b-165">GDI+ as a whole has abandoned the notion of current position.</span></span>

## <a name="separate-methods-for-draw-and-fill"></a><span data-ttu-id="d641b-166">Méthodes distinctes pour dessiner et remplir</span><span class="sxs-lookup"><span data-stu-id="d641b-166">Separate Methods for Draw and Fill</span></span>

<span data-ttu-id="d641b-167">GDI+ est plus flexible que GDI lorsqu’il s’agit de dessiner les plans et de remplir l’intérieur des formes comme les rectangles.</span><span class="sxs-lookup"><span data-stu-id="d641b-167">GDI+ is more flexible than GDI when it comes to drawing the outlines and filling the interiors of shapes like rectangles.</span></span> <span data-ttu-id="d641b-168">GDI a une fonction [rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) qui dessine le contour et remplit l’intérieur d’un rectangle tout en une seule étape.</span><span class="sxs-lookup"><span data-stu-id="d641b-168">GDI has a [Rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) function that draws the outline and fills the interior of a rectangle all in one step.</span></span> <span data-ttu-id="d641b-169">Le contour est dessiné avec le stylet actuellement sélectionné, et l’intérieur est rempli avec le pinceau actuellement sélectionné.</span><span class="sxs-lookup"><span data-stu-id="d641b-169">The outline is drawn with the currently selected pen, and the interior is filled with the currently selected brush.</span></span>


```
hBrush = CreateHatchBrush(HS_CROSS, RGB(0, 0, 255));
hPen = CreatePen(PS_SOLID, 3, RGB(255, 0, 0));
SelectObject(hdc, hBrush);
SelectObject(hdc, hPen);
Rectangle(hdc, 100, 50, 200, 80);
```



<span data-ttu-id="d641b-170">GDI+ a des méthodes distinctes pour dessiner le contour et remplir l’intérieur d’un rectangle.</span><span class="sxs-lookup"><span data-stu-id="d641b-170">GDI+ has separate methods for drawing the outline and filling the interior of a rectangle.</span></span> <span data-ttu-id="d641b-171">La méthode [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) de la [**classe Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) a l’adresse d’un objet [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) comme l’un de ses paramètres, et la méthode [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) a l’adresse d’un objet [**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush) comme l’un de ses paramètres.</span><span class="sxs-lookup"><span data-stu-id="d641b-171">The [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) method of the [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) class has the address of a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object as one of its parameters, and the [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) method has the address of a [**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush) object as one of its parameters.</span></span>


```
HatchBrush* myHatchBrush = new HatchBrush(
   HatchStyleCross,
   Color(255, 0, 255, 0),
   Color(255, 0, 0, 255));
Pen* myPen = new Pen(Color(255, 255, 0, 0), 3);
myGraphics.FillRectangle(myHatchBrush, 100, 50, 100, 30);
myGraphics.DrawRectangle(myPen, 100, 50, 100, 30);
```



<span data-ttu-id="d641b-172">Notez que les méthodes [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) et [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) de GDI+ reçoivent des arguments qui spécifient le bord gauche, la largeur et la hauteur du rectangle.</span><span class="sxs-lookup"><span data-stu-id="d641b-172">Note that the [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) and [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) methods in GDI+ receive arguments that specify the rectangle's left edge, top, width, and height.</span></span> <span data-ttu-id="d641b-173">Cela diffère de la fonction[rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) GDI, qui accepte les arguments qui spécifient le bord gauche du rectangle, le bord droit, le haut et le bas.</span><span class="sxs-lookup"><span data-stu-id="d641b-173">This is in contrast to the GDI[Rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) function, which takes arguments that specify the rectangle's left edge, right edge, top, and bottom.</span></span> <span data-ttu-id="d641b-174">Notez également que le constructeur de la classe [**Color**](/windows/win32/api/gdipluscolor/nl-gdipluscolor-color) dans GDI+ a quatre paramètres.</span><span class="sxs-lookup"><span data-stu-id="d641b-174">Also note that the constructor for the [**Color**](/windows/win32/api/gdipluscolor/nl-gdipluscolor-color) class in GDI+ has four parameters.</span></span> <span data-ttu-id="d641b-175">Les trois derniers paramètres sont les valeurs de rouge, de vert et de bleu habituelles. le premier paramètre est la valeur alpha, qui spécifie dans quelle mesure la couleur dessinée est mélangée à la couleur d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="d641b-175">The last three parameters are the usual red, green, and blue values; the first parameter is the alpha value, which specifies the extent to which the color being drawn is blended with the background color.</span></span>

## <a name="constructing-regions"></a><span data-ttu-id="d641b-176">Construction de régions</span><span class="sxs-lookup"><span data-stu-id="d641b-176">Constructing Regions</span></span>

<span data-ttu-id="d641b-177">GDI fournit plusieurs fonctions pour la création de régions : CreateRectRgn, CreateEllpticRgn, CreateRoundRectRgn, CreatePolygonRgn et CreatePolyPolygonRgn.</span><span class="sxs-lookup"><span data-stu-id="d641b-177">GDI provides several functions for creating regions: CreateRectRgn, CreateEllpticRgn, CreateRoundRectRgn, CreatePolygonRgn, and CreatePolyPolygonRgn.</span></span> <span data-ttu-id="d641b-178">Vous vous attendez peut-être à ce que la classe [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) de GDI+ ait des constructeurs analogues qui acceptent des rectangles, des ellipses, des rectangles arrondis et des polygones comme arguments, mais ce n’est pas le cas.</span><span class="sxs-lookup"><span data-stu-id="d641b-178">You might expect the [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) class in GDI+ to have analogous constructors that take rectangles, ellipses, rounded rectangles, and polygons as arguments, but that is not the case.</span></span> <span data-ttu-id="d641b-179">La classe **Region** dans GDI+ fournit un constructeur qui reçoit une référence d’objet [**Rect**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-rect) et un autre constructeur qui reçoit l’adresse d’un objet [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) .</span><span class="sxs-lookup"><span data-stu-id="d641b-179">The **Region** class in GDI+ provides a constructor that receives a [**Rect**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-rect) object reference and another constructor that receives the address of a [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) object.</span></span> <span data-ttu-id="d641b-180">Si vous souhaitez construire une région basée sur une ellipse, un rectangle arrondi ou un polygone, vous pouvez facilement le faire en créant un objet **GraphicsPath** (qui contient une ellipse, par exemple), puis en passant l’adresse de cet objet **GraphicsPath** à un constructeur **Region** .</span><span class="sxs-lookup"><span data-stu-id="d641b-180">If you want to construct a region based on an ellipse, rounded rectangle, or polygon, you can easily do so by creating a **GraphicsPath** object (that contains an ellipse, for example) and then passing the address of that **GraphicsPath** object to a **Region** constructor.</span></span>

<span data-ttu-id="d641b-181">Avec GDI+, il est facile de former des zones complexes en combinant des formes et des tracés.</span><span class="sxs-lookup"><span data-stu-id="d641b-181">GDI+ makes it easy to form complex regions by combining shapes and paths.</span></span> <span data-ttu-id="d641b-182">La classe [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) a des méthodes [Union](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-union(inconstrectf_)) et [Intersect](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-intersect(inconstgraphicspath)) que vous pouvez utiliser pour augmenter une région existante avec un chemin d’accès ou une autre région.</span><span class="sxs-lookup"><span data-stu-id="d641b-182">The [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) class has [Union](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-union(inconstrectf_)) and [Intersect](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-intersect(inconstgraphicspath)) methods that you can use to augment an existing region with a path or another region.</span></span> <span data-ttu-id="d641b-183">Une fonctionnalité intéressante du schéma GDI+ est qu’un objet [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) n’est pas détruit lorsqu’il est passé comme argument à un constructeur **Region** .</span><span class="sxs-lookup"><span data-stu-id="d641b-183">One nice feature of the GDI+ scheme is that a [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) object is not destroyed when it is passed as an argument to a **Region** constructor.</span></span> <span data-ttu-id="d641b-184">Dans GDI, vous pouvez convertir un chemin d’accès à une région avec la fonction [PathToRegion](/windows/win32/api/wingdi/nf-wingdi-pathtoregion) , mais le chemin d’accès est détruit dans le processus.</span><span class="sxs-lookup"><span data-stu-id="d641b-184">In GDI, you can convert a path to a region with the [PathToRegion](/windows/win32/api/wingdi/nf-wingdi-pathtoregion) function, but the path is destroyed in the process.</span></span> <span data-ttu-id="d641b-185">En outre, un objet **GraphicsPath** n’est pas détruit quand son adresse est passée comme argument à une méthode Union ou INTERSECT. vous pouvez donc utiliser un chemin d’accès donné comme bloc de construction pour plusieurs régions distinctes.</span><span class="sxs-lookup"><span data-stu-id="d641b-185">Also, a **GraphicsPath** object is not destroyed when its address is passed as an argument to a Union or Intersect method, so you can use a given path as a building block for several separate regions.</span></span> <span data-ttu-id="d641b-186">Cela est illustré par l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="d641b-186">This is shown in the following example.</span></span> <span data-ttu-id="d641b-187">Supposons que **onePath** est un pointeur vers un objet **GraphicsPath** (simple ou complexe) qui a déjà été initialisé.</span><span class="sxs-lookup"><span data-stu-id="d641b-187">Assume that **onePath** is a pointer to a **GraphicsPath** object (simple or complex) that has already been initialized.</span></span>


```
Region  region1(rect1);
Region  region2(rect2);
region1.Union(onePath);
region2.Intersect(onePath);
```



 

 
