---
description: L’utilisation de symboles publics pour vos fichiers binaires image de mise à niveau et cible peut réduire d’environ une demi-taille des correctifs binaires.
ms.assetid: 83351a1b-ba70-4f0b-bacf-71ad7993a5aa
title: Utilisation de symboles pour réduire la taille des correctifs binaires
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9d5ccf33dbf3ffefbee909d99bd0204ea2f49aba
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106514646"
---
# <a name="using-symbols-to-reduce-binary-patch-size"></a><span data-ttu-id="70bbf-103">Utilisation de symboles pour réduire la taille des correctifs binaires</span><span class="sxs-lookup"><span data-stu-id="70bbf-103">Using Symbols to Reduce Binary Patch Size</span></span>

<span data-ttu-id="70bbf-104">L’utilisation de symboles publics pour vos fichiers binaires image de mise à niveau et cible peut réduire d’environ une demi-taille des correctifs binaires.</span><span class="sxs-lookup"><span data-stu-id="70bbf-104">Using public symbols for your target and upgrade image binaries can reduce binary patch sizes by approximately one half.</span></span> <span data-ttu-id="70bbf-105">La réduction réelle dépend des symboles utilisés.</span><span class="sxs-lookup"><span data-stu-id="70bbf-105">The actual reduction depends upon the symbols used.</span></span> <span data-ttu-id="70bbf-106">Notez que l’utilisation de symboles peut entraîner des temps de création de correctifs plus lents, car le traitement des fichiers de symboles est plus long.</span><span class="sxs-lookup"><span data-stu-id="70bbf-106">Note that using symbols can result in slower patch creation times because it takes longer to process the symbol files.</span></span>

<span data-ttu-id="70bbf-107">Pour réduire la taille d’un correctif binaire à l’aide de symboles, vous devez fournir des symboles pour les fichiers binaires de l’image cible et de la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="70bbf-107">To reduce the size of a binary patch using symbols, you must provide symbols for both the target and upgrade image binaries.</span></span> <span data-ttu-id="70bbf-108">Spécifiez les symboles dans la colonne SymbolPaths de la table [TargetImages](targetimages-table-patchwiz-dll-.md) et la colonne SymbolPaths de la table [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) .</span><span class="sxs-lookup"><span data-stu-id="70bbf-108">Specify the symbols in the SymbolPaths column of the [TargetImages](targetimages-table-patchwiz-dll-.md) table and the SymbolPaths column of the [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) table.</span></span> <span data-ttu-id="70bbf-109">Vous devez utiliser Visual C++ pour générer des symboles dans le format de fichier de la base de données du programme (PDB).</span><span class="sxs-lookup"><span data-stu-id="70bbf-109">You must use Visual C++ to generate symbols in the program database (PDB) file format.</span></span> <span data-ttu-id="70bbf-110">Les versions plus récentes de Visual C++ fournissent toutes les informations nécessaires dans le fichier PDB.</span><span class="sxs-lookup"><span data-stu-id="70bbf-110">Newer versions of Visual C++ provide all of the necessary information in the PDB file.</span></span> <span data-ttu-id="70bbf-111">Les versions antérieures de Visual C++ également générer le format de fichier de débogage (DBG).</span><span class="sxs-lookup"><span data-stu-id="70bbf-111">Older versions of Visual C++ also generate the debug (DBG) file format.</span></span> <span data-ttu-id="70bbf-112">Dans ce cas, la valeur SymbolsPaths doit spécifier l’emplacement des fichiers PDB et DBG.</span><span class="sxs-lookup"><span data-stu-id="70bbf-112">In this case, the SymbolsPaths value should specify the location of both the PDB and DBG files.</span></span>

<span data-ttu-id="70bbf-113">Par exemple, le TargetImage pour un correctif peut être le package d’installation fourni avec Windows 2000 et qui installe la version 1.1.1029.0 de MSI.DLL.</span><span class="sxs-lookup"><span data-stu-id="70bbf-113">For example, the TargetImage for a patch might be the installation package that shipped with Windows 2000 and that installs the 1.1.1029.0 version of MSI.DLL.</span></span> <span data-ttu-id="70bbf-114">Le UpgradedImage peut être le package d’installation mis à jour fourni avec Windows 2000 avec Service Pack 1 (SP1) et qui installe la version 1.11.1314.0 de MSI.DLL.</span><span class="sxs-lookup"><span data-stu-id="70bbf-114">The UpgradedImage might be the updated installation package that shipped with Windows 2000 with Service Pack 1 (SP1) and that installs the 1.11.1314.0 version of MSI.DLL.</span></span> <span data-ttu-id="70bbf-115">Deux fichiers de propriétés de création de correctifs (PCP) doivent alors être créés, l’un avec la colonne SymbolPaths des tables [TargetImages](targetimages-table-patchwiz-dll-.md) et [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) gauche null (vide) et l’autre avec la colonne SymbolPaths des tables TargetImages et UpgradedImages remplies avec l’emplacement des symboles pour les fichiers binaires.</span><span class="sxs-lookup"><span data-stu-id="70bbf-115">Two Patch Creation Properties (PCP) files would then have to be created, one with the SymbolPaths column of both the [TargetImages](targetimages-table-patchwiz-dll-.md) and [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) tables left NULL (blank) and the other with the SymbolPaths column of both the TargetImages and UpgradedImages tables populated with the location of the symbols for the binaries.</span></span> <span data-ttu-id="70bbf-116">Dans ce cas, la taille du correctif généré sans utiliser de symboles peut être approximativement trois fois supérieure à la taille du correctif généré à l’aide de symboles.</span><span class="sxs-lookup"><span data-stu-id="70bbf-116">In this case, the size of the patch generated without using symbols can be approximately three times the size of the patch generated using symbols.</span></span>

<span data-ttu-id="70bbf-117">L’utilitaire Mpatch.exe peut être utilisé pour tester la génération de correctifs binaires pour un seul fichier et pour vérifier si les symboles sont valides.</span><span class="sxs-lookup"><span data-stu-id="70bbf-117">The Mpatch.exe utility can be used to test the generation of binary patches for a single file and to check whether or not the symbols are valid.</span></span> <span data-ttu-id="70bbf-118">L’utilitaire Mpatch.exe est inclus dans les [composants SDK Windows pour les développeurs Windows Installer](platform-sdk-components-for-windows-installer-developers.md).</span><span class="sxs-lookup"><span data-stu-id="70bbf-118">The Mpatch.exe utility is included in the [Windows SDK Components for Windows Installer Developers](platform-sdk-components-for-windows-installer-developers.md).</span></span> <span data-ttu-id="70bbf-119">La sortie de Mpatch.exe indique si les symboles ne correspondent pas.</span><span class="sxs-lookup"><span data-stu-id="70bbf-119">The output of Mpatch.exe will indicate if the symbols do not match.</span></span>

<span data-ttu-id="70bbf-120">Par exemple, entrez la ligne de commande suivante pour vérifier si les symboles sont valides.</span><span class="sxs-lookup"><span data-stu-id="70bbf-120">For example, enter the following command line to check whether or not the symbols are valid.</span></span>

<span data-ttu-id="70bbf-121">**mpatch.exe-NEWSYMPATH : d : \\ Update-OLDSYMPATH : d : \\ target d : \\ cible \\example.dll d : \\ Update \\example.dll example. Pat**</span><span class="sxs-lookup"><span data-stu-id="70bbf-121">**mpatch.exe -NEWSYMPATH:d:\\update -OLDSYMPATH:d:\\target d:\\target\\example.dll d:\\update\\example.dll example.pat**</span></span>

<span data-ttu-id="70bbf-122">Si les symboles ne se trouvent pas à l’emplacement correct, la sortie de Mpatch.exe peut inclure l’avertissement suivant.</span><span class="sxs-lookup"><span data-stu-id="70bbf-122">If the symbols are not in the correct location, the output of Mpatch.exe may include the following warning.</span></span>

``` syntax
WARNING: no debug symbols for d:\update\example.dll
```

 

 



