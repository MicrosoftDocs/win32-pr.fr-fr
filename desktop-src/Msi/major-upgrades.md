---
description: Une mise à niveau majeure est une mise à jour complète d’un produit qui nécessite une modification de la propriété ProductCode.
ms.assetid: 0c8f2aad-b301-4404-9051-694d97db1a8d
title: Mises à niveau majeures
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7795695072f6c153373db914781ac4b919cd2572
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104527033"
---
# <a name="major-upgrades"></a><span data-ttu-id="54a91-103">Mises à niveau majeures</span><span class="sxs-lookup"><span data-stu-id="54a91-103">Major Upgrades</span></span>

<span data-ttu-id="54a91-104">Une mise à niveau majeure est une mise à jour complète d’un produit qui nécessite une modification de la propriété [**ProductCode**](productcode.md) .</span><span class="sxs-lookup"><span data-stu-id="54a91-104">A major upgrade is a comprehensive update of a product that needs a change of the [**ProductCode**](productcode.md) Property.</span></span>

<span data-ttu-id="54a91-105">Une mise à niveau majeure classique supprime une version précédente d’une application et installe une nouvelle version.</span><span class="sxs-lookup"><span data-stu-id="54a91-105">A typical major upgrade removes a previous version of an application and installs a new version.</span></span> <span data-ttu-id="54a91-106">Une mise à niveau majeure peut réorganiser l’arborescence des composants de la fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="54a91-106">A major upgrade can reorganize the feature component tree.</span></span> <span data-ttu-id="54a91-107">Pour plus d’informations, consultez [**ProductCode**](productcode.md) et [modification du code du produit](changing-the-product-code.md).</span><span class="sxs-lookup"><span data-stu-id="54a91-107">For more information, see [**ProductCode**](productcode.md) and [Changing the Product Code](changing-the-product-code.md).</span></span>

<span data-ttu-id="54a91-108">Au cours d’une mise à niveau majeure à l’aide de Windows Installer, le programme d’installation recherche les applications associées à la mise à niveau en attente sur l’ordinateur de l’utilisateur et, lorsqu’il en détecte un, il récupère la version de l’application installée à partir du Registre système.</span><span class="sxs-lookup"><span data-stu-id="54a91-108">During a major upgrade using Windows Installer, the installer searches the user's computer for applications that are related to the pending upgrade, and when it detects one, it retrieves the version of the installed application from the system registry.</span></span> <span data-ttu-id="54a91-109">Le programme d’installation utilise ensuite les informations de la base de données de mise à niveau pour déterminer s’il faut mettre à niveau l’application installée.</span><span class="sxs-lookup"><span data-stu-id="54a91-109">The installer then uses information in the upgrade database to determine whether to upgrade the installed application.</span></span>

<span data-ttu-id="54a91-110">Pour activer les fonctionnalités de mise à niveau du programme d’installation, chaque package doit avoir une propriété [**UpgradeCode**](upgradecode.md) et une [table de mise à niveau](upgrade-table.md).</span><span class="sxs-lookup"><span data-stu-id="54a91-110">To enable the installer upgrade capabilities, each package should have an [**UpgradeCode**](upgradecode.md) Property and an [Upgrade Table](upgrade-table.md).</span></span> <span data-ttu-id="54a91-111">Chaque produit autonome ou suite de produits doit avoir sa propre **UpgradeCode**.</span><span class="sxs-lookup"><span data-stu-id="54a91-111">Each stand-alone product or product suite should have its own **UpgradeCode**.</span></span> <span data-ttu-id="54a91-112">Pour plus d’informations sur l’utilisation de **UpgradeCode** , consultez la section [utilisation de UpgradeCode](using-an-upgradecode.md).</span><span class="sxs-lookup"><span data-stu-id="54a91-112">For more information about using the **UpgradeCode** see the section [Using an UpgradeCode](using-an-upgradecode.md).</span></span> <span data-ttu-id="54a91-113">Chaque enregistrement de la table de mise à niveau fournit une combinaison du code de mise à niveau, de la version du produit et des informations de langue utilisées pour identifier un ensemble de produits affectés par la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="54a91-113">Each record in the Upgrade table gives a combination of the upgrade code, product version, and language information used to identify a set of products affected by the upgrade.</span></span> <span data-ttu-id="54a91-114">Lorsque l' [action FindRelatedProducts](findrelatedproducts-action.md) détecte qu’un produit affecté est installé sur le système, il ajoute le code de produit à une propriété de la colonne ActionProperty de la table de mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="54a91-114">When the [FindRelatedProducts Action](findrelatedproducts-action.md) detects that an affected product is installed on the system, it appends the product code to a property in the ActionProperty column of the Upgrade table.</span></span> <span data-ttu-id="54a91-115">L' [action RemoveExistingProducts](removeexistingproducts-action.md) et l' [action MigrateFeatureStates](migratefeaturestates-action.md) suppriment ou migrent les produits répertoriés dans la liste ActionProperty.</span><span class="sxs-lookup"><span data-stu-id="54a91-115">The [RemoveExistingProducts action](removeexistingproducts-action.md) and the [MigrateFeatureStates Action](migratefeaturestates-action.md) remove or migrate the products listed in the ActionProperty list.</span></span> <span data-ttu-id="54a91-116">Les auteurs de package peuvent également suivre la procédure décrite dans la rubrique : [préparation d’une application pour les futures mises à niveau majeures](preparing-an-application-for-future-major-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="54a91-116">Package authors can also follow the procedure described in the topic: [Preparing an Application for Future Major Upgrades](preparing-an-application-for-future-major-upgrades.md).</span></span>

<span data-ttu-id="54a91-117">Windows Installer des packages de mise à niveau peuvent être créés de telle sorte que les mises à niveau majeures ne s’installeront pas si l’utilisateur a déjà une version plus récente de l’application installée.</span><span class="sxs-lookup"><span data-stu-id="54a91-117">Windows Installer upgrade packages can be authored such that major upgrades will not install if the user already has a newer version of the application installed.</span></span> <span data-ttu-id="54a91-118">Pour plus d’informations sur la création d’un package qui n’est pas installé sur une version plus récente, consultez la page [empêcher l’installation d’un ancien package sur une version plus récente](preventing-an-old-package-from-installing-over-a-newer-version.md)</span><span class="sxs-lookup"><span data-stu-id="54a91-118">For more information about how to author a package that will not install over a newer version, see [Preventing an Old Package from Installing Over a Newer Version](preventing-an-old-package-from-installing-over-a-newer-version.md)</span></span>

> [!Note]  
> <span data-ttu-id="54a91-119">Windows Installer utilise uniquement les trois premiers champs de la version du produit.</span><span class="sxs-lookup"><span data-stu-id="54a91-119">Windows Installer uses only the first three fields of the product version.</span></span> <span data-ttu-id="54a91-120">Consultez propriété [**ProductVersion**](productversion.md) pour obtenir une description de ces champs.</span><span class="sxs-lookup"><span data-stu-id="54a91-120">See [**ProductVersion**](productversion.md) Property for descriptions of these fields.</span></span> <span data-ttu-id="54a91-121">Si vous incluez un quatrième champ dans la version de votre produit, le programme d’installation ignore le quatrième champ.</span><span class="sxs-lookup"><span data-stu-id="54a91-121">If you include a fourth field in your product version, the installer ignores the fourth field.</span></span>

 

<span data-ttu-id="54a91-122">La méthode recommandée pour appliquer une mise à niveau majeure consiste à installer le package complet pour le produit mis à jour.</span><span class="sxs-lookup"><span data-stu-id="54a91-122">The recommended method of applying a major upgrade by installing the full package for the updated product.</span></span> <span data-ttu-id="54a91-123">Pour plus d’informations sur l’application d’une mise à niveau majeure en installant le produit, consultez [application des mises à niveau majeures en installant le produit](applying-major-upgrades-by-installing-the-product.md).</span><span class="sxs-lookup"><span data-stu-id="54a91-123">For information about how to apply a major upgrade by installing the product, see [Applying Major Upgrades by Installing the Product](applying-major-upgrades-by-installing-the-product.md).</span></span>

<span data-ttu-id="54a91-124">Une mise à niveau majeure appliquée en tant que [package de correctif](patch-packages.md) pour le produit ne peut pas être séquencée avec d’autres mises à jour et n’est pas un correctif impossible à [installer](uninstallable-patches.md).</span><span class="sxs-lookup"><span data-stu-id="54a91-124">A major upgrade applied as a [Patch Package](patch-packages.md) for the product cannot be sequenced with other updates and is not an [uninstallable patch](uninstallable-patches.md).</span></span> <span data-ttu-id="54a91-125">Pour plus d’informations sur la façon d’appliquer un package correctif de mise à niveau majeur à un package Windows Installer consultez [application de mises à niveau majeures en appliquant des correctifs à l’installation locale du produit](applying-major-upgrades-by-patching-the-local-installation-of-the-product.md).</span><span class="sxs-lookup"><span data-stu-id="54a91-125">For information about how to apply a major upgrade patch package to a Windows Installer package see [Applying Major Upgrades by Patching the Local Installation of the Product](applying-major-upgrades-by-patching-the-local-installation-of-the-product.md).</span></span> <span data-ttu-id="54a91-126">L’application d’une mise à niveau majeure à l’aide d’un package de correctifs n’est pas recommandée. Appliquez plutôt des mises à niveau majeures en installant le produit complet.</span><span class="sxs-lookup"><span data-stu-id="54a91-126">The application of a major upgrade using a patch package is not recommended, instead apply major upgrades by installing the full product.</span></span>

> [!Note]  
> <span data-ttu-id="54a91-127">Si une application est installée dans le [contexte d’installation](installation-context.md)par utilisateur, toute mise à niveau majeure de l’application doit également être effectuée à l’aide du contexte par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="54a91-127">If an application is installed in the per-user [installation context](installation-context.md), any major upgrade to the application must also be performed using the per-user context.</span></span> <span data-ttu-id="54a91-128">Si une application est installée dans le contexte d’installation par ordinateur, toute mise à niveau majeure de l’application doit également être effectuée à l’aide du contexte par ordinateur.</span><span class="sxs-lookup"><span data-stu-id="54a91-128">If an application is installed in the per-machine installation context, any major upgrade to the application must also be performed using the per-machine context.</span></span> <span data-ttu-id="54a91-129">Le Windows Installer n’installe pas les mises à niveau majeures dans le contexte d’installation.</span><span class="sxs-lookup"><span data-stu-id="54a91-129">The Windows Installer will not install major upgrades across installation context.</span></span>

 

<span data-ttu-id="54a91-130">Vous pouvez conditionner des actions personnalisées qui sont séquencées après [InstallValidate](installvalidate-action.md) pour gérer les principales mises à niveau à l’aide de la propriété [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md) :</span><span class="sxs-lookup"><span data-stu-id="54a91-130">You can condition custom actions that are sequenced after [InstallValidate](installvalidate-action.md) to handle major upgrades by using the [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md) property:</span></span>

-   <span data-ttu-id="54a91-131">Si vous souhaitez qu’une action personnalisée s’exécute pendant la désinstallation du produit, mais pas pendant la suppression du produit par une mise à niveau majeure, utilisez cette condition.</span><span class="sxs-lookup"><span data-stu-id="54a91-131">If you want a custom action to run during an uninstallation of the product, but not during the removal of the product by a major upgrade, use this condition.</span></span>

    <span data-ttu-id="54a91-132">REMOVE = "ALL" et non pas [ **UPGRADINGPRODUCTCODE**](upgradingproductcode.md)</span><span class="sxs-lookup"><span data-stu-id="54a91-132">REMOVE="ALL" AND NOT [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md)</span></span>

-   <span data-ttu-id="54a91-133">Si vous souhaitez qu’une action personnalisée s’exécute uniquement pendant une mise à niveau majeure, utilisez cette condition.</span><span class="sxs-lookup"><span data-stu-id="54a91-133">If you want a custom action to run only during a major upgrade, use this condition.</span></span>

    [<span data-ttu-id="54a91-134">**UPGRADINGPRODUCTCODE**</span><span class="sxs-lookup"><span data-stu-id="54a91-134">**UPGRADINGPRODUCTCODE**</span></span>](upgradingproductcode.md)

 

 



