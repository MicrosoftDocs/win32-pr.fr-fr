---
description: Lors de la mise à jour corrective des fichiers ayant un contenu variable, il peut être nécessaire de conserver les régions sélectionnées du fichier cible pour éviter la perte d’informations critiques.
ms.assetid: 4a610588-556e-489f-ac14-73e5e6b776fe
title: Mise à jour corrective des régions sélectionnées d’un fichier
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 778df4b0cc98eeacd1106929b18c7461c6fa9e70
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106524515"
---
# <a name="patching-selected-regions-of-a-file"></a><span data-ttu-id="30060-103">Mise à jour corrective des régions sélectionnées d’un fichier</span><span class="sxs-lookup"><span data-stu-id="30060-103">Patching Selected Regions of a File</span></span>

<span data-ttu-id="30060-104">Lors de la mise à jour corrective des fichiers ayant un contenu variable, il peut être nécessaire de conserver les régions sélectionnées du fichier cible pour éviter la perte d’informations critiques.</span><span class="sxs-lookup"><span data-stu-id="30060-104">When patching files having variable content, it may be necessary to retain selected regions of the target file to prevent the lost of critical information.</span></span> <span data-ttu-id="30060-105">Par exemple, certaines applications marquent les informations utilisateur dans le fichier exécutable.</span><span class="sxs-lookup"><span data-stu-id="30060-105">For example, some applications stamp user information into the executable file.</span></span> <span data-ttu-id="30060-106">Étant donné que le contenu du fichier cible peut dépendre de l’ordinateur sur lequel l’application est installée, il devient difficile de déterminer si un fichier particulier est une cible valide pour le correctif.</span><span class="sxs-lookup"><span data-stu-id="30060-106">Because the contents of the target file might depend upon the computer on which the application is installed, it becomes difficult to determine whether a particular file is a valid target for the patch.</span></span> <span data-ttu-id="30060-107">Les informations utilisateur écrites dans le fichier cible peuvent également être remplacées par un correctif.</span><span class="sxs-lookup"><span data-stu-id="30060-107">User information written in the target file can also be overwritten by a patch.</span></span>

<span data-ttu-id="30060-108">Quand vous générez un fichier de propriétés de création de correctifs (PCP) avec [Msimsp.exe](msimsp-exe.md) et [PATCHWIZ.DLL](patchwiz-dll.md), vous pouvez spécifier que les informations dans certaines régions du fichier cible soient ignorées lors de la mise à jour corrective.</span><span class="sxs-lookup"><span data-stu-id="30060-108">When you generate a patch creation properties (PCP) file with [Msimsp.exe](msimsp-exe.md) and [PATCHWIZ.DLL](patchwiz-dll.md), you can specify that the information in certain regions of the target file be ignored during patching.</span></span> <span data-ttu-id="30060-109">Vous pouvez également spécifier que les informations dans d’autres régions du fichier cible soient conservées et copiées dans un emplacement de décalage dans le fichier mis à jour.</span><span class="sxs-lookup"><span data-stu-id="30060-109">You can also specify that information in other regions of the target file be retained and copied to an offset location in the updated file.</span></span> <span data-ttu-id="30060-110">Vous spécifiez les régions du fichier cible à ignorer et les régions à conserver lors de la création des tables [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md), [ExternalFiles](externalfiles-table-patchwiz-dll-.md)et [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) .</span><span class="sxs-lookup"><span data-stu-id="30060-110">You specify which regions of the target file to ignore and which regions to retain when authoring the [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md), [ExternalFiles](externalfiles-table-patchwiz-dll-.md), and [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) tables.</span></span>

<span data-ttu-id="30060-111">Utilisez la colonne RetainOffsets de la table [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) et les colonnes RetainOffsets et RetainLengths de la table [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) pour copier une plage d’informations du fichier cible vers une plage de décalage dans le fichier mis à jour.</span><span class="sxs-lookup"><span data-stu-id="30060-111">Use the RetainOffsets column of the [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) table and the RetainOffsets and RetainLengths columns of the [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) table to copy a range of information from the target file to an offset range in the updated file.</span></span> <span data-ttu-id="30060-112">Les informations de cette plage sont conservées.</span><span class="sxs-lookup"><span data-stu-id="30060-112">The information in this range is retained.</span></span> <span data-ttu-id="30060-113">Spécifiez la longueur de la plage à l’aide des colonnes RetainLengths de la table FamilyFileRanges.</span><span class="sxs-lookup"><span data-stu-id="30060-113">Specify the length of the range using the RetainLengths columns of the FamilyFileRanges table.</span></span> <span data-ttu-id="30060-114">La longueur de la plage conservée est identique dans les fichiers cible et mis à jour.</span><span class="sxs-lookup"><span data-stu-id="30060-114">The length of the retained range is the same in the target and updated files.</span></span> <span data-ttu-id="30060-115">Spécifiez le décalage de la plage dans le fichier cible à l’aide de la colonne RetainOffsets de la table TargetFiles OptionalData.</span><span class="sxs-lookup"><span data-stu-id="30060-115">Specify the offset of the range in the target file using the RetainOffsets column of the TargetFiles OptionalData table.</span></span> <span data-ttu-id="30060-116">Spécifiez le décalage de la plage dans le fichier mis à jour à l’aide de la colonne RetainOffsets de la table FamilyFileRanges.</span><span class="sxs-lookup"><span data-stu-id="30060-116">Specify the offset of the range in the updated file using the RetainOffsets column of the FamilyFileRanges table.</span></span> <span data-ttu-id="30060-117">La plage du fichier cible conservé est donc la valeur de RetainOffsets dans la table TargetFiles OptionalData plus RetainLengths.</span><span class="sxs-lookup"><span data-stu-id="30060-117">The range of the target file retained is therefore the value of RetainOffsets in the TargetFiles OptionalData table plus RetainLengths.</span></span> <span data-ttu-id="30060-118">Ces informations sont copiées dans le fichier de mise à jour dans la plage spécifiée par la valeur de RetainOffsets dans les tables FamilyFileRanges plus RetainLengths.</span><span class="sxs-lookup"><span data-stu-id="30060-118">This information gets copied to the update file in the range given by the value of RetainOffsets in the FamilyFileRanges tables plus RetainLengths.</span></span> <span data-ttu-id="30060-119">Vous pouvez spécifier plusieurs plages, mais l’ordre des longueurs doit correspondre à l’ordre des décalages.</span><span class="sxs-lookup"><span data-stu-id="30060-119">You can specify multiple ranges but the order of the lengths must match the order of the offsets.</span></span>

<span data-ttu-id="30060-120">Utilisez la table [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) pour ignorer une plage du fichier cible.</span><span class="sxs-lookup"><span data-stu-id="30060-120">Use the [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) table to ignore a range of the target file.</span></span> <span data-ttu-id="30060-121">Les informations de cette plage du fichier cible peuvent toujours être remplacées par le correctif.</span><span class="sxs-lookup"><span data-stu-id="30060-121">Information in this range of the target file can still be overwritten by the patch.</span></span> <span data-ttu-id="30060-122">Spécifiez le décalage de la plage dans la colonne IgnoreOffsets et sa longueur dans la colonne IgnoreLengths.</span><span class="sxs-lookup"><span data-stu-id="30060-122">Specify the offset of the range in the IgnoreOffsets column and its length in the IgnoreLengths column.</span></span> <span data-ttu-id="30060-123">Vous pouvez spécifier plusieurs plages, mais l’ordre des longueurs doit correspondre à l’ordre des décalages.</span><span class="sxs-lookup"><span data-stu-id="30060-123">You can specify multiple ranges but the order of the lengths must match the order of the offsets.</span></span>

<span data-ttu-id="30060-124">Les valeurs des colonnes lengths et offsets peuvent être décimales ou hexadécimales.</span><span class="sxs-lookup"><span data-stu-id="30060-124">The values in the lengths and offsets columns can be decimal or hexadecimal.</span></span> <span data-ttu-id="30060-125">[PATCHWIZ.DLL](patchwiz-dll.md) traite la valeur comme hexadécimale si elle est préfixée par « 0x ».</span><span class="sxs-lookup"><span data-stu-id="30060-125">[PATCHWIZ.DLL](patchwiz-dll.md) treats the value as hexadecimal if it is prefixed by "0x".</span></span> <span data-ttu-id="30060-126">Les colonnes sont des colonnes de type chaîne, donc PATCHWIZ.DLL convertit les valeurs en ULONGs.</span><span class="sxs-lookup"><span data-stu-id="30060-126">The columns are string columns, so PATCHWIZ.DLL converts the values to ULONGs.</span></span> <span data-ttu-id="30060-127">La colonne length spécifie la longueur en octets.</span><span class="sxs-lookup"><span data-stu-id="30060-127">The length column specifies the length in bytes.</span></span>

 

 



