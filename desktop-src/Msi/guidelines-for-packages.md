---
description: Étant donné que le contrôle de compte d’utilisateur (UAC) dans Windows Vista limite les privilèges au cours d’une installation, les développeurs de packages de Windows Installer ne doivent pas supposer que leur installation a toujours accès à toutes les parties du système.
ms.assetid: 8e3b4ad8-b978-4e27-b060-1d023846718f
title: Instructions pour les packages
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db228c2dff443d421ddc089074f0fcce6ae93e2f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103866322"
---
# <a name="guidelines-for-packages"></a><span data-ttu-id="39c37-103">Instructions pour les packages</span><span class="sxs-lookup"><span data-stu-id="39c37-103">Guidelines for Packages</span></span>

<span data-ttu-id="39c37-104">Étant donné que [*le contrôle de compte d’utilisateur*](u-gly.md) (UAC) dans Windows Vista limite les privilèges au cours d’une installation, les développeurs de packages de Windows Installer ne doivent pas supposer que leur installation a toujours accès à toutes les parties du système.</span><span class="sxs-lookup"><span data-stu-id="39c37-104">Because [*User Account Control*](u-gly.md) (UAC) in Windows Vista restricts privileges during an installation, developers of Windows Installer packages should not assume that their installation always has access to all parts of the system.</span></span>

<span data-ttu-id="39c37-105">Dans la plupart des cas, un package d’installation qui peut être déployé pour les utilisateurs standard via [stratégie de groupe](/previous-versions/windows/desktop/Policy/group-policy-start-page) doit également fonctionner avec le contrôle de compte d’utilisateur dans Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="39c37-105">An installer package that can be successfully deployed to standard users via [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page) should in most cases also work with UAC in Windows Vista.</span></span> <span data-ttu-id="39c37-106">Des exceptions peuvent se produire si la [table InstallUISequence](installuisequence-table.md) contient l' [action LaunchConditions](launchconditions-action.md) ou si la [table LaunchCondition](launchcondition-table.md) contient une condition basée sur la [propriété Privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="39c37-106">Exceptions to this can occur if the [InstallUISequence table](installuisequence-table.md) contains the [LaunchConditions action](launchconditions-action.md) or the [LaunchCondition table](launchcondition-table.md) contains a condition based on the [Privileged property](privileged.md).</span></span> <span data-ttu-id="39c37-107">Windows Installer les développeurs de packages doivent donc respecter les consignes suivantes pour s’assurer que leur package fonctionne avec le contrôle de compte d’utilisateur et Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="39c37-107">Windows Installer package developers should therefore adhere to the following guidelines to ensure their package works with UAC and Windows Vista.</span></span>

-   <span data-ttu-id="39c37-108">Quand vous incluez une condition de [*contexte d’installation*](i-gly.md) avec une action dans la [table InstallUISequence](installuisequence-table.md), utilisez une instruction conditionnelle basée sur la [propriété Privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="39c37-108">When including an [*installation context*](i-gly.md) condition with an action in the [InstallUISequence table](installuisequence-table.md), use a conditional statement based on the [Privileged property](privileged.md).</span></span> <span data-ttu-id="39c37-109">N’utilisez pas de condition basée sur la propriété [**adminuser**](adminuser.md) .</span><span class="sxs-lookup"><span data-stu-id="39c37-109">Do not use a condition based on the [**AdminUser**](adminuser.md) property.</span></span>
-   <span data-ttu-id="39c37-110">Lorsque vous incluez le contexte d’installation avec les conditions de lancement de l’installation, utilisez une [action personnalisée de type 19](custom-action-type-19.md) dans la [table InstallExecuteSequence](installexecutesequence-table.md) et faites en sorte que l’action personnalisée soit subordonnée à la [propriété Privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="39c37-110">When including the installation context with the installation launch conditions, use a [Custom Action Type 19](custom-action-type-19.md) in the [InstallExecuteSequence table](installexecutesequence-table.md) and make the custom action conditional upon the [Privileged property](privileged.md).</span></span> <span data-ttu-id="39c37-111">N’utilisez pas d’action dans la [table LaunchCondition](launchcondition-table.md) avec une condition basée sur la [propriété adminuser](adminuser.md) ou la propriété Privileged.</span><span class="sxs-lookup"><span data-stu-id="39c37-111">Do not use an action in the [LaunchCondition table](launchcondition-table.md) with a condition based on the [AdminUser property](adminuser.md) or Privileged property.</span></span>
-   <span data-ttu-id="39c37-112">Pour lire ou modifier la configuration du système, utilisez une [action personnalisée d’exécution différée](deferred-execution-custom-actions.md) dans la [table InstallExecuteSequence](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="39c37-112">To read or modify the system configuration, use a [deferred execution custom action](deferred-execution-custom-actions.md) in the [InstallExecuteSequence table](installexecutesequence-table.md).</span></span> <span data-ttu-id="39c37-113">N’utilisez pas d’actions personnalisées d’exécution immédiate dans la [table InstallUISequence](installuisequence-table.md) pour modifier la configuration du système.</span><span class="sxs-lookup"><span data-stu-id="39c37-113">Do not use immediate execution custom actions in the [InstallUISequence table](installuisequence-table.md) to modify the system configuration.</span></span>
-   <span data-ttu-id="39c37-114">Pour modifier des parties du système qui ne sont pas spécifiques à l’utilisateur, utilisez une action personnalisée différée dans la [table InstallExecuteSequence](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="39c37-114">To modify parts of the system that are not user specific, use a deferred custom action in the [InstallExecuteSequence table](installexecutesequence-table.md).</span></span> <span data-ttu-id="39c37-115">Vous devez inclure le bit msidbCustomActionTypeNoImpersonate dans le type d’action personnalisé.</span><span class="sxs-lookup"><span data-stu-id="39c37-115">You should include the msidbCustomActionTypeNoImpersonate bit in the custom action type.</span></span>
-   <span data-ttu-id="39c37-116">Omettez le bit 3 de la valeur de la propriété Résumé du [**nombre de mots**](word-count-summary.md) pour indiquer que le package peut être nécessaire pour être élevé.</span><span class="sxs-lookup"><span data-stu-id="39c37-116">Omit Bit 3 from the value of the [**Word Count**](word-count-summary.md) Summary Property to indicate that the package can be required to be elevated.</span></span> <span data-ttu-id="39c37-117">N’incluez pas ce bit, sauf si des privilèges élevés ne sont pas nécessaires pour installer ce package.</span><span class="sxs-lookup"><span data-stu-id="39c37-117">Do not include this bit unless elevated privileges are not required to install this package.</span></span>
-   <span data-ttu-id="39c37-118">Incluez un manifeste avec le niveau d’exécution demandé de l’application.</span><span class="sxs-lookup"><span data-stu-id="39c37-118">Include a manifest with the application's Requested Execution Level.</span></span>
-   <span data-ttu-id="39c37-119">Incluez un certificat dans la table [MsiPatchCertificate](msipatchcertificate-table.md) du package d’origine et signez tous les correctifs avec le même certificat.</span><span class="sxs-lookup"><span data-stu-id="39c37-119">Include a certificate in the [MsiPatchCertificate](msipatchcertificate-table.md) table of original package and sign all patches with the same certificate.</span></span>
-   <span data-ttu-id="39c37-120">Si des privilèges élevés sont requis pour installer un package Windows Installer, l’auteur du package doit inclure l’attribut [ElevationShield](elevationshield-attribute.md) pour le [contrôle PUSHBUTTON](pushbutton-control.md) utilisé pour démarrer l’installation.</span><span class="sxs-lookup"><span data-stu-id="39c37-120">If elevated privileges are required to install a Windows Installer package, the author of the package should include the [ElevationShield](elevationshield-attribute.md) attribute for the [PushButton control](pushbutton-control.md) used to start the installation.</span></span> <span data-ttu-id="39c37-121">Cela permet d’avertir l’utilisateur que cliquer sur le bouton affiche la boîte de dialogue UAC demandant l’autorisation de l’administrateur pour poursuivre l’installation.</span><span class="sxs-lookup"><span data-stu-id="39c37-121">This will alert the user that clicking on the button will display the UAC dialog box requesting administrator authorization to continue the installation.</span></span>
-   <span data-ttu-id="39c37-122">Affectez à la propriété [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) la valeur 1 pour indiquer à la Windows Installer que le package a été créé et testé pour se conformer au contrôle de compte d’utilisateur dans Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="39c37-122">Set the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property to 1 to indicate to the Windows Installer that the package has been authored and tested to comply with UAC in Windows Vista.</span></span> <span data-ttu-id="39c37-123">Si cette propriété n’est pas définie, le programme d’installation détermine si le package est conforme au contrôle de compte d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="39c37-123">If this property is not set, the installer determines whether the package complies with UAC.</span></span>

<span data-ttu-id="39c37-124">En dehors de [stratégie de groupe](/previous-versions/windows/desktop/Policy/group-policy-start-page), la vérification suivante de la conformité UAC peut être utilisée sur Windows XP.</span><span class="sxs-lookup"><span data-stu-id="39c37-124">Outside of [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page), the following check for UAC compliance can be used on Windows XP.</span></span>

<span data-ttu-id="39c37-125">**Pour vérifier la conformité du contrôle de compte d’utilisateur en dehors de stratégie de groupe**</span><span class="sxs-lookup"><span data-stu-id="39c37-125">**To check for UAC compliance outside of Group Policy**</span></span>

1.  <span data-ttu-id="39c37-126">Connectez-vous à l’ordinateur en tant qu’administrateur.</span><span class="sxs-lookup"><span data-stu-id="39c37-126">Log on to the computer as an administrator.</span></span>
2.  <span data-ttu-id="39c37-127">Publiez le package pour une installation par ordinateur :</span><span class="sxs-lookup"><span data-stu-id="39c37-127">Advertise the package for a per-machine installation:</span></span>

    <span data-ttu-id="39c37-128">*package.msi* **msiexec/JM**</span><span class="sxs-lookup"><span data-stu-id="39c37-128">**msiexec /jm** *package.msi*</span></span>

3.  <span data-ttu-id="39c37-129">Fermez la session sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="39c37-129">Log off the computer.</span></span>
4.  <span data-ttu-id="39c37-130">Connectez-vous à l’ordinateur en tant qu’utilisateur standard.</span><span class="sxs-lookup"><span data-stu-id="39c37-130">Log on to the computer as a standard user.</span></span>
5.  <span data-ttu-id="39c37-131">Tentative d’installation du package publié :</span><span class="sxs-lookup"><span data-stu-id="39c37-131">Attempt to install the advertised package:</span></span>

    <span data-ttu-id="39c37-132">**msiexec/i** *package.msi*</span><span class="sxs-lookup"><span data-stu-id="39c37-132">**msiexec /i** *package.msi*</span></span>

6.  <span data-ttu-id="39c37-133">Dans la plupart des cas, si l’installation réussit, le package est conforme au contrôle de compte d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="39c37-133">In most cases, if the installation is successful, the package is UAC compliant.</span></span>
7.  <span data-ttu-id="39c37-134">Affectez la valeur 1 à la propriété [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) dans le package.</span><span class="sxs-lookup"><span data-stu-id="39c37-134">Set the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property in the package to 1.</span></span>
8.  <span data-ttu-id="39c37-135">Testez l’installation correcte du package à l’aide de Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="39c37-135">Test for correct installation of the package using Windows Vista.</span></span>

 

 
