---
description: Un module de fusion peut être appliqué à un fichier. msi pour ajouter des répertoires à l’installation, mais il ne peut pas remplacer ou supprimer des répertoires existants.
ms.assetid: 5b808aa2-b2b2-4703-bd57-0b5e1e73b306
title: Création de tables de répertoires de module de fusion
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98332f2c0bda10a5cc076f0ec80df3bf4b2e05aa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103864457"
---
# <a name="authoring-merge-module-directory-tables"></a><span data-ttu-id="56762-103">Création de tables de répertoires de module de fusion</span><span class="sxs-lookup"><span data-stu-id="56762-103">Authoring Merge Module Directory Tables</span></span>

<span data-ttu-id="56762-104">Un module de fusion peut être appliqué à un fichier. msi pour ajouter des répertoires à l’installation, mais il ne peut pas remplacer ou supprimer des répertoires existants.</span><span class="sxs-lookup"><span data-stu-id="56762-104">A merge module can be applied to an .msi file to add directories to the installation but it cannot replace or remove any existing directories.</span></span> <span data-ttu-id="56762-105">La [table Directory](directory-table.md) spécifie la disposition des répertoires fournis par le module de fusion à l’installation cible.</span><span class="sxs-lookup"><span data-stu-id="56762-105">The [Directory table](directory-table.md) specifies the layout of the directories the merge module provides to the target installation.</span></span> <span data-ttu-id="56762-106">Une table de répertoire est requise dans chaque module de fusion.</span><span class="sxs-lookup"><span data-stu-id="56762-106">A Directory table is required in every merge module.</span></span>

<span data-ttu-id="56762-107">Utilisez les instructions suivantes lors de la création de la table de répertoires dans un module de fusion.</span><span class="sxs-lookup"><span data-stu-id="56762-107">Use the following guidelines when authoring the Directory Table in a merge module.</span></span> <span data-ttu-id="56762-108">Pour plus d’informations, consultez la [table Directory](directory-table.md) et l' [utilisation de la table Directory](using-the-directory-table.md).</span><span class="sxs-lookup"><span data-stu-id="56762-108">For more information, see [Directory Table](directory-table.md) and [Using The Directory Table](using-the-directory-table.md).</span></span>

-   <span data-ttu-id="56762-109">La structure de répertoire ajoutée par le module de fusion doit avoir un répertoire racine unique.</span><span class="sxs-lookup"><span data-stu-id="56762-109">The directory structure added by the merge module must have a single root directory.</span></span> <span data-ttu-id="56762-110">La racine doit être nommée TARGETDIR.</span><span class="sxs-lookup"><span data-stu-id="56762-110">The root must be named TARGETDIR.</span></span> <span data-ttu-id="56762-111">L’utilisateur peut modifier la valeur de TARGETDIR pendant la fusion pour spécifier l’emplacement d’attachement de la structure de répertoire du module dans l’arborescence de répertoires de la cible.</span><span class="sxs-lookup"><span data-stu-id="56762-111">The user may change the value of TARGETDIR during the merge to specify where to attach the module's directory structure onto the target's directory tree.</span></span>
-   <span data-ttu-id="56762-112">Les tables de module de fusion autres que la table de répertoire ne doivent pas référencer directement les emplacements de répertoires à TARGETDIR.</span><span class="sxs-lookup"><span data-stu-id="56762-112">Merge module tables other than the Directory table must not directly reference directory locations to TARGETDIR.</span></span> <span data-ttu-id="56762-113">L’emplacement d’une telle référence change si la valeur de TARGETDIR est modifiée par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="56762-113">The location of such a reference changes if the value of TARGETDIR is changed by the user.</span></span>
-   <span data-ttu-id="56762-114">Les tables du module de fusion doivent référencer l’emplacement d’un répertoire enfant de TARGETDIR, ou un autre répertoire de l’arborescence du module de fusion.</span><span class="sxs-lookup"><span data-stu-id="56762-114">The tables in the merge module must reference the location of a child directory of TARGETDIR, or another directory in the merge module's tree.</span></span> <span data-ttu-id="56762-115">Procédez comme suit pour spécifier TARGETDIR comme parent d’un répertoire dans le module de fusion.</span><span class="sxs-lookup"><span data-stu-id="56762-115">Do the following to specify TARGETDIR as the parent of a directory in the merge module.</span></span> <span data-ttu-id="56762-116">Entrez le répertoire dans la colonne répertoire et entrez TARGETDIR dans la \_ colonne parent du répertoire.</span><span class="sxs-lookup"><span data-stu-id="56762-116">Enter the directory into the Directory column and enter TARGETDIR into the Directory\_Parent column.</span></span> <span data-ttu-id="56762-117">Utilisez la notation « . » dans la colonne DefaultDir pour indiquer que ce répertoire se trouve dans TARGETDIR sans sous-répertoire.</span><span class="sxs-lookup"><span data-stu-id="56762-117">Use the "." notation in the DefaultDir column to indicate that this directory is located in TARGETDIR without a subdirectory.</span></span> <span data-ttu-id="56762-118">Pour plus d’informations, consultez [utilisation de la table des répertoires](using-the-directory-table.md).</span><span class="sxs-lookup"><span data-stu-id="56762-118">For more information, see [Using the Directory Table](using-the-directory-table.md).</span></span>
-   <span data-ttu-id="56762-119">Les noms des répertoires ajoutés par le module de fusion doivent utiliser les conventions d’affectation des noms décrites dans [nommage des clés primaires dans les bases de données de module de fusion](naming-primary-keys-in-merge-module-databases.md).</span><span class="sxs-lookup"><span data-stu-id="56762-119">The names of directories added by the merge module must use the naming conventions described in [Naming Primary Keys in Merge Module Databases](naming-primary-keys-in-merge-module-databases.md).</span></span> <span data-ttu-id="56762-120">Cela comprend les répertoires prédéfinis par des propriétés telles que la propriété [**SystemFolder**](systemfolder.md) et la propriété [**ProgramFilesFolder**](programfilesfolder.md) .</span><span class="sxs-lookup"><span data-stu-id="56762-120">This includes directories predefined by properties such as the [**SystemFolder**](systemfolder.md) property and [**ProgramFilesFolder**](programfilesfolder.md) property.</span></span>
-   <span data-ttu-id="56762-121">Ajoutez un [*GUID*](g-gly.md) à chaque entrée de la table Directory (sauf TARGETDIR.) Cela comprend les entrées de table de répertoire qui spécifient Windows Installer propriétés [**SystemFolder**](systemfolder.md) , par exemple, SystemFolder. 00000000 0000 0000 0000 \_ \_ \_ \_ 000000000000.</span><span class="sxs-lookup"><span data-stu-id="56762-121">Append a [*GUID*](g-gly.md) to every entry in the Directory table (except TARGETDIR.) This includes Directory table entries that specify Windows Installer [**SystemFolder**](systemfolder.md) properties, for example, SystemFolder.00000000\_0000\_0000\_0000\_000000000000.</span></span> <span data-ttu-id="56762-122">La bibliothèque Mergemod.dll ajoute des actions personnalisées pour définir la propriété **SystemFolder** .</span><span class="sxs-lookup"><span data-stu-id="56762-122">The library Mergemod.dll adds custom actions to set the **SystemFolder** property.</span></span>
-   <span data-ttu-id="56762-123">Lorsqu’un répertoire prédéfini est inclus dans un module de fusion, l’outil de fusion ajoute automatiquement un [type d’action personnalisé 51](custom-action-type-51.md) à la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="56762-123">When a predefined directory is included in a merge module, the merge tool automatically adds a [Custom Action Type 51](custom-action-type-51.md) to the target database.</span></span> <span data-ttu-id="56762-124">L’auteur du module de fusion doit s’assurer qu’une [table CustomAction](customaction-table.md) est également incluse.</span><span class="sxs-lookup"><span data-stu-id="56762-124">The merge module author must ensure that a [CustomAction table](customaction-table.md) is also included.</span></span> <span data-ttu-id="56762-125">La table CustomAction peut être vide, mais cette table doit exister dans la base de données cible et s’assurer que les répertoires prédéfinis modifiés sont écrits dans les emplacements appropriés.</span><span class="sxs-lookup"><span data-stu-id="56762-125">The CustomAction table may be empty, but this table is required to exist in the target database and ensures that the modified predefined directories are written to the correct locations.</span></span> <span data-ttu-id="56762-126">Par exemple, lorsqu’un répertoire système est inclus dans un module de fusion, l’auteur du module de fusion doit s’assurer qu’il existe une table d’actions personnalisée.</span><span class="sxs-lookup"><span data-stu-id="56762-126">For example, when a system directory is included in a merge module, the merge module author must ensure that a Custom Action table exists.</span></span>

    <span data-ttu-id="56762-127">Notez que l’algorithme correspondant pour la génération de ces types d’actions personnalisées 51 vérifie uniquement que le nom du répertoire commence par l’une des propriétés [**SystemFolder**](systemfolder.md) prédéfinies.</span><span class="sxs-lookup"><span data-stu-id="56762-127">Note that the matching algorithm for the generation of these type 51 custom actions only checks that the directory name begins with one of the predefined [**SystemFolder**](systemfolder.md) properties.</span></span> <span data-ttu-id="56762-128">Il ne vérifie pas que le nom du répertoire est exactement égal à la propriété Directory.</span><span class="sxs-lookup"><span data-stu-id="56762-128">It does not verify that the directory name exactly equals the directory property.</span></span> <span data-ttu-id="56762-129">Tout répertoire commençant par l’un de ces noms de dossiers standard obtient une action personnalisée de type 51, même si le reste du nom n’est pas un GUID.</span><span class="sxs-lookup"><span data-stu-id="56762-129">Any directory beginning with one of these standard folder names gets a type 51 custom action, even if the rest of the name is not a GUID.</span></span> <span data-ttu-id="56762-130">Les auteurs doivent veiller à ce que cela ne génère pas de correspondances de faux positifs, ni de génération d’actions personnalisées imprévues, sur les clés primaires dérivées qui commencent par l’une des propriétés **SystemFolder** .</span><span class="sxs-lookup"><span data-stu-id="56762-130">Authors need to take care that this does not generate false positive matches, and unintended custom action generation, on derivative primary keys that begin with one of the **SystemFolder** properties.</span></span>

<span data-ttu-id="56762-131">Voici un exemple de table de répertoire dans un module de fusion et des répertoires résolus attendus.</span><span class="sxs-lookup"><span data-stu-id="56762-131">The following is an example of a Directory table in a merge module and the expected resolved directories.</span></span>



| <span data-ttu-id="56762-132">Répertoire</span><span class="sxs-lookup"><span data-stu-id="56762-132">Directory</span></span>                                              | <span data-ttu-id="56762-133">Répertoire \_ parent</span><span class="sxs-lookup"><span data-stu-id="56762-133">Directory\_Parent</span></span>                                | <span data-ttu-id="56762-134">DefaultDir</span><span class="sxs-lookup"><span data-stu-id="56762-134">DefaultDir</span></span>  |
|--------------------------------------------------------|--------------------------------------------------|-------------|
| <span data-ttu-id="56762-135">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="56762-135">TARGETDIR</span></span>                                              |                                                  | <span data-ttu-id="56762-136">SourceDir</span><span class="sxs-lookup"><span data-stu-id="56762-136">SourceDir</span></span>   |
| <span data-ttu-id="56762-137">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="56762-137">Dir00.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="56762-138">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="56762-138">TARGETDIR</span></span>                                        | <span data-ttu-id="56762-139">. : Programme \_ MMM</span><span class="sxs-lookup"><span data-stu-id="56762-139">.:MMM\_Prog</span></span> |
| <span data-ttu-id="56762-140">SystemFolder. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="56762-140">SystemFolder.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span> | <span data-ttu-id="56762-141">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="56762-141">TARGETDIR</span></span>                                        | <span data-ttu-id="56762-142">Système \_ MMM</span><span class="sxs-lookup"><span data-stu-id="56762-142">MMM\_Sys</span></span>    |
| <span data-ttu-id="56762-143">Dir02. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="56762-143">Dir02.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="56762-144">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848 \_ 006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="56762-144">Dir00.BC82E350\_ C7FC\_11d1\_ A848\_006097ABDE17</span></span> | <span data-ttu-id="56762-145">\_ocx MFC</span><span class="sxs-lookup"><span data-stu-id="56762-145">MFC\_OCX</span></span>    |



 

<span data-ttu-id="56762-146">Un module de fusion avec la table de répertoire ci-dessus est censé générer la structure de répertoire suivante.</span><span class="sxs-lookup"><span data-stu-id="56762-146">A merge module with the above Directory table is expected to result in the following directory structure.</span></span>



| <span data-ttu-id="56762-147">Répertoire</span><span class="sxs-lookup"><span data-stu-id="56762-147">Directory</span></span>                                              | <span data-ttu-id="56762-148">Cible</span><span class="sxs-lookup"><span data-stu-id="56762-148">Target</span></span>                                     | <span data-ttu-id="56762-149">Source</span><span class="sxs-lookup"><span data-stu-id="56762-149">Source</span></span>                                               |
|--------------------------------------------------------|--------------------------------------------|------------------------------------------------------|
| <span data-ttu-id="56762-150">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="56762-150">Dir00.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="56762-151">\[Point d’installation du module de fusion\]</span><span class="sxs-lookup"><span data-stu-id="56762-151">\[Merge Module's Install Point\]</span></span>\\         | <span data-ttu-id="56762-152">\[Programme MMM de point source du module de fusion \] \\ \_</span><span class="sxs-lookup"><span data-stu-id="56762-152">\[Merge Module's Source Point\]\\MMM\_Prog</span></span>           |
| <span data-ttu-id="56762-153">SystemFolder. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="56762-153">SystemFolder.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span> | <span data-ttu-id="56762-154">\[SystemFolder\]</span><span class="sxs-lookup"><span data-stu-id="56762-154">\[SystemFolder\]</span></span>\\                         | <span data-ttu-id="56762-155">\[Point source du module de fusion \] \\ MMM \_ sys</span><span class="sxs-lookup"><span data-stu-id="56762-155">\[Merge Module's Source Point\]\\MMM\_Sys</span></span>            |
| <span data-ttu-id="56762-156">Dir02. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="56762-156">Dir02.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="56762-157">\[\] \\ MFC ocx du point d’installation du module de fusion \_</span><span class="sxs-lookup"><span data-stu-id="56762-157">\[Merge Module's Install Point\]\\MFC\_OCX</span></span> | <span data-ttu-id="56762-158">\[Point source du module de fusion de l' \] \\ \_ \\ ocx MFC PROG \_</span><span class="sxs-lookup"><span data-stu-id="56762-158">\[Merge Module's Source Point\]\\MMM\_Prog\\MFC\_OCX</span></span> |



 

 

 



