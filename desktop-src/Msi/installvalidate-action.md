---
description: L’action InstallValidate vérifie que tous les volumes auxquels le coût a été attribué disposent d’un espace suffisant pour l’installation. L’action InstallValidate met fin à l’installation en cas d’erreur irrécupérable si un volume manque d’espace disque.
ms.assetid: 1c55794d-1ecc-43bf-956f-96afc5f36964
title: Action InstallValidate
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e650ce136ac3b1b62e41ce34f79f5d28540d1292
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104210050"
---
# <a name="installvalidate-action"></a><span data-ttu-id="983bf-104">Action InstallValidate</span><span class="sxs-lookup"><span data-stu-id="983bf-104">InstallValidate Action</span></span>

<span data-ttu-id="983bf-105">L’action InstallValidate vérifie que tous les [*volumes*](v-gly.md) auxquels le [*coût*](c-gly.md) a été attribué disposent d’un espace suffisant pour l’installation.</span><span class="sxs-lookup"><span data-stu-id="983bf-105">The InstallValidate action verifies that all [*volumes*](v-gly.md) to which [*cost*](c-gly.md) has been attributed have sufficient space for the installation.</span></span> <span data-ttu-id="983bf-106">L’action InstallValidate met fin à l’installation en cas d’erreur irrécupérable si un volume manque d’espace disque.</span><span class="sxs-lookup"><span data-stu-id="983bf-106">The InstallValidate action ends the installation with a fatal error if any volume is short of disk space.</span></span>

<span data-ttu-id="983bf-107">L’action InstallValidate avertit également l’utilisateur si un ou plusieurs fichiers à remplacer ou à supprimer sont en cours d’utilisation par un processus actif.</span><span class="sxs-lookup"><span data-stu-id="983bf-107">The InstallValidate action also notifies the user if one or more files to be overwritten or removed are currently in use by an active process.</span></span> <span data-ttu-id="983bf-108">Pour plus d’informations, consultez [redémarrages du système](system-reboots.md).</span><span class="sxs-lookup"><span data-stu-id="983bf-108">For more information, see [System Reboots](system-reboots.md).</span></span>

## <a name="sequence-restrictions"></a><span data-ttu-id="983bf-109">Restrictions de séquence</span><span class="sxs-lookup"><span data-stu-id="983bf-109">Sequence Restrictions</span></span>

<span data-ttu-id="983bf-110">L’action [CostFinalize](costfinalize-action.md) et les séquences de la boîte de dialogue d’interface utilisateur qui permettent à l’utilisateur de modifier les États et/ou les répertoires de sélection doivent être séquencées avant l’action InstallValidate.</span><span class="sxs-lookup"><span data-stu-id="983bf-110">The [CostFinalize](costfinalize-action.md) action and any UI dialog box sequences that allow the user to modify selection states and/or directories should be sequenced before the InstallValidate action.</span></span>

<span data-ttu-id="983bf-111">Les [actions personnalisées](custom-actions.md) qui modifient l’état d’installation des fonctionnalités ou des composants doivent être séquencées avant l’action InstallValidate.</span><span class="sxs-lookup"><span data-stu-id="983bf-111">[Custom actions](custom-actions.md) that change the installation state of features or components must be sequenced before the InstallValidate action.</span></span>

## <a name="actiondata-messages"></a><span data-ttu-id="983bf-112">Messages ActionData</span><span class="sxs-lookup"><span data-stu-id="983bf-112">ActionData Messages</span></span>

<span data-ttu-id="983bf-113">Il n’y a aucun message ActionData.</span><span class="sxs-lookup"><span data-stu-id="983bf-113">There are no ActionData messages.</span></span>

## <a name="remarks"></a><span data-ttu-id="983bf-114">Notes</span><span class="sxs-lookup"><span data-stu-id="983bf-114">Remarks</span></span>

<span data-ttu-id="983bf-115">En règle générale, une séquence antérieure de la boîte de dialogue d’interface utilisateur doit effectuer la même vérification que l’action InstallValidate quand l’utilisateur tente d’initier la copie des fichiers.</span><span class="sxs-lookup"><span data-stu-id="983bf-115">Typically, an earlier UI dialog box sequence should perform the same verification as the InstallValidate action when the user attempts to initiate the copying of files.</span></span> <span data-ttu-id="983bf-116">La boîte de dialogue de l’interface utilisateur doit présenter un **espace disque** insuffisant si les volumes sélectionnés ne disposent pas de suffisamment d’espace pour l’installation.</span><span class="sxs-lookup"><span data-stu-id="983bf-116">This UI dialog box sequence should present an **Out of Disk Space** dialog box if the volumes selected do not have enough space for the installation.</span></span> <span data-ttu-id="983bf-117">Les boîtes de dialogue de l’interface utilisateur doivent être créées de manière à empêcher l’utilisateur de poursuivre l’installation si l’espace disque est insuffisant.</span><span class="sxs-lookup"><span data-stu-id="983bf-117">The UI dialog boxes should be authored in a way to prevent the user from proceeding with the installation if there is insufficient disk space.</span></span> <span data-ttu-id="983bf-118">Dans le cas d’une installation silencieuse, il n’y a pas d’interface utilisateur et l’action InstallValidate met fin à l’installation si l’espace disque est insuffisant.</span><span class="sxs-lookup"><span data-stu-id="983bf-118">In the case of a quiet installation, there is no user interface and the InstallValidate action terminates the installation if there is insufficient disk space.</span></span> <span data-ttu-id="983bf-119">La cause de l’arrêt prématuré est enregistrée dans le fichier journal si la journalisation est activée.</span><span class="sxs-lookup"><span data-stu-id="983bf-119">The cause of the premature termination is recorded in the log file if logging is enabled.</span></span>

<span data-ttu-id="983bf-120">Une entrée est ajoutée à une table FilesInUse interne si un fichier est remplacé ou supprimé pendant qu’elle est ouverte pour l’exécution ou la modification par n’importe quel processus pendant le [*coût*](c-gly.md)du fichier.</span><span class="sxs-lookup"><span data-stu-id="983bf-120">An entry is added to an internal FilesInUse table if any file is overwritten or removed while it is open for execution or modification by any process during file [*costing*](c-gly.md).</span></span> <span data-ttu-id="983bf-121">La table FilesInUse contient des colonnes pour le nom et le chemin d’accès complet du fichier.</span><span class="sxs-lookup"><span data-stu-id="983bf-121">The FilesInUse table contains columns for the name and full path of the file.</span></span> <span data-ttu-id="983bf-122">Lorsque l’action InstallValidate s’exécute, le programme d’installation interroge la table FilesInUse pour les entrées et détermine le nom du processus à l’aide du fichier.</span><span class="sxs-lookup"><span data-stu-id="983bf-122">When the InstallValidate action executes, the installer queries the FilesInUse table for entries and determines the name of the process using the file.</span></span> <span data-ttu-id="983bf-123">L’action InstallValidate ajoute un enregistrement à la table de l’interface utilisateur [ListBox](listbox-table.md) pour chaque processus unique identifié par cette requête.</span><span class="sxs-lookup"><span data-stu-id="983bf-123">The InstallValidate action adds one record to the [ListBox](listbox-table.md) user interface table for each unique process identified by this query.</span></span> <span data-ttu-id="983bf-124">L’enregistrement contient les valeurs suivantes dans chaque colonne :</span><span class="sxs-lookup"><span data-stu-id="983bf-124">The record contains the following values in each column:</span></span>

<span data-ttu-id="983bf-125">**Propriété**: FileInUseProcess</span><span class="sxs-lookup"><span data-stu-id="983bf-125">**Property**: FileInUseProcess</span></span>

 

<span data-ttu-id="983bf-126">**Valeur**: *nom du processus*</span><span class="sxs-lookup"><span data-stu-id="983bf-126">**Value**: *Name of process*</span></span>

 

<span data-ttu-id="983bf-127">**Text**: *texte contenu dans la légende de la fenêtre principale du processus* .</span><span class="sxs-lookup"><span data-stu-id="983bf-127">**Text**: *Text contained in the caption of the main window of the process*</span></span>

<span data-ttu-id="983bf-128">L’action InstallValidate affiche ensuite la boîte **de dialogue fichiers en cours d’utilisation** .</span><span class="sxs-lookup"><span data-stu-id="983bf-128">The InstallValidate action then displays the **Files In Use** dialog box.</span></span> <span data-ttu-id="983bf-129">Cette boîte de dialogue affiche les processus qui doivent être arrêtés pour éviter de devoir redémarrer le système pour remplacer les fichiers en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="983bf-129">This dialog box displays the processes that must be shut down to avoid the requirement of restarting the system to replace files in use.</span></span>

<span data-ttu-id="983bf-130">L’action InstallValidate interroge la table de [boîte de dialogue](dialog-table.md) pour obtenir une boîte de dialogue créée avec la boîte de dialogue nom réservé [FilesInUse](filesinuse-dialog.md) et l’affiche.</span><span class="sxs-lookup"><span data-stu-id="983bf-130">The InstallValidate action queries the [Dialog](dialog-table.md) table for an authored dialog box with the reserved name [FilesInUse](filesinuse-dialog.md) dialog and displays it.</span></span> <span data-ttu-id="983bf-131">Cette boîte de dialogue doit contenir un contrôle [ListBox](listbox-control.md) lié à une propriété nommée FileInUseProcess.</span><span class="sxs-lookup"><span data-stu-id="983bf-131">This dialog box must contain a [ListBox](listbox-control.md) control that is tied to a property named FileInUseProcess.</span></span> <span data-ttu-id="983bf-132">Par Convention, cette boîte de dialogue comporte un bouton **quitter**, **Réessayer** ou **Ignorer** , mais il s’agit de l’auteur de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="983bf-132">By convention, this dialog box has an **Exit**, **Retry**, or **Ignore** button, but this is up to the UI author.</span></span> <span data-ttu-id="983bf-133">Chaque bouton doit être lié à un ControlEvent, [EndDialog](enddialog-controlevent.md) dans la table [ControlEvent,](controlevent-table.md) .</span><span class="sxs-lookup"><span data-stu-id="983bf-133">Each button should be tied to an [EndDialog](enddialog-controlevent.md) ControlEvent in the [ControlEvent](controlevent-table.md) table.</span></span> <span data-ttu-id="983bf-134">L’action InstallValidate répond comme suit à la valeur retournée par l' [action](doaction-controlevent.md) ControlEvent,, comme indiqué par l’un de ces arguments [EndDialog](enddialog-controlevent.md) associé au bouton envoyé par l’utilisateur :</span><span class="sxs-lookup"><span data-stu-id="983bf-134">The InstallValidate action responds as follows to the value returned by the [DoAction](doaction-controlevent.md) ControlEvent, as dictated by one of these [EndDialog](enddialog-controlevent.md) arguments associated with the button pushed by the user:</span></span>

<span data-ttu-id="983bf-135">**Nouvelle tentative**: toutes les valeurs ajoutées à la table [ListBox](listbox-table.md) sont effacées, et la procédure de [*coût*](c-gly.md) de fichier tout entière est répétée, en revérifiant les fichiers qui sont toujours en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="983bf-135">**Retry**: All values added to the [ListBox](listbox-table.md) table are cleared, and the entire file [*costing*](c-gly.md) procedure is repeated, rechecking for files that are still in use.</span></span> <span data-ttu-id="983bf-136">Si un ou plusieurs processus sont toujours identifiés comme utilisant des fichiers à remplacer ou à supprimer, le processus se répète. Sinon, InstallValidate retourne le contrôle au programme d’installation avec l’État msiDoActionStatusSuccess.</span><span class="sxs-lookup"><span data-stu-id="983bf-136">If one or more processes are still identified as using files to be overwritten or deleted, the process repeats; otherwise, InstallValidate returns control to the installer with a status of msiDoActionStatusSuccess.</span></span>

<span data-ttu-id="983bf-137">**Exit**: l’action InstallValidate retourne immédiatement le contrôle au programme d’installation avec l’État msiDoActionStatusUserExit.</span><span class="sxs-lookup"><span data-stu-id="983bf-137">**Exit**: The InstallValidate action immediately returns control to the installer with a status of msiDoActionStatusUserExit.</span></span> <span data-ttu-id="983bf-138">Cela met fin à l’installation.</span><span class="sxs-lookup"><span data-stu-id="983bf-138">This terminates the installation.</span></span>

<span data-ttu-id="983bf-139">**Toute autre valeur de retour**: l’action InstallValidate retourne immédiatement le contrôle au programme d’installation avec l’État msiDoActionStatusSuccess.</span><span class="sxs-lookup"><span data-stu-id="983bf-139">**Any other return value**: The InstallValidate action immediately returns control to the installer with a status of msiDoActionStatusSuccess.</span></span> <span data-ttu-id="983bf-140">Dans ce cas, étant donné qu’un ou plusieurs fichiers sont toujours en cours d’utilisation, les actions [InstallFiles](installfiles-action.md) et/ou [InstallAdminPackage](installadminpackage-action.md) suivantes doivent planifier le remplacement ou la suppression des fichiers en cours d’utilisation lors du redémarrage du système.</span><span class="sxs-lookup"><span data-stu-id="983bf-140">In this case, since one or more files are still in use, the subsequent [InstallFiles](installfiles-action.md) and/or [InstallAdminPackage](installadminpackage-action.md) actions must schedule the in-use file(s) to be replaced or deleted when the system is restarted.</span></span>

<span data-ttu-id="983bf-141">S’il n’existe aucune table de [zone de liste](listbox-table.md) dans la base de données, InstallValidate s’arrête en mode silencieux sans erreur.</span><span class="sxs-lookup"><span data-stu-id="983bf-141">If there is no [ListBox](listbox-table.md) table in the database, InstallValidate exits silently without an error.</span></span>

<span data-ttu-id="983bf-142">Le point-virgule est le délimiteur de liste des transformations, des sources et des correctifs, et ne doit pas être utilisé dans ces noms de fichiers ou chemins d’accès.</span><span class="sxs-lookup"><span data-stu-id="983bf-142">The semicolon is the list delimiter for transforms, sources, and patches, and should not be used in these file names or paths.</span></span>

<span data-ttu-id="983bf-143">Les fichiers marqués en lecture seule dans un emplacement en lecture seule ne sont jamais considérés comme en cours d’utilisation par le programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="983bf-143">Files marked read-only in a read-only location are never considered in use by the installer.</span></span>

<span data-ttu-id="983bf-144">La boîte **de dialogue espace de l’espace disque** par défaut contenant les boutons **abandonner** et **Réessayer** est présentée à l’utilisateur si le niveau d’interface utilisateur est de base.</span><span class="sxs-lookup"><span data-stu-id="983bf-144">A default **Out of Disk Space** dialog box containing **Abort** and **Retry** buttons is presented to the user if the user interface level is basic.</span></span>

 

 



