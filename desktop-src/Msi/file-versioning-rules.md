---
description: Au cœur d’un programme d’installation se trouve l’installation réelle des fichiers.
ms.assetid: e6f6d6a5-bdb0-4866-8d2c-56313d92c94c
title: Règles de contrôle de version des fichiers
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67c6f8e59b4f15774f898217690dbb1c4d57b1bf
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106521471"
---
# <a name="file-versioning-rules"></a><span data-ttu-id="6ff30-103">Règles de contrôle de version des fichiers</span><span class="sxs-lookup"><span data-stu-id="6ff30-103">File Versioning Rules</span></span>

<span data-ttu-id="6ff30-104">Au cœur d’un programme d’installation se trouve l’installation réelle des fichiers.</span><span class="sxs-lookup"><span data-stu-id="6ff30-104">At the core of any installer is the actual installation of files.</span></span> <span data-ttu-id="6ff30-105">Déterminer si un fichier doit être installé est un processus complexe.</span><span class="sxs-lookup"><span data-stu-id="6ff30-105">Determining whether to install a file is a complex process.</span></span> <span data-ttu-id="6ff30-106">Au niveau le plus élevé, cette détermination varie selon que le composant auquel appartient un fichier est marqué pour l’installation.</span><span class="sxs-lookup"><span data-stu-id="6ff30-106">At the highest level, this determination depends on whether the component to which a file belongs is marked for installation.</span></span> <span data-ttu-id="6ff30-107">Une fois que vous avez déterminé qu’un fichier doit être copié, le processus est compliqué s’il existe un autre fichier portant le même nom dans le dossier cible.</span><span class="sxs-lookup"><span data-stu-id="6ff30-107">Once determined that a file should be copied, the process is complicated if another file with the same name exists in the target folder.</span></span> <span data-ttu-id="6ff30-108">Dans ce cas, la détermination requiert un ensemble de règles qui impliquent les propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ff30-108">In such situations, making the determination requires a set of rules involving the following properties:</span></span>

-   <span data-ttu-id="6ff30-109">Version</span><span class="sxs-lookup"><span data-stu-id="6ff30-109">Version</span></span>
-   <span data-ttu-id="6ff30-110">Date</span><span class="sxs-lookup"><span data-stu-id="6ff30-110">Date</span></span>
-   <span data-ttu-id="6ff30-111">Language</span><span class="sxs-lookup"><span data-stu-id="6ff30-111">Language</span></span>

<span data-ttu-id="6ff30-112">Le programme d’installation n’utilise ces règles que lors de la tentative d’installation d’un fichier dans un emplacement qui contient déjà un fichier portant le même nom.</span><span class="sxs-lookup"><span data-stu-id="6ff30-112">The installer only uses these rules when trying to install a file to a location that already contains a file with the same name.</span></span> <span data-ttu-id="6ff30-113">Dans ce cas, le Windows Installer utilise les règles suivantes, toutes autres étant égales, pour déterminer s’il faut installer.</span><span class="sxs-lookup"><span data-stu-id="6ff30-113">In this case, the Windows Installer uses the following rules, all other things being equal, to determine whether to install.</span></span>

<span data-ttu-id="6ff30-114">La version la plus élevée gagne, le fichier ayant la version la plus élevée gagne, même si le fichier sur l’ordinateur a la version la plus récente.</span><span class="sxs-lookup"><span data-stu-id="6ff30-114">Highest Version Wins—All other things being equal, the file with the highest version wins, even if the file on the computer has the highest version.</span></span>

<span data-ttu-id="6ff30-115">Fichiers avec version Win : un fichier avec version est installé sur un fichier qui n’A pas de version.</span><span class="sxs-lookup"><span data-stu-id="6ff30-115">Versioned Files Win—A versioned file gets installed over a nonversioned file.</span></span>

<span data-ttu-id="6ff30-116">Privilégier la langue du produit : si le fichier en cours d’installation a une langue différente de celle du fichier sur l’ordinateur, privilégiez le fichier avec la langue qui correspond au produit en cours d’installation.</span><span class="sxs-lookup"><span data-stu-id="6ff30-116">Favor Product Language—If the file being installed has a different language than the file on the computer, favor the file with the language that matches the product being installed.</span></span> <span data-ttu-id="6ff30-117">Les fichiers dont la langue est indépendante sont traités comme une autre langue, de sorte que le produit en cours d’installation est privilégié.</span><span class="sxs-lookup"><span data-stu-id="6ff30-117">Language-neutral files are treated as just another language so the product being installed is favored again.</span></span>

<span data-ttu-id="6ff30-118">Mise en correspondance de plusieurs langues : après avoir pris en compte les langues courantes entre le fichier en cours d’installation et le fichier sur l’ordinateur, toutes les langues restantes sont privilégiées en fonction de ce qui est requis par le produit installé.</span><span class="sxs-lookup"><span data-stu-id="6ff30-118">Mismatched Multiple Languages—After factoring out any common languages between the file being installed and the file on the computer, any remaining languages are favored according to what is needed by the product being installed.</span></span>

<span data-ttu-id="6ff30-119">Conserver les autres langages : conservez le fichier qui prend en charge plusieurs langues, qu’il soit déjà installé ou non sur l’ordinateur ou qu’il soit en cours d’installation.</span><span class="sxs-lookup"><span data-stu-id="6ff30-119">Preserve Superset Languages—Preserve the file that supports multiple languages regardless of whether it is already on the computer or is being installed.</span></span>

<span data-ttu-id="6ff30-120">Les fichiers sans version sont des données utilisateur : si la date de modification est postérieure à la date de création du fichier sur l’ordinateur, n’installez pas le fichier, car les personnalisations de l’utilisateur sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="6ff30-120">Nonversioned Files are User Data—If the Modified date is later than the Create date for the file on the computer, do not install the file because user customizations would be deleted.</span></span> <span data-ttu-id="6ff30-121">Si les dates de création et de modification sont identiques, installez le fichier.</span><span class="sxs-lookup"><span data-stu-id="6ff30-121">If the Modified and Create dates are the same, install the file.</span></span> <span data-ttu-id="6ff30-122">Si la date de création est postérieure à la date de modification, le fichier est considéré comme non modifié, installe le fichier.</span><span class="sxs-lookup"><span data-stu-id="6ff30-122">If the Create date is later than the Modified date, the file is considered unmodified, install the file.</span></span>

<span data-ttu-id="6ff30-123">L’installation d’un [fichier compagnon](companion-files.md) ne dépend pas de ses propres informations de contrôle de version de fichier, mais du contrôle de version de son parent associé.</span><span class="sxs-lookup"><span data-stu-id="6ff30-123">The installation of a [Companion File](companion-files.md) depends not on its own file versioning information, but on the versioning of its companion parent.</span></span> <span data-ttu-id="6ff30-124">Dans le cas des fichiers auxiliaires, l’installation est ignorée uniquement si le fichier parent a une version plus récente.</span><span class="sxs-lookup"><span data-stu-id="6ff30-124">In the case of Companion Files, the installation is skipped only if the parent file has a higher version.</span></span> <span data-ttu-id="6ff30-125">Notez qu’un fichier qui est le chemin d’accès de clé de son composant ne doit pas être un fichier associé, car cela entraîne la logique de contrôle de version du fichier de chemin d’accès de clé qui est déterminée par le fichier parent associé.</span><span class="sxs-lookup"><span data-stu-id="6ff30-125">Note that a file that is the key path for its component must not be a companion file because this results in the versioning logic of the key path file being determined by the companion parent file.</span></span>

<span data-ttu-id="6ff30-126">Fichiers sans version à l’aide des [fichiers d’accompagnement](companion-files.md): un fichier sans version qui est associé à un fichier avec version à l’aide du mécanisme d’accompagnement respecte les règles du fichier avec version.</span><span class="sxs-lookup"><span data-stu-id="6ff30-126">Nonversioned Files Using [Companion Files](companion-files.md)-A nonversioned file that is associated with a versioned file using the companion mechanism abides by the rules for the versioned file.</span></span> <span data-ttu-id="6ff30-127">La seule exception est si le fichier avec version sur l’ordinateur et le fichier avec version en cours d’installation ont la même version et la même langue, mais que le fichier associé est manquant sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="6ff30-127">The only exception is if the versioned file on the computer and the versioned file being installed have the same version and language but the companion file is missing on the computer.</span></span> <span data-ttu-id="6ff30-128">Dans ce cas, le fichier compagnon en cours d’installation est utilisé même si le fichier avec version sur l’ordinateur est utilisé.</span><span class="sxs-lookup"><span data-stu-id="6ff30-128">In this case the companion file being installed is used even though the versioned file on the computer is used.</span></span> <span data-ttu-id="6ff30-129">En outre, un fichier non géré à l’aide d’un fichier auxiliaire est installé si la propriété [**REINSTALLMODE**](reinstallmode.md) comprend les options remplacer les anciennes versions (« o » ou « e ») et que la version du fichier compagnon est égale à un fichier déjà présent sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="6ff30-129">Additionally, a nonversioned file using a companion file is installed if the [**REINSTALLMODE**](reinstallmode.md) property includes the overwrite older versions options ("o" or "e") and the companion file's version is equal to a file already on the machine.</span></span>

<span data-ttu-id="6ff30-130">Les règles sont globales : les règles permettant de déterminer quand installer un fichier se trouvent à un emplacement unique dans le programme d’installation et sont globales, ce qui signifie qu’elles s’appliquent à tous les fichiers de manière égale.</span><span class="sxs-lookup"><span data-stu-id="6ff30-130">Rules are Global—The rules for determining when to install a file reside in one place within the installer and are global, meaning they apply to all files equally.</span></span>

<span data-ttu-id="6ff30-131">Pour obtenir des exemples du format utilisé pour les versions de fichier, consultez le type de données [version](version.md) .</span><span class="sxs-lookup"><span data-stu-id="6ff30-131">For examples of the format used for file versions, see the [Version](version.md) data type.</span></span> <span data-ttu-id="6ff30-132">Pour plus d’informations, consultez [remplacement des fichiers existants](replacing-existing-files.md) ou contrôle de [version de fichier par défaut](default-file-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="6ff30-132">For more specific information, see [Replacing Existing Files](replacing-existing-files.md) or [Default File Versioning](default-file-versioning.md).</span></span>

 

 



