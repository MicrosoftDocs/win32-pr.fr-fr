---
description: La configuration des services permet à l’Windows Installer de personnaliser les services sur un ordinateur.
ms.assetid: 164280b2-1c75-49d2-ac04-c3654be84134
title: Utilisation de la configuration des services
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2f6e3040d51b1056a370490fc5328a6bafe07555
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104484185"
---
# <a name="using-services-configuration"></a><span data-ttu-id="39ecf-103">Utilisation de la configuration des services</span><span class="sxs-lookup"><span data-stu-id="39ecf-103">Using Services Configuration</span></span>

<span data-ttu-id="39ecf-104">La configuration des services permet à l’Windows Installer de personnaliser les [services](../services/services.md) sur un ordinateur.</span><span class="sxs-lookup"><span data-stu-id="39ecf-104">Services configuration enables the Windows Installer to customize the [services](../services/services.md) on a computer.</span></span> <span data-ttu-id="39ecf-105">Les développeurs peuvent créer un package Windows Installer pour installer, arrêter, démarrer et supprimer des services pendant une installation à l’aide des tables [ServiceControl](servicecontrol-table.md) et [ServiceInstall](serviceinstall-table.md) , ainsi que des actions [InstallServices](installservices-action.md), [StopServices](stopservices-action.md) et [DeleteServices](deleteservices-action.md) .</span><span class="sxs-lookup"><span data-stu-id="39ecf-105">Developers can author a Windows Installer package to install, stop, start and delete services during an installation by using the [ServiceControl](servicecontrol-table.md) and [ServiceInstall](serviceinstall-table.md) tables and the [InstallServices](installservices-action.md), [StopServices](stopservices-action.md) and [DeleteServices](deleteservices-action.md) actions.</span></span>

<span data-ttu-id="39ecf-106">À compter des packages écrits pour Windows Installer 5,0, les développeurs peuvent également utiliser l’action standard [MsiConfigureServices](msiconfigureservices-action.md) et la [table MsiServiceConfig](msiserviceconfig-table.md) pour configurer les options de personnalisation de service étendues disponibles dans Windows 7 et Windows Server 2008 R2 et Windows Vista et Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="39ecf-106">Beginning with packages written for Windows Installer 5.0, developers can also use the [MsiConfigureServices](msiconfigureservices-action.md) standard action and the [MsiServiceConfig table](msiserviceconfig-table.md) to configure the extended service customization options available with Windows 7 and Windows Server 2008 R2 and Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="39ecf-107">Les packages d’installation existants écrits pour les versions du Windows Installer qui n’incluent pas la table MsiServiceConfig peuvent être toujours installés à l’aide de Windows Installer 5,0.</span><span class="sxs-lookup"><span data-stu-id="39ecf-107">Existing installation packages written for versions of the Windows Installer that did not include the MsiServiceConfig table can be still be installed using Windows Installer 5.0.</span></span> <span data-ttu-id="39ecf-108">La fonctionnalité de configuration des services de la Windows Installer ne peut pas configurer les comptes de service réseau, installer les processus d’hôte de service partagé (svchost) ou redémarrer les services arrêtés dans le cadre de l’installation.</span><span class="sxs-lookup"><span data-stu-id="39ecf-108">The services configuration feature of the Windows Installer cannot configure network service accounts, install shared service host (svchost) processes, or restart services stopped as part of the installation.</span></span>

<span data-ttu-id="39ecf-109">**Windows XP et Windows Server 2003 ou version antérieure :** Non pris en charge.</span><span class="sxs-lookup"><span data-stu-id="39ecf-109">**Windows XP and Windows Server 2003 or earlier:** Not supported.</span></span> <span data-ttu-id="39ecf-110">Les tables de configuration de service et les actions standard sont disponibles à partir de Windows Installer 5,0 s’exécutant sur Windows 7 et Windows Server 2008 R2 et Windows Installer 4,5 sur Windows Vista et Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="39ecf-110">The service configuration tables and standard actions are available beginning with Windows Installer 5.0 running on Windows 7 and Windows Server 2008 R2 and Windows Installer 4.5 running on Windows Vista and Windows Server 2008.</span></span>

<span data-ttu-id="39ecf-111">Vous devez inclure l’action [MsiConfigureServices](msiconfigureservices-action.md) dans la table [InstallExecuteSequence](installexecutesequence-table.md) pour demander les configurations de service que vous spécifiez dans la [table MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-111">You must include the [MsiConfigureServices](msiconfigureservices-action.md) action in the [InstallExecuteSequence](installexecutesequence-table.md) table to request the service configurations that you specify in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="39ecf-112">L’Windows Installer utilise les informations de la table MsiServiceConfig uniquement lorsque l’action standard MsiConfigureServices est incluse dans une table de séquences.</span><span class="sxs-lookup"><span data-stu-id="39ecf-112">The Windows Installer uses the information in the MsiServiceConfig table only when the MsiConfigureServices standard action is included in a sequence table.</span></span> <span data-ttu-id="39ecf-113">L’action standard MsiConfigureServices utilise également des informations dans les tables [ServiceControl](servicecontrol-table.md) et [ServiceInstall](serviceinstall-table.md) .</span><span class="sxs-lookup"><span data-stu-id="39ecf-113">The MsiConfigureServices standard action also uses information in the [ServiceControl](servicecontrol-table.md) and [ServiceInstall](serviceinstall-table.md) tables.</span></span>

<span data-ttu-id="39ecf-114">Pour demander que le système accorde uniquement des privilèges requis à un service particulier, spécifiez le service et l’option de configuration **\_ \_ \_ \_ informations sur les privilèges requis** de la configuration du service dans la [table MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-114">To request that the system give only required privileges to a particular service, specify the service and the **SERVICE\_CONFIG\_REQUIRED\_PRIVILEGES\_INFO** configuration option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="39ecf-115">Supprimez les privilèges inutiles du jeton de processus du service.</span><span class="sxs-lookup"><span data-stu-id="39ecf-115">Remove the unneeded privileges from the service's process token.</span></span> <span data-ttu-id="39ecf-116">Cette option peut être utilisée pour configurer les services exécutés dans le contexte de sécurité des comptes d’utilisateur du [service](../services/service-user-accounts.md)LocalSystem, LocalService ou NetworkService.</span><span class="sxs-lookup"><span data-stu-id="39ecf-116">This option can be used to configure services run in the security context of the LocalSystem, LocalService, or NetworkService [service user accounts](../services/service-user-accounts.md).</span></span>

<span data-ttu-id="39ecf-117">Pour demander au système de retarder le démarrage automatique d’un service à un moment donné après le démarrage de tous les autres services de démarrage automatique, spécifiez le service et l’option de **\_ \_ \_ \_ démarrage automatique différé** de la configuration du service dans la [table MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-117">To request that the system delay the automatic start of a service for a time after the start of all other auto-start services, specify the service and the **SERVICE\_CONFIG\_DELAYED\_AUTO\_START** option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="39ecf-118">Le service en cours de retardement doit être installé par le package en cours avec le \_ démarrage automatique du service \_ spécifié dans la table [ServiceInstall](serviceinstall-table.md) ou le service doit déjà être installé en tant que service à démarrage automatique.</span><span class="sxs-lookup"><span data-stu-id="39ecf-118">The service being delayed must be installed by the current package with SERVICE\_AUTO\_START specified in the [ServiceInstall](serviceinstall-table.md) table or the service must already be installed as an auto-start service.</span></span>

<span data-ttu-id="39ecf-119">Pour demander que le système réserve une ressource pour l’utilisation exclusive d’un service particulier, spécifiez le service, le type de SID de service et l’option de configuration service **\_ \_ \_ sid service \_ sid** dans la [table MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-119">To request that the system reserve a resource for the exclusive use of a particular service, specify the service, the service SID type, and the **SERVICE\_CONFIG\_SERVICE\_SID\_INFO** configuration option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="39ecf-120">Ajoutez le SID du service à la liste de Access Control (ACL) de la ressource pour la ressource.</span><span class="sxs-lookup"><span data-stu-id="39ecf-120">Add the service's SID to the resource's Access Control List (ACL) for the resource.</span></span>

<span data-ttu-id="39ecf-121">Pour demander que le [Gestionnaire de contrôle des services](../services/service-control-manager.md) (SCM) attende après l’envoi de la notification de **\_ \_ préfermeture du contrôle de service** à un service, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="39ecf-121">To request that the [Service Control Manager](../services/service-control-manager.md) (SCM) wait after sending the **SERVICE\_CONTROL\_PRESHUTDOWN** notification to a service, do the following.</span></span> <span data-ttu-id="39ecf-122">Spécifiez le service, la durée d’attente du SCM et l’option de **configuration \_ \_ \_ informations de préarrêt** de la configuration du service dans la [table MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-122">Specify the service, the length of time the SCM should wait, and the **SERVICE\_CONFIG\_PRESHUTDOWN\_INFO** configuration option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span>

<span data-ttu-id="39ecf-123">Pour configurer le moment où le système doit exécuter des actions après la défaillance d’un service, spécifiez l’option de service et l' **\_ \_ \_ \_ indicateur actions d’échec** de la configuration du service dans la [table MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-123">To configure when the system should run actions after the failure of a service, specify the service and the **SERVICE\_CONFIG\_FAILURE\_ACTIONS\_FLAG** option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="39ecf-124">Ajoutez les actions à exécuter dans la [table MsiServiceConfigFailureActions](msiserviceconfigfailureactions-table.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-124">Add the actions to be run to the [MsiServiceConfigFailureActions table](msiserviceconfigfailureactions-table.md).</span></span>

<span data-ttu-id="39ecf-125">Pour plus d’informations sur les fonctionnalités de personnalisation de service étendues introduites avec les systèmes d’exploitation Windows Vista et Windows Server 2008, consultez [modifications de service pour Windows Vista](../services/service-changes-for-windows-vista.md).</span><span class="sxs-lookup"><span data-stu-id="39ecf-125">For more about the extended service customization capabilities introduced with the Windows Vista and Windows Server 2008 operating systems, see [Service Changes for Windows Vista](../services/service-changes-for-windows-vista.md).</span></span>

 

 
