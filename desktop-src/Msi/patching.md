---
description: Ces sections décrivent la mise à jour corrective d’une installation Windows Installer.
ms.assetid: e3c233bc-4344-449e-9e79-1a3b96ad2d08
title: Application de correctifs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c3117723bda1699eeae341fc75db201421f6ae0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106536666"
---
# <a name="patching"></a><span data-ttu-id="9b13e-103">Application de correctifs</span><span class="sxs-lookup"><span data-stu-id="9b13e-103">Patching</span></span>

<span data-ttu-id="9b13e-104">Une application qui a été installée à l’aide de l’Microsoft Windows Installer peut être mise à niveau en réinstallant un package d’installation mis à jour (fichier. msi) ou en appliquant un correctif Windows Installer (un fichier. msp) à l’application.</span><span class="sxs-lookup"><span data-stu-id="9b13e-104">An application that has been installed using the Microsoft Windows Installer can be upgraded by reinstalling an updated installation package (.msi file), or by applying a Windows Installer patch (an .msp file) to the application.</span></span>

<span data-ttu-id="9b13e-105">Un correctif Windows Installer (fichier. msp) est un package autonome qui contient les mises à jour apportées à l’application et décrit les versions de l’application qui peuvent recevoir le correctif.</span><span class="sxs-lookup"><span data-stu-id="9b13e-105">A Windows Installer patch (.msp file) is a self-contained package that contains the updates to the application and describes which versions of the application can receive the patch.</span></span> <span data-ttu-id="9b13e-106">Les correctifs contiennent au minimum deux transformations de base de données et peuvent contenir des fichiers correctifs stockés dans le flux du fichier CAB du package correctif.</span><span class="sxs-lookup"><span data-stu-id="9b13e-106">Patches contain at a minimum, two database transforms and can contain patch files that are stored in the cabinet file stream of the patch package.</span></span> <span data-ttu-id="9b13e-107">Pour plus d’informations sur les parties d’un package de correctifs Windows Installer, consultez [packages de correctifs](patch-packages.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-107">For more information about the parts of a Windows Installer patch package, see [Patch Packages](patch-packages.md).</span></span>

<span data-ttu-id="9b13e-108">La maintenance des applications en livrant un correctif Windows Installer, plutôt qu’un package d’installation complet pour le produit mis à jour, peut avoir des avantages.</span><span class="sxs-lookup"><span data-stu-id="9b13e-108">Servicing applications by delivering a Windows Installer patch, rather than a complete installation package for the updated product can have advantages.</span></span> <span data-ttu-id="9b13e-109">Un correctif peut contenir un fichier entier ou uniquement les bits de fichier nécessaires à la mise à jour d’une partie du fichier.</span><span class="sxs-lookup"><span data-stu-id="9b13e-109">A patch can contain an entire file or only the file bits necessary to update part of the file.</span></span> <span data-ttu-id="9b13e-110">Cela peut permettre à l’utilisateur de télécharger un correctif de mise à niveau qui est plus petit que le package d’installation pour l’ensemble du produit.</span><span class="sxs-lookup"><span data-stu-id="9b13e-110">This can enable the user to download an upgrade patch that is much smaller than the installation package for the entire product.</span></span> <span data-ttu-id="9b13e-111">Une mise à jour à l’aide d’un correctif peut préserver la personnalisation de l’application par le biais de la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="9b13e-111">An update using a patch can preserve a user customization of the application through the upgrade.</span></span>

<span data-ttu-id="9b13e-112">\* \* Windows Installer 4,5 et versions ultérieures : \* \*</span><span class="sxs-lookup"><span data-stu-id="9b13e-112">\*\*Windows Installer 4.5 and later:  \*\*</span></span>

<span data-ttu-id="9b13e-113">À partir de Windows Installer 4,5, les développeurs peuvent marquer des composants dans un correctif avec la valeur **msidbComponentAttributesUninstallOnSupersedence** dans la [table des composants](component-table.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-113">Beginning with Windows Installer 4.5, developers can mark components in a patch with the **msidbComponentAttributesUninstallOnSupersedence** value in the [Component table](component-table.md).</span></span> <span data-ttu-id="9b13e-114">Si un patch suivant est installé, marqué avec la valeur **msidbPatchSequenceSupersedeEarlier** dans sa [table MsiPatchSequence](msipatchsequence-table.md) pour remplacer le premier correctif, Windows Installer 4,5 et versions ultérieures peuvent annuler l’inscription et désinstaller des composants marqués **msidbComponentAttributesUninstallOnSupersedence** pour empêcher la conservation des composants inutilisés sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="9b13e-114">If a subsequent patch is installed, marked with the **msidbPatchSequenceSupersedeEarlier** value in its [MsiPatchSequence table](msipatchsequence-table.md) to supersede the first patch, Windows Installer 4.5 and later can unregister and uninstall components marked **msidbComponentAttributesUninstallOnSupersedence** to prevent leaving behind unused components on the computer.</span></span> <span data-ttu-id="9b13e-115">Si le composant n’est pas marqué avec ce bit, l’installation du correctif logiciel de remplacement peut rendre un composant inutilisé sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="9b13e-115">If the component is not marked with with this bit, installation of the superseding patch can leave an unused component on the computer.</span></span> <span data-ttu-id="9b13e-116">La définition de la propriété **MSIUNINSTALLSUPERSEDEDCOMPONENTS** a le même effet que la définition de ce bit pour tous les composants.</span><span class="sxs-lookup"><span data-stu-id="9b13e-116">Setting the **MSIUNINSTALLSUPERSEDEDCOMPONENTS** property has the same effect as setting this bit for all components.</span></span>

<span data-ttu-id="9b13e-117">\* \* Windows Installer 3,0 et versions ultérieures : \* \*</span><span class="sxs-lookup"><span data-stu-id="9b13e-117">\*\*Windows Installer 3.0 and later:  \*\*</span></span>

<span data-ttu-id="9b13e-118">Les développeurs qui utilisent Windows Installer 3,0 et créent des packages de correctifs qui ont la [table MsiPatchSequence](msipatchsequence-table.md) peuvent créer des packages de correctifs qui effectuent les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="9b13e-118">Developers who use Windows Installer 3.0, and author patch packages that have the [MsiPatchSequence table](msipatchsequence-table.md) can create patch packages that do the following:</span></span>

-   <span data-ttu-id="9b13e-119">Utilisez la ligne de base du produit mise en cache par le programme d’installation pour faciliter la maintenance des applications avec des correctifs Delta plus petits.</span><span class="sxs-lookup"><span data-stu-id="9b13e-119">Use the product baseline cached by the installer to more easily service applications with smaller delta patches.</span></span> <span data-ttu-id="9b13e-120">Pour plus d’informations sur l’utilisation de la ligne de base du produit, consultez réduction de la [taille des correctifs](reducing-patch-size.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-120">For more information about using the product baseline, see [Reducing Patch Size](reducing-patch-size.md).</span></span>
-   <span data-ttu-id="9b13e-121">Ignorez les actions associées à des tables spécifiques qui ne sont pas modifiées par le correctif.</span><span class="sxs-lookup"><span data-stu-id="9b13e-121">Skip actions associated with specific tables that are unmodified by the patch.</span></span> <span data-ttu-id="9b13e-122">Cela peut réduire considérablement le temps nécessaire à l’installation du correctif.</span><span class="sxs-lookup"><span data-stu-id="9b13e-122">This can significantly reduce the time required to install the patch.</span></span> <span data-ttu-id="9b13e-123">Pour plus d’informations sur les tables qui peuvent être ignorées, consultez [optimisation des correctifs](patch-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-123">For more information about which tables can be skipped, see [Patch Optimization](patch-optimization.md).</span></span>
-   <span data-ttu-id="9b13e-124">Créez et installez des correctifs qui peuvent être désinstallés séparément, et dans n’importe quel ordre, sans avoir à désinstaller et réinstaller l’application entière, ainsi que d’autres correctifs.</span><span class="sxs-lookup"><span data-stu-id="9b13e-124">Create and install patches that can be uninstalled singly, and in any order, without having to uninstall and reinstall the entire application and other patches.</span></span> <span data-ttu-id="9b13e-125">Pour plus d’informations sur la désinstallation des correctifs, consultez [suppression des correctifs](removing-patches.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-125">For more information about uninstalling patches, see [Removing Patches](removing-patches.md).</span></span>
-   <span data-ttu-id="9b13e-126">Appliquez les correctifs dans un ordre constant, quelle que soit l’ordre dans lequel les correctifs sont fournis au système.</span><span class="sxs-lookup"><span data-stu-id="9b13e-126">Apply patches in a constant order regardless of the order that the patches are provided to the system.</span></span> <span data-ttu-id="9b13e-127">Pour plus d’informations sur la façon dont le Windows Installer détermine la séquence utilisée pour appliquer les correctifs, consultez [séquencement des correctifs](sequencing-patches.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-127">For more information about how the Windows Installer determines the sequence used to apply patches, see [Sequencing Patches](sequencing-patches.md).</span></span>
-   <span data-ttu-id="9b13e-128">Appliquez les correctifs à une application qui a été installée dans un contexte géré par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9b13e-128">Apply patches to an application that has been installed in a per-user-managed context.</span></span> <span data-ttu-id="9b13e-129">Pour plus d’informations, consultez Mise à [jour corrective des Applications Per-User gérées](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-129">For more information, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>

<span data-ttu-id="9b13e-130">\* \* Windows Installer 2,0 : \* \*</span><span class="sxs-lookup"><span data-stu-id="9b13e-130">\*\*Windows Installer 2.0:  \*\*</span></span>

<span data-ttu-id="9b13e-131">La [table MsiPatchSequence](msipatchsequence-table.md) n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="9b13e-131">The [MsiPatchSequence table](msipatchsequence-table.md) is not supported.</span></span> <span data-ttu-id="9b13e-132">À partir de Windows Installer 3,0, les packages de correctifs peuvent contenir des informations qui décrivent la séquence de mise à jour corrective du correctif par rapport à d’autres mises à jour et des informations descriptives supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="9b13e-132">Beginning with Windows Installer 3.0, patch packages can contain information that describes the patching sequence for the patch relative to other updates and additional descriptive information.</span></span>

<span data-ttu-id="9b13e-133">La méthode recommandée pour créer un package de correctif consiste à utiliser des outils de création de correctifs tels que [Msimsp.exe](msimsp-exe.md) et [Patchwiz.dll](patchwiz-dll.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-133">The recommended method for creating a patch package is to use patch creation tools such as [Msimsp.exe](msimsp-exe.md) and [Patchwiz.dll](patchwiz-dll.md).</span></span> <span data-ttu-id="9b13e-134">Les développeurs peuvent générer un fichier de création de correctifs comme décrit dans la section [création d’un package de correctifs](creating-a-patch-package.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-134">Developers can generate a patch creation file as described in the section: [Creating a Patch Package](creating-a-patch-package.md).</span></span> <span data-ttu-id="9b13e-135">La création d’un correctif logiciel de petite mise à jour est décrite dans la section : [un exemple de mise à jour corrective de petite taille](a-small-update-patching-example.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-135">The creation of a small update patch is described in the section: [A Small Update Patching Example](a-small-update-patching-example.md).</span></span>

<span data-ttu-id="9b13e-136">Microsoft Windows Installer accepte une Uniform Resource Locator (URL) comme source valide d’un correctif.</span><span class="sxs-lookup"><span data-stu-id="9b13e-136">Microsoft Windows Installer accepts a Uniform Resource Locator (URL) as a valid source for a patch.</span></span> <span data-ttu-id="9b13e-137">Pour plus d’informations sur l’installation d’un correctif situé sur un serveur Web, consultez [téléchargement et installation d’un correctif à partir d’Internet](downloading-and-installing-a-patch-from-the-internet.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-137">For more information about how to install a patch located on a Web server, see [Downloading and Installing a Patch From the Internet](downloading-and-installing-a-patch-from-the-internet.md).</span></span>

<span data-ttu-id="9b13e-138">Un seul correctif de Windows Installer (fichier. msp) peut être appliqué au package d’installation lors de l’installation d’une application pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="9b13e-138">A single Windows Installer patch (.msp file) can be applied to the installation package when installing an application for the first time.</span></span> <span data-ttu-id="9b13e-139">Pour plus d’informations, consultez Mise à [jour corrective des installations initiales](patching-initial-installations.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-139">For more information, see [Patching Initial Installations](patching-initial-installations.md).</span></span>

<span data-ttu-id="9b13e-140">Il n’est pas possible d’éliminer toutes les circonstances lorsque l’application d’un correctif peut nécessiter l’accès à la source d’installation d’origine.</span><span class="sxs-lookup"><span data-stu-id="9b13e-140">It is not possible to eliminate all circumstances when the application of a patch may require access to the original installation source.</span></span> <span data-ttu-id="9b13e-141">Toutefois, pour réduire la possibilité que votre correctif nécessite l’accès à la source d’origine, adhérez aux points énumérés dans la section suivante : [empêcher un correctif d’avoir accès à la source d’installation d’origine](preventing-a-patch-from-requiring-access-to-the-original-installation-source.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-141">However, to minimize the possibility that your patch will require access to the original source, adhere to the points listed in the following section: [Preventing a Patch from Requiring Access to the Original Installation Source](preventing-a-patch-from-requiring-access-to-the-original-installation-source.md).</span></span>

<span data-ttu-id="9b13e-142">Pour réduire la possibilité que votre correctif ne soit pas interrompu par une transformation de personnalisation ultérieure, en général, le correctif est installé en premier, suivi de la personnalisation.</span><span class="sxs-lookup"><span data-stu-id="9b13e-142">To minimize the possibility that your patch is not broken by a subsequent customization transform, typically the patch is installed first, followed by the customization.</span></span> <span data-ttu-id="9b13e-143">L’installation préalable des transformations de personnalisation, puis du correctif, risque de perturber la personnalisation.</span><span class="sxs-lookup"><span data-stu-id="9b13e-143">Installing customization transforms first, and then the patch, may break the customization.</span></span> <span data-ttu-id="9b13e-144">Pour plus d’informations sur la mise à jour corrective des applications personnalisées, consultez Mise à [jour corrective des applications personnalisées](patching-customized-applications.md).</span><span class="sxs-lookup"><span data-stu-id="9b13e-144">For more information about patching customized applications, see [Patching Customized Applications](patching-customized-applications.md).</span></span>

 

 



