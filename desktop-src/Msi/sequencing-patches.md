---
description: À partir de Windows Installer 3,0, les auteurs peuvent ajouter des informations de séquencement de correctifs à la base de données des packages de correctifs dans la table MsiPatchSequence.
ms.assetid: 9cdcb25f-2c3d-411e-9aae-bdd52df38a97
title: Mise en séquence des correctifs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa9cbd9aead596abfaeb50d972915bf4d618440d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104210924"
---
# <a name="sequencing-patches"></a><span data-ttu-id="dd80d-103">Mise en séquence des correctifs</span><span class="sxs-lookup"><span data-stu-id="dd80d-103">Sequencing Patches</span></span>

<span data-ttu-id="dd80d-104">À partir de Windows Installer 3,0, les auteurs peuvent ajouter des informations de séquencement de correctifs à la base de données des packages de correctifs dans la table [MsiPatchSequence](msipatchsequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="dd80d-104">Beginning with Windows Installer 3.0, authors can add patch sequencing information to the patch package database in the [MsiPatchSequence](msipatchsequence-table.md) table.</span></span> <span data-ttu-id="dd80d-105">Le programme d’installation peut utiliser ces informations pour déterminer les correctifs applicables à un package d’installation, pour déterminer la meilleure séquence de mise à jour corrective et pour installer les correctifs dans un ordre constant, indépendamment de l’ordre dans lequel ils sont fournis au système.</span><span class="sxs-lookup"><span data-stu-id="dd80d-105">The installer can use this information to determine which patches are applicable to an installation package, to determine the best patching sequence, and to install patches in an constant order independent of the order they are provided to the system.</span></span>

<span data-ttu-id="dd80d-106">**Windows Installer 2,0 :** Non pris en charge.</span><span class="sxs-lookup"><span data-stu-id="dd80d-106">**Windows Installer 2.0:** Not supported.</span></span> <span data-ttu-id="dd80d-107">Windows Installer versions antérieures à Windows Installer 3,0 installent les correctifs dans l’ordre dans lequel elles sont fournies au système, qu’elles contiennent ou non une table [MsiPatchSequence](msipatchsequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="dd80d-107">Windows Installer versions previous to Windows Installer 3.0 install patches in the order that they are provided to the system regardless of whether they contain an [MsiPatchSequence](msipatchsequence-table.md) table.</span></span>

<span data-ttu-id="dd80d-108">Les éléments suivants sont requis pour utiliser la fonctionnalité de séquencement des correctifs.</span><span class="sxs-lookup"><span data-stu-id="dd80d-108">The following are required to use the patch sequencing functionality.</span></span>

-   <span data-ttu-id="dd80d-109">Les [packages de correctifs](patch-packages.md) (fichiers. msp) doivent avoir une table [MsiPatchSequence](msipatchsequence-table.md) contenant les informations de séquencement.</span><span class="sxs-lookup"><span data-stu-id="dd80d-109">[Patch packages](patch-packages.md) (.msp files) must have a [MsiPatchSequence](msipatchsequence-table.md) table containing sequencing information.</span></span> <span data-ttu-id="dd80d-110">Le programme d’installation installe les correctifs qui n’ont pas de table MsiPatchSequence dans l’ordre dans lequel ils sont fournis au système.</span><span class="sxs-lookup"><span data-stu-id="dd80d-110">The installer installs patches that do not have a MsiPatchSequence table in the order that they are provided to the system.</span></span>
-   <span data-ttu-id="dd80d-111">Les correctifs sont installés à l’aide de Windows Installer 3,0 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="dd80d-111">Patches are installed using Windows Installer 3.0 or later.</span></span>

<span data-ttu-id="dd80d-112">Windows Installer version 3,0 possède les fonctions suivantes que les applications peuvent utiliser pour déterminer la meilleure séquence de mise à jour corrective.</span><span class="sxs-lookup"><span data-stu-id="dd80d-112">Windows Installer version 3.0 has the following functions that applications can use to determine the best patching sequence.</span></span>

-   <span data-ttu-id="dd80d-113">La fonction [**MsiDeterminePatchSequence**](/windows/desktop/api/Msi/nf-msi-msideterminepatchsequencea) prend une liste de correctifs et détermine dans quelle séquence ils peuvent être appliqués à un produit installé.</span><span class="sxs-lookup"><span data-stu-id="dd80d-113">The [**MsiDeterminePatchSequence**](/windows/desktop/api/Msi/nf-msi-msideterminepatchsequencea) function takes a list of patches and determines in what sequence they can be applied to an installed product.</span></span> <span data-ttu-id="dd80d-114">Cette fonction tient compte de tous les correctifs ou produits qui ont déjà été installés sur le système.</span><span class="sxs-lookup"><span data-stu-id="dd80d-114">This function accounts for any patches or products that have already been installed on the system.</span></span>
-   <span data-ttu-id="dd80d-115">La fonction [**MsiDetermineApplicablePatches**](/windows/desktop/api/Msi/nf-msi-msidetermineapplicablepatchesa) prend une liste de correctifs et détermine dans quelle séquence ils peuvent être appliqués à un produit installé.</span><span class="sxs-lookup"><span data-stu-id="dd80d-115">The [**MsiDetermineApplicablePatches**](/windows/desktop/api/Msi/nf-msi-msidetermineapplicablepatchesa) function takes a list of patches and determines in what sequence they can be applied to an installed product.</span></span> <span data-ttu-id="dd80d-116">Cette fonction ne prend pas en compte les correctifs ou les produits déjà installés sur le système.</span><span class="sxs-lookup"><span data-stu-id="dd80d-116">This function does not account for any patches or products that have already been installed on the system.</span></span>

<span data-ttu-id="dd80d-117">Windows Installer version 3,0 peut appliquer plusieurs correctifs à un produit dans une seule installation de mise à jour corrective.</span><span class="sxs-lookup"><span data-stu-id="dd80d-117">Windows Installer version 3.0 can apply multiple patches to a product in a single patching installation.</span></span> <span data-ttu-id="dd80d-118">Le groupe de correctifs peut contenir des correctifs qui incluent la mise à jour corrective des informations de séquence (une table [MsiPatchSequence](msipatchsequence-table.md) ) et les correctifs qui ne le sont pas.</span><span class="sxs-lookup"><span data-stu-id="dd80d-118">The group of patches can contain patches that include patching sequence information (a [MsiPatchSequence](msipatchsequence-table.md) table) and patches that do not.</span></span> <span data-ttu-id="dd80d-119">Le Windows Installer installe les packages de correctifs sans ce tableau dans l’ordre dans lequel ils sont fournis au système.</span><span class="sxs-lookup"><span data-stu-id="dd80d-119">The Windows Installer installs the patch packages without this table in the order that they are provided to the system.</span></span> <span data-ttu-id="dd80d-120">Le programme d’installation compte pour les packages de correctifs qui n’ont pas de table MsiPatchSequence, mais qui ont été marqués comme des correctifs obsolètes ou remplacés par la méthode décrite dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="dd80d-120">The installer accounts for patch packages that lack a MsiPatchSequence table, but that have been marked as obsolete or superseded patches by the method described in the following section.</span></span>

<span data-ttu-id="dd80d-121">Quand Windows Installer version 3,0 installe plusieurs correctifs, elle effectue les étapes suivantes pour déterminer l’ordre dans lequel les correctifs individuels sont appliqués au produit :</span><span class="sxs-lookup"><span data-stu-id="dd80d-121">When Windows Installer version 3.0 installs multiple patches, it follows these steps to determine the sequence in which individual patches are applied to the product:</span></span>

1.  <span data-ttu-id="dd80d-122">Les correctifs installés sans table [MsiPatchSequence](msipatchsequence-table.md) sont placés dans la séquence dans l’ordre dans lequel ils ont été appliqués au produit.</span><span class="sxs-lookup"><span data-stu-id="dd80d-122">Installed patches without a [MsiPatchSequence](msipatchsequence-table.md) table are put in the sequence in the order that they were applied to the product.</span></span> <span data-ttu-id="dd80d-123">Le premier correctif appliqué est placé en premier dans la séquence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-123">The first patch that was applied is placed first in the sequence.</span></span>
2.  <span data-ttu-id="dd80d-124">Les nouveaux correctifs sans [table MsiPatchSequence](msipatchsequence-table.md) sont placés dans la séquence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-124">New patches without a [MsiPatchSequence table](msipatchsequence-table.md) are put in the sequence.</span></span> <span data-ttu-id="dd80d-125">Ces correctifs sont appliqués par l’installation de mise à jour corrective actuelle.</span><span class="sxs-lookup"><span data-stu-id="dd80d-125">These patches are being applied by the current patching installation.</span></span> <span data-ttu-id="dd80d-126">Ils sont placés dans l’ordre dans lequel ils sont fournis au système et placés après tous les correctifs de l’étape 1.</span><span class="sxs-lookup"><span data-stu-id="dd80d-126">They are put in the order that they are provided to the system, and placed after all the patches in step 1.</span></span>
3.  <span data-ttu-id="dd80d-127">Les correctifs obsolètes sont éliminés de la séquence des correctifs.</span><span class="sxs-lookup"><span data-stu-id="dd80d-127">Obsolete patches are eliminated from the sequence of patches.</span></span>
    > [!Note]  
    > <span data-ttu-id="dd80d-128">Un package de correctifs peut spécifier dans la propriété [**Résumé du numéro de révision**](revision-number-summary.md) une liste explicite des correctifs obsolètes à supprimer par le correctif.</span><span class="sxs-lookup"><span data-stu-id="dd80d-128">A patch package can specify in the [**Revision Number Summary**](revision-number-summary.md) property an explicit list of obsolete patches to be removed by the patch.</span></span> <span data-ttu-id="dd80d-129">Cette liste est destinée à être utilisée par les versions Windows Installer antérieures à la version 3,0.</span><span class="sxs-lookup"><span data-stu-id="dd80d-129">This list is intended for use by Windows Installer versions earlier than version 3.0.</span></span> <span data-ttu-id="dd80d-130">Windows Installer version 3,0 supprime les correctifs marqués comme obsolètes de la séquence, uniquement si les correctifs n’ont pas la [table MsiPatchSequence](msipatchsequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="dd80d-130">Windows Installer version 3.0 removes the patches marked as obsolete from the sequence, only if the patches do not have the [MsiPatchSequence table](msipatchsequence-table.md).</span></span>

     

4.  <span data-ttu-id="dd80d-131">Le programme d’installation parcourt la séquence de mise à jour corrective et détermine quels correctifs sont applicables dans la séquence donnée.</span><span class="sxs-lookup"><span data-stu-id="dd80d-131">The installer steps through the patching sequence and determines which patches are applicable in the given sequence.</span></span> <span data-ttu-id="dd80d-132">Lorsque plusieurs correctifs sont appliqués à un produit, chaque correctif de la séquence transforme également la base de données d’installation du produit (fichier. msi).</span><span class="sxs-lookup"><span data-stu-id="dd80d-132">When multiple patches are applied to a product, each patch in the sequence also transforms the product's installation database (.msi file).</span></span> <span data-ttu-id="dd80d-133">Un correctif est applicable dans une séquence particulière uniquement si sa transformation de base de données est capable de prendre le [Code du produit](product-codes.md), la [**version**](productversion.md), la [**langue**](productlanguage.md)et la [**UpgradeCode**](upgradecode.md) qui résultent de l’application des transformations de tous les [packages de correctifs](patch-packages.md) précédents à la base de données du produit.</span><span class="sxs-lookup"><span data-stu-id="dd80d-133">A patch is applicable in a particular sequence only if its database transform is capable of taking the [product code](product-codes.md), [**version**](productversion.md), [**language**](productlanguage.md), and [**upgradecode**](upgradecode.md) that result from applying the transforms of all preceding [patch packages](patch-packages.md) to the product database.</span></span> <span data-ttu-id="dd80d-134">Le programme d’installation élimine tout correctif inapplicable de la séquence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-134">The installer eliminates any inapplicable patches from the sequence.</span></span>
5.  <span data-ttu-id="dd80d-135">Le programme d’installation commence à placer les correctifs dont les informations de séquencement sont dans leur table [MsiPatchSequence](msipatchsequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="dd80d-135">The installer begins placing patches that have sequencing information in their [MsiPatchSequence](msipatchsequence-table.md) table.</span></span> <span data-ttu-id="dd80d-136">Les correctifs de [mise à niveau mineurs](minor-upgrades.md) qui comportent la table MsiPatchSequence sont placés dans la séquence après les correctifs qui ont été séquencés au cours des étapes précédentes et dans l’ordre de leurs versions les plus anciennes et les plus élevées après leur mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="dd80d-136">[Minor upgrade](minor-upgrades.md) patches that have the MsiPatchSequence table are placed in the sequence after the patches that were sequenced in previous steps and in the order of their lowest to highest product versions after being upgraded.</span></span> <span data-ttu-id="dd80d-137">Windows Installer élimine ensuite les correctifs de mise à niveau mineurs qui ne sont pas applicables dans cette séquence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-137">Windows Installer then eliminates any minor upgrade patches that are inapplicable in this sequence.</span></span>
6.  <span data-ttu-id="dd80d-138">Les correctifs de [petite mise à jour](small-updates.md) ciblant des [mises à niveau mineures](minor-upgrades.md) avec une table [MsiPatchSequence](msipatchsequence-table.md) sont affectés à la version la plus récente du correctif de mise à niveau mineure dans la séquence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-138">[Small update](small-updates.md) patches targeting [minor upgrades](minor-upgrades.md) having a [MsiPatchSequence](msipatchsequence-table.md) table, are assigned to the highest version of the minor upgrade patch in the sequence.</span></span>
7.  <span data-ttu-id="dd80d-139">Tous les correctifs de [mise à jour de petite taille](small-updates.md) qui ne sont pas affectés après les étapes précédentes, et qui ont la table [MsiPatchSequence](msipatchsequence-table.md) , sont placés dans la séquence avant la première [mise à niveau mineure](minor-upgrades.md) contenant la table MsiPatchSequence, et après la base de données d’installation. msi et les correctifs sans la table MsiPatchSequence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-139">All [small update](small-updates.md) patches that remain unassigned after the previous steps, and that have the [MsiPatchSequence](msipatchsequence-table.md) table, are put in the sequence before the first [minor upgrade](minor-upgrades.md) that has the MsiPatchSequence table, and after the .msi installation database and any patches without the MsiPatchSequence table.</span></span> <span data-ttu-id="dd80d-140">Windows Installer élimine ensuite les correctifs de mise à jour de petite taille qui ne sont pas applicables dans cette séquence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-140">Windows Installer then eliminates any small update patches that are inapplicable in this sequence.</span></span>
8.  <span data-ttu-id="dd80d-141">Windows Installer version 3,0 élimine les correctifs remplacés de la séquence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-141">Windows Installer version 3.0 eliminates superseded patches from the sequence.</span></span> <span data-ttu-id="dd80d-142">Lorsqu’un correctif remplace des correctifs qui se produisent plus tôt dans la séquence de correctifs, le correctif contient tous les correctifs des correctifs précédents.</span><span class="sxs-lookup"><span data-stu-id="dd80d-142">When a patch supersedes patches that occur earlier in the patch sequence, the patch contains all the fixes in the earlier patches.</span></span> <span data-ttu-id="dd80d-143">Les correctifs antérieurs ne sont plus nécessaires.</span><span class="sxs-lookup"><span data-stu-id="dd80d-143">The earlier patches are no longer required.</span></span> <span data-ttu-id="dd80d-144">Le Windows Installer requiert les informations de la table [MsiPatchSequence](msipatchsequence-table.md) pour éliminer les correctifs remplacés.</span><span class="sxs-lookup"><span data-stu-id="dd80d-144">The Windows Installer requires the information in the [MsiPatchSequence](msipatchsequence-table.md) table to eliminate superseded patches.</span></span>
    > [!Note]  
    > <span data-ttu-id="dd80d-145">Les correctifs destinés à remplacer un ensemble antérieur de correctifs doivent être créés pour remplacer les correctifs antérieurs dans toutes les familles de correctifs.</span><span class="sxs-lookup"><span data-stu-id="dd80d-145">Patches intended to supersede an earlier set of patches must be authored to supersede the earlier patches in all patch families.</span></span> <span data-ttu-id="dd80d-146">Les correctifs de [petite taille](small-updates.md) peuvent uniquement remplacer les petites mises à jour.</span><span class="sxs-lookup"><span data-stu-id="dd80d-146">[Small update](small-updates.md) patches can only supersede small updates.</span></span> <span data-ttu-id="dd80d-147">Les [mises à niveau mineures](minor-upgrades.md) peuvent remplacer les petites mises à jour et les autres mises à niveau mineures.</span><span class="sxs-lookup"><span data-stu-id="dd80d-147">[Minor upgrades](minor-upgrades.md) can supersede both small updates and other minor upgrades.</span></span>

     

9.  <span data-ttu-id="dd80d-148">Les [mises à jour de petite taille](small-updates.md) qui contiennent des tables [MsiPatchSequence](msipatchsequence-table.md) sont séquencées dans les versions de produit en fonction des informations de séquencement dans leurs tables MsiPatchSequence.</span><span class="sxs-lookup"><span data-stu-id="dd80d-148">[Small update](small-updates.md) patches that carry [MsiPatchSequence](msipatchsequence-table.md) tables, get sequenced within product versions according to the sequencing information in their MsiPatchSequence tables.</span></span> <span data-ttu-id="dd80d-149">Cela détermine la séquence de mise à jour corrective finale.</span><span class="sxs-lookup"><span data-stu-id="dd80d-149">This determines the final patching sequence.</span></span>

<span data-ttu-id="dd80d-150">Un correctif qui ne doit plus être utilisé peut être éliminé de la séquence de mise à jour corrective.</span><span class="sxs-lookup"><span data-stu-id="dd80d-150">A patch that should no longer be used can be eliminated from the patching sequence.</span></span> <span data-ttu-id="dd80d-151">Pour plus d’informations sur la façon d’éliminer les correctifs de la séquence de mise à jour corrective, consultez [élimination des correctifs](eliminating-patches.md).</span><span class="sxs-lookup"><span data-stu-id="dd80d-151">For more information about how to eliminate patches from the patching sequence, see [Eliminating Patches](eliminating-patches.md).</span></span>

<span data-ttu-id="dd80d-152">Pour obtenir un exemple de la façon dont la table [MsiPatchSequence](msipatchsequence-table.md) peut être utilisée pour appliquer des correctifs dans l’ordre dans lequel ils sont créés, consultez l’exemple de mise à [jour corrective multiple](multiple-patching-example.md).</span><span class="sxs-lookup"><span data-stu-id="dd80d-152">For an example of how the [MsiPatchSequence](msipatchsequence-table.md) table can be used to apply patches in the order in which they are authored, see the [Multiple Patching Example](multiple-patching-example.md).</span></span>

 

 



