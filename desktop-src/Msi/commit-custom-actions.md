---
description: Les actions personnalisées de validation sont exécutées à la fin du script d’installation.
ms.assetid: ad766585-e8ac-44b6-9717-7979f803886c
title: Valider des actions personnalisées
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 174af16a84f71ff90a1fc35c76054ee503449b8a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106524980"
---
# <a name="commit-custom-actions"></a><span data-ttu-id="d9f91-103">Valider des actions personnalisées</span><span class="sxs-lookup"><span data-stu-id="d9f91-103">Commit Custom Actions</span></span>

<span data-ttu-id="d9f91-104">Les actions personnalisées de validation sont exécutées à la fin du script d’installation.</span><span class="sxs-lookup"><span data-stu-id="d9f91-104">Commit Custom actions are executed upon successful completion of the installation script.</span></span> <span data-ttu-id="d9f91-105">Si l' [action InstallFinalize](installfinalize-action.md) est réussie, le programme d’installation exécute ensuite toutes les actions personnalisées commit existantes.</span><span class="sxs-lookup"><span data-stu-id="d9f91-105">If the [InstallFinalize action](installfinalize-action.md) is successful, the installer will then run any existing Commit Custom actions.</span></span> <span data-ttu-id="d9f91-106">Le seul paramètre de mode défini par le programme d’installation dans ce cas est MSIRUNMODE \_ Commit.</span><span class="sxs-lookup"><span data-stu-id="d9f91-106">The only mode parameter the installer sets in this case is MSIRUNMODE\_COMMIT.</span></span> <span data-ttu-id="d9f91-107">Pour obtenir une description des paramètres du mode d’exécution, consultez [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) .</span><span class="sxs-lookup"><span data-stu-id="d9f91-107">See [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) for a description of the run mode parameters.</span></span>

<span data-ttu-id="d9f91-108">Une action personnalisée de validation peut être spécifiée en ajoutant un indicateur d’option au champ type de la [table CustomAction](customaction-table.md).</span><span class="sxs-lookup"><span data-stu-id="d9f91-108">A commit custom action can be specified by adding an option flag to the Type field of the [CustomAction table](customaction-table.md).</span></span> <span data-ttu-id="d9f91-109">Consultez [action personnalisée In-Script les options d’exécution](custom-action-in-script-execution-options.md) pour l’indicateur d’option désignant une action personnalisée de validation.</span><span class="sxs-lookup"><span data-stu-id="d9f91-109">See [Custom Action In-Script Execution Options](custom-action-in-script-execution-options.md) for the option flag designating a commit custom action.</span></span>

<span data-ttu-id="d9f91-110">Une action personnalisée de validation est le complément à une [action personnalisée de restauration](rollback-custom-actions.md) et peut être utilisée avec les actions personnalisées Rollback pour inverser les actions personnalisées qui effectuent des modifications directement sur le système.</span><span class="sxs-lookup"><span data-stu-id="d9f91-110">A commit custom action is the complement to a [rollback custom action](rollback-custom-actions.md) and can be used with rollback custom actions to reverse custom actions that make changes directly to the system.</span></span>

<span data-ttu-id="d9f91-111">Notez qu’une action personnalisée de restauration peut ne pas être en mesure de supprimer toutes les modifications apportées par les actions personnalisées de validation.</span><span class="sxs-lookup"><span data-stu-id="d9f91-111">Note that a rollback custom action may not be able to remove all of the changes made by commit custom actions.</span></span> <span data-ttu-id="d9f91-112">Bien que le programme d’installation écrit à la fois les actions personnalisées Rollback et Commit dans le script de restauration, les actions personnalisées commit ne s’exécutent qu’une fois que le programme d’installation a traité avec succès le script d’installation.</span><span class="sxs-lookup"><span data-stu-id="d9f91-112">Although the installer writes both rollback and commit custom actions into the rollback script, commit custom actions only run after the installer has successfully processed the installation script.</span></span> <span data-ttu-id="d9f91-113">Les actions personnalisées de validation sont les premières actions à exécuter dans le script de restauration.</span><span class="sxs-lookup"><span data-stu-id="d9f91-113">Commit custom actions are the first actions to run in the rollback script.</span></span> <span data-ttu-id="d9f91-114">Si une action personnalisée de validation échoue, le programme d’installation lance la restauration, mais ne peut restaurer que les opérations déjà écrites dans le script de restauration.</span><span class="sxs-lookup"><span data-stu-id="d9f91-114">If a commit custom action fails, the installer initiates rollback but can only rollback those operations already written to the rollback script.</span></span> <span data-ttu-id="d9f91-115">Cela signifie que, selon l’action personnalisée de validation, une restauration peut ne pas être en mesure d’annuler les modifications apportées par l’action.</span><span class="sxs-lookup"><span data-stu-id="d9f91-115">This means that depending on the commit custom action, a rollback may not be able to undo the changes made by the action.</span></span> <span data-ttu-id="d9f91-116">Vous pouvez ignorer les échecs dans les actions personnalisées de validation en créant l’action personnalisée afin d’ignorer les codes de retour.</span><span class="sxs-lookup"><span data-stu-id="d9f91-116">You can ignore failures in commit custom actions by authoring the custom action to ignore return codes.</span></span>

<span data-ttu-id="d9f91-117">Les actions personnalisées de restauration et de validation ne s’exécutent pas lorsque la restauration est désactivée.</span><span class="sxs-lookup"><span data-stu-id="d9f91-117">Rollback and commit custom actions do not run when rollback is disabled.</span></span> <span data-ttu-id="d9f91-118">Si un auteur de package requiert ces types d’actions personnalisées pour une installation correcte, il doit utiliser la propriété [**RollbackDisabled**](rollbackdisabled.md) dans une condition qui empêche l’installation de se poursuivre lorsque la restauration est désactivée.</span><span class="sxs-lookup"><span data-stu-id="d9f91-118">If a package author requires these types of custom actions for proper installation, they should use the [**RollbackDisabled**](rollbackdisabled.md) Property in a condition that prevents the installation from continuing when rollback is disabled.</span></span>

 

 



