---
description: Un package à double usage est un package Windows Installer 5,0 qui a été créé pour pouvoir installer une application dans le contexte d’installation par utilisateur ou par ordinateur.
ms.assetid: b2da9fba-8fdf-48fa-a662-6b3eee1bfe87
title: Création d’un package unique
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87c22b9be930be2d2178ea4efb7ba1538320823a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106520622"
---
# <a name="single-package-authoring"></a><span data-ttu-id="c46c0-103">Création d’un package unique</span><span class="sxs-lookup"><span data-stu-id="c46c0-103">Single Package Authoring</span></span>

<span data-ttu-id="c46c0-104">Un package à double usage est un package Windows Installer 5,0 qui a été créé pour pouvoir installer une application dans le [contexte d’installation](installation-context.md)par utilisateur ou par ordinateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-104">A dual-purpose package is a Windows Installer 5.0 package that has been authored to be capable of installing an application in either the per-user or per-machine [installation context](installation-context.md).</span></span> <span data-ttu-id="c46c0-105">Les développeurs de programme d’installation qui utilisent un package à double usage pour leur application peuvent fournir à leurs utilisateurs un choix de contexte d’installation lors de l’installation et peuvent supprimer les invites d’informations d’identification UAC des installations par utilisateur sur Windows 7 ou Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="c46c0-105">Setup developers that use a dual-purpose package for their application can provide their users with a choice of installation context at installation time and can remove UAC credential prompts from per-user installations on Windows 7 or Windows Server 2008 R2.</span></span> <span data-ttu-id="c46c0-106">Le développement d’un package Windows Installer 5,0 à double usage pour l’installation sur Windows 7 et Windows Server 2008 R2 est appelé création de package unique.</span><span class="sxs-lookup"><span data-stu-id="c46c0-106">The development of a dual-purpose Windows Installer 5.0 package for installation on Windows 7 and Windows Server 2008 R2 is referred to as single package authoring.</span></span>

<span data-ttu-id="c46c0-107">Vous pouvez commencer à développer des packages à double usage pour Windows 7 et Windows Server 2008 R2 à l’aide de Windows Installer 5,0, de la propriété [**MSIINSTALLPERUSER**](msiinstallperuser.md) , de la propriété [**ALLUSERS**](allusers.md) et des dossiers connus par utilisateur et des inscriptions du [shell Windows](/previous-versions/windows/desktop/legacy/bb773177(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="c46c0-107">You can begin to develop dual-purpose packages for Windows 7 and Windows Server 2008 R2 by using Windows Installer 5.0, the [**MSIINSTALLPERUSER**](msiinstallperuser.md) property, the [**ALLUSERS**](allusers.md) property, and the per-user capable known folders and registrations of the [Windows Shell](/previous-versions/windows/desktop/legacy/bb773177(v=vs.85)).</span></span> <span data-ttu-id="c46c0-108">Lorsque Windows Installer 5,0 installe un package à double usage dans le contexte par utilisateur sur Windows 7 ou Windows Server 2008 R2, le programme d’installation dirige les entrées de Registre et de fichier vers des emplacements par utilisateur et n’affiche pas les invites UAC pour les informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="c46c0-108">When Windows Installer 5.0 installs a dual-purpose package in the per-user context on Windows 7 or Windows Server 2008 R2, the installer directs file and registry entries to per-user locations and does not display UAC prompts for credentials.</span></span> <span data-ttu-id="c46c0-109">Lorsque Windows Installer 5,0 installe un package à double usage dans le contexte par ordinateur, le programme d’installation dirige les fichiers et les entrées de Registre vers des emplacements par ordinateur et demande des informations d’identification UAC pour confirmer que l’utilisateur dispose de privilèges suffisants pour installer des logiciels pour tous les utilisateurs de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-109">When Windows Installer 5.0 installs a dual-purpose package in the per-machine context, the installer directs files and registry entries to per-machine locations and prompts for UAC credentials to confirm that the user has sufficient privileges to install software for all users of the computer.</span></span> <span data-ttu-id="c46c0-110">Une fois que Windows Installer 5,0 installe une application, il utilise le même contexte d’installation pour toutes les mises à jour, réparations ou suppressions ultérieures de l’application.</span><span class="sxs-lookup"><span data-stu-id="c46c0-110">Once Windows Installer 5.0 installs an application, it uses the same installation context for all subsequent updates, repairs, or removal of the application.</span></span>

<span data-ttu-id="c46c0-111">**[Windows Installer 4,5 ou version antérieure](not-supported-in-windows-installer-4-5.md):** la propriété [**MSIINSTALLPERUSER**](msiinstallperuser.md) et les versions par utilisateur des dossiers référencés par les propriétés [**ProgramFilesFolder**](programfilesfolder.md), [**CommonFilesFolder**](commonfilesfolder.md), [**ProgramFiles64Folder**](programfiles64folder.md)et [**CommonFiles64Folder**](commonfiles64folder.md) ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="c46c0-111">**[Windows Installer 4.5 or earlier](not-supported-in-windows-installer-4-5.md):** The [**MSIINSTALLPERUSER**](msiinstallperuser.md) property and per-user versions of folders referenced by the [**ProgramFilesFolder**](programfilesfolder.md), [**CommonFilesFolder**](commonfilesfolder.md), [**ProgramFiles64Folder**](programfiles64folder.md), and [**CommonFiles64Folder**](commonfiles64folder.md) properties are not supported.</span></span> <span data-ttu-id="c46c0-112">Les dossiers **FOLDERID \_ UserProgramFiles** et **FOLDERID \_ UserProgramFilesCommon** sont disponibles à partir de windows 7 et de Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="c46c0-112">The **FOLDERID\_UserProgramFiles** and **FOLDERID\_UserProgramFilesCommon** folders are available beginning with Windows 7 and Windows Server 2008 R2.</span></span> <span data-ttu-id="c46c0-113">Cela signifie que les installations développées pour les fichiers directs et les entrées de registre de Windows Installer 4,5 ou versions antérieures dans FOLDERID \_ ProgramFiles, FOLDERID \_ PROGRAMFILESCOMMON, FOLDERID \_ ProgramFilesX64 et FOLDERID \_ ProgramFilesCommonX64.</span><span class="sxs-lookup"><span data-stu-id="c46c0-113">This means installations developed for Windows Installer 4.5 or earlier direct files and registry entries to FOLDERID\_ProgramFiles, FOLDERID\_ProgramFilesCommon, FOLDERID\_ProgramFilesX64, and FOLDERID\_ProgramFilesCommonX64.</span></span> <span data-ttu-id="c46c0-114">Étant donné que ces emplacements sont accessibles à d’autres utilisateurs de l’ordinateur, Windows Vista et les systèmes ultérieurs requièrent l’affichage des invites UAC pour les informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="c46c0-114">Because these are locations accessible to other users of the computer, Windows Vista and later systems require the display of UAC prompts for credentials.</span></span>

<span data-ttu-id="c46c0-115">Lorsqu’un utilisateur installe un package à double usage créé pour Windows Installer 5,0 avec Windows Installer 4,5 ou version antérieure, le programme d’installation ignore la propriété [**MSIINSTALLPERUSER**](msiinstallperuser.md) .</span><span class="sxs-lookup"><span data-stu-id="c46c0-115">When a user installs a dual-purpose package authored for Windows Installer 5.0 with Windows Installer 4.5 or earlier, the installer ignores the [**MSIINSTALLPERUSER**](msiinstallperuser.md) property.</span></span> <span data-ttu-id="c46c0-116">Dans ce cas, l’installation peut diriger les fichiers et les entrées de Registre vers des emplacements accessibles à d’autres utilisateurs et demander au système d’afficher les invites de contrôle de compte d’utilisateur pour les informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="c46c0-116">In this case, the installation can direct files and registry entries to locations accessible to other users and require the system to display UAC prompts for credentials.</span></span> <span data-ttu-id="c46c0-117">Windows Installer 5,0 peut installer un package développé pour Windows Installer 4,5 ou version antérieure, mais l’installation dirige les fichiers et les entrées de Registre vers des emplacements accessibles à d’autres utilisateurs et requiert que le système affiche des invites de contrôle de compte d’utilisateur pour les informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="c46c0-117">Windows Installer 5.0 can install a package that was developed for Windows Installer 4.5 or earlier, however, the installation directs files and registry entries to locations accessible to other users and requires the system to display UAC prompts for credentials.</span></span>

## <a name="development-guidelines"></a><span data-ttu-id="c46c0-118">Instructions de développement</span><span class="sxs-lookup"><span data-stu-id="c46c0-118">Development Guidelines</span></span>

<span data-ttu-id="c46c0-119">Respectez les instructions de création de packages uniques suivantes pour vous assurer que le package peut être installé dans le contexte par utilisateur ou par ordinateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-119">Adhere to the following single-package authoring guidelines to ensure that the package can be installed in either the per-user or per-machine context.</span></span> <span data-ttu-id="c46c0-120">Suivez ces instructions pour permettre à l’utilisateur de choisir au moment de l’installation une installation par utilisateur ou par ordinateur et pour supprimer les invites UAC des installations par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-120">Follow these guidelines to enable the user to choose at installation time a per-user or per-machine installation and to remove UAC prompts from per-user installations.</span></span>

-   <span data-ttu-id="c46c0-121">L’installation par utilisateur requiert Windows Installer 5,0 sur Windows 7 ou Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="c46c0-121">Per-user installation requires Windows Installer 5.0 on Windows 7 or Windows Server 2008 R2.</span></span> <span data-ttu-id="c46c0-122">Vous devez informer l’utilisateur que le package prend en charge l’installation par ordinateur de l’application sur les versions antérieures du système.</span><span class="sxs-lookup"><span data-stu-id="c46c0-122">You should inform the user that the package supports per-machine installation of the application on earlier versions of the system.</span></span>
-   <span data-ttu-id="c46c0-123">Initialisez les valeurs des propriétés [**ALLUSERS**](allusers.md) et [**MSIINSTALLPERUSER**](msiinstallperuser.md) dans la [table de propriétés](property-table.md) de votre package à double usage.</span><span class="sxs-lookup"><span data-stu-id="c46c0-123">Initialize the values for the [**ALLUSERS**](allusers.md) and [**MSIINSTALLPERUSER**](msiinstallperuser.md) properties in the [Property Table](property-table.md) of your dual-purpose package.</span></span> <span data-ttu-id="c46c0-124">Utilisez la valeur **ALLUSERS** 2 et la valeur **MSIINSTALLPERUSER** 1 comme valeurs initiales.</span><span class="sxs-lookup"><span data-stu-id="c46c0-124">Use **ALLUSERS** value of 2 and a **MSIINSTALLPERUSER** value of 1 as the initial values.</span></span> <span data-ttu-id="c46c0-125">Cela spécifie l’installation par utilisateur comme valeur par défaut pour le package à double usage.</span><span class="sxs-lookup"><span data-stu-id="c46c0-125">This specifies per-user installation as the default for the dual-purpose package.</span></span>
-   <span data-ttu-id="c46c0-126">Envisagez de créer une boîte de dialogue pour l' [interface utilisateur](user-interface.md) de votre package à double usage qui permet à l’utilisateur de choisir le contexte au moment de l’installation.</span><span class="sxs-lookup"><span data-stu-id="c46c0-126">Consider authoring a dialog box for the [user interface](user-interface.md) of your dual-purpose package that enables the user to choose the context at installation time.</span></span> <span data-ttu-id="c46c0-127">Créez les contrôles sur cette boîte de dialogue personnalisée pour définir les valeurs des propriétés [**ALLUSERS**](allusers.md) et [**MSIINSTALLPERUSER**](msiinstallperuser.md) .</span><span class="sxs-lookup"><span data-stu-id="c46c0-127">Author the controls on this custom dialog box to set the values of the [**ALLUSERS**](allusers.md) and [**MSIINSTALLPERUSER**](msiinstallperuser.md) properties.</span></span> <span data-ttu-id="c46c0-128">Pour la valeur **ALLUSERS** 2, affectez la valeur 1 à **MSIINSTALLPERUSER** pour spécifier une installation par utilisateur et définissez **MSIINSTALLPERUSER** sur une chaîne vide ("") pour spécifier une installation par ordinateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-128">For the **ALLUSERS** value of 2, set **MSIINSTALLPERUSER** to a value of 1 to specify a per-user installation and set **MSIINSTALLPERUSER** to an empty string ("") to specify a per-machine installation.</span></span> <span data-ttu-id="c46c0-129">Les utilisateurs peuvent également définir **ALLUSERS** et **MSIINSTALLPERUSER** sur la ligne de commande s’ils installent le package à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="c46c0-129">Users can also set the **ALLUSERS** and **MSIINSTALLPERUSER** on the command line if they install the package from the command line.</span></span>
-   <span data-ttu-id="c46c0-130">Validez le package à l’aide [des évaluateurs de cohérence internes-ICEs](internal-consistency-evaluators-ices.md).</span><span class="sxs-lookup"><span data-stu-id="c46c0-130">Validate the package using [Internal Consistency Evaluators - ICEs](internal-consistency-evaluators-ices.md).</span></span> <span data-ttu-id="c46c0-131">Le package doit être en mesure de réussir la validation par [ICE105](ice-105.md) pour être un package à double usage valide.</span><span class="sxs-lookup"><span data-stu-id="c46c0-131">The package must be able to pass validation by [ICE105](ice-105.md) to be a valid dual-purpose package.</span></span>
-   <span data-ttu-id="c46c0-132">Utilisez la table de [Registre](registry-table.md) et la [table RemoveRegistry](removeregistry-table.md) pour rediriger les entrées de Registre vers les parties par utilisateur du registre lors des installations par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-132">Use the [Registry Table](registry-table.md) and [RemoveRegistry Table](removeregistry-table.md) to redirect registry entries to the per-user parts of the registry during per-user installations.</span></span> <span data-ttu-id="c46c0-133">Dans une installation par utilisateur, les entrées de Registre qui ont-1 dans la colonne racine sont redirigées vers **HKEY \_ Current \_ User** et, dans une installation par ordinateur, celles-ci sont dirigées vers **HKEY \_ local \_ machine**.</span><span class="sxs-lookup"><span data-stu-id="c46c0-133">In a per-user installation, registry entries that have -1 in the Root column are redirected to **HKEY\_CURRENT\_USER**, and in a per-machine installation these are directed to **HKEY\_LOCAL\_MACHINE**.</span></span> <span data-ttu-id="c46c0-134">Dans une installation par utilisateur, les entrées de Registre qui ont msidbRegistryRootClassesRoot (0) dans la colonne racine sont redirigées vers les classes de \\ **logiciel** HKCU \\ et, dans une installation par ordinateur, elles sont dirigées vers les classes de  \\ **logiciel** HKLM \\ .</span><span class="sxs-lookup"><span data-stu-id="c46c0-134">In a per-user installation, registry entries that have msidbRegistryRootClassesRoot (0) in the Root column are redirected to **HKCU**\\**Software**\\**Classes**, and in a per-machine installation, these are directed to **HKLM**\\**Software**\\**Classes**.</span></span>
-   <span data-ttu-id="c46c0-135">Utilisez la propriété [**ProgramFilesFolder**](programfilesfolder.md) dans la [table des répertoires](directory-table.md) des [packages Windows Installers 32 bits](32-bit-windows-installer-packages.md) pour spécifier les emplacements des répertoires contenant des composants 32 bits qui ne sont pas partagés entre les applications.</span><span class="sxs-lookup"><span data-stu-id="c46c0-135">Use the [**ProgramFilesFolder**](programfilesfolder.md) property in the [Directory table](directory-table.md) of [32-bit Windows Installer Packages](32-bit-windows-installer-packages.md) to specify the locations of directories containing 32-bit components not shared across applications.</span></span> <span data-ttu-id="c46c0-136">Lorsqu’un utilisateur installe le package à double usage à l’aide du contexte par ordinateur, ces composants sont enregistrés dans le dossier Program Files sur les versions 32 bits de Windows et dans le dossier Program Files (x86) sur les versions 64 bits du système.</span><span class="sxs-lookup"><span data-stu-id="c46c0-136">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Program Files folder on 32-bit versions of Windows and in the Program Files (x86) folder on 64-bit versions of the system.</span></span> <span data-ttu-id="c46c0-137">Tous les utilisateurs peuvent accéder aux composants de ces répertoires.</span><span class="sxs-lookup"><span data-stu-id="c46c0-137">The components in these directories can be accessed by all users.</span></span> <span data-ttu-id="c46c0-138">Lorsqu’un utilisateur installe le package à double usage sur Windows 7 ou Windows Server 2008 R2 à l’aide du contexte par utilisateur, ces composants sont enregistrés dans le dossier programmes de l’utilisateur actuel (par exemple, dans% LocalAppData% \\ Programs) et sont accessibles uniquement par cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-138">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Programs folder of the current user (for example at %LocalAppData%\\Programs) and can be accessed only by that user.</span></span>
-   <span data-ttu-id="c46c0-139">Utilisez la propriété [**CommonFilesFolder**](commonfilesfolder.md) de la [table des répertoires](directory-table.md) des [packages Windows Installer bits 32](32-bit-windows-installer-packages.md) pour spécifier les emplacements des répertoires contenant des composants 32 bits partagés entre les applications.</span><span class="sxs-lookup"><span data-stu-id="c46c0-139">Use the [**CommonFilesFolder**](commonfilesfolder.md) property in the [Directory table](directory-table.md) of [32-bit Windows Installer Packages](32-bit-windows-installer-packages.md) to specify the locations of directories containing 32-bit components shared across applications.</span></span> <span data-ttu-id="c46c0-140">Lorsqu’un utilisateur installe le package à double usage à l’aide du contexte par ordinateur, ces composants sont enregistrés dans le dossier Fichiers communs et sont accessibles à tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="c46c0-140">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Common Files folder and can be accessed by all users.</span></span> <span data-ttu-id="c46c0-141">Lorsqu’un utilisateur installe le package à double usage sur Windows 7 ou Windows Server 2008 R2 à l’aide du contexte par utilisateur, ces composants sont enregistrés dans le dossier commun de l’utilisateur actuel (par exemple, dans% LocalAppData% \\ Programs \\ Common) et sont accessibles uniquement par cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-141">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Common folder of the current user (for example at %LocalAppData%\\Programs\\Common) and can be accessed only by that user.</span></span>
-   <span data-ttu-id="c46c0-142">Utilisez la propriété [**ProgramFiles64Folder**](programfiles64folder.md) dans la [table des répertoires](directory-table.md) des [packages Windows Installers 64 bits](64-bit-windows-installer-packages.md) pour spécifier les emplacements des répertoires contenant des composants 64 bits qui ne sont pas partagés entre les applications.</span><span class="sxs-lookup"><span data-stu-id="c46c0-142">Use the [**ProgramFiles64Folder**](programfiles64folder.md) property in the [Directory table](directory-table.md) of [64-bit Windows Installer Packages](64-bit-windows-installer-packages.md) to specify the locations of directories containing 64-bit components not shared across applications.</span></span> <span data-ttu-id="c46c0-143">Lorsqu’un utilisateur installe le package à double usage à l’aide du contexte par ordinateur, ces composants sont enregistrés dans le dossier Program Files.</span><span class="sxs-lookup"><span data-stu-id="c46c0-143">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Program Files folder.</span></span> <span data-ttu-id="c46c0-144">Tous les utilisateurs peuvent accéder aux composants de ces répertoires.</span><span class="sxs-lookup"><span data-stu-id="c46c0-144">The components in these directories can be accessed by all users.</span></span> <span data-ttu-id="c46c0-145">Lorsqu’un utilisateur installe le package à double usage sur Windows 7 ou Windows Server 2008 R2 à l’aide du contexte par utilisateur, ces composants sont enregistrés dans le dossier programmes de l’utilisateur actuel (par exemple, dans% LocalAppData% \\ Programs) et sont accessibles uniquement par cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-145">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Programs folder of the current user (for example at %LocalAppData%\\Programs) and can be accessed only by that user.</span></span> <span data-ttu-id="c46c0-146">Pour plus d’informations sur la création d’un package pour installer une application sur des systèmes d’exploitation 64 bits, consultez [Windows Installer sur les systèmes d’exploitation 64 bits](windows-installer-on-64-bit-operating-systems.md).</span><span class="sxs-lookup"><span data-stu-id="c46c0-146">For more information about authoring a package to install an application on 64-bit operating systems, see [Windows Installer on 64-bit Operating Systems](windows-installer-on-64-bit-operating-systems.md).</span></span>
-   <span data-ttu-id="c46c0-147">Utilisez la propriété [**CommonFiles64Folder**](commonfiles64folder.md) de la [table des répertoires](directory-table.md) des [packages Windows Installer bits 64](64-bit-windows-installer-packages.md) pour spécifier les emplacements des répertoires contenant des composants 64 bits partagés entre les applications.</span><span class="sxs-lookup"><span data-stu-id="c46c0-147">Use the [**CommonFiles64Folder**](commonfiles64folder.md) property in the [Directory table](directory-table.md) of [64-bit Windows Installer Packages](64-bit-windows-installer-packages.md) to specify the locations of directories containing 64-bit components shared across applications.</span></span> <span data-ttu-id="c46c0-148">Lorsqu’un utilisateur installe le package à double usage à l’aide du contexte par ordinateur, ces composants sont enregistrés dans le dossier Fichiers communs et sont accessibles à tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="c46c0-148">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Common Files folder and can be accessed by all users.</span></span> <span data-ttu-id="c46c0-149">Lorsqu’un utilisateur installe le package à double usage sur Windows 7 ou Windows Server 2008 R2 à l’aide du contexte par utilisateur, ces composants sont enregistrés dans le dossier commun de l’utilisateur actuel (par exemple, dans% LocalAppData% \\ Programs \\ Common) et sont accessibles uniquement par cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c46c0-149">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Common folder of the current user (for example at %LocalAppData%\\Programs\\Common) and can be accessed only by that user.</span></span>
-   <span data-ttu-id="c46c0-150">Utilisez les propriétés [**ProgramFilesFolder**](programfilesfolder.md) et [**CommonFilesFolder**](commonfilesfolder.md) de la [table Directory](directory-table.md) des [packages Windows Installer bits 64](64-bit-windows-installer-packages.md) pour spécifier l’emplacement des répertoires contenant des composants 32 bits.</span><span class="sxs-lookup"><span data-stu-id="c46c0-150">Use the [**ProgramFilesFolder**](programfilesfolder.md) and [**CommonFilesFolder**](commonfilesfolder.md) properties in the [Directory table](directory-table.md) of [64-bit Windows Installer Packages](64-bit-windows-installer-packages.md) to specify the location of directories containing 32-bit components.</span></span> <span data-ttu-id="c46c0-151">Utilisez des noms différents pour les versions 32 bits et 64 bits de tous les composants fournis avec le même nom, ou enregistrez les versions dans des dossiers différents.</span><span class="sxs-lookup"><span data-stu-id="c46c0-151">Use different names for the 32-bit and 64-bit versions of any components provided with the same name, or alternatively, save the versions in different folders.</span></span> <span data-ttu-id="c46c0-152">Par exemple, ajoutez des informations à la table Directory pour spécifier l’emplacement du répertoire contenant la version 32 bits sous la forme d’un nom d’application d’un nom d' \[ \] \\  \\ *application d’application* \\ x86 et l’emplacement du répertoire contenant la version 64 bits sous le nom d' \[ application Program64FilesFolder \] \\ *ISV Name* \\  \\ x64.</span><span class="sxs-lookup"><span data-stu-id="c46c0-152">For example, add information to the Directory table to specify the location of the directory containing the 32-bit version as \[ProgramFilesFolder\]\\*ISV Name*\\*Application Name*\\x86 and the location of the directory containing the 64-bit version as \[Program64FilesFolder\]\\*ISV Name*\\*Application Name*\\x64.</span></span> <span data-ttu-id="c46c0-153">Une installation par ordinateur enregistre ensuite la version 32 bits dans Program Files (x86) nom d’application nom d' \\  \\ *application* \\ x86 et enregistre la version 64 bits dans Program Files nom de l’application de nom \\ *ISV* \\  \\ x64.</span><span class="sxs-lookup"><span data-stu-id="c46c0-153">A per-machine installation then saves the 32-bit version in Program Files(x86)\\*ISV Name*\\*Application Name*\\x86 and saves the 64-bit version in Program Files\\*ISV Name*\\*Application Name*\\x64.</span></span> <span data-ttu-id="c46c0-154">Une installation par utilisateur enregistre la version 32 bits dans% LocalAppData% \\ Programs \\ *ISV Name* nom d' \\ *application* \\ x86 et installe la version 64 bits dans% LocalAppData% \\ Programs \\ *ISV Name* \\ *application name* \\ x64.</span><span class="sxs-lookup"><span data-stu-id="c46c0-154">A per-user installation saves the 32-bit version in %LocalAppData%\\Programs\\*ISV Name*\\*Application Name*\\x86 and installs the 64-bit version in %LocalAppData%\\Programs\\*ISV Name*\\*Application Name*\\x64.</span></span>
-   <span data-ttu-id="c46c0-155">Stocke les données de configuration par utilisateur pour l’application sous \\ les utilisateurs \\ *nom_utilisateur* \\ AppData.</span><span class="sxs-lookup"><span data-stu-id="c46c0-155">Store per-user configuration data for the application under \\Users\\*username*\\AppData.</span></span>
-   <span data-ttu-id="c46c0-156">Stocker les modèles et les fichiers générés par l’application dans des sous-dossiers sous \\ les \\ *noms d’utilisateur nom d’utilisateur*.</span><span class="sxs-lookup"><span data-stu-id="c46c0-156">Store templates and files generated by the application in subfolders under \\Users\\*username*.</span></span>
-   <span data-ttu-id="c46c0-157">Si votre application utilise des extensions d’environnement, vous devez utiliser les points d' [extensibilité de Shell](https://msdn.microsoft.com/library/bb762762.aspx) par utilisateur qui sont disponibles à partir de Windows 7 ou windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="c46c0-157">If your application uses shell extensions, you should use the per-user-capable [shell extensibility](https://msdn.microsoft.com/library/bb762762.aspx) points that are available beginning in Windows 7 or Windows Server 2008 R2.</span></span>
-   <span data-ttu-id="c46c0-158">N’utilisez pas d’actions personnalisées dans votre package qui requièrent des privilèges élevés pour s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="c46c0-158">Do not use custom actions in your package that require elevated privileges to run.</span></span> <span data-ttu-id="c46c0-159">La table [CustomAction](customaction-table.md) ne doit pas contenir d’actions personnalisées qui ont été marquées pour s’exécuter avec des privilèges élevés.</span><span class="sxs-lookup"><span data-stu-id="c46c0-159">The [CustomAction](customaction-table.md) table should contain no custom actions that have been marked to run with elevated privileges.</span></span> <span data-ttu-id="c46c0-160">Pour plus d’informations sur les actions personnalisées avec élévation de privilèges, consultez sécurité des actions [personnalisées](custom-action-security.md).</span><span class="sxs-lookup"><span data-stu-id="c46c0-160">For more information about elevated custom actions, see [Custom Action Security](custom-action-security.md).</span></span>
-   <span data-ttu-id="c46c0-161">N’écrivez pas dans les dossiers système globaux.</span><span class="sxs-lookup"><span data-stu-id="c46c0-161">Do not write in any global system folders.</span></span> <span data-ttu-id="c46c0-162">La table de [répertoire](directory-table.md) ne doit pas contenir de référence à l’une des propriétés de dossier système suivantes.</span><span class="sxs-lookup"><span data-stu-id="c46c0-162">The [Directory](directory-table.md) table should not contain a reference to any of the following system folder properties.</span></span>

    <dl>

[<span data-ttu-id="c46c0-163">**AdminToolsFolder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-163">**AdminToolsFolder**</span></span>](admintoolsfolder.md)  
    [<span data-ttu-id="c46c0-164">**CommonAppDataFolder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-164">**CommonAppDataFolder**</span></span>](commonappdatafolder.md)  
    [<span data-ttu-id="c46c0-165">**FontsFolder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-165">**FontsFolder**</span></span>](fontsfolder.md)  
    [<span data-ttu-id="c46c0-166">**System16Folder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-166">**System16Folder**</span></span>](system16folder.md)  
    [<span data-ttu-id="c46c0-167">**System64Folder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-167">**System64Folder**</span></span>](system64folder.md)  
    [<span data-ttu-id="c46c0-168">**SystemFolder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-168">**SystemFolder**</span></span>](systemfolder.md)  
    [<span data-ttu-id="c46c0-169">**TempFolder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-169">**TempFolder**</span></span>](tempfolder.md)  
    [<span data-ttu-id="c46c0-170">**WindowsFolder**</span><span class="sxs-lookup"><span data-stu-id="c46c0-170">**WindowsFolder**</span></span>](windowsfolder.md)  
    [<span data-ttu-id="c46c0-171">**WindowsVolume**</span><span class="sxs-lookup"><span data-stu-id="c46c0-171">**WindowsVolume**</span></span>](windowsvolume.md)  
    </dl>

-   <span data-ttu-id="c46c0-172">N’installez pas un assembly common language runtime dans le Global Assembly Cache (GAC). Pour plus d’informations sur l’installation d’assemblys dans le Global Assembly Cache, consultez [Ajout d’assemblys à un package](adding-assemblies-to-a-package.md) et [installation d’assemblys CLR (Common Language Runtime](installation-of-common-language-runtime-assemblies.md)).</span><span class="sxs-lookup"><span data-stu-id="c46c0-172">Do not install a common language runtime assembly into the global assembly cache (GAC.) For more information about installing assemblies to the global assembly cache, see [Adding Assemblies to a Package](adding-assemblies-to-a-package.md) and [Installation of Common Language Runtime Assemblies](installation-of-common-language-runtime-assemblies.md).</span></span>
-   <span data-ttu-id="c46c0-173">N’installez pas de sources de données ODBC.</span><span class="sxs-lookup"><span data-stu-id="c46c0-173">Do not install any ODBC data sources.</span></span> <span data-ttu-id="c46c0-174">N’utilisez pas la table [ODBCDataSource](odbcdatasource-table.md) pour installer une source de données.</span><span class="sxs-lookup"><span data-stu-id="c46c0-174">Do not use the [ODBCDataSource](odbcdatasource-table.md) table to install a data source.</span></span>
-   <span data-ttu-id="c46c0-175">N’installez aucun service.</span><span class="sxs-lookup"><span data-stu-id="c46c0-175">Do not install any services.</span></span> <span data-ttu-id="c46c0-176">N’utilisez pas la table [ServiceInstall](serviceinstall-table.md) pour installer un service.</span><span class="sxs-lookup"><span data-stu-id="c46c0-176">Do not use the [ServiceInstall](serviceinstall-table.md) table to install a service.</span></span>

## <a name="example"></a><span data-ttu-id="c46c0-177">Exemple</span><span class="sxs-lookup"><span data-stu-id="c46c0-177">Example</span></span>

<span data-ttu-id="c46c0-178">Un exemple de package à double usage est fourni dans les [composants SDK Windows pour Windows Installer les développeurs](platform-sdk-components-for-windows-installer-developers.md) comme PUASample1.msi de fichier.</span><span class="sxs-lookup"><span data-stu-id="c46c0-178">An example of a dual-purpose package is provided in the [Windows SDK Components for Windows Installer Developers](platform-sdk-components-for-windows-installer-developers.md) as the file PUASample1.msi.</span></span> <span data-ttu-id="c46c0-179">Si vous avez le kit de développement logiciel (SDK) actuel, vous avez accès à tous les outils et données nécessaires pour reproduire l’exemple de package d’installation.</span><span class="sxs-lookup"><span data-stu-id="c46c0-179">If you have the current SDK, you have access to all the tools and data necessary to reproduce the sample installation package.</span></span> <span data-ttu-id="c46c0-180">Pour plus d’informations sur cet exemple, consultez [exemple de création de package unique](single-package-authoring-example.md).</span><span class="sxs-lookup"><span data-stu-id="c46c0-180">For more information about this example, see [Single Package Authoring Example](single-package-authoring-example.md).</span></span>

 

 
