---
description: Pour valider une base de données, utilisez un outil de validation spécial pour fusionner un fichier. CUB contenant les évaluateurs de cohérence internes (ICEs) dans votre base de données, exécutez le CIEM et signalez les résultats.
ms.assetid: bdf38673-ee3d-47d8-ad6e-562cd5626918
title: Utilisation des évaluateurs de cohérence internes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 423e6dab453ae495dc6029b54eb039c8acc60f33
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106514187"
---
# <a name="using-internal-consistency-evaluators"></a><span data-ttu-id="c2a6d-103">Utilisation des évaluateurs de cohérence internes</span><span class="sxs-lookup"><span data-stu-id="c2a6d-103">Using Internal Consistency Evaluators</span></span>

<span data-ttu-id="c2a6d-104">Pour valider une base de données, utilisez un outil de validation spécial pour fusionner un fichier. CUB contenant les [évaluateurs de cohérence internes](internal-consistency-evaluators-ices.md) (ICES) dans votre base de données, exécutez le CIEM et signalez les résultats.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-104">To validate a database, use a special validation tool to merge a .cub file containing the [Internal Consistency Evaluators](internal-consistency-evaluators-ices.md) (ICEs) into your database, execute the ICEs, and report the results.</span></span> <span data-ttu-id="c2a6d-105">Plusieurs de ces outils sont fournis dans le kit de développement logiciel (SDK) Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-105">Several such tools are provided in the Microsoft Windows Software Development Kit (SDK).</span></span> <span data-ttu-id="c2a6d-106">Les environnements de création de fournisseurs tiers peuvent également intégrer le système de validation de glace dans leur environnement de création.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-106">Authoring environments from third-party vendors also may incorporate the ICE validation system into their authoring environment.</span></span> <span data-ttu-id="c2a6d-107">Il est également possible d’écrire votre propre outil pour effectuer la validation de la glace.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-107">It is also possible to write your own tool to perform ICE validation.</span></span> <span data-ttu-id="c2a6d-108">La plupart des outils de validation ICE fusionnent le fichier. CUB et votre base de données dans une troisième base de données temporaire.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-108">Most ICE validation tools merge the .cub file and your database into a third, temporary database.</span></span> <span data-ttu-id="c2a6d-109">Windows Installer affiche des avertissements, des erreurs, des informations de débogage et des erreurs d’API au fur et à mesure qu’il exécute chaque ICE dans le fichier. CUB.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-109">Windows Installer displays warnings, errors, debugging information, and API errors as it executes each ICE in the .cub file.</span></span> <span data-ttu-id="c2a6d-110">Quand le programme d’installation a terminé l’exécution du fichier ICEs, il ferme le fichier. msi, le fichier. CUB et la base de données temporaire sans enregistrer les modifications.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-110">When the installer finishes executing the ICEs it closes the .msi file, .cub file, and temporary database without saving any changes.</span></span> <span data-ttu-id="c2a6d-111">Le fichier. msi et le fichier. CUB restent inchangés par le test de validation.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-111">The .msi file and .cub file remain unchanged by the validation test.</span></span>

<span data-ttu-id="c2a6d-112">Les actions personnalisées ICE communiquent à l’utilisateur en appelant [**MsiProcessMessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) et en publiant un \_ message utilisateur INSTALLMESSAGE.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-112">ICE custom actions communicate to the user by calling [**MsiProcessMessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) and posting an INSTALLMESSAGE\_USER message.</span></span> <span data-ttu-id="c2a6d-113">Un message ICE retourne généralement des informations telles que les suivantes :</span><span class="sxs-lookup"><span data-stu-id="c2a6d-113">An ICE message commonly returns information such as the following:</span></span>

-   <span data-ttu-id="c2a6d-114">Nom de la glace ayant détecté une erreur</span><span class="sxs-lookup"><span data-stu-id="c2a6d-114">Name of the ICE that has found an error</span></span>
-   <span data-ttu-id="c2a6d-115">Date de création de la glace</span><span class="sxs-lookup"><span data-stu-id="c2a6d-115">Date the ICE was created</span></span>
-   <span data-ttu-id="c2a6d-116">Auteur de la glace</span><span class="sxs-lookup"><span data-stu-id="c2a6d-116">Author of the ICE</span></span>
-   <span data-ttu-id="c2a6d-117">Date de la dernière modification de la glace.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-117">Date the ICE was last modified.</span></span>
-   <span data-ttu-id="c2a6d-118">Description de l’erreur d’API provoquant l’échec de la glace</span><span class="sxs-lookup"><span data-stu-id="c2a6d-118">Description of the API error causing the ICE to fail</span></span>
-   <span data-ttu-id="c2a6d-119">Description de l’erreur</span><span class="sxs-lookup"><span data-stu-id="c2a6d-119">Description of the error</span></span>
-   <span data-ttu-id="c2a6d-120">Un avertissement à l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="c2a6d-120">A warning to the user</span></span>
-   <span data-ttu-id="c2a6d-121">Nom de la table de base de données contenant l’erreur ou l’avertissement</span><span class="sxs-lookup"><span data-stu-id="c2a6d-121">Name of the database table containing the error or warning</span></span>
-   <span data-ttu-id="c2a6d-122">Nom de la colonne de table contenant l’erreur ou l’avertissement</span><span class="sxs-lookup"><span data-stu-id="c2a6d-122">Name of the table column containing the error or warning</span></span>
-   <span data-ttu-id="c2a6d-123">Clés primaires de la table contenant l’erreur ou l’avertissement</span><span class="sxs-lookup"><span data-stu-id="c2a6d-123">Primary keys of the table containing the error or warning</span></span>
-   <span data-ttu-id="c2a6d-124">URL vers un fichier HTML donnant des suggestions de débogage</span><span class="sxs-lookup"><span data-stu-id="c2a6d-124">A URL to a HTML file giving debugging suggestions</span></span>
-   <span data-ttu-id="c2a6d-125">Chaîne qui peut contenir d’autres informations</span><span class="sxs-lookup"><span data-stu-id="c2a6d-125">A string that can contain other information</span></span>

<span data-ttu-id="c2a6d-126">Les auteurs des packages d’installation peuvent écrire des actions personnalisées ICE ou utiliser l’ensemble standard de ICEs inclus dans les fichiers. CUB fournis avec le kit de développement logiciel (SDK).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-126">Authors of installation packages can write ICE custom actions or use the standard set of ICEs included in the .cub files provided with the SDK.</span></span> <span data-ttu-id="c2a6d-127">Pour plus d’informations sur la façon d’écrire une glace, consultez [génération d’une glace](building-an-ice.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-127">For more information on how to write an ICE, see [Building an ICE](building-an-ice.md).</span></span>

<span data-ttu-id="c2a6d-128">Après avoir écrit le CIEM approprié pour la validation, un développeur doit rassembler les actions personnalisées dans une base de données. msi, appelée fichier. CUB, qui contient uniquement le CIEM et les tables requises.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-128">After writing the appropriate ICEs for validation, a developer must collect the custom actions together into an .msi database, called a .cub file, that contains only the ICEs and their required tables.</span></span> <span data-ttu-id="c2a6d-129">Un fichier. CUB ne peut pas être installé et est utilisé uniquement pour stocker et fournir l’accès aux actions personnalisées ICE.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-129">A .cub file cannot be installed and is used only to store and provide access to ICE custom actions.</span></span> <span data-ttu-id="c2a6d-130">Pour plus d’informations sur la création de fichiers. CUB, consultez [génération d’une base de données de glace](building-an-ice-database.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-130">For more information on making .cub files, see [Building an ICE Database](building-an-ice-database.md).</span></span> <span data-ttu-id="c2a6d-131">Les développeurs peuvent également valider leur package d’installation à l’aide du CIEM existant décrit dans [référence Ice](ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-131">Alternatively, developers can validate their installation package using the existing ICEs described in [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="c2a6d-132">Ces CIEM peuvent être obtenues à partir de fichiers. CUB standard fournis avec le kit de développement logiciel (SDK).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-132">These ICEs can be obtained from standard .cub files provided with the SDK.</span></span>

<span data-ttu-id="c2a6d-133">L’installation de l’éditeur de table de base de données Orca ou de l’outil de validation MSIVal2 fournit les fichiers logo. CUB, Darice. CUB et Mergemod. CUB.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-133">The installation of the database table editor Orca or the validation tool msival2 provides the Logo.cub, Darice.cub, and Mergemod.cub files.</span></span> <span data-ttu-id="c2a6d-134">Le jeu de fichiers CIEM dans le fichier logo. CUB est un sous-ensemble de ceux du fichier Darice. CUB.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-134">The set of ICEs in the Logo.cub file is a subset of those in the Darice.cub file.</span></span> <span data-ttu-id="c2a6d-135">Si votre package est validé à l’aide de darice. CUB, il passe avec logo. CUB.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-135">If your package passes validation using Darice.cub, it will pass with Logo.cub.</span></span> <span data-ttu-id="c2a6d-136">Mergemod. CUB contient un ensemble de ICEs utilisé pour valider les modules de fusion.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-136">Mergemod.cub contains a set of ICEs used to validate merge modules.</span></span> <span data-ttu-id="c2a6d-137">Pour plus d’informations, consultez Référence de la [glace du module de fusion](merge-module-ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-137">For more information, see [Merge Module ICE Reference](merge-module-ice-reference.md).</span></span>

<span data-ttu-id="c2a6d-138">**Pour valider un package d’installation**</span><span class="sxs-lookup"><span data-stu-id="c2a6d-138">**To validate an installation package**</span></span>

1.  <span data-ttu-id="c2a6d-139">Obtenir ou créer les actions personnalisées ICE appropriées.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-139">Obtain or author the appropriate ICE custom actions.</span></span> <span data-ttu-id="c2a6d-140">Vous pourrez peut-être utiliser un ou plusieurs des CIEM existants décrits dans la [référence Ice](ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-140">You may be able to use one or more of the existing ICEs described in the [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="c2a6d-141">Si votre validation requiert une ICE qui ne se trouve pas encore dans cette liste, vous pouvez créer une nouvelle ICE comme décrit dans [génération d’une glace](building-an-ice.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-141">If your validation requires an ICE not yet in this list, you can create a new ICE as described in [Building an ICE](building-an-ice.md).</span></span>
2.  <span data-ttu-id="c2a6d-142">Préparez une base de données ICE contenant toutes les actions personnalisées ICE.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-142">Prepare an ICE Database containing all the ICE custom actions.</span></span> <span data-ttu-id="c2a6d-143">Consultez la section [création d’une base de données Ice](building-an-ice-database.md) pour plus d’informations sur la préparation d’un fichier. CUB.</span><span class="sxs-lookup"><span data-stu-id="c2a6d-143">See the section [Building An ICE Database](building-an-ice-database.md) for information about preparing a .cub file.</span></span>
3.  <span data-ttu-id="c2a6d-144">Fournissez le fichier. CUB et le fichier. msi à un outil de validation de package, tel que [Orca.exe](orca-exe.md) ou [Msival2.exe](msival2-exe.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-144">Provide the .cub file and the .msi file to a package validation tool such as [Orca.exe](orca-exe.md) or [Msival2.exe](msival2-exe.md).</span></span>

<span data-ttu-id="c2a6d-145">Notez que les modules de fusion doivent être validés comme décrit dans [validation des modules de fusion](validating-merge-modules.md).</span><span class="sxs-lookup"><span data-stu-id="c2a6d-145">Note that merge modules should be validated as described in [Validating Merge Modules](validating-merge-modules.md).</span></span>

 

 



