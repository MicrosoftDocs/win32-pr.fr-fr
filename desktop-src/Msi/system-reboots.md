---
description: La Windows Installer peut déterminer à quel moment un redémarrage du système est nécessaire et invite automatiquement l’utilisateur à redémarrer à la fin de l’installation.
ms.assetid: 10117d2c-c2c8-456f-9fce-a89c2d69d3c1
title: Redémarrages du système
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9b32149bbcd43e284f45d7cabcba94a080be5262
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106529706"
---
# <a name="system-reboots"></a><span data-ttu-id="601a2-103">Redémarrages du système</span><span class="sxs-lookup"><span data-stu-id="601a2-103">System Reboots</span></span>

<span data-ttu-id="601a2-104">La Windows Installer peut déterminer à quel moment un redémarrage du système est nécessaire et invite automatiquement l’utilisateur à redémarrer à la fin de l’installation.</span><span class="sxs-lookup"><span data-stu-id="601a2-104">The Windows Installer can determine when a reboot of the system is necessary and automatically prompt the user to reboot at the end of the installation.</span></span> <span data-ttu-id="601a2-105">Par exemple, le programme d’installation demande automatiquement un redémarrage s’il doit remplacer les fichiers en cours d’utilisation pendant l’installation.</span><span class="sxs-lookup"><span data-stu-id="601a2-105">For example, the installer automatically prompts for a reboot if it needs to replace any files that are in use during the installation.</span></span>

<span data-ttu-id="601a2-106">Les applications qui utilisent [Windows Installer](windows-installer-portal.md) version 4,0 ou ultérieure pour l’installation et la maintenance utilisent automatiquement le [Gestionnaire de redémarrage](../rstmgr/restart-manager-portal.md) pour réduire les redémarrages du système.</span><span class="sxs-lookup"><span data-stu-id="601a2-106">Applications that use [Windows Installer](windows-installer-portal.md) version 4.0 or later for installation and servicing automatically use the [Restart Manager](../rstmgr/restart-manager-portal.md) to reduce system restarts.</span></span> <span data-ttu-id="601a2-107">Windows Installer version 4,0 ou ultérieure possède des propriétés et des stratégies qui permettent à l’auteur du package et aux administrateurs de contrôler l’interaction des Windows Installer avec le gestionnaire de redémarrage.</span><span class="sxs-lookup"><span data-stu-id="601a2-107">Windows Installer version 4.0 or later has properties and policies that enable the package author and administrators to control the interaction of Windows Installer with the Restart Manager.</span></span> <span data-ttu-id="601a2-108">Pour plus d’informations, consultez [utilisation de Windows Installer avec le gestionnaire de redémarrage](using-windows-installer-with-restart-manager.md).</span><span class="sxs-lookup"><span data-stu-id="601a2-108">For more information, see [Using Windows Installer with Restart Manager](using-windows-installer-with-restart-manager.md).</span></span>

<span data-ttu-id="601a2-109">Les auteurs du package d’installation peuvent planifier et supprimer les redémarrages à l’aide d’actions standard dans les tables de séquences et en définissant des propriétés.</span><span class="sxs-lookup"><span data-stu-id="601a2-109">Installation package authors can schedule and suppress reboots by using standard actions in the sequence tables and by setting properties.</span></span> <span data-ttu-id="601a2-110">Les actions et les propriétés suivantes sont utilisées pour gérer les redémarrages du système.</span><span class="sxs-lookup"><span data-stu-id="601a2-110">The following actions and properties are used to handle system reboots.</span></span>



| <span data-ttu-id="601a2-111">Action, boîte de dialogue ou propriété</span><span class="sxs-lookup"><span data-stu-id="601a2-111">Action, dialog box, or property</span></span>                                                | <span data-ttu-id="601a2-112">Brève description</span><span class="sxs-lookup"><span data-stu-id="601a2-112">Brief description</span></span>                                                                                                                                             |
|--------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="601a2-113">Action ForceReboot</span><span class="sxs-lookup"><span data-stu-id="601a2-113">ForceReboot Action</span></span>](forcereboot-action.md)                                   | <span data-ttu-id="601a2-114">Invite l’utilisateur à redémarrer pendant l’installation.</span><span class="sxs-lookup"><span data-stu-id="601a2-114">Prompts the user for a reboot during the installation.</span></span>                                                                                                        |
| [<span data-ttu-id="601a2-115">Action ScheduleReboot</span><span class="sxs-lookup"><span data-stu-id="601a2-115">ScheduleReboot Action</span></span>](schedulereboot-action.md)                             | <span data-ttu-id="601a2-116">Invite l’utilisateur à redémarrer à la fin de l’installation.</span><span class="sxs-lookup"><span data-stu-id="601a2-116">Prompts the user for a reboot at the end of the installation.</span></span>                                                                                                 |
| [<span data-ttu-id="601a2-117">**Reboot, propriété**</span><span class="sxs-lookup"><span data-stu-id="601a2-117">**REBOOT Property**</span></span>](reboot.md)                                              | <span data-ttu-id="601a2-118">Force ou supprime certaines invites automatiques pour un redémarrage du système.</span><span class="sxs-lookup"><span data-stu-id="601a2-118">Forces or suppresses certain automatic prompts for a system reboot.</span></span>                                                                                           |
| [<span data-ttu-id="601a2-119">**Propriété REBOOTPROMPT**</span><span class="sxs-lookup"><span data-stu-id="601a2-119">**REBOOTPROMPT Property**</span></span>](rebootprompt.md)                                  | <span data-ttu-id="601a2-120">Supprime l’affichage des invites pour les redémarrages de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="601a2-120">Suppresses the display of prompts for reboots to the user.</span></span> <span data-ttu-id="601a2-121">Tous les redémarrages nécessaires se produisent automatiquement.</span><span class="sxs-lookup"><span data-stu-id="601a2-121">Any needed reboots happen automatically.</span></span>                                                           |
| [<span data-ttu-id="601a2-122">**Propriété AFTERREBOOT**</span><span class="sxs-lookup"><span data-stu-id="601a2-122">**AFTERREBOOT Property**</span></span>](afterreboot.md)                                    | <span data-ttu-id="601a2-123">Couramment utilisé dans une condition imposée sur l’action ForceReboot.</span><span class="sxs-lookup"><span data-stu-id="601a2-123">Commonly used in a condition imposed on the ForceReboot Action.</span></span>                                                                                               |
| [<span data-ttu-id="601a2-124">Action InstallValidate</span><span class="sxs-lookup"><span data-stu-id="601a2-124">InstallValidate Action</span></span>](installvalidate-action.md)                           | <span data-ttu-id="601a2-125">Affiche la boîte de dialogue FilesInUse, si nécessaire, donnant aux utilisateurs la possibilité d’arrêter des processus et d’éviter certains redémarrages du système.</span><span class="sxs-lookup"><span data-stu-id="601a2-125">Displays the FilesInUse Dialog, if necessary, giving users the opportunity to shut down processes and avoid some system reboots.</span></span>                              |
| [<span data-ttu-id="601a2-126">Boîte de dialogue FilesInUse</span><span class="sxs-lookup"><span data-stu-id="601a2-126">FilesInUse Dialog</span></span>](filesinuse-dialog.md)                                     | <span data-ttu-id="601a2-127">Donne aux utilisateurs la possibilité d’arrêter des processus pour éviter certains redémarrages du système.</span><span class="sxs-lookup"><span data-stu-id="601a2-127">Gives users the opportunity to shut down processes to avoid some system reboots.</span></span>                                                                              |
| [<span data-ttu-id="601a2-128">Boîte de dialogue MsiRMFilesInUse</span><span class="sxs-lookup"><span data-stu-id="601a2-128">MsiRMFilesInUse Dialog</span></span>](msirmfilesinuse-dialog.md)                           | <span data-ttu-id="601a2-129">Donne aux utilisateurs la possibilité d’utiliser le [Gestionnaire de redémarrage](../rstmgr/restart-manager-portal.md) pour fermer et redémarrer les applications.</span><span class="sxs-lookup"><span data-stu-id="601a2-129">Gives users the option to use the [Restart Manager](../rstmgr/restart-manager-portal.md) to close and restart applications.</span></span> <span data-ttu-id="601a2-130">Disponible à partir de Windows Installer version 4,0.</span><span class="sxs-lookup"><span data-stu-id="601a2-130">Available beginning with Windows Installer version 4.0.</span></span> |
| [<span data-ttu-id="601a2-131">**Propriété ReplacedInUseFiles**</span><span class="sxs-lookup"><span data-stu-id="601a2-131">**ReplacedInUseFiles Property**</span></span>](replacedinusefiles.md)                      | <span data-ttu-id="601a2-132">Défini si le programme d’installation s’installe sur un fichier en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="601a2-132">Set if the installer installs over a file in use.</span></span> <span data-ttu-id="601a2-133">Cette propriété est utilisée par les actions personnalisées pour détecter qu’un redémarrage est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="601a2-133">This property is used by custom actions to detect that a reboot is required.</span></span>                                |
| [<span data-ttu-id="601a2-134">**MSIRESTARTMANAGERCONTROL**</span><span class="sxs-lookup"><span data-stu-id="601a2-134">**MSIRESTARTMANAGERCONTROL**</span></span>](msirestartmanagercontrol.md)                   | <span data-ttu-id="601a2-135">Propriété permettant de désactiver l’interaction Windows Installer avec le [Gestionnaire de redémarrage](../rstmgr/restart-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="601a2-135">Property to disable Windows Installer interaction with the [Restart Manager](../rstmgr/restart-manager-portal.md).</span></span> <span data-ttu-id="601a2-136">Disponible à partir de Windows Installer version 4,0.</span><span class="sxs-lookup"><span data-stu-id="601a2-136">Available beginning with Windows Installer version 4.0.</span></span>          |
| [<span data-ttu-id="601a2-137">**MSIDISABLERMRESTART**</span><span class="sxs-lookup"><span data-stu-id="601a2-137">**MSIDISABLERMRESTART**</span></span>](msidisablermrestart.md)                             | <span data-ttu-id="601a2-138">Spécifie la façon dont le [Gestionnaire de redémarrage](../rstmgr/restart-manager-portal.md) se ferme et redémarre les applications.</span><span class="sxs-lookup"><span data-stu-id="601a2-138">Specifies how the [Restart Manager](../rstmgr/restart-manager-portal.md) closes and restarts applications.</span></span> <span data-ttu-id="601a2-139">Disponible à partir de Windows Installer version 4,0.</span><span class="sxs-lookup"><span data-stu-id="601a2-139">Available beginning with Windows Installer version 4.0.</span></span>                  |
| [<span data-ttu-id="601a2-140">**MSIRMSHUTDOWN**</span><span class="sxs-lookup"><span data-stu-id="601a2-140">**MSIRMSHUTDOWN**</span></span>](msirmshutdown.md)                                         | <span data-ttu-id="601a2-141">Spécifie la façon dont le [Gestionnaire de redémarrage](../rstmgr/restart-manager-portal.md) se ferme et redémarre les applications.</span><span class="sxs-lookup"><span data-stu-id="601a2-141">Specifies how the [Restart Manager](../rstmgr/restart-manager-portal.md) closes and restarts applications.</span></span> <span data-ttu-id="601a2-142">Disponible à partir de Windows Installer version 4,0.</span><span class="sxs-lookup"><span data-stu-id="601a2-142">Available beginning with Windows Installer version 4.0.</span></span>                  |
| [<span data-ttu-id="601a2-143">**MsiSystemRebootPending**</span><span class="sxs-lookup"><span data-stu-id="601a2-143">**MsiSystemRebootPending**</span></span>](msisystemrebootpending.md)                       | <span data-ttu-id="601a2-144">Le programme d’installation définit cette propriété si le redémarrage du système d’exploitation est en attente.</span><span class="sxs-lookup"><span data-stu-id="601a2-144">Installer sets this property if a restart of the operating system is pending.</span></span> <span data-ttu-id="601a2-145">Disponible à partir de Windows Installer version 4,0.</span><span class="sxs-lookup"><span data-stu-id="601a2-145">Available beginning with Windows Installer version 4.0.</span></span>                         |
| [<span data-ttu-id="601a2-146">DisableAutomaticApplicationShutdown</span><span class="sxs-lookup"><span data-stu-id="601a2-146">DisableAutomaticApplicationShutdown</span></span>](disableautomaticapplicationshutdown.md) | <span data-ttu-id="601a2-147">Stratégie de désactivation de l’interaction Windows Installer avec le [Gestionnaire de redémarrage](../rstmgr/restart-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="601a2-147">Policy to disable Windows Installer interaction with [Restart Manager](../rstmgr/restart-manager-portal.md).</span></span> <span data-ttu-id="601a2-148">Disponible à partir de Windows Installer version 4,0.</span><span class="sxs-lookup"><span data-stu-id="601a2-148">Available beginning with Windows Installer version 4.0.</span></span>                |



 

<span data-ttu-id="601a2-149">ERREUR d' \_ installation \_ suspendre signifie que l’installation ne s’est pas terminée ou n’a pas été restaurée.</span><span class="sxs-lookup"><span data-stu-id="601a2-149">ERROR\_INSTALL\_SUSPEND means the installation did not complete or rollback.</span></span> <span data-ttu-id="601a2-150">L’installation doit reprendre avant qu’elle soit terminée.</span><span class="sxs-lookup"><span data-stu-id="601a2-150">The installation must resume before it is completed.</span></span> <span data-ttu-id="601a2-151">Le système devra peut-être être redémarré pour que l’installation puisse reprendre.</span><span class="sxs-lookup"><span data-stu-id="601a2-151">The system may need to be rebooted before the installation can resume.</span></span>

<span data-ttu-id="601a2-152">Le Windows Installer retourne le code d’erreur erreur d’installation de l' \_ \_ interruption lors de l’exécution de l' [action ForceReboot](forcereboot-action.md) .</span><span class="sxs-lookup"><span data-stu-id="601a2-152">The Windows Installer returns the error code ERROR\_INSTALL\_SUSPEND when the [ForceReboot action](forcereboot-action.md) is run.</span></span> <span data-ttu-id="601a2-153">Elle retourne \_ l’erreur \_ redémarrage de \_ la réussite obligatoire si un redémarrage est nécessaire avant l’exécution de l’application, et retourne une erreur de redémarrage \_ de la réussite \_ \_ lancée si le programme d’installation a démarré un redémarrage.</span><span class="sxs-lookup"><span data-stu-id="601a2-153">It returns ERROR\_SUCCESS\_REBOOT\_REQUIRED if a reboot is required before running the application, and it returns ERROR\_SUCCESS\_REBOOT\_INITIATED if the installer has actually started a reboot.</span></span> <span data-ttu-id="601a2-154">Notez que dans la mesure où les redémarrages sont asynchrones, le redémarrage peut réellement se produire avant le renvoi du code d’erreur.</span><span class="sxs-lookup"><span data-stu-id="601a2-154">Note that because reboots are asynchronous, the reboot may actually occur before the error code is returned.</span></span> <span data-ttu-id="601a2-155">Pour plus d’informations, consultez [codes d’erreur](error-codes.md).</span><span class="sxs-lookup"><span data-stu-id="601a2-155">For more information, see [Error Codes](error-codes.md).</span></span>

<span data-ttu-id="601a2-156">Les actions personnalisées peuvent forcer une demande de redémarrage à la fin d’une installation en appelant [**MsiSetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msisetmode).</span><span class="sxs-lookup"><span data-stu-id="601a2-156">Custom actions can force a prompt for reboot at the end of an installation by calling [**MsiSetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msisetmode).</span></span> <span data-ttu-id="601a2-157">Les actions personnalisées peuvent également rechercher une invite de redémarrage en attente en appelant [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode).</span><span class="sxs-lookup"><span data-stu-id="601a2-157">Custom actions can also check for a pending reboot prompt by calling [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode).</span></span>

## <a name="filesinuse-dialog"></a><span data-ttu-id="601a2-158">Boîte de dialogue FilesInUse</span><span class="sxs-lookup"><span data-stu-id="601a2-158">FilesInUse Dialog</span></span>

<span data-ttu-id="601a2-159">Le programme d’installation peut déterminer quand un redémarrage du système est nécessaire et demander à l’utilisateur une demande de redémarrage.</span><span class="sxs-lookup"><span data-stu-id="601a2-159">The installer can determine when a reboot of the system is necessary and prompt the user with a request to reboot.</span></span> <span data-ttu-id="601a2-160">En règle générale, un redémarrage du système est nécessaire car le programme d’installation tente d’installer un fichier en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="601a2-160">Commonly, a system reboot is required because the installer is attempting to install a file that is currently being used.</span></span> <span data-ttu-id="601a2-161">Si l' [action InstallValidate](installvalidate-action.md) détecte l’installation d’un fichier en cours d’utilisation, elle affiche la [boîte de dialogue FilesInUse](filesinuse-dialog.md).</span><span class="sxs-lookup"><span data-stu-id="601a2-161">If the [InstallValidate action](installvalidate-action.md) detects the installation of a file in use it displays the [FilesInUse Dialog](filesinuse-dialog.md).</span></span>

<span data-ttu-id="601a2-162">Si vous vous attendez à ce que le programme d’installation affiche un FilesInUseDialog, mais ce n’est pas le cas, cela peut être dû à l’une des raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="601a2-162">If you expect the installer to display a FilesInUseDialog, but it does not, this may be due to one of the following reasons:</span></span>

-   <span data-ttu-id="601a2-163">Les fichiers en cours d’utilisation ne sont pas des exécutables.</span><span class="sxs-lookup"><span data-stu-id="601a2-163">The files in use are not executables.</span></span>
-   <span data-ttu-id="601a2-164">Le programme d’installation n’essaie pas d’installer ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="601a2-164">The installer is not actually trying to install those files.</span></span>
-   <span data-ttu-id="601a2-165">Le processus qui contient ces fichiers est le processus appelant l’installation.</span><span class="sxs-lookup"><span data-stu-id="601a2-165">The process holding those files is the process invoking the installation.</span></span>
-   <span data-ttu-id="601a2-166">Le processus contenant ces fichiers est un processus qui n’a pas de fenêtre associée à un titre.</span><span class="sxs-lookup"><span data-stu-id="601a2-166">The process holding those files is one that does not have a window with a title associated with it.</span></span>

<span data-ttu-id="601a2-167">Pour plus d’informations, consultez [journalisation des demandes de redémarrage](logging-of-reboot-requests.md).</span><span class="sxs-lookup"><span data-stu-id="601a2-167">For more information, see [Logging of Reboot Requests](logging-of-reboot-requests.md).</span></span>

 

 
