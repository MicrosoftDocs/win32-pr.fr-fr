---
title: Séquence d’appel de l’API Supplier
description: En savoir plus sur la séquence d’appel de l’API Supplier. Consultez une vue d’ensemble de la séquence d’appel et affichez des ressources supplémentaires disponibles.
ms.assetid: 83276783-aee5-43ac-982d-1144df982a7d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 49c93afea6dbf4c3220bbeaec4f6278eb3d0b756
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "103941381"
---
# <a name="supplicant-api-call-sequence"></a><span data-ttu-id="70db0-104">Séquence d’appel de l’API Supplier</span><span class="sxs-lookup"><span data-stu-id="70db0-104">Supplicant API Call Sequence</span></span>

<span data-ttu-id="70db0-105">Cette rubrique fournit la séquence d’appel spécifique pour l’API du demandeur.</span><span class="sxs-lookup"><span data-stu-id="70db0-105">This topic provides the specific call sequence for the supplicant API.</span></span>

## <a name="supplicant-api-call-sequence-overview"></a><span data-ttu-id="70db0-106">Vue d’ensemble de la séquence d’appels d’API Supplier</span><span class="sxs-lookup"><span data-stu-id="70db0-106">Supplicant API Call Sequence Overview</span></span>

<span data-ttu-id="70db0-107">Lorsque le demandeur reçoit un paquet EAP d’un fournisseur, tel qu’un point d’accès, le workflow d’appel d’API demandeur suivant se produit généralement.</span><span class="sxs-lookup"><span data-stu-id="70db0-107">When the supplicant receives an EAP packet from a provider, such as an access point, the following supplicant API call flow typically occurs.</span></span>

-   <span data-ttu-id="70db0-108">L’application appelle [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) avec les données de configuration EAPHost et les données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="70db0-108">The application calls [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) with EAPHost configuration data and user data.</span></span> <span data-ttu-id="70db0-109">Un appel réussi retourne un handle de session de **\_ \_ handle de session EAP** .</span><span class="sxs-lookup"><span data-stu-id="70db0-109">A successful call returns an **EAP\_SESSION\_HANDLE** session handle.</span></span>
-   <span data-ttu-id="70db0-110">Chaque paquet reçu par le demandeur est traité par un appel à [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span><span class="sxs-lookup"><span data-stu-id="70db0-110">Each packet received by the supplicant is processed by a call to [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span></span> <span data-ttu-id="70db0-111">Le demandeur appelle ensuite la fonction correspondant au code d’action retourné par la fonction.</span><span class="sxs-lookup"><span data-stu-id="70db0-111">The supplicant then calls the function corresponding to the action code returned by the function.</span></span>
-   <span data-ttu-id="70db0-112">Si le code d’action est **EapHostPeerResponseSend**, le demandeur appelle [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) pour obtenir la réponse à envoyer à l’authentificateur.</span><span class="sxs-lookup"><span data-stu-id="70db0-112">If the action code is **EapHostPeerResponseSend**, then the supplicant calls [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) to obtain the response to be sent to the authenticator.</span></span>
-   <span data-ttu-id="70db0-113">Si, au cours de la session, le code d’action renvoyé au demandeur est **EapHostPeerResponseRespond**, il indique que les attributs EAP sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="70db0-113">If during the session, the action code returned to the supplicant is **EapHostPeerResponseRespond**, it indicates that EAP attributes are available.</span></span> <span data-ttu-id="70db0-114">Le demandeur appelle ensuite [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) pour les obtenir.</span><span class="sxs-lookup"><span data-stu-id="70db0-114">The supplicant then calls [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) to obtain them.</span></span> <span data-ttu-id="70db0-115">Ces attributs contiennent des données supplémentaires utilisées pendant le processus d’authentification.</span><span class="sxs-lookup"><span data-stu-id="70db0-115">These attributes contain supplemental data used during the authentication process.</span></span> <span data-ttu-id="70db0-116">Une fois que le demandeur a terminé le traitement des attributs, il appelle [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) qui met à jour les données.</span><span class="sxs-lookup"><span data-stu-id="70db0-116">After supplicant completes processing the attributes it calls [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) which updates the data.</span></span> <span data-ttu-id="70db0-117">Cette fonction retourne un code d’action qui détermine l’action suivante du demandeur.</span><span class="sxs-lookup"><span data-stu-id="70db0-117">This function returns an action code which determines the supplicant's next action.</span></span>
-   <span data-ttu-id="70db0-118">Si le code d’action est **EapHostPeerResponseInvokeUI** , le demandeur déclenche une boîte de dialogue d’interface utilisateur pour obtenir des données interactives de l’utilisateur, telles que des informations d’identification ou des informations d’identité.</span><span class="sxs-lookup"><span data-stu-id="70db0-118">If the action code is **EapHostPeerResponseInvokeUI** the supplicant raises a user interface dialog to obtain interactive data from the user, such as credentials or identity information.</span></span> <span data-ttu-id="70db0-119">Consultez interaction de l’utilisateur avec le processus d’appel d’API demandeur ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="70db0-119">See User Interaction with the Supplicant API Call Flow below.</span></span>
-   <span data-ttu-id="70db0-120">Si le code d’action est **EapHostPeerResponseResult**, cela signifie que les résultats de la session d’authentification sont disponibles pour le demandeur.</span><span class="sxs-lookup"><span data-stu-id="70db0-120">If the action code is **EapHostPeerResponseResult**, it indicates that the results of the authentication session are available to the supplicant.</span></span> <span data-ttu-id="70db0-121">Le demandeur appelle ensuite [**EapHostPeerGetResult**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresult) pour obtenir les résultats.</span><span class="sxs-lookup"><span data-stu-id="70db0-121">The supplicant then calls [**EapHostPeerGetResult**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresult) to obtain the results.</span></span> <span data-ttu-id="70db0-122">Que les résultats indiquent la réussite ou l’échec, le demandeur appelle [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession).</span><span class="sxs-lookup"><span data-stu-id="70db0-122">Regardless of whether the results indicate success or failure, the supplicant calls [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession).</span></span> <span data-ttu-id="70db0-123">En cas de défaillance, une nouvelle authentification peut être tentée en ouvrant une autre session avec EAPHost et en fournissant une nouvelle identité, ou en tentant à nouveau l’authentification avec l’identité d’origine.</span><span class="sxs-lookup"><span data-stu-id="70db0-123">In the case of failure, re-authentication can be attempted by opening another session with EAPHost and providing a new identity, or attempting authentication with the original identity again.</span></span>

## <a name="user-interaction-with-the-supplicant-api-call-flow"></a><span data-ttu-id="70db0-124">Interaction de l’utilisateur avec le workflow d’appel d’API du demandeur</span><span class="sxs-lookup"><span data-stu-id="70db0-124">User Interaction with the Supplicant API Call Flow</span></span>

<span data-ttu-id="70db0-125">Dans certains cas, le demandeur doit obtenir des informations auprès de l’utilisateur pour poursuivre le processus d’authentification.</span><span class="sxs-lookup"><span data-stu-id="70db0-125">In certain cases, the supplicant needs to obtain information from the user to continue the authentication process.</span></span>

<span data-ttu-id="70db0-126">La liste suivante illustre la séquence d’appels sur le demandeur et le processus d’interface utilisateur EAPHost nécessaire pour activer l’entrée interactive.</span><span class="sxs-lookup"><span data-stu-id="70db0-126">The following list demonstrates the sequence of calls on the supplicant and EAPHost UI process necessary to enable interactive input.</span></span>

1.  <span data-ttu-id="70db0-127">Le demandeur obtient le contexte de l’interface utilisateur actuel en appelant [**EapHostPeerGetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetuicontext).</span><span class="sxs-lookup"><span data-stu-id="70db0-127">The supplicant obtains the current user interface context by calling [**EapHostPeerGetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetuicontext).</span></span>
2.  <span data-ttu-id="70db0-128">Le demandeur envoie ensuite les données de contexte de l’interface utilisateur au processus de l’interface utilisateur du demandeur.</span><span class="sxs-lookup"><span data-stu-id="70db0-128">The supplicant then sends the UI context data to the supplicant UI process.</span></span>
    > [!Note]  
    > <span data-ttu-id="70db0-129">Le processus d’interface utilisateur, qui collecte généralement l’interface utilisateur ou gère l’interface utilisateur interactive, est distinct du processus du demandeur.</span><span class="sxs-lookup"><span data-stu-id="70db0-129">The UI process, which typically collects UI or handles interactive UI, is separate from the supplicant process.</span></span> <span data-ttu-id="70db0-130">La séparation des deux processus n’est pas une exigence d’EAPHost, mais cela présente l’avantage de permettre au processus de l’interface utilisateur d’interagir avec le bureau.</span><span class="sxs-lookup"><span data-stu-id="70db0-130">Separating the two processes is not a requirement of EAPHost, but doing so has the advantage of allowing the UI process to interact with the desktop.</span></span>

     

3.  <span data-ttu-id="70db0-131">Si le demandeur souhaite afficher l’interface utilisateur en soi, il appelle la fonction [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) pour obtenir les champs d’entrée des composants de l’interface utilisateur interactifs à déclencher.</span><span class="sxs-lookup"><span data-stu-id="70db0-131">If the supplicant wants to render the UI by itself then it calls the [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) function to obtain the input fields for interactive UI components to be raised.</span></span> <span data-ttu-id="70db0-132">Dans le cas contraire, il suit le modèle traditionnel d’appel de l’interface utilisateur interactive de la méthode en appelant [ **EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui)</span><span class="sxs-lookup"><span data-stu-id="70db0-132">Otherwise, it follows the traditional model of invoking method interactive UI by calling [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui)</span></span>
    > [!Note]  
    > <span data-ttu-id="70db0-133">Si [**l' \_ opération EAP E \_ EAPHOST \_ méthode \_ \_ non \_ prise en charge**](eap-related-error-and-information-constants.md) est retournée, le demandeur doit suivre le modèle traditionnel d’appel de l’interface utilisateur interactive de la méthode en appelant [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui).</span><span class="sxs-lookup"><span data-stu-id="70db0-133">If [**EAP\_E\_EAPHOST\_METHOD\_OPERATION\_NOT\_SUPPORTED**](eap-related-error-and-information-constants.md) is returned, the supplicant must follow the traditional model of invoking method interactive UI by calling [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui).</span></span> <span data-ttu-id="70db0-134">En cas d’erreur, [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) retourne un code de retour autre que **null**.</span><span class="sxs-lookup"><span data-stu-id="70db0-134">If there is an error, [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) will return a return code other than **NULL**.</span></span>

     

4.  <span data-ttu-id="70db0-135">Si le demandeur appelle [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) ou [**EaphostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui) , le processus d’interface utilisateur passe les données de contexte existantes et charge Eappcfg.dll.</span><span class="sxs-lookup"><span data-stu-id="70db0-135">Whether the supplicant calls [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) or [**EaphostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui) the UI process passes the existing context data and loads Eappcfg.dll.</span></span> <span data-ttu-id="70db0-136">L’interface utilisateur appropriée est déclenchée pour collecter les nouvelles données.</span><span class="sxs-lookup"><span data-stu-id="70db0-136">Appropriate UI is raised to collect the new data.</span></span> <span data-ttu-id="70db0-137">Les nouvelles données de contexte d’interface utilisateur, qui peuvent désormais contenir une entrée d’utilisateur, sont copiées et les anciennes données de contexte sont libérées avec un appel à [**EapPeerFreeMemory**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerfreememory).</span><span class="sxs-lookup"><span data-stu-id="70db0-137">The new UI context data, which may now contain user input, is copied, and the old context data is released with a call to [**EapPeerFreeMemory**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerfreememory).</span></span>
5.  <span data-ttu-id="70db0-138">Le processus d’interface utilisateur retourne les nouvelles données de contexte au demandeur, qui appelle [**EapHostPeerSetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetuicontext) pour le définir.</span><span class="sxs-lookup"><span data-stu-id="70db0-138">The UI process returns the new context data to the supplicant, which calls [**EapHostPeerSetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetuicontext) to set it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="70db0-139">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="70db0-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="70db0-140">Séquence d’appel de l’API de méthode homologue</span><span class="sxs-lookup"><span data-stu-id="70db0-140">Peer Method API Call Sequence</span></span>](peer-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="70db0-141">Séquence d’appel de l’API de méthode d’authentificateur</span><span class="sxs-lookup"><span data-stu-id="70db0-141">Authenticator Method API Call Sequence</span></span>](authenticator-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="70db0-142">Séquence d’appel EAPHost</span><span class="sxs-lookup"><span data-stu-id="70db0-142">EAPHost Call Sequence</span></span>](about-eaphost-call-sequences.md)
</dt> <dt>

[<span data-ttu-id="70db0-143">Demandeurs EAPHost</span><span class="sxs-lookup"><span data-stu-id="70db0-143">EAPHost Supplicants</span></span>](eaphost-supplicants.md)
</dt> </dl>

 

 




