---
title: Vue d’ensemble du storyboard
description: Cette présentation se concentre sur la façon dont les transitions et les storyboards sont utilisés dans les animations Windows.
ms.assetid: d37718ac-0256-4a24-a26c-d29173593be0
keywords:
- Animation Windows Animation Windows, vue d’ensemble du storyboard
- Animation des storyboards Windows, Description
- transitions Windows animation, Description
- transitions Windows animation, personnalisé
- interpolateurs Windows animation, Description
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 58210ae98f6d3a96c554276466ad72b3364d72a1
ms.sourcegitcommit: 8ebcf6cd36f67f8bcf78e76ae8923d65b8995c8a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/05/2021
ms.locfileid: "111524283"
---
# <a name="storyboard-overview"></a><span data-ttu-id="a7807-108">Vue d’ensemble du storyboard</span><span class="sxs-lookup"><span data-stu-id="a7807-108">Storyboard Overview</span></span>

<span data-ttu-id="a7807-109">Cette présentation se concentre sur la façon dont les transitions et les storyboards sont utilisés dans les animations Windows.</span><span class="sxs-lookup"><span data-stu-id="a7807-109">This overview focuses on how transitions and storyboards are used in Windows Animation.</span></span> <span data-ttu-id="a7807-110">Pour obtenir une vue d’ensemble des composants de Windows animation, consultez [vue d’ensemble des animations Windows](scenic-animation-api-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a7807-110">For an overview of the components of Windows Animation, see [Windows Animation Overview](scenic-animation-api-overview.md).</span></span>

<span data-ttu-id="a7807-111">Cette rubrique contient les sections suivantes :</span><span class="sxs-lookup"><span data-stu-id="a7807-111">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="a7807-112">Transitions</span><span class="sxs-lookup"><span data-stu-id="a7807-112">Transitions</span></span>](#custom-transitions)
    -   [<span data-ttu-id="a7807-113">Bibliothèque de transitions</span><span class="sxs-lookup"><span data-stu-id="a7807-113">Transition Library</span></span>](#transition-library)
    -   [<span data-ttu-id="a7807-114">Transitions personnalisées</span><span class="sxs-lookup"><span data-stu-id="a7807-114">Custom Transitions</span></span>](#custom-transitions)
-   [<span data-ttu-id="a7807-115">Storyboards</span><span class="sxs-lookup"><span data-stu-id="a7807-115">Storyboards</span></span>](#storyboards)
    -   [<span data-ttu-id="a7807-116">Création d’un Storyboard simple</span><span class="sxs-lookup"><span data-stu-id="a7807-116">Building a Simple Storyboard</span></span>](#building-a-simple-storyboard)
    -   [<span data-ttu-id="a7807-117">Utilisation d’une durée de Context-Sensitive</span><span class="sxs-lookup"><span data-stu-id="a7807-117">Using a Context-Sensitive Duration</span></span>](#using-a-context-sensitive-duration)
    -   [<span data-ttu-id="a7807-118">Création d’un Storyboard plus complexe</span><span class="sxs-lookup"><span data-stu-id="a7807-118">Building a More Complex Storyboard</span></span>](#building-a-more-complex-storyboard)
    -   [<span data-ttu-id="a7807-119">Utilisation d’images clés</span><span class="sxs-lookup"><span data-stu-id="a7807-119">Using Keyframes</span></span>](#using-keyframes)
    -   [<span data-ttu-id="a7807-120">Conserver les variables</span><span class="sxs-lookup"><span data-stu-id="a7807-120">Holding Variables</span></span>](#holding-variables)
    -   [<span data-ttu-id="a7807-121">Planification d’une table de montage séquentiel</span><span class="sxs-lookup"><span data-stu-id="a7807-121">Scheduling a Storyboard</span></span>](#scheduling-a-storyboard)
-   [<span data-ttu-id="a7807-122">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="a7807-122">Related topics</span></span>](#related-topics)

## <a name="transitions"></a><span data-ttu-id="a7807-123">Transitions</span><span class="sxs-lookup"><span data-stu-id="a7807-123">Transitions</span></span>

<span data-ttu-id="a7807-124">Une transition définit la manière dont une variable d’animation unique change sur un intervalle de temps particulier.</span><span class="sxs-lookup"><span data-stu-id="a7807-124">A transition defines how a single animation variable changes over a particular time interval.</span></span> <span data-ttu-id="a7807-125">Windows animation comprend une bibliothèque de transitions courantes que les développeurs peuvent appliquer à une ou plusieurs variables d’animation.</span><span class="sxs-lookup"><span data-stu-id="a7807-125">Windows Animation includes a library of common transitions that developers can apply to one or more animation variables.</span></span> <span data-ttu-id="a7807-126">Différents genres de transitions ont des jeux de paramètres différents, qui peuvent inclure la valeur de la variable lorsque la transition se termine, la durée de la transition ou des quantités uniques à la fonction mathématique sous-jacente, telles que l’accélération ou la plage d’oscillation.</span><span class="sxs-lookup"><span data-stu-id="a7807-126">Different kinds of transitions have different sets of parameters, which may include the value of the variable when the transition completes, the duration of the transition, or quantities unique to the underlying mathematical function, such as acceleration or range of oscillation.</span></span>

<span data-ttu-id="a7807-127">Toutes les transitions partagent deux paramètres implicites : la valeur initiale et la vélocité initiale (pente) de la fonction mathématique.</span><span class="sxs-lookup"><span data-stu-id="a7807-127">All transitions share two implicit parameters: the initial value and initial velocity (slope) of the mathematical function.</span></span> <span data-ttu-id="a7807-128">Elles peuvent être spécifiées explicitement par l’application, mais elles sont généralement définies par le gestionnaire d’animations sur la valeur et la rapidité de la variable d’animation au début de la transition.</span><span class="sxs-lookup"><span data-stu-id="a7807-128">These may be specified explicitly by the application, but are typically set by the animation manager to the value and velocity of the animation variable when the transition begins.</span></span>

-   [<span data-ttu-id="a7807-129">Bibliothèque de transitions</span><span class="sxs-lookup"><span data-stu-id="a7807-129">Transition Library</span></span>](#transition-library)
-   [<span data-ttu-id="a7807-130">Transitions personnalisées</span><span class="sxs-lookup"><span data-stu-id="a7807-130">Custom Transitions</span></span>](#custom-transitions)

### <a name="transition-library"></a><span data-ttu-id="a7807-131">Bibliothèque de transitions</span><span class="sxs-lookup"><span data-stu-id="a7807-131">Transition Library</span></span>

<span data-ttu-id="a7807-132">Les transitions suivantes sont actuellement fournies par la bibliothèque de transition.</span><span class="sxs-lookup"><span data-stu-id="a7807-132">The following transitions are currently provided by the transition library.</span></span> <span data-ttu-id="a7807-133">Si une application requiert un effet qui ne peut pas être spécifié à l’aide de la bibliothèque de transition, les développeurs peuvent créer d’autres genres de transitions en implémentant un interpolateur personnalisé pour l’application, ou en utilisant une bibliothèque de transition d’un tiers.</span><span class="sxs-lookup"><span data-stu-id="a7807-133">If an application requires an effect that cannot be specified by using the transition library, developers can create other kinds of transitions by implementing a custom interpolator for the application, or using a transition library from a third party.</span></span>



| <span data-ttu-id="a7807-134">Nom de la transition</span><span class="sxs-lookup"><span data-stu-id="a7807-134">Transition Name</span></span>                        | <span data-ttu-id="a7807-135">Description</span><span class="sxs-lookup"><span data-stu-id="a7807-135">Description</span></span>                                                                                                                                                                                          |
|----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a7807-136">accélérer la décélération</span><span class="sxs-lookup"><span data-stu-id="a7807-136">accelerate-decelerate</span></span><br/>       | <span data-ttu-id="a7807-137">La variable d’animation accélère, puis ralentit sur une durée donnée.</span><span class="sxs-lookup"><span data-stu-id="a7807-137">The animation variable speeds up and then slows down over a given duration.</span></span><br/>                                                                                                               |
| <span data-ttu-id="a7807-138">constant</span><span class="sxs-lookup"><span data-stu-id="a7807-138">constant</span></span><br/>                    | <span data-ttu-id="a7807-139">La variable d’animation reste à sa valeur initiale tout au long de la transition.</span><span class="sxs-lookup"><span data-stu-id="a7807-139">The animation variable remains at its initial value throughout the transition.</span></span><br/>                                                                                                            |
| <span data-ttu-id="a7807-140">cubiques</span><span class="sxs-lookup"><span data-stu-id="a7807-140">cubic</span></span><br/>                       | <span data-ttu-id="a7807-141">La variable d’animation passe de sa valeur initiale à une valeur finale spécifiée, avec une vélocité finale spécifiée, sur une durée donnée.</span><span class="sxs-lookup"><span data-stu-id="a7807-141">The animation variable changes from its initial value to a specified final value, with a specified final velocity, over a given duration.</span></span><br/>                                                 |
| <span data-ttu-id="a7807-142">discrètes</span><span class="sxs-lookup"><span data-stu-id="a7807-142">discrete</span></span><br/>                    | <span data-ttu-id="a7807-143">La variable d’animation reste à sa valeur initiale pour un délai spécifié, puis passe instantanément à une valeur finale spécifiée et reste à cette valeur pour une durée de conservation donnée.</span><span class="sxs-lookup"><span data-stu-id="a7807-143">The animation variable remains at its initial value for a specified delay time, then switches instantaneously to a specified final value and remains at that value for a given hold time.</span></span><br/> |
| <span data-ttu-id="a7807-144">quasi</span><span class="sxs-lookup"><span data-stu-id="a7807-144">instantaneous</span></span><br/>               | <span data-ttu-id="a7807-145">La variable d’animation change instantanément de sa valeur actuelle en une valeur finale spécifiée.</span><span class="sxs-lookup"><span data-stu-id="a7807-145">The animation variable changes instantly from its current value to a specified final value.</span></span><br/>                                                                                               |
| <span data-ttu-id="a7807-146">linear</span><span class="sxs-lookup"><span data-stu-id="a7807-146">linear</span></span><br/>                      | <span data-ttu-id="a7807-147">La variable d’animation passe de façon linéaire de sa valeur initiale à une valeur finale spécifiée sur une durée donnée.</span><span class="sxs-lookup"><span data-stu-id="a7807-147">The animation variable transitions linearly from its initial value to a specified final value over a given duration.</span></span><br/>                                                                      |
| <span data-ttu-id="a7807-148">linéaire à partir de la vitesse</span><span class="sxs-lookup"><span data-stu-id="a7807-148">linear from speed</span></span><br/>           | <span data-ttu-id="a7807-149">La variable d’animation passe de façon linéaire de sa valeur initiale à une valeur finale spécifiée avec une vitesse spécifiée.</span><span class="sxs-lookup"><span data-stu-id="a7807-149">The animation variable transitions linearly from its initial value to a specified final value with a specified speed.</span></span><br/>                                                                     |
| <span data-ttu-id="a7807-150">parabolique de l’accélération</span><span class="sxs-lookup"><span data-stu-id="a7807-150">parabolic from acceleration</span></span><br/> | <span data-ttu-id="a7807-151">La variable d’animation passe de sa valeur initiale à une valeur finale spécifiée, avec une vélocité finale spécifiée, en modifiant sa vélocité avec une accélération spécifiée.</span><span class="sxs-lookup"><span data-stu-id="a7807-151">The animation variable transitions from its initial value to a specified final value, with a specified final velocity, changing its velocity with a specified acceleration.</span></span><br/>               |
| <span data-ttu-id="a7807-152">inversion</span><span class="sxs-lookup"><span data-stu-id="a7807-152">reversal</span></span><br/>                    | <span data-ttu-id="a7807-153">La variable change de direction sur une durée donnée.</span><span class="sxs-lookup"><span data-stu-id="a7807-153">The variable changes direction over a given duration.</span></span> <span data-ttu-id="a7807-154">La valeur finale sera la même que la valeur initiale et la vélocité finale sera la valeur négative de la rapidité initiale.</span><span class="sxs-lookup"><span data-stu-id="a7807-154">The final value will be the same as the initial value and the final velocity will be the negative of the initial velocity.</span></span><br/>          |
| <span data-ttu-id="a7807-155">sinusoïdal de la plage</span><span class="sxs-lookup"><span data-stu-id="a7807-155">sinusoidal from range</span></span><br/>       | <span data-ttu-id="a7807-156">La variable oscille dans une plage de valeurs donnée, avec une période spécifiée d’oscillation, pour une durée donnée.</span><span class="sxs-lookup"><span data-stu-id="a7807-156">The variable oscillates within a given range of values, with a specified period of oscillation, for a given duration.</span></span><br/>                                                                     |
| <span data-ttu-id="a7807-157">sinusoïde à partir de la vélocité</span><span class="sxs-lookup"><span data-stu-id="a7807-157">sinusoidal from velocity</span></span><br/>    | <span data-ttu-id="a7807-158">La variable oscille avec une période spécifiée d’oscillation, pour une durée donnée.</span><span class="sxs-lookup"><span data-stu-id="a7807-158">The variable oscillates with a specified period of oscillation, for a given duration.</span></span> <span data-ttu-id="a7807-159">L’amplitude de l’oscillation est déterminée par la rapidité initiale de la variable.</span><span class="sxs-lookup"><span data-stu-id="a7807-159">The amplitude of oscillation is determined by the variable's initial velocity.</span></span><br/>                      |
| <span data-ttu-id="a7807-160">arrêt en douceur</span><span class="sxs-lookup"><span data-stu-id="a7807-160">smooth stop</span></span><br/>                 | <span data-ttu-id="a7807-161">La variable d’animation arrive à un arrêt sans heurts à une valeur finale spécifiée, dans une durée maximale.</span><span class="sxs-lookup"><span data-stu-id="a7807-161">The animation variable comes to a smooth stop at a specified final value, within a maximum duration of time.</span></span><br/>                                                                              |



 

<span data-ttu-id="a7807-162">Le tableau suivant contient des illustrations pour chacune de ces transitions.</span><span class="sxs-lookup"><span data-stu-id="a7807-162">The following table contains illustrations for each of these transitions.</span></span>



|    <span data-ttu-id="a7807-163">Illustrations</span><span class="sxs-lookup"><span data-stu-id="a7807-163">Illustrations</span></span>                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ![illustration d’une transition instantanée](images/instantaneoustransition.png)  ![illustration d’une transition constante](images/constanttransition.png)  ![illustration d’une transition linéaire](images/lineartransition.png)  ![illustration d’une transition lineat à partir d’une vitesse](images/lineartransitionfromspeed.png)  ![illustration d’une transition discrète](images/discretetransition.png) |
| ![illustration d’une transition parabolique de l’accélération](images/parabolictransitionfromacceleration.png)  ![illustration d’une transition cubique](images/cubictransition.png)  ![illustration d’une transition d’arrêt lisse](images/smoothstoptransition.png)                                                                                                                                       |
| ![illustration d’une transition de contrepassation](images/reversaltransition.png)  ![illustration d’une transition sinusoïdale de la vélocité](images/sinusolidaltransitionfromvelocity.png)  ![illustration d’une transition sinusoïdale à partir d’une plage](images/sinusolidaltransitionfromrange.png)                                                                                                                  |
| ![illustration des transitions de accellerate et de décélération](images/acceleratedeceleratetransition.png)                                                                                                                                                                                                                                                                                               |



 

### <a name="custom-transitions"></a><span data-ttu-id="a7807-176">Transitions personnalisées</span><span class="sxs-lookup"><span data-stu-id="a7807-176">Custom Transitions</span></span>

<span data-ttu-id="a7807-177">Un *interpolateur* définit la fonction mathématique qui détermine la manière dont une variable d’animation change au fil du temps, au fur et à mesure qu’elle progresse de sa valeur initiale à une valeur finale.</span><span class="sxs-lookup"><span data-stu-id="a7807-177">An *interpolator* defines the mathematical function that determines how an animation variable changes over time as it progresses from its initial value to a final value.</span></span> <span data-ttu-id="a7807-178">Chaque transition dans la bibliothèque de transition a un objet d’interpolation associé qui est fourni par le système et implémente la fonction d’interpolation.</span><span class="sxs-lookup"><span data-stu-id="a7807-178">Each transition in the transition library has an associated interpolator object that is provided by the system and implements the interpolator function.</span></span> <span data-ttu-id="a7807-179">Si une application requiert un effet qui ne peut pas être spécifié à l’aide de la bibliothèque de transition, elle peut implémenter une ou plusieurs transitions personnalisées en implémentant un objet d’interpolation pour chaque nouvelle transition.</span><span class="sxs-lookup"><span data-stu-id="a7807-179">If an application requires an effect that cannot be specified using the transition library, it can implement one or more custom transitions by implementing an interpolator object for each new transition.</span></span> <span data-ttu-id="a7807-180">Les objets de l’interpolateur ne peuvent pas être utilisés directement par les applications et doivent être encapsulés dans une transition associée.</span><span class="sxs-lookup"><span data-stu-id="a7807-180">Interpolator objects cannot be used directly by applications and must instead be wrapped in an associated transition.</span></span> <span data-ttu-id="a7807-181">Une *fabrique de transition* est utilisée pour générer des transitions à partir d’un objet d’interpolation.</span><span class="sxs-lookup"><span data-stu-id="a7807-181">A *transition factory* is used to generate transitions from an interpolator object.</span></span> <span data-ttu-id="a7807-182">Pour plus d’informations, consultez [**IUIAnimationInterpolator**](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationinterpolator) et [**IUIAnimationTransitionFactory**](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationtransitionfactory) .</span><span class="sxs-lookup"><span data-stu-id="a7807-182">See [**IUIAnimationInterpolator**](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationinterpolator) and [**IUIAnimationTransitionFactory**](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationtransitionfactory) for more details.</span></span>

<span data-ttu-id="a7807-183">Notez que la plupart des applications auront toutes les transitions dont elles ont besoin à l’aide de la bibliothèque de transition et, par conséquent, n’auront pas besoin d’implémenter un interpolateur.</span><span class="sxs-lookup"><span data-stu-id="a7807-183">Note that most applications will have all of the transitions they need by using the transition library, and therefore would not need to implement an interpolator.</span></span>

## <a name="storyboards"></a><span data-ttu-id="a7807-184">Storyboards</span><span class="sxs-lookup"><span data-stu-id="a7807-184">Storyboards</span></span>

<span data-ttu-id="a7807-185">Une table de montage séquentiel est une collection de transitions appliquées à une ou plusieurs variables d’animation dans le temps.</span><span class="sxs-lookup"><span data-stu-id="a7807-185">A storyboard is a collection of transitions applied to one or more animation variables over time.</span></span> <span data-ttu-id="a7807-186">Les transitions dans une table de montage séquentiel sont garanties pour rester synchronisées les unes par rapport aux autres, et la table de montage séquentiel est planifiée ou annulée en tant qu’unité.</span><span class="sxs-lookup"><span data-stu-id="a7807-186">The transitions in a storyboard are guaranteed to remain synchronized relative to one another, and the storyboard is scheduled or canceled as a unit.</span></span> <span data-ttu-id="a7807-187">Après avoir créé les transitions souhaitées, une application crée une table de montage séquentiel à l’aide du gestionnaire d’animations, ajoute les transitions à la table de montage séquentiel, configure le Storyboard de manière appropriée et planifie son exécution le plus rapidement possible.</span><span class="sxs-lookup"><span data-stu-id="a7807-187">After creating the desired transitions, an application creates a storyboard using the animation manager, adds the transitions to the storyboard, configures the storyboard appropriately, and schedules it to play as soon as possible.</span></span> <span data-ttu-id="a7807-188">Le gestionnaire d’animations détermine l’heure de début réelle de la table de montage séquentiel, car il peut y avoir des conflits avec d’autres storyboards qui animent actuellement les mêmes variables.</span><span class="sxs-lookup"><span data-stu-id="a7807-188">The animation manager determines the storyboard's actual start time, because there may be contention with other storyboards currently animating the same variables.</span></span>

<span data-ttu-id="a7807-189">La durée globale d’une table de montage séquentiel dépend des durées des transitions au sein de la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-189">The overall duration of a storyboard depends on the durations of the transitions within the storyboard.</span></span> <span data-ttu-id="a7807-190">La durée d’une transition n’a pas besoin d’être fixe ; Il peut être déterminé par la valeur et la vélocité des variables animées au début de la transition.</span><span class="sxs-lookup"><span data-stu-id="a7807-190">The duration of a transition need not be fixed; it can be determined by the value and velocity of the animated variables when the transition begins.</span></span> <span data-ttu-id="a7807-191">Ainsi, la durée d’une table de montage séquentiel peut également dépendre de l’état des variables qu’elle anime.</span><span class="sxs-lookup"><span data-stu-id="a7807-191">So, the duration of a storyboard can also depend on the state of the variables it animates.</span></span>

<span data-ttu-id="a7807-192">Les exemples suivants supposent qu’un gestionnaire d’animations, une bibliothèque de transition et un minuteur ont été créés.</span><span class="sxs-lookup"><span data-stu-id="a7807-192">The following examples assume that an animation manager, transition library, and timer have been created.</span></span> <span data-ttu-id="a7807-193">Pour plus d’informations, consultez [créer les objets d’animation principaux](adding-animation-to-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="a7807-193">For more information, see [Create the Main Animation Objects](adding-animation-to-an-application.md).</span></span> <span data-ttu-id="a7807-194">Les exemples supposent également que l’application a créé trois variables d’animation (X, Y et Z) à l’aide de la méthode [**IUIAnimationManager :: CreateAnimationVariable**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationmanager-createanimationvariable) et cinq transitions (T1, T2, T3, T4 et T5) à l’aide de l’une des méthodes de l’interface [**IUIAnimationTransitionLibrary**](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationtransitionlibrary) .</span><span class="sxs-lookup"><span data-stu-id="a7807-194">The examples also assume that the application has created three animation variables (X, Y and Z) by using the [**IUIAnimationManager::CreateAnimationVariable**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationmanager-createanimationvariable) method, and five transitions (T1, T2, T3, T4, and T5) by using the one of the methods of the [**IUIAnimationTransitionLibrary**](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationtransitionlibrary) interface.</span></span>

-   [<span data-ttu-id="a7807-195">Création d’un Storyboard simple</span><span class="sxs-lookup"><span data-stu-id="a7807-195">Building a Simple Storyboard</span></span>](#building-a-simple-storyboard)
-   [<span data-ttu-id="a7807-196">Utilisation d’une durée de Context-Sensitive</span><span class="sxs-lookup"><span data-stu-id="a7807-196">Using a Context-Sensitive Duration</span></span>](#using-a-context-sensitive-duration)
-   [<span data-ttu-id="a7807-197">Création d’un Storyboard plus complexe</span><span class="sxs-lookup"><span data-stu-id="a7807-197">Building a More Complex Storyboard</span></span>](#building-a-more-complex-storyboard)
-   [<span data-ttu-id="a7807-198">Utilisation d’images clés</span><span class="sxs-lookup"><span data-stu-id="a7807-198">Using Keyframes</span></span>](#using-keyframes)
-   [<span data-ttu-id="a7807-199">Conserver les variables</span><span class="sxs-lookup"><span data-stu-id="a7807-199">Holding Variables</span></span>](#holding-variables)
-   [<span data-ttu-id="a7807-200">Planification d’une table de montage séquentiel</span><span class="sxs-lookup"><span data-stu-id="a7807-200">Scheduling a Storyboard</span></span>](#scheduling-a-storyboard)

### <a name="building-a-simple-storyboard"></a><span data-ttu-id="a7807-201">Création d’un Storyboard simple</span><span class="sxs-lookup"><span data-stu-id="a7807-201">Building a Simple Storyboard</span></span>

<span data-ttu-id="a7807-202">Pour générer une table de montage séquentiel simple, utilisez la méthode [**IUIAnimationManager :: CreateStoryboard**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationmanager-createstoryboard) pour créer un nouvel Storyboard, la méthode [**IUIAnimationTransitionLibrary :: CreateLinearTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationtransitionlibrary-createlineartransition) pour créer une transition linéaire, T1 et la méthode [**IUIAnimationStoryboard :: AddTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransition) pour appliquer la transition T1 à la variable X et ajouter la transition résultante à la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-202">To build a simple storyboard, use the [**IUIAnimationManager::CreateStoryboard**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationmanager-createstoryboard) method to create a new storyboard, the [**IUIAnimationTransitionLibrary::CreateLinearTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationtransitionlibrary-createlineartransition) method to create a linear transition, T1, and the [**IUIAnimationStoryboard::AddTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransition) method to apply the T1 transition to the variable X and add the resulting transition to the storyboard.</span></span>

<span data-ttu-id="a7807-203">Ce processus génère une table de montage séquentiel simple, comme illustré dans la figure suivante.</span><span class="sxs-lookup"><span data-stu-id="a7807-203">This process yields a simple storyboard, as shown in the following figure.</span></span> <span data-ttu-id="a7807-204">La table de montage séquentiel contient une transition, T1, de telle sorte que la valeur de la variable X change de façon linéaire sur une durée fixe.</span><span class="sxs-lookup"><span data-stu-id="a7807-204">The storyboard contains one transition, T1, such that the value of variable X changes linearly over a fixed duration of time.</span></span>

![Illustration montrant un Storyboard simple avec une durée fixe](images/simplestoryboardfixedduration.png)

<span data-ttu-id="a7807-206">Notez que pour un scénario de ce type simple, une autre option consiste à utiliser la méthode [**IUIAnimationManager :: ScheduleTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationmanager-scheduletransition) .</span><span class="sxs-lookup"><span data-stu-id="a7807-206">Note that for such a simple scenario, an alternative option is to use the [**IUIAnimationManager::ScheduleTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationmanager-scheduletransition) method.</span></span>

### <a name="using-a-context-sensitive-duration"></a><span data-ttu-id="a7807-207">Utilisation d’une durée de Context-Sensitive</span><span class="sxs-lookup"><span data-stu-id="a7807-207">Using a Context-Sensitive Duration</span></span>

<span data-ttu-id="a7807-208">Tandis que certaines transitions ont une durée fixe, la durée des autres dépend de la valeur initiale ou de la rapidité de la variable animée au début de la transition.</span><span class="sxs-lookup"><span data-stu-id="a7807-208">While some transitions have a fixed duration, the duration of others depends on the initial value or velocity of the animated variable when the transition begins.</span></span> <span data-ttu-id="a7807-209">Par exemple, la méthode [**IUIAnimationTransitionLibrary :: CreateLinearTransitionFromSpeed**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationtransitionlibrary-createlineartransitionfromspeed) crée une transition avec une durée proportionnelle à la différence entre la valeur initiale de la variable d’animation et la valeur finale spécifiée.</span><span class="sxs-lookup"><span data-stu-id="a7807-209">For example, the [**IUIAnimationTransitionLibrary::CreateLinearTransitionFromSpeed**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationtransitionlibrary-createlineartransitionfromspeed) method creates a transition with a duration that is proportional to the difference between the initial value of the animation variable and the specified final value.</span></span> <span data-ttu-id="a7807-210">Dans cette illustration, et les autres illustrations, ces transitions avec des durées arbitraires s’affichent avec un point d’interrogation ( ?) et leurs durées réelles sont déterminées lors de la lecture de la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-210">In this illustration, and the remaining illustrations, such transitions with arbitrary durations are shown with a question mark (?), and their actual durations are determined when the storyboard plays.</span></span>

![Illustration montrant un Storyboard simple avec une durée inconnue](images/simplestoryboardunknownduration.png)

### <a name="building-a-more-complex-storyboard"></a><span data-ttu-id="a7807-212">Création d’un Storyboard plus complexe</span><span class="sxs-lookup"><span data-stu-id="a7807-212">Building a More Complex Storyboard</span></span>

<span data-ttu-id="a7807-213">Après avoir créé une table de montage séquentiel et ajouté une transition unique, T1, vous pouvez ajouter une deuxième transition pour la variable X en appelant la méthode [**IUIAnimationStoryboard :: AddTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransition) , mais avec T2 au lieu de T1.</span><span class="sxs-lookup"><span data-stu-id="a7807-213">After creating a storyboard and adding a single transition, T1, you can append a second transition for the X variable by calling the [**IUIAnimationStoryboard::AddTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransition) method again, but with T2 instead of T1.</span></span>

<span data-ttu-id="a7807-214">En supposant que la transition T2 ait une durée contextuel, la table de montage séquentiel contient désormais deux transitions d’arrière en arrière de durée arbitraire affectant la variable X.</span><span class="sxs-lookup"><span data-stu-id="a7807-214">Assuming that the T2 transition has a duration that is context-sensitive, the storyboard now contains two back-to-back transitions of arbitrary duration affecting the variable X.</span></span>

![Illustration montrant une table de montage séquentiel contenant deux transitions sur la même variable](images/appendingwithaddtransition.png)

<span data-ttu-id="a7807-216">L’appel de [**AddTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransition) à nouveau avec la variable Y et la transition T3 ajoute une troisième transition au début de la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-216">Calling [**AddTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransition) again with variable Y and transition T3 adds a third transition at the start of the storyboard.</span></span> <span data-ttu-id="a7807-217">Selon les valeurs de X et Y lors de la lecture de la table de montage séquentiel, T3 peut se terminer après T1 ou même après T2.</span><span class="sxs-lookup"><span data-stu-id="a7807-217">Depending on the values of X and Y when the storyboard plays, T3 may end after T1 or even after T2.</span></span>

![Illustration montrant une table de montage séquentiel contenant des transitions sur plusieurs variables](images/multivariablestoryboard.png)

### <a name="using-keyframes"></a><span data-ttu-id="a7807-219">Utilisation d’images clés</span><span class="sxs-lookup"><span data-stu-id="a7807-219">Using Keyframes</span></span>

<span data-ttu-id="a7807-220">Pour ajouter une transition à un offset à partir du début de la table de montage séquentiel, vous devez d’abord ajouter une image clé.</span><span class="sxs-lookup"><span data-stu-id="a7807-220">To add a transition at an offset from the start of the storyboard, you must first add a keyframe.</span></span> <span data-ttu-id="a7807-221">Les images clés représentent des instantanés dans le temps et n’ont pas d’effet sur le comportement de la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-221">Keyframes represent instants in time and by themselves have no effect on the behavior of the storyboard.</span></span> <span data-ttu-id="a7807-222">Chaque Storyboard a une image clé implicite qui représente le début de la table de montage séquentiel, la table de montage de l' [**\_ \_ image clé \_ \_**](/previous-versions/windows/desktop/legacy/dd756780(v=vs.85))de l’animation de l’interface utilisateur. vous pouvez ajouter de nouvelles images clés aux décalages à partir du début en appelant la méthode [**IUIAnimationStoryboard :: AddKeyframeAtOffset**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addkeyframeatoffset) avec l' **interface utilisateur de la table de \_ \_ \_ montage séquentiel \_ d’animation**.</span><span class="sxs-lookup"><span data-stu-id="a7807-222">Every storyboard has an implicit keyframe representing the start of the storyboard, [**UI\_ANIMATION\_KEYFRAME\_STORYBOARD\_START**](/previous-versions/windows/desktop/legacy/dd756780(v=vs.85)); you can add new keyframes at offsets from the start by calling the [**IUIAnimationStoryboard::AddKeyframeAtOffset**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addkeyframeatoffset) method with **UI\_ANIMATION\_KEYFRAME\_STORYBOARD\_START**.</span></span>

<span data-ttu-id="a7807-223">Le décalage auquel vous ajoutez une image clé est toujours relatif à une autre image clé.</span><span class="sxs-lookup"><span data-stu-id="a7807-223">The offset at which you add a keyframe is always relative to another keyframe.</span></span> <span data-ttu-id="a7807-224">Le diagramme suivant montre le résultat de l’ajout de keyframe1 et de la transition T4, qui est appliqué à la variable Z, alignée avec keyframe1, et créée avec une durée fixe.</span><span class="sxs-lookup"><span data-stu-id="a7807-224">The following diagram shows the result of adding keyframe1 and transition T4, which is applied to variable Z, aligned with keyframe1, and created with a fixed duration.</span></span> <span data-ttu-id="a7807-225">Bien sûr, étant donné que les durées des autres transitions ne sont pas encore connues, T4 peut ne pas être la dernière transition à se terminer.</span><span class="sxs-lookup"><span data-stu-id="a7807-225">Of course, because the durations of the other transitions are not yet known, T4 might not be the last transition to finish.</span></span>

![illustration illustrant l’ajout d’une transition alignée sur une image clé](images/addtransitionatkeyframe.png)

<span data-ttu-id="a7807-227">Les images clés peuvent également être placées aux extrémités des transitions, à l’aide de la méthode [**IUIAnimationStoryboard :: AddKeyframeAfterTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addkeyframeaftertransition) .</span><span class="sxs-lookup"><span data-stu-id="a7807-227">Keyframes can also be placed at the ends of transitions, using the [**IUIAnimationStoryboard::AddKeyframeAfterTransition**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addkeyframeaftertransition) method.</span></span> <span data-ttu-id="a7807-228">Le diagramme suivant montre le résultat de l’ajout de keyframe2 après T1 et keyframe3 après T2.</span><span class="sxs-lookup"><span data-stu-id="a7807-228">The following diagram shows the result of adding keyframe2 after T1 and keyframe3 after T2.</span></span>

![illustration illustrant l’ajout d’images clés après différentes transitions](images/addkeyframeaftertransition.png)

<span data-ttu-id="a7807-230">Étant donné que les durées de T1 et T2 ne sont pas connues jusqu’à la lecture de la table de montage séquentiel, les décalages de keyframe2 et keyframe3 ne sont pas non plus déterminés.</span><span class="sxs-lookup"><span data-stu-id="a7807-230">Because the durations of T1 and T2 are not known until the storyboard plays, the offsets of keyframe2 and keyframe3 also are not determined until then.</span></span> <span data-ttu-id="a7807-231">Par conséquent, keyframe2 et même keyframe3 peuvent se produire avant keyframe1.</span><span class="sxs-lookup"><span data-stu-id="a7807-231">Consequently, keyframe2 and even keyframe3 can occur earlier than keyframe1.</span></span>

<span data-ttu-id="a7807-232">Le début et la fin d’une transition peuvent être alignés avec les images clés à l’aide de la méthode [**IUIAnimationStoryboard :: AddTransitionBetweenKeyframes**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransitionbetweenkeyframes) .</span><span class="sxs-lookup"><span data-stu-id="a7807-232">Both the start and end of a transition can be aligned with keyframes by using the [**IUIAnimationStoryboard::AddTransitionBetweenKeyframes**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-addtransitionbetweenkeyframes) method.</span></span> <span data-ttu-id="a7807-233">Le diagramme suivant montre le résultat de l’ajout d’une cinquième transition, T5, sur la variable Y, entre keyframe2 et keyframe3.</span><span class="sxs-lookup"><span data-stu-id="a7807-233">The following diagram shows the result of adding a fifth transition, T5, on variable Y, between keyframe2 and keyframe3.</span></span> <span data-ttu-id="a7807-234">Cela modifie la durée T5, ce qui la rend plus longue ou plus rapide en fonction des décalages relatifs de keyframe2 et keyframe3.</span><span class="sxs-lookup"><span data-stu-id="a7807-234">This alters the duration of T5, making it longer or shorter depending on the relative offsets of keyframe2 and keyframe3.</span></span>

![Illustration montrant additon d’une transition entre les images clés](images/addtransitionbetweenkeyframes.png)

### <a name="holding-variables"></a><span data-ttu-id="a7807-236">Conserver les variables</span><span class="sxs-lookup"><span data-stu-id="a7807-236">Holding Variables</span></span>

<span data-ttu-id="a7807-237">Si T4 se termine après T2 et T5, la table de montage séquentiel arrête d’animer les variables X et Y, ce qui les rend disponibles pour les autres storyboards.</span><span class="sxs-lookup"><span data-stu-id="a7807-237">If T4 does end after T2 and T5, the storyboard stops animating variables X and Y, making them available for other storyboards to animate.</span></span> <span data-ttu-id="a7807-238">Toutefois, l’application peut appeler la méthode [**IUIAnimationStoryboard :: HoldVariable**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-holdvariable) pour demander que la table de montage séquentiel contienne une partie ou la totalité des variables qu’elle anime aux valeurs finales jusqu’à ce que la table de montage séquentiel soit terminée.</span><span class="sxs-lookup"><span data-stu-id="a7807-238">However, the application can call the [**IUIAnimationStoryboard::HoldVariable**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-holdvariable) method to request that the storyboard hold some or all of the variables it animates at their final values until the storyboard has completed.</span></span> <span data-ttu-id="a7807-239">Le diagramme suivant montre le résultat de la conservation de X et de Z lorsque T4 termine la dernière.</span><span class="sxs-lookup"><span data-stu-id="a7807-239">The following diagram shows the result of holding X and Z when T4 finishes last.</span></span> <span data-ttu-id="a7807-240">Notez que la table de montage séquentiel contient X à sa valeur finale jusqu’à ce que la table de montage séquentiel soit terminée.</span><span class="sxs-lookup"><span data-stu-id="a7807-240">Notice that the storyboard holds X at its final value until the storyboard has completed.</span></span> <span data-ttu-id="a7807-241">La suspension n’a aucun effet sur Z car le Storyboard se termine lorsque T4 est terminé.</span><span class="sxs-lookup"><span data-stu-id="a7807-241">The hold has no effect on Z because the storyboard ends when T4 finishes.</span></span>

![Illustration montrant la détention de variables aux valeurs finales jusqu’à la fin de la table de montage séquentiel](images/holdvariable.png)

<span data-ttu-id="a7807-243">Même si Y n’est pas détenu par ce Storyboard, sa valeur n’est pas modifiée après T5, sauf si une autre table de montage séquentiel l’anime.</span><span class="sxs-lookup"><span data-stu-id="a7807-243">Even though Y is not held by this storyboard, its value does not change after T5 completes unless another storyboard animates it.</span></span> <span data-ttu-id="a7807-244">Étant donné que Y n’est pas détenu, toute autre table de montage séquentiel, quelle que soit la priorité, peut animer Y après la fin de T5.</span><span class="sxs-lookup"><span data-stu-id="a7807-244">Because Y is not held, any other storyboard, regardless of priority, can animate Y after T5 has finished.</span></span> <span data-ttu-id="a7807-245">En revanche, étant donné que X est conservé, un Storyboard de priorité inférieure ne peut pas animer X tant que cette table de montage séquentiel n’est pas terminée.</span><span class="sxs-lookup"><span data-stu-id="a7807-245">In contrast, because X is held, a lower-priority storyboard cannot animate X until this storyboard is finished.</span></span>

<span data-ttu-id="a7807-246">Toutes ces illustrations ont supposé un ensemble arbitraire de valeurs actuelles pour les variables au démarrage de la création de la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-246">All of these illustrations have assumed an arbitrary set of current values for the variables when the storyboard starts playing.</span></span> <span data-ttu-id="a7807-247">Si d’autres valeurs sont rencontrées, les durées des transitions contextuelles sont susceptibles d’être différentes, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="a7807-247">If other values are encountered, the durations of the context-sensitive transitions are likely to be different, as shown in the following illustration.</span></span>

![Illustration montrant le résultat de la modification des conditions initiales utilisées pour l’illustration précédente](images/holdvariablez.png)

<span data-ttu-id="a7807-249">Dans ce scénario, T5 commence avant la fin de T3 et T3 est donc tronqué.</span><span class="sxs-lookup"><span data-stu-id="a7807-249">In this scenario, T5 begins before T3 has finished, and T3 is therefore trimmed.</span></span> <span data-ttu-id="a7807-250">Comme T4 termine les versions antérieures à T2 et T5, la valeur de Z est maintenue jusqu’à la fin de la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-250">Because T4 finishes earlier than T2 and T5, the value of Z is held until the end of the storyboard.</span></span> <span data-ttu-id="a7807-251">En général, les valeurs et les rapidités des variables lors du démarrage d’une table de montage séquentiel peuvent affecter le classement des images clés et la longueur et la forme globales de la table de montage séquentiel.</span><span class="sxs-lookup"><span data-stu-id="a7807-251">In general, the values and velocities of variables when a storyboard starts playing can affect keyframe ordering and the overall length and shape of the storyboard.</span></span>

### <a name="scheduling-a-storyboard"></a><span data-ttu-id="a7807-252">Planification d’une table de montage séquentiel</span><span class="sxs-lookup"><span data-stu-id="a7807-252">Scheduling a Storyboard</span></span>

<span data-ttu-id="a7807-253">Lors de la planification d’un Storyboard, son heure de début est déterminée par son plan et les contours des storyboards qui sont actuellement dans la planification.</span><span class="sxs-lookup"><span data-stu-id="a7807-253">When scheduling a storyboard, its start time is determined by its outline and the outlines of the storyboards that are currently in the schedule.</span></span> <span data-ttu-id="a7807-254">Plus précisément, le premier et le dernier moments où le Storyboard anime chaque variable individuelle déterminent si et quand deux storyboards sont en conflit, mais les détails internes des transitions dans ne sont pas importants.</span><span class="sxs-lookup"><span data-stu-id="a7807-254">Specifically, the first and last moments when the storyboard animates each individual variable determine whether and when two storyboards collide, but the internal details of the transitions within are not important.</span></span>

<span data-ttu-id="a7807-255">L’illustration suivante montre le plan d’une table de montage séquentiel avec cinq transitions animant trois variables.</span><span class="sxs-lookup"><span data-stu-id="a7807-255">The following illustration shows the outline of a storyboard with five transitions animating three variables.</span></span>

![Illustration montrant une table de montage séquentiel avec cinq transitions animant trois variables](images/storyboardwithoutline.png)

<span data-ttu-id="a7807-257">L’une des pierres angulaires de la plateforme d’animation Windows est sa prise en charge pour permettre à une animation de se terminer avant qu’une autre ne commence, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="a7807-257">A cornerstone of the Windows Animation platform is its support for letting one animation complete before another begins, when necessary.</span></span> <span data-ttu-id="a7807-258">Bien que cela élimine de nombreux problèmes logiques, elle introduit également une latence arbitraire dans l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a7807-258">While this eliminates many logical problems, it also introduces arbitrary latency in the UI.</span></span> <span data-ttu-id="a7807-259">Pour résoudre ce cas, les applications peuvent spécifier le délai le plus *long acceptable* pour le démarrage d’une table de montage séquentiel, à l’aide de la méthode [**IUIAnimationStoryboard :: SetLongestAcceptableDelay**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-setlongestacceptabledelay) , et le gestionnaire d’animations utilise ces informations pour planifier le Storyboard avant l’expiration de la période de latence spécifiée.</span><span class="sxs-lookup"><span data-stu-id="a7807-259">To address this, applications can specify the *longest acceptable delay* for a storyboard to start, using the [**IUIAnimationStoryboard::SetLongestAcceptableDelay**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-setlongestacceptabledelay) method, and the animation manager uses this information to schedule the storyboard before the specified latency period elapses.</span></span> <span data-ttu-id="a7807-260">Lorsqu’une table de montage séquentiel est planifiée, le gestionnaire d’animations détermine si d’autres storyboards doivent d’abord être annulés, supprimés, conclus et/ou compressés.</span><span class="sxs-lookup"><span data-stu-id="a7807-260">When a storyboard is scheduled, the animation manager determines if other storyboards must first be canceled, trimmed, concluded, and/or compressed.</span></span>

<span data-ttu-id="a7807-261">Une application peut inscrire un gestionnaire qui sera appelé quand l’état d’une table de montage séquentiel change.</span><span class="sxs-lookup"><span data-stu-id="a7807-261">An application can register a handler that will be called when a storyboard's status changes.</span></span> <span data-ttu-id="a7807-262">Cela permet à l’application de répondre lorsque la création de la table de montage séquentiel démarre, s’exécute jusqu’à son achèvement, est entièrement supprimée de la planification ou ne peut pas se terminer en raison d’une interruption par un Storyboard de priorité plus élevée.</span><span class="sxs-lookup"><span data-stu-id="a7807-262">This enables the application to respond when the storyboard starts playing, runs to completion, is removed entirely from the schedule, or is prevented from completing due to interruption by a higher-priority storyboard.</span></span> <span data-ttu-id="a7807-263">Pour identifier les storyboards passés aux gestionnaires d’événements de Storyboard (ou comparaisons de priorité), une application peut utiliser la méthode [**IUIAnimationStoryboard :: SetTag**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-settag) pour appliquer des balises aux storyboards, similaires à celles qui peuvent être utilisées pour identifier des variables.</span><span class="sxs-lookup"><span data-stu-id="a7807-263">To identify the storyboards passed to storyboard event handlers (or priority comparisons), an application can use the [**IUIAnimationStoryboard::SetTag**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationstoryboard-settag) method to apply tags to storyboards, similar to those that can be used to identify variables.</span></span> <span data-ttu-id="a7807-264">Comme pour la réutilisation des storyboards, les développeurs doivent faire preuve de prudence lors de l’utilisation de balises pour identifier les storyboards, et vous assurer que les ambiguïtés ne se produisent pas lorsque des actions de l’utilisateur entraînent la mise en file d’attente de plusieurs storyboards.</span><span class="sxs-lookup"><span data-stu-id="a7807-264">As with storyboard re-use, developers must exercise caution when using tags to identify storyboards, and be sure that ambiguities do not arise when user actions result in many storyboards being queued.</span></span>

<span data-ttu-id="a7807-265">Les exemples suivants illustrent deux variantes d’une tentative de planification de la table de montage séquentiel générée dans les sections précédentes de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="a7807-265">The following examples show two variations of an attempt to schedule the storyboard built in the earlier sections of this topic.</span></span>

<span data-ttu-id="a7807-266">Dans ce scénario, six storyboards, A à F, ont déjà été planifiés pour animer les variables W, X, Y et Z, mais seuls A et B commencent à être joués.</span><span class="sxs-lookup"><span data-stu-id="a7807-266">In this scenario, six storyboards, A through F, have already been scheduled to animate variables W, X, Y and Z, but only A and B have started playing.</span></span> <span data-ttu-id="a7807-267">Le nouveau Storyboard, étiqueté G, a son délai le plus long acceptable défini sur la durée indiquée dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="a7807-267">The new storyboard, labeled G, has its longest acceptable delay set to the duration shown in the following illustration.</span></span>

![illustration illustrant l’ajout d’un nouveau Storyboard à la planification existante](images/existingschedule1withlines.png)

<span data-ttu-id="a7807-269">L’application a enregistré des comparaisons de priorité qui incluent la logique suivante :</span><span class="sxs-lookup"><span data-stu-id="a7807-269">The application has registered priority comparisons that include the following logic:</span></span>

-   <span data-ttu-id="a7807-270">G peut annuler uniquement C et E, et uniquement pour empêcher l’échec.</span><span class="sxs-lookup"><span data-stu-id="a7807-270">G can cancel only C and E, and only to prevent failure.</span></span>
-   <span data-ttu-id="a7807-271">G peut uniquement supprimer A, C, E et F et uniquement pour empêcher l’échec.</span><span class="sxs-lookup"><span data-stu-id="a7807-271">G can trim only A, C, E and F, and only to prevent failure.</span></span>
-   <span data-ttu-id="a7807-272">Tout Storyboard peut compresser n’importe quel autre Storyboard (la compression est toujours effectuée uniquement pour éviter les défaillances).</span><span class="sxs-lookup"><span data-stu-id="a7807-272">Any storyboard can compress any other storyboard (compression is always done only to prevent failure).</span></span>

> [!Note]  
> <span data-ttu-id="a7807-273">Le qualificateur « uniquement pour empêcher une défaillance » signifie que les comparaisons de priorité inscrites retournent la \_ valeur S OK uniquement lorsque le paramètre *priorityEffect* est l’effet de priorité d’animation de l' **interface utilisateur \_ \_ \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="a7807-273">The qualifier "only to prevent failure" means that the registered priority comparisons return S\_OK only when the *priorityEffect* parameter is **UI\_ANIMATION\_PRIORITY\_EFFECT\_FAILURE**.</span></span> <span data-ttu-id="a7807-274">Pour plus d’informations, consultez la méthode [**IUIAnimationPriorityComparison :: HasPriority**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationprioritycomparison-haspriority) .</span><span class="sxs-lookup"><span data-stu-id="a7807-274">See the [**IUIAnimationPriorityComparison::HasPriority**](/windows/desktop/api/UIAnimation/nf-uianimation-iuianimationprioritycomparison-haspriority) method for details.</span></span>

 

<span data-ttu-id="a7807-275">Pour démarrer G avant l’expiration du délai le plus long, le gestionnaire d’animations doit effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="a7807-275">To start G before the longest acceptable delay has elapsed, the animation manager must do the following:</span></span>

-   <span data-ttu-id="a7807-276">Trim F</span><span class="sxs-lookup"><span data-stu-id="a7807-276">Trim F</span></span>
-   <span data-ttu-id="a7807-277">Annuler E</span><span class="sxs-lookup"><span data-stu-id="a7807-277">Cancel E</span></span>

<span data-ttu-id="a7807-278">Quand E est annulé, D et F sont découverts et reprennent leurs contours originaux :</span><span class="sxs-lookup"><span data-stu-id="a7807-278">When E is canceled, D and F are uncovered and revert to their original outlines:</span></span>

![Illustration montrant des contours originaux](images/existingschedule1bwithlines.png)

<span data-ttu-id="a7807-280">Le gestionnaire d’animations n’a pas besoin d’annuler ou de découper C à planifier avant que son délai acceptable le plus long ne s’est écoulé, de sorte que la réunion de C et G détermine le moment où G démarre.</span><span class="sxs-lookup"><span data-stu-id="a7807-280">The animation manager does not need to cancel or trim C to schedule before its longest acceptable delay has elapsed, so the meeting of C and G determines when G starts.</span></span>

![Illustration montrant que f est tronqué pour permettre à c et à g de répondre](images/schedule1withgwithlines.png)

<span data-ttu-id="a7807-282">Une fois la planification de G terminée, les durées de ses transitions peuvent être déterminées et le reste de son contour est donc connu.</span><span class="sxs-lookup"><span data-stu-id="a7807-282">After G has been successfully scheduled, the durations of its transitions can be determined, and the remainder of its outline is therefore known.</span></span> <span data-ttu-id="a7807-283">Toutefois, le plan peut changer si une autre table de montage séquentiel est ensuite supprimée de la planification.</span><span class="sxs-lookup"><span data-stu-id="a7807-283">However, the outline can change if another storyboard is subsequently removed from the schedule.</span></span>

<span data-ttu-id="a7807-284">En guise de deuxième exemple, considérez un scénario comme celui ci-dessus, mais avec un délai plus long acceptable spécifié pour G.</span><span class="sxs-lookup"><span data-stu-id="a7807-284">As a second example, consider a scenario like that above, but with a shorter longest acceptable delay specified for G.</span></span>

![Illustration montrant le scénario précédent, mais avec un délai plus long acceptable pour g](images/existingschedule2withlines.png)

<span data-ttu-id="a7807-286">Dans ce cas, les actions suivantes sont effectuées :</span><span class="sxs-lookup"><span data-stu-id="a7807-286">In this case, the following actions are taken:</span></span>

-   <span data-ttu-id="a7807-287">Trim F</span><span class="sxs-lookup"><span data-stu-id="a7807-287">Trim F</span></span>
-   <span data-ttu-id="a7807-288">Annuler E</span><span class="sxs-lookup"><span data-stu-id="a7807-288">Cancel E</span></span>
-   <span data-ttu-id="a7807-289">Annuler C</span><span class="sxs-lookup"><span data-stu-id="a7807-289">Cancel C</span></span>

<span data-ttu-id="a7807-290">En outre, le gestionnaire d’animations doit compresser D par la quantité indiquée pour permettre à G de démarrer après son délai le plus long et non plus tard.</span><span class="sxs-lookup"><span data-stu-id="a7807-290">Also, the animation manager must compress D by the amount shown to enable G to start after its longest acceptable delay, and no later.</span></span>

![Illustration montrant où d doit être compressé pour permettre à g de démarrer à son délai acceptable le plus long](images/trimmedandcancelledwithlines.png)

<span data-ttu-id="a7807-292">Pour conserver leur minutage relatif, A, B et F sont également compressés.</span><span class="sxs-lookup"><span data-stu-id="a7807-292">To preserve their relative timing, A, B, and F are compressed as well.</span></span>

![Illustration montrant a, b, d et f compressés](images/schedule2withgwithlines.png)

<span data-ttu-id="a7807-294">Toutefois, les storyboards sur des variables non liées (non affichées) ne sont pas compressés.</span><span class="sxs-lookup"><span data-stu-id="a7807-294">However, storyboards on unrelated variables (not shown) would not be compressed.</span></span>

<span data-ttu-id="a7807-295">Là encore, la structure de G est maintenant connue et est différente du résultat dans le premier scénario, car les variables ont des valeurs différentes lorsque G commence.</span><span class="sxs-lookup"><span data-stu-id="a7807-295">Once again, the outline of G is now known and is different from the result in the first scenario because the variables have different values when G begins.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a7807-296">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="a7807-296">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a7807-297">**IUIAnimationManager**</span><span class="sxs-lookup"><span data-stu-id="a7807-297">**IUIAnimationManager**</span></span>](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationmanager)
</dt> <dt>

[<span data-ttu-id="a7807-298">**IUIAnimationPriorityComparison**</span><span class="sxs-lookup"><span data-stu-id="a7807-298">**IUIAnimationPriorityComparison**</span></span>](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationprioritycomparison)
</dt> <dt>

[<span data-ttu-id="a7807-299">**IUIAnimationStoryboard**</span><span class="sxs-lookup"><span data-stu-id="a7807-299">**IUIAnimationStoryboard**</span></span>](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationstoryboard)
</dt> <dt>

[<span data-ttu-id="a7807-300">**IUIAnimationTransitionLibrary**</span><span class="sxs-lookup"><span data-stu-id="a7807-300">**IUIAnimationTransitionLibrary**</span></span>](/windows/desktop/api/UIAnimation/nn-uianimation-iuianimationtransitionlibrary)
</dt> </dl>

 

