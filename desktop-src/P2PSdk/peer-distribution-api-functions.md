---
description: Le service de distribution d’homologues Microsoft prend en charge des fonctions pour les scénarios de rôle de consommateur et de rôle d’éditeur.
ms.assetid: 3f5af891-4f5d-4523-8fe6-47fc6ff13b35
title: Fonctions de l’API de distribution d’homologue
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2532ad8bf5cbb14e18bd16a14bb1be2d79c1791
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "106529840"
---
# <a name="peer-distribution-api-functions"></a><span data-ttu-id="693ee-103">Fonctions de l’API de distribution d’homologue</span><span class="sxs-lookup"><span data-stu-id="693ee-103">Peer Distribution API Functions</span></span>

<span data-ttu-id="693ee-104">Le service de distribution d’homologues Microsoft prend en charge des fonctions pour les scénarios de rôle de consommateur et de rôle d’éditeur.</span><span class="sxs-lookup"><span data-stu-id="693ee-104">The Microsoft Peer Distribution service supports functions for both consumer role and publisher role scenarios.</span></span>

## <a name="the-following-functions-are-common-in-both-client-and-server-scenarios"></a><span data-ttu-id="693ee-105">Les fonctions suivantes sont communes dans les scénarios « client » et « serveur ».</span><span class="sxs-lookup"><span data-stu-id="693ee-105">The following functions are common in both "client" and "server" scenarios.</span></span>



| <span data-ttu-id="693ee-106">Fonctions communes</span><span class="sxs-lookup"><span data-stu-id="693ee-106">Common Functions</span></span>                                                                                       | <span data-ttu-id="693ee-107">Description</span><span class="sxs-lookup"><span data-stu-id="693ee-107">Description</span></span>                                                                                                     |
|--------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="693ee-108">**PeerDistStartup**</span><span class="sxs-lookup"><span data-stu-id="693ee-108">**PeerDistStartup**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup)                                                             | <span data-ttu-id="693ee-109">Crée une instance **de \_ \_ handle d’instance PEERDIST** qui doit être passée à toutes les autres API de distribution d’homologue.</span><span class="sxs-lookup"><span data-stu-id="693ee-109">Creates a new **PEERDIST\_INSTANCE\_HANDLE** instance which must be passed to all other Peer Distribution APIs.</span></span> |
| [<span data-ttu-id="693ee-110">**PeerDistShutdown**</span><span class="sxs-lookup"><span data-stu-id="693ee-110">**PeerDistShutdown**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistshutdown)                                                           | <span data-ttu-id="693ee-111">Libère les ressources allouées par l’appel à [**PeerDistStartup**](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup).</span><span class="sxs-lookup"><span data-stu-id="693ee-111">Releases resources allocated by the call to [**PeerDistStartup**](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup).</span></span>                         |
| [<span data-ttu-id="693ee-112">**PeerDistGetStatus**</span><span class="sxs-lookup"><span data-stu-id="693ee-112">**PeerDistGetStatus**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatus)                                                         | <span data-ttu-id="693ee-113">Retourne l’état actuel du service de distribution d’homologue.</span><span class="sxs-lookup"><span data-stu-id="693ee-113">Returns the current status of Peer Distribution service.</span></span>                                                        |
| [<span data-ttu-id="693ee-114">**PeerDistGetStatusEx**</span><span class="sxs-lookup"><span data-stu-id="693ee-114">**PeerDistGetStatusEx**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatusex)                                                     | <span data-ttu-id="693ee-115">Retourne l’état actuel et les fonctionnalités du service de distribution d’homologue.</span><span class="sxs-lookup"><span data-stu-id="693ee-115">Returns the current status and capabilities of the Peer Distribution service.</span></span>                                   |
| [<span data-ttu-id="693ee-116">**PeerDistGetOverlappedResult**</span><span class="sxs-lookup"><span data-stu-id="693ee-116">**PeerDistGetOverlappedResult**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistgetoverlappedresult)                                     | <span data-ttu-id="693ee-117">Récupère les résultats des opérations asynchrones.</span><span class="sxs-lookup"><span data-stu-id="693ee-117">Retrieves the results of asynchronous operations.</span></span>                                                               |
| [<span data-ttu-id="693ee-118">**PeerDistRegisterForStatusChangeNotification**</span><span class="sxs-lookup"><span data-stu-id="693ee-118">**PeerDistRegisterForStatusChangeNotification**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistregisterforstatuschangenotification)     | <span data-ttu-id="693ee-119">Demande que le service de distribution d’homologue avertisse l’appelant lorsqu’un changement d’État se produit.</span><span class="sxs-lookup"><span data-stu-id="693ee-119">Requests that the Peer Distribution service notify the caller when a status change occurs.</span></span>                      |
| [<span data-ttu-id="693ee-120">**PeerDistRegisterForStatusChangeNotificationEx**</span><span class="sxs-lookup"><span data-stu-id="693ee-120">**PeerDistRegisterForStatusChangeNotificationEx**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistregisterforstatuschangenotificationex) | <span data-ttu-id="693ee-121">Demande que le service de distribution d’homologue avertisse l’appelant lorsqu’un changement d’État se produit.</span><span class="sxs-lookup"><span data-stu-id="693ee-121">Requests that the Peer Distribution service notify the caller when a status change occurs.</span></span>                      |
| [<span data-ttu-id="693ee-122">**PeerDistUnregisterForStatusChangeNotification**</span><span class="sxs-lookup"><span data-stu-id="693ee-122">**PeerDistUnregisterForStatusChangeNotification**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistunregisterforstatuschangenotification) | <span data-ttu-id="693ee-123">Annule l’inscription de la notification de modification d’État pour la session associée au handle fourni.</span><span class="sxs-lookup"><span data-stu-id="693ee-123">Deregisters the status change notification for the session associated with the supplied handle.</span></span>                 |



 

## <a name="the-following-functions-are-only-supported-in-client-scenarios"></a><span data-ttu-id="693ee-124">Les fonctions suivantes sont prises en charge uniquement dans les scénarios « client ».</span><span class="sxs-lookup"><span data-stu-id="693ee-124">The following functions are only supported in "client" scenarios.</span></span>



| <span data-ttu-id="693ee-125">Fonctions clientes</span><span class="sxs-lookup"><span data-stu-id="693ee-125">Client Functions</span></span>                                                                             | <span data-ttu-id="693ee-126">Description</span><span class="sxs-lookup"><span data-stu-id="693ee-126">Description</span></span>                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="693ee-127">**PeerDistClientOpenContent**</span><span class="sxs-lookup"><span data-stu-id="693ee-127">**PeerDistClientOpenContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent)                               | <span data-ttu-id="693ee-128">Ouvre et retourne un **\_ \_ handle de contenu PEERDIST** pour référencer ce contenu.</span><span class="sxs-lookup"><span data-stu-id="693ee-128">Opens and returns a **PEERDIST\_CONTENT\_HANDLE** to reference that content.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="693ee-129">**PeerDistClientCloseContent**</span><span class="sxs-lookup"><span data-stu-id="693ee-129">**PeerDistClientCloseContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientclosecontent)                             | <span data-ttu-id="693ee-130">Ferme le **\_ \_ handle de contenu PEERDIST**.</span><span class="sxs-lookup"><span data-stu-id="693ee-130">Closes the **PEERDIST\_CONTENT\_HANDLE**.</span></span>                                                                                                                                                                                                                                                                                                        |
| [<span data-ttu-id="693ee-131">**PeerDistClientGetInformationByHandle**</span><span class="sxs-lookup"><span data-stu-id="693ee-131">**PeerDistClientGetInformationByHandle**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistclientgetinformationbyhandle)         | <span data-ttu-id="693ee-132">Récupère des informations supplémentaires à partir du service de distribution d’homologue pour un handle de contenu spécifique.</span><span class="sxs-lookup"><span data-stu-id="693ee-132">Retrieves additional information from the Peer Distribution service for a specific content handle.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="693ee-133">**PeerDistClientAddContentInformation**</span><span class="sxs-lookup"><span data-stu-id="693ee-133">**PeerDistClientAddContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientaddcontentinformation)           | <span data-ttu-id="693ee-134">Ajoute des informations de contenu qui sont ensuite associées **au \_ \_ descripteur de contenu PEERDIST**.</span><span class="sxs-lookup"><span data-stu-id="693ee-134">Adds content information which is then associated with the **PEERDIST\_CONTENT\_HANDLE**.</span></span> <span data-ttu-id="693ee-135">Un **\_ \_ descripteur de contenu PEERDIST** peut être associé à n’importe quelle information de contenu.</span><span class="sxs-lookup"><span data-stu-id="693ee-135">A **PEERDIST\_CONTENT\_HANDLE** can be associated with any content information.</span></span>                                                                                                                                                                        |
| [<span data-ttu-id="693ee-136">**PeerDistClientCompleteContentInformation**</span><span class="sxs-lookup"><span data-stu-id="693ee-136">**PeerDistClientCompleteContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcompletecontentinformation) | <span data-ttu-id="693ee-137">Indique la fin des informations de contenu.</span><span class="sxs-lookup"><span data-stu-id="693ee-137">Indicates the end of the content information.</span></span>                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="693ee-138">**PeerDistClientAddData**</span><span class="sxs-lookup"><span data-stu-id="693ee-138">**PeerDistClientAddData**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientadddata)                                       | <span data-ttu-id="693ee-139">Utilisé pour fournir du contenu au cache local.</span><span class="sxs-lookup"><span data-stu-id="693ee-139">Used to supply content to the local cache.</span></span> <span data-ttu-id="693ee-140">En général, cette opération est effectuée lorsque les données sont introuvables sur le réseau local comme indiqué lors de l’exécution de [**PeerDistClientBlockRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread) ou [**PeerDistClientStreamRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread) avec un **\_ délai d’erreur** ou une **\_ erreur \_ \_ PEERDIST**.</span><span class="sxs-lookup"><span data-stu-id="693ee-140">Typically this is done when data could not be found on the local network as indicated when either [**PeerDistClientBlockRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread) or [**PeerDistClientStreamRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread) complete with **ERROR\_TIMEOUT** or **PEERDIST\_ERROR\_MISSING\_DATA**..</span></span> |
| [<span data-ttu-id="693ee-141">**PeerDistClientBlockRead**</span><span class="sxs-lookup"><span data-stu-id="693ee-141">**PeerDistClientBlockRead**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread)                                   | <span data-ttu-id="693ee-142">Fournit un accès aléatoire au flux de contenu.</span><span class="sxs-lookup"><span data-stu-id="693ee-142">Provides random access to the content stream.</span></span>                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="693ee-143">**PeerDistClientStreamRead**</span><span class="sxs-lookup"><span data-stu-id="693ee-143">**PeerDistClientStreamRead**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread)                                 | <span data-ttu-id="693ee-144">Fournit un accès séquentiel au flux de contenu.</span><span class="sxs-lookup"><span data-stu-id="693ee-144">Provides sequential access to the content stream.</span></span>                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="693ee-145">**PeerDistClientFlushContent**</span><span class="sxs-lookup"><span data-stu-id="693ee-145">**PeerDistClientFlushContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientflushcontent)                             | <span data-ttu-id="693ee-146">Supprime le contenu qui a été précédemment ajouté au système de distribution d’homologue local.</span><span class="sxs-lookup"><span data-stu-id="693ee-146">Removes content that has been previously added to the local Peer Distribution system.</span></span>                                                                                                                                                                                                                                                            |
| [<span data-ttu-id="693ee-147">**PeerDistClientCancelAsyncOperation**</span><span class="sxs-lookup"><span data-stu-id="693ee-147">**PeerDistClientCancelAsyncOperation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcancelasyncoperation)             | <span data-ttu-id="693ee-148">Annule l’opération asynchrone associée à une structure [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) et le handle de contenu retourné par [**PeerDistClientOpenContent**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent).</span><span class="sxs-lookup"><span data-stu-id="693ee-148">Cancels asynchronous operation associated with an [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure and the content handle returned by [**PeerDistClientOpenContent**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent).</span></span>                                                                                                                     |



 

## <a name="the-following-functions-are-only-supported-in-server-scenarios"></a><span data-ttu-id="693ee-149">Les fonctions suivantes sont prises en charge uniquement dans les scénarios « serveur ».</span><span class="sxs-lookup"><span data-stu-id="693ee-149">The following functions are only supported in "server" scenarios.</span></span>



| <span data-ttu-id="693ee-150">Fonctions du serveur</span><span class="sxs-lookup"><span data-stu-id="693ee-150">Server Functions</span></span>                                                                             | <span data-ttu-id="693ee-151">Description</span><span class="sxs-lookup"><span data-stu-id="693ee-151">Description</span></span>                                                                                                                                                                                        |
|----------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="693ee-152">**PeerDistServerPublishStream**</span><span class="sxs-lookup"><span data-stu-id="693ee-152">**PeerDistServerPublishStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishstream)                           | <span data-ttu-id="693ee-153">Crée le **\_ \_ handle de flux PEERDIST** qui peut être utilisé avec [**PeerDistServerPublishAddToStream**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream) pour créer des informations de contenu pour le flux de contenu.</span><span class="sxs-lookup"><span data-stu-id="693ee-153">Creates the **PEERDIST\_STREAM\_HANDLE** which can be used with [**PeerDistServerPublishAddToStream**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream) to create content information for the content stream.</span></span> |
| [<span data-ttu-id="693ee-154">**PeerDistServerPublishAddToStream**</span><span class="sxs-lookup"><span data-stu-id="693ee-154">**PeerDistServerPublishAddToStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream)                 | <span data-ttu-id="693ee-155">Ajoute des données au flux référencé par le handle de flux PeerDist.</span><span class="sxs-lookup"><span data-stu-id="693ee-155">Adds data to the stream referenced by the PeerDist stream handle.</span></span>                                                                                                                                  |
| [<span data-ttu-id="693ee-156">**PeerDistServerPublishCompleteStream**</span><span class="sxs-lookup"><span data-stu-id="693ee-156">**PeerDistServerPublishCompleteStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishcompletestream)           | <span data-ttu-id="693ee-157">Appelé pour indiquer que toutes les données ont été ajoutées au flux.</span><span class="sxs-lookup"><span data-stu-id="693ee-157">Called to indicate that all data has been added to the stream.</span></span>                                                                                                                                     |
| [<span data-ttu-id="693ee-158">**PeerDistServerCloseStreamHandle**</span><span class="sxs-lookup"><span data-stu-id="693ee-158">**PeerDistServerCloseStreamHandle**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosestreamhandle)                   | <span data-ttu-id="693ee-159">Ferme le handle de flux.</span><span class="sxs-lookup"><span data-stu-id="693ee-159">Closes the stream handle.</span></span>                                                                                                                                                                          |
| [<span data-ttu-id="693ee-160">**PeerDistServerUnpublish**</span><span class="sxs-lookup"><span data-stu-id="693ee-160">**PeerDistServerUnpublish**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverunpublish)                                   | <span data-ttu-id="693ee-161">Annule la publication du contenu précédemment publié dans le service de distribution d’homologue.</span><span class="sxs-lookup"><span data-stu-id="693ee-161">Unpublishes previously published content in the Peer Distribution service.</span></span>                                                                                                                         |
| [<span data-ttu-id="693ee-162">**PeerDistServerOpenContentInformation**</span><span class="sxs-lookup"><span data-stu-id="693ee-162">**PeerDistServerOpenContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation)         | <span data-ttu-id="693ee-163">Ouvre un **\_ \_ handle CONTENTINFO CONTENTINFO** pour le contenu publié.</span><span class="sxs-lookup"><span data-stu-id="693ee-163">Opens a **PEERDIST\_CONTENTINFO\_HANDLE** for published content.</span></span>                                                                                                                                   |
| [<span data-ttu-id="693ee-164">**PeerDistServerOpenContentInformationEx**</span><span class="sxs-lookup"><span data-stu-id="693ee-164">**PeerDistServerOpenContentInformationEx**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistserveropencontentinformationex)     | <span data-ttu-id="693ee-165">Ouvre un **\_ \_ handle CONTENTINFO CONTENTINFO** pour le contenu publié.</span><span class="sxs-lookup"><span data-stu-id="693ee-165">Opens a **PEERDIST\_CONTENTINFO\_HANDLE** for published content.</span></span>                                                                                                                                   |
| [<span data-ttu-id="693ee-166">**PeerDistServerRetrieveContentInformation**</span><span class="sxs-lookup"><span data-stu-id="693ee-166">**PeerDistServerRetrieveContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverretrievecontentinformation) | <span data-ttu-id="693ee-167">Récupère les informations de contenu associées au contenu publié.</span><span class="sxs-lookup"><span data-stu-id="693ee-167">Retrieves the content information associated with published content.</span></span>                                                                                                                               |
| [<span data-ttu-id="693ee-168">**PeerDistServerCloseContentInformation**</span><span class="sxs-lookup"><span data-stu-id="693ee-168">**PeerDistServerCloseContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosecontentinformation)       | <span data-ttu-id="693ee-169">**PEERDIST \_ \_Gestionnaire CONTENTINFO** ouvert par [**PeerDistServerOpenContentInformation**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation).</span><span class="sxs-lookup"><span data-stu-id="693ee-169">**PEERDIST\_CONTENTINFO\_HANDLE** opened by [**PeerDistServerOpenContentInformation**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation).</span></span>                                                                  |
| [<span data-ttu-id="693ee-170">**PeerDistServerCancelAsyncOperation**</span><span class="sxs-lookup"><span data-stu-id="693ee-170">**PeerDistServerCancelAsyncOperation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistservercancelasyncoperation)             | <span data-ttu-id="693ee-171">Annule l’opération asynchrone associée à l’identificateur de contenu et à la structure [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) .</span><span class="sxs-lookup"><span data-stu-id="693ee-171">Cancels the asynchronous operation associated with the content identifier and [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure.</span></span>                                             |



 

 

 
