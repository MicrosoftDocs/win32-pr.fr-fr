---
description: L’interface SSPI (Security Service Provider Interface) fournit une interface universelle et standard pour les applications distribuées sécurisées.
ms.assetid: c3cebb9d-9094-493f-96d3-763a0c282dfb
title: Fournisseurs de services de sécurité
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2121940337d0f4e06c53981cf30f0125180c466
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106524345"
---
# <a name="security-service-providers"></a><span data-ttu-id="81c64-103">Fournisseurs de services de sécurité</span><span class="sxs-lookup"><span data-stu-id="81c64-103">Security Service Providers</span></span>

<span data-ttu-id="81c64-104">L’interface SSPI (Security Service Provider Interface) fournit une interface universelle et standard pour les applications distribuées sécurisées.</span><span class="sxs-lookup"><span data-stu-id="81c64-104">The Security Service Provider Interface (SSPI) provides a universal, industry-standard interface for secure distributed applications.</span></span> <span data-ttu-id="81c64-105">L’API graphique d’homologues offre aux applications un moyen de sécuriser les liens dans un graphique en spécifiant un fournisseur de services de sécurité (SSP), qui est une DLL qui implémente une interface SSPI.</span><span class="sxs-lookup"><span data-stu-id="81c64-105">The Peer Graphing API provides a way for applications to secure links in a graph by specifying a Security Service Provider (SSP), which is a DLL that implements an SSPI interface.</span></span> <span data-ttu-id="81c64-106">Une application spécifie un fournisseur de services partagés lors de la création d’un graphique à l’aide de [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span><span class="sxs-lookup"><span data-stu-id="81c64-106">An application specifies an SSP when it creates a graph by using [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span>

<span data-ttu-id="81c64-107">Pour plus d’informations sur la création de votre propre fournisseur de services partagés, consultez le lien de la documentation SSPI dans la liste des [liens de référence](graphing-reference-links.md)sur les graphiques.</span><span class="sxs-lookup"><span data-stu-id="81c64-107">For more information about creating your own SSP, see the SSPI documentation link in the list of [Graphing Reference Links](graphing-reference-links.md).</span></span>

## <a name="programming-considerations-for-implementing-an-ssp"></a><span data-ttu-id="81c64-108">Considérations relatives à la programmation pour l’implémentation d’un SSP</span><span class="sxs-lookup"><span data-stu-id="81c64-108">Programming Considerations for Implementing an SSP</span></span>

<span data-ttu-id="81c64-109">Soyez prudent lors de l’appel à une application à partir d’un SSP.</span><span class="sxs-lookup"><span data-stu-id="81c64-109">Use caution when calling into an application from within an SSP.</span></span> <span data-ttu-id="81c64-110">Les considérations suivantes s’appliquent aux rappels de fournisseur de services partagés :</span><span class="sxs-lookup"><span data-stu-id="81c64-110">The following considerations apply to SSP callbacks:</span></span>

-   <span data-ttu-id="81c64-111">Le retour des rappels ne doit pas prendre beaucoup de temps, car ils sont appelés pendant la négociation de la connexion.</span><span class="sxs-lookup"><span data-stu-id="81c64-111">Callbacks should not take a long time to return, because they are called during connection negotiation.</span></span> <span data-ttu-id="81c64-112">S’il faut trop de temps pour établir une connexion, la connexion peut être supprimée.</span><span class="sxs-lookup"><span data-stu-id="81c64-112">If it takes too long for a connection to be established, the connection can be dropped.</span></span>
-   <span data-ttu-id="81c64-113">L’API de représentation graphique des homologues ajuste dynamiquement les valeurs de délai d’attente de connexion, en fonction de la charge réelle d’un système.</span><span class="sxs-lookup"><span data-stu-id="81c64-113">The Peer Graphing API dynamically adjusts connection timeout values, based on the actual load of a system.</span></span> <span data-ttu-id="81c64-114">La valeur du délai d’expiration le plus bas est de 20 secondes.</span><span class="sxs-lookup"><span data-stu-id="81c64-114">The lowest timeout value is 20 seconds.</span></span>
-   <span data-ttu-id="81c64-115">Pour éviter les situations de blocage potentielles, une application ne doit pas accéder à la base de données graphique des homologues à partir d’un rappel.</span><span class="sxs-lookup"><span data-stu-id="81c64-115">To avoid potential deadlock situations, an application must not access the peer graphing database from a callback.</span></span> <span data-ttu-id="81c64-116">Si une application requiert des informations de la base de données de graphiques, l’application peut mettre en cache les informations nécessaires, puis faire référence au cache à partir du rappel.</span><span class="sxs-lookup"><span data-stu-id="81c64-116">If an application requires information from the graphing database, the application can cache the necessary information, and then refer to the cache from within the callback.</span></span> <span data-ttu-id="81c64-117">La mise en cache peut également contribuer à réduire le temps de connexion.</span><span class="sxs-lookup"><span data-stu-id="81c64-117">Caching can also help decrease connection time.</span></span>

<span data-ttu-id="81c64-118">Lors de l’appel des points d’entrée SSPI, l’infrastructure de représentation graphique des homologues requiert des valeurs spécifiques pour des paramètres spécifiques de cinq (5) fonctions.</span><span class="sxs-lookup"><span data-stu-id="81c64-118">When calling the SSPI entry points, the Peer Graphing Infrastructure requires specific values for specific parameters of five (5) functions.</span></span> <span data-ttu-id="81c64-119">Vous ne pouvez pas modifier ces valeurs de paramètre fournies au fournisseur SSP et le SSP peut ignorer les valeurs des cinq paramètres ou les gérer correctement.</span><span class="sxs-lookup"><span data-stu-id="81c64-119">You cannot change these parameter values provided to SSP, and the SSP can either ignore the values for the five parameters or handle them gracefully.</span></span> <span data-ttu-id="81c64-120">La liste suivante identifie ces paramètres spécifiques et les valeurs requises :</span><span class="sxs-lookup"><span data-stu-id="81c64-120">The following list identifies these specific parameters and required values:</span></span>

-   [<span data-ttu-id="81c64-121">**AcquireCredentialsHandle**</span><span class="sxs-lookup"><span data-stu-id="81c64-121">**AcquireCredentialsHandle**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="81c64-122">Spécifiez un (1) pour le paramètre *pvGetKeyArgument* .</span><span class="sxs-lookup"><span data-stu-id="81c64-122">Specify one (1) for the *pvGetKeyArgument* parameter.</span></span> <span data-ttu-id="81c64-123">Spécifie la **valeur null** pour les paramètres *pszPrincipal*, *pvLogonID* et *pGetKeyFn* .</span><span class="sxs-lookup"><span data-stu-id="81c64-123">Specifies **NULL** for the *pszPrincipal*, *pvLogonID*, and *pGetKeyFn* parameters.</span></span>

-   [<span data-ttu-id="81c64-124">**InitializeSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="81c64-124">**InitializeSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="81c64-125">Spécifiez les indicateurs suivants pour le paramètre *fContextReq* : ISC req-authentification mutuelle d’ISC req-confidentialité ISC req req intégrité de la séquence de demande ISC req req du flux ISC req **\_ \_ \_ \| \_ \_ \| \_ \_ \| \_ \_ \_ \| \_ \_ \| \_ \_ allouer \_** de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="81c64-125">Specify the following flags for the *fContextReq* parameter: **ISC\_REQ\_MUTUAL\_AUTH \| ISC\_REQ\_CONFIDENTIALITY \| ISC\_REQ\_INTEGRITY \| ISC\_REQ\_SEQUENCE\_DETECT \| ISC\_REQ\_STREAM \| ISC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="81c64-126">**AcceptSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="81c64-126">**AcceptSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="81c64-127">Spécifiez les indicateurs suivants pour le paramètre *fContextReq* : **ASC \_ req \_ Mutual \_ auth \| ASC req \_ \_ Confidential \| ASC \_ req \_ intégrité \| ASC \_ req \_ Sequence \_ détecter \| ASC \_ req \_ Stream \| ASC \_ req \_ allouer \_** de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="81c64-127">Specify the following flags for the *fContextReq* parameter: **ASC\_REQ\_MUTUAL\_AUTH \| ASC\_REQ\_CONFIDENTIALITY \| ASC\_REQ\_INTEGRITY \| ASC\_REQ\_SEQUENCE\_DETECT \| ASC\_REQ\_STREAM \| ASC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="81c64-128">**EncryptMessage**</span><span class="sxs-lookup"><span data-stu-id="81c64-128">**EncryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="81c64-129">Spécifiez zéro (0) pour les paramètres *fQOP* et *MessageSeqNo* .</span><span class="sxs-lookup"><span data-stu-id="81c64-129">Specify zero (0) for the *fQOP* and *MessageSeqNo* parameters.</span></span>

-   [<span data-ttu-id="81c64-130">**DecryptMessage**</span><span class="sxs-lookup"><span data-stu-id="81c64-130">**DecryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="81c64-131">Spécifiez zéro (0) pour le paramètre *MessageSeqNo* et **null** pour le paramètre *pfQOP* .</span><span class="sxs-lookup"><span data-stu-id="81c64-131">Specify zero (0) for the *MessageSeqNo* parameter and **NULL** for the *pfQOP* parameter.</span></span>

<span data-ttu-id="81c64-132">Lors de l’appel de [**EncryptMessage**](graphing-reference-links.md), quatre mémoires tampons sont passées dans la structure **SecBufferDesc** .</span><span class="sxs-lookup"><span data-stu-id="81c64-132">When calling [**EncryptMessage**](graphing-reference-links.md), four buffers are passed in the **SecBufferDesc** structure.</span></span> <span data-ttu-id="81c64-133">Le tableau suivant identifie l’ordre de transmission des mémoires tampons.</span><span class="sxs-lookup"><span data-stu-id="81c64-133">The following table identifies the order to pass the buffers.</span></span>

| <span data-ttu-id="81c64-134">Structure spécifique au fournisseur de services partagés</span><span class="sxs-lookup"><span data-stu-id="81c64-134">SSP-specific structure</span></span>         | <span data-ttu-id="81c64-135">Description</span><span class="sxs-lookup"><span data-stu-id="81c64-135">Description</span></span>                                                                                                                                                                                                       |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="81c64-136">**\_ \_ en-tête de flux SECBUFFER**</span><span class="sxs-lookup"><span data-stu-id="81c64-136">**SECBUFFER\_STREAM\_HEADER**</span></span>  | <span data-ttu-id="81c64-137">Contient les données d’en-tête de sécurité.</span><span class="sxs-lookup"><span data-stu-id="81c64-137">Contains the security header data.</span></span> <span data-ttu-id="81c64-138">La taille de la mémoire tampon d’en-tête est obtenue en appelant [**QueryContextAttributes**](graphing-reference-links.md) et en spécifiant l’attribut de **\_ \_ \_ tailles de flux attr SECPKG** .</span><span class="sxs-lookup"><span data-stu-id="81c64-138">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span>  |
| <span data-ttu-id="81c64-139">**\_données SECBUFFER**</span><span class="sxs-lookup"><span data-stu-id="81c64-139">**SECBUFFER\_DATA**</span></span>            | <span data-ttu-id="81c64-140">Contient le message en texte brut à chiffrer.</span><span class="sxs-lookup"><span data-stu-id="81c64-140">Contains the plain-text message to be encrypted.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="81c64-141">**Code de fin de \_ flux SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="81c64-141">**SECBUFFER\_STREAM\_TRAILER**</span></span> | <span data-ttu-id="81c64-142">Contient les données de code de fin de sécurité.</span><span class="sxs-lookup"><span data-stu-id="81c64-142">Contains the security trailer data.</span></span> <span data-ttu-id="81c64-143">La taille de la mémoire tampon d’en-tête est obtenue en appelant [**QueryContextAttributes**](graphing-reference-links.md) et en spécifiant l’attribut de **\_ \_ \_ tailles de flux attr SECPKG** .</span><span class="sxs-lookup"><span data-stu-id="81c64-143">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span> |
| <span data-ttu-id="81c64-144">**SECBUFFER \_ vide**</span><span class="sxs-lookup"><span data-stu-id="81c64-144">**SECBUFFER\_EMPTY**</span></span>           | <span data-ttu-id="81c64-145">Non initialisé.</span><span class="sxs-lookup"><span data-stu-id="81c64-145">Not initialized.</span></span> <span data-ttu-id="81c64-146">La taille de cette mémoire tampon est égale à zéro (0).</span><span class="sxs-lookup"><span data-stu-id="81c64-146">The size of this buffer is zero (0).</span></span>                                                                                                                                                             |



 

<span data-ttu-id="81c64-147">Lors de l’appel de [**DecryptMessage**](graphing-reference-links.md), l’API de représentation graphique d’homologue passe exactement quatre structures **SecBuffer** .</span><span class="sxs-lookup"><span data-stu-id="81c64-147">When calling [**DecryptMessage**](graphing-reference-links.md), the Peer Graphing API passes exactly four **SecBuffer** structures.</span></span> <span data-ttu-id="81c64-148">La première mémoire tampon est **SECBUFFER \_ Data** et contient un message chiffré.</span><span class="sxs-lookup"><span data-stu-id="81c64-148">The first buffer is **SECBUFFER\_DATA**, and contains an encrypted message.</span></span> <span data-ttu-id="81c64-149">Les mémoires tampons restantes sont utilisées pour la sortie et sont de type **SECBUFFER \_ vide**.</span><span class="sxs-lookup"><span data-stu-id="81c64-149">The remaining buffers are used for output, and are of type **SECBUFFER\_EMPTY**.</span></span>

<span data-ttu-id="81c64-150">Le SSP doit prendre en charge le chiffrement et le déchiffrement des tampons de données utilisateur avec des tailles de 16 Ko et plus dans un appel.</span><span class="sxs-lookup"><span data-stu-id="81c64-150">The SSP needs to support encrypting and decrypting user data buffers with sizes of 16K and greater in one call.</span></span>

 

 



