---
description: Une table de routage distribuée (DRT) existe sous la forme d’une maille de nœuds coopérants, où chaque nœud est une instance d’une application utilisant l’API DRT.
ms.assetid: 257ad7ea-636b-45f2-b514-4a213939d107
title: À propos des tables de routage distribuées
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2dfca9f81cc609d97584ef5a11f999722c696858
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103865182"
---
# <a name="about-distributed-routing-tables"></a><span data-ttu-id="bf13d-103">À propos des tables de routage distribuées</span><span class="sxs-lookup"><span data-stu-id="bf13d-103">About Distributed Routing Tables</span></span>

<span data-ttu-id="bf13d-104">Une table de routage distribuée (DRT) existe sous la forme d’une maille de nœuds coopérants, où chaque nœud est une instance d’une application utilisant l’API DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-104">A Distributed Routing Table (DRT) exists as a mesh of cooperating nodes, where each node is an instance of an application using the DRT API.</span></span> <span data-ttu-id="bf13d-105">Les nœuds qui publient des clés sont chargés d’aider les autres nœuds à publier et à résoudre les clés.</span><span class="sxs-lookup"><span data-stu-id="bf13d-105">Nodes that publish keys are responsible for assisting other nodes publish and resolve keys.</span></span> <span data-ttu-id="bf13d-106">Les nœuds peuvent également participer à un mode « résoudre uniquement », ce qui ne nécessite pas l’assistance des homologues.</span><span class="sxs-lookup"><span data-stu-id="bf13d-106">Nodes can also participate in a "resolve only" fashion, which does not require them to assist peers.</span></span> <span data-ttu-id="bf13d-107">Le protocole DRT s’exécute sur un transport UDP/IPv6.</span><span class="sxs-lookup"><span data-stu-id="bf13d-107">The DRT protocol executes over a UDP/IPv6 transport.</span></span>

<span data-ttu-id="bf13d-108">Nœud qui publie une génération de clé et gère une table de routage locale d’autres nœuds dans la maille.</span><span class="sxs-lookup"><span data-stu-id="bf13d-108">A node that publishes a key builds and maintains a local routing table of other nodes in the mesh.</span></span> <span data-ttu-id="bf13d-109">Cette table de routage est optimisée afin que le nœud puisse localiser rapidement une clé spécifique dans la maille en trouvant la clé directement dans la table de routage locale, ou en demandant à d’autres nœuds de publier des clés numériquement proches de la cible.</span><span class="sxs-lookup"><span data-stu-id="bf13d-109">This routing table is optimized so that the node can quickly locate a specific key in the mesh by finding the key directly in the local routing table, or by asking other nodes publishing keys numerically close to the target.</span></span> <span data-ttu-id="bf13d-110">Cette action est répétée jusqu’à ce que la clé requise soit trouvée ou que le nœud détermine qu’il n’existe pas de clé de ce type.</span><span class="sxs-lookup"><span data-stu-id="bf13d-110">This action is repeated until the required key is found or the node determines that no such key exists.</span></span>

<span data-ttu-id="bf13d-111">Les clés DRT sont des entiers non signés 256 bits.</span><span class="sxs-lookup"><span data-stu-id="bf13d-111">DRT keys are 256-bit unsigned integers.</span></span> <span data-ttu-id="bf13d-112">Les différences entre les clés sont définies par la différence numérique entre elles.</span><span class="sxs-lookup"><span data-stu-id="bf13d-112">Closeness between keys is defined by the numerical difference between them.</span></span> <span data-ttu-id="bf13d-113">L’espace de mémoire DRT est considéré comme circulaire.</span><span class="sxs-lookup"><span data-stu-id="bf13d-113">The DRT keyspace is considered circular.</span></span> <span data-ttu-id="bf13d-114">Par exemple, la première valeur de clé possible et la dernière valeur de clé possible sont considérées comme des voisins.</span><span class="sxs-lookup"><span data-stu-id="bf13d-114">For example, the first possible key value, and the last possible key value are considered neighbors.</span></span>

<span data-ttu-id="bf13d-115">Dans un DRT sécurisé, les nœuds sont requis pour authentifier les clés qu’ils publient.</span><span class="sxs-lookup"><span data-stu-id="bf13d-115">In a secure DRT, nodes are required to authenticate the keys they publish.</span></span> <span data-ttu-id="bf13d-116">Le mécanisme par lequel les nœuds authentifient les clés doit être défini à l’aide de l’API DRT lorsque DRT est initialisé.</span><span class="sxs-lookup"><span data-stu-id="bf13d-116">The mechanism by which nodes authenticate keys must be set using the DRT API when the DRT is initialized.</span></span> <span data-ttu-id="bf13d-117">Pour ce faire, choisissez un fournisseur de sécurité pour DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-117">This is done by choosing a security provider for the DRT.</span></span> <span data-ttu-id="bf13d-118">Un fournisseur de sécurité est un module qui peut produire des jetons utilisés pour authentifier les clés et vérifier les jetons produits par d’autres nœuds.</span><span class="sxs-lookup"><span data-stu-id="bf13d-118">A security provider is a module that can produce tokens used to authenticate keys, and verify tokens produced by other nodes.</span></span> <span data-ttu-id="bf13d-119">Il doit implémenter l’interface du fournisseur de sécurité qui est définie dans cette documentation.</span><span class="sxs-lookup"><span data-stu-id="bf13d-119">It must implement the security provider interface that is defined in this documentation.</span></span> <span data-ttu-id="bf13d-120">Le DRT de Windows 7 est fourni avec deux fournisseurs de sécurité entièrement implémentés qui peuvent être utilisés pour créer des applications Windows.</span><span class="sxs-lookup"><span data-stu-id="bf13d-120">The Windows 7 DRT ships with two fully implemented security providers that can be used to build Windows applications.</span></span>

<span data-ttu-id="bf13d-121">Pendant l’initialisation, une application doit également fournir à DRT un fournisseur de démarrage.</span><span class="sxs-lookup"><span data-stu-id="bf13d-121">During initialization, an application must also supply the DRT with a bootstrap provider.</span></span> <span data-ttu-id="bf13d-122">Le fournisseur bootstrap est un module qui peut récupérer les points de terminaison réseau des nœuds déjà présents dans la maille DRT, et est appelé par le DRT lorsqu’un nouveau nœud est établi.</span><span class="sxs-lookup"><span data-stu-id="bf13d-122">The bootstrap provider is a module that can retrieve the network endpoints of nodes already present in the DRT mesh, and is called upon by the DRT when a new node is established.</span></span> <span data-ttu-id="bf13d-123">À l’instar du module fournisseur de sécurité, le fournisseur bootstrap doit implémenter une interface bien définie.</span><span class="sxs-lookup"><span data-stu-id="bf13d-123">Like the security provider module, the bootstrap provider must implement a well defined interface.</span></span> <span data-ttu-id="bf13d-124">Le DRT de Windows 7 est fourni avec deux fournisseurs de démarrage entièrement implémentés.</span><span class="sxs-lookup"><span data-stu-id="bf13d-124">The Windows 7 DRT ships with two fully implemented bootstrap providers.</span></span>

<span data-ttu-id="bf13d-125">Le DRT prend en compte les voisins immédiats d’une clé spéciale.</span><span class="sxs-lookup"><span data-stu-id="bf13d-125">The DRT considers the immediate neighbors of a key special.</span></span> <span data-ttu-id="bf13d-126">Les cinq clés les plus proches numériquement plus petites et les cinq clés les plus proches numériquement supérieures à une clé publiée sont appelées un ensemble feuille.</span><span class="sxs-lookup"><span data-stu-id="bf13d-126">The five closest keys numerically smaller and the five closest keys numerically larger than a published key form what is called a leaf set.</span></span> <span data-ttu-id="bf13d-127">Le DRT signale les modifications apportées à l’ensemble feuille d’une clé par le biais de l’API DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-127">The DRT reports changes to the leaf set of a key through the DRT API.</span></span>

## <a name="drt-life-cycle-and-state-transitions"></a><span data-ttu-id="bf13d-128">Transitions d’État et de cycle de vie DRT</span><span class="sxs-lookup"><span data-stu-id="bf13d-128">DRT Life Cycle and State Transitions</span></span>

<span data-ttu-id="bf13d-129">Une application peut initialiser une instance DRT locale à l’aide de la fonction [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen) .</span><span class="sxs-lookup"><span data-stu-id="bf13d-129">An application can initialize a local DRT instance using the [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen) function.</span></span> <span data-ttu-id="bf13d-130">Cette fonction déclenche le processus d’amorçage, où l’API DRT appelle le fournisseur bootstrap pour connaître les clés et les points de terminaison réseau d’autres nœuds qui participent déjà à DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-130">This function triggers the bootstrapping process, where the DRT API calls upon the bootstrap provider to learn the keys and network endpoints of other nodes already participating in the DRT.</span></span> <span data-ttu-id="bf13d-131">Si le fournisseur de démarrage réussit à localiser au moins un autre nœud, le DRT passe à l' \_ état actif DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-131">If the bootstrap provider successfully locates at least one other node, the DRT enters the DRT\_ACTIVE state.</span></span> <span data-ttu-id="bf13d-132">Dans cet État, l’application peut rechercher les clés publiées par d’autres nœuds et peut publier les clés qui peuvent être résolues.</span><span class="sxs-lookup"><span data-stu-id="bf13d-132">In this state, the application can search for keys published by other nodes, and can publish keys that can be resolved.</span></span> <span data-ttu-id="bf13d-133">Si le fournisseur bootstrap ne parvient pas à trouver d’autres nœuds, le DRT passe à l' \_ État autonome DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-133">If the bootstrap provider cannot successfully locate other nodes, the DRT enters the DRT\_ALONE state.</span></span> <span data-ttu-id="bf13d-134">Le DRT reste dans l' \_ État autonome DRT et tente de se réamorcer périodiquement afin de localiser les homologues et de passer à l' \_ état actif DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-134">The DRT will stay in the DRT\_ALONE state and will attempt to bootstrap periodically in order to locate peers and move to the DRT\_ACTIVE state.</span></span>

<span data-ttu-id="bf13d-135">Un nœud peut passer à ces États à partir d’une \_ activité DRT active.</span><span class="sxs-lookup"><span data-stu-id="bf13d-135">A node can transition to these states from DRT\_ACTIVE.</span></span>

| <span data-ttu-id="bf13d-136">État du cycle de vie</span><span class="sxs-lookup"><span data-stu-id="bf13d-136">Life Cycle State</span></span> | <span data-ttu-id="bf13d-137">Conditions</span><span class="sxs-lookup"><span data-stu-id="bf13d-137">Conditions</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bf13d-138">DRT \_ seul</span><span class="sxs-lookup"><span data-stu-id="bf13d-138">DRT\_ALONE</span></span>       | <span data-ttu-id="bf13d-139">Le nœud local n’a pas découvert d’autres nœuds dans le DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-139">The local node has not discovered other nodes in the DRT.</span></span> <span data-ttu-id="bf13d-140">Dans cet État, le nœud continue à écouter d’autres nœuds dans le DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-140">While in this state, the node continues to listen for other nodes within the DRT.</span></span><br/> <span data-ttu-id="bf13d-141">Si un autre nœud rejoint le DRT, le nœud local passera à l' \_ état actif DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-141">If another node joins the DRT, the local node will transition to the DRT\_ACTIVE state.</span></span> <span data-ttu-id="bf13d-142">Si le réseau est défaillant, il passera à DRT \_ aucun \_ réseau.</span><span class="sxs-lookup"><span data-stu-id="bf13d-142">If the network is down, it will transition to DRT\_NO\_NETWORK.</span></span> <span data-ttu-id="bf13d-143">En cas d’erreur grave avec l’DRT, le nœud passera à l' \_ État d’erreur DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-143">In the event of a serious error with the DRT the node will transition to the DRT\_FAULTED state.</span></span><br/> |
| <span data-ttu-id="bf13d-144">DRT \_ sans \_ réseau</span><span class="sxs-lookup"><span data-stu-id="bf13d-144">DRT\_NO\_NETWORK</span></span> | <span data-ttu-id="bf13d-145">Lorsqu’un nœud perd la connectivité réseau, il passe à l' \_ État non \_ réseau DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-145">When a node loses network connectivity, it transitions to the DRT\_NO\_NETWORK state.</span></span> <span data-ttu-id="bf13d-146">À ce stade, l’application peut attendre la restauration de la connectivité réseau et peut fermer DRT.</span><span class="sxs-lookup"><span data-stu-id="bf13d-146">At this point the application can wait for network connectivity to be restored, and can close the DRT.</span></span><br/>                                                                                                                                                                                                                    |
| <span data-ttu-id="bf13d-147">\_erreur DRT</span><span class="sxs-lookup"><span data-stu-id="bf13d-147">DRT\_FAULTED</span></span>     | <span data-ttu-id="bf13d-148">Une erreur grave s’est produite dans le nœud local.</span><span class="sxs-lookup"><span data-stu-id="bf13d-148">A serious error has occurred within the local node.</span></span> <span data-ttu-id="bf13d-149">Par exemple, si la mémoire physique de l’ordinateur local est insuffisante.</span><span class="sxs-lookup"><span data-stu-id="bf13d-149">For example, if the local machine runs out of physical memory.</span></span><br/> <span data-ttu-id="bf13d-150">Lorsqu’un nœud passe à cet État, l’application doit appeler l’API [**DrtClose**](/windows/desktop/api/drt/nf-drt-drtclose) , corriger le problème et réinitialiser le DRT avec [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen).</span><span class="sxs-lookup"><span data-stu-id="bf13d-150">While a node enters this state, the application must call the [**DrtClose**](/windows/desktop/api/drt/nf-drt-drtclose) API, correct the problem, and re-initialize the DRT with [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen).</span></span><br/>                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="bf13d-151">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="bf13d-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bf13d-152">Utilisation du API Table de routage distribué</span><span class="sxs-lookup"><span data-stu-id="bf13d-152">Using the Distributed Routing Table API</span></span>](using-the-distributed-routing-table-api.md)
</dt> <dt>

[<span data-ttu-id="bf13d-153">Référence de API Table de routage distribué</span><span class="sxs-lookup"><span data-stu-id="bf13d-153">Distributed Routing Table API Reference</span></span>](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 




