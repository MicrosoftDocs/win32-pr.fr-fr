---
description: Cette rubrique décrit le processus d’invitation d’un pair à joindre un groupe homologue à l’aide des API de regroupement pair.
ms.assetid: 6afcbfec-b1df-45cd-8a43-221dfe5d8c33
title: Invitation d’un pair à un groupe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68b1e8852f58387d424944d4a8821f56b5e11e8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103952032"
---
# <a name="inviting-a-peer-to-a-group"></a><span data-ttu-id="2479a-103">Invitation d’un pair à un groupe</span><span class="sxs-lookup"><span data-stu-id="2479a-103">Inviting a Peer to a Group</span></span>

<span data-ttu-id="2479a-104">Cette rubrique décrit le processus d’invitation d’un pair à joindre un groupe homologue à l’aide des API de regroupement pair.</span><span class="sxs-lookup"><span data-stu-id="2479a-104">This topic discusses the process of inviting a peer to join a peer group using the Peer Grouping APIs.</span></span>

<span data-ttu-id="2479a-105">Un groupe homologue requiert des informations d’identification valides pour participer.</span><span class="sxs-lookup"><span data-stu-id="2479a-105">A peer group requires valid credentials to participate.</span></span> <span data-ttu-id="2479a-106">Les informations d’identification sont délivrées en dehors d’un groupe sous la forme d’invitations, ou directement aux membres d’un groupe lorsque des mises à jour des informations d’identification sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="2479a-106">Credentials are issued from outside a group in the form of invitations, or directly to members within a group when credential updates are needed.</span></span>

## <a name="group-member-certificates"></a><span data-ttu-id="2479a-107">Certificats de membre de groupe</span><span class="sxs-lookup"><span data-stu-id="2479a-107">Group Member Certificates</span></span>

<span data-ttu-id="2479a-108">Un groupe homologue est créé lorsqu’une application effectue un appel à [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span><span class="sxs-lookup"><span data-stu-id="2479a-108">A peer group is created when an application makes a call to [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span></span>

<span data-ttu-id="2479a-109">Pour participer à un groupe pair, chaque homologue doit avoir une identité d’homologue.</span><span class="sxs-lookup"><span data-stu-id="2479a-109">To participate in a peer group, each peer must have a peer identity.</span></span> <span data-ttu-id="2479a-110">Appelez [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) jusqu’à ce que toutes les identités d’homologue définies pour l’homologue aient été retournées, puis sélectionnez celle qui doit être utilisée.</span><span class="sxs-lookup"><span data-stu-id="2479a-110">Call [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) until all peer identities defined for the peer have been returned, and select the one that should be used.</span></span> <span data-ttu-id="2479a-111">Si une identité d’homologue n’existe pas, créez-en une en appelant [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span><span class="sxs-lookup"><span data-stu-id="2479a-111">If a peer identity does not exist, create one by calling [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span></span>

<span data-ttu-id="2479a-112">Chaque identité d’homologue est associée à un ensemble spécifique d’informations d’identification qui peuvent être utilisées pour prouver l’appartenance à un groupe homologue lors de la connexion, ainsi que lors de la publication d’enregistrements ou de l’invitation de membres supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="2479a-112">Each peer identity is associated with a specific set of credentials that can be used to prove peer group membership when connecting, as well as when publishing records or inviting additional members.</span></span> <span data-ttu-id="2479a-113">Ces informations d’identification sont représentées sous forme de chaînes de [certificats X. 509](https://www.ietf.org/rfc/rfc2511.txt) appelés « certificats d’appartenance au groupe » (GMC).</span><span class="sxs-lookup"><span data-stu-id="2479a-113">These credentials are represented as chains of [X.509 certificates](https://www.ietf.org/rfc/rfc2511.txt) called Group Membership Certificates (GMC).</span></span>

<span data-ttu-id="2479a-114">Pour créer le GMC pour une identité d’homologue, vous devez d’abord obtenir sa clé publique.</span><span class="sxs-lookup"><span data-stu-id="2479a-114">To create the GMC for a peer identity, you must first obtain its public key.</span></span> <span data-ttu-id="2479a-115">Cette clé est obtenue en appelant [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) sur l’invitation potentielle et en passant son identité d’homologue.</span><span class="sxs-lookup"><span data-stu-id="2479a-115">This key is obtained by calling [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) on the potential invitee and passing in its peer identity.</span></span> <span data-ttu-id="2479a-116">Cette fonction renvoie un certificat encodé en base 64 (IDC) qui contient la clé publique RSA utilisée pour créer le GMC pour l’identité de l’homologue (entre autres choses), encapsulée dans un objet BLOB XML, au format suivant :</span><span class="sxs-lookup"><span data-stu-id="2479a-116">This function returns a base-64 encoded certificate (IDC) that contains the RSA public key used to create the GMC for the peer identity (among other things), encapsulated in an XML blob, in the following format:</span></span>

``` syntax
<PEERIDENTITYINFO VERSION="1.0">
     <IDC xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          <!-- Base-64 encoded certificate  -->
     </IDC>
</PEERIDENTITYINFO>
```

<span data-ttu-id="2479a-117">Cette chaîne peut être passée à [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), qui retourne une invitation qui contient le GMC pour cette identité d’homologue.</span><span class="sxs-lookup"><span data-stu-id="2479a-117">This string can be passed to [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), which returns an invitation that contains the GMC for that peer identity.</span></span> <span data-ttu-id="2479a-118">L’invitation doit être passée à l’invité à l’aide d’un processus différent, tel que le courrier électronique, FTP ou un partage de fichiers sécurisé.</span><span class="sxs-lookup"><span data-stu-id="2479a-118">The invitation must be passed to the invitee using a different process such as e-mail, FTP, or a secure file share.</span></span>

<span data-ttu-id="2479a-119">L’IDC lui-même peut également être placé dans une nouvelle structure d’informations sur les [**\_ informations d’identification \_ de l’homologue**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) et être passé à [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), ce qui génère de la même manière une invitation.</span><span class="sxs-lookup"><span data-stu-id="2479a-119">Alternatively, the IDC itself can be placed in a new [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure and passed to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), which likewise generates an invitation.</span></span>

<span data-ttu-id="2479a-120">Notez que les applications ne sont pas autorisées à ajouter des balises dans la balise **PEERIDENTITYINFO** ou à modifier ce fragment XML de quelque manière que ce soit.</span><span class="sxs-lookup"><span data-stu-id="2479a-120">Note that applications are not allowed to add tags within the **PEERIDENTITYINFO** tag or modify this XML fragment in any way.</span></span> <span data-ttu-id="2479a-121">Les applications sont autorisées à incorporer ce fragment XML dans d’autres documents XML, mais doivent supprimer toutes les données XML spécifiques à l’application avant de passer ce fragment aux fonctions [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) ou [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) .</span><span class="sxs-lookup"><span data-stu-id="2479a-121">Applications are allowed to incorporate this XML fragment into other XML documents, but must strip out all application-specific XML before passing this fragment to the [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) or [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) functions.</span></span>

<span data-ttu-id="2479a-122">Les GMCs membres sont émis par les administrateurs et le créateur du groupe homologue.</span><span class="sxs-lookup"><span data-stu-id="2479a-122">Member GMCs are issued by administrators and the peer group creator.</span></span> <span data-ttu-id="2479a-123">Les membres doivent obtenir de nouvelles GMCs avec des durées de vie étendues de leur GMCs avant que le délai d’expiration soit écoulé.</span><span class="sxs-lookup"><span data-stu-id="2479a-123">Members must obtain new GMCs with extended lifetimes their GMCs before the expiration time has passed.</span></span> <span data-ttu-id="2479a-124">L’administrateur du groupe homologue émet des informations d’identification mises à jour en appelant [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) avec les informations d’identification existantes pour cet homologue.</span><span class="sxs-lookup"><span data-stu-id="2479a-124">The peer group administrator issues updated credentials by calling [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) with the existing credentials for that peer.</span></span>

<span data-ttu-id="2479a-125">La structure des [**\_ \_ informations d’identification de l’homologue**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) contient les données de base sur l’état d’appartenance d’un homologue, y compris la clé publique pour leur GMC.</span><span class="sxs-lookup"><span data-stu-id="2479a-125">The [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure contains the basic data on a peer's membership status, including the public key for their GMC.</span></span> <span data-ttu-id="2479a-126">Les informations d’identification nouvellement émises peuvent être publiées dans le groupe homologue en définissant l' \_ indicateur des informations d’identification du magasin du groupe homologue \_ \_ dans l’appel à [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="2479a-126">Newly-issued credentials can be published to the peer group by setting the PEER\_GROUP\_STORE\_CREDENTIALS flag in the call to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="2479a-127">Lorsque le destinataire des nouvelles informations d’identification rejoint le groupe homologue, les informations d’identification existantes sont mises à jour par l’infrastructure de regroupement pair.</span><span class="sxs-lookup"><span data-stu-id="2479a-127">When the recipient of the new credentials joins the peer group, it's existing credentials will be updated by the Peer Grouping Infrastructure.</span></span>

## <a name="issuing-an-invitation"></a><span data-ttu-id="2479a-128">Émission d’une invitation</span><span class="sxs-lookup"><span data-stu-id="2479a-128">Issuing an Invitation</span></span>

<span data-ttu-id="2479a-129">Un membre est invité à rejoindre le groupe homologue de l’une des deux manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="2479a-129">A member is invited to join the peer group in one of the following two ways:</span></span>

-   <span data-ttu-id="2479a-130">Un administrateur de groupe homologue appelle [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), en transmettant la chaîne XML des informations d’identité obtenue de l’invitation potentielle via un mécanisme hors bande commun, tel qu’un e-mail ou une session de messagerie instantanée.</span><span class="sxs-lookup"><span data-stu-id="2479a-130">A peer group administrator calls [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), passing in the identity information XML string obtained from the potential invitee via a common out-of-band mechanism, such as email or an IM session.</span></span> <span data-ttu-id="2479a-131">L’invitation est également transmise par un processus ou un mécanisme externe à l’homologue, qui le recevra finalement sous la forme d’une chaîne XML ou d’un fichier texte.</span><span class="sxs-lookup"><span data-stu-id="2479a-131">The invitation is also passed through some external process or mechanism to the peer, who will ultimately receive it as an XML string or text file.</span></span>
-   <span data-ttu-id="2479a-132">Un administrateur de groupe homologue appelle [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="2479a-132">A peer group administrator calls [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="2479a-133">Pour utiliser cette fonction, l’homologue doit déjà avoir publié les informations d’appartenance au groupe homologue ([**\_ membre homologue**](/windows/desktop/api/P2P/ns-p2p-peer_member)) ou disposer d’une clé publique disponible (de la paire de clés RSA utilisée pour créer l’identité de sujet).</span><span class="sxs-lookup"><span data-stu-id="2479a-133">To use this function, the peer must have already published membership information to the peer group ([**PEER\_MEMBER**](/windows/desktop/api/P2P/ns-p2p-peer_member)), or have an available public key (of the RSA key pair used to create the subject identity).</span></span> <span data-ttu-id="2479a-134">Dans le premier cas, la structure des [**\_ \_ informations d’identification de l’homologue**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) requise pour **PeerGroupIssueCredentials** peut être obtenue à partir de la structure de **\_ membre homologue** . dans ce dernier cas, une nouvelle structure **\_ d' \_ informations d’informations d’identification de pair** peut être remplie avec la clé publique.</span><span class="sxs-lookup"><span data-stu-id="2479a-134">In the former case, the [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure required for **PeerGroupIssueCredentials** can be obtained from the **PEER\_MEMBER** structure; in the latter case, a new **PEER\_CREDENTIAL\_INFO** structure can be populated with the public key.</span></span>

<span data-ttu-id="2479a-135">Une fois la chaîne d’invitation reçue, l’homologue la transmet à [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) pour joindre le groupe homologue.</span><span class="sxs-lookup"><span data-stu-id="2479a-135">After receiving the invitation string, the peer passes it to [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) to join the peer group.</span></span> <span data-ttu-id="2479a-136">Si l’appel à **PeerGroupJoin** réussit, l’homologue peut ensuite ouvrir le groupe homologue en appelant [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span><span class="sxs-lookup"><span data-stu-id="2479a-136">If the call to **PeerGroupJoin** is successful, the peer can later open the peer group by calling [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span></span>

## <a name="parsing-an-invitation"></a><span data-ttu-id="2479a-137">Analyse d’une invitation</span><span class="sxs-lookup"><span data-stu-id="2479a-137">Parsing an Invitation</span></span>

<span data-ttu-id="2479a-138">Si vous le souhaitez, vous pouvez analyser une invitation en appelant [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), qui retourne une structure d' [**\_ \_ informations d’invitation d’homologue**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) .</span><span class="sxs-lookup"><span data-stu-id="2479a-138">Optionally, an invitation can be parsed by calling [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), which returns a [**PEER\_INVITATION\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) structure.</span></span> <span data-ttu-id="2479a-139">Les champs de la structure peuvent être facilement obtenus à des fins d’affichage.</span><span class="sxs-lookup"><span data-stu-id="2479a-139">The fields in the structure can be easily obtained for display purposes.</span></span>

 

 



