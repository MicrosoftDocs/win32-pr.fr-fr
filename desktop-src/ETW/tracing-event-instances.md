---
description: Les fournisseurs classiques utilisent la fonction TraceEventInstance pour suivre les événements qui font partie d’une transaction unique. Vous pouvez également utiliser cette fonction pour tracer les événements parent/enfant.
ms.assetid: 246e9443-3120-49bf-a6e3-64dddba348fa
title: Écriture d’événements connexes dans un fournisseur Classic
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 771b08a66625d5cd6e723fbc2e12eed87bd1d434
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104321106"
---
# <a name="writing-related-events-in-a-classic-provider"></a><span data-ttu-id="a72c8-104">Écriture d’événements connexes dans un fournisseur Classic</span><span class="sxs-lookup"><span data-stu-id="a72c8-104">Writing Related Events in a Classic Provider</span></span>

<span data-ttu-id="a72c8-105">Les fournisseurs [classiques](about-event-tracing.md) utilisent la fonction [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) pour suivre les événements qui font partie d’une transaction unique.</span><span class="sxs-lookup"><span data-stu-id="a72c8-105">[Classic](about-event-tracing.md) providers use the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function to trace events that are part of a single transaction.</span></span> <span data-ttu-id="a72c8-106">Vous pouvez également utiliser cette fonction pour tracer les événements parent/enfant.</span><span class="sxs-lookup"><span data-stu-id="a72c8-106">You can also use this function to trace parent/child events.</span></span>

<span data-ttu-id="a72c8-107">Avant d’appeler la fonction [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) , vous devez d’abord appeler la fonction [**CreateTraceInstanceId**](/windows/win32/api/evntrace/nf-evntrace-createtraceinstanceid) pour obtenir un identificateur de transaction.</span><span class="sxs-lookup"><span data-stu-id="a72c8-107">Before calling the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function, you must first call the [**CreateTraceInstanceId**](/windows/win32/api/evntrace/nf-evntrace-createtraceinstanceid) function to obtain a transaction identifier.</span></span> <span data-ttu-id="a72c8-108">Cette fonction génère un identificateur de transaction unique et le mappe à un handle de GUID de classe inscrit.</span><span class="sxs-lookup"><span data-stu-id="a72c8-108">This function generates a unique transaction identifier, and maps it to a registered class GUID handle.</span></span> <span data-ttu-id="a72c8-109">Les descripteurs des GUID de classe inscrits sont disponibles dans les membres **RegHandle** des structures d' [**inscription de \_ GUID \_ de trace**](/windows/win32/api/evntrace/ns-evntrace-trace_guid_registration) , après l’appel de la fonction [**RegisterTraceGuids**](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) .</span><span class="sxs-lookup"><span data-stu-id="a72c8-109">The handles for registered class GUIDs are available in the **RegHandle** members of [**TRACE\_GUID\_REGISTRATION**](/windows/win32/api/evntrace/ns-evntrace-trace_guid_registration) structures, after calling the [**RegisterTraceGuids**](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) function.</span></span> <span data-ttu-id="a72c8-110">L’identificateur de transaction est placé dans le membre **InstanceID** d’une structure d' [**\_ \_ informations d’instance d’événement**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) que vous transmettez à la fonction **CreateTraceInstanceId** .</span><span class="sxs-lookup"><span data-stu-id="a72c8-110">The transaction identifier is placed in the **InstanceId** member of an [**EVENT\_INSTANCE\_INFO**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) structure that you pass to the **CreateTraceInstanceId** function.</span></span>

<span data-ttu-id="a72c8-111">La structure d' [**\_ \_ en-tête**](/windows/win32/api/evntrace/ns-evntrace-event_instance_header) de l’instance d’événement qui est passée à la fonction [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) est similaire à la structure d' [**\_ \_ en-tête de suivi d’événements**](/windows/win32/api/evntrace/ns-evntrace-event_trace_header) (consultez suivi des [événements](tracing-events.md)), à la différence qu’elle contient des informations supplémentaires relatives aux instances et ne contient pas de membre **GUID** .</span><span class="sxs-lookup"><span data-stu-id="a72c8-111">The [**EVENT\_INSTANCE\_HEADER**](/windows/win32/api/evntrace/ns-evntrace-event_instance_header) structure that is passed to the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function is similar to the [**EVENT\_TRACE\_HEADER**](/windows/win32/api/evntrace/ns-evntrace-event_trace_header) structure (see [Tracing Events](tracing-events.md)), except that it contains additional information relating to instances, and does not contain a **Guid** member.</span></span>

<span data-ttu-id="a72c8-112">Les instances d’événements peuvent être utilisées pour établir une relation hiérarchique entre les événements.</span><span class="sxs-lookup"><span data-stu-id="a72c8-112">Event instances can be used to establish a hierarchical relationship between events.</span></span> <span data-ttu-id="a72c8-113">La fonction [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) accepte les informations spécifiques à l’instance de deux instances d’événement.</span><span class="sxs-lookup"><span data-stu-id="a72c8-113">The [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function accepts instance-specific information from two event instances.</span></span> <span data-ttu-id="a72c8-114">Le paramètre *pInstInfo* pointe vers la structure d' [**\_ \_ informations**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) de l’instance d’événement de l’instance de l’événement, et le paramètre *pParentInstInfo* pointe vers la structure d’informations de l' **\_ instance \_ d’événement** d’une instance d’événement parent.</span><span class="sxs-lookup"><span data-stu-id="a72c8-114">The *pInstInfo* parameter points to the [**EVENT\_INSTANCE\_INFO**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) structure of the event instance, and the *pParentInstInfo* parameter points to the **EVENT\_INSTANCE\_INFO** structure of a parent event instance.</span></span> <span data-ttu-id="a72c8-115">La définition d’une instance d’événement « parent » est définie par l’application ; le parent peut être n’importe quelle instance déjà générée.</span><span class="sxs-lookup"><span data-stu-id="a72c8-115">The definition of a "parent" event instance is application-defined; the parent can be any instance that has already been generated.</span></span>

 

 
