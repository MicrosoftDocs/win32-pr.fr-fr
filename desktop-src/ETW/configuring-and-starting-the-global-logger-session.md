---
description: La session de suivi d’événements de journalisation globale enregistre les événements qui se produisent au début du processus de démarrage du système d’exploitation.
ms.assetid: 1462bbef-ef32-4053-9930-5b4a0ab46b47
title: Configuration et démarrage de la session de journalisation globale
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8692e1f7321acc163e48cda7e3323f3d24adc1c0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104973434"
---
# <a name="configuring-and-starting-the-global-logger-session"></a><span data-ttu-id="25d6d-103">Configuration et démarrage de la session de journalisation globale</span><span class="sxs-lookup"><span data-stu-id="25d6d-103">Configuring and Starting the Global Logger Session</span></span>

<span data-ttu-id="25d6d-104">La session de suivi d’événements de journalisation globale enregistre les événements qui se produisent au début du processus de démarrage du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="25d6d-104">The Global Logger event tracing session records events that occur early in the operating system boot process.</span></span> <span data-ttu-id="25d6d-105">Les applications et les pilotes de périphériques peuvent utiliser la session d’enregistreur d’événements globale pour capturer des suivis avant que l’utilisateur se connecte.</span><span class="sxs-lookup"><span data-stu-id="25d6d-105">Applications and device drivers can use the Global Logger session to capture traces before the user logs in.</span></span> <span data-ttu-id="25d6d-106">Notez que certains pilotes de périphérique, tels que les pilotes de périphériques de disque, ne sont pas chargés au moment où la session de journalisation globale commence.</span><span class="sxs-lookup"><span data-stu-id="25d6d-106">Note that some device drivers, such as disk device drivers, are not loaded at the time the Global Logger session begins.</span></span>

> [!Note]  
> <span data-ttu-id="25d6d-107">Si vous créez une session de journalisation globale sur Windows Vista, vous devez envisager de créer une [session de journalisation](configuring-and-starting-an-autologger-session.md) automatique à la place.</span><span class="sxs-lookup"><span data-stu-id="25d6d-107">If you are creating a Global Logger session on Windows Vista, you should consider creating an [AutoLogger session](configuring-and-starting-an-autologger-session.md) instead.</span></span>

 

<span data-ttu-id="25d6d-108">Vous utilisez le registre pour configurer la session d’enregistreur d’événements globale.</span><span class="sxs-lookup"><span data-stu-id="25d6d-108">You use the registry to configure the Global Logger session.</span></span> <span data-ttu-id="25d6d-109">Ajoutez la clé **GlobalLogger** à la clé de Registre suivante, si elle n’est pas déjà présente :</span><span class="sxs-lookup"><span data-stu-id="25d6d-109">Add the **GlobalLogger** key to the following registry key, if it is not already present:</span></span>

```
HKEY_LOCAL_MACHINE
   \SYSTEM
      \CurrentControlSet
         \Control
            \WMI
```

<span data-ttu-id="25d6d-110">Le tableau suivant décrit les valeurs que vous pouvez définir pour la clé **GlobalLogger** .</span><span class="sxs-lookup"><span data-stu-id="25d6d-110">The following table describes the values that you can define for the **GlobalLogger** key.</span></span> <span data-ttu-id="25d6d-111">Vous devez disposer de privilèges d’administrateur pour spécifier ces valeurs de registre.</span><span class="sxs-lookup"><span data-stu-id="25d6d-111">You must have administrator privileges to specify these registry values.</span></span> <span data-ttu-id="25d6d-112">Les valeurs de Registre affectent tous les fournisseurs qui consignent des événements dans la session de journalisation globale.</span><span class="sxs-lookup"><span data-stu-id="25d6d-112">The registry values affect all providers that log events to the Global Logger session.</span></span> <span data-ttu-id="25d6d-113">La valeur de **départ** est la seule valeur requise pour démarrer la session d’enregistreur d’événements globale ; toutes les autres valeurs ont des paramètres par défaut qui sont utilisés si la valeur n’est pas présente dans le registre.</span><span class="sxs-lookup"><span data-stu-id="25d6d-113">The **Start** value is the only value required to start the Global Logger session; all other values have default settings that are used if the value is not present in the registry.</span></span> <span data-ttu-id="25d6d-114">En règle générale, vous devez utiliser les valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="25d6d-114">Typically, you should use the default values.</span></span> <span data-ttu-id="25d6d-115">Si vous spécifiez une valeur que ETW ne peut pas prendre en charge, ETW remplace la valeur.</span><span class="sxs-lookup"><span data-stu-id="25d6d-115">If you specify a value that ETW cannot support, ETW will override the value.</span></span>



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="25d6d-116">Valeur</span><span class="sxs-lookup"><span data-stu-id="25d6d-116">Value</span></span></th>
<th><span data-ttu-id="25d6d-117">Type</span><span class="sxs-lookup"><span data-stu-id="25d6d-117">Type</span></span></th>
<th><span data-ttu-id="25d6d-118">Description</span><span class="sxs-lookup"><span data-stu-id="25d6d-118">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="25d6d-119"><strong>Start</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-119"><strong>Start</strong></span></span></td>
<td><span data-ttu-id="25d6d-120"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-120"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-121">Définissez cette valeur sur 1 (activé) pour démarrer la session d’enregistreur d’événements globale lors du prochain démarrage du système.</span><span class="sxs-lookup"><span data-stu-id="25d6d-121">Set this value to 1 (on) to start the Global Logger session the next time the system starts.</span></span> <span data-ttu-id="25d6d-122">Pour arrêter le démarrage de la session, définissez cette valeur sur 0 (désactivé).</span><span class="sxs-lookup"><span data-stu-id="25d6d-122">To stop the session from starting, set this value to 0 (off).</span></span> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="25d6d-123"><strong>BufferSize</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-123"><strong>BufferSize</strong></span></span></td>
<td><span data-ttu-id="25d6d-124"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-124"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-125">Taille de chaque mémoire tampon, en kilo-octets.</span><span class="sxs-lookup"><span data-stu-id="25d6d-125">The size of each buffer, in kilobytes.</span></span> <span data-ttu-id="25d6d-126">Cette valeur doit être inférieure à un mégaoctet.</span><span class="sxs-lookup"><span data-stu-id="25d6d-126">This value should be less than one megabyte.</span></span> <span data-ttu-id="25d6d-127">ETW utilise la taille de la mémoire physique pour calculer cette valeur.</span><span class="sxs-lookup"><span data-stu-id="25d6d-127">ETW uses the size of physical memory to calculate this value.</span></span> <br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="25d6d-128"><strong>ClockType</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-128"><strong>ClockType</strong></span></span></td>
<td><span data-ttu-id="25d6d-129"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-129"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-130">Minuteur à utiliser lors de la journalisation de l’horodatage pour chaque événement.</span><span class="sxs-lookup"><span data-stu-id="25d6d-130">The timer to use when logging the time stamp for each event.</span></span>
<ul>
<li><span data-ttu-id="25d6d-131">1 = valeur de compteur de performance (haute résolution)</span><span class="sxs-lookup"><span data-stu-id="25d6d-131">1 = Performance counter value (high resolution)</span></span></li>
<li><span data-ttu-id="25d6d-132">2 = minuterie du système</span><span class="sxs-lookup"><span data-stu-id="25d6d-132">2 = System timer</span></span></li>
<li><span data-ttu-id="25d6d-133">3 = compteur du cycle de l’UC</span><span class="sxs-lookup"><span data-stu-id="25d6d-133">3 = CPU cycle counter</span></span></li>
</ul>
<span data-ttu-id="25d6d-134">Pour obtenir une description de chaque type d’horloge, consultez le membre <strong>ClientContext</strong> de <a href="wnode-header.md"><strong>WNODE_HEADER</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="25d6d-134">For a description of each clock type, see the <strong>ClientContext</strong> member of <a href="wnode-header.md"><strong>WNODE_HEADER</strong></a>.</span></span><br/> <span data-ttu-id="25d6d-135">La valeur par défaut est 1 (valeur du compteur de performances) sur Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="25d6d-135">The default value is 1 (performance counter value) on Windows Vista and later.</span></span> <span data-ttu-id="25d6d-136">Avant Windows Vista, la valeur par défaut est 2 (horloge système).</span><span class="sxs-lookup"><span data-stu-id="25d6d-136">Prior to Windows Vista, the default value is 2 (system timer).</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="25d6d-137"><strong>EnableKernelFlags</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-137"><strong>EnableKernelFlags</strong></span></span></td>
<td><span data-ttu-id="25d6d-138"><strong>REG_BINARY</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-138"><strong>REG_BINARY</strong></span></span></td>
<td><span data-ttu-id="25d6d-139">Utilisez cette valeur pour activer un ou plusieurs fournisseurs de noyau.</span><span class="sxs-lookup"><span data-stu-id="25d6d-139">Use this value to enable one or more kernel providers.</span></span> <span data-ttu-id="25d6d-140">Si vous activez les fournisseurs de noyau, la session de journalisation globale se renomme en journal de noyau NT au démarrage.</span><span class="sxs-lookup"><span data-stu-id="25d6d-140">If you enable kernel providers, the Global Logger session will rename itself to NT Kernel Logger when it starts.</span></span> <span data-ttu-id="25d6d-141">Pour connaître les valeurs possibles, consultez le membre <strong>EnableFlags</strong> de <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="25d6d-141">For possible values, see the <strong>EnableFlags</strong> member of <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="25d6d-142"><strong>FileCounter</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-142"><strong>FileCounter</strong></span></span></td>
<td><span data-ttu-id="25d6d-143"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-143"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-144">Nombre de fichiers journaux des traces d’événements générés par les sessions globales du journal.</span><span class="sxs-lookup"><span data-stu-id="25d6d-144">The number of event trace log files generated by Global Logger sessions.</span></span> <span data-ttu-id="25d6d-145">Le système incrémente cette valeur jusqu’à ce qu’elle atteigne la valeur de <strong>FileMax</strong>.</span><span class="sxs-lookup"><span data-stu-id="25d6d-145">The system increments this value until it reaches the value of <strong>FileMax</strong>.</span></span> <span data-ttu-id="25d6d-146">Ensuite, il réinitialise la valeur à 0.</span><span class="sxs-lookup"><span data-stu-id="25d6d-146">Then, it resets the value to 0.</span></span> <span data-ttu-id="25d6d-147">Ce compteur empêche le système de remplacer un fichier journal de suivi du journal global.</span><span class="sxs-lookup"><span data-stu-id="25d6d-147">This counter prevents the system from overwriting a Global Logger trace log file.</span></span> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="25d6d-148"><strong>FileMax</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-148"><strong>FileMax</strong></span></span></td>
<td><span data-ttu-id="25d6d-149"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-149"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-150">Nombre maximal de fichiers journaux de suivi d’événements autorisés sur le système.</span><span class="sxs-lookup"><span data-stu-id="25d6d-150">The maximum number of event trace log files permitted on the system.</span></span> <span data-ttu-id="25d6d-151">Lorsque le nombre de journaux de suivi atteint la valeur maximale spécifiée, le système commence à remplacer les journaux, en commençant par le plus ancien.</span><span class="sxs-lookup"><span data-stu-id="25d6d-151">When the number of trace logs reaches the specified maximum, the system begins to overwrite the logs, beginning with the oldest.</span></span> <br/> <span data-ttu-id="25d6d-152">Si le fichier journal spécifié dans <strong>filename</strong> existe, ETW ajoute la valeur <strong>FileCounter</strong> au nom de fichier.</span><span class="sxs-lookup"><span data-stu-id="25d6d-152">If the log file specified in <strong>FileName</strong> exists, ETW appends the <strong>FileCounter</strong> value to the file name.</span></span> <span data-ttu-id="25d6d-153">Par exemple, si le nom du fichier journal par défaut est utilisé, le formulaire est%SystemRoot%\System32\LogFiles\WMI\GlobalLogger.etl.NNNN.</span><span class="sxs-lookup"><span data-stu-id="25d6d-153">For example, if the default log file name is used, the form is %SystemRoot%\System32\LogFiles\WMI\GlobalLogger.etl.NNNN.</span></span> <br/> <span data-ttu-id="25d6d-154">La valeur par défaut est 0, ce qui signifie qu’il n’y a pas de valeur maximale.</span><span class="sxs-lookup"><span data-stu-id="25d6d-154">The default value is 0, meaning that there is no maximum.</span></span> <br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="25d6d-155"><strong>FileName</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-155"><strong>FileName</strong></span></span></td>
<td><span data-ttu-id="25d6d-156"><strong>REG_SZ</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-156"><strong>REG_SZ</strong></span></span></td>
<td><span data-ttu-id="25d6d-157">Chemin complet du fichier journal.</span><span class="sxs-lookup"><span data-stu-id="25d6d-157">Fully qualified path of the log file.</span></span> <span data-ttu-id="25d6d-158">Le chemin d’accès à ce fichier doit exister.</span><span class="sxs-lookup"><span data-stu-id="25d6d-158">The path to this file must exist.</span></span> <span data-ttu-id="25d6d-159">Le fichier journal est un fichier journal séquentiel.</span><span class="sxs-lookup"><span data-stu-id="25d6d-159">The log file is a sequential log file.</span></span> <span data-ttu-id="25d6d-160">Notez que tous les fournisseurs qui écrivent des événements dans la session d’enregistreur d’événements globale écrivent des événements dans ce fichier journal.</span><span class="sxs-lookup"><span data-stu-id="25d6d-160">Note that all providers writing events to the Global Logger session write events to this log file.</span></span> <span data-ttu-id="25d6d-161">Le chemin d’accès est limité à 1024 caractères. Si <strong>filename</strong> n’est pas spécifié, les événements sont écrits dans%SystemRoot%\System32\LogFiles\WMI\GlobalLogger.etl.</span><span class="sxs-lookup"><span data-stu-id="25d6d-161">The path is limited to 1024 characters.If <strong>FileName</strong> is not specified, events are written to %SystemRoot%\System32\LogFiles\WMI\GlobalLogger.etl.</span></span> <span data-ttu-id="25d6d-162"><strong>Avant Windows Vista :</strong> Le fichier par défaut est%SystemRoot%\System32\LogFiles\WMI\Trace.log.</span><span class="sxs-lookup"><span data-stu-id="25d6d-162"><strong>Prior to Windows Vista:</strong> The default file is %SystemRoot%\System32\LogFiles\WMI\Trace.log.</span></span><br/> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="25d6d-163"><strong>FlushTimer</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-163"><strong>FlushTimer</strong></span></span></td>
<td><span data-ttu-id="25d6d-164"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-164"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-165">Fréquence, en secondes, de vidage forcé des mémoires tampons de trace.</span><span class="sxs-lookup"><span data-stu-id="25d6d-165">How often, in seconds, the trace buffers are forcibly flushed.</span></span> <span data-ttu-id="25d6d-166">La durée de vidage minimale est de 1 seconde.</span><span class="sxs-lookup"><span data-stu-id="25d6d-166">The minimum flush time is 1 second.</span></span> <span data-ttu-id="25d6d-167">Ce vidage forcé s’ajoute au vidage automatique qui se produit lorsqu’une mémoire tampon est saturée et lorsque la session de trace s’arrête.</span><span class="sxs-lookup"><span data-stu-id="25d6d-167">This forced flush is in addition to the automatic flush that occurs when a buffer is full and when the trace session stops.</span></span> <br/> <span data-ttu-id="25d6d-168">Dans le cas d’un enregistreur d’événements en temps réel, la valeur zéro (valeur par défaut) signifie que le temps de vidage sera défini sur 1 seconde.</span><span class="sxs-lookup"><span data-stu-id="25d6d-168">For the case of a real-time logger, a value of zero (the default value) means that the flush time will be set to 1 second.</span></span> <span data-ttu-id="25d6d-169">Un enregistreur d’événements en temps réel est lorsque <strong>LogFileMode</strong> a la valeur <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.</span><span class="sxs-lookup"><span data-stu-id="25d6d-169">A real-time logger is when <strong>LogFileMode</strong> is set to <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.</span></span><br/> <span data-ttu-id="25d6d-170">La valeur par défaut est 0.</span><span class="sxs-lookup"><span data-stu-id="25d6d-170">The default value is 0.</span></span> <span data-ttu-id="25d6d-171">Par défaut, les mémoires tampons sont vidées uniquement lorsqu’elles sont pleines.</span><span class="sxs-lookup"><span data-stu-id="25d6d-171">By default, buffers are flushed only when they are full.</span></span> <br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="25d6d-172"><strong>LogFileMode</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-172"><strong>LogFileMode</strong></span></span></td>
<td><span data-ttu-id="25d6d-173"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-173"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-174">Spécifie les options de session de journal.</span><span class="sxs-lookup"><span data-stu-id="25d6d-174">Specifies log session options.</span></span> <span data-ttu-id="25d6d-175">Pour les valeurs, consultez <a href="logging-mode-constants.md">constantes de mode de journalisation</a>.</span><span class="sxs-lookup"><span data-stu-id="25d6d-175">For values, see <a href="logging-mode-constants.md">Logging Mode Constants</a>.</span></span> <span data-ttu-id="25d6d-176">Cette valeur est prise en charge sur Windows Vista et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="25d6d-176">This values is supported on Windows Vista and later.</span></span> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="25d6d-177"><strong>MaximumBuffers</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-177"><strong>MaximumBuffers</strong></span></span></td>
<td><span data-ttu-id="25d6d-178"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-178"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-179">Nombre maximal de mémoires tampons à allouer.</span><span class="sxs-lookup"><span data-stu-id="25d6d-179">The maximum number of buffers to allocate.</span></span> <span data-ttu-id="25d6d-180">En général, cette valeur est le nombre minimal de mémoires tampons plus vingt.</span><span class="sxs-lookup"><span data-stu-id="25d6d-180">Typically, this value is the minimum number of buffers plus twenty.</span></span> <span data-ttu-id="25d6d-181">ETW utilise la taille de la mémoire tampon et la taille de la mémoire physique pour calculer cette valeur.</span><span class="sxs-lookup"><span data-stu-id="25d6d-181">ETW uses the buffer size and the size of physical memory to calculate this value.</span></span> <span data-ttu-id="25d6d-182">Cette valeur doit être supérieure ou égale à la valeur de <strong>MinimumBuffers</strong>.</span><span class="sxs-lookup"><span data-stu-id="25d6d-182">This value must be greater than or equal to the value for <strong>MinimumBuffers</strong>.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="25d6d-183"><strong>MaxFileSize</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-183"><strong>MaxFileSize</strong></span></span></td>
<td><span data-ttu-id="25d6d-184"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-184"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-185">Taille maximale, en mégaoctets, du fichier journal de suivi d’événements.</span><span class="sxs-lookup"><span data-stu-id="25d6d-185">The maximum size, in megabytes, of the event trace log file.</span></span> <span data-ttu-id="25d6d-186">Par défaut, il n’y a pas de taille de fichier maximale.</span><span class="sxs-lookup"><span data-stu-id="25d6d-186">By default, there is no maximum file size.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="25d6d-187"><strong>MinimumBuffers</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-187"><strong>MinimumBuffers</strong></span></span></td>
<td><span data-ttu-id="25d6d-188"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-188"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-189">Nombre minimal de mémoires tampons à allouer au démarrage de la session de journalisation globale.</span><span class="sxs-lookup"><span data-stu-id="25d6d-189">The minimum number of buffers to allocate when the Global Logger session starts.</span></span> <span data-ttu-id="25d6d-190">Le nombre minimal de mémoires tampons que vous pouvez spécifier est deux mémoires tampons par processeur.</span><span class="sxs-lookup"><span data-stu-id="25d6d-190">The minimum number of buffers that you can specify is two buffers per processor.</span></span> <span data-ttu-id="25d6d-191">Par exemple, sur un ordinateur à processeur unique, le nombre minimal de mémoires tampons est de deux.</span><span class="sxs-lookup"><span data-stu-id="25d6d-191">For example, on a single processor computer, the minimum number of buffers is two.</span></span> <br/> <span data-ttu-id="25d6d-192">La valeur par défaut sur un système à processeur unique est 0x3.</span><span class="sxs-lookup"><span data-stu-id="25d6d-192">The default value on a single-processor system is 0x3.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="25d6d-193"><strong>État</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-193"><strong>Status</strong></span></span></td>
<td><span data-ttu-id="25d6d-194"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="25d6d-194"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="25d6d-195">État de démarrage de l’enregistreur d’événements global.</span><span class="sxs-lookup"><span data-stu-id="25d6d-195">The startup status of the Global Logger.</span></span> <span data-ttu-id="25d6d-196">Si le journal global n’a pas pu démarrer, la valeur de cette clé est le code d’erreur Win32 approprié.</span><span class="sxs-lookup"><span data-stu-id="25d6d-196">If the Global Logger failed to start, the value of this key is the appropriate Win32 error code.</span></span> <span data-ttu-id="25d6d-197">Si le journal Global a démarré, la valeur de cette clé est ERROR_SUCCESS (0).</span><span class="sxs-lookup"><span data-stu-id="25d6d-197">If the Global Logger successfully started, the value of this key is ERROR_SUCCESS (0).</span></span><br/></td>
</tr>
</tbody>
</table>



 

<span data-ttu-id="25d6d-198">Une fois que le registre a été modifié et que l’ordinateur a redémarré, la session de journalisation globale démarre automatiquement et est utilisée comme toute autre session, à une exception près : vous utilisez le \_ handle de constante d’ID de journal Global WMI \_ \_ (défini dans Wmistr. h) pour référencer la session d’enregistreur d’événements globale.</span><span class="sxs-lookup"><span data-stu-id="25d6d-198">After the registry has been modified and the computer restarted, the Global Logger session starts automatically and is used like any other session with one exception: You use the WMI\_GLOBAL\_LOGGER\_ID constant handle (defined in Wmistr.h) to reference the Global Logger session.</span></span> <span data-ttu-id="25d6d-199">Cette constante peut être utilisée comme argument pour toute fonction de suivi d’événement qui accepte un handle de session.</span><span class="sxs-lookup"><span data-stu-id="25d6d-199">This constant may be used as an argument to any event tracing function that accepts a session handle.</span></span> <span data-ttu-id="25d6d-200">Dans les fonctions qui acceptent un nom de session, utilisez le nom d’enregistreur d’événements GLOBAL \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="25d6d-200">In functions that accept a session name, use GLOBAL\_LOGGER\_NAME.</span></span>

<span data-ttu-id="25d6d-201">Le contrôleur d’enregistreur d’événements global n’appelle pas la fonction [**EnableTrace**](/windows/win32/api/evntrace/nf-evntrace-enabletrace) pour activer les fournisseurs.</span><span class="sxs-lookup"><span data-stu-id="25d6d-201">The Global Logger controller does not call the [**EnableTrace**](/windows/win32/api/evntrace/nf-evntrace-enabletrace) function to enable providers.</span></span> <span data-ttu-id="25d6d-202">Le fournisseur est chargé de déterminer si la session de journalisation globale est démarrée, puis de s’activer.</span><span class="sxs-lookup"><span data-stu-id="25d6d-202">The provider is responsible for determining if the Global Logger session is started and then enabling itself.</span></span>

<span data-ttu-id="25d6d-203">Pour déterminer si la session de journalisation globale est démarrée, vous pouvez appeler la fonction [**ControlTrace**](/windows/win32/api/evntrace/nf-evntrace-controltracea) , en affectant à *SessionHandle* la valeur \_ ID d’enregistreur d’événements global WMI \_ et ControlCode la valeur de la \_  **requête de contrôle de trace d’événements \_ \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="25d6d-203">To determine if the Global Logger session is started, you can call the [**ControlTrace**](/windows/win32/api/evntrace/nf-evntrace-controltracea) function, setting *SessionHandle* to WMI\_GLOBAL\_LOGGER\_ID and *ControlCode* to **EVENT\_TRACE\_CONTROL\_QUERY**.</span></span> <span data-ttu-id="25d6d-204">Si l’appel **ControlTrace** réussit, la session de journalisation globale existe et le fournisseur peut s’activer lui-même et consigner des événements dans la session de journalisation globale (la fonction **CONTROLTRACE** renvoie une erreur \_ \_ instance WMI \_ \_ introuvable si le journal global n’est pas actif).</span><span class="sxs-lookup"><span data-stu-id="25d6d-204">If the **ControlTrace** call is successful, the Global Logger session exists and the provider can enable itself and log events to the Global Logger session (the **ControlTrace** function returns ERROR\_WMI\_INSTANCE\_NOT\_FOUND if the Global Logger is not active).</span></span>

<span data-ttu-id="25d6d-205">En règle générale, le contrôleur est chargé de passer les indicateurs d’activation et le niveau au fournisseur lorsqu’il active le fournisseur, mais comme le contrôleur d’enregistreur global n’active pas le fournisseur, il incombe au fournisseur de transmettre ces informations à lui-même, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="25d6d-205">Typically, the controller is responsible for passing the enable flags and level to the provider when it enables the provider, but because the Global Logger controller does not enable the provider, it is the provider's responsibility to pass this information to itself, if needed.</span></span>

<span data-ttu-id="25d6d-206">La session de journalisation globale est une ressource limitée et doit être utilisée avec modération.</span><span class="sxs-lookup"><span data-stu-id="25d6d-206">The Global Logger session is a limited resource and should be used sparingly.</span></span> <span data-ttu-id="25d6d-207">Les services qui souhaitent capturer des informations pendant le processus de démarrage doivent envisager d’ajouter la logique du contrôleur à lui-même au lieu d’utiliser la session d’enregistreur d’événements globale.</span><span class="sxs-lookup"><span data-stu-id="25d6d-207">Services that want to capture information during the boot process should consider adding controller logic to itself instead of using the Global Logger session.</span></span>

<span data-ttu-id="25d6d-208">Pour plus d’informations sur le démarrage d’une session de suivi d’événements, consultez [configuration et démarrage d’une session de suivi d’événements](configuring-and-starting-an-event-tracing-session.md).</span><span class="sxs-lookup"><span data-stu-id="25d6d-208">For details on starting an event tracing session, see [Configuring and Starting an Event Tracing Session](configuring-and-starting-an-event-tracing-session.md).</span></span>

<span data-ttu-id="25d6d-209">Pour plus d’informations sur le démarrage d’une session privée de journalisation, consultez [configuration et démarrage d’une session de journalisation privée](configuring-and-starting-a-private-logger-session.md).</span><span class="sxs-lookup"><span data-stu-id="25d6d-209">For details on starting a private logger session, see [Configuring and Starting a Private Logger Session](configuring-and-starting-a-private-logger-session.md).</span></span>

<span data-ttu-id="25d6d-210">Pour plus d’informations sur le démarrage d’une session de journal de noyau NT, consultez [configuration et démarrage de la session de journalisation du noyau NT](configuring-and-starting-the-nt-kernel-logger-session.md).</span><span class="sxs-lookup"><span data-stu-id="25d6d-210">For details on starting an NT Kernel Logger session, see [Configuring and Starting the NT Kernel Logger Session](configuring-and-starting-the-nt-kernel-logger-session.md).</span></span>

