---
description: Les propriétés sont représentées par des ID connus sous le nom d’identificateurs de propriété (PID).
ms.assetid: a773c7b3-a1a2-4cce-ae5f-b54217ea06f4
title: Fonctionnement des gestionnaires de propriétés
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 564d6f8bd325e649ff1356869932521d8c1cd885
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104202241"
---
# <a name="understanding-property-handlers"></a><span data-ttu-id="7d678-103">Fonctionnement des gestionnaires de propriétés</span><span class="sxs-lookup"><span data-stu-id="7d678-103">Understanding Property Handlers</span></span>

<span data-ttu-id="7d678-104">Les propriétés sont représentées par des ID connus sous le nom d’identificateurs de propriété (PID).</span><span class="sxs-lookup"><span data-stu-id="7d678-104">Properties are represented by IDs known as property identifiers (PIDs).</span></span> <span data-ttu-id="7d678-105">Chaque propriété doit avoir un identificateur global unique (GUID).</span><span class="sxs-lookup"><span data-stu-id="7d678-105">Each property MUST have a globally unique identifier (GUID).</span></span> <span data-ttu-id="7d678-106">Cet identificateur se compose d’un GUID qui représente une collection de propriétés appelée un jeu de propriétés plus une chaîne ou un entier 32 bits pour identifier la propriété dans le jeu.</span><span class="sxs-lookup"><span data-stu-id="7d678-106">This identifier consists of a GUID, representing a collection of properties called a property set plus either a string or a 32-bit integer to identify the property within the set.</span></span> <span data-ttu-id="7d678-107">Si la forme entière de ID est utilisée, les valeurs 0x00000000, 0xFFFFFFFF et 0xFFFFFFFE sont considérées comme non valides.</span><span class="sxs-lookup"><span data-stu-id="7d678-107">If the integer form of ID is used, the values 0x00000000, 0xFFFFFFFF, and 0xFFFFFFFE are considered invalid.</span></span> <span data-ttu-id="7d678-108">Les fournisseurs peuvent garantir que leurs propriétés sont définies de manière unique en les plaçant dans un jeu de propriétés défini par leurs propres GUID.</span><span class="sxs-lookup"><span data-stu-id="7d678-108">Vendors can guarantee that their properties are uniquely defined by placing them in a property set defined by their own GUIDs.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7d678-109">Il est essentiel de définir des propriétés avec soin et de façon stratégique pour la première version du schéma.</span><span class="sxs-lookup"><span data-stu-id="7d678-109">It is critical that you define properties carefully and strategically for the first release of the schema.</span></span> <span data-ttu-id="7d678-110">Les modifications apportées aux propriétés personnalisées (telles que la largeur de colonne ou le type de propriété) ne sont pas reflétées dans la base de données après l’inscription d’un schéma.</span><span class="sxs-lookup"><span data-stu-id="7d678-110">Any changes to custom properties (such as column width or property type) will not be reflected in the database after a schema has been registered.</span></span> <span data-ttu-id="7d678-111">La seule façon de faire en sorte que ces modifications soient reconnues après que le schéma a été inscrit une seule fois sur un système serait de reconstruire l’index, puis d’inscrire le nouveau schéma, ou d’inscrire le schéma, puis de créer une nouvelle propriété (qui se compose d’un nom canonique et d’un type de fichier) pour chaque version de subequent. par exemple `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` , et ainsi de suite).</span><span class="sxs-lookup"><span data-stu-id="7d678-111">The only way to have these changes recognized after the schema has been registered once on a system would be either to rebuild the index and then register the new schema, or to register the schema and then create a new property (which consists of a canonical name and a PKEY) for each subequent release; for example `PKEY_GroupName_PropertyNameV2`, `PKEY_GroupName_PropertyNameV3`, and so forth).</span></span> <span data-ttu-id="7d678-112">Nous vous déconseillons de créer de nouvelles propriétés de cette manière, car plusieurs colonnes superflues peuvent avoir un impact sur les performances du système.</span><span class="sxs-lookup"><span data-stu-id="7d678-112">We do not recommend creating new properties in this manner, because multiple extraneous columns may impact system performance.</span></span>

 

<span data-ttu-id="7d678-113">Cette rubrique est organisée comme suit :</span><span class="sxs-lookup"><span data-stu-id="7d678-113">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="7d678-114">Métadonnées</span><span class="sxs-lookup"><span data-stu-id="7d678-114">Metadata</span></span>](#metadata)
    -   [<span data-ttu-id="7d678-115">Ouvrir les métadonnées</span><span class="sxs-lookup"><span data-stu-id="7d678-115">Open Metadata</span></span>](#open-metadata)
-   [<span data-ttu-id="7d678-116">À propos des gestionnaires de propriétés</span><span class="sxs-lookup"><span data-stu-id="7d678-116">About Property Handlers</span></span>](#about-property-handlers)
-   [<span data-ttu-id="7d678-117">Technologie héritée</span><span class="sxs-lookup"><span data-stu-id="7d678-117">Legacy Technology</span></span>](#legacy-technology)
-   [<span data-ttu-id="7d678-118">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="7d678-118">Related topics</span></span>](#related-topics)

## <a name="metadata"></a><span data-ttu-id="7d678-119">Métadonnées</span><span class="sxs-lookup"><span data-stu-id="7d678-119">Metadata</span></span>

<span data-ttu-id="7d678-120">Dans Windows Vista et versions ultérieures, un nouveau système de propriétés basé sur les métadonnées est essentiel à l’Organisation des éléments tels que les fichiers, le courrier électronique et les contacts.</span><span class="sxs-lookup"><span data-stu-id="7d678-120">In Windows Vista and later, a new property system based on metadata is central to organizing items such as files, e-mail, and contacts.</span></span> <span data-ttu-id="7d678-121">Dans ce nouveau système de propriétés, les éléments peuvent être recherchés en fonction de leurs métadonnées, et les utilisateurs peuvent lire ou écrire ces métadonnées.</span><span class="sxs-lookup"><span data-stu-id="7d678-121">In this new property system, items can be searched based on their metadata, and users can read or write that metadata.</span></span> <span data-ttu-id="7d678-122">Les métadonnées de ce système sont représentées par un ensemble extensible de *Propriétés* implémentées en tant que paires nom/valeur.</span><span class="sxs-lookup"><span data-stu-id="7d678-122">Metadata in this system is represented by an extensible set of *properties* implemented as name/value pairs.</span></span>

<span data-ttu-id="7d678-123">Dans Windows Vista et versions ultérieures, un ensemble complet de propriétés couvre les spécificités des éléments tels que les photos, la musique, les documents, les messages, les contacts et les fichiers.</span><span class="sxs-lookup"><span data-stu-id="7d678-123">In Windows Vista and later, an extensive set of properties covers the specifics of items such as photos, music, documents, messages, contacts, and files.</span></span> <span data-ttu-id="7d678-124">Les éditeurs de logiciels indépendants (ISV) peuvent introduire leurs propres propriétés sur la plateforme si aucune propriété existante ne répond à leurs besoins.</span><span class="sxs-lookup"><span data-stu-id="7d678-124">Independent software vendors (ISVs) can introduce their own properties to the platform if no existing property meets their needs.</span></span>

### <a name="open-metadata"></a><span data-ttu-id="7d678-125">Ouvrir les métadonnées</span><span class="sxs-lookup"><span data-stu-id="7d678-125">Open Metadata</span></span>

<span data-ttu-id="7d678-126">Le système de propriétés dans Windows Vista et les versions ultérieures est un système de métadonnées ouvert.</span><span class="sxs-lookup"><span data-stu-id="7d678-126">The property system in Windows Vista and later is an open metadata system.</span></span> <span data-ttu-id="7d678-127">Un format de fichier stocke toute propriété qui lui est assignée et expose cette valeur lorsqu’elle est interrogée, indépendamment de sa pertinence ou de sa signification.</span><span class="sxs-lookup"><span data-stu-id="7d678-127">A file format stores any property assigned to it and exposes that value when queried, regardless of relevance or meaning.</span></span> <span data-ttu-id="7d678-128">Cela permet aux développeurs tiers d’attacher des propriétés supplémentaires au fichier sans qu’il soit nécessaire de modifier le gestionnaire de propriétés associé.</span><span class="sxs-lookup"><span data-stu-id="7d678-128">This enables third-party developers to attach extra properties to the file without requiring a change in the property handler associated with it.</span></span> <span data-ttu-id="7d678-129">Les métadonnées ouvertes sont un concept puissant.</span><span class="sxs-lookup"><span data-stu-id="7d678-129">Open metadata is a powerful concept.</span></span> <span data-ttu-id="7d678-130">Pour plus d’informations sur la prise en charge des métadonnées ouvertes pour un format de fichier XML, consultez « prise en charge des métadonnées ouvertes » dans [initialisation des gestionnaires de propriétés](./building-property-handlers-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="7d678-130">For more information about how to support open metadata for an XML-based file format, see "Supporting Open Metadata" in [Initializing Property Handlers](./building-property-handlers-property-handlers.md).</span></span>

> [!Note]  
> <span data-ttu-id="7d678-131">Les gestionnaires de propriétés sont toujours associés à des types de fichiers spécifiques ; ainsi, si votre format de fichier contient des propriétés qui nécessitent un gestionnaire de propriétés personnalisées, vous devez toujours inscrire une extension de nom de fichier unique pour chaque format de fichier.</span><span class="sxs-lookup"><span data-stu-id="7d678-131">Property handlers are always associated with specific file types; thus, if your file format contains properties that require a custom property handler, you should always register a unique file name extension for each file format.</span></span>

 

## <a name="about-property-handlers"></a><span data-ttu-id="7d678-132">À propos des gestionnaires de propriétés</span><span class="sxs-lookup"><span data-stu-id="7d678-132">About Property Handlers</span></span>

<span data-ttu-id="7d678-133">Dans Windows Vista et versions ultérieures, Windows dispose d’un système de propriétés extensible pour le stockage et la récupération des métadonnées dans les fichiers et les éléments de données auxquels vous accédez.</span><span class="sxs-lookup"><span data-stu-id="7d678-133">In Windows Vista and later, Windows has an extensible property system for storing and retrieving metadata in the files and data items that you access.</span></span> <span data-ttu-id="7d678-134">L’Explorateur Windows et le système de recherche Windows, ainsi que d’autres applications, utilisent des gestionnaires de propriétés pour lire et modifier ces métadonnées.</span><span class="sxs-lookup"><span data-stu-id="7d678-134">Windows Explorer and the Windows Search system, along with other applications, use property handlers to read and modify this metadata.</span></span> <span data-ttu-id="7d678-135">Si vous êtes un développeur qui possède un type de fichier spécifique, vous devez inscrire un gestionnaire de propriétés pour permettre au système de propriétés d’accéder aux métadonnées de vos fichiers.</span><span class="sxs-lookup"><span data-stu-id="7d678-135">If you are a developer who owns a specific file type, you should register a property handler to give the property system access to the metadata in your files.</span></span> <span data-ttu-id="7d678-136">Dans certains cas, vous pourrez peut-être utiliser un gestionnaire de propriétés existant capable de lire et de comprendre votre format de fichier et ses propriétés. dans d’autres cas, vous devrez peut-être développer un nouveau gestionnaire de propriétés pour votre type de fichier.</span><span class="sxs-lookup"><span data-stu-id="7d678-136">In some cases, you might be able to use an existing property handler that can read and understand your file format and its properties; in other cases, you might need to develop a new property handler for your file type.</span></span>

<span data-ttu-id="7d678-137">La première étape de l’écriture d’un gestionnaire de propriétés consiste à prendre en compte les propriétés prises en charge par votre type de fichier.</span><span class="sxs-lookup"><span data-stu-id="7d678-137">The first step in writing a property handler is to consider what properties your file type supports.</span></span> <span data-ttu-id="7d678-138">Les valeurs de propriété sont stockées dans le flux de fichier, principalement pour permettre la transporter.</span><span class="sxs-lookup"><span data-stu-id="7d678-138">Property values are stored in the file stream, primarily to enable transportability.</span></span> <span data-ttu-id="7d678-139">Lorsque les valeurs de propriété sont stockées dans le fichier lui-même, comme elles sont dans ce système, un utilisateur peut copier un fichier vers un autre ordinateur, un disque mémoire flash USB ou un autre système de fichiers, ou envoyer le fichier sous la forme d’une pièce jointe de courrier électronique, les propriétés voyagent avec le fichier et ne sont jamais désynchronisées ou perdues.</span><span class="sxs-lookup"><span data-stu-id="7d678-139">When the property values are stored in the file itself, as they are in this system, a user can copy a file to another computer, a USB flash drive, or another file system, or sends the file as an e-mail attachment, the properties travel with the file and never get out of sync or lost.</span></span> <span data-ttu-id="7d678-140">Par conséquent, si le format de fichier prend en charge le stockage d’informations supplémentaires, il est préférable de stocker les propriétés dans le fichier lui-même.</span><span class="sxs-lookup"><span data-stu-id="7d678-140">Therefore, if the file format supports storing extra information, it is best to store the properties in the file itself.</span></span>

<span data-ttu-id="7d678-141">L’étape suivante consiste à déterminer les propriétés que le fichier doit fournir.</span><span class="sxs-lookup"><span data-stu-id="7d678-141">The next step is to determine which properties the file should provide.</span></span> <span data-ttu-id="7d678-142">Vous pensez peut-être à l’origine qu’un ensemble limité de propriétés est adéquat.</span><span class="sxs-lookup"><span data-stu-id="7d678-142">You might initially think that a limited set of properties is adequate.</span></span> <span data-ttu-id="7d678-143">Un fichier audio peut uniquement prendre en charge les propriétés audio et se terminer.</span><span class="sxs-lookup"><span data-stu-id="7d678-143">An audio file could support only audio-related properties and end there.</span></span> <span data-ttu-id="7d678-144">Toutefois, ce fichier audio peut être un enregistrement d’une session d’une Cour de justice, archivé par un cabinet d’avocats.</span><span class="sxs-lookup"><span data-stu-id="7d678-144">However, that audio file could be a recording of a session of a court of law, archived by a law firm.</span></span> <span data-ttu-id="7d678-145">Dans ce cas, le cabinet juridique souhaiterait certainement associer d’autres propriétés non audio à ce fichier, comme le numéro de cas.</span><span class="sxs-lookup"><span data-stu-id="7d678-145">In that case, the law firm would certainly want to associate other non-audio properties with this file, such as the case number.</span></span> <span data-ttu-id="7d678-146">Le fournisseur du format de fichier audio ne peut pas nécessairement déterminer tous les scénarios dans lesquels son format sera utilisé.</span><span class="sxs-lookup"><span data-stu-id="7d678-146">The provider of the audio file format cannot possibly determine all of the scenarios in which their format will ever be used.</span></span> <span data-ttu-id="7d678-147">Ils doivent donc envisager d’activer le stockage global de toute propriété arbitraire prise en charge par le système de propriétés.</span><span class="sxs-lookup"><span data-stu-id="7d678-147">They should therefore consider enabling blanket storage of any arbitrary property supported by the property system.</span></span>

## <a name="legacy-technology"></a><span data-ttu-id="7d678-148">Technologie héritée</span><span class="sxs-lookup"><span data-stu-id="7d678-148">Legacy Technology</span></span>

<span data-ttu-id="7d678-149">La technologie de flux secondaire du système de fichiers Microsoft Windows NT (NTFS) a été développée pour prendre en charge la persistance des informations supplémentaires avec le fichier via un autre flux de données au niveau de la couche du système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="7d678-149">Microsoft Windows NT File System (NTFS) secondary stream technology was developed to support the persistence of extra information with the file through an alternate stream set at the file system layer.</span></span> <span data-ttu-id="7d678-150">Il peut se demander pourquoi ces flux secondaires ne sont pas utilisés comme méthode principale pour stocker des propriétés, en particulier avec la prise en charge des métadonnées ouvertes.</span><span class="sxs-lookup"><span data-stu-id="7d678-150">One might wonder why those secondary streams are not used as the main method to store properties, especially with open metadata support.</span></span> <span data-ttu-id="7d678-151">La raison principale est le transport de ces informations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="7d678-151">The primary reason is the transportability of this extra information.</span></span> <span data-ttu-id="7d678-152">Malheureusement, ces flux alternatifs sont supprimés dans de nombreux scénarios, notamment la prise en charge de la mise en cache côté client (CSC), l’envoi de fichiers en tant que pièces jointes et la copie de fichiers dans un magasin non NTFS.</span><span class="sxs-lookup"><span data-stu-id="7d678-152">Unfortunately, these alternate streams are removed in many scenarios including client-side caching support (CSC), sending files as attachments, and copying files to a non-NTFS store.</span></span>

<span data-ttu-id="7d678-153">Les flux secondaires ne fournissent pas une solution robuste dans laquelle les propriétés sont assurées de se déplacer avec le fichier. par conséquent, le système de propriétés Windows Vista ne fournit pas de mécanisme intégré qui exploite les flux de données NTFS secondaires pour le stockage des propriétés.</span><span class="sxs-lookup"><span data-stu-id="7d678-153">Secondary streams do not provide a robust solution in which properties are guaranteed to travel with the file, and hence, the Windows Vista property system does not provide a built-in mechanism that exploits the secondary NTFS streams for property storage.</span></span> <span data-ttu-id="7d678-154">Les éditeurs de logiciels indépendants sont également fortement déconseillés de créer des gestionnaires de propriétés qui utilisent des flux secondaires pour le stockage des propriétés.</span><span class="sxs-lookup"><span data-stu-id="7d678-154">ISVs are also highly discouraged from building property handlers that use secondary streams for the storage of properties.</span></span> <span data-ttu-id="7d678-155">Bien entendu, il existe des scénarios dans lesquels les flux de données secondaires NTFS sont appropriés, en particulier lorsque les applications peuvent garantir que le fichier avec lequel elles sont gérées est toujours stocké dans un volume NTFS et ne se déplace pas à la suite de l’interaction de l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="7d678-155">Of course there are scenarios where NTFS secondary streams are appropriate, particularly when applications can guarantee that the file they are dealing with is always stored in an NTFS volume and will not travel as a result of end user interaction.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7d678-156">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="7d678-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7d678-157">Utilisation des noms de genres</span><span class="sxs-lookup"><span data-stu-id="7d678-157">Using Kind Names</span></span>](./building-property-handlers-user-friendly-kind-names.md)
</dt> <dt>

[<span data-ttu-id="7d678-158">Utilisation des listes de propriétés</span><span class="sxs-lookup"><span data-stu-id="7d678-158">Using Property Lists</span></span>](./building-property-handlers-property-lists.md)
</dt> <dt>

[<span data-ttu-id="7d678-159">Initialisation des gestionnaires de propriétés</span><span class="sxs-lookup"><span data-stu-id="7d678-159">Initializing Property Handlers</span></span>](./building-property-handlers-property-handlers.md)
</dt> <dt>

[<span data-ttu-id="7d678-160">Inscription et distribution des gestionnaires de propriétés</span><span class="sxs-lookup"><span data-stu-id="7d678-160">Registering and Distributing Property Handlers</span></span>](./prophand-reg-dist.md)
</dt> <dt>

[<span data-ttu-id="7d678-161">Meilleures pratiques pour le gestionnaire de propriétés et FAQ</span><span class="sxs-lookup"><span data-stu-id="7d678-161">Property Handler Best Practices and FAQ</span></span>](./prophand-bestprac-faq.md)
</dt> </dl>

 

 
