---
description: Les propriétés utilisées dans le système de propriétés de Windows Vista et versions ultérieures sont déclarées dans les schémas de propriété.
ms.assetid: 4e301210-df3a-41db-a58e-015ee8d41714
title: Création de propriétés personnalisées
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 90849383e25889edf7f3abd4704c36354eff153c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104319634"
---
# <a name="creating-custom-properties"></a><span data-ttu-id="43136-103">Création de propriétés personnalisées</span><span class="sxs-lookup"><span data-stu-id="43136-103">Creating Custom Properties</span></span>

<span data-ttu-id="43136-104">Les propriétés utilisées dans le système de propriétés de Windows Vista et versions ultérieures sont déclarées dans les schémas de propriété.</span><span class="sxs-lookup"><span data-stu-id="43136-104">Properties used in the property system of Windows Vista and later are declared in property schemas.</span></span> <span data-ttu-id="43136-105">Ces schémas de propriété sont définis dans des fichiers XML et décrivent les différents aspects d’une propriété, y compris son type (y compris les informations sur son type primitif et si elle est multivaleur), son mode d’affichage dans l’interface utilisateur de Windows, le type d’étiquettes (chaînes d’édition conviviales) à utiliser et la façon dont il est mis en cache dans le magasin de recherche pour</span><span class="sxs-lookup"><span data-stu-id="43136-105">These property schemas are defined in XML files and describe various aspects of a property including its type (including information on its primitive type and whether it is multi-valued), how it can be displayed in the Windows UI, what kind of labels (user-friendly editing strings) are to be used with it, and how it is cached in the search store for faster access.</span></span> <span data-ttu-id="43136-106">Les propriétés sont identifiées par leur nom canonique ou leur clé de propriété (nom de la clé).</span><span class="sxs-lookup"><span data-stu-id="43136-106">Properties are identified by their Canonical Name or their Property Key (PKEY).</span></span>

<span data-ttu-id="43136-107">Un nom canonique est le nom convivial du lecteur de la propriété et utilise une convention d’espace de noms similaire à celle utilisée dans Microsoft .NET.</span><span class="sxs-lookup"><span data-stu-id="43136-107">A canonical name is the reader-friendly name of the property and uses a namespace convention similar to that used in Microsoft .NET.</span></span> <span data-ttu-id="43136-108">Pour les propriétés définies par le système (celles qui sont incluses avec Windows), la Convention est `System.GroupName.PropertyName` .</span><span class="sxs-lookup"><span data-stu-id="43136-108">For system-defined properties (those that are included with Windows), the convention is `System.GroupName.PropertyName`.</span></span> <span data-ttu-id="43136-109">Notez que le schéma de casse Pascal, qui met en majuscules les lettres au début de chaque mot, est utilisé dans ces noms.</span><span class="sxs-lookup"><span data-stu-id="43136-109">Note that the Pascal casing scheme, which capitalizes letters at the beginning of each word, is used in these names.</span></span> <span data-ttu-id="43136-110">Les noms canoniques sont utilisés dans différents emplacements, notamment les listes de propriétés et les noms de colonnes dans le cache de propriétés.</span><span class="sxs-lookup"><span data-stu-id="43136-110">Canonical names are used in various places including property lists and column names in the property cache.</span></span> <span data-ttu-id="43136-111">Ils sont donc utilisés dans les requêtes langage SQL (SQL) pour récupérer une valeur de propriété.</span><span class="sxs-lookup"><span data-stu-id="43136-111">They are therefore used in Structured Query Language (SQL) queries to retrieve a property value.</span></span>

<span data-ttu-id="43136-112">Un mot-n est une paire de valeurs comprenant un GUID et une **valeur DWORD**, respectivement appelés *formatID* et *propID* .</span><span class="sxs-lookup"><span data-stu-id="43136-112">A PKEY is a pair of values consisting of a GUID and a **DWORD**, referred to as a *formatID* and *propID* respectively.</span></span> <span data-ttu-id="43136-113">Elle est représentée par une structure [**PROPERTYKEY**](/windows/win32/api/wtypes/ns-wtypes-propertykey) .</span><span class="sxs-lookup"><span data-stu-id="43136-113">It is represented by a [**PROPERTYKEY**](/windows/win32/api/wtypes/ns-wtypes-propertykey) structure.</span></span> <span data-ttu-id="43136-114">La plupart des API du système de propriétés acceptent ces clés de propriété.</span><span class="sxs-lookup"><span data-stu-id="43136-114">Most of the property system APIs accept these property keys.</span></span> <span data-ttu-id="43136-115">Le kit de développement logiciel (SDK) Windows comprend le fichier d’en-tête propKey. h qui comprend une définition de macro de chacune des `System` clés de propriété avec la Convention de `PKEY_GroupName_PropertyName` .</span><span class="sxs-lookup"><span data-stu-id="43136-115">The Windows Software Development Kit (SDK) includes the header file Propkey.h that includes a macro definition of each of the `System` property keys with the convention of `PKEY_GroupName_PropertyName`.</span></span> <span data-ttu-id="43136-116">Par exemple, `PKEY_Photo_DateTaken` est la clé de propriété de la propriété avec le nom canonique `System.Photo.DateTaken` .</span><span class="sxs-lookup"><span data-stu-id="43136-116">For example, `PKEY_Photo_DateTaken` is the property key for the property with canonical name `System.Photo.DateTaken`.</span></span> <span data-ttu-id="43136-117">Les valeurs de propriété sont stockées sous la forme d’une structure [**PROPVARIANT**](/windows/win32/api/propidlbase/ns-propidlbase-propvariant) , qui est une extension des types OLE variant.</span><span class="sxs-lookup"><span data-stu-id="43136-117">Property values are stored in the form of a [**PROPVARIANT**](/windows/win32/api/propidlbase/ns-propidlbase-propvariant) structure, which is an extension of the OLE VARIANT types.</span></span>

<span data-ttu-id="43136-118">Cette section contient la rubrique suivante, qui fait partie intégrante de la création de propriétés personnalisées :</span><span class="sxs-lookup"><span data-stu-id="43136-118">This section contains the following topic, which is integral to creating custom properties:</span></span>

-   [<span data-ttu-id="43136-119">Présentation du schéma de description de propriété</span><span class="sxs-lookup"><span data-stu-id="43136-119">Understanding the Property Description Schema</span></span>](./propdesc-schema-entry.md)

> [!Note]  
> <span data-ttu-id="43136-120">En raison des problèmes potentiels que l’indexeur peut avoir lors de l’utilisation du schéma du système de propriétés, il est essentiel de définir des attributs avec soin et de façon stratégique pour la première version du schéma.</span><span class="sxs-lookup"><span data-stu-id="43136-120">Due to potential difficulties that the indexer may have when consuming the property system's schema, it is critical that you define attributes carefully and strategically for the first release of the schema.</span></span> <span data-ttu-id="43136-121">Toutes les modifications apportées aux attributs (type, largeur de colonne, qu’il s’agisse de indexible) ne seront pas reflétées dans la base de données après l’inscription d’un schéma.</span><span class="sxs-lookup"><span data-stu-id="43136-121">Any changes to attributes (type, column width, whether indexible) will not be reflected in the database after a schema has been registered.</span></span> <span data-ttu-id="43136-122">Pour que ces modifications soient reconnues après que le schéma a été inscrit une fois sur un système, il suffit de reconstruire l’index, puis d’inscrire le nouveau schéma, ou d’inscrire le schéma, puis de créer une nouvelle propriété pour chaque version ultérieure. par exemple `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` , et ainsi de suite).</span><span class="sxs-lookup"><span data-stu-id="43136-122">The only ways to have these changes recognized after the schema has been registered once on a system would be either to rebuild the index and then register the new schema, or to register the schema and then create a new property for each subsequent release; for example `PKEY_GroupName_PropertyNameV2`, `PKEY_GroupName_PropertyNameV3`, and so forth).</span></span> <span data-ttu-id="43136-123">Nous vous déconseillons de créer de nouvelles propriétés de cette manière, car plusieurs colonnes superflues peuvent avoir un impact sur les performances du système.</span><span class="sxs-lookup"><span data-stu-id="43136-123">We do not recommend creating new properties in this manner, because multiple extraneous columns may impact system performance.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="43136-124">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="43136-124">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="43136-125">Implémentation de gestionnaires de propriétés</span><span class="sxs-lookup"><span data-stu-id="43136-125">Implementing Property Handlers</span></span>](./building-property-handlers.md)
</dt> <dt>

[<span data-ttu-id="43136-126">Schéma de la description de propriété</span><span class="sxs-lookup"><span data-stu-id="43136-126">Property Description Schema</span></span>](./propdesc-schema-entry.md)
</dt> </dl>

 

 
