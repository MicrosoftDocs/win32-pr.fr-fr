---
description: Stratégies de communication avec plusieurs clients de canal et de maintenance de plusieurs instances de canal.
ms.assetid: c764bde5-e053-4124-b859-1d2839ada918
title: Instances de canal nommé
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b4b7d1ec591996e83853ae6faede899ecd4e4ea2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106536531"
---
# <a name="named-pipe-instances"></a><span data-ttu-id="735cc-103">Instances de canal nommé</span><span class="sxs-lookup"><span data-stu-id="735cc-103">Named Pipe Instances</span></span>

<span data-ttu-id="735cc-104">Le serveur de canal le plus simple crée une seule instance d’un canal, se connecte à un client unique, communique avec le client, se déconnecte du client, ferme le handle de canal et se termine.</span><span class="sxs-lookup"><span data-stu-id="735cc-104">The simplest pipe server creates a single instance of a pipe, connects to a single client, communicates with the client, disconnects from the client, closes the pipe handle, and terminates.</span></span> <span data-ttu-id="735cc-105">Toutefois, il est plus courant pour un serveur de canal de communiquer avec plusieurs clients de canal.</span><span class="sxs-lookup"><span data-stu-id="735cc-105">However, it is more common for a pipe server to communicate with multiple pipe clients.</span></span> <span data-ttu-id="735cc-106">Un serveur de canaux peut utiliser une seule instance de canal pour se connecter à plusieurs clients de canal en se connectant et en se déconnectant de chaque client en séquence, mais les performances seraient médiocres.</span><span class="sxs-lookup"><span data-stu-id="735cc-106">A pipe server could use a single pipe instance to connect with multiple pipe clients by connecting to and disconnecting from each client in sequence, but performance would be poor.</span></span> <span data-ttu-id="735cc-107">Le serveur de canaux doit créer plusieurs instances de canal pour gérer efficacement plusieurs clients simultanément.</span><span class="sxs-lookup"><span data-stu-id="735cc-107">The pipe server must create multiple pipe instances to efficiently handle multiple clients simultaneously.</span></span>

<span data-ttu-id="735cc-108">Il existe trois stratégies de base pour traiter plusieurs instances de canal.</span><span class="sxs-lookup"><span data-stu-id="735cc-108">There are three basic strategies for servicing multiple pipe instances.</span></span>

-   <span data-ttu-id="735cc-109">Créez un thread distinct pour chaque instance du canal.</span><span class="sxs-lookup"><span data-stu-id="735cc-109">Create a separate thread for each instance of the pipe.</span></span> <span data-ttu-id="735cc-110">Pour obtenir un exemple de serveur de canaux multithread, consultez [serveur de canal multithread](multithreaded-pipe-server.md).</span><span class="sxs-lookup"><span data-stu-id="735cc-110">For an example of a multithreaded pipe server, see [Multithreaded Pipe Server](multithreaded-pipe-server.md).</span></span>
-   <span data-ttu-id="735cc-111">Utilisez des opérations avec chevauchement en spécifiant une structure [**OVERLAPPED**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) dans les fonctions [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)et [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) .</span><span class="sxs-lookup"><span data-stu-id="735cc-111">Use overlapped operations by specifying an [**OVERLAPPED**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) structure in the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), and [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) functions.</span></span> <span data-ttu-id="735cc-112">Pour obtenir un exemple, consultez [serveur de canal nommé utilisant des e/s avec chevauchement](named-pipe-server-using-overlapped-i-o.md).</span><span class="sxs-lookup"><span data-stu-id="735cc-112">For an example, see [Named Pipe Server Using Overlapped I/O](named-pipe-server-using-overlapped-i-o.md).</span></span>
-   <span data-ttu-id="735cc-113">Utilisez des opérations avec chevauchement à l’aide des fonctions [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) et [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) , qui spécifient une routine de saisie semi-automatique à exécuter lorsque l’opération est terminée.</span><span class="sxs-lookup"><span data-stu-id="735cc-113">Use overlapped operations by using the [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) and [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) functions, which specify a completion routine to be executed when the operation is completed.</span></span> <span data-ttu-id="735cc-114">Pour obtenir un exemple, consultez [serveur de canaux nommés utilisant les routines de saisie semi-automatique](named-pipe-server-using-completion-routines.md).</span><span class="sxs-lookup"><span data-stu-id="735cc-114">For an example, see [Named Pipe Server Using Completion Routines](named-pipe-server-using-completion-routines.md).</span></span>

<span data-ttu-id="735cc-115">Le serveur de canal multithread est plus facile à écrire, car le thread de chaque instance gère les communications pour un client de canal unique.</span><span class="sxs-lookup"><span data-stu-id="735cc-115">The multithreaded pipe server is easiest to write, because the thread for each instance handles communications for a single pipe client.</span></span> <span data-ttu-id="735cc-116">Le système alloue le temps processeur à chaque thread en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="735cc-116">The system allocates processor time to each thread as needed.</span></span> <span data-ttu-id="735cc-117">Toutefois, chaque thread utilise des ressources système, ce qui est un inconvénient pour un serveur de canal qui gère un grand nombre de clients.</span><span class="sxs-lookup"><span data-stu-id="735cc-117">But each thread uses system resources, which is a disadvantage for a pipe server that handles a large number of clients.</span></span>

<span data-ttu-id="735cc-118">Avec un serveur à thread unique, il est plus facile de coordonner les opérations qui affectent plusieurs clients, et il est plus facile de protéger les ressources partagées d’un accès simultané par plusieurs clients.</span><span class="sxs-lookup"><span data-stu-id="735cc-118">With a single-threaded server, it is easier to coordinate operations that affect multiple clients, and it is easier to protect shared resources from simultaneous access by multiple clients.</span></span> <span data-ttu-id="735cc-119">Le défi d’un serveur à thread unique est qu’il nécessite la coordination des opérations avec chevauchement pour allouer du temps processeur pour gérer les besoins simultanés des clients.</span><span class="sxs-lookup"><span data-stu-id="735cc-119">The challenge of a single-threaded server is that it requires coordination of overlapped operations to allocate processor time for handling the simultaneous needs of clients.</span></span>

 

 
