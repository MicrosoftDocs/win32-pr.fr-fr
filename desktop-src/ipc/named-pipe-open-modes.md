---
description: Le serveur de canal spécifie les modes d’accès, de chevauchement et d’écriture dans le canal dans le paramètre dwOpenMode de la fonction CreateNamedPipe. Les clients de canal peuvent spécifier ces modes ouverts pour leurs handles de canal à l’aide de la fonction CreateFile.
ms.assetid: 88824566-93c7-4941-a4fc-3a7ae9a332a4
title: Modes ouverts du canal nommé
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 97f51d41ea98a47a269634b06ccdad869bd649fa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103952922"
---
# <a name="named-pipe-open-modes"></a><span data-ttu-id="15864-104">Modes ouverts du canal nommé</span><span class="sxs-lookup"><span data-stu-id="15864-104">Named Pipe Open Modes</span></span>

<span data-ttu-id="15864-105">Le serveur de canal spécifie les modes d’accès, de chevauchement et d’écriture dans le canal dans le paramètre *dwOpenMode* de la fonction [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="15864-105">The pipe server specifies the pipe access, overlap, and write-through modes in the *dwOpenMode* parameter of the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function.</span></span> <span data-ttu-id="15864-106">Les clients de canal peuvent spécifier ces modes ouverts pour leurs handles de canal à l’aide de la fonction [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) .</span><span class="sxs-lookup"><span data-stu-id="15864-106">The pipe clients can specify these open modes for their pipe handles using the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function.</span></span>

## <a name="access-mode"></a><span data-ttu-id="15864-107">Mode d’accès</span><span class="sxs-lookup"><span data-stu-id="15864-107">Access Mode</span></span>

<span data-ttu-id="15864-108">La définition du mode d’accès au canal revient à spécifier l’accès en lecture ou en écriture associé aux descripteurs du serveur de canal.</span><span class="sxs-lookup"><span data-stu-id="15864-108">Setting the pipe access mode is equivalent to specifying read or write access associated with the pipe server's handles.</span></span> <span data-ttu-id="15864-109">Le tableau suivant indique le droit d’accès générique équivalent pour chaque mode d’accès que vous pouvez spécifier avec [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span><span class="sxs-lookup"><span data-stu-id="15864-109">The following table shows the equivalent generic access right for each access mode you can specify with [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span></span>



| <span data-ttu-id="15864-110">Mode d’accès</span><span class="sxs-lookup"><span data-stu-id="15864-110">Access mode</span></span>            | <span data-ttu-id="15864-111">Droit d’accès générique équivalent</span><span class="sxs-lookup"><span data-stu-id="15864-111">Equivalent generic access right</span></span> |
|------------------------|---------------------------------|
| <span data-ttu-id="15864-112">\_accès au canal \_ entrant</span><span class="sxs-lookup"><span data-stu-id="15864-112">PIPE\_ACCESS\_INBOUND</span></span>  | <span data-ttu-id="15864-113">\_lecture générique</span><span class="sxs-lookup"><span data-stu-id="15864-113">GENERIC\_READ</span></span>                   |
| <span data-ttu-id="15864-114">\_accès au canal \_ sortant</span><span class="sxs-lookup"><span data-stu-id="15864-114">PIPE\_ACCESS\_OUTBOUND</span></span> | <span data-ttu-id="15864-115">\_écriture générique</span><span class="sxs-lookup"><span data-stu-id="15864-115">GENERIC\_WRITE</span></span>                  |
| <span data-ttu-id="15864-116">\_duplex d’accès du canal \_</span><span class="sxs-lookup"><span data-stu-id="15864-116">PIPE\_ACCESS\_DUPLEX</span></span>   | <span data-ttu-id="15864-117">\_écriture générique en lecture générique \| \_</span><span class="sxs-lookup"><span data-stu-id="15864-117">GENERIC\_READ \| GENERIC\_WRITE</span></span> |



 

<span data-ttu-id="15864-118">Si le serveur de canal crée un canal avec \_ accès au canal \_ entrant, le canal est en lecture seule pour le serveur de canal et en écriture seule pour le client de canal.</span><span class="sxs-lookup"><span data-stu-id="15864-118">If the pipe server creates a pipe with PIPE\_ACCESS\_INBOUND, the pipe is read-only for the pipe server and write-only for the pipe client.</span></span> <span data-ttu-id="15864-119">Si le serveur de canaux crée un canal avec \_ accès aux canaux \_ sortant, le canal est en écriture seule pour le serveur de canal et en lecture seule pour le client de canal.</span><span class="sxs-lookup"><span data-stu-id="15864-119">If the pipe server creates a pipe with PIPE\_ACCESS\_OUTBOUND, the pipe is write-only for the pipe server and read-only for the pipe client.</span></span> <span data-ttu-id="15864-120">Un canal créé avec le \_ duplex d’accès \_ de canal est en lecture/écriture pour le serveur de canaux et le client de canal.</span><span class="sxs-lookup"><span data-stu-id="15864-120">A pipe created with PIPE\_ACCESS\_DUPLEX is read/write for both the pipe server and the pipe client.</span></span>

<span data-ttu-id="15864-121">Les clients de canal utilisant [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) pour se connecter à un canal nommé doivent spécifier un droit d’accès dans le paramètre *dwDesiredAccess* qui est compatible avec le mode d’accès spécifié par le serveur de canaux.</span><span class="sxs-lookup"><span data-stu-id="15864-121">Pipe clients using [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) to connect to a named pipe must specify an access right in the *dwDesiredAccess* parameter that is compatible with the access mode specified by the pipe server.</span></span> <span data-ttu-id="15864-122">Par exemple, un client doit spécifier un \_ accès en lecture générique pour ouvrir un handle pour un canal que le serveur de canal a créé avec l' \_ accès au canal \_ sortant.</span><span class="sxs-lookup"><span data-stu-id="15864-122">For example, a client must specify GENERIC\_READ access to open a handle for a pipe that the pipe server created with PIPE\_ACCESS\_OUTBOUND.</span></span> <span data-ttu-id="15864-123">Les modes d’accès doivent être les mêmes pour toutes les instances d’un canal.</span><span class="sxs-lookup"><span data-stu-id="15864-123">The access modes must be the same for all instances of a pipe.</span></span>

<span data-ttu-id="15864-124">Pour lire des attributs de canal tels que le mode lecture ou le mode blocage, le handle de canal doit avoir les attributs de lecture de fichier \_ \_ droits d’accès ; pour écrire des attributs de canal, le handle de canal doit avoir le \_ droit d’accès écriture de fichier \_ .</span><span class="sxs-lookup"><span data-stu-id="15864-124">To read pipe attributes such as the read mode or blocking mode, the pipe handle must have the FILE\_READ\_ATTRIBUTES access right; to write pipe attributes, the pipe handle must have the FILE\_WRITE\_ATTRIBUTES access right.</span></span> <span data-ttu-id="15864-125">Ces droits d’accès peuvent être combinés avec le droit d’accès générique qui est approprié pour le canal : \_ lecture générique \_ avec \_ attributs d’écriture de fichier pour un canal en lecture seule, ou \_ écriture générique avec \_ \_ attributs de lecture de fichier pour un canal en écriture seule.</span><span class="sxs-lookup"><span data-stu-id="15864-125">These access rights can be combined with the generic access right that is appropriate for the pipe: GENERIC\_READ with FILE\_WRITE\_ATTRIBUTES for a read-only pipe, or GENERIC\_WRITE with FILE\_READ\_ATTRIBUTES for a write-only pipe.</span></span> <span data-ttu-id="15864-126">La restriction des droits d’accès de cette façon offre une meilleure sécurité pour le canal.</span><span class="sxs-lookup"><span data-stu-id="15864-126">Restricting access rights in this way provides better security for the pipe.</span></span>

## <a name="overlapped-mode"></a><span data-ttu-id="15864-127">Mode avec chevauchement</span><span class="sxs-lookup"><span data-stu-id="15864-127">Overlapped Mode</span></span>

<span data-ttu-id="15864-128">En mode avec chevauchement, les fonctions qui effectuent des opérations de lecture, d’écriture et de connexion longues peuvent être immédiatement retournées.</span><span class="sxs-lookup"><span data-stu-id="15864-128">In overlapped mode, functions performing lengthy read, write, and connect operations can return immediately.</span></span> <span data-ttu-id="15864-129">Cela permet au thread d’effectuer d’autres opérations pendant qu’une opération qui prend du temps s’exécute en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="15864-129">This enables the thread to perform other operations while a time-consuming operation is executing in the background.</span></span> <span data-ttu-id="15864-130">Pour spécifier le mode avec chevauchement, utilisez l' \_ indicateur de chevauchement de l’indicateur de fichier \_ .</span><span class="sxs-lookup"><span data-stu-id="15864-130">To specify overlapped mode, use the FILE\_FLAG\_OVERLAPPED flag.</span></span> <span data-ttu-id="15864-131">Pour plus d’informations, consultez [entrées et sorties synchrones et avec chevauchement](synchronous-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="15864-131">For more information, see [Synchronous and Overlapped Input and Output](synchronous-and-overlapped-input-and-output.md).</span></span>

<span data-ttu-id="15864-132">La fonction [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) permet au client de canal de définir le mode Overlapped (avec \_ indicateur \_ de fichier Overlapped) pour ses handles de canal à l’aide du paramètre *dwFlagsAndAttributes* .</span><span class="sxs-lookup"><span data-stu-id="15864-132">The [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function allows the pipe client to set overlapped mode (FILE\_FLAG\_OVERLAPPED) for its pipe handles using the *dwFlagsAndAttributes* parameter.</span></span>

## <a name="write-through-mode"></a><span data-ttu-id="15864-133">Mode de Write-Through</span><span class="sxs-lookup"><span data-stu-id="15864-133">Write-Through Mode</span></span>

<span data-ttu-id="15864-134">Spécifiez le mode écriture à l’aide d’un indicateur de fichier en \_ \_ écriture \_ .</span><span class="sxs-lookup"><span data-stu-id="15864-134">Specify write-through mode with FILE\_FLAG\_WRITE\_THROUGH.</span></span> <span data-ttu-id="15864-135">Ce mode affecte uniquement les opérations d’écriture aux canaux de type octet entre les clients de canal et les serveurs de canal sur des ordinateurs différents.</span><span class="sxs-lookup"><span data-stu-id="15864-135">This mode affects only write operations to byte-type pipes between pipe clients and pipe servers on different computers.</span></span> <span data-ttu-id="15864-136">En mode écriture, les fonctions qui écrivent dans un canal nommé ne sont pas retournées tant que les données ne sont pas transmises sur le réseau et dans la mémoire tampon du canal sur l’ordinateur distant.</span><span class="sxs-lookup"><span data-stu-id="15864-136">In write-through mode, the functions that write to a named pipe do not return until the data is transmitted across the network and into the pipe's buffer on the remote computer.</span></span> <span data-ttu-id="15864-137">Le mode écriture est utile pour les applications qui nécessitent une synchronisation pour chaque opération d’écriture.</span><span class="sxs-lookup"><span data-stu-id="15864-137">Write-through mode is useful for applications that require synchronization for every write operation.</span></span>

<span data-ttu-id="15864-138">Si le mode d’écriture n’est pas activé, le système améliore l’efficacité des opérations réseau en passant les données en mémoire tampon jusqu’à ce que le nombre minimal d’octets soit écoulé ou jusqu’à ce qu’un laps de temps maximal soit écoulé.</span><span class="sxs-lookup"><span data-stu-id="15864-138">If write-through mode is not enabled, the system enhances the efficiency of network operations by buffering data until a minimum number of bytes have accumulated or until a maximum time period has elapsed.</span></span> <span data-ttu-id="15864-139">La mise en mémoire tampon permet au système de combiner plusieurs opérations d’écriture dans une seule transmission réseau.</span><span class="sxs-lookup"><span data-stu-id="15864-139">Buffering enables the system to combine multiple write operations into a single network transmission.</span></span> <span data-ttu-id="15864-140">Cela signifie qu’une opération d’écriture peut être effectuée correctement après que le système a placé les données dans la mémoire tampon sortante, mais avant que le système ne les transmette sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="15864-140">This means that a write operation can be successfully completed after the system puts the data in the outbound buffer, but before the system transmits it across the network.</span></span>

<span data-ttu-id="15864-141">La fonction [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) permet au client de canal de définir le mode d’écriture (l’indicateur de fichier en \_ \_ écriture \_ ) pour ses descripteurs de canal à l’aide du paramètre *dwFlagsAndAttributes* .</span><span class="sxs-lookup"><span data-stu-id="15864-141">The [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function allows the pipe client to set write-through mode (FILE\_FLAG\_WRITE\_THROUGH) for its pipe handles using the *dwFlagsAndAttributes* parameter.</span></span> <span data-ttu-id="15864-142">Le mode d’écriture directe d’un handle de canal ne peut pas être modifié après la création du handle de canal.</span><span class="sxs-lookup"><span data-stu-id="15864-142">The write-through mode of a pipe handle cannot be changed after the pipe handle has been created.</span></span> <span data-ttu-id="15864-143">Le mode d’écriture peut être différent pour les handles de serveur et de client vers la même instance de canal.</span><span class="sxs-lookup"><span data-stu-id="15864-143">The write-through mode can be different for server and client handles to the same pipe instance.</span></span>

<span data-ttu-id="15864-144">Un client de canal peut utiliser la fonction [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) pour contrôler le nombre d’octets et le délai d’attente avant la transmission d’un canal sur lequel le mode d’écriture est désactivé.</span><span class="sxs-lookup"><span data-stu-id="15864-144">A pipe client can use the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function to control the number of bytes and the time-out period before transmission for a pipe on which write-through mode is disabled.</span></span> <span data-ttu-id="15864-145">Pour un canal en lecture seule, le descripteur de canal doit être ouvert avec les \_ droits d’accès de lecture et d’écriture de fichier génériques \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="15864-145">For a read-only pipe, the pipe handle must be opened with the GENERIC\_READ and FILE\_WRITE\_ATTRIBUTES access rights.</span></span>

 

 
