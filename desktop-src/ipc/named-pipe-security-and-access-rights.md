---
description: Vous pouvez spécifier un descripteur de sécurité pour un canal nommé quand vous appelez la fonction CreateNamedPipe. Le descripteur de sécurité contrôle l’accès aux terminaisons client et serveur du canal nommé.
ms.assetid: f9ea97c9-9a97-4083-82d8-29ffb8be5a77
title: Sécurité des canaux nommés et droits d’accès
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11cada606d8197ac2f64943aa742bbfd614fa4ef
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106534541"
---
# <a name="named-pipe-security-and-access-rights"></a><span data-ttu-id="1f9dd-104">Sécurité des canaux nommés et droits d’accès</span><span class="sxs-lookup"><span data-stu-id="1f9dd-104">Named Pipe Security and Access Rights</span></span>

<span data-ttu-id="1f9dd-105">La sécurité Windows vous permet de contrôler l’accès aux canaux nommés.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-105">Windows security enables you to control access to named pipes.</span></span> <span data-ttu-id="1f9dd-106">Pour plus d’informations sur la sécurité, consultez [modèle de contrôle d’accès](/windows/desktop/SecAuthZ/access-control-model).</span><span class="sxs-lookup"><span data-stu-id="1f9dd-106">For more information about security, see [Access-Control Model](/windows/desktop/SecAuthZ/access-control-model).</span></span>

<span data-ttu-id="1f9dd-107">Vous pouvez spécifier un [descripteur de sécurité](/windows/desktop/SecAuthZ/security-descriptors) pour un canal nommé quand vous appelez la fonction [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="1f9dd-107">You can specify a [security descriptor](/windows/desktop/SecAuthZ/security-descriptors) for a named pipe when you call the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function.</span></span> <span data-ttu-id="1f9dd-108">Le descripteur de sécurité contrôle l’accès aux terminaisons client et serveur du canal nommé.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-108">The security descriptor controls access to both client and server ends of the named pipe.</span></span> <span data-ttu-id="1f9dd-109">Si vous spécifiez **null**, le canal nommé obtient un descripteur de sécurité par défaut.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-109">If you specify **NULL**, the named pipe gets a default security descriptor.</span></span> <span data-ttu-id="1f9dd-110">Les listes de contrôle d’accès dans le descripteur de sécurité par défaut pour un canal nommé accordent un contrôle total au compte LocalSystem, aux administrateurs et au propriétaire créateur.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-110">The ACLs in the default security descriptor for a named pipe grant full control to the LocalSystem account, administrators, and the creator owner.</span></span> <span data-ttu-id="1f9dd-111">Ils accordent également un accès en lecture aux membres du groupe tout le monde et du compte anonyme.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-111">They also grant read access to members of the Everyone group and the anonymous account.</span></span>

<span data-ttu-id="1f9dd-112">Pour récupérer le descripteur de sécurité d’un canal nommé, appelez la fonction [**GetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-getsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="1f9dd-112">To retrieve a named pipe's security descriptor, call the [**GetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-getsecurityinfo) function.</span></span> <span data-ttu-id="1f9dd-113">Pour modifier le descripteur de sécurité d’un canal nommé, appelez la fonction [**SetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-setsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="1f9dd-113">To change the security descriptor of a named pipe, call the [**SetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-setsecurityinfo) function.</span></span>

<span data-ttu-id="1f9dd-114">Lorsqu’un thread appelle [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) pour ouvrir un handle à l’extrémité serveur d’un canal nommé existant, le système effectue une vérification d’accès avant de retourner le handle.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-114">When a thread calls [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) to open a handle to the server end of an existing named pipe, the system performs an access check before returning the handle.</span></span> <span data-ttu-id="1f9dd-115">La vérification d’accès compare le jeton d’accès du thread et les [droits d’accès](/windows/desktop/SecAuthZ/access-rights-and-access-masks) demandés à la liste DACL dans le descripteur de sécurité du canal nommé.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-115">The access check compares the thread's access token and the requested [access rights](/windows/desktop/SecAuthZ/access-rights-and-access-masks) against the DACL in the named pipe's security descriptor.</span></span> <span data-ttu-id="1f9dd-116">En plus des droits d’accès demandés, la DACL doit autoriser l' \_ \_ accès de l’instance de création de canal du fichier de thread appelant \_ au canal nommé.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-116">In addition to the requested access rights, the DACL must allow the calling thread FILE\_CREATE\_PIPE\_INSTANCE access to the named pipe.</span></span>

<span data-ttu-id="1f9dd-117">De même, lorsqu’un client appelle la fonction [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) ou [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) pour se connecter à l’extrémité cliente d’un canal nommé, le système effectue une vérification d’accès avant d’accorder l’accès au client.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-117">Similarly, when a client calls the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) or [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) function to connect to the client end of a named pipe, the system performs an access check before granting access to the client.</span></span>

<span data-ttu-id="1f9dd-118">Le handle retourné par la fonction [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) a toujours un accès Synchronize.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-118">The handle returned by the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function always has SYNCHRONIZE access.</span></span> <span data-ttu-id="1f9dd-119">Il possède également une \_ lecture générique, une \_ écriture générique, ou les deux, selon le mode d’ouverture du canal.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-119">It also has GENERIC\_READ, GENERIC\_WRITE, or both, depending on the open mode of the pipe.</span></span> <span data-ttu-id="1f9dd-120">Voici les droits d’accès pour chaque mode ouvert.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-120">The following are the access rights for each open mode.</span></span>



| <span data-ttu-id="1f9dd-121">Mode d’ouverture</span><span class="sxs-lookup"><span data-stu-id="1f9dd-121">Open mode</span></span>                           | <span data-ttu-id="1f9dd-122">Droits d’accès</span><span class="sxs-lookup"><span data-stu-id="1f9dd-122">Access rights</span></span>                                              |
|-------------------------------------|------------------------------------------------------------|
| <span data-ttu-id="1f9dd-123">DUPLEX d’accès du canal \_ \_ (0x00000003)</span><span class="sxs-lookup"><span data-stu-id="1f9dd-123">PIPE\_ACCESS\_DUPLEX (0x00000003)</span></span>   | <span data-ttu-id="1f9dd-124">FICHIER \_ de \_ lecture générique, \_ écriture générique de fichier \_ et synchroniser</span><span class="sxs-lookup"><span data-stu-id="1f9dd-124">FILE\_GENERIC\_READ, FILE\_GENERIC\_WRITE, and SYNCHRONIZE</span></span> |
| <span data-ttu-id="1f9dd-125">\_Accès au canal \_ entrant (0x00000001)</span><span class="sxs-lookup"><span data-stu-id="1f9dd-125">PIPE\_ACCESS\_INBOUND (0x00000001)</span></span>  | <span data-ttu-id="1f9dd-126">\_ \_ Lecture et synchronisation génériques de fichier</span><span class="sxs-lookup"><span data-stu-id="1f9dd-126">FILE\_GENERIC\_READ and SYNCHRONIZE</span></span>                        |
| <span data-ttu-id="1f9dd-127">\_Accès au canal \_ sortant (0x00000002)</span><span class="sxs-lookup"><span data-stu-id="1f9dd-127">PIPE\_ACCESS\_OUTBOUND (0x00000002)</span></span> | <span data-ttu-id="1f9dd-128">\_ \_ Écriture et synchronisation génériques des fichiers</span><span class="sxs-lookup"><span data-stu-id="1f9dd-128">FILE\_GENERIC\_WRITE and SYNCHRONIZE</span></span>                       |



 

<span data-ttu-id="1f9dd-129">FICHIER \_ générique \_ accès en lecture pour un canal nommé combine les droits de lecture des données du canal, de lecture des attributs de canal, de lecture des attributs étendus et de lecture de la liste DACL du canal.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-129">FILE\_GENERIC\_READ access for a named pipe combines the rights to read data from the pipe, read pipe attributes, read extended attributes, and read the pipe's DACL.</span></span>

<span data-ttu-id="1f9dd-130">FICHIER \_ générique \_ accès en écriture pour un canal nommé combine les droits d’écriture de données dans le canal, y ajoute des données, écrit des attributs de canal, écrit des attributs étendus et lit la liste DACL du canal.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-130">FILE\_GENERIC\_WRITE access for a named pipe combines the rights to write data to the pipe, append data to it, write pipe attributes, write extended attributes, and read the pipe's DACL.</span></span> <span data-ttu-id="1f9dd-131">Étant donné \_ que \_ les données d’ajout de fichier et \_ l’instance de création de canal de fichier \_ \_ ont la même définition, le fichier \_ \_ écriture générique active l’autorisation de créer le canal.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-131">Because FILE\_APPEND\_DATA and FILE\_CREATE\_PIPE\_INSTANCE have the same definition, so FILE\_GENERIC\_WRITE enables permission to create the pipe.</span></span> <span data-ttu-id="1f9dd-132">Pour éviter ce problème, utilisez les droits individuels au lieu d’utiliser l' \_ écriture générique de fichier \_ .</span><span class="sxs-lookup"><span data-stu-id="1f9dd-132">To avoid this problem, use the individual rights instead of using FILE\_GENERIC\_WRITE.</span></span>

<span data-ttu-id="1f9dd-133">Vous pouvez demander le \_ \_ droit d’accès à la sécurité du système d’accès à un objet de canal nommé si vous souhaitez lire ou écrire la liste SACL de l’objet.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-133">You can request the ACCESS\_SYSTEM\_SECURITY access right to a named pipe object if you want to read or write the object's SACL.</span></span> <span data-ttu-id="1f9dd-134">Pour plus d’informations, consultez [listes de contrôle d’accès (ACL)](/windows/desktop/SecAuthZ/access-control-lists) et [droit d’accès SACL](/windows/desktop/SecAuthZ/sacl-access-right).</span><span class="sxs-lookup"><span data-stu-id="1f9dd-134">For more information, see [Access-Control Lists (ACLs)](/windows/desktop/SecAuthZ/access-control-lists) and [SACL Access Right](/windows/desktop/SecAuthZ/sacl-access-right).</span></span>

<span data-ttu-id="1f9dd-135">Pour empêcher les utilisateurs distants ou les utilisateurs d’une autre session des services Terminal Server d’accéder à un canal nommé, utilisez le SID d’ouverture de session sur la liste DACL pour le canal.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-135">To prevent remote users or users on a different terminal services session from accessing a named pipe, use the logon SID on the DACL for the pipe.</span></span> <span data-ttu-id="1f9dd-136">Le SID d’ouverture de session est également utilisé dans les ouvertures de session d’exécution. Il s’agit du SID utilisé pour protéger l’espace de noms d’objet par session.</span><span class="sxs-lookup"><span data-stu-id="1f9dd-136">The logon SID is used in run-as logons as well; it is the SID used to protect the per-session object namespace.</span></span> <span data-ttu-id="1f9dd-137">Pour plus d’informations, consultez [obtention du SID d’ouverture de session en C++](/previous-versions//aa446670(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="1f9dd-137">For more information, see [Getting the Logon SID in C++](/previous-versions//aa446670(v=vs.85)).</span></span>

 

 
