---
description: Les fonctionnalités de gestion des symboles de l’API DbgHelp ont évolué au fil des années.
ms.assetid: 6dc41682-6104-418b-b045-7afe8c2b11e9
title: Symboles publics, globaux et locaux
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 623bf93ec8f11d1cec9c5fec64e2479dd91ee5cd
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104033644"
---
# <a name="public-global-and-local-symbols"></a><span data-ttu-id="c4695-103">Symboles publics, globaux et locaux</span><span class="sxs-lookup"><span data-stu-id="c4695-103">Public, Global, and Local Symbols</span></span>

<span data-ttu-id="c4695-104">Les fonctionnalités de gestion des symboles de l’API DbgHelp ont évolué au fil des années.</span><span class="sxs-lookup"><span data-stu-id="c4695-104">The symbol handling capabilities of the DbgHelp API have evolved over the years.</span></span> <span data-ttu-id="c4695-105">Pour vous assurer que votre code fonctionne dans différents scénarios et fournit des détails complets sur les symboles, utilisez les fonctions les plus récentes chaque fois que cela est possible.</span><span class="sxs-lookup"><span data-stu-id="c4695-105">To ensure that your code works in a variety of scenarios and provides full details on the symbols, use the newest functions whenever possible.</span></span> <span data-ttu-id="c4695-106">Par exemple, [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) remplace [**SymEnumerateSymbols64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratesymbols), [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) remplace [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname)et [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) remplace [**SymGetSymFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromaddr).</span><span class="sxs-lookup"><span data-stu-id="c4695-106">For example, [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) replaces [**SymEnumerateSymbols64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratesymbols), [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) replaces [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname), and [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) replaces [**SymGetSymFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromaddr).</span></span>

## <a name="public-symbols"></a><span data-ttu-id="c4695-107">Symboles publics</span><span class="sxs-lookup"><span data-stu-id="c4695-107">Public Symbols</span></span>

<span data-ttu-id="c4695-108">Les versions initiales de DbgHelp.dll prises en charge en examinant uniquement les symboles publics.</span><span class="sxs-lookup"><span data-stu-id="c4695-108">Initial versions of DbgHelp.dll supported examining only public symbols.</span></span> <span data-ttu-id="c4695-109">Ces symboles sont générés pour tout élément du code qui doit être exposé entre différents fichiers sources.</span><span class="sxs-lookup"><span data-stu-id="c4695-109">These symbols are generated for any item in the code that must be exposed between different source files.</span></span> <span data-ttu-id="c4695-110">Ils incluent également tous les éléments qui sont exportés à partir du module.</span><span class="sxs-lookup"><span data-stu-id="c4695-110">They also include all items that are exported out of the module.</span></span>

<span data-ttu-id="c4695-111">Les symboles sont soit incorporés dans l’image, soit stockés séparément dans un fichier. dbg ou. pdb.</span><span class="sxs-lookup"><span data-stu-id="c4695-111">The symbols are either embedded in the image, or stored separately in a .dbg or .pdb file.</span></span> <span data-ttu-id="c4695-112">Les seules informations stockées sont le nom et l’adresse du symbole.</span><span class="sxs-lookup"><span data-stu-id="c4695-112">The only information stored is the symbol name and address.</span></span> <span data-ttu-id="c4695-113">Les noms sont disponibles sous forme de noms décorés.</span><span class="sxs-lookup"><span data-stu-id="c4695-113">The names are available as decorated names.</span></span> <span data-ttu-id="c4695-114">Pour afficher les noms non décorés, appelez la fonction [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) avec SYMOPT \_ UNDNAME, ou utilisez la fonction [**UnDecorateSymbolName**](/windows/desktop/api/Dbghelp/nf-dbghelp-undecoratesymbolname) .</span><span class="sxs-lookup"><span data-stu-id="c4695-114">To view undecorated names, call the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function with SYMOPT\_UNDNAME, or use the [**UnDecorateSymbolName**](/windows/desktop/api/Dbghelp/nf-dbghelp-undecoratesymbolname) function.</span></span>

<span data-ttu-id="c4695-115">Notez que l’API DbgHelp n’a pas été initialement conçue pour prendre en charge plusieurs instances du même symbole au sein d’un module.</span><span class="sxs-lookup"><span data-stu-id="c4695-115">Note that the DbgHelp API was not initially designed to support multiple instances of the same symbol within a module.</span></span> <span data-ttu-id="c4695-116">Cela est dû au fait que les symboles publics sont limités à des noms uniques au sein d’un module.</span><span class="sxs-lookup"><span data-stu-id="c4695-116">This is because public symbols are restricted to unique names within a module.</span></span> <span data-ttu-id="c4695-117">Par conséquent, [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname) retourne uniquement le premier symbole qui correspond.</span><span class="sxs-lookup"><span data-stu-id="c4695-117">Therefore, [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname) returns only the first symbol that matches.</span></span> <span data-ttu-id="c4695-118">Pour récupérer tous les symboles correspondants, appelez [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols).</span><span class="sxs-lookup"><span data-stu-id="c4695-118">To retrieve all symbols that match, call [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols).</span></span>

## <a name="global-and-local-symbols"></a><span data-ttu-id="c4695-119">Symboles globaux et locaux</span><span class="sxs-lookup"><span data-stu-id="c4695-119">Global and Local Symbols</span></span>

<span data-ttu-id="c4695-120">Les versions plus récentes de DbgHelp.dll prennent en charge les symboles globaux et locaux lors de l’utilisation de fichiers. pdb.</span><span class="sxs-lookup"><span data-stu-id="c4695-120">Newer versions of DbgHelp.dll support global and local symbols when using .pdb files.</span></span> <span data-ttu-id="c4695-121">Ces nouvelles versions incluent les fonctions statiques, les fonctions étendues dans un fichier source, les paramètres de fonction et les variables locales.</span><span class="sxs-lookup"><span data-stu-id="c4695-121">These new versions include static functions, functions scoped within a source file, function parameters, and local variables.</span></span> <span data-ttu-id="c4695-122">Lorsque DbgHelp recherche un symbole, il vérifie les tables de symboles globales et locales avant de vérifier la table de symboles publique.</span><span class="sxs-lookup"><span data-stu-id="c4695-122">When DbgHelp searches for a symbol, it checks the global and local symbol tables before checking the public symbol table.</span></span> <span data-ttu-id="c4695-123">Cela est dû au fait que des informations supplémentaires sont disponibles pour ces types de symboles et qu’elles ne sont disponibles que pour les symboles publics.</span><span class="sxs-lookup"><span data-stu-id="c4695-123">This is because there is more information available for these types of symbols than is available for public symbols.</span></span>

<span data-ttu-id="c4695-124">Les symboles globaux et locaux sont stockés avec des noms non décorés.</span><span class="sxs-lookup"><span data-stu-id="c4695-124">Global and local symbols are stored with undecorated names.</span></span> <span data-ttu-id="c4695-125">Par conséquent, l' \_ indicateur SYMOPT UNDNAME n’a aucun effet.</span><span class="sxs-lookup"><span data-stu-id="c4695-125">Therefore, the SYMOPT\_UNDNAME flag has no effect.</span></span> <span data-ttu-id="c4695-126">Pour connaître les noms de symboles décorés, vous devez utiliser l' \_ indicateur SYMOPT public \_ only.</span><span class="sxs-lookup"><span data-stu-id="c4695-126">To get decorated symbol names, you must use the SYMOPT\_PUBLICS\_ONLY flag.</span></span> <span data-ttu-id="c4695-127">Cela amène le DbgHelp à rechercher uniquement les symboles publics.</span><span class="sxs-lookup"><span data-stu-id="c4695-127">This causes DbgHelp to search only the public symbols.</span></span>

<span data-ttu-id="c4695-128">Pour afficher les symboles locaux ou les paramètres de fonction, appelez la fonction [**SymSetContext**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetcontext) avec le membre **InstructionOffset** de la structure de [**\_ \_ Frame de pile imagehlp**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_stack_frame) défini sur l’adresse de n’importe quel symbole de fonction.</span><span class="sxs-lookup"><span data-stu-id="c4695-128">To view local symbols or function parameters, call the [**SymSetContext**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetcontext) function with the **InstructionOffset** member of the [**IMAGEHLP\_STACK\_FRAME**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_stack_frame) structure set to the address of any function symbol.</span></span> <span data-ttu-id="c4695-129">Les appels suivants à [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) et [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) peuvent fonctionner dans le contexte de cette adresse.</span><span class="sxs-lookup"><span data-stu-id="c4695-129">Subsequent calls to [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) and [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) can operate within the context of this address.</span></span> <span data-ttu-id="c4695-130">Pour ce faire, affectez la **valeur null** au paramètre *BaseOfDll* et omettez le spécificateur de module dans le paramètre *Name* ou *Mask* .</span><span class="sxs-lookup"><span data-stu-id="c4695-130">To do so, set the *BaseOfDll* parameter to **NULL** and omit the module specifier from the *Name* or *Mask* parameter.</span></span> <span data-ttu-id="c4695-131">Cela force le DbgHelp à rechercher des symboles correspondants dans l’étendue indiquée par **SymSetContext**.</span><span class="sxs-lookup"><span data-stu-id="c4695-131">This forces DbgHelp to search for matching symbols within the scope indicated by **SymSetContext**.</span></span>

<span data-ttu-id="c4695-132">Pour déterminer si un symbole est un paramètre, vérifiez le membre **Flags** de la structure des [**\_ informations de symbole**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) .</span><span class="sxs-lookup"><span data-stu-id="c4695-132">To determine if a symbol is a parameter, check the **Flags** member of the [**SYMBOL\_INFO**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) structure.</span></span> <span data-ttu-id="c4695-133">Si le symbole est un paramètre, le membre contient le \_ paramètre SYMFLAG.</span><span class="sxs-lookup"><span data-stu-id="c4695-133">If the symbol is a parameter, the member contains SYMFLAG\_PARAMETER.</span></span> <span data-ttu-id="c4695-134">S’il s’agit d’un symbole local, le membre contient SYMFLAG \_ local.</span><span class="sxs-lookup"><span data-stu-id="c4695-134">If it is a local symbol, the member contains SYMFLAG\_LOCAL.</span></span>

 

 



