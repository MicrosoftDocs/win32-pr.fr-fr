---
description: Lorsqu’une erreur se produit, la plupart des fonctions système retournent un code d’erreur, généralement 0, NULL ou &\# 8211 ; 1.
ms.assetid: fd5b0d6e-78cf-4f51-b61d-d32576cd485a
title: Code Last-Error
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 80bf0fe2f544fc3d87690be81b0d09767745ef95
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103950469"
---
# <a name="last-error-code"></a><span data-ttu-id="443bb-103">Code Last-Error</span><span class="sxs-lookup"><span data-stu-id="443bb-103">Last-Error Code</span></span>

<span data-ttu-id="443bb-104">Lorsqu’une erreur se produit, la plupart des fonctions système retournent un code d’erreur, généralement 0, **null** ou-1.</span><span class="sxs-lookup"><span data-stu-id="443bb-104">When an error occurs, most system functions return an error code, usually 0, **NULL**, or –1.</span></span> <span data-ttu-id="443bb-105">De nombreuses fonctions système définissent également un code d’erreur supplémentaire appelé *dernier code d’erreur*.</span><span class="sxs-lookup"><span data-stu-id="443bb-105">Many system functions also set an additional error code called the *last-error code*.</span></span> <span data-ttu-id="443bb-106">Ce code d’erreur est conservé séparément pour chaque thread en cours d’exécution. une erreur dans un thread ne remplace pas le dernier code d’erreur dans un autre thread.</span><span class="sxs-lookup"><span data-stu-id="443bb-106">This error code is maintained separately for each running thread; an error in one thread does not overwrite the last-error code in another thread.</span></span> <span data-ttu-id="443bb-107">Toute fonction peut appeler la fonction [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) ou [**SetLastErrorEx**](/windows/desktop/api/Winuser/nf-winuser-setlasterrorex) pour définir le dernier code d’erreur du thread en cours.</span><span class="sxs-lookup"><span data-stu-id="443bb-107">Any function can call the [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) or [**SetLastErrorEx**](/windows/desktop/api/Winuser/nf-winuser-setlasterrorex) function to set the last-error code for the current thread.</span></span> <span data-ttu-id="443bb-108">Ces fonctions sont principalement destinées aux bibliothèques de liens dynamiques (DLL), afin qu’elles puissent fournir des informations à l’application appelante.</span><span class="sxs-lookup"><span data-stu-id="443bb-108">These functions are intended primarily for dynamic-link libraries (DLL), so they can provide information to the calling application.</span></span> <span data-ttu-id="443bb-109">Notez que certaines fonctions appellent **SetLastError** ou **SetLastErrorEx** avec 0 quand elles réussissent, effaçant le code d’erreur défini par la dernière fonction ayant échoué, alors que d’autres ne le font pas.</span><span class="sxs-lookup"><span data-stu-id="443bb-109">Note that some functions call **SetLastError** or **SetLastErrorEx** with 0 when they succeed, wiping out the error code set by the most recently failed function, while others do not.</span></span>

<span data-ttu-id="443bb-110">Une application peut récupérer le dernier code d’erreur à l’aide de la fonction [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror) . le code d’erreur peut en savoir plus sur ce qui s’est réellement produit pour faire échouer la fonction.</span><span class="sxs-lookup"><span data-stu-id="443bb-110">An application can retrieve the last-error code by using the [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror) function; the error code may tell more about what actually occurred to make the function fail.</span></span> <span data-ttu-id="443bb-111">La documentation relative aux fonctions système indique les conditions dans lesquelles la fonction définit le dernier code d’erreur.</span><span class="sxs-lookup"><span data-stu-id="443bb-111">The documentation for system functions will indicate the conditions under which the function sets the last-error code.</span></span>

<span data-ttu-id="443bb-112">Le système définit un ensemble de codes d’erreur qui peuvent être définis en tant que codes de dernière erreur ou être retournés par ces fonctions.</span><span class="sxs-lookup"><span data-stu-id="443bb-112">The system defines a set of error codes that can be set as last-error codes or be returned by these functions.</span></span> <span data-ttu-id="443bb-113">Les codes d’erreur sont des valeurs 32 bits (le bit 31 est le bit le plus significatif).</span><span class="sxs-lookup"><span data-stu-id="443bb-113">Error codes are 32-bit values (bit 31 is the most significant bit).</span></span> <span data-ttu-id="443bb-114">Le bit 29 est réservé aux codes d’erreur définis par l’application ; aucun code d’erreur système n’a ce bit défini.</span><span class="sxs-lookup"><span data-stu-id="443bb-114">Bit 29 is reserved for application-defined error codes; no system error code has this bit set.</span></span> <span data-ttu-id="443bb-115">Si vous définissez des codes d’erreur pour votre application, définissez ce bit pour indiquer que le code d’erreur a été défini par une application et que les codes d’erreur ne sont pas en conflit avec les codes d’erreur définis par le système.</span><span class="sxs-lookup"><span data-stu-id="443bb-115">If you define error codes for your application, set this bit to indicate that the error code has been defined by an application and to ensure that the error codes do not conflict with any system-defined error codes.</span></span> <span data-ttu-id="443bb-116">Pour plus d’informations, consultez WinError. h et [codes d’erreur système](system-error-codes.md).</span><span class="sxs-lookup"><span data-stu-id="443bb-116">For more information, see WinError.h and [System Error Codes](system-error-codes.md).</span></span>

 

 
