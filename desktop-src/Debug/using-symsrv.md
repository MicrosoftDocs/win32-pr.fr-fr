---
description: Utilisation de SymSrv
ms.assetid: d400f222-c50c-4c7b-8f8a-0c3ed3bba3b9
title: Utilisation de SymSrv
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ae79d9fd045ab3ce946c14468e56419d3074858c
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104200994"
---
# <a name="using-symsrv"></a><span data-ttu-id="f1f1c-103">Utilisation de SymSrv</span><span class="sxs-lookup"><span data-stu-id="f1f1c-103">Using SymSrv</span></span>

<span data-ttu-id="f1f1c-104">SymSrv fournit des fichiers de symboles à partir de magasins de symboles centralisés.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-104">SymSrv delivers symbol files from centralized symbol stores.</span></span> <span data-ttu-id="f1f1c-105">Ces magasins peuvent contenir un nombre quelconque de fichiers de symboles, correspondant à un nombre quelconque de programmes ou de systèmes d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-105">These stores can contain any number of symbol files, corresponding to any number of programs or operating systems.</span></span> <span data-ttu-id="f1f1c-106">Les magasins peuvent également contenir des fichiers binaires, qui sont particulièrement utiles lors du débogage de fichiers minidump.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-106">The stores can also contain binary files, which are particularly useful when debugging minidump files.</span></span>

<span data-ttu-id="f1f1c-107">Les magasins peuvent contenir les véritables fichiers de symboles et binaires, ou simplement pointeurs vers des fichiers de symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-107">The stores can contain the actual symbol and binary files or simply pointers to symbol files.</span></span> <span data-ttu-id="f1f1c-108">Si le magasin contient des pointeurs, SymSrv récupère les fichiers réels directement à partir de leurs sources.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-108">If the store contains pointers, SymSrv will retrieve the actual files directly from their sources.</span></span>

<span data-ttu-id="f1f1c-109">SymSrv peut également séparer un magasin de symboles volumineux en un plus petit sous-ensemble adapté à une tâche de débogage spécialisée.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-109">SymSrv can also separate a large symbol store into a smaller subset that is appropriate for a specialized debugging task.</span></span>

<span data-ttu-id="f1f1c-110">Enfin, SymSrv peut obtenir des fichiers de symboles à partir d’une source HTTP ou HTTPs à l’aide des informations de connexion fournies par le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-110">Finally, SymSrv can obtain symbol files from an HTTP or HTTPS source using the logon information provided by the operating system.</span></span> <span data-ttu-id="f1f1c-111">SymSrv prend en charge les sites HTTPs protégés par des cartes à puce, des certificats, des connexions et des mots de passe standard.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-111">SymSrv supports HTTPS sites protected by smartcards, certificates, and regular logins and passwords.</span></span>

## <a name="setting-the-symbol-path"></a><span data-ttu-id="f1f1c-112">Définition du chemin d’accès aux symboles</span><span class="sxs-lookup"><span data-stu-id="f1f1c-112">Setting the Symbol Path</span></span>

<span data-ttu-id="f1f1c-113">Comme décrit dans [chemins](symbol-paths.md)d’accès aux symboles, le chemin d’accès aux symboles ( \_ variable d’environnement du \_ \_ chemin d’accès aux symboles NT) peut être constitué de plusieurs éléments de chemin d’accès séparés par des points-virgules.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-113">As described in [Symbol Paths](symbol-paths.md), the symbol path (\_NT\_SYMBOL\_PATH environment variable) can be made up of several path elements separated by semicolons.</span></span> <span data-ttu-id="f1f1c-114">Si un ou plusieurs de ces éléments de chemin d’accès commencent par le texte « SRV \* », l’élément est un serveur de symboles et utilise symsrv pour localiser les fichiers de symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-114">If any one or more of these path elements begins with the text "srv\*", then the element is a symbol server and will use SymSrv to locate symbol files.</span></span>

> [!Note]  
> <span data-ttu-id="f1f1c-115">Si le texte « SRV \* » n’est pas spécifié mais que l’élément de chemin d’accès réel est un magasin de serveurs de symboles, le gestionnaire de symboles agit comme si « SRV \* » avait été spécifié.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-115">If the "srv\*" text is not specified but the actual path element is a symbol server store, then the symbol handler will act as if "srv\*" were specified.</span></span> <span data-ttu-id="f1f1c-116">Le gestionnaire de symboles effectue cette détermination en recherchant l’existence d’un fichier appelé « pingme.txt » dans le répertoire racine du chemin d’accès spécifié.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-116">The symbol handler makes this determination by searching for the existence of a file called "pingme.txt" in the root directory of the specified path.</span></span>

 

<span data-ttu-id="f1f1c-117">Tout comme les chemins d’accès aux symboles sont composés d’éléments de chemin d’accès aux symboles séparés par des points-virgules, les serveurs de symboles sont composés d’éléments de magasin de symboles séparés par des astérisques.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-117">Just as symbol paths are made up of symbol path elements separated by semicolons, symbol servers are made up of symbol store elements separated by asterisks.</span></span> <span data-ttu-id="f1f1c-118">Il peut y avoir jusqu’à 10 magasins de symboles après le \* préfixe « SRV ».</span><span class="sxs-lookup"><span data-stu-id="f1f1c-118">There can be up to 10 symbol stores after the "srv\*" prefix.</span></span> <span data-ttu-id="f1f1c-119">Les magasins répertoriés à gauche de la liste sont appelés magasins en *aval* et magasins à droite sont appelés magasins en *amont* .</span><span class="sxs-lookup"><span data-stu-id="f1f1c-119">Stores listed to the left of the list are called *downstream* stores and stores to the right are called *upstream* stores.</span></span>

<dl> <span data-ttu-id="f1f1c-120">\**SymbolStore* SRV</span><span class="sxs-lookup"><span data-stu-id="f1f1c-120">srv\**SymbolStore*</span></span>  
<span data-ttu-id="f1f1c-121">SRV \* *SymbolStore1* \* *SymbolStoreN*  
</span><span class="sxs-lookup"><span data-stu-id="f1f1c-121">srv\**SymbolStore1*\**SymbolStoreN*  
</span></span></dl>

<span data-ttu-id="f1f1c-122">Si un seul élément du magasin de symboles est inclus dans le chemin d’accès, SymSrv essaie d’utiliser le fichier demandé directement à partir de ce magasin.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-122">If only one symbol store element is included in the path, then SymSrv will attempt to use the any requested file directly from that store.</span></span>

<span data-ttu-id="f1f1c-123">S’il y a deux magasins de symboles dans le chemin, SymSrv recherche le fichier de symboles dans le magasin de symboles le plus à gauche.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-123">If there are two symbol stores in the path, SymSrv looks for the symbol file in the leftmost symbol store.</span></span> <span data-ttu-id="f1f1c-124">Si le fichier est présent, il est utilisé.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-124">If the file is there, it is used.</span></span> <span data-ttu-id="f1f1c-125">Si ce n’est pas le cas, SymSrv regarde immédiatement dans le magasin de symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-125">If it is not there, SymSrv looks in the symbol store immediately to the right.</span></span> <span data-ttu-id="f1f1c-126">Si le fichier est présent, il est copié dans le magasin gauche et ouvert à partir de cet emplacement.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-126">If the file is there, it is copied to the left store and opened from there.</span></span>

<span data-ttu-id="f1f1c-127">S’il y a plus de deux magasins, ce comportement continue vers la droite jusqu’à ce que le fichier soit trouvé ou qu’il n’y ait plus de magasins dans la liste.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-127">If there are more than two stores, this behavior continues to the right until the file is found or there are no more stores in the list.</span></span>

<span data-ttu-id="f1f1c-128">Le fichier n’est jamais ouvert à partir d’un magasin, mais du magasin le plus à gauche.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-128">The file is never opened from any store but the leftmost store.</span></span> <span data-ttu-id="f1f1c-129">Si le fichier est trouvé n’importe où dans la chaîne, il est copié dans chaque magasin à gauche de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-129">If the file is found anywhere else in the chain, it is copied to every store to the left of it.</span></span> <span data-ttu-id="f1f1c-130">Ce processus de copie est appelé « en cascade » et offre certains avantages qui seront clarfied plus loin dans ce document.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-130">This copy process is called "cascading" and provides certain benefits that will clarfied later in this document.</span></span>

## <a name="types-of-symbol-stores"></a><span data-ttu-id="f1f1c-131">Types de magasins de symboles</span><span class="sxs-lookup"><span data-stu-id="f1f1c-131">Types of Symbol Stores</span></span>

<span data-ttu-id="f1f1c-132">Le tableau suivant présente des exemples des types de magasins de symboles pris en charge.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-132">The following table displays examples of the supported symbol store types..</span></span>

|                            |                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f1f1c-133">\\\\partage de serveur \\</span><span class="sxs-lookup"><span data-stu-id="f1f1c-133">\\\\server\\share</span></span>          | <span data-ttu-id="f1f1c-134">Chemin UNC complet d’un partage sur un serveur distant.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-134">A fully qualified UNC path to a share on a remote server.</span></span>                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="f1f1c-135">c : \\ localCache</span><span class="sxs-lookup"><span data-stu-id="f1f1c-135">c:\\LocalCache</span></span>             | <span data-ttu-id="f1f1c-136">Chemin d’accès à un répertoire sur l’ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-136">A path to a directory on the client computer.</span></span>                                                                                                                                                                                                                                                                                                             |
| https://InternetSite        | <span data-ttu-id="f1f1c-137">URL d’un site Web hébergeant les symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-137">The URL to a web site hosting the symbols.</span></span> <span data-ttu-id="f1f1c-138">Doit être le magasin le plus à droite dans la liste et ne doit pas être le seul magasin de la liste.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-138">Must be the rightmost store in the list and should not be the only store in the list.</span></span>                                                                                                                                                                                                                          |
| https://SecureInternetSite | <span data-ttu-id="f1f1c-139">URL d’un site Web sécurisé hébergeant les symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-139">The URL to a secure web site hosting the symbols.</span></span> <span data-ttu-id="f1f1c-140">Cela peut prendre en charge les mots de passe, les informations d’identification de connexion Windows, les certificats et les cartes à puce.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-140">This can support passwords, Windows login credentials, certificates, and smartcards.</span></span> <span data-ttu-id="f1f1c-141">Doit être le magasin le plus à droite dans la liste et ne doit pas être le seul magasin de la liste.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-141">Must be the rightmost store in the list and should not be the only store in the list.</span></span>                                                                                                                              |
| <blank>              | <span data-ttu-id="f1f1c-142">S’il n’y a pas de texte entre deux astérisques, cela indique le *magasin en aval par défaut*.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-142">If there is no text between two asterisks, this indicates the *default downstream store*.</span></span> <span data-ttu-id="f1f1c-143">L’emplacement est défini en appelant [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory).</span><span class="sxs-lookup"><span data-stu-id="f1f1c-143">The location is set by calling [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory).</span></span> <span data-ttu-id="f1f1c-144">La valeur par défaut est un répertoire nommé « sym » situé juste en dessous du répertoire du programme de l’application appelante.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-144">The default value is a directory named "sym" immediately below the program directory of the calling application.</span></span> <span data-ttu-id="f1f1c-145">C’est ce que l’on appelle parfois le *cache local par défaut*.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-145">This is sometimes referred to as the *default local cache*.</span></span> |



 

<span data-ttu-id="f1f1c-146">Étant donné qu’il est impossible d’écrire dans un magasin de symboles HTTP, il doit s’agir du magasin le plus à droite dans la liste.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-146">Because an HTTP-based symbol store cannot be written to, it must be the rightmost store in the list.</span></span> <span data-ttu-id="f1f1c-147">Si un magasin de symboles HTTP se trouvait au milieu ou à gauche de la liste de magasins, il n’est pas possible de copier les fichiers qu’il contient et la chaîne sera rompue.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-147">If an HTTP-based symbol store was located in the middle or the left of the store list, it would not be possible to copy any found files to it and the chain would be broken.</span></span> <span data-ttu-id="f1f1c-148">En outre, étant donné que le gestionnaire de symboles ne peut pas ouvrir un fichier à partir d’un site Web, un magasin HTTP ne doit pas être le magasin le plus à gauche ou le seul magasin de la liste.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-148">Furthermore, because the symbol handler cannot open a file from a web site, an HTTP-based store should not be the leftmost or only store on the list.</span></span> <span data-ttu-id="f1f1c-149">Si SymSrv est toujours présenté avec ce chemin d’accès aux symboles, il tentera de le récupérer en copiant le fichier dans le magasin en aval par défaut et en l’ouvrant à partir de là, que le magasin en aval par défaut soit indiqué ou non dans le chemin d’accès aux symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-149">If SymSrv is ever presented with this symbol path, it will attempt to recover by copying the file to the default downstream store and open it from there, regardless of whether the default downstream store is indicated in the symbol path or not.</span></span>

## <a name="examples"></a><span data-ttu-id="f1f1c-150">Exemples</span><span class="sxs-lookup"><span data-stu-id="f1f1c-150">Examples</span></span>

<span data-ttu-id="f1f1c-151">Pour utiliser SymSrv avec un magasin de symboles sur \\ \\ mybuilds \\ mysymbols, définissez le chemin d’accès aux symboles suivant :</span><span class="sxs-lookup"><span data-stu-id="f1f1c-151">To use SymSrv with a symbol store on \\\\mybuilds\\mysymbols, set the following symbol path:</span></span>

<span data-ttu-id="f1f1c-152">**Set \_ NT \_ symbol \_ path = SRV \* \\ \\ mybuilds \\ mysymbols**</span><span class="sxs-lookup"><span data-stu-id="f1f1c-152">**set \_NT\_SYMBOL\_PATH= srv\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="f1f1c-153">Pour définir le chemin d’accès aux symboles afin que le débogueur copie les fichiers de symboles d’un magasin de symboles sur \\ \\ mybuilds \\ mysymbols dans votre répertoire local c : \\ localsymbols, utilisez :</span><span class="sxs-lookup"><span data-stu-id="f1f1c-153">To set the symbol path so that the debugger will copy symbol files from a symbol store on \\\\mybuilds\\mysymbols to your local directory c:\\localsymbols, use:</span></span>

<span data-ttu-id="f1f1c-154">**Set \_ NT \_ symbol \_ path = SRV \* c : \\ localsymbols \* \\ \\ mybuilds \\ mysymbols**</span><span class="sxs-lookup"><span data-stu-id="f1f1c-154">**set \_NT\_SYMBOL\_PATH=srv\*c:\\localsymbols\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="f1f1c-155">Pour définir le chemin d’accès aux symboles afin que le débogueur copie les fichiers de symboles d’un magasin de symboles sur \\ \\ mybuilds \\ mysymbols vers le magasin en aval par défaut (généralement c : \\ débogueurs \\ sym), utilisez :</span><span class="sxs-lookup"><span data-stu-id="f1f1c-155">To set the symbol path so that the debugger will copy symbol files from a symbol store on \\\\mybuilds\\mysymbols to the default downstream store (typically c:\\debuggers\\sym), use:</span></span>

<span data-ttu-id="f1f1c-156">**Set \_ NT \_ symbol \_ path = SRV \* \* \\ \\ mybuilds \\ mysymbols**</span><span class="sxs-lookup"><span data-stu-id="f1f1c-156">**set \_NT\_SYMBOL\_PATH=srv\*\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="f1f1c-157">Pour utiliser un magasin en cascade, définissez le chemin d’accès aux symboles suivant :</span><span class="sxs-lookup"><span data-stu-id="f1f1c-157">To use a cascading store, set the following symbol path:</span></span>

<span data-ttu-id="f1f1c-158">**Set \_ NT \_ symbol \_ path = SRV \* c : \\ localsymbols \* \\ \\ NearbyServer \\ Store\*https://DistantServer**</span><span class="sxs-lookup"><span data-stu-id="f1f1c-158">**set \_NT\_SYMBOL\_PATH = srv\*c:\\localsymbols\*\\\\NearbyServer\\store\*https://DistantServer**</span></span>

<span data-ttu-id="f1f1c-159">Dans cet exemple, SymSrv recherche d’abord le fichier dans c : \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-159">In this example, SymSrv first looks for the file in c:\\localsymbols.</span></span> <span data-ttu-id="f1f1c-160">S’il y figure, il retourne un chemin d’accès au fichier.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-160">If it is found there, it will return a path to the file.</span></span> <span data-ttu-id="f1f1c-161">Sinon, SymSrv recherche le fichier dans \\ \\ NearbyServer \\ Store.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-161">Otherwise, SymSrv looks for the file in \\\\NearbyServer\\store.</span></span> <span data-ttu-id="f1f1c-162">S’il y figure, SymSrv copie le fichier dans c : \\ localsymbols et retourne un chemin d’accès au fichier. s’il est introuvable, symsrv recherche le fichier dans https://DistantServer et, s’il y figure, symsrv le copie dans \\ \\ NearbyServer \\ Store, puis sur c : \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-162">If it is found there, SymSrv copies the file to c:\\localsymbols and returns a path to the file; if it is not found, SymSrv looks for the file in https://DistantServer, and if it is found there, SymSrv copies the file to \\\\NearbyServer\\store, then to c:\\localsymbols.</span></span>

<span data-ttu-id="f1f1c-163">Ce dernier exemple montre comment la conception judicieuse d’un chemin d’accès aux symboles peut être utilisée pour optimiser le téléchargement de symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-163">This last example shows how judicious design of a symbol path can be used to optimize the downloading of symbols.</span></span> <span data-ttu-id="f1f1c-164">Si vous avez un site professionnel avec un groupe de débogueurs et qu’ils ont tous besoin d’obtenir des symboles à partir d’un emplacement distant, vous pouvez configurer un serveur commun avec un magasin de symboles près de tous les débogueurs.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-164">If you have a work site with a group of debuggers and they all need to get symbols from a distant location, you can set up a common server with a symbol store near all the debuggers.</span></span> <span data-ttu-id="f1f1c-165">Puis, configurez chaque débogueur avec le chemin d’accès aux symboles ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-165">Then setup every debugger with the symbol path above.</span></span> <span data-ttu-id="f1f1c-166">Le premier débogueur qui requiert une certaine version de foo. pdb le télécharge à partir de https://DistantServer vers \\ \\ NearbyServer \\ Store, puis vers son propre ordinateur dans c : \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-166">The first debugger that requires a certain version of foo.pdb will download it from https://DistantServer to \\\\NearbyServer\\store and then to its own machine in c:\\localsymbols.</span></span> <span data-ttu-id="f1f1c-167">Le débogueur suivant qui requiert le même fichier peut le télécharger à partir de \\ \\ NearbyServer \\ Store, car il a déjà été téléchargé à cet emplacement par le débogueur précédent.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-167">The next debugger that requires the same file will be able to download it from \\\\NearbyServer\\store because it was already downloaded to that location by the previous debugger.</span></span> <span data-ttu-id="f1f1c-168">Cette mise en cache à plusieurs niveaux économise beaucoup de temps et de bande passante réseau.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-168">This multi-level caching saves significant time and network bandwidth.</span></span>

## <a name="microsoft-symbol-store"></a><span data-ttu-id="f1f1c-169">Magasin de symboles Microsoft</span><span class="sxs-lookup"><span data-stu-id="f1f1c-169">Microsoft Symbol Store</span></span>

<span data-ttu-id="f1f1c-170">Microsoft fournit un accès à un serveur de symboles Internet qui contient des fichiers de symboles pour les nombreuses versions du système d’exploitation Windows.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-170">Microsoft provides access to an Internet symbol server that contains symbol files for the many versions of the Windows operating system.</span></span> <span data-ttu-id="f1f1c-171">Il n’est pas garanti que ce catalogue de symboles soit complet, mais il est complet.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-171">This catalog of symbols is not guaranteed to be complete, but it is extensive.</span></span> <span data-ttu-id="f1f1c-172">D’autres produits Microsoft sont également représentés.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-172">Other Microsoft products are also represented.</span></span>

<span data-ttu-id="f1f1c-173">Le serveur de symboles Internet est rempli avec divers symboles Windows pour les systèmes d’exploitation Microsoft Windows, y compris les correctifs logiciels, les service packs, les packages de correctifs cumulatifs de sécurité et les versions commerciales.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-173">The Internet symbol server is populated with a variety of Windows symbols for Microsoft Windows operating systems, including hot fixes, Service Packs, Security Rollup Packages, and retail releases.</span></span> <span data-ttu-id="f1f1c-174">Les symboles sont également disponibles sur le serveur pour les versions bêta et versions finales actuelles des produits Windows, ainsi que divers autres produits Microsoft, tels que Microsoft Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-174">Symbols are also available on the server for current Betas and Release Candidates for Windows products, plus a variety of other Microsoft products, such as Microsoft Internet Explorer.</span></span>

<span data-ttu-id="f1f1c-175">Si vous avez accès à Internet pendant le débogage, vous pouvez configurer le débogueur pour télécharger des symboles selon les besoins au cours d’une session de débogage, plutôt que de télécharger des fichiers de symboles séparément avant une session de débogage.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-175">If you have access to the Internet during debugging, you can configure the debugger to download symbols as needed during a debugging session, rather than downloading symbol files separately before a debugging session.</span></span> <span data-ttu-id="f1f1c-176">Les symboles sont téléchargés vers un emplacement de répertoire que vous spécifiez, puis le débogueur les charge à partir de là.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-176">The symbols are downloaded to a directory location that you specify and then the debugger loads them from there.</span></span>

<span data-ttu-id="f1f1c-177">L’URL du magasin de symboles Microsoft est https://msdl.microsoft.com/download/symbols .</span><span class="sxs-lookup"><span data-stu-id="f1f1c-177">The URL for the Microsoft symbol store is https://msdl.microsoft.com/download/symbols.</span></span> <span data-ttu-id="f1f1c-178">L’exemple suivant montre comment définir le chemin d’accès aux symboles du débogueur (remplacez le chemin d’accès de votre magasin en aval par *c : \\ DownstreamStore*) :</span><span class="sxs-lookup"><span data-stu-id="f1f1c-178">The following example shows how to set the debugger symbol path (substitute your downstream store path for *c:\\DownstreamStore*):</span></span>

``` syntax
srv*c:\DownstreamStore*https://msdl.microsoft.com/download/symbols
```

## <a name="compressed-files"></a><span data-ttu-id="f1f1c-179">Fichiers compressés</span><span class="sxs-lookup"><span data-stu-id="f1f1c-179">Compressed Files</span></span>

<span data-ttu-id="f1f1c-180">SymSrv est compatible avec les magasins de symboles qui contiennent des fichiers compressés, à condition que cette compression ait été préformée avec l’outil compress.exe qui a été distribué avec le kit de ressources Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-180">SymSrv is compatible with symbol stores that contain compressed files, as long as this compression has been preformed with the compress.exe tool that was distributed with the Windows Server 2003 Resource Kit.</span></span> <span data-ttu-id="f1f1c-181">Les fichiers compressés doivent avoir un trait de soulignement comme dernier caractère dans leurs extensions de fichier (par exemple, Module1. PD \_ ou Module2. db \_ ).</span><span class="sxs-lookup"><span data-stu-id="f1f1c-181">Compressed files should have an underscore as the last character in their file extensions (for example, module1.pd\_ or module2.db\_).</span></span> <span data-ttu-id="f1f1c-182">Pour plus d’informations, consultez [utilisation de SymStore](using-symstore.md).</span><span class="sxs-lookup"><span data-stu-id="f1f1c-182">For details, see [Using SymStore](using-symstore.md).</span></span>

<span data-ttu-id="f1f1c-183">Lors de la cascade, les fichiers ne sont pas décompressés, sauf si le magasin cible est le magasin le plus à gauche dans le chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-183">When cascading, files are not uncompressed unless the target store is the leftmost store in the path.</span></span> <span data-ttu-id="f1f1c-184">S’il n’existe qu’un seul magasin dans le chemin d’accès et qu’il contient un fichier compressé, SymSrv copie le fichier dans le magasin en aval par défaut et l’ouvre à partir de là, même si le magasin en aval par défaut n’est pas indiqué dans le chemin d’accès des symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-184">If there is only one store in the path and it contains a compressed file, SymSrv will copy the file to the default downstream store and open it from there, even though the default downstream store is not indicated in they symbol path.</span></span>

<span data-ttu-id="f1f1c-185">**DbgHelp 6,1 et versions antérieures. :** Si les fichiers du magasin principal sont compressés, vous devez utiliser un magasin en aval.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-185">**DbgHelp 6.1 and earlier.:** If the files in the master store are compressed, you must use a downstream store.</span></span> <span data-ttu-id="f1f1c-186">SymSrv décompressera tous les fichiers avant de les copier dans le magasin en aval.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-186">SymSrv will uncompress all files before copying them to the downstream store.</span></span>

## <a name="deleting-the-cache"></a><span data-ttu-id="f1f1c-187">Suppression du cache</span><span class="sxs-lookup"><span data-stu-id="f1f1c-187">Deleting the Cache</span></span>

<span data-ttu-id="f1f1c-188">Si vous utilisez un magasin en aval en tant que cache, vous pouvez supprimer ce répertoire à tout moment pour économiser de l’espace disque.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-188">If you are using a downstream store as a cache, you can delete this directory at any time to save disk space.</span></span>

<span data-ttu-id="f1f1c-189">Il est possible d’avoir un grand magasin de symboles qui comprend des fichiers de symboles pour de nombreux programmes ou versions de Windows.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-189">It is possible to have a vast symbol store that includes symbol files for many different programs or Windows versions.</span></span> <span data-ttu-id="f1f1c-190">Si vous mettez à niveau la version de Windows utilisée sur votre ordinateur cible, les fichiers de symboles mis en cache seront tous identiques à la version antérieure.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-190">If you upgrade the version of Windows used on your target computer, the cached symbol files will all match the earlier version.</span></span> <span data-ttu-id="f1f1c-191">Ces fichiers mis en cache ne seront plus utilisés et, par conséquent, cela peut être un bon moment pour supprimer le cache.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-191">These cached files will not be of any further use, and therefore this might be a good time to delete the cache.</span></span>

<span data-ttu-id="f1f1c-192">Les outils de débogage pour Windows sont fournis avec un utilitaire appelé agestore.exe qui suppriment de manière sélective les fichiers d’une arborescence de répertoires, en laissant les fichiers utilisés le plus récemment.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-192">Debugging Tools for Windows comes with a utility called agestore.exe that will selectively remove files from a directory tree, leaving the most recently used files.</span></span> <span data-ttu-id="f1f1c-193">Cet outil est conçu pour nettoyer les fichiers inutilisés des magasins de serveurs de symboles.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-193">This tool is designed for pruning out unused files from symbol server stores.</span></span> <span data-ttu-id="f1f1c-194">Elle vous permet de contrôler de nombreuses options, notamment les algorithmes de date et d’ingestion de la taille de répertoire.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-194">It allows you to control many options including cut off date and directory size algorithms.</span></span>

## <a name="flat-cache-directory"></a><span data-ttu-id="f1f1c-195">Répertoire de cache plat</span><span class="sxs-lookup"><span data-stu-id="f1f1c-195">Flat Cache Directory</span></span>

<span data-ttu-id="f1f1c-196">Il est possible de déclarer le magasin en aval par défaut comme un répertoire plat, plutôt qu’une structure d’arborescence de symboles standard.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-196">It is possible to declare the default downstream store as a flat directory, rather than a standard symbol tree structure.</span></span> <span data-ttu-id="f1f1c-197">Pour ce faire, appelez la fonction [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) avec **le \_ \_ répertoire plat SYMOPT** (cela définit également l’option de **\_ magasin SSRVOPT plat \_ par défaut \_** dans symsrv).</span><span class="sxs-lookup"><span data-stu-id="f1f1c-197">To do so, call the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function with **SYMOPT\_FLAT\_DIRECTORY** (this also sets the **SSRVOPT\_FLAT\_DEFAULT\_STORE** option in SymSrv).</span></span> <span data-ttu-id="f1f1c-198">Veillez à appeler [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory) avant d’effectuer cette procédure. dans le cas contraire, les fichiers de symboles peuvent être écrits dans le répertoire du programme.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-198">Be sure to call [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory) before doing so; otherwise, the symbol files can be written to the program directory.</span></span>

## <a name="pointer-files"></a><span data-ttu-id="f1f1c-199">Fichiers de pointeur</span><span class="sxs-lookup"><span data-stu-id="f1f1c-199">Pointer Files</span></span>

<span data-ttu-id="f1f1c-200">SymStore peut créer et utiliser des fichiers qui pointent vers un fichier cible plutôt que vers le fichier cible lui-même.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-200">SymStore can create and use files that point to a target file rather than the target file itself.</span></span> <span data-ttu-id="f1f1c-201">Si un magasin de symboles contient un tel fichier pointeur, la valeur par défaut consiste à copier le fichier à partir de l’emplacement indiqué dans le fichier pointeur dans le magasin.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-201">If a symbol store contains such a pointer file, the default is to copy the file from the location indicated in the pointer file to the store.</span></span> <span data-ttu-id="f1f1c-202">Pour configurer un magasin de manière à ce que le fichier de pointeur soit copié à la place du fichier sur lequel il pointe, créez un fichier nommé wantsptr.txt à la racine du magasin cible.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-202">To configure a store such that the pointer file is copied instead of the file it points to, create a file named wantsptr.txt in the root of the target store.</span></span> <span data-ttu-id="f1f1c-203">Le contenu de wantsptr.txt n’est pas important, seulement la présence du fichier.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-203">The contents of wantsptr.txt are not important, only the presence of the file.</span></span>

## <a name="excluding-files-from-symbols-list"></a><span data-ttu-id="f1f1c-204">Exclusion de fichiers d’une liste de symboles</span><span class="sxs-lookup"><span data-stu-id="f1f1c-204">Excluding Files from Symbols List</span></span>

<span data-ttu-id="f1f1c-205">Pour exclure des fichiers d’une recherche de symboles, vous pouvez spécifier leurs noms dans symsrv.ini ou dans le registre.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-205">To exclude files from a symbols search, you can specify their names in symsrv.ini or in the registry.</span></span> <span data-ttu-id="f1f1c-206">Pour spécifier les fichiers dans symsrv.ini, créez une section nommée exclusions et répertoriez les fichiers.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-206">To specify the files in symsrv.ini, create a section named Exclusions and list the files.</span></span> <span data-ttu-id="f1f1c-207">Les noms de fichiers peuvent contenir des caractères génériques, comme illustré dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="f1f1c-207">The file names can contain wildcards, as shown in the following example:</span></span>

``` syntax
[Exclusions]
dbghelp.pdb
symsrv.*
mso*
```

<span data-ttu-id="f1f1c-208">Symsrv.ini doit se trouver dans le même répertoire que celui dans lequel symsrv.dll réside.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-208">Symsrv.ini should be located in the same directory that symsrv.dll resides.</span></span> <span data-ttu-id="f1f1c-209">Dans la plupart des installations, le fichier n’existe pas et vous devez en créer un nouveau.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-209">In most installations, the file does not exist and you will need to create a new one.</span></span>

<span data-ttu-id="f1f1c-210">Vous pouvez également stocker les fichiers à exclure dans le registre.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-210">Alternatively, you can store the files to be excluded in the registry.</span></span> <span data-ttu-id="f1f1c-211">Créez la clé de Registre suivante : **HKEY \_ local \_ machine \\ Software \\ Microsoft \\ Symbol Server \\ exclusions**.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-211">Create the following registry key: **HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Symbol Server\\Exclusions**.</span></span> <span data-ttu-id="f1f1c-212">Stockez chaque nom de fichier sous la forme d’une valeur de chaîne (REG \_ SZ) au sein de cette clé.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-212">Store each file name as a string value (REG\_SZ) within this key.</span></span> <span data-ttu-id="f1f1c-213">Le nom de la valeur de chaîne spécifie le nom du fichier à exclure.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-213">The name of the string value specifies the name of the file to be excluded.</span></span> <span data-ttu-id="f1f1c-214">Vous pouvez utiliser le contenu de la valeur de chaîne pour stocker un commentaire décrivant la raison pour laquelle le fichier est exclu.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-214">You can use the contents of the string value to store a comment describing why the file is being excluded.</span></span>

## <a name="installation"></a><span data-ttu-id="f1f1c-215">Installation</span><span class="sxs-lookup"><span data-stu-id="f1f1c-215">Installation</span></span>

<span data-ttu-id="f1f1c-216">Le serveur de symboles SymSrv (symsrv.dll) est inclus dans le package outils de débogage pour Windows.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-216">The SymSrv (symsrv.dll) symbol server is included in the Debugging Tools for Windows package.</span></span> <span data-ttu-id="f1f1c-217">Il doit être installé dans le même répertoire que la copie de dbghelp.dll que vous chargez.</span><span class="sxs-lookup"><span data-stu-id="f1f1c-217">It must be installed in the same directory as the copy of dbghelp.dll that you are loading.</span></span> <span data-ttu-id="f1f1c-218">Pour plus d’informations, consultez [appel de la bibliothèque dbghelp](calling-the-dbghelp-library.md).</span><span class="sxs-lookup"><span data-stu-id="f1f1c-218">For more details, see [Calling the DbgHelp Library](calling-the-dbghelp-library.md).</span></span>

 

 



