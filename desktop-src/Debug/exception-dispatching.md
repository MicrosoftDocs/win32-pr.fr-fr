---
description: Lorsqu’une exception matérielle ou logicielle se produit, le processeur arrête l’exécution au point où l’exception s’est produite et transfère le contrôle au système.
ms.assetid: 35a1b9bd-8da9-47e6-beda-e0b159bd840d
title: Distribution des exceptions
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e02b40aa132541fe88d692cbbf1881a8b620a209
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104109975"
---
# <a name="exception-dispatching"></a><span data-ttu-id="a6902-103">Distribution des exceptions</span><span class="sxs-lookup"><span data-stu-id="a6902-103">Exception Dispatching</span></span>

<span data-ttu-id="a6902-104">Lorsqu’une exception matérielle ou logicielle se produit, le processeur arrête l’exécution au point où l’exception s’est produite et transfère le contrôle au système.</span><span class="sxs-lookup"><span data-stu-id="a6902-104">When a hardware or software exception occurs, the processor stops execution at the point at which the exception occurred and transfers control to the system.</span></span> <span data-ttu-id="a6902-105">Tout d’abord, le système enregistre à la fois l’état de l’ordinateur du thread actuel et les informations qui décrivent l’exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-105">First, the system saves both the machine state of the current thread and information that describes the exception.</span></span> <span data-ttu-id="a6902-106">Le système tente alors de trouver un gestionnaire d’exceptions pour gérer l’exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-106">The system then attempts to find an exception handler to handle the exception.</span></span>

<span data-ttu-id="a6902-107">L’état de l’ordinateur du thread dans lequel l’exception s’est produite est enregistré dans une structure de [**contexte**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) .</span><span class="sxs-lookup"><span data-stu-id="a6902-107">The machine state of the thread in which the exception occurred is saved in a [**CONTEXT**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) structure.</span></span> <span data-ttu-id="a6902-108">Ces informations (appelées « *enregistrement de contexte*») permettent au système de continuer l’exécution au point de l’exception si l’exception est correctement gérée.</span><span class="sxs-lookup"><span data-stu-id="a6902-108">This information (called the *context record*) enables the system to continue execution at the point of the exception if the exception is successfully handled.</span></span> <span data-ttu-id="a6902-109">La description de l’exception (appelée **enregistrement d’exception**) est enregistrée dans une structure d' [**\_ enregistrement d’exception**](/windows/desktop/api/WinNT/ns-winnt-exception_record) .</span><span class="sxs-lookup"><span data-stu-id="a6902-109">The description of the exception (called the **exception record**) is saved in an [**EXCEPTION\_RECORD**](/windows/desktop/api/WinNT/ns-winnt-exception_record) structure.</span></span> <span data-ttu-id="a6902-110">Étant donné qu’il stocke les informations dépendantes de l’ordinateur de l’enregistrement de contexte indépendamment des informations indépendantes de l’ordinateur de l’enregistrement d’exception, le mécanisme de gestion des exceptions est portable sur différentes plateformes.</span><span class="sxs-lookup"><span data-stu-id="a6902-110">Because it stores the machine-dependent information of the context record separately from the machine-independent information of the exception record, the exception-handling mechanism is portable to different platforms.</span></span>

<span data-ttu-id="a6902-111">Les informations dans les enregistrements de contexte et d’exception sont disponibles au moyen de la fonction [**GetExceptionInformation**](getexceptioninformation.md) et peuvent être mises à la disposition de tous les gestionnaires d’exceptions qui sont exécutés à la suite de l’exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-111">The information in both the context and exception records is available by means of the [**GetExceptionInformation**](getexceptioninformation.md) function, and can be made available to any exception handlers that are executed as a result of the exception.</span></span> <span data-ttu-id="a6902-112">L’enregistrement d’exception contient les informations suivantes.</span><span class="sxs-lookup"><span data-stu-id="a6902-112">The exception record includes the following information.</span></span>

-   <span data-ttu-id="a6902-113">Code d’exception qui identifie le type d’exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-113">An exception code that identifies the type of exception.</span></span>
-   <span data-ttu-id="a6902-114">Indicateurs indiquant si l’exception est continue.</span><span class="sxs-lookup"><span data-stu-id="a6902-114">Flags indicating whether the exception is continuable.</span></span> <span data-ttu-id="a6902-115">Toute tentative de poursuite de l’exécution après une exception qui n’est pas continue génère une autre exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-115">Any attempt to continue execution after a noncontinuable exception generates another exception.</span></span>
-   <span data-ttu-id="a6902-116">Pointeur vers un autre enregistrement d’exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-116">A pointer to another exception record.</span></span> <span data-ttu-id="a6902-117">Cela facilite la création d’une liste liée d’exceptions si des exceptions imbriquées se produisent.</span><span class="sxs-lookup"><span data-stu-id="a6902-117">This facilitates creation of a linked list of exceptions if nested exceptions occur.</span></span>
-   <span data-ttu-id="a6902-118">Adresse à laquelle l’exception s’est produite.</span><span class="sxs-lookup"><span data-stu-id="a6902-118">The address at which the exception occurred.</span></span>
-   <span data-ttu-id="a6902-119">Tableau d’arguments qui fournissent des informations supplémentaires sur l’exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-119">An array of arguments that provide additional information about the exception.</span></span>

<span data-ttu-id="a6902-120">Quand une exception se produit dans le code en mode utilisateur, le système utilise l’ordre de recherche suivant pour trouver un gestionnaire d’exceptions :</span><span class="sxs-lookup"><span data-stu-id="a6902-120">When an exception occurs in user-mode code, the system uses the following search order to find an exception handler:</span></span>

1.  <span data-ttu-id="a6902-121">Si le processus est en cours de débogage, le système avertit le débogueur.</span><span class="sxs-lookup"><span data-stu-id="a6902-121">If the process is being debugged, the system notifies the debugger.</span></span> <span data-ttu-id="a6902-122">Pour plus d’informations, consultez [gestion des exceptions du débogueur](debugger-exception-handling.md).</span><span class="sxs-lookup"><span data-stu-id="a6902-122">For more information, see [Debugger Exception Handling](debugger-exception-handling.md).</span></span>
2.  <span data-ttu-id="a6902-123">Si le processus n’est pas en cours de débogage ou si le débogueur associé ne gère pas l’exception, le système tente de localiser un gestionnaire d’exceptions basé sur des frames en recherchant les frames de pile du thread dans lequel l’exception s’est produite.</span><span class="sxs-lookup"><span data-stu-id="a6902-123">If the process is not being debugged, or if the associated debugger does not handle the exception, the system attempts to locate a frame-based exception handler by searching the stack frames of the thread in which the exception occurred.</span></span> <span data-ttu-id="a6902-124">Le système recherche d’abord le frame de pile actuel, puis effectue une recherche dans l’ordre inverse des frames de pile précédents.</span><span class="sxs-lookup"><span data-stu-id="a6902-124">The system searches the current stack frame first, then searches through preceding stack frames in reverse order.</span></span>
3.  <span data-ttu-id="a6902-125">Si aucun gestionnaire de trames n’est trouvé, ou si aucun gestionnaire basé sur des trames ne gère l’exception, mais que le processus est en cours de débogage, le système notifie le débogueur une deuxième fois.</span><span class="sxs-lookup"><span data-stu-id="a6902-125">If no frame-based handler can be found, or no frame-based handler handles the exception, but the process is being debugged, the system notifies the debugger a second time.</span></span>
4.  <span data-ttu-id="a6902-126">Si le processus n’est pas en cours de débogage ou si le débogueur associé ne gère pas l’exception, le système fournit la gestion par défaut en fonction du type d’exception.</span><span class="sxs-lookup"><span data-stu-id="a6902-126">If the process is not being debugged, or if the associated debugger does not handle the exception, the system provides default handling based on the exception type.</span></span> <span data-ttu-id="a6902-127">Pour la plupart des exceptions, l’action par défaut consiste à appeler la fonction [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) .</span><span class="sxs-lookup"><span data-stu-id="a6902-127">For most exceptions, the default action is to call the [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) function.</span></span>

<span data-ttu-id="a6902-128">Quand une exception se produit dans le code en mode noyau, le système recherche un gestionnaire d’exceptions dans les frames de pile de la pile du noyau.</span><span class="sxs-lookup"><span data-stu-id="a6902-128">When an exception occurs in kernel-mode code, the system searches the stack frames of the kernel stack in an attempt to locate an exception handler.</span></span> <span data-ttu-id="a6902-129">Si un gestionnaire est introuvable ou qu’aucun gestionnaire ne gère l’exception, le système est arrêté comme si la fonction [**exitwindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) avait été appelée.</span><span class="sxs-lookup"><span data-stu-id="a6902-129">If a handler cannot be located or no handler handles the exception, the system is shut down as if the [**ExitWindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) function had been called.</span></span>

 

 
