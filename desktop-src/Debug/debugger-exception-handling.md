---
description: La gestion par le système des exceptions du mode utilisateur prend en charge les débogueurs sophistiqués.
ms.assetid: c45a7dc6-e6b2-4fc4-9522-12d96893f4c7
title: Gestion des exceptions du débogueur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6aff6d566e8798aaf4f3113ce6d8f44a3bc71ba
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104482744"
---
# <a name="debugger-exception-handling"></a><span data-ttu-id="e178d-103">Gestion des exceptions du débogueur</span><span class="sxs-lookup"><span data-stu-id="e178d-103">Debugger Exception Handling</span></span>

<span data-ttu-id="e178d-104">La gestion par le système des exceptions du mode utilisateur prend en charge les débogueurs sophistiqués.</span><span class="sxs-lookup"><span data-stu-id="e178d-104">The system's handling of user-mode exceptions provides support for sophisticated debuggers.</span></span> <span data-ttu-id="e178d-105">Si le processus dans lequel une exception se produit est débogué, le système génère un événement de débogage.</span><span class="sxs-lookup"><span data-stu-id="e178d-105">If the process in which an exception occurs is being debugged, the system generates a debug event.</span></span> <span data-ttu-id="e178d-106">Si le débogueur utilise la fonction [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) , l’événement de débogage provoque le retour de cette fonction avec un pointeur vers une structure d' [**\_ événement de débogage**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) .</span><span class="sxs-lookup"><span data-stu-id="e178d-106">If the debugger is using the [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) function, the debug event causes that function to return with a pointer to a [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure.</span></span> <span data-ttu-id="e178d-107">Cette structure contient les identificateurs de processus et de thread que le débogueur peut utiliser pour accéder à l’enregistrement de contexte du thread.</span><span class="sxs-lookup"><span data-stu-id="e178d-107">This structure contains the process and thread identifiers the debugger can use to access the thread's context record.</span></span> <span data-ttu-id="e178d-108">La structure contient également une structure d' [**\_ \_ informations de débogage d’exception**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) qui inclut une copie de l’enregistrement de l’exception.</span><span class="sxs-lookup"><span data-stu-id="e178d-108">The structure also contains an [**EXCEPTION\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) structure that includes a copy of the exception record.</span></span>

<span data-ttu-id="e178d-109">Lorsque le système recherche un gestionnaire d’exceptions, il effectue deux tentatives pour notifier le débogueur d’un processus.</span><span class="sxs-lookup"><span data-stu-id="e178d-109">When the system is searching for an exception handler, it makes two attempts to notify a process's debugger.</span></span> <span data-ttu-id="e178d-110">La première tentative de notification fournit au débogueur la possibilité de gérer les exceptions de point d’arrêt ou d’une seule étape.</span><span class="sxs-lookup"><span data-stu-id="e178d-110">The first notification attempt provides the debugger with an opportunity to handle breakpoint or single-step exceptions.</span></span> <span data-ttu-id="e178d-111">C’est ce que l’on appelle *une notification de première chance*.</span><span class="sxs-lookup"><span data-stu-id="e178d-111">This is known as *first-chance notification*.</span></span> <span data-ttu-id="e178d-112">L’utilisateur peut ensuite émettre des commandes de débogueur pour manipuler l’environnement du processus avant l’exécution des gestionnaires d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="e178d-112">The user can then issue debugger commands to manipulate the process's environment before any exception handlers are executed.</span></span> <span data-ttu-id="e178d-113">La deuxième tentative de notification du débogueur se produit uniquement si le système ne parvient pas à trouver un gestionnaire d’exceptions basé sur des trames qui gère l’exception.</span><span class="sxs-lookup"><span data-stu-id="e178d-113">The second attempt to notify the debugger occurs only if the system is unable to find a frame-based exception handler that handles the exception.</span></span> <span data-ttu-id="e178d-114">C’est ce que l’on appelle la « *notification de dernière chance »*.</span><span class="sxs-lookup"><span data-stu-id="e178d-114">This is known as *last-chance notification*.</span></span> <span data-ttu-id="e178d-115">Si le débogueur ne gère pas l’exception après la dernière notification de chance, le système met fin au processus en cours de débogage.</span><span class="sxs-lookup"><span data-stu-id="e178d-115">If the debugger does not handle the exception after the last-chance notification, the system terminates the process being debugged.</span></span>

<span data-ttu-id="e178d-116">À chaque tentative de notification, le débogueur utilise la fonction [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) pour retourner le contrôle au système.</span><span class="sxs-lookup"><span data-stu-id="e178d-116">At each notification attempt, the debugger uses the [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) function to return control to the system.</span></span> <span data-ttu-id="e178d-117">Avant de retourner le contrôle, le débogueur peut gérer l’exception et modifier l’état du thread selon le cas, ou il peut choisir de ne pas gérer l’exception.</span><span class="sxs-lookup"><span data-stu-id="e178d-117">Before returning control, the debugger can handle the exception and modify the thread state as appropriate, or it can choose not to handle the exception.</span></span> <span data-ttu-id="e178d-118">À l’aide de **ContinueDebugEvent**, le débogueur peut indiquer qu’il a géré l’exception, auquel cas l’état de l’ordinateur est restauré et l’exécution du thread se poursuit au point où l’exception s’est produite.</span><span class="sxs-lookup"><span data-stu-id="e178d-118">Using **ContinueDebugEvent**, the debugger can indicate that it has handled the exception, in which case the machine state is restored and thread execution is continued at the point at which the exception occurred.</span></span> <span data-ttu-id="e178d-119">Le débogueur peut également indiquer qu’il n’a pas géré l’exception, ce qui amène le système à poursuivre la recherche d’un gestionnaire d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="e178d-119">The debugger can also indicate that it did not handle the exception, which causes the system to continue its search for an exception handler.</span></span>

 

 
