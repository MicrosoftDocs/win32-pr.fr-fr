---
title: Développement du serveur
description: Lorsque vous créez un programme serveur pour une application distribuée, vous devez utiliser le fichier d’en-tête et le stub de serveur générés par le compilateur MIDL.
ms.assetid: 2b7b14f5-5692-41b8-bb98-7edd36309d21
keywords:
- Appel de procédure distante RPC, tâches, développement du serveur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0fc3405c52c48f531572ab159ad083bad93f95e0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104316074"
---
# <a name="developing-the-server"></a><span data-ttu-id="6b0ec-104">Développement du serveur</span><span class="sxs-lookup"><span data-stu-id="6b0ec-104">Developing the Server</span></span>

<span data-ttu-id="6b0ec-105">Lorsque vous créez un programme serveur pour une application distribuée, vous devez utiliser le fichier d’en-tête et le stub de serveur générés par le compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-105">When you create a server program for a distributed application, you must use the header file and server stub that the MIDL compiler generates.</span></span> <span data-ttu-id="6b0ec-106">Pour plus d’informations, consultez [développement de l’interface](developing-the-interface.md).</span><span class="sxs-lookup"><span data-stu-id="6b0ec-106">For details, see [Developing the Interface](developing-the-interface.md).</span></span> <span data-ttu-id="6b0ec-107">Incluez le fichier d’en-tête dans le fichier programme du serveur C.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-107">Include the header file in your server C program file.</span></span> <span data-ttu-id="6b0ec-108">Compilez le stub serveur avec les fichiers sources C qui composent votre application.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-108">Compile the server stub with the C source files that compose your application.</span></span> <span data-ttu-id="6b0ec-109">Liez les fichiers objets résultants à la bibliothèque d’importation.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-109">Link the resulting object files together with the import library.</span></span> <span data-ttu-id="6b0ec-110">Ce processus est illustré dans le diagramme suivant.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-110">This process is illustrated in the following diagram.</span></span>

![processus de création d’un programme serveur pour une application distribuée](images/srvrdev.png)

<span data-ttu-id="6b0ec-112">Comme vous pouvez le voir dans l’exemple de l’illustration, un fichier MIDL appelé MyApp. idl a été utilisé pour définir l’interface.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-112">As you can see from the example in the illustration, a MIDL file called MyApp.idl was used to define the interface.</span></span> <span data-ttu-id="6b0ec-113">Le compilateur MIDL a utilisé MyApp. idl pour produire MyApp \_ s. c et MyApp. h.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-113">The MIDL compiler used MyApp.idl to produce MyApp\_s.c and MyApp.h.</span></span> <span data-ttu-id="6b0ec-114">Il produit également un fichier source C pour le stub client, mais cela ne s’applique pas à cette discussion particulière.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-114">It also produces a C source file for the client stub, but that is not relevant to this particular discussion.</span></span> <span data-ttu-id="6b0ec-115">Le fichier source C pour le programme serveur (dans le cas présent, Mysrvr. C) doit inclure le fichier MyApp. h.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-115">The C source file for the server program (in this case, Mysrvr.c) must include the file Myapp.h.</span></span> <span data-ttu-id="6b0ec-116">Il doit également inclure les fichiers RPC. h et Rpcndr. h.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-116">It will also need to include the files Rpc.h and Rpcndr.h.</span></span>

<span data-ttu-id="6b0ec-117">L’application serveur a été développée dans deux fichiers, Mysrvr. c et Rprocs. c.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-117">The server application was developed in two files, Mysrvr.c and Rprocs.c.</span></span> <span data-ttu-id="6b0ec-118">Le fichier Mysrvr. c contient les fonctions nécessaires à la mise en service du programme serveur.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-118">The file Mysrvr.c contains the functions necessary for getting the server program up and running.</span></span> <span data-ttu-id="6b0ec-119">Les procédures distantes proposées par le programme serveur sont contenues dans le fichier Rprocs. c.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-119">The remote procedures that the server program offers are contained in the file Rprocs.c.</span></span>

<span data-ttu-id="6b0ec-120">Les fichiers Mysrvr. c et Rprocs. c ont été compilés avec MyApp \_ s. c pour produire des fichiers objets.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-120">The files Mysrvr.c and Rprocs.c were compiled together with Myapp\_s.c to produce object files.</span></span> <span data-ttu-id="6b0ec-121">Les fichiers objets étaient ensuite liés à la bibliothèque Runtime RPC et à toutes les autres bibliothèques dont ils peuvent avoir besoin.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-121">The object files were then linked with the RPC run-time library, and any other libraries that they might need.</span></span> <span data-ttu-id="6b0ec-122">Le résultat est un programme serveur exécutable nommé Mysrvr.exe.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-122">The result is an executable server program named Mysrvr.exe.</span></span>

<span data-ttu-id="6b0ec-123">Si vous ne compilez pas votre fichier IDL en mode de compatibilité OSF (Open Software Foundation) ([**/OSF**](/windows/desktop/Midl/-osf)), votre programme serveur doit fournir une fonction pour allouer de la mémoire et une fonction pour la libérer.</span><span class="sxs-lookup"><span data-stu-id="6b0ec-123">If you do not compile your IDL file in Open Software Foundation (OSF) compatibility mode ([**/osf**](/windows/desktop/Midl/-osf)), your server program must provide a function for allocating memory and a function for deallocating it.</span></span> <span data-ttu-id="6b0ec-124">Pour Windows 2000 et les versions ultérieures de Windows, le mode recommandé est [**/Oicf**](/windows/desktop/Midl/-oi).</span><span class="sxs-lookup"><span data-stu-id="6b0ec-124">For Windows 2000 and later versions of Windows, the recommended mode is [**/Oicf**](/windows/desktop/Midl/-oi).</span></span> <span data-ttu-id="6b0ec-125">Pour plus d’informations, consultez [Comment la mémoire est allouée et désallouée](how-memory-is-allocated-and-deallocated.md), ainsi que les [pointeurs et l’allocation de mémoire](pointers-and-memory-allocation.md).</span><span class="sxs-lookup"><span data-stu-id="6b0ec-125">For details, see [How Memory Is Allocated and Deallocated](how-memory-is-allocated-and-deallocated.md), and [Pointers and Memory Allocation](pointers-and-memory-allocation.md).</span></span>

 

 