---
title: Ce qui se passe lors d’une requête
description: Cette section décrit comment le réseau gère la requête lorsqu’un client 32 bits recherche un nom dans son propre domaine.
ms.assetid: a8a88743-a245-4258-af05-9261c214ab50
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6e26fb9aaef0aac2ff66260d51f756725566dee
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104196831"
---
# <a name="what-happens-during-a-query"></a><span data-ttu-id="a6c2f-103">Ce qui se passe lors d’une requête</span><span class="sxs-lookup"><span data-stu-id="a6c2f-103">What Happens During a Query</span></span>

<span data-ttu-id="a6c2f-104">Cette section décrit comment le réseau gère la requête lorsqu’un client 32 bits recherche un nom dans son propre domaine.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-104">This section describes how the network handles the query when a 32-bit client searches for a name in its own domain.</span></span>

<span data-ttu-id="a6c2f-105">Lorsque votre application cliente appelle [**RpcNsBindingImportBegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina), le localisateur résidant sur votre ordinateur client tente de répondre à cette demande.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-105">When your client application calls [**RpcNsBindingImportBegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina), the locator residing on your client computer will try to satisfy this request.</span></span> <span data-ttu-id="a6c2f-106">S’il n’y a rien dans le cache, il transfère la demande par RPC à un localisateur maître.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-106">If there is nothing in the cache, it will forward the request by RPC to a master locator.</span></span> <span data-ttu-id="a6c2f-107">Si le localisateur maître ne trouve rien dans son cache, il envoie la demande à tous les ordinateurs du domaine à l’aide d’une diffusion de l’emplacement de messagerie.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-107">If the master locator finds nothing in its cache, it sends the request to all the computers in the domain using a mail-slot broadcast.</span></span> <span data-ttu-id="a6c2f-108">En cas de correspondance, le localisateur sur chaque ordinateur répondra à l’aide d’un emplacement de messagerie dirigée.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-108">If there is a match, the locator on each computer will respond by a directed mail slot.</span></span> <span data-ttu-id="a6c2f-109">(Par exemple, si un processus sur cet ordinateur a exporté l’interface.) Les réponses sont assemblées et le RPC est terminé à partir du localisateur de processus du client, qui répondra au processus client lui-même.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-109">(For example, if a process on that computer has exported the interface.) The responses are collated and the RPC is completed from the client's process locator, which will reply to the client process itself.</span></span>

<span data-ttu-id="a6c2f-110">Dans un domaine, le localisateur du client recherche un localisateur maître aux emplacements suivants :</span><span class="sxs-lookup"><span data-stu-id="a6c2f-110">In a domain, the client locator searches for a master locator in the following places:</span></span>

-   <span data-ttu-id="a6c2f-111">Sur le contrôleur de domaine principal</span><span class="sxs-lookup"><span data-stu-id="a6c2f-111">On the primary domain controller</span></span>
-   <span data-ttu-id="a6c2f-112">Sur chaque contrôleur de domaine de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="a6c2f-112">On each backup domain controller</span></span>

<span data-ttu-id="a6c2f-113">Si aucune correspondance n’est trouvée, le localisateur client déclare lui-même pour être le localisateur maître.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-113">If a match is not found, the client locator declares itself to be the master locator.</span></span> <span data-ttu-id="a6c2f-114">Ainsi, les requêtes sont diffusées si elles ne peuvent pas être satisfaites localement.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-114">As such, it will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="a6c2f-115">Dans un groupe de travail, le localisateur client conserve un cache des ordinateurs dont les localisateurs ont une diffusion.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-115">In a workgroup, the client locator maintains a cache of the computers whose locators have broadcast.</span></span> <span data-ttu-id="a6c2f-116">Elle utilise celle qui a exécuté le plus long que le localisateur maître.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-116">It uses the one that has been running the longest as the master locator.</span></span> <span data-ttu-id="a6c2f-117">Si cet ordinateur n’est pas disponible, l’ordinateur de diffusion suivant, le plus long est utilisé, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-117">If that computer is unavailable, the next, longest-broadcasting computer is used, and so on.</span></span> <span data-ttu-id="a6c2f-118">Si le client a besoin d’un localisateur maître et que le cache est vide, il réapprovisionne le cache en envoyant une diffusion d’emplacement de courrier spéciale qui demande à des localisateurs principaux de répondre.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-118">If the client needs a master locator and the cache is empty, it replenishes the cache by sending a special mail-slot broadcast that requests master locators to respond.</span></span> <span data-ttu-id="a6c2f-119">S’il n’y a aucune réponse, le localisateur du client se déclare être le localisateur maître et diffuse des requêtes s’ils ne peuvent pas être satisfaits localement.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-119">If there are no responses, the client locator declares itself to be the master locator and will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="a6c2f-120">Cela change si votre application cliente est un programme 16 bits ou MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-120">This changes if your client application is a 16-bit or MS-DOS-based program.</span></span> <span data-ttu-id="a6c2f-121">Dans ce cas, aucun localisateur n’est en cours d’exécution sur l’ordinateur client et Rpcns1.dll ou Rpcnslm. RPC contient le code permettant de trouver un localisateur maître.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-121">In this case, there is no locator running on the client computer, and Rpcns1.dll or Rpcnslm.rpc contains the code to find a master locator.</span></span> <span data-ttu-id="a6c2f-122">Toutes les demandes sont transférées directement au localisateur maître.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-122">All requests are forwarded directly to the master locator.</span></span>

<span data-ttu-id="a6c2f-123">Ces instructions sont valides pour les noms dans le domaine du client, tels que les noms de « /.:/ » entryname».</span><span class="sxs-lookup"><span data-stu-id="a6c2f-123">These guidelines are valid for names in the client's domain, such as names for "/.:/entryname".</span></span> <span data-ttu-id="a6c2f-124">Si le client demande un nom dans un autre domaine par le biais de l’utilisation de « /.../DOMAIN/entryname ; », le localisateur du client transfère la demande au domaine spécifié, qui la diffuse si elle n’a pas la réponse.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-124">If the client requests a name from another domain through the use of "/.../DOMAIN/entryname;" the client locator forwards the request to the specified domain which will broadcast it if it does not have the answer.</span></span> <span data-ttu-id="a6c2f-125">Si le domaine est en panne ou est en fait un groupe de travail, la demande échoue.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-125">If the domain is down or is actually a workgroup, the request will fail.</span></span>

> [!Note]  
> <span data-ttu-id="a6c2f-126">N’oubliez pas les points suivants lorsque vous utilisez des entrées dans le service de noms :</span><span class="sxs-lookup"><span data-stu-id="a6c2f-126">Remember the following when working with entries in the name service:</span></span>

 

-   <span data-ttu-id="a6c2f-127">Un client ne peut pas utiliser la syntaxe « /.../DOMAIN/entryname » pour rechercher une entrée dans son propre domaine.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-127">A client cannot use the "/.../DOMAIN/entryname" syntax to find an entry in its own domain.</span></span> <span data-ttu-id="a6c2f-128">Utilisez la syntaxe «/.:/ entryname».</span><span class="sxs-lookup"><span data-stu-id="a6c2f-128">Use the syntax "/.:/entryname".</span></span> <span data-ttu-id="a6c2f-129">Toutefois, vous pouvez utiliser « /.../DOMAIN/entryname » pour rechercher une entrée dans un autre domaine.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-129">However, you can use "/.../DOMAIN/entryname" to find an entry in another domain.</span></span>
-   <span data-ttu-id="a6c2f-130">Le nom de domaine dans « /.../DOMAIN/entryname » doit être en majuscules.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-130">The domain name in "/.../DOMAIN/entryname" must be uppercase.</span></span> <span data-ttu-id="a6c2f-131">Lorsque vous recherchez une correspondance, le localisateur respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-131">When looking for a match, the locator is case-sensitive.</span></span>
-   <span data-ttu-id="a6c2f-132">Les noms d’entrée de localisateur respectent également la casse, mais ils n’ont pas besoin d’être en majuscules.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-132">Locator entry names are also case-sensitive, but need not be uppercase.</span></span>
-   <span data-ttu-id="a6c2f-133">Quand le client utilise le « /.:/ » entryname», le localisateur ne recherche pas d’entrées dans d’autres domaines, même s’ils ont une relation d’approbation avec le domaine d’ouverture de session.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-133">When the client uses the "/.:/entryname" syntax, the locator will not search for entries in other domains, even if they have a trust relationship with the logon domain.</span></span>
-   <span data-ttu-id="a6c2f-134">Les diffusions ne traversent pas les segments de réseau local (par exemple, les sous-réseaux).</span><span class="sxs-lookup"><span data-stu-id="a6c2f-134">Broadcasts do not cross LAN segments (for example, subnets).</span></span> <span data-ttu-id="a6c2f-135">Ainsi, l’utilité du localisateur est limitée dans une organisation avec plusieurs sous-réseaux.</span><span class="sxs-lookup"><span data-stu-id="a6c2f-135">Thus, the usefulness of the locator is limited in an organization with multiple subnets.</span></span>

 

 




