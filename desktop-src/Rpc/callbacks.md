---
title: Rappels (RPC)
description: Souvent, le modèle de programmation requiert un rappel de serveur pour un client via un appel de procédure distante (RPC) ou des appels clients vers un serveur non approuvé. Cela introduit de nombreux pièges potentiels.
ms.assetid: a4f3ea26-ac4b-41e5-abde-96b4baedf2ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6260e2cff2cbaff86f210764e89d55859c4d33af
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104032265"
---
# <a name="callbacks-rpc"></a><span data-ttu-id="90af5-104">Rappels (RPC)</span><span class="sxs-lookup"><span data-stu-id="90af5-104">Callbacks (RPC)</span></span>

<span data-ttu-id="90af5-105">Souvent, le modèle de programmation requiert un rappel de serveur pour un client via un appel de procédure distante (RPC) ou des appels clients vers un serveur non approuvé.</span><span class="sxs-lookup"><span data-stu-id="90af5-105">Often the programming model necessitates a server callback to a client through a remote procedure call (RPC), or client calls into an untrusted server.</span></span> <span data-ttu-id="90af5-106">Cela introduit de nombreux pièges potentiels.</span><span class="sxs-lookup"><span data-stu-id="90af5-106">This introduces many potential pitfalls.</span></span>

<span data-ttu-id="90af5-107">Tout d’abord, le rappel au client doit être effectué avec un niveau d’emprunt d’identité suffisamment faible.</span><span class="sxs-lookup"><span data-stu-id="90af5-107">First, callback to the client must be made with a sufficiently low impersonation level.</span></span> <span data-ttu-id="90af5-108">Si le serveur est un service système hautement privilégié, le fait de rappeler un client local avec un niveau d’emprunt d’identité d’emprunt d’identité ou supérieur peut fournir au client des privilèges suffisants pour prendre le contrôle du système.</span><span class="sxs-lookup"><span data-stu-id="90af5-108">If the server is a highly privileged system service, calling back a local client with an impersonation level of impersonate or higher can provide the client with privileges sufficient to take over the system.</span></span> <span data-ttu-id="90af5-109">Le fait de rappeler un client distant avec un niveau d’emprunt d’identité plus élevé que nécessaire peut également entraîner des conséquences indésirables.</span><span class="sxs-lookup"><span data-stu-id="90af5-109">Calling back a remote client with higher impersonation level than necessary can also lead to undesirable consequences.</span></span>

<span data-ttu-id="90af5-110">Deuxièmement, si une personne malveillante induit votre service pour effectuer un rappel, elle peut *lancer une attaque* par déni de service.</span><span class="sxs-lookup"><span data-stu-id="90af5-110">Second, if an attacker induces your service to perform a callback, it can launch what is called a *black hole*—denial of service attack.</span></span> <span data-ttu-id="90af5-111">Ces attaques ne sont pas spécifiques à RPC. dans ces attaques, une machine vous induit de lui envoyer du trafic, mais elle ne répond pas à vos demandes.</span><span class="sxs-lookup"><span data-stu-id="90af5-111">Such attacks are not specific to RPC; in these attacks, a machine induces you to send traffic to it, but it does not respond to your requests.</span></span> <span data-ttu-id="90af5-112">Vous pouvez recevoir plus et plus de ressources pour appeler le trou noir, mais ils ne sont jamais refondus.</span><span class="sxs-lookup"><span data-stu-id="90af5-112">You sink more and more resources into calling the black hole, but they never come back.</span></span> <span data-ttu-id="90af5-113">Une attaque au niveau du TCP appelée attaque de flux SYN TCP/IP est un exemple générique d’une telle attaque.</span><span class="sxs-lookup"><span data-stu-id="90af5-113">One generic example of such an attack is a TCP-level attack called a TCP/IP SYN flood attack.</span></span>

<span data-ttu-id="90af5-114">Au niveau RPC, une attaque de trou noir simple se produit lorsqu’un pirate appelle une interface et demande au serveur d’appeler l’interface.</span><span class="sxs-lookup"><span data-stu-id="90af5-114">On the RPC level, a simple black-hole attack occurs when an attacker calls an interface, and requests the server to call the interface back.</span></span> <span data-ttu-id="90af5-115">L’interface est conforme, mais l’attaquant ne retourne jamais l’appel : un thread sur le serveur est lié.</span><span class="sxs-lookup"><span data-stu-id="90af5-115">The interface complies, but the attacker never returns the call: one thread on the server is tied up.</span></span> <span data-ttu-id="90af5-116">L’attaquant effectue cette 100 fois, en liant 100 threads sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="90af5-116">The attacker does this 100 times, tying 100 threads on the server.</span></span> <span data-ttu-id="90af5-117">Le serveur finit par manquer de mémoire.</span><span class="sxs-lookup"><span data-stu-id="90af5-117">Eventually the server runs out of memory.</span></span> <span data-ttu-id="90af5-118">Le débogage du serveur peut révéler potentiellement l’identité de l’appelant de trou noir, mais souvent, le serveur est redémarré sans soupçonner la présence d’un élément indésirable, ou il n’y a pas suffisamment d’expertise disponible pour déterminer l’attaquant.</span><span class="sxs-lookup"><span data-stu-id="90af5-118">Debugging the server can potentially reveal the identity of the black-hole caller, but often the server will be restarted without suspecting foul play, or there may not be enough expertise available to determine the attacker.</span></span>

<span data-ttu-id="90af5-119">Le troisième piège se trouve sur le client.</span><span class="sxs-lookup"><span data-stu-id="90af5-119">The third pitfall is on the client.</span></span> <span data-ttu-id="90af5-120">Souvent, un client effectue un appel au serveur informant le serveur de la façon de le rappeler (généralement une liaison de chaîne), puis attend qu’un appel du serveur arrive, en acceptant en aveugle les appels sur ce point de terminaison qui affirment provenir du serveur.</span><span class="sxs-lookup"><span data-stu-id="90af5-120">Often a client makes a call to the server informing the server how to call it back (usually a string binding), and then waits for a call from the server to arrive, blindly accepting any call on that endpoint that claims to come from the server.</span></span> <span data-ttu-id="90af5-121">Le protocole de rappel du serveur vers le client doit inclure un mécanisme de vérification pour s’assurer que, lorsque le rappel vient au client, il provient en fait du serveur.</span><span class="sxs-lookup"><span data-stu-id="90af5-121">The callback protocol from the server to the client should include some verification mechanism to ensure that when the callback comes to the client, it actually originated on the server.</span></span>

 

 




