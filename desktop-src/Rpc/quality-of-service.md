---
title: Qualité de service (RPC)
description: Les programmes clients peuvent utiliser la fonction RpcBindingSetAuthInfoEx plutôt que la fonction RpcBindingSetAuthInfo pour créer une liaison authentifiée.
ms.assetid: bc3d47ba-3c1b-4aba-8fe3-b4501a621931
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee93b1aa376c9d6f4e2b3eedab73c91471d42498
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/10/2020
ms.locfileid: "103842966"
---
# <a name="quality-of-service-rpc"></a><span data-ttu-id="6333f-103">Qualité de service (RPC)</span><span class="sxs-lookup"><span data-stu-id="6333f-103">Quality of Service (RPC)</span></span>

<span data-ttu-id="6333f-104">Les programmes clients peuvent utiliser la fonction [**RpcBindingSetAuthInfoEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) plutôt que la fonction [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) pour créer une liaison authentifiée.</span><span class="sxs-lookup"><span data-stu-id="6333f-104">Client programs can use the [**RpcBindingSetAuthInfoEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) function rather than the [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) function to create an authenticated binding.</span></span> <span data-ttu-id="6333f-105">Si c’est le cas, ils passent un pointeur vers une structure [**\_ \_ QoS de sécurité RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) comme paramètre final de **RpcBindingSetAuthInfoEx**.</span><span class="sxs-lookup"><span data-stu-id="6333f-105">If they do, they pass a pointer to an [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure as the final parameter of **RpcBindingSetAuthInfoEx**.</span></span> <span data-ttu-id="6333f-106">Cette structure contient des informations sur la qualité de service.</span><span class="sxs-lookup"><span data-stu-id="6333f-106">This structure contains information about the quality of service.</span></span> <span data-ttu-id="6333f-107">Les programmes clients peuvent également spécifier le suivi des identités et sélectionner le type d’emprunt d’identité.</span><span class="sxs-lookup"><span data-stu-id="6333f-107">Client programs can also specify the identity tracking and select the impersonation type.</span></span>

<span data-ttu-id="6333f-108">Utilisez les **fonctions** membres de la [**structure \_ \_ QoS de sécurité RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) pour définir les parties de l’application client/serveur qui doivent être authentifiées.</span><span class="sxs-lookup"><span data-stu-id="6333f-108">Use the **Capabilities** member of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure to set which portions of the client/server application are authenticated.</span></span> <span data-ttu-id="6333f-109">Si la \_ \_ \_ \_ valeur par défaut des fonctionnalités de QoS RPC C est sélectionnée, la bibliothèque Runtime RPC authentifie le client ou le serveur en fonction de la valeur par défaut du fournisseur de services partagés.</span><span class="sxs-lookup"><span data-stu-id="6333f-109">If RPC\_C\_QOS\_CAPABILITIES\_DEFAULT is selected, the RPC run-time library authenticates the client or server according to the default for the SSP.</span></span> <span data-ttu-id="6333f-110">Par défaut, le SSP du protocole Kerberos authentifie à la fois le client et le serveur.</span><span class="sxs-lookup"><span data-stu-id="6333f-110">By default, the Kerberos protocol SSP authenticates both the client and the server.</span></span> <span data-ttu-id="6333f-111">La valeur par défaut pour tous les autres SSP fournis par Microsoft consiste à authentifier le client auprès du serveur, mais pas à authentifier le serveur auprès du client.</span><span class="sxs-lookup"><span data-stu-id="6333f-111">The default for all other SSPs that Microsoft provides is to authenticate the client to the server, but not to authenticate the server to the client.</span></span>

<span data-ttu-id="6333f-112">Si le client et le serveur doivent toujours s’authentifier entre eux, définissez le membre **capacités** de la structure [**\_ \_ QoS de sécurité RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) sur \_ fonctionnalités RPC C \_ QoS \_ \_ \_ authentification mutuelle.</span><span class="sxs-lookup"><span data-stu-id="6333f-112">If the client and the server should always authenticate to each other, set the **Capabilities** member of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure to RPC\_C\_QOS\_CAPABILITIES\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="6333f-113">Certains fournisseurs de sécurité peuvent ne pas prendre en charge l’authentification mutuelle.</span><span class="sxs-lookup"><span data-stu-id="6333f-113">Some security providers may not support mutual authentication.</span></span> <span data-ttu-id="6333f-114">Si \_ \_ \_ \_ l’authentification mutuelle des fonctionnalités QoS C RPC \_ est spécifiée pour ces fournisseurs de sécurité, une erreur est retournée lorsqu’un appel de procédure distante est effectué.</span><span class="sxs-lookup"><span data-stu-id="6333f-114">If RPC\_C\_QOS\_CAPABILITIES\_MUTUAL\_AUTH is specified for such security providers, an error is returned when a remote procedure call is made.</span></span> <span data-ttu-id="6333f-115">Lors de l’utilisation du SSP SCHANNEL, il est possible de définir le membre **Capabilities** sur les \_ fonctionnalités de QoS C RPC, \_ \_ \_ quelle que soit l' \_ autorité.</span><span class="sxs-lookup"><span data-stu-id="6333f-115">When using the SCHANNEL SSP, it is possible to also set the **Capabilities** member to RPC\_C\_QOS\_CAPABILITIES\_ANY\_AUTHORITY.</span></span> <span data-ttu-id="6333f-116">Cette constante spécifie que le SSP doit valider l’appel de procédure distante même si l’autorité de certification qui a émis le certificat d’authentification du client ne se trouve pas dans le magasin de certificats racine du fournisseur de services partagés.</span><span class="sxs-lookup"><span data-stu-id="6333f-116">This constant specifies that the SSP shall validate the remote procedure call even if the certificate authority that issued the client's authentication certificate is not in the SSP's root certificate store.</span></span> <span data-ttu-id="6333f-117">La valeur par défaut consiste à rejeter le certificat si le fournisseur de services partagés ne reconnaît pas l’autorité de certification.</span><span class="sxs-lookup"><span data-stu-id="6333f-117">The default is to reject the certificate if the SSP does not recognize the certificate authority.</span></span> <span data-ttu-id="6333f-118">L’autorité de certification est une société ou organisation indépendante, telle que VeriSign, qui émet des certificats d’authentification.</span><span class="sxs-lookup"><span data-stu-id="6333f-118">The certificate authority is an independent company or organization, such as VeriSign, that issues authentication certificates.</span></span>

<span data-ttu-id="6333f-119">Les applications peuvent également définir le suivi des identités utilisé par la bibliothèque Runtime RPC.</span><span class="sxs-lookup"><span data-stu-id="6333f-119">Applications can also set the identity tracking that the RPC run-time library uses.</span></span> <span data-ttu-id="6333f-120">Les programmes utilisent généralement le [*suivi statique des identités*](s-glos.md).</span><span class="sxs-lookup"><span data-stu-id="6333f-120">Programs generally use [*static identity tracking*](s-glos.md).</span></span> <span data-ttu-id="6333f-121">Avec le suivi statique, les informations d’identification du client sont définies lors de l’appel de la fonction [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) .</span><span class="sxs-lookup"><span data-stu-id="6333f-121">With static tracking, the client's credentials are set when it calls the [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) function.</span></span> <span data-ttu-id="6333f-122">La bibliothèque Runtime RPC utilise ensuite ces informations d’identification pour tous les appels RPC sur la liaison, indépendamment des modifications apportées à l’identité du thread appelant ou au processus appelant.</span><span class="sxs-lookup"><span data-stu-id="6333f-122">The RPC run-time library then uses those credentials for all RPC calls on the binding, regardless of changes in the identity of the calling thread or the calling process.</span></span> <span data-ttu-id="6333f-123">Les applications peuvent également sélectionner le [*suivi des identités dynamiques*](d-glos.md).</span><span class="sxs-lookup"><span data-stu-id="6333f-123">Applications can also select [*dynamic identity tracking*](d-glos.md).</span></span> <span data-ttu-id="6333f-124">Le suivi dynamique des identités indique à la bibliothèque Runtime RPC d’utiliser les informations d’identification du thread appelant au moment de chaque appel, plutôt que le handle de liaison.</span><span class="sxs-lookup"><span data-stu-id="6333f-124">Dynamic identity tracking instructs the RPC run-time library to use the credentials of the calling thread at the time of each call, rather than the binding handle.</span></span> <span data-ttu-id="6333f-125">Le suivi d’identité par défaut est statique.</span><span class="sxs-lookup"><span data-stu-id="6333f-125">The default identity tracking is static.</span></span>

<span data-ttu-id="6333f-126">Si l’identité du client n’est pas modifiée, le suivi des identités statiques peut avoir de meilleures caractéristiques de performances et peut enregistrer la durée d’exécution du RPC à partir de chaque fois que l’identité sur le thread appelant est identique à l’identité donnée au système de sécurité.</span><span class="sxs-lookup"><span data-stu-id="6333f-126">If the identity of the client is not going to change, static identity tracking can have better performance characteristics, and can save the RPC run time from checking each time whether the identity on the calling thread is the same as the identity given to the security system.</span></span> <span data-ttu-id="6333f-127">Si l’identité du thread appelant peut changer d’un appel à l’autre, et que le serveur doit reconnaître ces modifications, il est préférable de spécifier le suivi dynamique des identités : le temps d’exécution RPC est en silence et suivi efficacement de l’identité pour vous et, si l’identité change, gère cette modification en votre nom.</span><span class="sxs-lookup"><span data-stu-id="6333f-127">If the identity of the calling thread may change between calls, and the server needs to recognize those changes, it is best to specify dynamic identity tracking—the RPC run time quietly and efficiently tracks the identity for you, and if the identity changes, manages that change on your behalf.</span></span>

> [!Note]  
> <span data-ttu-id="6333f-128">Pour les appels **Ncalrpc** , le suivi des identités statiques et dynamiques présentent des caractéristiques de performances différentes et, selon les circonstances, elles peuvent être plus rapides.</span><span class="sxs-lookup"><span data-stu-id="6333f-128">For **ncalrpc** calls, static and dynamic identity tracking have different performance characteristics, and depending on the circumstances, either may be faster.</span></span>

 

<span data-ttu-id="6333f-129">Dans le cadre de la spécification QOS, le programme client peut également définir le type d’emprunt d’identité qu’un programme serveur peut effectuer en son nom.</span><span class="sxs-lookup"><span data-stu-id="6333f-129">As part of the QOS specification, the client program can also set the type of impersonation that a server program can perform on its behalf.</span></span> <span data-ttu-id="6333f-130">Pour plus d’informations, consultez [emprunt d’identité du client](client-impersonation.md).</span><span class="sxs-lookup"><span data-stu-id="6333f-130">For more information, see [Client Impersonation](client-impersonation.md).</span></span>

<span data-ttu-id="6333f-131">Le champ du numéro de version de la structure [**\_ \_ QoS de sécurité RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) doit toujours être défini sur la \_ \_ version QoS de la sécurité C RPC \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="6333f-131">The version number field of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure should always be set to RPC\_C\_SECURITY\_QOS\_VERSION.</span></span>

 

 




