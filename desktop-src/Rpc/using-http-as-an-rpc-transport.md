---
title: Utilisation de HTTP comme transport RPC
description: RPC sur HTTP permet aux programmes clients d’utiliser Internet pour exécuter des procédures fournies par les programmes serveur sur des réseaux distants.
ms.assetid: b5062d70-7625-4a9f-a8c1-025ef8342fcb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5860757a6c5df9937e77fc078df2526affb967fa
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104462270"
---
# <a name="using-http-as-an-rpc-transport"></a><span data-ttu-id="47788-103">Utilisation de HTTP comme transport RPC</span><span class="sxs-lookup"><span data-stu-id="47788-103">Using HTTP as an RPC Transport</span></span>

<span data-ttu-id="47788-104">RPC sur HTTP permet aux programmes clients d’utiliser Internet pour exécuter des procédures fournies par les programmes serveur sur des réseaux distants.</span><span class="sxs-lookup"><span data-stu-id="47788-104">RPC-over-HTTP enables client programs to use the Internet to execute procedures provided by server programs on distant networks.</span></span> <span data-ttu-id="47788-105">RPC sur HTTP tunnele ses appels via un port HTTP établi.</span><span class="sxs-lookup"><span data-stu-id="47788-105">RPC over HTTP tunnels its calls through an established HTTP port.</span></span> <span data-ttu-id="47788-106">Par conséquent, ses appels peuvent traverser des pare-feu réseau sur les réseaux client et serveur.</span><span class="sxs-lookup"><span data-stu-id="47788-106">Thus, its calls can cross network firewalls on both the client and server networks.</span></span>

<span data-ttu-id="47788-107">RPC sur HTTP achemine ses appels vers le proxy RPC situé sur le réseau du serveur RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-107">RPC over HTTP routes its calls to the RPC proxy located on the RPC server's network.</span></span> <span data-ttu-id="47788-108">Le proxy RPC établit et maintient une connexion au serveur RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-108">The RPC Proxy establishes and maintains a connection to the RPC server.</span></span> <span data-ttu-id="47788-109">Il sert de proxy, en rétribuant les appels de procédure distante au serveur RPC et en renvoyant les réponses du serveur sur Internet à l’application cliente.</span><span class="sxs-lookup"><span data-stu-id="47788-109">It serves as a proxy, dispatching remote procedure calls to the RPC server and sending the server's replies back across the Internet to the client application.</span></span> <span data-ttu-id="47788-110">Ce processus est illustré dans le diagramme suivant.</span><span class="sxs-lookup"><span data-stu-id="47788-110">This process is illustrated in the following diagram.</span></span>

![interaction entre un serveur RPC et Internet Information Server pour RPC http](images/httprpc1.png)

<span data-ttu-id="47788-112">Le diagramme montre un pare-feu sur le réseau de l’application cliente.</span><span class="sxs-lookup"><span data-stu-id="47788-112">The diagram shows a firewall on the client application's network.</span></span> <span data-ttu-id="47788-113">Cela n’est pas nécessaire pour que RPC sur HTTP fonctionne.</span><span class="sxs-lookup"><span data-stu-id="47788-113">This is not required for RPC over HTTP to operate.</span></span> <span data-ttu-id="47788-114">Toutefois, si le réseau client dispose d’un pare-feu, il aura également besoin d’un programme serveur proxy tel que Microsoft Proxy Server.</span><span class="sxs-lookup"><span data-stu-id="47788-114">However, if the client network does have a firewall, it will also need a proxy server program such as Microsoft Proxy Server.</span></span>

<span data-ttu-id="47788-115">Lorsque le programme client émet un appel de procédure distante en utilisant le protocole HTTP comme transport, la bibliothèque Runtime RPC sur le client contacte le proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-115">When the client program issues a remote procedure call using HTTP as the transport, the RPC run-time library on the client contacts the RPC proxy.</span></span> <span data-ttu-id="47788-116">Selon que le client RPC a été invité à utiliser HTTP ou HTTPs (HTTP avec SSL), le port 80 ou le port 443 est utilisé, respectivement.</span><span class="sxs-lookup"><span data-stu-id="47788-116">Depending on whether the RPC client was asked to use HTTP or HTTPS (HTTP with SSL) port 80 or port 443 is used, respectively.</span></span> <span data-ttu-id="47788-117">Le proxy RPC contacte le programme serveur RPC et établit une connexion TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="47788-117">The RPC proxy contacts the RPC server program and establishes a TCP/IP connection.</span></span> <span data-ttu-id="47788-118">Le client et le proxy RPC maintiennent leur connexion HTTP ou HTTPs sur Internet.</span><span class="sxs-lookup"><span data-stu-id="47788-118">The client and the RPC proxy maintain their HTTP or HTTPS connection across the Internet.</span></span> <span data-ttu-id="47788-119">La connexion HTTP ou HTTPs du client au proxy RPC peut traverser un pare-feu (sous réserve d’autorisations d’accès appropriées), le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="47788-119">The client's HTTP or HTTPS connection to the RPC proxy can pass through a firewall (subject to appropriate access permissions) if one is present.</span></span> <span data-ttu-id="47788-120">Le serveur peut ensuite exécuter l’appel de procédure distante et utiliser la connexion via le proxy RPC pour répondre au client.</span><span class="sxs-lookup"><span data-stu-id="47788-120">The server can then execute the remote procedure call and use the connection through the RPC proxy to reply to the client.</span></span> <span data-ttu-id="47788-121">Le proxy RPC est une extension ISAPI qui s’exécute dans le contexte d’IIS.</span><span class="sxs-lookup"><span data-stu-id="47788-121">The RPC proxy is an ISAPI extension running in the context of IIS.</span></span>

<span data-ttu-id="47788-122">Si le client ou le serveur se déconnecte pour une raison quelconque, le proxy RPC le détecte et met fin à la session RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-122">If either the client or the server disconnects for any reason, the RPC proxy will detect it and end the RPC session.</span></span> <span data-ttu-id="47788-123">Tant que la session continue, le proxy RPC conserve ses connexions au client et au serveur.</span><span class="sxs-lookup"><span data-stu-id="47788-123">As long as the session continues, the RPC proxy will maintain its connections to the client and the server.</span></span> <span data-ttu-id="47788-124">Il transmet les appels de procédure distante du client au serveur et envoie les réponses du serveur au client.</span><span class="sxs-lookup"><span data-stu-id="47788-124">It will forward remote procedure calls from the client to the server, and send replies from the server to the client.</span></span>

<span data-ttu-id="47788-125">Le programme client RPC peut acheminer ses appels RPC via Internet en créant une liaison de chaîne au format suivant :</span><span class="sxs-lookup"><span data-stu-id="47788-125">The RPC client program can tunnel its RPC calls through the Internet by creating a string binding of the form:</span></span>

``` syntax
[object_uuid@]ncacn_http:rpc_server[endpoint,HttpProxy=proxy_server:http_port,RpcProxy=rpc_proxy:rpc_port,HttpConnectionOption=UseHttpProxy]
```

<span data-ttu-id="47788-126">Où :</span><span class="sxs-lookup"><span data-stu-id="47788-126">Where:</span></span>

-   <span data-ttu-id="47788-127">*\_ UUID* de l’objet spécifie un UUID d’objet RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-127">*object\_uuid* specifies an RPC object UUID.</span></span> <span data-ttu-id="47788-128">Pour plus d’informations, consultez [génération d’UUID d’interface](generating-interface-uuids.md) et de [chaîne UUID](string-uuid.md).</span><span class="sxs-lookup"><span data-stu-id="47788-128">For more information, see [Generating Interface UUIDs](generating-interface-uuids.md) and [String UUID](string-uuid.md).</span></span>
-   <span data-ttu-id="47788-129">**ncacn \_ http** sélectionne la spécification de séquence de protocole pour RPC sur http.</span><span class="sxs-lookup"><span data-stu-id="47788-129">**ncacn\_http** selects the protocol sequence specification for RPC over HTTP.</span></span> <span data-ttu-id="47788-130">Pour plus d’informations, consultez [constantes de séquence de protocole](protocol-sequence-constants.md) et liaison de [chaîne](string-binding.md).</span><span class="sxs-lookup"><span data-stu-id="47788-130">For more information, see [Protocol Sequence Constants](protocol-sequence-constants.md) and [String Binding](string-binding.md).</span></span>
-   <span data-ttu-id="47788-131">*le \_ serveur RPC* est l’adresse réseau de l’ordinateur qui exécute le processus serveur RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-131">*rpc\_server* is the network address of the computer that is executing the RPC server process.</span></span> <span data-ttu-id="47788-132">L’adresse du serveur doit être spécifiée dans un formulaire visible et compréhensible par l’ordinateur proxy RPC, et non par le client.</span><span class="sxs-lookup"><span data-stu-id="47788-132">The server address must be specified in a form visible and understandable by the RPC proxy computer, not by the client.</span></span> <span data-ttu-id="47788-133">Étant donné que le client ne se connecte pas directement au serveur, il n’a pas besoin d’être en mesure de résoudre le nom du serveur ou d’établir une connexion à celui-ci.</span><span class="sxs-lookup"><span data-stu-id="47788-133">Since the client does not connect directly to the server, it does not need to be able to resolve the name of the server, or establish a connection to it.</span></span> <span data-ttu-id="47788-134">Le proxy RPC établit la connexion au nom du client et, par conséquent, le *\_ serveur RPC* doit être un nom reconnu par le proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-134">The RPC proxy will establish the connection on the client's behalf, and therefore, *rpc\_server* must be a name recognizable by the RPC proxy.</span></span>
-   <span data-ttu-id="47788-135">*point de terminaison* spécifie le port TCP/IP que le processus serveur RPC écoute pour les appels de procédure distante.</span><span class="sxs-lookup"><span data-stu-id="47788-135">*endpoint* specifies the TCP/IP port that the RPC server process listens to for remote procedure calls.</span></span> <span data-ttu-id="47788-136">Pour plus d’informations, consultez [recherche de points de terminaison](finding-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="47788-136">For more information, see [Finding Endpoints](finding-endpoints.md).</span></span>
-   <span data-ttu-id="47788-137">**Httpproxy** spécifie éventuellement un serveur proxy http sur le réseau du client RPC, tel que Microsoft Proxy Server.</span><span class="sxs-lookup"><span data-stu-id="47788-137">**HttpProxy** optionally specifies an HTTP proxy server on the RPC client's network, such as Microsoft Proxy Server.</span></span> <span data-ttu-id="47788-138">Si un serveur proxy est sélectionné, aucun numéro de port n’est spécifié, le stub RPC utilise le port 80 par défaut si le protocole SSL n’est pas demandé, et le port 443 si le protocole SSL est spécifié.</span><span class="sxs-lookup"><span data-stu-id="47788-138">If a proxy server is selected, no port number is specified, the RPC stub uses port 80 by default if SSL is not requested, and port 443 if SSL is specified.</span></span>
-   <span data-ttu-id="47788-139">**RpcProxy** spécifie l’adresse et le numéro de port de l’ordinateur IIS qui joue le rôle de proxy pour le serveur RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-139">**RpcProxy** specifies the address and port number of the IIS computer that acts as a proxy to the RPC server.</span></span> <span data-ttu-id="47788-140">Vous ne devez spécifier cette valeur que si le processus du serveur RPC réside sur un autre ordinateur que le proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-140">You only need to specify this if the RPC server process resides on a different computer than the RPC proxy.</span></span> <span data-ttu-id="47788-141">Si vous ne spécifiez pas de numéro de port, le stub client RPC utilise par défaut le port 80 si le protocole SSL n’est pas spécifié et utilise le port 443 si le protocole SSL (HTTPs) est spécifié.</span><span class="sxs-lookup"><span data-stu-id="47788-141">If you do not specify a port number, the RPC client stub by default uses port 80 if SSL is not specified, and uses port 443 if SSL (HTTPS) is specified.</span></span>
-   <span data-ttu-id="47788-142">**HttpConnectionOption** vous permet éventuellement de diriger le comportement d’un appel RPC lors de l’établissement de connexions http.</span><span class="sxs-lookup"><span data-stu-id="47788-142">**HttpConnectionOption** optionally allows you to direct RPC’s behavior when making HTTP connections.</span></span> <span data-ttu-id="47788-143">La valeur **UseHttpProxy** indique à RPC de router le trafic via le proxy http à tout moment, y compris lorsque les options Internet du client sont définies dans Internet Explorer sur « ne pas utiliser de serveur proxy pour les adresses locales ».</span><span class="sxs-lookup"><span data-stu-id="47788-143">The **UseHttpProxy** value instructs RPC to route its traffic through the Http proxy at all times, including when the client has their Internet Options set in Internet Explorer to “Bypass proxy server for local addresses.”</span></span>

    <span data-ttu-id="47788-144">Cette option est prise en charge sur Windows 7, Windows Server 2008 R2, Windows 8.1 et Windows Server 2012 R2 avec KB2916915 installé.</span><span class="sxs-lookup"><span data-stu-id="47788-144">This option is supported on Windows 7, Windows Server 2008 R2, Windows 8.1, and Windows Server 2012 R2 with KB2916915 installed.</span></span> <span data-ttu-id="47788-145">Cette option n’est pas prise en charge sur Windows 8 et Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="47788-145">This option is not supported on Windows 8 and Windows Server 2012.</span></span> <span data-ttu-id="47788-146">Les applications peuvent déterminer si cette option est prise en charge par le runtime RPC en vérifiant la valeur de Registre **ConnectionOptionsFlag** située sous la clé de Registre suivante :</span><span class="sxs-lookup"><span data-stu-id="47788-146">Applications can determine if this option is supported by the RPC runtime by checking the **ConnectionOptionsFlag** registry value located under the following registry key:</span></span>

    <span data-ttu-id="47788-147">**HKEY \_ local \_ machine \\ Software \\ Microsoft \\ RPC**</span><span class="sxs-lookup"><span data-stu-id="47788-147">**HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Rpc**</span></span>

    <span data-ttu-id="47788-148">Si le bit 0 (LSB) de cette valeur de Registre est défini, cette option spécifique est prise en charge ; dans le cas contraire, cette option n’est pas prise en charge par le runtime RPC dans le système.</span><span class="sxs-lookup"><span data-stu-id="47788-148">If the bit 0 (LSB) of this registry value is set, then this specific option is supported; otherwise, this option is not supported by the RPC runtime in the system.</span></span>

<span data-ttu-id="47788-149">Pour plus d’informations sur la création de liaisons de chaînes, consultez [liaison et Handles](binding-and-handles.md).</span><span class="sxs-lookup"><span data-stu-id="47788-149">For more information on creating string bindings, see [Binding and Handles](binding-and-handles.md).</span></span>

<span data-ttu-id="47788-150">Le programme serveur RPC peut accepter les appels RPC en tunnel en écoutant sur la \_ séquence de protocole http ncacn.</span><span class="sxs-lookup"><span data-stu-id="47788-150">The RPC server program can accept tunneled RPC calls by listening on the ncacn\_http protocol sequence.</span></span>

<span data-ttu-id="47788-151">Microsoft a deux implémentations majeures de RPC sur HTTP : la version 1 et la version 2.</span><span class="sxs-lookup"><span data-stu-id="47788-151">Microsoft has two major implementations of RPC over HTTP: Version 1 and Version 2.</span></span>

<span data-ttu-id="47788-152">La version 1 (appelée RPC sur HTTP v1) est prise en charge par le biais de Windows XP.</span><span class="sxs-lookup"><span data-stu-id="47788-152">Version 1 (called RPC over HTTP v1) is supported through Windows XP.</span></span> <span data-ttu-id="47788-153">La version 1 du proxy RPC est prise en charge via Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="47788-153">Version 1 of the RPC proxy is supported through Windows 2000.</span></span>

<span data-ttu-id="47788-154">La version 2 (appelée RPC sur HTTP v2) est la version actuelle.</span><span class="sxs-lookup"><span data-stu-id="47788-154">Version 2 (called RPC over HTTP v2) is the current version.</span></span>

<span data-ttu-id="47788-155">Les deux versions ont des fonctionnalités différentes et une interopérabilité limitée.</span><span class="sxs-lookup"><span data-stu-id="47788-155">The two versions have different capabilities and limited interoperability.</span></span> <span data-ttu-id="47788-156">Un résumé des différences est fourni ici.</span><span class="sxs-lookup"><span data-stu-id="47788-156">A summary of the differences is provided here.</span></span> <span data-ttu-id="47788-157">Pour plus d’informations sur l’interopérabilité, consultez [Configuration système requise et interopérabilité pour RPC sur http](system-requirements-and-interoperability-for-rpc-over-http.md).</span><span class="sxs-lookup"><span data-stu-id="47788-157">For interoperability considerations, see [System Requirements and Interoperability for RPC over HTTP](system-requirements-and-interoperability-for-rpc-over-http.md).</span></span>

-   <span data-ttu-id="47788-158">RPC sur HTTP v1 requiert l’activation du tunnel SSL sur tous les proxys/pare-feu HTTP entre le client RPC sur HTTP et le proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-158">RPC over HTTP v1 requires SSL Tunneling to be enabled on all HTTP proxies/firewalls between the RPC over HTTP client and the RPC proxy.</span></span> <span data-ttu-id="47788-159">RPC sur HTTP v1 tente de créer un tunnel SSL sur le port 80, même si les données qu’il envoie ne sont pas réellement chiffrées par le protocole SSL.</span><span class="sxs-lookup"><span data-stu-id="47788-159">RPC over HTTP v1 attempts to build an SSL Tunnel over port 80 even though the data it sends is not actually SSL-encrypted.</span></span> <span data-ttu-id="47788-160">Les proxies et les pare-feu rejettent généralement ces demandes, sauf s’ils sont explicitement configurés pour les autoriser.</span><span class="sxs-lookup"><span data-stu-id="47788-160">Proxies and firewalls usually reject such requests unless explicitly configured to allow them.</span></span> <span data-ttu-id="47788-161">RPC sur HTTP v2 n’a pas cette exigence.</span><span class="sxs-lookup"><span data-stu-id="47788-161">RPC over HTTP v2 has no such requirement.</span></span>
-   <span data-ttu-id="47788-162">RPC sur HTTP v1 ne peut pas établir une session SSL pour le proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-162">RPC over HTTP v1 cannot establish an SSL session to the RPC proxy.</span></span> <span data-ttu-id="47788-163">Le RPC sur HTTP v2 peut envoyer tout le trafic RPC sur HTTP au sein d’une session SSL. par défaut, v2 exige que les données soient envoyées au sein d’une session SSL.</span><span class="sxs-lookup"><span data-stu-id="47788-163">The RPC over HTTP v2 can send all RPC over HTTP traffic within an SSL session; by default v2 requires the data be sent within an SSL session.</span></span>
-   <span data-ttu-id="47788-164">RPC sur HTTP v1 ne peut pas s’authentifier auprès du proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-164">RPC over HTTP v1 cannot authenticate to the RPC proxy.</span></span> <span data-ttu-id="47788-165">RPC sur HTTP v2 peut s’authentifier ; par défaut, v2 requiert l’authentification auprès du proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="47788-165">RPC over HTTP v2 can authenticate; by default v2 requires authentication to the RPC proxy.</span></span>
-   <span data-ttu-id="47788-166">Le proxy RPC v1 ne fonctionne pas correctement lorsque l’ordinateur IIS sur lequel il est installé fait partie d’une batterie de serveurs Web.</span><span class="sxs-lookup"><span data-stu-id="47788-166">RPC proxy v1 does not operate correctly when the IIS machine on which it is installed is part of a web farm.</span></span> <span data-ttu-id="47788-167">Le proxy RPC v2 fonctionne correctement lorsque l’ordinateur IIS sur lequel il est installé fait partie d’une batterie de serveurs Web.</span><span class="sxs-lookup"><span data-stu-id="47788-167">RPC proxy v2 operates properly when the IIS machine on which it is installed is part of a web farm.</span></span>

> [!Note]  
> <span data-ttu-id="47788-168">Si Microsoft Internet Explorer est installé sur l’ordinateur du programme client et que votre client ne spécifie pas de **httpproxy** dans sa liaison de chaîne, le stub client RPC recherche une entrée **httpproxy** dans le registre de l’ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="47788-168">If Microsoft Internet Explorer is installed on the client program's computer and your client does not specify an **HttpProxy** in its string binding, the RPC client stub will search the registry on the client computer for an **HttpProxy** entry.</span></span> <span data-ttu-id="47788-169">S’il en trouve un, il utilisera le proxy spécifié dans l’entrée de registre.</span><span class="sxs-lookup"><span data-stu-id="47788-169">If it finds one, it will use the proxy specified in the registry entry.</span></span>

 

<span data-ttu-id="47788-170">Supposons, par exemple, que votre programme client doit se connecter via Internet à un serveur RPC sur un ordinateur appelé Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="47788-170">Suppose, for instance, your client program needs to connect across the Internet to an RPC server on a computer called Server7.microsoft.com.</span></span> <span data-ttu-id="47788-171">En outre, supposons que le proxy RPC s’exécute sur Major7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="47788-171">Further, suppose that the RPC proxy runs on Major7.microsoft.com.</span></span> <span data-ttu-id="47788-172">Le programme serveur RPC écoute le port 2225.</span><span class="sxs-lookup"><span data-stu-id="47788-172">The RPC server program listens to port 2225.</span></span> <span data-ttu-id="47788-173">Votre client utilise la liaison de chaîne :</span><span class="sxs-lookup"><span data-stu-id="47788-173">Your client would use the string binding:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[2225, RpcProxy=Major7.microsoft.com]
```

<span data-ttu-id="47788-174">Si le proxy RPC peut résoudre le nom du serveur en tant que Server7, sans exiger un nom de domaine complet, vous pouvez également spécifier :</span><span class="sxs-lookup"><span data-stu-id="47788-174">If the RPC proxy can resolve the server name as Server7, without requiring a fully qualified domain name, you can also specify:</span></span>

``` syntax
ncacn_http:Server7 [2225, RpcProxy=Major7.microsoft.com]
```

<span data-ttu-id="47788-175">Si le réseau client utilise un pare-feu et un serveur proxy Internet appelé MyProxy, et qu’Internet Explorer sur le client n’est pas configuré pour utiliser ce proxy, vous devez modifier la liaison de chaîne du client en :</span><span class="sxs-lookup"><span data-stu-id="47788-175">If the client network uses a firewall and an Internet proxy server called myproxy, and Internet Explorer on the client is not configured to use that proxy, you would need to modify the client's string binding to:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[,HttpProxy=myproxy:80,RpcProxy=Major7.microsoft.com:80]
```

<span data-ttu-id="47788-176">Cela indique au client de se connecter au programme serveur RPC sur Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="47788-176">This directs the client to connect to the RPC server program on Server7.microsoft.com.</span></span> <span data-ttu-id="47788-177">Pour ce faire, le client utilise tout d’abord le port 80 (ou le port 443 si SSL est utilisé) pour se connecter à MyProxy.</span><span class="sxs-lookup"><span data-stu-id="47788-177">To do this, the client will first use port 80 (or port 443 if SSL is used) to connect to myproxy.</span></span> <span data-ttu-id="47788-178">Cela permettra au programme client d’accéder à Internet.</span><span class="sxs-lookup"><span data-stu-id="47788-178">This will give the client program access to the Internet.</span></span> <span data-ttu-id="47788-179">À l’aide d’Internet, le programme client se connecte ensuite au proxy RPC sur Major7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="47788-179">Using the Internet, the client program next connects to the RPC proxy on Major7.microsoft.com.</span></span> <span data-ttu-id="47788-180">Le proxy RPC établit une connexion au programme serveur RPC s’exécutant sur Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="47788-180">The RPC proxy will establish a connection to the RPC server program running on Server7.microsoft.com.</span></span>

<span data-ttu-id="47788-181">Si le réseau client utilise un pare-feu et si le proxy RPC ne peut pas être contacté directement, pour qu’une connexion soit établie plus rapidement, la liaison de chaîne du client peut être modifiée comme suit :</span><span class="sxs-lookup"><span data-stu-id="47788-181">If the client network uses a firewall and if the RPC proxy cannot be reached directly, in order to get a connection established faster, the client string binding can be modified to:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[RpcProxy=Major7.microsoft.com:80,HttpConnectionOption=UseHttpProxy]
```

<span data-ttu-id="47788-182">Le **HttpConnectionOption** vous permet de diriger le comportement d’un RPC lors de l’établissement de connexions http.</span><span class="sxs-lookup"><span data-stu-id="47788-182">The **HttpConnectionOption** allows you to direct RPC’s behavior when making HTTP connections.</span></span> <span data-ttu-id="47788-183">La valeur **UseHttpProxy** indique à RPC de router le trafic via le proxy http à tout moment, y compris lorsque les options Internet du client sont définies dans Internet Explorer sur « ne pas utiliser de serveur proxy pour les adresses locales ».</span><span class="sxs-lookup"><span data-stu-id="47788-183">The **UseHttpProxy** value instructs RPC to route its traffic through the Http proxy at all times, including when the client has their Internet Options set in Internet Explorer to “Bypass proxy server for local addresses.”</span></span> <span data-ttu-id="47788-184">Cela force le client à se connecter au proxy RPC via le proxy http.</span><span class="sxs-lookup"><span data-stu-id="47788-184">This directs the client to forcefully connect to the RPC proxy through the Http proxy.</span></span> <span data-ttu-id="47788-185">Cela accélère le temps nécessaire à l’établissement d’une connexion, car il ignore les retards de recherche du serveur RPC directement avant l’utilisation du proxy HTTP.</span><span class="sxs-lookup"><span data-stu-id="47788-185">This speeds up the time to establish a connection since it bypasses any delay searching for the RPC server directly prior to using the HTTP proxy.</span></span>

<span data-ttu-id="47788-186">Si l’option **HttpConnectionOption** est utilisée et qu’Internet Explorer sur le client n’est pas configuré pour utiliser ce proxy http, les connexions peuvent échouer avec les **\_ \_ \_ \_ options réseau non valides RPC**.</span><span class="sxs-lookup"><span data-stu-id="47788-186">If the **HttpConnectionOption** option is used and Internet Explorer on the client is not configured to use that Http proxy, connections may fail with **RPC\_S\_INVALID\_NETWORK\_OPTIONS**.</span></span>

<span data-ttu-id="47788-187">La grande majorité des ordinateurs actuels est configurée pour la navigation Web.</span><span class="sxs-lookup"><span data-stu-id="47788-187">The vast majority of computers today are configured for Web browsing.</span></span> <span data-ttu-id="47788-188">Par conséquent, la plupart des clients n’ont pas besoin de spécifier **httpproxy**, car ils seront récupérés à partir des paramètres de connectivité Internet.</span><span class="sxs-lookup"><span data-stu-id="47788-188">Therefore, most clients do not need to specify the **HttpProxy**, because it will be retrieved from Internet connectivity settings.</span></span>

 

 




