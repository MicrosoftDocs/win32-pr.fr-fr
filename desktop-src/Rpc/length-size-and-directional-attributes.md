---
title: Attributs de longueur, de taille et d’orientation
description: Lors du passage de tableaux entre le client et le serveur, les attributs liés à la taille \ Max \_ sont \ et \ size \_ est \ déterminer le nombre d’éléments de tableau que le stub serveur alloue.
ms.assetid: 2c95cf47-6fc0-4ccd-bb4f-acf356596e56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98ffbf1ac75ad82a89e258ab595590fce2190b9e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103729308"
---
# <a name="length-size-and-directional-attributes"></a><span data-ttu-id="a9409-103">Attributs de longueur, de taille et d’orientation</span><span class="sxs-lookup"><span data-stu-id="a9409-103">Length, Size, and Directional Attributes</span></span>

<span data-ttu-id="a9409-104">Lors du passage de tableaux entre le client et le serveur, les attributs liés à la taille \[ [**Max \_ sont**](/windows/desktop/Midl/max-is) \] et \[ [**size \_**](/windows/desktop/Midl/size-is) \] détermine le nombre d’éléments de tableau alloués par le stub serveur.</span><span class="sxs-lookup"><span data-stu-id="a9409-104">In passing arrays between the client and the server, the size-related attributes \[[**max\_is**](/windows/desktop/Midl/max-is)\] and \[[**size\_is**](/windows/desktop/Midl/size-is)\] determine how many array elements the server stub allocates.</span></span> <span data-ttu-id="a9409-105">La longueur des attributs liés à la longueur \[ [**\_ est**](/windows/desktop/Midl/length-is) \] , \[ en [**premier lieu \_**](/windows/desktop/Midl/first-is) \] , et le \[ [**dernier \_**](/windows/desktop/Midl/last-is) \] détermine le nombre d’éléments transmis au serveur et au client.</span><span class="sxs-lookup"><span data-stu-id="a9409-105">The length-related attributes \[[**length\_is**](/windows/desktop/Midl/length-is)\], \[[**first\_is**](/windows/desktop/Midl/first-is)\], and \[[**last\_is**](/windows/desktop/Midl/last-is)\] determine how many elements are transmitted to both the server and the client.</span></span>

<span data-ttu-id="a9409-106">Différents attributs directionnels peuvent être appliqués aux paramètres.</span><span class="sxs-lookup"><span data-stu-id="a9409-106">Different directional attributes can be applied to parameters.</span></span> <span data-ttu-id="a9409-107">Toutefois, certaines combinaisons d’attributs directionnels peuvent provoquer des erreurs.</span><span class="sxs-lookup"><span data-stu-id="a9409-107">However, some combinations of directional attributes can cause errors.</span></span> <span data-ttu-id="a9409-108">Par exemple, supposez que vous écrivez une interface qui spécifie une procédure avec deux paramètres, un tableau et la longueur transmise du tableau.</span><span class="sxs-lookup"><span data-stu-id="a9409-108">As an example, suppose you are writing an interface that specifies a procedure with two parameters, an array, and the transmitted length of the array.</span></span> <span data-ttu-id="a9409-109">Le terme « *dir \_ attr* » fait référence à l’attribut directionnel appliqué au paramètre comme suit :</span><span class="sxs-lookup"><span data-stu-id="a9409-109">The term *dir\_attr* refers to the directional attribute applied to the parameter as:</span></span>

``` syntax
Proc1(
    [dir_attr] short *plength;
    [dir_attr, length_is(pLength)] short array[MAX_SIZE]);
```

<span data-ttu-id="a9409-110">Le comportement du compilateur MIDL pour chaque combinaison d’attributs directionnels est décrit dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="a9409-110">The MIDL compiler behavior for each combination of directional attributes is described in the following table.</span></span>



| <span data-ttu-id="a9409-111">Array</span><span class="sxs-lookup"><span data-stu-id="a9409-111">Array</span></span>                                          | <span data-ttu-id="a9409-112">Paramètre de longueur</span><span class="sxs-lookup"><span data-stu-id="a9409-112">Length parameter</span></span>                               | <span data-ttu-id="a9409-113">Actions stub lors de l’appel du client au serveur</span><span class="sxs-lookup"><span data-stu-id="a9409-113">Stub actions during call from client to server</span></span>                                                                                                                                                                                                                          | <span data-ttu-id="a9409-114">Actions stub au retour du serveur au client</span><span class="sxs-lookup"><span data-stu-id="a9409-114">Stub actions on return from server to client</span></span>                                                                                                                                                                         |
|------------------------------------------------|------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a9409-115">\[[**dans**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-115">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="a9409-116">\[[**dans**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-116">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="a9409-117">Transmettez la longueur et le nombre d’éléments indiqués par le paramètre.</span><span class="sxs-lookup"><span data-stu-id="a9409-117">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                                                                              | <span data-ttu-id="a9409-118">Aucune donnée n’est transmise.</span><span class="sxs-lookup"><span data-stu-id="a9409-118">No data transmitted.</span></span>                                                                                                                                                                                                 |
| <span data-ttu-id="a9409-119">\[[**dans**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-119">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="a9409-120">\[[**à**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-120">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="a9409-121">Non légal ; Erreur du compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="a9409-121">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                                                                         | <span data-ttu-id="a9409-122">Non légal ; Erreur du compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="a9409-122">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="a9409-123">\[[**dans**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-123">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="a9409-124">\[[**in**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-124">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="a9409-125">Transmettez la longueur et le nombre d’éléments indiqués par le paramètre de longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-125">Transmit the length and the number of elements indicated by the length parameter.</span></span>                                                                                                                                                                                       | <span data-ttu-id="a9409-126">Transmet uniquement la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-126">Transmit the length only.</span></span>                                                                                                                                                                                            |
| <span data-ttu-id="a9409-127">\[[**à**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-127">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="a9409-128">\[[**dans**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-128">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="a9409-129">Transmettez la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-129">Transmit the length.</span></span><br/> <span data-ttu-id="a9409-130">Si la taille du tableau est fixe, allouez la taille du tableau sur le serveur, mais ne transmettez pas d’éléments.</span><span class="sxs-lookup"><span data-stu-id="a9409-130">If array size is fixed, allocate the array size on the server, but transmit no elements.</span></span><br/> <span data-ttu-id="a9409-131">Si la taille du tableau n’est pas liée, non conforme : erreur du compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="a9409-131">If array size is not bound, not legal: MIDL compiler error.</span></span><br/>                                                              | <span data-ttu-id="a9409-132">Transmet le nombre d’éléments indiqué par la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-132">Transmit the number of elements indicated by the length.</span></span><br/> <span data-ttu-id="a9409-133">Notez que la longueur peut être modifiée et peut avoir une valeur différente de la valeur sur le client.</span><span class="sxs-lookup"><span data-stu-id="a9409-133">Note that the length can be changed and can have a different value from the value on the client.</span></span> <span data-ttu-id="a9409-134">Ne transmettez pas la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-134">Do not transmit the length.</span></span><br/>          |
| <span data-ttu-id="a9409-135">\[[**à**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-135">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="a9409-136">\[[**à**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-136">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="a9409-137">Allouez de l’espace pour le paramètre de longueur sur le serveur, mais ne transmettez pas le paramètre.</span><span class="sxs-lookup"><span data-stu-id="a9409-137">Allocate space for the length parameter on the server but do not transmit the parameter.</span></span> <span data-ttu-id="a9409-138">Si la taille du tableau est fixe, allouez la taille du tableau sur le serveur, mais ne transmettez pas d’éléments.</span><span class="sxs-lookup"><span data-stu-id="a9409-138">If the array size is fixed, allocate the array size on the server, but transmit no elements.</span></span><br/> <span data-ttu-id="a9409-139">Si la taille du tableau n’est pas fixe, non conforme : erreur du compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="a9409-139">If array size is not fixed, not legal: MIDL compiler error.</span></span><br/> | <span data-ttu-id="a9409-140">Transmettez la longueur et le nombre d’éléments indiqués par la longueur telle qu’elle est définie par l’application serveur.</span><span class="sxs-lookup"><span data-stu-id="a9409-140">Transmit the length and the number of elements indicated by the length as set by the server application.</span></span>                                                                                                             |
| <span data-ttu-id="a9409-141">\[[**à**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-141">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="a9409-142">\[[**in**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-142">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="a9409-143">Transmettez le paramètre de longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-143">Transmit the length parameter.</span></span> <span data-ttu-id="a9409-144">Si la taille du tableau est liée, allouez la taille du tableau sur le serveur, mais ne transmettez pas d’éléments.</span><span class="sxs-lookup"><span data-stu-id="a9409-144">If the array size is bound, allocate the array size on the server, but transmit no elements.</span></span><br/> <span data-ttu-id="a9409-145">Si la taille du tableau n’est pas liée, non conforme : erreur du compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="a9409-145">If array size is not bound, not legal: MIDL compiler error.</span></span><br/>                                                           | <span data-ttu-id="a9409-146">Transmettez la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-146">Transmit the length.</span></span> <span data-ttu-id="a9409-147">Transmet le nombre d’éléments de tableau indiqué par la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-147">Transmit the number of array elements indicated by the length.</span></span><br/>                                                                                                                       |
| <span data-ttu-id="a9409-148">\[[**in**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-148">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="a9409-149">\[[**dans**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-149">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="a9409-150">Transmettez la longueur et le nombre d’éléments indiqués par le paramètre.</span><span class="sxs-lookup"><span data-stu-id="a9409-150">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                                                                              | <span data-ttu-id="a9409-151">Ne transmettez pas la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-151">Do not transmit the length.</span></span> <span data-ttu-id="a9409-152">Transmet le nombre d’éléments indiqué par la longueur.</span><span class="sxs-lookup"><span data-stu-id="a9409-152">Transmit the number of elements indicated by the length.</span></span><br/> <span data-ttu-id="a9409-153">Notez que la longueur peut être modifiée et peut avoir une valeur différente de la valeur d’origine sur le client.</span><span class="sxs-lookup"><span data-stu-id="a9409-153">Note that the length can be changed and can have a different value from the original value on the client.</span></span><br/> |
| <span data-ttu-id="a9409-154">\[[**in**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-154">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="a9409-155">\[[**à**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-155">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="a9409-156">Non légal ; Erreur du compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="a9409-156">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                                                                         | <span data-ttu-id="a9409-157">Non légal ; Erreur du compilateur MIDL.</span><span class="sxs-lookup"><span data-stu-id="a9409-157">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="a9409-158">\[[**in**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-158">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="a9409-159">\[[**in**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="a9409-159">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="a9409-160">Transmettez la longueur et le nombre d’éléments indiqués par le paramètre.</span><span class="sxs-lookup"><span data-stu-id="a9409-160">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                                                                              | <span data-ttu-id="a9409-161">Transmettez la longueur et le nombre d’éléments indiqués par le paramètre.</span><span class="sxs-lookup"><span data-stu-id="a9409-161">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                           |



 

<span data-ttu-id="a9409-162">En général, vous ne devez pas modifier les paramètres de longueur ou de taille côté serveur.</span><span class="sxs-lookup"><span data-stu-id="a9409-162">In general, you should not modify the length or size parameters on the server side.</span></span> <span data-ttu-id="a9409-163">Si vous modifiez le paramètre de longueur, vous pouvez disposer de mémoire orpheline.</span><span class="sxs-lookup"><span data-stu-id="a9409-163">If you change the length parameter, you can orphan memory.</span></span> <span data-ttu-id="a9409-164">Pour plus d’informations, consultez [orphelins de mémoire](memory-orphaning.md).</span><span class="sxs-lookup"><span data-stu-id="a9409-164">For more information, see [Memory Orphaning](memory-orphaning.md).</span></span>

 

