---
title: Trois types pointeur
description: MIDL prend en charge trois types de pointeurs pour s’adapter à un large éventail d’applications.
ms.assetid: 6684c252-6fbe-49ca-9967-6d4baf5dc298
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: efdcc9548568c8fca24d8abb40bf0eaa8b6e7da3
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103941034"
---
# <a name="three-pointer-types"></a><span data-ttu-id="de5c2-103">Trois types pointeur</span><span class="sxs-lookup"><span data-stu-id="de5c2-103">Three Pointer Types</span></span>

<span data-ttu-id="de5c2-104">MIDL prend en charge trois types de pointeurs pour s’adapter à un large éventail d’applications.</span><span class="sxs-lookup"><span data-stu-id="de5c2-104">MIDL supports three types of pointers to accommodate a wide range of applications.</span></span> <span data-ttu-id="de5c2-105">Les trois niveaux différents sont appelés références, uniques et pointeurs complets, et sont indiqués par les attributs **\[** [**ref**](/windows/desktop/Midl/ref) **\]** , **\[** [**unique**](/windows/desktop/Midl/unique) **\]** et **\[** [**ptr**](/windows/desktop/Midl/ptr) **\]** , respectivement.</span><span class="sxs-lookup"><span data-stu-id="de5c2-105">The three different levels are called reference, unique, and full pointers, and are indicated by the attributes **\[**[**ref**](/windows/desktop/Midl/ref)**\]**, **\[**[**unique**](/windows/desktop/Midl/unique)**\]**, and **\[**[**ptr**](/windows/desktop/Midl/ptr)**\]**, respectively.</span></span> <span data-ttu-id="de5c2-106">Les classes de pointeur décrites par ces attributs s’excluent mutuellement.</span><span class="sxs-lookup"><span data-stu-id="de5c2-106">The pointer classes described by these attributes are mutually exclusive.</span></span> <span data-ttu-id="de5c2-107">Les attributs de pointeur peuvent être appliqués aux pointeurs dans les définitions de type, les types de retour de fonction, les paramètres de fonction, les membres de structures ou d’unions, ou les éléments de tableau.</span><span class="sxs-lookup"><span data-stu-id="de5c2-107">Pointer attributes can be applied to pointers in type definitions, function return types, function parameters, members of structures or unions, or array elements.</span></span>

<span data-ttu-id="de5c2-108">Les pointeurs incorporés sont des pointeurs qui sont membres de structures ou d’unions.</span><span class="sxs-lookup"><span data-stu-id="de5c2-108">Embedded pointers are pointers that are members of structures or unions.</span></span> <span data-ttu-id="de5c2-109">Ils peuvent également être des éléments de tableaux.</span><span class="sxs-lookup"><span data-stu-id="de5c2-109">They can also be elements of arrays.</span></span> <span data-ttu-id="de5c2-110">Dans le **\[** [](/windows/desktop/Midl/in) **\]** sens, les pointeurs **\[ Ref \]** incorporés sont supposés pointer vers un stockage valide et ne doivent pas avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="de5c2-110">In the **\[**[**in**](/windows/desktop/Midl/in)**\]** direction, embedded **\[ref\]** pointers are assumed to be pointing to valid storage and must not be null.</span></span> <span data-ttu-id="de5c2-111">Cette situation s’applique de manière récursive à tous les pointeurs de **\[ référence \]** auxquels elles pointent.</span><span class="sxs-lookup"><span data-stu-id="de5c2-111">This situation is recursively applicable to any **\[ref\]** pointers they are pointing to.</span></span> <span data-ttu-id="de5c2-112">Dans le **\[ sens \]** , les pointeurs **\[ uniques \]** et complets incorporés (pointeurs avec l’attribut **\[ ptr \]** ) peuvent ou ne peuvent pas être null.</span><span class="sxs-lookup"><span data-stu-id="de5c2-112">In the **\[in\]** direction, embedded **\[unique\]** and full pointers (pointers with the **\[ptr\]** attribute) may or may not be null.</span></span>

<span data-ttu-id="de5c2-113">Tout attribut de pointeur placé sur un paramètre dans la syntaxe d’une déclaration de fonction affecte uniquement le déclarateur de pointeur le plus à droite pour ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="de5c2-113">Any pointer attribute placed on a parameter in the syntax of a function declaration affects only the rightmost pointer declarator for that parameter.</span></span> <span data-ttu-id="de5c2-114">Pour affecter d’autres déclarateurs de pointeur, les types nommés intermédiaires doivent être utilisés.</span><span class="sxs-lookup"><span data-stu-id="de5c2-114">To affect other pointer declarators, intermediate named types must be used.</span></span>

<span data-ttu-id="de5c2-115">Les fonctions qui retournent un pointeur peuvent avoir un attribut de pointeur comme attribut de fonction.</span><span class="sxs-lookup"><span data-stu-id="de5c2-115">Functions that return a pointer can have a pointer attribute as a function attribute.</span></span> <span data-ttu-id="de5c2-116">Les attributs **\[ unique \]** et **\[ ptr \]** doivent être appliqués aux types de retour de fonction.</span><span class="sxs-lookup"><span data-stu-id="de5c2-116">The **\[unique\]** and **\[ptr\]** attributes must be applied to function return types.</span></span> <span data-ttu-id="de5c2-117">Les déclarations de membres qui sont des pointeurs peuvent spécifier un attribut de pointeur comme attribut de champ.</span><span class="sxs-lookup"><span data-stu-id="de5c2-117">Member declarations that are pointers can specify a pointer attribute as a field attribute.</span></span> <span data-ttu-id="de5c2-118">Un attribut de pointeur peut également être appliqué en tant qu’attribut de type dans les constructions [**typedef**](/windows/desktop/Midl/typedef) .</span><span class="sxs-lookup"><span data-stu-id="de5c2-118">A pointer attribute can also be applied as a type attribute in [**typedef**](/windows/desktop/Midl/typedef) constructs.</span></span>

<span data-ttu-id="de5c2-119">Quand aucun attribut de pointeur n’est spécifié en tant qu’attribut de champ ou de type, les attributs de pointeur sont appliqués selon les règles d’une déclaration de pointeur non attribute comme suit.</span><span class="sxs-lookup"><span data-stu-id="de5c2-119">When no pointer attribute is specified as a field or type attribute, pointer attributes are applied according to the rules for an unattributed pointer declaration as follows.</span></span>

<span data-ttu-id="de5c2-120">Dans le mode de compatibilité DCE, les attributs de pointeur sont déterminés dans le fichier IDL de définition.</span><span class="sxs-lookup"><span data-stu-id="de5c2-120">In DCE-compatibility mode, pointer attributes are determined in the defining IDL file.</span></span> <span data-ttu-id="de5c2-121">Si un **\[** attribut de [**pointeur \_ par défaut**](/windows/desktop/Midl/pointer-default)est **\]** spécifié dans l’interface de définition, cet attribut est utilisé.</span><span class="sxs-lookup"><span data-stu-id="de5c2-121">If there is a **\[**[**pointer\_default**](/windows/desktop/Midl/pointer-default)**\]** attribute specified in the defining interface, that attribute is used.</span></span> <span data-ttu-id="de5c2-122">Si aucun attribut **\[ \_ par \] défaut de pointeur** n’est présent, tous les pointeurs non-attributs sont des pointeurs complets.</span><span class="sxs-lookup"><span data-stu-id="de5c2-122">If no **\[pointer\_default\]** attribute is present, all unattributed pointers are full pointers.</span></span>

<span data-ttu-id="de5c2-123">En mode extensions Microsoft, les attributs de pointeur peuvent être déterminés en important des fichiers IDL et sont appliqués dans l’ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="de5c2-123">In Microsoft-extensions mode, pointer attributes can be determined by importing IDL files and are applied in the following order:</span></span>

1.  <span data-ttu-id="de5c2-124">Attribut de pointeur explicite appliqué au site d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="de5c2-124">An explicit pointer attribute applied at the use site.</span></span>
2.  <span data-ttu-id="de5c2-125">Attribut **\[ Ref \]** , lorsque le pointeur sans attribut est un paramètre de pointeur de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="de5c2-125">The **\[ref\]** attribute, when the unattributed pointer is a top-level pointer parameter.</span></span>
3.  <span data-ttu-id="de5c2-126">Attribut **\[ \_ par défaut \] de pointeur** spécifié dans l’interface de définition.</span><span class="sxs-lookup"><span data-stu-id="de5c2-126">A **\[pointer\_default\]** attribute specified in the defining interface.</span></span>
4.  <span data-ttu-id="de5c2-127">Attribut **\[ \_ par défaut \] du pointeur** spécifié dans l’interface de base.</span><span class="sxs-lookup"><span data-stu-id="de5c2-127">A **\[pointer\_default\]** attribute specified in the base interface.</span></span>
5.  <span data-ttu-id="de5c2-128">Attribut **\[ unique \]** .</span><span class="sxs-lookup"><span data-stu-id="de5c2-128">The **\[unique\]** attribute.</span></span>

<span data-ttu-id="de5c2-129">L' **\[** attribut d’interface [**\_ par défaut du pointeur**](/windows/desktop/Midl/pointer-default) **\]** spécifie les attributs de pointeur par défaut à appliquer à un déclarateur de pointeur dans un type, un paramètre ou une déclaration de type de retour lorsque cette déclaration n’a pas d’attribut de pointeur explicite appliqué.</span><span class="sxs-lookup"><span data-stu-id="de5c2-129">The **\[**[**pointer\_default**](/windows/desktop/Midl/pointer-default)**\]** interface attribute specifies the default pointer attributes to be applied to a pointer declarator in a type, parameter, or return type declaration when that declaration does not have an explicit pointer attribute applied to it.</span></span> <span data-ttu-id="de5c2-130">L’attribut d’interface **\[ \_ par défaut \] du pointeur** ne s’applique pas à un pointeur de niveau supérieur non attribut d’un paramètre, qui est supposé être **\[ Ref \]**.</span><span class="sxs-lookup"><span data-stu-id="de5c2-130">The **\[pointer\_default\]** interface attribute does not apply to an unattributed top-level pointer of a parameter, which is assumed to be **\[ref\]**.</span></span>

 

 