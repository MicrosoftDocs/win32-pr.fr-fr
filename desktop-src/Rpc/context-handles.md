---
title: Handles de contexte
description: Il arrive parfois que les applications distribuées requièrent que le programme serveur gère les informations d’État entre les appels des clients.
ms.assetid: 91732a75-0a3a-44bd-9db9-c11be6fd2d70
keywords:
- Appel de procédure distante RPC, décrit, handles de contexte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8ff36ff8f1a36843293060e091b7eecee0d8666
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "106511216"
---
# <a name="context-handles"></a><span data-ttu-id="cf9d4-104">Handles de contexte</span><span class="sxs-lookup"><span data-stu-id="cf9d4-104">Context Handles</span></span>

<span data-ttu-id="cf9d4-105">Il arrive parfois que les applications distribuées requièrent que le programme serveur gère les informations d’État entre les appels des clients.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-105">It is sometimes the case that distributed applications require the server program to maintain status information between client calls.</span></span> <span data-ttu-id="cf9d4-106">Les programmes serveur qui desservent plusieurs clients à la fois doivent conserver les informations d’état de chaque client.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-106">Server programs that service more than one client at a time must keep the state information for each client.</span></span> <span data-ttu-id="cf9d4-107">Étant donné que le client et le serveur utilisent des espaces d’adressage différents sur des ordinateurs différents et qu’ils ne s’approuvent pas nécessairement l’un l’autre, les approches courantes du partage de données ne fonctionnent pas souvent.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-107">Because the client and the server use different address spaces on different computers, and they do not necessarily trust each other, common approaches to data sharing often do not work.</span></span> <span data-ttu-id="cf9d4-108">Par exemple, le client et le serveur ne peuvent pas conserver les informations d’État sur leur session à distance dans les variables globales, car ils ne partagent pas le même espace d’adressage global.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-108">For instance, the client and server are unable to maintain status information on their remote session in global variables because they do not share the same global address space.</span></span> <span data-ttu-id="cf9d4-109">Il est difficile de conserver les informations dans un fichier partagé, car elles s’exécutent sur des ordinateurs différents.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-109">It is difficult to keep the information in a shared file because they run on different computers.</span></span> <span data-ttu-id="cf9d4-110">Une approche simpliste peut consister à expédier tout l’État au client et à faire en sorte que le client le retourne lors de l’appel suivant, mais cette approche présente des défauts : le serveur n’approuve pas nécessairement le client pour retourner l’état correct, et l’État peut être implicitement lié à un autre État sur le serveur, tel que des handles de fichiers ou des sockets ouverts</span><span class="sxs-lookup"><span data-stu-id="cf9d4-110">A simplistic approach may be to ship all state to the client and have the client return it on the next call, but this approach has flaws: the server does not necessarily trust the client to return the right state, and the state may be implicitly tied to some other state on the server, such as file handles or opened sockets.</span></span>

<span data-ttu-id="cf9d4-111">Microsoft RPC fournit un mécanisme puissant et sécurisé appelé descripteurs de contexte pour conserver l’état associé à un client donné sur un serveur.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-111">Microsoft RPC provides a powerful and secure mechanism called context handles for keeping state associated with a given client on a server.</span></span> <span data-ttu-id="cf9d4-112">Les informations d’État sont appelées le contexte du serveur.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-112">The state information is called the server's context.</span></span> <span data-ttu-id="cf9d4-113">Les clients peuvent obtenir un handle de contexte pour identifier le contexte du serveur pour leurs sessions RPC individuelles.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-113">Clients can obtain a context handle to identify the server's context for their individual RPC sessions.</span></span>

<span data-ttu-id="cf9d4-114">Par exemple, chaque client dans une application distribuée peut faire en sorte que le programme serveur crée et met à jour un fichier de données pour sa session RPC.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-114">As an example, each client in a distributed application can have the server program create and update a data file for their RPC session.</span></span> <span data-ttu-id="cf9d4-115">Le serveur peut utiliser son descripteur de fichier pour le fichier de données de chaque client comme handle de contexte.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-115">The server can use its file handle for each client's data file as the context handle.</span></span> <span data-ttu-id="cf9d4-116">Chaque fois qu’un client demande des opérations sur le fichier de données que le serveur crée pour celui-ci, le client passe le descripteur de contexte au serveur.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-116">Each time a client requests operations on the data file that the server creates for it, the client passes the context handle to the server.</span></span> <span data-ttu-id="cf9d4-117">Le client n’obtient pas réellement le descripteur de fichier lui-même ; elle obtient un jeton opaque que l’heure d’exécution RPC du serveur peut associer de manière unique au descripteur de fichier.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-117">The client does not actually get the file handle itself; it gets an opaque token that the server RPC run time can uniquely associate with the file handle.</span></span> <span data-ttu-id="cf9d4-118">Étant donné que le descripteur de contexte est véritablement un descripteur de fichier, le handle de contexte n’est utile que dans l’espace d’adressage du serveur.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-118">Since the context handle is really a file handle, the context handle only makes sense in the server's address space.</span></span> <span data-ttu-id="cf9d4-119">Toutefois, le programme client peut utiliser le handle de contexte pour indiquer au serveur sur quel fichier effectuer les mises à jour.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-119">However, the client program can use the context handle to tell the server on which file to perform updates.</span></span>

<span data-ttu-id="cf9d4-120">D’autres données peuvent également être des handles de contexte.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-120">Other data can also be context handles.</span></span> <span data-ttu-id="cf9d4-121">Par exemple, un client et un serveur peuvent utiliser un numéro d’enregistrement d’un enregistrement de base de données comme descripteur de fichier.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-121">For instance, a client and server can use a record number of a database record as a file handle.</span></span> <span data-ttu-id="cf9d4-122">Si le client a besoin d’effectuer un certain nombre de mises à jour sur un enregistrement particulier, il peut obtenir le numéro d’enregistrement en tant que descripteur de contexte.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-122">If the client needed to perform a number of updates on a particular record, it could obtain the record number as a context handle.</span></span> <span data-ttu-id="cf9d4-123">Elle transmet le numéro d’enregistrement au serveur chaque fois qu’elle appelle une procédure distante pour mettre à jour l’enregistrement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-123">It would pass the record number to the server each time it invoked a remote procedure to update the database record.</span></span>

<span data-ttu-id="cf9d4-124">Le plus souvent, un handle de contexte pointe vers un bloc de mémoire sur le serveur sur lequel le serveur conserve diverses informations de gestion.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-124">Most often a context handle points to a block of memory on the server where the server keeps various management information.</span></span>

<span data-ttu-id="cf9d4-125">Cette section présente des informations sur la définition et l’utilisation des handles de contexte.</span><span class="sxs-lookup"><span data-stu-id="cf9d4-125">This section presents information on defining and using context handles.</span></span> <span data-ttu-id="cf9d4-126">La discussion est présentée dans les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="cf9d4-126">The discussion is presented in the following topics:</span></span>

-   [<span data-ttu-id="cf9d4-127">Développement d’interface à l’aide de handles de contexte</span><span class="sxs-lookup"><span data-stu-id="cf9d4-127">Interface Development Using Context Handles</span></span>](interface-development-using-context-handles.md)
-   [<span data-ttu-id="cf9d4-128">Développement de serveurs à l’aide de handles de contexte</span><span class="sxs-lookup"><span data-stu-id="cf9d4-128">Server Development Using Context Handles</span></span>](server-development-using-context-handles.md)
-   [<span data-ttu-id="cf9d4-129">Développement de clients à l’aide de handles de contexte</span><span class="sxs-lookup"><span data-stu-id="cf9d4-129">Client Development Using Context Handles</span></span>](client-development-using-context-handles.md)
-   [<span data-ttu-id="cf9d4-130">Routine d’exécution du contexte de serveur</span><span class="sxs-lookup"><span data-stu-id="cf9d4-130">Server Context Run-down Routine</span></span>](server-context-run-down-routine.md)
-   [<span data-ttu-id="cf9d4-131">Réinitialisation du contexte client</span><span class="sxs-lookup"><span data-stu-id="cf9d4-131">Client Context Reset</span></span>](client-context-reset.md)
-   [<span data-ttu-id="cf9d4-132">Clients multithread et handles de contexte</span><span class="sxs-lookup"><span data-stu-id="cf9d4-132">Multithreaded Clients and Context Handles</span></span>](multithreaded-clients-and-context-handles.md)

 

 




