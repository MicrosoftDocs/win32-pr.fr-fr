---
title: Recherche de points de terminaison
description: Les programmes serveur écoutent les points de terminaison pour les demandes des clients. La syntaxe de la chaîne de point de terminaison dépend de la séquence de protocole que vous utilisez. Par exemple, le point de terminaison pour TCP/IP est un numéro de port, et la syntaxe du point de terminaison pour les canaux nommés est un nom de canal valide.
ms.assetid: 330bbe9f-b7e9-4a5b-86d8-824edec960d2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bb0a97df3408a4d3c24dff9de28553f9e4b2210d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104315366"
---
# <a name="finding-endpoints"></a><span data-ttu-id="e9598-105">Recherche de points de terminaison</span><span class="sxs-lookup"><span data-stu-id="e9598-105">Finding Endpoints</span></span>

<span data-ttu-id="e9598-106">Les programmes serveur écoutent les points de terminaison pour les demandes des clients.</span><span class="sxs-lookup"><span data-stu-id="e9598-106">Server programs listen to endpoints for client requests.</span></span> <span data-ttu-id="e9598-107">La syntaxe de la chaîne de point de terminaison dépend de la séquence de protocole que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="e9598-107">The syntax of the endpoint string depends on the protocol sequence you use.</span></span> <span data-ttu-id="e9598-108">Par exemple, le point de terminaison pour TCP/IP est un numéro de port, et la syntaxe du point de terminaison pour les canaux nommés est un nom de canal valide.</span><span class="sxs-lookup"><span data-stu-id="e9598-108">For example, the endpoint for TCP/IP is a port number, and the endpoint syntax for named pipes is a valid pipe name.</span></span>

<span data-ttu-id="e9598-109">Il existe deux types de points de terminaison : bien connus et dynamiques.</span><span class="sxs-lookup"><span data-stu-id="e9598-109">There are two types of endpoints: well-known and dynamic.</span></span> <span data-ttu-id="e9598-110">Le choix du type de point de terminaison que votre programme utilise détermine si l’application distribuée ou la bibliothèque Runtime spécifie le point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="e9598-110">Your choice of which type of endpoint your program uses determines whether the distributed application or the run-time library specifies the endpoint.</span></span>

<span data-ttu-id="e9598-111">Cette section traite des points de terminaison et présente des informations sur la façon de les trouver.</span><span class="sxs-lookup"><span data-stu-id="e9598-111">This section discusses endpoints and presents information on how to find them.</span></span> <span data-ttu-id="e9598-112">Elle est organisée dans les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="e9598-112">It is organized into the following topics:</span></span>

-   [<span data-ttu-id="e9598-113">Utilisation de points de terminaison de Well-Known</span><span class="sxs-lookup"><span data-stu-id="e9598-113">Using Well-Known Endpoints</span></span>](#using-well-known-endpoints)
-   [<span data-ttu-id="e9598-114">Utilisation de points de terminaison dynamiques</span><span class="sxs-lookup"><span data-stu-id="e9598-114">Using Dynamic Endpoints</span></span>](#using-dynamic-endpoints)
-   [<span data-ttu-id="e9598-115">Exportation des points de terminaison Well-Known dans la base de données de mappage des points de terminaison</span><span class="sxs-lookup"><span data-stu-id="e9598-115">Exporting Well-Known Endpoints Into the Endpoint Map Database</span></span>](#exporting-well-known-endpoints-into-the-endpoint-map-database)

> [!Note]  
> <span data-ttu-id="e9598-116">Les termes *statiques des points de terminaison* et des *points de terminaison connus* sont équivalents et utilisés indifféremment.</span><span class="sxs-lookup"><span data-stu-id="e9598-116">The terms *static endpoints* and *well-known endpoints* are equivalent, and used interchangeably.</span></span>

 

<span data-ttu-id="e9598-117">Il est possible que votre application cliente utilise le mappage de point de terminaison pour déterminer si un programme serveur est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="e9598-117">It is possible for your client application to use the endpoint map to determine whether or not a server program is currently running.</span></span> <span data-ttu-id="e9598-118">Votre client peut appeler [**RpcMgmtInqIfIds**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqifids), [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin)et [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) pour voir si le serveur a inscrit l’interface particulière dont il a besoin dans le mappage de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="e9598-118">Your client can call [**RpcMgmtInqIfIds**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqifids), [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), and [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) to see if the server has registered the particular interface it requires in the endpoint map.</span></span>

## <a name="using-well-known-endpoints"></a><span data-ttu-id="e9598-119">Utilisation de points de terminaison connus</span><span class="sxs-lookup"><span data-stu-id="e9598-119">Using Well-known Endpoints</span></span>

<span data-ttu-id="e9598-120">Les points de terminaison connus sont des points de terminaison préattribués que le programme serveur utilise chaque fois qu’il s’exécute.</span><span class="sxs-lookup"><span data-stu-id="e9598-120">Well-known endpoints are pre-assigned endpoints that the server program uses every time it runs.</span></span> <span data-ttu-id="e9598-121">Étant donné que le serveur écoute toujours ce point de terminaison particulier, le client tente toujours de s’y connecter.</span><span class="sxs-lookup"><span data-stu-id="e9598-121">Because the server always listens to that particular endpoint, the client always attempts to connect to it.</span></span> <span data-ttu-id="e9598-122">Les points de terminaison connus sont généralement affectés par l’autorité responsable du protocole de transport.</span><span class="sxs-lookup"><span data-stu-id="e9598-122">Well-known endpoints are usually assigned by the authority responsible for the transport protocol.</span></span> <span data-ttu-id="e9598-123">Étant donné que les ordinateurs hôtes du serveur ont un nombre fini de points de terminaison disponibles, les développeurs d’applications sont fortement déconseillés d’utiliser des points de terminaison connus.</span><span class="sxs-lookup"><span data-stu-id="e9598-123">Because server host computers have a finite number of available endpoints, application developers are strongly discouraged from using well-known endpoints.</span></span> <span data-ttu-id="e9598-124">Un autre avantage des points de terminaison dynamiques est qu’ils simplifient la gestion et la maintenance à long terme du système.</span><span class="sxs-lookup"><span data-stu-id="e9598-124">Another advantage of dynamic endpoints is that they simplify long-term management and maintenance of the system.</span></span>

<span data-ttu-id="e9598-125">Une application distribuée peut spécifier un point de terminaison connu dans une chaîne et la passer en tant que paramètre à la fonction [**RpcServerUseProtseqEp**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep).</span><span class="sxs-lookup"><span data-stu-id="e9598-125">A distributed application can specify a well-known endpoint in a string and pass that string as a parameter to the function [**RpcServerUseProtseqEp**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep).</span></span> <span data-ttu-id="e9598-126">La chaîne de point de terminaison peut également apparaître dans l’en-tête d’interface de fichier IDL dans le cadre de l’attribut d’interface de \[ [point de terminaison](/windows/desktop/Midl/endpoint) \] .</span><span class="sxs-lookup"><span data-stu-id="e9598-126">Alternatively, the endpoint string can appear in the IDL file interface header as part of the \[ [endpoint](/windows/desktop/Midl/endpoint)\] interface attribute.</span></span>

<span data-ttu-id="e9598-127">Vous pouvez utiliser deux approches pour implémenter le point de terminaison connu :</span><span class="sxs-lookup"><span data-stu-id="e9598-127">You can use two approaches to implement the well-known endpoint:</span></span>

-   <span data-ttu-id="e9598-128">Spécifier toutes les informations dans une liaison de chaîne</span><span class="sxs-lookup"><span data-stu-id="e9598-128">Specify all information in a string binding</span></span>
-   <span data-ttu-id="e9598-129">Stocker le point de terminaison connu dans la base de données de service de noms</span><span class="sxs-lookup"><span data-stu-id="e9598-129">Store the well-known endpoint in the name service database</span></span>

<span data-ttu-id="e9598-130">Vous pouvez écrire toutes les informations nécessaires pour établir une liaison dans une application distribuée lorsque vous la développez.</span><span class="sxs-lookup"><span data-stu-id="e9598-130">You can write all of the information needed to establish a binding into a distributed application when you develop it.</span></span> <span data-ttu-id="e9598-131">Le client peut spécifier le point de terminaison connu directement dans une chaîne, appeler [**RpcStringBindingCompose**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringbindingcompose) pour créer une chaîne qui contient toutes les informations de liaison et fournir cette chaîne à la fonction [**RpcBindingFromStringBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding) pour obtenir un handle.</span><span class="sxs-lookup"><span data-stu-id="e9598-131">The client can specify the well-known endpoint directly in a string, call [**RpcStringBindingCompose**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringbindingcompose) to create a string that contains all the binding information, and supply this string to the function [**RpcBindingFromStringBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding) to obtain a handle.</span></span> <span data-ttu-id="e9598-132">Le client et le serveur peuvent être codés en dur pour utiliser un point de terminaison connu ou écrits afin que les informations de point de terminaison proviennent de la ligne de commande, d’un fichier de données, d’un fichier de configuration ou du fichier IDL.</span><span class="sxs-lookup"><span data-stu-id="e9598-132">The client and server can be hard-coded to use a well-known endpoint, or written so that the endpoint information comes from the command line, a data file, a configuration file, or the IDL file.</span></span>

<span data-ttu-id="e9598-133">Votre application cliente peut également interroger une base de données de service de noms pour obtenir des informations de point de terminaison bien connues.</span><span class="sxs-lookup"><span data-stu-id="e9598-133">Your client application can also query a name service database for well-known endpoint information.</span></span>

## <a name="using-dynamic-endpoints"></a><span data-ttu-id="e9598-134">Utilisation de points de terminaison dynamiques</span><span class="sxs-lookup"><span data-stu-id="e9598-134">Using Dynamic Endpoints</span></span>

<span data-ttu-id="e9598-135">Le nombre de points de terminaison pour un serveur particulier et une séquence de protocole particulière sont généralement limités.</span><span class="sxs-lookup"><span data-stu-id="e9598-135">The number of endpoints for a particular server and a particular protocol sequence are usually limited.</span></span> <span data-ttu-id="e9598-136">Par exemple, lorsque vous utilisez la séquence de protocole [ \_ \_ TCP IP ncacn](/windows/desktop/Midl/ncacn-ip-tcp) , qui indique que la communication réseau RPC se produit à l’aide de TCP/IP, seul un nombre limité de ports sont disponibles (la plupart des systèmes ont uniquement les plages 1025 à 5000 ouvertes).</span><span class="sxs-lookup"><span data-stu-id="e9598-136">For example, when you use the [ncacn\_ip\_tcp](/windows/desktop/Midl/ncacn-ip-tcp) protocol sequence, indicating that RPC network communication occurs using TCP/IP, only a limited number of ports are available (most systems have only the range 1025 through 5000 opened).</span></span> <span data-ttu-id="e9598-137">Les bibliothèques Runtime RPC vous permettent d’assigner des points de terminaison de manière dynamique, selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="e9598-137">The RPC run-time libraries allow you to assign endpoints dynamically, as needed.</span></span> <span data-ttu-id="e9598-138">Étant donné que le nombre d’UUID d’interface possibles est pratiquement illimité, l’utilisation de l’UUID d’interface pour diriger l’appel offre davantage d’espace pour l’extension et davantage de flexibilité.</span><span class="sxs-lookup"><span data-stu-id="e9598-138">Since the number of possible interface UUIDs is practically unlimited, using the interface UUID to direct the call offers more room for expansion and more flexibility.</span></span>

<span data-ttu-id="e9598-139">Par défaut, les fonctions de la bibliothèque Runtime RPC recherchent les informations de point de terminaison lorsqu’elles interrogent une base de données de service de noms.</span><span class="sxs-lookup"><span data-stu-id="e9598-139">By default, the RPC run-time library functions search for endpoint information when they query a name service database.</span></span> <span data-ttu-id="e9598-140">Si le point de terminaison est dynamique, la base de données du service de noms ne contient pas d’informations de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="e9598-140">If the endpoint is dynamic, the name service database will not contain endpoint information.</span></span> <span data-ttu-id="e9598-141">Toutefois, la requête donnera au programme client le nom d’un serveur.</span><span class="sxs-lookup"><span data-stu-id="e9598-141">However, the query will give your client program the name of a server.</span></span> <span data-ttu-id="e9598-142">Il peut ensuite rechercher le mappage du point de terminaison du serveur.</span><span class="sxs-lookup"><span data-stu-id="e9598-142">It can then search the server's endpoint map.</span></span>

<span data-ttu-id="e9598-143">Si le client doit effectuer un appel de procédure distante à l’aide d’un point de terminaison dynamique, la méthode recommandée consiste à effectuer l’appel sur un handle de liaison partiellement lié.</span><span class="sxs-lookup"><span data-stu-id="e9598-143">If the client needs to make a remote procedure call using a dynamic endpoint, the preferred method is to make the call on a partially bound binding handle.</span></span> <span data-ttu-id="e9598-144">Le temps d’exécution RPC résout le point de terminaison en toute transparence.</span><span class="sxs-lookup"><span data-stu-id="e9598-144">The RPC run time resolves the endpoint transparently.</span></span> <span data-ttu-id="e9598-145">Cette méthode est supérieure à l’utilisation de la fonction [**RpcEpResolveBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepresolvebinding) , car elle permet des mécanismes de mise en cache avancés dans le temps d’exécution RPC.</span><span class="sxs-lookup"><span data-stu-id="e9598-145">This method is superior to using the [**RpcEpResolveBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepresolvebinding) function, as it allows advanced caching mechanisms in the RPC run time.</span></span>

<span data-ttu-id="e9598-146">Si un contrôle plus spécifique sur la sélection du point de terminaison est requis, les clients peuvent rechercher une entrée à la fois dans le mappage de point de terminaison en appelant les fonctions [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), [**RpcMgmtEpEltInqNext**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqnext)et [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) .</span><span class="sxs-lookup"><span data-stu-id="e9598-146">If more specific control over endpoint selection is required, clients can search the endpoint map one entry at a time by calling the [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), [**RpcMgmtEpEltInqNext**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqnext), and [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) functions.</span></span>

## <a name="exporting-well-known-endpoints-into-the-endpoint-map-database"></a><span data-ttu-id="e9598-147">Exportation des points de terminaison connus dans la base de données de mappage des points de terminaison</span><span class="sxs-lookup"><span data-stu-id="e9598-147">Exporting Well-known Endpoints into the Endpoint Map Database</span></span>

<span data-ttu-id="e9598-148">Il est possible de mélanger les deux approches de recherche des points de terminaison, en particulier lorsqu’un système distribué passe d’un modèle de point de terminaison connu à un modèle de point de terminaison dynamique.</span><span class="sxs-lookup"><span data-stu-id="e9598-148">It is possible to mix the two approaches to finding endpoints, especially when a distributed system is transitioning from a well-known endpoint model to a dynamic endpoint model.</span></span> <span data-ttu-id="e9598-149">Dans ces transitions, une version intermédiaire du serveur utilisera un point de terminaison connu, mais elle inscrira également le point de terminaison connu avec la base de données de mappage des points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="e9598-149">In such transitions, an intermediate version of the server will use a well-known endpoint, but it will also register the well-known endpoint with the endpoint map database.</span></span> <span data-ttu-id="e9598-150">Cette approche permet aux clients qui utilisent un point de terminaison et des clients qui utilisent un point de terminaison dynamique de se connecter.</span><span class="sxs-lookup"><span data-stu-id="e9598-150">This approach allows clients that use well known endpoint and clients that use a dynamic endpoint to connect.</span></span> <span data-ttu-id="e9598-151">Une fois que tous les serveurs ont été mis à niveau, vous pouvez déployer une nouvelle version du client qui utilise uniquement des points de terminaison dynamiques.</span><span class="sxs-lookup"><span data-stu-id="e9598-151">Once all servers are upgraded, a new client version can be deployed that uses dynamic endpoints only.</span></span> <span data-ttu-id="e9598-152">Une fois que tous les clients ont été mis à niveau, une version de serveur finale peut cesser d’utiliser des points de terminaison connus et commencer à utiliser uniquement des points de terminaison dynamiques.</span><span class="sxs-lookup"><span data-stu-id="e9598-152">Once all clients are upgraded, a final server version can stop using well-known endpoints and begin using dynamic endpoints only.</span></span>

<span data-ttu-id="e9598-153">Cette approche permet un chemin de transition pour les applications qui ont démarré avec un point de terminaison connu, mais souhaitent migrer vers un point de terminaison dynamique sans nécessiter une mise à jour simultanée de tous les serveurs et clients.</span><span class="sxs-lookup"><span data-stu-id="e9598-153">This approach allows a transition path for applications that have started with a well-known endpoint but want to migrate to a dynamic endpoint without requiring a simultaneous update of all servers and clients.</span></span>

 

 