---
title: Bluetooth et WSALookupServiceBegin pour la détection de service
description: Pour découvrir l’existence d’un service particulier sur un serveur Bluetooth, les clients utilisent les fonctions WSALookupServiceBegin, WSALookupServiceNext et WSALookupServiceEnd.
ms.assetid: d9961600-cdca-42ec-92eb-118b8186ed2e
keywords:
- Bluetooth et WSALookupServiceBegin pour la détection de service Bluetooth
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 274b3beb3de7683bd43a0f99350db6e1a347f51e
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/08/2020
ms.locfileid: "103842834"
---
# <a name="bluetooth-and-wsalookupservicebegin-for-service-discovery"></a><span data-ttu-id="aabca-104">Bluetooth et WSALookupServiceBegin pour la détection de service</span><span class="sxs-lookup"><span data-stu-id="aabca-104">Bluetooth and WSALookupServiceBegin for Service Discovery</span></span>

<span data-ttu-id="aabca-105">Pour découvrir l’existence d’un service particulier sur un serveur Bluetooth, les clients utilisent les fonctions [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)et [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="aabca-105">To discover the existence of a particular service on a Bluetooth server, clients use the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta), and [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) functions.</span></span> <span data-ttu-id="aabca-106">Les requêtes peuvent être exécutées pour des adresses locales et distantes, mais les connexions peuvent uniquement être établies avec des adresses distantes.</span><span class="sxs-lookup"><span data-stu-id="aabca-106">Queries can be performed for local and remote addresses, but connections can only be established with remote addresses.</span></span> <span data-ttu-id="aabca-107">Les descripteurs de service découverts pendant cette opération ne peuvent pas être utilisés pour supprimer le service via [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span><span class="sxs-lookup"><span data-stu-id="aabca-107">Service handles discovered during this operation cannot be used to delete the service via [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span></span> <span data-ttu-id="aabca-108">Le bouclage n’est pas pris en charge par RFCOMM.</span><span class="sxs-lookup"><span data-stu-id="aabca-108">Loopback is not supported by RFCOMM.</span></span>

<span data-ttu-id="aabca-109">Deux types de requêtes de découverte de service de base peuvent être exécutés :</span><span class="sxs-lookup"><span data-stu-id="aabca-109">Two basic types of service discovery queries can be performed:</span></span>

-   <span data-ttu-id="aabca-110">Requêtes pour un ou plusieurs services sur l’appareil local</span><span class="sxs-lookup"><span data-stu-id="aabca-110">Queries for one or more services on the local device</span></span>
-   <span data-ttu-id="aabca-111">Requêtes pour un ou plusieurs services sur un appareil homologue spécifié</span><span class="sxs-lookup"><span data-stu-id="aabca-111">Queries for one or more services on a specified peer device</span></span>

<span data-ttu-id="aabca-112">La fonction [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) reçoit une structure [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) dans son paramètre *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="aabca-112">The [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function receives a [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure in its *lpqsRestrictions* parameter.</span></span> <span data-ttu-id="aabca-113">**WSALookupServiceBegin** exécute une requête cliente en fonction de l’ensemble des restrictions de recherche contenues dans le **WSAQUERYSET** .</span><span class="sxs-lookup"><span data-stu-id="aabca-113">**WSALookupServiceBegin** performs a client query based on the set of search restrictions that the **WSAQUERYSET** contains.</span></span> <span data-ttu-id="aabca-114">Les clients Bluetooth doivent spécifier les restrictions, listées dans le tableau suivant, dans la structure **WSAQUERYSET** lors de l’utilisation de la fonction **WSALookupServiceBegin** pour rechercher des services.</span><span class="sxs-lookup"><span data-stu-id="aabca-114">Bluetooth clients must specify the restrictions, listed in the following table, in the **WSAQUERYSET** structure when using the **WSALookupServiceBegin** function to query for services.</span></span>



| <span data-ttu-id="aabca-115">Membre WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="aabca-115">WSAQUERYSET member</span></span>    | <span data-ttu-id="aabca-116">Restriction</span><span class="sxs-lookup"><span data-stu-id="aabca-116">Restriction</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aabca-117">**dwSize nul**</span><span class="sxs-lookup"><span data-stu-id="aabca-117">**dwSize**</span></span>            | <span data-ttu-id="aabca-118">Affectez la valeur **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="aabca-118">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="aabca-119">**lpServiceClassId**</span><span class="sxs-lookup"><span data-stu-id="aabca-119">**lpServiceClassId**</span></span>  | <span data-ttu-id="aabca-120">Définissez sur l’UUID Bluetooth le plus spécifique qui peut être utilisé pour déterminer l’étendue de la requête.</span><span class="sxs-lookup"><span data-stu-id="aabca-120">Set to the most specific Bluetooth UUID that can be used to determine the scope of the query.</span></span> <span data-ttu-id="aabca-121">Par exemple, la définition de **lpServiceClassId** sur l’UUID du protocole L2CAP aboutit à tous les services L2CAP retournés, en énumérant essentiellement tous les enregistrements SD sur la cible.</span><span class="sxs-lookup"><span data-stu-id="aabca-121">For example, setting **lpServiceClassId** to the UUID of the L2CAP protocol results in all L2CAP services returned, essentially enumerating all SD records on the target.</span></span> <span data-ttu-id="aabca-122">Toutefois, la définition de l’UUID sur un service spécifique retourne uniquement les instances de ce service.</span><span class="sxs-lookup"><span data-stu-id="aabca-122">Setting the UUID to a specific service, however, returns only the instances of that service.</span></span><br/> |
| <span data-ttu-id="aabca-123">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="aabca-123">**dwNameSpace**</span></span>       | <span data-ttu-id="aabca-124">Défini sur **NS \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="aabca-124">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="aabca-125">**dwNumberOfCsAddrs**</span><span class="sxs-lookup"><span data-stu-id="aabca-125">**dwNumberOfCsAddrs**</span></span> | <span data-ttu-id="aabca-126">Définit la valeur 0.</span><span class="sxs-lookup"><span data-stu-id="aabca-126">Set to 0.</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="aabca-127">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="aabca-127">**lpszContext**</span></span>       | <span data-ttu-id="aabca-128">Définissez sur l’adresse de l’appareil Bluetooth avec lequel établir une connexion SDP pour exécuter la requête des services.</span><span class="sxs-lookup"><span data-stu-id="aabca-128">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="aabca-129">Ce membre doit être une chaîne qui est convertie à l’aide de la fonction [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="aabca-129">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="aabca-130">Si l’adresse radio locale est fournie, les enregistrements SDP locaux sont recherchés.</span><span class="sxs-lookup"><span data-stu-id="aabca-130">If the local radio address is supplied, the local SDP records are searched.</span></span><br/>                                             |
| <span data-ttu-id="aabca-131">Autres membres</span><span class="sxs-lookup"><span data-stu-id="aabca-131">Other members</span></span>         | <span data-ttu-id="aabca-132">Tous les autres membres de la structure [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="aabca-132">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="aabca-133">La connexion SDP à l’appareil distant ne reste pas active une fois que la fonction [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) a terminé une requête de service ; la connexion est arrêtée avant que **WSALookupServiceBegin** retourne.</span><span class="sxs-lookup"><span data-stu-id="aabca-133">The SDP connection to the remote device does not remain active after the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function completes a service query; the connection is terminated before **WSALookupServiceBegin** returns.</span></span> <span data-ttu-id="aabca-134">Les applications qui nécessitent la connexion SDP pour rester actives après la fin d’une requête de service doivent spécifier l’UUID de la classe de service à laquelle se connecter à l’aide du membre **serviceClassId** de la structure [**\_ BTH sockaddr**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) lors de l’émission de l’appel de fonction Windows Sockets [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="aabca-134">Applications that require the SDP connection to remain active after a service query completes should specify the service class UUID to which to connect by using the **serviceClassId** member of the [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure when issuing the Windows Sockets [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function call.</span></span>

<span data-ttu-id="aabca-135">Les indicateurs, répertoriés dans le tableau ci-dessous, sont utilisés dans le paramètre *dwControlFlags* des fonctions [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) et [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) pour contrôler les résultats de la requête.</span><span class="sxs-lookup"><span data-stu-id="aabca-135">The flags, listed in the following table, are used in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) and [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) functions to control the query results.</span></span> <span data-ttu-id="aabca-136">Les **lup \_ Containers** et **lup \_ FLUSHCACHE** Flags sont utilisés par la fonction **WSALookupServiceBegin** ; le reste des indicateurs est utilisé dans les appels à la fonction **WSALookupServiceNext** .</span><span class="sxs-lookup"><span data-stu-id="aabca-136">The **LUP\_CONTAINERS** and **LUP\_FLUSHCACHE** flags are used by the **WSALookupServiceBegin** function; the rest of the flags are used in calls to the **WSALookupServiceNext** function.</span></span>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="aabca-137">Indicateur</span><span class="sxs-lookup"><span data-stu-id="aabca-137">Flag</span></span></th>
<th><span data-ttu-id="aabca-138">Résultats</span><span class="sxs-lookup"><span data-stu-id="aabca-138">Result</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="aabca-139"><strong>LUP_CONTAINERS</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-139"><strong>LUP_CONTAINERS</strong></span></span></td>
<td><span data-ttu-id="aabca-140">Ne doit pas être défini.</span><span class="sxs-lookup"><span data-stu-id="aabca-140">Must not be set.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="aabca-141"><strong>LUP_FLUSHCACHE</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-141"><strong>LUP_FLUSHCACHE</strong></span></span></td>
<td><span data-ttu-id="aabca-142">Les applications doivent généralement spécifier <strong>LUP_FLUSHCACHE</strong>.</span><span class="sxs-lookup"><span data-stu-id="aabca-142">Applications should generally specify <strong>LUP_FLUSHCACHE</strong>.</span></span> <span data-ttu-id="aabca-143">Cet indicateur indique au système d’ignorer toutes les informations mises en cache et d’établir une connexion SDP par voie hertzienne à l’appareil spécifié pour effectuer la recherche SDP.</span><span class="sxs-lookup"><span data-stu-id="aabca-143">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="aabca-144">Cette opération sans mise en cache peut prendre plusieurs secondes (tandis qu’une recherche mise en cache est retournée rapidement).</span><span class="sxs-lookup"><span data-stu-id="aabca-144">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="aabca-145">Actuellement, Bluetooth ne met pas en cache de manière proactive les enregistrements SDP à partir des appareils proches, pas plus qu’il ne met en cache de façon agressive les requêtes précédentes.</span><span class="sxs-lookup"><span data-stu-id="aabca-145">Bluetooth currently does not proactively cache SDP records from nearby devices, nor does it currently aggressively cache previous queries.</span></span> <span data-ttu-id="aabca-146">Par conséquent, les applications doivent prévoir que les requêtes ne peuvent pas retourner de résultats (avec le code d’erreur <strong>WSASERVICE_NOT_FOUND</strong>) si <strong>LUP_FLUSHCACHE</strong> n’est pas spécifié.</span><span class="sxs-lookup"><span data-stu-id="aabca-146">Therefore, applications should anticipate that queries may return no results (with an error code of <strong>WSASERVICE_NOT_FOUND</strong>) if <strong>LUP_FLUSHCACHE</strong> is not specified.</span></span> <span data-ttu-id="aabca-147">Les données mises en cache disponibles à l’aide de l’interface Windows Sockets peuvent être améliorées à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="aabca-147">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="aabca-148"><strong>LUP_RES_SERVICE</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-148"><strong>LUP_RES_SERVICE</strong></span></span></td>
<td><span data-ttu-id="aabca-149">Retourne des informations sur l’adresse Bluetooth locale.</span><span class="sxs-lookup"><span data-stu-id="aabca-149">Return information about the local Bluetooth address.</span></span> <span data-ttu-id="aabca-150">Cet indicateur n’a d’effet que si <strong>LUP_RETURN_ADDR</strong> est également spécifié.</span><span class="sxs-lookup"><span data-stu-id="aabca-150">This flag has an effect only if <strong>LUP_RETURN_ADDR</strong> is also specified.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="aabca-151"><strong>LUP_RETURN_NAME</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-151"><strong>LUP_RETURN_NAME</strong></span></span></td>
<td><span data-ttu-id="aabca-152">Retourne le nom complet du service dans le membre <strong>lpszServiceInstanceName</strong> de la structure <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> pour chaque appel à la fonction <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="aabca-152">Return the display name of the service in the <strong>lpszServiceInstanceName</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="aabca-153"><strong>LUP_RETURN_TYPE</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-153"><strong>LUP_RETURN_TYPE</strong></span></span></td>
<td><span data-ttu-id="aabca-154">Retournez l’ID de classe de service dans le membre <strong>lpServiceClassId</strong> de la structure <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="aabca-154">Return the service class ID in the <strong>lpServiceClassId</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure.</span></span>
<blockquote>
[!Note]<br />
<span data-ttu-id="aabca-155">L’utilisation de cet indicateur s’applique uniquement à la fonction <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="aabca-155">Use of this flag is only applicable to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> function.</span></span> <span data-ttu-id="aabca-156">Cette valeur est toujours égale à zéro pour <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="aabca-156">This value is always zero for <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span></span>
</blockquote>
<br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="aabca-157"><strong>LUP_RETURN_ADDR</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-157"><strong>LUP_RETURN_ADDR</strong></span></span></td>
<td><span data-ttu-id="aabca-158">Retourne une adresse dans le membre <strong>lpcsaBuffer</strong> à utiliser avec les appels de fonction <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>Connect</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="aabca-158">Return an address in the <strong>lpcsaBuffer</strong> member to be used with <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>connect</strong></a> function calls.</span></span> <span data-ttu-id="aabca-159">L’adresse retournée contient le numéro de port.</span><span class="sxs-lookup"><span data-stu-id="aabca-159">The returned address contains the port number.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="aabca-160"><strong>LUP_RETURN_BLOB</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-160"><strong>LUP_RETURN_BLOB</strong></span></span></td>
<td><span data-ttu-id="aabca-161">Retourne les enregistrements SD correspondants dans le membre <strong>lpBlob</strong> , mis en forme selon la spécification de l’enregistrement SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="aabca-161">Return the matching SD records in the <strong>lpBlob</strong> member, formatted according to the Bluetooth SDP record specification.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="aabca-162"><strong>LUP_RETURN_ALL</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-162"><strong>LUP_RETURN_ALL</strong></span></span></td>
<td><span data-ttu-id="aabca-163">Retourne toutes les informations relatives aux indicateurs ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="aabca-163">Return all of the above flags' information.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="aabca-164"><strong>LUP_RETURN_COMMENT</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-164"><strong>LUP_RETURN_COMMENT</strong></span></span></td>
<td><span data-ttu-id="aabca-165">Retournez la description du service dans le membre <strong>lpszComment</strong> de la structure <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> pour chaque appel à la fonction <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="aabca-165">Return the service description in the <strong>lpszComment</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="aabca-166"><strong>LUP_FLUSHPREVIOUS</strong></span><span class="sxs-lookup"><span data-stu-id="aabca-166"><strong>LUP_FLUSHPREVIOUS</strong></span></span></td>
<td><span data-ttu-id="aabca-167">Ignore l’enregistrement suivant disponible et retourne l’enregistrement qui le suit.</span><span class="sxs-lookup"><span data-stu-id="aabca-167">Skip the next available record, and return the record that follows it.</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="advanced-service-queries"></a><span data-ttu-id="aabca-168">Requêtes de service avancées</span><span class="sxs-lookup"><span data-stu-id="aabca-168">Advanced Service Queries</span></span>

<span data-ttu-id="aabca-169">Les opérations de requête décrites dans la section précédente peuvent être utilisées pour retourner tous les résultats d’un GUID unique, ce qui doit être suffisant pour la plupart des applications.</span><span class="sxs-lookup"><span data-stu-id="aabca-169">The query operations that are described in the previous section can be used to return all results from a single GUID, which should be sufficient for most applications.</span></span> <span data-ttu-id="aabca-170">Une requête avancée permet à une application de créer une requête plus spécifique ; Il offre la possibilité de faire correspondre les UUID et les attributs dans les informations retournées.</span><span class="sxs-lookup"><span data-stu-id="aabca-170">An advanced query enables an application to create a more specific query; it provides the capability to match UUIDs and attributes in returned information.</span></span>

<span data-ttu-id="aabca-171">Pour effectuer une requête avancée pour les services, les clients Bluetooth doivent spécifier les restrictions suivantes dans la structure [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) qui est passée dans le paramètre *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="aabca-171">To perform an advanced query for services, Bluetooth clients must specify the following restrictions in the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is passed into the *lpqsRestrictions* parameter.</span></span>



| <span data-ttu-id="aabca-172">Membre WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="aabca-172">WSAQUERYSET member</span></span>   | <span data-ttu-id="aabca-173">Restriction</span><span class="sxs-lookup"><span data-stu-id="aabca-173">Restriction</span></span>                                                                                                                                                                                                                                                                                                                         |
|----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aabca-174">**dwSize nul**</span><span class="sxs-lookup"><span data-stu-id="aabca-174">**dwSize**</span></span>           | <span data-ttu-id="aabca-175">Affectez la valeur **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="aabca-175">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="aabca-176">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="aabca-176">**lpszContext**</span></span>      | <span data-ttu-id="aabca-177">Définissez sur l’adresse de l’appareil Bluetooth avec lequel établir une connexion SDP pour exécuter la requête des services.</span><span class="sxs-lookup"><span data-stu-id="aabca-177">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="aabca-178">Ce membre doit être une chaîne qui est convertie à l’aide de la fonction [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="aabca-178">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="aabca-179">Si l’adresse radio locale est fournie, les enregistrements SDP locaux sont recherchés.</span><span class="sxs-lookup"><span data-stu-id="aabca-179">If the local radio address is supplied, the local SDP records are searched.</span></span><br/> |
| <span data-ttu-id="aabca-180">**lpBlob.pBlobData**</span><span class="sxs-lookup"><span data-stu-id="aabca-180">**lpBlob.pBlobData**</span></span> | <span data-ttu-id="aabca-181">Pointeur vers une structure de [**\_ \_ service de requête BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) qui contient tous les paramètres qui limitent les résultats de la requête.</span><span class="sxs-lookup"><span data-stu-id="aabca-181">Pointer to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains all parameters that limit the results of the query.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="aabca-182">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="aabca-182">**dwNameSpace**</span></span>      | <span data-ttu-id="aabca-183">Défini sur **NS \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="aabca-183">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="aabca-184">Autres membres</span><span class="sxs-lookup"><span data-stu-id="aabca-184">Other members</span></span>        | <span data-ttu-id="aabca-185">Tous les autres membres de la structure [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="aabca-185">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                            |



 

<span data-ttu-id="aabca-186">Les indicateurs suivants sont passés dans le paramètre *dwControlFlags* de [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) pour contrôler les résultats d’une requête avancée.</span><span class="sxs-lookup"><span data-stu-id="aabca-186">The following flags are passed in the *dwControlFlags* parameter of [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) to control the results of an advanced query.</span></span>

| <span data-ttu-id="aabca-187">Indicateur</span><span class="sxs-lookup"><span data-stu-id="aabca-187">Flag</span></span>                     | <span data-ttu-id="aabca-188">Résultats</span><span class="sxs-lookup"><span data-stu-id="aabca-188">Result</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aabca-189">**\_conteneurs lup**</span><span class="sxs-lookup"><span data-stu-id="aabca-189">**LUP\_CONTAINERS**</span></span>      | <span data-ttu-id="aabca-190">Ne doit pas être défini.</span><span class="sxs-lookup"><span data-stu-id="aabca-190">Must not be set.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="aabca-191">**LUP \_ FLUSHCACHE**</span><span class="sxs-lookup"><span data-stu-id="aabca-191">**LUP\_FLUSHCACHE**</span></span>      | <span data-ttu-id="aabca-192">Les applications doivent généralement spécifier **lup \_ FLUSHCACHE**.</span><span class="sxs-lookup"><span data-stu-id="aabca-192">Applications should generally specify **LUP\_FLUSHCACHE**.</span></span> <span data-ttu-id="aabca-193">Cet indicateur indique au système d’ignorer toutes les informations mises en cache et d’établir une connexion SDP par voie hertzienne à l’appareil spécifié pour effectuer la recherche SDP.</span><span class="sxs-lookup"><span data-stu-id="aabca-193">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="aabca-194">Cette opération sans mise en cache peut prendre plusieurs secondes (tandis qu’une recherche mise en cache est retournée rapidement).</span><span class="sxs-lookup"><span data-stu-id="aabca-194">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="aabca-195">Bluetooth ne met pas en cache de manière proactive les enregistrements SDP à partir des appareils proches, ni ne met en cache de façon agressive les requêtes précédentes.</span><span class="sxs-lookup"><span data-stu-id="aabca-195">Bluetooth does not proactively cache SDP records from nearby devices, nor does it aggressively cache previous queries.</span></span> <span data-ttu-id="aabca-196">Par conséquent, les applications doivent s’attendre à ce que les requêtes ne retournent souvent aucun résultat (**WSASERVICE \_ \_ introuvable**) si **lup \_ FLUSHCACHE** n’est pas spécifié.</span><span class="sxs-lookup"><span data-stu-id="aabca-196">Therefore applications should expect that queries may frequently return no results (**WSASERVICE\_NOT\_FOUND**) if **LUP\_FLUSHCACHE** is not specified.</span></span> <span data-ttu-id="aabca-197">Les données mises en cache disponibles à l’aide de l’interface Windows Sockets peuvent être améliorées à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="aabca-197">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span> |
| <span data-ttu-id="aabca-198">**\_service lup res \_**</span><span class="sxs-lookup"><span data-stu-id="aabca-198">**LUP\_RES\_SERVICE**</span></span>    | <span data-ttu-id="aabca-199">Retourne des informations pour l’adresse Bluetooth locale.</span><span class="sxs-lookup"><span data-stu-id="aabca-199">Return information for the local Bluetooth Address.</span></span> <span data-ttu-id="aabca-200">La définition de cet indicateur n’a d’effet que si l' **\_ \_ adresse de retour lup** est également spécifiée.</span><span class="sxs-lookup"><span data-stu-id="aabca-200">Setting this flag has an effect only if **LUP\_RETURN\_ADDRR** is also specified.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="aabca-201">**LUP \_ nom de retour \_**</span><span class="sxs-lookup"><span data-stu-id="aabca-201">**LUP\_RETURN\_NAME**</span></span>    | <span data-ttu-id="aabca-202">Retourne le nom complet du service.</span><span class="sxs-lookup"><span data-stu-id="aabca-202">Return the display name of the service.</span></span> <span data-ttu-id="aabca-203">Cet indicateur est ignoré pour **la \_ \_ \_ demande de recherche du service SDP**.</span><span class="sxs-lookup"><span data-stu-id="aabca-203">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="aabca-204">**\_type de retour lup \_**</span><span class="sxs-lookup"><span data-stu-id="aabca-204">**LUP\_RETURN\_TYPE**</span></span>    | <span data-ttu-id="aabca-205">Retourne l’ID de classe du service.</span><span class="sxs-lookup"><span data-stu-id="aabca-205">Return the service class ID.</span></span> <span data-ttu-id="aabca-206">Cet indicateur est ignoré pour **la \_ \_ \_ demande de recherche du service SDP**.</span><span class="sxs-lookup"><span data-stu-id="aabca-206">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="aabca-207">**LUP \_ retour \_ addr**</span><span class="sxs-lookup"><span data-stu-id="aabca-207">**LUP\_RETURN\_ADDR**</span></span>    | <span data-ttu-id="aabca-208">Retourne une adresse dans le membre **lpcsaBuffer** à utiliser avec les appels de fonction [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="aabca-208">Return an address in the **lpcsaBuffer** member to be used with [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function calls.</span></span> <span data-ttu-id="aabca-209">L’adresse retournée contient le numéro de port.</span><span class="sxs-lookup"><span data-stu-id="aabca-209">The returned address contains the port number.</span></span> <span data-ttu-id="aabca-210">Cet indicateur est ignoré pour **la \_ \_ \_ demande de recherche du service SDP**.</span><span class="sxs-lookup"><span data-stu-id="aabca-210">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="aabca-211">**LUP \_ retourne un \_ objet BLOB**</span><span class="sxs-lookup"><span data-stu-id="aabca-211">**LUP\_RETURN\_BLOB**</span></span>    | <span data-ttu-id="aabca-212">Retourne les enregistrements SD correspondants dans un format conforme à la spécification d’enregistrement SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="aabca-212">Return the matching SD records in a format that conforms to the Bluetooth SDP record specification.</span></span> <span data-ttu-id="aabca-213">Pour **une \_ \_ \_ demande de recherche de service SDP**, le résultat de **LpBlob** pour l’appel suivant à [**WSALOOKUPSERVICENEXT**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) est un tableau de handles de SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="aabca-213">For **SDP\_SERVICE\_SEARCH\_REQUEST**, the result in **lpBlob** for the subsequent call to [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) is an array of Bluetooth SDP handles.</span></span> <span data-ttu-id="aabca-214">Pour la demande d’attribut de **\_ service \_ \_ SDP** et la **demande d’attribut de \_ recherche de service \_ \_ \_ SDP**, le résultat de chaque appel suivant à **WSALookupServiceNext** est un enregistrement SDP Bluetooth binaire dont les attributs sont limités à ceux spécifiés par le membre **Prange** de la requête.</span><span class="sxs-lookup"><span data-stu-id="aabca-214">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST** and **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**, the result for each subsequent call to **WSALookupServiceNext** is a binary Bluetooth SDP record whose attributes are restricted to those specified by the **pRange** member of the query.</span></span> <span data-ttu-id="aabca-215">Cet indicateur est requis pour **la \_ \_ \_ demande de recherche du service SDP**.</span><span class="sxs-lookup"><span data-stu-id="aabca-215">This flag is required for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                               |
| <span data-ttu-id="aabca-216">**LUP \_ retourner le \_ Commentaire**</span><span class="sxs-lookup"><span data-stu-id="aabca-216">**LUP\_RETURN\_COMMENT**</span></span> | <span data-ttu-id="aabca-217">Retournez la description du service dans le membre **lpszComment** de la structure [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) pour chaque appel à la fonction [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="aabca-217">Return the service description in the **lpszComment** member of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure for each call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="aabca-218">**LUP \_ FLUSHPREVIOUS**</span><span class="sxs-lookup"><span data-stu-id="aabca-218">**LUP\_FLUSHPREVIOUS**</span></span>   | <span data-ttu-id="aabca-219">Ignore l’enregistrement suivant disponible et retourne l’enregistrement qui le suit.</span><span class="sxs-lookup"><span data-stu-id="aabca-219">Skip the next available record, and return the record that follows it.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |



 

<span data-ttu-id="aabca-220">À l’entrée, **lpBlob** -> **pBlobData** pointe vers une structure de [**\_ \_ service de requête BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) qui contient les valeurs indiquées dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="aabca-220">On input, **lpBlob**->**pBlobData** points to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains the values listed in the following table.</span></span>

> [!Note]  
> <span data-ttu-id="aabca-221">La demande de recherche initiale doit pouvoir tenir dans un paquet L2CAP.</span><span class="sxs-lookup"><span data-stu-id="aabca-221">The initial search request must be able to fit into one L2CAP packet.</span></span> <span data-ttu-id="aabca-222">Toutefois, la réponse peut être divisée en plusieurs paquets L2CAP.</span><span class="sxs-lookup"><span data-stu-id="aabca-222">The response, however, may be broken into many L2CAP packets.</span></span>

 



| <span data-ttu-id="aabca-223">Membre</span><span class="sxs-lookup"><span data-stu-id="aabca-223">Member</span></span>            | <span data-ttu-id="aabca-224">Valeur</span><span class="sxs-lookup"><span data-stu-id="aabca-224">Value</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aabca-225">**type**</span><span class="sxs-lookup"><span data-stu-id="aabca-225">**type**</span></span>          | <span data-ttu-id="aabca-226">Type de recherche à effectuer.</span><span class="sxs-lookup"><span data-stu-id="aabca-226">Type of search to perform.</span></span> <span data-ttu-id="aabca-227">Cette valeur peut être l’une des demandes de **\_ recherche de service \_ \_ SDP**, de **\_ demande d' \_ attribut \_ de service SDP** ou de demande d' **attribut de \_ recherche de service \_ \_ \_ SDP**.</span><span class="sxs-lookup"><span data-stu-id="aabca-227">This value can be one of **SDP\_SERVICE\_SEARCH\_REQUEST**, **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**.</span></span> <span data-ttu-id="aabca-228">Chaque type de recherche est associé à un mécanisme de recherche sous-jacent qui est défini par la spécification du SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="aabca-228">Each search type is associated with an underlying search mechanism that is defined by the Bluetooth SDP specification.</span></span> <span data-ttu-id="aabca-229">Chaque retourne la forme décrite par la structure [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) qui est définie précédemment dans la section (requêtes de service avancées).</span><span class="sxs-lookup"><span data-stu-id="aabca-229">Each return results in the form described by the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is defined earlier in this (Advanced Service Queries) section.</span></span> |
| <span data-ttu-id="aabca-230">**serviceHandle**</span><span class="sxs-lookup"><span data-stu-id="aabca-230">**serviceHandle**</span></span> | <span data-ttu-id="aabca-231">Utilisé pour les recherches d’attributs.</span><span class="sxs-lookup"><span data-stu-id="aabca-231">Used for attribute searches.</span></span> <span data-ttu-id="aabca-232">Cette valeur spécifie le descripteur de service avec lequel interroger les attributs du membre **Prange** .</span><span class="sxs-lookup"><span data-stu-id="aabca-232">This value specifies the service handle with which to query the attributes in the **pRange** member.</span></span>                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="aabca-233">**UUID**</span><span class="sxs-lookup"><span data-stu-id="aabca-233">**uuids**</span></span>         | <span data-ttu-id="aabca-234">Utilisé pour les recherches de service et **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="aabca-234">Used for service and **serviceAttribute** searches.</span></span> <span data-ttu-id="aabca-235">Cette valeur spécifie les UUID qu’un enregistrement doit contenir pour correspondre à la recherche.</span><span class="sxs-lookup"><span data-stu-id="aabca-235">This value specifies the UUIDs that a record must contain to match the search.</span></span> <span data-ttu-id="aabca-236">Si le **nombre d' \_ UUID \_ de \_ requête** inférieur à Max doit être interrogé, cette valeur définit l’élément SdpQueryUuid qui suit immédiatement le dernier UUID valide à zéro.</span><span class="sxs-lookup"><span data-stu-id="aabca-236">If less than **MAX\_UUIDS\_IN\_QUERY** UUIDs are to be queried, this value sets the SdpQueryUuid element that immediately follows the last valid UUID to all zeros.</span></span>                                                                                                                                                                       |
| <span data-ttu-id="aabca-237">**numRange**</span><span class="sxs-lookup"><span data-stu-id="aabca-237">**numRange**</span></span>      | <span data-ttu-id="aabca-238">Utilisé pour les recherches d’attribut et **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="aabca-238">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="aabca-239">Cette valeur spécifie le nombre d’éléments dans **Prange**.</span><span class="sxs-lookup"><span data-stu-id="aabca-239">This value specifies the number of elements in **pRange**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="aabca-240">**pRange**</span><span class="sxs-lookup"><span data-stu-id="aabca-240">**pRange**</span></span>        | <span data-ttu-id="aabca-241">Utilisé pour les recherches d’attribut et **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="aabca-241">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="aabca-242">Cette valeur spécifie les valeurs d’attribut à récupérer pour tous les enregistrements correspondants.</span><span class="sxs-lookup"><span data-stu-id="aabca-242">This value specifies the attribute values to retrieve for any matching records.</span></span>                                                                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="aabca-243">Après chaque appel réussi à la fonction [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) , **lpBlob** -> **pBlobData** pointe vers un bloc de données qui contient les valeurs indiquées dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="aabca-243">After each successful call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function, **lpBlob**->**pBlobData** points to a block of data that contains the values listed in the following table.</span></span>

| <span data-ttu-id="aabca-244">Valeur</span><span class="sxs-lookup"><span data-stu-id="aabca-244">Value</span></span>                                                                                | <span data-ttu-id="aabca-245">Description</span><span class="sxs-lookup"><span data-stu-id="aabca-245">Description</span></span>                                                                                                                                                                                                                                                                                                                                          |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aabca-246">**\_demande de \_ recherche du service SDP \_**</span><span class="sxs-lookup"><span data-stu-id="aabca-246">**SDP\_SERVICE\_SEARCH\_REQUEST**</span></span>                                                    | <span data-ttu-id="aabca-247">Tableau de handles d’enregistrement SDP qui est identique à l' **ServiceRecordHandleList** défini par le sdp Bluetooth 1,1.</span><span class="sxs-lookup"><span data-stu-id="aabca-247">An array of SDP record handles that is identical to the **ServiceRecordHandleList** defined by Bluetooth 1.1 SDP 4.5.2.</span></span> <span data-ttu-id="aabca-248">Le nombre de descripteurs SDP renvoyés est calculé par (**lpBlob**->CBSIZE)/**sizeof**(ULONG).</span><span class="sxs-lookup"><span data-stu-id="aabca-248">The number of SDP handles that is returned is calculated by (**lpBlob**->cbSize)/**sizeof**(ULONG).</span></span> <span data-ttu-id="aabca-249">Tous les résultats sont retournés dans un seul appel à la fonction [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="aabca-249">All results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> |
| <span data-ttu-id="aabca-250">**SDP \_ Demande \_ d' \_ attribut de service** ou **demande d’attribut de \_ recherche de service \_ \_ \_ SDP**</span><span class="sxs-lookup"><span data-stu-id="aabca-250">**SDP\_SERVICE\_ATTRIBUTE\_REQUEST** or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**</span></span> | <span data-ttu-id="aabca-251">Enregistrement SDP Bluetooth binaire.</span><span class="sxs-lookup"><span data-stu-id="aabca-251">A binary Bluetooth SDP record.</span></span> <span data-ttu-id="aabca-252">Pour **une \_ \_ \_ demande d’attribut de service SDP**, tous les résultats sont retournés dans un seul appel à la fonction [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="aabca-252">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, all results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                       |



 

> [!Note]  
> <span data-ttu-id="aabca-253">Si le membre **lpBlob** n’est pas spécifié pendant l’entrée d’une requête de service, une recherche de service et d’attribut est effectuée pour le service spécifié dans le membre **lpServiceClassId** sur les attributs de 0 à 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="aabca-253">If the **lpBlob** member is not specified during input for a service query, a service and attribute search is performed for the service specified in the **lpServiceClassId** member on attributes from 0 through 0xFFFF.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="aabca-254">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="aabca-254">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="aabca-255">WSAQUERYSET pour la recherche de service et Bluetooth</span><span class="sxs-lookup"><span data-stu-id="aabca-255">Bluetooth and WSAQUERYSET for Service Inquiry</span></span>](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[<span data-ttu-id="aabca-256">Détection des appareils et services Bluetooth</span><span class="sxs-lookup"><span data-stu-id="aabca-256">Discovering Bluetooth Devices and Services</span></span>](discovering-bluetooth-devices-and-services.md)
</dt> <dt>

[<span data-ttu-id="aabca-257">Bluetooth et WSALookupServiceNext</span><span class="sxs-lookup"><span data-stu-id="aabca-257">Bluetooth and WSALookupServiceNext</span></span>](bluetooth-and-wsalookupservicenext.md)
</dt> <dt>

[<span data-ttu-id="aabca-258">Bluetooth et WSALookupServiceBegin pour la consultation des appareils</span><span class="sxs-lookup"><span data-stu-id="aabca-258">Bluetooth and WSALookupServiceBegin for Device Inquiry</span></span>](bluetooth-and-wsalookupservicebegin-for-device-inquiry.md)
</dt> <dt>

[<span data-ttu-id="aabca-259">**\_service de requête BTH \_**</span><span class="sxs-lookup"><span data-stu-id="aabca-259">**BTH\_QUERY\_SERVICE**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service)
</dt> <dt>

[<span data-ttu-id="aabca-260">**entre**</span><span class="sxs-lookup"><span data-stu-id="aabca-260">**connect**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-connect)
</dt> <dt>

[<span data-ttu-id="aabca-261">**SOCKADDR \_ BTH**</span><span class="sxs-lookup"><span data-stu-id="aabca-261">**SOCKADDR\_BTH**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[<span data-ttu-id="aabca-262">**WSAAddressToString**</span><span class="sxs-lookup"><span data-stu-id="aabca-262">**WSAAddressToString**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa)
</dt> <dt>

[<span data-ttu-id="aabca-263">**WSALookupServiceBegin**</span><span class="sxs-lookup"><span data-stu-id="aabca-263">**WSALookupServiceBegin**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina)
</dt> <dt>

[<span data-ttu-id="aabca-264">**WSALookupServiceEnd**</span><span class="sxs-lookup"><span data-stu-id="aabca-264">**WSALookupServiceEnd**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend)
</dt> <dt>

[<span data-ttu-id="aabca-265">**WSALookupServiceNext**</span><span class="sxs-lookup"><span data-stu-id="aabca-265">**WSALookupServiceNext**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)
</dt> <dt>

[<span data-ttu-id="aabca-266">**WSAQUERYSET**</span><span class="sxs-lookup"><span data-stu-id="aabca-266">**WSAQUERYSET**</span></span>](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[<span data-ttu-id="aabca-267">Windows Sockets</span><span class="sxs-lookup"><span data-stu-id="aabca-267">Windows Sockets</span></span>](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

