---
title: Lire à partir d’un flux
description: Lire à partir d’un flux
ms.assetid: be961f06-cf5f-4093-9b31-7d1d69e62fec
keywords:
- AVIStreamInfo fonction)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3cc7ecd606a33503557e7c7209bff68015756523
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103940988"
---
# <a name="reading-from-a-stream"></a><span data-ttu-id="04c11-104">Lire à partir d’un flux</span><span class="sxs-lookup"><span data-stu-id="04c11-104">Reading from a Stream</span></span>

<span data-ttu-id="04c11-105">Vous pouvez récupérer des informations sur un flux ouvert à l’aide de la fonction [**AVIStreamInfo**](/windows/desktop/api/Vfw/nf-vfw-avistreaminfoa) .</span><span class="sxs-lookup"><span data-stu-id="04c11-105">You can retrieve information about an open stream by using the [**AVIStreamInfo**](/windows/desktop/api/Vfw/nf-vfw-avistreaminfoa) function.</span></span> <span data-ttu-id="04c11-106">Cette fonction remplit la structure [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) avec des informations telles que le type de données dans le flux, la méthode de compression utilisée lors de l’écriture de données de flux, la taille de mémoire tampon suggérée, la vitesse de lecture et une description textuelle du flux.</span><span class="sxs-lookup"><span data-stu-id="04c11-106">This function fills the [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) structure with information such as the type of data in the stream, the compression method used when writing stream data, the suggested buffer size, the playback rate, and a text description of the stream.</span></span>

<span data-ttu-id="04c11-107">Certains membres de la structure [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) sont également présents dans la structure [**AVIFILEINFO**](/windows/desktop/api/Vfw/ns-vfw-avifileinfoa) .</span><span class="sxs-lookup"><span data-stu-id="04c11-107">Some members of the [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) structure are also present in the [**AVIFILEINFO**](/windows/desktop/api/Vfw/ns-vfw-avifileinfoa) structure.</span></span> <span data-ttu-id="04c11-108">Les informations de la structure **AVIFILEINFO** s’appliquent à l’ensemble du fichier.</span><span class="sxs-lookup"><span data-stu-id="04c11-108">The information in the **AVIFILEINFO** structure applies to the entire file.</span></span> <span data-ttu-id="04c11-109">Les informations contenues dans la structure **AVISTREAMINFO** sont spécifiques au flux d’accès et ont la priorité sur les informations de la structure **AVIFILEINFO** .</span><span class="sxs-lookup"><span data-stu-id="04c11-109">The information in the **AVISTREAMINFO** structure is specific to the accessed stream and has precedence over the information in the **AVIFILEINFO** structure.</span></span>

<span data-ttu-id="04c11-110">Si un flux contient des informations supplémentaires qui lui sont associées, vous pouvez récupérer ces informations à l’aide de la fonction [**AVIStreamReadData**](/windows/desktop/api/Vfw/nf-vfw-avistreamreaddata) .</span><span class="sxs-lookup"><span data-stu-id="04c11-110">If a stream has supplementary information associated with it, you can retrieve this information by using the [**AVIStreamReadData**](/windows/desktop/api/Vfw/nf-vfw-avistreamreaddata) function.</span></span> <span data-ttu-id="04c11-111">Cette fonction retourne les informations dans une mémoire tampon fournie par l’application.</span><span class="sxs-lookup"><span data-stu-id="04c11-111">This function returns the information in an application-supplied buffer.</span></span> <span data-ttu-id="04c11-112">Les informations de flux supplémentaires peuvent inclure des paramètres de configuration pour les méthodes de compression et de décompression utilisées sur un flux.</span><span class="sxs-lookup"><span data-stu-id="04c11-112">Supplementary stream information might include configuration settings for the compression and decompression methods used on a stream.</span></span> <span data-ttu-id="04c11-113">Vous pouvez obtenir la taille de mémoire tampon requise à l’aide de la macro [**AVIStreamDataSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamdatasize) .</span><span class="sxs-lookup"><span data-stu-id="04c11-113">You can obtain the required buffer size by using the [**AVIStreamDataSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamdatasize) macro.</span></span>

<span data-ttu-id="04c11-114">Vous pouvez récupérer les informations de mise en forme d’un flux à l’aide de la fonction [**AVIStreamReadFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamreadformat) .</span><span class="sxs-lookup"><span data-stu-id="04c11-114">You can retrieve formatting information about a stream by using the [**AVIStreamReadFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamreadformat) function.</span></span> <span data-ttu-id="04c11-115">Cette fonction retourne une structure spécifique au flux dans une mémoire tampon fournie par l’application.</span><span class="sxs-lookup"><span data-stu-id="04c11-115">This function returns a stream-specific structure in an application-supplied buffer.</span></span> <span data-ttu-id="04c11-116">Pour un flux vidéo, la mémoire tampon contient des informations de mise en forme dans une structure [**BITMAPINFO,**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) .</span><span class="sxs-lookup"><span data-stu-id="04c11-116">For a video stream, the buffer contains formatting information in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure.</span></span> <span data-ttu-id="04c11-117">Pour un flux audio, la mémoire tampon contient des informations de mise en forme dans une structure [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) ou [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) .</span><span class="sxs-lookup"><span data-stu-id="04c11-117">For an audio stream, the buffer contains formatting information in a [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) or [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) structure.</span></span> <span data-ttu-id="04c11-118">Pour les autres types de flux, le gestionnaire de flux retourne des informations spécifiques au flux.</span><span class="sxs-lookup"><span data-stu-id="04c11-118">For other stream types, the stream handler returns information specific to the stream.</span></span> <span data-ttu-id="04c11-119">Vous pouvez déterminer la taille de mémoire tampon requise en utilisant **AVIStreamReadFormat** et en spécifiant une adresse de mémoire tampon **null** ou à l’aide de la macro [**AVIStreamFormatSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamformatsize) .</span><span class="sxs-lookup"><span data-stu-id="04c11-119">You can determine the required buffer size by using **AVIStreamReadFormat** and specifying a **NULL** buffer address or by using the [**AVIStreamFormatSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamformatsize) macro.</span></span>

<span data-ttu-id="04c11-120">Vous pouvez récupérer le contenu multimédia dans un flux à l’aide de la fonction [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) .</span><span class="sxs-lookup"><span data-stu-id="04c11-120">You can retrieve the multimedia content in a stream by using the [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) function.</span></span> <span data-ttu-id="04c11-121">Cette fonction copie les données brutes du flux dans une mémoire tampon fournie par l’application.</span><span class="sxs-lookup"><span data-stu-id="04c11-121">This function copies raw data from the stream into an application-supplied buffer.</span></span> <span data-ttu-id="04c11-122">Pour les flux vidéo, cette fonction récupère les images bitmap qui composent le contenu du cadre.</span><span class="sxs-lookup"><span data-stu-id="04c11-122">For video streams, this function retrieves the bitmapped images that make up the frame content.</span></span> <span data-ttu-id="04c11-123">Pour les flux audio, cette fonction récupère les exemples Waveform Audio qui composent le contenu du son.</span><span class="sxs-lookup"><span data-stu-id="04c11-123">For audio streams, this function retrieves waveform-audio samples that make up the sound content.</span></span> <span data-ttu-id="04c11-124">Vous pouvez déterminer la taille de mémoire tampon requise en utilisant **AVIStreamRead** et en spécifiant une adresse de mémoire tampon **null** ou à l’aide de la macro [**AVIStreamSampleSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamsamplesize) .</span><span class="sxs-lookup"><span data-stu-id="04c11-124">You can determine the required buffer size by using **AVIStreamRead** and specifying a **NULL** buffer address or by using the [**AVIStreamSampleSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamsamplesize) macro.</span></span>

<span data-ttu-id="04c11-125">Certains gestionnaires de flux AVI présentent des retards associés à l’initialisation ou à la coordination des logiciels et du matériel.</span><span class="sxs-lookup"><span data-stu-id="04c11-125">Some AVI stream handlers introduce delays associated with software and hardware initialization or coordination.</span></span> <span data-ttu-id="04c11-126">Vous pouvez informer ces gestionnaires pour préparer la diffusion de données en continu à l’aide de la fonction [**AVIStreamBeginStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreambeginstreaming) .</span><span class="sxs-lookup"><span data-stu-id="04c11-126">You can inform these handlers to prepare for data streaming by using the [**AVIStreamBeginStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreambeginstreaming) function.</span></span> <span data-ttu-id="04c11-127">Cette fonction permet au gestionnaire de flux d’allouer et d’initialiser les ressources dont il a besoin.</span><span class="sxs-lookup"><span data-stu-id="04c11-127">This function lets the stream handler allocate and initialize the resources it needs.</span></span> <span data-ttu-id="04c11-128">Pour informer ces gestionnaires lorsque la diffusion en continu est terminée, utilisez la fonction [**AVIStreamEndStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreamendstreaming) .</span><span class="sxs-lookup"><span data-stu-id="04c11-128">To inform these handlers when streaming has ended, use the [**AVIStreamEndStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreamendstreaming) function.</span></span> <span data-ttu-id="04c11-129">Cette fonction permet au gestionnaire de flux de libérer les ressources qu’il a allouées pour **AVIStreamBeginStreaming**.</span><span class="sxs-lookup"><span data-stu-id="04c11-129">This function lets the stream handler deallocate the resources it allocated for **AVIStreamBeginStreaming**.</span></span>

<span data-ttu-id="04c11-130">La fonction [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) ne fournit pas de services de décompression.</span><span class="sxs-lookup"><span data-stu-id="04c11-130">The [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) function does not provide decompression services.</span></span> <span data-ttu-id="04c11-131">Pour plus d’informations sur la compression et la décompression des flux audio, consultez [Gestionnaire de compression audio](audio-compression-manager.md).</span><span class="sxs-lookup"><span data-stu-id="04c11-131">For information about compressing and decompressing audio streams, see [Audio Compression Manager](audio-compression-manager.md).</span></span> <span data-ttu-id="04c11-132">Pour plus d’informations sur la compression et la décompression des flux vidéo, consultez [Gestionnaire de compression vidéo](video-compression-manager.md).</span><span class="sxs-lookup"><span data-stu-id="04c11-132">For information about compressing and decompressing video streams, see [Video Compression Manager](video-compression-manager.md).</span></span> <span data-ttu-id="04c11-133">Pour plus d’informations sur la compression et la décompression des frames individuels dans un flux vidéo, consultez [utilisation de données vidéo compressées dans un flux](working-with-compressed-video-data-in-a-stream.md).</span><span class="sxs-lookup"><span data-stu-id="04c11-133">For information about compressing and decompressing individual frames in a video stream, see [Working with Compressed Video Data in a Stream](working-with-compressed-video-data-in-a-stream.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="04c11-134">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="04c11-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="04c11-135">Opérations de flux</span><span class="sxs-lookup"><span data-stu-id="04c11-135">Stream Operations</span></span>](stream-operations.md)
</dt> </dl>

 

 