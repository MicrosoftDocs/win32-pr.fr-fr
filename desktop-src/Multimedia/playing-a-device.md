---
title: La diffusion d’un appareil
description: La diffusion d’un appareil
ms.assetid: 48d83e06-9e6e-498b-ad9b-0b66f235db25
keywords:
- Commande MCI_PLAY
- MCIAVI, fenêtre de lecture
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f73d8b6539e842a1ffa632ed1efae5c2c8d3cda1
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103940990"
---
# <a name="playing-a-device"></a><span data-ttu-id="c2f30-105">La diffusion d’un appareil</span><span class="sxs-lookup"><span data-stu-id="c2f30-105">Playing a Device</span></span>

<span data-ttu-id="c2f30-106">La commande [**Play**](play.md) ([**\_ lecture MCI**](mci-play.md)) démarre la lecture d’un appareil.</span><span class="sxs-lookup"><span data-stu-id="c2f30-106">The [**play**](play.md) ([**MCI\_PLAY**](mci-play.md)) command starts playing a device.</span></span> <span data-ttu-id="c2f30-107">Sans indicateurs, cette commande démarre à partir de la position actuelle et est lue jusqu’à ce que la commande soit interrompue ou jusqu’à ce que la fin du support ou du fichier soit atteinte.</span><span class="sxs-lookup"><span data-stu-id="c2f30-107">Without any flags, this command starts playing from the current position and plays until the command is interrupted or until the end of the media or file is reached.</span></span> <span data-ttu-id="c2f30-108">Après la lecture, la position actuelle est à la fin du média.</span><span class="sxs-lookup"><span data-stu-id="c2f30-108">After playback, the current position is at the end of the media.</span></span> <span data-ttu-id="c2f30-109">Vous pouvez également utiliser la commande [**Seek**](seek.md) ([**MCI \_ Seek**](mci-seek.md)) pour modifier la position actuelle.</span><span class="sxs-lookup"><span data-stu-id="c2f30-109">You can also use the [**seek**](seek.md) ([**MCI\_SEEK**](mci-seek.md)) command to change the current position.</span></span>

<span data-ttu-id="c2f30-110">La plupart des appareils qui prennent en charge la commande de **lecture** prennent également en charge les indicateurs « from » (MCI \_ de) et « to » (MCI \_ à).</span><span class="sxs-lookup"><span data-stu-id="c2f30-110">Most devices that support the **play** command also support the "from" (MCI\_FROM) and "to" (MCI\_TO) flags.</span></span> <span data-ttu-id="c2f30-111">Ces indicateurs indiquent la position à laquelle l’appareil doit démarrer et s’arrêter.</span><span class="sxs-lookup"><span data-stu-id="c2f30-111">These flags indicate the position at which the device should start and stop playing.</span></span> <span data-ttu-id="c2f30-112">Par exemple, la commande suivante lit un disque audio CD à partir du début de la première piste à l’aide de la fonction [**mciSendString**](/previous-versions//dd757161(v=vs.85)) :</span><span class="sxs-lookup"><span data-stu-id="c2f30-112">For example, the following command plays a CD audio disc from the beginning of the first track using the [**mciSendString**](/previous-versions//dd757161(v=vs.85)) function:</span></span>


```C++
mciSendString("play cdaudio from 0", lpszReturnString, 
    lstrlen(lpszReturnString), NULL);
```



<span data-ttu-id="c2f30-113">Certains types d’appareils étendent cette commande pour exploiter les fonctionnalités d’un appareil particulier.</span><span class="sxs-lookup"><span data-stu-id="c2f30-113">Some device types extend this command to exploit the capabilities of a particular device.</span></span> <span data-ttu-id="c2f30-114">Par exemple, la commande [**Play**](play.md) pour le type d’appareil **videodisc** comprend les indicateurs « Fast » (MCI \_ VD \_ Play Play \_ ), « Slow » (MCI \_ VD \_ Play \_ Slow) et « Scan » (MCI \_ VD \_ Play \_ Scan).</span><span class="sxs-lookup"><span data-stu-id="c2f30-114">For example, the [**play**](play.md) command for the **videodisc** device type includes the "fast" (MCI\_VD\_PLAY\_FAST) , "slow" (MCI\_VD\_PLAY\_SLOW), and "scan" (MCI\_VD\_PLAY\_SCAN) flags.</span></span>

> [!Note]  
> <span data-ttu-id="c2f30-115">Les unités affectées à la valeur de position dépendent du format d’heure utilisé par l’appareil.</span><span class="sxs-lookup"><span data-stu-id="c2f30-115">The units assigned to the position value depend on the time format used by the device.</span></span> <span data-ttu-id="c2f30-116">Chaque appareil a un format d’heure par défaut, mais vous devez spécifier le format d’heure à l’aide de la commande [**Set**](set.md) ([**MCI \_ Set**](mci-set.md)) avant d’émettre des commandes qui utilisent des valeurs de position.</span><span class="sxs-lookup"><span data-stu-id="c2f30-116">Each device has a default time format, but you should specify the time format by using the [**set**](set.md) ([**MCI\_SET**](mci-set.md)) command before issuing any commands that use position values.</span></span>

 

## <a name="playing-an-avi-file"></a><span data-ttu-id="c2f30-117">Exécution d’un fichier AVI</span><span class="sxs-lookup"><span data-stu-id="c2f30-117">Playing an AVI File</span></span>

<span data-ttu-id="c2f30-118">Les fichiers vidéo dans Windows sont constitués d’au moins deux flux de données entrelacés : un flux vidéo (image) et un flux audio.</span><span class="sxs-lookup"><span data-stu-id="c2f30-118">Video files in Windows are made up of at least two interleaved data streams: a video (pictorial) stream and an audio stream.</span></span> <span data-ttu-id="c2f30-119">Vous pouvez facilement lire ces fichiers AVI (Audio-Video entrelacés) à l’aide de commandes MCI.</span><span class="sxs-lookup"><span data-stu-id="c2f30-119">You can easily play these audio-video interleaved (AVI) files by using MCI commands.</span></span> <span data-ttu-id="c2f30-120">Les sections suivantes traitent de la diffusion de fichiers AVI.</span><span class="sxs-lookup"><span data-stu-id="c2f30-120">The following sections discuss playing AVI files.</span></span>

## <a name="setting-up-an-mciavi-playback-window"></a><span data-ttu-id="c2f30-121">Configuration d’une fenêtre de lecture de MCIAVI</span><span class="sxs-lookup"><span data-stu-id="c2f30-121">Setting Up an MCIAVI Playback Window</span></span>

<span data-ttu-id="c2f30-122">Votre application peut spécifier les options suivantes pour définir la fenêtre de lecture pour la lecture d’un fichier AVI :</span><span class="sxs-lookup"><span data-stu-id="c2f30-122">Your application can specify the following options to define the playback window for playing an AVI file:</span></span>

-   <span data-ttu-id="c2f30-123">Utilisez la fenêtre contextuelle par défaut du pilote MCIAVI.</span><span class="sxs-lookup"><span data-stu-id="c2f30-123">Use the MCIAVI driver's default pop-up window.</span></span>
-   <span data-ttu-id="c2f30-124">Spécifiez une fenêtre parente et un style de fenêtre que le pilote MCIAVI peut utiliser pour créer la fenêtre de lecture.</span><span class="sxs-lookup"><span data-stu-id="c2f30-124">Specify a parent window and window style that the MCIAVI driver can use to create the playback window.</span></span>
-   <span data-ttu-id="c2f30-125">Spécifiez une fenêtre de lecture pour le pilote MCIAVI à utiliser pour la lecture.</span><span class="sxs-lookup"><span data-stu-id="c2f30-125">Specify a playback window for the MCIAVI driver to use for playback.</span></span>
-   <span data-ttu-id="c2f30-126">Lisez le fichier AVI dans un affichage plein écran.</span><span class="sxs-lookup"><span data-stu-id="c2f30-126">Play the AVI file on a full-screen display.</span></span>

<span data-ttu-id="c2f30-127">Si votre application ne spécifie pas d’options de fenêtre, le pilote MCIAVI crée une fenêtre par défaut pour la séquence.</span><span class="sxs-lookup"><span data-stu-id="c2f30-127">If your application does not specify any window options, the MCIAVI driver creates a default window for playing the sequence.</span></span> <span data-ttu-id="c2f30-128">Le pilote crée cette fenêtre de lecture pour la commande [**ouverte**](open.md) ([**MCI \_ Open**](mci-open.md)), mais elle n’affiche pas la fenêtre tant que votre application n’a pas envoyé de commande pour afficher la fenêtre ou lire le fichier.</span><span class="sxs-lookup"><span data-stu-id="c2f30-128">The driver creates this playback window for the [**open**](open.md) ([**MCI\_OPEN**](mci-open.md)) command, but it does not display the window until your application sends a command to either display the window or play the file.</span></span> <span data-ttu-id="c2f30-129">Cette fenêtre de lecture par défaut est une fenêtre indépendante avec une bordure de redimensionnement, une barre de titre, un cadre épais, un menu de **fenêtre** et un bouton réduire.</span><span class="sxs-lookup"><span data-stu-id="c2f30-129">This default playback window is a pop-up window with a sizing border, title bar, a thick frame, a **window** menu, and a Minimize button.</span></span>

<span data-ttu-id="c2f30-130">Votre application peut également spécifier un handle de fenêtre parente et un style de fenêtre lorsqu’elle émet la commande **ouvrir** .</span><span class="sxs-lookup"><span data-stu-id="c2f30-130">Your application can also specify a parent window handle and a window style when it issues the **open** command.</span></span> <span data-ttu-id="c2f30-131">Dans ce cas, le pilote MCIAVI crée une fenêtre basée sur ces spécifications au lieu de la fenêtre contextuelle par défaut.</span><span class="sxs-lookup"><span data-stu-id="c2f30-131">In this case, the MCIAVI driver creates a window based on these specifications instead of the default pop-up window.</span></span> <span data-ttu-id="c2f30-132">Votre application peut spécifier n’importe quel style de fenêtre disponible pour la fonction [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa) .</span><span class="sxs-lookup"><span data-stu-id="c2f30-132">Your application can specify any window style available for the [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa) function.</span></span> <span data-ttu-id="c2f30-133">Les styles qui requièrent une fenêtre parente, tels que WS \_ Child, doivent inclure un handle de fenêtre parente.</span><span class="sxs-lookup"><span data-stu-id="c2f30-133">Styles that require a parent window, such as WS\_CHILD, should include a parent window handle.</span></span>

<span data-ttu-id="c2f30-134">Votre application peut également créer sa propre fenêtre et fournir le descripteur au pilote MCIAVI à l’aide de la commande [**fenêtre**](window.md) ([**\_ fenêtre MCI**](mci-window.md)).</span><span class="sxs-lookup"><span data-stu-id="c2f30-134">Your application can also create its own window and supply the handle to the MCIAVI driver by using the [**window**](window.md) ([**MCI\_WINDOW**](mci-window.md)) command.</span></span> <span data-ttu-id="c2f30-135">Le pilote MCIAVI utilise cette fenêtre au lieu d’en créer un propre.</span><span class="sxs-lookup"><span data-stu-id="c2f30-135">The MCIAVI driver uses this window instead of creating one of its own.</span></span>

<span data-ttu-id="c2f30-136">Lorsque le pilote MCIAVI crée la fenêtre de lecture ou obtient un handle de fenêtre à partir de votre application, il n’affiche pas la fenêtre tant que votre application n’a pas lu la séquence ou n’a pas envoyé de commande pour afficher la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="c2f30-136">When the MCIAVI driver creates the playback window or obtains a window handle from your application, it does not display the window until your application either plays the sequence or sends a command to display the window.</span></span> <span data-ttu-id="c2f30-137">Votre application peut utiliser la commande **fenêtre** pour afficher la fenêtre sans exécuter la séquence.</span><span class="sxs-lookup"><span data-stu-id="c2f30-137">Your application can use the **window** command to display the window without playing the sequence.</span></span> <span data-ttu-id="c2f30-138">Par exemple, la commande suivante affiche la fenêtre à l’aide de [**mciSendString**](/previous-versions//dd757161(v=vs.85)):</span><span class="sxs-lookup"><span data-stu-id="c2f30-138">For example, the following command displays the window using [**mciSendString**](/previous-versions//dd757161(v=vs.85)):</span></span>


```C++
mciSendString("window movie state show", lpszReturnString,
    lstrlen(lpszReturnString), NULL);
```



<span data-ttu-id="c2f30-139">Dans cet exemple, « Movie » est un alias pour le périphérique vidéo numérique.</span><span class="sxs-lookup"><span data-stu-id="c2f30-139">In this example, "movie" is an alias for the digital-video device.</span></span>

<span data-ttu-id="c2f30-140">Votre application peut également lire un fichier AVI plein écran.</span><span class="sxs-lookup"><span data-stu-id="c2f30-140">Your application can also play an AVI file full-screen.</span></span> <span data-ttu-id="c2f30-141">Pour lire en mode plein écran, modifiez la commande [**Play**](play.md) ([**\_ lecture MCI**](mci-play.md)) avec l’indicateur « fullscreen » (MCI \_ MCIAVI \_ Play \_ fullscreen).</span><span class="sxs-lookup"><span data-stu-id="c2f30-141">To play full-screen, modify the [**play**](play.md) ([**MCI\_PLAY**](mci-play.md)) command with the "fullscreen" (MCI\_MCIAVI\_PLAY\_FULLSCREEN) flag.</span></span> <span data-ttu-id="c2f30-142">Lorsque votre application utilise cet indicateur, le pilote MCIAVI utilise un format plein écran 320 par 240 pixels pour la séquence.</span><span class="sxs-lookup"><span data-stu-id="c2f30-142">When your application uses this flag, the MCIAVI driver uses a 320- by 240-pixel full-screen format for playing the sequence.</span></span> <span data-ttu-id="c2f30-143">Par exemple, la commande suivante lit le fichier ouvert en plein écran (en utilisant « Movie » comme alias) :</span><span class="sxs-lookup"><span data-stu-id="c2f30-143">For example, the following command plays the opened file full-screen (using "movie" as an alias):</span></span>


```C++
mciSendString("play movie fullscreen", lpszReturnString,
    lstrlen(lpszReturnString), NULL);
```



## <a name="changing-the-playback-state-for-an-avi-file"></a><span data-ttu-id="c2f30-144">Modification de l’état de lecture d’un fichier AVI</span><span class="sxs-lookup"><span data-stu-id="c2f30-144">Changing the Playback State for an AVI file</span></span>

<span data-ttu-id="c2f30-145">Votre application peut utiliser la commande [**Seek**](seek.md) ([**MCI \_ Seek**](mci-seek.md)) pour déplacer la position actuelle vers le début, la fin ou une position arbitraire dans un fichier avi.</span><span class="sxs-lookup"><span data-stu-id="c2f30-145">Your application can use the [**seek**](seek.md) ([**MCI\_SEEK**](mci-seek.md)) command to move the current position to the beginning, the end, or an arbitrary position in an AVI file.</span></span> <span data-ttu-id="c2f30-146">Il existe deux modes de recherche pour le pilote MCIAVI : exact et inexact.</span><span class="sxs-lookup"><span data-stu-id="c2f30-146">There are two seek modes for the MCIAVI driver: exact and inexact.</span></span> <span data-ttu-id="c2f30-147">Votre application peut modifier le mode de recherche à l’aide de la commande [**Set**](set.md) ([**MCI \_ Set**](mci-set.md)).</span><span class="sxs-lookup"><span data-stu-id="c2f30-147">Your application can change the seek mode by using the [**set**](set.md) ([**MCI\_SET**](mci-set.md)) command.</span></span> <span data-ttu-id="c2f30-148">Quand vous utilisez **Set** « Seek exactly on », le pilote MCIAVI recherche exactement le frame que votre application spécifie.</span><span class="sxs-lookup"><span data-stu-id="c2f30-148">When you use **set** "seek exactly on", the MCIAVI driver seeks exactly to the frame your application specifies.</span></span> <span data-ttu-id="c2f30-149">Cela peut entraîner un délai si le fichier est compressé de façon temporelle et que votre application ne spécifie pas d’image clé.</span><span class="sxs-lookup"><span data-stu-id="c2f30-149">This might cause a delay if the file is temporally compressed and your application does not specify a key frame.</span></span> <span data-ttu-id="c2f30-150">Quand vous utilisez **Set** « Seek exact OFF », le pilote MCIAVI recherche le frame clé le plus proche dans un fichier compressé temporellement.</span><span class="sxs-lookup"><span data-stu-id="c2f30-150">When you use **set** "seek exactly off", the MCIAVI driver seeks to the nearest key frame in a temporally compressed file.</span></span>

<span data-ttu-id="c2f30-151">Certaines commandes MCI permettent à votre application de modifier la lecture d’un fichier AVI d’une autre manière.</span><span class="sxs-lookup"><span data-stu-id="c2f30-151">Some MCI commands let your application alter the playback of an AVI file in other ways.</span></span> <span data-ttu-id="c2f30-152">Par exemple, un fichier AVI, par défaut, est lu à sa vitesse normale, mais votre application peut augmenter ou diminuer cette vitesse en utilisant l’indicateur « Speed » avec la commande **Set** .</span><span class="sxs-lookup"><span data-stu-id="c2f30-152">For example, an AVI file, by default, plays at its normal speed, but your application can increase or decrease this speed by using the "speed" flag with the **set** command.</span></span> <span data-ttu-id="c2f30-153">Pour les fichiers AVI, une valeur de vitesse de 1000 est typique.</span><span class="sxs-lookup"><span data-stu-id="c2f30-153">For AVI files, a speed value of 1000 is typical.</span></span> <span data-ttu-id="c2f30-154">Ainsi, pour lire un film à la moitié de sa vitesse habituelle, votre application peut utiliser le **jeu** de commandes « film Speed 500 ». une autre solution consiste à utiliser **Set** « movie Speed 2000 » pour jouer la séquence à deux fois la vitesse normale.</span><span class="sxs-lookup"><span data-stu-id="c2f30-154">Thus, to play a movie at half its typical speed, your application can use the command **set** "movie speed 500"; alternatively, it can use **set** "movie speed 2000" to play the sequence at twice its normal speed.</span></span>

<span data-ttu-id="c2f30-155">La commande [**SetAudio**](setaudio.md) ([**MCI \_ SetAudio**](mci-setaudio.md)) permet à votre application de contrôler la partie audio d’un fichier avi.</span><span class="sxs-lookup"><span data-stu-id="c2f30-155">The [**setaudio**](setaudio.md) ([**MCI\_SETAUDIO**](mci-setaudio.md)) command lets your application control the audio portion of an AVI file.</span></span> <span data-ttu-id="c2f30-156">Votre application peut désactiver le son lors de la lecture ou, dans le cas de plusieurs fichiers audio Stream, sélectionner le flux audio qui est lu.</span><span class="sxs-lookup"><span data-stu-id="c2f30-156">Your application can mute audio during playback or, in the case of multiple audio stream files, select the audio stream that is played.</span></span>

<span data-ttu-id="c2f30-157">Le pilote MCIAVI contient une boîte de dialogue qui permet de contrôler certaines de ses options de lecture.</span><span class="sxs-lookup"><span data-stu-id="c2f30-157">The MCIAVI driver has a dialog box to control some of its playback options.</span></span> <span data-ttu-id="c2f30-158">Parmi les options disponibles pour l’utilisateur, citons la sélection de la lecture de l’écran ou de la fenêtre, la sélection du mode de recherche et le zoom de l’image.</span><span class="sxs-lookup"><span data-stu-id="c2f30-158">Some of the options available to the user include selecting window-oriented or full-screen playback, selecting the seek mode, and zooming the image.</span></span> <span data-ttu-id="c2f30-159">Votre application peut avoir MCIAVI afficher cette boîte de dialogue à l’aide de la commande [**configurer**](configure.md) ([**MCI \_ configurer**](mci-configure.md)).</span><span class="sxs-lookup"><span data-stu-id="c2f30-159">Your application can have MCIAVI display this dialog box by using the [**configure**](configure.md) ([**MCI\_CONFIGURE**](mci-configure.md)) command.</span></span>

## <a name="stream-handlers"></a><span data-ttu-id="c2f30-160">Gestionnaires de flux</span><span class="sxs-lookup"><span data-stu-id="c2f30-160">Stream Handlers</span></span>

<span data-ttu-id="c2f30-161">Les données d’un fichier AVI sont traitées comme une série de flux.</span><span class="sxs-lookup"><span data-stu-id="c2f30-161">The data in an AVI file is treated as a series of streams.</span></span> <span data-ttu-id="c2f30-162">Un fichier AVI contient généralement un flux audio et vidéo, et il peut également s’agir d’un flux personnalisé qui contient du texte ou d’autres données personnalisées.</span><span class="sxs-lookup"><span data-stu-id="c2f30-162">An AVI file typically contains an audio and video stream, and there might also be a custom stream that contains text or some other custom data.</span></span> <span data-ttu-id="c2f30-163">Le pilote MCIAVI peut utiliser différents gestionnaires pour ces flux de données.</span><span class="sxs-lookup"><span data-stu-id="c2f30-163">The MCIAVI driver can use different handlers for these data streams.</span></span> <span data-ttu-id="c2f30-164">Pour plus d’informations sur les fichiers AVI personnalisés, consultez [gestionnaires de fichiers et de flux](custom-file-and-stream-handlers.md)de données personnalisés.</span><span class="sxs-lookup"><span data-stu-id="c2f30-164">For more information about custom AVI files, see [Custom File and Stream Handlers](custom-file-and-stream-handlers.md).</span></span>

 

 