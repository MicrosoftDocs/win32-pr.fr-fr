---
title: Appareils et types de données
description: Appareils et types de données
ms.assetid: 46247983-19c3-4c7a-a615-ba6cd8bd3289
keywords:
- sons Waveform, ouverture des périphériques de sortie
- Waveform-interface audio, ouverture des périphériques de sortie
- ouverture de périphériques de sortie Waveform-Audio
- audio Wave, interrogation des périphériques de sortie
- Waveform-interface audio, interrogation des périphériques de sortie
- interrogation des périphériques de sortie Waveform-Audio
- sons Waveform, handles d’appareil
- Waveform-interface audio, handles de l’appareil
- audio Wave, identificateurs d’appareil
- Waveform-interface audio, identificateurs de périphérique
- Wave audio, types de données de sortie
- Waveform-interface audio, types de données de sortie
- audio Wave, formats de données
- Waveform-interface audio, formats de données
- écriture de données Waveform-Audio
- sons Waveform, écriture de données
- Waveform-interface audio, écriture de données
- Waveform PCM-données audio
- audio Wave, données PCM
- Waveform-interface audio, données PCM
- sons Wave, fermeture des appareils de sortie
- Waveform-interface audio, fermeture des appareils de sortie
- fermeture des périphériques de sortie Waveform-Audio
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2abe0c2c20c52f4498316fb619885d41f85e41d6
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/30/2021
ms.locfileid: "113120244"
---
# <a name="devices-and-data-types"></a><span data-ttu-id="97191-126">Appareils et types de données</span><span class="sxs-lookup"><span data-stu-id="97191-126">Devices and Data Types</span></span>

<span data-ttu-id="97191-127">Cette section décrit l’utilisation des périphériques audio Waveform et contient des informations sur l’ouverture, la fermeture et l’interrogation de leurs fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="97191-127">This section describes working with waveform-audio devices, and includes information on how to open, close and query them for their capabilities.</span></span> <span data-ttu-id="97191-128">Elle explique également comment effectuer le suivi des appareils dans un système à l’aide de handles d’appareil et d’identificateurs de périphérique.</span><span class="sxs-lookup"><span data-stu-id="97191-128">It also describes how to keep track of the devices in a system by using device handles and device identifiers.</span></span>

## <a name="opening-waveform-audio-output-devices"></a><span data-ttu-id="97191-129">Ouverture de Waveform-Audio périphériques de sortie</span><span class="sxs-lookup"><span data-stu-id="97191-129">Opening Waveform-Audio Output Devices</span></span>

<span data-ttu-id="97191-130">Utilisez la fonction [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) pour ouvrir un appareil de sortie Waveform-Audio en vue de la lecture.</span><span class="sxs-lookup"><span data-stu-id="97191-130">Use the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function to open a waveform-audio output device for playback.</span></span> <span data-ttu-id="97191-131">Cette fonction ouvre l’appareil associé à l’identificateur de périphérique spécifié et retourne un handle de l’appareil ouvert en écrivant le handle d’un emplacement de mémoire spécifié.</span><span class="sxs-lookup"><span data-stu-id="97191-131">This function opens the device associated with the specified device identifier and returns a handle of the open device by writing the handle of a specified memory location.</span></span>

<span data-ttu-id="97191-132">Certains ordinateurs multimédias possèdent plusieurs périphériques de sortie Waveform-Audio.</span><span class="sxs-lookup"><span data-stu-id="97191-132">Some multimedia computers have multiple waveform-audio output devices.</span></span> <span data-ttu-id="97191-133">À moins que vous ne souhaitiez ouvrir un périphérique de sortie Waveform-Audio spécifique dans un système, vous devez utiliser l' \_ indicateur Wave mapper pour l’identificateur de l’appareil lorsque vous ouvrez un appareil.</span><span class="sxs-lookup"><span data-stu-id="97191-133">Unless you want to open a specific waveform-audio output device in a system, you should use the WAVE\_MAPPER flag for the device identifier when you open a device.</span></span> <span data-ttu-id="97191-134">La fonction **waveOutOpen** choisit l’appareil dans le système qui est le mieux capable de lire le format de données spécifié.</span><span class="sxs-lookup"><span data-stu-id="97191-134">The **waveOutOpen** function chooses the device in the system that is best able to play the specified data format.</span></span>

## <a name="querying-audio-devices"></a><span data-ttu-id="97191-135">Interrogation des périphériques audio</span><span class="sxs-lookup"><span data-stu-id="97191-135">Querying Audio Devices</span></span>

<span data-ttu-id="97191-136">Windows fournit les fonctions suivantes pour déterminer le nombre d’appareils d’un certain type qui sont disponibles dans un système.</span><span class="sxs-lookup"><span data-stu-id="97191-136">Windows provides the following functions to determine how many devices of a certain type are available in a system.</span></span>



| <span data-ttu-id="97191-137">Fonction</span><span class="sxs-lookup"><span data-stu-id="97191-137">Function</span></span>                                       | <span data-ttu-id="97191-138">Description</span><span class="sxs-lookup"><span data-stu-id="97191-138">Description</span></span>                                                                  |
|------------------------------------------------|------------------------------------------------------------------------------|
| [<span data-ttu-id="97191-139">**auxGetNumDevs**</span><span class="sxs-lookup"><span data-stu-id="97191-139">**auxGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs)         | <span data-ttu-id="97191-140">Récupère le nombre d’appareils de sortie auxiliaire présents dans le système.</span><span class="sxs-lookup"><span data-stu-id="97191-140">Retrieves the number of auxiliary output devices present in the system.</span></span>      |
| [<span data-ttu-id="97191-141">**waveInGetNumDevs**</span><span class="sxs-lookup"><span data-stu-id="97191-141">**waveInGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs)   | <span data-ttu-id="97191-142">Récupère le nombre d’appareils d’entrée Waveform-Audio présents dans le système.</span><span class="sxs-lookup"><span data-stu-id="97191-142">Retrieves the number of waveform-audio input devices present in the system.</span></span>  |
| [<span data-ttu-id="97191-143">**waveOutGetNumDevs**</span><span class="sxs-lookup"><span data-stu-id="97191-143">**waveOutGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) | <span data-ttu-id="97191-144">Récupère le nombre d’appareils de sortie Waveform-Audio présents dans le système.</span><span class="sxs-lookup"><span data-stu-id="97191-144">Retrieves the number of waveform-audio output devices present in the system.</span></span> |



 

<span data-ttu-id="97191-145">Les périphériques audio sont identifiés par un identificateur de périphérique.</span><span class="sxs-lookup"><span data-stu-id="97191-145">Audio devices are identified by a device identifier.</span></span> <span data-ttu-id="97191-146">L’identificateur d’appareil est déterminé implicitement à partir du nombre d’appareils présents dans un système.</span><span class="sxs-lookup"><span data-stu-id="97191-146">The device identifier is determined implicitly from the number of devices present in a system.</span></span> <span data-ttu-id="97191-147">Les identificateurs d’appareil sont compris entre zéro et un nombre inférieur au nombre d’appareils présents.</span><span class="sxs-lookup"><span data-stu-id="97191-147">Device identifiers range from zero to one less than the number of devices present.</span></span> <span data-ttu-id="97191-148">Par exemple, s’il existe deux périphériques de sortie Waveform-Audio dans un système, les identificateurs d’appareil valides sont 0 et 1.</span><span class="sxs-lookup"><span data-stu-id="97191-148">For example, if there are two waveform-audio output devices in a system, valid device identifiers are 0 and 1.</span></span>

<span data-ttu-id="97191-149">Une fois que vous avez déterminé le nombre d’appareils d’un certain type présents dans un système, vous pouvez utiliser l’une des fonctions suivantes pour interroger les fonctionnalités de chaque appareil.</span><span class="sxs-lookup"><span data-stu-id="97191-149">After you determine how many devices of a certain type are present in a system, you can use one of the following functions to query the capabilities of each device.</span></span>



| <span data-ttu-id="97191-150">Fonction</span><span class="sxs-lookup"><span data-stu-id="97191-150">Function</span></span>                                       | <span data-ttu-id="97191-151">Description</span><span class="sxs-lookup"><span data-stu-id="97191-151">Description</span></span>                                                             |
|------------------------------------------------|-------------------------------------------------------------------------|
| [<span data-ttu-id="97191-152">**auxGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="97191-152">**auxGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetdevcaps)         | <span data-ttu-id="97191-153">Récupère les fonctionnalités d’un périphérique de sortie auxiliaire spécifié.</span><span class="sxs-lookup"><span data-stu-id="97191-153">Retrieves the capabilities of a specified auxiliary output device.</span></span>      |
| [<span data-ttu-id="97191-154">**waveInGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="97191-154">**waveInGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps)   | <span data-ttu-id="97191-155">Récupère les fonctionnalités d’un périphérique d’entrée audio Wave spécifié.</span><span class="sxs-lookup"><span data-stu-id="97191-155">Retrieves the capabilities of a specified waveform-audio input device.</span></span>  |
| [<span data-ttu-id="97191-156">**waveOutGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="97191-156">**waveOutGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) | <span data-ttu-id="97191-157">Récupère les fonctionnalités d’un périphérique de sortie Waveform-Audio spécifié.</span><span class="sxs-lookup"><span data-stu-id="97191-157">Retrieves the capabilities of a specified waveform-audio output device.</span></span> |



 

<span data-ttu-id="97191-158">Chacune de ces fonctions remplit une structure avec des informations sur les fonctionnalités d’un appareil spécifié.</span><span class="sxs-lookup"><span data-stu-id="97191-158">Each of these functions fills a structure with information about the capabilities of a specified device.</span></span> <span data-ttu-id="97191-159">Le tableau suivant répertorie les structures qui correspondent à chacune de ces fonctions.</span><span class="sxs-lookup"><span data-stu-id="97191-159">The following table lists the structures that correspond to each of these functions.</span></span>



|  <span data-ttu-id="97191-160">Fonction</span><span class="sxs-lookup"><span data-stu-id="97191-160">Function</span></span>                                              |  <span data-ttu-id="97191-161">Structure</span><span class="sxs-lookup"><span data-stu-id="97191-161">Structure</span></span>                                  |
|------------------------------------------------|------------------------------------|
| [<span data-ttu-id="97191-162">**auxGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="97191-162">**auxGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetdevcaps)         | [<span data-ttu-id="97191-163">**AUXCAPS**</span><span class="sxs-lookup"><span data-stu-id="97191-163">**AUXCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-auxcaps)         |
| [<span data-ttu-id="97191-164">**waveInGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="97191-164">**waveInGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps)   | [<span data-ttu-id="97191-165">**WAVEINCAPS**</span><span class="sxs-lookup"><span data-stu-id="97191-165">**WAVEINCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveincaps)   |
| [<span data-ttu-id="97191-166">**waveOutGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="97191-166">**waveOutGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) | [<span data-ttu-id="97191-167">**WAVEOUTCAPS**</span><span class="sxs-lookup"><span data-stu-id="97191-167">**WAVEOUTCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) |



 

<span data-ttu-id="97191-168">Les formats standard sont répertoriés dans le membre **dwFormats** de la structure **WAVEOUTCAPS** .</span><span class="sxs-lookup"><span data-stu-id="97191-168">Standard formats are listed in the **dwFormats** member of the **WAVEOUTCAPS** structure.</span></span> <span data-ttu-id="97191-169">Les périphériques Wave-audio peuvent prendre en charge des formats non standard.</span><span class="sxs-lookup"><span data-stu-id="97191-169">Waveform-audio devices can support nonstandard formats.</span></span> <span data-ttu-id="97191-170">Pour déterminer si un format particulier (standard ou non standard) est pris en charge par un appareil, vous pouvez appeler la fonction [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) avec \_ l' \_ indicateur de requête format Wave.</span><span class="sxs-lookup"><span data-stu-id="97191-170">To determine whether a particular format (standard or nonstandard) is supported by a device, you can call the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function with the WAVE\_FORMAT\_QUERY flag.</span></span> <span data-ttu-id="97191-171">Cet indicateur n’ouvre pas l’appareil.</span><span class="sxs-lookup"><span data-stu-id="97191-171">This flag does not open the device.</span></span> <span data-ttu-id="97191-172">Vous spécifiez le format en question dans la structure [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) vers laquelle pointe le paramètre *Pwfx* passé à **waveOutOpen**.</span><span class="sxs-lookup"><span data-stu-id="97191-172">You specify the format in question in the [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure pointed to by the *pwfx* parameter passed to **waveOutOpen**.</span></span>

<span data-ttu-id="97191-173">Les périphériques de sortie Waveform-Audio varient en fonction des fonctionnalités qu’ils prennent en charge.</span><span class="sxs-lookup"><span data-stu-id="97191-173">Waveform-audio output devices vary in the capabilities they support.</span></span> <span data-ttu-id="97191-174">Le membre **dwSupport** de la structure [**WAVEOUTCAPS**](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) indique si un appareil prend en charge des fonctionnalités telles que les modifications de volume et de tangage.</span><span class="sxs-lookup"><span data-stu-id="97191-174">The **dwSupport** member of the [**WAVEOUTCAPS**](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) structure indicates whether a device supports such capabilities as volume and pitch changes.</span></span>

## <a name="device-handles-and-device-identifiers"></a><span data-ttu-id="97191-175">Handles d’appareil et identificateurs de périphérique</span><span class="sxs-lookup"><span data-stu-id="97191-175">Device Handles and Device Identifiers</span></span>

<span data-ttu-id="97191-176">Chaque fonction qui ouvre un périphérique audio spécifie un identificateur de périphérique, un pointeur vers un emplacement de mémoire et certains paramètres qui sont propres à chaque type d’appareil.</span><span class="sxs-lookup"><span data-stu-id="97191-176">Each function that opens an audio device specifies a device identifier, a pointer to a memory location, and some parameters that are unique to each type of device.</span></span> <span data-ttu-id="97191-177">L’emplacement de la mémoire est rempli avec un handle d’appareil.</span><span class="sxs-lookup"><span data-stu-id="97191-177">The memory location is filled with a device handle.</span></span> <span data-ttu-id="97191-178">Utilisez ce handle d’appareil pour identifier le périphérique audio ouvert lors de l’appel d’autres fonctions audio.</span><span class="sxs-lookup"><span data-stu-id="97191-178">Use this device handle to identify the open audio device when calling other audio functions.</span></span>

<span data-ttu-id="97191-179">La différence entre les identificateurs et les descripteurs pour les périphériques audio est subtile mais importante :</span><span class="sxs-lookup"><span data-stu-id="97191-179">The difference between identifiers and handles for audio devices is subtle but important:</span></span>

-   <span data-ttu-id="97191-180">Les identificateurs d’appareil sont déterminés implicitement à partir du nombre d’appareils présents dans un système.</span><span class="sxs-lookup"><span data-stu-id="97191-180">Device identifiers are determined implicitly from the number of devices present in a system.</span></span> <span data-ttu-id="97191-181">Ce nombre est obtenu à l’aide de la fonction [**auxGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs), [**waveInGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs)ou [**waveOutGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) .</span><span class="sxs-lookup"><span data-stu-id="97191-181">This number is obtained by using the [**auxGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs), [**waveInGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs), or [**waveOutGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) function.</span></span>
-   <span data-ttu-id="97191-182">Des descripteurs d’appareil sont retournés lorsque les pilotes de périphérique sont ouverts à l’aide de la fonction [**waveInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveinopen) ou [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) .</span><span class="sxs-lookup"><span data-stu-id="97191-182">Device handles are returned when device drivers are opened by using the [**waveInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveinopen) or [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function.</span></span>

<span data-ttu-id="97191-183">Il n’existe aucune fonction qui ouvre ou ferme des périphériques audio auxiliaires.</span><span class="sxs-lookup"><span data-stu-id="97191-183">There are no functions that open or close auxiliary audio devices.</span></span> <span data-ttu-id="97191-184">Les périphériques audio auxiliaires n’ont pas besoin d’être ouverts et fermés comme des périphériques audio Waveform, car aucun transfert de données continu n’est associé.</span><span class="sxs-lookup"><span data-stu-id="97191-184">Auxiliary audio devices need not be opened and closed like waveform-audio devices because there is no continuous data transfer associated with them.</span></span> <span data-ttu-id="97191-185">Toutes les fonctions audio auxiliaires utilisent des identificateurs d’appareil pour identifier les appareils.</span><span class="sxs-lookup"><span data-stu-id="97191-185">All auxiliary audio functions use device identifiers to identify devices.</span></span>

## <a name="waveform-audio-output-data-types"></a><span data-ttu-id="97191-186">Types de données de sortie Waveform-Audio</span><span class="sxs-lookup"><span data-stu-id="97191-186">Waveform-Audio Output Data Types</span></span>

<span data-ttu-id="97191-187">Les types de données suivants sont définis pour les fonctions de sortie Waveform-Audio.</span><span class="sxs-lookup"><span data-stu-id="97191-187">The following data types are defined for waveform-audio output functions.</span></span>



| <span data-ttu-id="97191-188">Type</span><span class="sxs-lookup"><span data-stu-id="97191-188">Type</span></span>                                 | <span data-ttu-id="97191-189">Description</span><span class="sxs-lookup"><span data-stu-id="97191-189">Description</span></span>                                                                                                                                                   |
|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="97191-190">**HWAVEOUT**</span><span class="sxs-lookup"><span data-stu-id="97191-190">**HWAVEOUT**</span></span>                         | <span data-ttu-id="97191-191">Handle vers un périphérique de sortie Waveform-Audio ouvert.</span><span class="sxs-lookup"><span data-stu-id="97191-191">Handle to an open waveform-audio output device.</span></span>                                                                                                               |
| [<span data-ttu-id="97191-192">**WAVEFORMATEX**</span><span class="sxs-lookup"><span data-stu-id="97191-192">**WAVEFORMATEX**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) | <span data-ttu-id="97191-193">Structure qui spécifie les formats de données pris en charge par un périphérique d’entrée Waveform-Audio particulier.</span><span class="sxs-lookup"><span data-stu-id="97191-193">Structure that specifies the data formats supported by a particular waveform-audio input device.</span></span> <span data-ttu-id="97191-194">Cette structure est également des périphériques d’entrée Waveform-Audio usedfor.</span><span class="sxs-lookup"><span data-stu-id="97191-194">This structure is also usedfor waveform-audio input devices.</span></span> |
| [<span data-ttu-id="97191-195">**WAVEHDR**</span><span class="sxs-lookup"><span data-stu-id="97191-195">**WAVEHDR**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr)           | <span data-ttu-id="97191-196">Structure utilisée comme en-tête d’un bloc de données d’entrée Waveform Audio.</span><span class="sxs-lookup"><span data-stu-id="97191-196">Structure used as a header for a block of waveform-audio input data.</span></span> <span data-ttu-id="97191-197">Cette structure est également utilisée pour les périphériques d’entrée Waveform-Audio.</span><span class="sxs-lookup"><span data-stu-id="97191-197">This structure is also used for waveform-audio input devices.</span></span>                            |
| [<span data-ttu-id="97191-198">**WAVEOUTCAPS**</span><span class="sxs-lookup"><span data-stu-id="97191-198">**WAVEOUTCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps)   | <span data-ttu-id="97191-199">Structure utilisée pour interroger les fonctionnalités d’un périphérique de sortie Waveform-Audio particulier.</span><span class="sxs-lookup"><span data-stu-id="97191-199">Structure used to query the capabilities of a particular waveform-audio output device.</span></span>                                                                        |



 

## <a name="specifying-waveform-audio-data-formats"></a><span data-ttu-id="97191-200">Spécification des formats de données Waveform-Audio</span><span class="sxs-lookup"><span data-stu-id="97191-200">Specifying Waveform-Audio Data Formats</span></span>

<span data-ttu-id="97191-201">Quand vous appelez la fonction [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) pour ouvrir un pilote de périphérique pour la lecture ou pour demander si le pilote prend en charge un format de données particulier, utilisez le paramètre *pwfx* pour spécifier un pointeur vers une structure [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) contenant le format de données Waveform-Audio demandé.</span><span class="sxs-lookup"><span data-stu-id="97191-201">When you call the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function to open a device driver for playback or to query whether the driver supports a particular data format, use the *pwfx* parameter to specify a pointer to a [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure containing the requested waveform-audio data format.</span></span> <span data-ttu-id="97191-202">**WAVEFORMATEX** remplace les structures [**WaveFormat**](/windows/win32/api/mmreg/ns-mmreg-waveformat) et [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) .</span><span class="sxs-lookup"><span data-stu-id="97191-202">**WAVEFORMATEX** supersedes the [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) and [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) structures.</span></span>

<span data-ttu-id="97191-203">Pour les données audio qui sont séparées en plus de deux canaux ou dont la taille n’est pas un multiple de 8, vous devez utiliser [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span><span class="sxs-lookup"><span data-stu-id="97191-203">For audio data that is separated into more than two channels or has a sample size that is not a multiple of 8, you should use [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span></span> <span data-ttu-id="97191-204">Cette structure configure simplement les octets supplémentaires pointés par le membre **cbSize** de **WAVEFORMATEX** pour fournir des informations supplémentaires sur le format.</span><span class="sxs-lookup"><span data-stu-id="97191-204">This structure simply configures the extra bytes pointed to by the **cbSize** member of **WAVEFORMATEX** to give extra information about the format.</span></span> <span data-ttu-id="97191-205">**WAVEFORMATEXTENSIBLE** peut être casté en **WAVEFORMATEX**.</span><span class="sxs-lookup"><span data-stu-id="97191-205">**WAVEFORMATEXTENSIBLE** can be cast as **WAVEFORMATEX**.</span></span>

<span data-ttu-id="97191-206">Il existe également deux formats de presse-papiers que vous pouvez utiliser pour représenter des données audio : CF \_ Wave et CF \_ riff.</span><span class="sxs-lookup"><span data-stu-id="97191-206">There are also two clipboard formats you can use to represent audio data: CF\_WAVE and CF\_RIFF.</span></span> <span data-ttu-id="97191-207">Utilisez le \_ format CF Wave pour représenter les données dans l’un des formats standard, par exemple, 11 kHz ou 22 kHz PCM.</span><span class="sxs-lookup"><span data-stu-id="97191-207">Use the CF\_WAVE format to represent data in one of the standard formats, such as 11 kHz or 22 kHz PCM.</span></span> <span data-ttu-id="97191-208">Utilisez le \_ format CF riff pour représenter des formats de données plus complexes qui ne peuvent pas être représentés sous forme de fichiers audio Waveform standard.</span><span class="sxs-lookup"><span data-stu-id="97191-208">Use the CF\_RIFF format to represent more complex data formats that cannot be represented as standard waveform-audio files.</span></span>

## <a name="writing-waveform-audio-data"></a><span data-ttu-id="97191-209">Écriture de données Waveform-Audio</span><span class="sxs-lookup"><span data-stu-id="97191-209">Writing Waveform-Audio Data</span></span>

<span data-ttu-id="97191-210">Après avoir ouvert un pilote de périphérique de sortie Waveform-Audio, vous pouvez commencer à émettre un son.</span><span class="sxs-lookup"><span data-stu-id="97191-210">After successfully opening a waveform-audio output device driver, you can begin playing a sound.</span></span> <span data-ttu-id="97191-211">Windows fournit la fonction [**waveOutWrite**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutwrite) pour envoyer des blocs de données à des périphériques de sortie Waveform-Audio.</span><span class="sxs-lookup"><span data-stu-id="97191-211">Windows provides the [**waveOutWrite**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutwrite) function for sending data blocks to waveform-audio output devices.</span></span>

<span data-ttu-id="97191-212">Utilisez la structure [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) pour spécifier le bloc de données Waveform-Audio que vous envoyez à l’aide de **waveOutWrite**.</span><span class="sxs-lookup"><span data-stu-id="97191-212">Use the [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) structure to specify the waveform-audio data block you are sending using **waveOutWrite**.</span></span> <span data-ttu-id="97191-213">Cette structure contient un pointeur vers un bloc de données verrouillé, la longueur du bloc de données et certains indicateurs.</span><span class="sxs-lookup"><span data-stu-id="97191-213">This structure contains a pointer to a locked data block, the length of the data block, and some flags.</span></span> <span data-ttu-id="97191-214">Ce bloc de données doit être préparé avant de l’utiliser. Pour plus d’informations sur la préparation d’un bloc de données, consultez [blocs de données audio](audio-data-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="97191-214">This data block must be prepared before you use it; for information about preparing a data block, see [Audio Data Blocks](audio-data-blocks.md).</span></span>

<span data-ttu-id="97191-215">Après avoir envoyé un bloc de données à un périphérique de sortie à l’aide de **waveOutWrite**, vous devez attendre que le pilote de périphérique se termine avec le bloc de données avant de le libérer.</span><span class="sxs-lookup"><span data-stu-id="97191-215">After you send a data block to an output device by using **waveOutWrite**, you must wait until the device driver is finished with the data block before freeing it.</span></span> <span data-ttu-id="97191-216">Si vous envoyez plusieurs blocs de données, vous devez surveiller l’achèvement des blocs de données pour savoir quand envoyer des blocs supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="97191-216">If you are sending multiple data blocks, you must monitor the completion of data blocks to know when to send additional blocks.</span></span> <span data-ttu-id="97191-217">Pour plus d’informations sur les blocs de données, consultez [blocs de données audio](audio-data-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="97191-217">For more information about data blocks, see [Audio Data Blocks](audio-data-blocks.md).</span></span>

## <a name="pcm-waveform-audio-data-format"></a><span data-ttu-id="97191-218">Format de données PCM Waveform-Audio</span><span class="sxs-lookup"><span data-stu-id="97191-218">PCM Waveform-Audio Data Format</span></span>

<span data-ttu-id="97191-219">Le membre **lpData** de la structure [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) pointsetts aux exemples de données Waveform-Audio.</span><span class="sxs-lookup"><span data-stu-id="97191-219">The **lpData** member of the [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) structure pointsetts to the waveform-audio data samples.</span></span> <span data-ttu-id="97191-220">Pour les données PCM 8 bits, chaque échantillon est représenté par un seul octet de données non signé.</span><span class="sxs-lookup"><span data-stu-id="97191-220">For 8-bit PCM data, each sample is represented by a single unsigned data byte.</span></span> <span data-ttu-id="97191-221">Pour les données PCM 16 bits, chaque échantillon est représenté par une valeur signée 16 bits.</span><span class="sxs-lookup"><span data-stu-id="97191-221">For 16-bit PCM data, each sample is represented by a 16-bit signed value.</span></span> <span data-ttu-id="97191-222">Le tableau suivant récapitule les valeurs maximales, minimales et maximales des données PCM Waveform-Audio.</span><span class="sxs-lookup"><span data-stu-id="97191-222">The following table summarizes the maximum, minimum, and midpoint values for PCM waveform-audio data.</span></span>



| <span data-ttu-id="97191-223">Format de données</span><span class="sxs-lookup"><span data-stu-id="97191-223">Data format</span></span> | <span data-ttu-id="97191-224">Valeur maximale</span><span class="sxs-lookup"><span data-stu-id="97191-224">Maximum value</span></span>   | <span data-ttu-id="97191-225">Valeur minimale</span><span class="sxs-lookup"><span data-stu-id="97191-225">Minimum value</span></span>    | <span data-ttu-id="97191-226">Valeur de milieu</span><span class="sxs-lookup"><span data-stu-id="97191-226">Midpoint value</span></span> |
|-------------|-----------------|------------------|----------------|
| <span data-ttu-id="97191-227">PCM 8 bits</span><span class="sxs-lookup"><span data-stu-id="97191-227">8-bit PCM</span></span>   | <span data-ttu-id="97191-228">255 (0xFF)</span><span class="sxs-lookup"><span data-stu-id="97191-228">255 (0xFF)</span></span>      | <span data-ttu-id="97191-229">0</span><span class="sxs-lookup"><span data-stu-id="97191-229">0</span></span>                | <span data-ttu-id="97191-230">128 (0x80)</span><span class="sxs-lookup"><span data-stu-id="97191-230">128 (0x80)</span></span>     |
| <span data-ttu-id="97191-231">PCM 16 bits</span><span class="sxs-lookup"><span data-stu-id="97191-231">16-bit PCM</span></span>  | <span data-ttu-id="97191-232">32 767 (0x7FFF)</span><span class="sxs-lookup"><span data-stu-id="97191-232">32,767 (0x7FFF)</span></span> | <span data-ttu-id="97191-233">– 32 768 (0x8000)</span><span class="sxs-lookup"><span data-stu-id="97191-233">–32,768 (0x8000)</span></span> | <span data-ttu-id="97191-234">0</span><span class="sxs-lookup"><span data-stu-id="97191-234">0</span></span>              |



 

## <a name="pcm-data-packing"></a><span data-ttu-id="97191-235">Compression de données PCM</span><span class="sxs-lookup"><span data-stu-id="97191-235">PCM Data Packing</span></span>

<span data-ttu-id="97191-236">L’ordre des octets de données varie selon les formats 8 bits et 16 bits et entre les formats mono et stéréo.</span><span class="sxs-lookup"><span data-stu-id="97191-236">The order of the data bytes varies between 8-bit and 16-bit formats and between mono and stereo formats.</span></span> <span data-ttu-id="97191-237">La liste suivante décrit la compression des données pour les différents formats de données Waveform PCM-audio.</span><span class="sxs-lookup"><span data-stu-id="97191-237">The following list describes data packing for the different PCM waveform-audio data formats.</span></span>



| <span data-ttu-id="97191-238">Waveform PCM-format audio</span><span class="sxs-lookup"><span data-stu-id="97191-238">PCM waveform-audio format</span></span> | <span data-ttu-id="97191-239">Description</span><span class="sxs-lookup"><span data-stu-id="97191-239">Description</span></span>                                                                                                                                                                                                                                                                                                                                     |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="97191-240">mono 8 bits</span><span class="sxs-lookup"><span data-stu-id="97191-240">8-bit mono</span></span>                | <span data-ttu-id="97191-241">Chaque échantillon est 1 octet qui correspond à un canal audio unique.</span><span class="sxs-lookup"><span data-stu-id="97191-241">Each sample is 1 byte that corresponds to a single audio channel.</span></span> <span data-ttu-id="97191-242">L’exemple 1 est suivi des exemples 2, 3, 4, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="97191-242">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span>                                                                                                                                                                                                                           |
| <span data-ttu-id="97191-243">stéréo 8 bits</span><span class="sxs-lookup"><span data-stu-id="97191-243">8-bit stereo</span></span>              | <span data-ttu-id="97191-244">Chaque échantillon est de 2 octets.</span><span class="sxs-lookup"><span data-stu-id="97191-244">Each sample is 2 bytes.</span></span> <span data-ttu-id="97191-245">L’exemple 1 est suivi des exemples 2, 3, 4, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="97191-245">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="97191-246">Pour chaque exemple, le premier octet est le canal 0 (le canal de gauche) et le deuxième octet est le canal 1 (le canal de droite).</span><span class="sxs-lookup"><span data-stu-id="97191-246">For each sample, the first byte is channel 0 (the left channel) and the second byte is channel 1 (the right channel).</span></span>                                                                                                                                               |
| <span data-ttu-id="97191-247">mono 16 bits</span><span class="sxs-lookup"><span data-stu-id="97191-247">16-bit mono</span></span>               | <span data-ttu-id="97191-248">Chaque échantillon est de 2 octets.</span><span class="sxs-lookup"><span data-stu-id="97191-248">Each sample is 2 bytes.</span></span> <span data-ttu-id="97191-249">L’exemple 1 est suivi des exemples 2, 3, 4, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="97191-249">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="97191-250">Pour chaque exemple, le premier octet est l’octet de poids faible du canal 0 et le deuxième octet est l’octet de poids fort du canal 0.</span><span class="sxs-lookup"><span data-stu-id="97191-250">For each sample, the first byte is the low-order byte of channel 0 and the second byte is the high-order byte of channel 0.</span></span>                                                                                                                                         |
| <span data-ttu-id="97191-251">stéréo 16 bits</span><span class="sxs-lookup"><span data-stu-id="97191-251">16-bit stereo</span></span>             | <span data-ttu-id="97191-252">Chaque échantillon est de 4 octets.</span><span class="sxs-lookup"><span data-stu-id="97191-252">Each sample is 4 bytes.</span></span> <span data-ttu-id="97191-253">L’exemple 1 est suivi des exemples 2, 3, 4, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="97191-253">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="97191-254">Pour chaque exemple, le premier octet est l’octet de poids faible du canal 0 (canal gauche); le deuxième octet est l’octet de poids fort du canal 0 ; le troisième octet est l’octet de poids faible du canal 1 (canal de droite); et le quatrième octet est l’octet de poids fort du canal 1.</span><span class="sxs-lookup"><span data-stu-id="97191-254">For each sample, the first byte is the low-order byte of channel 0 (left channel); the second byte is the high-order byte of channel 0; the third byte is the low-order byte of channel 1 (right channel); and the fourth byte is the high-order byte of channel 1.</span></span> |
| <span data-ttu-id="97191-255">Autres</span><span class="sxs-lookup"><span data-stu-id="97191-255">Others</span></span>                    | <span data-ttu-id="97191-256">Chaque échantillon est contenu dans un bloc qui est un multiple de 4 octets, mais les exemples peuvent être alignés sur un octet.</span><span class="sxs-lookup"><span data-stu-id="97191-256">Each sample is contained in a block that is a multiple of 4 bytes, but the samples may be non-byte-aligned.</span></span> <span data-ttu-id="97191-257">La disposition des canaux est spécifiée par un masque.</span><span class="sxs-lookup"><span data-stu-id="97191-257">The arrangement of channels is specified by a mask.</span></span> <span data-ttu-id="97191-258">Pour plus d’informations, consultez [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span><span class="sxs-lookup"><span data-stu-id="97191-258">For more information, see [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span></span>                                                                                                 |



 

## <a name="closing-waveform-audio-output-devices"></a><span data-ttu-id="97191-259">Fermeture des appareils de sortie Waveform-Audio</span><span class="sxs-lookup"><span data-stu-id="97191-259">Closing Waveform-Audio Output Devices</span></span>

<span data-ttu-id="97191-260">Une fois la lecture de la forme d’onde-audio terminée, appelez [**waveOutClose**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutclose) pour fermer le périphérique de sortie.</span><span class="sxs-lookup"><span data-stu-id="97191-260">After waveform-audio playback is complete, call [**waveOutClose**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutclose) to close the output device.</span></span> <span data-ttu-id="97191-261">Si **waveOutClose** est appelé pendant la lecture d’un fichier Waveform-Audio, l’opération de fermeture échoue et la fonction retourne un code d’erreur indiquant que l’appareil n’a pas été fermé.</span><span class="sxs-lookup"><span data-stu-id="97191-261">If **waveOutClose** is called while a waveform-audio file is playing, the close operation fails and the function returns an error code indicating that the device was not closed.</span></span> <span data-ttu-id="97191-262">Si vous ne souhaitez pas attendre la fin de la lecture avant de fermer l’appareil, appelez la fonction [**waveOutReset**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutreset) avant de fermer.</span><span class="sxs-lookup"><span data-stu-id="97191-262">If you do not want to wait for playback to end before closing the device, call the [**waveOutReset**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutreset) function before closing.</span></span> <span data-ttu-id="97191-263">Cela termine la lecture et permet la fermeture de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="97191-263">This ends playback and allows the device to be closed.</span></span> <span data-ttu-id="97191-264">Veillez à utiliser la fonction [**waveOutUnprepareHeader**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutunprepareheader) pour nettoyer la préparation sur tous les blocs de données avant de fermer l’appareil.</span><span class="sxs-lookup"><span data-stu-id="97191-264">Be sure to use the [**waveOutUnprepareHeader**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutunprepareheader) function to clean up the preparation on all data blocks before closing the device.</span></span>

 

 