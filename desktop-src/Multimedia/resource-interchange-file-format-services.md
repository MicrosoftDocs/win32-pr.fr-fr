---
title: Services de format de fichier de l’échange de ressources
description: Services de format de fichier de l’échange de ressources
ms.assetid: 8526794b-7b40-470f-94f7-935d7dbf9151
keywords:
- e/s de fichier multimédia, format RIFF (Resource Interchange File Format)
- e/s de fichier, format RIFF (Resource Interchange File Format)
- entrée et sortie (e/s), format RIFF (Resource Interchange File Format)
- E/s (entrée et sortie), format RIFF (Resource Interchange File Format)
- mmioOpen fonction)
- RIFF (Resource Interchange File Format)
- RIFF (Resource Interchange File Format)
- E/S RIFF
- Bloc RIFF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 50cca3792ccded248951065c7b69f2e50d27e0ba
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104314681"
---
# <a name="resource-interchange-file-format-services"></a><span data-ttu-id="d002e-112">Services de format de fichier de l’échange de ressources</span><span class="sxs-lookup"><span data-stu-id="d002e-112">Resource Interchange File Format Services</span></span>

<span data-ttu-id="d002e-113">Le format par défaut pour les fichiers multimédias est RIFF (Resource Interchange File Format).</span><span class="sxs-lookup"><span data-stu-id="d002e-113">The preferred format for multimedia files is resource interchange file format (RIFF).</span></span> <span data-ttu-id="d002e-114">Les fonctions d’e/s de fichier RIFF fonctionnent avec les services d’e/s de fichier de base mis en mémoire tampon et non mis en mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="d002e-114">The RIFF file I/O functions work with the basic buffered and unbuffered file I/O services.</span></span> <span data-ttu-id="d002e-115">Vous pouvez ouvrir, lire et écrire des fichiers RIFF de la même façon que d’autres types de fichiers.</span><span class="sxs-lookup"><span data-stu-id="d002e-115">You can open, read, and write RIFF files in the same way as other file types.</span></span> <span data-ttu-id="d002e-116">Pour plus d’informations sur RIFF, consultez [fonctions et macros avifile](avifile-functions-and-macros.md).</span><span class="sxs-lookup"><span data-stu-id="d002e-116">For detailed information about RIFF, see [AVIFile Functions and Macros](avifile-functions-and-macros.md).</span></span>

<span data-ttu-id="d002e-117">Les fichiers RIFF utilisent des codes à quatre caractères pour identifier les éléments de fichier.</span><span class="sxs-lookup"><span data-stu-id="d002e-117">RIFF files use four-character codes to identify file elements.</span></span> <span data-ttu-id="d002e-118">Ces codes sont des quantités 32 bits représentant une séquence de un à quatre caractères alphanumériques ASCII, remplis sur la droite avec des espaces.</span><span class="sxs-lookup"><span data-stu-id="d002e-118">These codes are 32-bit quantities representing a sequence of one to four ASCII alphanumeric characters, padded on the right with space characters.</span></span> <span data-ttu-id="d002e-119">Le type de données pour les codes à quatre caractères est **FourCC**.</span><span class="sxs-lookup"><span data-stu-id="d002e-119">The data type for four-character codes is **FOURCC**.</span></span> <span data-ttu-id="d002e-120">Utilisez la macro [**mmioFOURCC**](/windows/win32/api/vfw/nf-vfw-mmiofourcc) pour convertir quatre caractères en un code à quatre caractères.</span><span class="sxs-lookup"><span data-stu-id="d002e-120">Use the [**mmioFOURCC**](/windows/win32/api/vfw/nf-vfw-mmiofourcc) macro to convert four characters into a four-character code.</span></span> <span data-ttu-id="d002e-121">Pour convertir une chaîne se terminant par un caractère null en code à quatre caractères, utilisez la fonction [**mmioStringToFOURCC**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiostringtofourcc) .</span><span class="sxs-lookup"><span data-stu-id="d002e-121">To convert a null-terminated string into a four-character code, use the [**mmioStringToFOURCC**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiostringtofourcc) function.</span></span>

<span data-ttu-id="d002e-122">Le bloc de construction de base d’un fichier RIFF est un *segment*.</span><span class="sxs-lookup"><span data-stu-id="d002e-122">The basic building block of a RIFF file is a *chunk*.</span></span> <span data-ttu-id="d002e-123">Un segment est une unité logique de données multimédias, telle qu’une image unique dans un clip vidéo.</span><span class="sxs-lookup"><span data-stu-id="d002e-123">A chunk is a logical unit of multimedia data, such as a single frame in a video clip.</span></span> <span data-ttu-id="d002e-124">Chaque segment contient les champs suivants :</span><span class="sxs-lookup"><span data-stu-id="d002e-124">Each chunk contains the following fields:</span></span>

-   <span data-ttu-id="d002e-125">Code à quatre caractères spécifiant l’identificateur de bloc</span><span class="sxs-lookup"><span data-stu-id="d002e-125">A four-character code specifying the chunk identifier</span></span>
-   <span data-ttu-id="d002e-126">Valeur de mot double qui spécifie la taille du membre de données dans le bloc</span><span class="sxs-lookup"><span data-stu-id="d002e-126">A doubleword value specifying the size of the data member in the chunk</span></span>
-   <span data-ttu-id="d002e-127">Un champ de données</span><span class="sxs-lookup"><span data-stu-id="d002e-127">A data field</span></span>

<span data-ttu-id="d002e-128">L’illustration suivante montre un bloc « RIFF » qui contient deux sous-segments.</span><span class="sxs-lookup"><span data-stu-id="d002e-128">The following illustration shows a "RIFF" chunk that contains two subchunks.</span></span>

![bloc riff contenant deux images de sous-bloc](images/mmio1.gif)

<span data-ttu-id="d002e-130">Un segment contenu dans un autre segment est un sous- *bloc*.</span><span class="sxs-lookup"><span data-stu-id="d002e-130">A chunk contained in another chunk is a *subchunk*.</span></span> <span data-ttu-id="d002e-131">Les seuls segments autorisés à contenir des sous-segments sont ceux dont l’identificateur de segment est « RIFF » ou « LIST ».</span><span class="sxs-lookup"><span data-stu-id="d002e-131">The only chunks allowed to contain subchunks are those with a chunk identifier of "RIFF" or "LIST".</span></span> <span data-ttu-id="d002e-132">Un segment qui contient un autre segment est appelé un *segment parent*.</span><span class="sxs-lookup"><span data-stu-id="d002e-132">A chunk that contains another chunk is called a *parent chunk*.</span></span> <span data-ttu-id="d002e-133">Le premier segment d’un fichier RIFF doit être un bloc « RIFF ».</span><span class="sxs-lookup"><span data-stu-id="d002e-133">The first chunk in a RIFF file must be a "RIFF" chunk.</span></span> <span data-ttu-id="d002e-134">Tous les autres segments du fichier sont des sous-segments du bloc « RIFF ».</span><span class="sxs-lookup"><span data-stu-id="d002e-134">All other chunks in the file are subchunks of the "RIFF" chunk.</span></span>

<span data-ttu-id="d002e-135">Les segments « RIFF » incluent un champ supplémentaire dans les quatre premiers octets du champ de données.</span><span class="sxs-lookup"><span data-stu-id="d002e-135">"RIFF" chunks include an additional field in the first four bytes of the data field.</span></span> <span data-ttu-id="d002e-136">Ce champ supplémentaire fournit le *type de formulaire* du champ.</span><span class="sxs-lookup"><span data-stu-id="d002e-136">This additional field provides the *form type* of the field.</span></span> <span data-ttu-id="d002e-137">Le type de formulaire est un code à quatre caractères identifiant le format des données stockées dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="d002e-137">The form type is a four-character code identifying the format of the data stored in the file.</span></span> <span data-ttu-id="d002e-138">Par exemple, les fichiers audio Microsoft Waveform ont un type de formulaire « WAVE ».</span><span class="sxs-lookup"><span data-stu-id="d002e-138">For example, Microsoft waveform-audio files have a form type of "WAVE".</span></span>

<span data-ttu-id="d002e-139">Les segments « LIST » incluent également un champ supplémentaire dans les quatre premiers octets du champ de données.</span><span class="sxs-lookup"><span data-stu-id="d002e-139">"LIST" chunks also include an additional field in the first four bytes of the data field.</span></span> <span data-ttu-id="d002e-140">Ce champ supplémentaire contient le *type de liste* du champ.</span><span class="sxs-lookup"><span data-stu-id="d002e-140">This additional field contains the *list type* of the field.</span></span> <span data-ttu-id="d002e-141">Le type de liste est un code à quatre caractères identifiant le contenu de la liste.</span><span class="sxs-lookup"><span data-stu-id="d002e-141">The list type is a four-character code identifying the contents of the list.</span></span> <span data-ttu-id="d002e-142">Par exemple, un bloc « LIST » avec un type de liste « INFO » peut contenir des blocs « ICOP » et « ICRD » fournissant des informations sur la date de copyright et de création.</span><span class="sxs-lookup"><span data-stu-id="d002e-142">For example, a "LIST" chunk with a list type of "INFO" can contain "ICOP" and "ICRD" chunks providing copyright and creation date information.</span></span> <span data-ttu-id="d002e-143">L’illustration suivante montre un bloc « RIFF » qui contient un bloc « LIST » et un autre sous-bloc (le segment « LIST » contient deux sous-segments).</span><span class="sxs-lookup"><span data-stu-id="d002e-143">The following illustration shows a "RIFF" chunk that contains a "LIST" chunk and one other subchunk (the "LIST" chunk contains two subchunks).</span></span>

![bloc riff contenant une image de segment de liste](images/mmio2.gif)

<span data-ttu-id="d002e-145">Les services d’e/s de fichier multimédia incluent deux fonctions que vous pouvez utiliser pour naviguer parmi les segments d’un fichier RIFF : [**mmioAscend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioascend) et [**mmioDescend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiodescend).</span><span class="sxs-lookup"><span data-stu-id="d002e-145">Multimedia file I/O services include two functions you can use to navigate among chunks in a RIFF file: [**mmioAscend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioascend) and [**mmioDescend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiodescend).</span></span> <span data-ttu-id="d002e-146">Vous pouvez utiliser ces fonctions comme fonctions de recherche de haut niveau.</span><span class="sxs-lookup"><span data-stu-id="d002e-146">You can use these functions as high-level seek functions.</span></span> <span data-ttu-id="d002e-147">Quand vous descendez dans un segment, la position de fichier est définie sur le champ de données du segment (8 octets à partir du début du bloc).</span><span class="sxs-lookup"><span data-stu-id="d002e-147">When you descend into a chunk, the file position is set to the data field of the chunk (8 bytes from the beginning of the chunk).</span></span> <span data-ttu-id="d002e-148">Pour les segments « RIFF » et « liste », la position de fichier est définie sur l’emplacement suivant le type de formulaire ou le type de liste (12 octets à partir du début du bloc).</span><span class="sxs-lookup"><span data-stu-id="d002e-148">For "RIFF" and "LIST" chunks, the file position is set to the location following the form type or list type (12 bytes from the beginning of the chunk).</span></span> <span data-ttu-id="d002e-149">Lorsque vous vous retrouvez à l’extérieur d’un bloc, la position de fichier est définie à l’emplacement qui suit la fin du bloc.</span><span class="sxs-lookup"><span data-stu-id="d002e-149">When you ascend out of a chunk, the file position is set to the location following the end of the chunk.</span></span>

<span data-ttu-id="d002e-150">Pour créer un nouveau bloc, utilisez la fonction [**mmioCreateChunk**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiocreatechunk) pour écrire un en-tête de bloc à la position actuelle dans un fichier ouvert.</span><span class="sxs-lookup"><span data-stu-id="d002e-150">To create a new chunk, use the [**mmioCreateChunk**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiocreatechunk) function to write a chunk header at the current position in an open file.</span></span> <span data-ttu-id="d002e-151">Les fonctions **mmioAscend**, **mmioDescend** et **mmioCreateChunk** utilisent la structure [**MMCKINFO**](/windows/win32/api/mmiscapi/ns-mmiscapi-mmckinfo) pour spécifier et récupérer des informations sur les segments « riff ».</span><span class="sxs-lookup"><span data-stu-id="d002e-151">The **mmioAscend**, **mmioDescend**, and **mmioCreateChunk** functions use the [**MMCKINFO**](/windows/win32/api/mmiscapi/ns-mmiscapi-mmckinfo) structure to specify and retrieve information about "RIFF" chunks.</span></span>

 

 