---
title: Algorithmes et schéma de profil de modèle de mappage de couleur WCS
description: Algorithmes et schéma de profil de modèle de mappage de couleur WCS
ms.assetid: 64b9871a-1b4f-4e9a-be4d-4c25b3198b91
keywords:
- Windows Color System (WCS), profil de modèle de mappage de gammes (GMMP)
- WCS (système de couleurs Windows), profil de modèle de mappage de gammes (GMMP)
- gestion des couleurs des images, profil de modèle de carte de couleurs (GMMP)
- gestion des couleurs, profil de modèle de carte de couleurs (GMMP)
- couleurs, profil de modèle de mappage de couleurs (GMMP)
- Système de couleurs Windows (WCS), profils
- WCS (système de couleurs Windows), profils
- gestion des couleurs des images, profils
- gestion des couleurs, profils
- couleurs, profils
- Profil de modèle de mappage de gammes (GMMP)
- GMMP (profil de modèle de mappage de gamme)
- Profil de modèle de mappage de gammes WCS
- schémas, profil de modèle de mappage de gammes (GMMP)
- algorithmes, profil de modèle de mappage de couleurs (GMMP)
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3714e5d7592cb1fbbbfa98e238642a2fcb38bafd
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/05/2021
ms.locfileid: "104562681"
---
# <a name="wcs-gamut-map-model-profile-schema-and-algorithms"></a><span data-ttu-id="cc99a-118">Algorithmes et schéma de profil de modèle de mappage de couleur WCS</span><span class="sxs-lookup"><span data-stu-id="cc99a-118">WCS Gamut Map Model Profile Schema and Algorithms</span></span>

-   [<span data-ttu-id="cc99a-119">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="cc99a-119">Overview</span></span>](#overview)
-   [<span data-ttu-id="cc99a-120">Architecture du profil de modèle de mappage de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-120">Gamut Map Model Profile Architecture</span></span>](#gamut-map-model-profile-architecture)
-   [<span data-ttu-id="cc99a-121">Génération de la limite de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-121">Generation of the Gamut Boundary</span></span>](#generation-of-the-gamut-boundary)
-   [<span data-ttu-id="cc99a-122">Schéma GMMP</span><span class="sxs-lookup"><span data-stu-id="cc99a-122">The GMMP Schema</span></span>](#the-gmmp-schema)
-   [<span data-ttu-id="cc99a-123">Éléments du schéma GMMP</span><span class="sxs-lookup"><span data-stu-id="cc99a-123">The GMMP Schema Elements</span></span>](#the-gmmp-schema-elements)
-   [<span data-ttu-id="cc99a-124">GamutMapModel</span><span class="sxs-lookup"><span data-stu-id="cc99a-124">GamutMapModel</span></span>](#defaultbaselinegamutmapmodel-type)
    -   [<span data-ttu-id="cc99a-125">Espace de noms</span><span class="sxs-lookup"><span data-stu-id="cc99a-125">Namespace</span></span>](#namespace)
    -   [<span data-ttu-id="cc99a-126">Version</span><span class="sxs-lookup"><span data-stu-id="cc99a-126">Version</span></span>](#version)
    -   [<span data-ttu-id="cc99a-127">Documentation</span><span class="sxs-lookup"><span data-stu-id="cc99a-127">Documentation</span></span>](#documentation)
    -   [<span data-ttu-id="cc99a-128">Type DefaultBaselineGamutMapModel</span><span class="sxs-lookup"><span data-stu-id="cc99a-128">DefaultBaselineGamutMapModel type</span></span>](#defaultbaselinegamutmapmodel-type)
    -   [<span data-ttu-id="cc99a-129">PlugInGamutMapType</span><span class="sxs-lookup"><span data-stu-id="cc99a-129">PlugInGamutMapType</span></span>](#plugingamutmaptype)
    -   [<span data-ttu-id="cc99a-130">ExtensionType</span><span class="sxs-lookup"><span data-stu-id="cc99a-130">ExtensionType</span></span>](#extensiontype)
-   [<span data-ttu-id="cc99a-131">Algorithmes de base GMMP</span><span class="sxs-lookup"><span data-stu-id="cc99a-131">The GMMP Baseline Algorithms</span></span>](#the-gmmp-baseline-algorithms)
-   [<span data-ttu-id="cc99a-132">Alignement des axes neutres</span><span class="sxs-lookup"><span data-stu-id="cc99a-132">Aligning the Neutral Axes</span></span>](#aligning-the-neutral-axes)
    -   [<span data-ttu-id="cc99a-133">Différence de couleur minimale (hachée)</span><span class="sxs-lookup"><span data-stu-id="cc99a-133">Minimum Color Difference (MinCD)</span></span>](#minimum-color-difference-mincd)
    -   [<span data-ttu-id="cc99a-134">BasicPhoto</span><span class="sxs-lookup"><span data-stu-id="cc99a-134">BasicPhoto</span></span>](#basicphoto)
    -   [<span data-ttu-id="cc99a-135">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="cc99a-135">Overview</span></span>](#overview)
    -   [<span data-ttu-id="cc99a-136">Cas de l’interpréteur de couleurs simple</span><span class="sxs-lookup"><span data-stu-id="cc99a-136">The case of single gamut shell</span></span>](#the-case-of-single-gamut-shell)
    -   [<span data-ttu-id="cc99a-137">Amélioration du noir</span><span class="sxs-lookup"><span data-stu-id="cc99a-137">Black enhancement</span></span>](#black-enhancement)
    -   [<span data-ttu-id="cc99a-138">Cas des interpréteurs de couleurs doubles</span><span class="sxs-lookup"><span data-stu-id="cc99a-138">The case of dual gamut shells</span></span>](#the-case-of-dual-gamut-shells)
    -   [<span data-ttu-id="cc99a-139">Raisons des modifications des recommandations CIE TC8-03</span><span class="sxs-lookup"><span data-stu-id="cc99a-139">Reasons for changes from the CIE TC8-03 recommendations</span></span>](#reasons-for-changes-from-the-cie-tc8-03-recommendations)
    -   [<span data-ttu-id="cc99a-140">Mappage de teinte</span><span class="sxs-lookup"><span data-stu-id="cc99a-140">Hue mapping</span></span>](#hue-mapping)
-   [<span data-ttu-id="cc99a-141">Description de la limite de la gamme et algorithmes de Shell de couleurs</span><span class="sxs-lookup"><span data-stu-id="cc99a-141">Gamut Boundary Description and Gamut Shell Algorithms</span></span>](#gamut-boundary-description-and-gamut-shell-algorithms)
    -   [<span data-ttu-id="cc99a-142">Triangulation de la limite de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-142">Triangulation of the Gamut Boundary</span></span>](#triangulation-of-the-gamut-boundary)
    -   [<span data-ttu-id="cc99a-143">Éléments de ligne de limite</span><span class="sxs-lookup"><span data-stu-id="cc99a-143">Boundary Line Elements</span></span>](#boundary-line-elements)
    -   [<span data-ttu-id="cc99a-144">Opération de gamme : CheckGamut</span><span class="sxs-lookup"><span data-stu-id="cc99a-144">Gamut Operation: CheckGamut</span></span>](#gamut-operation-checkgamut)
    -   [<span data-ttu-id="cc99a-145">Plan de teinte complet : Intersect</span><span class="sxs-lookup"><span data-stu-id="cc99a-145">Full Hue Plane: Intersect</span></span>](#full-hue-plane-intersect)
    -   [<span data-ttu-id="cc99a-146">Opération de gamme : CheckGamut (suite)</span><span class="sxs-lookup"><span data-stu-id="cc99a-146">Gamut Operation: CheckGamut (continued)</span></span>](#gamut-operation-checkgamut-continued)
    -   [<span data-ttu-id="cc99a-147">Mappage de la gamme des couleurs de différence minimale</span><span class="sxs-lookup"><span data-stu-id="cc99a-147">Minimum Color Difference Gamut Mapping</span></span>](#minimum-color-difference-gamut-mapping)
    -   [<span data-ttu-id="cc99a-148">Lissage des teintes</span><span class="sxs-lookup"><span data-stu-id="cc99a-148">Hue Smoothing</span></span>](#hue-smoothing)
    -   [<span data-ttu-id="cc99a-149">Définition des serveurs primaires et secondaires dans la description des limites de la gamme de couleurs</span><span class="sxs-lookup"><span data-stu-id="cc99a-149">Setting Primaries and Secondaries in the Gamut Boundary Description</span></span>](#setting-primaries-and-secondaries-in-the-gamut-boundary-description)
    -   [<span data-ttu-id="cc99a-150">Définition de l’axe neutre dans la description des limites de la gamme de couleurs</span><span class="sxs-lookup"><span data-stu-id="cc99a-150">Setting the Neutral Axis in the Gamut Boundary Description</span></span>](#setting-the-neutral-axis-in-the-gamut-boundary-description)
-   [<span data-ttu-id="cc99a-151">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="cc99a-151">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="cc99a-152">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="cc99a-152">Overview</span></span>

<span data-ttu-id="cc99a-153">Ce schéma est utilisé pour spécifier le contenu d’un profil de modèle de mappage de gammes (GMMP).</span><span class="sxs-lookup"><span data-stu-id="cc99a-153">This schema is used to specify the content of a gamut map model profile (GMMP).</span></span> <span data-ttu-id="cc99a-154">Les algorithmes de base de référence associés sont décrits dans la rubrique suivante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-154">The associated baseline algorithms are described in the following topic.</span></span>

<span data-ttu-id="cc99a-155">Le schéma GMMP de base se compose d’informations d’en-tête communes, d’une référence facultative à un plug-in de modèle de carte de couleurs préféré et de balises d’extension.</span><span class="sxs-lookup"><span data-stu-id="cc99a-155">The basic GMMP schema consists of common header information, an optional reference to a preferred Gamut Map Model plug-in, and extension tags.</span></span>

<span data-ttu-id="cc99a-156">En outre, le GMMP fournit des informations explicites sur le modèle de mappage de gamme ciblé, et fournit une stratégie sur le modèle de mappage de la gamme de modèles de base de référence à utiliser si le modèle ciblé n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-156">In addition, the GMMP provides explicit information on the targeted Gamut Map Model, and provides a policy on the baseline fallback Gamut Map Model to use if the targeted model is unavailable.</span></span> <span data-ttu-id="cc99a-157">Le schéma peut inclure des informations d’extension privées, mais il n’inclura aucune autre information superflue.</span><span class="sxs-lookup"><span data-stu-id="cc99a-157">The schema can include private extensional information, but will include no other extraneous information.</span></span>

## <a name="gamut-map-model-profile-architecture"></a><span data-ttu-id="cc99a-158">Architecture du profil de modèle de mappage de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-158">Gamut Map Model Profile Architecture</span></span>

![Diagramme illustrant le profil de modèle de carte de couleurs.](images/gmmp-image002.png)

<span data-ttu-id="cc99a-160">L’échantillonnage de l’espace colorimétrique du périphérique de sortie s’effectue en itérant les colorants de 0,0 à 1,0 avec une étape fractionnaire, en cumulant toutes les combinaisons de chaque couleur à chaque étape, puis en les convertissant de l’espace de couleur de l’appareil vers l’espace d’apparence de couleur à l’aide de la méthode DM ::D eviceToColorimetricColors suivie de la méthode CAM :: ColorimetricToAppearanceColors.</span><span class="sxs-lookup"><span data-stu-id="cc99a-160">The sampling of the output device colorant space is done by iterating through the colorants from 0.0 to 1.0 with a fractional step, accumulating all combinations of each colorant at each step, and then converting them from device colorant space to color appearance space using the DM::DeviceToColorimetricColors method followed by the CAM::ColorimetricToAppearanceColors method.</span></span> <span data-ttu-id="cc99a-161">Vous trouverez ci-dessous un exemple de cette opération pour RVB.</span><span class="sxs-lookup"><span data-stu-id="cc99a-161">The following is an example of how this is done for RGB.</span></span>


```C++
For (red= 0.0; red <= 1.0; red += redStep) {

     For (green = 0.0; green <= 1.0; green += greenStep) {

          For (blue = 0.0; blue <= 1.0; blue += blueStep) {

               Colorants[0] = red; colorants[1] = green; colorants[2] = blue;

               pRGBDM->DeviceToColorimetricColors(1, colorants, &amp;XYZ);

               pCAM->ColorimetricToAppearanceColors(1, &amp;XYZ, &amp;JCh);

          }

     }

}

```



## <a name="generation-of-the-gamut-boundary"></a><span data-ttu-id="cc99a-162">Génération de la limite de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-162">Generation of the Gamut Boundary</span></span>

<span data-ttu-id="cc99a-163">Il y a trois composants à la limite de la gamme : les primaires, les échantillons neutres et les coques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-163">There are three components to the gamut boundary: the primaries, the neutral samples, and the shells.</span></span> <span data-ttu-id="cc99a-164">Les principaux sont générés en utilisant les unités primaires des appareils et en appliquant la transformation DeviceToColorimetric/ColorimetricToAppearance.</span><span class="sxs-lookup"><span data-stu-id="cc99a-164">The primaries are generated by taking the device primaries and applying the DeviceToColorimetric/ColorimetricToAppearance transformation.</span></span> <span data-ttu-id="cc99a-165">Les échantillons neutres sont générés en échantillonnant l’espace de couleur de l’appareil dans la zone neutre et en appliquant la même transformation.</span><span class="sxs-lookup"><span data-stu-id="cc99a-165">The neutral samples are generated by sampling the device colorant space in the neutral area and applying the same transformation.</span></span> <span data-ttu-id="cc99a-166">Pour les trois appareils de couleur (RVB ou CMJ), les échantillons neutres sont définis comme ayant tous les colorants égaux, par exemple R = = G = = B. Pour le format CMJN, les échantillons neutres sont définis comme ayant C = = M = = Y = = 0.</span><span class="sxs-lookup"><span data-stu-id="cc99a-166">For three colorant devices (RGB or CMY), the neutral samples are defined as having all of the colorants equal, for example, R == G == B. For CMYK, the neutral samples are defined as having C == M == Y == 0.</span></span>

<span data-ttu-id="cc99a-167">Les facteurs qui influencent les données utilisées pour créer la limite de gamme sont les exemples de données (appareils de base uniquement) et les conditions d’affichage.</span><span class="sxs-lookup"><span data-stu-id="cc99a-167">The factors that influence the data used to create the gamut boundary are the data samples (baseline devices only) and the viewing conditions.</span></span> <span data-ttu-id="cc99a-168">La taille de l’étape utilisée pour l’échantillonnage complet de l’espace de couleur (pour les moniteurs et pour l’interpréteur de commandes plausible) est une constante interne et n’est pas disponible pour une manipulation externe.</span><span class="sxs-lookup"><span data-stu-id="cc99a-168">The step size used to do the full sampling of the colorant space (for monitors and for plausible shell) is an internal constant and isn't available for outside manipulation.</span></span> <span data-ttu-id="cc99a-169">La modification des conditions d’affichage modifie le comportement du modèle d’apparence des couleurs (CAM) et modifie la forme de la limite de la gamme. vous devez donc générer une limite de la gamme liée au profil des conditions d’affichage.</span><span class="sxs-lookup"><span data-stu-id="cc99a-169">Changing the viewing conditions changes the behavior of the color appearance model (CAM) and alters the shape of the gamut boundary, so you must generate a gamut boundary tied to the viewing conditions profile.</span></span> <span data-ttu-id="cc99a-170">Si des exemples de données sont utilisés, comme dans le cas des imprimantes de référence et des périphériques de capture, les exemples auront un impact important sur la forme de la gamme de référence et affectent le comportement du modèle lui-même.</span><span class="sxs-lookup"><span data-stu-id="cc99a-170">If sample data is used, as in the case of baseline printers and capture devices, then the samples will have a lot of impact on the shape of the reference gamut and affect the behavior of the model itself.</span></span>

<span data-ttu-id="cc99a-171">Pour les périphériques d’entrée, tels que les appareils photo et les scanneurs, des échantillonnages différents sont utilisés pour générer l’interpréteur de commandes de référence et l’interpréteur de commandes plausible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-171">For input devices, such as cameras and scanners, different samplings are used to generate the reference shell and the plausible shell.</span></span> <span data-ttu-id="cc99a-172">L’interpréteur de commandes de référence est généré à partir des mesures utilisées pour initialiser le modèle d’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-172">The reference shell is generated from the measurements used to initialize the device model.</span></span> <span data-ttu-id="cc99a-173">L’interpréteur de commandes plausible est généré de la même façon que l’illustration précédente pour les périphériques de sortie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-173">The plausible shell is generated similar to the prior illustration for output devices.</span></span> <span data-ttu-id="cc99a-174">La différence est que lorsque vous entrez une cible standard, vous ne recevez pas de valeurs entièrement saturées (où R, G ou B = 255).</span><span class="sxs-lookup"><span data-stu-id="cc99a-174">The difference it that when you input a typical target, you don't get fully saturated values (where R, G, or B = 255).</span></span> <span data-ttu-id="cc99a-175">Vous devez extrapoler à l’aide du modèle d’appareil pour estimer ces valeurs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-175">You must extrapolate using the device model to estimate those values.</span></span>

## <a name="the-gmmp-schema"></a><span data-ttu-id="cc99a-176">Schéma GMMP</span><span class="sxs-lookup"><span data-stu-id="cc99a-176">The GMMP Schema</span></span>


```C++
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema 
  xmlns:gmm="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"
  xmlns:wcs="http://schemas.microsoft.com/windows/2005/02/color/WcsCommonProfileTypes"
  targetNamespace="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"
  attributeFormDefault="unqualified"
  blockDefault="#all"
  version="1.0">

  <xs:annotation>
    <xs:documentation>
      Gamut Map Model profile schema.
      Copyright (C) Microsoft. All rights reserved.
    </xs:documentation>
  </xs:annotation>

  <xs:import namespace="http://schemas.microsoft.com/windows/2005/02/color/WcsCommonProfileTypes" />

  <xs:element name="GamutMapModel">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ProfileName" type="wcs:MultiLocalizedTextType"/>
        <xs:element name="Description" type="wcs:MultiLocalizedTextType" minOccurs="0"/>
        <xs:element name="Author" type="wcs:MultiLocalizedTextType" minOccurs="0"/>
        <xs:element name="DefaultBaselineGamutMapModel">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:enumeration value="HPMinCD_Absolute"/>
              <xs:enumeration value="HPMinCD_Relative"/>
              <xs:enumeration value="SGCK"/>
              <xs:enumeration value="HueMap"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:element>
        <xs:element name="PlugInGamutMapModel" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:any namespace="##other" processContents="skip"
                minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
            <xs:attribute name="GUID" type="wcs:GUIDType" use="required"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="ID" type="xs:string" use="optional" />
    </xs:complexType>
  </xs:element>
</xs:schema>
```



## <a name="the-gmmp-schema-elements"></a><span data-ttu-id="cc99a-177">Éléments du schéma GMMP</span><span class="sxs-lookup"><span data-stu-id="cc99a-177">The GMMP Schema Elements</span></span>

## <a name="gamutmapmodel"></a><span data-ttu-id="cc99a-178">GamutMapModel</span><span class="sxs-lookup"><span data-stu-id="cc99a-178">GamutMapModel</span></span>

<span data-ttu-id="cc99a-179">Cet élément est une séquence des sous-éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="cc99a-179">This element is a sequence of the following sub-elements:</span></span>

1.  <span data-ttu-id="cc99a-180">Chaîne ProfileName,</span><span class="sxs-lookup"><span data-stu-id="cc99a-180">ProfileName string,</span></span>
2.  <span data-ttu-id="cc99a-181">DefaultBaselineGamutMapModel,</span><span class="sxs-lookup"><span data-stu-id="cc99a-181">DefaultBaselineGamutMapModel,</span></span>
3.  <span data-ttu-id="cc99a-182">Chaîne de description facultative,</span><span class="sxs-lookup"><span data-stu-id="cc99a-182">Optional Description string,</span></span>
4.  <span data-ttu-id="cc99a-183">Chaîne d’auteur facultative,</span><span class="sxs-lookup"><span data-stu-id="cc99a-183">Optional Author string,</span></span>
5.  <span data-ttu-id="cc99a-184">PlugInGamutMap facultatif, et</span><span class="sxs-lookup"><span data-stu-id="cc99a-184">Optional PlugInGamutMap, and</span></span>
6.  <span data-ttu-id="cc99a-185">ExtensionType facultatif.</span><span class="sxs-lookup"><span data-stu-id="cc99a-185">Optional ExtensionType.</span></span>

<span data-ttu-id="cc99a-186">**Conditions de validation** : chaque sous-élément est validé par son propre type.</span><span class="sxs-lookup"><span data-stu-id="cc99a-186">**Validation conditions** : Each sub-element is validated by its own type.</span></span>

### <a name="namespace"></a><span data-ttu-id="cc99a-187">Espace de noms</span><span class="sxs-lookup"><span data-stu-id="cc99a-187">Namespace</span></span>

<span data-ttu-id="cc99a-188">xmlns : MGM = " http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel "</span><span class="sxs-lookup"><span data-stu-id="cc99a-188">xmlns:gmm="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"</span></span>

<span data-ttu-id="cc99a-189">targetNamespace = " http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel "</span><span class="sxs-lookup"><span data-stu-id="cc99a-189">targetNamespace="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"</span></span>

### <a name="version"></a><span data-ttu-id="cc99a-190">Version</span><span class="sxs-lookup"><span data-stu-id="cc99a-190">Version</span></span>

<span data-ttu-id="cc99a-191">Version « 1,0 » avec la première version de Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="cc99a-191">Version "1.0" with the first release of Windows Vista.</span></span>

<span data-ttu-id="cc99a-192">**Conditions de validation** : 1,0 dans Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="cc99a-192">**Validation conditions** : 1.0 in Windows Vista.</span></span> <span data-ttu-id="cc99a-193">&lt;Les Versions 2,0 sont également valides afin de prendre en charge les modifications sans rupture au format.</span><span class="sxs-lookup"><span data-stu-id="cc99a-193">Versions &lt;2.0 are also valid in order to support non-breaking changes to the format.</span></span>

### <a name="documentation"></a><span data-ttu-id="cc99a-194">Documentation</span><span class="sxs-lookup"><span data-stu-id="cc99a-194">Documentation</span></span>

<span data-ttu-id="cc99a-195">Schéma de profil de modèle de mappage de gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-195">Gamut Map Model Profile schema.</span></span>

<span data-ttu-id="cc99a-196">Copyright (C) Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cc99a-196">Copyright (C) Microsoft.</span></span> <span data-ttu-id="cc99a-197">Tous droits réservés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-197">All rights reserved.</span></span>

<span data-ttu-id="cc99a-198">**Conditions de validation** : chaque sous-élément est validé par son propre type.</span><span class="sxs-lookup"><span data-stu-id="cc99a-198">**Validation conditions** : Each sub-element is validated by its own type.</span></span>

### <a name="defaultbaselinegamutmapmodel-type"></a><span data-ttu-id="cc99a-199">Type DefaultBaselineGamutMapModel</span><span class="sxs-lookup"><span data-stu-id="cc99a-199">DefaultBaselineGamutMapModel type</span></span>

<span data-ttu-id="cc99a-200">UINT (type)</span><span class="sxs-lookup"><span data-stu-id="cc99a-200">UINT type</span></span>

<span data-ttu-id="cc99a-201">Valeurs d’énumération :</span><span class="sxs-lookup"><span data-stu-id="cc99a-201">Enumeration values:</span></span>

<dl> <span data-ttu-id="cc99a-202">« \_ Absolute Absolute »</span><span class="sxs-lookup"><span data-stu-id="cc99a-202">"MinCD\_Absolute"</span></span>  
<span data-ttu-id="cc99a-203">« Relative hachée \_ »</span><span class="sxs-lookup"><span data-stu-id="cc99a-203">"MinCD\_Relative"</span></span>  
<span data-ttu-id="cc99a-204">« genoux de la SIG \_ »</span><span class="sxs-lookup"><span data-stu-id="cc99a-204">"SIG\_KNEE"</span></span>  
<span data-ttu-id="cc99a-205">"HueMap"</span><span class="sxs-lookup"><span data-stu-id="cc99a-205">"HueMap"</span></span>  
</dl>

<span data-ttu-id="cc99a-206">**Conditions de validation** : les valeurs doivent correspondre à l’une des énumérations ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="cc99a-206">**Validation conditions** : The values must match one of the enumerations above.</span></span>

### <a name="plugingamutmaptype"></a><span data-ttu-id="cc99a-207">PlugInGamutMapType</span><span class="sxs-lookup"><span data-stu-id="cc99a-207">PlugInGamutMapType</span></span>

<span data-ttu-id="cc99a-208">Cet élément est une séquence d’un GUID GUIDType et de tous les sous-éléments.</span><span class="sxs-lookup"><span data-stu-id="cc99a-208">This element is a sequence of a GUID GUIDType and any sub-elements.</span></span>

<span data-ttu-id="cc99a-209">**Conditions de validation** : le GUID est utilisé pour faire correspondre le GUID de la dll du plug-in MGM.</span><span class="sxs-lookup"><span data-stu-id="cc99a-209">**Validation conditions** : The GUID is used to match the GMM PlugIn DLL GUID.</span></span> <span data-ttu-id="cc99a-210">Il y a un maximum de 100 000 sous-éléments personnalisés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-210">There are a maximum of 100,000 custom sub-elements.</span></span>

### <a name="extensiontype"></a><span data-ttu-id="cc99a-211">ExtensionType</span><span class="sxs-lookup"><span data-stu-id="cc99a-211">ExtensionType</span></span>

<span data-ttu-id="cc99a-212">Cet élément est une séquence facultative de tous les sous-éléments.</span><span class="sxs-lookup"><span data-stu-id="cc99a-212">This element is a optional sequence of any sub-elements.</span></span>

<span data-ttu-id="cc99a-213">**Conditions de validation** : il peut y avoir un maximum de 100 000 sous-éléments.</span><span class="sxs-lookup"><span data-stu-id="cc99a-213">**Validation conditions** : There can be a maximum of 100,000 sub-elements.</span></span>

## <a name="the-gmmp-baseline-algorithms"></a><span data-ttu-id="cc99a-214">Algorithmes de base GMMP</span><span class="sxs-lookup"><span data-stu-id="cc99a-214">The GMMP Baseline Algorithms</span></span>

## <a name="aligning-the-neutral-axes"></a><span data-ttu-id="cc99a-215">Alignement des axes neutres</span><span class="sxs-lookup"><span data-stu-id="cc99a-215">Aligning the Neutral Axes</span></span>

<span data-ttu-id="cc99a-216">La plupart des algorithmes de mappage de gammes ont un objectif de mapper l’axe neutre de l’appareil source à l’axe neutre du périphérique de destination : autrement dit, le blanc passe au blanc, noir à noir et gris à gris.</span><span class="sxs-lookup"><span data-stu-id="cc99a-216">Most gamut mapping algorithms have a goal of mapping the neutral axis of the source device to the neutral axis of the destination device: that is, white goes to white, black to black, and gray to gray.</span></span> <span data-ttu-id="cc99a-217">Cela est traité en partie par la mise à l’échelle de la luminosité des couleurs sources pour correspondre à la plage de luminosité du périphérique de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-217">This is addressed in part by scaling the lightness of source colors to match the lightness range of the destination device.</span></span> <span data-ttu-id="cc99a-218">Mais cela ne traite pas complètement le problème.</span><span class="sxs-lookup"><span data-stu-id="cc99a-218">But that does not completely address the problem.</span></span>

<span data-ttu-id="cc99a-219">Il s’agit d’une propriété physique de la plupart des appareils de création d’images dont la chromatique de l’appareil ne correspond pas exactement à la chromatique du périphérique noir.</span><span class="sxs-lookup"><span data-stu-id="cc99a-219">It is a physical property of most imaging devices that the chromaticity of the device white does not exactly match the chromaticity of the device black.</span></span> <span data-ttu-id="cc99a-220">Par exemple, le blanc du moniteur dépend de la somme des chromatiques et des luminances relatives des trois primaires, tandis que le noir du moniteur dépend de la réflectivité de la surface d’affichage.</span><span class="sxs-lookup"><span data-stu-id="cc99a-220">For example, monitor white depends on the sum of the chromaticities and relative luminances of the three primaries, while monitor black depends on the reflectance of the display surface.</span></span> <span data-ttu-id="cc99a-221">Le blanc de l’imprimante dépend de la chromatique du papier, tandis que le noir de l’imprimante dépend de l’encre ou du toner utilisé.</span><span class="sxs-lookup"><span data-stu-id="cc99a-221">Printer white depends on the chromaticity of the paper, while printer black depends on the ink or toner used.</span></span> <span data-ttu-id="cc99a-222">Modèle d’apparence qui mappe exactement le blanc de l’appareil à l’axe neutre de l’espace d’apparence (Chroma exactement égal à zéro) ne mappe pas le noir du périphérique à l’axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-222">An appearance model that maps device white exactly to the neutral axis of the appearance space (chroma exactly equal to zero) will not map device black to the neutral axis.</span></span> <span data-ttu-id="cc99a-223">Étant donné que l’œil est plus sensible aux différences chromatiques au fur et à mesure que les légères augmentent, les nuances de gris sont représentées comme plus chromatiques que le noir de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-223">Because the eye is more sensitive to chroma differences as lightness increases, mid-grays will be represented as even more chromatic than device black.</span></span> <span data-ttu-id="cc99a-224">(La figure 1 illustre la courbure des axes neutres dans deux dimensions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-224">(Figure 1 illustrates the curvature of the neutral axes in two dimensions.</span></span> <span data-ttu-id="cc99a-225">En fait, les axes neutres forment une courbe plus complexe en trois dimensions.)</span><span class="sxs-lookup"><span data-stu-id="cc99a-225">In fact, the neutral axes form a more complex curve in three dimensions.)</span></span>

<span data-ttu-id="cc99a-226">Alors que la FAO prédit que ces couleurs neutres d’appareil apparaissent chromatiques, les observateurs réels semblent compenser.</span><span class="sxs-lookup"><span data-stu-id="cc99a-226">While the CAM predicts that these device neutral colors will appear chromatic, actual observers seem to compensate for this.</span></span> <span data-ttu-id="cc99a-227">La plupart des gens ne considèrent pas ces valeurs neutres d’appareil comme des valeurs chromatiques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-227">Most people do not consider these device neutral values to be chromatic.</span></span> <span data-ttu-id="cc99a-228">Pour la plupart des modèles de mappage de gamme, vous devez donc continuer à mapper la source neutre aux neutres de périphérique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-228">For most gamut mapping models, therefore, you should continue to map source neutrals to device neutrals.</span></span>

<span data-ttu-id="cc99a-229">Pour mapper des sources neutres à des neutres de périphérique, ajustez les limites de la gamme source et de destination et chaque pixel quand vous appliquez l’algorithme de mappage de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-229">To map source neutrals to device neutrals, adjust the source and destination gamut boundaries and each pixel when you apply the gamut mapping algorithm.</span></span> <span data-ttu-id="cc99a-230">Ajustez tout d’abord chaque valeur dans la couleur source afin que l’axe neutre de l’appareil source à la luminosité de la couleur source se situe directement sur l’axe neutre de l’espace d’apparence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-230">First adjust each value in the source color so that the source device's neutral axis at the source color's lightness falls directly on the neutral axis of the appearance space.</span></span> <span data-ttu-id="cc99a-231">(Voir la partie gauche de la figure 1.) Ajustez ensuite la description de la gamme de l’appareil de destination de manière à ce que chaque couleur sur l’axe neutre de l’appareil de destination à la luminosité de la couleur de la limite de la gamme de l’appareil de destination soit directement sur l’axe neutre de l’espace d’apparence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-231">(See the left side of Figure 1.) Then adjust the destination device's gamut boundary description so that each color on the destination device's neutral axis at the destination device gamut boundary color's lightness falls directly on the neutral axis of the appearance space.</span></span> <span data-ttu-id="cc99a-232">(Voir la partie droite de la figure 1.)</span><span class="sxs-lookup"><span data-stu-id="cc99a-232">(See the right side of Figure 1.)</span></span>

![Diagramme qui montre le graphique de la limite de gammes sources à gauche et la limite de la gamme de destination à droite.](images/gmmp-image004.png)

<span data-ttu-id="cc99a-234">**Figure 1** : alignement des axes neutres illustrés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-234">**Figure 1** : Alignment of the neutral axes illustrated.</span></span> <span data-ttu-id="cc99a-235">Gauche : ajustement des points source par rapport à l’axe neutre du périphérique source.</span><span class="sxs-lookup"><span data-stu-id="cc99a-235">Left: Adjusting source points relative to the source device neutral axis.</span></span> <span data-ttu-id="cc99a-236">Droite : réglage de la description de la limite de la gamme de destination par rapport à la description de la limite de la gamme de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-236">Right: Adjusting the destination gamut boundary description relative to the destination gamut boundary description.</span></span>

<span data-ttu-id="cc99a-237">Notez que vous ajustez chaque valeur de pixel source par rapport à l’axe neutre à cette valeur de luminosité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-237">Note that you adjust each source pixel value relative to the neutral axis at that lightness value.</span></span> <span data-ttu-id="cc99a-238">Cela permet de s’assurer que les neutres du périphérique source se situeront sur l’axe neutre du modèle d’apparence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-238">This assures that source device neutrals will fall on the neutral axis of the appearance model.</span></span> <span data-ttu-id="cc99a-239">Vous allez également déplacer toutes les autres couleurs à cette luminosité de la même quantité, afin qu’il n’y ait aucune discontinuité dans la représentation de la gamme source.</span><span class="sxs-lookup"><span data-stu-id="cc99a-239">You also shift all other colors at that lightness by the same amount, so that there are no discontinuities in the representation of the source gamut.</span></span> <span data-ttu-id="cc99a-240">Vous devez passer d’un volume à l’autre à différents niveaux de luminosité, car les neutres de l’appareil source ne sont pas représentés comme étant aussi chromatiques aux différents niveaux de luminosité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-240">You have to shift by different amounts at different lightness levels, because the source device neutrals are not represented as equally chromatic at the different lightness levels.</span></span> <span data-ttu-id="cc99a-241">En clair, il ne s’agit pas d’une transformation simple.</span><span class="sxs-lookup"><span data-stu-id="cc99a-241">Clearly, this is not a trivial transformation.</span></span>

<span data-ttu-id="cc99a-242">La gestion des valeurs de l’appareil de destination est un peu plus délicate.</span><span class="sxs-lookup"><span data-stu-id="cc99a-242">Handling the destination device values is a little more tricky.</span></span> <span data-ttu-id="cc99a-243">Au départ, vous ajustez l’ensemble de la limite de la gamme de destination de la même manière, mais en fonction de l’axe neutre de l’appareil de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-243">Initially, you adjust the entire destination gamut boundary in a similar manner, but relative to the destination device neutral axis.</span></span> <span data-ttu-id="cc99a-244">Cela est illustré à la figure 1 sur le côté droit.</span><span class="sxs-lookup"><span data-stu-id="cc99a-244">This is illustrated in Figure 1 on the right side.</span></span> <span data-ttu-id="cc99a-245">Cet ajustement garantit que les valeurs de gris de la source sont mappées aux valeurs de gris de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-245">That adjustment assures that source gray values will map to destination gray values.</span></span> <span data-ttu-id="cc99a-246">Il s’agit de l’espace dans lequel les algorithmes de mappage de la gamme de couleurs fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="cc99a-246">This is the space in which the gamut mapping algorithms operate.</span></span>

<span data-ttu-id="cc99a-247">Toutefois, cet espace ne décrit pas précisément le comportement réel du périphérique de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-247">However, this space does not accurately describe the true behavior of the destination device.</span></span> <span data-ttu-id="cc99a-248">Vous devez inverser le mappage avant que les couleurs mappées de la gamme de couleurs soient transmises au modèle d’apparence et au modèle d’appareil de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-248">You must invert the mapping before gamut mapped colors are handed to the appearance model and destination device model.</span></span> <span data-ttu-id="cc99a-249">Vous décalez toutes les valeurs mappées par le contraire du décalage appliqué précédemment à l’axe neutre du périphérique de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-249">You offset all the mapped values by the opposite of the offset applied earlier to the destination device neutral axis.</span></span> <span data-ttu-id="cc99a-250">Cela mappe l’axe neutre de destination à la valeur représentée à l’origine par le CAM.</span><span class="sxs-lookup"><span data-stu-id="cc99a-250">This maps the destination neutral axis back to the value represented originally by the CAM.</span></span> <span data-ttu-id="cc99a-251">Il procède de la même façon pour la limite de la gamme et pour toutes les valeurs intermédiaires.</span><span class="sxs-lookup"><span data-stu-id="cc99a-251">It does the same for the gamut boundary and all intermediate values.</span></span>

![Diagramme qui affiche un graphique pour annuler l’alignement de l’axe neutre du périphérique de destination.](images/gmmp-image008.png)

<span data-ttu-id="cc99a-253">**Figure 2** : annuler l’alignement de l’axe neutre du périphérique de destination</span><span class="sxs-lookup"><span data-stu-id="cc99a-253">**Figure 2** : Undoing the alignment of the destination device neutral axis</span></span>

### <a name="minimum-color-difference-mincd"></a><span data-ttu-id="cc99a-254">Différence de couleur minimale (hachée)</span><span class="sxs-lookup"><span data-stu-id="cc99a-254">Minimum Color Difference (MinCD)</span></span>

<span data-ttu-id="cc99a-255">Différence de couleur minimale (hachée) versions relatives et absolues (équivalent à l’intention de colorimétrie ICC).</span><span class="sxs-lookup"><span data-stu-id="cc99a-255">Minimum Color Difference(MinCD) Relative and Absolute versions - equivalent to the ICC colorimetric intent.</span></span>

> [!Note]  
> <span data-ttu-id="cc99a-256">Le MGM haché est approprié pour le mappage des graphiques et des dessins de ligne contenant des couleurs « logo » (tons directs), des dégradés de couleur de logo avec certaines couleurs non compatibles et pour la dernière étape de la vérification des transformations.</span><span class="sxs-lookup"><span data-stu-id="cc99a-256">The MinCD GMM is suitable for mapping graphics and line art containing "logo" colors (spot colors), logo color gradients with some out-of-gamut colors, and for the final stage of proofing transforms.</span></span> <span data-ttu-id="cc99a-257">Bien que le MGM haché puisse être utilisé pour les images photographiques entièrement dans la gamme de destination, il n’est pas recommandé pour le rendu général des images photographiques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-257">While the MinCD GMM could be used for photographic images that are entirely within the destination gamut, it is not recommended for general rendering of photographic images.</span></span> <span data-ttu-id="cc99a-258">Le mappage des couleurs en dehors de la gamme aux couleurs sur la surface de la gamme de destination peut entraîner des artefacts indésirables, tels que des irrégularités de teinte ou de chrominance dans des dégradés lisses qui traversent la limite de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-258">The mapping of out-of-gamut colors to colors on the destination gamut surface can result in unwanted artifacts, such as tone or chroma irregularities in smooth gradients that cross the gamut boundary.</span></span> <span data-ttu-id="cc99a-259">BasicPhoto est recommandé pour les images photographiques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-259">BasicPhoto is recommended for photographic images.</span></span> <span data-ttu-id="cc99a-260">Si une image ou un ton est requis pour un mappage de gamme autre que BasicPhoto, l’alternative consiste à créer un MGM de plug-in qui implémente ce mappage, au lieu d’utiliser hached.</span><span class="sxs-lookup"><span data-stu-id="cc99a-260">If a photographic or contone image requires a gamut mapping other than BasicPhoto, then the alternative should be to create a plug-in GMM implementing that mapping, instead of using MinCD.</span></span>

 

<span data-ttu-id="cc99a-261">Les couleurs de la gamme restent inchangées.</span><span class="sxs-lookup"><span data-stu-id="cc99a-261">In-gamut colors are left unchanged.</span></span> <span data-ttu-id="cc99a-262">Pour les couleurs non imprimables, la clarté et la chrominance sont ajustées en recherchant le point dans la gamme de destination qui a la distance de couleur minimale par rapport aux points d’entrée hors gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-262">For out-of-gamut colors, lightness and chroma are adjusted by finding the point in the destination gamut that has the minimum color distance from out-of-gamut input points.</span></span> <span data-ttu-id="cc99a-263">La distance de couleur est calculée dans l’espace JCh.</span><span class="sxs-lookup"><span data-stu-id="cc99a-263">The color distance is computed in JCh space.</span></span> <span data-ttu-id="cc99a-264">Toutefois, vous affectez à la distance de luminosité (J) et à la distance de couleur (C) ou teinte (h) une distance différente.</span><span class="sxs-lookup"><span data-stu-id="cc99a-264">However, you weight the distance in lightness (J) and the distance in chroma (C) or hue (h) differently.</span></span> <span data-ttu-id="cc99a-265">Une fonction de pondération dépendante de la chrominance est utilisée pour la distance en luminosité, de sorte que la pondération est plus petite pour la chrominance et plus grande pour une chrominance importante jusqu’à ce qu’une chrominance de seuil soit atteinte, après quoi le poids reste à 1, c’est-à-dire le même poids que la distance dans la couleur ou la teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-265">A chroma-dependent weight function is used for the distance in lightness so that the weight is smaller for small chroma and larger for large chroma until a threshold chroma is reached, after which the weight stays at 1, that is, the same weight as distance in chroma or hue.</span></span> <span data-ttu-id="cc99a-266">Cela suit l’utilisation recommandée pour CMC et CIEDE2000.</span><span class="sxs-lookup"><span data-stu-id="cc99a-266">This follows recommended usage for CMC and CIEDE2000.</span></span> <span data-ttu-id="cc99a-267">Il existe deux variantes : Colorimétrie relative et Colorimétrie absolue.</span><span class="sxs-lookup"><span data-stu-id="cc99a-267">There are two variants: Relative colorimetric and absolute colorimetric.</span></span>

<span data-ttu-id="cc99a-268">**Colorimétrie relative :** Tout d’abord, alignez les axes neutres de source et de destination comme décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="cc99a-268">**Relative colorimetric:** First, align the source and destination neutral axes as described previously.</span></span> <span data-ttu-id="cc99a-269">Découpez ensuite la couleur source ajustée à la limite de la gamme de destination ajustée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-269">Then clip the adjusted source color to the adjusted destination gamut boundary.</span></span> <span data-ttu-id="cc99a-270">(Voir figure 4.</span><span class="sxs-lookup"><span data-stu-id="cc99a-270">(See Figure 4.</span></span> <span data-ttu-id="cc99a-271">Mise en correspondance de Chroma le long de la lumière constante.) Réajustez les valeurs de l’appareil de destination comme décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="cc99a-271">Chroma mapping along constant lightness.) Readjust the destination device values as described previously.</span></span> <span data-ttu-id="cc99a-272">Dans le cas d’une limite de gamme de destination monochrome, le découpage Chroma signifie que la valeur Chroma (C) est définie à zéro (0,0).</span><span class="sxs-lookup"><span data-stu-id="cc99a-272">In the case of a monochrome destination gamut boundary, the chroma clipping means that the chroma value (C) is set to zero (0.0).</span></span>

<span data-ttu-id="cc99a-273">**Colorimétrie absolue :** Cela est similaire à la colorimétrie relative, mais sans l’alignement de l’axe neutre source et de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-273">**Absolute colorimetric:** This is similar to relative colorimetric, but without the alignment of the source and destination neutral axis.</span></span> <span data-ttu-id="cc99a-274">La valeur source est découpée directement en l’axe neutre de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-274">The source value is clipped directly to the destination neutral axis.</span></span> <span data-ttu-id="cc99a-275">Notez que si les limites de la gamme source et de destination sont monochromes, le comportement est identique à celui de la variante de Colorimétrie relative ; autrement dit, l’alignement des axes neutres est effectué, puis le Chroma est coupé à zéro.</span><span class="sxs-lookup"><span data-stu-id="cc99a-275">Note that if both the source and destination gamut boundaries are monochrome, the behavior is identical to the relative colorimetric variant; that is, the neutral axes alignment is performed, and then the chroma is clipped to zero.</span></span> <span data-ttu-id="cc99a-276">Cela garantit qu’une sortie raisonnable est atteinte même si les milieux et les colorants sont très différents.</span><span class="sxs-lookup"><span data-stu-id="cc99a-276">This ensures that a reasonable output is attained even if the media and colorants are significantly different.</span></span>

![Diagramme qui affiche un graphique pour le découpage haché sur la gamme ajustée.](images/gmmp-image010.png)

<span data-ttu-id="cc99a-278">**Figure 3** : découpage haché sur la gamme ajustée</span><span class="sxs-lookup"><span data-stu-id="cc99a-278">**Figure 3** : MinCD clipping to the adjusted gamut</span></span>

### <a name="basicphoto"></a><span data-ttu-id="cc99a-279">BasicPhoto</span><span class="sxs-lookup"><span data-stu-id="cc99a-279">BasicPhoto</span></span>

### <a name="overview"></a><span data-ttu-id="cc99a-280">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="cc99a-280">Overview</span></span>

<span data-ttu-id="cc99a-281">BasicPhoto : équivalent de l’intention de préférence, d’un graphique ou de la perception de ICC.</span><span class="sxs-lookup"><span data-stu-id="cc99a-281">BasicPhoto - equivalent to the ICC preferred, pictorial, or perceptual intent.</span></span>

<span data-ttu-id="cc99a-282">Cet algorithme est une variante de la mise à l’échelle du genou sigmoidal et de la mise à l’échelle du coude de crête (SGCK) qui est décrite par la CIE TC8-03 dans CIE156:2004.</span><span class="sxs-lookup"><span data-stu-id="cc99a-282">This algorithm is a variant of the chroma-dependent sigmoidal lightness mapping and cusp knee scaling (SGCK) described by CIE TC8-03 in CIE156:2004.</span></span> <span data-ttu-id="cc99a-283">Cet algorithme variant prend en charge les descripteurs de limites de couleurs (GBDs) avec deux interpréteurs de couleurs. autrement dit, GBDs avec un shell de référence et un interpréteur de commandes plausible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-283">This variant algorithm supports gamut boundary descriptors (GBDs) with dual gamut shells; that is, GBDs with a reference shell and a plausible shell.</span></span> <span data-ttu-id="cc99a-284">L’algorithme SGCK, qui suppose à l’origine un seul interpréteur de couleurs dans le GBD, est basé sur l' \_ algorithme du genou SIG (Braun 1999), qui intègre la mise à l’échelle de la lumière du sigmoidal et de la fonction de genou proposée par Braun et Fairchild (1999), combinée à la dépendance chroma de GCUSP (Morovic, 1998).</span><span class="sxs-lookup"><span data-stu-id="cc99a-284">The SGCK algorithm, which originally assumes only one gamut shell in the GBD, is based on the SIG\_KNEE algorithm (Braun 1999), that incorporates the sigmoidal lightness mapping and knee function scaling proposed by Braun and Fairchild (1999), combined with the chroma dependence from GCUSP (Morovic, 1998).</span></span> <span data-ttu-id="cc99a-285">Elle conserve les constantes de teintes perçues, par exemple l’angle de teinte dans les Jab corrigés par la teinte, et utilise une mise à l’échelle de la luminosité sigmoidal générique (indépendante de l’image) qui est appliquée selon une méthode dépendante de la chrominance et un chroma de fonction de genou de 90%.</span><span class="sxs-lookup"><span data-stu-id="cc99a-285">It keeps perceived hue constant, for example, hue angle in hue-corrected Jab, and uses a generic (image-independent) sigmoidal lightness scaling which is applied in a chroma-dependent way and a 90 percent knee function chroma.</span></span> <span data-ttu-id="cc99a-286">La variante est mise à l’échelle le long des lignes de clarté constante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-286">The variant scales along lines of constant lightness.</span></span>

### <a name="the-case-of-single-gamut-shell"></a><span data-ttu-id="cc99a-287">Cas de l’interpréteur de couleurs simple</span><span class="sxs-lookup"><span data-stu-id="cc99a-287">The case of single gamut shell</span></span>

<span data-ttu-id="cc99a-288">Il est utile de passer en revue l’algorithme dans le cas où les GBDs source et de destination n’ont qu’un seul interpréteur de couleurs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-288">It is helpful to review the algorithm in the case where both source and destination GBDs have only one gamut shell.</span></span> <span data-ttu-id="cc99a-289">Dans ce cas, l’algorithme comprend les calculs suivants.</span><span class="sxs-lookup"><span data-stu-id="cc99a-289">In this case, the algorithm consists of the following calculations.</span></span>

<span data-ttu-id="cc99a-290">Tout d’abord, effectuez le mappage de luminosité initial à l’aide de la formule suivante :</span><span class="sxs-lookup"><span data-stu-id="cc99a-290">First, perform initial lightness mapping using the following formula:</span></span>

![Affiche la formule pour le mappage de la clarté initiale.](images/gmmp-image012.png) <span data-ttu-id="cc99a-292">(1)</span><span class="sxs-lookup"><span data-stu-id="cc99a-292">(1)</span></span>

<span data-ttu-id="cc99a-293">où *j ₒ* est la lumière d’origine et *j <sub>R</sub>* est la luminosité de la reproduction.</span><span class="sxs-lookup"><span data-stu-id="cc99a-293">where *Jₒ* is the original lightness and *J<sub>R</sub>* is the reproduction lightness.</span></span>

![Affiche la deuxième formule de mappage de luminosité.](images/gmmp-image014.png) <span data-ttu-id="cc99a-295">(2)</span><span class="sxs-lookup"><span data-stu-id="cc99a-295">(2)</span></span>

<span data-ttu-id="cc99a-296">Lorsque la limite de la gamme source est monochrome, la valeur de Chroma est égale à zéro pour la limite monochrome en raison de l’alignement de l’axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-296">When the source gamut boundary is monochrome, the chroma value will be zero for the monochrome boundary due to neutral axis alignment.</span></span> <span data-ttu-id="cc99a-297">Cela entraînera le cas dégenerate où C est égal à zéro.</span><span class="sxs-lookup"><span data-stu-id="cc99a-297">This will result in the degenerate case where C is equal to zero.</span></span> <span data-ttu-id="cc99a-298">Dans ce cas, *p <sub>C</sub>* est défini sur 1.</span><span class="sxs-lookup"><span data-stu-id="cc99a-298">In this case, *p<sub>C</sub>* is set to 1.</span></span>

<span data-ttu-id="cc99a-299">*p <sub>C</sub>* est un facteur de pondération dépendant de la chrominance (Morovic, 1998) qui dépend de la chrominance de la couleur d’origine, C et *J <sub>S</sub>* sont le résultat de la luminosité d’origine qui est mappée à l’aide d’une fonction sigmoidal.</span><span class="sxs-lookup"><span data-stu-id="cc99a-299">*p <sub>C</sub>* is a chroma-dependent weighting factor (Morovic, 1998) that depends on the chroma of the original color, C and *J<sub>S</sub>* are the result of the original lightness being mapped using a sigmoidal function.</span></span>

 

<span data-ttu-id="cc99a-300">Pour calculer *J <sub>S</sub>* (Braun et Fairchild, 1999), une table de recherche unidimensionnelle (LUT) entre les valeurs de luminosité d’origine et de reproduction est d’abord configurée sur la base d’une ou plusieurs fonctions normales cumulatives.</span><span class="sxs-lookup"><span data-stu-id="cc99a-300">To calculate *J<sub>S</sub>* (Braun and Fairchild, 1999), a one-dimensional lookup table (LUT) between original and reproduction lightness values is first set up on the basis of a discrete cumulative normal function (S).</span></span>

![Affiche une formule pour calculer J s.](images/gmmp-image016.png) <span data-ttu-id="cc99a-302">(3)</span><span class="sxs-lookup"><span data-stu-id="cc99a-302">(3)</span></span>

<span data-ttu-id="cc99a-303">où x ₀ et S sont respectivement la moyenne et l’écart type de la distribution normale et *i* = 0, 1, 2... *m*,*m* est le nombre de points utilisés dans lut.</span><span class="sxs-lookup"><span data-stu-id="cc99a-303">where x ₀ and S are the mean and standard deviation of the normal distribution respectively and *i* = 0,1,2... *m*,*m* is the number of points used in the LUT.</span></span> <span data-ttu-id="cc99a-304">*S <sub>i</sub>* est la valeur de la fonction normale *cumulative pour*  / *m* pour cent.</span><span class="sxs-lookup"><span data-stu-id="cc99a-304">*S <sub>i</sub>* is the value of the cumulative normal function for *i* /*m* percent.</span></span> <span data-ttu-id="cc99a-305">Les paramètres dépendent de la clarté du point noir de la gamme de reproduction et peuvent être interpolés à partir du tableau 1.</span><span class="sxs-lookup"><span data-stu-id="cc99a-305">The parameters depend on the lightness of the black point of the reproduction gamut and can be interpolated from Table 1.</span></span> <span data-ttu-id="cc99a-306">Pour plus d’informations sur le calcul de ces paramètres, consultez Braun et Fairchild (1999, p.</span><span class="sxs-lookup"><span data-stu-id="cc99a-306">For details of calculating these parameters see Braun and Fairchild (1999, p.</span></span> <span data-ttu-id="cc99a-307">391).</span><span class="sxs-lookup"><span data-stu-id="cc99a-307">391).</span></span>

:::row:::
    :::column:::
        <span data-ttu-id="cc99a-308">J <sub>minOut</sub></span><span class="sxs-lookup"><span data-stu-id="cc99a-308">J <sub>minOut</sub></span></span>
    :::column-end:::
    :::column:::
       <span data-ttu-id="cc99a-309">5.0</span><span class="sxs-lookup"><span data-stu-id="cc99a-309">5.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-310">10.0</span><span class="sxs-lookup"><span data-stu-id="cc99a-310">10.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-311">15.0</span><span class="sxs-lookup"><span data-stu-id="cc99a-311">15.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-312">20,0</span><span class="sxs-lookup"><span data-stu-id="cc99a-312">20.0</span></span>
    :::column-end:::
:::row-end:::
:::row:::
    :::column:::
        <span data-ttu-id="cc99a-313">₀ x</span><span class="sxs-lookup"><span data-stu-id="cc99a-313">x ₀</span></span>
    :::column-end:::
    :::column:::
       <span data-ttu-id="cc99a-314">53,7</span><span class="sxs-lookup"><span data-stu-id="cc99a-314">53.7</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-315">56,8</span><span class="sxs-lookup"><span data-stu-id="cc99a-315">56.8</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-316">58,2</span><span class="sxs-lookup"><span data-stu-id="cc99a-316">58.2</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-317">60,6</span><span class="sxs-lookup"><span data-stu-id="cc99a-317">60.6</span></span>
    :::column-end:::
:::row-end:::
:::row:::
    :::column:::
        <span data-ttu-id="cc99a-318">S</span><span class="sxs-lookup"><span data-stu-id="cc99a-318">S</span></span>
    :::column-end:::
    :::column:::
       <span data-ttu-id="cc99a-319">43,0</span><span class="sxs-lookup"><span data-stu-id="cc99a-319">43.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-320">40,0</span><span class="sxs-lookup"><span data-stu-id="cc99a-320">40.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-321">35,0</span><span class="sxs-lookup"><span data-stu-id="cc99a-321">35.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="cc99a-322">34,5</span><span class="sxs-lookup"><span data-stu-id="cc99a-322">34.5</span></span>
    :::column-end:::
:::row-end:::


<span data-ttu-id="cc99a-323">**Tableau 1** : calcul du paramètre de compression BasicPhoto lightity</span><span class="sxs-lookup"><span data-stu-id="cc99a-323">**Table 1** : BasicPhoto lightness compression parameter calculation</span></span>

<span data-ttu-id="cc99a-324">Pour utiliser des S comme un mappage de luminosité LUT (S <sub>lut</sub> ), il doit d’abord être normalisé dans la plage de luminosité de \[ 0100 \] .</span><span class="sxs-lookup"><span data-stu-id="cc99a-324">To use S as a lightness mapping LUT (S <sub>LUT</sub> ) it must first be normalized into the lightness range of \[0,100\].</span></span> <span data-ttu-id="cc99a-325">Les données normalisées sont ensuite mises à l’échelle dans la plage dynamique de l’appareil de destination, comme illustré dans l’équation 4, où *j* min. et *j*<sub>Max</sub> . sont les valeurs de luminosité du point noir et du point blanc du milieu de reproduction, respectivement.<sub></sub></span><span class="sxs-lookup"><span data-stu-id="cc99a-325">The normalized data is then scaled into the dynamic range of the destination device, as shown in Equation 4, where *J*<sub>min\ *Out*</sub> and *J*<sub>max\ *Out*</sub> are the values of lightness of the black point and the white point of the reproduction medium, respectively.</span></span>

![Affiche la formule pour S comme un LUT de mappage de luminosité.](images/gmmp-image018.png) <span data-ttu-id="cc99a-327">(4)</span><span class="sxs-lookup"><span data-stu-id="cc99a-327">(4)</span></span>

<span data-ttu-id="cc99a-328">À ce stade, les valeurs *j S* peuvent être obtenues à partir de la <sub>lut</sub> s en interpolant entre les points *m* des valeurs *j O* et *j s* correspondantes, et en utilisant l’équation suivante comme entrée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-328">At this point, the *J S* values can be obtained from the S <sub>LUT</sub> by interpolating between the *m* points of corresponding *J O'* and *J S* values it contains, and using the following equation as the input.</span></span>

![Affiche la formule pour obtenir les valeurs J S.](images/gmmp-image020.png) <span data-ttu-id="cc99a-330">(5)</span><span class="sxs-lookup"><span data-stu-id="cc99a-330">(5)</span></span>

<span data-ttu-id="cc99a-331">J <sub>minin</sub> est la valeur de luminosité du point noir du support d’origine, j <sub>MAXIN</sub> est la valeur de luminosité du point blanc du support d’origine et j <sub>O</sub> est la luminosité d’origine.</span><span class="sxs-lookup"><span data-stu-id="cc99a-331">J <sub>minIn</sub> is the lightness value of the black point of the original medium, J <sub>maxIn</sub> is the lightness value of the white point of the original medium, and J <sub>O</sub> is the original lightness.</span></span> <span data-ttu-id="cc99a-332">Pour référence ultérieure, vous pouvez dénoter *par la* fonction sigmoidal définie comme indiqué dans la figure 4 ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="cc99a-332">For later reference, you can denote by *S* the sigmoidal function defined in the manner just outlined, as illustrated in the following Figure 4.</span></span>

![Diagramme qui montre le graphique pour le mappage de chrominance le long de la lumière constante.](images/gmmp-image024.png)

<span data-ttu-id="cc99a-334">**Figure 4** : placage de Chroma le long de la lumière constante</span><span class="sxs-lookup"><span data-stu-id="cc99a-334">**Figure 4** : Chroma mapping along constant lightness</span></span>

<span data-ttu-id="cc99a-335">Deuxièmement, si la limite de la gamme de destination est chromatique, compressez la chrominance le long des lignes de la lumière constante (l) et effectuez la compression comme suit.</span><span class="sxs-lookup"><span data-stu-id="cc99a-335">Second, if the destination gamut boundary is chromatic, compress chroma along lines of constant lightness (l) and perform the compression as follows.</span></span>

![Affiche la formule permettant d’effectuer la compression Chroma.](images/gmmp-image026.png) <span data-ttu-id="cc99a-337"> (6)</span><span class="sxs-lookup"><span data-stu-id="cc99a-337">(6)</span></span>

<span data-ttu-id="cc99a-338">où *d* représente la distance par rapport à *E* sur *l*; *g* représente la limite de la gamme moyenne ; *r* représente la reproduction ; et *o* la figure 5 d’origine.</span><span class="sxs-lookup"><span data-stu-id="cc99a-338">where *d* represents distance from *E* on *l*;*g* represents the medium gamut boundary; *r* represents the reproduction; and *o* the original Figure 5.</span></span>

![Diagramme qui montre le graphique de la compression de chrominance et de luminosité dans BasicPhoto.](images/gmmp-image028.png)

<span data-ttu-id="cc99a-340">**Figure 5** : compression de chrominance et de luminosité dans BasicPhoto</span><span class="sxs-lookup"><span data-stu-id="cc99a-340">**Figure 5** : Chroma and lightness compression in BasicPhoto</span></span>

<span data-ttu-id="cc99a-341">Si la limite de la gamme de destination est monochrome, la valeur de chrominance est découpée à zéro.</span><span class="sxs-lookup"><span data-stu-id="cc99a-341">If the destination gamut boundary is monochrome, then the chroma value is clipped to zero.</span></span>

<span data-ttu-id="cc99a-342">Troisièmement, utilisez un clip haché (décrit plus haut) pour éliminer toute erreur résiduelle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-342">Third, use a MinCD clip (described earlier) to eliminate any residual error.</span></span>

### <a name="black-enhancement"></a><span data-ttu-id="cc99a-343">Amélioration du noir</span><span class="sxs-lookup"><span data-stu-id="cc99a-343">Black enhancement</span></span>

<span data-ttu-id="cc99a-344">L’algorithme précédent peut être modifié pour améliorer le noir lorsque la destination est un périphérique d’impression.</span><span class="sxs-lookup"><span data-stu-id="cc99a-344">The preceding algorithm can be modified to improve the black when the destination is a printer device.</span></span> <span data-ttu-id="cc99a-345">Le problème est lié au choix de *J <sub>minOut</sub>*, qui ne correspond généralement pas à la couleur la plus sombre qu’une imprimante peut produire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-345">The issue has to do with the choice of *J<sub>minOut</sub>*, which usually does not correspond to the darkest color a printer can produce.</span></span>

<span data-ttu-id="cc99a-346">Plus précisément, la couleur avec la densité la plus élevée, obtenue en plaçant des encres de 100% (ou une couverture maximale possible, si la limitation de GCR/encre est activée), n’est généralement pas « neutre » dans l’espace d’apparence de la couleur.</span><span class="sxs-lookup"><span data-stu-id="cc99a-346">More specifically, the color with highest density, obtained by putting 100 percent inks (or maximum possible coverage, if GCR/ink limiting is in effect), is usually not "neutral" in the color appearance space.</span></span> <span data-ttu-id="cc99a-347">Voir figure 6.</span><span class="sxs-lookup"><span data-stu-id="cc99a-347">See Figure 6.</span></span> <span data-ttu-id="cc99a-348">En d’autres termes, si la luminosité minimale neutre est utilisée pour l’appareil de destination, l’échelle de luminosité construite est mappée à une luminosité minimale qui n’est pas la densité la plus élevée qui peut être obtenue par l’imprimante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-348">In other words, if neutral minimum lightness is used for the destination device, the lightness scaler constructed will map to a minimum lightness that is not the highest density that can be achieved by the printer.</span></span> <span data-ttu-id="cc99a-349">Considérez le cas d’utilisation supplémentaire de l’analyse sur l’imprimante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-349">Consider the further use case of monitor to printer.</span></span> <span data-ttu-id="cc99a-350">Le noir du moniteur, R = G = B = 0, est alors imprimé comme n’étant pas la densité la plus élevée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-350">The monitor black, R=G=B=0, will then be printed as not the highest density.</span></span> <span data-ttu-id="cc99a-351">L’impact sur la qualité de l’image est qu’il y a un manque de profondeur et de contraste.</span><span class="sxs-lookup"><span data-stu-id="cc99a-351">The impact on the image quality is that there is a lack of depth and contrast.</span></span>

![Diagramme qui montre comment le point noir de l’appareil peut être plus sombre que la luminosité minimale neutre.](images/gmmp-seqfigure01.png)

<span data-ttu-id="cc99a-353">**Figure 6** : le point noir du périphérique peut être plus sombre que la luminosité minimale neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-353">**Figure 6** : The device black point may be darker than the neutral minimum lightness.</span></span>

<span data-ttu-id="cc99a-354">Supposons que la destination « point noir de l’appareil » est Jkakbk/JkCkh k.</span><span class="sxs-lookup"><span data-stu-id="cc99a-354">Suppose the destination "device black point" is Jₖaₖbₖ/JₖCₖh ₖ.</span></span> <span data-ttu-id="cc99a-355">Si C k n’est pas égal à zéro, le point noir de l’appareil n’est pas neutre par rapport à CAM02.</span><span class="sxs-lookup"><span data-stu-id="cc99a-355">If C ₖ is not zero, then the device black point is not neutral relative to CAM02.</span></span> <span data-ttu-id="cc99a-356">Si vous utilisez J k pour la « luminosité minimale neutre » de destination dans la construction de l’échelle de luminosité ; autrement dit, la définition de</span><span class="sxs-lookup"><span data-stu-id="cc99a-356">If you use J ₖ for the destination "neutral minimum lightness" in the construction of the lightness scaler; that is, setting</span></span>

<span data-ttu-id="cc99a-357">*J <sub>minOut</sub> = JK*</span><span class="sxs-lookup"><span data-stu-id="cc99a-357">*J<sub>minOut</sub> = Jₖ*</span></span>

<span data-ttu-id="cc99a-358">et l’appliquer à l’interpréteur de couleurs source, vous obtenez la configuration illustrée à la figure 7.</span><span class="sxs-lookup"><span data-stu-id="cc99a-358">and apply it to the source gamut shell, you obtain the configuration depicted in Figure 7.</span></span> <span data-ttu-id="cc99a-359">Dans la figure, le plan de teinte correspond à h k.</span><span class="sxs-lookup"><span data-stu-id="cc99a-359">In the figure, the hue plane corresponds to h ₖ.</span></span>

![Diagramme montrant l’échelle d’éclairage modifié avec le point noir du périphérique de destination.](images/gmmp-seqfigure02.png)

<span data-ttu-id="cc99a-361">**Figure 7** : géométrie utilisant l’échelle de luminosité modifiée avec le point noir de l’appareil de destination</span><span class="sxs-lookup"><span data-stu-id="cc99a-361">**Figure 7** : Geometry using the modified lightness scaler with destination device black point</span></span>

<span data-ttu-id="cc99a-362">Pour permettre à l’algorithme de compression Chroma suivant de se poursuivre, vous devez aligner les lightnesses maximal et minimum sur les coques source et de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-362">To allow the subsequent chroma compression algorithm to proceed, you want to align the maximum and minimum lightnesses on the source and destination shells.</span></span> <span data-ttu-id="cc99a-363">Pour ce faire, vous pouvez ajuster l’interpréteur de commandes de destination entre J <sub>neutralMin</sub> et j k en décalant les points vers la gauche.</span><span class="sxs-lookup"><span data-stu-id="cc99a-363">This can be achieved by adjusting the destination shell between J <sub>neutralMin</sub> and J ₖ by shifting points to the left.</span></span> <span data-ttu-id="cc99a-364">En outre, cette transformation doit être appliquée à l’ensemble de l’espace Jab, pas seulement au plan de teinte correspondant à h k.</span><span class="sxs-lookup"><span data-stu-id="cc99a-364">Furthermore, this transformation must be applied on the whole Jab space, not just the hue plane corresponding to h ₖ.</span></span>

<span data-ttu-id="cc99a-365">La transformation est</span><span class="sxs-lookup"><span data-stu-id="cc99a-365">The transformation is</span></span>

![Affiche la formule de la transformation.](images/gmmp-seqfigure03.png)

<span data-ttu-id="cc99a-367">La figure 8 illustre l’effet de la transformation.</span><span class="sxs-lookup"><span data-stu-id="cc99a-367">Figure 8 shows the effect of the transformation.</span></span>

![Diagramme qui montre l’effet de l’échelle de luminosité modifiée avec le point noir du périphérique de destination.](images/gmmp-seqfigure04.png)

<span data-ttu-id="cc99a-369">**Figure 8** : géométrie utilisant l’échelle de luminosité modifiée avec le point noir de l’appareil de destination</span><span class="sxs-lookup"><span data-stu-id="cc99a-369">**Figure 8** : Geometry using the modified lightness scaler with destination device black point</span></span>

<span data-ttu-id="cc99a-370">Après l’application de l’algorithme de compression Chroma habituel, le point doit ensuite être « déplacé en arrière »; autrement dit, la transformation inverse doit être appliquée pour obtenir la couleur mappée finale.</span><span class="sxs-lookup"><span data-stu-id="cc99a-370">After applying the usual chroma compression algorithm, the point must then be "shifted back;" that is, the inverse transformation must be applied to obtain the final mapped color.</span></span>

![Affiche la formule de la transformation inverse pour obtenir la couleur mappée finale.](images/gmmp-seqfigure05.png)

### <a name="the-case-of-dual-gamut-shells"></a><span data-ttu-id="cc99a-372">Cas des interpréteurs de couleurs doubles</span><span class="sxs-lookup"><span data-stu-id="cc99a-372">The case of dual gamut shells</span></span>

<span data-ttu-id="cc99a-373">L’objectif est de généraliser le \_ genou SIG pour l’interpréteur de couleurs unique dans le cas où l’appareil source GBD ou l’appareil de destination GBD a une structure à deux shells.</span><span class="sxs-lookup"><span data-stu-id="cc99a-373">The goal is to generalize SIG\_KNEE for single gamut shell to the case where either the source device GBD or the destination device GBD has a two-shell structure.</span></span> <span data-ttu-id="cc99a-374">L’interpréteur de commandes interne sera appelé le shell de référence, tandis que l’interpréteur de commandes externe sera appelé l’interpréteur de commandes plausible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-374">The inner shell will be called the Reference Shell, while the outer shell will be called the Plausible Shell.</span></span> <span data-ttu-id="cc99a-375">Vous souhaitez prendre en compte les cas suivants.</span><span class="sxs-lookup"><span data-stu-id="cc99a-375">You want to consider the following cases.</span></span>

<span data-ttu-id="cc99a-376">(a) les GBD source GBD et de destination ont une structure à deux shells.</span><span class="sxs-lookup"><span data-stu-id="cc99a-376">(a) Both the source GBD and destination GBD have a two-shell structure.</span></span>

<span data-ttu-id="cc99a-377">(b) la source GBD a une structure à deux shells ; le GBD de destination n’a qu’un seul Shell.</span><span class="sxs-lookup"><span data-stu-id="cc99a-377">(b) The source GBD has a two-shell structure; the destination GBD has only one shell.</span></span>

<span data-ttu-id="cc99a-378">(c) la source GBD a un seul Shell ; le GBD de destination a une structure à deux shells.</span><span class="sxs-lookup"><span data-stu-id="cc99a-378">(c) The source GBD has only one shell; the destination GBD has a two-shell structure.</span></span>

<span data-ttu-id="cc99a-379">(d) les GBD source GBD et de destination n’ont qu’un seul Shell.</span><span class="sxs-lookup"><span data-stu-id="cc99a-379">(d) Both the source GBD and destination GBD have only one shell.</span></span>

<span data-ttu-id="cc99a-380">Le cas (d) est le cas de l’interpréteur de couleurs unique abordé précédemment.</span><span class="sxs-lookup"><span data-stu-id="cc99a-380">Case (d) is the case of single gamut shell that was discussed previously.</span></span> <span data-ttu-id="cc99a-381">Pour les cas (a), (b) et (c), vous pouvez généraliser la mise à l’échelle de la luminosité pour utiliser les informations supplémentaires de la structure de l’interpréteur de commandes double.</span><span class="sxs-lookup"><span data-stu-id="cc99a-381">For cases (a), (b), and (c), you can generalize the lightness rescaling to use the extra information from the dual shell structure.</span></span> <span data-ttu-id="cc99a-382">Dans les cas (b) et (c) où la source ou la destination n’a qu’un seul Shell, vous introduisez un « shell de référence induit », qui sera abordé dans une section suivante, « environnement de référence induit ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-382">In cases (b) and (c) where either the source or the destination has only one shell, you introduce an "induced reference shell" which will be discussed in a subsequent section, "Induced Reference Shell."</span></span> <span data-ttu-id="cc99a-383">L’algorithme général pour deux shells est décrit pour la casse (a).</span><span class="sxs-lookup"><span data-stu-id="cc99a-383">The general algorithm for two shells will be described for case (a).</span></span> <span data-ttu-id="cc99a-384">Une fois que la construction de l’interpréteur de commandes de référence est expliquée, l’algorithme peut également être appliqué aux cas (b) et (c).</span><span class="sxs-lookup"><span data-stu-id="cc99a-384">After the Induced Reference Shell construction is explained, the algorithm can be applied to case (b) and (c), as well.</span></span> <span data-ttu-id="cc99a-385">Comme pour la compression Chroma, le taux de compression est déterminé par les plus grands shells disponibles.</span><span class="sxs-lookup"><span data-stu-id="cc99a-385">As for chroma compression, the compression ratio will be determined by the largest shells available.</span></span> <span data-ttu-id="cc99a-386">En d’autres termes, si l’interpréteur de commandes plausible et le shell de référence sont disponibles, l’interpréteur de commandes plausible sera utilisé. dans le cas contraire, l’interpréteur de commandes de référence sera utilisé.</span><span class="sxs-lookup"><span data-stu-id="cc99a-386">In other words, if both the Plausible Shell and Reference Shell are available, the Plausible Shell will be used; otherwise, the Reference Shell will be used.</span></span>

<span data-ttu-id="cc99a-387">*Mise à l’échelle de la luminosité généralisée*</span><span class="sxs-lookup"><span data-stu-id="cc99a-387">*Generalized Lightness Rescaling*</span></span>

<span data-ttu-id="cc99a-388">L’existence de deux shells pour les GBD source et de destination signifie que vous devez mapper un ensemble de quatre points du GBD source à un jeu correspondant dans le GBD de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-388">The existence of two shells for both source and destination GBD means that you must map a set of four points from the source GBD to a corresponding set in the destination GBD.</span></span>

![Montre comment mapper un ensemble de quatre points à un jeu correspondant.](images/gmmp-image030.png)

<span data-ttu-id="cc99a-390">Les indices ont les significations suivantes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-390">The subscripts have the following meanings.</span></span>

<span data-ttu-id="cc99a-391">o ou r : « original » (source) ou « reproduction » (destination)</span><span class="sxs-lookup"><span data-stu-id="cc99a-391">o or r: "original" (source) or "reproduction" (destination)</span></span>

<span data-ttu-id="cc99a-392">min ou Max : luminosité minimale neutre ou luminosité maximale neutre</span><span class="sxs-lookup"><span data-stu-id="cc99a-392">min or max: minimum neutral lightness or maximum neutral lightness</span></span>

<span data-ttu-id="cc99a-393">PLA ou Ref : Shell ou Shell de référence plausible</span><span class="sxs-lookup"><span data-stu-id="cc99a-393">pla or ref: Plausible Shell or Reference Shell</span></span>

<span data-ttu-id="cc99a-394">L’ordre dans chaque quadruple est également la grandeur relative attendue de ces points.</span><span class="sxs-lookup"><span data-stu-id="cc99a-394">The ordering in each quadruple is also the expected relative magnitude of these points.</span></span>

<span data-ttu-id="cc99a-395">La carte de mise à l’échelle de la luminosité utilise les deux premières équations comme l’interpréteur de commandes unique, mais *J S* est défini de manière par morceaux comme suit.</span><span class="sxs-lookup"><span data-stu-id="cc99a-395">The Lightness Rescaling map uses the same first two equations as the single shell, but *J S* is defined in a piecewise manner as follows.</span></span>

![Affiche la formule pour J S de manière par morceaux.](images/gmmp-image032.png) <span data-ttu-id="cc99a-397">(7)</span><span class="sxs-lookup"><span data-stu-id="cc99a-397">(7)</span></span>

<span data-ttu-id="cc99a-398">En d’autres termes, il est sigmoidal dans l’interpréteur de commandes de référence et linéaire en dehors de.</span><span class="sxs-lookup"><span data-stu-id="cc99a-398">In other words, it is sigmoidal within the reference shell, and linear outside.</span></span> <span data-ttu-id="cc99a-399">Voir figure 9.</span><span class="sxs-lookup"><span data-stu-id="cc99a-399">See Figure 9.</span></span>

![Diagramme qui affiche un graphique pour la fonction de redimensionnement de luminosité pour deux shells GBDs.](images/gmmp-image033.png)

<span data-ttu-id="cc99a-401">**Figure 9** : fonction de redimensionnement de luminosité pour deux shells GBDs</span><span class="sxs-lookup"><span data-stu-id="cc99a-401">**Figure 9** : Lightness Rescaling function for two-shell GBDs</span></span>

<span data-ttu-id="cc99a-402">**SHELL DE RÉFÉRENCE INDUIT**</span><span class="sxs-lookup"><span data-stu-id="cc99a-402">**INDUCED REFERENCE SHELL**</span></span>

<span data-ttu-id="cc99a-403">Lorsqu’un GBD a un shell et que l’autre GBD a deux interpréteurs de commandes, vous devez créer un « shell de référence » pour le GBD avec un seul Shell.</span><span class="sxs-lookup"><span data-stu-id="cc99a-403">Where one GBD has one shell and the other GBD has two shells, you must create a "Reference Shell" for the GBD with only one shell.</span></span> <span data-ttu-id="cc99a-404">L’interpréteur de commandes existant, qui serait appelé le shell de référence, sera remplacé par l’interpréteur de commandes « plausible ». En fait, vous n’avez pas besoin de créer un shell dans l’espace Jab complet.</span><span class="sxs-lookup"><span data-stu-id="cc99a-404">The existing shell, which would be called the Reference Shell, will be changed to the "Plausible Shell."In fact, you don't actually have to create a shell in the full Jab space.</span></span> <span data-ttu-id="cc99a-405">Étant donné que la mise à l’échelle de la luminosité utilise uniquement *j Max* et *j min*, vous devez uniquement créer ces valeurs pour l’environnement de référence induit.</span><span class="sxs-lookup"><span data-stu-id="cc99a-405">Because the lightness rescaling only uses *J max* and *J min*, you only have to make up these values for the induced Reference Shell.</span></span> <span data-ttu-id="cc99a-406">Il existe deux cas, en fonction de la GBD qui a deux interpréteurs de charge.</span><span class="sxs-lookup"><span data-stu-id="cc99a-406">There are two cases, depending on which GBD has two shells.</span></span>

<span data-ttu-id="cc99a-407">Cas 1 : la source GBD a deux interpréteurs de tâches ; le GBD de destination a un shell.</span><span class="sxs-lookup"><span data-stu-id="cc99a-407">Case 1: Source GBD has two shells; destination GBD has one shell.</span></span>

<span data-ttu-id="cc99a-408">Déterminer le shell de référence induite de destination sur l’axe neutre ; autrement dit, J <sub>r, \ min, \ Ref</sub> et J <sub>r, \ Max, \ Ref</sub> de l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-408">Determine the destination induced Reference Shell on the neutral axis; that is, the J <sub>r,\ min,\ ref</sub> and J <sub>r,\ max,\ ref</sub> of the shell.</span></span> <span data-ttu-id="cc99a-409">Cette opération s’effectue à l’aide de l’algorithme suivant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-409">This is done using the following algorithm.</span></span>

![Affiche l’algorithme permettant de déterminer l’interpréteur de commandes de référence induite de destination.](images/gmmp-induced01.png)

<span data-ttu-id="cc99a-411">Les facteurs ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-411">The factors ?</span></span> <span data-ttu-id="cc99a-412"><sub>faible</sub> et ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-412"><sub>low</sub> and ?</span></span> <span data-ttu-id="cc99a-413">contrôle <sub>élevé</sub> la séparation entre l’interpréteur de commandes plausible et l’interpréteur de commandes de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-413"><sub>high</sub> control the separation between the Plausible Shell and the Reference Shell.</span></span> <span data-ttu-id="cc99a-414">La valeur 1 signifie que les valeurs J <sub>min</sub> ou j m ₐ ₓ coïncident.</span><span class="sxs-lookup"><span data-stu-id="cc99a-414">A value of 1 means that the J <sub>min</sub> values or J ₘₐₓ values coincide.</span></span> <span data-ttu-id="cc99a-415">Leurs valeurs sont « induites » de l’interpréteur de commandes de référence source et de l’interpréteur de commandes source plausible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-415">Their values are "induced" from the source Reference Shell and source Plausible Shell.</span></span>

![Affiche la formule des valeurs de l’interpréteur de commandes de référence source et de l’interpréteur de commandes source plausible.](images/gmmp-induced02.png)

<span data-ttu-id="cc99a-417">Les « facteurs manœuvre » F <sub>Low</sub> et f <sub>High</sub> sont des *paramètres ajustables* qui doivent se situer entre 0 et 1.</span><span class="sxs-lookup"><span data-stu-id="cc99a-417">The "fudge factors" F <sub>low</sub> and F <sub>high</sub> are *tunable parameters* that must lie between 0 and 1.</span></span> <span data-ttu-id="cc99a-418">Si la valeur est 0, les ₓ J <sub>min</sub> ou j m ₐ sont directement induits à partir des interpréteurs de la source.</span><span class="sxs-lookup"><span data-stu-id="cc99a-418">If the value is 0, then the J <sub>min</sub> or J ₘₐₓ are directly induced from the source shells.</span></span> <span data-ttu-id="cc99a-419">Dans ce cas, choisissez F <sub>Low</sub> = 0,95 et f <sub>High</sub> = 0,1.</span><span class="sxs-lookup"><span data-stu-id="cc99a-419">For this case, choose F <sub>low</sub> = 0.95, and F <sub>high</sub> = 0.1.</span></span>

<span data-ttu-id="cc99a-420">Cas 2 : la source GBD a un shell ; le GBD de destination a deux shells.</span><span class="sxs-lookup"><span data-stu-id="cc99a-420">Case 2: Source GBD has one shell; destination GBD has two shells.</span></span>

<span data-ttu-id="cc99a-421">Déterminer le shell de référence induit par la source sur l’axe neutre ; autrement dit, les J <sub>o, \ min, \ Ref</sub> et J <sub>o, \ Max, \ Ref</sub> de l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-421">Determine the source induced Reference Shell on the neutral axis; that is, the J <sub>o,\ min,\ ref</sub> and J <sub>o,\ max,\ ref</sub> of the shell.</span></span> <span data-ttu-id="cc99a-422">Cette opération s’effectue à l’aide de l’algorithme suivant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-422">This is done using the following algorithm.</span></span>

![Affiche l’algorithme permettant de déterminer le shell de référence induite de destination sur l’axe neutre.](images/gmmp-induced03.png)

<span data-ttu-id="cc99a-424">Encore une fois, quels sont les facteurs ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-424">Again, the factors ?</span></span> <span data-ttu-id="cc99a-425"><sub>faible</sub> et ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-425"><sub>low</sub> and ?</span></span> <span data-ttu-id="cc99a-426">contrôle <sub>élevé</sub> la séparation entre l’interpréteur de commandes plausible et l’interpréteur de commandes de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-426"><sub>high</sub> control the separation between the Plausible Shell and Reference Shell.</span></span> <span data-ttu-id="cc99a-427">La valeur 1 signifie que les valeurs J <sub>min</sub> ou j m ₐ ₓ coïncident.</span><span class="sxs-lookup"><span data-stu-id="cc99a-427">A value of 1 means the J <sub>min</sub> values or J ₘₐₓ values coincide.</span></span> <span data-ttu-id="cc99a-428">Leurs valeurs sont « induites » de l’interpréteur de commandes de référence source et de l’interpréteur de commandes source plausible :</span><span class="sxs-lookup"><span data-stu-id="cc99a-428">Their values are "induced" from the source Reference Shell and source Plausible Shell:</span></span>

![Affiche l’algorithme pour contrôler la séparation entre l’interpréteur de commandes de référence et l’interpréteur de commandes source plausible.](images/gmmp-induced04.png)

### <a name="reasons-for-changes-from-the-cie-tc8-03-recommendations"></a><span data-ttu-id="cc99a-430">Raisons des modifications des recommandations CIE TC8-03</span><span class="sxs-lookup"><span data-stu-id="cc99a-430">Reasons for changes from the CIE TC8-03 recommendations</span></span>

<span data-ttu-id="cc99a-431">BasicPhoto diffère des recommandations TC8-03 CIE des manières suivantes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-431">BasicPhoto differs from the CIE TC8-03 recommendations in the following ways.</span></span>

1.  <span data-ttu-id="cc99a-432">Chroma n’est pas compressé vers le sommet, mais le long des lignes de clarté constante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-432">Chroma is not compressed toward the cusp but along lines of constant lightness.</span></span>
2.  <span data-ttu-id="cc99a-433">La plage de luminosité utilise la luminosité de la couleur la plus sombre dans la gamme plutôt que le point auquel la limite de gammes traverse l’axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-433">The lightness range uses the lightness of the darkest color in the gamut rather than the point at which the gamut boundary crosses the neutral axis.</span></span>
3.  <span data-ttu-id="cc99a-434">BasicPhoto prend en charge à la fois un interpréteur de couleurs de référence et un interpréteur de couleurs plausible, si une limite de gamme dans la transformation a deux interpréteurs de commandes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-434">BasicPhoto supports both a reference gamut shell and a plausible gamut shell, if either gamut boundary in the transform has two shells.</span></span>
4.  <span data-ttu-id="cc99a-435">BasicPhoto utilise CIECAM02 ; au lieu d’utiliser CIECAM97s pour convertir en D65 à 400 cd/m2, puis en utilisant l’espace de couleurs brute IPT.</span><span class="sxs-lookup"><span data-stu-id="cc99a-435">BasicPhoto uses CIECAM02; instead of using CIECAM97s to convert to D65 at 400 cd/m2, and then using RIT IPT color space.</span></span>

<span data-ttu-id="cc99a-436">La première modification a été apportée pour éviter les problèmes d’inversion de tonalité qui peuvent se produire lors de l’utilisation de la compression vers un sommet.</span><span class="sxs-lookup"><span data-stu-id="cc99a-436">The first change was made to prevent tone inversion problems that can occur when using compression toward a cusp.</span></span> <span data-ttu-id="cc99a-437">Comme illustré à la figure 10, la compression de crête peut entraîner des inversions de tonalité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-437">As shown in Figure 10, cusp compression can cause tone inversions.</span></span> <span data-ttu-id="cc99a-438">Cela peut se produire lorsque les couleurs de chrominance élevée sont plus claires que les couleurs de couleur inférieure.</span><span class="sxs-lookup"><span data-stu-id="cc99a-438">This can happen when colors of high chroma are lighter than colors of lower chroma.</span></span> <span data-ttu-id="cc99a-439">Étant donné que SGCK compresse chaque pixel indépendamment dans la clarté et le Chroma, il n’est pas garanti qu’il conserve la relation de clarté entre les valeurs de pixel après la compression.</span><span class="sxs-lookup"><span data-stu-id="cc99a-439">Because SGCK compresses each pixel independently in both lightness and chroma, it is not guaranteed to preserve the lightness relationship between the pixel values after the compression.</span></span> <span data-ttu-id="cc99a-440">L’inconvénient de cette décision à compresser sur les lignes de clarté constante est que vous pouvez subir des pertes de chrominance, en particulier dans les zones où la limite de la gamme de destination est très plate, comme c’est le cas des jaunes brillants.</span><span class="sxs-lookup"><span data-stu-id="cc99a-440">The well-known downside to this decision to compress on lines of constant lightness is that you can suffer losses of chroma, particular in areas where the destination gamut boundary is very flat, as happens with bright yellows.</span></span>

![Diagramme qui affiche l’inversion des tons provoquée par SGCK.](images/gmmp-toneinversion.png)

<span data-ttu-id="cc99a-442">**Figure 10** : inversion des tons provoquée par SGCK</span><span class="sxs-lookup"><span data-stu-id="cc99a-442">**Figure 10** : Tone inversion caused by SGCK</span></span>

![Affiche une image d’origine d’un théière.](images/originalteapot.jpg)![Affiche le résultat SGCK de l’image théière.](images/badteapot.jpg)![Affiche le résultat BasicPhoto de l’image théière.](images/betterteapot.jpg)

<span data-ttu-id="cc99a-446">**Figure 11** : image d’origine, résultat SGCK et résultat BasicPhoto</span><span class="sxs-lookup"><span data-stu-id="cc99a-446">**Figure 11** : Original image, SGCK result, and BasicPhoto result</span></span>

<span data-ttu-id="cc99a-447">La figure 11 illustre cette inversion de tonalité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-447">Figure 11 illustrates this tone inversion.</span></span> <span data-ttu-id="cc99a-448">Sur la gauche se trouve une image originale capturée par un appareil photo numérique. au centre, l’image est reproduite par SGCK ; et à droite, l’image est reproduite par BasicPhoto.</span><span class="sxs-lookup"><span data-stu-id="cc99a-448">On the left is an original image captured by a digital camera; in the center, the image as reproduced by SGCK; and on the right, the image as reproduced by BasicPhoto.</span></span> <span data-ttu-id="cc99a-449">L’image à gauche se trouve dans l’espace de couleurs de l’appareil photo numérique, les images centrale et droite se trouvent dans l’espace colorimétrique d’un écran LCD.</span><span class="sxs-lookup"><span data-stu-id="cc99a-449">The image on the left is in the digital camera's color space, the center and right images are in the color space of an LCD video display.</span></span> <span data-ttu-id="cc99a-450">Dans l’image d’origine, la partie supérieure du théière est plus sombre que le bas, car le bas reflète la nappe sur laquelle il est assis.</span><span class="sxs-lookup"><span data-stu-id="cc99a-450">In the original image, the top part of the teapot is darker than the bottom, because the bottom is reflecting the tablecloth that it is sitting upon.</span></span> <span data-ttu-id="cc99a-451">Dans l’image SGCK, la partie supérieure est en fait plus claire que le bas, en raison de l’inversion des tons.</span><span class="sxs-lookup"><span data-stu-id="cc99a-451">In the SGCK image, the top part is actually lighter than the bottom, because of the tone inversion.</span></span> <span data-ttu-id="cc99a-452">En outre, il est difficile de voir les éléments reflétés dans la partie inférieure du théière.</span><span class="sxs-lookup"><span data-stu-id="cc99a-452">Also, it is difficult to see the items reflected in the lower part of the teapot.</span></span> <span data-ttu-id="cc99a-453">À droite, BasicPhoto a corrigé l’inversion des tons et les articles réfléchis sont plus clairement distingués.</span><span class="sxs-lookup"><span data-stu-id="cc99a-453">On the right, BasicPhoto has fixed the tone inversion and the reflected articles are more clearly distinguishable.</span></span>

<span data-ttu-id="cc99a-454">La deuxième modification a été apportée pour améliorer la reproduction des couleurs presque noires sur les imprimantes où le noir noir ne se trouve pas directement sur l’axe neutre CIECAM02.</span><span class="sxs-lookup"><span data-stu-id="cc99a-454">The second change was made to improve the reproduction of nearly black colors on printers where the blackest black does not fall directly on the CIECAM02 neutral axis.</span></span> <span data-ttu-id="cc99a-455">La figure 12 suivante montre une image convertie en sRVB ; reproduit pour une imprimante à jet d’encre RGB utilisant SGCK ; et reproduit pour la même imprimante à l’aide de BasicPhoto.</span><span class="sxs-lookup"><span data-stu-id="cc99a-455">The following Figure 12 shows an image converted to sRGB; reproduced for an RGB inkjet printer using SGCK; and reproduced for the same printer using BasicPhoto.</span></span> <span data-ttu-id="cc99a-456">L’image au centre n’utilise pas la totalité de l’appareil noir, et par conséquent, elle n’a pas de contraste visible dans l’original.</span><span class="sxs-lookup"><span data-stu-id="cc99a-456">The image in the center is not using the full device black, and so it lacks the contrast seen in the original.</span></span> <span data-ttu-id="cc99a-457">Le contraste est rétabli avec BasicPhoto.</span><span class="sxs-lookup"><span data-stu-id="cc99a-457">The contrast is restored with BasicPhoto.</span></span>

![Affiche l’image d’origine d’un Playset.](images/playstructure.jpg)![Affiche l’image de la Playset reproduite pour une imprimante à jet d’encre R G B à l’aide de SGCK.](images/playstructurebad.jpg)![Affiche l’image de la Playset reproduite pour une imprimante à jet d’encre R G B à l’aide de BasicPhoto.](images/betterplaystructure.jpg)

<span data-ttu-id="cc99a-461">**Figure 12** : noir amélioré</span><span class="sxs-lookup"><span data-stu-id="cc99a-461">**Figure 12** : Enhanced black</span></span>

<span data-ttu-id="cc99a-462">La troisième modification a été apportée pour améliorer la reproduction des couleurs des appareils photo numériques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-462">The third change was made to improve the color reproduction for digital cameras.</span></span> <span data-ttu-id="cc99a-463">En particulier dans les cas où l’appareil photo numérique a été profilé à l’aide d’une cible de référence, une description de la gamme de couleurs générée à partir de couleurs mesurées peut ne pas inclure toutes les couleurs qui peuvent être capturées dans une scène réelle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-463">Particularly in cases where the digital camera has been profiled using a reference target, a gamut boundary description built from measured colors might not include all the colors that might be captured in a real world scene.</span></span> <span data-ttu-id="cc99a-464">Au lieu de découper toutes les couleurs jusqu’à la gamme de la cible de couleur mesurée, vous autorisez l’extrapolation à produire une limite de gamme plausible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-464">Rather than clipping all colors to the gamut of the measured color target, you allow for extrapolation to produce a plausible gamut boundary.</span></span> <span data-ttu-id="cc99a-465">L’algorithme BasicPhoto est conçu pour prendre en charge une telle limite de gamme extrapolée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-465">The BasicPhoto algorithm is designed to support such an extrapolated gamut boundary.</span></span>

<span data-ttu-id="cc99a-466">La quatrième modification a été apportée car CIECAM02 fonctionne bien pour le mappage de gammes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-466">The fourth change was made because CIECAM02 works well for gamut mapping.</span></span> <span data-ttu-id="cc99a-467">Le processus recommandé par TC8-03 de conversion des couleurs de l’appareil en D65 à 400 cd/m2, puis à l’aide de l’espace de couleurs brute IPT est à la fois le calcul fastidieux et le temps.</span><span class="sxs-lookup"><span data-stu-id="cc99a-467">The process recommended by TC8-03 of converting device colors to D65 at 400 cd/m2, and then using the RIT IPT color space is both computation-intensive and time-consuming.</span></span>

### <a name="hue-mapping"></a><span data-ttu-id="cc99a-468">Mappage de teinte</span><span class="sxs-lookup"><span data-stu-id="cc99a-468">Hue mapping</span></span>

<span data-ttu-id="cc99a-469">HueMap est l’équivalent de l’intention de saturation ICC.</span><span class="sxs-lookup"><span data-stu-id="cc99a-469">HueMap is the equivalent of the ICC Saturation intent.</span></span>

<span data-ttu-id="cc99a-470">Si la limite de la gamme source ou la limite de la gamme de destination ne contient pas de préfixes, ce modèle revient au modèle haché (relatif) décrit dans la section précédente. par exemple, les appareils pour lesquels les disques primaires ne peuvent pas être déterminés (profils ICC avec plus de quatre canaux) ou les profils ICC monochrome.</span><span class="sxs-lookup"><span data-stu-id="cc99a-470">If either the source gamut boundary or the destination gamut boundary does not contain primaries, this model reverts to the MinCD (relative) model described in a preceding section; for example, devices for which the primaries cannot be determined (ICC profiles with more than four channels) or monochrome ICC profiles.</span></span>

<span data-ttu-id="cc99a-471">Cet algorithme commence par ajuster la teinte de la valeur de couleur d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-471">This algorithm first adjusts the hue of the input color value.</span></span> <span data-ttu-id="cc99a-472">Ensuite, il ajuste simultanément la clarté et le Chroma à l’aide d’un mappage d’inclinaison.</span><span class="sxs-lookup"><span data-stu-id="cc99a-472">Then it simultaneously adjusts the lightness and chroma, using a shearing mapping.</span></span> <span data-ttu-id="cc99a-473">Enfin, elle découpe la valeur de couleur pour s’assurer qu’elle est dans la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-473">Finally, it clips color value to make sure it is within gamut.</span></span>

<span data-ttu-id="cc99a-474">La première étape consiste à déterminer les « roues de teintes ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-474">The first step is to determine the "Hue Wheels."</span></span> <span data-ttu-id="cc99a-475">Recherchez les valeurs JCh pour les couleurs primaires et secondaires pour les appareils source et de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-475">Find the JCh values for primary and secondary colors for both source and destination device.</span></span> <span data-ttu-id="cc99a-476">Vous envisagez uniquement les composants de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-476">You are only considering the hue components.</span></span> <span data-ttu-id="cc99a-477">Il en résulte une roue de teinte principale ou secondaire avec six points de couleur pour chaque appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-477">This results in a primary or secondary hue wheel with six color points for each device.</span></span> <span data-ttu-id="cc99a-478">(Voir figure 13.)</span><span class="sxs-lookup"><span data-stu-id="cc99a-478">(See Figure 13.)</span></span>

![Diagramme qui montre les roues teintes avec six points de couleur.](images/gmmp-figure12.png)

<span data-ttu-id="cc99a-480">**Figure 13** : roues de teinte</span><span class="sxs-lookup"><span data-stu-id="cc99a-480">**Figure 13** : Hue wheels</span></span>

<span data-ttu-id="cc99a-481">Vous pouvez obtenir de meilleurs résultats si la source bleue principale n’est pas pivotée vers la base de destination bleue principale.</span><span class="sxs-lookup"><span data-stu-id="cc99a-481">Better results can be obtained if the source blue primary is not rotated to the destination blue primary.</span></span> <span data-ttu-id="cc99a-482">Au lieu de cela, l’angle de teinte primaire bleu source est utilisé comme angle de teinte primaire bleu de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-482">Instead, the source blue primary hue angle is used as the destination blue primary hue angle.</span></span>

<span data-ttu-id="cc99a-483">Ensuite, effectuez les rotations de teinte pour chaque couleur d’entrée à partir de l’image source,</span><span class="sxs-lookup"><span data-stu-id="cc99a-483">Next, perform the hue rotations for each input color from the source image,</span></span>

<span data-ttu-id="cc99a-484">a) à l’aide de l’angle de teinte de la couleur d’entrée, déterminez l’emplacement de la couleur sur la roue de teinte source par rapport aux deux couleurs primaires ou secondaires adjacentes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-484">a)Using the hue angle of the input color, determine the location of the color on the source hue wheel relative to the two adjacent primary or secondary color.</span></span> <span data-ttu-id="cc99a-485">L’emplacement peut être considéré comme un pourcentage de la distance entre les primaires.</span><span class="sxs-lookup"><span data-stu-id="cc99a-485">The location can be thought of as a percentage of the distance between the primaries.</span></span> <span data-ttu-id="cc99a-486">Par exemple, la teinte de la couleur d’entrée est 40 pour cent de la valeur de teinte de magenta à la valeur de teinte rouge.</span><span class="sxs-lookup"><span data-stu-id="cc99a-486">For example, the input color hue is 40 percent of the way from the hue value of Magenta to the hue value of Red.</span></span>

<span data-ttu-id="cc99a-487">b) sur la roue teinte de destination, recherchez l’angle de teinte associé, par exemple, 40% du magenta au rouge.</span><span class="sxs-lookup"><span data-stu-id="cc99a-487">b)On the destination hue wheel, find the associated hue angle, for example, 40 percent from Magenta to Red.</span></span> <span data-ttu-id="cc99a-488">Cette valeur correspond à l’angle de teinte de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-488">This value will be the destination hue angle.</span></span>

<span data-ttu-id="cc99a-489">En règle générale, les principaux serveurs primaires et secondaires n’ont pas les mêmes angles de teinte que les serveurs primaires et secondaires de destination ; autrement dit, l’angle de teinte de destination est généralement différent de l’angle de teinte source.</span><span class="sxs-lookup"><span data-stu-id="cc99a-489">In general, the source primaries and secondaries will not be at the same hue angles as the destination primaries and secondaries; that is, the destination hue angle usually will be different from the source hue angle.</span></span>

<span data-ttu-id="cc99a-490">Par exemple, supposons que les roues teintes produisent les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="cc99a-490">For example, suppose the hue wheels produce the following values:</span></span>

<span data-ttu-id="cc99a-491">Source M = 295 degrés, source R = 355 degrés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-491">Source M = 295 degrees, Source R = 355 degrees.</span></span>

<span data-ttu-id="cc99a-492">Destination M = 290 degrés, destination R = 346 degrés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-492">Destination M = 290 degrees, Destination R = 346 degrees.</span></span>

<span data-ttu-id="cc99a-493">Si l’angle de teinte de la couleur d’entrée est de 319 degrés, il s’agit de 40% de l’angle (24 degrés) entre la source M et la source R. L’angle de M à R est de 60 degrés et l’angle de M à la teinte d’entrée est de 24 degrés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-493">If the hue angle of the input color is 319 degrees, it is 40 percent of the angle (24 degrees) from source M to source R. The angle from M to R is 60 degrees, and the angle from M to input hue is 24 degrees.</span></span> <span data-ttu-id="cc99a-494">Calculer l’angle sur la destination, qui est de 40% de la destination M vers la destination R (22 degrés), l’angle de teinte de la couleur de destination est donc de 312 degrés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-494">Calculate the angle on the destination that is 40 percent from destination M to destination R (22 degrees), so the hue angle of the destination color is 312 degrees.</span></span>

<span data-ttu-id="cc99a-495">Ensuite, calculez les points de référence de teinte pour la teinte source et la teinte de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-495">Next, calculate the hue reference points for the source hue and the destination hue.</span></span> <span data-ttu-id="cc99a-496">Pour calculer le point de référence de teinte pour une valeur h (teinte) particulière, vous devez rechercher la valeur J (luminosité) et la valeur C (chrominance).</span><span class="sxs-lookup"><span data-stu-id="cc99a-496">To calculate the hue reference point for a particular h (hue) value, you want to find the J (lightness) value and C (chroma) value.</span></span>

-   <span data-ttu-id="cc99a-497">Recherchez la valeur J du point de référence de teinte en interpolant entre les valeurs J pour les points primaires ou secondaires adjacents, en utilisant la position relative de la teinte. par exemple, 40 pour cent dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="cc99a-497">Find the J value of the hue reference point by interpolating between the J values for the adjacent primary or secondary points, using the relative position of the hue; for example, 40 percent in this example.</span></span>
-   <span data-ttu-id="cc99a-498">Recherchez la valeur C maximale à cette valeur J et à la valeur h.</span><span class="sxs-lookup"><span data-stu-id="cc99a-498">Find the maximum C value at this J value and h value.</span></span> <span data-ttu-id="cc99a-499">Vous avez maintenant la JCh du point de référence de teinte pour cette teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-499">You now have the JCh of the hue reference point for that hue.</span></span>

![Diagramme qui affiche une feuille de teinte.](images/gmmp-figure13.png)

<span data-ttu-id="cc99a-501">**Figure 14** : feuille de teinte (visualisation d’une tranche de limites de gamme à une teinte spécifique)</span><span class="sxs-lookup"><span data-stu-id="cc99a-501">**Figure 14** : A hue leaf (visualization of a gamut boundary slice at a specific hue)</span></span>

<span data-ttu-id="cc99a-502">L’étape suivante consiste à calculer le mappage d’inclinaison pour chaque pixel.</span><span class="sxs-lookup"><span data-stu-id="cc99a-502">The next step is to compute the shear mapping for each pixel.</span></span> <span data-ttu-id="cc99a-503">Tout d’abord, Visualisez une feuille de teinte de la gamme source pour l’angle de teinte de couleur source et une feuille de teinte de la gamme de destination pour l’angle de teinte de destination calculé lors de la rotation de la teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-503">First, visualize a hue leaf from the source gamut for the source color hue angle, and a hue leaf from the destination gamut for the destination hue angle computed during hue rotation.</span></span> <span data-ttu-id="cc99a-504">Les feuilles de teinte sont créées en acceptant une « tranche » de la surface limite de la gamme JCh à un angle de teinte spécifique (voir figure 14).</span><span class="sxs-lookup"><span data-stu-id="cc99a-504">The hue leaves are created by taking a "slice" from the JCh gamut boundary surface at a specific hue angle (see Figure 14).</span></span>

<span data-ttu-id="cc99a-505">Remarque : pour des raisons d’optimisation des performances, les feuilles de teinte ne sont pas réellement créées ; elles sont décrites et présentées ici à des fins de visualisation uniquement.</span><span class="sxs-lookup"><span data-stu-id="cc99a-505">NOTE: For performance optimization reasons, hue leaves are not actually created; they are described and shown here for visualization purposes only.</span></span> <span data-ttu-id="cc99a-506">Les opérations sont exécutées directement sur la surface limite de la gamme à la teinte spécifiée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-506">The operations are performed directly on the gamut boundary surface at the specified hue.</span></span> <span data-ttu-id="cc99a-507">Vous calculez ensuite les points de référence de teinte pour déterminer le mappage d’inclinaison.</span><span class="sxs-lookup"><span data-stu-id="cc99a-507">You then compute the hue reference points to determine the shear mapping.</span></span>

-   <span data-ttu-id="cc99a-508">Effectuez une mise à l’échelle claire pour mapper les points noirs et blancs de la feuille source sur la feuille de destination (voir figure 15).</span><span class="sxs-lookup"><span data-stu-id="cc99a-508">Perform a lightness rescaling to map the black and white points of the source leaf to the destination leaf (see Figure 15).</span></span> <span data-ttu-id="cc99a-509">Les points noir et blanc de la feuille de teinte source sont mappés de manière linéaire aux points noirs et blancs de la feuille de teinte de destination, en mettant à l’échelle toutes les coordonnées J de la limite source.</span><span class="sxs-lookup"><span data-stu-id="cc99a-509">The black and white points of the source hue leaf are mapped linearly to the black and white points of the destination hue leaf, by scaling all the J coordinates of the source boundary.</span></span> <span data-ttu-id="cc99a-510">La valeur de la couleur d’entrée mappée par teinte est mise à l’échelle de la même manière.</span><span class="sxs-lookup"><span data-stu-id="cc99a-510">The hue-mapped input color value is scaled in the same manner.</span></span>

![Diagramme qui montre le mappage de luminosité.](images/gmmp-figure14.png)

<span data-ttu-id="cc99a-512">**Figure 15** : mappage de luminosité</span><span class="sxs-lookup"><span data-stu-id="cc99a-512">**Figure 15** : Lightness mapping</span></span>

-   <span data-ttu-id="cc99a-513">Déterminez les points de référence de teinte pour chaque feuille de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-513">Determine the hue reference points for each hue leaf.</span></span> <span data-ttu-id="cc99a-514">Appliquez un mappage d’inclinaison à la feuille source afin que les points de référence source et de destination coïncident (voir figure 16).</span><span class="sxs-lookup"><span data-stu-id="cc99a-514">Apply a shear mapping to the source leaf so that the source and destination reference points coincide (see Figure 16).</span></span> <span data-ttu-id="cc99a-515">Le point de référence pour une gamme à une teinte spécifique est le point de référence de teinte interpolé entre les primaires adjacentes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-515">The reference point for a gamut at a specific hue is the interpolated hue reference point between the adjacent primaries.</span></span> <span data-ttu-id="cc99a-516">Le point de référence de la feuille de teinte source est mappé linéairement au point de référence de la feuille de teinte de destination, à l’aide d’une opération d’inclinaison qui verrouille l’axe J, en conservant les points noirs et les points blancs à l’arrêt.</span><span class="sxs-lookup"><span data-stu-id="cc99a-516">The reference point of the source hue leaf is mapped linearly to the reference point of the destination hue leaf, using a "shear" operation that locks the J axis, keeping the black points and the white points stationary.</span></span> <span data-ttu-id="cc99a-517">Les points noirs, les points blancs et les points de référence de la teinte source et de la teinte de destination ne doivent pas coïncider.</span><span class="sxs-lookup"><span data-stu-id="cc99a-517">The black points, white points, and reference points of the source and destination hue leaves should coincide.</span></span>
-   <span data-ttu-id="cc99a-518">Appliquez le mappage d’inclinaison à la valeur de couleur d’entrée de luminosité ajustée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-518">Apply the shear mapping to the lightness-adjusted input color value.</span></span> <span data-ttu-id="cc99a-519">Les coordonnées J et C de la valeur de couleur source sont mises à l’échelle proportionnellement, par rapport à la distance à partir de l’axe J.</span><span class="sxs-lookup"><span data-stu-id="cc99a-519">The J and C coordinates of the source color value are proportionally scaled, relative to its distance from the J axis.</span></span>
-   <span data-ttu-id="cc99a-520">Ensuite, une compression légère dépendante de la chrominance vers la valeur J du point de référence de teinte est effectuée sur le point de couleur mappé en cisaillement.</span><span class="sxs-lookup"><span data-stu-id="cc99a-520">Next, a subtle chroma-dependent lightness compression toward the J-value of the hue reference point is performed on the shear-mapped color point.</span></span> <span data-ttu-id="cc99a-521">La compression vers la référence de teinte J est effectuée de façon similaire à la gamma, où les blancs, les noirs, les gris et les points de la référence de teinte J ne sont pas affectés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-521">The compression toward hue reference J is done in a gamma-like fashion, where white, black, grays, and points on the hue reference J are not affected.</span></span> <span data-ttu-id="cc99a-522">Tous les autres points tendent vers la référence de teinte J en douceur, ce qui est légèrement plus proche de la référence de teinte J, avec une constante de chrominance restante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-522">All other points tend toward the hue reference J in a smooth fashion, slightly bunching up near the hue reference J, with chroma remaining constant.</span></span> <span data-ttu-id="cc99a-523">La dépendance Chroma garantit que les couleurs neutres ne sont pas affectées, et l’effet est augmenté sur les couleurs avec un plus grand Chroma.</span><span class="sxs-lookup"><span data-stu-id="cc99a-523">The chroma dependency assures that neutral colors are not affected, and the effect is increased on colors with higher chroma.</span></span>

<span data-ttu-id="cc99a-524">Voici une description mathématique de la compression de luminosité vers la référence de teinte J, ou en ajustant la valeur J du point de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-524">The following is a mathematical description of the lightness compression toward the hue reference J, or adjusting the J-value of the destination point.</span></span> <span data-ttu-id="cc99a-525">Il s’agit du point de destination, car il a été mis en correspondance avec la gamme de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-525">It is called the destination point because it has been shear mapped into the destination gamut.</span></span>

<span data-ttu-id="cc99a-526">Tout d’abord, calculez « factorC » (facteur de dépendance Chroma) pour le point de destination, ce qui détermine l’effet de la compression de la luminosité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-526">First, compute "factorC" (chroma dependency factor) for the destination point, which determines how much effect the lightness compression will have.</span></span> <span data-ttu-id="cc99a-527">Les points proches ou sur l’axe des J auront peu ou pas de compression. les points plus éloignés de l’axe des J (65536 couleurs) auront une plus grande compression appliquée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-527">Points near or on the J-axis will have little or no compression; points farther away from the J-axis (high-chroma) will have more compression applied.</span></span> <span data-ttu-id="cc99a-528">Multiplier par 0,5 pour garantir que factorC est inférieur à 1, car il est possible que sourceC soit légèrement supérieur à referenceC, mais pas deux fois plus grand.</span><span class="sxs-lookup"><span data-stu-id="cc99a-528">Multiply by 0.5 to ensure that factorC is less than 1, because it is possible that sourceC could be slightly greater than referenceC, but not twice as great.</span></span>

<span data-ttu-id="cc99a-529">factorC = (destinationC/referenceC) ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-529">factorC = (destinationC / referenceC) ?</span></span> <span data-ttu-id="cc99a-530">0,5</span><span class="sxs-lookup"><span data-stu-id="cc99a-530">0.5</span></span>

<span data-ttu-id="cc99a-531">où :</span><span class="sxs-lookup"><span data-stu-id="cc99a-531">where:</span></span>

<span data-ttu-id="cc99a-532">destinationC est la valeur C du point de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-532">destinationC is the C-value of the destination point.</span></span>

<span data-ttu-id="cc99a-533">referenceC est la valeur C du point de référence de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-533">referenceC is the C-value of the Hue Reference point.</span></span>

<span data-ttu-id="cc99a-534">Ensuite, déterminez si le point de destination J se trouve au-dessus ou en dessous de la référence de teinte J. Si c’est le cas, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="cc99a-534">Next, determine whether the destination point J is above or below the hue reference J. If it is above, do the following:</span></span>

1.  <span data-ttu-id="cc99a-535">Calcule « factorJ » pour le point de destination par rapport au referenceJ.</span><span class="sxs-lookup"><span data-stu-id="cc99a-535">Compute "factorJ" for the destination point relative to the referenceJ.</span></span> <span data-ttu-id="cc99a-536">Cette valeur factorJ sera comprise entre 0 et 1 (0 si sur le referenceJ ; 1 si au maxJ).</span><span class="sxs-lookup"><span data-stu-id="cc99a-536">This factorJ value will be between 0 and 1 (0 if on the referenceJ; 1 if at maxJ).</span></span>
2.  <span data-ttu-id="cc99a-537">factorJ = (destinationJ-referenceJ)/(maxJ-referenceJ)</span><span class="sxs-lookup"><span data-stu-id="cc99a-537">factorJ = (destinationJ - referenceJ) / (maxJ - referenceJ)</span></span>

    <span data-ttu-id="cc99a-538">où :</span><span class="sxs-lookup"><span data-stu-id="cc99a-538">where:</span></span>

    <span data-ttu-id="cc99a-539">destinationJ est la valeur J du point de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-539">destinationJ is the J-value of the destination point.</span></span>

    <span data-ttu-id="cc99a-540">referenceJ est la valeur J du point de référence de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-540">referenceJ is the J-value of the hue reference point.</span></span>

    <span data-ttu-id="cc99a-541">maxJ est la valeur J maximale de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-541">maxJ is the maximum J-value of the gamut.</span></span>

3.  <span data-ttu-id="cc99a-542">Appliquez une fonction d’alimentation de type gamma à factorJ, ce qui réduira la factorJ d’une certaine quantité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-542">Apply a gamma-like power function to factorJ, which will reduce factorJ by a certain amount.</span></span> <span data-ttu-id="cc99a-543">Cet exemple utilise la puissance de 2 (le carré).</span><span class="sxs-lookup"><span data-stu-id="cc99a-543">This example uses the power of 2 (the square).</span></span> <span data-ttu-id="cc99a-544">Soustraire le factorJ réduit du factorJ d’origine et multipliez le résultat par la plage « J-Range totale » au-dessus du referenceJ principal pour rechercher le « deltaJ », qui représente la modification de J après la compression de la lumière, mais sans inclure la dépendance Chroma.</span><span class="sxs-lookup"><span data-stu-id="cc99a-544">Subtract the reduced factorJ from the original factorJ and multiply the result by the total J-range above the primary referenceJ to find the "deltaJ," which represents the change in J after the lightness compression, but not including the chroma dependency.</span></span>
4.  <span data-ttu-id="cc99a-545">deltaJ = (factorJ-(factorJ ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-545">deltaJ = (factorJ - (factorJ ?</span></span> <span data-ttu-id="cc99a-546">factorJ)) ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-546">factorJ)) ?</span></span> <span data-ttu-id="cc99a-547">(maxJ - referenceJ)</span><span class="sxs-lookup"><span data-stu-id="cc99a-547">(maxJ - referenceJ)</span></span>

5.  <span data-ttu-id="cc99a-548">Appliquez factorC à deltaJ (plus le Chroma est élevé, plus l’effet est élevé) et calculez la nouvelle valeur J pour le point de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-548">Apply factorC to the deltaJ (the higher the chroma, the greater the effect), and compute the new J-value for the destination point.</span></span>
6.  <span data-ttu-id="cc99a-549">destinationJ = destinationJ-(deltaJ ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-549">destinationJ = destinationJ - (deltaJ ?</span></span> <span data-ttu-id="cc99a-550">factorC)</span><span class="sxs-lookup"><span data-stu-id="cc99a-550">factorC)</span></span>

<span data-ttu-id="cc99a-551">Si J-value pour le point de destination est inférieur à referenceJ, un calcul similaire aux étapes précédentes A-C est effectué à l’aide de minJ au lieu de maxJ pour trouver la plage dans J afin de calculer le factorJ, et en tenant compte de la polarité des opérations « sous-jacentes » du referenceJ.</span><span class="sxs-lookup"><span data-stu-id="cc99a-551">If J-value for the destination point is below referenceJ, then a similar computation to the preceding steps A-C is performed, using minJ instead of maxJ to find the range in J to compute the factorJ, and taking into account the polarity of the operations "underneath" the referenceJ.</span></span>

<span data-ttu-id="cc99a-552">factorJ = (referenceJ-destinationJ)/(referenceJ-minJ)</span><span class="sxs-lookup"><span data-stu-id="cc99a-552">factorJ = (referenceJ - destinationJ) / (referenceJ - minJ)</span></span>

<span data-ttu-id="cc99a-553">deltaJ = (factorJ-(factorJ ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-553">deltaJ = (factorJ - (factorJ ?</span></span> <span data-ttu-id="cc99a-554">factorJ)) ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-554">factorJ)) ?</span></span> <span data-ttu-id="cc99a-555">(referenceJ - minJ)</span><span class="sxs-lookup"><span data-stu-id="cc99a-555">(referenceJ - minJ)</span></span>

<span data-ttu-id="cc99a-556">destinationJ = destinationJ + (deltaJ ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-556">destinationJ = destinationJ + (deltaJ ?</span></span> <span data-ttu-id="cc99a-557">factorC)</span><span class="sxs-lookup"><span data-stu-id="cc99a-557">factorC)</span></span>

<span data-ttu-id="cc99a-558">où :</span><span class="sxs-lookup"><span data-stu-id="cc99a-558">where:</span></span>

<span data-ttu-id="cc99a-559">minJ est la valeur J minimale de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-559">minJ is the minimum J-value of the gamut.</span></span>

<span data-ttu-id="cc99a-560">La chrominance pour les points de couleur d’entrée est développée de façon linéaire (lorsque cela est possible) le long de la lumière constante proportionnellement à la valeur de chrominance maximale des gammes source et de destination à cette teinte et à la luminosité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-560">The chroma for input color points is expanded linearly (when possible) along constant lightness proportional to the maximum chroma value of the source and destination gamuts at that hue and lightness.</span></span> <span data-ttu-id="cc99a-561">Combinée à la compression de luminosité dépendante de la couleur précédente, cela permet de préserver la saturation, car le mappage d’inclinaison à l’aide des points de référence provoque parfois une décompression du point source vers la chrominance (voir figure 16).</span><span class="sxs-lookup"><span data-stu-id="cc99a-561">Combined with the preceding chroma-dependent lightness compression, this helps preserve the saturation because shear mapping using the reference points sometimes causes the source point to over-compress in chroma (see Figure 16).</span></span>

![Diagramme qui montre le mappage d’inclinaison pour faire correspondre les points de référence de teinte, avant le cisaillement sur la gauche, après cisaillement à droite.](images/gmmp-shearmapping.png)

<span data-ttu-id="cc99a-563">**Figure 16** : mappage de cisaillement, compression de luminosité vers la référence de teinte J et expansion Chroma</span><span class="sxs-lookup"><span data-stu-id="cc99a-563">**Figure 16** : Shear mapping, lightness compression toward hue reference J, and chroma expansion</span></span>

<span data-ttu-id="cc99a-564">Vous trouverez ci-dessous une description mathématique du processus d’extension Chroma ou en ajustant la valeur C du point de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-564">The following is a mathematical description of the chroma expansion process, or adjusting the C-value of the destination point.</span></span> <span data-ttu-id="cc99a-565">Il s’agit du point de destination, car il a été mappé et clair compressé dans la gamme de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-565">It is called the destination point because it has been shear mapped and lightness compressed into the destination gamut.</span></span>

1.  <span data-ttu-id="cc99a-566">Avant le mappage d’inclinaison, déterminez sourceExtentC (l’étendue de chrominance à la luminosité et la teinte du point source).</span><span class="sxs-lookup"><span data-stu-id="cc99a-566">Before the shear mapping, determine sourceExtentC (the chroma extent at the lightness and hue of the source point).</span></span>
2.  <span data-ttu-id="cc99a-567">Après le mappage d’inclinaison et la compression de luminosité qui transforme le point source en point de destination, déterminez le destExtentC (l’étendue de chrominance à la luminosité et la teinte du point de destination).</span><span class="sxs-lookup"><span data-stu-id="cc99a-567">After the shear mapping and lightness compression which transforms the source point into the destination point, determine the destExtentC (the chroma extent at the lightness and hue of the destination point).</span></span>
3.  <span data-ttu-id="cc99a-568">Si la valeur de sourceExtentC est supérieure à celle de destExtentC, aucun ajustement de chrominance au point de destination n’est nécessaire et vous pouvez ignorer l’étape suivante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-568">If the sourceExtentC is greater than the destExtentC, no chroma adjustment to the destination point is necessary, and you can skip the next step.</span></span>
4.  <span data-ttu-id="cc99a-569">Ajustez destinationC (la chrominance du point de destination) pour qu’elle tienne dans l’étendue de chrominance de destination à cette légèreté et teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-569">Adjust destinationC (the chroma of the destination point) to fit within the destination chroma extent at this lightness and hue.</span></span>
5.  <span data-ttu-id="cc99a-570">destinationC = destinationC ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-570">destinationC = destinationC ?</span></span> <span data-ttu-id="cc99a-571">(destExtentC / sourceExtentC)</span><span class="sxs-lookup"><span data-stu-id="cc99a-571">(destExtentC / sourceExtentC)</span></span>

    <span data-ttu-id="cc99a-572">où :</span><span class="sxs-lookup"><span data-stu-id="cc99a-572">where:</span></span>

    <span data-ttu-id="cc99a-573">destinationC est le point de destination C-value.</span><span class="sxs-lookup"><span data-stu-id="cc99a-573">destinationC is the destination point C-value.</span></span>

    <span data-ttu-id="cc99a-574">sourceExtentC est la valeur C maximale de la gamme de sources à la luminosité et à la teinte du point source.</span><span class="sxs-lookup"><span data-stu-id="cc99a-574">sourceExtentC is the maximum C-value of the source gamut at the lightness and hue of the source point.</span></span>

    <span data-ttu-id="cc99a-575">destExtentC est la valeur C maximale de la gamme de destination au niveau de la luminosité et de la teinte du point de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-575">destExtentC is the maximum C-value of the destination gamut at the lightness and hue of the destination point.</span></span>

<span data-ttu-id="cc99a-576">Enfin, effectuez le découpage à distance minimal.</span><span class="sxs-lookup"><span data-stu-id="cc99a-576">Finally, perform the mimimum distance clipping.</span></span> <span data-ttu-id="cc99a-577">Si la couleur d’entrée de la teinte, de la luminosité et de l’inclinaison est toujours légèrement en dehors de la gamme de destination, découpez-la (déplacez-la) vers le point le plus proche sur la limite de la gamme de destination (voir figure 17).</span><span class="sxs-lookup"><span data-stu-id="cc99a-577">If the hue-rotated, lightness-adjusted, and shear-mapped input color is still slightly outside the destination gamut, clip it (move it) to the closest point on the destination gamut boundary (see Figure 17).</span></span>

![Diagramme qui montre le découpage de distance minimal.](images/gmmp-figure15.png)

<span data-ttu-id="cc99a-579">**Figure 17** : découpage de distance minimal</span><span class="sxs-lookup"><span data-stu-id="cc99a-579">**Figure 17** : Minimum distance clipping</span></span>

## <a name="gamut-boundary-description-and-gamut-shell-algorithms"></a><span data-ttu-id="cc99a-580">Description de la limite de la gamme et algorithmes de Shell de couleurs</span><span class="sxs-lookup"><span data-stu-id="cc99a-580">Gamut Boundary Description and Gamut Shell Algorithms</span></span>

<span data-ttu-id="cc99a-581">La fonction de limite de gamme d’appareils utilise le moteur de modèle d’appareil et les paramètres analytiques pour dériver une limite de gamme d’appareils couleur, décrite comme une liste de vertex indexée de la coque de la gamme d’appareils.</span><span class="sxs-lookup"><span data-stu-id="cc99a-581">The device gamut boundary function uses the device model engine and analytical parameters to derive a color device gamut boundary, described as an indexed vertex list of the hull of the device gamut.</span></span> <span data-ttu-id="cc99a-582">La coque est calculée différemment selon que vous travaillez avec des appareils supplémentaires, tels que des moniteurs et des projecteurs, ou des appareils de soustraction.</span><span class="sxs-lookup"><span data-stu-id="cc99a-582">The hull is computed differently depending on whether you are working with additive devices, such as monitors and projectors, or subtractive devices.</span></span> <span data-ttu-id="cc99a-583">La liste des vertex indexés est stockée dans CIEJab.</span><span class="sxs-lookup"><span data-stu-id="cc99a-583">The indexed vertex list is stored in CIEJab.</span></span> <span data-ttu-id="cc99a-584">La structure de la liste de vertex indexée est optimisée pour l’accélération matérielle par DirectX.</span><span class="sxs-lookup"><span data-stu-id="cc99a-584">The structure of the indexed vertex list is optimized for hardware acceleration by DirectX.</span></span>

<span data-ttu-id="cc99a-585">Cette approche présente de nombreuses solutions bien connues.</span><span class="sxs-lookup"><span data-stu-id="cc99a-585">This approach has many well-known solutions.</span></span> <span data-ttu-id="cc99a-586">Si vous recherchez « the convexe coque DirectX » sur le Web, vous recevez plus de 100 accès.</span><span class="sxs-lookup"><span data-stu-id="cc99a-586">If you search for "convex hull DirectX" on the Web, you get more than 100 hits.</span></span> <span data-ttu-id="cc99a-587">Par exemple, il existe une référence de 1983 sur cette rubrique spécifique (Computer Graphics théorie and application, "Shiphulls, b-spline surfaces et CADCAM," pp. 34-49) avec des références de mise à jour de 1970 à 1982 dans la rubrique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-587">For example, there is a reference from 1983 on this specific topic (Computer Graphics Theory and Application, "Shiphulls, b-spline surfaces, and cadcam," pp. 34-49) with references dating from 1970 to 1982 on the topic.</span></span>

<span data-ttu-id="cc99a-588">La collection de points peut être déterminée à partir des informations disponibles en externe, comme suit :</span><span class="sxs-lookup"><span data-stu-id="cc99a-588">The collection of points can be determined from externally available information, as follows:</span></span>

-   <span data-ttu-id="cc99a-589">Les points de l’interpréteur de commandes de référence pour les analyses sont générés à l’aide d’un échantillonnage du cube de couleur dans l’espace de couleur de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-589">Points for the reference shell for monitors are generated using a sampling of the color cube in device colorant space.</span></span>
-   <span data-ttu-id="cc99a-590">Les points de l’interpréteur de commandes de référence pour les imprimantes et les périphériques de capture sont obtenus à partir des exemples de données utilisés pour initialiser le modèle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-590">Points for the reference shell for printers and capture devices are obtained from the sample data used to initialize the model.</span></span>
-   <span data-ttu-id="cc99a-591">Les points de l’interpréteur de commandes de référence pour ScRVB et sRVB sont générés à l’aide d’un échantillonnage du cube de couleur pour sRVB.</span><span class="sxs-lookup"><span data-stu-id="cc99a-591">Points for the reference shell for scRGB and sRGB are generated using a sampling of the color cube for sRGB.</span></span>
-   <span data-ttu-id="cc99a-592">Les points de l’interpréteur de commandes plausible pour les appareils de capture sont générés à l’aide d’un échantillonnage du cube de couleur dans l’espace de couleur de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-592">Points for the plausible shell for capture devices are generated using a sampling of the color cube in device colorant space.</span></span>
-   <span data-ttu-id="cc99a-593">Les points de l’interpréteur de commandes de référence pour les projecteurs sont générés à l’aide d’un échantillonnage d’un Polyhedron dans le cube de couleur dans l’espace de couleur de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-593">Points for the reference shell for projectors are generated using a sampling of a polyhedron in the color cube in device colorant space.</span></span>
-   <span data-ttu-id="cc99a-594">Les points de l’interpréteur de commandes possible pour les espaces de couleurs à plage dynamique étendue sont générés à l’aide d’un échantillonnage du cube couleur dans l’espace lui-même.</span><span class="sxs-lookup"><span data-stu-id="cc99a-594">Points for the possible shell for wide dynamic range color spaces are generated using a sampling of the color cube in the space itself.</span></span>

<span data-ttu-id="cc99a-595">Vous pouvez créer une liste de vertex qui décrit de manière efficace la gamme des appareils couleur, en fonction d’un profil d’appareil et des services de support système.</span><span class="sxs-lookup"><span data-stu-id="cc99a-595">You can create a vertex list that efficiently describes the color device gamut, given a device profile and system support services.</span></span>

<span data-ttu-id="cc99a-596">Pour les périphériques de sortie, la limite de gammes décrit la plage des couleurs qui peuvent être affichées par l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-596">For output devices, the gamut boundary describes the range of colors that can be displayed by the device.</span></span> <span data-ttu-id="cc99a-597">Une limite de gamme est générée à partir des mêmes données que celles utilisées pour modéliser le comportement de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-597">A gamut boundary is generated from the same data used to model the behavior of the device.</span></span> <span data-ttu-id="cc99a-598">Conceptuellement, vous générez un échantillon de la plage de couleurs que l’appareil peut produire, mesurez les couleurs, convertissez les mesures en espace d’apparence, puis utilisez les résultats pour créer la limite de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-598">Conceptually, you output a sampling of the range of colors the device can produce, measure the colors, convert the measurements into appearance space, and then use the results to create the gamut boundary.</span></span>

<span data-ttu-id="cc99a-599">Les périphériques d’entrée sont plus compliqués.</span><span class="sxs-lookup"><span data-stu-id="cc99a-599">Input devices are trickier.</span></span> <span data-ttu-id="cc99a-600">Chaque pixel dans une image d’entrée doit avoir une valeur.</span><span class="sxs-lookup"><span data-stu-id="cc99a-600">Each pixel in an input image must have some value.</span></span> <span data-ttu-id="cc99a-601">Chaque pixel doit pouvoir représenter toute couleur trouvée dans le monde réel d’une manière ou d’une autre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-601">Each pixel must be able to represent any color found in the real world in some way.</span></span> <span data-ttu-id="cc99a-602">Dans ce sens, aucune couleur n’est « hors gamme » pour un appareil d’entrée, car elles peuvent toujours être représentées.</span><span class="sxs-lookup"><span data-stu-id="cc99a-602">In this sense, no colors are "out of gamut" for an input device, because they can always be represented.</span></span>

<span data-ttu-id="cc99a-603">Tous les formats d’images numériques ont une plage dynamique fixe.</span><span class="sxs-lookup"><span data-stu-id="cc99a-603">All digital image formats have some fixed dynamic range.</span></span> <span data-ttu-id="cc99a-604">En raison de cette limitation, il existe toujours des stimuli distincts qui mappent à la même valeur numérique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-604">Because of this limitation, there is always some distinct stimuli that map to the same digital value.</span></span> <span data-ttu-id="cc99a-605">Par conséquent, vous ne pouvez pas établir un mappage un-à-un entre les couleurs réelles et les valeurs de l’appareil photo numérique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-605">So, you cannot establish a one-to-one mapping between real-world colors and digital camera values.</span></span> <span data-ttu-id="cc99a-606">Au lieu de cela, la limite de la gamme est formée en estimant une plage de couleurs réelles qui peuvent produire les réponses numériques de l’appareil photo.</span><span class="sxs-lookup"><span data-stu-id="cc99a-606">Instead, the gamut boundary is formed by estimating a range of real-world colors that can produce the digital responses of the camera.</span></span> <span data-ttu-id="cc99a-607">Vous utilisez cette plage estimée comme gamme de couleurs pour le périphérique d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-607">You use that estimated range as the gamut for the input device.</span></span>

<span data-ttu-id="cc99a-608">Les réplicas primaires sont inclus pour fournir un mappage de la gamme de types d’intentions de graphiques professionnels.</span><span class="sxs-lookup"><span data-stu-id="cc99a-608">Primaries are included to provide for business graphics intent-type gamut mapping.</span></span>

<span data-ttu-id="cc99a-609">Dans un véritable style orienté objet, vous devez faire abstraction de la représentation sous-jacente de la limite de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-609">In true object-oriented style, you abstract the underlying representation of the gamut boundary.</span></span> <span data-ttu-id="cc99a-610">Cela vous permet de modifier la représentation à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="cc99a-610">This allows you the flexibility to change the representation in the future.</span></span> <span data-ttu-id="cc99a-611">Pour comprendre le descripteur de limite de gamme (GBD) utilisé dans la nouvelle CTE, vous devez d’abord comprendre comment les algorithmes de mappage de la gamme (GMAs) fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="cc99a-611">To understand the gamut boundary descriptor (GBD) used in the new CTE, you must first understand how gamut mapping algorithms (GMAs) work.</span></span> <span data-ttu-id="cc99a-612">Traditionnellement, GMAs a été conçu pour répondre aux besoins de la communauté graphique ; autrement dit, pour reproduire des images qui ont déjà été rendues correctement pour l’appareil sur lequel l’image d’entrée a été créée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-612">Traditionally, GMAs have been designed to meet the needs of the graphic art community; that is, to reproduce images that have already been properly rendered for the device on which the input image was created.</span></span> <span data-ttu-id="cc99a-613">L’objectif de Graphic Arts GMAs est de faire la meilleure reproduction possible de l’image d’entrée sur le périphérique de sortie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-613">The goal of graphic arts GMAs is to make the best possible reproduction of the input image on the output device.</span></span> <span data-ttu-id="cc99a-614">Le nouveau CTE GBD est conçu pour résoudre quatre problèmes clés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-614">The new CTE GBD is designed to solve four key problems.</span></span>

<span data-ttu-id="cc99a-615">Étant donné que l’image d’entrée est rendue pour le périphérique d’entrée, toutes les couleurs s’ajustent à la plage entre le point blanc du média et le point noir.</span><span class="sxs-lookup"><span data-stu-id="cc99a-615">Because the input image is rendered for the input device, all colors fit within the range between the medium's white point and black point.</span></span> <span data-ttu-id="cc99a-616">Supposons que l’image soit une photographie d’une scène dans laquelle il existe un blanc diffus, tel qu’une personne dans un tee-shirt blanc, et une mise en surbrillance spéculaire, telle que la réflexion de la lumière sur une fenêtre ou un pare-feu chrome.</span><span class="sxs-lookup"><span data-stu-id="cc99a-616">Suppose that the image is a photograph of a scene in which there is a diffuse white, such as a person in a white tee shirt, and a specular highlight, such as light reflecting off a window or chrome bumper.</span></span> <span data-ttu-id="cc99a-617">La scène est rendue sur le support d’entrée afin que la surbrillance spéculaire soit mappée sur le point blanc du milieu, et le blanc diffus est mappé sur une couleur neutre plus sombre que le point blanc du milieu.</span><span class="sxs-lookup"><span data-stu-id="cc99a-617">The scene will be rendered to the input medium so that the specular highlight is mapped to the medium's white point, and the diffuse white is mapped to some neutral color darker than the medium's white point.</span></span> <span data-ttu-id="cc99a-618">Le choix de la façon de mapper les couleurs de la scène vers le support d’entrée est à la fois une décision dépendante de la scène et une décision esthétique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-618">The choice of how to map colors from the scene to the input medium is both a scene-dependent decision and an aesthetic decision.</span></span> <span data-ttu-id="cc99a-619">Si la surbrillance spéculaire était manquante dans la scène d’origine, le blanc diffus serait probablement mappé au point blanc du moyen.</span><span class="sxs-lookup"><span data-stu-id="cc99a-619">If the specular highlight was missing from the original scene, then the diffuse white would probably be mapped to the medium's white point.</span></span> <span data-ttu-id="cc99a-620">Dans une scène avec un grand nombre de détails de surbrillance, une plage de plus en plus est laissée entre le blanc spéculaire et le blanc diffus.</span><span class="sxs-lookup"><span data-stu-id="cc99a-620">In a scene with a lot of highlight detail, more range would be left between the specular white and the diffuse white.</span></span> <span data-ttu-id="cc99a-621">Dans une scène où la mise en surbrillance n’est pas significative, il peut s’agir d’une très petite plage.</span><span class="sxs-lookup"><span data-stu-id="cc99a-621">In a scene where the highlight is not significant, very little range might be left.</span></span>

<span data-ttu-id="cc99a-622">Pour les images prérendues, le mappage de gammes est relativement simple.</span><span class="sxs-lookup"><span data-stu-id="cc99a-622">For pre-rendered images, gamut mapping is relatively straightforward.</span></span> <span data-ttu-id="cc99a-623">Fondamentalement, le point blanc du support d’origine est mappé sur le point blanc de la couleur du milieu de reproduction, le point noir source est mappé sur le point noir de destination et la plus grande partie du mappage est terminée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-623">Basically, the original medium's white point is mapped to the reproduction medium's white point, the source black point is mapped to the destination black point, and most of the mapping is complete.</span></span> <span data-ttu-id="cc99a-624">Les différents GMAs d’existence fournissent des variations pour le mappage d’autres points sur l’échelle de ton du moyen source et différentes façons de gérer les valeurs de chrominance non imprimables.</span><span class="sxs-lookup"><span data-stu-id="cc99a-624">The different GMAs in existence provide variations for mapping other points on the source medium's tone scale and different ways to handle out-of-gamut chroma values.</span></span> <span data-ttu-id="cc99a-625">Toutefois, la correspondance entre le blanc et le noir et le noir est cohérente tout au long de ces variations.</span><span class="sxs-lookup"><span data-stu-id="cc99a-625">But the mapping of white to white and black to black is consistent throughout these variations.</span></span> <span data-ttu-id="cc99a-626">Cette implémentation requiert que le blanc se trouve au-dessus d’un J \* de 50 et le noir sous un j \* de 50.</span><span class="sxs-lookup"><span data-stu-id="cc99a-626">This implementation requires that white be above a J\* of 50 and black below a J\* of 50.</span></span>

<span data-ttu-id="cc99a-627">Tous les codages de couleurs limitent les plages de couleurs pour les images d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-627">Not all color encodings limit color ranges for input images.</span></span> <span data-ttu-id="cc99a-628">L’encodage de couleur IEC standard ScRVB (IEC 61966-2-2) fournit 16 bits pour chacun des trois canaux de couleur rouge, vert et bleu (RVB).</span><span class="sxs-lookup"><span data-stu-id="cc99a-628">The IEC standard color encoding scRGB (IEC 61966-2-2) provides 16 bits for each of the three color channels red, green, and blue (RGB).</span></span> <span data-ttu-id="cc99a-629">Dans cet encodage, le noir de référence n’est pas encodé en tant que triple RVB (0, 0, 0), mais en tant que (4096, 4096, 4096).</span><span class="sxs-lookup"><span data-stu-id="cc99a-629">In that encoding, reference black is not encoded as the RGB triple (0, 0, 0), but as (4096, 4096, 4096).</span></span> <span data-ttu-id="cc99a-630">Le blanc de référence est encodé sous la forme (12288, 12288, 12288).</span><span class="sxs-lookup"><span data-stu-id="cc99a-630">Reference white is encoded as (12288, 12288, 12288).</span></span> <span data-ttu-id="cc99a-631">L’encodage ScRVB peut être utilisé pour représenter les surbrillances spéculaires et les détails des ombres.</span><span class="sxs-lookup"><span data-stu-id="cc99a-631">The scRGB encoding can be used to represent specular highlights and shadow detail.</span></span> <span data-ttu-id="cc99a-632">Il comprend des triplets RVB qui ne sont pas physiquement disponibles, car ils nécessitent des quantités négatives de lumière et des encodages qui se trouvent en dehors du locus spectral CIE.</span><span class="sxs-lookup"><span data-stu-id="cc99a-632">It includes RGB triples that are not physically possible because they require negative amounts of light, and encodings that are outside the CIE spectral locus.</span></span> <span data-ttu-id="cc99a-633">En clair, aucun appareil ne peut produire toutes les couleurs de la gamme ScRVB.</span><span class="sxs-lookup"><span data-stu-id="cc99a-633">Clearly, no device can possibly produce all the colors in the scRGB gamut.</span></span> <span data-ttu-id="cc99a-634">En fait, aucun appareil ne peut produire toutes les couleurs qu’un utilisateur peut voir.</span><span class="sxs-lookup"><span data-stu-id="cc99a-634">In fact, no device can produce all the colors that a human being can see.</span></span> <span data-ttu-id="cc99a-635">Ainsi, les appareils ne peuvent pas remplir la gamme ScRVB, et il est utile de pouvoir représenter la partie de la gamme à remplir.</span><span class="sxs-lookup"><span data-stu-id="cc99a-635">So, devices cannot fill the scRGB gamut, and it would be useful to be able to represent the part of the gamut that they do fill.</span></span> <span data-ttu-id="cc99a-636">Chaque appareil a une plage de valeurs dans l’espace ScRVB qu’il peut produire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-636">Each device has a range of values in scRGB space that it can produce.</span></span> <span data-ttu-id="cc99a-637">Il s’agit des couleurs « attendues » pour l’appareil. Il serait surprenant que l’appareil produise des couleurs en dehors de cette gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-637">These are the "expected" colors for the device; it would be surprising for the device to produce colors outside this gamut.</span></span> <span data-ttu-id="cc99a-638">Il existe une transformation définie à partir de l’espace ScRVB en espace d’apparence, de sorte que chaque appareil possède également une plage de valeurs d’apparence qu’il est supposé reproduire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-638">There is a defined transformation from scRGB space to appearance space, so each device also has a range of appearance values that it is expected to reproduce.</span></span>

<span data-ttu-id="cc99a-639">Dans ScRVB et l’entrée des appareils de capture caractérisés par une cible fixe, il est possible d’obtenir une valeur en dehors de la plage de valeurs attendues.</span><span class="sxs-lookup"><span data-stu-id="cc99a-639">In both scRGB and input from capture devices characterized with a fixed target, it is possible to get a value outside the range of expected values.</span></span> <span data-ttu-id="cc99a-640">Si quelqu’un étalonne une caméra à une cible de test ; puis capture une scène avec des surbrillances spéculaires, il peut y avoir des pixels plus clairs que le point blanc de la cible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-640">If someone calibrates a camera to a test target; and then captures a scene with specular highlights, there might be pixels that are brighter than the target's white point.</span></span> <span data-ttu-id="cc99a-641">La même chose peut se produire si un rouge se produisant naturellement est plus chromatique que le rouge de la cible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-641">The same thing can happen if a naturally occurring red is more chromatic than the target red.</span></span> <span data-ttu-id="cc99a-642">Si quelqu’un prend une image ScRVB d’un appareil, puis modifie manuellement les couleurs de l’image, il est possible de créer des pixels qui se trouvent en dehors de la plage attendue de la gamme d’appareils, même s’ils se trouvent dans la gamme de couleurs ScRVB complète.</span><span class="sxs-lookup"><span data-stu-id="cc99a-642">If someone takes an scRGB image from a device, and then manually edits the colors in the image, it is possible to create pixels that fall outside the expected range of the device gamut, even though they are within the full scRGB gamut.</span></span>

<span data-ttu-id="cc99a-643">Un deuxième problème peut ne pas être lié au premier lieu.</span><span class="sxs-lookup"><span data-stu-id="cc99a-643">A second problem may not, at first, seem to be related to this.</span></span> <span data-ttu-id="cc99a-644">Cela se produit lorsque vous utilisez une cible de couleur pour caractériser un périphérique d’entrée, tel qu’un appareil photo ou un scanneur.</span><span class="sxs-lookup"><span data-stu-id="cc99a-644">It arises when you use a color target to characterize an input device, such as a camera or scanner.</span></span> <span data-ttu-id="cc99a-645">Les cibles réfléchissantes sont généralement produites sur papier et contiennent un certain nombre de correctifs colorés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-645">Reflective targets are typically produced on paper and contain a number of colored patches.</span></span> <span data-ttu-id="cc99a-646">Manufaturers fournissent des fichiers de données avec des mesures de couleur prises dans une condition de visualisation fixe pour chaque correctif de couleur.</span><span class="sxs-lookup"><span data-stu-id="cc99a-646">Manufaturers provide data files with color measurements taken under a fixed viewing condition for each color patch.</span></span> <span data-ttu-id="cc99a-647">Les outils de profilage de couleur créent un mappage entre ces valeurs mesurées et les valeurs retournées par les capteurs de couleur dans les périphériques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-647">Color profiling tools create a mapping between these measured values and the values returned by the color sensors in the devices.</span></span> <span data-ttu-id="cc99a-648">Le problème est que souvent ces cibles de couleur ne couvrent pas la plage complète des valeurs de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-648">The problem is that often these color targets do not cover the full range of device values.</span></span> <span data-ttu-id="cc99a-649">Par exemple, le scanneur ou l’appareil photo peut retourner la valeur (253, 253, 253) pour le point blanc de référence, et un correctif rouge de référence peut avoir une valeur RVB (254, 12, 4).</span><span class="sxs-lookup"><span data-stu-id="cc99a-649">For example, the scanner or camera might return a value of (253, 253, 253) for the reference white point, and a reference red patch might have an RGB value of (254, 12, 4).</span></span> <span data-ttu-id="cc99a-650">Celles-ci représentent la plage de valeurs attendues pour le périphérique d’entrée, en fonction des valeurs cibles.</span><span class="sxs-lookup"><span data-stu-id="cc99a-650">These represent the range of expected values for the input device, based on the target values.</span></span> <span data-ttu-id="cc99a-651">Si vous caractérisez l’appareil d’entrée en fonction des réponses à la cible, vous vous attendez à ce que les couleurs se trouvent uniquement dans cette plage étroite.</span><span class="sxs-lookup"><span data-stu-id="cc99a-651">If you characterize the input device based on the responses to the target, then you only expect colors within this narrow range.</span></span> <span data-ttu-id="cc99a-652">Cette plage est non seulement inférieure à la plage des couleurs que l’homme peut voir, mais elle est plus petite que la plage de couleurs que l’appareil peut produire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-652">This range is not only smaller than the range of colors humans can see, it is smaller than the range of colors the device can produce.</span></span>

<span data-ttu-id="cc99a-653">Dans les deux cas, il est difficile d’estimer la gamme de l’image ou du périphérique d’entrée, en dépit de l’existence d’une gamme de référence ou de mesures.</span><span class="sxs-lookup"><span data-stu-id="cc99a-653">In both cases, it is difficult to estimate the gamut of the input device or image, despite the existence of a reference gamut or measurements.</span></span> <span data-ttu-id="cc99a-654">Dans le premier problème, la gamme plausible de l’appareil d’entrée est inférieure à la gamme complète de ScRVB.</span><span class="sxs-lookup"><span data-stu-id="cc99a-654">In the first problem, the plausible gamut of the input device is less than the full gamut of scRGB.</span></span> <span data-ttu-id="cc99a-655">Dans le deuxième problème, la gamme de référence de la cible est inférieure à la gamme complète possible de l’appareil d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-655">In the second problem, the reference gamut of the target is less than the full possible gamut of the input device.</span></span>

<span data-ttu-id="cc99a-656">Le troisième problème concerne le mappage de tonalité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-656">The third problem involves tone mapping.</span></span> <span data-ttu-id="cc99a-657">De nombreux modèles de limites de gamme qui peuvent représenter correctement les images prérendues utilisées dans les arts graphiques ont été proposés, par exemple, les Braun et Fairchild de la plage de montagne GBD (Braun \[ 97 \] ), et le descripteur de limite maxima du segment de Morovic (Morovic \[ 98 \] ).</span><span class="sxs-lookup"><span data-stu-id="cc99a-657">Many models of gamut boundaries that can adequately represent pre-rendered images used in the graphic arts have been proposed, for example, the Braun and Fairchild Mountain range GBD (Braun\[97\]), and Morovic's Segment Maxima boundary descriptor (Morovic\[98\]).</span></span> <span data-ttu-id="cc99a-658">Toutefois, ces modèles fournissent uniquement des informations sur les extrêmes de la gamme de l’appareil ; il manque des informations sur d’autres points dans le mappage des tons.</span><span class="sxs-lookup"><span data-stu-id="cc99a-658">But these models only provide information about the extremes of the device's gamut; they are missing information about other points in the tonal mapping.</span></span> <span data-ttu-id="cc99a-659">Sans ces informations, GMAs peut uniquement effectuer des estimations approximatives du mappage de ton optimal.</span><span class="sxs-lookup"><span data-stu-id="cc99a-659">Without such information, GMAs can only make rough estimates of optimal tone mapping.</span></span> <span data-ttu-id="cc99a-660">Pire encore, ces modèles ne fournissent aucune aide pour la plage dynamique étendue dans ScRVB et dans les images d’appareil photo numérique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-660">Worse, these models provide no help for the extended dynamic range in scRGB and in digital camera images.</span></span>

<span data-ttu-id="cc99a-661">Comment ce problème est-il résolu dans les industries photographiques et Videographic ?</span><span class="sxs-lookup"><span data-stu-id="cc99a-661">How is this problem resolved in the photographic and videographic industries?</span></span> <span data-ttu-id="cc99a-662">L’appareil photo capture une image.</span><span class="sxs-lookup"><span data-stu-id="cc99a-662">The camera captures an image.</span></span> <span data-ttu-id="cc99a-663">Les experts peuvent débattre de la quantité de rendu qui se produit sur l’appareil de capture. mais ils conviennent qu’il ne s’agit pas d’une valeur significative.</span><span class="sxs-lookup"><span data-stu-id="cc99a-663">Experts might debate how much rendering occurs in the capture device; but they agree that it is not a significant amount.</span></span> <span data-ttu-id="cc99a-664">Les deux technologies ne mappent pas un blanc diffus dans une scène capturée sur le point blanc du moyen.</span><span class="sxs-lookup"><span data-stu-id="cc99a-664">Both technologies do not map a diffuse white in a captured scene to the medium's white point.</span></span> <span data-ttu-id="cc99a-665">De même, ils ne mappent pas le point noir de la scène au point noir du milieu.</span><span class="sxs-lookup"><span data-stu-id="cc99a-665">Similarly, they do not map the black point from the scene to the medium's black point.</span></span> <span data-ttu-id="cc99a-666">Le comportement d’un film photographique est décrit dans espace de densité à l’aide d’une courbe caractéristique, souvent appelée un facteur d’impacteur et Driffield, ou une courbe H&D.</span><span class="sxs-lookup"><span data-stu-id="cc99a-666">The behavior of photographic film is described in density space using a characteristic curve, often called a Hurter and Driffield, or H&D curve.</span></span> <span data-ttu-id="cc99a-667">La courbe affiche la densité de la scène d’origine et la densité résultante sur le film.</span><span class="sxs-lookup"><span data-stu-id="cc99a-667">The curve shows the density of the original scene and the resulting density on the film.</span></span> <span data-ttu-id="cc99a-668">La figure 18 illustre une courbe H&D standard.</span><span class="sxs-lookup"><span data-stu-id="cc99a-668">Figure 18 shows a typical H&D curve.</span></span> <span data-ttu-id="cc99a-669">L’axe des x représente une exposition plus grande au journal.</span><span class="sxs-lookup"><span data-stu-id="cc99a-669">The x-axis represents increasing log exposure.</span></span> <span data-ttu-id="cc99a-670">L’axe des y représente la densité sur la diapositive.</span><span class="sxs-lookup"><span data-stu-id="cc99a-670">The y-axis represents the density on the slide.</span></span> <span data-ttu-id="cc99a-671">Cinq points de référence sont marqués sur la courbe : noir sans détail, qui représente la densité minimale sur la valeur négative ; noir avec détail ; Référence de la carte grise blanc avec détail ; et blanc sans détail.</span><span class="sxs-lookup"><span data-stu-id="cc99a-671">Five reference points are marked on the curve: black without detail, which represents the minimum density on the negative; black with detail; reference mid-gray card; white with detail; and white without detail.</span></span> <span data-ttu-id="cc99a-672">Notez qu’il y a un espace entre le noir sans détail (qui représente le noir du périphérique) et le noir avec détail (noir foncé).</span><span class="sxs-lookup"><span data-stu-id="cc99a-672">Note that there is space between black without detail (which represents device black) and black with detail (shadow black).</span></span> <span data-ttu-id="cc99a-673">De même, il y a de l’espace entre le blanc avec des détails (diffusion en blanc) et le blanc sans détails (qui représente l’appareil blanc).</span><span class="sxs-lookup"><span data-stu-id="cc99a-673">Similarly, there is space between white with detail (diffuse white) and white without detail (which represents device white).</span></span>

![Diagramme qui montre les courbes H et D pour le film de diapositive.](images/gmmp-image079.png)

<span data-ttu-id="cc99a-675">**Figure 18** : courbe H&D pour le film coulissant</span><span class="sxs-lookup"><span data-stu-id="cc99a-675">**Figure 18** : H&D curve for slide film</span></span>

<span data-ttu-id="cc99a-676">L’industrie vidéo fournit « espace » et « footroom » dans les images.</span><span class="sxs-lookup"><span data-stu-id="cc99a-676">The video industry provides "headroom" and "footroom" in images.</span></span> <span data-ttu-id="cc99a-677">Dans la spécification ITU 709, la luminance (appelée Y) est encodée en 8 bits, avec une plage comprise entre 0 et 255.</span><span class="sxs-lookup"><span data-stu-id="cc99a-677">In the ITU 709 specification, luminance (called Y) is encoded in 8 bits, with a range of 0 to 255.</span></span> <span data-ttu-id="cc99a-678">Toutefois, le noir de référence est encodé à 15 et le blanc de référence est encodé sous la forme 235.</span><span class="sxs-lookup"><span data-stu-id="cc99a-678">However, reference black is encoded at 15 and reference white is encoded as 235.</span></span> <span data-ttu-id="cc99a-679">Cela laisse la plage d’encodage comprise entre 236 et 255 pour représenter des surbrillances spéculaires.</span><span class="sxs-lookup"><span data-stu-id="cc99a-679">This leaves the encoding range between 236 and 255 to represent specular highlights.</span></span>

<span data-ttu-id="cc99a-680">L’industrie vidéo présente un système de boucles essentiellement fermé.</span><span class="sxs-lookup"><span data-stu-id="cc99a-680">The video industry presents an essentially closed loop system.</span></span> <span data-ttu-id="cc99a-681">Bien qu’il existe de nombreux fournisseurs de matériel différents, les systèmes vidéo sont basés sur des appareils de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-681">While there are many different equipment vendors, video systems are based upon reference devices.</span></span> <span data-ttu-id="cc99a-682">Il existe un encodage standard pour les images vidéo.</span><span class="sxs-lookup"><span data-stu-id="cc99a-682">There is a standard encoding for video images.</span></span> <span data-ttu-id="cc99a-683">Il n’est pas nécessaire de communiquer une limite de gamme avec des images vidéo, car toutes les images sont encodées pour la reproduction sur le même appareil de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-683">There is no need to communicate a gamut boundary with video images, because all images are encoded for reproduction on the same reference device.</span></span> <span data-ttu-id="cc99a-684">Le film est également une boucle fermée, car il n’est pas nécessaire de transmettre des données intermédiaires entre différents composants.</span><span class="sxs-lookup"><span data-stu-id="cc99a-684">Film is also closed loop because there is no need to convey intermediate data between different components.</span></span> <span data-ttu-id="cc99a-685">Vous souhaitez une solution qui permet d’obtenir des images à partir d’appareils avec des gammes variables et représentant à la fois des scènes prérendues et non rendues à reproduire à la sortie avec des gammes différentes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-685">You want a solution that enables images from devices with varying gamuts and representing both pre-rendered and unrendered scenes to be reproduced on output with varying gamuts.</span></span>

<span data-ttu-id="cc99a-686">Le quatrième problème que la nouvelle CTE doit résoudre est le suivant : couleurs visuellement grises produites par un appareil, par exemple, quand la couleur rouge = vert = bleu sur une analyse, ne se trouve souvent pas sur l’axe neutre de la came (lorsque la chrominance = 0,0).</span><span class="sxs-lookup"><span data-stu-id="cc99a-686">A fourth problem that the new CTE must resolve is that the visually gray colors produced by a device, for example, when red=green=blue on a monitor, frequently do not fall upon the neutral axis of the CAM (when the chroma = 0.0).</span></span> <span data-ttu-id="cc99a-687">Cela pose de bonnes difficultés pour GMAs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-687">This causes great difficulties for GMAs.</span></span> <span data-ttu-id="cc99a-688">Pour que les GMAs fonctionnent correctement, vous devez ajuster la description de la gamme de l’appareil et des points d’entrée afin que l’axe neutre de l’appareil se trouve sur l’axe neutre de l’espace d’apparence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-688">To make GMAs work well, you have to adjust the description of the device's gamut and of the input points so that the device's neutral axis falls on the appearance space's neutral axis.</span></span> <span data-ttu-id="cc99a-689">Vous devez ajuster les points de l’axe neutre selon une quantité similaire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-689">You have to adjust points off the neutral axis by a similar amount.</span></span> <span data-ttu-id="cc99a-690">Dans le cas contraire, vous ne pouvez pas effectuer de dégradations fluides via l’image.</span><span class="sxs-lookup"><span data-stu-id="cc99a-690">Otherwise, you cannot make smooth gradations through the image.</span></span> <span data-ttu-id="cc99a-691">À la sortie de l’outil GMA, vous annulez ce mappage, par rapport à l’axe neutre de l’appareil de sortie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-691">On the way out of the GMA, you undo this mapping, relative to the output device's neutral axis.</span></span> <span data-ttu-id="cc99a-692">On parle alors de redressement « Chiropractic » de l’axe.</span><span class="sxs-lookup"><span data-stu-id="cc99a-692">This is referred to as a "chiropractic" straightening of the axis.</span></span> <span data-ttu-id="cc99a-693">À l’instar d’un Chiropractor, vous pouvez non seulement redresser le squelette (axe neutre), mais ajuster le reste du corps pour le déplacer en même temps que le squelette.</span><span class="sxs-lookup"><span data-stu-id="cc99a-693">Like a chiropractor, you not only straighten the skeleton (neutral axis), but you adjust the rest of the body to move along with the skeleton.</span></span> <span data-ttu-id="cc99a-694">À l’instar d’un Chiropractor, vous n’ajustez pas la structure du même montant tout au long de l’espace.</span><span class="sxs-lookup"><span data-stu-id="cc99a-694">Like a chiropractor, you do not adjust the skeleton by the same amount through the entire space.</span></span> <span data-ttu-id="cc99a-695">Au lieu de cela, vous ajustez différentes sections différemment.</span><span class="sxs-lookup"><span data-stu-id="cc99a-695">Instead, you adjust different sections differently.</span></span>

![Diagramme qui affiche la courbure de l’axe neutre du périphérique par rapport à l’axe neutre CIECAM.](images/gmmp-image081.png)

<span data-ttu-id="cc99a-697">**Figure 19 :** Courbure de l’axe neutre du périphérique par rapport à l’axe neutre CIECAM</span><span class="sxs-lookup"><span data-stu-id="cc99a-697">**Figure 19:** Curvature of the device neutral axis relative to the CIECAM neutral axis</span></span>

<span data-ttu-id="cc99a-698">La nouvelle CTE requiert un modèle de limite de plage qui peut être utilisé pour représenter les images sources rendues et non rendues, fournir des informations sur l’apparence des éléments neutres de l’appareil et fournir des informations pour les images de mappage de tons avec une plage de luminance large.</span><span class="sxs-lookup"><span data-stu-id="cc99a-698">What the new CTE requires is a model of a gamut boundary that can be used to represent both rendered and unrendered source images, provide information about the appearance of device neutrals, and provide information for tone mapping images with a wide luminance range.</span></span>

![Diagramme qui montre les trois interpréteurs de couleurs.](images/gmmp-image083.png)

<span data-ttu-id="cc99a-700">**Figure 20** : trois shells de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-700">**Figure 20** : Three gamut shells</span></span>

<span data-ttu-id="cc99a-701">La limite de la gamme est composée de trois coques qui définissent trois régions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-701">The gamut boundary is composed of three shells that define three regions.</span></span>

<span data-ttu-id="cc99a-702">Dans la nouvelle CTE, l’interpréteur de commandes externe de la gamme est formé avec une coque convexe, créée à partir de points d’échantillonnage dans la gamme d’appareils.</span><span class="sxs-lookup"><span data-stu-id="cc99a-702">In the new CTE, the outer shell of the gamut is formed with a convex hull made from sample points in the device gamut.</span></span> <span data-ttu-id="cc99a-703">Une coque est formée en utilisant un ensemble de points d’échantillonnage et en l’entourant d’une surface.</span><span class="sxs-lookup"><span data-stu-id="cc99a-703">A hull is formed by taking a set of sample points and surrounding them by a surface.</span></span> <span data-ttu-id="cc99a-704">Une coque convexe a la propriété supplémentaire qui est convexe partout.</span><span class="sxs-lookup"><span data-stu-id="cc99a-704">A convex hull has the additional property of being convex everywhere.</span></span> <span data-ttu-id="cc99a-705">Par conséquent, il ne s’agit pas de la plus petite coque possible qui peut être adaptée aux données.</span><span class="sxs-lookup"><span data-stu-id="cc99a-705">Therefore, this is not the smallest possible hull that can be fit to the data.</span></span> <span data-ttu-id="cc99a-706">Mais l’expérimentation a montré que l’ajustement des points d’échantillonnage entraîne trop fortement les artefacts inadaptés dans les images, tels que l’absence d’ombrage lissé.</span><span class="sxs-lookup"><span data-stu-id="cc99a-706">But experimentation has shown that fitting the sample points too tightly causes unappealing artifacts in images, such as a lack of smooth shading.</span></span> <span data-ttu-id="cc99a-707">La coque convexe semble résoudre ces problèmes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-707">The convex hull seems to solve these problems.</span></span>

<span data-ttu-id="cc99a-708">Dans l’algorithme, les valeurs d’apparence de couleur sont obtenues pour un ensemble de points échantillonnés à partir de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-708">In the algorithm, color appearance values are obtained for a set of points sampled from the device.</span></span> <span data-ttu-id="cc99a-709">Pour les moniteurs et les imprimantes, les valeurs d’apparence des couleurs sont obtenues en générant des échantillons, puis en les mesurant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-709">For monitors and printers, the color appearance values are obtained by outputting samples, and then measuring them.</span></span> <span data-ttu-id="cc99a-710">Vous pouvez également créer un modèle d’appareil, puis exécuter des données de synthèse par le biais du modèle d’appareil pour prédire les valeurs mesurées.</span><span class="sxs-lookup"><span data-stu-id="cc99a-710">You can also create a device model, and then run synthetic data through the device model to predict measured values.</span></span> <span data-ttu-id="cc99a-711">Les valeurs mesurées sont ensuite converties de l’espace colorimétrique (XYZ) à l’espace d’apparence (Jab), et la coque est entourée autour des points.</span><span class="sxs-lookup"><span data-stu-id="cc99a-711">The measured values are then converted from colorimetric space (XYZ) to appearance space (Jab), and the hull is wrapped around the points.</span></span>

<span data-ttu-id="cc99a-712">Le point clé de cet algorithme est que le point blanc adopté utilisé dans la conversion de colorimétrie en espace d’apparence ne doit pas nécessairement être le point blanc du milieu.</span><span class="sxs-lookup"><span data-stu-id="cc99a-712">The key point to this algorithm is that the adopted white point used in the conversion from colorimetric to appearance space does not have to be the medium's white point.</span></span> <span data-ttu-id="cc99a-713">Au lieu de cela, vous pouvez sélectionner un point plus éloigné à l’intérieur de la gamme et sur l’axe neutre (ou à proximité).</span><span class="sxs-lookup"><span data-stu-id="cc99a-713">Instead, you can select a point farther inside the gamut and on (or near) the neutral axis.</span></span> <span data-ttu-id="cc99a-714">Ce point aura ensuite une valeur J-100.</span><span class="sxs-lookup"><span data-stu-id="cc99a-714">That point will then have a J-value of 100.</span></span> <span data-ttu-id="cc99a-715">Les échantillons avec une valeur Y mesurée supérieure au point blanc adopté se terminent par une valeur J supérieure à 100.</span><span class="sxs-lookup"><span data-stu-id="cc99a-715">Samples with a measured Y-value higher than the adopted white point will end up with a J-value greater than 100.</span></span>

<span data-ttu-id="cc99a-716">Si vous placez le point blanc diffus de la scène comme point blanc adopté pour la conversion de l’espace colorimétrique, les surbrillances spéculaires de la scène seront facilement détectées comme ayant une valeur J supérieure à 100.</span><span class="sxs-lookup"><span data-stu-id="cc99a-716">If you place the scene's diffuse white point as the adopted white point for the color space conversion, then specular highlights in the scene will be easily detected as having a J-value greater than 100.</span></span>

<span data-ttu-id="cc99a-717">Étant donné que le modèle de couleurs CIECAM02 est basé sur le système visuel humain, une fois qu’un blanc adopté est sélectionné, le niveau de luminance du point noir (J = 0) est automatiquement déterminé par le modèle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-717">Because the CIECAM02 color model is based on the human visual system, after an adopted white is selected, the luminance level of the black point (J = 0) is automatically determined by the model.</span></span> <span data-ttu-id="cc99a-718">Si l’image d’entrée a une plage dynamique étendue, il est possible qu’il y ait des valeurs qui correspondent à des J-valeurs inférieures à zéro.</span><span class="sxs-lookup"><span data-stu-id="cc99a-718">If the input image has a wide dynamic range, it is possible that there might be values that map to J-values less than zero.</span></span>

<span data-ttu-id="cc99a-719">La figure 21 suivante montre les neutres de périphérique qui s’exécutent dans le centre de l’plausible et les gammes de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-719">The following Figure 21 shows the device neutrals running through the center of the plausible and reference gamuts.</span></span>

![Diagramme qui montre l’axe neutre du périphérique ajouté à la limite de la gamme.](images/gmmp-image085.png)

<span data-ttu-id="cc99a-721">**Figure 21** : axe neutre de l’appareil ajouté à la limite de la gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-721">**Figure 21** : Device neutral axis added to gamut boundary</span></span>

<span data-ttu-id="cc99a-722">Tous les mappages de gammes impliquent le découpage d’une plage d’entrée vers une gamme de sortie ou la compression de la gamme d’entrée pour l’ajuster à la gamme de sortie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-722">All gamut mappings involve either clipping an input range to an output gamut, or compressing the input gamut to fit within the output gamut.</span></span> <span data-ttu-id="cc99a-723">Les algorithmes plus complexes sont formés par compression et découpage dans différentes directions, ou en divisant la gamme en différentes régions, puis en effectuant le découpage ou la compression dans les différentes régions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-723">More complex algorithms are formed by compressing and clipping in different directions, or by dividing the gamut into different regions, and then performing clipping or compression in the different regions.</span></span>

<span data-ttu-id="cc99a-724">La nouvelle CTE étend ce concept pour prendre en charge les régions d’une gamme possible, une gamme plausible et une gamme de référence, et permet à GMAs de les mapper de différentes façons.</span><span class="sxs-lookup"><span data-stu-id="cc99a-724">The new CTE extends this concept to support the regions of a possible gamut, a plausible gamut, and a reference gamut, and enables GMAs to map them in different ways.</span></span> <span data-ttu-id="cc99a-725">En outre, les GMAs ont des informations sur l’axe neutre de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-725">In addition, the GMAs have information about the device neutral axis.</span></span> <span data-ttu-id="cc99a-726">La discussion suivante décrit comment gérer les situations où les gammes de référence et les gammes de référence plausibles se sont réduites les unes sur les autres.</span><span class="sxs-lookup"><span data-stu-id="cc99a-726">The following discussion addresses how to handle situations where the plausible gamuts and reference gamuts have collapsed on each other.</span></span>

![Diagramme qui montre le G M A avec deux descripteurs de gamme non réduits.](images/gmmp-image091.png)

<span data-ttu-id="cc99a-728">**Figure 22** : GMA avec deux descripteurs de gamme non réduits</span><span class="sxs-lookup"><span data-stu-id="cc99a-728">**Figure 22** : GMA with two un-collapsed gamut descriptors</span></span>

<span data-ttu-id="cc99a-729">Cet exemple peut s’afficher si vous mappez à partir d’un périphérique d’entrée, tel qu’une caméra ou un scanneur caractérisé par une cible réfléchissante, à un espace ScRVB.</span><span class="sxs-lookup"><span data-stu-id="cc99a-729">You might see this example if you map from an input device, such as a camera or scanner that is characterized with a reflective target, to scRGB space.</span></span> <span data-ttu-id="cc99a-730">Ici, les couleurs plausibles plus claires que le blanc de référence sont des surbrillances spéculaires.</span><span class="sxs-lookup"><span data-stu-id="cc99a-730">Here the plausible colors that are lighter than reference white are specular highlights.</span></span> <span data-ttu-id="cc99a-731">Dans la pratique, la caractérisation d’une caméra avec une cible peut ne pas générer la plage complète des valeurs possibles dans l’appareil photo. Toutefois, les surbrillances spéculaires et les couleurs très chromatiques se trouvent en nature.</span><span class="sxs-lookup"><span data-stu-id="cc99a-731">In practice, characterizing a camera with a target might not generate the full range of values possible in the camera; however, specular highlights and very chromatic colors found in nature would.</span></span> <span data-ttu-id="cc99a-732">(Les cibles transmissées ont généralement un correctif qui est la densité minimale possible sur le support.</span><span class="sxs-lookup"><span data-stu-id="cc99a-732">(Transmissive targets usually have a patch that is the minimum density possible on the medium.</span></span> <span data-ttu-id="cc99a-733">Avec une telle cible, les surbrillances spéculaires sont comprises dans la plage de la cible.) Le noir de référence pour une cible réfléchissante est le début de la région noire de l’ombre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-733">With such a target, specular highlights would fall within the target's range.) The reference black for a reflective target would be the beginning of the shadow black region.</span></span> <span data-ttu-id="cc99a-734">Autrement dit, il y a probablement des couleurs dans les ombres qui sont plus sombres que le noir sur la cible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-734">That is, there are likely to be colors in the shadows that are darker than the black on the target.</span></span> <span data-ttu-id="cc99a-735">Si l’image contient de nombreux contenus intéressants dans cette région, il peut être utile de conserver cette variation tonale.</span><span class="sxs-lookup"><span data-stu-id="cc99a-735">If the image contains a lot of interesting content in that region, it may be worthwhile preserving that tonal variation.</span></span>

![Diagramme qui montre le G M A avec une gamme de destination réduite.](images/gmmp-image095.png)

<span data-ttu-id="cc99a-737">**Figure 23** : graphique des couleurs de destination réduites</span><span class="sxs-lookup"><span data-stu-id="cc99a-737">**Figure 23** : GMA with collapsed destination gamut</span></span>

<span data-ttu-id="cc99a-738">La figure 23 illustre un algorithme de mappage de gammes possibles lorsque la gamme de destination fournit uniquement la plage du blanc de l’appareil à la couleur noire, et qu’il n’y a pas de couleurs possibles en dehors de cette gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-738">Figure 23 shows one possible gamut mapping algorithm when the destination gamut only provides the range from device white to black, and there are no possible colors outside this gamut.</span></span> <span data-ttu-id="cc99a-739">Cela peut se produire pour les périphériques de sortie standard, tels que les imprimantes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-739">This is likely to happen for typical output devices, such as printers.</span></span> <span data-ttu-id="cc99a-740">Les couleurs possibles sont mappées sur le bord de la gamme de destination.</span><span class="sxs-lookup"><span data-stu-id="cc99a-740">The possible colors are mapped to the edge of the destination gamut.</span></span> <span data-ttu-id="cc99a-741">Mais il n’y a pas de courbe de tonalité pour le périphérique de sortie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-741">But it lacks a tone curve for the output device.</span></span> <span data-ttu-id="cc99a-742">Le GMA doit sélectionner un point neutre de luminance inférieure à utiliser comme destination de mappage pour le blanc de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-742">The GMA must select some neutral point of lower luminance to use as a mapping destination for the reference white.</span></span> <span data-ttu-id="cc99a-743">Pour ce faire, un algorithme sophistiqué peut effectuer cette opération en histogramming le lightnesses dans l’image source et en observant le nombre de chutes de la plage attendue, mais plus claire que le blanc de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-743">A sophisticated algorithm can do this by histogramming the lightnesses in the source image and seeing how many fall in the range of expected but lighter than the reference white.</span></span> <span data-ttu-id="cc99a-744">Plus lightnesses, plus l’espace est nécessaire sur le périphérique de destination entre les points mappés pour les surbrillances spéculaires et le blanc de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-744">The more lightnesses, the more space is required in the destination device between the mapped points for the specular highlights and reference white.</span></span> <span data-ttu-id="cc99a-745">Un algorithme plus simple peut choisir une distance arbitraire par rapport à l’échelle de luminosité à partir du blanc de l’appareil, par exemple 5%.</span><span class="sxs-lookup"><span data-stu-id="cc99a-745">A simpler algorithm might pick an arbitrary distance down the lightness scale from device white, such as 5 percent.</span></span> <span data-ttu-id="cc99a-746">Une approche similaire s’applique pour le mappage du noir maximal et du noir de l’ombre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-746">A similar approach applies for the mapping of the maximum black and shadow black.</span></span>

<span data-ttu-id="cc99a-747">Une fois que vous avez généré la courbe de tonalité de destination, vous pouvez mapper dans une méthode similaire à celle utilisée dans la figure 23 précédente.</span><span class="sxs-lookup"><span data-stu-id="cc99a-747">After you generate the destination tone curve, you can map in a method similar to that used in the preceding Figure 23.</span></span> <span data-ttu-id="cc99a-748">Tous les points de la courbe de tonalité de destination se trouvent dans la gamme d’appareils, et tous les points du mappage doivent se trouver dans la gamme d’appareils.</span><span class="sxs-lookup"><span data-stu-id="cc99a-748">All points in the destination tone curve will fall within the device gamut, and all points in the mapping must fall within the device gamut.</span></span>

<span data-ttu-id="cc99a-749">Si vous inversez les figures gauches et les figures de droite, ainsi que les directions des flèches de la figure 23, vous pouvez décrire le cas où l’image source n’a qu’une gamme de référence, et les trois gammes du périphérique de sortie ne se sont pas réduites les unes sur les autres.</span><span class="sxs-lookup"><span data-stu-id="cc99a-749">If you reverse the left figures and right figures, and the directions of the arrows in Figure 23, you can describe the case where the source image has only a reference gamut, and the three gamuts of the output device have not collapsed onto each other.</span></span> <span data-ttu-id="cc99a-750">Il peut s’agir, par exemple, d’un mappage d’une analyse à ScRVB.</span><span class="sxs-lookup"><span data-stu-id="cc99a-750">An example of this might be mapping from a monitor to scRGB.</span></span> <span data-ttu-id="cc99a-751">Là encore, le GMA doit synthétiser les points de contrôle pour les cinq points sur la courbe de tonalité pour l’image source.</span><span class="sxs-lookup"><span data-stu-id="cc99a-751">Again, the GMA must synthesize the control points for the five points on the tone curve for the source image.</span></span> <span data-ttu-id="cc99a-752">Certains mappages peuvent placer tous les points de la courbe de tonalité dans la gamme de l’appareil ScRVB, tandis que les autres mappages peuvent utiliser davantage de la gamme ScRVB en mappant le blanc diffus à la référence blanche et en autorisant le blanc spéculaire à mapper à une valeur plus claire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-752">Some mappings might put all points of the tone curve within the scRGB device gamut, while other mappings might use more of the scRGB gamut by mapping diffuse white to the reference white and allowing specular white to map to a lighter value.</span></span>

<span data-ttu-id="cc99a-753">Enfin, vous avez le cas où les deux appareils disposent uniquement de la gamme de référence, ce qui est le fonctionnement de la plupart des algorithmes de mappage de gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-753">Finally, you have the case where both devices have only the reference gamut, which is how most gamut mapping algorithms work.</span></span> <span data-ttu-id="cc99a-754">Vous pouvez résoudre ce cas en revenant simplement aux algorithmes actuels.</span><span class="sxs-lookup"><span data-stu-id="cc99a-754">So you can resolve this by just falling back to current algorithms.</span></span> <span data-ttu-id="cc99a-755">Sinon, si vous avez un moyen raisonnable de déterminer les cinq points de référence pour les appareils source et de destination, vous pouvez faire en sorte de mapper les points de référence.</span><span class="sxs-lookup"><span data-stu-id="cc99a-755">Alternatively, if you have a reasonable way to determine the five reference points for the source and destination devices, then you can arrange to map the reference points.</span></span>

<span data-ttu-id="cc99a-756">Les gammes d’appareils contiennent plus de cinq points de référence sur l’axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-756">Device gamuts contain more than the five reference points on the neutral axis.</span></span> <span data-ttu-id="cc99a-757">Ils représentent uniquement les limites entre les régions potentielles de l’image.</span><span class="sxs-lookup"><span data-stu-id="cc99a-757">These just represent the boundaries between potential regions in the image.</span></span> <span data-ttu-id="cc99a-758">Entre chacun des points de référence, vous pouvez utiliser l’une des techniques de mappage de gammes existantes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-758">Between each of the reference points, you can use any of the existing gamut mapping techniques.</span></span> <span data-ttu-id="cc99a-759">Par conséquent, vous pouvez découper la plage des couleurs inattendues et compresser toutes les couleurs entre le blanc et le noir attendus, ou vous pouvez découper toutes les couleurs en dehors de la plage de référence et les compresser dans cette plage.</span><span class="sxs-lookup"><span data-stu-id="cc99a-759">So you might clip the range of unexpected colors, and compress all colors between the expected white and black, or you might clip all colors outside the reference range and compress within that range.</span></span> <span data-ttu-id="cc99a-760">Il existe de nombreuses possibilités, qui peuvent être implémentées dans différents GMAs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-760">There are many possibilities, which can be implemented in different GMAs.</span></span> <span data-ttu-id="cc99a-761">En outre, les GMAs peuvent être compressés et découpés de différentes façons.</span><span class="sxs-lookup"><span data-stu-id="cc99a-761">Further, the GMAs can compress and clip in different ways.</span></span> <span data-ttu-id="cc99a-762">Toutes ces combinaisons sont couvertes dans cette invention.</span><span class="sxs-lookup"><span data-stu-id="cc99a-762">All of those combinations are covered within this invention.</span></span>

<span data-ttu-id="cc99a-763">Jusqu’ici, dans cette discussion, la gamme a été traitée comme s’il s’agissait uniquement d’une fonction de l’appareil sur lequel l’image a été créée, capturée ou affichée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-763">So far in this discussion, the gamut has been treated as if it were solely a function of the device on which the image was created, captured, or displayed.</span></span> <span data-ttu-id="cc99a-764">Toutefois, il n’y a aucune raison pour laquelle toutes les images d’un appareil doivent avoir la même gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-764">However, there is no reason why all images for a device must have the same gamut.</span></span> <span data-ttu-id="cc99a-765">Le GMAs dépend des données du GBD.</span><span class="sxs-lookup"><span data-stu-id="cc99a-765">The GMAs depend on the data in the GBD.</span></span> <span data-ttu-id="cc99a-766">Si le descripteur est modifié entre des images, le GMAs n’a aucun moyen de le savoir.</span><span class="sxs-lookup"><span data-stu-id="cc99a-766">If the descriptor is changed between images, there is no way for the GMAs to know.</span></span> <span data-ttu-id="cc99a-767">En particulier, si les images n’ont pas de surbrillances spéculaires, GMAs est plus performant si le descripteur de gamme n’indique pas que les couleurs sont plus claires que le blanc diffus.</span><span class="sxs-lookup"><span data-stu-id="cc99a-767">In particular, if images have no specular highlights, GMAs perform better if the gamut descriptor does not show that there are colors lighter than diffuse white.</span></span>

<span data-ttu-id="cc99a-768">Dans la nouvelle architecture CTE, il est possible d’utiliser plus d’un GMA.</span><span class="sxs-lookup"><span data-stu-id="cc99a-768">In the new CTE architecture, it is possible to use more than one GMA.</span></span> <span data-ttu-id="cc99a-769">L’utilisation de plusieurs GMAs est fondamentalement mal définie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-769">Using multiple GMAs is inherently ill-defined.</span></span> <span data-ttu-id="cc99a-770">Par exemple, si un appareil de capture associe un GMA à son apparence, il a tendance à le faire avec une gamme de destination « ciblée ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-770">For example, if a capture device associates a GMA with its "look and feel," it tends to do so with a "targeted" destination gamut.</span></span> <span data-ttu-id="cc99a-771">Il en va de même pour les périphériques de sortie et les gammes de sources « ciblées ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-771">The same is true for output devices and "targeted" source gamuts.</span></span> <span data-ttu-id="cc99a-772">La gamme sRVB est une gamme de couleurs implicites couramment ciblée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-772">The sRGB gamut is one commonly targeted implied gamut.</span></span> <span data-ttu-id="cc99a-773">Par conséquent, il est fortement recommandé d’utiliser un seul GMA, si la prévisibilité est une priorité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-773">Therefore, it is strongly recommended that you use a single GMA, if predictability is a priority.</span></span> <span data-ttu-id="cc99a-774">Un seul flux de travail GMA doit être la valeur par défaut pour tous les workflows, en particulier les workflows consommateur et prosumer.</span><span class="sxs-lookup"><span data-stu-id="cc99a-774">A single GMA workflow should be the default for all workflows, especially consumer and prosumer workflows.</span></span> <span data-ttu-id="cc99a-775">Si le mappage de la gamme de couleurs pour la reproduction préférée doit être effectué une seule fois, il y a des cas où plusieurs processus de mappage sont inclus.</span><span class="sxs-lookup"><span data-stu-id="cc99a-775">While gamut mapping for preferred reproduction should be done one time, there are instances where multiple mapping processes are included.</span></span> <span data-ttu-id="cc99a-776">Tout d’abord, pour la vérification, vous effectuez un mappage par défaut à la gamme de l’appareil cible final, puis un rendu colorimétrique à la gamme de l’appareil de vérification.</span><span class="sxs-lookup"><span data-stu-id="cc99a-776">First, for proofing, you do a preferred mapping to the gamut of the final target device, and then a colorimetric rendering to the gamut of the proofing device.</span></span> <span data-ttu-id="cc99a-777">Deuxièmement, certains types de mappage sont utilisés pour modifier les caractéristiques de l’image, mais ne sont pas inclus pour être mappés à une gamme d’appareils, par exemple, en ajustant la courbe tonale ou la chromatique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-777">Second, some types of mapping are used to alter the characteristics of the image, but aren't included to map to a device gamut, for example, adjusting the tone curve or the chromaticity.</span></span> <span data-ttu-id="cc99a-778">Si plusieurs GMAs sont utilisés, l’interface de transformation prend un tableau de cartes de gammes liées, c’est-à-dire des cartes de gamme qui ont été initialisées avec une paire de descriptions de limites de gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-778">If multiple GMAs are used, the transform interface takes an array of bound gamut maps, that is, gamut maps that have been initialized with a pair of gamut boundary descriptions.</span></span> <span data-ttu-id="cc99a-779">Lorsqu’il existe plusieurs mappages de couleurs, la limite de gamme d’entrée pour une carte de gammes qui suit doit être identique à la limite de la gamme de sortie de son prédécesseur.</span><span class="sxs-lookup"><span data-stu-id="cc99a-779">When there is more than one gamut map, the input gamut boundary for a succeeding gamut map must be the same as the output gamut boundary of its predecessor.</span></span>

<span data-ttu-id="cc99a-780">La fonction de limite de gamme d’appareils prend le moteur de modèle d’appareil et les paramètres analytiques et dérive une limite de gamme d’appareils couleur décrite comme une liste de vertex ordonnée de la forme convexe de la gamme d’appareils.</span><span class="sxs-lookup"><span data-stu-id="cc99a-780">The device gamut boundary function takes the device model engine and analytical parameters and derives a color device gamut boundary described as an ordered vertex list of the convex hull of the device gamut.</span></span> <span data-ttu-id="cc99a-781">La liste de vertex triée est stockée dans CIEJab.</span><span class="sxs-lookup"><span data-stu-id="cc99a-781">The ordered vertex list is stored in CIEJab.</span></span> <span data-ttu-id="cc99a-782">La structure de la liste de vertex triée est optimisée pour l’accélération matérielle par DirectX.</span><span class="sxs-lookup"><span data-stu-id="cc99a-782">The structure of the ordered vertex list is optimized for hardware acceleration by DirectX.</span></span> <span data-ttu-id="cc99a-783">Cette approche a de nombreuses solutions bien connues (recherchez « the convexe coque DirectX » sur le Web et vous pouvez obtenir plus de 100 résultats).</span><span class="sxs-lookup"><span data-stu-id="cc99a-783">This approach has many well known solutions (search for "convex hull DirectX" on the web and you get well over 100 hits).</span></span> <span data-ttu-id="cc99a-784">Il existe également une référence de 1983 sur cette rubrique (Computer Graphics théorie and application, "Shiphulls, b-spline surfaces et CADCAM" pp. 34-49), avec des références qui mettent à jour de 1970 à 1982 dans la rubrique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-784">There is also a reference from 1983 on this topic (Computer Graphics Theory and Application, "Shiphulls, b-spline surfaces and cadcam" pp. 34-49), with references dating from 1970 to 1982 on the topic.</span></span>

<span data-ttu-id="cc99a-785">Deux techniques différentes peuvent être utilisées pour calculer les triangles dans l’interpréteur de couleurs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-785">Two different techniques can be used to compute the triangles in the gamut shell.</span></span> <span data-ttu-id="cc99a-786">Pour les autres appareils autres que les appareils RGB supplémentaires, vous calculez une coque convexe.</span><span class="sxs-lookup"><span data-stu-id="cc99a-786">For other devices other than additive RGB devices, you compute a convex hull.</span></span> <span data-ttu-id="cc99a-787">Vous pouvez envisager d’examiner la prise en charge de la coque non convexe pour d’autres appareils si vous disposez d’un accès direct à ces appareils pour valider la robustesse, les performances et la fidélité des algorithmes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-787">You can consider investigating non-convex hull support for other devices if you have direct access to such devices to validate the robustness, performance, and fidelity of the algorithms.</span></span> <span data-ttu-id="cc99a-788">Il s’agit d’un processus bien connu qui ne nécessite pas de description supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-788">This is a well-known process that does not require further description.</span></span> <span data-ttu-id="cc99a-789">La technique utilisée pour les appareils RGB supplémentaires est décrite ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="cc99a-789">The technique used for additive RGB devices is described as follows.</span></span>

<span data-ttu-id="cc99a-790">Différents GBDs présentent des avantages et des inconvénients.</span><span class="sxs-lookup"><span data-stu-id="cc99a-790">Different GBDs have advantages and drawbacks.</span></span> <span data-ttu-id="cc99a-791">La représentation de la coque convexe garantit de superbes propriétés géométriques, telles que les tranches de teintes convexes qui fournissent un point d’intersection unique avec un rayon émanant d’un point sur l’axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-791">The convex hull representation guarantees nice geometric properties, such as convex hue slices that provide a unique intersection point with a ray emanating from a point on the neutral axis.</span></span> <span data-ttu-id="cc99a-792">L’inconvénient de la représentation convexe de la coque est également la convexité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-792">The downside of the convex hull representation is also convexity.</span></span> <span data-ttu-id="cc99a-793">Il est connu que de nombreux appareils, en particulier des appareils d’affichage, ont des gammes de couleurs qui sont loin d’être convexes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-793">It is known that many devices, specifically display devices, have gamuts that are far from being convex.</span></span> <span data-ttu-id="cc99a-794">Si la gamme réelle s’écarte considérablement de l’hypothèse de convexité, la représentation convexe de la coque serait inexacte, éventuellement dans la mesure où elle ne représente pas la réalité.</span><span class="sxs-lookup"><span data-stu-id="cc99a-794">If the actual gamut deviates significantly from the convexity assumption, the convex hull representation would be inaccurate, possibly to the extent that it doesn't represent reality.</span></span>

<span data-ttu-id="cc99a-795">Une fois que vous avez adopté un GBD qui donne une représentation raisonnablement exacte de la gamme réelle, d’autres problèmes se posent, d’autres en raison du concept de la tranche de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-795">After you adopt a GBD that gives a reasonably accurate representation of the actual gamut, other problems arise, some due to the very concept of hue slice.</span></span> <span data-ttu-id="cc99a-796">Il y a au moins deux situations pathologiques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-796">There are at least two pathological situations.</span></span> <span data-ttu-id="cc99a-797">Dans la figure 24 ci-dessous, une gamme de CRT génère des tranches de teinte avec des « îlots ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-797">In the following Figure 24, a CRT gamut gives rise to hue slices with "islands."</span></span> <span data-ttu-id="cc99a-798">Dans la figure 25, une gamme d’imprimantes génère une tranche de teinte avec une partie de l’axe neutre manquant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-798">In Figure 25, a printer gamut gives rise to a hue slice with part of the neutral axis missing.</span></span> <span data-ttu-id="cc99a-799">Les tranches de teinte pathologique ne sont pas provoquées par des limites de gammes pathologiques particulièrement dans ces cas.</span><span class="sxs-lookup"><span data-stu-id="cc99a-799">The pathological hue slices are not caused by particularly pathological gamut boundaries in these cases.</span></span> <span data-ttu-id="cc99a-800">Ils sont provoqués par le concept de la tranche de teinte, car (a) qu’il est utilisé le long de la teinte constante, et (b) qu’il ne prend qu’une moitié du plan qui correspond à l’angle de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-800">They are caused by the very concept of hue slice, because (a) it is taken along constant hue, and (b) it only takes one-half of the plane that corresponds to the hue angle.</span></span>

![Diagramme qui montre une vue supérieure et une vue latérale du « courbure » dans les teintes bleues.](images/gmmp-image097.jpg)

<span data-ttu-id="cc99a-802">**Figure 24** : un moniteur CRT standard présente une gamme de couleurs qui montre le « courbure » caractéristique des teintes bleues.</span><span class="sxs-lookup"><span data-stu-id="cc99a-802">**Figure 24** : A typical CRT monitor has a gamut that shows peculiar "curving in" in the blue hues.</span></span> <span data-ttu-id="cc99a-803">Si les tranches de teinte sont prises dans cette plage de teinte, les îlots isolés peuvent apparaître dans les tranches de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-803">If hue slices are taken within this hue range, isolated islands may appear in the hue slices.</span></span>

![Diagramme d’une gamme avec un « Gap » dans son axe neutre.](images/gmmp-image099.jpg)

<span data-ttu-id="cc99a-805">**Figure 25** : une imprimante peut avoir une gamme avec « Gap » dans son axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-805">**Figure 25** : A printer may have a gamut that has "gap" in its neutral axis.</span></span> <span data-ttu-id="cc99a-806">Quand une tranche de teinte est prise (ce qui n’est que la moitié du plan), il y a un « retrait » sur la partie de la limite qui est l’axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-806">When a hue slice is taken (which is only one-half the plane), there is a "dent" on the part of the boundary that is the neutral axis.</span></span> <span data-ttu-id="cc99a-807">Cela peut être difficile à résoudre par algorithme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-807">This can be hard to resolve algorithmically.</span></span>

<span data-ttu-id="cc99a-808">Pour résoudre ces pathologies, une nouvelle infrastructure est proposée et abandonne le concept de tranche de teinte utilisé comme point de départ.</span><span class="sxs-lookup"><span data-stu-id="cc99a-808">To resolve these pathologies, a new framework is proposed that abandons the concept of hue slice that used as the starting point.</span></span> <span data-ttu-id="cc99a-809">Au lieu de cela, le Framework utilise le jeu d’éléments de ligne de limite, ou les lignes qui se trouvent sur la limite de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-809">Instead, the framework uses the set of "boundary line elements," or lines that lie on the gamut boundary.</span></span> <span data-ttu-id="cc99a-810">Elles ne fournissent pas nécessairement une visualisation géométrique cohérente comme les tranches de teinte, mais elles prennent en charge toutes les opérations de gamme courantes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-810">They do not necessarily provide a coherent geometric visualization like hue slices, but they support all the common gamut operations.</span></span> <span data-ttu-id="cc99a-811">Outre la résolution des problèmes mentionnés précédemment, cette approche suggère également que la construction de tranches de teinte, même quand cela est possible, est un gaspillage de calcul.</span><span class="sxs-lookup"><span data-stu-id="cc99a-811">Besides solving the problems mentioned previously, this approach also suggests that the construction of hue slices, even when it is possible, is computationally wasteful.</span></span>

### <a name="triangulation-of-the-gamut-boundary"></a><span data-ttu-id="cc99a-812">Triangulation de la limite de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-812">Triangulation of the Gamut Boundary</span></span>

<span data-ttu-id="cc99a-813">Le point de départ est un GBD qui se compose d’une triangulation de la limite de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-813">The starting point is a GBD consisting of a triangulation of the gamut boundary.</span></span> <span data-ttu-id="cc99a-814">Les méthodes connues de construction de GBDs fournissent généralement cette triangulation.</span><span class="sxs-lookup"><span data-stu-id="cc99a-814">Known methods of constructing GBDs usually provide that triangulation.</span></span> <span data-ttu-id="cc99a-815">Pour la béton, une méthode de construction de GBDs pour les appareils additives est décrite ici.</span><span class="sxs-lookup"><span data-stu-id="cc99a-815">For concreteness, one method of constructing GBDs for additive devices its device space is described here.</span></span> <span data-ttu-id="cc99a-816">Ces appareils incluent des moniteurs (CRT et LCD) et des projecteurs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-816">These devices include monitors (both CRT-based and LCD-based) and projectors.</span></span> <span data-ttu-id="cc99a-817">La géométrie simple du cube vous permet d’introduire un treillis normal sur le cube.</span><span class="sxs-lookup"><span data-stu-id="cc99a-817">The simple geometry of the cube enables you to introduce a regular lattice on the cube.</span></span> <span data-ttu-id="cc99a-818">Les faces limites du cube peuvent être facettisées de différentes manières, comme celle illustrée dans la figure 26.</span><span class="sxs-lookup"><span data-stu-id="cc99a-818">The boundary faces of the cube can be triangulated in a number of fashions, such as the one shown in Figure 26.</span></span> <span data-ttu-id="cc99a-819">L’architecture fournit soit un modèle d’appareil pour l’appareil afin que les valeurs colorimétriques des points de treillis puissent être obtenues algorithmiquement, soit des mesures ont été effectuées directement pour ces points.</span><span class="sxs-lookup"><span data-stu-id="cc99a-819">The architecture provides either a device model for the device so that colorimetric values of the lattice points can be obtained algorithmically, or measurements have been made directly for those points.</span></span> <span data-ttu-id="cc99a-820">L’architecture fournit également CIECAM02, afin que vous puissiez supposer que les données de départ ont déjà été mappées à l’espace CIECAM02 Jab.</span><span class="sxs-lookup"><span data-stu-id="cc99a-820">The architecture also provides CIECAM02, so that you can assume the starting data has already been mapped into CIECAM02 Jab space.</span></span> <span data-ttu-id="cc99a-821">Ensuite, chaque point de treillis sur les faces limites du cube RGB a un point correspondant dans l’espace Jab.</span><span class="sxs-lookup"><span data-stu-id="cc99a-821">Then each lattice point on the boundary faces of the RGB cube has a corresponding point in Jab space.</span></span> <span data-ttu-id="cc99a-822">Les connexions des points qui forment l’ensemble des triangles dans l’espace RVB induitnt également un ensemble de triangles dans l’espace Jab.</span><span class="sxs-lookup"><span data-stu-id="cc99a-822">The connections of points that form the set of triangles in RGB space also induces a set of triangles in Jab space.</span></span> <span data-ttu-id="cc99a-823">Cet ensemble de triangles constitue une triangulation raisonnable de la limite de gamme si (a) le treillis sur le cube RVB est suffisamment parfait, et (b) la transformation de l’espace de l’appareil vers l’espace de couleurs uniforme est topologique. autrement dit, il mappe la limite à la limite et n’active pas la gamme à l’intérieur de sorte que les points intérieurs deviennent des points de limite.</span><span class="sxs-lookup"><span data-stu-id="cc99a-823">This set of triangles forms a reasonable triangulation of the gamut boundary if (a) the lattice on the RGB cube is fine enough, and (b) the transformation from device space to the uniform color space is topologically well-behaved; that is, it maps boundary to boundary, and it doesn't turn the gamut inside out so that interior points become boundary points.</span></span>

![Diagramme illustrant une méthode simple pour triangluate la limite de gamme d’un appareil avec R G B comme espace de périphérique.](images/gmmp-image100.png)

<span data-ttu-id="cc99a-825">**Figure 26** : méthode simple pour trianguler la limite de gamme d’un appareil avec RVB comme espace d’appareil</span><span class="sxs-lookup"><span data-stu-id="cc99a-825">**Figure 26** : A simple method to triangulate the gamut boundary of a device with RGB as its device space</span></span>

### <a name="boundary-line-elements"></a><span data-ttu-id="cc99a-826">Éléments de ligne de limite</span><span class="sxs-lookup"><span data-stu-id="cc99a-826">Boundary Line Elements</span></span>

<span data-ttu-id="cc99a-827">L’essentiel de cette infrastructure est le concept d’éléments de ligne de limite ; ensemble de segments de ligne (a) situés sur la limite de la gamme, et (b) sur un plan.</span><span class="sxs-lookup"><span data-stu-id="cc99a-827">Central to this framework is the concept of boundary line elements; a set of line segments that (a) lie on the gamut boundary, and (b) lie on a plane.</span></span> <span data-ttu-id="cc99a-828">Dans ce cas, le plan est un plan de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-828">In this case, the plane is a hue plane.</span></span> <span data-ttu-id="cc99a-829">Chaque segment de ligne est le résultat de l’intersection du plan avec un triangle de limites de couleurs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-829">Each line segment is the result of intersecting the plane with a gamut boundary triangle.</span></span> <span data-ttu-id="cc99a-830">Bien que de nombreux chercheurs aient utilisé la construction de l’intersection d’un plan avec des triangles de limites, ils analysent généralement la relation entre ces segments de ligne et tentent de construire un objet géométrique cohérent à partir des segments de ligne.</span><span class="sxs-lookup"><span data-stu-id="cc99a-830">Although many researchers have used the construction of intersecting a plane with boundary triangles, they generally analyze the relationship among these line segments, and attempt to construct a coherent geometric object out of the line segments.</span></span> <span data-ttu-id="cc99a-831">Différents algorithmes ont été conçus pour suivre ces segments de ligne l’un après l’autre jusqu’à ce qu’une tranche de teinte entière soit obtenue, et de nombreuses tentatives ont été effectuées pour accélérer le processus de recherche.</span><span class="sxs-lookup"><span data-stu-id="cc99a-831">Different algorithms have been devised to follow these line segments one after the other until a whole hue slice is obtained, and many attempts have been made to speed up the process of searching.</span></span>

<span data-ttu-id="cc99a-832">Cette approche est différente.</span><span class="sxs-lookup"><span data-stu-id="cc99a-832">This approach is different.</span></span> <span data-ttu-id="cc99a-833">Vous croisez le plan avec les triangles pour obtenir les segments de ligne.</span><span class="sxs-lookup"><span data-stu-id="cc99a-833">You intersect the plane with the triangles to obtain the line segments.</span></span> <span data-ttu-id="cc99a-834">Vous envisagez ensuite ces segments de ligne comme des objets conceptuels de *base* .</span><span class="sxs-lookup"><span data-stu-id="cc99a-834">You then consider these line segments as the *basic* conceptual objects.</span></span> <span data-ttu-id="cc99a-835">Il est nécessaire d’analyser la relation entre les segments de ligne ; vous n’avez pas besoin de savoir comment elles sont interconnectées les unes avec les autres.</span><span class="sxs-lookup"><span data-stu-id="cc99a-835">It is necessary to analyze the relationship among the line segments; you don't have to know how they are interconnected with each other.</span></span> <span data-ttu-id="cc99a-836">Ce point de vue résout le problème de la tranche de teinte avec des îlots.</span><span class="sxs-lookup"><span data-stu-id="cc99a-836">This point of view solves the problem of hue slice with islands.</span></span> <span data-ttu-id="cc99a-837">Les approches connues qui tentent de construire la tranche de teinte supposent que, si l’une d’entre elles commence par un segment de ligne et la suit sur le segment de ligne suivant, et ainsi de suite ; Il finit par revenir au point de départ, à partir duquel une tranche de teinte entière serait construite.</span><span class="sxs-lookup"><span data-stu-id="cc99a-837">The known approaches that attempt to construct hue slice assume that, if one starts with one line segment and follows it to the next line segment, and so on; it eventually leads back to the starting point, at which point a whole hue slice would be constructed.</span></span> <span data-ttu-id="cc99a-838">Malheureusement, cette approche pourrait manquer l’île (et dans le pire scénario, le continent).</span><span class="sxs-lookup"><span data-stu-id="cc99a-838">Unfortunately, this approach would miss the island (and in the worst scenario, the continent).</span></span> <span data-ttu-id="cc99a-839">En ne permettant pas d’obtenir une image géométrique cohérente ; autrement dit, la tranche de teinte vous permet de gérer facilement le problème de l’îlot.</span><span class="sxs-lookup"><span data-stu-id="cc99a-839">By not insisting on obtaining a coherent geometric picture; that is, hue slice, you can handle the island problem effortlessly.</span></span> <span data-ttu-id="cc99a-840">Une autre différence importante dans cette approche est que, pour accélérer la construction des segments de ligne, elle utilise un « filtre triangulaire ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-840">Another important difference in this approach is that, to speed up the construction of line segments, it uses a "triangle filter."</span></span> <span data-ttu-id="cc99a-841">Le filtre triangulaire lève certains triangles qui ne produisent absolument pas de segments de ligne qui seraient utiles dans l’opération de gamme actuelle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-841">The triangle filter throws out certain triangles that will definitely not produce line segments that would be useful in the current gamut operation.</span></span> <span data-ttu-id="cc99a-842">Étant donné que l’intersection d’un triangle avec le plan est coûteuse en calcul, cela améliore la vitesse.</span><span class="sxs-lookup"><span data-stu-id="cc99a-842">Because intersecting a triangle with the plane is expensive computationally, this improves speed.</span></span> <span data-ttu-id="cc99a-843">Un effet secondaire est que vous ne pouvez pas construire la tranche de teinte, car certains segments de ligne seraient manquants en raison du filtrage de triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-843">A side effect is that, you cannot construct hue slice because some line segments would be missing due to the triangle filtering.</span></span>

### <a name="gamut-operation-checkgamut"></a><span data-ttu-id="cc99a-844">Opération de gamme : CheckGamut</span><span class="sxs-lookup"><span data-stu-id="cc99a-844">Gamut Operation: CheckGamut</span></span>

<span data-ttu-id="cc99a-845">L’exemple suivant explique le fonctionnement de l’infrastructure, et la façon dont CheckGamut est exécuté, autrement dit, le fonctionnement de la vérification de la présence d’une couleur dans la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-845">The following example will explain how the framework works, and how CheckGamut is carried out, that is, the operation of checking if a color is in-gamut.</span></span>

<span data-ttu-id="cc99a-846">L’infrastructure générale est illustrée dans la figure 27 suivante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-846">The general framework is illustrated in the following Figure 27.</span></span> <span data-ttu-id="cc99a-847">Il existe plusieurs composants.</span><span class="sxs-lookup"><span data-stu-id="cc99a-847">There are various components.</span></span> <span data-ttu-id="cc99a-848">Les composants étiquetés en italiques sont des composants qui peuvent être différents dans l’implémentation en fonction de l’opération de gamme en question.</span><span class="sxs-lookup"><span data-stu-id="cc99a-848">The components labeled in italics are components that may be different in implementation depending on the gamut operation in question.</span></span> <span data-ttu-id="cc99a-849">Les autres composants sont invariants pour toutes les opérations de gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-849">The other components are invariant across all gamut operations.</span></span> <span data-ttu-id="cc99a-850">Pour commencer, l' ***entrée*** est un jeu d’attributs de couleur.</span><span class="sxs-lookup"><span data-stu-id="cc99a-850">To begin, the ***Input*** is a set of color attributes.</span></span> <span data-ttu-id="cc99a-851">Dans le cas de CheckGamut, il s’agit de la couleur de la requête.</span><span class="sxs-lookup"><span data-stu-id="cc99a-851">In the case of CheckGamut, it is the query color.</span></span> <span data-ttu-id="cc99a-852">Dans la figure 27 et la discussion suivante, il est supposé que l’angle de teinte est parmi les attributs de couleur d’entrée ou peut être obtenu à partir de ceux-ci.</span><span class="sxs-lookup"><span data-stu-id="cc99a-852">In Figure 27 and the following discussion, it is assumed that the hue angle is either among the input color attributes, or can be obtained from them.</span></span> <span data-ttu-id="cc99a-853">C’est clairement le cas si l’entrée est le point de couleur entier, dans Jab ou JCh, à partir duquel vous pouvez ensuite calculer l’angle de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-853">This is clearly the case if the input is the whole color point, either in Jab or JCh, from which you can then compute the hue angle.</span></span> <span data-ttu-id="cc99a-854">Notez que l’angle de teinte n’est nécessaire que si des plans de teinte sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-854">Note that the hue angle is only needed because hue planes are being used.</span></span> <span data-ttu-id="cc99a-855">En fonction de l’opération de gamme en question, il n’est pas nécessaire d’utiliser le plan de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-855">Depending on the gamut operation in question, it might not be necessary to use the hue plane.</span></span> <span data-ttu-id="cc99a-856">Par exemple, dans la construction de la routine CheckGamut, vous souhaiterez peut-être utiliser des plans de constante J. Il s’agit d’une généralisation qui ne sera pas utilisée ou traitée plus en détail ; Toutefois, il peut être utile de mémoriser cette flexibilité de la méthodologie pour prendre en charge d’autres opérations de gamme lorsque le plan de teinte peut ne pas être le meilleur choix.</span><span class="sxs-lookup"><span data-stu-id="cc99a-856">For example, in the construction of the routine CheckGamut, you might want to use planes of constant J. This is a generality that will not be used or discussed further; but it might be helpful to remember this flexibility of the methodology to support other gamut operations when hue plane might not be the best choice.</span></span>

![Diagramme qui montre le Flow pour prendre en charge les opérations de gamme.](images/gmmp-image112.jpg)

<span data-ttu-id="cc99a-858">**Figure 27** : infrastructure pour prendre en charge les opérations de gamme</span><span class="sxs-lookup"><span data-stu-id="cc99a-858">**Figure 27** : The framework to support gamut operations</span></span>

<span data-ttu-id="cc99a-859">L’angle de teinte, qui est obtenu directement à partir des entrées ou calculées à partir des entrées, est utilisé pour initialiser le plan de teinte appelé **plan de teinte complet** dans la figure.</span><span class="sxs-lookup"><span data-stu-id="cc99a-859">The hue angle, which is obtained directly from the inputs or computed from the inputs, is used to initialize the hue plane labeled **Full Hue Plane** in the figure.</span></span> <span data-ttu-id="cc99a-860">« Full » est mis en évidence, car il s’agit du plan complet, pas seulement du demi-plan contenant la teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-860">"Full" is emphasized because this is the full plane, not just the half-plane containing the hue.</span></span> <span data-ttu-id="cc99a-861">Le plan complet contient à la fois l’angle de teinte d’entrée et l’angle 180 degrés opposés à celui-ci.</span><span class="sxs-lookup"><span data-stu-id="cc99a-861">The full plane contains both the input hue angle and the angle 180 degrees opposite to it.</span></span> <span data-ttu-id="cc99a-862">La fonctionnalité clé du plan de teinte est la fonction Intersect, qui est expliquée dans la sous-section suivante, Full teinte plan : Intersect.</span><span class="sxs-lookup"><span data-stu-id="cc99a-862">The key functionality of the hue plane is the Intersect function, which is explained in the following subsection, Full Hue Plane: Intersect.</span></span> <span data-ttu-id="cc99a-863">Supposons que le GBD a déjà été construit et que l’ensemble des **triangles de limite de gamme** est disponible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-863">Assume that the GBD has already been constructed, and the set of **Gamut Boundary Triangles** is available.</span></span> <span data-ttu-id="cc99a-864">Croisent les triangles qui ont survécu au \**_filtre triangulaire_* _ avec le plan teinte à l’aide de Intersect.</span><span class="sxs-lookup"><span data-stu-id="cc99a-864">Intersect the triangles that have survived the \**_Triangle Filter_* _ with the hue plane using Intersect.</span></span> <span data-ttu-id="cc99a-865">Le _composant filtre triangulaire \* est étiqueté en italique, ce qui signifie que le composant varie en fonction des différentes opérations de gamme. Le *filtre triangulaire* pour CheckGamut est expliqué dans la section opération de gamme : CheckGamut (suite). Le résultat de l’intersection d’un triangle avec le plan de teinte est soit vide, soit un **élément de ligne de limite** , c’est-à-dire une paire de points distincts. Si le résultat n’est pas vide, il est passé dans le *_processeur d’éléments de ligne_* \*_ , qui est à nouveau différent selon l’opération de gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-865">The _Triangle Filter\* component is labeled in italics, which means that the component varies in implementation for different gamut operations. The *Triangle Filter* for CheckGamut is explained in the section, Gamut Operation: CheckGamut (continued). The result of intersecting a triangle with the hue plane is either empty or a **Boundary Line Element** , that is, a pair of distinct points. If the result is non-empty, it is passed into the \**_Line Element Processor_*_ , which again does different things depending on the gamut operation.</span></span> <span data-ttu-id="cc99a-866">Le _processeur d’élément de ligne \* met à jour la structure de données interne, \***données traitées internes**_ , dont le contenu ou la disposition dépend également de l’opération de gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-866">The _Line Element Processor\* updates the internal data structure, \***Internal Processed Data**_ , whose content or layout also depends on the gamut operation.</span></span> <span data-ttu-id="cc99a-867">En règle générale, les _données traitées internes \* contiennent la « réponse » au problème, qui est continuellement mise à jour avec chaque nouvel élément de ligne de limite trouvé. Lorsque tous les éléments de ligne de limite ont été traités, la réponse a été trouvée. Il reste à y accéder via l'**adaptateur de sortie**\*_.</span><span class="sxs-lookup"><span data-stu-id="cc99a-867">Generally, the _Internal Processed Data\* contains the "answer" to the problem, which is continually updated with each new Boundary Line Element found. When all the Boundary Line Elements have been processed, the answer has been found. It remains to access it through the \***Output Adaptor**_.</span></span> <span data-ttu-id="cc99a-868">Étant donné que la _Internal données traitées \* est spécifique à l’opération de gamme, l' *adaptateur de sortie* est également spécifique à l’opération de gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-868">Because the _Internal Processed Data\* is gamut operation specific, the *Output Adaptor* is also gamut operation specific.</span></span>

### <a name="full-hue-plane-intersect"></a><span data-ttu-id="cc99a-869">Plan de teinte complet : Intersect</span><span class="sxs-lookup"><span data-stu-id="cc99a-869">Full Hue Plane: Intersect</span></span>

<span data-ttu-id="cc99a-870">La fonction Intersect calcule l’intersection entre le plan de teinte et un triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-870">The Intersect function calculates the intersection of the hue plane and a triangle.</span></span> <span data-ttu-id="cc99a-871">Comme c’est le cas, cette fonction est importante pour deux raisons.</span><span class="sxs-lookup"><span data-stu-id="cc99a-871">As simple as it sounds, this function is important for two reasons.</span></span>

<span data-ttu-id="cc99a-872">Tout d’abord, l’intersection de chaque bord du triangle avec le plan peut produire trois points d’intersection, une situation géométriquement impossible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-872">First, intersecting each edge of the triangle with the plane might yield three intersection points, a geometrically impossible situation.</span></span> <span data-ttu-id="cc99a-873">La raison pour laquelle cela peut se produire dans le calcul est que, lorsque des calculs sont effectués dans une virgule flottante, par exemple au format IEEE, il y a des incertitudes, ou « bruit numérique », à chaque étape qui affecte la conclusion de savoir si un bord croise le plan.</span><span class="sxs-lookup"><span data-stu-id="cc99a-873">The reason why this might happen in the computation is that, when calculations are done in floating point, for example, IEEE format, there are uncertainties, or "numeric noise," in each step that affects the conclusion of whether an edge intersects the plane.</span></span> <span data-ttu-id="cc99a-874">Lorsque le plan croise les bords dans une situation de quasi-absence, les points d’intersection sont proches les uns des autres et la détermination de la présence d’un point d’intersection dans le bord est aléatoire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-874">When the plane intersects the edges in a near-miss situation, the intersection points are close to each other, and the determination whether an intersection point lies within the edge is random.</span></span> <span data-ttu-id="cc99a-875">Bien que le bruit dans les valeurs numériques des points soit faible, la conclusion qualitative qu’il y a plus de deux points d’intersection est à la fois très impossible et difficile à gérer correctement dans l’algorithme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-875">Although noise in the numeric values of the points is small, the qualitative conclusion that there are more than two intersection points is geometrically impossible and difficult to handle correctly in the algorithm.</span></span>

<span data-ttu-id="cc99a-876">Deuxièmement, cette fonction se trouve dans la boucle critique pour chaque bord de chaque triangle filtré. il est donc important que vous optimisiez son efficacité le plus possible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-876">Second, this function is in the critical loop for each edge of each filtered triangle, so it is important that you optimize its efficiency as much as possible.</span></span>

<span data-ttu-id="cc99a-877">Pour résoudre le premier problème de bruit numérique, effectuez les calculs dans des entiers.</span><span class="sxs-lookup"><span data-stu-id="cc99a-877">To address the first issue Of numeric noise, perform the calculations in integers.</span></span> <span data-ttu-id="cc99a-878">Pour résoudre le deuxième problème d’optimisation de son efficacité, mettez en cache l’attribut le plus utilisé de chaque vertex ou le « produit scalaire » associé à chaque vertex.</span><span class="sxs-lookup"><span data-stu-id="cc99a-878">To address the second issue of optimizing its efficiency, cache the most used attribute of each vertex, or the "dot product" associated with each vertex.</span></span> <span data-ttu-id="cc99a-879">Le passage à des entiers est un moyen classique de garantir la cohérence géométrique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-879">Passing into integers is a typical way to guarantee geometric consistency.</span></span> <span data-ttu-id="cc99a-880">L’idée de base est que, si vous devez effectuer une quantification, faites-le au début.</span><span class="sxs-lookup"><span data-stu-id="cc99a-880">The basic idea is that if you have to quantize, do it at the beginning.</span></span> <span data-ttu-id="cc99a-881">Ensuite, les calculs suivants peuvent être effectués dans des entiers, et si les entiers sont suffisamment larges pour éviter tout risque de dépassement de capacité, les calculs peuvent être effectués avec une précision infinie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-881">Then subsequent calculations can be performed in integers, and if the integers are wide enough so that there is no danger of overflow, the calculations can be done with infinite precision.</span></span> <span data-ttu-id="cc99a-882">Fonction de quantification suivante utile à cet effet.</span><span class="sxs-lookup"><span data-stu-id="cc99a-882">The following quantization function useful for this purpose.</span></span>

<span data-ttu-id="cc99a-883">ScaleAndTruncate (x) = partie entière de x \* 10000</span><span class="sxs-lookup"><span data-stu-id="cc99a-883">ScaleAndTruncate(x) = Integer part of x\*10000</span></span>

<span data-ttu-id="cc99a-884">Le facteur d’échelle 10000 signifie que le nombre à virgule flottante en entrée a quatre décimales, ce qui est suffisamment précis pour cette application.</span><span class="sxs-lookup"><span data-stu-id="cc99a-884">The scaling factor 10000 means that the input floating-point number has four decimal places, which is precise enough for this application.</span></span> <span data-ttu-id="cc99a-885">En fonction de la plage de valeurs de l’espace d’apparence de couleur, vous souhaitez choisir un type d’entier avec des bits suffisamment larges pour contenir les calculs intermédiaires.</span><span class="sxs-lookup"><span data-stu-id="cc99a-885">Depending on the range of values of the color appearance space, you want to choose an integer type with bits wide enough to hold the intermediate calculations.</span></span> <span data-ttu-id="cc99a-886">Dans la plupart des espaces d’apparence des couleurs, la plage de chaque coordonnée est comprise entre-1 000 et 1 000.</span><span class="sxs-lookup"><span data-stu-id="cc99a-886">In most color appearance spaces, the range of each coordinate is within the range -1,000 to 1,000.</span></span> <span data-ttu-id="cc99a-887">La coordonnée quantifiée a une valeur absolue possible maximale de 1 000 \* 10 000 = 10 millions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-887">The quantized coordinate has a maximum possible absolute value of 1,000\*10,000 = 10,000,000.</span></span> <span data-ttu-id="cc99a-888">Comme vous le verrez, la quantité intermédiaire est un produit scalaire, qui est la somme de deux produits de coordonnées. par conséquent, elle a une valeur absolue possible maximale de 2 \* (10 millions) ₂ = 2 ? 10 ₁ ₄.</span><span class="sxs-lookup"><span data-stu-id="cc99a-888">As you will see, the intermediate quantity is a dot product, which is a sum of two products of coordinates, so it has a maximum possible absolute value of 2\*(10,000,000) ₂ = 2?10 ₁₄.</span></span> <span data-ttu-id="cc99a-889">Le nombre de bits requis est le journal ₂ (2 ? 10 ₁ ₄) = 47,51.</span><span class="sxs-lookup"><span data-stu-id="cc99a-889">The number of bits required is log ₂ (2?10 ₁₄ ) = 47.51.</span></span> <span data-ttu-id="cc99a-890">Un choix pratique pour le type entier est, par conséquent, des entiers 64 bits.</span><span class="sxs-lookup"><span data-stu-id="cc99a-890">A convenient choice for the integer type is, therefore, 64-bit integers.</span></span>

<span data-ttu-id="cc99a-891">Pour garantir que l’intersection d’un plan avec un triangle donne toujours soit un jeu vide, soit un ensemble de deux points, vous devez considérer le triangle comme un tout, et non comme des bords individuels du triangle séparément.</span><span class="sxs-lookup"><span data-stu-id="cc99a-891">To guarantee that intersecting a plane with a triangle always gives either empty set or a set of two points, you must consider the triangle as a whole, not as individual edges of the triangle separately.</span></span> <span data-ttu-id="cc99a-892">Pour comprendre la situation géométrique, prenez en compte les « distances signées » des vertex du triangle à partir du plan de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-892">To understand the geometric situation, consider the "signed distances" of the vertices of the triangle from the hue plane.</span></span> <span data-ttu-id="cc99a-893">Ne Calculez pas ces distances signées directement ; au lieu de cela, vous calculez les produits points des vecteurs de position des vertex avec le vecteur normal quantifié sur le plan.</span><span class="sxs-lookup"><span data-stu-id="cc99a-893">Do not calculate these signed distances directly; instead calculate the dot products of the position vectors of the vertices with the quantized normal vector to the plane.</span></span> <span data-ttu-id="cc99a-894">Plus précisément, lors de l’initialisation du plan de teinte, le vecteur normal quantifié est calculé comme suit.</span><span class="sxs-lookup"><span data-stu-id="cc99a-894">More specifically, during the initialization of the hue plane, the quantized normal vector is calculated as follows.</span></span>

<span data-ttu-id="cc99a-895">NormalVector = (ScaleAndTruncate (-Sin (teinte)), ScaleAndTruncate (COS (teinte)))</span><span class="sxs-lookup"><span data-stu-id="cc99a-895">NormalVector = (ScaleAndTruncate(-sin(hue)), ScaleAndTruncate(cos(hue)))</span></span>

<span data-ttu-id="cc99a-896">Notez que ce vecteur est un vecteur à deux dimensions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-896">Note that this vector is a two-dimensional vector.</span></span> <span data-ttu-id="cc99a-897">Vous pouvez utiliser un vecteur à deux dimensions, car le plan de teinte est vertical ; le troisième composant du vecteur normal est donc toujours égal à zéro.</span><span class="sxs-lookup"><span data-stu-id="cc99a-897">You can use a two-dimensional vector because the hue plane is vertical, so the third component of the normal vector is always zero.</span></span> <span data-ttu-id="cc99a-898">En outre, une table de recherche de produits point est initialisée pour avoir une entrée pour chaque vertex à partir des triangles de limite de gamme et le produit scalaire correspondant défini sur une valeur non valide.</span><span class="sxs-lookup"><span data-stu-id="cc99a-898">Moreover, a lookup table of dot products is initialized to have an entry for each vertex from the Gamut Boundary Triangles and the corresponding dot product set to an invalid value.</span></span>

<span data-ttu-id="cc99a-899">Au cours d’une opération d’intersection du plan de teinte avec un triangle, le produit scalaire de chaque vertex du triangle est recherché.</span><span class="sxs-lookup"><span data-stu-id="cc99a-899">During one operation of intersecting the hue plane with a triangle, the dot product of each vertex of the triangle is looked up.</span></span> <span data-ttu-id="cc99a-900">Si la valeur de la table de recherche est la valeur non valide, le produit scalaire est calculé à l’aide de l’expression suivante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-900">If the value in the lookup table is the invalid value, then the dot product is computed using the following expression.</span></span>

<span data-ttu-id="cc99a-901">NormalVector. a \* ScaleAndTruncate (vertex. a) + NormalVector. b \* ScaleAndTruncate (vertex. b)</span><span class="sxs-lookup"><span data-stu-id="cc99a-901">NormalVector.a\*ScaleAndTruncate(vertex.a) + NormalVector.b\*ScaleAndTruncate(vertex.b)</span></span>

<span data-ttu-id="cc99a-902">Là encore, le composant J-Component du vertex n’est jamais utilisé, car le vecteur normal est horizontal.</span><span class="sxs-lookup"><span data-stu-id="cc99a-902">Again, the J-component of the vertex is never used, because the normal vector is horizontal.</span></span> <span data-ttu-id="cc99a-903">Ce produit est ensuite enregistré dans la table de recherche afin qu’il ne soit pas nécessaire de le recalculer si le produit scalaire du vertex est interrogé ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="cc99a-903">This dot product is then saved in the lookup table so that it doesn't have to be computed again if the dot product of the vertex is queried later.</span></span>

<span data-ttu-id="cc99a-904">La mise en cache permet de déterminer rapidement si une arête croise le plan, après que les produits points ont été représentées dans la table de recherche, qui est générée progressivement à mesure que les vertex sont traités.</span><span class="sxs-lookup"><span data-stu-id="cc99a-904">Caching allows for a quick determination of whether an edge intersects the plane, after the dot products are tabulated in the lookup table, which is built progressively as the vertices are processed.</span></span>

![Diagramme qui montre l’intersection du plan de teinte avec un triangle.](images/gmmp-image114.jpg)

<span data-ttu-id="cc99a-906">**Figure 28** : intersection entre le plan de teint et un triangle</span><span class="sxs-lookup"><span data-stu-id="cc99a-906">**Figure 28** : Intersecting the hue plane with a triangle</span></span>

<span data-ttu-id="cc99a-907">Pour le triangle de la figure 28 afin d’intersecter le plan de teinte dans un segment de ligne non dégénérée, les produits points des vertex doivent être dans l’un des modèles suivants, lorsqu’ils sont triés dans l’ordre croissant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-907">For the triangle in Figure 28 to intersect the hue plane in a non-degenerate line segment, the dot products of the vertices must be in one of the following patterns, when sorted in ascending order.</span></span>

<span data-ttu-id="cc99a-908">0, 0, +; -, 0, 0 ; -, 0, +; -,-,+; -,+,+</span><span class="sxs-lookup"><span data-stu-id="cc99a-908">0,0,+; -,0,0; -,0,+; -,-,+; -,+,+</span></span>

<span data-ttu-id="cc99a-909">Un point de terminaison du segment de ligne se produit lorsque le plan est croisé par un bord avec des vertex qui ont des signes différents dans le produit scalaire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-909">An end point of the line segment arises when the plane is intersected by an edge with vertices that have different signs in the dot product.</span></span> <span data-ttu-id="cc99a-910">Si le signe est égal à zéro, le sommet se situe à droite sur le plan, et l’intersection entre le bord et le plan est le sommet lui-même.</span><span class="sxs-lookup"><span data-stu-id="cc99a-910">If the sign is zero, then the vertex lies right on the plane, and the intersection of the edge with the plane is the vertex itself.</span></span> <span data-ttu-id="cc99a-911">Notez également que les cas 0, 0, 0 ; -,-, 0 ; 0, +, + ne sont pas signalés.</span><span class="sxs-lookup"><span data-stu-id="cc99a-911">Note also that the cases 0,0,0; -,-,0; 0,+,+ are not reported.</span></span> <span data-ttu-id="cc99a-912">Le premier cas (0, 0, 0) signifie que le triangle entier se trouve sur le plan.</span><span class="sxs-lookup"><span data-stu-id="cc99a-912">The first case (0,0,0) means the whole triangle lies on the plane.</span></span> <span data-ttu-id="cc99a-913">Cela n’est pas signalé, car chaque bord du triangle doit appartenir à un triangle voisin qui ne se trouve pas également entièrement sur le plan.</span><span class="sxs-lookup"><span data-stu-id="cc99a-913">This is not reported because each edge of the triangle should belong to a neighboring triangle that does not also lie entirely on the plane.</span></span> <span data-ttu-id="cc99a-914">Le bord est signalé quand ce triangle est pris en compte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-914">The edge will be reported when that triangle is considered.</span></span> <span data-ttu-id="cc99a-915">Les deux autres cas (-,-, 0 et 0, +, +) correspondent à la configuration géométrique selon laquelle le triangle touche le plan dans un sommet.</span><span class="sxs-lookup"><span data-stu-id="cc99a-915">The other two cases (-,-,0 and 0,+,+) correspond to the geometric configuration that the triangle touches the plane in one vertex.</span></span> <span data-ttu-id="cc99a-916">Ces cas ne sont pas signalés, car ils ne donnent pas lieu à un segment de ligne non dégénérée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-916">These cases are not reported because they don't give rise to a non-degenerate line segment.</span></span>

<span data-ttu-id="cc99a-917">L’algorithme précédent détermine quand calculer une intersection entre un bord du triangle et le plan de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-917">The preceding algorithm determines when to calculate an intersection between an edge of the triangle and the hue plane.</span></span> <span data-ttu-id="cc99a-918">Une fois qu’une arête est déterminée, l’intersection est calculée à l’aide des équations paramétriques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-918">After an edge is determined, the intersection is calculated using parametric equations.</span></span> <span data-ttu-id="cc99a-919">Si l’un des points est égal à zéro, l’intersection est le vertex lui-même, donc aucun calcul n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-919">If one of the dot products is zero, the intersection is the vertex itself, so no calculation is necessary.</span></span> <span data-ttu-id="cc99a-920">En supposant que les deux produits point des sommets de l’arête ne sont pas nuls, vertex1 est le vertex avec un point *négatif* dotProduct1 produit ; et Vertex2 est le vertex avec un point *positif* dotProduct2.</span><span class="sxs-lookup"><span data-stu-id="cc99a-920">Assuming that both dot products of the vertices of the edge are non-zero , vertex1 is the vertex with *negative* dot product dotProduct1; and vertex2 is the vertex with *positive* dot product dotProduct2.</span></span> <span data-ttu-id="cc99a-921">Cet ordre est important pour s’assurer que le point d’intersection calculé ne dépend pas de la façon dont l’ordre des sommets s’affiche dans la représentation de l’arête.</span><span class="sxs-lookup"><span data-stu-id="cc99a-921">This order is important to ensure that the calculated intersection point does not depend on how the ordering of the vertices appears in the representation of the edge.</span></span> <span data-ttu-id="cc99a-922">Le concept géométrique de l’arête est symétrique par rapport à ses sommets.</span><span class="sxs-lookup"><span data-stu-id="cc99a-922">The geometric concept of the edge is symmetrical with respect to its vertices.</span></span> <span data-ttu-id="cc99a-923">L’aspect de calcul de l’utilisation des équations paramétriques de l’arête présente l’asymétrie (le choix du sommet de départ), qui peut fournir un point d’intersection légèrement différent en raison du bruit numérique et du conditionnement des équations linéaires à résoudre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-923">The computational aspect of using parametric equations of the edge introduces asymmetry (choice of starting vertex), which may give a slightly different intersection point due to numeric noise and conditioning of the linear equations to be solved.</span></span> <span data-ttu-id="cc99a-924">Ceci dit, le point d’intersection, intersection, est donné par le code suivant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-924">With this said, the intersection point, intersection,is given by the following.</span></span>

<span data-ttu-id="cc99a-925">t = dotProduct1/(dotProduct1-dotProduct2)</span><span class="sxs-lookup"><span data-stu-id="cc99a-925">t = dotProduct1/(dotProduct1 - dotProduct2)</span></span>

<span data-ttu-id="cc99a-926">ensembles. J = vertex1. J + t \* (Vertex2. J-vertex1. J</span><span class="sxs-lookup"><span data-stu-id="cc99a-926">intersection.J = vertex1.J + t \* (vertex2.J - vertex1.J)</span></span>

<span data-ttu-id="cc99a-927">intersection. a = vertex1. a + t \* (Vertex2. a-vertex1. a)</span><span class="sxs-lookup"><span data-stu-id="cc99a-927">intersection.a = vertex1.a + t \* (vertex2.a - vertex1.a)</span></span>

<span data-ttu-id="cc99a-928">intersection. b = vertex1. b + t \* (Vertex2. b-vertex1. b)</span><span class="sxs-lookup"><span data-stu-id="cc99a-928">intersection.b = vertex1.b + t \* (vertex2.b - vertex1.b)</span></span>

### <a name="gamut-operation-checkgamut-continued"></a><span data-ttu-id="cc99a-929">Opération de gamme : CheckGamut (suite)</span><span class="sxs-lookup"><span data-stu-id="cc99a-929">Gamut Operation: CheckGamut (continued)</span></span>

<span data-ttu-id="cc99a-930">L’algorithme géométrique de base utilisé pour la vérification de la gamme est de compter le nombre de croisements de rayon.</span><span class="sxs-lookup"><span data-stu-id="cc99a-930">The basic geometric algorithm used for gamut checking is to count the number of ray crossings.</span></span> <span data-ttu-id="cc99a-931">Pour un point de requête donné, envisagez un rayon commençant par le point de requête et pointant vers le haut (direction J).</span><span class="sxs-lookup"><span data-stu-id="cc99a-931">For a given query point, consider a ray starting with the query point and pointing upwards (J-direction).</span></span> <span data-ttu-id="cc99a-932">Compter le nombre de fois que ce rayon traverse la limite de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-932">Count the number of times this ray crosses the gamut boundary.</span></span> <span data-ttu-id="cc99a-933">Si ce nombre est pair, le point de requête est hors gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-933">If this number is even, then the query point is out-of-gamut.</span></span> <span data-ttu-id="cc99a-934">Si ce nombre est impair, le point est à l’intérieur de.</span><span class="sxs-lookup"><span data-stu-id="cc99a-934">If this number is odd, the point is inside.</span></span> <span data-ttu-id="cc99a-935">En principe, cet algorithme peut être implémenté en 3D, il est généralement dû à des difficultés provoquées par des situations dégénérées, telles que le rayon (en partie) sur un triangle limite, ou un degeneracy dimensionnel inférieur, tel que le rayon à l’extrémité d’un triangle de limite.</span><span class="sxs-lookup"><span data-stu-id="cc99a-935">In principle, this algorithm can be implemented in 3-D, it is generally plagued by difficulties caused by degenerate situations, such as the ray lying (partly) on a boundary triangle, or lower dimensional degeneracy, such as the ray lying (partly) on an edge of a boundary triangle.</span></span> <span data-ttu-id="cc99a-936">Même en 2D, vous devez gérer ces situations de dégénération ; mais le problème est plus simple et a été résolu de manière satisfaisante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-936">Even in 2-D, you have to deal with these degenerate situations; but the problem is simpler and has been addressed in a satisfactory manner.</span></span> <span data-ttu-id="cc99a-937">Consultez \[ O’Rourke \] .</span><span class="sxs-lookup"><span data-stu-id="cc99a-937">See \[O'Rourke\].</span></span>

<span data-ttu-id="cc99a-938">Pour un point d’entrée donné Jab, déterminez son angle de nuance h comme suit.</span><span class="sxs-lookup"><span data-stu-id="cc99a-938">For a given input point Jab, determine its hue angle h as follows.</span></span>

<span data-ttu-id="cc99a-939">h = ATAN (b/a),</span><span class="sxs-lookup"><span data-stu-id="cc99a-939">h = atan(b/a),</span></span>

<span data-ttu-id="cc99a-940">Initialisez le plan de teinte, puis déterminez les éléments de ligne de limite correspondant à ce plan de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-940">Initialize the hue plane, and then determine the Boundary Line Elements corresponding to this hue plane.</span></span> <span data-ttu-id="cc99a-941">Étant donné que les éléments de ligne de limite sont pertinents uniquement s’ils croisent le rayon vers le haut, configurez un filtre de triangle pour supprimer les triangles qui donnent des éléments de ligne qui n’intersectent pas le rayon vers le haut.</span><span class="sxs-lookup"><span data-stu-id="cc99a-941">Because the Boundary Line Elements are only relevant if they intersect the upward ray, set up a Triangle Filter to remove triangles that give line elements that definitely will not intersect the upward ray.</span></span> <span data-ttu-id="cc99a-942">Dans ce cas, envisagez le cadre englobant du triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-942">In this case, consider the bounding box of the triangle.</span></span> <span data-ttu-id="cc99a-943">Le rayon vers le haut ne croise pas le triangle si le point de requête est en dehors de la « Shadow » convertie par le cadre englobant si une source de lumière était juste au-dessus.</span><span class="sxs-lookup"><span data-stu-id="cc99a-943">The upward ray will not intersect the triangle if the query point is outside the "shadow" cast by the bounding box if a light source was directly above.</span></span> <span data-ttu-id="cc99a-944">Gonflez-la légèrement avec une tolérance préfixée pour autoriser le bruit numérique afin de ne pas lever par inadvertance des triangles qui pourraient donner des éléments de ligne utiles.</span><span class="sxs-lookup"><span data-stu-id="cc99a-944">Inflate this slightly with a pre-fixed tolerance to allow for numeric noise so that you don't inadvertently throw away triangles that might give useful line elements.</span></span> <span data-ttu-id="cc99a-945">Le résultat est le cylindre rectangulaire semi-infini présenté dans la figure 29.</span><span class="sxs-lookup"><span data-stu-id="cc99a-945">The result is the semi-infinite rectangular cylinder shown in Figure 29.</span></span> <span data-ttu-id="cc99a-946">Il est possible d’implémenter efficacement le point de requête à l’intérieur ou à l’extérieur de ce cylindre à l’aide d’inégalités simples.</span><span class="sxs-lookup"><span data-stu-id="cc99a-946">Checking whether the query point is inside or outside this cylinder can be efficiently implemented using simple inequalities.</span></span>

![Affiche le filtre triangulaire pour CheckGamut.](images/gmmp-image116.jpg)

<span data-ttu-id="cc99a-948">**Figure 29** : filtre de triangle pour CheckGamut</span><span class="sxs-lookup"><span data-stu-id="cc99a-948">**Figure 29** : Triangle Filter for CheckGamut</span></span>

<span data-ttu-id="cc99a-949">CheckGamut comporte trois composants de gamme de l’opération : *données traitées internes*,*processeur des éléments de ligne* et adaptateur de *sortie*.</span><span class="sxs-lookup"><span data-stu-id="cc99a-949">CheckGamut has three gamut operation specific components: *Internal Processed Data*,*Line Element Processor*, and *Output Adaptor*.</span></span> <span data-ttu-id="cc99a-950">Les *données traitées internes* sont une liste d’éléments de ligne traités par le *processeur d’éléments de ligne*.</span><span class="sxs-lookup"><span data-stu-id="cc99a-950">The *Internal Processed Data* is a list of line elements that have been processed by *Line Element Processor*.</span></span> <span data-ttu-id="cc99a-951">Dans ce cas, le *processeur d’élément de ligne* ajoute simplement un élément de ligne à la liste.</span><span class="sxs-lookup"><span data-stu-id="cc99a-951">In this case, the *Line Element Processor* simply adds a line element to the list.</span></span> <span data-ttu-id="cc99a-952">La structure de données interne pour les *données traitées internes* peut être une liste liée ou un tableau dont la taille peut croître.</span><span class="sxs-lookup"><span data-stu-id="cc99a-952">The internal data structure for *Internal Processed Data* can be either a linked list or an array that can grow in size.</span></span>

<span data-ttu-id="cc99a-953">L' *adaptateur de sortie* est un module qui accède à la liste des éléments de ligne, détermine si un élément de ligne croise le rayon vers le haut (nombre 1) ou non (nombre 0).</span><span class="sxs-lookup"><span data-stu-id="cc99a-953">The *Output Adaptor* is a module that accesses the list of line elements, determines if a line element crosses the upward ray (count 1) or not (count 0).</span></span> <span data-ttu-id="cc99a-954">L’addition de tous ces nombres donne un nombre total.</span><span class="sxs-lookup"><span data-stu-id="cc99a-954">Summing all these counts gives a total count.</span></span> <span data-ttu-id="cc99a-955">L' *adaptateur de sortie* génère en fin de compte une réponse de « Oui » (in-large) ou « no » (non imprimable), selon que le nombre total est impair ou même.</span><span class="sxs-lookup"><span data-stu-id="cc99a-955">The *Output Adaptor* ultimately outputs an answer of "yes" (in-gamut) or "no" (out-of-gamut), depending on whether the total count is odd or even.</span></span> <span data-ttu-id="cc99a-956">L’étape où vous déterminez si un élément de ligne franchit le rayon vers le haut mérite une attention, car c’est là que se trouve le problème de degeneracy et que le problème de surcomptage survient.</span><span class="sxs-lookup"><span data-stu-id="cc99a-956">The step where you determine if a line element crosses the upward ray deserves some attention because this is where the problem of degeneracy arises and also the problem of over-counting arises.</span></span> <span data-ttu-id="cc99a-957">À la suite de \[ O’Rourke \] , pour qu’un élément de ligne croise le rayon, le point de terminaison droit (le point de terminaison avec une plus grande chrominance) doit être strictement sur le côté droit du rayon.</span><span class="sxs-lookup"><span data-stu-id="cc99a-957">Following \[O'Rourke\], for a line element to cross the ray, the right end point (the end point with larger chroma) must be strictly on the right side of the ray.</span></span> <span data-ttu-id="cc99a-958">Cela garantit que, si un point de terminaison se trouve exactement sur le rayon, il n’est compté qu’une seule fois.</span><span class="sxs-lookup"><span data-stu-id="cc99a-958">This guarantees that, if an end point ever lies exactly on the ray, it is only counted one time.</span></span> <span data-ttu-id="cc99a-959">La même règle résout également la situation dégénérée dans laquelle l’élément de ligne se trouve exactement sur le rayon.</span><span class="sxs-lookup"><span data-stu-id="cc99a-959">The same rule also solves the degenerate situation where the line element lies exactly on the ray.</span></span> <span data-ttu-id="cc99a-960">Vous n’incrémentez pas le nombre pour cet élément de ligne.</span><span class="sxs-lookup"><span data-stu-id="cc99a-960">You do not increment the count for this line element.</span></span>

<span data-ttu-id="cc99a-961">La figure 30 montre les éléments de ligne résultants d’un exemple de gamme avec le point de requête à différentes positions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-961">Figure 30 shows the resulting line elements of a sample gamut with the query point in various positions.</span></span>

![Diagramme qui montre les éléments de ligne résultants d’un échantillon de gamme avec le point de requête à différentes positions.](images/gmmp-image118.jpg)

<span data-ttu-id="cc99a-963">**Figure 30** : fonctionnement de CheckGamut</span><span class="sxs-lookup"><span data-stu-id="cc99a-963">**Figure 30** : How CheckGamut works</span></span>

### <a name="minimum-color-difference-gamut-mapping"></a><span data-ttu-id="cc99a-964">Mappage de la gamme des couleurs de différence minimale</span><span class="sxs-lookup"><span data-stu-id="cc99a-964">Minimum Color Difference Gamut Mapping</span></span>

<span data-ttu-id="cc99a-965">Le mappage de la gamme de couleurs de différence minimale, MinDEMap, a une spécification simple : si une couleur est dans la gamme, ne rien faire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-965">The Minimum Color Difference Gamut Mapping, MinDEMap, has a simple specification: If a color is in-gamut, do nothing.</span></span> <span data-ttu-id="cc99a-966">Si une couleur est hors de la gamme, projetez-la sur le point le plus proche sur la limite de la gamme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-966">If a color is out-of-gamut, project it to the "nearest" point on the gamut boundary.</span></span> <span data-ttu-id="cc99a-967">Le mot clé « le plus proche » n’est pas bien défini tant que vous n’avez pas spécifié l’équation de différence de couleur à utiliser.</span><span class="sxs-lookup"><span data-stu-id="cc99a-967">The keyword "nearest" is not well-defined until you specify which color difference equation to use.</span></span> <span data-ttu-id="cc99a-968">Dans la pratique, pour faciliter et accélérer le calcul, la distance euclidienne de l’espace d’apparence de couleur choisi, ou une variante de celle-ci, est utilisée comme mesure de différence de couleur.</span><span class="sxs-lookup"><span data-stu-id="cc99a-968">In practice, to make computation easier and faster, the Euclidean distance of the chosen color appearance space, or a variant of it, is used as the color difference metric.</span></span> <span data-ttu-id="cc99a-969">L’avantage de la mesure euclidienne est qu’elle est compatible avec le produit scalaire de l’espace, ce qui permet d’utiliser l’algèbre linéaire.</span><span class="sxs-lookup"><span data-stu-id="cc99a-969">The advantage of the Euclidean metric is that it is compatible with the dot product of the space, which makes it possible to use linear algebra.</span></span> <span data-ttu-id="cc99a-970">En détail, si un « produit scalaire » est défini dans l’espace, une distance peut être définie comme la racine carrée du produit scalaire du vecteur de différence avec lui-même.</span><span class="sxs-lookup"><span data-stu-id="cc99a-970">In detail, if a "dot product" is defined in the space, then a distance can be defined as the square root of the dot product of the difference vector with itself.</span></span> <span data-ttu-id="cc99a-971">Un produit scalaire peut généralement être défini par un tableau 3x3 positif positif A.</span><span class="sxs-lookup"><span data-stu-id="cc99a-971">A dot product can generally be defined by a positive definite 3x3 matrix A.</span></span>

<span data-ttu-id="cc99a-972">u ? v = u <sub>T</sub> AV</span><span class="sxs-lookup"><span data-stu-id="cc99a-972">u?v = u <sub>T</sub> Av</span></span>

<span data-ttu-id="cc99a-973">la partie droite est la multiplication habituelle de la matrice.</span><span class="sxs-lookup"><span data-stu-id="cc99a-973">where the right hand side is the usual matrix multiplication.</span></span> <span data-ttu-id="cc99a-974">Si un est la matrice d’identité, le produit scalaire standard est récupéré.</span><span class="sxs-lookup"><span data-stu-id="cc99a-974">If A is the identity matrix, the standard dot product is recovered.</span></span> <span data-ttu-id="cc99a-975">Dans la pratique, si Jab est l’espace colorimétrique, vous ne souhaitez pas mélanger les composants, de sorte qu’une matrice diagonale autre que la matrice d’identité peut être utilisée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-975">In practice, if Jab is the color space, you do not want to mix up the components, so a diagonal matrix other than the identity matrix can be used.</span></span> <span data-ttu-id="cc99a-976">En outre, vous souhaiterez peut-être conserver l’échelle de a et de b sans changer afin que la mesure de la teinte soit conservée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-976">In addition, you might want to keep the scale on a and b unchanged so that the measure of hue is preserved.</span></span> <span data-ttu-id="cc99a-977">Une variante utile du produit euclidienne dot standard est donc la suivante.</span><span class="sxs-lookup"><span data-stu-id="cc99a-977">So a useful variation of the standard Euclidean dot product is the following.</span></span>

<span data-ttu-id="cc99a-978">w <sub>j</sub> (composant de vous) (composant j de v) + (un composant de vous) (un composant de v) + (composant b de vous) (composant b de v)</span><span class="sxs-lookup"><span data-stu-id="cc99a-978">w <sub>J</sub> (J component of u)(J component of v) + (a component of u)(a component of v) + (b component of u)(b component of v)</span></span>

<span data-ttu-id="cc99a-979">où w <sub>J</sub> est un nombre positif.</span><span class="sxs-lookup"><span data-stu-id="cc99a-979">where w <sub>J</sub> is a positive number.</span></span> <span data-ttu-id="cc99a-980">Une autre variante consiste à laisser w <sub>J</sub> varier avec le point de requête d’entrée :</span><span class="sxs-lookup"><span data-stu-id="cc99a-980">One further variation is to let w <sub>J</sub> vary with the input query point:</span></span>

<span data-ttu-id="cc99a-981">w <sub>j \ =</sub> w <sub>j</sub> (queryPoint)</span><span class="sxs-lookup"><span data-stu-id="cc99a-981">w <sub>J\ =</sub> w <sub>J</sub> (queryPoint)</span></span>

<span data-ttu-id="cc99a-982">Le résultat final est une mesure de distance qui est asymétrique en ce qui concerne les deux points, et avec différents poids relatifs sur la clarté et la chrominance ou la teinte que le point de requête d’entrée varie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-982">The end result is a measure of distance that is asymmetric with respect to the two points, and with different relative weights on lightness and chroma or hue as the input query point varies.</span></span> <span data-ttu-id="cc99a-983">Cela est conforme à quelques observations sur la perception de la couleur humaine selon laquelle les différences de couleur ne sont pas pondérées de manière égale dans toutes les dimensions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-983">This is in accordance with some observations about human color perception that color differences are not weighted equally in all dimensions.</span></span> <span data-ttu-id="cc99a-984">Il a été constaté que les gens sont moins sensibles aux différences de luminosité que les différences de teinte et de chrominance.</span><span class="sxs-lookup"><span data-stu-id="cc99a-984">It has been found that people are less sensitive to differences in lightness than they are to differences in hue and chroma.</span></span>

<span data-ttu-id="cc99a-985">La fonction Weight suivante est utile.</span><span class="sxs-lookup"><span data-stu-id="cc99a-985">The following weight function is useful.</span></span>

<span data-ttu-id="cc99a-986">w <sub>J</sub> = k ₂-k ₁ (C-c m ₐ ₓ) n</span><span class="sxs-lookup"><span data-stu-id="cc99a-986">w <sub>J</sub> = k ₂ - k ₁ (C - C ₘₐₓ ) ₙ</span></span>

<span data-ttu-id="cc99a-987">où k ₂ = 1, k ₁ = 0,75/(C m ₐ ₓ) n, C m ₐ ₓ = 100, n = 2 et C est le plus petit de Chroma du point de requête et C m ₐ ₓ.</span><span class="sxs-lookup"><span data-stu-id="cc99a-987">where k ₂ = 1, k ₁ = 0.75/(C ₘₐₓ ) ₙ, C ₘₐₓ = 100, n = 2 and C is the smaller of chroma of the query point and C ₘₐₓ.</span></span>

<span data-ttu-id="cc99a-988">pour qu’un poids de 0,25 soit placé sur le terme J lorsque Chroma est égal à zéro et un poids de 1 lorsque Chroma est 100.</span><span class="sxs-lookup"><span data-stu-id="cc99a-988">so that a weight of 0.25 is put on the J term when chroma is zero, and a weight of 1 when chroma is 100.</span></span> <span data-ttu-id="cc99a-989">La tendance à placer moins de poids sur J lorsque Chroma est petit et plus poids sur J lorsque Chroma est important suit l’utilisation recommandée pour CMC et CIEDE2000.</span><span class="sxs-lookup"><span data-stu-id="cc99a-989">The trend of putting less weight on J when chroma is small, and more weight on J when chroma is large follows the recommended usage for CMC and CIEDE2000.</span></span>

![Graphique qui affiche la fonction Weight sur le composant J de la métrique.](images/gmmp-image119.png)

<span data-ttu-id="cc99a-991">**Figure 31** : fonction Weight sur le composant J de la métrique</span><span class="sxs-lookup"><span data-stu-id="cc99a-991">**Figure 31** : The weight function on the J component of the metric</span></span>

<span data-ttu-id="cc99a-992">Utilisez l’espace jab pour l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-992">Use Jab space for the following example.</span></span> <span data-ttu-id="cc99a-993">Le calcul est requis pour effectuer des recherches dans tous les triangles de limite afin de déterminer le point le plus proche dans la mesure euclidienne.</span><span class="sxs-lookup"><span data-stu-id="cc99a-993">It is computationally demanding to search through all the boundary triangles to determine the closest point in the Euclidean metric.</span></span> <span data-ttu-id="cc99a-994">Vous trouverez ci-dessous une approche simple pour rendre ce processus aussi efficace que possible, sans introduire d’hypothèses supplémentaires susceptibles d’accélérer le processus, mais également de se retrouver uniquement dans une réponse approximative.</span><span class="sxs-lookup"><span data-stu-id="cc99a-994">The following is a simple approach to make this process as efficient as possible, without introducing additional assumptions that may speed up the process but also end up in only an approximate answer.</span></span> <span data-ttu-id="cc99a-995">Tout d’abord, il est nécessaire de comprendre la procédure géométrique de projection d’un point sur le triangle donné.</span><span class="sxs-lookup"><span data-stu-id="cc99a-995">First, it is necessary to understand the geometric procedure of projecting a point onto the given triangle.</span></span> <span data-ttu-id="cc99a-996">Une description est indiquée ici.</span><span class="sxs-lookup"><span data-stu-id="cc99a-996">A description is given here.</span></span>

<span data-ttu-id="cc99a-997">Une projection orthogonale sur le plan infini contenant le triangle est exécutée pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="cc99a-997">An orthogonal projection onto the infinite plane containing the triangle is first performed.</span></span> <span data-ttu-id="cc99a-998">La distance la plus petite entre le point de requête et le plan peut être déterminée en deux étapes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-998">The shortest distance of the query point from the plane can be determined in two steps.</span></span>

<span data-ttu-id="cc99a-999">**(a)** calculer le vecteur normal de l’unité sur le triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-999">**(a)** Calculate the unit normal vector to the triangle.</span></span>

<span data-ttu-id="cc99a-1000">**(b)** calculer le produit scalaire du vecteur normal de l’unité et un vecteur formé à partir du point de requête et d’un point sur le triangle ; autrement dit, l’un de ses sommets.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1000">**(b)** Calculate the dot product of the unit normal vector and a vector formed from the query point and a point on the triangle; that is, one of its vertices.</span></span> <span data-ttu-id="cc99a-1001">Étant donné que le vecteur normal a une longueur d’unité, la valeur absolue de ce produit scalaire correspond à la distance entre le point de requête et le plan.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1001">Because the normal vector has unit length, the absolute value of this dot product is the distance of the query point from the plane.</span></span>

<span data-ttu-id="cc99a-1002">Le point projeté n’est peut-être pas la réponse, car il peut se trouver à l’extérieur du triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1002">The projected point might not be the answer, because it might lie outside the triangle.</span></span> <span data-ttu-id="cc99a-1003">Par conséquent, vous devez d’abord effectuer une vérification.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1003">So, you must perform a check first.</span></span> <span data-ttu-id="cc99a-1004">Le calcul est équivalent au calcul des coordonnées Barycentric du point projeté par rapport au triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1004">The calculation is equivalent to calculating the barycentric coordinates of the projected point relative to the triangle.</span></span> <span data-ttu-id="cc99a-1005">Si le point projeté est déterminé comme étant à l’intérieur du triangle, il s’agit de la réponse.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1005">If the projected point is determined to be inside the triangle, it is the answer.</span></span> <span data-ttu-id="cc99a-1006">Si ce n’est pas le cas, le point le plus proche est acquis sur l’un des bords du triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1006">If not, the closest point is acquired on one of the edges of the triangle.</span></span> <span data-ttu-id="cc99a-1007">Effectuez une recherche sur chacun des trois bords.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1007">Perform a search on each of the three edges.</span></span> <span data-ttu-id="cc99a-1008">La détermination de la projection du point de requête sur un bord est un processus similaire à la projection sur le triangle, mais une dimension moins.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1008">Determining the projection of the query point onto an edge is a process similar to projection onto the triangle, but one dimension less.</span></span> <span data-ttu-id="cc99a-1009">Une projection orthogonale est d’abord calculée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1009">An orthogonal projection is first calculated.</span></span> <span data-ttu-id="cc99a-1010">Si le point projeté se trouve sur le bord, il s’agit de la réponse.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1010">If the projected point lies on the edge, it is the answer.</span></span> <span data-ttu-id="cc99a-1011">Si ce n’est pas le cas, le point le plus proche est acquis sur l’un des deux points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1011">If not, the closest point is acquired on one of the two end points.</span></span> <span data-ttu-id="cc99a-1012">Effectuez une recherche sur les deux points de terminaison ; autrement dit, calculez la distance entre chaque point de requête et comparez celle qui est la plus petite.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1012">Perform a search on the two end points; that is, calculate the distance of query point from each one, and compare which one is smaller.</span></span>

<span data-ttu-id="cc99a-1013">Un examen minutieux révèle qu’il y a beaucoup de recherches répétées lorsque vous parcourez tous les triangles, car une arête est toujours partagée par deux triangles et un sommet partagé par au moins trois bords.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1013">Careful examination reveals that there is a lot of repeated searching when you go through all the triangles because an edge is always shared by two triangles, and a vertex shared by at least three edges.</span></span> <span data-ttu-id="cc99a-1014">En outre, vous n’êtes pas très intéressé par la recherche du point le plus proche d’un triangle particulier. au lieu de cela, vous êtes intéressé par la recherche du point le plus proche de la limite de gamme entière.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1014">In addition, you are not much interested in finding the closest point to one particular triangle; instead you are interested in finding the closest point to the whole gamut boundary.</span></span> <span data-ttu-id="cc99a-1015">Toutefois, un triangle particulier est celui dans lequel cette est effectuée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1015">However,one particular triangle would be the one in which this is achieved.</span></span> <span data-ttu-id="cc99a-1016">Il existe deux stratégies que vous pouvez utiliser pour accélérer la recherche.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1016">There are two strategies that you can use to speed up the search.</span></span>

<span data-ttu-id="cc99a-1017">**Stratégie I**. Chaque vertex sera traité, au plus une fois.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1017">**Strategy I**. Each vertex will be processed, at most, once.</span></span> <span data-ttu-id="cc99a-1018">Chaque Edge sera traité, au plus une fois.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1018">Each edge will be processed, at most, once.</span></span>

<span data-ttu-id="cc99a-1019">**Stratégie II**.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1019">**Strategy II**.</span></span> <span data-ttu-id="cc99a-1020">À tout moment dans la recherche, vous avez le meilleur candidat avec la distance la plus appropriée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1020">At any point in the search, you have a best candidate with the corresponding best distance.</span></span> <span data-ttu-id="cc99a-1021">Si vous pouvez déterminer, par une vérification rapide, qu’un triangle ne peut pas donner une meilleure distance, il est inutile de poursuivre le calcul.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1021">If you can determine, by a quick check, that a triangle is not capable of giving a better distance, there is no need to continue the calculation further.</span></span> <span data-ttu-id="cc99a-1022">Vous n’avez pas besoin du point et de la distance les plus proches pour ce triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1022">You do not need the closest point and distance for this triangle.</span></span>

![Diagramme qui montre le déroulement du démappage minimal.](images/gmmp-image120.png)

<span data-ttu-id="cc99a-1024">**Figure 32** : configuration minimale des schémas de mappage</span><span class="sxs-lookup"><span data-stu-id="cc99a-1024">**Figure 32** : Minimum DE Mapping schematics</span></span>

<span data-ttu-id="cc99a-1025">La figure 32 montre le déroulement général de la logique du mappage de gammes MinDEMap.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1025">Figure 32 shows the general flow of logic for the gamut map MinDEMap.</span></span> <span data-ttu-id="cc99a-1026">Pour un point de requête, la fonction CheckGamut est appelée en premier.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1026">For a query point, the CheckGamut function is first invoked.</span></span> <span data-ttu-id="cc99a-1027">Si le point est dans la gamme, la carte est une absence d’opération.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1027">If the point is in-gamut, the map is a no-op.</span></span> <span data-ttu-id="cc99a-1028">Si le point est hors de la gamme, appelez ProjectPointToBoundary.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1028">If the point is out-of-gamut, call ProjectPointToBoundary.</span></span> <span data-ttu-id="cc99a-1029">Passons maintenant à la figure 33.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1029">Now move on to Figure 33.</span></span> <span data-ttu-id="cc99a-1030">À ce stade, il est supposé que les valeurs suivantes ont été calculées.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1030">At this point, it is assumed that the following values have been computed.</span></span>

<span data-ttu-id="cc99a-1031">**(a)** vecteur normal d’unité à chaque triangle de limite de couleurs par rapport au produit scalaire standard.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1031">**(a)** Unit normal vector to each Gamut Boundary Triangle with respect to the standard dot product.</span></span>

<span data-ttu-id="cc99a-1032">**(b)** liste de vertex et liste d’arêtes, en plus de la liste de triangles.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1032">**(b)** Vertex list and edge list, in addition to the triangle list.</span></span>

![Diagramme qui affiche la routine « ProjectPointToBoundary ».](images/gmmp-image122.jpg)

<span data-ttu-id="cc99a-1034">**Figure 33** : routine ProjectPointToBoundary</span><span class="sxs-lookup"><span data-stu-id="cc99a-1034">**Figure 33** : The ProjectPointToBoundary routine</span></span>

<span data-ttu-id="cc99a-1035">Il s’agit d’une surcharge constante, qui aurait un coût réduit si des requêtes suffisantes pour cette limite de gamme sont effectuées.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1035">All these are constant overhead, and would have diminishing cost if sufficient queries to this gamut boundary are made.</span></span> <span data-ttu-id="cc99a-1036">En règle générale, c’est le cas lorsque vous générez un LUT de transformation d’un appareil vers un autre, où il n’y a que deux couleurs fixes, et la transformation LUT s’exécute par points sur la grille échantillonnée de manière uniforme.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1036">Usually, this is the case when you build a transform LUT from one device to another, where there are only two fixed gamuts, and the transform LUT runs through points on the uniformly sampled grid.</span></span> <span data-ttu-id="cc99a-1037">Vous précalculez les vecteurs normaux en ce qui concerne le produit scalaire standard, même si la notion de la perpendiculaire sera basée sur le produit scalaire pondéré, qui dépend du point de requête, comme expliqué précédemment.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1037">You pre-compute the normal vectors with respect to the standard dot product, even though the notion of perpendicularity will be based on the weighted dot product, which depends on the query point as explained previously.</span></span> <span data-ttu-id="cc99a-1038">En effet, un vecteur normal en ce qui concerne le produit scalaire pondéré peut être obtenu facilement à partir du vecteur normal en ce qui concerne le produit scalaire standard.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1038">The reason is because a normal vector with respect to the weighted dot product can be obtained easily from the normal vector with respect to the standard dot product.</span></span> <span data-ttu-id="cc99a-1039">Si n ₀ est un vecteur normal par rapport au produit scalaire standard,</span><span class="sxs-lookup"><span data-stu-id="cc99a-1039">If n ₀ is a normal vector with respect to the standard dot product, then</span></span>

<span data-ttu-id="cc99a-1040">n = (J-Component de n ₀/w <sub>J</sub>, un composant de n ₀, b-Component de n ₀)</span><span class="sxs-lookup"><span data-stu-id="cc99a-1040">n = (J-component of n ₀ /w <sub>J</sub>, a-component of n ₀, b-component of n ₀ )</span></span>

<span data-ttu-id="cc99a-1041">est perpendiculaire au triangle en ce qui concerne le produit scalaire pondéré.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1041">is normal to the triangle with respect to the weighted dot product.</span></span> <span data-ttu-id="cc99a-1042">En raison de cette relation, il est toujours bénéfique de précalculer n ₀, même s’il doit être ajusté en fonction du point de requête.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1042">Because of this relationship, it is still beneficial to pre-compute n ₀ even though it must be adjusted based on the query point.</span></span>

<span data-ttu-id="cc99a-1043">La routine ProjectPointToBoundary commence par la réinitialisation de l’historique traité des sommets et des bords.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1043">The ProjectPointToBoundary routine starts by resetting the "processed history" of the vertices and edges.</span></span> <span data-ttu-id="cc99a-1044">Il s’agit de tables d’indicateurs BOOLÉENs qui assurent le suivi de la visite d’un sommet ou d’un bord.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1044">These are tables of BOOLEAN flags that track whether a vertex or edge has been visited before.</span></span> <span data-ttu-id="cc99a-1045">Elle réinitialise également la variable ShortestDistance sur « Infinity », qui est la valeur encodée maximale dans le système de nombres à virgule flottante utilisé.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1045">It also resets the variable ShortestDistance to "INFINITY," which is the maximum encoded value in the floating-point number system used.</span></span> <span data-ttu-id="cc99a-1046">Elle s’exécute ensuite via une boucle, en recherchant le point le plus proche de chaque triangle à l’aide de l’appel ProcessTriangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1046">Then it runs through a loop, searching for the closest point from each triangle using the ProcessTriangle call.</span></span> <span data-ttu-id="cc99a-1047">ProcessTriangle est la routine permettant de mettre à jour la variable ShortestDistance et est clairement dans la boucle critique.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1047">ProcessTriangle is the routine to update the ShortestDistance variable and is clearly in the critical loop.</span></span> <span data-ttu-id="cc99a-1048">L’une des optimisations consiste à s’arrêter lorsque le résultat est suffisant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1048">One optimization is to stop when the result is good enough.</span></span> <span data-ttu-id="cc99a-1049">Après chaque appel à ProcessTriangle, la variable ShortestDistance est examinée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1049">After each call to ProcessTriangle, the variable ShortestDistance is examined.</span></span> <span data-ttu-id="cc99a-1050">S’il répond à un seuil prédéfini, vous pouvez arrêter.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1050">If it satisfies a predefined threshold, you can stop.</span></span> <span data-ttu-id="cc99a-1051">Le seuil prédéfini dépend de l’espace colorimétrique utilisé et de la précision requise du système d’imagerie des couleurs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1051">The predefined threshold is dependent on the color space used and on the required accuracy of the color imaging system.</span></span> <span data-ttu-id="cc99a-1052">Pour une application classique, vous ne souhaitez pas effectuer de travail inutile si la différence de couleur est inférieure à ce qui peut être déterminé par la vision humaine.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1052">For a typical application, you do not want to do unnecessary work if the color difference is less than what can be discerned by human vision.</span></span> <span data-ttu-id="cc99a-1053">Pour CIECAM02, cette différence de couleur est de 1.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1053">For CIECAM02, this color difference is 1.</span></span> <span data-ttu-id="cc99a-1054">Utilisez une valeur de seuil de 0,005 dans l’implémentation, toutefois, pour conserver la précision des calculs, car il peut s’agir uniquement d’une étape intermédiaire dans une chaîne de transformations.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1054">Use a threshold value of 0.005 in the implementation, however, to preserve the precision of computations, because this might be only an intermediate step in a chain of transforms.</span></span>

<span data-ttu-id="cc99a-1055">ProcessTriangle implémente la stratégie II précédente.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1055">ProcessTriangle implements the preceding Strategy II.</span></span> <span data-ttu-id="cc99a-1056">En obtenant un vecteur normal du vecteur normal d’unité précalculée au triangle en ce qui concerne le produit scalaire standard, il calcule la distance entre le point de requête et le plan infini contenant le triangle en formant le produit scalaire du vecteur normal d’unité et du queryVector, le vecteur à partir de l’un des sommets du triangle, vertex1, au point de requête. , queryPoint.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1056">Obtaining a normal vector from the pre-computed unit normal vector to the triangle with respect to the standard dot product, it computes the distance of the query point to the infinite plane containing the triangle by forming the dot product of the unit normal vector and the queryVector, the vector from one of the vertices of the triangle, vertex1, to the query point, queryPoint.</span></span>

<span data-ttu-id="cc99a-1057">queryVector = queryPoint-vertex1</span><span class="sxs-lookup"><span data-stu-id="cc99a-1057">queryVector = queryPoint - vertex1</span></span>

<span data-ttu-id="cc99a-1058">distance = \| normalVector \* queryVector \| / \| \| normalVector\|\|</span><span class="sxs-lookup"><span data-stu-id="cc99a-1058">distance = \| normalVector \* queryVector \|/\|\|normalVector\|\|</span></span>

<span data-ttu-id="cc99a-1059">Il s’agit d’un calcul relativement peu coûteux, et la distance est nécessaire pour effectuer d’autres calculs.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1059">This is a relatively inexpensive calculation, and the distance is required to carry out further calculations.</span></span> <span data-ttu-id="cc99a-1060">Si cette distance n’est pas inférieure à la distance la plus récente, ShortestDistance, ce triangle ne produira pas une plus grande distance, car il ne fournira pas de meilleure distance que le plan le contenant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1060">If this distance is not less than the current best distance, ShortestDistance, this triangle will not produce a better distance, because it will not give a better distance than the plane containing it.</span></span> <span data-ttu-id="cc99a-1061">Dans ce cas, vous retournez le contrôle à la boucle triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1061">In this case, you return control to the triangle loop.</span></span> <span data-ttu-id="cc99a-1062">Si la distance est inférieure à ShortestDistance, il est possible que vous ayez un point plus proche, si ce point se trouve à l’intérieur du triangle.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1062">If the distance is smaller than ShortestDistance, potentially, you have a closer point, if this point lies inside the triangle.</span></span> <span data-ttu-id="cc99a-1063">Vous devez effectuer des calculs « matériels » (bien qu’il ne s’agisse pas de l’algèbre linéaire) pour le déterminer.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1063">You must perform some "hard" calculations (though nothing beyond linear algebra) to determine that.</span></span> <span data-ttu-id="cc99a-1064">Si les deux autres sommets du triangle sont Vertex2 et vertex3, forment les vecteurs de base firstBasisVector et secondBasisVector.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1064">If the other two vertices of the triangle are vertex2 and vertex3, then form the basis vectors firstBasisVector and secondBasisVector.</span></span>

<span data-ttu-id="cc99a-1065">firstBasisVector = Vertex2-vertex1</span><span class="sxs-lookup"><span data-stu-id="cc99a-1065">firstBasisVector = vertex2 - vertex1</span></span>

<span data-ttu-id="cc99a-1066">secondBasisVector = vertex3-vertex1</span><span class="sxs-lookup"><span data-stu-id="cc99a-1066">secondBasisVector = vertex3 - vertex1</span></span>

<span data-ttu-id="cc99a-1067">Utilisez le système linéaire suivant d’équations pour résoudre les problèmes que vous et v.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1067">Use the following linear system of equations to solve for unknowns u and v.</span></span>

<span data-ttu-id="cc99a-1068">firstBasisVector \* queryVector = (firstBasisVector \* firstBasisVector) u + (firstBasisVector \* secondBasisVector) v</span><span class="sxs-lookup"><span data-stu-id="cc99a-1068">firstBasisVector \* queryVector = (firstBasisVector \* firstBasisVector)u + (firstBasisVector \* secondBasisVector)v</span></span>

<span data-ttu-id="cc99a-1069">secondBasisVector \* queryVector = (secondBasisVector \* firstBasisVector) u + (secondBasisVector \* secondBasisVector) v</span><span class="sxs-lookup"><span data-stu-id="cc99a-1069">secondBasisVector \* queryVector = (secondBasisVector \* firstBasisVector)u + (secondBasisVector \* secondBasisVector)v</span></span>

<span data-ttu-id="cc99a-1070">et les conditions pour que le point projeté se situe à l’intérieur du triangle sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="cc99a-1070">and the conditions for the projected point to lie inside the triangle are:</span></span>

<span data-ttu-id="cc99a-1071">0 ≤ u ≤ 1, 0 ≤ v ≤ 1 et u + v ≤ 1</span><span class="sxs-lookup"><span data-stu-id="cc99a-1071">0 ≤ u ≤ 1, 0 ≤ v ≤ 1 and u + v ≤ 1</span></span>

<span data-ttu-id="cc99a-1072">Après ce calcul, s’il est déterminé que le point projeté se trouve dans le triangle, vous avez trouvé un nouveau point le plus proche ; la distance que vous avez calculée au début correspond à la nouvelle distance la plus petite.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1072">After this calculation, if it is determined that the projected point lies within the triangle, then you have found a new closest point; the distance that you calculated at the beginning is the new shortest distance.</span></span> <span data-ttu-id="cc99a-1073">Dans ce cas, mettez à jour les variables ShortestDistance et ClosestPoint.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1073">In this case, update the variables ShortestDistance and ClosestPoint.</span></span> <span data-ttu-id="cc99a-1074">Si le point projeté se trouve en dehors du triangle, vous pouvez trouver un point plus proche sur l’un de ses bords.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1074">If the projected point lies outside the triangle, you might find a closer point on one of its edges.</span></span> <span data-ttu-id="cc99a-1075">Vous pouvez donc appeler la routine ProcessEdge sur chacun des trois bords.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1075">So, you can call the ProcessEdge routine on each of the three edges.</span></span>

![Diagramme qui montre le déroulement des routines ProcessEdge et ProcessVertex.](images/gmmp-image124.jpg)

<span data-ttu-id="cc99a-1077">**Figure 34** : routines ProcessEdge et ProcessVertex</span><span class="sxs-lookup"><span data-stu-id="cc99a-1077">**Figure 34** : ProcessEdge and ProcessVertex routines</span></span>

<span data-ttu-id="cc99a-1078">La routine ProcessEdge implémente la stratégie I, illustrée dans la figure 34.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1078">The ProcessEdge routine implements Strategy I, which is illustrated in Figure 34.</span></span> <span data-ttu-id="cc99a-1079">ProcessEdge commence par vérifier si le bord a été traité avant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1079">ProcessEdge starts by checking whether the edge has been processed before.</span></span> <span data-ttu-id="cc99a-1080">Dans ce cas, aucune autre action n’est effectuée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1080">If so, no further action is taken.</span></span> <span data-ttu-id="cc99a-1081">Si ce n’est pas le cas, il calcule la projection orthogonale du point de requête sur la ligne infinie contenant le bord.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1081">If not, it proceeds to calculate the orthogonal projection of the query point onto the infinite line containing the edge.</span></span> <span data-ttu-id="cc99a-1082">L’algèbre linéaire impliquée dans le calcul est semblable aux équations triangulaires précédentes.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1082">The linear algebra involved in the calculation is similar to the previous triangle equations.</span></span> <span data-ttu-id="cc99a-1083">Toutefois, le calcul est plus simple, mais il n’est pas décrit ici.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1083">However, the calculation is simpler, it is not described here.</span></span> <span data-ttu-id="cc99a-1084">Si le point projeté se trouve dans le bord, vous trouvez la distance entre le point projeté et le point de requête.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1084">If the projected point lies within the edge, you find the distance of the projected point from the query point.</span></span> <span data-ttu-id="cc99a-1085">Si cette distance est inférieure à ShortestDistance, vous avez trouvé un nouveau point le plus proche.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1085">If this distance is smaller than ShortestDistance, you have found a new closest point.</span></span> <span data-ttu-id="cc99a-1086">Mettez à jour à la fois ShortestDistance et ClosestPoint.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1086">Update both ShortestDistance and ClosestPoint.</span></span> <span data-ttu-id="cc99a-1087">Si le point projeté se trouve en dehors du bord, appelez ProcessVertex sur les deux points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1087">If the projected point lies outside the edge, call ProcessVertex on the two end points.</span></span> <span data-ttu-id="cc99a-1088">Avant de retourner le contrôle, mettez à jour l’historique du bord afin que ce bord soit marqué comme « traité ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-1088">Before returning control, update the edge history so that this edge is marked as "PROCESSED."</span></span>

<span data-ttu-id="cc99a-1089">Enfin, vous donnez une description de ProcessVertex.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1089">Finally, you give a description of ProcessVertex.</span></span> <span data-ttu-id="cc99a-1090">La routine ProjectVertex implémente également la stratégie I et gère une table d’historique des vertex.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1090">The ProjectVertex routine also implements Strategy I and maintains a vertex history table.</span></span> <span data-ttu-id="cc99a-1091">Comme illustré à la figure 34, il vérifie d’abord si le Vertex a été traité avant.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1091">As illustrated in Figure 34, it first checks whether the vertex has been processed before.</span></span> <span data-ttu-id="cc99a-1092">Dans ce cas, aucune autre action n’est effectuée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1092">If so, no further action is taken.</span></span> <span data-ttu-id="cc99a-1093">Si ce n’est pas le cas, elle calcule la distance entre le sommet et le point de requête.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1093">If not, it proceeds to calculate the distance of the vertex from the query point.</span></span> <span data-ttu-id="cc99a-1094">Si la distance est inférieure à ShortestDistance, mettez à jour ShortestDistance et ClosestPoint.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1094">If the distance is smaller than ShortestDistance, update both ShortestDistance and ClosestPoint.</span></span> <span data-ttu-id="cc99a-1095">À la fin, il met à jour l’historique des vertex afin que ce vertex soit marqué comme « traité ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-1095">At the end, it updates the vertex history so that this vertex is marked as "PROCESSED."</span></span>

<span data-ttu-id="cc99a-1096">Lorsque la boucle de contrôle externe a épuisé tous les triangles ou a quitté avant que le seuil de différence de couleur soit atteint, la variable ClosestPoint est accédée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1096">When the outer control loop has either exhausted all the triangles or exited before color difference threshold has been met, the variable ClosestPoint is accessed.</span></span> <span data-ttu-id="cc99a-1097">Il s’agit du résultat de MinDEMap.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1097">This is the result of MinDEMap.</span></span> <span data-ttu-id="cc99a-1098">L’appelant peut également récupérer ShortestDistance s’il s’intéresse à la distance de la couleur mappée par rapport à la couleur de la requête.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1098">The caller can also retrieve ShortestDistance if interested in how far the mapped color is from the query color.</span></span>

### <a name="hue-smoothing"></a><span data-ttu-id="cc99a-1099">Lissage des teintes</span><span class="sxs-lookup"><span data-stu-id="cc99a-1099">Hue Smoothing</span></span>

![Diagramme qui affiche deux vues principales du lissage des teintes, l’original sur le dessus et la teinte lissé en bas.](images/gmmp-image125.png)

<span data-ttu-id="cc99a-1101">**Figure 35** : lissage des teintes</span><span class="sxs-lookup"><span data-stu-id="cc99a-1101">**Figure 35** : Hue Smoothing</span></span>

<span data-ttu-id="cc99a-1102">Un problème survient avec les opérations dont la teinte est restreinte ; autrement dit, l’opération prend uniquement en compte les variables dans un plan de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1102">An issue arises with operations that are hue constrained; that is, the operation only considers variables within a hue plane.</span></span> <span data-ttu-id="cc99a-1103">La figure 35 montre un exemple de gamme de couleurs « discontinues » dans les teintes bleues.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1103">Figure 35 shows an example of a gamut exhibiting "discontinuous" hue slices in the blue hues.</span></span> <span data-ttu-id="cc99a-1104">Dans cette plage de teinte, pour certains angles de teinte, la limite de gamme est tangentielle au plan de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1104">Within this hue range, for certain hue angles, the gamut boundary is tangential to the hue plane.</span></span> <span data-ttu-id="cc99a-1105">En effet, cela entraîne une modification de la structure topologique des tranches de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1105">In effect, this causes a change in the topological structure of the hue slices.</span></span> <span data-ttu-id="cc99a-1106">Dans l’exemple illustré, lorsque le plan de teinte passe au-dessus de cette plage de teinte, un « îlot » émerge et des sous-fusions.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1106">In the example shown, as the hue plane sweeps across this hue range, an "island" emerges and submerges.</span></span> <span data-ttu-id="cc99a-1107">Cette modification de la topologie entraîne l’interruption des opérations spécifiques de la teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1107">This change in topology will cause hue specific operations to be discontinuous.</span></span> <span data-ttu-id="cc99a-1108">Par exemple, le sommet à la teinte fixe change brusquement lorsque l’angle de teinte change dans cette plage.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1108">For example, the cusp at fixed hue will change abruptly as the hue angle changes across this range.</span></span>

<span data-ttu-id="cc99a-1109">Il y a une raison de la science des couleurs pour laquelle il est souhaitable de conserver la teinte dans certaines opérations.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1109">There is a color science reason why it is desirable to preserve hue in certain operations.</span></span> <span data-ttu-id="cc99a-1110">Pour résoudre le problème précédent, les triangles de limite de gamme d’origine doivent être « teint lissée ».</span><span class="sxs-lookup"><span data-stu-id="cc99a-1110">To resolve the preceding issue, the original Gamut Boundary Triangles must be "hue smoothed."</span></span> <span data-ttu-id="cc99a-1111">En règle générale, un lissage de teinte d’un ensemble de triangles de limite de gamme est un ensemble de triangles de sorte que (a) représente la limite d’une nouvelle « gamme », qui peut ne pas correspondre à la gamme réelle des appareils, et qui contient la gamme définie par l’ensemble d’origine des triangles. et (b) les triangles du nouvel ensemble sont délimités du fait qu’ils sont parallèles aux plans de teinte.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1111">Generally speaking, a hue smoothing of a set of Gamut Boundary Triangles is a set of triangles such that (a) it forms the boundary of a new "gamut," which might not correspond to the actual device gamut, and that contains the gamut defined by the original set of triangles; and (b) the triangles in the new set are bounded away from being parallel to the hue planes.</span></span>

<span data-ttu-id="cc99a-1112">Un moyen pratique d’obtenir un ensemble de triangles lissés, est de prendre la forme convexe des sommets d’origine.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1112">One practical way to obtain a hue smoothed set of triangles is to take the convex hull of the original vertices.</span></span> <span data-ttu-id="cc99a-1113">Comme illustré à la figure 35, les tranches de teinte de la coque convexe varient harmonieusement dans la plage de teinte problématique sans modification soudaine de la topologie.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1113">As illustrated in Figure 35, the hue slices of the convex hull vary smoothly in the problematic hue range without a sudden change in topology.</span></span>

### <a name="setting-primaries-and-secondaries-in-the-gamut-boundary-description"></a><span data-ttu-id="cc99a-1114">Définition des serveurs primaires et secondaires dans la description des limites de la gamme de couleurs</span><span class="sxs-lookup"><span data-stu-id="cc99a-1114">Setting Primaries and Secondaries in the Gamut Boundary Description</span></span>

<span data-ttu-id="cc99a-1115">Certaines méthodes de mappage de gamme de couleurs, telles que HueMap, dépendent de l’emplacement des serveurs principaux et secondaires de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1115">Certain gamut mapping methods, such as HueMap, depend on the location of the device primaries and secondaries.</span></span> <span data-ttu-id="cc99a-1116">Pour les appareils additives, les disques primaires sont rouge, vert et bleu (R, G et B); et les secondaires sont cyan, magenta et jaune (C, M et Y).</span><span class="sxs-lookup"><span data-stu-id="cc99a-1116">For additive devices, the primaries are red, green, and blue (R, G, and B); and the secondaries are cyan, magenta, and yellow (C, M, and Y).</span></span> <span data-ttu-id="cc99a-1117">Pour les appareils de soustraction, les disques primaires sont C, M et Y ; et les secondaires sont R, G et B. Le GBD effectue le suivi de ces six valeurs, plus le blanc et le noir (W et K), dans un tableau de valeurs de couleur Jab.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1117">For subtractive devices, the primaries are C, M, and Y; and the secondaries are R, G, and B. The GBD keeps track of all six of those values, plus white and black (W and K), in a array of Jab color values.</span></span> <span data-ttu-id="cc99a-1118">Ces valeurs sont définies dans la description de la limite de la gamme quand elle est créée.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1118">These values are set into the gamut boundary description when it is created.</span></span> <span data-ttu-id="cc99a-1119">Pour les périphériques de sortie, les disques primaires peuvent être déterminés en exécutant des combinaisons de valeurs de contrôle d’appareil via le modèle d’appareil.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1119">For output devices, the primaries can be determined by running combinations of device control values through the device model.</span></span> <span data-ttu-id="cc99a-1120">Pour les appareils de capture, cette approche n’est pas adaptée à la création du GBD de référence, car il est presque impossible de capturer une image qui génère une valeur d’appareil pure entièrement saturée, telle que (0,0, 0,0, 1,0).</span><span class="sxs-lookup"><span data-stu-id="cc99a-1120">For capture devices, this approach is not well-suited for creating the reference GBD, because it is almost impossible to capture an image that yields a fully saturated pure device value, such as (0.0, 0.0, 1.0).</span></span> <span data-ttu-id="cc99a-1121">Les profils d’appareil WCS contiennent les index des primaires dans la cible de capture.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1121">WCS device profiles contain the indices of the primaries in the capture target.</span></span> <span data-ttu-id="cc99a-1122">Étant donné que ces valeurs ne sont pas contenues dans un profil ICC, utilisez des valeurs mesurées à partir d’une cible de scanneur classique après la conversion en Jab, par rapport aux conditions d’affichage ICC.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1122">Because these values are not contained in an ICC profile, use values measured from a typical scanner target after converting to Jab, relative to the ICC viewing conditions.</span></span>

### <a name="setting-the-neutral-axis-in-the-gamut-boundary-description"></a><span data-ttu-id="cc99a-1123">Définition de l’axe neutre dans la description des limites de la gamme de couleurs</span><span class="sxs-lookup"><span data-stu-id="cc99a-1123">Setting the Neutral Axis in the Gamut Boundary Description</span></span>

<span data-ttu-id="cc99a-1124">Le HueMap et les méthodes de mappage de gammes hachées relatives utilisent l’axe neutre de l’appareil pour le redressement.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1124">The HueMap and the Relative MinCD gamut mapping methods use the device neutral axis for straightening.</span></span> <span data-ttu-id="cc99a-1125">Pour les périphériques de sortie de ligne de base, l’axe neutre peut être déterminé en exécutant des valeurs neutres de périphérique (R = G = B ou C = M = Y) par le biais de la méthode DeviceToColorimetric, puis par le biais de la méthode ColorimetricToAppearance de l’objet CIECAM02.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1125">For the baseline output devices, the neutral axis can be determined by running device neutral values (R=G=B or C=M=Y) through the DeviceToColorimetric method, and then through the ColorimetricToAppearance method of the CIECAM02 object.</span></span> <span data-ttu-id="cc99a-1126">Toutefois, les périphériques de capture ne retournent pas toujours une valeur de périphérique neutre lorsqu’ils sont présentés avec un échantillon neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1126">However, capture devices do not always return a device neutral value when presented with a neutral sample.</span></span> <span data-ttu-id="cc99a-1127">Cela est particulièrement vrai lorsque l’éclairage ambiant n’est pas parfaitement neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1127">This is particularly true when the ambient lighting is not perfectly neutral.</span></span> <span data-ttu-id="cc99a-1128">Les profils de périphérique WCS contiennent les index des échantillons neutres dans la cible.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1128">WCS device profiles contain the indices of the neutral samples in the target.</span></span> <span data-ttu-id="cc99a-1129">Utilisez ces exemples pour définir l’axe neutre.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1129">Use those samples to set the neutral axis.</span></span> <span data-ttu-id="cc99a-1130">Étant donné que ces informations ne sont pas disponibles pour les profils ICC, vous devez utiliser la même méthode que celle utilisée pour les périphériques de sortie. exécutez des exemples indépendants de l’appareil par le biais de la méthode DeviceToColorimetric, puis associez les valeurs d’entrée et les résultats colorimétriques.</span><span class="sxs-lookup"><span data-stu-id="cc99a-1130">Because this information is not available for ICC profiles, you must use the same method that is used for output devices; run device neutral samples through the DeviceToColorimetric method, and then couple the input values and the colorimetric results.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cc99a-1131">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="cc99a-1131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cc99a-1132">Concepts de base de la gestion des couleurs</span><span class="sxs-lookup"><span data-stu-id="cc99a-1132">Basic color management concepts</span></span>](basic-color-management-concepts.md)
</dt> <dt>

[<span data-ttu-id="cc99a-1133">Schémas et algorithmes du système de couleurs Windows</span><span class="sxs-lookup"><span data-stu-id="cc99a-1133">Windows Color System Schemas and Algorithms</span></span>](windows-color-system-schemas-and-algorithms.md)
</dt> </dl>

 

 




