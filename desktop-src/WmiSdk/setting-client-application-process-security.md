---
description: Les applications clientes qui appellent des interfaces WMI peuvent contrôler les niveaux de sécurité de leurs processus.
ms.assetid: 790b4e40-9b92-464a-a774-dec0b75cedee
ms.tgt_platform: multiple
title: Définition de la sécurité des processus d’application cliente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8bfa0a42390ffa433cff01300b0976d40553665c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104203727"
---
# <a name="setting-client-application-process-security"></a><span data-ttu-id="f0f40-103">Définition de la sécurité des processus d’application cliente</span><span class="sxs-lookup"><span data-stu-id="f0f40-103">Setting Client Application Process Security</span></span>

<span data-ttu-id="f0f40-104">Les applications clientes qui appellent des interfaces WMI peuvent contrôler les niveaux de sécurité de leurs processus.</span><span class="sxs-lookup"><span data-stu-id="f0f40-104">Client applications that call WMI interfaces can control the security levels of their processes.</span></span> <span data-ttu-id="f0f40-105">Toutes les applications WMI accèdent à WMI via COM, et vous pouvez appeler la fonction COM [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) pour définir la sécurité de vos processus.</span><span class="sxs-lookup"><span data-stu-id="f0f40-105">All WMI applications access WMI through COM, and you can call the COM function [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) to set security for your processes.</span></span> <span data-ttu-id="f0f40-106">Les applications qui effectuent des appels asynchrones à WMI et aux applications qui s’inscrivent en tant que consommateurs d’événements définissent les niveaux de sécurité de l’appel dans WMI.</span><span class="sxs-lookup"><span data-stu-id="f0f40-106">Applications that make asynchronous calls to WMI and applications that register as event consumers set security levels on the call into WMI.</span></span>

<span data-ttu-id="f0f40-107">Si vous n’effectuez pas d’appel explicite à [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity), com l’appelle implicitement avec les valeurs du Registre.</span><span class="sxs-lookup"><span data-stu-id="f0f40-107">If you do not make an explicit call to [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity), COM calls it implicitly with values from the registry.</span></span> <span data-ttu-id="f0f40-108">Toutefois, les valeurs de Registre peuvent avoir des paramètres inférieurs pour l’emprunt d’identité et l’authentification qui ne fournissent pas la sécurité requise pour WMI.</span><span class="sxs-lookup"><span data-stu-id="f0f40-108">However, the registry values may have lower settings for impersonation and authentication that do not provide the security required for WMI.</span></span> <span data-ttu-id="f0f40-109">Pour plus d’informations, consultez [définition du niveau de sécurité de processus par défaut à l’aide de C++](setting-the-default-process-security-level-using-c-.md).</span><span class="sxs-lookup"><span data-stu-id="f0f40-109">For more information, see [Setting the Default Process Security Level Using C++](setting-the-default-process-security-level-using-c-.md).</span></span>

<span data-ttu-id="f0f40-110">L’accès asynchrone à WMI n’est pas recommandé.</span><span class="sxs-lookup"><span data-stu-id="f0f40-110">Asynchronous access to WMI is not recommended.</span></span> <span data-ttu-id="f0f40-111">Un rappel asynchrone permet à un utilisateur non authentifié de fournir des données au récepteur.</span><span class="sxs-lookup"><span data-stu-id="f0f40-111">An asynchronous callback allows a non-authenticated user to provide data to the sink.</span></span> <span data-ttu-id="f0f40-112">Cela pose des risques de sécurité pour vos scripts et vos applications.</span><span class="sxs-lookup"><span data-stu-id="f0f40-112">This poses security risks to your scripts and applications.</span></span> <span data-ttu-id="f0f40-113">Pour éliminer les risques, utilisez une communication semi-synchrone ou synchrone, ou effectuez des vérifications d’accès appropriées dans votre application cliente.</span><span class="sxs-lookup"><span data-stu-id="f0f40-113">To eliminate the risks, use semisynchronous or synchronous communication, or perform proper access checks in your client application.</span></span> <span data-ttu-id="f0f40-114">Pour plus d’informations, consultez [appel d’une méthode](calling-a-method.md).</span><span class="sxs-lookup"><span data-stu-id="f0f40-114">For more information, see [Calling a Method](calling-a-method.md).</span></span>

<span data-ttu-id="f0f40-115">Les appels à n’importe quel proxy WMI ([**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), [**IEnumWbemClassObject**](/windows/desktop/api/Wbemcli/nn-wbemcli-ienumwbemclassobject),[**IWbemCallResult**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemcallresult)ou [**IWbemRefresher**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemrefresher)) utilisent un pointeur hors processus.</span><span class="sxs-lookup"><span data-stu-id="f0f40-115">Calls to any of the WMI proxies ([**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), [**IEnumWbemClassObject**](/windows/desktop/api/Wbemcli/nn-wbemcli-ienumwbemclassobject),[**IWbemCallResult**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemcallresult), or [**IWbemRefresher**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemrefresher)) use an out-of-process pointer.</span></span> <span data-ttu-id="f0f40-116">Pour plus d’informations sur les valeurs par défaut et les recommandations, consultez [définition de la sécurité sur IWbemServices et d’autres proxies](setting-the-security-on-iwbemservices-and-other-proxies.md).</span><span class="sxs-lookup"><span data-stu-id="f0f40-116">For more information about the defaults and recommendations, see [Setting the Security on IWbemServices and Other Proxies](setting-the-security-on-iwbemservices-and-other-proxies.md).</span></span>

<span data-ttu-id="f0f40-117">La procédure suivante décrit les étapes que vous devez effectuer pour définir la sécurité de WMI sur votre processus d’application.</span><span class="sxs-lookup"><span data-stu-id="f0f40-117">The following procedure describes the steps you must perform to set the security for WMI on your application process.</span></span>

<span data-ttu-id="f0f40-118">**Pour définir la sécurité de WMI sur votre processus d’application**</span><span class="sxs-lookup"><span data-stu-id="f0f40-118">**To set security for WMI on your application process**</span></span>

1.  <span data-ttu-id="f0f40-119">Déterminez les niveaux de sécurité requis pour les systèmes d’exploitation Windows sur lesquels votre application cliente s’exécute.</span><span class="sxs-lookup"><span data-stu-id="f0f40-119">Determine the security levels required for the Windows operating systems on which your client application runs.</span></span>
2.  <span data-ttu-id="f0f40-120">Appelez la fonction COM [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) pour définir la sécurité par défaut du processus dans lequel l’application cliente s’exécute.</span><span class="sxs-lookup"><span data-stu-id="f0f40-120">Call the COM [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) function to set the default security for the process in which the client application runs.</span></span> <span data-ttu-id="f0f40-121">Cela permet de déclarer le niveau de sécurité requis par d’autres applications pour accéder au processus dans lequel votre application s’exécute.</span><span class="sxs-lookup"><span data-stu-id="f0f40-121">This declares how much security other applications require to access the process in which your application runs.</span></span>
3.  <span data-ttu-id="f0f40-122">Si vous avez besoin de modifier la sécurité sur un proxy individuel, par exemple sur un autre appel à [**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), appelez [**CoSetProxyBlanket**](/windows/win32/api/combaseapi/nf-combaseapi-cosetproxyblanket).</span><span class="sxs-lookup"><span data-stu-id="f0f40-122">If you need to change the security on an individual proxy, for example on another call to [**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), call [**CoSetProxyBlanket**](/windows/win32/api/combaseapi/nf-combaseapi-cosetproxyblanket).</span></span>
4.  <span data-ttu-id="f0f40-123">Si vous devez contrôler le matériel distant ou un objet système qui nécessite davantage de privilèges, utilisez la fonction [**AdjustTokenPrivileges**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) pour activer les privilèges nécessaires.</span><span class="sxs-lookup"><span data-stu-id="f0f40-123">If you need to control remote hardware or a system object that requires more privilege, use the [**AdjustTokenPrivileges**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) function to enable the necessary privileges.</span></span> <span data-ttu-id="f0f40-124">Notez que vous ne pouvez pas activer un privilège que le processus n’a pas déjà affecté.</span><span class="sxs-lookup"><span data-stu-id="f0f40-124">Note that you cannot enable a privilege that the process does not already have assigned to it.</span></span> <span data-ttu-id="f0f40-125">Pour plus d’informations, consultez la page [vérification de l’accès aux objets privés](/windows/desktop/SecAuthZ/checking-access-to-private-objects).</span><span class="sxs-lookup"><span data-stu-id="f0f40-125">For more information, see [Checking Access to Private Objects](/windows/desktop/SecAuthZ/checking-access-to-private-objects).</span></span>

<span data-ttu-id="f0f40-126">Pour plus d’informations sur la définition du niveau de sécurité de processus par défaut, consultez [définition du niveau de sécurité de processus par défaut à l’aide de C++](setting-the-default-process-security-level-using-c-.md) et [définition du niveau de sécurité de processus par défaut à l’aide de VBScript](setting-the-default-process-security-level-using-vbscript.md).</span><span class="sxs-lookup"><span data-stu-id="f0f40-126">For further information about setting the default process security level, see [Setting the Default Process Security Level Using C++](setting-the-default-process-security-level-using-c-.md) and [Setting the Default Process Security Level Using VBScript](setting-the-default-process-security-level-using-vbscript.md).</span></span>

 

 
