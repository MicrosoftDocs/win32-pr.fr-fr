---
title: Utilisation du gestionnaire de redémarrage
description: Les sections suivantes décrivent l’utilisation de l’API du gestionnaire de redémarrage.
ms.assetid: 78448d5e-20f6-45b6-b833-7d7791e5e4c6
keywords:
- Restart Manager restart Mgr, utilisation
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e4ac72edb9f2395bbd67236806c3ab3029372cc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103842610"
---
# <a name="using-restart-manager"></a><span data-ttu-id="7754f-104">Utilisation du gestionnaire de redémarrage</span><span class="sxs-lookup"><span data-stu-id="7754f-104">Using Restart Manager</span></span>

<span data-ttu-id="7754f-105">Les sections suivantes décrivent l’utilisation de l’API du gestionnaire de redémarrage.</span><span class="sxs-lookup"><span data-stu-id="7754f-105">The following sections describe using the Restart Manager API.</span></span> <span data-ttu-id="7754f-106">Vos applications et services doivent également respecter les [instructions pour les applications et les services](guidelines-for-applications-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="7754f-106">Your applications and services should also follow the [Guidelines for Applications and Services](guidelines-for-applications-and-services.md).</span></span>

## <a name="using-the-microsoft-windows-installer"></a><span data-ttu-id="7754f-107">Utilisation de l’Microsoft Windows Installer</span><span class="sxs-lookup"><span data-stu-id="7754f-107">Using the Microsoft Windows Installer</span></span>

<span data-ttu-id="7754f-108">Le [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) version 4,0 est le service d’installation de l’application de Windows Vista ou de windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="7754f-108">The [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) Version 4.0 is the application installation service of Windows Vista or Windows Server 2008.</span></span> <span data-ttu-id="7754f-109">Les applications qui utilisent la version 4,0 de Windows Installer pour l’installation et la maintenance utilisent automatiquement le gestionnaire de redémarrage pour réduire les redémarrages du système.</span><span class="sxs-lookup"><span data-stu-id="7754f-109">Applications that use the Windows Installer version 4.0 for installation and servicing automatically use the Restart Manager to reduce system restarts.</span></span> <span data-ttu-id="7754f-110">Les programmes d’installation personnalisés peuvent également être conçus pour appeler l’API du gestionnaire de redémarrage pour arrêter et redémarrer les applications et les services directement afin d’éviter d’exiger un redémarrage du système.</span><span class="sxs-lookup"><span data-stu-id="7754f-110">Custom installers can also be designed to call the Restart Manager API to shut down and restart applications and services directly to avoid requiring a system restart.</span></span> <span data-ttu-id="7754f-111">Dans les cas où un redémarrage du système est inévitable, les programmes d’installation peuvent utiliser la fonction [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) ou [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) pour le planifier de manière à minimiser l’interruption de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7754f-111">In cases where a system restart is unavoidable, installers can use the [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) or [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) function to schedule it in such a way that it minimizes the disruption to the user.</span></span> <span data-ttu-id="7754f-112">Les packages de Windows Installer interactifs doivent implémenter une interface utilisateur qui comprend une boîte de dialogue [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) .</span><span class="sxs-lookup"><span data-stu-id="7754f-112">Interactive Windows Installer packages should implement a user interface that includes a [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box.</span></span> <span data-ttu-id="7754f-113">Pour plus d’informations, consultez [utilisation de Windows Installer avec le gestionnaire de redémarrage](/windows/desktop/Msi/using-windows-installer-with-restart-manager) dans la documentation du kit de développement logiciel (SDK) Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="7754f-113">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>

## <a name="using-the-restart-manager-api-with-custom-installers"></a><span data-ttu-id="7754f-114">Utilisation de l’API du gestionnaire de redémarrage avec des programmes d’installation personnalisés</span><span class="sxs-lookup"><span data-stu-id="7754f-114">Using the Restart Manager API with Custom Installers</span></span>

<span data-ttu-id="7754f-115">Les programmes d’installation personnalisés, ou un package Windows Installer qui contient des actions personnalisées entraînant un redémarrage du système, peuvent utiliser l’API du gestionnaire de redémarrage pour arrêter et redémarrer les applications et les services.</span><span class="sxs-lookup"><span data-stu-id="7754f-115">Custom installers, or a Windows Installer package that contains custom actions that cause a system restart, can use the Restart Manager API to shut down and restart applications and services.</span></span>

-   <span data-ttu-id="7754f-116">Toutes les opérations effectuées à l’aide de l’API du gestionnaire de redémarrage doivent être associées à une session.</span><span class="sxs-lookup"><span data-stu-id="7754f-116">All operations that are performed using the Restart Manager API must be associated with a session.</span></span> <span data-ttu-id="7754f-117">Un maximum de 64 sessions du gestionnaire de démarrage par session utilisateur peuvent être ouvertes simultanément sur le système.</span><span class="sxs-lookup"><span data-stu-id="7754f-117">A maximum of 64 Restart Manager sessions per user session can be open on the system at the same time.</span></span> <span data-ttu-id="7754f-118">Le programme d’installation principal démarre et met fin à la session du gestionnaire de redémarrage.</span><span class="sxs-lookup"><span data-stu-id="7754f-118">The primary installer starts and ends the Restart Manager session.</span></span> <span data-ttu-id="7754f-119">Pour plus d’informations sur l’utilisation du gestionnaire de redémarrage avec un seul programme d’installation, consultez [utilisation du gestionnaire de redémarrage avec un programme d’installation principal](using-restart-manager-with-a-primary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="7754f-119">For more information about using Restart Manager with a single installer, see [Using Restart Manager with a Primary Installer](using-restart-manager-with-a-primary-installer.md).</span></span>
-   <span data-ttu-id="7754f-120">Si nécessaire pour l’installation, un ou plusieurs programmes d’installation secondaires peuvent être joints à la session du gestionnaire de redémarrage et peuvent être exécutés en mode in-process ou hors processus du programme d’installation principal.</span><span class="sxs-lookup"><span data-stu-id="7754f-120">If necessary for the installation, one or more secondary installers can be joined to the Restart Manager session and can run either in-process or out-of-process of the primary installer.</span></span> <span data-ttu-id="7754f-121">Les programmes d’installation secondaires requièrent que la clé de session soit fournie par le programme d’installation principal pour rejoindre une session.</span><span class="sxs-lookup"><span data-stu-id="7754f-121">Secondary installers require that the session key be provided by the primary installer to join a session.</span></span> <span data-ttu-id="7754f-122">Pour plus d’informations et pour obtenir un exemple d’utilisation des programmes d’installation secondaires, consultez [utilisation du gestionnaire de redémarrage avec un programme d’installation secondaire](using-restart-manager-with-a-secondary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="7754f-122">For more information and an example of using secondary installers, see [Using Restart Manager with a Secondary Installer](using-restart-manager-with-a-secondary-installer.md).</span></span>
-   <span data-ttu-id="7754f-123">Les programmes d’installation interactifs doivent implémenter une interface utilisateur qui comprend une boîte de dialogue [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) qui peut demander aux utilisateurs de fermer les applications et les services.</span><span class="sxs-lookup"><span data-stu-id="7754f-123">Interactive installers should implement a user interface that includes an [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box that can ask users to close applications and services.</span></span> <span data-ttu-id="7754f-124">Pour plus d’informations, consultez [utilisation de Windows Installer avec le gestionnaire de redémarrage](/windows/desktop/Msi/using-windows-installer-with-restart-manager) dans la documentation du kit de développement logiciel (SDK) Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="7754f-124">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>
-   <span data-ttu-id="7754f-125">Les programmes d’installation peuvent appeler l’API du gestionnaire de redémarrage pour modifier, annuler et connaître l’état de l’opération du gestionnaire de redémarrage en cours.</span><span class="sxs-lookup"><span data-stu-id="7754f-125">Installers can call the Restart Manager API to change, cancel, and get the status of the current Restart Manager operation.</span></span> <span data-ttu-id="7754f-126">Pour plus d’informations, consultez les rubriques suivantes : [obtention de l’état d’une opération du gestionnaire de redémarrage](getting-the-status-of-a-restart-manager-operation.md) et [annulation de l’opération du gestionnaire de redémarrage en cours](canceling-the-current-restart-manager-operation.md).</span><span class="sxs-lookup"><span data-stu-id="7754f-126">For more information, see the following topics: [Getting the Status of a Restart Manager Operation](getting-the-status-of-a-restart-manager-operation.md) and [Canceling the Current Restart Manager Operation](canceling-the-current-restart-manager-operation.md).</span></span>
-   <span data-ttu-id="7754f-127">Les programmes d’installation ne doivent pas désactiver la redirection du système de fichiers avant d’appeler l’API gestionnaire de redémarrage.</span><span class="sxs-lookup"><span data-stu-id="7754f-127">Installers should not disable file system redirection before calling the Restart Manager API.</span></span> <span data-ttu-id="7754f-128">Certains programmes d’installation 32 bits s’exécutent sur Windows 64 bits peuvent ne pas pouvoir inscrire un fichier dans le répertoire% windir% \\ system32.</span><span class="sxs-lookup"><span data-stu-id="7754f-128">Some 32-bit installers run on 64-bit Windows may be unable to register a file in the %windir%\\system32 directory.</span></span>

 

 