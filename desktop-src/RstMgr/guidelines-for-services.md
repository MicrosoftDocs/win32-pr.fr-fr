---
title: Instructions pour les services
description: Les services doivent adhérer à ces instructions pour s’assurer que le gestionnaire de redémarrage peut arrêter et redémarrer les services si nécessaire pour installer les mises à jour. Les applications peuvent utiliser les instructions décrites dans instructions pour les applications.
ms.assetid: 69a98f82-71bb-4780-8a3f-294cc5629900
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 51374c0a4c6fc561b8259aadf15e3d5487e12483
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104031581"
---
# <a name="guidelines-for-services"></a><span data-ttu-id="e5eb3-104">Instructions pour les services</span><span class="sxs-lookup"><span data-stu-id="e5eb3-104">Guidelines for Services</span></span>

<span data-ttu-id="e5eb3-105">Les services doivent adhérer à ces instructions pour s’assurer que le gestionnaire de redémarrage peut arrêter et redémarrer les services si nécessaire pour installer les mises à jour.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-105">Services should adhere to these guidelines to ensure that the Restart Manager can shut down and restart services if necessary to install updates.</span></span> <span data-ttu-id="e5eb3-106">Les applications peuvent utiliser les instructions décrites dans [instructions pour les applications](guidelines-for-applications.md).</span><span class="sxs-lookup"><span data-stu-id="e5eb3-106">Applications can use the guidelines that are described in [Guidelines for Applications](guidelines-for-applications.md).</span></span>

-   <span data-ttu-id="e5eb3-107">Les services doivent pouvoir être arrêtés et redémarrés à l’aide du [Gestionnaire de contrôle des services](/windows/desktop/Services/service-control-manager) sans nécessiter un redémarrage du système.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-107">Services should be capable of being shut down and restarted using the [Service Control Manager](/windows/desktop/Services/service-control-manager) without requiring a system restart.</span></span> <span data-ttu-id="e5eb3-108">Les exceptions à cette règle sont des processus système critiques qui s’exécutent dans le contexte d' lsass.exe ou de services.exe.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-108">The exceptions to this guideline are critical system processes that run in the context of lsass.exe or services.exe.</span></span>
-   <span data-ttu-id="e5eb3-109">Le gestionnaire de redémarrage honore les dépendances de service.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-109">Restart Manager honors service dependencies.</span></span> <span data-ttu-id="e5eb3-110">Lorsqu’un service est arrêté et redémarré, ses services dépendants sont arrêtés et redémarrés.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-110">When a service is shut down and restarted, its dependent services are shut down and restarted.</span></span>
-   <span data-ttu-id="e5eb3-111">Les services doivent spécifier l’intervalle de récupération et la période de réinitialisation dans le [Gestionnaire de contrôle des services](/windows/desktop/Services/service-control-manager).</span><span class="sxs-lookup"><span data-stu-id="e5eb3-111">Services should specify the recovery interval and reset period in the [Service Control Manager (SCM)](/windows/desktop/Services/service-control-manager).</span></span> <span data-ttu-id="e5eb3-112">L’intervalle de récupération est le temps, en millisecondes, après le dernier échec que le SCM attend avant d’effectuer l’action de récupération.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-112">The recovery interval is the time, in msecs, after the last failure that the SCM waits before taking the recovery action.</span></span> <span data-ttu-id="e5eb3-113">La période de réinitialisation est le temps, en secondes, après le dernier échec que le gestionnaire de contrôle des services attend avant de réinitialiser le nombre d’échecs à 0.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-113">The reset period is the time, in seconds, after the last failure that the Service Control Manager waits before resetting the failure count to 0.</span></span> <span data-ttu-id="e5eb3-114">Les services peuvent utiliser la fonction [**ChangeServiceConfig2**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfig2a) pour modifier les paramètres de configuration.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-114">Services can use [**ChangeServiceConfig2**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfig2a) function to change the configuration settings.</span></span>

    <span data-ttu-id="e5eb3-115">Les [services critiques](critical-system-services.md) doivent utiliser les paramètres de récupération suivants pour spécifier que le service doit être redémarré une minute après le premier échec du redémarrage du service, redémarré deux minutes après le deuxième échec et que l’ordinateur doit être redémarré une minute après le troisième échec.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-115">[Critical services](critical-system-services.md) should use the following recovery settings to specify that the service be restarted one minute after the first failure to restart the service, restarted two minutes after the second failure, and that the computer be restarted one minute after the third failure.</span></span> <span data-ttu-id="e5eb3-116">Le nombre d’échecs est réinitialisé à 0 après 300 secondes.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-116">The failure count is reset to 0 after 300 seconds.</span></span>

    <dl> <span data-ttu-id="e5eb3-117">Actions de récupération : Restart/60000/restart/120000/reboot/60000 & Reset = 300</span><span class="sxs-lookup"><span data-stu-id="e5eb3-117">Recovery Actions: Restart/60000/Restart/120000/Reboot/60000 & Reset =300</span></span>  
    </dl>

    <span data-ttu-id="e5eb3-118">Les [services critiques](critical-system-services.md) doivent être démarrés avant les services non critiques.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-118">[Critical services](critical-system-services.md) should be started before non-critical services.</span></span> <span data-ttu-id="e5eb3-119">Les services qui ne sont pas des services essentiels doivent utiliser les paramètres de récupération suivants pour spécifier que le service doit être redémarré deux minutes après le premier échec de redémarrage du service.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-119">Services that are not critical services should use the following recovery settings to specify that the service be restarted two minutes after the first failure to restart the service.</span></span> <span data-ttu-id="e5eb3-120">Le service n’est pas redémarré après la deuxième défaillance et un administrateur doit intervenir dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-120">The service is not restarted after the second failure, and an administrator would need to intervene in this case.</span></span> <span data-ttu-id="e5eb3-121">Le nombre d’échecs est réinitialisé à 0 après 900 secondes.</span><span class="sxs-lookup"><span data-stu-id="e5eb3-121">The failure count is reset to 0 after 900 seconds.</span></span>

    <dl> <span data-ttu-id="e5eb3-122">Actions de récupération : Restart/120000/restart/300000/None/0 & Reset = 900</span><span class="sxs-lookup"><span data-stu-id="e5eb3-122">Recovery Actions: Restart/120000/Restart/300000/None/0 & Reset = 900</span></span>  
    </dl>

 

 