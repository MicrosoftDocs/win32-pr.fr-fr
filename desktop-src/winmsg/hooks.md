---
description: Cette section traite des hooks. Un hook est un point dans le mécanisme de gestion des messages système où une application peut installer une sous-routine pour surveiller le trafic des messages.
ms.assetid: vs|winui|~\winui\windowsuserinterface\windowing\hooks.htm
title: Hooks
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74057d25e3152c8782c2be364688bb971b08ddf5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104210068"
---
# <a name="hooks"></a>Hooks

Un raccordement est un point dans le mécanisme de gestion des messages système où une application peut installer une sous-routine pour surveiller le trafic des messages dans le système et traiter certains types de messages avant qu’ils atteignent la procédure de fenêtre cible.

### <a name="in-this-section"></a>Dans cette section



| Nom                                 | Description                                                         |
|--------------------------------------|---------------------------------------------------------------------|
| [Vue d’ensemble du hook](about-hooks.md)     | Explique comment utiliser les raccordements.<br/>                      |
| [Utilisation de hooks](using-hooks.md)       | Montre comment effectuer des tâches associées à des hooks.<br/> |
| [Référence de raccordement](hook-reference.md) | Contient la référence de l’API.<br/>                              |



 

### <a name="hook-functions"></a>Fonctions de raccordement



| Nom                                               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera)             | Passe le message et le code de raccordement spécifiés aux procédures de raccordement associées aux procédures de hook [**\_ SYSMSGFILTER**](about-hooks.md) et **WH \_ msgfilter** .<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex)           | Passe les informations de raccordement à la procédure de hook suivante dans la chaîne de raccordement en cours. Une procédure de raccordement peut appeler cette fonction avant ou après le traitement des informations de raccordement. <br/>                                                                                                                                                                                                                                                                                                                                                                                                         |
| [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85))                   | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction avant d’appeler la procédure de fenêtre pour traiter un message envoyé au thread.<br/>                                                                                                                                                                                                                                                                                                                                               |
| [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc)             | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction après l’appel de la fonction [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) . La procédure de raccordement peut examiner le message ; il ne peut pas le modifier. <br/>                                                                                                                                                                                                                                                                                         |
| [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))                           | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction avant l’activation, la création, la destruction, la réduction, l’agrandissement, le déplacement ou le redimensionnement d’une fenêtre. avant d’exécuter une commande système ; avant de supprimer un événement de souris ou de clavier de la file d’attente des messages système ; avant de définir le focus clavier ; ou avant la synchronisation avec la file d’attente de messages système. Une application de formation basée sur ordinateur (CBT) utilise cette procédure de Hook pour recevoir des notifications utiles du système. <br/> |
| [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))                       | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction avant d’appeler les procédures de hook associées à tout type de raccordement. Le système transmet des informations sur le hook à appeler à la procédure de hook [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) , qui examine les informations et détermine s’il faut autoriser le hook à être appelé. <br/>                                                                                                                                                  |
| [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85))     | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction chaque fois que le thread de premier plan va devenir inactif. <br/>                                                                                                                                                                                                                                                                                                                                                                   |
| [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85))                     | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction chaque fois que la fonction [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) a récupéré un message à partir d’une file d’attente de messages d’application. Avant de retourner le message récupéré à l’appelant, le système transmet le message à la procédure de Hook. <br/>                                                                                                                                                        |
| [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85))   | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . En règle générale, une application utilise cette fonction pour lire une série de messages de souris et de clavier enregistrés précédemment par la procédure de hook [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) . Tant qu’une procédure de hook [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) est installée, l’entrée de souris et de clavier normale est désactivée. <br/>                                                                                                                       |
| [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85))       | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . La fonction enregistre les messages que le système supprime de la file d’attente des messages système. Plus tard, une application peut utiliser une procédure de hook [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) pour lire les messages. <br/>                                                                                                                                                                                                                                               |
| [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85))                 | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction chaque fois qu’une application appelle la fonction [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) et qu’un message de clavier ([**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) ou [**WM \_ KEYpoint**](/windows/desktop/inputdev/wm-keydown)) doit être traité. <br/>                                                                                                                                                                         |
| [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction chaque fois qu’un nouvel événement d’entrée au clavier est sur le point d’être publié dans une file d’attente d’entrée de thread.<br/>                                                                                                                                                                                                                                                                                                                                     |
| [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85))       | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction chaque fois qu’un nouvel événement d’entrée de la souris est sur le point d’être publié dans une file d’attente d’entrée de thread.<br/>                                                                                                                                                                                                                                                                                                                                        |
| [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85))                   | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction après qu’un événement d’entrée s’est produit dans une boîte de dialogue, une boîte de message, un menu ou une barre de défilement, mais avant le traitement du message généré par l’événement d’entrée. La procédure de hook peut surveiller les messages d’une boîte de dialogue, d’une boîte de message, d’un menu ou d’une barre de défilement créée par une application particulière ou toutes les applications.<br/>                                                                                                                       |
| [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))                       | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction chaque fois qu’une application appelle la fonction [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) et qu’un message de souris est traité. <br/>                                                                                                                                                                                                                                                           |
| [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa)       | Installe une procédure de raccordement définie par l’application dans une chaîne de raccordement. Vous devez installer une procédure de raccordement pour surveiller le système pour certains types d’événements. Ces événements sont associés à un thread spécifique ou à tous les threads dans le même bureau que le thread appelant.<br/>                                                                                                                                                                                                                                                                                                           |
| [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85))                       | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . La fonction reçoit des notifications d’événements de Shell du système.<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85))                     | Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Le système appelle cette fonction après qu’un événement d’entrée s’est produit dans une boîte de dialogue, une boîte de message, un menu ou une barre de défilement, mais avant le traitement du message généré par l’événement d’entrée. La fonction peut surveiller les messages d’une boîte de dialogue, d’une boîte de message, d’un menu ou d’une barre de défilement dans le système. <br/>                                                                                                                                                                    |
| [**UnhookWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-unhookwindowshookex) | Supprime une procédure de raccordement installée dans une chaîne de hook par la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="hook-notifications"></a>Notifications de raccordement



| Nom                                          | Description                                                                                                                                                                         |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_CANCELJOURNAL WM**](wm-canceljournal.md) | Publié dans une application lorsqu’un utilisateur annule les activités de journalisation de l’application. Le message est publié avec un handle de fenêtre **null** . <br/>                              |
| [**\_QUEUESYNC WM**](wm-queuesync.md)         | Envoyé par une application CBT pour séparer les messages d’entrée utilisateur des autres messages envoyés via la procédure [**\_ JOURNALPLAYBACK**](about-hooks.md) . <br/> |



 

### <a name="hook-structures"></a>Structures de raccordement



| Nom                                           | Description                                                                                                                                                                                                                 |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CBT \_ CREATEWND**](/windows/win32/api/winuser/ns-winuser-cbt_createwnda)        | Contient les informations transmises à une procédure de hook **WH \_** , [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), avant la création d’une fenêtre.<br/>                                                                                               |
| [**CBTACTIVATESTRUCT**](/windows/win32/api/winuser/ns-winuser-cbtactivatestruct) | Contient les informations transmises à une procédure de hook **WH \_** , [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), avant l’activation d’une fenêtre. <br/>                                                                                            |
| [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct)           | Définit les paramètres de message passés à une procédure de hook **BL \_ CALLWNDPROCRET** , [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc). <br/>                                                                                       |
| [**CWPSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpstruct)                 | Définit les paramètres de message passés à une procédure de hook **BL \_ CALLWNDPROC** , [*CALLWNDPROC*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)). <br/>                                                                                                |
| [**DEBUGHOOKINFO**](/windows/win32/api/winuser/ns-winuser-debughookinfo)         | Contient les informations de débogage passées à une procédure de raccordement de **\_ débogage WH** , [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)). <br/>                                                                                                          |
| [**EVENTMSG**](/windows/win32/api/winuser/ns-winuser-eventmsg)                   | Contient des informations sur un message matériel envoyé à la file d’attente des messages système. Cette structure est utilisée pour stocker les informations de message pour la fonction de rappel [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) . <br/> |
| [**KBDLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-kbdllhookstruct)     | Contient des informations sur un événement d’entrée de clavier de bas niveau. <br/>                                                                                                                                                    |
| [**MOUSEHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-mousehookstruct)     | Contient des informations sur un événement de souris passé à une procédure de hook de **\_ souris WH** , [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)). <br/>                                                                                                |
| [**MOUSEHOOKSTRUCTEX**](/windows/win32/api/winuser/ns-winuser-mousehookstructex) | Contient des informations sur un événement de souris passé à une procédure de hook de **\_ souris WH** , [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)). <br/>                                                                                                |
| [**MSLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-msllhookstruct)       | Contient des informations sur un événement d’entrée de souris de bas niveau. <br/>                                                                                                                                                       |



 

## <a name="related-topics"></a>Rubriques connexes

<dl> <dt>

[**SetWinEventHook**](/windows/desktop/api/winuser/nf-winuser-setwineventhook)
</dt> </dl>

 

