---
UID: ''
title: MessageProc fonction de rappel
description: Le système appelle cette fonction après qu’un événement d’entrée s’est produit dans une boîte de dialogue, une boîte de message, un menu ou une barre de défilement. | MessageProc fonction de rappel
old-location: ''
ms.assetid: na
ms.date: 04/05/2019
ms.keywords: ''
ms.topic: reference
req.header: ''
req.include-header: ''
req.target-type: Windows
req.target-min-winverclnt: ''
req.target-min-winversvr: ''
req.kmdf-ver: ''
req.umdf-ver: ''
req.ddi-compliance: ''
req.unicode-ansi: ''
req.idl: ''
req.max-support: ''
req.namespace: ''
req.assembly: ''
req.type-library: ''
req.lib: ''
req.dll: ''
req.irql: ''
topic_type:
- APIRef
api_type: ''
api_location: ''
api_name: ''
targetos: Windows
req.typenames: ''
req.redist: ''
ms.openlocfilehash: 00a1d1c52d50d0d9a028829181c886a813112a15
ms.sourcegitcommit: 92e74c99f8f4d097676959d0c317f533c2400a80
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/09/2021
ms.locfileid: "104322405"
---
# <a name="messageproc-function"></a><span data-ttu-id="f103e-104">MessageProc fonction)</span><span class="sxs-lookup"><span data-stu-id="f103e-104">MessageProc function</span></span>

## <a name="description"></a><span data-ttu-id="f103e-105">Description</span><span class="sxs-lookup"><span data-stu-id="f103e-105">Description</span></span>

<span data-ttu-id="f103e-106">Fonction de rappel définie par l’application ou définie par la Bibliothèque utilisée avec la fonction [SetWindowsHookEx](/windows/desktop/api/winuser/nf-winuser-setwindowshookexw) .</span><span class="sxs-lookup"><span data-stu-id="f103e-106">An application-defined or library-defined callback function used with the [SetWindowsHookEx](/windows/desktop/api/winuser/nf-winuser-setwindowshookexw) function.</span></span>
<span data-ttu-id="f103e-107">Le système appelle cette fonction après qu’un événement d’entrée s’est produit dans une boîte de dialogue, une boîte de message, un menu ou une barre de défilement, mais avant le traitement du message généré par l’événement d’entrée.</span><span class="sxs-lookup"><span data-stu-id="f103e-107">The system calls this function after an input event occurs in a dialog box, message box, menu, or scroll bar, but before the message generated by the input event is processed.</span></span>
<span data-ttu-id="f103e-108">La procédure de hook peut surveiller les messages d’une boîte de dialogue, d’une boîte de message, d’un menu ou d’une barre de défilement créée par une application particulière ou toutes les applications.</span><span class="sxs-lookup"><span data-stu-id="f103e-108">The hook procedure can monitor messages for a dialog box, message box, menu, or scroll bar created by a particular application or all applications.</span></span>

<span data-ttu-id="f103e-109">Le type **HOOKPROC** définit un pointeur vers cette fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="f103e-109">The **HOOKPROC** type defines a pointer to this callback function.</span></span>
<span data-ttu-id="f103e-110">**MessageProc** est un espace réservé pour le nom de la fonction définie par l’application ou par la bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="f103e-110">**MessageProc** is a placeholder for the application-defined or library-defined function name.</span></span>

```cpp
LRESULT CALLBACK MessageProc(
  _In_ int    code,
       WPARAM wParam,
  _In_ LPARAM lParam
);
```

## <a name="parameters"></a><span data-ttu-id="f103e-111">Paramètres</span><span class="sxs-lookup"><span data-stu-id="f103e-111">Parameters</span></span>

### <a name="code-in"></a><span data-ttu-id="f103e-112">Code [in]</span><span class="sxs-lookup"><span data-stu-id="f103e-112">code [in]</span></span>

<span data-ttu-id="f103e-113">Type : **int**</span><span class="sxs-lookup"><span data-stu-id="f103e-113">Type: **int**</span></span>

<span data-ttu-id="f103e-114">Type d’événement d’entrée qui a généré le message.</span><span class="sxs-lookup"><span data-stu-id="f103e-114">The type of input event that generated the message.</span></span>
<span data-ttu-id="f103e-115">Si le *code* est inférieur à zéro, la procédure de raccordement doit passer le message à la fonction [CallNextHookEx](/windows/desktop/api/winuser/nf-winuser-callnexthookex) sans traitement supplémentaire et retourner la valeur retournée par **CallNextHookEx**.</span><span class="sxs-lookup"><span data-stu-id="f103e-115">If *code* is less than zero, the hook procedure must pass the message to the [CallNextHookEx](/windows/desktop/api/winuser/nf-winuser-callnexthookex) function without further processing and return the value returned by **CallNextHookEx**.</span></span>
<span data-ttu-id="f103e-116">Ce paramètre peut prendre les valeurs suivantes.</span><span class="sxs-lookup"><span data-stu-id="f103e-116">This parameter can be one of the following values.</span></span>

| <span data-ttu-id="f103e-117">Valeur</span><span class="sxs-lookup"><span data-stu-id="f103e-117">Value</span></span> | <span data-ttu-id="f103e-118">Signification</span><span class="sxs-lookup"><span data-stu-id="f103e-118">Meaning</span></span> |
|-------|---------|
| <span data-ttu-id="f103e-119">**MSGF_DDEMGR** 0x8001</span><span class="sxs-lookup"><span data-stu-id="f103e-119">**MSGF_DDEMGR** 0x8001</span></span> | <span data-ttu-id="f103e-120">L’événement d’entrée s’est produit lors de échange dynamique de données l’attente de la fin d’une transaction synchrone par la DDEML Management Library ().</span><span class="sxs-lookup"><span data-stu-id="f103e-120">The input event occurred while the Dynamic Data Exchange Management Library (DDEML) was waiting for a synchronous transaction to finish.</span></span> <span data-ttu-id="f103e-121">Pour plus d’informations sur DDEML, consultez [bibliothèque de gestion des échange dynamique de données](../dataxchg/dynamic-data-exchange-management-library.md).</span><span class="sxs-lookup"><span data-stu-id="f103e-121">For more information about DDEML, see [Dynamic Data Exchange Management Library](../dataxchg/dynamic-data-exchange-management-library.md).</span></span> |
| <span data-ttu-id="f103e-122">**MSGF_DIALOGBOX** 0</span><span class="sxs-lookup"><span data-stu-id="f103e-122">**MSGF_DIALOGBOX** 0</span></span> | <span data-ttu-id="f103e-123">L’événement d’entrée s’est produit dans une boîte de message ou une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="f103e-123">The input event occurred in a message box or dialog box.</span></span> |
| <span data-ttu-id="f103e-124">**MSGF_MENU** 2</span><span class="sxs-lookup"><span data-stu-id="f103e-124">**MSGF_MENU** 2</span></span> | <span data-ttu-id="f103e-125">L’événement d’entrée s’est produit dans un menu.</span><span class="sxs-lookup"><span data-stu-id="f103e-125">The input event occurred in a menu.</span></span> |
| <span data-ttu-id="f103e-126">**MSGF_SCROLLBAR** 5</span><span class="sxs-lookup"><span data-stu-id="f103e-126">**MSGF_SCROLLBAR** 5</span></span> | <span data-ttu-id="f103e-127">L’événement d’entrée s’est produit dans une barre de défilement.</span><span class="sxs-lookup"><span data-stu-id="f103e-127">The input event occurred in a scroll bar.</span></span> |

### <a name="wparam"></a><span data-ttu-id="f103e-128">wParam</span><span class="sxs-lookup"><span data-stu-id="f103e-128">wParam</span></span>

<span data-ttu-id="f103e-129">Type : **wParam**</span><span class="sxs-lookup"><span data-stu-id="f103e-129">Type: **WPARAM**</span></span>

<span data-ttu-id="f103e-130">Ce paramètre n'est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="f103e-130">This parameter is not used.</span></span>

### <a name="lparam-in"></a><span data-ttu-id="f103e-131">lParam [in]</span><span class="sxs-lookup"><span data-stu-id="f103e-131">lParam [in]</span></span>

<span data-ttu-id="f103e-132">Type : **lParam**</span><span class="sxs-lookup"><span data-stu-id="f103e-132">Type: **LPARAM**</span></span>

<span data-ttu-id="f103e-133">Pointeur vers une structure [MSG](/windows/win32/api/winuser/ns-winuser-msg) .</span><span class="sxs-lookup"><span data-stu-id="f103e-133">A pointer to an [MSG](/windows/win32/api/winuser/ns-winuser-msg) structure.</span></span>

## <a name="returns"></a><span data-ttu-id="f103e-134">Retours</span><span class="sxs-lookup"><span data-stu-id="f103e-134">Returns</span></span>

<span data-ttu-id="f103e-135">Type : **LRESULT**</span><span class="sxs-lookup"><span data-stu-id="f103e-135">Type: **LRESULT**</span></span>

<span data-ttu-id="f103e-136">Si le *code* est inférieur à zéro, la procédure de raccordement doit retourner la valeur retournée par **CallNextHookEx**.</span><span class="sxs-lookup"><span data-stu-id="f103e-136">If *code* is less than zero, the hook procedure must return the value returned by **CallNextHookEx**.</span></span>

<span data-ttu-id="f103e-137">Si le *code* est supérieur ou égal à zéro et que la procédure de hook n’a pas traité le message, il est fortement recommandé d’appeler **CallNextHookEx** et de retourner la valeur qu’il retourne ; dans le cas contraire, les autres applications qui ont installé [WH_MSGFILTER](about-hooks.md) hooks ne recevront pas de notifications de raccordement et pourront se comporter de manière incorrecte.</span><span class="sxs-lookup"><span data-stu-id="f103e-137">If *code* is greater than or equal to zero, and the hook procedure did not process the message, it is highly recommended that you call **CallNextHookEx** and return the value it returns; otherwise, other applications that have installed [WH_MSGFILTER](about-hooks.md) hooks will not receive hook notifications and may behave incorrectly as a result.</span></span>
<span data-ttu-id="f103e-138">Si la procédure de Hook a traité le message, elle peut retourner une valeur différente de zéro pour empêcher le système de transmettre le message au reste de la chaîne de raccordement ou à la procédure de fenêtre cible.</span><span class="sxs-lookup"><span data-stu-id="f103e-138">If the hook procedure processed the message, it may return a nonzero value to prevent the system from passing the message to the rest of the hook chain or the target window procedure.</span></span>

## <a name="remarks"></a><span data-ttu-id="f103e-139">Notes</span><span class="sxs-lookup"><span data-stu-id="f103e-139">Remarks</span></span>

<span data-ttu-id="f103e-140">Une application installe la procédure de raccordement en spécifiant le type de hook **WH_MSGFILTER** et un pointeur vers la procédure de Hook dans un appel à la fonction **SetWindowsHookEx** .</span><span class="sxs-lookup"><span data-stu-id="f103e-140">An application installs the hook procedure by specifying the **WH_MSGFILTER** hook type and a pointer to the hook procedure in a call to the **SetWindowsHookEx** function.</span></span>

<span data-ttu-id="f103e-141">Si une application qui utilise DDEML et exécute des transactions synchrones doit traiter des messages avant qu’ils ne soient distribués, elle doit utiliser le hook **WH_MSGFILTER** .</span><span class="sxs-lookup"><span data-stu-id="f103e-141">If an application that uses the DDEML and performs synchronous transactions must process messages before they are dispatched, it must use the **WH_MSGFILTER** hook.</span></span>

## <a name="see-also"></a><span data-ttu-id="f103e-142">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f103e-142">See also</span></span>

[<span data-ttu-id="f103e-143">CallNextHookEx</span><span class="sxs-lookup"><span data-stu-id="f103e-143">CallNextHookEx</span></span>](/windows/desktop/api/winuser/nf-winuser-callnexthookex)

[<span data-ttu-id="f103e-144">SetWindowsHookEx</span><span class="sxs-lookup"><span data-stu-id="f103e-144">SetWindowsHookEx</span></span>](/windows/desktop/api/winuser/nf-winuser-setwindowshookexw)

[<span data-ttu-id="f103e-145">FRAGMENT</span><span class="sxs-lookup"><span data-stu-id="f103e-145">MSG</span></span>](/windows/win32/api/winuser/ns-winuser-msg)

[<span data-ttu-id="f103e-146">Hooks</span><span class="sxs-lookup"><span data-stu-id="f103e-146">Hooks</span></span>](hooks.md)
