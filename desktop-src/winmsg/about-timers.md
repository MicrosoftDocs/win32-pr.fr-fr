---
description: Cette rubrique explique comment créer, identifier, définir et supprimer des minuteries.
ms.assetid: 509a6fc4-ddee-4ff4-88a2-25dad4c48c2f
title: À propos des minuteries
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b3163dbfd5357de516e0202665cd76d017335593
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103953099"
---
# <a name="about-timers"></a><span data-ttu-id="79530-103">À propos des minuteries</span><span class="sxs-lookup"><span data-stu-id="79530-103">About Timers</span></span>

<span data-ttu-id="79530-104">Cette rubrique explique comment créer, identifier, définir et supprimer des minuteries.</span><span class="sxs-lookup"><span data-stu-id="79530-104">This topic describes how to create, identify, set, and delete timers.</span></span> <span data-ttu-id="79530-105">Une application utilise un minuteur pour planifier un événement pour une fenêtre après l’expiration d’un délai spécifié.</span><span class="sxs-lookup"><span data-stu-id="79530-105">An application uses a timer to schedule an event for a window after a specified time has elapsed.</span></span> <span data-ttu-id="79530-106">Chaque fois que l’intervalle spécifié (ou la valeur du délai d’attente) d’un minuteur est écoulé, le système avertit la fenêtre associée à la minuterie.</span><span class="sxs-lookup"><span data-stu-id="79530-106">Each time the specified interval (or time-out value) for a timer elapses, the system notifies the window associated with the timer.</span></span> <span data-ttu-id="79530-107">Étant donné que la précision d’un minuteur dépend de la fréquence d’horloge du système et de la fréquence à laquelle l’application récupère les messages de la file d’attente de messages, la valeur du délai d’attente est uniquement approximative.</span><span class="sxs-lookup"><span data-stu-id="79530-107">Because a timer's accuracy depends on the system clock rate and how often the application retrieves messages from the message queue, the time-out value is only approximate.</span></span>

<span data-ttu-id="79530-108">Cette rubrique comprend les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="79530-108">This topic includes the following sections.</span></span>

-   [<span data-ttu-id="79530-109">Opérations du minuteur</span><span class="sxs-lookup"><span data-stu-id="79530-109">Timer Operations</span></span>](#timer-operations)
-   [<span data-ttu-id="79530-110">Minuteur de haute résolution</span><span class="sxs-lookup"><span data-stu-id="79530-110">High-Resolution Timer</span></span>](#high-resolution-timer)
-   [<span data-ttu-id="79530-111">Objets Timer waitables</span><span class="sxs-lookup"><span data-stu-id="79530-111">Waitable Timer Objects</span></span>](#waitable-timer-objects)
-   [<span data-ttu-id="79530-112">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="79530-112">Related topics</span></span>](#related-topics)

## <a name="timer-operations"></a><span data-ttu-id="79530-113">Opérations du minuteur</span><span class="sxs-lookup"><span data-stu-id="79530-113">Timer Operations</span></span>

<span data-ttu-id="79530-114">Les applications créent des minuteurs à l’aide de la fonction [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer) .</span><span class="sxs-lookup"><span data-stu-id="79530-114">Applications create timers by using the [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer) function.</span></span> <span data-ttu-id="79530-115">Une nouvelle minuterie commence à chronométrer l’intervalle dès sa création.</span><span class="sxs-lookup"><span data-stu-id="79530-115">A new timer starts timing the interval as soon as it is created.</span></span> <span data-ttu-id="79530-116">Une application peut modifier la valeur du délai d’attente d’un minuteur à l’aide de **SetTimer** et peut détruire un minuteur à l’aide de la fonction [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) .</span><span class="sxs-lookup"><span data-stu-id="79530-116">An application can change a timer's time-out value by using **SetTimer** and can destroy a timer by using the [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) function.</span></span> <span data-ttu-id="79530-117">Pour utiliser efficacement les ressources système, les applications doivent détruire les minuteurs qui ne sont plus nécessaires.</span><span class="sxs-lookup"><span data-stu-id="79530-117">To use system resources efficiently, applications should destroy timers that are no longer necessary.</span></span>

<span data-ttu-id="79530-118">Chaque minuteur possède un identificateur unique.</span><span class="sxs-lookup"><span data-stu-id="79530-118">Each timer has a unique identifier.</span></span> <span data-ttu-id="79530-119">Lorsque vous créez un minuteur, une application peut spécifier un identificateur ou faire en sorte que le système crée une valeur unique.</span><span class="sxs-lookup"><span data-stu-id="79530-119">When creating a timer, an application can either specify an identifier or have the system create a unique value.</span></span> <span data-ttu-id="79530-120">Le premier paramètre d’un message du [**\_ minuteur WM**](wm-timer.md) contient l’identificateur de la minuterie qui a publié le message.</span><span class="sxs-lookup"><span data-stu-id="79530-120">The first parameter of a [**WM\_TIMER**](wm-timer.md) message contains the identifier of the timer that posted the message.</span></span>

<span data-ttu-id="79530-121">Si vous spécifiez un handle de fenêtre dans l’appel à [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer), l’application associe le minuteur à cette fenêtre.</span><span class="sxs-lookup"><span data-stu-id="79530-121">If you specify a window handle in the call to [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer), the application associates the timer with that window.</span></span> <span data-ttu-id="79530-122">Chaque fois que la valeur du délai d’attente de la minuterie s’écoule, le système publie un message de [**\_ minuteur WM**](wm-timer.md) dans la fenêtre associée au minuteur.</span><span class="sxs-lookup"><span data-stu-id="79530-122">Whenever the time-out value for the timer elapses, the system posts a [**WM\_TIMER**](wm-timer.md) message to the window associated with the timer.</span></span> <span data-ttu-id="79530-123">Si aucun handle de fenêtre n’est spécifié dans l’appel à **SetTimer**, l’application qui a créé le minuteur doit surveiller sa file d’attente de messages pour les messages **\_ du minuteur WM** et les distribuer à la fenêtre appropriée.</span><span class="sxs-lookup"><span data-stu-id="79530-123">If no window handle is specified in the call to **SetTimer**, the application that created the timer must monitor its message queue for **WM\_TIMER** messages and dispatch them to the appropriate window.</span></span> <span data-ttu-id="79530-124">Si vous spécifiez une fonction de rappel [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) , la procédure de fenêtre par défaut appelle la fonction de rappel lors du traitement du **\_ minuteur WM**.</span><span class="sxs-lookup"><span data-stu-id="79530-124">If you specify a [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) callback function, the default window procedure calls the callback function when it processes **WM\_TIMER**.</span></span> <span data-ttu-id="79530-125">Par conséquent, vous devez distribuer les messages dans le thread appelant, même si vous utilisez **TimerProc** au lieu de traiter le **\_ minuteur WM**.</span><span class="sxs-lookup"><span data-stu-id="79530-125">Therefore, you need to dispatch messages in the calling thread, even when you use **TimerProc** instead of processing **WM\_TIMER**.</span></span>

<span data-ttu-id="79530-126">Si vous souhaitez être averti quand un minuteur s’écoule, utilisez un minuteur qui est attendu.</span><span class="sxs-lookup"><span data-stu-id="79530-126">If you need to be notified when a timer elapses, use a waitable timer.</span></span> <span data-ttu-id="79530-127">Pour plus d’informations, consultez la rubrique [objets Timer waitables](/windows/desktop/Sync/waitable-timer-objects).</span><span class="sxs-lookup"><span data-stu-id="79530-127">For more information, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="high-resolution-timer"></a><span data-ttu-id="79530-128">Minuteur High-Resolution</span><span class="sxs-lookup"><span data-stu-id="79530-128">High-Resolution Timer</span></span>

<span data-ttu-id="79530-129">Un compteur est un terme général utilisé dans la programmation pour faire référence à une variable d’incrémentation.</span><span class="sxs-lookup"><span data-stu-id="79530-129">A counter is a general term used in programming to refer to an incrementing variable.</span></span> <span data-ttu-id="79530-130">Certains systèmes incluent un compteur de performance haute résolution qui fournit des temps de haute résolution.</span><span class="sxs-lookup"><span data-stu-id="79530-130">Some systems include a high-resolution performance counter that provides high-resolution elapsed times.</span></span>

<span data-ttu-id="79530-131">Si un compteur de performance haute résolution existe sur le système, vous pouvez utiliser la fonction [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) pour exprimer la fréquence, en nombre par seconde.</span><span class="sxs-lookup"><span data-stu-id="79530-131">If a high-resolution performance counter exists on the system, you can use the [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) function to express the frequency, in counts per second.</span></span> <span data-ttu-id="79530-132">La valeur du nombre dépend du processeur.</span><span class="sxs-lookup"><span data-stu-id="79530-132">The value of the count is processor dependent.</span></span> <span data-ttu-id="79530-133">Sur certains processeurs, par exemple, le nombre peut être le taux de cycle de l’horloge du processeur.</span><span class="sxs-lookup"><span data-stu-id="79530-133">On some processors, for example, the count might be the cycle rate of the processor clock.</span></span>

<span data-ttu-id="79530-134">La fonction [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) récupère la valeur actuelle du compteur de performance haute résolution.</span><span class="sxs-lookup"><span data-stu-id="79530-134">The [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) function retrieves the current value of the high-resolution performance counter.</span></span> <span data-ttu-id="79530-135">En appelant cette fonction au début et à la fin d’une section de code, une application utilise essentiellement le compteur comme un minuteur haute résolution.</span><span class="sxs-lookup"><span data-stu-id="79530-135">By calling this function at the beginning and end of a section of code, an application essentially uses the counter as a high-resolution timer.</span></span> <span data-ttu-id="79530-136">Par exemple, supposons que [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indique que la fréquence du compteur de performance haute résolution est de 50 000 nombres par seconde.</span><span class="sxs-lookup"><span data-stu-id="79530-136">For example, suppose that [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indicates that the frequency of the high-resolution performance counter is 50,000 counts per second.</span></span> <span data-ttu-id="79530-137">Si l’application appelle **QueryPerformanceCounter** juste avant et juste après la section de code à chronométrer, les valeurs de compteur peuvent être respectivement 1500 et 3500.</span><span class="sxs-lookup"><span data-stu-id="79530-137">If the application calls **QueryPerformanceCounter** immediately before and immediately after the section of code to be timed, the counter values might be 1500 counts and 3500 counts, respectively.</span></span> <span data-ttu-id="79530-138">Ces valeurs indiquent que .04 secondes (2000) s’est écoulée pendant l’exécution du code.</span><span class="sxs-lookup"><span data-stu-id="79530-138">These values would indicate that .04 seconds (2000 counts) elapsed while the code executed.</span></span>

## <a name="waitable-timer-objects"></a><span data-ttu-id="79530-139">Objets Timer waitables</span><span class="sxs-lookup"><span data-stu-id="79530-139">Waitable Timer Objects</span></span>

<span data-ttu-id="79530-140">Un objet de minuteur qui peut être attendu est un objet de synchronisation dont l’État est défini sur signalé lorsque l’heure d’échéance spécifiée arrive.</span><span class="sxs-lookup"><span data-stu-id="79530-140">A waitable timer object is a synchronization object whose state is set to signaled when the specified due time arrives.</span></span> <span data-ttu-id="79530-141">Il existe deux types de minuteurs qui peuvent être créés : Manuel-réinitialisation et synchronisation.</span><span class="sxs-lookup"><span data-stu-id="79530-141">There are two types of waitable timers that can be created: manual-reset and synchronization.</span></span> <span data-ttu-id="79530-142">Un minuteur de l’un des deux types peut également être un minuteur périodique.</span><span class="sxs-lookup"><span data-stu-id="79530-142">A timer of either type can also be a periodic timer.</span></span>

<span data-ttu-id="79530-143">Un thread utilise la fonction [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) ou [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) pour créer un objet Timer.</span><span class="sxs-lookup"><span data-stu-id="79530-143">A thread uses the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) or [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) function to create a timer object.</span></span> <span data-ttu-id="79530-144">Le thread de création spécifie si la minuterie est un minuteur de réinitialisation manuelle ou un minuteur de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="79530-144">The creating thread specifies whether the timer is a manual-reset timer or a synchronization timer.</span></span> <span data-ttu-id="79530-145">Le thread de création peut spécifier un nom pour l’objet de minuteur.</span><span class="sxs-lookup"><span data-stu-id="79530-145">The creating thread can specify a name for the timer object.</span></span> <span data-ttu-id="79530-146">Les threads d’autres processus peuvent ouvrir un handle vers une minuterie existante en spécifiant son nom dans un appel à la fonction [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="79530-146">Threads in other processes can open a handle to an existing timer by specifying its name in a call to the [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) function.</span></span> <span data-ttu-id="79530-147">Tout thread avec un handle d’objet Timer peut utiliser l’une des fonctions Wait pour attendre que l’état du minuteur soit défini comme signalé.</span><span class="sxs-lookup"><span data-stu-id="79530-147">Any thread with a handle to a timer object can use one of the wait functions to wait for the timer state to be set to signaled.</span></span>

<span data-ttu-id="79530-148">Pour plus d’informations sur l’utilisation d’objets Timer waitables pour la synchronisation de threads, consultez [objets Timer waitables](/windows/desktop/Sync/waitable-timer-objects).</span><span class="sxs-lookup"><span data-stu-id="79530-148">For more information about using waitable timer objects for thread synchronization, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="related-topics"></a><span data-ttu-id="79530-149">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="79530-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="79530-150">Utilisation de minuteurs</span><span class="sxs-lookup"><span data-stu-id="79530-150">Using Timers</span></span>](using-timers.md)
</dt> </dl>

 

 
