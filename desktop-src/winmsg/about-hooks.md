---
description: Cette rubrique explique comment utiliser les raccordements.
ms.assetid: 9ced0ac4-e602-425f-b954-6af9c741699a
title: Vue d’ensemble des hooks
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 36c5d89f111604418d1dc3ea9a4ebce6fe0a8124
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "106534673"
---
# <a name="hooks-overview"></a><span data-ttu-id="151cb-103">Vue d’ensemble des hooks</span><span class="sxs-lookup"><span data-stu-id="151cb-103">Hooks Overview</span></span>

<span data-ttu-id="151cb-104">Un *raccordement* est un mécanisme par lequel une application peut intercepter des événements, tels que des messages, des actions de la souris et des séquences de touches.</span><span class="sxs-lookup"><span data-stu-id="151cb-104">A *hook* is a mechanism by which an application can intercept events, such as messages, mouse actions, and keystrokes.</span></span> <span data-ttu-id="151cb-105">Une fonction qui intercepte un type particulier d’événement est appelée procédure de *raccordement*.</span><span class="sxs-lookup"><span data-stu-id="151cb-105">A function that intercepts a particular type of event is known as a *hook procedure*.</span></span> <span data-ttu-id="151cb-106">Une procédure de raccordement peut agir sur chaque événement qu’elle reçoit, puis modifier ou ignorer l’événement.</span><span class="sxs-lookup"><span data-stu-id="151cb-106">A hook procedure can act on each event it receives, and then modify or discard the event.</span></span>

<span data-ttu-id="151cb-107">Voici quelques exemples d’utilisation de Hooks :</span><span class="sxs-lookup"><span data-stu-id="151cb-107">The following some example uses for hooks:</span></span>

-   <span data-ttu-id="151cb-108">Surveiller les messages à des fins de débogage</span><span class="sxs-lookup"><span data-stu-id="151cb-108">Monitor messages for debugging purposes</span></span>
-   <span data-ttu-id="151cb-109">Fournir la prise en charge de l’enregistrement et de la lecture des macros</span><span class="sxs-lookup"><span data-stu-id="151cb-109">Provide support for recording and playback of macros</span></span>
-   <span data-ttu-id="151cb-110">Fournir la prise en charge d’une touche d’aide (F1)</span><span class="sxs-lookup"><span data-stu-id="151cb-110">Provide support for a help key (F1)</span></span>
-   <span data-ttu-id="151cb-111">Simuler une entrée de souris et de clavier</span><span class="sxs-lookup"><span data-stu-id="151cb-111">Simulate mouse and keyboard input</span></span>
-   <span data-ttu-id="151cb-112">Implémenter une application de formation basée sur ordinateur (CBT)</span><span class="sxs-lookup"><span data-stu-id="151cb-112">Implement a computer-based training (CBT) application</span></span>

> [!Note]  
> <span data-ttu-id="151cb-113">Les raccordements tendent à ralentir le système, car ils augmentent la quantité de traitement que le système doit effectuer pour chaque message.</span><span class="sxs-lookup"><span data-stu-id="151cb-113">Hooks tend to slow down the system because they increase the amount of processing the system must perform for each message.</span></span> <span data-ttu-id="151cb-114">Vous devez installer un hook uniquement lorsque cela est nécessaire et le supprimer dès que possible.</span><span class="sxs-lookup"><span data-stu-id="151cb-114">You should install a hook only when necessary, and remove it as soon as possible.</span></span>

 

<span data-ttu-id="151cb-115">Cette section aborde les points suivants :</span><span class="sxs-lookup"><span data-stu-id="151cb-115">This section discusses the following:</span></span>

-   [<span data-ttu-id="151cb-116">Chaînes de raccordement</span><span class="sxs-lookup"><span data-stu-id="151cb-116">Hook Chains</span></span>](#hook-chains)
-   [<span data-ttu-id="151cb-117">Procédures de Hook</span><span class="sxs-lookup"><span data-stu-id="151cb-117">Hook Procedures</span></span>](#hook-procedures)
-   [<span data-ttu-id="151cb-118">Types de raccordement</span><span class="sxs-lookup"><span data-stu-id="151cb-118">Hook Types</span></span>](#hook-types)
    -   [<span data-ttu-id="151cb-119">\_CALLWNDPROC et WH \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="151cb-119">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
    -   [<span data-ttu-id="151cb-120">WH \_ CBT</span><span class="sxs-lookup"><span data-stu-id="151cb-120">WH\_CBT</span></span>](#wh_cbt)
    -   [<span data-ttu-id="151cb-121">WH \_ débogage</span><span class="sxs-lookup"><span data-stu-id="151cb-121">WH\_DEBUG</span></span>](#wh_debug)
    -   [<span data-ttu-id="151cb-122">WH \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="151cb-122">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
    -   [<span data-ttu-id="151cb-123">WH \_ GETMESSAGE</span><span class="sxs-lookup"><span data-stu-id="151cb-123">WH\_GETMESSAGE</span></span>](#wh_getmessage)
    -   [<span data-ttu-id="151cb-124">WH \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="151cb-124">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
    -   [<span data-ttu-id="151cb-125">WH \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="151cb-125">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
    -   [<span data-ttu-id="151cb-126">jusqu’au \_ clavier \_</span><span class="sxs-lookup"><span data-stu-id="151cb-126">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
    -   [<span data-ttu-id="151cb-127">\_clavier WH</span><span class="sxs-lookup"><span data-stu-id="151cb-127">WH\_KEYBOARD</span></span>](#wh_keyboard)
    -   [<span data-ttu-id="151cb-128">à \_ la \_ une</span><span class="sxs-lookup"><span data-stu-id="151cb-128">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
    -   [<span data-ttu-id="151cb-129">à \_ la souris</span><span class="sxs-lookup"><span data-stu-id="151cb-129">WH\_MOUSE</span></span>](#wh_mouse)
    -   [<span data-ttu-id="151cb-130">\_Msgfilter et WH \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="151cb-130">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
    -   [<span data-ttu-id="151cb-131">WH \_ Shell</span><span class="sxs-lookup"><span data-stu-id="151cb-131">WH\_SHELL</span></span>](#wh_shell)

## <a name="hook-chains"></a><span data-ttu-id="151cb-132">Chaînes de raccordement</span><span class="sxs-lookup"><span data-stu-id="151cb-132">Hook Chains</span></span>

<span data-ttu-id="151cb-133">Le système prend en charge de nombreux types différents de raccordements ; chaque type fournit l’accès à un aspect différent de son mécanisme de gestion des messages.</span><span class="sxs-lookup"><span data-stu-id="151cb-133">The system supports many different types of hooks; each type provides access to a different aspect of its message-handling mechanism.</span></span> <span data-ttu-id="151cb-134">Par exemple, une application peut utiliser le crochet de la [ \_ souris](#wh_mouse) pour surveiller le trafic des messages pour les messages de la souris.</span><span class="sxs-lookup"><span data-stu-id="151cb-134">For example, an application can use the [WH\_MOUSE](#wh_mouse) hook to monitor the message traffic for mouse messages.</span></span>

<span data-ttu-id="151cb-135">Le système gère une chaîne de raccordement distincte pour chaque type de raccordement.</span><span class="sxs-lookup"><span data-stu-id="151cb-135">The system maintains a separate hook chain for each type of hook.</span></span> <span data-ttu-id="151cb-136">Une *chaîne de raccordement* est une liste de pointeurs vers des fonctions spéciales de rappel définies par l’application appelées *procédures de raccordement*.</span><span class="sxs-lookup"><span data-stu-id="151cb-136">A *hook chain* is a list of pointers to special, application-defined callback functions called *hook procedures*.</span></span> <span data-ttu-id="151cb-137">Lorsqu’un message est associé à un type particulier de Hook, le système transmet le message à chaque procédure de raccordement référencée dans la chaîne de raccordement, l’une après l’autre.</span><span class="sxs-lookup"><span data-stu-id="151cb-137">When a message occurs that is associated with a particular type of hook, the system passes the message to each hook procedure referenced in the hook chain, one after the other.</span></span> <span data-ttu-id="151cb-138">L’action qu’une procédure de hook peut prendre dépend du type de raccordement impliqué.</span><span class="sxs-lookup"><span data-stu-id="151cb-138">The action a hook procedure can take depends on the type of hook involved.</span></span> <span data-ttu-id="151cb-139">Les procédures de Hook pour certains types de raccordements peuvent uniquement analyser les messages ; d’autres personnes peuvent modifier des messages ou arrêter leur progression dans la chaîne, ce qui les empêche d’atteindre la procédure de hook suivante ou la fenêtre de destination.</span><span class="sxs-lookup"><span data-stu-id="151cb-139">The hook procedures for some types of hooks can only monitor messages; others can modify messages or stop their progress through the chain, preventing them from reaching the next hook procedure or the destination window.</span></span>

## <a name="hook-procedures"></a><span data-ttu-id="151cb-140">Procédures de Hook</span><span class="sxs-lookup"><span data-stu-id="151cb-140">Hook Procedures</span></span>

<span data-ttu-id="151cb-141">Pour tirer parti d’un type particulier de raccordement, le développeur fournit une procédure de raccordement et utilise la fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) pour l’installer dans la chaîne associée au Hook.</span><span class="sxs-lookup"><span data-stu-id="151cb-141">To take advantage of a particular type of hook, the developer provides a hook procedure and uses the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function to install it into the chain associated with the hook.</span></span> <span data-ttu-id="151cb-142">Une procédure de raccordement doit avoir la syntaxe suivante :</span><span class="sxs-lookup"><span data-stu-id="151cb-142">A hook procedure must have the following syntax:</span></span>

``` syntax
LRESULT CALLBACK HookProc(
  int nCode, 
  WPARAM wParam, 
  LPARAM lParam
)
{
   // process event
   ...

   return CallNextHookEx(NULL, nCode, wParam, lParam);
}
```

<span data-ttu-id="151cb-143">*HookProc* est un espace réservé pour un nom défini par l’application.</span><span class="sxs-lookup"><span data-stu-id="151cb-143">*HookProc* is a placeholder for an application-defined name.</span></span>

<span data-ttu-id="151cb-144">Le paramètre *nCode* est un code de raccordement que la procédure de raccordement utilise pour déterminer l’action à effectuer.</span><span class="sxs-lookup"><span data-stu-id="151cb-144">The *nCode* parameter is a hook code that the hook procedure uses to determine the action to perform.</span></span> <span data-ttu-id="151cb-145">La valeur du code de raccordement dépend du type du hook ; chaque type possède son propre ensemble de codes de raccordement.</span><span class="sxs-lookup"><span data-stu-id="151cb-145">The value of the hook code depends on the type of the hook; each type has its own characteristic set of hook codes.</span></span> <span data-ttu-id="151cb-146">Les valeurs des paramètres *wParam* et *lParam* dépendent du code de Hook, mais elles contiennent généralement des informations sur un message qui a été envoyé ou publié.</span><span class="sxs-lookup"><span data-stu-id="151cb-146">The values of the *wParam* and *lParam* parameters depend on the hook code, but they typically contain information about a message that was sent or posted.</span></span>

<span data-ttu-id="151cb-147">La fonction [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) installe toujours une procédure de raccordement au début d’une chaîne de raccordement.</span><span class="sxs-lookup"><span data-stu-id="151cb-147">The [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function always installs a hook procedure at the beginning of a hook chain.</span></span> <span data-ttu-id="151cb-148">Lorsqu’un événement qui est surveillé par un type de raccordement particulier est détecté, le système appelle la procédure au début de la chaîne de raccordement associée au Hook.</span><span class="sxs-lookup"><span data-stu-id="151cb-148">When an event occurs that is monitored by a particular type of hook, the system calls the procedure at the beginning of the hook chain associated with the hook.</span></span> <span data-ttu-id="151cb-149">Chaque procédure de raccordement dans la chaîne détermine s’il faut passer l’événement à la procédure suivante.</span><span class="sxs-lookup"><span data-stu-id="151cb-149">Each hook procedure in the chain determines whether to pass the event to the next procedure.</span></span> <span data-ttu-id="151cb-150">Une procédure de hook transmet un événement à la procédure suivante en appelant la fonction [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) .</span><span class="sxs-lookup"><span data-stu-id="151cb-150">A hook procedure passes an event to the next procedure by calling the [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) function.</span></span>

<span data-ttu-id="151cb-151">Notez que les procédures de Hook pour certains types de raccordements peuvent uniquement analyser les messages.</span><span class="sxs-lookup"><span data-stu-id="151cb-151">Note that the hook procedures for some types of hooks can only monitor messages.</span></span> <span data-ttu-id="151cb-152">le système transmet les messages à chaque procédure de raccordement, qu’une procédure particulière appelle [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex)ou non.</span><span class="sxs-lookup"><span data-stu-id="151cb-152">the system passes messages to each hook procedure, regardless of whether a particular procedure calls [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex).</span></span>

<span data-ttu-id="151cb-153">Un *raccordement global* surveille les messages de tous les threads dans le même bureau que le thread appelant.</span><span class="sxs-lookup"><span data-stu-id="151cb-153">A *global hook* monitors messages for all threads in the same desktop as the calling thread.</span></span> <span data-ttu-id="151cb-154">Un *raccordement propre au thread* surveille uniquement les messages d’un thread individuel.</span><span class="sxs-lookup"><span data-stu-id="151cb-154">A *thread-specific hook* monitors messages for only an individual thread.</span></span> <span data-ttu-id="151cb-155">Une procédure de raccordement globale peut être appelée dans le contexte d’une application dans le même bureau que le thread appelant, de sorte que la procédure doit se trouver dans un module DLL distinct.</span><span class="sxs-lookup"><span data-stu-id="151cb-155">A global hook procedure can be called in the context of any application in the same desktop as the calling thread, so the procedure must be in a separate DLL module.</span></span> <span data-ttu-id="151cb-156">Une procédure de hook spécifique au thread est appelée uniquement dans le contexte du thread associé.</span><span class="sxs-lookup"><span data-stu-id="151cb-156">A thread-specific hook procedure is called only in the context of the associated thread.</span></span> <span data-ttu-id="151cb-157">Si une application installe une procédure de Hook pour l’un de ses propres threads, la procédure de raccordement peut être dans le même module que le reste du code de l’application ou dans une DLL.</span><span class="sxs-lookup"><span data-stu-id="151cb-157">If an application installs a hook procedure for one of its own threads, the hook procedure can be in either the same module as the rest of the application's code or in a DLL.</span></span> <span data-ttu-id="151cb-158">Si l’application installe une procédure de Hook pour un thread d’une autre application, la procédure doit se trouver dans une DLL.</span><span class="sxs-lookup"><span data-stu-id="151cb-158">If the application installs a hook procedure for a thread of a different application, the procedure must be in a DLL.</span></span> <span data-ttu-id="151cb-159">Pour plus d’informations, consultez [bibliothèques de liens dynamiques](../dlls/dynamic-link-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="151cb-159">For information, see [Dynamic-Link Libraries](../dlls/dynamic-link-libraries.md).</span></span>

> [!Note]  
> <span data-ttu-id="151cb-160">Vous devez utiliser des crochets globaux uniquement à des fins de débogage. dans le cas contraire, vous devez les éviter.</span><span class="sxs-lookup"><span data-stu-id="151cb-160">You should use global hooks only for debugging purposes; otherwise, you should avoid them.</span></span> <span data-ttu-id="151cb-161">Les raccordements globaux ont un impact sur les performances du système et provoquent des conflits avec d’autres applications qui implémentent le même type de hook global.</span><span class="sxs-lookup"><span data-stu-id="151cb-161">Global hooks hurt system performance and cause conflicts with other applications that implement the same type of global hook.</span></span>

 

## <a name="hook-types"></a><span data-ttu-id="151cb-162">Types de raccordement</span><span class="sxs-lookup"><span data-stu-id="151cb-162">Hook Types</span></span>

<span data-ttu-id="151cb-163">Chaque type de raccordement permet à une application de surveiller un aspect différent du mécanisme de gestion des messages du système.</span><span class="sxs-lookup"><span data-stu-id="151cb-163">Each type of hook enables an application to monitor a different aspect of the system's message-handling mechanism.</span></span> <span data-ttu-id="151cb-164">Les sections suivantes décrivent les crochets disponibles.</span><span class="sxs-lookup"><span data-stu-id="151cb-164">The following sections describe the available hooks.</span></span>

-   [<span data-ttu-id="151cb-165">\_CALLWNDPROC et WH \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="151cb-165">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
-   [<span data-ttu-id="151cb-166">WH \_ CBT</span><span class="sxs-lookup"><span data-stu-id="151cb-166">WH\_CBT</span></span>](#wh_cbt)
-   [<span data-ttu-id="151cb-167">WH \_ débogage</span><span class="sxs-lookup"><span data-stu-id="151cb-167">WH\_DEBUG</span></span>](#wh_debug)
-   [<span data-ttu-id="151cb-168">WH \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="151cb-168">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
-   [<span data-ttu-id="151cb-169">WH \_ GETMESSAGE</span><span class="sxs-lookup"><span data-stu-id="151cb-169">WH\_GETMESSAGE</span></span>](#wh_getmessage)
-   [<span data-ttu-id="151cb-170">WH \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="151cb-170">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
-   [<span data-ttu-id="151cb-171">WH \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="151cb-171">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
-   [<span data-ttu-id="151cb-172">jusqu’au \_ clavier \_</span><span class="sxs-lookup"><span data-stu-id="151cb-172">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
-   [<span data-ttu-id="151cb-173">\_clavier WH</span><span class="sxs-lookup"><span data-stu-id="151cb-173">WH\_KEYBOARD</span></span>](#wh_keyboard)
-   [<span data-ttu-id="151cb-174">à \_ la \_ une</span><span class="sxs-lookup"><span data-stu-id="151cb-174">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
-   [<span data-ttu-id="151cb-175">à \_ la souris</span><span class="sxs-lookup"><span data-stu-id="151cb-175">WH\_MOUSE</span></span>](#wh_mouse)
-   [<span data-ttu-id="151cb-176">\_Msgfilter et WH \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="151cb-176">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
-   [<span data-ttu-id="151cb-177">WH \_ Shell</span><span class="sxs-lookup"><span data-stu-id="151cb-177">WH\_SHELL</span></span>](#wh_shell)

### <a name="wh_callwndproc-and-wh_callwndprocret"></a><span data-ttu-id="151cb-178">\_CALLWNDPROC et WH \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="151cb-178">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>

<span data-ttu-id="151cb-179">Les hooks **WH \_ CALLWNDPROC** et **WH \_ CALLWNDPROCRET** vous permettent de surveiller les messages envoyés aux procédures de fenêtre.</span><span class="sxs-lookup"><span data-stu-id="151cb-179">The **WH\_CALLWNDPROC** and **WH\_CALLWNDPROCRET** hooks enable you to monitor messages sent to window procedures.</span></span> <span data-ttu-id="151cb-180">Le système appelle une procédure de hook **BL \_ CALLWNDPROC** avant de transmettre le message à la procédure de la fenêtre de réception, puis appelle la procédure de hook **BL \_ CALLWNDPROCRET** une fois que la procédure de fenêtre a traité le message.</span><span class="sxs-lookup"><span data-stu-id="151cb-180">The system calls a **WH\_CALLWNDPROC** hook procedure before passing the message to the receiving window procedure, and calls the **WH\_CALLWNDPROCRET** hook procedure after the window procedure has processed the message.</span></span>

<span data-ttu-id="151cb-181">Le **Hook \_ CALLWNDPROCRET** transmet un pointeur vers une structure [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) à la procédure de raccordement.</span><span class="sxs-lookup"><span data-stu-id="151cb-181">The **WH\_CALLWNDPROCRET** hook passes a pointer to a [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) structure to the hook procedure.</span></span> <span data-ttu-id="151cb-182">La structure contient la valeur de retour de la procédure de fenêtre qui a traité le message, ainsi que les paramètres de message associés au message.</span><span class="sxs-lookup"><span data-stu-id="151cb-182">The structure contains the return value from the window procedure that processed the message, as well as the message parameters associated with the message.</span></span> <span data-ttu-id="151cb-183">La sous-classement de la fenêtre ne fonctionne pas pour les messages définis entre les processus.</span><span class="sxs-lookup"><span data-stu-id="151cb-183">Subclassing the window does not work for messages set between processes.</span></span>

<span data-ttu-id="151cb-184">Pour plus d’informations, consultez les fonctions de rappel [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) et [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc) .</span><span class="sxs-lookup"><span data-stu-id="151cb-184">For more information, see the [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) and [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc) callback functions.</span></span>

### <a name="wh_cbt"></a><span data-ttu-id="151cb-185">WH \_ CBT</span><span class="sxs-lookup"><span data-stu-id="151cb-185">WH\_CBT</span></span>

<span data-ttu-id="151cb-186">Le système appelle une procédure de raccordement de la file d’attente de **\_ jeton** de fin avant l’activation, la création, la destruction, la minimisation, l’agrandissement, le déplacement ou le redimensionnement d’une fenêtre, avant d’exécuter une commande système ; avant de supprimer un événement de souris ou de clavier de la file d’attente des messages système ; avant de définir le focus d’entrée</span><span class="sxs-lookup"><span data-stu-id="151cb-186">The system calls a **WH\_CBT** hook procedure before activating, creating, destroying, minimizing, maximizing, moving, or sizing a window; before completing a system command; before removing a mouse or keyboard event from the system message queue; before setting the input focus; or before synchronizing with the system message queue.</span></span> <span data-ttu-id="151cb-187">La valeur retournée par la procédure de raccordement détermine si le système autorise ou empêche l’une de ces opérations.</span><span class="sxs-lookup"><span data-stu-id="151cb-187">The value the hook procedure returns determines whether the system allows or prevents one of these operations.</span></span> <span data-ttu-id="151cb-188">Le **point \_ de connexion WH** est principalement destiné aux applications de formation basées sur ordinateur (CBT).</span><span class="sxs-lookup"><span data-stu-id="151cb-188">The **WH\_CBT** hook is intended primarily for computer-based training (CBT) applications.</span></span>

<span data-ttu-id="151cb-189">Pour plus d’informations, consultez la fonction de rappel [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-189">For more information, see the [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) callback function.</span></span>

<span data-ttu-id="151cb-190">Pour plus d’informations, consultez [winEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span><span class="sxs-lookup"><span data-stu-id="151cb-190">For information, see [WinEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span></span>

### <a name="wh_debug"></a><span data-ttu-id="151cb-191">WH \_ débogage</span><span class="sxs-lookup"><span data-stu-id="151cb-191">WH\_DEBUG</span></span>

<span data-ttu-id="151cb-192">Le système appelle une procédure de hook de **\_ débogage WH** avant d’appeler des procédures de raccordement associées à un autre raccordement dans le système.</span><span class="sxs-lookup"><span data-stu-id="151cb-192">The system calls a **WH\_DEBUG** hook procedure before calling hook procedures associated with any other hook in the system.</span></span> <span data-ttu-id="151cb-193">Vous pouvez utiliser ce hook pour déterminer s’il faut autoriser le système à appeler des procédures de raccordement associées à d’autres types de raccordements.</span><span class="sxs-lookup"><span data-stu-id="151cb-193">You can use this hook to determine whether to allow the system to call hook procedures associated with other types of hooks.</span></span>

<span data-ttu-id="151cb-194">Pour plus d’informations, consultez la fonction de rappel [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-194">For more information, see the [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) callback function.</span></span>

### <a name="wh_foregroundidle"></a><span data-ttu-id="151cb-195">WH \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="151cb-195">WH\_FOREGROUNDIDLE</span></span>

<span data-ttu-id="151cb-196">Le **Hook \_ FOREGROUNDIDLE** vous permet d’effectuer des tâches de faible priorité pendant les périodes pendant lesquelles son thread de premier plan est inactif.</span><span class="sxs-lookup"><span data-stu-id="151cb-196">The **WH\_FOREGROUNDIDLE** hook enables you to perform low priority tasks during times when its foreground thread is idle.</span></span> <span data-ttu-id="151cb-197">Le système appelle une procédure de hook **BL \_ FOREGROUNDIDLE** lorsque le thread de premier plan de l’application est sur le d’être inactif.</span><span class="sxs-lookup"><span data-stu-id="151cb-197">The system calls a **WH\_FOREGROUNDIDLE** hook procedure when the application's foreground thread is about to become idle.</span></span>

<span data-ttu-id="151cb-198">Pour plus d’informations, consultez la fonction de rappel [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-198">For more information, see the [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) callback function.</span></span>

### <a name="wh_getmessage"></a><span data-ttu-id="151cb-199">WH \_ GETMESSAGE</span><span class="sxs-lookup"><span data-stu-id="151cb-199">WH\_GETMESSAGE</span></span>

<span data-ttu-id="151cb-200">Le hook de **WH \_ GETMESSAGE** permet à une application de surveiller les messages qui sont retournés par la fonction [**GETMESSAGE**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="151cb-200">The **WH\_GETMESSAGE** hook enables an application to monitor messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="151cb-201">Vous pouvez utiliser le **Hook \_ WH** pour surveiller les entrées de souris et de clavier, ainsi que les autres messages publiés dans la file d’attente de messages.</span><span class="sxs-lookup"><span data-stu-id="151cb-201">You can use the **WH\_GETMESSAGE** hook to monitor mouse and keyboard input and other messages posted to the message queue.</span></span>

<span data-ttu-id="151cb-202">Pour plus d’informations, consultez la fonction de rappel [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-202">For more information, see the [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) callback function.</span></span>

### <a name="wh_journalplayback"></a><span data-ttu-id="151cb-203">WH \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="151cb-203">WH\_JOURNALPLAYBACK</span></span>

<span data-ttu-id="151cb-204">Le hook **BL \_ JOURNALPLAYBACK** permet à une application d’insérer des messages dans la file d’attente de messages système.</span><span class="sxs-lookup"><span data-stu-id="151cb-204">The **WH\_JOURNALPLAYBACK** hook enables an application to insert messages into the system message queue.</span></span> <span data-ttu-id="151cb-205">Vous pouvez utiliser ce hook pour lire une série d’événements de souris et de clavier enregistrés précédemment à l’aide de [WH \_ JOURNALRECORD](#wh_journalrecord).</span><span class="sxs-lookup"><span data-stu-id="151cb-205">You can use this hook to play back a series of mouse and keyboard events recorded earlier by using [WH\_JOURNALRECORD](#wh_journalrecord).</span></span> <span data-ttu-id="151cb-206">L’entrée normale de la souris et du clavier est désactivée tant qu’un hook **BL \_ JOURNALPLAYBACK** est installé.</span><span class="sxs-lookup"><span data-stu-id="151cb-206">Regular mouse and keyboard input is disabled as long as a **WH\_JOURNALPLAYBACK** hook is installed.</span></span> <span data-ttu-id="151cb-207">Un **Hook \_ JOURNALPLAYBACK** est un hook global ; il ne peut pas être utilisé en tant que Hook spécifique à un thread.</span><span class="sxs-lookup"><span data-stu-id="151cb-207">A **WH\_JOURNALPLAYBACK** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="151cb-208">Le hook **BL \_ JOURNALPLAYBACK** retourne une valeur de délai d’attente.</span><span class="sxs-lookup"><span data-stu-id="151cb-208">The **WH\_JOURNALPLAYBACK** hook returns a time-out value.</span></span> <span data-ttu-id="151cb-209">Cette valeur indique au système le nombre de millisecondes à attendre avant de traiter le message actuel du hook de lecture.</span><span class="sxs-lookup"><span data-stu-id="151cb-209">This value tells the system how many milliseconds to wait before processing the current message from the playback hook.</span></span> <span data-ttu-id="151cb-210">Cela permet au hook de contrôler le minutage des événements qu’il lit.</span><span class="sxs-lookup"><span data-stu-id="151cb-210">This enables the hook to control the timing of the events it plays back.</span></span>

<span data-ttu-id="151cb-211">Pour plus d’informations, consultez la fonction de rappel [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-211">For more information, see the [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) callback function.</span></span>

### <a name="wh_journalrecord"></a><span data-ttu-id="151cb-212">WH \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="151cb-212">WH\_JOURNALRECORD</span></span>

<span data-ttu-id="151cb-213">Le **Hook \_ JOURNALRECORD** vous permet de surveiller et d’enregistrer les événements d’entrée.</span><span class="sxs-lookup"><span data-stu-id="151cb-213">The **WH\_JOURNALRECORD** hook enables you to monitor and record input events.</span></span> <span data-ttu-id="151cb-214">En général, vous utilisez ce hook pour enregistrer une séquence d’événements de souris et de clavier à lire plus tard en utilisant [WH \_ JOURNALPLAYBACK](#wh_journalplayback).</span><span class="sxs-lookup"><span data-stu-id="151cb-214">Typically, you use this hook to record a sequence of mouse and keyboard events to play back later by using [WH\_JOURNALPLAYBACK](#wh_journalplayback).</span></span> <span data-ttu-id="151cb-215">Le **Hook \_ JOURNALRECORD** est un hook global ; il ne peut pas être utilisé en tant que Hook spécifique à un thread.</span><span class="sxs-lookup"><span data-stu-id="151cb-215">The **WH\_JOURNALRECORD** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="151cb-216">Pour plus d’informations, consultez la fonction de rappel [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-216">For more information, see the [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard_ll"></a><span data-ttu-id="151cb-217">jusqu’au \_ clavier \_</span><span class="sxs-lookup"><span data-stu-id="151cb-217">WH\_KEYBOARD\_LL</span></span>

<span data-ttu-id="151cb-218">Le **crochet \_ clavier \_ de WH** vous permet de surveiller les événements d’entrée au clavier à publier dans une file d’attente d’entrée de thread.</span><span class="sxs-lookup"><span data-stu-id="151cb-218">The **WH\_KEYBOARD\_LL** hook enables you to monitor keyboard input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="151cb-219">Pour plus d’informations, consultez la fonction de rappel [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-219">For more information, see the [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard"></a><span data-ttu-id="151cb-220">\_clavier WH</span><span class="sxs-lookup"><span data-stu-id="151cb-220">WH\_KEYBOARD</span></span>

<span data-ttu-id="151cb-221">Le **crochet \_ clavier** de l permet à une application de surveiller le trafic des messages pour le [**\_ keyversion WM**](/windows/desktop/inputdev/wm-keydown) et les messages [**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) sur le le renvoi de la fonction [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="151cb-221">The **WH\_KEYBOARD** hook enables an application to monitor message traffic for [**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown) and [**WM\_KEYUP**](/windows/desktop/inputdev/wm-keyup) messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="151cb-222">Vous pouvez utiliser le **crochet \_ clavier de WH** pour surveiller l’entrée au clavier publiée dans une file d’attente de messages.</span><span class="sxs-lookup"><span data-stu-id="151cb-222">You can use the **WH\_KEYBOARD** hook to monitor keyboard input posted to a message queue.</span></span>

<span data-ttu-id="151cb-223">Pour plus d’informations, consultez la fonction de rappel [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-223">For more information, see the [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse_ll"></a><span data-ttu-id="151cb-224">à \_ la \_ une</span><span class="sxs-lookup"><span data-stu-id="151cb-224">WH\_MOUSE\_LL</span></span>

<span data-ttu-id="151cb-225">Le crochet de la souris de la **\_ souris \_** vous permet de surveiller les événements d’entrée de souris sur le point d’être publiés dans une file d’attente d’entrée de thread.</span><span class="sxs-lookup"><span data-stu-id="151cb-225">The **WH\_MOUSE\_LL** hook enables you to monitor mouse input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="151cb-226">Pour plus d’informations, consultez la fonction de rappel [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-226">For more information, see the [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse"></a><span data-ttu-id="151cb-227">à \_ la souris</span><span class="sxs-lookup"><span data-stu-id="151cb-227">WH\_MOUSE</span></span>

<span data-ttu-id="151cb-228">Le **\_ pointeur de souris WH** vous permet de surveiller les messages de souris sur le point d’être retournés par la fonction [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="151cb-228">The **WH\_MOUSE** hook enables you to monitor mouse messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="151cb-229">Vous pouvez utiliser le crochet de la **\_ souris** pour surveiller l’entrée de la souris publiée dans une file d’attente de messages.</span><span class="sxs-lookup"><span data-stu-id="151cb-229">You can use the **WH\_MOUSE** hook to monitor mouse input posted to a message queue.</span></span>

<span data-ttu-id="151cb-230">Pour plus d’informations, consultez la fonction de rappel [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-230">For more information, see the [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) callback function.</span></span>

### <a name="wh_msgfilter-and-wh_sysmsgfilter"></a><span data-ttu-id="151cb-231">\_Msgfilter et WH \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="151cb-231">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>

<span data-ttu-id="151cb-232">Les hooks **WH \_ msgfilter** et **WH \_ SYSMSGFILTER** vous permettent de surveiller les messages relatifs au traitement d’un menu, d’une barre de défilement, d’une boîte de message ou d’une boîte de dialogue, et de détecter quand une autre fenêtre est sur le lieu d’être activée suite à l’activation de l’utilisateur en appuyant sur les touches Alt + Tab ou ALT + ÉCHAP.</span><span class="sxs-lookup"><span data-stu-id="151cb-232">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to monitor messages about to be processed by a menu, scroll bar, message box, or dialog box, and to detect when a different window is about to be activated as a result of the user's pressing the ALT+TAB or ALT+ESC key combination.</span></span> <span data-ttu-id="151cb-233">Le **Hook \_ msgfilter** peut surveiller uniquement les messages transmis à un menu, une barre de défilement, une boîte de message ou une boîte de dialogue créée par l’application qui a installé la procédure de Hook.</span><span class="sxs-lookup"><span data-stu-id="151cb-233">The **WH\_MSGFILTER** hook can only monitor messages passed to a menu, scroll bar, message box, or dialog box created by the application that installed the hook procedure.</span></span> <span data-ttu-id="151cb-234">Le **Hook \_ SYSMSGFILTER** surveille ces messages pour toutes les applications.</span><span class="sxs-lookup"><span data-stu-id="151cb-234">The **WH\_SYSMSGFILTER** hook monitors such messages for all applications.</span></span>

<span data-ttu-id="151cb-235">Les hooks **WH \_ msgfilter** et **WH \_ SYSMSGFILTER** vous permettent d’effectuer un filtrage des messages pendant les boucles modales qui est équivalente au filtrage effectué dans la boucle de message principale.</span><span class="sxs-lookup"><span data-stu-id="151cb-235">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to perform message filtering during modal loops that is equivalent to the filtering done in the main message loop.</span></span> <span data-ttu-id="151cb-236">Par exemple, une application examine souvent un nouveau message dans la boucle principale entre le moment où il récupère le message dans la file d’attente et le moment où il distribue le message, en effectuant un traitement spécial, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="151cb-236">For example, an application often examines a new message in the main loop between the time it retrieves the message from the queue and the time it dispatches the message, performing special processing as appropriate.</span></span> <span data-ttu-id="151cb-237">Toutefois, au cours d’une boucle modale, le système récupère et distribue des messages sans permettre à une application de filtrer les messages dans sa boucle de message principale.</span><span class="sxs-lookup"><span data-stu-id="151cb-237">However, during a modal loop, the system retrieves and dispatches messages without allowing an application the chance to filter the messages in its main message loop.</span></span> <span data-ttu-id="151cb-238">Si une application installe une procédure de hook **BL \_ msgfilter** ou **WH \_ SYSMSGFILTER** , le système appelle la procédure pendant la boucle modale.</span><span class="sxs-lookup"><span data-stu-id="151cb-238">If an application installs a **WH\_MSGFILTER** or **WH\_SYSMSGFILTER** hook procedure, the system calls the procedure during the modal loop.</span></span>

<span data-ttu-id="151cb-239">Une application peut appeler le hook **BL \_ msgfilter** directement en appelant la fonction [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) .</span><span class="sxs-lookup"><span data-stu-id="151cb-239">An application can call the **WH\_MSGFILTER** hook directly by calling the [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) function.</span></span> <span data-ttu-id="151cb-240">À l’aide de cette fonction, l’application peut utiliser le même code pour filtrer les messages pendant les boucles modales lorsqu’elle est utilisée dans la boucle de message principale.</span><span class="sxs-lookup"><span data-stu-id="151cb-240">By using this function, the application can use the same code to filter messages during modal loops as it uses in the main message loop.</span></span> <span data-ttu-id="151cb-241">Pour ce faire, encapsulez les opérations de filtrage dans une procédure de hook **BL \_ msgfilter** et appelez **CallMsgFilter** entre les appels aux fonctions [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) et [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) .</span><span class="sxs-lookup"><span data-stu-id="151cb-241">To do so, encapsulate the filtering operations in a **WH\_MSGFILTER** hook procedure and call **CallMsgFilter** between the calls to the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) and [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) functions.</span></span>

``` syntax
while (GetMessage(&msg, (HWND) NULL, 0, 0)) 
{ 
    if (!CallMsgFilter(&qmsg, 0)) 
        DispatchMessage(&qmsg); 
} 
```

<span data-ttu-id="151cb-242">Le dernier argument de [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) est simplement transmis à la procédure de raccordement ; vous pouvez entrer n’importe quelle valeur.</span><span class="sxs-lookup"><span data-stu-id="151cb-242">The last argument of [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) is simply passed to the hook procedure; you can enter any value.</span></span> <span data-ttu-id="151cb-243">La procédure de raccordement, en définissant une constante telle que **MSGF \_ MAINLOOP**, peut utiliser cette valeur pour déterminer l’emplacement à partir duquel la procédure a été appelée.</span><span class="sxs-lookup"><span data-stu-id="151cb-243">The hook procedure, by defining a constant such as **MSGF\_MAINLOOP**, can use this value to determine where the procedure was called from.</span></span>

<span data-ttu-id="151cb-244">Pour plus d’informations, consultez les fonctions de rappel [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) et [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-244">For more information, see the [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) and [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) callback functions.</span></span>

### <a name="wh_shell"></a><span data-ttu-id="151cb-245">WH \_ Shell</span><span class="sxs-lookup"><span data-stu-id="151cb-245">WH\_SHELL</span></span>

<span data-ttu-id="151cb-246">Une application Shell peut utiliser le hook de **\_ Shell WH** pour recevoir des notifications importantes.</span><span class="sxs-lookup"><span data-stu-id="151cb-246">A shell application can use the **WH\_SHELL** hook to receive important notifications.</span></span> <span data-ttu-id="151cb-247">Le système appelle une procédure de hook de **\_ Shell WH** lorsque l’application de l’interpréteur de commandes va être activée et lorsqu’une fenêtre de niveau supérieur est créée ou détruite.</span><span class="sxs-lookup"><span data-stu-id="151cb-247">The system calls a **WH\_SHELL** hook procedure when the shell application is about to be activated and when a top-level window is created or destroyed.</span></span>

<span data-ttu-id="151cb-248">Notez que les applications d’interpréteur de commandes personnalisées ne reçoivent pas de messages de **\_ Shell** .</span><span class="sxs-lookup"><span data-stu-id="151cb-248">Note that custom shell applications do not receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="151cb-249">Par conséquent, toute application qui s’inscrit elle-même en tant qu’interpréteur de commandes par défaut doit appeler la fonction [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) avant (ou toute autre application) qui peut recevoir des messages de **\_ Shell** .</span><span class="sxs-lookup"><span data-stu-id="151cb-249">Therefore, any application that registers itself as the default shell must call the [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) function before it (or any other application) can receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="151cb-250">Cette fonction doit être appelée avec **SPI \_ SETMINIMIZEDMETRICS** et une structure [**MINIMIZEDMETRICS**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) .</span><span class="sxs-lookup"><span data-stu-id="151cb-250">This function must be called with **SPI\_SETMINIMIZEDMETRICS** and a [**MINIMIZEDMETRICS**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) structure.</span></span> <span data-ttu-id="151cb-251">Définissez le membre **iArrange** de cette structure sur **ARW \_ Hide**.</span><span class="sxs-lookup"><span data-stu-id="151cb-251">Set the **iArrange** member of this structure to **ARW\_HIDE**.</span></span>

<span data-ttu-id="151cb-252">Pour plus d’informations, consultez la fonction de rappel [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="151cb-252">For more information, see the [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) callback function.</span></span>

 

 
