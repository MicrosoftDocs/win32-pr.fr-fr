---
title: Dessin indirect
description: Le dessin indirect permet de déplacer le parcours de scène et l’élimination du processeur vers le GPU, ce qui peut améliorer les performances. La mémoire tampon de commande peut être générée par le processeur ou le GPU.
ms.assetid: F8D6C88A-101E-4F66-999F-43206F6527B6
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7731a662bc6064e635d68942e6b0b222adf1eda8
ms.sourcegitcommit: 56f8e4d5119e5018363fa2dc3472cdff203c6913
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/19/2020
ms.locfileid: "104548505"
---
# <a name="indirect-drawing"></a><span data-ttu-id="0d1f1-104">Dessin indirect</span><span class="sxs-lookup"><span data-stu-id="0d1f1-104">Indirect Drawing</span></span>

<span data-ttu-id="0d1f1-105">Le dessin indirect permet de déplacer le parcours de scène et l’élimination du processeur vers le GPU, ce qui peut améliorer les performances.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-105">Indirect drawing enables some scene-traversal and culling to be moved from the CPU to the GPU, which can improve performance.</span></span> <span data-ttu-id="0d1f1-106">La mémoire tampon de commande peut être générée par le processeur ou le GPU.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-106">The command buffer can be generated by the CPU or GPU.</span></span>

-   [<span data-ttu-id="0d1f1-107">Signatures des commandes</span><span class="sxs-lookup"><span data-stu-id="0d1f1-107">Command Signatures</span></span>](#command-signatures)
-   [<span data-ttu-id="0d1f1-108">Structures de mémoire tampon d’argument indirect</span><span class="sxs-lookup"><span data-stu-id="0d1f1-108">Indirect Argument Buffer Structures</span></span>](#indirect-argument-buffer-structures)
-   [<span data-ttu-id="0d1f1-109">Création d’une signature de commande</span><span class="sxs-lookup"><span data-stu-id="0d1f1-109">Command Signature Creation</span></span>](#command-signature-creation)
    -   [<span data-ttu-id="0d1f1-110">Aucun argument n’est modifié</span><span class="sxs-lookup"><span data-stu-id="0d1f1-110">No Argument Changes</span></span>](#no-argument-changes)
    -   [<span data-ttu-id="0d1f1-111">Constantes racine et mémoires tampons de vertex</span><span class="sxs-lookup"><span data-stu-id="0d1f1-111">Root Constants and Vertex Buffers</span></span>](#root-constants-and-vertex-buffers)
-   [<span data-ttu-id="0d1f1-112">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0d1f1-112">Related topics</span></span>](#related-topics)

## <a name="command-signatures"></a><span data-ttu-id="0d1f1-113">Signatures des commandes</span><span class="sxs-lookup"><span data-stu-id="0d1f1-113">Command Signatures</span></span>

<span data-ttu-id="0d1f1-114">L’objet de signature de commande ([**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature)) permet aux applications de spécifier un dessin indirect, en particulier en définissant les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-114">The command signature object ([**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature)) enables apps to specify indirect drawing, in particular setting the following:</span></span>

-   <span data-ttu-id="0d1f1-115">Format de la mémoire tampon des arguments indirects.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-115">The indirect argument buffer format.</span></span>
-   <span data-ttu-id="0d1f1-116">Type de commande qui sera utilisé (à partir des [](/windows/desktop/api/d3d12/nn-d3d12-id3d12graphicscommandlist) méthodes ID3D12GraphicsCommandList [**DrawInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawinstanced), [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced)ou [**Dispatch**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-dispatch)).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-116">The command type that will be used (from the [**ID3D12GraphicsCommandList**](/windows/desktop/api/d3d12/nn-d3d12-id3d12graphicscommandlist) methods [**DrawInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawinstanced), [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced), or [**Dispatch**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-dispatch)).</span></span>
-   <span data-ttu-id="0d1f1-117">Ensemble des liaisons de ressources qui vont changer l’appel par commande par rapport à l’ensemble qui sera hérité.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-117">The set of resource bindings which will change per-command call versus the set which will be inherited.</span></span>

<span data-ttu-id="0d1f1-118">Au démarrage, une application crée un petit ensemble de **signatures de commande**.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-118">At startup, an app creates a small set of **command signatures**.</span></span> <span data-ttu-id="0d1f1-119">Lors de l’exécution, l’application remplit une mémoire tampon avec des commandes (par quelque moyen que le développeur de l’application choisit).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-119">At runtime, the application fills a buffer with commands (via whatever means the app developer chooses).</span></span> <span data-ttu-id="0d1f1-120">Les commandes contiennent éventuellement l’État à définir pour les vues de mémoire tampon de vertex, les vues de mémoire tampon d’index, les constantes racine et les descripteurs racine (RAW ou Structured SRV/UAV/CBVs).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-120">The commands optionally containing state to set for vertex buffer views, index buffer views, root constants and root descriptors (raw or structured SRV/UAV/CBVs).</span></span> <span data-ttu-id="0d1f1-121">Ces dispositions d’arguments ne sont pas spécifiques au matériel, ce qui permet aux applications de générer les tampons directement.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-121">These argument layouts are not hardware specific so apps can generate the buffers directly.</span></span> <span data-ttu-id="0d1f1-122">La signature de la commande hérite de l’État restant de la liste de commandes.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-122">The command signature inherits the remaining state from the command list.</span></span> <span data-ttu-id="0d1f1-123">L’application appelle ensuite [**ExecuteIndirect**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) pour indiquer au GPU d’interpréter le contenu de la mémoire tampon d’argument indirect en fonction du format défini par une signature de commande particulière.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-123">Then the app calls [**ExecuteIndirect**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) to instruct the GPU to interpret the contents of the indirect argument buffer according to the format defined by a particular command signature.</span></span>

<span data-ttu-id="0d1f1-124">Si la signature de la commande modifie des arguments racine, elle est stockée dans la signature de la commande en tant que sous-ensemble d’une signature racine.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-124">If the command signature changes any root arguments, this is stored within the command signature as a subset of a root signature.</span></span>

<span data-ttu-id="0d1f1-125">Notez qu’aucun État de la signature de la commande ne renvoie à la liste des commandes lorsque l’exécution est terminée.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-125">Note that no command signature state leaks back to the command list when the execution is complete.</span></span>

<span data-ttu-id="0d1f1-126">Par exemple, supposons qu’un développeur d’applications souhaite qu’une constante racine unique soit spécifiée par appel de dessin dans la mémoire tampon d’argument indirect.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-126">For example, suppose an app developer wants a unique root constant to be specified per-draw call in the indirect argument buffer.</span></span> <span data-ttu-id="0d1f1-127">L’application crée une signature de commande qui permet à la mémoire tampon d’arguments indirects de spécifier les paramètres suivants par appel de dessin :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-127">The app would create a command signature that enables the indirect argument buffer to specify the following parameters per draw call:</span></span>

-   <span data-ttu-id="0d1f1-128">Valeur d’une constante racine.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-128">The value of one root constant.</span></span>
-   <span data-ttu-id="0d1f1-129">Les arguments de dessin (nombre de vertex, nombre d’instances, etc.).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-129">The draw arguments (vertex count, instance count, etc).</span></span>

<span data-ttu-id="0d1f1-130">La mémoire tampon d’argument indirecte générée par l’application contient un tableau d’enregistrements de taille fixe.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-130">The indirect argument buffer generated by the application would contain an array of fixed-size records.</span></span> <span data-ttu-id="0d1f1-131">Chaque structure correspond à un appel de dessin.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-131">Each structure corresponds to one draw call.</span></span> <span data-ttu-id="0d1f1-132">Chaque structure contient les arguments de dessin et la valeur de la constante racine.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-132">Each structure contains the drawing arguments, and the value of the root constant.</span></span> <span data-ttu-id="0d1f1-133">Le nombre d’appels de dessin est spécifié dans une mémoire tampon visible par GPU distincte.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-133">The number of draw calls is specified in a separate GPU-visible buffer.</span></span>

<span data-ttu-id="0d1f1-134">Voici un exemple de mémoire tampon de commande généré par l’application :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-134">An example command buffer generated by the app follows:</span></span>

![format de mémoire tampon de commande](images/indirect-drawing-command-buffer.png)

## <a name="indirect-argument-buffer-structures"></a><span data-ttu-id="0d1f1-136">Structures de mémoire tampon d’argument indirect</span><span class="sxs-lookup"><span data-stu-id="0d1f1-136">Indirect Argument Buffer Structures</span></span>

<span data-ttu-id="0d1f1-137">Les structures suivantes définissent la façon dont les arguments particuliers s’affichent dans une mémoire tampon d’arguments indirects.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-137">The following structures define how particular arguments appear in an indirect argument buffer.</span></span> <span data-ttu-id="0d1f1-138">Ces structures n’apparaissent dans aucune API D3D12.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-138">These structures do not appear in any D3D12 API.</span></span> <span data-ttu-id="0d1f1-139">Les applications utilisent ces définitions lors de l’écriture dans un tampon d’arguments indirect (avec le processeur ou le GPU) :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-139">Applications use these definitions when writing to an indirect argument buffer (with the CPU or GPU):</span></span>

-   [<span data-ttu-id="0d1f1-140">**\_Arguments de dessin D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-140">**D3D12\_DRAW\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_draw_arguments)
-   [<span data-ttu-id="0d1f1-141">**D3D12 \_ dessiner des \_ arguments indexés \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-141">**D3D12\_DRAW\_INDEXED\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_draw_indexed_arguments)
-   [<span data-ttu-id="0d1f1-142">**\_Arguments de dispatch D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-142">**D3D12\_DISPATCH\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_dispatch_arguments)
-   [<span data-ttu-id="0d1f1-143">**\_Vue de \_ mémoire tampon de vertex D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-143">**D3D12\_VERTEX\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_vertex_buffer_view)
-   [<span data-ttu-id="0d1f1-144">**\_Vue de \_ mémoire tampon d’index D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-144">**D3D12\_INDEX\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_index_buffer_view)
-   <span data-ttu-id="0d1f1-145">\_ \_ Adresse virtuelle du GPU D3D12 \_ (un typedef synonyme de UINT64).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-145">D3D12\_GPU\_VIRTUAL\_ADDRESS (a typedef'd synonym of UINT64).</span></span>
-   [<span data-ttu-id="0d1f1-146">**\_Vue de \_ mémoire tampon constante D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-146">**D3D12\_CONSTANT\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_constant_buffer_view_desc)

## <a name="command-signature-creation"></a><span data-ttu-id="0d1f1-147">Création d’une signature de commande</span><span class="sxs-lookup"><span data-stu-id="0d1f1-147">Command Signature Creation</span></span>

<span data-ttu-id="0d1f1-148">Pour créer une signature de commande, utilisez les éléments d’API suivants :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-148">To create a command signature, use the following API items:</span></span>

-   <span data-ttu-id="0d1f1-149">[**ID3D12Device :: CreateCommandSignature**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandsignature) (génère un [**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature))</span><span class="sxs-lookup"><span data-stu-id="0d1f1-149">[**ID3D12Device::CreateCommandSignature**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandsignature) (outputs an [**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature))</span></span>
-   [<span data-ttu-id="0d1f1-150">**\_Type d' \_ argument \_ indirect D3D12**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-150">**D3D12\_INDIRECT\_ARGUMENT\_TYPE**</span></span>](/windows/desktop/api/d3d12/ne-d3d12-d3d12_indirect_argument_type)
-   [<span data-ttu-id="0d1f1-151">**Description de l' \_ argument D3D12 indirect \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-151">**D3D12\_INDIRECT\_ARGUMENT\_DESC**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_indirect_argument_desc)
-   [<span data-ttu-id="0d1f1-152">**Description de la signature de la \_ commande D3D12 \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0d1f1-152">**D3D12\_COMMAND\_SIGNATURE\_DESC**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc)

<span data-ttu-id="0d1f1-153">L’ordonnancement des arguments au sein d’un tampon d’arguments indirect est défini pour correspondre exactement à l’ordre des arguments spécifiés dans le paramètre *pArguments* de la description de la signature de la [**\_ commande \_ \_ D3D12**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-153">The ordering of arguments within an indirect argument buffer is defined to exactly match the order of arguments specified in the *pArguments* parameter of [**D3D12\_COMMAND\_SIGNATURE\_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc).</span></span> <span data-ttu-id="0d1f1-154">Tous les arguments d’un appel Draw (Graphics)/Dispatch (Compute) dans une mémoire tampon d’arguments indirects sont étroitement compressés.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-154">All of the arguments for one draw (graphics)/dispatch (compute) call within an indirect argument buffer are tightly packed.</span></span> <span data-ttu-id="0d1f1-155">Toutefois, les applications sont autorisées à spécifier un Stride d’octet arbitraire entre les commandes de dessin/Dispatch dans une mémoire tampon d’arguments indirecte.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-155">However, applications are allowed to specify an arbitrary byte stride between draw/dispatch commands in an indirect argument buffer.</span></span>

<span data-ttu-id="0d1f1-156">La signature racine doit être spécifiée si et seulement si la signature de la commande modifie l’un des arguments racine.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-156">The root signature must be specified if and only if the command signature changes one of the root arguments.</span></span>

<span data-ttu-id="0d1f1-157">Pour la racine SRV/UAV/CBV, la taille spécifiée de l’application est en octets.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-157">For root SRV/UAV/CBV, the application specified size is in bytes.</span></span> <span data-ttu-id="0d1f1-158">La couche de débogage valide les restrictions suivantes sur l’adresse :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-158">The debug layer will validate the following restrictions on the address:</span></span>

-   <span data-ttu-id="0d1f1-159">CBV – Address doit être un multiple de 256 octets.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-159">CBV – address must be a multiple of 256 bytes.</span></span>
-   <span data-ttu-id="0d1f1-160">SRV brut/UAV : l’adresse doit être un multiple de 4 octets.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-160">Raw SRV/UAV – address must be a multiple of 4 bytes.</span></span>
-   <span data-ttu-id="0d1f1-161">SRV/UAV structuré : l’adresse doit être un multiple de la structure de l’octet de structure (déclaré dans le nuanceur).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-161">Structured SRV/UAV – address must be a multiple of the structure byte stride (declared in the shader).</span></span>

<span data-ttu-id="0d1f1-162">Une signature de commande donnée est un dessin ou une signature de commande de calcul.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-162">A given command signature is either a draw or a compute command signature.</span></span> <span data-ttu-id="0d1f1-163">Si une signature de commande contient une opération de dessin, il s’agit d’une signature de commande Graphics.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-163">If a command signature contains a drawing operation, then it is a graphics command signature.</span></span> <span data-ttu-id="0d1f1-164">Dans le cas contraire, la signature de commande doit contenir une opération de répartition, et il s’agit d’une signature de commande de calcul.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-164">Otherwise, the command signature must contain a dispatch operation, and it is a compute command signature.</span></span>

<span data-ttu-id="0d1f1-165">Les sections suivantes présentent quelques exemples de signatures de commande.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-165">The following sections show some example command signatures.</span></span>

### <a name="no-argument-changes"></a><span data-ttu-id="0d1f1-166">Aucun argument n’est modifié</span><span class="sxs-lookup"><span data-stu-id="0d1f1-166">No Argument Changes</span></span>

<span data-ttu-id="0d1f1-167">Dans cet exemple, la mémoire tampon d’arguments indirects générée par l’application contient un tableau de structures de 36 octets.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-167">In this example, the indirect argument buffer generated by the application holds an array of 36-byte structures.</span></span> <span data-ttu-id="0d1f1-168">Chaque structure contient uniquement les cinq paramètres passés à [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced) (plus le remplissage).</span><span class="sxs-lookup"><span data-stu-id="0d1f1-168">Each structure only contains the five parameters passed to [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced) (plus padding).</span></span>

<span data-ttu-id="0d1f1-169">Le code permettant de créer la description de la signature de la commande est le suivant :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-169">The code to create the command signature description follows:</span></span>

``` syntax
D3D12_INDIRECT_ARGUMENT_DESC Args[1];
Args[0].Type = D3D12_INDIRECT_ARGUMENT_TYPE_DRAW_INDEXED;

D3D12_COMMAND_SIGNATURE_DESC ProgramDesc;
ProgramDesc.ByteStride = 36;
ProgramDesc.NumArgumentDescs = 1;
ProgramDesc.pArguments = Args;
```

<span data-ttu-id="0d1f1-170">La disposition d’une structure unique dans une mémoire tampon d’arguments indirects est la suivante :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-170">The layout of a single structure within an indirect argument buffer is:</span></span>



| <span data-ttu-id="0d1f1-171">Octets</span><span class="sxs-lookup"><span data-stu-id="0d1f1-171">Bytes</span></span> | <span data-ttu-id="0d1f1-172">Description</span><span class="sxs-lookup"><span data-stu-id="0d1f1-172">Description</span></span>           |
|-------|-----------------------|
| <span data-ttu-id="0d1f1-173">0:3</span><span class="sxs-lookup"><span data-stu-id="0d1f1-173">0:3</span></span>   | <span data-ttu-id="0d1f1-174">IndexCountPerInstance</span><span class="sxs-lookup"><span data-stu-id="0d1f1-174">IndexCountPerInstance</span></span> |
| <span data-ttu-id="0d1f1-175">4:7</span><span class="sxs-lookup"><span data-stu-id="0d1f1-175">4:7</span></span>   | <span data-ttu-id="0d1f1-176">InstanceCount</span><span class="sxs-lookup"><span data-stu-id="0d1f1-176">InstanceCount</span></span>         |
| <span data-ttu-id="0d1f1-177">8:11</span><span class="sxs-lookup"><span data-stu-id="0d1f1-177">8:11</span></span>  | <span data-ttu-id="0d1f1-178">StartIndexLocation</span><span class="sxs-lookup"><span data-stu-id="0d1f1-178">StartIndexLocation</span></span>    |
| <span data-ttu-id="0d1f1-179">12:15</span><span class="sxs-lookup"><span data-stu-id="0d1f1-179">12:15</span></span> | <span data-ttu-id="0d1f1-180">BaseVertexLocation</span><span class="sxs-lookup"><span data-stu-id="0d1f1-180">BaseVertexLocation</span></span>    |
| <span data-ttu-id="0d1f1-181">16:19</span><span class="sxs-lookup"><span data-stu-id="0d1f1-181">16:19</span></span> | <span data-ttu-id="0d1f1-182">StartInstanceLocation</span><span class="sxs-lookup"><span data-stu-id="0d1f1-182">StartInstanceLocation</span></span> |
| <span data-ttu-id="0d1f1-183">20:35</span><span class="sxs-lookup"><span data-stu-id="0d1f1-183">20:35</span></span> | <span data-ttu-id="0d1f1-184">Remplissage</span><span class="sxs-lookup"><span data-stu-id="0d1f1-184">Padding</span></span>               |



 

### <a name="root-constants-and-vertex-buffers"></a><span data-ttu-id="0d1f1-185">Constantes racine et mémoires tampons de vertex</span><span class="sxs-lookup"><span data-stu-id="0d1f1-185">Root Constants and Vertex Buffers</span></span>

<span data-ttu-id="0d1f1-186">Dans cet exemple, chaque structure d’un tampon d’arguments indirect modifie deux constantes racine, modifie une liaison de mémoire tampon de vertex et effectue une opération de dessin non indexée.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-186">In this example, each structure in an indirect argument buffer changes two root constants, changes one vertex buffer binding, and performs one drawing non-indexed operation.</span></span> <span data-ttu-id="0d1f1-187">Il n’y a pas de remplissage entre les structures.</span><span class="sxs-lookup"><span data-stu-id="0d1f1-187">There is no padding between structures.</span></span>

<span data-ttu-id="0d1f1-188">Le code permettant de créer la description de la signature de la commande est le suivant :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-188">The code to create the command signature description is:</span></span>

``` syntax
D3D12_INDIRECT_ARGUMENT_DESC Args[4];
Args[0].Type = D3D12_INDIRECT_ARGUMENT_TYPE_CONSTANT;
Args[0].Constant.RootParameterIndex = 2;

Args[1].Type = D3D12_INDIRECT_ARGUMENT_TYPE_CONSTANT;
Args[1].Constant.RootParameterIndex = 6;

Args[2].Type = D3D12_INDIRECT_ARGUMENT_TYPE_VERTEX_BUFFER_VIEW;
Args[2].VertexBuffer.VBSlot = 3;

Args[3].Type = D3D12_INDIRECT_ARGUMENT_TYPE_DRAW_INSTANCED;

D3D12_COMMAND_SIGNATURE_DESC ProgramDesc;
ProgramDesc.ByteStride = 40;
ProgramDesc.NumArgumentDescs = 4;
ProgramDesc.pArguments = Args;
```

<span data-ttu-id="0d1f1-189">La disposition d’une structure unique au sein de la mémoire tampon d’argument indirect est la suivante :</span><span class="sxs-lookup"><span data-stu-id="0d1f1-189">The layout of a single structure within the indirect argument buffer is the following:</span></span>



| <span data-ttu-id="0d1f1-190">Octets</span><span class="sxs-lookup"><span data-stu-id="0d1f1-190">Bytes</span></span> | <span data-ttu-id="0d1f1-191">Description</span><span class="sxs-lookup"><span data-stu-id="0d1f1-191">Description</span></span>                     |
|-------|---------------------------------|
| <span data-ttu-id="0d1f1-192">0:3</span><span class="sxs-lookup"><span data-stu-id="0d1f1-192">0:3</span></span>   | <span data-ttu-id="0d1f1-193">Données pour l’index de paramètre racine 2</span><span class="sxs-lookup"><span data-stu-id="0d1f1-193">Data for root parameter index 2</span></span> |
| <span data-ttu-id="0d1f1-194">4:7</span><span class="sxs-lookup"><span data-stu-id="0d1f1-194">4:7</span></span>   | <span data-ttu-id="0d1f1-195">Données pour l’index de paramètre racine 6</span><span class="sxs-lookup"><span data-stu-id="0d1f1-195">Data for root parameter index 6</span></span> |
| <span data-ttu-id="0d1f1-196">8:15</span><span class="sxs-lookup"><span data-stu-id="0d1f1-196">8:15</span></span>  | <span data-ttu-id="0d1f1-197">Adresse virtuelle de VB (64 bits)</span><span class="sxs-lookup"><span data-stu-id="0d1f1-197">Virtual address of VB (64-bit)</span></span>  |
| <span data-ttu-id="0d1f1-198">16:19</span><span class="sxs-lookup"><span data-stu-id="0d1f1-198">16:19</span></span> | <span data-ttu-id="0d1f1-199">Taille VB</span><span class="sxs-lookup"><span data-stu-id="0d1f1-199">VB size</span></span>                         |
| <span data-ttu-id="0d1f1-200">20:23</span><span class="sxs-lookup"><span data-stu-id="0d1f1-200">20:23</span></span> | <span data-ttu-id="0d1f1-201">STRIDE VB</span><span class="sxs-lookup"><span data-stu-id="0d1f1-201">VB stride</span></span>                       |
| <span data-ttu-id="0d1f1-202">24:27</span><span class="sxs-lookup"><span data-stu-id="0d1f1-202">24:27</span></span> | <span data-ttu-id="0d1f1-203">VertexCountPerInstance</span><span class="sxs-lookup"><span data-stu-id="0d1f1-203">VertexCountPerInstance</span></span>          |
| <span data-ttu-id="0d1f1-204">28:31</span><span class="sxs-lookup"><span data-stu-id="0d1f1-204">28:31</span></span> | <span data-ttu-id="0d1f1-205">InstanceCount</span><span class="sxs-lookup"><span data-stu-id="0d1f1-205">InstanceCount</span></span>                   |
| <span data-ttu-id="0d1f1-206">32:35</span><span class="sxs-lookup"><span data-stu-id="0d1f1-206">32:35</span></span> | <span data-ttu-id="0d1f1-207">StartVertexLocation</span><span class="sxs-lookup"><span data-stu-id="0d1f1-207">StartVertexLocation</span></span>             |
| <span data-ttu-id="0d1f1-208">36:39</span><span class="sxs-lookup"><span data-stu-id="0d1f1-208">36:39</span></span> | <span data-ttu-id="0d1f1-209">StartInstanceLocation</span><span class="sxs-lookup"><span data-stu-id="0d1f1-209">StartInstanceLocation</span></span>           |



 

## <a name="related-topics"></a><span data-ttu-id="0d1f1-210">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="0d1f1-210">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0d1f1-211">Didacticiels vidéo sur DirectX Advanced Learning : exécuter des éliminations de GPU indirectes et Async</span><span class="sxs-lookup"><span data-stu-id="0d1f1-211">DirectX advanced learning video tutorials : Execute Indirect and Async GPU culling</span></span>](https://www.youtube.com/watch?v=fKD-VKJeeds)
</dt> <dt>

[<span data-ttu-id="0d1f1-212">Dessin indirect et élimination du GPU : parcours du code</span><span class="sxs-lookup"><span data-stu-id="0d1f1-212">Indirect drawing and GPU culling : code walk-through</span></span>](indirect-drawing-and-gpu-culling-.md)
</dt> <dt>

[<span data-ttu-id="0d1f1-213">Rendu</span><span class="sxs-lookup"><span data-stu-id="0d1f1-213">Rendering</span></span>](rendering.md)
</dt> </dl>

 

 