---
title: Optimisations UMA les textures accessibles par le processeur et les Swizzle standard
description: Les GPU (Universal Memory Architecture, UMA) offrent des avantages en termes de performances par rapport aux GPU discrets, en particulier lors de l’optimisation des appareils mobiles.
ms.assetid: 26C41948-9625-4786-BBDF-552D1F8A2437
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 47725702676d385d607fa87533680b9ffe0fc0df
ms.sourcegitcommit: 294c5ab750c46b5100bb2c84ef6c33ef7266c54b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/15/2020
ms.locfileid: "104548561"
---
# <a name="uma-optimizations-cpu-accessible-textures-and-standard-swizzle"></a><span data-ttu-id="766b5-103">Optimisations UMA : textures accessibles par le processeur et Swizzle standard</span><span class="sxs-lookup"><span data-stu-id="766b5-103">UMA Optimizations: CPU Accessible Textures and Standard Swizzle</span></span>

<span data-ttu-id="766b5-104">Les GPU (Universal Memory Architecture, UMA) offrent des avantages en termes de performances par rapport aux GPU discrets, en particulier lors de l’optimisation des appareils mobiles.</span><span class="sxs-lookup"><span data-stu-id="766b5-104">Universal Memory Architecture (UMA) GPUs offer some efficiency advantages over discrete GPUs, especially when optimizing for mobile devices.</span></span> <span data-ttu-id="766b5-105">L’octroi d’un accès processeur aux ressources lorsque le GPU est UMA peut réduire la quantité de copie qui se produit entre le processeur et le GPU.</span><span class="sxs-lookup"><span data-stu-id="766b5-105">Giving resources CPU access when the GPU is UMA can reduce the amount of copying that occurs between CPU and GPU.</span></span> <span data-ttu-id="766b5-106">Bien que nous ne recommandons pas aux applications d’accéder aux ressources de toutes les ressources des conceptions UMA, il est possible d’améliorer l’efficacité en donnant aux ressources des droits d’accès au processeur.</span><span class="sxs-lookup"><span data-stu-id="766b5-106">While we don’t recommend applications blindly give CPU access to all resources on UMA designs, there are opportunities to improve efficiencies by giving the right resources CPU access.</span></span> <span data-ttu-id="766b5-107">Contrairement aux GPU discrètes, le processeur peut techniquement avoir un pointeur vers toutes les ressources auxquelles le GPU peut accéder.</span><span class="sxs-lookup"><span data-stu-id="766b5-107">Unlike discrete GPUs, the CPU can technically have a pointer to all resources that the GPU can access.</span></span>

-   [<span data-ttu-id="766b5-108">Vue d’ensemble des textures accessibles par le processeur</span><span class="sxs-lookup"><span data-stu-id="766b5-108">Overview of CPU accessible textures</span></span>](#overview-of-cpu-accessible-textures)
-   [<span data-ttu-id="766b5-109">Vue d’ensemble des Swizzle standard</span><span class="sxs-lookup"><span data-stu-id="766b5-109">Overview of Standard Swizzle</span></span>](#overview-of-standard-swizzle)
-   [<span data-ttu-id="766b5-110">API</span><span class="sxs-lookup"><span data-stu-id="766b5-110">APIs</span></span>](#apis)
-   [<span data-ttu-id="766b5-111">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="766b5-111">Related topics</span></span>](#related-topics)

## <a name="overview-of-cpu-accessible-textures"></a><span data-ttu-id="766b5-112">Vue d’ensemble des textures accessibles par le processeur</span><span class="sxs-lookup"><span data-stu-id="766b5-112">Overview of CPU accessible textures</span></span>

<span data-ttu-id="766b5-113">Les textures accessibles par le processeur, dans le pipeline Graphics, sont une fonctionnalité de l’architecture UMA, qui permet aux UC d’accéder en lecture et en écriture aux textures.</span><span class="sxs-lookup"><span data-stu-id="766b5-113">CPU accessible textures, in the graphics pipeline, are a feature of UMA architecture, enabling CPUs read and write access to textures.</span></span> <span data-ttu-id="766b5-114">Sur les GPU discrètes les plus courants, l’UC n’a pas accès aux textures dans le pipeline Graphics.</span><span class="sxs-lookup"><span data-stu-id="766b5-114">On the more common discrete GPUs, the CPU does not have access to textures in the graphics pipeline.</span></span>

<span data-ttu-id="766b5-115">Les bonnes pratiques générales pour les textures consistent à prendre en charge les GPU discrètes, ce qui implique généralement de suivre les processus de [chargement des données de texture par le biais de mémoires tampons](upload-and-readback-of-texture-data.md), résumé comme suit :</span><span class="sxs-lookup"><span data-stu-id="766b5-115">The general best practice advice for textures is to accommodate discrete GPUs, which typically involves following the processes in [Uploading Texture Data Through Buffers](upload-and-readback-of-texture-data.md), summarized as:</span></span>

-   <span data-ttu-id="766b5-116">Aucun accès de l’UC n’est nécessaire pour la majorité des textures.</span><span class="sxs-lookup"><span data-stu-id="766b5-116">Not having any CPU access for the majority of textures.</span></span>
-   <span data-ttu-id="766b5-117">Définition de la disposition de texture sur la \_ disposition de texture D3D12 \_ \_ inconnue.</span><span class="sxs-lookup"><span data-stu-id="766b5-117">Setting the texture layout to D3D12\_TEXTURE\_LAYOUT\_UNKNOWN.</span></span>
-   <span data-ttu-id="766b5-118">Chargement des textures dans le GPU avec [**CopyTextureRegion**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytextureregion).</span><span class="sxs-lookup"><span data-stu-id="766b5-118">Uploading the textures to the GPU with [**CopyTextureRegion**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytextureregion).</span></span>

<span data-ttu-id="766b5-119">Toutefois, dans certains cas, le processeur et le GPU peuvent interagir si fréquemment sur les mêmes données, ces textures de mappage deviennent utiles pour économiser de l’énergie ou pour accélérer une conception particulière sur des cartes ou des architectures particulières.</span><span class="sxs-lookup"><span data-stu-id="766b5-119">However, for certain cases, the CPU and GPU may interact so frequently on the same data, that mapping textures becomes helpful to save power, or to speed up a particular design on particular adapters or architectures.</span></span> <span data-ttu-id="766b5-120">Les applications doivent détecter ces cas et optimiser les copies inutiles.</span><span class="sxs-lookup"><span data-stu-id="766b5-120">Applications should detect these cases and optimize out the unnecessary copies.</span></span> <span data-ttu-id="766b5-121">Dans ce cas, pour des performances optimales, tenez compte des points suivants :</span><span class="sxs-lookup"><span data-stu-id="766b5-121">In this case, for best performance consider the following:</span></span>

-   <span data-ttu-id="766b5-122">Démarrez uniquement les meilleures performances de mappage des textures lorsque l’architecture des données de la [**\_ fonctionnalité \_ \_ D3D12**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_architecture):: UMA a la valeur true.</span><span class="sxs-lookup"><span data-stu-id="766b5-122">Only start entertaining the better performance of mapping textures when [**D3D12\_FEATURE\_DATA\_ARCHITECTURE**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_architecture)::UMA is TRUE.</span></span> <span data-ttu-id="766b5-123">Faites ensuite attention à *CacheCoherentUMA* si vous décidez des propriétés du cache de l’UC à choisir sur le segment de mémoire.</span><span class="sxs-lookup"><span data-stu-id="766b5-123">Then pay attention to *CacheCoherentUMA* if deciding which CPU cache properties to choose on the heap.</span></span>

-   <span data-ttu-id="766b5-124">L’utilisation de l’accès au processeur pour les textures est plus complexe que pour les mémoires tampons.</span><span class="sxs-lookup"><span data-stu-id="766b5-124">Leveraging CPU access for textures is more complicated than for buffers.</span></span> <span data-ttu-id="766b5-125">Les dispositions de texture les plus efficaces pour les GPU sont rarement des lignes \_ majeures.</span><span class="sxs-lookup"><span data-stu-id="766b5-125">The most efficient texture layouts for GPUs are rarely row\_major.</span></span> <span data-ttu-id="766b5-126">En fait, certains GPU peuvent uniquement prendre en charge les \_ textures principales de ligne lors de la copie des données de texture.</span><span class="sxs-lookup"><span data-stu-id="766b5-126">In fact, some GPUs can only support row\_major textures when copying texture data around.</span></span>

-   <span data-ttu-id="766b5-127">Les GPU UMA doivent universellement tirer parti d’une optimisation simple pour réduire les temps de chargement de niveau.</span><span class="sxs-lookup"><span data-stu-id="766b5-127">UMA GPUs should universally benefit from a simple optimization to reduce level-load times.</span></span> <span data-ttu-id="766b5-128">Après avoir reconnu la UMA, l’application peut optimiser le [**CopyTextureRegion**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytextureregion) initial pour remplir les textures que le GPU ne modifiera pas.</span><span class="sxs-lookup"><span data-stu-id="766b5-128">After recognizing UMA, the application can optimize out the initial [**CopyTextureRegion**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytextureregion) to populate textures that the GPU will not modify.</span></span> <span data-ttu-id="766b5-129">Au lieu de créer la texture dans un segment de mémoire avec le \_ type de segment D3D12 \_ \_ par défaut et de marshaler les données de texture via, l’application peut utiliser [**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource) pour éviter de comprendre la disposition de texture réelle.</span><span class="sxs-lookup"><span data-stu-id="766b5-129">Instead of creating the texture in a heap with D3D12\_HEAP\_TYPE\_DEFAULT, and marshalling the texture data through, the application can use [**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource) to avoid understanding the actual texture layout.</span></span>

-   <span data-ttu-id="766b5-130">Dans D3D12, les textures créées \_ avec \_ la mise en page de texture D3D12 \_ sont inconnues et aucun accès au processeur n’est le plus efficace pour un rendu et un échantillonnage GPU fréquents.</span><span class="sxs-lookup"><span data-stu-id="766b5-130">In D3D12, textures created with D3D12\_TEXTURE\_LAYOUT\_UNKNOWN and no CPU access are the most efficient for frequent GPU rendering and sampling.</span></span> <span data-ttu-id="766b5-131">Lors des tests de performances, ces textures doivent être comparées à la \_ \_ mise en page de texture D3D12 \_ inconnue avec l’accès de l’UC, à la \_ mise en \_ page de texture D3D12 \_ standard \_ SWIZZLE avec accès au processeur et à la \_ \_ \_ ligne de disposition de texture D3D12 \_ principale pour la prise en charge des adaptateurs</span><span class="sxs-lookup"><span data-stu-id="766b5-131">When performance testing, those textures should be compared against D3D12\_TEXTURE\_LAYOUT\_UNKNOWN with CPU access, and D3D12\_TEXTURE\_LAYOUT\_STANDARD\_SWIZZLE with CPU access, and D3D12\_TEXTURE\_LAYOUT\_ROW\_MAJOR for cross-adapter support.</span></span>

-   <span data-ttu-id="766b5-132">L’utilisation \_ \_ de la mise en forme de texture D3D12 \_ inconnue avec l’accès de l’UC active les méthodes [**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource), [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map) (en évitant l’accès à l’application au pointeur) et le [**mappage**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-unmap), mais peut sacrifier l’efficacité de l’accès GPU.</span><span class="sxs-lookup"><span data-stu-id="766b5-132">Using D3D12\_TEXTURE\_LAYOUT\_UNKNOWN with CPU access enables the methods [**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource), [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map) (precluding application access to pointer), and [**Unmap**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-unmap); but can sacrifice efficiency of GPU access.</span></span>

-   <span data-ttu-id="766b5-133">À l' \_ aide \_ de la disposition de texture D3D12 \_ standard \_ SWIZZLE avec accès de l’UC active [**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource), [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map) (qui retourne un pointeur valide vers l’application) et [**DEMAPPAGE**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-unmap).</span><span class="sxs-lookup"><span data-stu-id="766b5-133">Using D3D12\_TEXTURE\_LAYOUT\_STANDARD\_SWIZZLE with CPU access enables [**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource), [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map) (which returns a valid pointer to application), and [**Unmap**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-unmap).</span></span> <span data-ttu-id="766b5-134">Elle peut également sacrifier l’efficacité de l’accès au GPU plus que la \_ \_ mise en page de texture D3D12 \_ inconnue avec l’accès au processeur.</span><span class="sxs-lookup"><span data-stu-id="766b5-134">It can also sacrifice the efficiency of GPU access more than D3D12\_TEXTURE\_LAYOUT\_UNKNOWN with CPU access.</span></span>

## <a name="overview-of-standard-swizzle"></a><span data-ttu-id="766b5-135">Vue d’ensemble des Swizzle standard</span><span class="sxs-lookup"><span data-stu-id="766b5-135">Overview of Standard Swizzle</span></span>

<span data-ttu-id="766b5-136">D3D12 (et D3D 11.3) introduisent une disposition de données multidimensionnelles standard.</span><span class="sxs-lookup"><span data-stu-id="766b5-136">D3D12 (and D3D11.3) introduce a standard multi-dimensional data layout.</span></span> <span data-ttu-id="766b5-137">Cette opération est effectuée pour permettre à plusieurs unités de traitement de fonctionner sur les mêmes données sans copier les données ou swizzling les données entre plusieurs dispositions.</span><span class="sxs-lookup"><span data-stu-id="766b5-137">This is done to enable multiple processing units to operate on the same data without copying the data or swizzling the data between multiple layouts.</span></span> <span data-ttu-id="766b5-138">Une mise en page standardisée permet de gagner de l’efficacité grâce à des effets réseau et permet aux algorithmes de faire des petits morceaux en supposant un modèle particulier.</span><span class="sxs-lookup"><span data-stu-id="766b5-138">A standardized layout enables efficiency gains through network effects and allows algorithms to make short-cuts assuming a particular pattern.</span></span>

<span data-ttu-id="766b5-139">Pour obtenir une description détaillée des dispositions de texture, reportez-vous à la [**\_ \_ Présentation de texture D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_texture_layout).</span><span class="sxs-lookup"><span data-stu-id="766b5-139">For a detailed description of the texture layouts, refer to [**D3D12\_TEXTURE\_LAYOUT**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_texture_layout).</span></span>

<span data-ttu-id="766b5-140">Notez cependant que cette Swizzle standard est une fonctionnalité matérielle et peut ne pas être prise en charge par tous les GPU.</span><span class="sxs-lookup"><span data-stu-id="766b5-140">Note though that this standard swizzle is a hardware feature, and may not be supported by all GPUs.</span></span>

<span data-ttu-id="766b5-141">Pour obtenir des informations générales sur swizzling, reportez-vous à la [courbe ordre de plan](https://en.wikipedia.org/wiki/Z-order_curve).</span><span class="sxs-lookup"><span data-stu-id="766b5-141">For background information on swizzling, refer to [Z-order curve](https://en.wikipedia.org/wiki/Z-order_curve).</span></span>

## <a name="apis"></a><span data-ttu-id="766b5-142">API</span><span class="sxs-lookup"><span data-stu-id="766b5-142">APIs</span></span>

<span data-ttu-id="766b5-143">Contrairement à D3D 11.3, D3D12 prend en charge le mappage de texture par défaut. il n’est donc pas nécessaire d’interroger les [**\_ \_ \_ \_ options D3D12 des données de la fonctionnalité D3D12**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_d3d12_options).</span><span class="sxs-lookup"><span data-stu-id="766b5-143">Unlike D3D11.3, D3D12 supports texture mapping by default, so there is no need to query [**D3D12\_FEATURE\_DATA\_D3D12\_OPTIONS**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_d3d12_options).</span></span> <span data-ttu-id="766b5-144">Toutefois, D3D12 ne prend pas toujours en charge les Swizzle standard. cette fonctionnalité doit être interrogée avec un appel à [**CheckFeatureSupport**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) et la vérification du champ *StandardSwizzle64KBSupported* des **\_ \_ \_ \_ options** D3D12 des données de la fonctionnalité D3D12.</span><span class="sxs-lookup"><span data-stu-id="766b5-144">However D3D12 does not always support standard swizzle - this feature will need to be queried for with a call to [**CheckFeatureSupport**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) and checking the *StandardSwizzle64KBSupported* field of **D3D12\_FEATURE\_DATA\_D3D12\_OPTIONS**.</span></span>

<span data-ttu-id="766b5-145">Le mappage de texture de référence des API suivantes :</span><span class="sxs-lookup"><span data-stu-id="766b5-145">The following APIs reference texture mapping:</span></span>

<span data-ttu-id="766b5-146">Énumérations</span><span class="sxs-lookup"><span data-stu-id="766b5-146">Enums</span></span>

-   <span data-ttu-id="766b5-147">[**D3D12 \_ \_Disposition**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_texture_layout) de la texture : contrôle le modèle Swizzle des textures par défaut et active la prise en charge des cartes sur les textures accessibles par le processeur.</span><span class="sxs-lookup"><span data-stu-id="766b5-147">[**D3D12\_TEXTURE\_LAYOUT**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_texture_layout) : controls the swizzle pattern of default textures and enable map support on CPU accessible textures.</span></span>

<span data-ttu-id="766b5-148">Structures</span><span class="sxs-lookup"><span data-stu-id="766b5-148">Structures</span></span>

-   <span data-ttu-id="766b5-149">[**D3D12 \_ \_Description**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_resource_desc) de la ressource : décrit une ressource, telle qu’une texture, il s’agit d’une structure largement utilisée.</span><span class="sxs-lookup"><span data-stu-id="766b5-149">[**D3D12\_RESOURCE\_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_resource_desc) : describes a resource, such as a texture, this is an extensively used structure.</span></span>
-   <span data-ttu-id="766b5-150">[**D3D12 \_ \_Description du tas**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_heap_desc) : décrit un segment de mémoire.</span><span class="sxs-lookup"><span data-stu-id="766b5-150">[**D3D12\_HEAP\_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_heap_desc) : describes a heap.</span></span>

<span data-ttu-id="766b5-151">Méthodes</span><span class="sxs-lookup"><span data-stu-id="766b5-151">Methods</span></span>

-   <span data-ttu-id="766b5-152">[**ID3D12Device :: CreateCommittedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommittedresource) : crée une ressource unique et un tas de stockage de la taille et de l’alignement appropriés.</span><span class="sxs-lookup"><span data-stu-id="766b5-152">[**ID3D12Device::CreateCommittedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommittedresource) : creates a single resource and backing heap of the right size and alignment.</span></span>
-   <span data-ttu-id="766b5-153">[**ID3D12Device :: CreateHeap**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createheap) : crée un tas pour une mémoire tampon ou une texture.</span><span class="sxs-lookup"><span data-stu-id="766b5-153">[**ID3D12Device::CreateHeap**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createheap) : creates a heap for a buffer or texture.</span></span>
-   <span data-ttu-id="766b5-154">[**ID3D12Device :: CreatePlacedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) : crée une ressource placée dans un tas spécifique, généralement une méthode plus rapide pour créer une ressource que [**CreateHeap**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createheap).</span><span class="sxs-lookup"><span data-stu-id="766b5-154">[**ID3D12Device::CreatePlacedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) : creates a resource that is placed in a specific heap, usually a faster method of creating a resource than [**CreateHeap**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createheap).</span></span>
-   <span data-ttu-id="766b5-155">[**ID3D12Device :: CreateReservedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createreservedresource) : crée une ressource qui est réservée, mais qui n’est pas encore validée ou placée dans un segment de mémoire.</span><span class="sxs-lookup"><span data-stu-id="766b5-155">[**ID3D12Device::CreateReservedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createreservedresource) : creates a resource that is reserved but not yet committed or placed in a heap.</span></span>
-   <span data-ttu-id="766b5-156">[**ID3D12CommandQueue :: UpdateTileMappings**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-updatetilemappings) : met à jour les mappages des emplacements de mosaïques dans les ressources en mosaïque aux emplacements de mémoire dans un tas de ressources.</span><span class="sxs-lookup"><span data-stu-id="766b5-156">[**ID3D12CommandQueue::UpdateTileMappings**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-updatetilemappings) : updates mappings of tile locations in tiled resources to memory locations in a resource heap.</span></span>
-   <span data-ttu-id="766b5-157">[**ID3D12Resource :: Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map) : obtient un pointeur vers les données spécifiées dans la ressource et refuse l’accès au GPU à la sous-ressource.</span><span class="sxs-lookup"><span data-stu-id="766b5-157">[**ID3D12Resource::Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map) : gets a pointer to the specified data in the resource, and denies the GPU access to the subresource.</span></span>
-   <span data-ttu-id="766b5-158">[**ID3D12Resource :: GetDesc**](id3d12resource-getdesc.md) : obtient les propriétés de ressource.</span><span class="sxs-lookup"><span data-stu-id="766b5-158">[**ID3D12Resource::GetDesc**](id3d12resource-getdesc.md) : gets the resource properties.</span></span>
-   <span data-ttu-id="766b5-159">[**ID3D12Heap :: GetDesc**](id3d12heap-getdesc.md) obtient les propriétés du tas.</span><span class="sxs-lookup"><span data-stu-id="766b5-159">[**ID3D12Heap::GetDesc**](id3d12heap-getdesc.md) gets the heap properties.</span></span>
-   <span data-ttu-id="766b5-160">[**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource) : copie les données d’une texture qui a été mappée à l’aide de [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map).</span><span class="sxs-lookup"><span data-stu-id="766b5-160">[**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource) : copies data from a texture which was mapped using [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map).</span></span>
-   <span data-ttu-id="766b5-161">[**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource) : copie les données dans une texture qui a été mappée à l’aide de [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map).</span><span class="sxs-lookup"><span data-stu-id="766b5-161">[**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource) : copies data into a texture which was mapped using [**Map**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-map).</span></span>

<span data-ttu-id="766b5-162">Les ressources et les tas parents ont des exigences d’alignement :</span><span class="sxs-lookup"><span data-stu-id="766b5-162">Resources and parent heaps have alignment requirements:</span></span>

-   <span data-ttu-id="766b5-163">D3D12 \_ \_ \_ \_ alignement du positionnement des ressources MSAA par défaut \_ (4 Mo) pour les textures à échantillons multiples.</span><span class="sxs-lookup"><span data-stu-id="766b5-163">D3D12\_DEFAULT\_MSAA\_RESOURCE\_PLACEMENT\_ALIGNMENT (4MB) for multi-sample textures.</span></span>
-   <span data-ttu-id="766b5-164">D3D12 \_ \_ \_ alignement du positionnement des ressources par défaut \_ (64 Ko) pour les textures et les mémoires tampons d’échantillon unique.</span><span class="sxs-lookup"><span data-stu-id="766b5-164">D3D12\_DEFAULT\_RESOURCE\_PLACEMENT\_ALIGNMENT (64KB) for single sample textures and buffers.</span></span>
-   <span data-ttu-id="766b5-165">La copie linéaire des sous-ressources doit être alignée sur l’alignement de l' \_ \_ emplacement des données de texture D3D12 \_ \_ (512 octets), avec la largeur des lignes alignées sur l' \_ alignement des données de texture D3D12 \_ \_ \_ (256 octets).</span><span class="sxs-lookup"><span data-stu-id="766b5-165">Linear subresource copying must be aligned to D3D12\_TEXTURE\_DATA\_PLACEMENT\_ALIGNMENT (512 bytes), with row pitch being aligned to D3D12\_TEXTURE\_DATA\_PITCH\_ALIGNMENT (256 bytes).</span></span>
-   <span data-ttu-id="766b5-166">Les vues de mémoire tampon constantes doivent être alignées sur l’alignement de l' \_ \_ emplacement des données de mémoire tampon constante D3D12 \_ \_ \_ (256 octets).</span><span class="sxs-lookup"><span data-stu-id="766b5-166">Constant buffer views must be aligned to D3D12\_CONSTANT\_BUFFER\_DATA\_PLACEMENT\_ALIGNMENT (256 bytes).</span></span>

<span data-ttu-id="766b5-167">Les textures inférieures à 64 Ko doivent être traitées par le biais de [**CreateCommittedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommittedresource).</span><span class="sxs-lookup"><span data-stu-id="766b5-167">Textures smaller than 64KB should be processed through [**CreateCommittedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommittedresource).</span></span>

<span data-ttu-id="766b5-168">Avec les textures dynamiques (textures qui changent chaque trame), l’UC écrit de manière linéaire dans le tas de chargement, suivi d’une opération de copie GPU.</span><span class="sxs-lookup"><span data-stu-id="766b5-168">With dynamic textures (textures that change every frame) the CPU will write linearly to the upload heap, followed by a GPU copy operation.</span></span>

<span data-ttu-id="766b5-169">En général, pour créer des ressources dynamiques, créez un tampon de grande taille dans un tas de chargement (reportez-vous à [Suballocation dans les mémoires tampons](large-buffers.md)).</span><span class="sxs-lookup"><span data-stu-id="766b5-169">Typically to create dynamic resources create a large buffer in an upload heap (refer to [Suballocation Within Buffers](large-buffers.md)).</span></span> <span data-ttu-id="766b5-170">Pour créer des ressources de mise en lots, créez un tampon de grande taille dans un segment de mémoire readback.</span><span class="sxs-lookup"><span data-stu-id="766b5-170">To create staging resources, create a large buffer in a readback heap.</span></span> <span data-ttu-id="766b5-171">Pour créer des ressources statiques par défaut, créez des ressources adjacentes dans un segment de mémoire par défaut.</span><span class="sxs-lookup"><span data-stu-id="766b5-171">To create default static resources, create adjacent resources in a default heap.</span></span> <span data-ttu-id="766b5-172">Pour créer des ressources avec alias par défaut, créez des ressources qui se chevauchent dans un tas par défaut.</span><span class="sxs-lookup"><span data-stu-id="766b5-172">To create default aliased resources, create overlapping resources in a default heap.</span></span>

<span data-ttu-id="766b5-173">[**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource) et [**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource) réorganisent les données de texture entre une disposition de ligne principale et une disposition de ressources non définie.</span><span class="sxs-lookup"><span data-stu-id="766b5-173">[**WriteToSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-writetosubresource) and [**ReadFromSubresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12resource-readfromsubresource) rearrange texture data between a row-major layout and an undefined resource layout.</span></span> <span data-ttu-id="766b5-174">L’opération étant synchrone, l’application doit garder à l’esprit la planification de l’UC.</span><span class="sxs-lookup"><span data-stu-id="766b5-174">The operation is synchronous, so the application should keep CPU scheduling in mind.</span></span> <span data-ttu-id="766b5-175">L’application peut toujours fractionner la copie en régions plus petites ou planifier cette opération dans une autre tâche.</span><span class="sxs-lookup"><span data-stu-id="766b5-175">The application can always break up the copying into smaller regions or schedule this operation in another task.</span></span> <span data-ttu-id="766b5-176">Les ressources MSAA et les ressources de stencil de profondeur avec des mises en page de ressources opaques ne sont pas prises en charge par ces opérations de copie de l’UC et provoquent une défaillance.</span><span class="sxs-lookup"><span data-stu-id="766b5-176">MSAA resources and depth-stencil resources with opaque resource layouts are not supported by these CPU copy operations, and will cause a failure.</span></span> <span data-ttu-id="766b5-177">Les formats qui n’ont pas de taille de l’élément Power-of-Two ne sont pas non plus pris en charge et provoquent également un échec.</span><span class="sxs-lookup"><span data-stu-id="766b5-177">Formats which don’t have a power-of-two element size are also not supported and will also cause a failure.</span></span> <span data-ttu-id="766b5-178">Des codes de retour de mémoire insuffisante peuvent se produire.</span><span class="sxs-lookup"><span data-stu-id="766b5-178">Out of memory return codes can occur.</span></span>

## <a name="related-topics"></a><span data-ttu-id="766b5-179">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="766b5-179">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="766b5-180">**Constantes principales**</span><span class="sxs-lookup"><span data-stu-id="766b5-180">**Core Constants**</span></span>](constants.md)
</dt> <dt>

[<span data-ttu-id="766b5-181">**ID3D12Heap**</span><span class="sxs-lookup"><span data-stu-id="766b5-181">**ID3D12Heap**</span></span>](/windows/desktop/api/d3d12/nn-d3d12-id3d12heap)
</dt> <dt>

[<span data-ttu-id="766b5-182">Liaison de ressource</span><span class="sxs-lookup"><span data-stu-id="766b5-182">Resource Binding</span></span>](resource-binding.md)
</dt> </dl>

 

 




