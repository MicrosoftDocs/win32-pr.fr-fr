---
title: Vue d’ensemble des descripteurs
description: Les descripteurs sont créés par des appels d’API et identifient les ressources.
ms.assetid: 64721226-5533-4816-865E-9429032FCC86
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 17d83b2fbfd5c5df2738c61aea4f1d1115d6c874
ms.sourcegitcommit: 3bdf30edb314e0fcd17dc4ddbc70e4ec7d3596e6
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/10/2021
ms.locfileid: "104548556"
---
# <a name="descriptors-overview"></a><span data-ttu-id="53b01-103">Vue d’ensemble des descripteurs</span><span class="sxs-lookup"><span data-stu-id="53b01-103">Descriptors Overview</span></span>

<span data-ttu-id="53b01-104">Les descripteurs sont créés par des appels d’API et identifient les ressources.</span><span class="sxs-lookup"><span data-stu-id="53b01-104">Descriptors are created by API calls and identify resources.</span></span>

-   [<span data-ttu-id="53b01-105">Données du descripteur</span><span class="sxs-lookup"><span data-stu-id="53b01-105">Descriptor data</span></span>](#descriptor-data)
-   [<span data-ttu-id="53b01-106">Handles de descripteur</span><span class="sxs-lookup"><span data-stu-id="53b01-106">Descriptor handles</span></span>](#descriptor-handles)
-   [<span data-ttu-id="53b01-107">Descripteurs null</span><span class="sxs-lookup"><span data-stu-id="53b01-107">Null descriptors</span></span>](#null-descriptors)
-   [<span data-ttu-id="53b01-108">Descripteurs par défaut</span><span class="sxs-lookup"><span data-stu-id="53b01-108">Default descriptors</span></span>](#default-descriptors)
-   [<span data-ttu-id="53b01-109">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="53b01-109">Related topics</span></span>](#related-topics)

## <a name="descriptor-data"></a><span data-ttu-id="53b01-110">Données du descripteur</span><span class="sxs-lookup"><span data-stu-id="53b01-110">Descriptor data</span></span>

<span data-ttu-id="53b01-111">Un descripteur est un bloc de données relativement petit, qui décrit entièrement un objet au GPU, dans un format opaque spécifique au GPU.</span><span class="sxs-lookup"><span data-stu-id="53b01-111">A descriptor is a relatively small block of data that fully describes an object to the GPU, in a GPU-specific opaque format.</span></span> <span data-ttu-id="53b01-112">Il existe plusieurs types de descripteurs (RTVs), les vues de &mdash; stencil de profondeur (DSV), les vues de ressources de nuanceur (SRVs), les vues d’accès non ordonnées (UAVs), les vues de mémoire tampon constantes (CBVS) et les échantillonneurs.</span><span class="sxs-lookup"><span data-stu-id="53b01-112">There are several different types of descriptors&mdash;render target views (RTVs), depth stencil views (DSVs), shader resource views (SRVs), unordered access views (UAVs), constant buffer views (CBVs), and samplers.</span></span>

<span data-ttu-id="53b01-113">La taille des descripteurs varie selon le matériel du GPU.</span><span class="sxs-lookup"><span data-stu-id="53b01-113">Descriptors vary in size, depending on the GPU hardware.</span></span> <span data-ttu-id="53b01-114">Vous pouvez interroger la taille d’un SRV, d’un UAV ou d’un CBV en appelant [**ID3D12Device :: GetDescriptorHandleIncrementSize**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getdescriptorhandleincrementsize).</span><span class="sxs-lookup"><span data-stu-id="53b01-114">You can query for the size of an SRV, UAV, or CBV by calling [**ID3D12Device::GetDescriptorHandleIncrementSize**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getdescriptorhandleincrementsize).</span></span> <span data-ttu-id="53b01-115">Les descripteurs sont présentés dans cette documentation sous forme d’unités indivisibles ; Voici un exemple.</span><span class="sxs-lookup"><span data-stu-id="53b01-115">Descriptors are shown in this documentation as indivisible units; here's an example.</span></span>

![SRV, CBV, UAV et échantillonner](images/single-descriptor.png)

<span data-ttu-id="53b01-117">Les descripteurs sont créés par des appels d’API et incluent des informations telles que la ressource et les mappages MIP que vous souhaitez que le descripteur contienne.</span><span class="sxs-lookup"><span data-stu-id="53b01-117">Descriptors are created by API calls, and will include information such as the resource and mip-maps you want the descriptor to contain.</span></span>

<span data-ttu-id="53b01-118">Le pilote n’effectue pas le suivi ou ne contient pas de références aux descripteurs, c’est à l’application de s’assurer que le type de descripteur correct est utilisé et que les informations sont actuelles.</span><span class="sxs-lookup"><span data-stu-id="53b01-118">The driver does not track or hold references to descriptors, it is up to the app to ensure the correct descriptor type is in use, and that the information is current.</span></span> <span data-ttu-id="53b01-119">Il y a une petite exception à cela ; le pilote inspecte les liaisons de la cible de rendu pour garantir le bon fonctionnement des chaînes d’échange.</span><span class="sxs-lookup"><span data-stu-id="53b01-119">There is one small exception to this; the driver does inspect render target bindings to ensure swap chains work correctly.</span></span>

<span data-ttu-id="53b01-120">Les descripteurs d’objets n’ont pas besoin d’être libérés ni libérés.</span><span class="sxs-lookup"><span data-stu-id="53b01-120">Object descriptors do not need to be freed or released.</span></span> <span data-ttu-id="53b01-121">Les pilotes n’attachent aucune allocation à la création d’un descripteur.</span><span class="sxs-lookup"><span data-stu-id="53b01-121">Drivers do not attach any allocations to the creation of a descriptor.</span></span> <span data-ttu-id="53b01-122">Toutefois, un descripteur peut encoder des références à d’autres allocations pour lesquelles l’application possède la durée de vie.</span><span class="sxs-lookup"><span data-stu-id="53b01-122">A descriptor may, however, encode references to other allocations for which the application owns the lifetime.</span></span> <span data-ttu-id="53b01-123">Par exemple, un descripteur pour un SRV doit contenir l’adresse virtuelle de la ressource D3D (par exemple, une texture) à laquelle le SRV fait référence.</span><span class="sxs-lookup"><span data-stu-id="53b01-123">For instance, a descriptor for an SRV must contain the virtual address of the D3D resource (e.g. a texture) that the SRV refers to.</span></span> <span data-ttu-id="53b01-124">Il incombe à l’application de s’assurer qu’elle n’utilise pas de descripteur SRV lorsque la ressource D3D sous-jacente dont elle dépend a été détruite ou est en cours de modification (comme étant déclarée comme étant non résident).</span><span class="sxs-lookup"><span data-stu-id="53b01-124">It is the application's responsibility to make sure that it does not use an SRV descriptor when the underlying D3D resource it depends on has been destroyed or is being modified (such as being declared as nonresident).</span></span>

<span data-ttu-id="53b01-125">Le principal moyen d’utiliser les descripteurs est de les placer dans des tas de descripteurs, qui sont la mémoire de stockage pour les descripteurs.</span><span class="sxs-lookup"><span data-stu-id="53b01-125">The primary way to use descriptors is to place them in descriptor heaps, which are backing memory for descriptors.</span></span>

## <a name="descriptor-handles"></a><span data-ttu-id="53b01-126">Handles de descripteur</span><span class="sxs-lookup"><span data-stu-id="53b01-126">Descriptor handles</span></span>

<span data-ttu-id="53b01-127">Un handle de descripteur est l’adresse unique du descripteur.</span><span class="sxs-lookup"><span data-stu-id="53b01-127">A descriptor handle is the unique address of the descriptor.</span></span> <span data-ttu-id="53b01-128">Elle est similaire à un pointeur, mais est opaque car son implémentation est spécifique au matériel.</span><span class="sxs-lookup"><span data-stu-id="53b01-128">It is similar to a pointer, but is opaque as its implementation is hardware specific.</span></span> <span data-ttu-id="53b01-129">Le handle est unique dans les tas de descripteurs. par exemple, un tableau de handles peut référencer des descripteurs dans plusieurs tas.</span><span class="sxs-lookup"><span data-stu-id="53b01-129">The handle is unique across descriptor heaps, so, for example, an array of handles can reference descriptors in multiple heaps.</span></span>

<span data-ttu-id="53b01-130">Les handles d’UC sont destinés à une utilisation immédiate, tels que la copie où la source et la destination doivent être identifiées.</span><span class="sxs-lookup"><span data-stu-id="53b01-130">CPU handles are for immediate use, such as copying where both the source and destination need to be identified.</span></span> <span data-ttu-id="53b01-131">Immédiatement après l’utilisation (par exemple, un appel à [**ID3D12GraphicsCommandList :: OMSetRenderTargets**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets)), ils peuvent être réutilisés, ou leur tas sous-jacent peut être supprimé.</span><span class="sxs-lookup"><span data-stu-id="53b01-131">Immediately after use (for example, a call to [**ID3D12GraphicsCommandList::OMSetRenderTargets**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets)), they can be reused, or their underlying heap can be disposed.</span></span>

<span data-ttu-id="53b01-132">Les handles GPU ne sont pas destinés à une utilisation immédiate &mdash; ils identifient les emplacements d’une liste de commandes, à utiliser au moment de l’exécution du GPU.</span><span class="sxs-lookup"><span data-stu-id="53b01-132">GPU handles are not for immediate use&mdash;they identify locations from a command list, for use at GPU execution time.</span></span> <span data-ttu-id="53b01-133">Elles doivent être conservées jusqu’à ce que toutes les listes de commandes qui les référencent aient été exécutées entièrement.</span><span class="sxs-lookup"><span data-stu-id="53b01-133">They must be preserved until any command lists referencing them have executed entirely.</span></span>

<span data-ttu-id="53b01-134">Pour créer un handle de descripteur pour le début d’un segment de mémoire, après avoir créé le tas du descripteur lui-même, appelez l’une des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="53b01-134">To create a descriptor handle for the start of a heap, after creating the descriptor heap itself, call one of the following methods:</span></span>

-   [<span data-ttu-id="53b01-135">**ID3D12DescriptorHeap::GetCPUDescriptorHandleForHeapStart**</span><span class="sxs-lookup"><span data-stu-id="53b01-135">**ID3D12DescriptorHeap::GetCPUDescriptorHandleForHeapStart**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12descriptorheap-getcpudescriptorhandleforheapstart)
-   [<span data-ttu-id="53b01-136">**ID3D12DescriptorHeap::GetGPUDescriptorHandleForHeapStart**</span><span class="sxs-lookup"><span data-stu-id="53b01-136">**ID3D12DescriptorHeap::GetGPUDescriptorHandleForHeapStart**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12descriptorheap-getgpudescriptorhandleforheapstart)

<span data-ttu-id="53b01-137">Ces méthodes retournent les structures suivantes :</span><span class="sxs-lookup"><span data-stu-id="53b01-137">These methods return the following structures:</span></span>

-   [<span data-ttu-id="53b01-138">**\_Handle de \_ descripteur de processeur D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="53b01-138">**D3D12\_CPU\_DESCRIPTOR\_HANDLE**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_cpu_descriptor_handle)
-   [<span data-ttu-id="53b01-139">**\_Handle du \_ descripteur GPU D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="53b01-139">**D3D12\_GPU\_DESCRIPTOR\_HANDLE**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_gpu_descriptor_handle)

<span data-ttu-id="53b01-140">À mesure que la taille des descripteurs varie selon le matériel, pour obtenir l’incrément entre chaque descripteur d’un segment de mémoire, utilisez :</span><span class="sxs-lookup"><span data-stu-id="53b01-140">As the size of the descriptors varies by hardware, to get the increment between each descriptor in a heap use:</span></span>

-   [<span data-ttu-id="53b01-141">**ID3D12Device::GetDescriptorHandleIncrementSize**</span><span class="sxs-lookup"><span data-stu-id="53b01-141">**ID3D12Device::GetDescriptorHandleIncrementSize**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getdescriptorhandleincrementsize)

<span data-ttu-id="53b01-142">Il est possible de décaler un emplacement de départ avec un nombre d’incréments, de copier des handles et de passer des handles dans des appels d’API.</span><span class="sxs-lookup"><span data-stu-id="53b01-142">It is safe to offset a starting location with a number of increments, to copy handles, and to pass handles into API calls.</span></span> <span data-ttu-id="53b01-143">Il n’est pas possible de déréférencer un handle comme s’il s’agissait d’un pointeur d’UC valide, ni d’analyser les bits dans un handle.</span><span class="sxs-lookup"><span data-stu-id="53b01-143">It is not safe to dereference a handle as if it was a valid CPU pointer, nor to analyze the bits within a handle.</span></span>

<span data-ttu-id="53b01-144">Certaines structures d’assistance ont été ajoutées, avec des membres d’initialisation, pour simplifier légèrement la gestion des handles.</span><span class="sxs-lookup"><span data-stu-id="53b01-144">Some helper structures have been added, with initialization members, to make managing handles a little easier.</span></span>

-   [<span data-ttu-id="53b01-145">**\_Handle de \_ descripteur de processeur CD3DX12 \_**</span><span class="sxs-lookup"><span data-stu-id="53b01-145">**CD3DX12\_CPU\_DESCRIPTOR\_HANDLE**</span></span>](cd3dx12-cpu-descriptor-handle.md)
-   [<span data-ttu-id="53b01-146">**\_Handle du \_ descripteur GPU CD3DX12 \_**</span><span class="sxs-lookup"><span data-stu-id="53b01-146">**CD3DX12\_GPU\_DESCRIPTOR\_HANDLE**</span></span>](cd3dx12-gpu-descriptor-handle.md)

## <a name="null-descriptors"></a><span data-ttu-id="53b01-147">Descripteurs null</span><span class="sxs-lookup"><span data-stu-id="53b01-147">Null descriptors</span></span>

<span data-ttu-id="53b01-148">Lors de la création de descripteurs à l’aide d’appels d’API, les applications passent la valeur NULL pour le pointeur de ressource dans la définition du descripteur afin d’obtenir l’effet d’une liaison Nothing lorsqu’un nuanceur y accède.</span><span class="sxs-lookup"><span data-stu-id="53b01-148">When creating descriptors using API calls, applications pass NULL for the resource pointer in the descriptor definition to achieve the effect of nothing bound when accessed by a shader.</span></span>

<span data-ttu-id="53b01-149">Le reste du descripteur doit être rempli autant que possible.</span><span class="sxs-lookup"><span data-stu-id="53b01-149">The rest of the descriptor must be populated as much as possible.</span></span> <span data-ttu-id="53b01-150">Par exemple, dans le cas des vues des ressources de nuanceur (SRVs), le descripteur peut être utilisé pour distinguer le type d’affichage (Texture1D, Texture2D, etc.).</span><span class="sxs-lookup"><span data-stu-id="53b01-150">For example, in the case of Shader Resource Views (SRVs), the descriptor can be used to distinguish the type of view it is (Texture1D, Texture2D, and so on).</span></span> <span data-ttu-id="53b01-151">Les paramètres numériques du descripteur de vue, tels que le nombre de des mipmaps, doivent tous être définis sur des valeurs qui sont valides pour une ressource.</span><span class="sxs-lookup"><span data-stu-id="53b01-151">Numerical parameters in the view descriptor, such as the number of mipmaps, must all be set to values that are valid for a resource.</span></span>

<span data-ttu-id="53b01-152">Dans de nombreux cas, il existe un comportement défini pour accéder à une ressource indépendante, comme SRVs qui retournent des valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="53b01-152">In many cases, there is a defined behavior for accessing an unbound resource, such as SRVs which return default values.</span></span> <span data-ttu-id="53b01-153">Celles-ci seront respectées lors de l’accès à un descripteur NULL tant que le type d’accès du nuanceur est compatible avec le type de descripteur.</span><span class="sxs-lookup"><span data-stu-id="53b01-153">Those will be honored when accessing a NULL descriptor as long as the type of shader access is compatible with the descriptor type.</span></span> <span data-ttu-id="53b01-154">Par exemple, si un nuanceur attend un Texture2D SRV et accède à un SRV NULL défini en tant que Texture1D, le comportement n’est pas défini et peut entraîner la réinitialisation de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="53b01-154">For example, if a shader expects a Texture2D SRV and accesses a NULL SRV defined as a Texture1D, the behavior is undefined and could result in device reset.</span></span>

<span data-ttu-id="53b01-155">En résumé, pour créer un descripteur null, transmettez `null` le paramètre de *présource* lors de la création de la vue à l’aide de méthodes telles que [**CreateShaderResourceView**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview).</span><span class="sxs-lookup"><span data-stu-id="53b01-155">In summary, to create a null descriptor, pass `null` for the *pResource* parameter when creating the view with methods such as [**CreateShaderResourceView**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview).</span></span> <span data-ttu-id="53b01-156">Pour le paramètre de description de vue *pDesc*, définissez une configuration qui fonctionnerait si la ressource n’était pas null (sinon, un incident peut se produire sur un matériel).</span><span class="sxs-lookup"><span data-stu-id="53b01-156">For the view description parameter *pDesc*, set a configuration that would work if the resource was not null (otherwise a crash may occur on some hardware).</span></span>

<span data-ttu-id="53b01-157">Toutefois, les descripteurs racine ne doivent pas avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="53b01-157">Root descriptors however, should not be set to null.</span></span>

<span data-ttu-id="53b01-158">Sur le matériel de niveau 1 (voir les [**niveaux matériels**](./hardware-support.md), tous les descripteurs liés (via les tables de descripteurs) doivent être initialisés en tant que descripteurs réels ou descripteurs null, même s’ils ne sont pas accessibles par le matériel, sinon le comportement n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="53b01-158">On Tier1 hardware (see [**Hardware Tiers**](./hardware-support.md), all descriptors that are bound (via descriptor tables) must be initialized, either as real descriptors or null descriptors, even if not accessed by the hardware, otherwise behaviour is undefined.</span></span>

<span data-ttu-id="53b01-159">Sur le matériel niveau2, cela s’applique aux descripteurs CBV et UAV liés, mais pas aux descripteurs SRV.</span><span class="sxs-lookup"><span data-stu-id="53b01-159">On Tier2 hardware, this applies to bound CBV and UAV descriptors, but not to SRV descriptors.</span></span>

<span data-ttu-id="53b01-160">Sur le matériel niveau3, il n’y a aucune restriction à cet effet, à condition que les descripteurs non initialisés ne soient jamais accessibles.</span><span class="sxs-lookup"><span data-stu-id="53b01-160">On Tier3 hardware, there's no restriction on this, provided that uninitialized descriptors are never accessed.</span></span>

## <a name="default-descriptors"></a><span data-ttu-id="53b01-161">Descripteurs par défaut</span><span class="sxs-lookup"><span data-stu-id="53b01-161">Default descriptors</span></span>

<span data-ttu-id="53b01-162">Pour créer un descripteur par défaut pour une vue particulière, transmettez un paramètre de *présource* valide à la méthode Create View (telle que [**CreateShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview)), mais transmettez **null** pour le paramètre *pDesc* .</span><span class="sxs-lookup"><span data-stu-id="53b01-162">To create a default descriptor for a particular view, pass in a valid *pResource* parameter to the create view method (such as [**CreateShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview)), but pass in **NULL** for the *pDesc* parameter.</span></span> <span data-ttu-id="53b01-163">Par exemple, si la ressource contenait 14 mips, la vue contiendrait 14 mips.</span><span class="sxs-lookup"><span data-stu-id="53b01-163">For example, if the resource contained 14 mips, then the view would contain 14 mips.</span></span> <span data-ttu-id="53b01-164">Le cas par défaut couvre le mappage le plus évident d’une ressource à une vue.</span><span class="sxs-lookup"><span data-stu-id="53b01-164">The default case covers the most obvious mapping of a resource to a view.</span></span> <span data-ttu-id="53b01-165">Cela nécessite que la ressource soit allouée avec un nom de format qualifié complet (par exemple, **DXGI_FORMAT_R8G8B8A8_UNORM_SRGB** plutôt que **DXGI_FORMAT_R8G8B8A8_TYPELESS**).</span><span class="sxs-lookup"><span data-stu-id="53b01-165">This does require that the resource is allocated with a fully qualified format name (such as **DXGI_FORMAT_R8G8B8A8_UNORM_SRGB** rather than **DXGI_FORMAT_R8G8B8A8_TYPELESS**).</span></span>

<span data-ttu-id="53b01-166">Les descripteurs par défaut ne peuvent pas être utilisés avec une vue de structure d’accélération Raytracing, car le paramètre de *présource* fourni doit avoir la **valeur null**, et l’emplacement doit être passé via une d3d12_raytracing_acceleration_structure_srv de [**D3D12_RAYTRACING_ACCELERATION_STRUCTURE_SRV**]/Windows/Win32/API/d3d12/NS-d3d12-).</span><span class="sxs-lookup"><span data-stu-id="53b01-166">Default descriptors can't be used with a raytracing acceleration structure view, because the provided *pResource* parameter must be **NULL**, and the location must be passed via a [**D3D12_RAYTRACING_ACCELERATION_STRUCTURE_SRV**]/windows/win32/api/d3d12/ns-d3d12-d3d12_raytracing_acceleration_structure_srv).</span></span>

## <a name="related-topics"></a><span data-ttu-id="53b01-167">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="53b01-167">Related topics</span></span>

[<span data-ttu-id="53b01-168">Descripteurs</span><span class="sxs-lookup"><span data-stu-id="53b01-168">Descriptors</span></span>](descriptors.md)