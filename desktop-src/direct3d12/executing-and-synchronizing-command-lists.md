---
title: Exécution et synchronisation de listes de commandes
description: Dans Microsoft Direct3D 12, le mode immédiat des versions précédentes n’est plus présent.
ms.assetid: D5013102-2302-4D66-8F59-079C03BA65FD
keywords:
- Liste des commandes
- synchronisation
- exécution
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 90d5362d0f093c7c1034e03d396ad28c40d4d600
ms.sourcegitcommit: 170bc12e9724d00cecbb96d57c7226c51e135dee
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/07/2021
ms.locfileid: "113489177"
---
# <a name="executing-and-synchronizing-command-lists"></a><span data-ttu-id="89b16-106">Exécution et synchronisation de listes de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-106">Executing and Synchronizing Command Lists</span></span>

<span data-ttu-id="89b16-107">Dans Microsoft Direct3D 12, le mode immédiat des versions précédentes n’est plus présent.</span><span class="sxs-lookup"><span data-stu-id="89b16-107">In Microsoft Direct3D 12, the immediate mode of previous versions is no longer present.</span></span> <span data-ttu-id="89b16-108">Au lieu de cela, les applications créent des listes de commandes et des offres groupées, puis enregistrent des jeux de commandes GPU.</span><span class="sxs-lookup"><span data-stu-id="89b16-108">Instead, apps create command lists and bundles and then record sets of GPU commands.</span></span> <span data-ttu-id="89b16-109">Les files d’attente de commandes sont utilisées pour envoyer des listes de commandes à exécuter.</span><span class="sxs-lookup"><span data-stu-id="89b16-109">Command queues are used to submit command lists to be executed.</span></span> <span data-ttu-id="89b16-110">Ce modèle permet aux développeurs d’avoir davantage de contrôle sur l’utilisation efficace de l’unité de traitement graphique (GPU) et de l’UC.</span><span class="sxs-lookup"><span data-stu-id="89b16-110">This model allows developers to have more control over the efficient usage of both graphics processing unit (GPU) and CPU.</span></span>

-   [<span data-ttu-id="89b16-111">Présentation de la file d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-111">Command queue overview</span></span>](#command-queue-overview)
-   [<span data-ttu-id="89b16-112">Initialisation d’une file d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-112">Initializing a command queue</span></span>](#initializing-a-command-queue)
-   [<span data-ttu-id="89b16-113">Exécution de listes de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-113">Executing command Lists</span></span>](#executing-command-lists)
-   [<span data-ttu-id="89b16-114">Accès aux ressources à partir de plusieurs files d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-114">Accessing resources from multiple command queues</span></span>](#accessing-resources-from-multiple-command-queues)
-   [<span data-ttu-id="89b16-115">Synchronisation de l’exécution de la liste de commandes à l’aide des clôtures de file d’attente</span><span class="sxs-lookup"><span data-stu-id="89b16-115">Synchronizing command list execution using command queue fences</span></span>](#synchronizing-command-list-execution-using-command-queue-fences)
-   [<span data-ttu-id="89b16-116">Synchronisation des ressources accessibles par les files d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-116">Synchronizing resources accessed by command queues</span></span>](#synchronizing-resources-accessed-by-command-queues)
-   [<span data-ttu-id="89b16-117">Prise en charge des files d’attente de commandes pour les ressources en mosaïque</span><span class="sxs-lookup"><span data-stu-id="89b16-117">Command queue support for tiled resources</span></span>](#command-queue-support-for-tiled-resources)
-   [<span data-ttu-id="89b16-118">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="89b16-118">Related topics</span></span>](#related-topics)

## <a name="command-queue-overview"></a><span data-ttu-id="89b16-119">Présentation de la file d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-119">Command queue overview</span></span>

<span data-ttu-id="89b16-120">Les files d’attente de commandes Direct3D 12 remplacent la synchronisation du runtime et du pilote de la soumission de travail en mode immédiat, qui n’a pas été exposée au développeur, avec des API pour gérer explicitement la concurrence, le parallélisme et la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="89b16-120">Direct3D 12 command queues replace runtime and driver synchronization of immediate mode work submission, previously not-exposed to the developer, with APIs for explicitly managing concurrency, parallelism and synchronization.</span></span> <span data-ttu-id="89b16-121">Les files d’attente de commandes offrent les améliorations suivantes aux développeurs :</span><span class="sxs-lookup"><span data-stu-id="89b16-121">Command queues provide the following improvements for developers:</span></span>

-   <span data-ttu-id="89b16-122">Permet aux développeurs d’éviter les inefficacités accidentelles provoquées par une synchronisation inattendue.</span><span class="sxs-lookup"><span data-stu-id="89b16-122">Allows developers to avoid accidental inefficiencies caused by unexpected synchronization.</span></span>
-   <span data-ttu-id="89b16-123">Permet aux développeurs d’introduire la synchronisation à un niveau supérieur où la synchronisation requise peut être déterminée plus efficacement et de manière plus précise.</span><span class="sxs-lookup"><span data-stu-id="89b16-123">Allows developers to introduce synchronization at a higher level where the required synchronization can be determined more efficiently and accurately.</span></span> <span data-ttu-id="89b16-124">Cela signifie que le runtime et le pilote Graphics passent moins de temps à réactiver le parallélisme de manière réactive.</span><span class="sxs-lookup"><span data-stu-id="89b16-124">This means the runtime and the graphics driver will spend less time reactively engineering parallelism.</span></span>
-   <span data-ttu-id="89b16-125">Rend les opérations coûteuses plus explicites.</span><span class="sxs-lookup"><span data-stu-id="89b16-125">Makes expensive operations more explicit.</span></span>

<span data-ttu-id="89b16-126">Ces améliorations activent ou améliorent les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="89b16-126">These improvements enable or enhance the following scenarios:</span></span>

-   <span data-ttu-id="89b16-127">Parallélisme accru : les applications peuvent utiliser des files d’attente plus profondes pour les charges de travail en arrière-plan, telles que le décodage vidéo, lorsqu’elles ont des files d’attente distinctes pour le travail de premier plan.</span><span class="sxs-lookup"><span data-stu-id="89b16-127">Increased parallelism - Applications can use deeper queues for background workloads, such as video decoding, when they have separate queues for foreground work.</span></span>
-   <span data-ttu-id="89b16-128">Travail de GPU asynchrone et de faible priorité : le modèle de file d’attente de commandes permet l’exécution simultanée de tâches GPU de faible priorité et d’opérations atomiques qui permettent à un thread GPU de consommer les résultats d’un autre thread non synchronisé sans blocage.</span><span class="sxs-lookup"><span data-stu-id="89b16-128">Asynchronous and low-priority GPU work - The command queue model enables concurrent execution of low-priority GPU work and atomic operations that enable one GPU thread to consume the results of another unsynchronized thread without blocking.</span></span>
-   <span data-ttu-id="89b16-129">Travail de calcul à priorité élevée : cette conception permet des scénarios qui requièrent l’interruption du rendu 3D pour effectuer une petite quantité de travail de calcul haute priorité afin que le résultat puisse être obtenu tôt pour un traitement supplémentaire sur le processeur.</span><span class="sxs-lookup"><span data-stu-id="89b16-129">High-priority compute work - This design enables scenarios that require interrupting 3D rendering to do a small amount of high-priority compute work so that the result can be obtained early for additional processing on the CPU.</span></span>

## <a name="initializing-a-command-queue"></a><span data-ttu-id="89b16-130">Initialisation d’une file d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-130">Initializing a command queue</span></span>

<span data-ttu-id="89b16-131">Les files d’attente de commandes peuvent être créées en appelant [**ID3D12Device :: CreateCommandQueue**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandqueue).</span><span class="sxs-lookup"><span data-stu-id="89b16-131">Command queues can be created by calling [**ID3D12Device::CreateCommandQueue**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandqueue).</span></span> <span data-ttu-id="89b16-132">Cette méthode prend un [**\_ type de \_ liste \_ de commandes D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_command_list_type) indiquant le type de file d’attente qui doit être créé et, par conséquent, le type de commande qui peut être soumis à cette file d’attente.</span><span class="sxs-lookup"><span data-stu-id="89b16-132">This method takes a [**D3D12\_COMMAND\_LIST\_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_command_list_type) indicating what type of queue should be created, and therefore, what type of commands can be submitted to that queue.</span></span> <span data-ttu-id="89b16-133">N’oubliez pas que les offres groupées ne peuvent être appelées qu’à partir de listes de commandes directes et ne peuvent pas être envoyées directement à une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="89b16-133">Remember that bundles can only be called from direct command lists and can't be submitted directly to a queue.</span></span> <span data-ttu-id="89b16-134">Les types de file d’attente pris en charge sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="89b16-134">The supported queue types are:</span></span>

-   [<span data-ttu-id="89b16-135">**\_Type de liste de commandes D3D12 \_ \_ \_ direct**</span><span class="sxs-lookup"><span data-stu-id="89b16-135">**D3D12\_COMMAND\_LIST\_TYPE\_DIRECT**</span></span>](/windows/desktop/api/d3d12/ne-d3d12-d3d12_command_list_type)
-   [<span data-ttu-id="89b16-136">**D3D12 \_ type de liste de commandes \_ \_ \_ Compute**</span><span class="sxs-lookup"><span data-stu-id="89b16-136">**D3D12\_COMMAND\_LIST\_TYPE\_COMPUTE**</span></span>](/windows/desktop/api/d3d12/ne-d3d12-d3d12_command_list_type)
-   [<span data-ttu-id="89b16-137">**\_Copie de \_ type de liste de commandes D3D12 \_ \_**</span><span class="sxs-lookup"><span data-stu-id="89b16-137">**D3D12\_COMMAND\_LIST\_TYPE\_COPY**</span></span>](/windows/desktop/api/d3d12/ne-d3d12-d3d12_command_list_type)

<span data-ttu-id="89b16-138">En général, les files d’attente directes et les listes de commandes acceptent toute commande, les files d’attente de calcul et les listes de commandes acceptent les commandes Compute et Copy connexes, et les files d’attente et les listes de commandes de copie acceptent uniquement les commandes de copie.</span><span class="sxs-lookup"><span data-stu-id="89b16-138">In general, DIRECT queues and command lists accept any command, COMPUTE queues and command lists accept compute and copy related commands, and COPY queues and command lists accept only copy commands.</span></span>

## <a name="executing-command-lists"></a><span data-ttu-id="89b16-139">Exécution de listes de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-139">Executing command Lists</span></span>

<span data-ttu-id="89b16-140">Une fois que vous avez enregistré une liste de commandes et que vous avez récupéré la file d’attente de commandes par défaut ou que vous en avez créé une, vous exécutez des listes de commandes en appelant [**ID3D12CommandQueue :: ExecuteCommandLists**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists).</span><span class="sxs-lookup"><span data-stu-id="89b16-140">After you have recorded a command list and either retrieved the default command queue or created a new one, you execute command lists by calling [**ID3D12CommandQueue::ExecuteCommandLists**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists).</span></span>

<span data-ttu-id="89b16-141">Les applications peuvent envoyer des listes de commandes à n’importe quelle file d’attente de commandes à partir de plusieurs threads.</span><span class="sxs-lookup"><span data-stu-id="89b16-141">Applications can submit command lists to any command queue from multiple threads.</span></span> <span data-ttu-id="89b16-142">Le Runtime effectue le travail de sérialisation de ces requêtes dans l’ordre d’envoi.</span><span class="sxs-lookup"><span data-stu-id="89b16-142">The runtime will perform the work of serializing these requests in the order of submission.</span></span>

<span data-ttu-id="89b16-143">Le runtime validera la liste de commandes envoyée et supprimera l’appel à [**ExecuteCommandLists**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) si l’une des restrictions n’est pas respectée.</span><span class="sxs-lookup"><span data-stu-id="89b16-143">The runtime will validate the submitted command list and will drop the call to [**ExecuteCommandLists**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) if any of the restrictions are violated.</span></span> <span data-ttu-id="89b16-144">Les appels seront abandonnés pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="89b16-144">Calls will be dropped for the following reasons:</span></span>

-   <span data-ttu-id="89b16-145">La liste de commandes fournie est un bundle, pas une liste de commandes directe.</span><span class="sxs-lookup"><span data-stu-id="89b16-145">The supplied command list is a bundle, not a direct command list.</span></span>
-   <span data-ttu-id="89b16-146">[**ID3D12GraphicsCommandList :: Close**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-close) n’a pas été appelé dans la liste de commandes fournie pour terminer l’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="89b16-146">[**ID3D12GraphicsCommandList::Close**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-close) has not been called on the supplied command list to complete recording.</span></span>
-   <span data-ttu-id="89b16-147">[**ID3D12CommandAllocator :: Reset**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandallocator-reset) a été appelé sur l’allocateur de commande associé à la liste de commandes depuis qu’il a été enregistré.</span><span class="sxs-lookup"><span data-stu-id="89b16-147">[**ID3D12CommandAllocator::Reset**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandallocator-reset) has been called on the command allocator associated with the command list since it was recorded.</span></span> <span data-ttu-id="89b16-148">Pour plus d’informations sur les allocateurs de commandes, consultez [création et enregistrement des listes de commandes et des offres groupées](recording-command-lists-and-bundles.md).</span><span class="sxs-lookup"><span data-stu-id="89b16-148">For more information about command allocators, see [Creating and recording command lists and bundles](recording-command-lists-and-bundles.md).</span></span>
-   <span data-ttu-id="89b16-149">La limite de file d’attente de commandes indique qu’une exécution précédente de la liste de commandes n’est pas encore terminée.</span><span class="sxs-lookup"><span data-stu-id="89b16-149">The command queue fence indicates that a previous execution of the command list has not yet completed.</span></span> <span data-ttu-id="89b16-150">Les limites de la file d’attente des commandes sont décrites en détail ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="89b16-150">Command queue fences are discussed in detail below.</span></span>
-   <span data-ttu-id="89b16-151">Les États Before et after des requêtes, définis avec des appels à [**ID3D12GraphicsCommandList :: BeginQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) et [**ID3D12GraphicsCommandList :: EndQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery), ne sont pas correctement mis en correspondance.</span><span class="sxs-lookup"><span data-stu-id="89b16-151">The before and after states of queries, set with calls to [**ID3D12GraphicsCommandList::BeginQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) and [**ID3D12GraphicsCommandList::EndQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery), are not matched properly.</span></span>
-   <span data-ttu-id="89b16-152">Les États avant et après des barrières de transition de ressources ne sont pas correctement mis en correspondance.</span><span class="sxs-lookup"><span data-stu-id="89b16-152">The before and after states of resource transition barriers are not matched properly.</span></span> <span data-ttu-id="89b16-153">Pour plus d’informations, consultez [utilisation de barrières de ressources pour synchroniser les États des ressources](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md).</span><span class="sxs-lookup"><span data-stu-id="89b16-153">For more information, see [Using resource barriers to synchronize resource states](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md).</span></span>

## <a name="accessing-resources-from-multiple-command-queues"></a><span data-ttu-id="89b16-154">Accès aux ressources à partir de plusieurs files d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-154">Accessing resources from multiple command queues</span></span>

<span data-ttu-id="89b16-155">Deux règles imposées par le runtime restreignent l’accès aux ressources à partir de plusieurs files d’attente de commandes.</span><span class="sxs-lookup"><span data-stu-id="89b16-155">There are a couple of rules imposed by the runtime that restrict the access of resources from multiple command queues.</span></span> <span data-ttu-id="89b16-156">Ces règles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="89b16-156">These rules are as follows:</span></span>

1. <span data-ttu-id="89b16-157">Une ressource ne peut pas être écrite à partir de plusieurs files d’attente de commandes simultanément.</span><span class="sxs-lookup"><span data-stu-id="89b16-157">A resource cannot be written to from multiple command queues simultaneously.</span></span> <span data-ttu-id="89b16-158">Lorsqu’une ressource est passée à un état accessible en écriture dans une file d’attente, elle est considérée comme appartenant exclusivement à cette file d’attente et doit passer à un état de lecture ou commun (reportez-vous à [**D3D12_RESOURCE_STATES**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_resource_states)) pour qu’elle soit accessible par une autre file d’attente.</span><span class="sxs-lookup"><span data-stu-id="89b16-158">When a resource has transitioned to a writeable state on a queue, it is considered exclusively owned by that queue, and must transition to a read or COMMON state (refer to [**D3D12_RESOURCE_STATES**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_resource_states)) before it can be accessed by another queue.</span></span>

2. <span data-ttu-id="89b16-159">Dans un état de lecture, une ressource peut être lue simultanément à partir de plusieurs files d’attente de commandes, y compris entre les processus, en fonction de son état de lecture.</span><span class="sxs-lookup"><span data-stu-id="89b16-159">When in a read state, a resource can be read from multiple command queues simultaneously, including across processes, based on its read state.</span></span>

<span data-ttu-id="89b16-160">Pour plus d’informations sur les restrictions d’accès aux ressources et sur l’utilisation de barrières de ressources pour synchroniser l’accès aux ressources, consultez [utilisation de barrières de ressources pour synchroniser les États des ressources](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md).</span><span class="sxs-lookup"><span data-stu-id="89b16-160">For more information about resource access restrictions and using resource barriers to synchronize access to resources, see [Using resource barriers to synchronize resource states](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md).</span></span>

## <a name="synchronizing-command-list-execution-using-command-queue-fences"></a><span data-ttu-id="89b16-161">Synchronisation de l’exécution de la liste de commandes à l’aide des clôtures de file d’attente</span><span class="sxs-lookup"><span data-stu-id="89b16-161">Synchronizing command list execution using command queue fences</span></span>

<span data-ttu-id="89b16-162">La prise en charge de plusieurs files d’attente de commandes parallèles dans Direct3D 12 vous offre plus de souplesse et de contrôle sur la hiérarchisation des tâches asynchrones sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="89b16-162">The support for multiple parallel command queues in Direct3D 12 gives you more flexibility and control over the prioritization of asynchronous work on the GPU.</span></span> <span data-ttu-id="89b16-163">Cette conception signifie également que les applications doivent gérer explicitement la synchronisation du travail, en particulier lorsque les listes de commandes dans une file d’attente dépendent des ressources qui sont utilisées par une autre file d’attente de commandes.</span><span class="sxs-lookup"><span data-stu-id="89b16-163">This design also means that apps need to explicitly manage the synchronization of work, especially when the command lists in one queue depend on resources that are being operated on by another command queue.</span></span> <span data-ttu-id="89b16-164">Par exemple, l’attente d’une opération sur une file d’attente de calcul se termine pour que le résultat puisse être utilisé pour une opération de rendu sur la file d’attente 3D et en attendant la fin d’une opération 3D afin qu’une opération sur la file d’attente de calcul puisse accéder à une ressource pour l’écriture.</span><span class="sxs-lookup"><span data-stu-id="89b16-164">Some examples of this include waiting for an operation on a compute queue to complete so that the result can be used for a rendering operation on the 3D queue, and waiting for a 3D operation to complete so that an operation on the compute queue can access a resource for writing.</span></span> <span data-ttu-id="89b16-165">Pour activer la synchronisation du travail entre les files d’attente, Direct3D 12 utilise le concept de délimitations, qui sont représentés dans l’API par l’interface [**ID3D12Fence**](/windows/desktop/api/d3d12/nn-d3d12-id3d12fence) .</span><span class="sxs-lookup"><span data-stu-id="89b16-165">To enable the synchronization of work between queues, Direct3D 12 uses the concept of fences, which are represented in the API by the [**ID3D12Fence**](/windows/desktop/api/d3d12/nn-d3d12-id3d12fence) interface.</span></span>

<span data-ttu-id="89b16-166">Une clôture est un entier qui représente l’unité de travail en cours de traitement.</span><span class="sxs-lookup"><span data-stu-id="89b16-166">A fence is an integer that represents the current unit of work being processed.</span></span> <span data-ttu-id="89b16-167">Lorsque l’application avance la clôture, en appelant [**ID3D12CommandQueue :: signal**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-signal), l’entier est mis à jour.</span><span class="sxs-lookup"><span data-stu-id="89b16-167">When the app advances the fence, by calling [**ID3D12CommandQueue::Signal**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-signal), the integer is updated.</span></span> <span data-ttu-id="89b16-168">Les applications peuvent vérifier la valeur d’une clôture et déterminer si une unité de travail a été effectuée pour décider si une opération ultérieure peut être démarrée.</span><span class="sxs-lookup"><span data-stu-id="89b16-168">Apps can check the value of a fence and determine if a unit of work has been completed in order to decide whether a subsequent operation can be started.</span></span>

## <a name="synchronizing-resources-accessed-by-command-queues"></a><span data-ttu-id="89b16-169">Synchronisation des ressources accessibles par les files d’attente de commandes</span><span class="sxs-lookup"><span data-stu-id="89b16-169">Synchronizing resources accessed by command queues</span></span>

<span data-ttu-id="89b16-170">Dans Direct3D 12, la synchronisation de l’état de certaines ressources est implémentée avec les barrières des ressources.</span><span class="sxs-lookup"><span data-stu-id="89b16-170">In Direct3D 12, synchronizing the state of some resources is implemented with resource barriers.</span></span> <span data-ttu-id="89b16-171">À chaque barrière de ressources, une application déclare les États avant et après d’une ressource.</span><span class="sxs-lookup"><span data-stu-id="89b16-171">At each resource barrier, an app declares the before and after states of a resource.</span></span> <span data-ttu-id="89b16-172">Un exemple courant consiste à faire passer une ressource d’une vue de ressource de nuanceur à une vue de cible de rendu.</span><span class="sxs-lookup"><span data-stu-id="89b16-172">A common example is for a resource to transition between a shader resource view to a render target view.</span></span> <span data-ttu-id="89b16-173">Pour l’essentiel, ces barrières de ressources sont gérées dans des listes de commandes.</span><span class="sxs-lookup"><span data-stu-id="89b16-173">For the most part, these resource barriers are managed within command lists.</span></span> <span data-ttu-id="89b16-174">Lorsque les couches de débogage sont activées, le système impose que les États avant et après de toutes les ressources correspondent, garantissant ainsi que la ressource est dans l’état correct pour une opération particulière à une transition de barrière.</span><span class="sxs-lookup"><span data-stu-id="89b16-174">When the debug layers are enabled, the system enforces that the before and after states of all resources match up, guaranteeing that the resource is in the correct state for a particular operation at a barrier transition.</span></span>

<span data-ttu-id="89b16-175">Pour plus d’informations sur la synchronisation de l’état des ressources, consultez [utilisation de barrières de ressources pour synchroniser les États des ressources](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md).</span><span class="sxs-lookup"><span data-stu-id="89b16-175">For more information about synchronizing resource state, see [Using resource barriers to synchronize resource states](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md).</span></span>

## <a name="command-queue-support-for-tiled-resources"></a><span data-ttu-id="89b16-176">Prise en charge des files d’attente de commandes pour les ressources en mosaïque</span><span class="sxs-lookup"><span data-stu-id="89b16-176">Command queue support for tiled resources</span></span>

<span data-ttu-id="89b16-177">Les méthodes de gestion des ressources en mosaïque, exposées par le biais de l’interface [**ID3D11DeviceContext2**](/windows/desktop/api/d3d11_2/nn-d3d11_2-id3d11devicecontext2) dans Direct3D 11, sont fournies par l’interface [**ID3D12CommandQueue**](/windows/desktop/api/d3d12/nn-d3d12-id3d12commandqueue) dans Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="89b16-177">Methods for managing tiled resources, which were exposed through the [**ID3D11DeviceContext2**](/windows/desktop/api/d3d11_2/nn-d3d11_2-id3d11devicecontext2) interface in Direct3D 11, are provided by the [**ID3D12CommandQueue**](/windows/desktop/api/d3d12/nn-d3d12-id3d12commandqueue) interface in Direct3D 12.</span></span> <span data-ttu-id="89b16-178">Ces méthodes incluent les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="89b16-178">These methods include:</span></span>



| <span data-ttu-id="89b16-179">Méthode</span><span class="sxs-lookup"><span data-stu-id="89b16-179">Method</span></span>                                                              | <span data-ttu-id="89b16-180">Description</span><span class="sxs-lookup"><span data-stu-id="89b16-180">Description</span></span>                                                                                              |
|---------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="89b16-181">**CopyTileMappings**</span><span class="sxs-lookup"><span data-stu-id="89b16-181">**CopyTileMappings**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-copytilemappings)     | <span data-ttu-id="89b16-182">Copie les mappages d’une ressource en mosaïque source vers une ressource en mosaïque de destination.</span><span class="sxs-lookup"><span data-stu-id="89b16-182">Copies mappings from a source tiled resource to a destination tiled resource.</span></span><br/>                 |
| [<span data-ttu-id="89b16-183">**UpdateTileMappings**</span><span class="sxs-lookup"><span data-stu-id="89b16-183">**UpdateTileMappings**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-updatetilemappings) | <span data-ttu-id="89b16-184">Met à jour les mappages des emplacements de mosaïques dans des ressources en mosaïque à des emplacements de mémoire dans un tas de ressources.</span><span class="sxs-lookup"><span data-stu-id="89b16-184">Updates mappings of tile locations in tiled resources to memory locations in a resource heap.</span></span><br/> |



 

<span data-ttu-id="89b16-185">Pour plus d’informations sur l’utilisation des ressources en mosaïque dans les applications Direct3D 12, consultez la rubrique [ressources en mosaïque Direct3D11](/windows/desktop/direct3d11/tiled-resources).</span><span class="sxs-lookup"><span data-stu-id="89b16-185">For more information about using tiled resources in Direct3D 12 apps, refer to [Direct3D11 Tiled Resources](/windows/desktop/direct3d11/tiled-resources).</span></span>

## <a name="related-topics"></a><span data-ttu-id="89b16-186">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="89b16-186">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="89b16-187">Envoi de travail dans Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="89b16-187">Work Submission in Direct3D 12</span></span>](command-queues-and-command-lists.md)
</dt> </dl>

 

