---
description: Une application doit ouvrir une clé avant de pouvoir ajouter des données au registre.
ms.assetid: db747656-b414-4594-ad39-6b476799060c
title: Clés prédéfinies
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d26668f6a5ac80339c99062cc83a270bcb62e8a
ms.sourcegitcommit: 9eebab0ead09cecdbc24f5f84d56c8b6a7c22736
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/10/2021
ms.locfileid: "124368508"
---
# <a name="predefined-keys"></a>Clés prédéfinies

Une application doit ouvrir une clé avant de pouvoir ajouter des données au registre. Pour ouvrir une clé, une application doit fournir un handle à une autre clé dans le Registre qui est déjà ouverte. Le système définit des clés prédéfinies qui sont toujours ouvertes. Les clés prédéfinies permettent à une application de naviguer dans le registre et de permettre le développement d’outils permettant à un administrateur système de manipuler des catégories de données. Les applications qui ajoutent des données au registre doivent toujours fonctionner dans le cadre de clés prédéfinies, afin que les outils d’administration puissent Rechercher et utiliser les nouvelles données.

Une application peut utiliser des handles pour ces clés comme points d’entrée dans le registre. Ces handles sont valides pour toutes les implémentations du Registre, bien que l’utilisation des handles puisse varier de la plateforme à la plateforme. En outre, d’autres descripteurs prédéfinis ont été définis pour des plateformes spécifiques. Les éléments suivants sont des handles vers les clés prédéfinies.



| Handle                                              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **\_racine des classes HKEY \_**<br/>                  | Les entrées de Registre subordonnées à cette clé définissent les types (ou classes) des documents et les propriétés associées à ces types. Les applications Shell et COM utilisent les informations stockées sous cette clé.<br/> cette clé fournit également une compatibilité descendante avec la base de données d’inscription Windows 3,1 en stockant des informations pour la prise en charge de DDE et OLE. Les visionneuses de fichiers et les extensions d’interface utilisateur stockent leurs identificateurs de classe OLE dans les **\_ classes HKEY \_ root** et les serveurs in-process sont inscrits dans cette clé.<br/> Ce descripteur ne doit pas être utilisé dans un service ou une application qui emprunte l’identité de différents utilisateurs.<br/> Pour plus d’informations, consultez [HKEY \_ classes \_ root](hkey-classes-root-key.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **configuration de HKEY \_ Current \_**<br/>                | Contient des informations sur le profil matériel actuel du système de l’ordinateur local. Les informations de la section **HKEY \_ Current \_ config** décrivent uniquement les différences entre la configuration matérielle actuelle et la configuration standard. Les informations sur la configuration matérielle standard sont stockées sous les clés **logicielles** et **système** de **HKEY \_ local \_ machine**.<br/> **HKEY \_ La \_ configuration actuelle** est un alias pour **HKEY \_ local \_ machine \\ System \\ CurrentControlSet \\ profils \\ actuels**.<br/> Pour plus d’informations, consultez [HKEY \_ Current \_ config](/previous-versions/windows/it-pro/windows-server-2003/cc776168(v=ws.10)).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **HKEY \_ Current \_ User**<br/>                  | Les entrées de Registre subordonnées à cette clé définissent les préférences de l’utilisateur actuel. Ces préférences incluent les paramètres des variables d’environnement, les données relatives aux groupes de programmes, aux couleurs, aux imprimantes, aux connexions réseau et aux préférences de l’application. Cette clé facilite l’établissement des paramètres de l’utilisateur actuel. la clé est mappée à la branche de l’utilisateur actuel dans **HKEY \_ Users**. Dans **HKEY \_ Current \_ User**, les éditeurs de logiciels stockent les préférences actuelles propres à l’utilisateur à utiliser dans leurs applications. Par exemple, Microsoft crée la clé **de \_ logiciel HKEY Current \_ User \\ Software \\ Microsoft** pour ses applications à utiliser, chaque application créant sa propre sous-clé sous la clé **Microsoft** .<br/> Le mappage entre **HKEY \_ Current \_ User** et **HKEY \_ Users** est par processus et est établi la première fois que le processus fait référence à **HKEY \_ Current \_ User**. Le mappage est basé sur le contexte de sécurité du premier thread pour référencer **HKEY \_ Current \_ User**. Si ce contexte de sécurité n’a pas de ruche de Registre chargée dans **HKEY \_ Users**, le mappage est établi avec **HKEY \_ Users \\ . Valeur par défaut**. Une fois ce mappage établi, il persiste, même si le contexte de sécurité du thread change.<br/> Toutes les entrées de Registre dans **HKEY \_ Current \_ User** , sauf celles sous **HKEY \_ Current \_ User \\ \\ classes Software** , sont incluses dans la partie Registre par utilisateur d’un profil utilisateur itinérant. Pour exclure d’autres entrées d’un profil utilisateur itinérant, stockez-les dans les paramètres de la variable **HKEY \_ Current \_ User \_ local \_**.<br/> Ce descripteur ne doit pas être utilisé dans un service ou une application qui emprunte l’identité de différents utilisateurs. Au lieu de cela, appelez la fonction [**RegOpenCurrentUser**](/windows/desktop/api/Winreg/nf-winreg-regopencurrentuser) .<br/> Pour plus d’informations, consultez [HKEY \_ Current \_ User](/previous-versions/windows/it-pro/windows-server-2003/cc779816(v=ws.10)).<br/> |
| **paramètres locaux de HKEY \_ Current \_ User \_ \_**<br/> | Les entrées de Registre subordonnées à cette clé définissent les préférences de l’utilisateur actuel qui sont locales sur l’ordinateur. Ces entrées ne sont pas incluses dans la partie Registre par utilisateur d’un profil utilisateur itinérant. **Windows server 2008, Windows Vista, Windows server 2003 et Windows XP/2000 :** cette clé est prise en charge à partir de Windows 7 et Windows Server 2008 R2.<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **HKEY \_ local \_ machine**<br/>                 | Les entrées de Registre subordonnées à cette clé définissent l’état physique de l’ordinateur, y compris les données relatives au type de bus, à la mémoire système, ainsi que le matériel et les logiciels installés. Il contient les sous-clés qui contiennent les données de configuration actuelles, y compris les informations de Plug-and-Play (la branche **enum** , qui inclut la liste complète de tous les matériels qui se trouvent déjà sur le système), les préférences d’ouverture de session réseau, les informations de sécurité réseau, les informations relatives aux logiciels (telles que les noms de serveurs et l’emplacement du serveur), ainsi que d’autres<br/> Pour plus d’informations, consultez [HKEY \_ local \_ machine](/previous-versions/windows/it-pro/windows-server-2003/cc784983(v=ws.10)).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **\_données de performances HKEY \_**<br/>              | Les entrées de Registre subordonnées à cette clé vous permettent d’accéder aux données de performances. Les données ne sont pas réellement stockées dans le registre ; les fonctions de Registre provoquent la collecte des données à partir de la source par le système.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **HKEY \_ performance \_ NLSTEXT**<br/>           | Les entrées de Registre subordonnées à cette clé référencent les chaînes de texte qui décrivent les compteurs dans la langue locale de la zone dans laquelle le système informatique s’exécute. Ces entrées ne sont pas disponibles pour Regedit.exe et Regedt32.exe. **Windows 2000 :** Cette clé n’est pas prise en charge.<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **HKEY \_ performance \_ Text**<br/>              | Les entrées de Registre subordonnées à cette clé référencent les chaînes de texte qui décrivent les compteurs en anglais des États-Unis. Ces entrées ne sont pas disponibles pour Regedit.exe et Regedt32.exe. **Windows 2000 :** Cette clé n’est pas prise en charge.<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **HKEY, \_ utilisateurs**<br/>                          | Les entrées de Registre subordonnées à cette clé définissent la configuration utilisateur par défaut pour les nouveaux utilisateurs sur l’ordinateur local et la configuration utilisateur pour l’utilisateur actuel.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |



 

La fonction [**RegOverridePredefKey**](/windows/desktop/api/Winreg/nf-winreg-regoverridepredefkey) vous permet de mapper une clé de Registre prédéfinie à une clé spécifiée dans le registre. Par exemple, un programme d’installation de logiciel peut remapper une clé prédéfinie avant d’installer un composant DLL. Cela permet au programme d’installation d’examiner facilement les informations que la procédure d’installation de la DLL écrit dans la clé prédéfinie.

Les fonctions [**RegDisablePredefinedCache**](/windows/desktop/api/Winreg/nf-winreg-regdisablepredefinedcache) et [**RegDisablePredefinedCacheEx**](/windows/desktop/api/Winreg/nf-winreg-regdisablepredefinedcacheex) désactivent la mise en cache des handles pour les handles de Registre prédéfinis. Les services qui utilisent l’emprunt d’identité doivent appeler **RegDisablePredefinedCacheEx** avant d’utiliser des handles de Registre prédéfinis.

Les handles prédéfinis ne sont pas thread-safe. La fermeture d’un handle prédéfini dans un thread affecte tous les autres threads qui utilisent le descripteur.

 

