---
description: Une heure de fichier est une valeur 64 bits qui représente le nombre d’intervalles de 100 nanosecondes qui se sont écoulés depuis 12:00 h 00. Le 1er janvier 1601 temps universel coordonné (UTC). Le système enregistre les heures de fichier lorsque les applications créent, accèdent et écrivent dans des fichiers.
ms.assetid: 52d80b82-9ab0-4631-9e70-85df21da4946
title: Heures du fichier
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5919a2378e08798e4cd64d8f8357cb55692bd22e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103869221"
---
# <a name="file-times"></a><span data-ttu-id="d4806-105">Heures du fichier</span><span class="sxs-lookup"><span data-stu-id="d4806-105">File Times</span></span>

<span data-ttu-id="d4806-106">Une *heure de fichier* est une valeur 64 bits qui représente le nombre d’intervalles de 100 nanosecondes qui se sont écoulés depuis 12:00 h 00.</span><span class="sxs-lookup"><span data-stu-id="d4806-106">A *file time* is a 64-bit value that represents the number of 100-nanosecond intervals that have elapsed since 12:00 A.M.</span></span> <span data-ttu-id="d4806-107">Le 1er janvier 1601 temps universel coordonné (UTC).</span><span class="sxs-lookup"><span data-stu-id="d4806-107">January 1, 1601 Coordinated Universal Time (UTC).</span></span> <span data-ttu-id="d4806-108">Le système enregistre les heures de fichier lorsque les applications créent, accèdent et écrivent dans des fichiers.</span><span class="sxs-lookup"><span data-stu-id="d4806-108">The system records file times when applications create, access, and write to files.</span></span>

<span data-ttu-id="d4806-109">Le système de fichiers NTFS stocke les valeurs d’heure au format UTC. elles ne sont donc pas affectées par les modifications apportées au fuseau horaire ou à l’heure d’été.</span><span class="sxs-lookup"><span data-stu-id="d4806-109">The NTFS file system stores time values in UTC format, so they are not affected by changes in time zone or daylight saving time.</span></span> <span data-ttu-id="d4806-110">Le système de fichiers FAT stocke les valeurs d’heure en fonction de l’heure locale de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d4806-110">The FAT file system stores time values based on the local time of the computer.</span></span> <span data-ttu-id="d4806-111">Par exemple, un fichier enregistré à l’adresse 3:14:00 PST à Washington s’affiche sous la forme 6:14:00 est à New York sur un volume NTFS, mais il est considéré comme 3:14:00 est à New York sur un volume FAT.</span><span class="sxs-lookup"><span data-stu-id="d4806-111">For example, a file that is saved at 3:00pm PST in Washington is seen as 6:00pm EST in New York on an NTFS volume, but it is seen as 3:00pm EST in New York on a FAT volume.</span></span>

<span data-ttu-id="d4806-112">Les horodatages sont mis à jour à différents moments et pour diverses raisons.</span><span class="sxs-lookup"><span data-stu-id="d4806-112">Time stamps are updated at various times and for various reasons.</span></span> <span data-ttu-id="d4806-113">La seule garantie concernant un horodatage de fichier est que l’heure du fichier est correctement reflétée lorsque le handle qui rend la modification est fermé.</span><span class="sxs-lookup"><span data-stu-id="d4806-113">The only guarantee about a file time stamp is that the file time is correctly reflected when the handle that makes the change is closed.</span></span>

<span data-ttu-id="d4806-114">Tous les systèmes de fichiers ne peuvent pas enregistrer les heures de création et de dernier accès, et tous les systèmes de fichiers ne les enregistrent pas de la même manière.</span><span class="sxs-lookup"><span data-stu-id="d4806-114">Not all file systems can record creation and last access times, and not all file systems record them in the same manner.</span></span> <span data-ttu-id="d4806-115">Par exemple, la résolution de l’heure de création sur la FAT est de 10 millisecondes, tandis que le temps d’écriture a une résolution de 2 secondes et le temps d’accès a une résolution de 1 jour. il s’agit donc vraiment de la date d’accès.</span><span class="sxs-lookup"><span data-stu-id="d4806-115">For example, the resolution of create time on FAT is 10 milliseconds, while write time has a resolution of 2 seconds and access time has a resolution of 1 day, so it is really the access date.</span></span> <span data-ttu-id="d4806-116">Le système de fichiers NTFS retarde les mises à jour de l’heure du dernier accès pour un fichier jusqu’à 1 heure après le dernier accès.</span><span class="sxs-lookup"><span data-stu-id="d4806-116">The NTFS file system delays updates to the last access time for a file by up to 1 hour after the last access.</span></span>

<span data-ttu-id="d4806-117">Pour récupérer l’heure du fichier d’un fichier spécifié, utilisez la fonction [**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-117">To retrieve the file times for a specified file, use the [**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) function.</span></span> <span data-ttu-id="d4806-118">**GetFileTime** copie les heures de création, de dernier accès et de dernière écriture dans les structures [**fileTime**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) individuelles.</span><span class="sxs-lookup"><span data-stu-id="d4806-118">**GetFileTime** copies the creation, last access, and last write times to individual [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structures.</span></span> <span data-ttu-id="d4806-119">Vous pouvez également récupérer des heures de fichier à l’aide des fonctions [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) et [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) .</span><span class="sxs-lookup"><span data-stu-id="d4806-119">You can also retrieve file times using the [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) and [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) functions.</span></span> <span data-ttu-id="d4806-120">Ces fonctions copient les heures de fichier dans les structures **fileTime** dans une structure de [**\_ \_ données de recherche Win32**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) .</span><span class="sxs-lookup"><span data-stu-id="d4806-120">These functions copy the file times to **FILETIME** structures in a [**WIN32\_FIND\_DATA**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) structure.</span></span> <span data-ttu-id="d4806-121">Lors de l’écriture dans un fichier, l’heure de la dernière écriture n’est pas entièrement mise à jour jusqu’à ce que tous les handles utilisés pour l’écriture soient fermés.</span><span class="sxs-lookup"><span data-stu-id="d4806-121">When writing to a file, the last write time is not fully updated until all handles that are used for writing are closed.</span></span>

<span data-ttu-id="d4806-122">Pour définir l’heure d’un fichier, utilisez la fonction [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-122">To set the file times for a file, use the [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) function.</span></span> <span data-ttu-id="d4806-123">Cette fonction vous permet de modifier les heures de création, de dernier accès et de dernière écriture sans modifier le contenu du fichier.</span><span class="sxs-lookup"><span data-stu-id="d4806-123">This function lets you modify creation, last access, and last write times without changing the content of the file.</span></span> <span data-ttu-id="d4806-124">Vous pouvez comparer les heures des différents fichiers à l’aide de la fonction [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-124">You can compare the times of different files by using the [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) function.</span></span> <span data-ttu-id="d4806-125">La fonction compare deux heures de fichier et retourne une valeur qui indique l’heure ultérieure ou retourne 0 (zéro) si les heures sont égales.</span><span class="sxs-lookup"><span data-stu-id="d4806-125">The function compares two file times and returns a value that indicates which time is later or returns 0 (zero) if the times are equal.</span></span>

<span data-ttu-id="d4806-126">Si vous envisagez de modifier les heures de fichier des fichiers spécifiés, vous pouvez convertir une date et une heure en une heure de fichier à l’aide de la fonction [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-126">If you plan to modify file times for specified files, you can convert a date and time of day to a file time by using the [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) function.</span></span> <span data-ttu-id="d4806-127">Vous pouvez également obtenir l’heure système dans une structure [**fileTime**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) en appelant la fonction [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-127">You can also obtain the system time in a [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structure by calling the [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) function.</span></span>

<span data-ttu-id="d4806-128">Pour faciliter l’affichage de l’heure d’un fichier pour un utilisateur, utilisez la fonction [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-128">To make a file time easy to display to a user, use the [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) function.</span></span> <span data-ttu-id="d4806-129">**FileTimeToSystemTime** convertit l’heure du fichier et copie le mois, le jour, l’année et l’heure du jour à partir de l’heure du fichier vers une structure [**SystemTime**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-129">**FileTimeToSystemTime** converts the file time and copies the month, day, year, and time of day from the file time to a [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) structure.</span></span>

## <a name="file-times-and-daylight-saving-time"></a><span data-ttu-id="d4806-130">Heures du fichier et heure de l’heure d’été</span><span class="sxs-lookup"><span data-stu-id="d4806-130">File Times and Daylight Saving Time</span></span>

<span data-ttu-id="d4806-131">Vous devez être prudent lorsque vous utilisez des heures de fichier si l’utilisateur a défini le système pour qu’il s’ajuste automatiquement à l’heure d’été.</span><span class="sxs-lookup"><span data-stu-id="d4806-131">You must take care when using file times if the user has set the system to automatically adjust for daylight saving time.</span></span>

<span data-ttu-id="d4806-132">Pour convertir une heure de fichier en heure locale, utilisez la fonction [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) .</span><span class="sxs-lookup"><span data-stu-id="d4806-132">To convert a file time to local time, use the [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) function.</span></span> <span data-ttu-id="d4806-133">Toutefois, **FileTimeToLocalFileTime** utilise les paramètres actuels pour le fuseau horaire et l’heure d’été.</span><span class="sxs-lookup"><span data-stu-id="d4806-133">However, **FileTimeToLocalFileTime** uses the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="d4806-134">Par conséquent, s’il s’agit de l’heure d’été, il prend en compte l’heure d’été, même si l’heure du fichier que vous convertissez est en heure d’hiver.</span><span class="sxs-lookup"><span data-stu-id="d4806-134">Therefore, if it is daylight saving time, it takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="d4806-135">Le système de fichiers FAT enregistre les temps sur le disque en heure locale.</span><span class="sxs-lookup"><span data-stu-id="d4806-135">The FAT file system records times on disk in local time.</span></span> <span data-ttu-id="d4806-136">[**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) récupère les heures UTC mises en cache à partir du système de fichiers FAT.</span><span class="sxs-lookup"><span data-stu-id="d4806-136">[**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) retrieves cached UTC times from the FAT file system.</span></span> <span data-ttu-id="d4806-137">Lorsqu’il s’agit de l’heure d’été, le temps récupéré par **GetFileTime** est en retard d’une heure, car le cache n’est pas mis à jour.</span><span class="sxs-lookup"><span data-stu-id="d4806-137">When it becomes daylight saving time, the time retrieved by **GetFileTime** is off an hour, because the cache is not updated.</span></span> <span data-ttu-id="d4806-138">Lorsque vous redémarrez l’ordinateur, la durée de mise en cache que **GetFileTime** récupère est correcte.</span><span class="sxs-lookup"><span data-stu-id="d4806-138">When you restart the computer, the cached time that **GetFileTime** retrieves is correct.</span></span> <span data-ttu-id="d4806-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) récupère l’heure locale à partir du système de fichiers FAT et la convertit en heure UTC en utilisant les paramètres actuels pour le fuseau horaire et l’heure d’été.</span><span class="sxs-lookup"><span data-stu-id="d4806-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) retrieves the local time from the FAT file system and converts it to UTC by using the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="d4806-140">Par conséquent, s’il s’agit de l’heure d’été, **FindFirstFile** prend en compte l’heure d’été, même si l’heure du fichier que vous convertissez est en heure d’hiver.</span><span class="sxs-lookup"><span data-stu-id="d4806-140">Therefore, if it is daylight saving time, **FindFirstFile** takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="d4806-141">Le système de fichiers NTFS enregistre les temps sur le disque au format UTC.</span><span class="sxs-lookup"><span data-stu-id="d4806-141">The NTFS file system records times on disk in UTC.</span></span> <span data-ttu-id="d4806-142">Pour tenir compte de l’heure d’été lors de la conversion d’une heure de fichier en heure locale, utilisez la séquence de fonctions suivante au lieu d’utiliser [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span><span class="sxs-lookup"><span data-stu-id="d4806-142">To account for daylight saving time when converting a file time to a local time, use the following sequence of functions instead of using [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span></span>

-   [<span data-ttu-id="d4806-143">**FileTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="d4806-143">**FileTimeToSystemTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime)
-   [<span data-ttu-id="d4806-144">**SystemTimeToTzSpecificLocalTime**</span><span class="sxs-lookup"><span data-stu-id="d4806-144">**SystemTimeToTzSpecificLocalTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetotzspecificlocaltime)
-   [<span data-ttu-id="d4806-145">**SystemTimeToFileTime**</span><span class="sxs-lookup"><span data-stu-id="d4806-145">**SystemTimeToFileTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime)

## <a name="file-times-and-cdfs"></a><span data-ttu-id="d4806-146">Heures du fichier et CDFS</span><span class="sxs-lookup"><span data-stu-id="d4806-146">File Times and CDFS</span></span>

<span data-ttu-id="d4806-147">Les horodatages des fichiers qui se trouvent sur le support ou proviennent d’un média à l’aide du système CDFS (Compact Disc File System) sont ajustés pour le fuseau horaire local.</span><span class="sxs-lookup"><span data-stu-id="d4806-147">The date and time stamps of files that are located on or originate from media using Compact Disc File System (CDFS) are adjusted for the local time zone.</span></span> <span data-ttu-id="d4806-148">ISO 9660 déclare que CDFS doit afficher les informations de date correctement pour le fuseau horaire local.</span><span class="sxs-lookup"><span data-stu-id="d4806-148">ISO 9660 states that CDFS is to display the date information correctly for the local time zone.</span></span> <span data-ttu-id="d4806-149">Cela a pour effet que les dates des fichiers sur CDFS sont affichées de la même façon que sur le format de disque universel (UDF).</span><span class="sxs-lookup"><span data-stu-id="d4806-149">This is done so that dates for files on CDFS are displayed the same as those on Universal Disk Format (UDF).</span></span> <span data-ttu-id="d4806-150">UDF est la norme la plus récente pour le support de distribution.</span><span class="sxs-lookup"><span data-stu-id="d4806-150">UDF is the newer standard for distribution media.</span></span> <span data-ttu-id="d4806-151">Si votre code dépend des informations de date non modifiées pour un fichier qui réside sur ou provient d’un média à l’aide de CDFS, il peut ne pas fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="d4806-151">If your code depends on the unmodified date information for a file that resides on or originates from media using CDFS, it may not function correctly.</span></span>

 

 
