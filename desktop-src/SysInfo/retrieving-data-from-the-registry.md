---
description: Pour récupérer des données du Registre, une application énumère généralement les sous-clés d’une clé jusqu’à ce qu’elle en trouve une spécifique, puis récupère les données à partir de la ou des valeurs associées.
ms.assetid: ce4be388-5506-4d01-a73c-33372ef4ccd7
title: Récupération de données à partir du Registre
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 45d8dd6f6e4d667cf2760c7cba441200755fb6c3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104035158"
---
# <a name="retrieving-data-from-the-registry"></a><span data-ttu-id="e2645-103">Récupération de données à partir du Registre</span><span class="sxs-lookup"><span data-stu-id="e2645-103">Retrieving Data from the Registry</span></span>

<span data-ttu-id="e2645-104">Pour récupérer des données du Registre, une application énumère généralement les sous-clés d’une clé jusqu’à ce qu’elle en trouve une spécifique, puis récupère les données à partir de la ou des valeurs associées.</span><span class="sxs-lookup"><span data-stu-id="e2645-104">To retrieve data from the registry, an application typically enumerates the subkeys of a key until it finds a particular one and then retrieves data from the value or values associated with it.</span></span> <span data-ttu-id="e2645-105">Une application peut appeler la fonction [**RegEnumKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regenumkeyexa) pour énumérer les sous-clés d’une clé donnée.</span><span class="sxs-lookup"><span data-stu-id="e2645-105">An application can call the [**RegEnumKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regenumkeyexa) function to enumerate the subkeys of a given key.</span></span>

<span data-ttu-id="e2645-106">Pour récupérer des données détaillées sur une sous-clé particulière, une application peut appeler la fonction [**RegQueryInfoKey**](/windows/desktop/api/Winreg/nf-winreg-regqueryinfokeya) .</span><span class="sxs-lookup"><span data-stu-id="e2645-106">To retrieve detailed data about a particular subkey, an application can call the [**RegQueryInfoKey**](/windows/desktop/api/Winreg/nf-winreg-regqueryinfokeya) function.</span></span> <span data-ttu-id="e2645-107">La fonction [**RegGetKeySecurity**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity) récupère une copie du descripteur de sécurité protégeant une clé.</span><span class="sxs-lookup"><span data-stu-id="e2645-107">The [**RegGetKeySecurity**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity) function retrieves a copy of the security descriptor protecting a key.</span></span>

<span data-ttu-id="e2645-108">Une application peut utiliser la fonction [**RegEnumValue**](/windows/desktop/api/Winreg/nf-winreg-regenumvaluea) pour énumérer les valeurs d’une clé donnée et la fonction [**RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) pour récupérer une valeur particulière pour une clé.</span><span class="sxs-lookup"><span data-stu-id="e2645-108">An application can use the [**RegEnumValue**](/windows/desktop/api/Winreg/nf-winreg-regenumvaluea) function to enumerate the values for a given key, and [**RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) function to retrieve a particular value for a key.</span></span> <span data-ttu-id="e2645-109">Une application appelle généralement **RegEnumValue** pour déterminer les noms de valeur, puis **RegQueryValueEx** pour récupérer les données pour les noms.</span><span class="sxs-lookup"><span data-stu-id="e2645-109">An application typically calls **RegEnumValue** to determine the value names and then **RegQueryValueEx** to retrieve the data for the names.</span></span>

<span data-ttu-id="e2645-110">La fonction [**RegQueryMultipleValues**](/windows/desktop/api/Winreg/nf-winreg-regquerymultiplevaluesa) récupère le type et les données pour une liste de noms de valeurs associés à une clé de Registre ouverte.</span><span class="sxs-lookup"><span data-stu-id="e2645-110">The [**RegQueryMultipleValues**](/windows/desktop/api/Winreg/nf-winreg-regquerymultiplevaluesa) function retrieves the type and data for a list of value names associated with an open registry key.</span></span> <span data-ttu-id="e2645-111">Cette fonction est utile pour les fournisseurs de clés dynamiques, car elle garantit la cohérence des données en extrayant plusieurs valeurs dans une opération atomique.</span><span class="sxs-lookup"><span data-stu-id="e2645-111">This function is useful for dynamic key providers because it assures consistency of data by retrieving multiple values in an atomic operation.</span></span>

<span data-ttu-id="e2645-112">Étant donné que d’autres applications peuvent modifier les données d’une valeur de Registre entre le moment où votre application peut lire une valeur et l’utiliser, vous devrez peut-être vous assurer que votre application contient les données les plus récentes.</span><span class="sxs-lookup"><span data-stu-id="e2645-112">Because other applications can change the data in a registry value between the time your application can read a value and use it, you may need to ensure your application has the latest data.</span></span> <span data-ttu-id="e2645-113">Vous pouvez utiliser la fonction [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) pour notifier le thread appelant lorsqu’il y a des modifications apportées aux attributs ou au contenu d’une clé de Registre, ou si la clé est supprimée.</span><span class="sxs-lookup"><span data-stu-id="e2645-113">You can use the [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) function to notify the calling thread when there are changes to the attributes or contents of a registry key, or if the key is deleted.</span></span> <span data-ttu-id="e2645-114">La fonction signale un objet d’événement pour notifier l’appelant.</span><span class="sxs-lookup"><span data-stu-id="e2645-114">The function signals an event object to notify the caller.</span></span> <span data-ttu-id="e2645-115">Si le thread qui appelle **RegNotifyChangeKeyValue** se termine, l’événement est signalé et l’analyse de la clé de Registre est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="e2645-115">If the thread that calls **RegNotifyChangeKeyValue** exits, the event is signaled and the monitoring of the registry key is stopped.</span></span>

<span data-ttu-id="e2645-116">Vous pouvez contrôler ou spécifier les modifications qui doivent être signalées à l’aide d’un filtre ou d’un indicateur Notify.</span><span class="sxs-lookup"><span data-stu-id="e2645-116">You can control or specify what changes should be reported through the use of a notify filter or flag.</span></span> <span data-ttu-id="e2645-117">En règle générale, les modifications sont signalées en signalant un événement que vous spécifiez à la fonction.</span><span class="sxs-lookup"><span data-stu-id="e2645-117">Usually, changes are reported by signaling an event that you specify to the function.</span></span> <span data-ttu-id="e2645-118">Notez que la fonction [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) ne fonctionne pas avec les handles distants.</span><span class="sxs-lookup"><span data-stu-id="e2645-118">Note that the [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) function does not work with remote handles.</span></span>

<span data-ttu-id="e2645-119">Pour surveiller les opérations du registre plus en détail, consultez [**Registry**](/windows/desktop/ETW/registry).</span><span class="sxs-lookup"><span data-stu-id="e2645-119">To monitor registry operations in more detail, see [**Registry**](/windows/desktop/ETW/registry).</span></span>

 

 
