---
description: Un processus peut surveiller un ensemble d’événements qui se produisent dans une ressource de communication. Par exemple, une application peut utiliser la surveillance des événements pour déterminer à quel moment les signaux CTS (Clear-to-Send) et DSR (Data-Set-Ready) signalent la modification de l’État.
ms.assetid: 5d2a7bf3-a972-474b-b8ca-da3351f1e59c
title: Événements de communication
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 466bd5076405427c7c348c1df3706cb7b5c3edc4
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104110703"
---
# <a name="communications-events"></a><span data-ttu-id="70200-104">Événements de communication</span><span class="sxs-lookup"><span data-stu-id="70200-104">Communications Events</span></span>

<span data-ttu-id="70200-105">Un processus peut surveiller un ensemble d’événements qui se produisent dans une ressource de communication.</span><span class="sxs-lookup"><span data-stu-id="70200-105">A process can monitor a set of events that occur in a communications resource.</span></span> <span data-ttu-id="70200-106">Par exemple, une application peut utiliser la surveillance des événements pour déterminer à quel moment les signaux CTS (Clear-to-Send) et DSR (Data-Set-Ready) signalent la modification de l’État.</span><span class="sxs-lookup"><span data-stu-id="70200-106">For example, an application can use event monitoring to determine when the CTS (clear-to-send) and DSR (data-set-ready) signals change state.</span></span>

<span data-ttu-id="70200-107">Un processus peut surveiller des événements sur une ressource de communication donnée à l’aide de la fonction [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) pour créer un masque d’événement.</span><span class="sxs-lookup"><span data-stu-id="70200-107">A process can monitor events on a given communications resource by using the [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) function to create an event mask.</span></span> <span data-ttu-id="70200-108">Pour déterminer le masque d’événement actuel d’une ressource de communication, un processus peut utiliser la fonction [**GetCommMask**](/windows/desktop/api/Winbase/nf-winbase-getcommmask) .</span><span class="sxs-lookup"><span data-stu-id="70200-108">To determine the current event mask for a communications resource, a process can use the [**GetCommMask**](/windows/desktop/api/Winbase/nf-winbase-getcommmask) function.</span></span> <span data-ttu-id="70200-109">Les valeurs suivantes spécifient les événements qui peuvent être analysés.</span><span class="sxs-lookup"><span data-stu-id="70200-109">The following values specify events that can be monitored.</span></span>



| <span data-ttu-id="70200-110">Valeur</span><span class="sxs-lookup"><span data-stu-id="70200-110">Value</span></span>           | <span data-ttu-id="70200-111">Signification</span><span class="sxs-lookup"><span data-stu-id="70200-111">Meaning</span></span>                                                                                                                                                                                                                                           |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="70200-112">**\_interruption ev**</span><span class="sxs-lookup"><span data-stu-id="70200-112">**EV\_BREAK**</span></span>   | <span data-ttu-id="70200-113">Un arrêt a été détecté sur l'entrée.</span><span class="sxs-lookup"><span data-stu-id="70200-113">A break was detected on input.</span></span>                                                                                                                                                                                                                    |
| <span data-ttu-id="70200-114">**EV \_ CTS**</span><span class="sxs-lookup"><span data-stu-id="70200-114">**EV\_CTS**</span></span>     | <span data-ttu-id="70200-115">Le signal CTS (Clear-to-Send) a changé d’État.</span><span class="sxs-lookup"><span data-stu-id="70200-115">The CTS (clear-to-send) signal changed state.</span></span>                                                                                                                                                                                                     |
| <span data-ttu-id="70200-116">**\_DSR ev**</span><span class="sxs-lookup"><span data-stu-id="70200-116">**EV\_DSR**</span></span>     | <span data-ttu-id="70200-117">L’état du signal DSR (Data-Set-Ready) a changé.</span><span class="sxs-lookup"><span data-stu-id="70200-117">The DSR (data-set-ready) signal changed state.</span></span>                                                                                                                                                                                                    |
| <span data-ttu-id="70200-118">**EV \_ Err**</span><span class="sxs-lookup"><span data-stu-id="70200-118">**EV\_ERR**</span></span>     | <span data-ttu-id="70200-119">Une erreur d’état de ligne s’est produite.</span><span class="sxs-lookup"><span data-stu-id="70200-119">A line-status error occurred.</span></span> <span data-ttu-id="70200-120">Les erreurs d’état de ligne sont les **\_ trames ce**, le **\_ dépassement ce** et le **\_ RXPARITY ce**.</span><span class="sxs-lookup"><span data-stu-id="70200-120">Line-status errors are **CE\_FRAME**, **CE\_OVERRUN**, and **CE\_RXPARITY**.</span></span>                                                                                                                                        |
| <span data-ttu-id="70200-121">**\_anneau ev**</span><span class="sxs-lookup"><span data-stu-id="70200-121">**EV\_RING**</span></span>    | <span data-ttu-id="70200-122">Un indicateur de tonalité a été détecté.</span><span class="sxs-lookup"><span data-stu-id="70200-122">A ring indicator was detected.</span></span>                                                                                                                                                                                                                    |
| <span data-ttu-id="70200-123">**EV \_ RLSD**</span><span class="sxs-lookup"><span data-stu-id="70200-123">**EV\_RLSD**</span></span>    | <span data-ttu-id="70200-124">Le signal RLSD (Receive-Line-signal-Detect) a changé d’État.</span><span class="sxs-lookup"><span data-stu-id="70200-124">The RLSD (receive-line-signal-detect) signal changed state.</span></span>                                                                                                                                                                                       |
| <span data-ttu-id="70200-125">**\_RXCHAR ev**</span><span class="sxs-lookup"><span data-stu-id="70200-125">**EV\_RXCHAR**</span></span>  | <span data-ttu-id="70200-126">Un caractère a été reçu et placé dans la mémoire tampon d’entrée.</span><span class="sxs-lookup"><span data-stu-id="70200-126">A character was received and placed in the input buffer.</span></span>                                                                                                                                                                                          |
| <span data-ttu-id="70200-127">**\_RXFLAG ev**</span><span class="sxs-lookup"><span data-stu-id="70200-127">**EV\_RXFLAG**</span></span>  | <span data-ttu-id="70200-128">Le caractère d’événement a été reçu et placé dans la mémoire tampon d’entrée.</span><span class="sxs-lookup"><span data-stu-id="70200-128">The event character was received and placed in the input buffer.</span></span> <span data-ttu-id="70200-129">Le caractère d’événement est spécifié dans la structure [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) de l’appareil, qui est appliquée à un port série à l’aide de la fonction [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) .</span><span class="sxs-lookup"><span data-stu-id="70200-129">The event character is specified in the device's [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) structure, which is applied to a serial port by using the [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) function.</span></span> |
| <span data-ttu-id="70200-130">**\_TXEMPTY ev**</span><span class="sxs-lookup"><span data-stu-id="70200-130">**EV\_TXEMPTY**</span></span> | <span data-ttu-id="70200-131">Le dernier caractère de la mémoire tampon de sortie a été envoyé.</span><span class="sxs-lookup"><span data-stu-id="70200-131">The last character in the output buffer was sent.</span></span>                                                                                                                                                                                                 |



 

<span data-ttu-id="70200-132">Une fois qu’un ensemble d’événements est spécifié, un processus utilise la fonction [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) pour attendre que l’un des événements se produise.</span><span class="sxs-lookup"><span data-stu-id="70200-132">After a set of events is specified, a process uses the [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) function to wait for one of the events to occur.</span></span> <span data-ttu-id="70200-133">**WaitCommEvent** peut être utilisé de façon synchrone ou en tant qu’opération avec chevauchement.</span><span class="sxs-lookup"><span data-stu-id="70200-133">**WaitCommEvent** can be used synchronously or as an overlapped operation.</span></span> <span data-ttu-id="70200-134">Pour plus d’informations sur l’exécution d’une fonction sous la forme d’une opération avec chevauchement, consultez [Synchronization](/windows/desktop/Sync/synchronization).</span><span class="sxs-lookup"><span data-stu-id="70200-134">For additional information about executing a function as an overlapped operation, see [Synchronization](/windows/desktop/Sync/synchronization).</span></span>

<span data-ttu-id="70200-135">Lorsque l’un des événements spécifiés dans le masque d’événement se produit, le processus termine l’opération d’attente et définit une variable de masque d’événement pour indiquer le type d’événement détecté.</span><span class="sxs-lookup"><span data-stu-id="70200-135">When one of the events specified in the event mask occurs, the process completes the wait operation and sets an event mask variable to indicate the type of event detected.</span></span> <span data-ttu-id="70200-136">Si le [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) est appelé pour une ressource de communication alors qu’une attente est en attente pour cette ressource, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) retourne une erreur.</span><span class="sxs-lookup"><span data-stu-id="70200-136">If the [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) is called for a communications resource while a wait is pending for that resource, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) returns an error.</span></span>

<span data-ttu-id="70200-137">La fonction [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) détecte les événements qui se sont produits depuis le dernier appel à [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) ou **WaitCommEvent**.</span><span class="sxs-lookup"><span data-stu-id="70200-137">The [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) function detects events that have occurred since the last call to [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) or **WaitCommEvent**.</span></span> <span data-ttu-id="70200-138">Par exemple, si vous spécifiez l’événement **ev \_ RXCHAR** comme un événement Wait-condition_recherche, un appel à **WaitCommEvent** est satisfait si la mémoire tampon d’entrée du pilote contient des caractères qui sont arrivés depuis le dernier appel à **WaitCommEvent** ou **SetCommMask**.</span><span class="sxs-lookup"><span data-stu-id="70200-138">For example, if you specify the **EV\_RXCHAR** event as a wait-satisfying event, a call to **WaitCommEvent** will be satisfied if there are characters in the driver's input buffer that have arrived since the last call to **WaitCommEvent** or **SetCommMask**.</span></span> <span data-ttu-id="70200-139">Par conséquent, étant donné le pseudocode suivant, tous les caractères reçus entre T1 et T2 satisferont l’appel suivant à **WaitCommEvent**.</span><span class="sxs-lookup"><span data-stu-id="70200-139">Thus, given the following pseudocode, any characters received between T1 and T2 will satisfy the next call to **WaitCommEvent**.</span></span>


```C++
while (!bFinished) 
{ 
    WaitCommEvent(args)
 
T1: // Read bytes 
    // Process bytes 

T2: 
}
```



<span data-ttu-id="70200-140">Lors de la surveillance d’un événement qui se produit lorsqu’un signal (CTS, DSR, etc.) change d’État, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) signale la modification, mais pas l’état actuel.</span><span class="sxs-lookup"><span data-stu-id="70200-140">When monitoring an event that occurs when a signal (CTS, DSR, and so on) changes state, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) reports the change, but not the current state.</span></span> <span data-ttu-id="70200-141">Pour interroger l’état actuel des signaux CTS (Clear-to-Send), DSR (Data-Set prêt), RLSD (Receive-Line-signal-Detect) et Ring Indicator, un processus peut utiliser la fonction [**GetCommModemStatus**](/windows/desktop/api/Winbase/nf-winbase-getcommmodemstatus) .</span><span class="sxs-lookup"><span data-stu-id="70200-141">To query the current state of the CTS (clear-to-send), DSR (data-set-ready), RLSD (receive-line-signal-detect), and ring indicator signals, a process can use the [**GetCommModemStatus**](/windows/desktop/api/Winbase/nf-winbase-getcommmodemstatus) function.</span></span>

 

 
