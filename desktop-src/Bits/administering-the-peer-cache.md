---
title: Administration du cache d’homologue
description: Remarque à compter de Windows 7, le modèle de mise en cache d’homologue Service de transfert intelligent en arrière-plan (BITS) 3,0 est déconseillé.
ms.assetid: a33a43e5-02f9-4902-ad3a-ec65b0d80520
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 40b3ea1dd19c9aca855ffd73e174dcb3b588a54d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/16/2019
ms.locfileid: "103671782"
---
# <a name="administering-the-peer-cache"></a><span data-ttu-id="4739d-103">Administration du cache d’homologue</span><span class="sxs-lookup"><span data-stu-id="4739d-103">Administering the Peer Cache</span></span>

> [!Note]  
> <span data-ttu-id="4739d-104">À compter de Windows 7, le modèle de mise en cache d’homologue Service de transfert intelligent en arrière-plan (BITS) 3,0 est déconseillé.</span><span class="sxs-lookup"><span data-stu-id="4739d-104">Starting with Windows 7, the Background Intelligent Transfer Service (BITS) 3.0 peer caching model is deprecated.</span></span> <span data-ttu-id="4739d-105">Si BITS 4,0 est installé, le modèle de mise en cache d’homologue BITS 3,0 n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="4739d-105">If BITS 4.0 is installed, the BITS 3.0 peer caching model is unavailable.</span></span>

 

<span data-ttu-id="4739d-106">Pour améliorer les performances de téléchargement, BITS vous permet de télécharger du contenu à partir d’ordinateurs homologues.</span><span class="sxs-lookup"><span data-stu-id="4739d-106">To improve download performance, BITS lets you download content from peer computers.</span></span> <span data-ttu-id="4739d-107">Pour activer cette fonctionnalité, l’administrateur doit activer le paramètre de stratégie de groupe EnablePeerCaching.</span><span class="sxs-lookup"><span data-stu-id="4739d-107">To enable this feature, the administrator must enable the EnablePeerCaching group policy setting.</span></span> <span data-ttu-id="4739d-108">S’il est activé, l’homologue peut télécharger du contenu à partir de pairs et servir du contenu à des homologues.</span><span class="sxs-lookup"><span data-stu-id="4739d-108">If enabled, the peer can download content from peers and serve content to peers.</span></span> <span data-ttu-id="4739d-109">L’administrateur peut également utiliser les paramètres de stratégie DisablePeerCachingClient et DisablePeerCachingServer pour empêcher le téléchargement de contenu à partir d’un homologue ou la fourniture de contenu à des homologues, respectivement.</span><span class="sxs-lookup"><span data-stu-id="4739d-109">The administrator can also use the DisablePeerCachingClient and DisablePeerCachingServer policy settings to prevent downloading content from a peer or serving content to peers, respectively.</span></span>

<span data-ttu-id="4739d-110">Si les paramètres de stratégie de groupe ne sont pas configurés, une application peut appeler la méthode [**IBitsPeerCacheAdministration :: SetConfigurationFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setconfigurationflags) pour définir la préférence de mise en cache d’homologue pour l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="4739d-110">If the group policy settings are not configured, an application can call the [**IBitsPeerCacheAdministration::SetConfigurationFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setconfigurationflags) method to set the peer caching preference for the computer.</span></span> <span data-ttu-id="4739d-111">Notez que ces préférences sont remplacées par les paramètres de stratégie de groupe, si elles sont définies ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="4739d-111">Note that these preferences are overridden by the group policy settings if they are set later.</span></span> <span data-ttu-id="4739d-112">Pour déterminer si l’ordinateur active la mise en cache d’homologue, appelez la méthode [**IBitsPeerCacheAdministration :: GetConfigurationFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-getconfigurationflags) .</span><span class="sxs-lookup"><span data-stu-id="4739d-112">To determine if the computer enables peer caching, call the [**IBitsPeerCacheAdministration::GetConfigurationFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-getconfigurationflags) method.</span></span>

<span data-ttu-id="4739d-113">Si la mise en cache d’homologue est activée, le service BITS met uniquement en cache le contenu d’un travail si ce travail autorise explicitement son contenu à être mis en cache.</span><span class="sxs-lookup"><span data-stu-id="4739d-113">If peer caching is enabled, BITS will only cache the contents of a job if the job explicitly allows its content to be cached.</span></span> <span data-ttu-id="4739d-114">En outre, BITS télécharge le contenu à partir d’un homologue si le travail l’autorise explicitement.</span><span class="sxs-lookup"><span data-stu-id="4739d-114">BITS will also only download content from a peer if the job explicitly allows it.</span></span> <span data-ttu-id="4739d-115">Pour activer la mise en cache d’homologue pour un travail, appelez la méthode [**IBackgroundCopyJob4 :: SetPeerCachingFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibackgroundcopyjob4-setpeercachingflags) .</span><span class="sxs-lookup"><span data-stu-id="4739d-115">To enable peer caching for a job, call the [**IBackgroundCopyJob4::SetPeerCachingFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibackgroundcopyjob4-setpeercachingflags) method.</span></span>

<span data-ttu-id="4739d-116">Outre l’utilisation de stratégie de groupe ou de l’interface [**IBitsPeerCacheAdministration**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) pour activer la mise en cache d’homologue, vous pouvez également utiliser l’une ou l’autre méthode pour modifier la taille de cache par défaut et la durée pendant laquelle un fichier non accédé reste dans le cache.</span><span class="sxs-lookup"><span data-stu-id="4739d-116">In addition to using Group Policy or the [**IBitsPeerCacheAdministration**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) interface to enable peer caching, you can also use either method to change the default cache size and length of time that a non-accessed file remains in the cache.</span></span> <span data-ttu-id="4739d-117">Pour modifier les valeurs par défaut à l’aide de l’interface **IBitsPeerCacheAdministration** , appelez les méthodes [**SetMaximumCacheSize**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcachesize) et [**SetMaximumContentAge**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcontentage) .</span><span class="sxs-lookup"><span data-stu-id="4739d-117">To change the defaults using the **IBitsPeerCacheAdministration** interface, call the [**SetMaximumCacheSize**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcachesize) and [**SetMaximumContentAge**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcontentage) methods.</span></span> <span data-ttu-id="4739d-118">Étant donné que ces méthodes définissent les paramètres de préférence, elles sont remplacées par les paramètres de stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="4739d-118">Since these methods set the preference settings, they are overridden by the group policy settings.</span></span>

<span data-ttu-id="4739d-119">Pour répertorier les homologues à partir desquels BITS tente de télécharger du contenu, appelez la méthode [**IBitsPeerCacheAdministration :: EnumPeers**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumpeers) .</span><span class="sxs-lookup"><span data-stu-id="4739d-119">To list the peers from whom BITS will try to download content, call the [**IBitsPeerCacheAdministration::EnumPeers**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumpeers) method.</span></span>

<span data-ttu-id="4739d-120">Pour répertorier les fichiers dans le cache que BITS servira aux homologues, appelez la méthode [**IBitsPeerCacheAdministration :: EnumRecords**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumrecords) .</span><span class="sxs-lookup"><span data-stu-id="4739d-120">To list the files in the cache that BITS will serve to peers, call the [**IBitsPeerCacheAdministration::EnumRecords**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumrecords) method.</span></span>

<span data-ttu-id="4739d-121">Vous ne devez jamais avoir à gérer le cache d’homologue en ce qui concerne la découverte d’homologues ou la suppression d’enregistrements de cache.</span><span class="sxs-lookup"><span data-stu-id="4739d-121">You should never have to manage the peer cache with regards to discovering peers or deleting cache records.</span></span> <span data-ttu-id="4739d-122">Cette fonctionnalité a été incluse dans l’interface [**IBitsPeerCacheAdministration**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) à des fins d’exhaustivité.</span><span class="sxs-lookup"><span data-stu-id="4739d-122">This functionality was included in the [**IBitsPeerCacheAdministration**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) interface for completeness.</span></span>

 

 




