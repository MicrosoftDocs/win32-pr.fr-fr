---
description: Les instructions suivantes expliquent comment créer vos propres assemblys côte à côte COM ou Win32.
ms.assetid: e10fe92c-bce8-420e-a84c-2748e929eb1b
title: Instructions pour la création d’assemblys côte à côte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: af8e8fd2bd31a65477b44d3afcf2156d5160a72a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104112714"
---
# <a name="guidelines-for-creating-side-by-side-assemblies"></a><span data-ttu-id="be585-103">Instructions pour la création d’assemblys côte à côte</span><span class="sxs-lookup"><span data-stu-id="be585-103">Guidelines for Creating Side-by-side Assemblies</span></span>

<span data-ttu-id="be585-104">Les instructions suivantes expliquent comment créer vos propres assemblys côte à côte COM ou Win32.</span><span class="sxs-lookup"><span data-stu-id="be585-104">The following guidelines discuss how to author your own COM or Win32 side-by-side assemblies.</span></span> <span data-ttu-id="be585-105">Vous n’aurez peut-être pas besoin de créer vos propres assemblys côte à côte si les fonctionnalités nécessaires sont fournies par l’un des [assemblys Microsoft côte à côte pris en charge](supported-microsoft-side-by-side-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="be585-105">You may not need to create your own side-by-side assemblies if the functionality needed is provided by one of the [supported Microsoft side-by-side assemblies](supported-microsoft-side-by-side-assemblies.md).</span></span> <span data-ttu-id="be585-106">Dans ce cas, utilisez les assemblys fournis par Microsoft et suivez les procédures d’utilisation des assemblys côte à côte dans [à l’aide d’applications isolées et d’assemblys côte à côte](using-isolated-applications-and-side-by-side-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="be585-106">In this case, use the assemblies provided by Microsoft and follow the procedures for using side-by-side assemblies in [Using Isolated Applications and Side-by-side Assemblies](using-isolated-applications-and-side-by-side-assemblies.md).</span></span>

<span data-ttu-id="be585-107">Tout d’abord, déterminez si votre composant fait un candidat approprié pour un assembly côte à côte.</span><span class="sxs-lookup"><span data-stu-id="be585-107">First, consider whether your component makes a suitable candidate for a side-by-side assembly.</span></span> <span data-ttu-id="be585-108">Pour plus d’informations, consultez [si vous fournissez un composant partagé en tant qu’assembly côte à côte ?](should-you-provide-a-shared-component-as-a-side-by-side-assembly.md)</span><span class="sxs-lookup"><span data-stu-id="be585-108">For more information, see [Should you provide a shared component as a side-by-side assembly?](should-you-provide-a-shared-component-as-a-side-by-side-assembly.md)</span></span>

<span data-ttu-id="be585-109">Pour créer un assembly côte à côte, suivez les instructions suivantes :</span><span class="sxs-lookup"><span data-stu-id="be585-109">To create a side-by-side assembly, follow these guidelines:</span></span>

-   <span data-ttu-id="be585-110">Choisissez les ressources à inclure dans l’assembly.</span><span class="sxs-lookup"><span data-stu-id="be585-110">Decide which resources to include in the assembly.</span></span> <span data-ttu-id="be585-111">N’oubliez pas qu’un assembly se compose d’un ou de plusieurs fichiers qui sont toujours fournis aux applications et aux clients ensemble.</span><span class="sxs-lookup"><span data-stu-id="be585-111">Keep in mind that an assembly consists of one or more files that are always provided to applications and customers together.</span></span> <span data-ttu-id="be585-112">L’assembly sert d’unité fondamentale pour l’affectation de noms, la liaison, le contrôle de version, le déploiement et la [configuration par défaut](default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="be585-112">The assembly serves as the fundamental unit used for naming, binding, versioning, deployment, and [default configuration](default-configuration.md).</span></span> <span data-ttu-id="be585-113">En règle générale, si vous savez si deux ressources appartiennent au même assembly, il est recommandé de les créer dans des assemblys distincts.</span><span class="sxs-lookup"><span data-stu-id="be585-113">As a general rule, when uncertain about whether two resources belong in the same assembly, it is recommended that they be authored to go into separate assemblies.</span></span> <span data-ttu-id="be585-114">En général, un assembly côte à côte se compose d’une seule DLL.</span><span class="sxs-lookup"><span data-stu-id="be585-114">Typically, a side-by-side assembly consists of a single DLL.</span></span>
-   <span data-ttu-id="be585-115">Créez un [manifeste](manifests.md) d’assembly pour l’assembly.</span><span class="sxs-lookup"><span data-stu-id="be585-115">Create an assembly [manifest](manifests.md) for the assembly.</span></span> <span data-ttu-id="be585-116">Le manifeste doit décrire l’objet COM ou les bibliothèques de types dans l’assembly.</span><span class="sxs-lookup"><span data-stu-id="be585-116">The manifest should describe the COM object or type libraries in the assembly.</span></span> <span data-ttu-id="be585-117">Pour plus d’informations sur ce qui doit être créé dans un manifeste d’assembly, consultez [manifestes d’assembly](assembly-manifests.md).</span><span class="sxs-lookup"><span data-stu-id="be585-117">For more information about what should be authored into an assembly manifest, see [assembly manifests](assembly-manifests.md).</span></span>
-   <span data-ttu-id="be585-118">Évaluer l’utilisation des objets quand plusieurs versions de votre assembly sont exécutées sur le système.</span><span class="sxs-lookup"><span data-stu-id="be585-118">Evaluate the usage of objects when more than one version of your assembly is run on the system.</span></span> <span data-ttu-id="be585-119">Déterminez si les différentes versions de l’assembly nécessitent des structures de données distinctes, telles que les fichiers mappés en mémoire, les canaux nommés, les messages Windows inscrits et les classes, la mémoire partagée, les sémaphores, les mutex et les pilotes matériels.</span><span class="sxs-lookup"><span data-stu-id="be585-119">Determine whether different versions of the assembly require separate data structures, such as memory-mapped files, named pipes, registered Windows messages and classes, shared memory, semaphores, mutexes, and hardware drivers.</span></span> <span data-ttu-id="be585-120">Toutes les structures de données utilisées dans les versions d’assembly doivent être des versions à compatibilité descendante.</span><span class="sxs-lookup"><span data-stu-id="be585-120">Any data structures used across assembly versions must be backward-compatible versions.</span></span> <span data-ttu-id="be585-121">Déterminez les structures de données qui peuvent être utilisées dans les différentes versions et les structures de données qui doivent être privées pour une version.</span><span class="sxs-lookup"><span data-stu-id="be585-121">Decide which data structures can be used across versions and which data structures must be private to a version.</span></span> <span data-ttu-id="be585-122">Déterminez si les structures de données partagées nécessitent des objets de synchronisation distincts, tels que des sémaphores et des mutex.</span><span class="sxs-lookup"><span data-stu-id="be585-122">Determine whether shared data structures require separate synchronization objects such as semaphores and mutexes.</span></span>
-   <span data-ttu-id="be585-123">Créez votre DLL pour fonctionner correctement en tant qu’assembly côte à côte en adhérant aux instructions de [création d’une dll pour un assembly côte à côte](authoring-a-dll-for-a-side-by-side-assembly.md).</span><span class="sxs-lookup"><span data-stu-id="be585-123">Author your DLL to work well as a side-by-side assembly by adhering to the guidelines in [Authoring a DLL for a Side-by-Side Assembly](authoring-a-dll-for-a-side-by-side-assembly.md).</span></span>
-   <span data-ttu-id="be585-124">Créez un ensemble de fichiers d’en-tête et de fonctions d’assistance pour fournir un moyen simple aux clés de registre de version contenant l’état de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="be585-124">Author a set of header files and helper functions to provide an easy way to version registry keys containing the assembly state.</span></span> <span data-ttu-id="be585-125">Les assemblys enregistrent généralement leurs paramètres d’État dans les clés de registre.</span><span class="sxs-lookup"><span data-stu-id="be585-125">Assemblies commonly save their state settings in registry keys.</span></span> <span data-ttu-id="be585-126">Les paramètres du Registre doivent être écrits sur la base d’une version individuelle pour isoler plusieurs versions d’assembly qui peuvent être exécutées en même temps.</span><span class="sxs-lookup"><span data-stu-id="be585-126">Registry settings must be written on an individual version basis to isolate multiple assembly versions that may be run at the same time.</span></span> <span data-ttu-id="be585-127">Concevez votre assembly côte à côte et votre DLL pour stocker et gérer correctement l’état de l’assembly pendant les scénarios de partage côte à côte.</span><span class="sxs-lookup"><span data-stu-id="be585-127">Design your side-by-side assembly and DLL to correctly store and handle the state of the assembly during side-by-side sharing scenarios.</span></span> <span data-ttu-id="be585-128">Suivez les instructions de la [création du stockage d’État pour les assemblys côte à côte](authoring-state-storage-for-side-by-side-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="be585-128">Follow the guidelines in [Authoring State Storage for Side-by-Side Assemblies](authoring-state-storage-for-side-by-side-assemblies.md).</span></span>
-   <span data-ttu-id="be585-129">Les développeurs d’applications qui utilisent des [assemblys privés](/windows/desktop/Msi/private-assemblies) doivent sécuriser le répertoire de l’application.</span><span class="sxs-lookup"><span data-stu-id="be585-129">Developers of applications that use [private assemblies](/windows/desktop/Msi/private-assemblies) should secure the application directory.</span></span> <span data-ttu-id="be585-130">Si l’application est installée à l’aide de la [Windows Installer](../msi/windows-installer-portal.md), le répertoire de l’application peut être sécurisé à l’aide de la table LockPermissions.</span><span class="sxs-lookup"><span data-stu-id="be585-130">If the application is installed using the [Windows Installer](../msi/windows-installer-portal.md), then the application directory can be secured by using the LockPermissions table.</span></span> <span data-ttu-id="be585-131">En règle générale, le système dispose d’un accès en lecture, écriture et exécution aux assemblys privés. tous les autres processus sont fournis uniquement pour l’accès en lecture et en lecture.</span><span class="sxs-lookup"><span data-stu-id="be585-131">Typically, the system is given read, write, and execute access to private assemblies; all other processes are given only execute and read access.</span></span>
-   <span data-ttu-id="be585-132">Testez l’assembly à l’aide de scénarios avec partage côte à côte pour vous assurer qu’il s’agit d’un assembly côte à côte valide.</span><span class="sxs-lookup"><span data-stu-id="be585-132">Test the assembly using scenarios with side-by-side sharing to ensure that it is a valid side-by-side assembly.</span></span> <span data-ttu-id="be585-133">L’installation réussie de l’assembly n’est pas suffisante pour garantir qu’il fonctionnera comme prévu.</span><span class="sxs-lookup"><span data-stu-id="be585-133">Successful installation of the assembly is not sufficient to guarantee that it will work as expected.</span></span>
-   <span data-ttu-id="be585-134">Adoptez une méthode pour numéroter les mises à jour de votre assembly.</span><span class="sxs-lookup"><span data-stu-id="be585-134">Adopt a method for numbering updates for your assembly.</span></span> <span data-ttu-id="be585-135">Chaque assembly est associé à un numéro de version en quatre parties.</span><span class="sxs-lookup"><span data-stu-id="be585-135">Each assembly is associated with a four-part version number.</span></span> <span data-ttu-id="be585-136">De gauche à droite, les parties principale, secondaire, de build et de révision sont séparées par des points.</span><span class="sxs-lookup"><span data-stu-id="be585-136">Left-to-right, the major, minor, build, and revision parts are separated by periods.</span></span> <span data-ttu-id="be585-137">Modifiez le numéro principal ou secondaire d’un assembly pour une version qui n’est pas compatible avec les versions antérieures.</span><span class="sxs-lookup"><span data-stu-id="be585-137">Change the major or minor number of an assembly for a version that is incompatible with earlier versions.</span></span> <span data-ttu-id="be585-138">Modifiez uniquement les composants de build et de révision pour les modifications à compatibilité descendante de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="be585-138">Change only the build and revision parts for backward-compatible changes to the assembly.</span></span> <span data-ttu-id="be585-139">Par exemple, un développeur peut adopter une méthode de numérotation dans laquelle tout 1.0.0. \* les numéros de version font référence aux versions de mise à jour de la version de l’assembly 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="be585-139">For example, a developer might adopt a numbering method in which all 1.0.0.\* version numbers refer to update versions to assembly version 1.0.0.0.</span></span>

 

 
