---
description: Cette rubrique présente le langage de requête de métadonnées pour WIC (Windows Imaging Component).
ms.assetid: 5ffa0a69-b53d-4be3-b802-deaaa743e6bd
title: Vue d’ensemble du langage de requête de métadonnées
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee4b55bdc7079565f98411e28977d3d8c41e191f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104557736"
---
# <a name="metadata-query-language-overview"></a><span data-ttu-id="c3047-103">Vue d’ensemble du langage de requête de métadonnées</span><span class="sxs-lookup"><span data-stu-id="c3047-103">Metadata Query Language Overview</span></span>

<span data-ttu-id="c3047-104">Cette rubrique présente le langage de requête de métadonnées pour WIC (Windows Imaging Component).</span><span class="sxs-lookup"><span data-stu-id="c3047-104">This topic introduces the metadata query language for Windows Imaging Component (WIC).</span></span> <span data-ttu-id="c3047-105">Vous utilisez le langage de requête de métadonnées pour créer des expressions qui recherchent des données spécifiques (éléments de métadonnées) et des emplacements (blocs de métadonnées) dans les métadonnées d’une image.</span><span class="sxs-lookup"><span data-stu-id="c3047-105">You use the metadata query language to create expressions that find specific data (metadata items) and locations (metadata blocks) within the metadata of an image.</span></span>

<span data-ttu-id="c3047-106">Cette rubrique contient les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="c3047-106">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="c3047-107">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="c3047-107">Prerequisites</span></span>](#prerequisites)
-   [<span data-ttu-id="c3047-108">Introduction</span><span class="sxs-lookup"><span data-stu-id="c3047-108">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="c3047-109">Anatomie d’une expression de chemin d’accès</span><span class="sxs-lookup"><span data-stu-id="c3047-109">Anatomy of a Path Expression</span></span>](#anatomy-of-a-path-expression)
    -   [<span data-ttu-id="c3047-110">Sélection de bloc</span><span class="sxs-lookup"><span data-stu-id="c3047-110">Block Selection</span></span>](#block-selection)
    -   [<span data-ttu-id="c3047-111">Sélection de l’élément</span><span class="sxs-lookup"><span data-stu-id="c3047-111">Item Selection</span></span>](#item-selection)
    -   [<span data-ttu-id="c3047-112">Caractère d’échappement</span><span class="sxs-lookup"><span data-stu-id="c3047-112">Escape Character</span></span>](#escape-character)
    -   [<span data-ttu-id="c3047-113">Exemples d'expressions</span><span class="sxs-lookup"><span data-stu-id="c3047-113">Sample Expressions</span></span>](#sample-expressions)
-   [<span data-ttu-id="c3047-114">Expressions de stratégie de métadonnées de photo</span><span class="sxs-lookup"><span data-stu-id="c3047-114">Photo Metadata Policy Expressions</span></span>](#photo-metadata-policy-expressions)
-   [<span data-ttu-id="c3047-115">Résumé du langage des requêtes de métadonnées</span><span class="sxs-lookup"><span data-stu-id="c3047-115">Metadata Query Language Summary</span></span>](#metadata-query-language-summary)
-   [<span data-ttu-id="c3047-116">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c3047-116">Related topics</span></span>](#related-topics)

## <a name="prerequisites"></a><span data-ttu-id="c3047-117">Prérequis</span><span class="sxs-lookup"><span data-stu-id="c3047-117">Prerequisites</span></span>

<span data-ttu-id="c3047-118">Pour comprendre cette rubrique, vous devez être familiarisé avec le système de métadonnées WIC, comme décrit dans la [vue d’ensemble des métadonnées WIC](-wic-about-metadata.md) et l’accès aux métadonnées, comme décrit dans [vue d’ensemble de la lecture et de l’écriture de métadonnées d’image](-wic-codec-readingwritingmetadata.md).</span><span class="sxs-lookup"><span data-stu-id="c3047-118">To understand this topic, you should be familiar with the WIC metadata system as described in the [WIC Metadata Overview](-wic-about-metadata.md) and accessing metadata, as described in the [Overview of Reading and Writing Image Metadata](-wic-codec-readingwritingmetadata.md).</span></span>

## <a name="introduction"></a><span data-ttu-id="c3047-119">Introduction</span><span class="sxs-lookup"><span data-stu-id="c3047-119">Introduction</span></span>

<span data-ttu-id="c3047-120">Vous interagissez avec la plateforme de métadonnées principalement par le biais de deux composants COM (Component Object Model) : un lecteur de requêtes, représenté par l’interface [**IWICMetadataQueryReader**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataqueryreader) , et un générateur de requêtes, représenté par l’interface [**IWICMetadataQueryWriter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataquerywriter) .</span><span class="sxs-lookup"><span data-stu-id="c3047-120">You interact with the metadata platform primarily through two Component Object Model (COM) components: a query reader, represented by the [**IWICMetadataQueryReader**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataqueryreader) interface, and a query writer, represented by the [**IWICMetadataQueryWriter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataquerywriter) interface.</span></span> <span data-ttu-id="c3047-121">Ces composants vous permettent de lire ou d’écrire des métadonnées à l’aide du langage de requête de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-121">These components enable you to read or write metadata using the metadata query language.</span></span> <span data-ttu-id="c3047-122">Le langage de requête décrit la syntaxe d’une expression de chemin d’accès et les composants de requête utilisent cette expression de chemin d’accès pour accéder aux métadonnées souhaitées.</span><span class="sxs-lookup"><span data-stu-id="c3047-122">The query language describes the syntax of a path expression and the query components use this path expression to access the desired metadata.</span></span> <span data-ttu-id="c3047-123">Cette expression de chemin d’accès décrit l’emplacement d’un bloc ou d’un élément de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-123">This path expression describes the location of a metadata block or item.</span></span>

<span data-ttu-id="c3047-124">Un bloc de métadonnées est un groupe nommé de métadonnées dans un format spécifique.</span><span class="sxs-lookup"><span data-stu-id="c3047-124">A metadata block is a named group of metadata in a specific format.</span></span> <span data-ttu-id="c3047-125">Un bloc de métadonnées peut contenir des éléments de métadonnées individuels tels que l’auteur ou l’heure de création, ainsi que des blocs de métadonnées supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="c3047-125">A metadata block can contain individual metadata items such as an author or creation time and additional metadata blocks.</span></span> <span data-ttu-id="c3047-126">Le nom d’un bloc de métadonnées est déterminé par son format.</span><span class="sxs-lookup"><span data-stu-id="c3047-126">A metadata block's name is determined by its format.</span></span> <span data-ttu-id="c3047-127">Par exemple, un bloc de métadonnées contenant des métadonnées App1 serait nommé « App1 ».</span><span class="sxs-lookup"><span data-stu-id="c3047-127">For example, a metadata block containing App1 metadata would be named "app1".</span></span> <span data-ttu-id="c3047-128">Les formats de métadonnées courants incluent App1, EXIF, IFD et XMP.</span><span class="sxs-lookup"><span data-stu-id="c3047-128">Common metadata formats include App1, Exif, IFD, and XMP.</span></span>

<span data-ttu-id="c3047-129">Un élément de métadonnées est une paire nom/valeur qui décrit des caractéristiques telles que l’auteur, le titre et l’évaluation.</span><span class="sxs-lookup"><span data-stu-id="c3047-129">A metadata item is a name/value pair that describes characteristics like author, title, and rating.</span></span>

<span data-ttu-id="c3047-130">Une expression de chemin d’accès contient un ou plusieurs noms de blocs de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-130">A path expression contains one or more metadata block names.</span></span> <span data-ttu-id="c3047-131">Il peut également spécifier un élément de métadonnées dans un bloc de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-131">It can also specify a metadata item within a metadata block.</span></span> <span data-ttu-id="c3047-132">L’expression de chemin d’accès suivante représente un bloc App1 qui contient un bloc IFD contenant l’élément de métadonnées :</span><span class="sxs-lookup"><span data-stu-id="c3047-132">The following path expression represents an App1 block which contains an IFD block which contains the metadata item:</span></span>

-   <span data-ttu-id="c3047-133">/App1/IFD/{UShort = 18249}</span><span class="sxs-lookup"><span data-stu-id="c3047-133">/app1/ifd/{ushort=18249}</span></span>

<span data-ttu-id="c3047-134">Le diagramme suivant illustre la composition d’un exemple d’image JPEG avec quatre blocs de métadonnées racine : APP0, App1, XMP et un bloc inconnu.</span><span class="sxs-lookup"><span data-stu-id="c3047-134">The following diagram illustrates the makeup of an example JPEG image with four root metadata blocks: App0, App1, XMP, and an unknown block.</span></span> <span data-ttu-id="c3047-135">Chaque élément en surbrillance note le type de métadonnées (bloc ou élément) et l’expression de requête utilisée pour récupérer les données.</span><span class="sxs-lookup"><span data-stu-id="c3047-135">Each highlighted item notes the type of metadata (block or item) and the query expression used to retrieve the data.</span></span>

![image JPEG avec des légendes de métadonnées](graphics/jpegwithcallouts.png)

> [!Note]  
> <span data-ttu-id="c3047-137">Le contenu de ce diagramme est référencé dans ce document et utilisé dans la plupart des exemples.</span><span class="sxs-lookup"><span data-stu-id="c3047-137">The contents of this diagram are referenced throughout this document and are used in many of the examples.</span></span>

 

## <a name="anatomy-of-a-path-expression"></a><span data-ttu-id="c3047-138">Anatomie d’une expression de chemin d’accès</span><span class="sxs-lookup"><span data-stu-id="c3047-138">Anatomy of a Path Expression</span></span>

<span data-ttu-id="c3047-139">Pour accéder aux métadonnées à l’aide des API WIC, une expression de requête complète doit être utilisée dans la plupart des cas.</span><span class="sxs-lookup"><span data-stu-id="c3047-139">To access metadata using the WIC APIs, a fully qualified query expression must be used in most cases.</span></span> <span data-ttu-id="c3047-140">Cette rubrique traite des expressions qualifiées complètes pour l’accès aux métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-140">This topic discusses fully qualified expressions for accessing metadata.</span></span> <span data-ttu-id="c3047-141">Si vous avez besoin d’informations sur les cas d’utilisation d’expressions non complètes, reportez-vous à la section expression de stratégie de métadonnées de photo plus loin dans ce document.</span><span class="sxs-lookup"><span data-stu-id="c3047-141">If you need information about the cases in which non-fully qualified expressions are used, refer to the Photo Metadata Policy Expression section later in this document.</span></span>

<span data-ttu-id="c3047-142">Qu’est-ce qu’une expression de requête complète ?</span><span class="sxs-lookup"><span data-stu-id="c3047-142">What is a fully qualified query expression?</span></span> <span data-ttu-id="c3047-143">Dans WIC, une expression qualifiée complète est une chaîne qui commence par la barre oblique de caractères de chemin d’accès (/), suivie d’un chemin de navigation vers un bloc de métadonnées ou un élément de métadonnées spécifique.</span><span class="sxs-lookup"><span data-stu-id="c3047-143">In WIC, a fully qualified expression is a string that begins with the path character slash (/), followed by a navigation path to a metadata block or a specific metadata item.</span></span> <span data-ttu-id="c3047-144">Chaque étape du chemin de navigation est séparée par une barre oblique, formant une expression permettant d’accéder à un bloc de métadonnées ou à un élément de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-144">Each step within the navigation path is separated by a slash, forming an expression for accessing a metadata block or a metadata item.</span></span> <span data-ttu-id="c3047-145">Par exemple, voici une expression de requête complète qui accède à l’évaluation de photo Microsoft dans un bloc IFD imbriqué dans un bloc App1 :</span><span class="sxs-lookup"><span data-stu-id="c3047-145">For example, the following is a fully qualified query expression that accesses the Microsoft Photo Rating in an IFD block that is nested in an App1 block:</span></span>

-   <span data-ttu-id="c3047-146">/App1/IFD/{UShort = 18249}</span><span class="sxs-lookup"><span data-stu-id="c3047-146">/app1/ifd/{ushort=18249}</span></span>

<span data-ttu-id="c3047-147">Lorsque WIC analyse cette expression, il recherche d’abord le bloc de métadonnées App1 dans les métadonnées de l’image.</span><span class="sxs-lookup"><span data-stu-id="c3047-147">When WIC parses this expression, it first searches for the App1 metadata block within the image's metadata.</span></span> <span data-ttu-id="c3047-148">Si le bloc App1 est trouvé, il poursuit sa recherche en recherchant le bloc de métadonnées IFD imbriqué.</span><span class="sxs-lookup"><span data-stu-id="c3047-148">If the App1 block is found, it continues its search looking for the nested IFD metadata block.</span></span> <span data-ttu-id="c3047-149">Si le bloc IFD est trouvé, il recherche l’élément de métadonnées spécifique, dans ce cas l’évaluation MicrosoftPhoto sous la balise 18249, dans le bloc de métadonnées IFD.</span><span class="sxs-lookup"><span data-stu-id="c3047-149">If the IFD block is found, it then looks for the specific metadata item, in this case the MicrosoftPhoto rating under the tag 18249, within the IFD metadata block.</span></span> <span data-ttu-id="c3047-150">Si, à un moment donné, WIC ne trouve pas de bloc ou d’élément de métadonnées, il abandonne la requête.</span><span class="sxs-lookup"><span data-stu-id="c3047-150">If at any time WIC does not find a metadata block or item, it aborts the query.</span></span>

### <a name="block-selection"></a><span data-ttu-id="c3047-151">Sélection de bloc</span><span class="sxs-lookup"><span data-stu-id="c3047-151">Block Selection</span></span>

<span data-ttu-id="c3047-152">L’expression de requête de métadonnées WIC la plus simple est une expression pour obtenir un enregistreur/lecteur de requête pour un bloc de métadonnées spécifique.</span><span class="sxs-lookup"><span data-stu-id="c3047-152">The simplest WIC metadata query expression is an expression to obtain a query reader/writer for a specific metadata block.</span></span> <span data-ttu-id="c3047-153">L’obtention d’un enregistreur/lecteur de requête vous permet de diriger directement les requêtes suivantes vers un bloc de métadonnées imbriqué sans avoir à gérer son bloc parent.</span><span class="sxs-lookup"><span data-stu-id="c3047-153">Obtaining a query reader/writer enables you to direct subsequent queries directly to a nested metadata block without dealing with its parent block.</span></span> <span data-ttu-id="c3047-154">Une expression de requête de sélection de bloc est un chemin de navigation vers le bloc de métadonnées souhaité.</span><span class="sxs-lookup"><span data-stu-id="c3047-154">A block selection query expression is a navigation path to the desired metadata block.</span></span> <span data-ttu-id="c3047-155">Par exemple, dans l’illustration précédente, il y a cinq blocs de métadonnées, dont deux sont imbriqués dans d’autres blocs de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-155">For example, in the previous illustration there are five metadata blocks, two of which are nested in other metadata blocks.</span></span> <span data-ttu-id="c3047-156">Voici les expressions de chemin d’accès à chaque bloc de métadonnées dans l’exemple JPEG :</span><span class="sxs-lookup"><span data-stu-id="c3047-156">The following are the path expressions to each metadata block in the JPEG example:</span></span>

-   <span data-ttu-id="c3047-157">/app0</span><span class="sxs-lookup"><span data-stu-id="c3047-157">/app0</span></span>
-   <span data-ttu-id="c3047-158">/App1</span><span class="sxs-lookup"><span data-stu-id="c3047-158">/app1</span></span>
-   <span data-ttu-id="c3047-159">/app1/ifd</span><span class="sxs-lookup"><span data-stu-id="c3047-159">/app1/ifd</span></span>
-   <span data-ttu-id="c3047-160">/app1/ifd/exif</span><span class="sxs-lookup"><span data-stu-id="c3047-160">/app1/ifd/exif</span></span>
-   <span data-ttu-id="c3047-161">/xmp</span><span class="sxs-lookup"><span data-stu-id="c3047-161">/xmp</span></span>

<span data-ttu-id="c3047-162">Lorsque vous utilisez une requête de lecture/écriture pour exécuter une requête, elle retourne un nouveau lecteur/enregistreur de requête qui permet de servir des requêtes dans la portée du bloc de métadonnées spécifié.</span><span class="sxs-lookup"><span data-stu-id="c3047-162">When you use a query reader/writer to execute a query, it returns a new query reader/writer that services queries within the scope of the specified metadata block.</span></span> <span data-ttu-id="c3047-163">Par exemple, si vous exécutez la requête « /App1 », un nouveau lecteur de requête est obtenu et les requêtes vers le nouveau lecteur sont relatives au bloc App1.</span><span class="sxs-lookup"><span data-stu-id="c3047-163">For instance, if you execute the query "/app1" , a new query reader is obtained and queries to the new reader are relative to the App1 block.</span></span> <span data-ttu-id="c3047-164">Cela signifie que la requête « /IFD » est valide pour le nouveau lecteur, car le bloc App1 contient un bloc IFD.</span><span class="sxs-lookup"><span data-stu-id="c3047-164">This means that the query "/ifd" is valid for the new reader because the App1 block contains an IFD block.</span></span> <span data-ttu-id="c3047-165">Toutefois, « /XMP » ne fonctionne pas, car ce bloc App1 ne contient pas de bloc de métadonnées XMP.</span><span class="sxs-lookup"><span data-stu-id="c3047-165">However, "/xmp" would not work because this App1 block does not contain an XMP metadata block.</span></span>

<span data-ttu-id="c3047-166">Le langage de requête prend également en charge une notation d’index.</span><span class="sxs-lookup"><span data-stu-id="c3047-166">The query language also supports an index notation.</span></span> <span data-ttu-id="c3047-167">La notation d’index donne accès à un bloc de métadonnées spécifique lorsque plusieurs blocs du même type existent.</span><span class="sxs-lookup"><span data-stu-id="c3047-167">Index notation provides access to a specific metadata block when multiple blocks of the same type exist.</span></span> <span data-ttu-id="c3047-168">Pour l’exemple JPEG, l’expression de chemin d’accès indexée suivante peut être utilisée :</span><span class="sxs-lookup"><span data-stu-id="c3047-168">For the JPEG example, the following indexed path expression can be used:</span></span>

-   <span data-ttu-id="c3047-169">/\[0 \] App1/ \[ 0 \] IFD</span><span class="sxs-lookup"><span data-stu-id="c3047-169">/\[0\]app1/\[0\]ifd</span></span>

<span data-ttu-id="c3047-170">Dans le langage de requête, tous les index commencent à zéro.</span><span class="sxs-lookup"><span data-stu-id="c3047-170">In the query language, all indexes start at zero.</span></span> <span data-ttu-id="c3047-171">Dans l’expression précédente, les premières requêtes portant sur le premier bloc App1 et la deuxième valeur zéro interrogent le premier bloc IFD imbriqué.</span><span class="sxs-lookup"><span data-stu-id="c3047-171">In the previous expression, the first zero queries for the first App1 block and the second zero queries the first nested IFD block.</span></span> <span data-ttu-id="c3047-172">La notation d’index peut toujours être utilisée même lorsque plusieurs blocs du même type n’existent pas.</span><span class="sxs-lookup"><span data-stu-id="c3047-172">Index notation can still be used even when multiple blocks of the same type do not exist.</span></span> <span data-ttu-id="c3047-173">Si l’exemple JPEG incluait un deuxième bloc App1 avec un bloc IFD incorporé, l’expression « / \[ 1 \] App1/IFD » serait utilisée pour accéder au deuxième bloc App1.</span><span class="sxs-lookup"><span data-stu-id="c3047-173">If the example JPEG included a second App1 block with an embedded IFD block, the expression "/\[1\]app1/ifd" would be used to access the second App1 block.</span></span>

<span data-ttu-id="c3047-174">La notation d’index devient plus courante lors du traitement des blocs de texte PNG, car il est probable que l’image PNG aura plusieurs blocs de texte.</span><span class="sxs-lookup"><span data-stu-id="c3047-174">Index notation becomes more common when dealing with PNG tEXt chunks because it is likely that the PNG image will have more than one tEXt chunk.</span></span>

> [!Note]  
> <span data-ttu-id="c3047-175">Les index de tableau multidimensionnel ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="c3047-175">Multidimensional array indexes are not supported.</span></span>

 

### <a name="item-selection"></a><span data-ttu-id="c3047-176">Sélection de l’élément</span><span class="sxs-lookup"><span data-stu-id="c3047-176">Item Selection</span></span>

<span data-ttu-id="c3047-177">Vous pouvez accéder aux éléments de métadonnées dans un bloc de métadonnées en générant sur les expressions de sélection de bloc.</span><span class="sxs-lookup"><span data-stu-id="c3047-177">You can access the metadata items in a metadata block by building on the block selection expressions.</span></span> <span data-ttu-id="c3047-178">Considérez les propriétés XMP et Microsoft Photo Rating dans l’exemple JPEG.</span><span class="sxs-lookup"><span data-stu-id="c3047-178">Consider the XMP and Microsoft Photo rating properties in the JPEG example.</span></span> <span data-ttu-id="c3047-179">Ces métadonnées existent dans deux blocs de métadonnées : les blocs App1/IFD et XMP.</span><span class="sxs-lookup"><span data-stu-id="c3047-179">This metadata exists in two metadata blocks: the App1/IFD and XMP blocks.</span></span> <span data-ttu-id="c3047-180">Par conséquent, plusieurs expressions peuvent être utilisées pour accéder aux mêmes données.</span><span class="sxs-lookup"><span data-stu-id="c3047-180">Therefore, more than one expression can be used to access the same data.</span></span> <span data-ttu-id="c3047-181">L’expression suivante accède à l’évaluation MicrosoftPhoto dans le bloc XMP :</span><span class="sxs-lookup"><span data-stu-id="c3047-181">The following expression accesses the MicrosoftPhoto rating in the XMP block:</span></span>

-   <span data-ttu-id="c3047-182">/XMP/XMP : évaluation</span><span class="sxs-lookup"><span data-stu-id="c3047-182">/xmp/xmp:Rating</span></span>

<span data-ttu-id="c3047-183">La partie « XMP : » de l’expression est un identificateur convivial de schéma.</span><span class="sxs-lookup"><span data-stu-id="c3047-183">The "xmp:" part of the expression is a schema friendly identifier.</span></span> <span data-ttu-id="c3047-184">XMP est une norme extensible qui permet aux entités tierces de publier leurs propres schémas qui définissent le mode de stockage de certains éléments de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-184">XMP is an extensible standard and allows third party entities to publish their own schemas which define how to store certain metadata items.</span></span> <span data-ttu-id="c3047-185">Un schéma XMP est entièrement identifié par une URL, mais WIC fournit un ensemble d’identificateurs conviviaux pour les schémas bien connus.</span><span class="sxs-lookup"><span data-stu-id="c3047-185">An XMP schema is fully identified by a URL, but WIC provides a set of friendly identifiers for well-known schemas.</span></span> <span data-ttu-id="c3047-186">Pour plus d’informations, consultez la rubrique [requêtes de métadonnées de format d’image native](-wic-native-image-format-metadata-queries.md) .</span><span class="sxs-lookup"><span data-stu-id="c3047-186">For more information, see the [Native Image Format Metadata Queries](-wic-native-image-format-metadata-queries.md) topic.</span></span>

<span data-ttu-id="c3047-187">Pour les images JPEG, les informations d’évaluation peuvent également être stockées dans le bloc IFD imbriqué App1.</span><span class="sxs-lookup"><span data-stu-id="c3047-187">For JPEG images, rating information can also be stored within the App1 nested IFD block.</span></span> <span data-ttu-id="c3047-188">Toutefois, contrairement à l’exemple d’évaluation XMP, le bloc IFD n’utilise pas de nom de schéma pour accéder aux informations d’évaluation.</span><span class="sxs-lookup"><span data-stu-id="c3047-188">However, unlike the XMP rating example, the IFD block does not use a schema name to access the rating information.</span></span> <span data-ttu-id="c3047-189">Vous utilisez une expression de données à la place.</span><span class="sxs-lookup"><span data-stu-id="c3047-189">You use a data expression instead.</span></span> <span data-ttu-id="c3047-190">L’expression suivante est utilisée pour accéder à l’évaluation MicrosoftPhoto dans le bloc IFD imbriqué App1 :</span><span class="sxs-lookup"><span data-stu-id="c3047-190">The following expression is used to access the MicrosoftPhoto rating in the App1 nested IFD block:</span></span>

-   <span data-ttu-id="c3047-191">/App1/IFD/{UShort = 18249}</span><span class="sxs-lookup"><span data-stu-id="c3047-191">/app1/ifd/{ushort=18249}</span></span>

<span data-ttu-id="c3047-192">Dans cette expression, la partie « /App1/IFD » de l’expression est le chemin de navigation vers le bloc IFD (comme indiqué précédemment dans la section sélection de bloc).</span><span class="sxs-lookup"><span data-stu-id="c3047-192">In this expression, the "/app1/ifd" part of the expression is the navigation path to the IFD block (as discussed previously in the Block Selection section).</span></span> <span data-ttu-id="c3047-193">La deuxième partie de l’expression « /{UShort = 18249} » accède aux données.</span><span class="sxs-lookup"><span data-stu-id="c3047-193">The second part of the expression "/{ushort=18249}" accesses the data.</span></span> <span data-ttu-id="c3047-194">Cette partie de l’expression indique à l’analyseur de requête de rechercher les données incorporées dans la balise short non signée qui a l’identificateur de balise 18249.</span><span class="sxs-lookup"><span data-stu-id="c3047-194">This part of the expression instructs the query parser to find the data embedded in the unsigned short tag that has the tag identifier 18249.</span></span>

> [!Note]  
> <span data-ttu-id="c3047-195">Pour obtenir la liste des formats de métadonnées courants pris en charge par chaque format d’image, consultez la rubrique [requêtes de métadonnées de format d’image native](-wic-native-image-format-metadata-queries.md) .</span><span class="sxs-lookup"><span data-stu-id="c3047-195">For a list of common metadata formats supported by each image format at, see the [Native Image Format Metadata Queries](-wic-native-image-format-metadata-queries.md) topic.</span></span>

 

<span data-ttu-id="c3047-196">{UShort = 18249} est une expression de données et peut prendre plusieurs formes.</span><span class="sxs-lookup"><span data-stu-id="c3047-196">The {ushort=18249} is a data expression and can take several forms.</span></span> <span data-ttu-id="c3047-197">Une expression de données est une expression en deux parties contenant la balise ou la clé de métadonnées demandée, dans ce cas « 18249 », et le type de données de la clé, dans ce cas « UShort ».</span><span class="sxs-lookup"><span data-stu-id="c3047-197">A data expression is a two part expression containing the requested metadata tag or key, in this case "18249", and the data type of the key, in this case "ushort".</span></span> <span data-ttu-id="c3047-198">Les deux parties sont séparées par un signe égal (=).</span><span class="sxs-lookup"><span data-stu-id="c3047-198">The two parts are separated by an equal sign (=).</span></span> <span data-ttu-id="c3047-199">WICsupports la majorité des types de données C/C++ courants.</span><span class="sxs-lookup"><span data-stu-id="c3047-199">WICsupports a majority of the common C/C++ data types.</span></span> <span data-ttu-id="c3047-200">Les types de données suivants sont acceptés par le langage de requête :</span><span class="sxs-lookup"><span data-stu-id="c3047-200">The following data types are accepted by the query language:</span></span>

-   <span data-ttu-id="c3047-201">char</span><span class="sxs-lookup"><span data-stu-id="c3047-201">char</span></span>
-   <span data-ttu-id="c3047-202">UCHAR</span><span class="sxs-lookup"><span data-stu-id="c3047-202">uchar</span></span>
-   <span data-ttu-id="c3047-203">short</span><span class="sxs-lookup"><span data-stu-id="c3047-203">short</span></span>
-   <span data-ttu-id="c3047-204">ushort</span><span class="sxs-lookup"><span data-stu-id="c3047-204">ushort</span></span>
-   <span data-ttu-id="c3047-205">long</span><span class="sxs-lookup"><span data-stu-id="c3047-205">long</span></span>
-   <span data-ttu-id="c3047-206">ulong</span><span class="sxs-lookup"><span data-stu-id="c3047-206">ulong</span></span>
-   <span data-ttu-id="c3047-207">int</span><span class="sxs-lookup"><span data-stu-id="c3047-207">int</span></span>
-   <span data-ttu-id="c3047-208">uint</span><span class="sxs-lookup"><span data-stu-id="c3047-208">uint</span></span>
-   <span data-ttu-id="c3047-209">longlong</span><span class="sxs-lookup"><span data-stu-id="c3047-209">longlong</span></span>
-   <span data-ttu-id="c3047-210">float</span><span class="sxs-lookup"><span data-stu-id="c3047-210">float</span></span>
-   <span data-ttu-id="c3047-211">double</span><span class="sxs-lookup"><span data-stu-id="c3047-211">double</span></span>
-   <span data-ttu-id="c3047-212">str</span><span class="sxs-lookup"><span data-stu-id="c3047-212">str</span></span>
-   <span data-ttu-id="c3047-213">WSTR</span><span class="sxs-lookup"><span data-stu-id="c3047-213">wstr</span></span>
-   <span data-ttu-id="c3047-214">guid</span><span class="sxs-lookup"><span data-stu-id="c3047-214">guid</span></span>
-   <span data-ttu-id="c3047-215">bool</span><span class="sxs-lookup"><span data-stu-id="c3047-215">bool</span></span>

> [!Note]  
> <span data-ttu-id="c3047-216">Cette liste spécifie uniquement les types de données pris en charge par le langage de requête de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-216">This list only specifies the data types supported by the metadata query language.</span></span> <span data-ttu-id="c3047-217">Utilisez ces types de données lors de la création d’une expression de données de requête de métadonnées telle que {UShort = 18249}.</span><span class="sxs-lookup"><span data-stu-id="c3047-217">Use these data types when creating a metadata query data expression such as {ushort=18249}.</span></span> <span data-ttu-id="c3047-218">Le WIC retourne la valeur de l’élément de métadonnées sous la forme de PROPVARIANT, qui définit son propre système de type.</span><span class="sxs-lookup"><span data-stu-id="c3047-218">The WIC returns the metadata item's value in the form of PROPVARIANT, which defines its own type system.</span></span>

 

<span data-ttu-id="c3047-219">Dans l’exemple, « 18249 » est la balise de données.</span><span class="sxs-lookup"><span data-stu-id="c3047-219">The "18249" in the example is the data tag.</span></span> <span data-ttu-id="c3047-220">Ce nombre particulier est défini par Microsoft pour contenir l’évaluation MicrosoftPhoto.</span><span class="sxs-lookup"><span data-stu-id="c3047-220">This particular number is defined by Microsoft to contain the MicrosoftPhoto rating.</span></span> <span data-ttu-id="c3047-221">La balise de données peut être un nombre, une chaîne ou un GUID en fonction de l’élément de données que vous recherchez.</span><span class="sxs-lookup"><span data-stu-id="c3047-221">The data tag can be any number, string, or GUID depending on the data item you are looking for</span></span>

<span data-ttu-id="c3047-222">Contrairement à l’exemple d’évaluation XMP, il n’existe aucune collision de nom pour la valeur d’évaluation dans le bloc App1/IFD.</span><span class="sxs-lookup"><span data-stu-id="c3047-222">Unlike the XMP Rating example, there is no name collision for the rating value in the App1/IFD block.</span></span> <span data-ttu-id="c3047-223">Cela est dû au fait que la valeur d’évaluation XMP est stockée sous une autre balise UShort, 18246.</span><span class="sxs-lookup"><span data-stu-id="c3047-223">This is because the XMP rating value is actually stored under a different ushort tag, 18246.</span></span> <span data-ttu-id="c3047-224">Ainsi, l’expression permettant d’accéder à l’évaluation XMP dans le bloc App1/IFD est la suivante :</span><span class="sxs-lookup"><span data-stu-id="c3047-224">Thus, the expression to access the XMP rating in the App1/IFD block is:</span></span>

-   <span data-ttu-id="c3047-225">/App1/IFD/{UShort = 18246}</span><span class="sxs-lookup"><span data-stu-id="c3047-225">/app1/ifd/{ushort=18246}</span></span>

> [!Note]  
> <span data-ttu-id="c3047-226">Pour obtenir une description formelle du langage de requête de métadonnées, consultez la section Résumé du langage de requête de métadonnées plus loin dans ce document.</span><span class="sxs-lookup"><span data-stu-id="c3047-226">For a formal description of the metadata query language, see the Metadata Query Language Summary section later in this document.</span></span>

 

### <a name="escape-character"></a><span data-ttu-id="c3047-227">Caractère d'échappement</span><span class="sxs-lookup"><span data-stu-id="c3047-227">Escape Character</span></span>

<span data-ttu-id="c3047-228">Le langage de requête ne tient pas compte de la casse et traite tous les caractères en minuscules.</span><span class="sxs-lookup"><span data-stu-id="c3047-228">The query language is not case sensitive and treats all characters as lowercase.</span></span> <span data-ttu-id="c3047-229">Toutefois, certains formats de métadonnées (tels que XMP) respectent la casse.</span><span class="sxs-lookup"><span data-stu-id="c3047-229">However, some metadata formats (such as XMP) are case sensitive.</span></span> <span data-ttu-id="c3047-230">Lorsque vous utilisez un format de métadonnées respectant la casse, utilisez la barre oblique inverse ( \\ ) lorsque vous souhaitez spécifier un caractère majuscule.</span><span class="sxs-lookup"><span data-stu-id="c3047-230">When working with a case-sensitive metadata format, use the backslash (\\) character when you want to specify an uppercase character.</span></span>

<span data-ttu-id="c3047-231">Le caractère d’échappement est consommé par l’analyseur de langage et le caractère suivant qui le suit est interprété directement.</span><span class="sxs-lookup"><span data-stu-id="c3047-231">The escape character is consumed by the language parser and the following character that follows it is interpreted directly.</span></span> <span data-ttu-id="c3047-232">Par exemple, l’expression {char = \\ \\ } est résolue en tant que' \\ 'et {char = \\ C} est résolu en tant que C majuscule. Sans le caractère d’échappement, {char = \\ } est une expression non valide et {char = C} est interprété comme un C minuscule.</span><span class="sxs-lookup"><span data-stu-id="c3047-232">For example, the expression {char=\\\\} is resolved as '\\'and {char=\\C} is resolved as an uppercase C. Without the escape character, {char=\\} would be an invalid expression and {char=C} would be interpreted as a lowercase c.</span></span> <span data-ttu-id="c3047-233">Veillez à utiliser le caractère d’échappement barre oblique inverse avant toutes les lettres majuscules dans les formats de métadonnées qui respectent la casse.</span><span class="sxs-lookup"><span data-stu-id="c3047-233">Be sure to use the backslash escape character before all uppercase letters in metadata formats that are case sensitive.</span></span>

### <a name="sample-expressions"></a><span data-ttu-id="c3047-234">Exemples d'expressions</span><span class="sxs-lookup"><span data-stu-id="c3047-234">Sample Expressions</span></span>

<span data-ttu-id="c3047-235">Le tableau suivant fournit des exemples d’expressions et des descriptions de leurs interprétations par l’analyseur de langage de requête.</span><span class="sxs-lookup"><span data-stu-id="c3047-235">The following table provides some example expressions and descriptions of their interpretations by the query language parser.</span></span> 

| <span data-ttu-id="c3047-236">Expression</span><span class="sxs-lookup"><span data-stu-id="c3047-236">Expression</span></span>                     | <span data-ttu-id="c3047-237">Description</span><span class="sxs-lookup"><span data-stu-id="c3047-237">Description</span></span>                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c3047-238">IFD/XMP/EXIF : auteur</span><span class="sxs-lookup"><span data-stu-id="c3047-238">ifd/xmp/exif:Author</span></span>            | <span data-ttu-id="c3047-239">Correspond au chemin de navigation suivant : bloc « IFD » > bloc XMP-> propriété « auteur » dans le schéma « EXIF ».</span><span class="sxs-lookup"><span data-stu-id="c3047-239">Corresponds to the following navigation path: IFD block -> XMP block -> "Author" property in the "Exif" schema.</span></span>                                                                                                                                                                                                                                            |
| <span data-ttu-id="c3047-240">/\[1 \] IFD/ \[ 0 \] XMP/EXIF : auteur</span><span class="sxs-lookup"><span data-stu-id="c3047-240">/\[1\]ifd/\[0\]xmp/exif:Author</span></span> | <span data-ttu-id="c3047-241">Identique au premier élément de ce tableau, sauf que le \[ \# \] préfixe décrit l’élément à parcourir en cas de collision de nom.</span><span class="sxs-lookup"><span data-stu-id="c3047-241">Same as the first item in this table except that the \[\#\] prefix describes which item to navigate in event of a name collision.</span></span>                                                                                                                                                                                                                                |
| <span data-ttu-id="c3047-242">/IFD/{UShort = 700}/Author</span><span class="sxs-lookup"><span data-stu-id="c3047-242">/ifd/{ushort=700}/Author</span></span>       | <span data-ttu-id="c3047-243">Identique au premier élément de ce tableau, sauf qu’il utilise une expression de données pour référencer le bloc XMP au lieu du nom de bloc « XMP » (le bloc XMP est incorporé sous l’identificateur de balise abrégé non signé 700).</span><span class="sxs-lookup"><span data-stu-id="c3047-243">Same as the first item in this table except that it uses a data expression to reference the XMP block instead of the block name "xmp" (XMP block is embedded under the unsigned short tag identifier 700).</span></span> <span data-ttu-id="c3047-244">En outre, la propriété « Author » ne spécifie pas de schéma.</span><span class="sxs-lookup"><span data-stu-id="c3047-244">Also, the "Author" property does not specify a schema.</span></span> <span data-ttu-id="c3047-245">L’analyseur de requêtes essaiera de faire correspondre la propriété à tous les schémas et de retourner la première correspondance.</span><span class="sxs-lookup"><span data-stu-id="c3047-245">The query parser will try to match the property across all schemas and return the first match.</span></span> |
| <span data-ttu-id="c3047-246">/ifd/xmp</span><span class="sxs-lookup"><span data-stu-id="c3047-246">/ifd/xmp</span></span>                       | <span data-ttu-id="c3047-247">Fournit un chemin de navigation vers un bloc de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-247">Provides a navigation path to a metadata block.</span></span> <span data-ttu-id="c3047-248">Si le bloc est trouvé, un nouveau lecteur/enregistreur de métadonnées est retourné.</span><span class="sxs-lookup"><span data-stu-id="c3047-248">If the block is found, a new metadata reader/writer is returned.</span></span>                                                                                                                                                                                                                                                 |
| <span data-ttu-id="c3047-249">/\[\*\]Texte/mot clé</span><span class="sxs-lookup"><span data-stu-id="c3047-249">/\[\*\]tEXt/Keyword</span></span>            | <span data-ttu-id="c3047-250">Obtient ou définit la propriété de mot clé pour un bloc PNG.</span><span class="sxs-lookup"><span data-stu-id="c3047-250">Gets or sets the Keyword property for a PNG chunk.</span></span> <span data-ttu-id="c3047-251">Étant donné que la spécification de métadonnées png autorise plusieurs segments d’un type particulier, la \[ \* \] notation Obtient/définit le segment de données png avec la propriété appropriée.</span><span class="sxs-lookup"><span data-stu-id="c3047-251">Because the PNG metadata specification allows for multiple chunks of a particular type, the \[\*\] notation gets/sets the data PNG chunk with the appropriate property.</span></span> <span data-ttu-id="c3047-252">Conformément à la spécification PNG, deux blocs ne peuvent pas avoir les mêmes propriétés.</span><span class="sxs-lookup"><span data-stu-id="c3047-252">Per the PNG specification, no two chunks can have the same properties.</span></span>                                                                |



 

<span data-ttu-id="c3047-253">Chaque bloc de métadonnées est également identifié de façon unique par le GUID de métadonnées qui peut être utilisé à la place du nom de bloc convivial.</span><span class="sxs-lookup"><span data-stu-id="c3047-253">Each metadata block is also uniquely identified by the metadata GUID which can be used in place of the friendly block name.</span></span> <span data-ttu-id="c3047-254">La syntaxe suivante peut être utilisée à la place de la fourniture de noms de bloc : « /{GUID = GUID}/ \[ n \] {GUID = GUID}/Schema : tagidentifier »</span><span class="sxs-lookup"><span data-stu-id="c3047-254">The following syntax can be used in place of providing block names: "/{guid=GUID}/\[n\]{guid=GUID}/schema:tagidentifier"</span></span>

<span data-ttu-id="c3047-255">Le tableau suivant fournit des exemples non valides et les raisons pour lesquelles elles seraient rejetées.</span><span class="sxs-lookup"><span data-stu-id="c3047-255">The following table provides some invalid examples and the reasons they would be rejected.</span></span> 

| <span data-ttu-id="c3047-256">Expression non valide</span><span class="sxs-lookup"><span data-stu-id="c3047-256">Invalid Expression</span></span>         | <span data-ttu-id="c3047-257">Description du rejet</span><span class="sxs-lookup"><span data-stu-id="c3047-257">Rejection description</span></span>                                                                                                                                                  |
|----------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c3047-258">/IFD/ \[ 0 \] \[ 2 \] EXIF/</span><span class="sxs-lookup"><span data-stu-id="c3047-258">/ifd/\[0\]\[2\]exif/</span></span>       | <span data-ttu-id="c3047-259">Rejeté, car les index de tableau multidimensionnels ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="c3047-259">Rejected because multi dimensional array indexes are not supported.</span></span>                                                                                                    |
| <span data-ttu-id="c3047-260">/IFD/{UShort = 1}/{UShort = 2}</span><span class="sxs-lookup"><span data-stu-id="c3047-260">/ifd/{ushort=1}/{ushort=2}</span></span> | <span data-ttu-id="c3047-261">Rejeté, à moins que l’IFD ait un tagID = 1, qui est un gestionnaire de métadonnées contenant un élément de métadonnées avec un tagID = 2.</span><span class="sxs-lookup"><span data-stu-id="c3047-261">Rejected unless the IFD has a tagID=1 which is a metadata handler that contains a metadata item with a tagID=2.</span></span>                                                        |
| <span data-ttu-id="c3047-262">/{UShort = 1}</span><span class="sxs-lookup"><span data-stu-id="c3047-262">/{ushort=1}</span></span>                | <span data-ttu-id="c3047-263">Rejeté si le traitement de la requête est relatif à un niveau supérieur de la hiérarchie de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-263">Rejected if the query processing is relative to a top level of the metadata hierarchy.</span></span> <span data-ttu-id="c3047-264">Cela est dû au fait que le niveau supérieur contient uniquement des blocs de métadonnées et non des éléments de données.</span><span class="sxs-lookup"><span data-stu-id="c3047-264">This is because the top level contains only metadata blocks and not data items.</span></span> |



 

## <a name="photo-metadata-policy-expressions"></a><span data-ttu-id="c3047-265">Expressions de stratégie de métadonnées de photo</span><span class="sxs-lookup"><span data-stu-id="c3047-265">Photo Metadata Policy Expressions</span></span>

<span data-ttu-id="c3047-266">Comme indiqué précédemment, une expression de requête complète commence par une barre oblique (/).</span><span class="sxs-lookup"><span data-stu-id="c3047-266">As noted previously, a fully qualified query expression starts with a slash (/).</span></span> <span data-ttu-id="c3047-267">Les expressions qui ne commencent pas par la barre oblique sont évaluées en tant qu’expressions de stratégie.</span><span class="sxs-lookup"><span data-stu-id="c3047-267">Expressions that do not begin with the slash are evaluated as policy expressions.</span></span> <span data-ttu-id="c3047-268">Une expression de stratégie vous permet d’interroger les métadonnées de photo pour les propriétés de l' [interpréteur](https://msdn.microsoft.com/library/ms788673(VS.85).aspx)de commandes Windows relatives aux images.</span><span class="sxs-lookup"><span data-stu-id="c3047-268">A policy expression enables you to query the photo metadata for image-related Windows [Shell Properties](https://msdn.microsoft.com/library/ms788673(VS.85).aspx).</span></span> <span data-ttu-id="c3047-269">Dans la section de sélection des données, plus haut dans ce document, l’expression « /XMP/XMP : Rating » a été utilisée pour accéder à la propriété d’évaluation XMP.</span><span class="sxs-lookup"><span data-stu-id="c3047-269">In the Data Selection section earlier in this document, the expression "/xmp/xmp:Rating" was used to access the XMP rating property.</span></span> <span data-ttu-id="c3047-270">Cette propriété peut également être interrogée à l’aide de l’expression de stratégie suivante :</span><span class="sxs-lookup"><span data-stu-id="c3047-270">This property can also be queried using the following policy expression:</span></span>

-   <span data-ttu-id="c3047-271">System. SimpleRating</span><span class="sxs-lookup"><span data-stu-id="c3047-271">System.SimpleRating</span></span>

<span data-ttu-id="c3047-272">Pour accéder à la propriété Rating à partir du schéma MicrosoftPhoto, vous pouvez utiliser l’expression de requête suivante :</span><span class="sxs-lookup"><span data-stu-id="c3047-272">To access the rating property from the MicrosoftPhoto schema, the following query expression can be used:</span></span>

-   <span data-ttu-id="c3047-273">System. Rating</span><span class="sxs-lookup"><span data-stu-id="c3047-273">System.Rating</span></span>

<span data-ttu-id="c3047-274">Les expressions de stratégie de métadonnées de photos se comportent différemment des requêtes de métadonnées complètes, en quelques points.</span><span class="sxs-lookup"><span data-stu-id="c3047-274">Photo metadata policy expressions behave differently from fully qualified metadata queries in a few notable ways.</span></span>

<span data-ttu-id="c3047-275">Tout d’abord, lors de l’accès aux métadonnées à l’aide d’une expression de stratégie, WIC effectue une résolution d’arbitrage et de conflit dans le cas où la même propriété est disponible dans plusieurs blocs de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-275">First, when accessing metadata using a policy expression, WIC performs arbitration and conflict resolution in the case that the same property is available in multiple metadata blocks.</span></span> <span data-ttu-id="c3047-276">Par exemple, les valeurs d’évaluation MicrosoftPhoto et XMP sont stockées à la fois dans le bloc App1/IFD et dans le bloc XMP.</span><span class="sxs-lookup"><span data-stu-id="c3047-276">For instance, both the MicrosoftPhoto and the XMP rating values are stored in both the App1/IFD block and the XMP block.</span></span> <span data-ttu-id="c3047-277">La stratégie de métadonnées de photos détermine la précédence pour laquelle la valeur de bloc est retournée lors de la lecture des métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-277">The photo metadata policy determines the precedence for which block value is returned when reading metadata.</span></span> <span data-ttu-id="c3047-278">Lorsque vous écrivez des métadonnées, la stratégie de métadonnées de photos garantit que les mêmes propriétés dans différents blocs sont cohérentes.</span><span class="sxs-lookup"><span data-stu-id="c3047-278">When you are writing metadata, the photo metadata policy ensures that the same properties in different blocks are consistent.</span></span> <span data-ttu-id="c3047-279">Si vous utilisez une requête de métadonnées telle que « /XMP/XMP : Rating », vous êtes responsable de l’arbitrage entre les différents emplacements de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="c3047-279">If you use a metadata query such as "/xmp/xmp:Rating", you are responsible for arbitrating between the various metadata locations.</span></span>

> [!Note]  
> <span data-ttu-id="c3047-280">Pour obtenir la liste des expressions de stratégie prises en charge et leurs stratégies de mappage, consultez la rubrique [stratégies de métadonnées de photos](photo-metadata-policies.md) .</span><span class="sxs-lookup"><span data-stu-id="c3047-280">For a list of the supported policy expressions and their mapping policies, see the [Photo Metadata Policies](photo-metadata-policies.md) topic.</span></span>

 

<span data-ttu-id="c3047-281">Deuxièmement, les expressions de stratégie de métadonnées de photo sont indépendantes du format d’image, contrairement aux requêtes de métadonnées complètes.</span><span class="sxs-lookup"><span data-stu-id="c3047-281">Second, photo metadata policy expressions are independent of the image format, while fully qualified metadata queries are not.</span></span> <span data-ttu-id="c3047-282">Par exemple, la requête « /XMP/XMP : Rating » est spécifique au format JPEG.</span><span class="sxs-lookup"><span data-stu-id="c3047-282">For example, the "/xmp/xmp:Rating" query is specific to the JPEG format.</span></span> <span data-ttu-id="c3047-283">Les images TIFF prennent également en charge les métadonnées XMP, mais elles sont stockées différemment par rapport au format JPEG, de sorte que la requête TIFF serait « /IFD/XMP/XMP : Rating ».</span><span class="sxs-lookup"><span data-stu-id="c3047-283">TIFF images also support XMP metadata, but it is stored differently compared to JPEG, so the TIFF query would be “/ifd/xmp/xmp:Rating”.</span></span> <span data-ttu-id="c3047-284">Toutefois, dans les deux cas, l’expression de stratégie serait « System. SimpleRating ».</span><span class="sxs-lookup"><span data-stu-id="c3047-284">However, in both cases the policy expression would be “System.SimpleRating”.</span></span>

<span data-ttu-id="c3047-285">Les expressions de stratégie de métadonnées de photos fournissent un niveau supérieur d’abstraction et de simplicité par rapport aux requêtes de métadonnées complètes, et devraient donc être préférées dans les cas où l’accès aux métadonnées de bas niveau n’est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c3047-285">Photo metadata policy expressions provide a higher level of abstraction and simplicity when compared to fully qualified metadata queries, and so should be preferred in cases where low-level metadata access is not needed.</span></span> <span data-ttu-id="c3047-286">Toutefois, les expressions de stratégie fournissent uniquement un accès à un ensemble limité de métadonnées d’image, tandis que le langage de requête de métadonnées permet d’accéder à presque toutes les métadonnées stockées dans un fichier image.</span><span class="sxs-lookup"><span data-stu-id="c3047-286">However, policy expressions only provide access to a limited set of image metadata, whereas the metadata query language provides access to nearly all of the metadata stored within an image file.</span></span>

## <a name="metadata-query-language-summary"></a><span data-ttu-id="c3047-287">Résumé du langage des requêtes de métadonnées</span><span class="sxs-lookup"><span data-stu-id="c3047-287">Metadata Query Language Summary</span></span>

<span data-ttu-id="c3047-288">Le tableau suivant est une définition formelle du langage de requête de métadonnées WIC.</span><span class="sxs-lookup"><span data-stu-id="c3047-288">The following table is a formal definition of the WIC metadata query language.</span></span> <span data-ttu-id="c3047-289">Chaque symbole de grammaire représente une expression composée d’autres symboles.</span><span class="sxs-lookup"><span data-stu-id="c3047-289">Each grammar symbol represents an expression made up of other symbols.</span></span> <span data-ttu-id="c3047-290">L’expression peut être un autre symbole ou une séquence d’autres symboles séparés par une barre verticale ( \| ), indiquant un choix « ou ».</span><span class="sxs-lookup"><span data-stu-id="c3047-290">The expression can be another symbol or a sequence of other symbols separated by the vertical bar (\|), indicating an "or" choice.</span></span> <span data-ttu-id="c3047-291">L’expression entière à droite est une substitution possible pour le symbole spécifié sur la gauche.</span><span class="sxs-lookup"><span data-stu-id="c3047-291">The whole expression on the right is a possible substitution for the specified symbol on the left.</span></span> 

| <span data-ttu-id="c3047-292">Symbole</span><span class="sxs-lookup"><span data-stu-id="c3047-292">Symbol</span></span>                   | <span data-ttu-id="c3047-293">Expression</span><span class="sxs-lookup"><span data-stu-id="c3047-293">Expression</span></span>                                                                                                                                                                  |
|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \<path>             | <span data-ttu-id="c3047-294">\<name> \| '/' \<property path></span><span class="sxs-lookup"><span data-stu-id="c3047-294">\<name> \| '/' \<property path></span></span>                                                                                                                                   |
| \<property path>    | <span data-ttu-id="c3047-295">\<metadata item> \| \<property path> '/' \<property path></span><span class="sxs-lookup"><span data-stu-id="c3047-295">\<metadata item> \| \<property path> '/' \<property path></span></span>                                                                                                    |
| \<metadata item>    | <span data-ttu-id="c3047-296">\<index name> \| \<item name> \| \<schema name> ':' \<item name></span><span class="sxs-lookup"><span data-stu-id="c3047-296">\<index name> \| \<item name> \| \<schema name> ':' \<item name></span></span>                                                                                        |
| \<schema name>      | \<item name>                                                                                                                                                           |
| \<item name>        | <span data-ttu-id="c3047-297">\<metadata item> \| <indexed item><index></span><span class="sxs-lookup"><span data-stu-id="c3047-297">\<metadata item> \| <indexed item><index></span></span>                                                                                                                  |
| \<indexed item>     | <span data-ttu-id="c3047-298">\<item> \| \<implied metadata>\<item></span><span class="sxs-lookup"><span data-stu-id="c3047-298">\<item> \| \<implied metadata>\<item></span></span>                                                                                                                        |
| \<implied metadata> | <span data-ttu-id="c3047-299">' < ' \<name> ' > '</span><span class="sxs-lookup"><span data-stu-id="c3047-299">'<'\<name>'>'</span></span>                                                                                                                                                    |
| \<item>             | <span data-ttu-id="c3047-300">\<name> \| \<index> \<data> \| \<data></span><span class="sxs-lookup"><span data-stu-id="c3047-300">\<name> \| \<index> \<data> \| \<data></span></span>                                                                                                                  |
| \<data>             | <span data-ttu-id="c3047-301">'{' \<data type> '=' \<value> '}'</span><span class="sxs-lookup"><span data-stu-id="c3047-301">'{' \<data type> '=' \<value> '}'</span></span>                                                                                                                                 |
| \<index>            | <span data-ttu-id="c3047-302">'\[' \<number> \| \<star> '\]'</span><span class="sxs-lookup"><span data-stu-id="c3047-302">'\[' \<number> \| \<star> '\]'</span></span>                                                                                                                                    |
| \<data type>        | <span data-ttu-id="c3047-303">'Char' \| 'UCHAR' \| 'short' ' \| UShort' \| 'long' \| 'ulong' \| 'int' \| 'uint' \| 'LongLong' \| 'ULONGLONG' \| 'float' ' \| double' \| 'str' ' \| WSTR' \| 'GUID' \| 'bool'</span><span class="sxs-lookup"><span data-stu-id="c3047-303">'char' \| 'uchar' \| 'short' \| 'ushort' \| 'long' \| 'ulong' \| 'int' \| 'uint' \| 'longlong' \| 'ulonglong' \| 'float' \| 'double' \| 'str' \| 'wstr' \| 'guid' \| 'bool'</span></span> |
| \<data value>       | <span data-ttu-id="c3047-304">\<number> \| \<name> \| \<guid></span><span class="sxs-lookup"><span data-stu-id="c3047-304">\<number> \| \<name> \| \<guid></span></span>                                                                                                                              |
| \<star>             | <span data-ttu-id="c3047-305">'\*'</span><span class="sxs-lookup"><span data-stu-id="c3047-305">'\*'</span></span>                                                                                                                                                                        |
| \<number>           | <span data-ttu-id="c3047-306">nombre</span><span class="sxs-lookup"><span data-stu-id="c3047-306">number</span></span>                                                                                                                                                                      |
| \<name>             | <span data-ttu-id="c3047-307">string</span><span class="sxs-lookup"><span data-stu-id="c3047-307">string</span></span>                                                                                                                                                                      |
| \<guid>             | <span data-ttu-id="c3047-308">guid</span><span class="sxs-lookup"><span data-stu-id="c3047-308">guid</span></span>                                                                                                                                                                        |



 

## <a name="related-topics"></a><span data-ttu-id="c3047-309">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c3047-309">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="c3047-310">**Méthodologique**</span><span class="sxs-lookup"><span data-stu-id="c3047-310">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="c3047-311">Vue d’ensemble du composant Windows Imaging</span><span class="sxs-lookup"><span data-stu-id="c3047-311">Windows Imaging Component Overview</span></span>](-wic-about-windows-imaging-codec.md)
</dt> <dt>

[<span data-ttu-id="c3047-312">Vue d’ensemble des métadonnées WIC</span><span class="sxs-lookup"><span data-stu-id="c3047-312">WIC Metadata Overview</span></span>](-wic-about-metadata.md)
</dt> <dt>

[<span data-ttu-id="c3047-313">Vue d’ensemble de la lecture et de l’écriture des métadonnées d’image</span><span class="sxs-lookup"><span data-stu-id="c3047-313">Overview of Reading and Writing Image Metadata</span></span>](-wic-codec-readingwritingmetadata.md)
</dt> <dt>

[<span data-ttu-id="c3047-314">Vue d’ensemble de l’extensibilité des métadonnées</span><span class="sxs-lookup"><span data-stu-id="c3047-314">Metadata Extensibility Overview</span></span>](-wic-codec-metadatahandlers.md)
</dt> <dt>

[<span data-ttu-id="c3047-315">Comment : recoder une image JPEG avec des métadonnées</span><span class="sxs-lookup"><span data-stu-id="c3047-315">How-to: Re-encode a JPEG Image with Metadata</span></span>](-wic-codec-jpegmetadataencoding.md)
</dt> </dl>

 

 



