---
title: Mixed-Mode de la mise à l’échelle PPP et des API compatibles PPP
description: .
ms.assetid: 44AC0B29-3283-4801-90F5-3E78CCD87B9F
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb9f8a8f72b199aaba195002134855155925b30d
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103940858"
---
# <a name="mixed-mode-dpi-scaling-and-dpi-aware-apis"></a><span data-ttu-id="8f82d-103">Mixed-Mode de la mise à l’échelle PPP et des API compatibles PPP</span><span class="sxs-lookup"><span data-stu-id="8f82d-103">Mixed-Mode DPI Scaling and DPI-aware APIs</span></span>

## <a name="sub-process-dpi-awareness-support"></a><span data-ttu-id="8f82d-104">Prise en charge de la prise en charge de Sub-Process DPI</span><span class="sxs-lookup"><span data-stu-id="8f82d-104">Sub-Process DPI Awareness Support</span></span>

<span data-ttu-id="8f82d-105">[**SetThreadDpiAwarenessContext**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) permet l’utilisation de différents modes de mise à l’échelle dpi au sein d’un même processus.</span><span class="sxs-lookup"><span data-stu-id="8f82d-105">[**SetThreadDpiAwarenessContext**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) enables the use of different DPI scaling modes within a single process.</span></span> <span data-ttu-id="8f82d-106">Avant la mise à jour anniversaire de Windows 10, la prise en charge de la résolution des PPP de Windows était liée au mode de prise en charge DPI à l’échelle du processus (prise en charge de dpi non compatible, compatible avec la résolution système ou Per-Monitor DPI).</span><span class="sxs-lookup"><span data-stu-id="8f82d-106">Prior to the Windows 10 Anniversary Update, a window s DPI awareness was bound to the process-wide DPI awareness mode (DPI unaware, System DPI aware, or Per-Monitor DPI aware).</span></span> <span data-ttu-id="8f82d-107">Mais maintenant, avec **SetThreadDpiAwarenessContext**, les fenêtres de niveau supérieur peuvent avoir un mode de reconnaissance dpi différent de celui du mode de reconnaissance dpi à l’échelle du processus.</span><span class="sxs-lookup"><span data-stu-id="8f82d-107">But now, with **SetThreadDpiAwarenessContext**, top-level windows can have a DPI awareness mode that is different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="8f82d-108">Cela affecte également les fenêtres enfants, car elles auront toujours le même mode de reconnaissance PPP que leur fenêtre parente.</span><span class="sxs-lookup"><span data-stu-id="8f82d-108">This also effects child windows, as they will always have the same DPI awareness mode as their parent window.</span></span>

<span data-ttu-id="8f82d-109">L’utilisation de **SetThreadDpiAwarenessContext** permet aux développeurs de décider où ils veulent concentrer leurs efforts de développement lorsqu’ils définissent le comportement spécifique aux dpi pour les applications de bureau.</span><span class="sxs-lookup"><span data-stu-id="8f82d-109">The use of **SetThreadDpiAwarenessContext** enables developers to decide where they want to focus their development efforts when defining DPI-specific behavior for desktop applications.</span></span> <span data-ttu-id="8f82d-110">Par exemple, la fenêtre de niveau supérieur principale d’une application peut être mise à l’échelle en fonction de l’écran, tandis que les fenêtres de niveau supérieur secondaires peuvent être mises à l’échelle via le système d’exploitation à l’aide d’une mise à l’échelle bitmap.</span><span class="sxs-lookup"><span data-stu-id="8f82d-110">For example, an application's primary top-level window could be scaled on a per-monitor basis while secondary top-level windows could be scaled via bitmap-scaling by the operating system.</span></span>

## <a name="the-dpi-awareness-context"></a><span data-ttu-id="8f82d-111">Contexte de détection PPP</span><span class="sxs-lookup"><span data-stu-id="8f82d-111">The DPI Awareness Context</span></span>

<span data-ttu-id="8f82d-112">Avant la disponibilité de **SetThreadDpiAwarenessContext** , la reconnaissance PPP d’un processus a été définie dans le manifeste du fichier binaire de l’application ou via un appel à [**SetProcessDpiAwareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) pendant l’initialisation du processus.</span><span class="sxs-lookup"><span data-stu-id="8f82d-112">Prior to the availability of **SetThreadDpiAwarenessContext** the DPI awareness of a process was defined either in the manifest of the application binary or via a call to [**SetProcessDpiAwareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) during process initialization.</span></span> <span data-ttu-id="8f82d-113">Avec **SetThreadDpiAwarenessContext**, chaque thread peut avoir un contexte de reconnaissance PPP individuel qui peut être différent de celui du mode de reconnaissance PPP à l’échelle du processus.</span><span class="sxs-lookup"><span data-stu-id="8f82d-113">With **SetThreadDpiAwarenessContext**, each thread can have an individual DPI awareness context that may be different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="8f82d-114">Le contexte de détection PPP d’un thread est représenté par le type \* \* \* \* [contexte de détection PPP \* \_ \_ \*](dpi-awareness-context.md) \* \* et se comporte comme suit :</span><span class="sxs-lookup"><span data-stu-id="8f82d-114">The DPI awareness context of a thread is represented with the [\*\*\*\*DPI\_AWARENESS\_CONTEXT\*\*\*\*](dpi-awareness-context.md) type, and behaves in the following ways:</span></span>

-   <span data-ttu-id="8f82d-115">Un thread peut avoir son contexte de sensibilisation PPP modifié à tout moment.</span><span class="sxs-lookup"><span data-stu-id="8f82d-115">A thread can have its DPI awareness context changed at any time.</span></span>
-   <span data-ttu-id="8f82d-116">Tous les appels d’API effectués après modification du contexte s’exécutent dans le contexte PPP correspondant (et peuvent être virtualisés).</span><span class="sxs-lookup"><span data-stu-id="8f82d-116">Any API calls that are made after the context is changed will run in the corresponding DPI context (and may be virtualized).</span></span>
-   <span data-ttu-id="8f82d-117">Quand une fenêtre est créée, sa prise en forme PPP est définie comme la reconnaissance DPI du thread appelant à ce moment-là.</span><span class="sxs-lookup"><span data-stu-id="8f82d-117">When a window is created, its DPI awareness is defined as the DPI awareness of the calling thread at that time.</span></span>
-   <span data-ttu-id="8f82d-118">Lorsque la procédure de fenêtre pour une fenêtre est appelée, le thread bascule automatiquement vers le contexte de détection PPP qui était utilisé lors de la création de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="8f82d-118">When the window procedure for a window is called, the thread is automatically switched to the DPI awareness context that was in use when the window was created.</span></span>

<span data-ttu-id="8f82d-119">Un scénario courant pour l’utilisation de **SetThreadDpiAwarenessContext** est le suivant : commencer avec un thread qui s’exécute avec un contexte (par exemple, le **contexte de détection des PPP \_ par la prise en \_ \_ \_ \_ charge** de l’analyse) basculer temporairement vers un autre contexte (prise en charge du **\_ contexte de détection \_ \_ PPP** impossible), créer une fenêtre, puis basculer immédiatement le contexte de thread à son état précédent.</span><span class="sxs-lookup"><span data-stu-id="8f82d-119">A common scenario for the use of **SetThreadDpiAwarenessContext** is as follows: Begin with a thread that is running with one context (such as **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE**) temporarily switch to a different context (**DPI\_AWARENESS\_CONTEXT\_UNAWARE**), create a window, and then immediately switch the thread context back to its previous state.</span></span> <span data-ttu-id="8f82d-120">La fenêtre créée aura un contexte PPP qui ne **prend \_ pas \_ en \_ charge le contexte de détection PPP**, tandis que le contexte des threads d’appel sera restauré en contexte de **\_ sensibilisation PPP \_ \_ par \_ analyse \_** avec un appel ultérieur à **SetThreadDpiAwarenessContext**.</span><span class="sxs-lookup"><span data-stu-id="8f82d-120">The created window will have a DPI context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, while the calling thread s context will be restored to **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE** with a subsequent call to **SetThreadDpiAwarenessContext**.</span></span> <span data-ttu-id="8f82d-121">Dans ce scénario, la fenêtre associée au thread appelant s’exécute avec un contexte par moniteur (et, par conséquent, n’est pas étiré par le système d’exploitation), tandis que la fenêtre nouvellement créée ne prend pas en charge la fonction DPI (et par conséquent, la bitmap est automatiquement étirée sur un affichage défini sur >100% de mise à l’échelle).</span><span class="sxs-lookup"><span data-stu-id="8f82d-121">In this scenario, the window associated with the calling thread would run with a per-monitor context (and therefore not be bitmap-stretched by the operating system) while the newly-created window would not be DPI aware (and therefore would be automatically bitmap stretched on a display set to >100% scaling).</span></span>

<span data-ttu-id="8f82d-122">La figure 1 illustre la façon dont le thread de processus principal s’exécute avec le **\_ contexte de reconnaissance PPP \_ \_ par \_ moniteur**, bascule son contexte sur la **prise en \_ \_ \_ charge du contexte de sensibilisation dpi** et crée une nouvelle fenêtre.</span><span class="sxs-lookup"><span data-stu-id="8f82d-122">Figure 1 illustrates how the main process thread executes with **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**, switches its context to **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, and creates a new window.</span></span> <span data-ttu-id="8f82d-123">La fenêtre qui vient d’être créée s’exécute ensuite avec un contexte de sensibilisation en DPI du contexte de sensibilisation PPP qui ne prend **\_ pas en \_ \_ charge** chaque fois qu’un message est distribué ou que des appels d’API sont effectués à partir de celle-ci.</span><span class="sxs-lookup"><span data-stu-id="8f82d-123">The newly created window then executes with a DPI awareness context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE** whenever a message is dispatched to it or API calls are made from it.</span></span> <span data-ttu-id="8f82d-124">Immédiatement après la création de la nouvelle fenêtre, le thread principal est restauré dans son contexte précédent du **\_ contexte de détection dpi \_ \_ par \_ moniteur**.</span><span class="sxs-lookup"><span data-stu-id="8f82d-124">Immediately after creating the new window the main thread is restored to its previous context of **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**.</span></span>

![Diagramme montrant la prise en action de dpi par moniteur](images/dpi-awareness-context.png)

## <a name="new-dpi-related-apis"></a><span data-ttu-id="8f82d-126">Nouvelles API liées à DPI</span><span class="sxs-lookup"><span data-stu-id="8f82d-126">New DPI-related APIs</span></span>

<span data-ttu-id="8f82d-127">Outre la prise en charge de différents modes de reconnaissance DPI au sein d’un même processus que **SetThreadDpiAwarenessContext** offre, les fonctionnalités spécifiques à la DPI suivantes ont été ajoutées pour les applications de bureau :</span><span class="sxs-lookup"><span data-stu-id="8f82d-127">In addition to the support for different DPI awareness modes within a single process that **SetThreadDpiAwarenessContext** offers, the following DPI-specific functionality has been added for desktop applications:</span></span><dl> <dd>[<span data-ttu-id="8f82d-128">EnableNonClientDpiScaling\*\*\*\*</span><span class="sxs-lookup"><span data-stu-id="8f82d-128">\*\*\*\*EnableNonClientDpiScaling\*\*\*\*</span></span>](/windows/desktop/api/Winuser/nf-winuser-enablenonclientdpiscaling)<dl> <dt>



> [!Note]  
> <span data-ttu-id="8f82d-129">Le mode de reconnaissance PPP **par moniteur v2** active automatiquement cette fonctionnalité et l’appel de **EnableNonClientDpiScaling** n’est donc pas nécessaire dans les applications qui l’utilisent.</span><span class="sxs-lookup"><span data-stu-id="8f82d-129">The **Per Monitor V2** DPI awareness mode automatically enables this functionality, and calling **EnableNonClientDpiScaling** is therefore unnecessary in applications using it.</span></span>

 

<span data-ttu-id="8f82d-130">L’appel de **EnableNonClientDpiScaling** à partir d’un gestionnaire **\_ NCCREATE** de fenêtre s entraîne la mise à l’échelle automatique de la zone non cliente d’une fenêtre de niveau supérieur pour la résolution PPP.</span><span class="sxs-lookup"><span data-stu-id="8f82d-130">Calling **EnableNonClientDpiScaling** from within a window s **WM\_NCCREATE** handler will result in the non-client area of a top-level window automatically scaling for DPI.</span></span> <span data-ttu-id="8f82d-131">Si la fenêtre de niveau supérieur prend en charge DPI par moniteur (que le processus lui-même soit compatible avec la résolution PPP par moniteur ou que la fenêtre ait été créée au sein d’un thread prenant en charge la résolution PPP), la barre de légende, les barres de défilement, les menus et les barres de menus de ces fenêtres sont mis à l’échelle en fonction de la valeur PPP.</span><span class="sxs-lookup"><span data-stu-id="8f82d-131">If the top-level window is per-monitor DPI-aware (whether because the process itself is per-monitor DPI-aware or because the window was created within a per-monitor DPI-aware thread), the caption bar, scroll bars, menus, and menu bars of these windows will DPI-scale whenever the window s DPI changes.</span></span>
</dt> <dt>

<span data-ttu-id="8f82d-132">Notez que les zones non clientes d’une fenêtre enfant, telles que les barres de défilement non client d’un contrôle d’édition enfant, ne sont pas automatiquement mises à l’échelle en DPI lorsque cette API est utilisée.</span><span class="sxs-lookup"><span data-stu-id="8f82d-132">Note that non-client areas of a child window, such as non-client scroll bars of a child edit control, will not DPI scale automatically when this API is used.</span></span>
</dt> <dt>

> [!Note]  
> <span data-ttu-id="8f82d-133">**EnableNonClientDpiScaling** doit être appelé à partir du gestionnaire **WM \_ NCCREATE** .</span><span class="sxs-lookup"><span data-stu-id="8f82d-133">**EnableNonClientDpiScaling** must be called from the **WM\_NCCREATE** handler.</span></span>

</dt> </dl> </dd> <dd> <span data-ttu-id="8f82d-134"><b> API \* ForDpi </b></span><span class="sxs-lookup"><span data-stu-id="8f82d-134"><b> The \*ForDpi APIs </b></span></span>

-   <span data-ttu-id="8f82d-135">Plusieurs API fréquemment utilisées, telles que [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) , n’ont pas de contexte d’un HWND et n’ont donc aucun moyen de déduire la prise en forme de dpi appropriée pour leurs valeurs de retour.</span><span class="sxs-lookup"><span data-stu-id="8f82d-135">Several frequently-used APIs such as [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) do not have any context of an HWND and therefore have no way of deducing the proper DPI awareness for their return values.</span></span> <span data-ttu-id="8f82d-136">L’appel de ces API à partir d’un thread qui s’exécute dans un autre contexte ou mode de reconnaissance PPP peut retourner des valeurs qui ne sont pas mises à l’échelle pour le contexte du thread appelant.</span><span class="sxs-lookup"><span data-stu-id="8f82d-136">Calling these APIs from a thread that is running in a different DPI awareness mode or context may return values that are not scaled for the context of the calling thread.</span></span> <span data-ttu-id="8f82d-137">[\* \* \* \* GetSystemMetricForDpi \* \*](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi)\* *, [\* \* \* \* SystemParametersInfoForDpi \* \*](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi)* \* et \* \* \* \* [AdjustWindowRectExForDpi \* \*](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \*</span><span class="sxs-lookup"><span data-stu-id="8f82d-137">[\*\*\*\*GetSystemMetricForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi), [\*\*\*\*SystemParametersInfoForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi), and [\*\*\*\*AdjustWindowRectExForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) will perform the same functionality as their DPI unaware counterparts, but take a DPI as an argument and infer the dpi awareness from the current thread's context.</span></span>
-   <span data-ttu-id="8f82d-138">**GetSystemMetricForDpi** et **SystemParametersInfoForDpi** retournent des valeurs de métriques système à échelle dpi et des valeurs de paramètre système conformément à cette équation :</span><span class="sxs-lookup"><span data-stu-id="8f82d-138">**GetSystemMetricForDpi** and **SystemParametersInfoForDpi** will return DPI-scaled system metric values and system parameter values in accordance to this equation:</span></span>

    |                                                                 |
    |-----------------------------------------------------------------|
    | <span data-ttu-id="8f82d-139">GetSystemMetrics (...) @ dpi = = GetSystemMetricsForDpi (..., dpi)</span><span class="sxs-lookup"><span data-stu-id="8f82d-139">GetSystemMetrics(...) @ dpi == GetSystemMetricsForDpi(..., dpi)</span></span> |

    

     

    <span data-ttu-id="8f82d-140">Par conséquent, l’appel de **GetSystemMetrics** (ou **SystemParametersInfoForDpi**), en cours d’exécution sur un appareil avec une certaine valeur DPI système, retourne la même valeur que leurs variantes prenant en charge dpi (**GetSystemMetricsForDpi** et **SystemParametersInfoForDpi**), étant donné la même valeur DPI que l’entrée.</span><span class="sxs-lookup"><span data-stu-id="8f82d-140">Therefore, calling **GetSystemMetrics** (or **SystemParametersInfoForDpi**), while running on a device with a certain system DPI value will return the same value that their DPI aware variants (**GetSystemMetricsForDpi** and **SystemParametersInfoForDpi**) will, given the same DPI value as input.</span></span>

-   <span data-ttu-id="8f82d-141">[**AdjustWindowRectExForDpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) prend un HWND et calcule la taille requise d’un rectangle de fenêtre d’une manière sensible aux PPP.</span><span class="sxs-lookup"><span data-stu-id="8f82d-141">[**AdjustWindowRectExForDpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) takes an HWND and will calculate the required size of a window rectangle in a DPI-sensitive way.</span></span>

</dd> <dd>

</dd> <dd><span data-ttu-id="8f82d-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">GetDpiForWindow</a></b></span><span class="sxs-lookup"><span data-stu-id="8f82d-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">GetDpiForWindow</a></b></span></span><dl> <span data-ttu-id="8f82d-143"><dt><b>GetDpiForWindow</b> retourne la PPP associée au HWND fourni.</span><span class="sxs-lookup"><span data-stu-id="8f82d-143"><dt> <b>GetDpiForWindow</b> will return the DPI associated with the HWND provided.</span></span> <span data-ttu-id="8f82d-144">La réponse dépend du mode de reconnaissance PPP du HWND :</span><span class="sxs-lookup"><span data-stu-id="8f82d-144">The answer will depend on the DPI awareness mode of the HWND:</span></span>

| <span data-ttu-id="8f82d-145">Mode de reconnaissance DPI de HWND</span><span class="sxs-lookup"><span data-stu-id="8f82d-145">DPI Awareness mode of HWND</span></span> | <span data-ttu-id="8f82d-146">Valeur retournée</span><span class="sxs-lookup"><span data-stu-id="8f82d-146">Return value</span></span>                                                                                                                                                                                                  |
|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8f82d-147">Ignore</span><span class="sxs-lookup"><span data-stu-id="8f82d-147">Unaware</span></span>                    | <span data-ttu-id="8f82d-148">96</span><span class="sxs-lookup"><span data-stu-id="8f82d-148">96</span></span>                                                                                                                                                                                                            |
| <span data-ttu-id="8f82d-149">Système</span><span class="sxs-lookup"><span data-stu-id="8f82d-149">System</span></span>                     | <span data-ttu-id="8f82d-150">La résolution système</span><span class="sxs-lookup"><span data-stu-id="8f82d-150">The system DPI</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="8f82d-151">Per-Monitor</span><span class="sxs-lookup"><span data-stu-id="8f82d-151">Per-Monitor</span></span>                | <span data-ttu-id="8f82d-152">PPP de l’affichage sur lequel la fenêtre de niveau supérieur associée se trouve principalement</span><span class="sxs-lookup"><span data-stu-id="8f82d-152">The DPI of display that the associated top-level window is primarily located on</span></span> <br/> <span data-ttu-id="8f82d-153">(Si une fenêtre enfant est fournie, la résolution de la fenêtre parente de niveau supérieur correspondante est retournée)</span><span class="sxs-lookup"><span data-stu-id="8f82d-153">(If a child window is provided, the DPI of the corresponding top-level parent window will be returned)</span></span><br/> |

</dt> </dl> </dd> <dd><span data-ttu-id="8f82d-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">GetDpiForSystem</a></b></span><span class="sxs-lookup"><span data-stu-id="8f82d-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">GetDpiForSystem</a></b></span></span><dl> <dt>

<span data-ttu-id="8f82d-155">L’appel de **GetDpiForSystem** est plus efficace que l’appel de [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) et [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) pour obtenir la DPI système.</span><span class="sxs-lookup"><span data-stu-id="8f82d-155">Calling **GetDpiForSystem** is more efficient than calling [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) and [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) to obtain the system DPI.</span></span>
</dt> <dt>

<span data-ttu-id="8f82d-156">Tout composant pouvant être en cours d’exécution dans une application qui utilise la reconnaissance de la résolution de sous-processus ne doit pas supposer que la résolution du système est statique pendant le cycle de vie du processus.</span><span class="sxs-lookup"><span data-stu-id="8f82d-156">Any component that could be running in an application that uses sub-process DPI awareness should not assume that the system DPI is static during the lifecycle of the process.</span></span> <span data-ttu-id="8f82d-157">Par exemple, si un thread qui s’exécute sous le **contexte de sensibilisation en dpi ( \_ context awareness \_ \_** context awareness) interroge la résolution du système, la réponse sera 96.</span><span class="sxs-lookup"><span data-stu-id="8f82d-157">For example, if a thread that is running under **DPI\_AWARENESS\_CONTEXT\_UNAWARE** awareness context queries the system DPI, the answer will be 96.</span></span> <span data-ttu-id="8f82d-158">Toutefois, si le même thread a basculé vers le contexte de sensibilisation du **\_ système de \_ contexte \_ de sensibilisation PPP** et interrogé à nouveau la résolution du système, la réponse peut être différente.</span><span class="sxs-lookup"><span data-stu-id="8f82d-158">However, if that same thread switched to **DPI\_AWARENESS\_CONTEXT\_SYSTEM** awareness context and queried the system DPI again, the answer could be different.</span></span> <span data-ttu-id="8f82d-159">Pour éviter l’utilisation d’une valeur DPI système (et éventuellement obsolète) mise en cache, utilisez **GetDpiForSystem** pour récupérer la résolution système dpi par rapport au mode de reconnaissance dpi du thread appelant.</span><span class="sxs-lookup"><span data-stu-id="8f82d-159">To avoid the use of a cached (and possibly stale) system-DPI value, use **GetDpiForSystem** to retrieve the system DPI relative to the DPI awareness mode of the calling thread.</span></span> 
</dt> </dl> </dd> </dl>