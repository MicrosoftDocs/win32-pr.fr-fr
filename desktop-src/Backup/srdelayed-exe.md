---
title: Srdelayed.exe
description: Les applications qui effectuent des opérations de restauration de l’état du système au début du démarrage du système d’exploitation peuvent ne pas pouvoir utiliser les fonctions de gestion de fichiers pour déplacer, supprimer ou définir le nom abrégé de certains fichiers système.
ms.assetid: cedeb48e-bc1d-48d1-9bee-0b8b0132c3e5
keywords:
- Sauvegarde Srdelayed.exe
- Sauvegarde de récupération de l’état du système
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5a5f6b281c07f5b0ad8d6cd7e59b4f93ec9208a5
ms.sourcegitcommit: 46376be61d3fa308f9b1a06d7e2fa122a39755af
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/10/2020
ms.locfileid: "104463875"
---
# <a name="srdelayedexe"></a><span data-ttu-id="36833-105">Srdelayed.exe</span><span class="sxs-lookup"><span data-stu-id="36833-105">Srdelayed.exe</span></span>

<span data-ttu-id="36833-106">Les applications qui effectuent des opérations de restauration de l’état du système au début du démarrage du système d’exploitation peuvent ne pas pouvoir utiliser les fonctions de gestion de fichiers pour déplacer, supprimer ou définir le nom abrégé de certains fichiers système.</span><span class="sxs-lookup"><span data-stu-id="36833-106">Applications that perform system state restore operations early in the startup of the operating system may be unable to use the file management functions to move, delete, or set the short name of certain system files.</span></span> <span data-ttu-id="36833-107">Srdelayed.exe est un fichier exécutable, fourni avec la fonctionnalité de Sauvegarde Windows Server (WSB) de Windows Server 2008, qui peut permettre aux applications de récupération de l’état du système de déplacer, supprimer et définir le nom abrégé des fichiers système.</span><span class="sxs-lookup"><span data-stu-id="36833-107">Srdelayed.exe is an executable file, provided with the Windows Server Backup (WSB) feature in Windows Server 2008, that can enable system state recovery applications to move, delete, and set the short name of system files.</span></span>

<span data-ttu-id="36833-108">L’outil srdelayed est conçu pour les applications de récupération de l’état du système. elle ne remplace pas les fonctions de gestion de fichiers.</span><span class="sxs-lookup"><span data-stu-id="36833-108">The Srdelayed tool is intended for system state recovery applications; it does not replace the file management functions.</span></span> <span data-ttu-id="36833-109">Cet outil doit être utilisé uniquement lorsque l’application ne peut pas déplacer, supprimer ou définir le nom abrégé d’un fichier système à l’aide des fonctions [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa), [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea)et [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) .</span><span class="sxs-lookup"><span data-stu-id="36833-109">This tool should be used only when the application is unable to move, delete, or set the short name of a system file using the [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa), [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea), and [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) functions.</span></span> <span data-ttu-id="36833-110">Pendant une restauration et un redémarrage de l’état du système, Srdelayed.exe est utilisé par la restauration du système et l’outil de ligne de commande wbadmin.exe pour déplacer, supprimer et définir le nom abrégé de certains fichiers système.</span><span class="sxs-lookup"><span data-stu-id="36833-110">During a system state restore and restart, Srdelayed.exe is used by System Restore and the wbadmin.exe command-line tool to move, delete, and set the short name on certain system files.</span></span> <span data-ttu-id="36833-111">Srdelayed peut donc être utile pour les développeurs qui requièrent la possibilité de restaurer ces fichiers système dans leurs propres applications de récupération de l’état du système.</span><span class="sxs-lookup"><span data-stu-id="36833-111">Srdelayed may therefore be useful to developers that require the capability to restore these system files in their own system state recovery applications.</span></span>

<span data-ttu-id="36833-112">Srdelayed peut effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="36833-112">Srdelayed can perform the following operations:</span></span>

-   <span data-ttu-id="36833-113">Opération de déplacement de fichier similaire à la fonction [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa) avec **le \_ délai MOVEFILE jusqu’à l’indicateur de \_ \_ redémarrage**</span><span class="sxs-lookup"><span data-stu-id="36833-113">A move file operation similar to the [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa) function with the **MOVEFILE\_DELAY\_UNTIL\_REBOOT** flag</span></span>
-   <span data-ttu-id="36833-114">Opération de suppression de fichier similaire à la fonction [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea)</span><span class="sxs-lookup"><span data-stu-id="36833-114">A delete file operation similar to the [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea) function</span></span>
-   <span data-ttu-id="36833-115">Une opération set Short Name similaire à la fonction [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea)</span><span class="sxs-lookup"><span data-stu-id="36833-115">A set short-name operation similar to the [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) function</span></span>

<span data-ttu-id="36833-116">Pour utiliser srdelayed, votre application nécessite le chemin d’accès complet à l’emplacement du fichier Srdelayed.exe et le chemin d’accès complet à un fichier texte Unicode que vous avez créé pour contenir les informations nécessaires à l’outil pour effectuer toutes les opérations de gestion de fichiers demandées.</span><span class="sxs-lookup"><span data-stu-id="36833-116">To use Srdelayed, your application requires the full path to the location of the Srdelayed.exe file and the full path to a Unicode text file that you have authored to contain the information the tool needs to perform all the file management operations being requested.</span></span> <span data-ttu-id="36833-117">Votre application est chargée de s’assurer que ce fichier texte ne contient pas de demandes redondantes pour une opération et qu’il gère tout ordonnancement des opérations de gestion des fichiers.</span><span class="sxs-lookup"><span data-stu-id="36833-117">Your application is responsible for ensuring that this text file does not contain redundant requests for an operation and that it handles any required ordering of the file management operations.</span></span> <span data-ttu-id="36833-118">Par exemple, étant donné qu’un dossier doit être vide pour être supprimé, votre application doit s’assurer que le fichier texte spécifie la suppression de tous les fichiers contenus dans le dossier avant de demander la suppression du dossier.</span><span class="sxs-lookup"><span data-stu-id="36833-118">For example, because a folder must be empty to be deleted, your application needs to ensure that the text file specifies the removal of all files inside the folder before requesting the folder be deleted.</span></span>

<span data-ttu-id="36833-119">Si l’entrée **SetupExecute** n’existe pas encore dans le registre, votre application doit créer une entrée de type **reg \_ \_ multisz** nommée **SetupExecute** sous la clé de Registre suivante : **HKEY \_ local \_ machine** \\ **System** \\ **CurrentControlSet** \\ **Control** \\ **Session Manager**.</span><span class="sxs-lookup"><span data-stu-id="36833-119">If the **SetupExecute** entry does not already exist in the registry, your application needs to create a **REG\_MULTI\_SZ** type entry named **SetupExecute** under the following registry key: **HKEY\_LOCAL\_MACHINE**\\**System**\\**CurrentControlSet**\\**Control**\\**Session Manager**.</span></span>

<span data-ttu-id="36833-120">Votre application doit utiliser le format suivant pour définir la valeur de **SetupExecute** sur le chemin d’accès complet à l’emplacement du fichier Srdelayed.exe et le chemin d’accès complet à l’emplacement du fichier texte.</span><span class="sxs-lookup"><span data-stu-id="36833-120">Your application should use the following format to set the value of **SetupExecute** to the full path to the location of the Srdelayed.exe file and the full path to the location of the text file.</span></span> <span data-ttu-id="36833-121">Préfixe « \\ \\ ?? \\ » pour le chemin d’accès du fichier texte, comme suit :</span><span class="sxs-lookup"><span data-stu-id="36833-121">Prefix "\\\\??\\" to the path of the text file, as follows:</span></span>

<span data-ttu-id="36833-122">*Chemin d’accès complet à Srdelayed.exe* \\ \\ ? \\ *Chemin d’accès complet au fichier texte*</span><span class="sxs-lookup"><span data-stu-id="36833-122">*Full Path to Srdelayed.exe* \\\\??\\*Full Path to Text file*</span></span>  


<span data-ttu-id="36833-123">Par exemple, la valeur suivante pour **SetupExecute** indique que le Srdelayed.exe se trouve dans le dossier system32 et que le fichier texte est nommé DelayedOperations :</span><span class="sxs-lookup"><span data-stu-id="36833-123">For example, the following value for **SetupExecute** indicates that the Srdelayed.exe is located in the System32 folder and the text file is named DelayedOperations:</span></span>

<span data-ttu-id="36833-124">C : \\ Windows \\ system32 \\srdelayed.exe \\ \\ ?? \\ C : \\ temp \\ DelayedOperations</span><span class="sxs-lookup"><span data-stu-id="36833-124">C:\\Windows\\System32\\srdelayed.exe \\\\??\\C:\\temp\\DelayedOperations</span></span>  


<span data-ttu-id="36833-125">Les espaces dans le chemin d’accès et le nom doivent être encodés au format hexadécimal.</span><span class="sxs-lookup"><span data-stu-id="36833-125">Spaces in the path and name should be hexadecimal encoded.</span></span> <span data-ttu-id="36833-126">Par exemple, pour les *fichiers programme*, encodez le chemin d’accès en tant que « \\ \\ ?? \\ C :Program%20Files \\a.dll».</span><span class="sxs-lookup"><span data-stu-id="36833-126">For example, for *Program Files*, encode the path as "\\\\??\\C:Program%20Files\\a.dll".</span></span>

<span data-ttu-id="36833-127">Lorsque le registre ou le système est restauré lors du redémarrage, votre application doit s’assurer que **SetupExecute** est écrit dans la ruche de Registre correcte.</span><span class="sxs-lookup"><span data-stu-id="36833-127">When the registry or system is being restored upon restart, your application needs to ensure that **SetupExecute** gets written in the correct registry hive.</span></span> <span data-ttu-id="36833-128">La récupération du Registre est effectuée avant l’exécution de Srdelayed.exe.</span><span class="sxs-lookup"><span data-stu-id="36833-128">Recovery of the registry is performed before Srdelayed.exe is run.</span></span> <span data-ttu-id="36833-129">L’application doit écrire des **SetupExecute** dans la version Récupérée du Registre, car il s’agit de la version qui est lue.</span><span class="sxs-lookup"><span data-stu-id="36833-129">The application needs to write **SetupExecute** into the recovered version of the registry because this is the version that is read.</span></span>

## <a name="format-for-the-srdelayed-input-file"></a><span data-ttu-id="36833-130">Format du fichier d’entrée srdelayed</span><span class="sxs-lookup"><span data-stu-id="36833-130">Format for the Srdelayed Input File</span></span>

<span data-ttu-id="36833-131">Toutes les informations dont srdelayed a besoin pour effectuer des opérations de gestion de fichiers sont spécifiées sous la forme d’une chaîne de caractères Unicode dans un fichier texte Unicode.</span><span class="sxs-lookup"><span data-stu-id="36833-131">All the information Srdelayed needs to perform file management operations is specified as a string of Unicode characters in a Unicode text file.</span></span> <span data-ttu-id="36833-132">La chaîne de caractères Unicode est partitionnée en enregistrements qui sont eux-mêmes chacun partitionnés en quatre champs.</span><span class="sxs-lookup"><span data-stu-id="36833-132">The string of Unicode characters is partitioned into records that are themselves each partitioned into four fields.</span></span> <span data-ttu-id="36833-133">Chaque enregistrement spécifie un fichier de déplacement unique, un fichier de suppression ou une opération de définition de nom abrégé.</span><span class="sxs-lookup"><span data-stu-id="36833-133">Each record specifies a single move file, delete file, or set short-name operation.</span></span> <span data-ttu-id="36833-134">Les quatre champs de chaque enregistrement contiennent les paramètres de l’opération.</span><span class="sxs-lookup"><span data-stu-id="36833-134">The four fields of each record contain the parameters for the operation.</span></span> <span data-ttu-id="36833-135">Srdelayed.exe effectue chaque opération dans l’ordre dans lequel leurs enregistrements se produisent dans la chaîne.</span><span class="sxs-lookup"><span data-stu-id="36833-135">Srdelayed.exe performs each operation in the order that their records occur in the string.</span></span> <span data-ttu-id="36833-136">Votre application doit rechercher les enregistrements en double dans ce fichier et supprimer les doublons.</span><span class="sxs-lookup"><span data-stu-id="36833-136">Your application should check for any duplicate records in this file and remove the duplicates.</span></span>

<span data-ttu-id="36833-137">La chaîne suivante illustre le format d’un fichier demandant deux opérations et composé de deux enregistrements.</span><span class="sxs-lookup"><span data-stu-id="36833-137">The following string illustrates the format for a file requesting two operations and consisting of two records.</span></span> <span data-ttu-id="36833-138">Chaque champ de paramètre se termine par un seul caractère L' \\ 0 '.</span><span class="sxs-lookup"><span data-stu-id="36833-138">Each parameter field ends with a single L'\\0' character.</span></span> <span data-ttu-id="36833-139">Un enregistrement est composé de quatre champs consécutifs.</span><span class="sxs-lookup"><span data-stu-id="36833-139">A record is composed of four consecutive fields.</span></span> <span data-ttu-id="36833-140">Un seul caractère de L' ' \\ 0 'supplémentaire est ajouté à la fin de tous les enregistrements.</span><span class="sxs-lookup"><span data-stu-id="36833-140">An additional single L'\\0' character is appended to the end of all records.</span></span>

`<ParamA1>L'\0'<ParamA2>L'\0'<ParamA3>L'\0'<ParamA4>L'\0'<ParamB1>L'\0'<ParamB2>L'\0'<ParamB3>L'\0'<ParamB4>L'\0'L'\0'`  
`|-----------------------RecordA------------------------|------------------------RecordB------------------------|`  


<span data-ttu-id="36833-141">La signification des premier, deuxième, troisième et quatrième champs de paramètre varie selon que l’enregistrement décrit une opération de déplacement, de suppression ou de définition de noms courts.</span><span class="sxs-lookup"><span data-stu-id="36833-141">The meaning of the first, second, third, and fourth parameter fields depends on whether the record describes a move, delete, or set short-name operation.</span></span>

## <a name="format-for-a-move-file-record"></a><span data-ttu-id="36833-142">Format pour un enregistrement de fichier de déplacement</span><span class="sxs-lookup"><span data-stu-id="36833-142">Format for a Move File Record</span></span>

<span data-ttu-id="36833-143">Le champ 1 identifie cela comme une demande de déplacement d’un fichier.</span><span class="sxs-lookup"><span data-stu-id="36833-143">Field 1 identifies this as a request to move a file.</span></span> <span data-ttu-id="36833-144">La valeur de ce champ est toujours L "MoveFile" et respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="36833-144">The value in this field is always L"MoveFile" and is case sensitive.</span></span>

<span data-ttu-id="36833-145">Le champ 2 spécifie l’emplacement source du fichier.</span><span class="sxs-lookup"><span data-stu-id="36833-145">Field 2 specifies the source location of the file.</span></span> <span data-ttu-id="36833-146">L’opération de déplacement de fichier srdelayed ne prend pas en charge le déplacement d’un dossier.</span><span class="sxs-lookup"><span data-stu-id="36833-146">The Srdelayed move file operation does not support moving a folder.</span></span> <span data-ttu-id="36833-147">Un fichier doit être spécifié dans ce champ.</span><span class="sxs-lookup"><span data-stu-id="36833-147">A file must be specified in this field.</span></span> <span data-ttu-id="36833-148">La valeur de ce champ est le chemin d’accès complet du fichier ajouté à « \\ \\ ?? \\ », sauf si le chemin d’accès contient un identificateur global unique (Guid) qui utilise « \\ \\ ? \\ » comme préfixe.</span><span class="sxs-lookup"><span data-stu-id="36833-148">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="36833-149">Supprimez « \\ \\ ? \\ » avant d’ajouter à « \\ \\ ?? \\ ».</span><span class="sxs-lookup"><span data-stu-id="36833-149">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="36833-150">Le champ 3 spécifie la destination du fichier.</span><span class="sxs-lookup"><span data-stu-id="36833-150">Field 3 specifies the destination of the file.</span></span> <span data-ttu-id="36833-151">L’opération de déplacement de fichier fonctionne uniquement dans un volume.</span><span class="sxs-lookup"><span data-stu-id="36833-151">The move file operation works only within a volume.</span></span> <span data-ttu-id="36833-152">La source et la destination doivent se trouver sur le même volume.</span><span class="sxs-lookup"><span data-stu-id="36833-152">The source and destination must be on the same volume.</span></span> <span data-ttu-id="36833-153">La valeur de ce champ est le chemin d’accès complet du fichier ajouté à « \\ \\ ?? \\ », sauf si le chemin d’accès contient un identificateur global unique (Guid) qui utilise « \\ \\ ? \\ » comme préfixe.</span><span class="sxs-lookup"><span data-stu-id="36833-153">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="36833-154">Supprimez « \\ \\ ? \\ » avant d’ajouter à « \\ \\ ?? \\ ».</span><span class="sxs-lookup"><span data-stu-id="36833-154">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="36833-155">Le champ 4 reçoit les informations d’état de srdelayed.</span><span class="sxs-lookup"><span data-stu-id="36833-155">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="36833-156">La valeur de ce champ doit être définie sur L "NotExecuted" pour un nouvel enregistrement.</span><span class="sxs-lookup"><span data-stu-id="36833-156">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="36833-157">L’exemple suivant référence le fichier par chemin d’accès de lecteur.</span><span class="sxs-lookup"><span data-stu-id="36833-157">The following example references the file by drive path.</span></span> <span data-ttu-id="36833-158">Si le chemin d’accès et le nom de la source sont C : \\ Stage \\a.dll, cet enregistrement demande que srdelayed le déplace vers C : \\ temp \\a.dll.</span><span class="sxs-lookup"><span data-stu-id="36833-158">If the path and name of the source is C:\\Stage\\a.dll, this record requests that Srdelayed move it to C:\\temp\\a.dll.</span></span>

<span data-ttu-id="36833-159">MoveFile \\ \\ ?? \\ C : \\ étape \\a.dll \\ \\ ?? \\ C : \\ temp \\a.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="36833-159">MoveFile \\\\??\\C:\\Stage\\a.dll \\\\??\\C:\\temp\\a.dll NotExecuted</span></span>  


<span data-ttu-id="36833-160">L’exemple suivant fait référence au fichier par le chemin d’accès du GUID de volume.</span><span class="sxs-lookup"><span data-stu-id="36833-160">The following example references the file by volume GUID path.</span></span> <span data-ttu-id="36833-161">Si le chemin d’accès et le nom de la source sont \\ \\ ? \\ Le volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ Stage \\a.dll, ces demandes d’enregistrement que srdelayed le déplacer vers \\ \\ ? \\a.dll du volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ temp \\</span><span class="sxs-lookup"><span data-stu-id="36833-161">If the path and name of the source is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\Stage\\a.dll, this record requests that Srdelayed move it to \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\a.dll</span></span>

 <span data-ttu-id="36833-162">MoveFile \\ \\ ?? \\ Le volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ Stage \\a.dll \\ \\ ?? \\ Volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ temp \\a.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="36833-162">MoveFile \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\Stage\\a.dll \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\a.dll NotExecuted</span></span>  


## <a name="format-for-a-delete-file-record"></a><span data-ttu-id="36833-163">Format pour un enregistrement de fichier de suppression</span><span class="sxs-lookup"><span data-stu-id="36833-163">Format for a Delete File Record</span></span>

<span data-ttu-id="36833-164">Le champ 1 identifie cela comme une demande de suppression d’un fichier.</span><span class="sxs-lookup"><span data-stu-id="36833-164">Field 1 identifies this as a request to delete a file.</span></span> <span data-ttu-id="36833-165">La valeur de ce champ est toujours L "DeleteFile" et respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="36833-165">The value in this field is always L"DeleteFile" and is case sensitive.</span></span>

<span data-ttu-id="36833-166">Le champ 2 n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="36833-166">Field 2 is unused.</span></span> <span data-ttu-id="36833-167">La valeur de ce champ doit être définie sur L "non utilisé".</span><span class="sxs-lookup"><span data-stu-id="36833-167">The value in this field should be set to L"Unused".</span></span>

<span data-ttu-id="36833-168">Le champ 3 spécifie le fichier à supprimer.</span><span class="sxs-lookup"><span data-stu-id="36833-168">Field 3 specifies the file to be removed.</span></span> <span data-ttu-id="36833-169">Un dossier doit être vide pour pouvoir être supprimé.</span><span class="sxs-lookup"><span data-stu-id="36833-169">A folder must be empty to be removed.</span></span> <span data-ttu-id="36833-170">Utilisez supprimer les opérations de fichier pour supprimer tous les fichiers du dossier avant de supprimer le dossier.</span><span class="sxs-lookup"><span data-stu-id="36833-170">Use delete file operations to remove all files in the folder before removing the folder.</span></span> <span data-ttu-id="36833-171">La valeur de ce champ est le chemin d’accès complet du fichier ajouté à « \\ \\ ?? \\ », sauf si le chemin d’accès contient un identificateur global unique (Guid) qui utilise « \\ \\ ? \\ » comme préfixe.</span><span class="sxs-lookup"><span data-stu-id="36833-171">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="36833-172">Supprimez « \\ \\ ? \\ » avant d’ajouter à « \\ \\ ?? \\ ».</span><span class="sxs-lookup"><span data-stu-id="36833-172">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="36833-173">Le champ 4 reçoit les informations d’état de srdelayed.</span><span class="sxs-lookup"><span data-stu-id="36833-173">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="36833-174">La valeur de ce champ doit être définie sur L "NotExecuted" pour un nouvel enregistrement.</span><span class="sxs-lookup"><span data-stu-id="36833-174">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="36833-175">L’exemple suivant référence le fichier par chemin d’accès de lecteur.</span><span class="sxs-lookup"><span data-stu-id="36833-175">The following example references the file by drive path.</span></span> <span data-ttu-id="36833-176">Si le chemin d’accès et le nom sont C : \\ temp \\b.dll, cet enregistrement demande que srdelayed supprime le fichier.</span><span class="sxs-lookup"><span data-stu-id="36833-176">If the path and name is C:\\temp\\b.dll, this record requests that Srdelayed delete the file.</span></span>

<span data-ttu-id="36833-177">DeleteFile inutilisé \\ \\ ?? \\ C : \\ temp \\b.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="36833-177">DeleteFile Unused \\\\??\\C:\\temp\\b.dll NotExecuted</span></span>  


<span data-ttu-id="36833-178">L’exemple suivant fait référence au fichier par GUID de volume.</span><span class="sxs-lookup"><span data-stu-id="36833-178">The following example references the file by volume GUID.</span></span> <span data-ttu-id="36833-179">Si le chemin d’accès et le nom sont \\ \\ ? \\ Volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ temp \\b.dll, cet enregistrement demande que srdelayed supprime le fichier.</span><span class="sxs-lookup"><span data-stu-id="36833-179">If the path and name is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\b.dll, this record requests that Srdelayed remove the file.</span></span>

<span data-ttu-id="36833-180">DeleteFile inutilisé \\ \\ ?? \\ Volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ temp \\b.dll\\ NotExecuted</span><span class="sxs-lookup"><span data-stu-id="36833-180">DeleteFile Unused \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\b.dll\\ NotExecuted</span></span>  


## <a name="format-for-set-short-name-record"></a><span data-ttu-id="36833-181">Format de l’enregistrement de Short-Name défini</span><span class="sxs-lookup"><span data-stu-id="36833-181">Format for Set Short-Name Record</span></span>

<span data-ttu-id="36833-182">Le champ 1 identifie cela comme une demande de définition du nom abrégé d’un fichier.</span><span class="sxs-lookup"><span data-stu-id="36833-182">Field 1 identifies this as a request to set a file's short name.</span></span> <span data-ttu-id="36833-183">La valeur de ce champ est toujours L « SetFileShortName » et respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="36833-183">The value in this field is always L"SetFileShortName" and is case sensitive.</span></span>

<span data-ttu-id="36833-184">Le champ 2 spécifie le nom abrégé.</span><span class="sxs-lookup"><span data-stu-id="36833-184">Field 2 specifies the short name.</span></span>

<span data-ttu-id="36833-185">Champ champ 3 spécifie le chemin d’accès et le nom long pour recevoir le nom abrégé.</span><span class="sxs-lookup"><span data-stu-id="36833-185">Field 3 field specifies the path and long name to receive the short name.</span></span> <span data-ttu-id="36833-186">La valeur de ce champ est le chemin d’accès et le nom long du fichier ajouté à « \\ \\ ?? \\ », sauf si le chemin d’accès contient un identificateur global unique (Guid) qui utilise « \\ \\ ? \\ » comme préfixe.</span><span class="sxs-lookup"><span data-stu-id="36833-186">The value for this field is the path and long name of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="36833-187">Supprimez « \\ \\ ? \\ » avant d’ajouter à « \\ \\ ?? \\ ».</span><span class="sxs-lookup"><span data-stu-id="36833-187">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="36833-188">Le champ 4 reçoit les informations d’état de srdelayed.</span><span class="sxs-lookup"><span data-stu-id="36833-188">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="36833-189">La valeur de ce champ doit être définie sur L "NotExecuted" pour un nouvel enregistrement.</span><span class="sxs-lookup"><span data-stu-id="36833-189">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="36833-190">L’exemple suivant référence le fichier par chemin d’accès de lecteur.</span><span class="sxs-lookup"><span data-stu-id="36833-190">The following example references the file by drive path.</span></span> <span data-ttu-id="36833-191">Si le chemin d’accès et le nom du fichier sont C : \\ temp \\ShortFileName.dll, cet enregistrement demande que le fichier reçoive un nom abrégé, shortn ~1.dll.</span><span class="sxs-lookup"><span data-stu-id="36833-191">If the path and name of the file is C:\\temp\\ShortFileName.dll, this record requests that the file receive a short name, ShortN~1.dll.</span></span>

<span data-ttu-id="36833-192">SetFileShortName shortn ~1.dll \\ \\ ?? \\ C : \\ temp \\ShortFileName.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="36833-192">SetFileShortName ShortN~1.dll \\\\??\\C:\\temp\\ShortFileName.dll NotExecuted</span></span>  


<span data-ttu-id="36833-193">L’exemple suivant fait référence au fichier par GUID de volume.</span><span class="sxs-lookup"><span data-stu-id="36833-193">The following example references the file by volume GUID.</span></span> <span data-ttu-id="36833-194">Si le chemin d’accès et le nom du fichier sont \\ \\ ? \\ Volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ temp \\ShortFileName.dll\\ , cet enregistrement demande que le fichier reçoive un nom abrégé, shortn ~1.dll.</span><span class="sxs-lookup"><span data-stu-id="36833-194">If the path and name of the file is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\ShortFileName.dll\\, this record requests that the file receive a short name, ShortN~1.dll.</span></span>

<span data-ttu-id="36833-195">SetFileShortName shortn ~1.dll \\ \\ ?? \\ Volume {26a21bda-A627-11D7-9931-806e6f6e6963} \\ temp \\ShortFileName.dll\\ NotExecuted</span><span class="sxs-lookup"><span data-stu-id="36833-195">SetFileShortName ShortN~1.dll \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\ShortFileName.dll\\ NotExecuted</span></span>  


## <a name="srdelayed-operations-status"></a><span data-ttu-id="36833-196">État des opérations srdelayed</span><span class="sxs-lookup"><span data-stu-id="36833-196">Srdelayed Operations Status</span></span>

<span data-ttu-id="36833-197">Srdelayed écrit la chaîne L "SC =*xxxxxxx*" dans le quatrième champ de chaque enregistrement du fichier texte, où *xxxxxxx* est un hexadécimal qui indique l’état de l’opération demandée.</span><span class="sxs-lookup"><span data-stu-id="36833-197">Srdelayed writes the string L"SC=*xxxxxxx*" into the fourth field of each record of the text file, where *xxxxxxx* is a hexadecimal that indicates the status of the requested operation.</span></span> <span data-ttu-id="36833-198">La valeur zéro indique que l’opération a réussi.</span><span class="sxs-lookup"><span data-stu-id="36833-198">A value of zero indicates the operation succeeded.</span></span>

<span data-ttu-id="36833-199">Srdelayed crée une clé de Registre nommée **SystemRestore** sous **HKEY \_ local \_ machine** \\ **Software** \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** pour consigner le résultat de l’opération de restauration entière.</span><span class="sxs-lookup"><span data-stu-id="36833-199">Srdelayed creates a registry key named **SystemRestore** under **HKEY\_LOCAL\_MACHINE**\\**Software**\\**Microsoft**\\**Windows NT**\\**CurrentVersion** to log the outcome of the entire restore operation.</span></span> <span data-ttu-id="36833-200">Si srdelayed effectue toutes les opérations demandées avec succès, le nom RestoreStatusResult est écrit sous cette clé avec une valeur égale à zéro.</span><span class="sxs-lookup"><span data-stu-id="36833-200">If Srdelayed performs all the requested operations with success, the name RestoreStatusResult is written under this key with a zero value.</span></span> <span data-ttu-id="36833-201">Si srdelayed n’est pas en mesure d’effectuer l’une des opérations demandées, les noms RestoreStatusResult et RestoreStatusDetails sont écrits sous cette clé avec des valeurs autres que zéro.</span><span class="sxs-lookup"><span data-stu-id="36833-201">If Srdelayed is unable to perform any of the requested operations, the names RestoreStatusResult and RestoreStatusDetails are written under this key with nonzero values.</span></span> <span data-ttu-id="36833-202">Le nom RestoreStatusDetails est écrit sous cette clé uniquement si srdelayed n’est pas en mesure d’effectuer les opérations demandées.</span><span class="sxs-lookup"><span data-stu-id="36833-202">The name RestoreStatusDetails is written under this key only if Srdelayed is unable to perform any requested operations.</span></span> <span data-ttu-id="36833-203">Si une opération de définition du nom abrégé d’un fichier échoue, srdelayed continue à l’opération suivante.</span><span class="sxs-lookup"><span data-stu-id="36833-203">If an operation to set the short name of a file is unsuccessful, Srdelayed continues to the next operation.</span></span> <span data-ttu-id="36833-204">Srdelayed considère les opérations de déplacement de fichier et de suppression de fichier comme critiques et ne continue pas en cas d’échec d’une opération de déplacement ou de suppression.</span><span class="sxs-lookup"><span data-stu-id="36833-204">Srdelayed considers the move file and delete file operations to be critical and does not continue if a move or delete operation is unsuccessful.</span></span>

 

 