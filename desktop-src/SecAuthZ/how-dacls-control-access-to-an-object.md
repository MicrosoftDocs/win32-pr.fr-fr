---
description: Quand un thread tente d’accéder à un objet sécurisable, le système accorde ou refuse l’accès.
ms.assetid: dc98b23e-ce42-4d4a-a285-c0b7b5e2a478
title: Fonctionnement de AccessCheck
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 730cc8f63e7d69bf4cb38344f5eda60861d08a9f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104555014"
---
# <a name="how-accesscheck-works"></a><span data-ttu-id="7d7f3-103">Fonctionnement de AccessCheck</span><span class="sxs-lookup"><span data-stu-id="7d7f3-103">How AccessCheck Works</span></span>

<span data-ttu-id="7d7f3-104">Quand un thread tente d’accéder à un objet sécurisable, le système accorde ou refuse l’accès.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-104">When a thread tries to access a securable object, the system either grants or denies access.</span></span> <span data-ttu-id="7d7f3-105">Si l’objet n’a pas de [*liste de contrôle d’accès discrétionnaire (DACL, Discretionary Access Control List*](/windows/desktop/SecGloss/d-gly) ), le système accorde l’accès ; dans le cas contraire, le système recherche les [entrées de Access Control](access-control-entries.md) (ACE) dans la liste DACL de l’objet qui s’appliquent au thread.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-105">If the object does not have a [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL), the system grants access; otherwise, the system looks for [Access Control Entries](access-control-entries.md) (ACEs) in the object's DACL that apply to the thread.</span></span> <span data-ttu-id="7d7f3-106">Chaque entrée du contrôle d’accès dans la liste DACL de l’objet spécifie les droits d’accès autorisés ou refusés pour un [tiers de confiance](trustees.md), qui peut être un compte d’utilisateur, un compte de groupe ou une [*ouverture de session*](/windows/desktop/SecGloss/l-gly).</span><span class="sxs-lookup"><span data-stu-id="7d7f3-106">Each ACE in the object's DACL specifies the access rights allowed or denied for a [trustee](trustees.md), which can be a user account, a group account, or a [*logon session*](/windows/desktop/SecGloss/l-gly).</span></span>

## <a name="dacls"></a><span data-ttu-id="7d7f3-107">DACL</span><span class="sxs-lookup"><span data-stu-id="7d7f3-107">DACLs</span></span>

<span data-ttu-id="7d7f3-108">Le système compare le tiers de confiance de chaque ACE aux tiers de confiance identifiés dans le [jeton d’accès](access-tokens.md)du thread.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-108">The system compares the trustee in each ACE to the trustees identified in the thread's [access token](access-tokens.md).</span></span> <span data-ttu-id="7d7f3-109">Un jeton d’accès contient des [*identificateurs de sécurité*](/windows/desktop/SecGloss/s-gly) (SID) qui identifient l’utilisateur et les comptes de groupe auxquels l’utilisateur appartient.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-109">An access token contains [*security identifiers*](/windows/desktop/SecGloss/s-gly) (SIDs) that identify the user and the group accounts to which the user belongs.</span></span> <span data-ttu-id="7d7f3-110">Un jeton contient également un [*SID d’ouverture*](/windows/desktop/SecGloss/l-gly) de session qui identifie la session de connexion en cours.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-110">A token also contains a [*logon SID*](/windows/desktop/SecGloss/l-gly) that identifies the current logon session.</span></span> <span data-ttu-id="7d7f3-111">Lors d’une vérification d’accès, le système ignore les SID de groupe qui ne sont pas activés.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-111">During an access check, the system ignores group SIDs that are not enabled.</span></span> <span data-ttu-id="7d7f3-112">Pour plus d’informations sur les SID activé, désactivé et refus seul, consultez [attributs SID dans un jeton d’accès](sid-attributes-in-an-access-token.md).</span><span class="sxs-lookup"><span data-stu-id="7d7f3-112">For more information on enabled, disabled, and deny-only SIDs, see [SID Attributes in an Access Token](sid-attributes-in-an-access-token.md).</span></span>

<span data-ttu-id="7d7f3-113">En règle générale, le système utilise le [*jeton d’accès principal*](/windows/desktop/SecGloss/p-gly) du thread qui demande l’accès.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-113">Typically, the system uses the [*primary access token*](/windows/desktop/SecGloss/p-gly) of the thread that is requesting access.</span></span> <span data-ttu-id="7d7f3-114">Toutefois, si le thread emprunte l’identité d’un autre utilisateur, le système utilise le [*jeton d’emprunt d’identité*](/windows/desktop/SecGloss/i-gly)du thread.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-114">However, if the thread is impersonating another user, the system uses the thread's [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>

<span data-ttu-id="7d7f3-115">Le système examine chaque entrée de contrôle d’accès dans l’ordre jusqu’à ce que l’un des événements suivants se produise :</span><span class="sxs-lookup"><span data-stu-id="7d7f3-115">The system examines each ACE in sequence until one of the following events occurs:</span></span>

-   <span data-ttu-id="7d7f3-116">Une entrée du contrôle d’accès refusé explicitement refuse l’un des [droits d’accès](access-rights-and-access-masks.md) demandés à l’un des tiers de confiance figurant dans le jeton d’accès du thread.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-116">An access-denied ACE explicitly denies any of the requested [access rights](access-rights-and-access-masks.md) to one of the trustees listed in the thread's access token.</span></span>
-   <span data-ttu-id="7d7f3-117">Une ou plusieurs ACE access-allowed pour les tiers de confiance figurant dans le jeton d’accès du thread accordent explicitement tous les droits d’accès demandés.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-117">One or more access-allowed ACEs for trustees listed in the thread's access token explicitly grant all the requested access rights.</span></span>
-   <span data-ttu-id="7d7f3-118">Toutes les entrées du contrôle d’accès ont été vérifiées et il existe toujours au moins un droit d’accès demandé qui n’a pas été explicitement autorisé. dans ce cas, l’accès est refusé implicitement.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-118">All ACEs have been checked and there is still at least one requested access right that has not been explicitly allowed, in which case, access is implicitly denied.</span></span>

<span data-ttu-id="7d7f3-119">L’illustration suivante montre comment la liste DACL d’un objet peut autoriser l’accès à un thread tout en refusant l’accès à un autre.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-119">The following illustration shows how an object's DACL can allow access to one thread while denying access to another.</span></span>

![liste DACL qui accorde différents droits d’accès à différents threads](images/accctrl1.png)

<span data-ttu-id="7d7f3-121">Pour le thread A, le système lit ACE 1 et refuse immédiatement l’accès, car l’ACE avec refus d’accès s’applique à l’utilisateur dans le jeton d’accès du thread.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-121">For Thread A, the system reads ACE 1 and immediately denies access because the access-denied ACE applies to the user in the thread's access token.</span></span> <span data-ttu-id="7d7f3-122">Dans ce cas, le système ne vérifie pas les entrées de contrôle d’intégrité 2 et 3.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-122">In this case, the system does not check ACEs 2 and 3.</span></span> <span data-ttu-id="7d7f3-123">Pour le thread B, ACE 1 ne s’applique pas, donc le système passe à ACE 2, qui autorise l’accès en écriture et ACE 3 qui autorise l’accès en lecture et en exécution.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-123">For Thread B, ACE 1 does not apply, so the system proceeds to ACE 2, which allows write access, and ACE 3 which allows read and execute access.</span></span>

<span data-ttu-id="7d7f3-124">Étant donné que le système arrête de vérifier les entrées de contrôle d’accès lorsque l’accès demandé est accordé ou refusé de manière explicite, l’ordre des ACE dans une liste DACL est important.</span><span class="sxs-lookup"><span data-stu-id="7d7f3-124">Because the system stops checking ACEs when the requested access is explicitly granted or denied, the order of ACEs in a DACL is important.</span></span> <span data-ttu-id="7d7f3-125">Notez que si l’ordre des entrées de contrôle d’accès est différent dans l’exemple, le système peut avoir accordé l’accès au thread A. Pour les objets système, le système d’exploitation définit un ordre par défaut [des entrées de commande dans une liste DACL](order-of-aces-in-a-dacl.md).</span><span class="sxs-lookup"><span data-stu-id="7d7f3-125">Note that if the ACE order were different in the example, the system might have granted access to Thread A. For system objects, the operating system defines a preferred [order of ACEs in a DACL](order-of-aces-in-a-dacl.md).</span></span>

 

 
