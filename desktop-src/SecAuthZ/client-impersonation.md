---
description: L’emprunt d’identité est la capacité d’un thread à s’exécuter en utilisant des informations de sécurité différentes de celles du processus propriétaire du thread.
ms.assetid: a3f74372-bdc9-43eb-b72f-7d00a43e78a8
title: Emprunt d’identité du client (autorisation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32e72abb17c9f5f6271f55fbfc77da4f6b93ca2d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103951418"
---
# <a name="client-impersonation-authorization"></a><span data-ttu-id="3198f-103">Emprunt d’identité du client (autorisation)</span><span class="sxs-lookup"><span data-stu-id="3198f-103">Client Impersonation (Authorization)</span></span>

<span data-ttu-id="3198f-104">L' [*emprunt d’identité*](/windows/desktop/SecGloss/i-gly) est la capacité d’un thread à s’exécuter en utilisant des informations de sécurité différentes de celles du processus propriétaire du thread.</span><span class="sxs-lookup"><span data-stu-id="3198f-104">[*Impersonation*](/windows/desktop/SecGloss/i-gly) is the ability of a thread to execute using different security information than the process that owns the thread.</span></span> <span data-ttu-id="3198f-105">En règle générale, un thread dans une application serveur emprunte l’identité d’un client.</span><span class="sxs-lookup"><span data-stu-id="3198f-105">Typically, a thread in a server application impersonates a client.</span></span> <span data-ttu-id="3198f-106">Cela permet au thread de serveur d’agir au nom de ce client pour accéder aux objets sur le serveur ou valider l’accès aux propres objets du client.</span><span class="sxs-lookup"><span data-stu-id="3198f-106">This allows the server thread to act on behalf of that client to access objects on the server or validate access to the client's own objects.</span></span>

<span data-ttu-id="3198f-107">L’API Microsoft Windows fournit les fonctions suivantes pour commencer un emprunt d’identité :</span><span class="sxs-lookup"><span data-stu-id="3198f-107">The Microsoft Windows API provides the following functions to begin an impersonation:</span></span>

-   <span data-ttu-id="3198f-108">Une application de serveur DDE peut appeler la fonction [**DdeImpersonateClient**](/windows/win32/api/ddeml/nf-ddeml-ddeimpersonateclient) pour emprunter l’identité d’un client.</span><span class="sxs-lookup"><span data-stu-id="3198f-108">A DDE server application can call the [**DdeImpersonateClient**](/windows/win32/api/ddeml/nf-ddeml-ddeimpersonateclient) function to impersonate a client.</span></span>
-   <span data-ttu-id="3198f-109">Un serveur de canaux nommés peut appeler la fonction [**ImpersonateNamedPipeClient**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-impersonatenamedpipeclient) .</span><span class="sxs-lookup"><span data-stu-id="3198f-109">A named-pipe server can call the [**ImpersonateNamedPipeClient**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-impersonatenamedpipeclient) function.</span></span>
-   <span data-ttu-id="3198f-110">Vous pouvez appeler la fonction [**ImpersonateLoggedOnUser**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) pour emprunter l’identité du contexte de sécurité du [*jeton d’accès*](/windows/desktop/SecGloss/a-gly)d’un utilisateur connecté.</span><span class="sxs-lookup"><span data-stu-id="3198f-110">You can call the [**ImpersonateLoggedOnUser**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) function to impersonate the security context of a logged-on user's [*access token*](/windows/desktop/SecGloss/a-gly).</span></span>
-   <span data-ttu-id="3198f-111">La fonction [**ImpersonateSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateself) permet à un thread de générer une copie de son propre jeton d’accès.</span><span class="sxs-lookup"><span data-stu-id="3198f-111">The [**ImpersonateSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateself) function enables a thread to generate a copy of its own access token.</span></span> <span data-ttu-id="3198f-112">Cela est utile quand une application doit modifier le contexte de sécurité d’un thread unique.</span><span class="sxs-lookup"><span data-stu-id="3198f-112">This is useful when an application needs to change the security context of a single thread.</span></span> <span data-ttu-id="3198f-113">Par exemple, un seul thread d’un processus doit parfois activer un [*privilège*](/windows/desktop/SecGloss/p-gly).</span><span class="sxs-lookup"><span data-stu-id="3198f-113">For example, sometimes only one thread of a process needs to enable a [*privilege*](/windows/desktop/SecGloss/p-gly).</span></span>
-   <span data-ttu-id="3198f-114">Vous pouvez appeler la fonction [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken) pour faire en sorte que le thread cible s’exécute dans le contexte de sécurité d’un [*jeton d’emprunt d’identité*](/windows/desktop/SecGloss/i-gly)spécifié.</span><span class="sxs-lookup"><span data-stu-id="3198f-114">You can call the [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken) function to cause the target thread to run in the security context of a specified [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>
-   <span data-ttu-id="3198f-115">Une application serveur d’appel de procédure distante (RPC) Microsoft peut appeler la fonction [**RpcImpersonateClient**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcimpersonateclient) pour emprunter l’identité d’un client.</span><span class="sxs-lookup"><span data-stu-id="3198f-115">A Microsoft Remote Procedure Call (RPC) server application can call the [**RpcImpersonateClient**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcimpersonateclient) function to impersonate a client.</span></span>
-   <span data-ttu-id="3198f-116">Un [*package de sécurité*](/windows/desktop/SecGloss/s-gly) ou un serveur d’applications peut appeler la fonction [**ImpersonateSecurityContext**](/windows/desktop/api/sspi/nf-sspi-impersonatesecuritycontext) pour emprunter l’identité d’un client.</span><span class="sxs-lookup"><span data-stu-id="3198f-116">A [*security package*](/windows/desktop/SecGloss/s-gly) or application server can call the [**ImpersonateSecurityContext**](/windows/desktop/api/sspi/nf-sspi-impersonatesecuritycontext) function to impersonate a client.</span></span>

<span data-ttu-id="3198f-117">Pour la plupart de ces emprunts d’identité, le thread d’emprunt d’identité peut revenir à son propre contexte de sécurité en appelant la fonction [**RevertToSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-reverttoself) .</span><span class="sxs-lookup"><span data-stu-id="3198f-117">For most of these impersonations, the impersonating thread can revert to its own security context by calling the [**RevertToSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-reverttoself) function.</span></span> <span data-ttu-id="3198f-118">L’exception est l’emprunt d’identité RPC, dans lequel l’application serveur RPC appelle [**RpcRevertToSelf**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoself) ou [**RpcRevertToSelfEx**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoselfex) pour rétablir son propre contexte de sécurité.</span><span class="sxs-lookup"><span data-stu-id="3198f-118">The exception is the RPC impersonation, in which the RPC server application calls [**RpcRevertToSelf**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoself) or [**RpcRevertToSelfEx**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoselfex) to revert to its own security context.</span></span>

 

 
