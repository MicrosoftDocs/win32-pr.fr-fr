---
description: Windows prend en charge un ensemble de fonctions qui créent une liste de contrôle d’accès (ACL) ou modifient les entrées de contrôle d’accès (ACE) dans une ACL existante.
ms.assetid: 71301aab-1040-4f61-855f-2b891c8b6077
title: Création ou modification d’une liste de contrôle d’accès
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a0deb72bcd1a1c805dd8524027601952dda0eac1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103863246"
---
# <a name="creating-or-modifying-an-acl"></a><span data-ttu-id="7f78f-103">Création ou modification d’une liste de contrôle d’accès</span><span class="sxs-lookup"><span data-stu-id="7f78f-103">Creating or Modifying an ACL</span></span>

<span data-ttu-id="7f78f-104">Windows prend en charge un ensemble de fonctions qui créent une [*liste de contrôle d’accès*](/windows/desktop/SecGloss/a-gly) (ACL) ou modifient les entrées de contrôle d' [*accès*](/windows/desktop/SecGloss/a-gly) (ACE) dans une ACL existante.</span><span class="sxs-lookup"><span data-stu-id="7f78f-104">Windows supports a set of functions that create an [*access control list*](/windows/desktop/SecGloss/a-gly) (ACL) or modify the [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) in an existing ACL.</span></span>

<span data-ttu-id="7f78f-105">La fonction [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) crée une liste de contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="7f78f-105">The [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) function creates a new ACL.</span></span> <span data-ttu-id="7f78f-106">**SetEntriesInAcl** peut spécifier un ensemble complet d’ACE pour la liste de contrôle d’accès (ACL), ou il peut fusionner une ou plusieurs nouvelles entrées de contrôle d’accès avec les ACE d’une liste ACL existante.</span><span class="sxs-lookup"><span data-stu-id="7f78f-106">**SetEntriesInAcl** can specify a completely new set of ACEs for the ACL, or it can merge one or more new ACEs with the ACEs of an existing ACL.</span></span> <span data-ttu-id="7f78f-107">La fonction **SetEntriesInAcl** utilise un tableau de structures d' [**\_ accès explicites**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) pour spécifier les informations relatives aux nouvelles entrées du nouveau.</span><span class="sxs-lookup"><span data-stu-id="7f78f-107">The **SetEntriesInAcl** function uses an array of [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structures to specify the information for the new ACEs.</span></span> <span data-ttu-id="7f78f-108">Chaque structure d' **\_ accès explicite** contient des informations qui décrivent une seule entrée de contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="7f78f-108">Each **EXPLICIT\_ACCESS** structure contains information that describes a single ACE.</span></span> <span data-ttu-id="7f78f-109">Ces informations incluent les droits d’accès, le type d’entrée du contrôle d’accès, les indicateurs qui contrôlent l’héritage ACE et une structure de [**tiers de confiance**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) qui identifie le tiers de confiance.</span><span class="sxs-lookup"><span data-stu-id="7f78f-109">This information includes the access rights, the type of ACE, the flags that control ACE inheritance, and a [**TRUSTEE**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) structure that identifies the trustee.</span></span>

<span data-ttu-id="7f78f-110">**Pour ajouter une nouvelle entrée du contrôle d’accès à une liste ACL existante**</span><span class="sxs-lookup"><span data-stu-id="7f78f-110">**To add a new ACE to an existing ACL**</span></span>

1.  <span data-ttu-id="7f78f-111">Utilisez la fonction [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) ou [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) pour récupérer la liste DACL ou SACL existante à partir du [*descripteur de sécurité*](/windows/desktop/SecGloss/s-gly)d’un objet.</span><span class="sxs-lookup"><span data-stu-id="7f78f-111">Use the [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) or [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) function to get the existing DACL or SACL from an object's [*security descriptor*](/windows/desktop/SecGloss/s-gly).</span></span>
2.  <span data-ttu-id="7f78f-112">Pour chaque nouvelle entrée du contrôle d’accès, appelez la fonction [**BuildExplicitAccessWithName**](/windows/desktop/api/Aclapi/nf-aclapi-buildexplicitaccesswithnamea) pour remplir une structure d' [**\_ accès explicite**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) avec les informations qui décrivent l’entrée du contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="7f78f-112">For each new ACE, call the [**BuildExplicitAccessWithName**](/windows/desktop/api/Aclapi/nf-aclapi-buildexplicitaccesswithnamea) function to fill an [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structure with the information that describes the ACE.</span></span>
3.  <span data-ttu-id="7f78f-113">Appelez [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla), en spécifiant l’ACL existante et un tableau de structures d' [**\_ accès explicites**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) pour les nouvelles entrées du contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="7f78f-113">Call [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla), specifying the existing ACL and an array of [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structures for the new ACEs.</span></span> <span data-ttu-id="7f78f-114">La fonction **SetEntriesInAcl** alloue et initialise la liste de contrôle d’accès et ses ACE.</span><span class="sxs-lookup"><span data-stu-id="7f78f-114">The **SetEntriesInAcl** function allocates and initializes the ACL and its ACEs.</span></span>
4.  <span data-ttu-id="7f78f-115">Appelez la fonction [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) ou [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) pour attacher la nouvelle liste de contrôle d’accès au descripteur de sécurité de l’objet.</span><span class="sxs-lookup"><span data-stu-id="7f78f-115">Call the [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) or [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) function to attach the new ACL to the object's security descriptor.</span></span>

<span data-ttu-id="7f78f-116">Si l’appelant spécifie une liste de contrôle d’accès (ACL) existante, [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) fusionne les nouvelles informations ACE avec les ACE existantes dans la liste de contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="7f78f-116">If the caller specifies an existing ACL, [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) merges the new ACE information with the existing ACEs in the ACL.</span></span> <span data-ttu-id="7f78f-117">Prenons le cas, par exemple, dans lequel la liste de contrôle d’accès existante accorde l’accès à un tiers de confiance spécifié et une structure d' [**\_ accès explicite**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) refuse l’accès au même tiers de confiance.</span><span class="sxs-lookup"><span data-stu-id="7f78f-117">Consider the case, for example, in which the existing ACL grants access to a specified trustee and an [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structure denies access to the same trustee.</span></span> <span data-ttu-id="7f78f-118">Dans ce cas, **SetEntriesInAcl** ajoute une nouvelle entrée de contrôle d’accès refusée pour le tiers de confiance, supprime ou modifie l’ACE access-allowed pour le tiers de confiance.</span><span class="sxs-lookup"><span data-stu-id="7f78f-118">In this case, **SetEntriesInAcl** adds a new access-denied ACE for the trustee and deletes or modifies the existing access-allowed ACE for the trustee.</span></span>

<span data-ttu-id="7f78f-119">Pour obtenir un exemple de code qui fusionne une nouvelle entrée du contrôle d’accès dans une liste ACL existante, consultez [modification des ACL d’un objet en C++](modifying-the-acls-of-an-object-in-c--.md).</span><span class="sxs-lookup"><span data-stu-id="7f78f-119">For sample code that merges a new ACE into an existing ACL, see [Modifying the ACLs of an Object in C++](modifying-the-acls-of-an-object-in-c--.md).</span></span>

 

 
