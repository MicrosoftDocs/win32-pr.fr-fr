---
description: Les fonctions SetNamedSecurityInfo et SetSecurityInfo prennent en charge la propagation automatique des entrées de contrôle d’accès (ACE) pouvant être héritées.
ms.assetid: 0aa49b9b-13e3-4ef9-921d-ea47a013e5a1
title: Propagation automatique des ACE pouvant être héritées
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8fab03c73a1c926468e46a0d0492e512dab42af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104211080"
---
# <a name="automatic-propagation-of-inheritable-aces"></a><span data-ttu-id="1cb74-103">Propagation automatique des ACE pouvant être héritées</span><span class="sxs-lookup"><span data-stu-id="1cb74-103">Automatic Propagation of Inheritable ACEs</span></span>

<span data-ttu-id="1cb74-104">Les fonctions [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) et [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) prennent en charge la propagation automatique des [*entrées de contrôle d’accès*](/windows/desktop/SecGloss/a-gly) (ACE) pouvant être héritées.</span><span class="sxs-lookup"><span data-stu-id="1cb74-104">The [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) and [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) functions support automatic propagation of inheritable [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs).</span></span> <span data-ttu-id="1cb74-105">Par exemple, si vous utilisez ces fonctions pour ajouter une entrée du contrôle d’accès (ACE) héritable à un répertoire dans un système de fichiers NTFS, le système applique l’ACE en fonction des [*listes de contrôle d’accès*](/windows/desktop/SecGloss/a-gly) (ACL) des sous-répertoires ou des fichiers existants.</span><span class="sxs-lookup"><span data-stu-id="1cb74-105">For example, if you use these functions to add an inheritable ACE to a directory in an NTFS, the system applies the ACE as appropriate to the [*access control lists*](/windows/desktop/SecGloss/a-gly) (ACLs) of any existing subdirectories or files.</span></span>

<span data-ttu-id="1cb74-106">Les ACE directement appliquées ont priorité sur les ACE héritées.</span><span class="sxs-lookup"><span data-stu-id="1cb74-106">Directly applied ACEs have precedence over inherited ACEs.</span></span> <span data-ttu-id="1cb74-107">Le système implémente cette priorité en plaçant les entrées de contrôle d’accès appliquées directement à l’avance dans une liste de contrôle d’accès discrétionnaire (DACL, [*Discretionary Access Control List*](/windows/desktop/SecGloss/d-gly) ).</span><span class="sxs-lookup"><span data-stu-id="1cb74-107">The system implements this precedence by placing directly applied ACEs ahead of inherited ACEs in a [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL).</span></span> <span data-ttu-id="1cb74-108">Quand vous appelez les fonctions [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) et [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) pour définir les informations de sécurité d’un objet, le système impose le modèle d’héritage actuel sur les listes de contrôle d’accès de tous les objets de la hiérarchie sous l’objet cible.</span><span class="sxs-lookup"><span data-stu-id="1cb74-108">When you call the [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) and [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) functions to set the security information of an object, the system imposes the current inheritance model on the ACLs of all objects in the hierarchy below the target object.</span></span> <span data-ttu-id="1cb74-109">Pour les objets qui ont été convertis dans le modèle d’héritage actuel, les bits de la \_ liste \_ \_ de contrôle d’accès discrétionnaire auto héritée et se \_ \_ \_ sont définis dans le champ de contrôle du [*descripteur de sécurité*](/windows/desktop/SecGloss/s-gly) de l’objet.</span><span class="sxs-lookup"><span data-stu-id="1cb74-109">For objects that have been converted to the current inheritance model, the SE\_DACL\_AUTO\_INHERITED and SE\_SACL\_AUTO\_INHERITED bits are set in the control field of the [*security descriptor*](/windows/desktop/SecGloss/s-gly) of the object.</span></span>

<span data-ttu-id="1cb74-110">Quand vous générez un nouveau descripteur de sécurité qui reflète le modèle d’héritage actuel, il est pris soin de ne pas modifier la sémantique du descripteur de sécurité.</span><span class="sxs-lookup"><span data-stu-id="1cb74-110">When you build a new security descriptor that reflects the current inheritance model, care is taken not to change the semantics of the security descriptor.</span></span> <span data-ttu-id="1cb74-111">Par conséquent, les ACE allow et Deny ne sont jamais déplacées les unes par rapport aux autres.</span><span class="sxs-lookup"><span data-stu-id="1cb74-111">As such, allow and deny ACEs are never moved in relation to one another.</span></span> <span data-ttu-id="1cb74-112">Si un tel mouvement est nécessaire (par exemple, pour placer toutes les entrées de contrôle d’accès non héritées au début d’une liste de contrôle d’accès), la liste de contrôle d’accès est marquée comme protégée pour empêcher la modification sémantique.</span><span class="sxs-lookup"><span data-stu-id="1cb74-112">If such movement is needed (for instance to place all noninherited ACEs at the front of an ACL), the ACL is marked as protected to prevent the semantic change.</span></span>

<span data-ttu-id="1cb74-113">Le système utilise les règles suivantes lors de la propagation des ACE héritées aux objets enfants :</span><span class="sxs-lookup"><span data-stu-id="1cb74-113">The system uses the following rules when propagating inherited ACEs to child objects:</span></span>

-   <span data-ttu-id="1cb74-114">Si un objet enfant sans DACL hérite d’un ACE, le résultat est un objet enfant avec une liste DACL qui contient uniquement l’entrée du contrôle d’accès hérité.</span><span class="sxs-lookup"><span data-stu-id="1cb74-114">If a child object with no DACL inherits an ACE, the result is a child object with a DACL that contains only the inherited ACE.</span></span>
-   <span data-ttu-id="1cb74-115">Si un objet enfant avec une liste DACL vide hérite d’un ACE, le résultat est un objet enfant avec une liste DACL qui contient uniquement l’entrée du contrôle d’accès héritée.</span><span class="sxs-lookup"><span data-stu-id="1cb74-115">If a child object with an empty DACL inherits an ACE, the result is a child object with a DACL that contains only the inherited ACE.</span></span>
-   <span data-ttu-id="1cb74-116">Si vous supprimez une entrée du contrôle d’accès héritée d’un objet parent, l’héritage automatique supprime toutes les copies de l’entrée du contrôle d’accès héritées par les objets enfants.</span><span class="sxs-lookup"><span data-stu-id="1cb74-116">If you remove an inheritable ACE from a parent object, automatic inheritance removes any copies of the ACE that were inherited by child objects.</span></span>
-   <span data-ttu-id="1cb74-117">Si l’héritage automatique entraîne la suppression de toutes les entrées de requête de la liste DACL d’un objet enfant, l’objet enfant a une DACL vide plutôt qu’aucune liste DACL.</span><span class="sxs-lookup"><span data-stu-id="1cb74-117">If automatic inheritance results in the removal of all ACEs from the DACL of a child object, the child object has an empty DACL rather than no DACL.</span></span>

<span data-ttu-id="1cb74-118">Ces règles peuvent entraîner le résultat inattendu de la conversion d’un objet sans DACL en objet avec une liste DACL vide.</span><span class="sxs-lookup"><span data-stu-id="1cb74-118">These rules can have the unexpected result of converting an object with no DACL to an object with an empty DACL.</span></span> <span data-ttu-id="1cb74-119">Un objet sans DACL autorise un accès complet, mais un objet avec une liste DACL vide n’autorise aucun accès.</span><span class="sxs-lookup"><span data-stu-id="1cb74-119">An object with no DACL allows full access, but an object with an empty DACL allows no access.</span></span> <span data-ttu-id="1cb74-120">En guise d’exemple de la façon dont ces règles peuvent créer une liste DACL vide, supposez que vous ajoutez une entrée de contrôle d’accès héritable à l’objet racine d’une arborescence d’objets.</span><span class="sxs-lookup"><span data-stu-id="1cb74-120">As an example of how these rules can create an empty DACL, suppose you add an inheritable ACE to the root object of a tree of objects.</span></span> <span data-ttu-id="1cb74-121">L’héritage automatique propage l’entrée du contrôle d’accès héritable à tous les objets de l’arborescence.</span><span class="sxs-lookup"><span data-stu-id="1cb74-121">Automatic inheritance propagates the inheritable ACE to all the objects in the tree.</span></span> <span data-ttu-id="1cb74-122">Les objets enfants démarrés sans DACL disposent désormais d’une liste DACL avec l’entrée du contrôle d’accès hérité.</span><span class="sxs-lookup"><span data-stu-id="1cb74-122">Child objects that started with no DACL now have a DACL with the inherited ACE.</span></span> <span data-ttu-id="1cb74-123">Si vous supprimez l’entrée du contrôle d’accès héritable de l’objet racine, le système propage automatiquement la modification aux objets enfants.</span><span class="sxs-lookup"><span data-stu-id="1cb74-123">If you remove the inheritable ACE from the root object, the system automatically propagates the change to the child objects.</span></span> <span data-ttu-id="1cb74-124">Les objets enfants qui ont démarré sans DACL (autorisant l’accès complet) disposent désormais d’une liste DACL vide (n’autorisant aucun accès).</span><span class="sxs-lookup"><span data-stu-id="1cb74-124">Child objects that started with no DACL (allowing full access) now have an empty DACL (allowing no access).</span></span>

<span data-ttu-id="1cb74-125">Pour vous assurer qu’un objet enfant sans DACL n’est pas affecté par les ACE pouvant être héritées, définissez l' \_ \_ indicateur de protection discrétionnaire se dans le descripteur de sécurité de l’objet.</span><span class="sxs-lookup"><span data-stu-id="1cb74-125">To ensure that a child object with no DACL is not affected by inheritable ACEs, set the SE\_DACL\_PROTECTED flag in the security descriptor of the object.</span></span>

<span data-ttu-id="1cb74-126">Pour plus d’informations sur la création correcte d’une liste DACL, consultez [création d’une liste DACL](/windows/desktop/SecBP/creating-a-dacl).</span><span class="sxs-lookup"><span data-stu-id="1cb74-126">For information about how to properly create a DACL, see [Creating a DACL](/windows/desktop/SecBP/creating-a-dacl).</span></span>

 

 
