---
description: Définition des propriétés de capture audio
ms.assetid: 81400072-91d7-4db4-86d3-d072663e691f
title: Définition des propriétés de capture audio
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 31afe61d4641906391934bafe4c3acb8a911a9fe
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104200641"
---
# <a name="setting-audio-capture-properties"></a><span data-ttu-id="02f55-103">Définition des propriétés de capture audio</span><span class="sxs-lookup"><span data-stu-id="02f55-103">Setting Audio Capture Properties</span></span>

<span data-ttu-id="02f55-104">Chaque broche d’entrée sur le filtre de capture audio expose l’interface [**IAMAudioInputMixer**](/windows/desktop/api/Strmif/nn-strmif-iamaudioinputmixer) .</span><span class="sxs-lookup"><span data-stu-id="02f55-104">Each input pin on the Audio Capture Filter exposes the [**IAMAudioInputMixer**](/windows/desktop/api/Strmif/nn-strmif-iamaudioinputmixer) interface.</span></span> <span data-ttu-id="02f55-105">Utilisez cette interface pour activer ou désactiver une entrée particulière, en appelant la méthode [**IAMAudioInputMixer ::p ut \_ Enable**](/windows/desktop/api/Strmif/nf-strmif-iamaudioinputmixer-put_enable) sur le code confidentiel.</span><span class="sxs-lookup"><span data-stu-id="02f55-105">Use this interface to enable or disable a particular input, by calling the [**IAMAudioInputMixer::put\_Enable**](/windows/desktop/api/Strmif/nf-strmif-iamaudioinputmixer-put_enable) method on the pin.</span></span> <span data-ttu-id="02f55-106">Utilisez également cette interface pour définir les propriétés d’une entrée, telles que les basses, les aigus et les niveaux de volume.</span><span class="sxs-lookup"><span data-stu-id="02f55-106">Also use this interface to set properties of an input, such as the bass, treble, and volume levels.</span></span> <span data-ttu-id="02f55-107">Si vous capturez plusieurs entrées à la fois, vous pouvez contrôler les basses, les aigus et les niveaux de volume globaux via l’interface **IAMAudioInputMixer** sur le filtre lui-même.</span><span class="sxs-lookup"><span data-stu-id="02f55-107">If you are capturing multiple inputs at once, you can control the overall bass, treble, and volume levels through the **IAMAudioInputMixer** interface on the filter itself.</span></span>

<span data-ttu-id="02f55-108">Les taux d’échantillonnage et les formats audio disponibles pour la capture sont déterminés par le pilote.</span><span class="sxs-lookup"><span data-stu-id="02f55-108">The available sampling rates and audio formats for capture are determined by the driver.</span></span> <span data-ttu-id="02f55-109">Utilisez l’interface [**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) sur la broche de sortie du filtre de capture audio pour énumérer les taux d’échantillonnage et les formats disponibles et définir le format souhaité.</span><span class="sxs-lookup"><span data-stu-id="02f55-109">Use the [**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) interface on the Audio Capture Filter's output pin to enumerate the available sampling rates and formats and set the desired format.</span></span> <span data-ttu-id="02f55-110">Le filtre peut se connecter en aval à n’importe quel filtre qui accepte le type de média de la broche de sortie.</span><span class="sxs-lookup"><span data-stu-id="02f55-110">The filter can connect downstream to any filter that accepts the output pin's media type.</span></span>

<span data-ttu-id="02f55-111">Le filtre de capture audio expose également l’interface [**IAMBufferNegotiation**](/windows/desktop/api/Strmif/nn-strmif-iambuffernegotiation) .</span><span class="sxs-lookup"><span data-stu-id="02f55-111">The Audio Capture Filter also exposes the [**IAMBufferNegotiation**](/windows/desktop/api/Strmif/nn-strmif-iambuffernegotiation) interface.</span></span> <span data-ttu-id="02f55-112">Cette interface est utile pour contrôler la quantité de latence dans la version préliminaire audio.</span><span class="sxs-lookup"><span data-stu-id="02f55-112">This interface is useful for controlling the amount of latency in audio preview.</span></span> <span data-ttu-id="02f55-113">Par défaut, le filtre de capture audio utilise une taille de mémoire tampon de demi-seconde.</span><span class="sxs-lookup"><span data-stu-id="02f55-113">By default, the Audio Capture filter uses a half-second buffer size.</span></span> <span data-ttu-id="02f55-114">Cette taille de mémoire tampon est optimale pour la capture, mais entraîne un délai d’aperçu de demi-seconde.</span><span class="sxs-lookup"><span data-stu-id="02f55-114">This buffer size is optimal for capturing but causes a half-second preview delay.</span></span> <span data-ttu-id="02f55-115">Pour réduire la latence, appelez la méthode [**IAMBufferNegotiation :: SuggestAllocatorProperties**](/windows/desktop/api/Strmif/nf-strmif-iambuffernegotiation-suggestallocatorproperties) avant de connecter la broche de sortie du filtre de capture audio.</span><span class="sxs-lookup"><span data-stu-id="02f55-115">To reduce the latency, call the [**IAMBufferNegotiation::SuggestAllocatorProperties**](/windows/desktop/api/Strmif/nf-strmif-iambuffernegotiation-suggestallocatorproperties) method before you connect the Audio Capture Filter's output pin.</span></span> <span data-ttu-id="02f55-116">Cette méthode prend un pointeur vers la structure de [**\_ Propriétés Allocator**](/windows/win32/api/strmif/ns-strmif-allocator_properties) .</span><span class="sxs-lookup"><span data-stu-id="02f55-116">This method takes a pointer to the [**ALLOCATOR\_PROPERTIES**](/windows/win32/api/strmif/ns-strmif-allocator_properties) structure.</span></span> <span data-ttu-id="02f55-117">Utilisez le membre **cbBuffer** pour spécifier la taille de la mémoire tampon, en octets.</span><span class="sxs-lookup"><span data-stu-id="02f55-117">Use the **cbBuffer** member to specify the buffer size, in bytes.</span></span> <span data-ttu-id="02f55-118">Une mémoire tampon de 80 millisecondes est généralement sûre, mais les tampons de 30 ou 40 millisecondes peuvent être suffisants.</span><span class="sxs-lookup"><span data-stu-id="02f55-118">An 80 millisecond buffer is generally safe, but buffers of 30 or 40 milliseconds might be sufficient.</span></span> <span data-ttu-id="02f55-119">Si les tampons sont trop petits, la qualité du son est détériorée.</span><span class="sxs-lookup"><span data-stu-id="02f55-119">If the buffers are too small, the sound quality will be degraded.</span></span>

 

 



