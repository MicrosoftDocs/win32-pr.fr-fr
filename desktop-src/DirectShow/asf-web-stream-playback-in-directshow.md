---
description: Lecture de flux Web ASF dans DirectShow
ms.assetid: c7818c62-24af-4eac-84b8-f76be4ca6c09
title: Lecture de flux Web ASF dans DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d14a83d2baf9c11aa824f5d6358f62790c16b30
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104317750"
---
# <a name="asf-web-stream-playback-in-directshow"></a><span data-ttu-id="fe1ce-103">Lecture de flux Web ASF dans DirectShow</span><span class="sxs-lookup"><span data-stu-id="fe1ce-103">ASF Web Stream Playback in DirectShow</span></span>

<span data-ttu-id="fe1ce-104">Microsoft DirectShow prend en charge les flux Web dans les scénarios de lecture de fichiers par le biais du filtre de [lecteur ASF WM](wm-asf-reader-filter.md) , mais vous devez écrire votre propre filtre DirectShow pour capturer et conserver le flux.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-104">Microsoft DirectShow supports web streams in file playback scenarios through the [WM ASF Reader](wm-asf-reader-filter.md) filter, but you must write your own DirectShow filter to capture and persist the stream.</span></span>

> [!Note]  
> <span data-ttu-id="fe1ce-105">Pour lire des flux Web dans du contenu diffusé en continu à partir d’un serveur exécutant Windows Media Services, utilisez le contrôle® ActiveX de Windows Media Player 9 Series dans une page Web.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-105">To play back web streams in content that is being streamed from a server running Windows Media Services, use the Windows Media Player 9 Series ActiveX® control embedded in a web page.</span></span>

 

<span data-ttu-id="fe1ce-106">Lorsqu’un fichier contenant des flux de type WMMEDIATYPE \_ filetransfer est donné, le lecteur ASF WM crée une broche de sortie pour celui-ci.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-106">When given a file containing streams of type WMMEDIATYPE\_FileTransfer, the WM ASF Reader will create an output pin for it.</span></span> <span data-ttu-id="fe1ce-107">Le bloc de format sera une structure de [**\_ \_ format webstream WMT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) .</span><span class="sxs-lookup"><span data-stu-id="fe1ce-107">The format block will be a [**WMT\_WEBSTREAM\_FORMAT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) structure.</span></span> <span data-ttu-id="fe1ce-108">(Cette structure est documentée dans la documentation du kit de développement logiciel (SDK) Windows Media format.) Si aucun filtre en aval ne peut gérer ce type de média, le code confidentiel restera non connecté, mais le fichier continuera de lire les flux audio et/ou vidéo.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-108">(This structure is documented in the Windows Media Format SDK documentation.) If no downstream filter is available that can handle that media type, then the pin will remain unconnected, but the file will still play the audio and/or video streams.</span></span>

<span data-ttu-id="fe1ce-109">Chaque échantillon de média dans un flux Web contient une structure d' [**\_ \_ \_ en-tête d’exemple webstream WMT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) , qui est décrite dans la documentation du kit de développement logiciel (SDK) du format Windows Media.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-109">Each media sample in a web stream contains a [**WMT\_WEBSTREAM\_SAMPLE\_HEADER**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) structure, which is documented in the Windows Media Format SDK documentation.</span></span> <span data-ttu-id="fe1ce-110">La structure a une longueur variable en fonction de la longueur de son membre **wszURL** .</span><span class="sxs-lookup"><span data-stu-id="fe1ce-110">The structure has a variable length depending on the length of its **wszURL** member.</span></span> <span data-ttu-id="fe1ce-111">Le pointeur vers les exemples de données pointe initialement vers cette structure, et vous devez avancer le pointeur au-delà de la structure afin d’accéder aux données réelles dans le flux.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-111">The pointer to the sample data initially points to this structure, and you must advance the pointer past the structure in order to access the actual data in the stream.</span></span>

<span data-ttu-id="fe1ce-112">Le filtre de votre gestionnaire de flux Web doit être basé sur la classe [**CBaseRenderer**](cbaserenderer.md) .</span><span class="sxs-lookup"><span data-stu-id="fe1ce-112">Your web stream handler filter should be based on the [**CBaseRenderer**](cbaserenderer.md) class.</span></span> <span data-ttu-id="fe1ce-113">Dans la méthode [**CBaseRenderer ::D orendersample**](cbaserenderer-dorendersample.md) , le filtre doit analyser la structure pour obtenir des informations sur le flux Web, puis exécuter l’action appropriée.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-113">In the [**CBaseRenderer::DoRenderSample**](cbaserenderer-dorendersample.md) method, the filter will need to parse the structure for information about the web stream, and then perform the appropriate action.</span></span> <span data-ttu-id="fe1ce-114">En général, cela implique l’enregistrement du fichier sur le disque, puis l’appel des fonctions [**CreateUrlCacheEntry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) et [**CommitUrlCacheEntryW**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) ou [**CommitUrlCacheEntryA**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) pour placer les fichiers dans le cache Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-114">Typically, this will involve saving the file to disk, and then calling the [**CreateUrlCacheEntry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) and [**CommitUrlCacheEntryW**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) or [**CommitUrlCacheEntryA**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) functions to place the files into the Internet Explorer cache.</span></span> <span data-ttu-id="fe1ce-115">Le filtre doit gérer des fichiers à parties multiples, autrement dit, des fichiers qui sont plus grands qu’un exemple, et doivent également gérer les commandes de rendu, qui sont spécifiées par le membre d' **\_ \_ en-tête de l’exemple d' \_ en-tête webstream WMT.**</span><span class="sxs-lookup"><span data-stu-id="fe1ce-115">The filter must handle multipart files, that is, files that are larger than one sample, and also must handle render commands, which are specified by the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wSampleType** member.</span></span> <span data-ttu-id="fe1ce-116">Le filtre envoie un événement d' [**\_ \_ événement OLE EC**](ec-ole-event.md) à l’application, ainsi que le texte de **l' \_ exemple d' \_ \_ en-tête d’exemple webstream WMT. wszURL** qui contient le nom du fichier à restituer.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-116">The filter sends an [**EC\_OLE\_EVENT**](ec-ole-event.md) event to the application, along with the text of the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wszURL** string which contains the name of the file to be rendered.</span></span> <span data-ttu-id="fe1ce-117">L’application fait ensuite en sorte que le navigateur affiche la page spécifiée.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-117">The application then causes the browser to display the specified page.</span></span> <span data-ttu-id="fe1ce-118">Si le flux Web a été créé correctement, le fichier doit déjà être dans le cache.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-118">If the web stream has been authored correctly, the file should already be in the cache.</span></span>

<span data-ttu-id="fe1ce-119">Pour plus d’informations sur \_ le format de flux de données \_ et l’exemple d’en-tête de flux de données à diffusion en continu WMT \_ \_ \_ , consultez la documentation du SDK Windows Media format.</span><span class="sxs-lookup"><span data-stu-id="fe1ce-119">For more information on WMT\_WEBSTREAM\_FORMAT and WMT\_WEBSTREAM\_SAMPLE\_HEADER, see the Windows Media Format SDK documentation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="fe1ce-120">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="fe1ce-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fe1ce-121">Lecture de fichiers ASF dans DirectShow</span><span class="sxs-lookup"><span data-stu-id="fe1ce-121">Reading ASF Files in DirectShow</span></span>](reading-asf-files-in-directshow.md)
</dt> </dl>

 

 
