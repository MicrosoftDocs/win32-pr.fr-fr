---
description: Instructions pour l’enregistrement des filtres
ms.assetid: 05945937-9e01-4930-ae95-1931a711b55e
title: Instructions pour l’enregistrement des filtres
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ed616d90c17d232995994d8ceccfdc72d022d56
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104108434"
---
# <a name="guidelines-for-registering-filters"></a><span data-ttu-id="72ffa-103">Instructions pour l’enregistrement des filtres</span><span class="sxs-lookup"><span data-stu-id="72ffa-103">Guidelines for Registering Filters</span></span>

<span data-ttu-id="72ffa-104">Les informations du registre de filtre déterminent la façon dont le gestionnaire de graphes de filtre fonctionne pendant la [connexion intelligente](intelligent-connect.md).</span><span class="sxs-lookup"><span data-stu-id="72ffa-104">The filter registry information determines how the Filter Graph Manager functions during [Intelligent Connect](intelligent-connect.md).</span></span> <span data-ttu-id="72ffa-105">Par conséquent, il affecte toutes les applications écrites pour DirectShow, pas seulement celles qui utiliseront votre filtre.</span><span class="sxs-lookup"><span data-stu-id="72ffa-105">Thus, it affects every application written for DirectShow, not just the ones that will use your filter.</span></span> <span data-ttu-id="72ffa-106">Vous devez vous assurer que votre filtre se comporte correctement, en suivant ces instructions.</span><span class="sxs-lookup"><span data-stu-id="72ffa-106">You should make sure that your filter behaves correctly, by following these guidelines.</span></span>

1.  <span data-ttu-id="72ffa-107">Avez-vous besoin des données de filtre dans le registre ?</span><span class="sxs-lookup"><span data-stu-id="72ffa-107">Do you need the filter data in the registry?</span></span> <span data-ttu-id="72ffa-108">Pour de nombreux filtres personnalisés, il n’y a aucune raison de rendre le filtre visible pour le mappeur de filtre ou l’énumérateur du périphérique système.</span><span class="sxs-lookup"><span data-stu-id="72ffa-108">For many custom filters, there is no reason to make the filter visible to the Filter Mapper or the System Device Enumerator.</span></span> <span data-ttu-id="72ffa-109">Tant que vous inscrivez la DLL, votre application peut créer le filtre à l’aide de **CoCreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="72ffa-109">As long as you register the DLL, your application can create the filter using **CoCreateInstance**.</span></span> <span data-ttu-id="72ffa-110">Dans ce cas, omettez simplement la structure de [**\_ filtre AMOVIESETUP**](amoviesetup-filter.md) dans le modèle de fabrique.</span><span class="sxs-lookup"><span data-stu-id="72ffa-110">In that case, simply omit the [**AMOVIESETUP\_FILTER**](amoviesetup-filter.md) structure from the factory template.</span></span> <span data-ttu-id="72ffa-111">(L’un des inconvénients est que votre filtre ne sera pas visible dans GraphEdit.</span><span class="sxs-lookup"><span data-stu-id="72ffa-111">(One drawback is that your filter will not be visible in GraphEdit.</span></span> <span data-ttu-id="72ffa-112">Pour contourner ce problèmes, vous pouvez créer une catégorie « test » privée à l’aide de la méthode [**IFilterMapper2 :: CreateCategory**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-createcategory) .</span><span class="sxs-lookup"><span data-stu-id="72ffa-112">To get around this, you can create a private "Testing" category using the [**IFilterMapper2::CreateCategory**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-createcategory) method.</span></span> <span data-ttu-id="72ffa-113">Vous ne devez effectuer cette opération que pour les versions Debug.)</span><span class="sxs-lookup"><span data-stu-id="72ffa-113">You should only do this for debug builds.)</span></span>
2.  <span data-ttu-id="72ffa-114">Choisissez la catégorie de filtre correcte.</span><span class="sxs-lookup"><span data-stu-id="72ffa-114">Choose the correct filter category.</span></span> <span data-ttu-id="72ffa-115">La catégorie « filtres DirectShow » par défaut est pour les filtres à usage général.</span><span class="sxs-lookup"><span data-stu-id="72ffa-115">The default "DirectShow Filters" category is for general purpose filters.</span></span> <span data-ttu-id="72ffa-116">Le cas échéant, inscrivez votre filtre dans une catégorie plus spécifique.</span><span class="sxs-lookup"><span data-stu-id="72ffa-116">Whenever appropriate, register your filter in a more specific category.</span></span> <span data-ttu-id="72ffa-117">Quand [**IFilterMapper2**](/windows/desktop/api/Strmif/nn-strmif-ifiltermapper2) recherche un filtre, il ignore toute catégorie dont la mérite n’est \_ \_ pas \_ utilisée ou moins.</span><span class="sxs-lookup"><span data-stu-id="72ffa-117">When [**IFilterMapper2**](/windows/desktop/api/Strmif/nn-strmif-ifiltermapper2) searches for a filter, it ignores any category whose merit is MERIT\_DO\_NOT\_USE or less.</span></span> <span data-ttu-id="72ffa-118">Les catégories non destinées à la lecture normale ont une faible mérite.</span><span class="sxs-lookup"><span data-stu-id="72ffa-118">Categories not intended for normal playback have low merit.</span></span>
3.  <span data-ttu-id="72ffa-119">Évitez de spécifier MEDIATYPE \_ None, MEDIASUBTYPE \_ None ou GUID \_ null dans les informations de [**\_ MediaType AMOVIESETUP**](amoviesetup-mediatype.md) pour un code confidentiel.</span><span class="sxs-lookup"><span data-stu-id="72ffa-119">Avoid specifying MEDIATYPE\_None, MEDIASUBTYPE\_None, or GUID\_NULL in the [**AMOVIESETUP\_MEDIATYPE**](amoviesetup-mediatype.md) information for a pin.</span></span> <span data-ttu-id="72ffa-120">**IFilterMapper2** les traite comme des caractères génériques, ce qui peut ralentir le processus de création de graphiques.</span><span class="sxs-lookup"><span data-stu-id="72ffa-120">**IFilterMapper2** treats these as wildcards, which can slow the graph-building process.</span></span>
4.  <span data-ttu-id="72ffa-121">Choisissez la valeur de mérite la plus faible possible.</span><span class="sxs-lookup"><span data-stu-id="72ffa-121">Choose the lowest merit value possible.</span></span> <span data-ttu-id="72ffa-122">Voici quelques recommandations :</span><span class="sxs-lookup"><span data-stu-id="72ffa-122">Here are some guidelines:</span></span>

    | <span data-ttu-id="72ffa-123">Type de filtre</span><span class="sxs-lookup"><span data-stu-id="72ffa-123">Type of filter</span></span>                                                                                       | <span data-ttu-id="72ffa-124">Mérite recommandée</span><span class="sxs-lookup"><span data-stu-id="72ffa-124">Recommended merit</span></span>                                                                                   |
    |------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="72ffa-125">Convertisseur par défaut</span><span class="sxs-lookup"><span data-stu-id="72ffa-125">Default renderer</span></span>                                                                                     | <span data-ttu-id="72ffa-126">\_préférence mérite.</span><span class="sxs-lookup"><span data-stu-id="72ffa-126">MERIT\_PREFERRED.</span></span> <span data-ttu-id="72ffa-127">Toutefois, pour les types de média standard, un convertisseur personnalisé ne doit jamais être la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="72ffa-127">For standard media types, however, a custom renderer should never be the default.</span></span> |
    | <span data-ttu-id="72ffa-128">Convertisseur autre que celui par défaut</span><span class="sxs-lookup"><span data-stu-id="72ffa-128">Non-default renderer</span></span>                                                                                 | <span data-ttu-id="72ffa-129">Les MÉRITEs \_ n' \_ \_ utilisent pas ou ne méritent pas de \_ chances</span><span class="sxs-lookup"><span data-stu-id="72ffa-129">MERIT\_DO\_NOT\_USE or MERIT\_UNLIKELY</span></span>                                                              |
    | <span data-ttu-id="72ffa-130">Mux</span><span class="sxs-lookup"><span data-stu-id="72ffa-130">Mux</span></span>                                                                                                  | <span data-ttu-id="72ffa-131">MÉRITE \_ n' \_ \_ utilise pas</span><span class="sxs-lookup"><span data-stu-id="72ffa-131">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="72ffa-132">Décodeur</span><span class="sxs-lookup"><span data-stu-id="72ffa-132">Decoder</span></span>                                                                                              | <span data-ttu-id="72ffa-133">MÉRITE \_ normal</span><span class="sxs-lookup"><span data-stu-id="72ffa-133">MERIT\_NORMAL</span></span>                                                                                       |
    | <span data-ttu-id="72ffa-134">Spitter, analyseur</span><span class="sxs-lookup"><span data-stu-id="72ffa-134">Spitter, parser</span></span>                                                                                      | <span data-ttu-id="72ffa-135">MÉRITE \_ normal ou Lower</span><span class="sxs-lookup"><span data-stu-id="72ffa-135">MERIT\_NORMAL or lower</span></span>                                                                              |
    | <span data-ttu-id="72ffa-136">Filtre à usage spécial ; tout filtre créé directement par l’application</span><span class="sxs-lookup"><span data-stu-id="72ffa-136">Special purpose filter; any filter that is created directly by the application</span></span>                       | <span data-ttu-id="72ffa-137">MÉRITE \_ n' \_ \_ utilise pas</span><span class="sxs-lookup"><span data-stu-id="72ffa-137">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="72ffa-138">Capture</span><span class="sxs-lookup"><span data-stu-id="72ffa-138">Capture</span></span>                                                                                              | <span data-ttu-id="72ffa-139">MÉRITE \_ n' \_ \_ utilise pas</span><span class="sxs-lookup"><span data-stu-id="72ffa-139">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="72ffa-140">Filtre « de secours »; par exemple, le [filtre de convertisseur d’espace colorimétrique](color-space-converter-filter.md)</span><span class="sxs-lookup"><span data-stu-id="72ffa-140">"Fallback" filter; for example, the [Color Space Converter Filter](color-space-converter-filter.md)</span></span> | <span data-ttu-id="72ffa-141">MÉRITE \_ improbable</span><span class="sxs-lookup"><span data-stu-id="72ffa-141">MERIT\_UNLIKELY</span></span>                                                                                     |

    

     

    <span data-ttu-id="72ffa-142">Si vous donnez à un filtre un mérite de mérite \_ \_ , n' \_ utilisez pas, déterminez si vous devez enregistrer ces informations en premier lieu.</span><span class="sxs-lookup"><span data-stu-id="72ffa-142">If you are giving a filter a merit of MERIT\_DO\_NOT\_USE, consider whether you need to register this information in the first place.</span></span> <span data-ttu-id="72ffa-143">(Voir l’élément 1.)</span><span class="sxs-lookup"><span data-stu-id="72ffa-143">(See item 1.)</span></span>

5.  <span data-ttu-id="72ffa-144">N’inscrivez pas de filtre dans la catégorie « filtres DirectShow » qui accepte les couleurs RVB 24 bits.</span><span class="sxs-lookup"><span data-stu-id="72ffa-144">Do not register a filter in the "DirectShow Filters" category that accepts 24-bit RGB.</span></span> <span data-ttu-id="72ffa-145">Votre filtre interfère avec le filtre de convertisseur d’espace de couleurs.</span><span class="sxs-lookup"><span data-stu-id="72ffa-145">Your filter will interfere with the Color Space Converter filter.</span></span>

## <a name="related-topics"></a><span data-ttu-id="72ffa-146">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="72ffa-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="72ffa-147">Comment inscrire des filtres DirectShow</span><span class="sxs-lookup"><span data-stu-id="72ffa-147">How to Register DirectShow Filters</span></span>](how-to-register-directshow-filters.md)
</dt> </dl>

 

 



