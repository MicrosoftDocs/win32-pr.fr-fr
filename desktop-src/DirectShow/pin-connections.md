---
description: Épingler les connexions
ms.assetid: 1406ade4-77d8-49a7-8f36-cc49ff007a26
title: Épingler les connexions
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b509abddf4a915b65dfd322f76b4afb132a7f835
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104392507"
---
# <a name="pin-connections"></a><span data-ttu-id="9b15a-103">Épingler les connexions</span><span class="sxs-lookup"><span data-stu-id="9b15a-103">Pin Connections</span></span>

<span data-ttu-id="9b15a-104">Les filtres se connectent à leurs codes confidentiels, via l’interface [**IPIN**](/windows/desktop/api/Strmif/nn-strmif-ipin) .</span><span class="sxs-lookup"><span data-stu-id="9b15a-104">Filters connect at their pins, through the [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin) interface.</span></span> <span data-ttu-id="9b15a-105">Les broches de sortie se connectent aux broches d’entrée.</span><span class="sxs-lookup"><span data-stu-id="9b15a-105">Output pins connect to input pins.</span></span> <span data-ttu-id="9b15a-106">Chaque connexion de code confidentiel a un type de support, décrit par la structure du [**\_ \_ type de média am**](/windows/win32/api/strmif/ns-strmif-am_media_type) .</span><span class="sxs-lookup"><span data-stu-id="9b15a-106">Each pin connection has a media type, described by the [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) structure.</span></span>

<span data-ttu-id="9b15a-107">Une application connecte les filtres en appelant des méthodes sur le gestionnaire de graphique de filtre, jamais en appelant des méthodes sur les filtres ou les épingles eux-mêmes.</span><span class="sxs-lookup"><span data-stu-id="9b15a-107">An application connects filters by calling methods on the Filter Graph Manager, never by calling methods on the filters or pins themselves.</span></span> <span data-ttu-id="9b15a-108">L’application peut spécifier directement les filtres à connecter, en appelant la méthode [**IFilterGraph :: ConnectDirect**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-connectdirect) ou [**IGraphBuilder :: Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) . elle peut aussi connecter indirectement des filtres, à l’aide d’une méthode de création de graphiques telle que [**IGraphBuilder :: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile).</span><span class="sxs-lookup"><span data-stu-id="9b15a-108">The application can directly specify which filters to connect, by calling the [**IFilterGraph::ConnectDirect**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-connectdirect) or [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) method; or it can connect filters indirectly, using a graph-building method such as [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile).</span></span>

<span data-ttu-id="9b15a-109">Pour que la connexion aboutisse, les deux filtres doivent se trouver dans le graphique de filtre.</span><span class="sxs-lookup"><span data-stu-id="9b15a-109">For the connection to succeed, both filters must be in the filter graph.</span></span> <span data-ttu-id="9b15a-110">L’application peut ajouter un filtre au graphique en appelant la méthode [**IFilterGraph :: AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) .</span><span class="sxs-lookup"><span data-stu-id="9b15a-110">The application can add a filter to the graph by calling the [**IFilterGraph::AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) method.</span></span> <span data-ttu-id="9b15a-111">Le gestionnaire de graphes de filtre peut également ajouter des filtres au graphique.</span><span class="sxs-lookup"><span data-stu-id="9b15a-111">The Filter Graph Manager may add filters to the graph, as well.</span></span> <span data-ttu-id="9b15a-112">Lorsqu’un filtre est ajouté, le gestionnaire de graphes de filtre appelle la méthode [**IBaseFilter :: JoinFilterGraph**](/windows/desktop/api/Strmif/nf-strmif-ibasefilter-joinfiltergraph) du filtre pour notifier le filtre.</span><span class="sxs-lookup"><span data-stu-id="9b15a-112">When a filter is added, the Filter Graph Manager calls the filter's [**IBaseFilter::JoinFilterGraph**](/windows/desktop/api/Strmif/nf-strmif-ibasefilter-joinfiltergraph) method to notify the filter.</span></span>

<span data-ttu-id="9b15a-113">La structure générale du processus de connexion est la suivante :</span><span class="sxs-lookup"><span data-stu-id="9b15a-113">The general outline of the connection process is the following:</span></span>

1.  <span data-ttu-id="9b15a-114">Le gestionnaire de graphique de filtre appelle [**IPIN :: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) sur la broche de sortie, en passant un pointeur vers la broche d’entrée.</span><span class="sxs-lookup"><span data-stu-id="9b15a-114">The Filter Graph Manager calls [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) on the output pin, passing a pointer to the input pin.</span></span>
2.  <span data-ttu-id="9b15a-115">Si la broche de sortie accepte la connexion, elle appelle [**IPIN :: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) sur la broche d’entrée.</span><span class="sxs-lookup"><span data-stu-id="9b15a-115">If the output pin accepts the connection, it calls [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) on the input pin.</span></span>
3.  <span data-ttu-id="9b15a-116">Si la broche d’entrée accepte également la connexion, la tentative de connexion a échoué et les broches sont connectées.</span><span class="sxs-lookup"><span data-stu-id="9b15a-116">If the input pin also accepts the connection, the connection attempt succeeds and the pins are connected.</span></span>

<span data-ttu-id="9b15a-117">Certaines broches peuvent être déconnectées et reconnectées pendant que le filtre est actif.</span><span class="sxs-lookup"><span data-stu-id="9b15a-117">Some pins can be disconnected and reconnected while the filter is active.</span></span> <span data-ttu-id="9b15a-118">Ce type de reconnexion est appelé reconnexion *dynamique* .</span><span class="sxs-lookup"><span data-stu-id="9b15a-118">This type of reconnection is called a *dynamic* reconnection.</span></span> <span data-ttu-id="9b15a-119">Pour plus d’informations, consultez [génération de graphiques dynamiques](dynamic-graph-building.md).</span><span class="sxs-lookup"><span data-stu-id="9b15a-119">For more information, see [Dynamic Graph Building](dynamic-graph-building.md).</span></span> <span data-ttu-id="9b15a-120">Toutefois, la plupart des filtres ne prennent pas en charge la reconnexion dynamique.</span><span class="sxs-lookup"><span data-stu-id="9b15a-120">However, most filters do not support dynamic reconnection.</span></span>

<span data-ttu-id="9b15a-121">Les filtres sont généralement connectés dans l’ordre en aval (en d’autres termes, les broches d’entrée du filtre sont connectées avant les broches de sortie).</span><span class="sxs-lookup"><span data-stu-id="9b15a-121">Filters are usually connected in downstream order—in other words, the filter's input pins are connected before its output pins.</span></span> <span data-ttu-id="9b15a-122">Un filtre doit toujours prendre en charge cet ordre de connexion.</span><span class="sxs-lookup"><span data-stu-id="9b15a-122">A filter should always support this order of connection.</span></span> <span data-ttu-id="9b15a-123">Certains filtres prennent également en charge les connexions dans l’ordre inverse, en commençant par les broches de sortie, suivies des broches d’entrée.</span><span class="sxs-lookup"><span data-stu-id="9b15a-123">Some filters also support connections in the opposite order—output pins first, followed by input pins.</span></span> <span data-ttu-id="9b15a-124">Par exemple, il peut être possible de connecter la broche de sortie d’un filtre MULTIPLEXeur au filtre d’écriture de fichier, avant de connecter les broches d’entrée du filtre MUX.</span><span class="sxs-lookup"><span data-stu-id="9b15a-124">For example, it might be possible to connect a MUX filter's output pin to the file-writer filter, before connecting the MUX filter's input pins.</span></span>

<span data-ttu-id="9b15a-125">Quand la méthode **Connect** ou **ReceiveConnection** d’un pin est appelée, le code confidentiel doit vérifier qu’il peut prendre en charge la connexion.</span><span class="sxs-lookup"><span data-stu-id="9b15a-125">When a pin's **Connect** or **ReceiveConnection** method is called, the pin must verify that it can support the connection.</span></span> <span data-ttu-id="9b15a-126">Les détails dépendent du filtre concerné.</span><span class="sxs-lookup"><span data-stu-id="9b15a-126">The details depend on the particular filter.</span></span> <span data-ttu-id="9b15a-127">Les tâches les plus courantes sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="9b15a-127">The most common tasks include the following:</span></span>

-   <span data-ttu-id="9b15a-128">Vérifier que le type de support est acceptable</span><span class="sxs-lookup"><span data-stu-id="9b15a-128">Check that the media type is acceptable</span></span>
-   <span data-ttu-id="9b15a-129">Négocier un allocateur</span><span class="sxs-lookup"><span data-stu-id="9b15a-129">Negotiate an allocator</span></span>
-   <span data-ttu-id="9b15a-130">Interrogez l’autre code PIN pour les interfaces requises.</span><span class="sxs-lookup"><span data-stu-id="9b15a-130">Query the other pin for required interfaces.</span></span>

 

 



