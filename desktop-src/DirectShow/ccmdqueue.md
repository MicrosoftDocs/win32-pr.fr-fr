---
description: La classe CCmdQueue est une classe de base qui fournit une file d’attente d’objets et de fonctions membres CDeferredCommand pour ajouter, supprimer, vérifier l’État et appeler les commandes mises en file d’attente.
ms.assetid: 6bd0f0f3-3c56-47d2-9fd8-e2863a2afa33
title: CCmdQueue, classe
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CCmdQueue
api_type:
- COM
api_location: ''
ms.openlocfilehash: 78af7a975d54ba832bbdf1fb7f8027f87b747660
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104108678"
---
# <a name="ccmdqueue-class"></a><span data-ttu-id="bf2a9-103">CCmdQueue, classe</span><span class="sxs-lookup"><span data-stu-id="bf2a9-103">CCmdQueue class</span></span>

<span data-ttu-id="bf2a9-104">La `CCmdQueue` classe est une classe de base qui fournit une file d’attente d’objets [**CDeferredCommand**](cdeferredcommand.md) et des fonctions membres pour ajouter, supprimer, vérifier l’État et appeler les commandes mises en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-104">The `CCmdQueue` class is a base class that provides a queue of [**CDeferredCommand**](cdeferredcommand.md) objects and member functions to add, remove, check status, and invoke the queued commands.</span></span> <span data-ttu-id="bf2a9-105">Un `CCmdQueue` objet fait partie d’un objet qui implémente des méthodes [**IQueueCommand**](/windows/desktop/api/Control/nn-control-iqueuecommand) .</span><span class="sxs-lookup"><span data-stu-id="bf2a9-105">A `CCmdQueue` object is a part of an object that implements [**IQueueCommand**](/windows/desktop/api/Control/nn-control-iqueuecommand) methods.</span></span> <span data-ttu-id="bf2a9-106">Le gestionnaire de graphes de filtre implémente les méthodes **IQueueCommand** afin que les applications puissent mettre les commandes en file d’attente dans le graphique de filtre.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-106">The filter graph manager implements **IQueueCommand** methods so that applications can queue commands to the filter graph.</span></span> <span data-ttu-id="bf2a9-107">Les filtres qui implémentent l’interface **IQueueCommand** utilisent directement cette classe.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-107">Filters that implement the **IQueueCommand** interface directly use this class.</span></span> <span data-ttu-id="bf2a9-108">Si vous souhaitez utiliser des objets **CDeferredCommand** , votre file d’attente doit être dérivée de cette classe.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-108">If you want to use **CDeferredCommand** objects, your queue must be derived from this class.</span></span>

<span data-ttu-id="bf2a9-109">Il existe deux modes de synchronisation : grossiste et précis.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-109">There are two modes of synchronization: coarse and accurate.</span></span> <span data-ttu-id="bf2a9-110">En mode grossiste, l’application attend jusqu’à ce qu’une heure spécifiée arrive, puis exécute la commande.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-110">In coarse mode, the application waits until a specified time arrives and then executes the command.</span></span> <span data-ttu-id="bf2a9-111">En mode exact, l’application attend que le traitement commence sur l’exemple qui s’affiche à l’heure, puis exécute la commande.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-111">In accurate mode, the application waits until processing begins on the sample that appears at the time, and then executes the command.</span></span> <span data-ttu-id="bf2a9-112">Le filtre détermine celui qu’il doit implémenter.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-112">The filter determines which one it will implement.</span></span> <span data-ttu-id="bf2a9-113">Le gestionnaire de graphes de filtre implémente toujours le mode grossiste pour les commandes mises en file d’attente au niveau du gestionnaire de graphique de filtre.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-113">The filter graph manager always implements coarse mode for commands that are queued at the filter graph manager.</span></span>

<span data-ttu-id="bf2a9-114">Si vous souhaitez une synchronisation grossière, vous souhaiterez probablement attendre qu’une commande soit en cours, puis l’exécuter.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-114">If you want coarse synchronization, you probably want to wait until there is a command due, and then execute it.</span></span> <span data-ttu-id="bf2a9-115">Pour ce faire, vous pouvez appeler [**CCmdQueue :: GetDueCommand**](ccmdqueue-getduecommand.md).</span><span class="sxs-lookup"><span data-stu-id="bf2a9-115">You can do this by calling [**CCmdQueue::GetDueCommand**](ccmdqueue-getduecommand.md).</span></span> <span data-ttu-id="bf2a9-116">Si vous avez plusieurs éléments à attendre, récupérez le descripteur d’événement à partir de [**CCmdQueue :: GetDueHandle**](ccmdqueue-getduehandle.md) , puis appelez **CCmdQueue :: GetDueCommand** quand ce est signalé.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-116">If you have several things to wait for, get the event handle from [**CCmdQueue::GetDueHandle**](ccmdqueue-getduehandle.md) and then call **CCmdQueue::GetDueCommand** when this is signaled.</span></span> <span data-ttu-id="bf2a9-117">le [**temps de flux**](stream-time.md) est avancé uniquement entre les appels aux fonctions membres [**CCmdQueue :: Run**](ccmdqueue-run.md) et [**CCmdQueue :: EndRun**](ccmdqueue-endrun.md) .</span><span class="sxs-lookup"><span data-stu-id="bf2a9-117">[**stream time**](stream-time.md) will advance only between calls to the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions.</span></span> <span data-ttu-id="bf2a9-118">Il n’y a aucune garantie que si le descripteur est défini, une commande est prête.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-118">There is no guarantee that if the handle is set, there will be a command ready.</span></span> <span data-ttu-id="bf2a9-119">Chaque fois que l’événement est signalé, appelez la fonction membre **GetDueCommand** (probablement avec un délai d’expiration de zéro); Cela peut retourner E \_ Abort si aucune commande n’est prête.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-119">Each time the event is signaled, call the **GetDueCommand** member function (probably with a time-out of zero); this can return E\_ABORT if no command is ready.</span></span>

<span data-ttu-id="bf2a9-120">Si vous souhaitez une synchronisation précise, appelez la fonction membre [**CCmdQueue :: GetCommandDueFor**](ccmdqueue-getcommandduefor.md) et transmettez les exemples que vous allez traiter en tant que paramètre.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-120">If you want accurate synchronization, call the [**CCmdQueue::GetCommandDueFor**](ccmdqueue-getcommandduefor.md) member function and pass the samples you are about to process as a parameter.</span></span> <span data-ttu-id="bf2a9-121">Cela retourne ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="bf2a9-121">This returns the following:</span></span>

-   <span data-ttu-id="bf2a9-122">Commande de flux de temps due à ou avant cette heure de flux.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-122">A stream-time command due at or before that stream time.</span></span>
-   <span data-ttu-id="bf2a9-123">Commande au moment de la présentation due à ou avant la présentation du temps de flux.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-123">A presentation-time command due at or before the presentation of the stream time.</span></span> <span data-ttu-id="bf2a9-124">Procédez ainsi uniquement entre les fonctions membres [**CCmdQueue :: Run**](ccmdqueue-run.md) et [**CCmdQueue :: EndRun**](ccmdqueue-endrun.md) , car en dehors de ce, le mappage du temps de flux à l’heure de présentation n’est pas connu.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-124">Do this only between the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions, because outside of this, the mapping from stream time to presentation time is not known.</span></span>
-   <span data-ttu-id="bf2a9-125">Toute commande de présentation en attente.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-125">Any presentation-time command due now.</span></span>

<span data-ttu-id="bf2a9-126">Si vous souhaitez une synchronisation précise des exemples qui peuvent être traités en mode suspendu, vous devez utiliser des commandes en continu.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-126">If you want accurate synchronization for samples that might be processed during paused mode, you must use stream-time commands.</span></span>

<span data-ttu-id="bf2a9-127">Dans tous les cas, les commandes restent mises en file d’attente jusqu’à ce qu’elles soient appelées ou annulées.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-127">In all cases, commands remain queued until called or canceled.</span></span> <span data-ttu-id="bf2a9-128">Le paramètre et la réinitialisation du descripteur d’événement sont gérés entièrement par cet objet de file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-128">The setting and resetting of the event handle is managed entirely by this queue object.</span></span>



| <span data-ttu-id="bf2a9-129">Membres de données protégés</span><span class="sxs-lookup"><span data-stu-id="bf2a9-129">Protected Data Members</span></span>                                 | <span data-ttu-id="bf2a9-130">Description</span><span class="sxs-lookup"><span data-stu-id="bf2a9-130">Description</span></span>                                                                                            |
|--------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bf2a9-131">m \_ bRunning</span><span class="sxs-lookup"><span data-stu-id="bf2a9-131">m\_bRunning</span></span>                                            | <span data-ttu-id="bf2a9-132">Indicateur d’État en cours d’exécution ; Affectez la valeur **true** lors de l’exécution de.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-132">Flag for running state; set **TRUE** when running.</span></span>                                                     |
| <span data-ttu-id="bf2a9-133">m \_ dwAdvise</span><span class="sxs-lookup"><span data-stu-id="bf2a9-133">m\_dwAdvise</span></span>                                            | <span data-ttu-id="bf2a9-134">Identificateur de notification de l’horloge de référence (zéro si aucune notification n’est en suspens).</span><span class="sxs-lookup"><span data-stu-id="bf2a9-134">Advise identifier from the reference clock (zero if no outstanding advise).</span></span>                            |
| <span data-ttu-id="bf2a9-135">m \_ evDue</span><span class="sxs-lookup"><span data-stu-id="bf2a9-135">m\_evDue</span></span>                                               | <span data-ttu-id="bf2a9-136">Définit l’heure d’échéance des commandes.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-136">Sets the time when any commands are due.</span></span>                                                               |
| <span data-ttu-id="bf2a9-137">m \_ listPresentation</span><span class="sxs-lookup"><span data-stu-id="bf2a9-137">m\_listPresentation</span></span>                                    | <span data-ttu-id="bf2a9-138">Stocke les commandes mises en file d’attente au moment de la présentation.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-138">Stores commands queued in presentation time.</span></span>                                                           |
| <span data-ttu-id="bf2a9-139">m \_ listStream</span><span class="sxs-lookup"><span data-stu-id="bf2a9-139">m\_listStream</span></span>                                          | <span data-ttu-id="bf2a9-140">Stocke les commandes mises en file d’attente dans le temps de flux.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-140">Stores commands queued in stream time.</span></span>                                                                 |
| <span data-ttu-id="bf2a9-141">\_verrou m</span><span class="sxs-lookup"><span data-stu-id="bf2a9-141">m\_Lock</span></span>                                                | <span data-ttu-id="bf2a9-142">Protège l’accès aux listes.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-142">Protects access to lists.</span></span>                                                                              |
| <span data-ttu-id="bf2a9-143">m \_ pClock</span><span class="sxs-lookup"><span data-stu-id="bf2a9-143">m\_pClock</span></span>                                              | <span data-ttu-id="bf2a9-144">Horloge de référence actuelle.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-144">Current reference clock.</span></span>                                                                               |
| <span data-ttu-id="bf2a9-145">m \_ StreamTimeOffset</span><span class="sxs-lookup"><span data-stu-id="bf2a9-145">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="bf2a9-146">Contient l’offset de temps de flux lorsque **m \_ bRunning** a la **valeur true**.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-146">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="bf2a9-147">m \_ StreamTimeOffset</span><span class="sxs-lookup"><span data-stu-id="bf2a9-147">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="bf2a9-148">Contient l’offset de temps de flux lorsque **m \_ bRunning** a la **valeur true**.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-148">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="bf2a9-149">Fonctions de membre</span><span class="sxs-lookup"><span data-stu-id="bf2a9-149">Member Functions</span></span>                                       | <span data-ttu-id="bf2a9-150">Description</span><span class="sxs-lookup"><span data-stu-id="bf2a9-150">Description</span></span>                                                                                            |
| [<span data-ttu-id="bf2a9-151">**CCmdQueue**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-151">**CCmdQueue**</span></span>](ccmdqueue-ccmdqueue.md)               | <span data-ttu-id="bf2a9-152">Construit un objet **CCmdQueue** .</span><span class="sxs-lookup"><span data-stu-id="bf2a9-152">Constructs a **CCmdQueue** object.</span></span>                                                                     |
| [<span data-ttu-id="bf2a9-153">**CheckTime**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-153">**CheckTime**</span></span>](ccmdqueue-checktime.md)               | <span data-ttu-id="bf2a9-154">Détermine si une heure donnée est due.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-154">Determines if a given time is due.</span></span>                                                                     |
| [<span data-ttu-id="bf2a9-155">**GetDueHandle**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-155">**GetDueHandle**</span></span>](ccmdqueue-getduehandle.md)         | <span data-ttu-id="bf2a9-156">Récupère le handle d’événement qui sera signalé.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-156">Retrieves the event handle that will be signaled.</span></span>                                                      |
| <span data-ttu-id="bf2a9-157">Fonctions membres substituables</span><span class="sxs-lookup"><span data-stu-id="bf2a9-157">Overridable Member Functions</span></span>                           | <span data-ttu-id="bf2a9-158">Description</span><span class="sxs-lookup"><span data-stu-id="bf2a9-158">Description</span></span>                                                                                            |
| [<span data-ttu-id="bf2a9-159">**EndRun**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-159">**EndRun**</span></span>](ccmdqueue-endrun.md)                     | <span data-ttu-id="bf2a9-160">Bascule en mode arrêté ou suspendu.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-160">Switches to stopped or paused mode.</span></span>                                                                    |
| [<span data-ttu-id="bf2a9-161">**GetCommandDueFor**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-161">**GetCommandDueFor**</span></span>](ccmdqueue-getcommandduefor.md) | <span data-ttu-id="bf2a9-162">Récupère une commande différée planifiée à une heure spécifiée.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-162">Retrieves a deferred command that is scheduled at a specified time.</span></span>                                    |
| [<span data-ttu-id="bf2a9-163">**GetDueCommand**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-163">**GetDueCommand**</span></span>](ccmdqueue-getduecommand.md)       | <span data-ttu-id="bf2a9-164">Récupère un pointeur vers la commande suivante qui est due.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-164">Retrieves a pointer to the next command that is due.</span></span>                                                   |
| [<span data-ttu-id="bf2a9-165">**Insérer**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-165">**Insert**</span></span>](ccmdqueue-insert.md)                     | <span data-ttu-id="bf2a9-166">Ajoute l’objet [**CDeferredCommand**](cdeferredcommand.md) à la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-166">Adds the [**CDeferredCommand**](cdeferredcommand.md) object to the queue.</span></span>                             |
| [<span data-ttu-id="bf2a9-167">**Nouveau**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-167">**New**</span></span>](ccmdqueue-new.md)                           | <span data-ttu-id="bf2a9-168">Initialise une commande à exécuter et retourne un nouvel objet [**CDeferredCommand**](cdeferredcommand.md) .</span><span class="sxs-lookup"><span data-stu-id="bf2a9-168">Initializes a command to be run and returns a new [**CDeferredCommand**](cdeferredcommand.md) object.</span></span> |
| [<span data-ttu-id="bf2a9-169">**Installez**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-169">**Remove**</span></span>](ccmdqueue-remove.md)                     | <span data-ttu-id="bf2a9-170">Supprime l’objet [**CDeferredCommand**](cdeferredcommand.md) de la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-170">Removes the [**CDeferredCommand**](cdeferredcommand.md) object from the queue.</span></span>                        |
| [<span data-ttu-id="bf2a9-171">**Utilisez**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-171">**Run**</span></span>](ccmdqueue-run.md)                           | <span data-ttu-id="bf2a9-172">Bascule en mode exécution.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-172">Switches to running mode.</span></span>                                                                              |
| [<span data-ttu-id="bf2a9-173">**SetSyncSource**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-173">**SetSyncSource**</span></span>](ccmdqueue-setsyncsource.md)       | <span data-ttu-id="bf2a9-174">Définit l’horloge utilisée pour le minutage.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-174">Sets the clock used for timing.</span></span>                                                                        |
| [<span data-ttu-id="bf2a9-175">**SetTimeAdvise**</span><span class="sxs-lookup"><span data-stu-id="bf2a9-175">**SetTimeAdvise**</span></span>](ccmdqueue-settimeadvise.md)       | <span data-ttu-id="bf2a9-176">Configure un événement de minuterie avec l’horloge de référence.</span><span class="sxs-lookup"><span data-stu-id="bf2a9-176">Sets up a timer event with the reference clock.</span></span>                                                        |



 

 

 



