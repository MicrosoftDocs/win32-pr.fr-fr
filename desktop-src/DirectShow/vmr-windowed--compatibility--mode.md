---
description: Mode avec fenêtres VMR (compatibilité)
ms.assetid: e9fb1c83-860a-44c1-9633-c86f5d0fdadd
title: Mode avec fenêtres VMR (compatibilité)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7312274881642d15b844e0fa950f72e52f92db8f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104560887"
---
# <a name="vmr-windowed-compatibility-mode"></a><span data-ttu-id="4c7dd-103">Mode avec fenêtres VMR (compatibilité)</span><span class="sxs-lookup"><span data-stu-id="4c7dd-103">VMR Windowed (Compatibility) Mode</span></span>

<span data-ttu-id="4c7dd-104">VMR est conçu pour être compatible avec toutes les applications DirectShow existantes.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-104">The VMR is designed to be compatible with all existing DirectShow applications.</span></span> <span data-ttu-id="4c7dd-105">Lorsqu’il est utilisé avec une application existante, VMR fonctionne en mode fenêtre avec un seul flux vidéo, également appelé mode de compatibilité.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-105">When it is used with an existing application, the VMR operates in windowed mode with a single video stream, also called compatibility mode.</span></span> <span data-ttu-id="4c7dd-106">Ce mode est fourni, car VMR-7 est le convertisseur par défaut sur Windows XP et est donc automatiquement utilisé dans les appels aux méthodes [Connect intelligentes](intelligent-connect.md) telles que [**IGraphBuilder :: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile).</span><span class="sxs-lookup"><span data-stu-id="4c7dd-106">This mode is provided because the VMR-7 is the default renderer on Windows XP, and is therefore automatically used in calls to [Intelligent Connect](intelligent-connect.md) methods such as [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile).</span></span> <span data-ttu-id="4c7dd-107">Si votre application utilise la connexion intelligente et nécessite uniquement des fonctionnalités de rendu de base, vous n’avez pas besoin de code spécial pour effectuer une restitution correcte avec VMR-7 sur Windows XP.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-107">If your application uses Intelligent Connect and requires only basic rendering capabilities, you do not need any special code to render correctly with the VMR-7 on Windows XP.</span></span>

<span data-ttu-id="4c7dd-108">VMR-9 s’exécute également en mode fenêtre/compatibilité par défaut.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-108">The VMR-9 also runs in windowed/compatibility mode by default.</span></span> <span data-ttu-id="4c7dd-109">Toutefois, VMR-9 n’est jamais le convertisseur vidéo par défaut.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-109">However, the VMR-9 is never the default video renderer.</span></span> <span data-ttu-id="4c7dd-110">Pour utiliser VMR-9 dans une application, vous devez l’ajouter explicitement au graphique de filtre.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-110">To use the VMR-9 in an application, you must explicitly add it to the filter graph.</span></span> <span data-ttu-id="4c7dd-111">Pour cette raison, et étant donné que le mode sans fenêtre offre de meilleures fonctionnalités que le mode fenêtre, il n’existe aucun avantage particulier à utiliser VMR-9 en mode fenêtre/compatibilité.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-111">For that reason, and because windowless mode provides better functionality than windowed mode, there is no particular advantage to using the VMR-9 in windowed/compatibility mode.</span></span>

<span data-ttu-id="4c7dd-112">**Utilisation de VMR-7 en mode fenêtre/compatibilité**</span><span class="sxs-lookup"><span data-stu-id="4c7dd-112">**Using the VMR-7 in Windowed/Compatibility Mode**</span></span>

<span data-ttu-id="4c7dd-113">Aucune programmation spéciale n’est requise pour configurer ou contrôler VMR-7 en mode fenêtre/compatibilité.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-113">No special programming is required to set up or control the VMR-7 in windowed/compatibility mode.</span></span> <span data-ttu-id="4c7dd-114">Il vous suffit de générer le graphique de filtre à l’aide des appels de génération de graphiques standard, et VMR-7 utilise par défaut ce mode.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-114">Simply build the filter graph using the standard graph-building calls, and the VMR-7 will default to this mode.</span></span>

<span data-ttu-id="4c7dd-115">En mode fenêtre/compatibilité, VMR-7 crée sa propre fenêtre pour afficher la vidéo.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-115">In windowed/compatibility mode, the VMR-7 creates its own window to display the video.</span></span> <span data-ttu-id="4c7dd-116">Pour ce faire, il charge le composant Gestionnaire de fenêtres, qui expose les interfaces [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) et [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo) .</span><span class="sxs-lookup"><span data-stu-id="4c7dd-116">To do so, it loads the Window Manager component, which exposes the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) and [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo) interfaces.</span></span> <span data-ttu-id="4c7dd-117">Votre application peut interroger le gestionnaire de graphique de filtre pour ces interfaces, exactement comme vous le feriez avec l’ancien filtre de convertisseur vidéo.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-117">Your application can query the Filter Graph Manager for these interfaces, exactly as you would with the old Video Renderer filter.</span></span> <span data-ttu-id="4c7dd-118">Pour plus d’informations, consultez [utilisation du mode fenêtre](using-windowed-mode.md).</span><span class="sxs-lookup"><span data-stu-id="4c7dd-118">For more information, see [Using Windowed Mode](using-windowed-mode.md).</span></span>

<span data-ttu-id="4c7dd-119">L’illustration suivante montre VMR-7 en mode fenêtre/compatibilité.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-119">The following illustration shows the VMR-7 in windowed/compatibility mode.</span></span>

![VMR en mode de compatibilité](images/vmr-compat-mode.png)

<span data-ttu-id="4c7dd-121">Pour garantir le niveau de compatibilité maximal, la fenêtre vidéo a le même nom de classe que celui créé par l’ancien filtre de convertisseur vidéo, et la plupart du code du gestionnaire de fenêtres de l’ancien convertisseur vidéo est toujours utilisé par VMR.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-121">To guarantee the maximum level of compatibility, the video window has the same class name as the one created by the old Video Renderer filter, and most of the Window Manager code from the old Video Renderer is still used by the VMR.</span></span> <span data-ttu-id="4c7dd-122">En mode fenêtre/compatibilité, VMR n’utilise plus de ressources système que l’ancien convertisseur vidéo.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-122">In windowed/compatibility mode, the VMR consumes no more system resources than the old Video Renderer.</span></span> <span data-ttu-id="4c7dd-123">Dans la mesure où VMR-7 n’a qu’un seul flux d’entrée en mode fenêtre/compatibilité, il ne charge pas ses composants mixer ou compositeur.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-123">Since the VMR-7 has only one input stream in windowed/compatibility mode, it does not load its mixer or compositor components.</span></span>

<span data-ttu-id="4c7dd-124">Par défaut, VMR étire l’image pour remplir la fenêtre vidéo.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-124">By default, the VMR stretches the image to fill the video window.</span></span> <span data-ttu-id="4c7dd-125">Pour conserver les proportions de la source, appelez la méthode [**IVMRAspectRatioControl :: SetAspectRatioMode**](/windows/desktop/api/Strmif/nf-strmif-ivmraspectratiocontrol-setaspectratiomode) avec l' \_ indicateur de zone de lettre VMR ARMODE \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="4c7dd-125">To preserve the aspect ratio of the source, call the [**IVMRAspectRatioControl::SetAspectRatioMode**](/windows/desktop/api/Strmif/nf-strmif-ivmraspectratiocontrol-setaspectratiomode) method with the VMR\_ARMODE\_LETTER\_BOX flag.</span></span>

> [!Note]  
> <span data-ttu-id="4c7dd-126">Les applications MFC qui placent la fenêtre vidéo dans une fenêtre enfant doivent définir un \_ Gestionnaire de messages WM ERASEBKGND vide, sans quoi la zone d’affichage vidéo ne se repeintra pas correctement.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-126">MFC applications that place the video window in a child window must define an empty WM\_ERASEBKGND message handler, or the video display area will not repaint correctly.</span></span>

 

<span data-ttu-id="4c7dd-127">**Utilisation de VMR-7 en mode fenêtre/compatibilité avec plusieurs flux**</span><span class="sxs-lookup"><span data-stu-id="4c7dd-127">**Using the VMR-7 in Windowed/Compatibility Mode with Multiple Streams**</span></span>

<span data-ttu-id="4c7dd-128">En mode fenêtre/compatibilité, VMR-7 crée une seule broche d’entrée par défaut et désactive le mode de mixage.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-128">In windowed/compatibility mode, the VMR-7 creates a single input pin by default, and disables mixing mode.</span></span> <span data-ttu-id="4c7dd-129">Pour activer le mode de mixage, vous devez configurer VMR avant de le connecter.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-129">To enable mixing mode, you must configure the VMR before you connect it.</span></span> <span data-ttu-id="4c7dd-130">Pour plus d’informations, consultez [VMR avec plusieurs flux (mode de mixage)](vmr-with-multiple-streams--mixing-mode.md).</span><span class="sxs-lookup"><span data-stu-id="4c7dd-130">For more information, see [VMR with Multiple Streams (Mixing Mode)](vmr-with-multiple-streams--mixing-mode.md).</span></span> <span data-ttu-id="4c7dd-131">En mode de mixage, VMR charge les composants de mixage et de compositeur, qui nécessitent davantage de ressources système.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-131">In mixing mode, the VMR loads the mixing and compositor components, which require more system resources.</span></span>

<span data-ttu-id="4c7dd-132">**Utilisation de VMR-9 en mode fenêtre**</span><span class="sxs-lookup"><span data-stu-id="4c7dd-132">**Using the VMR-9 in Windowed Mode**</span></span>

<span data-ttu-id="4c7dd-133">Étant donné que VMR-9 n’est pas le convertisseur par défaut, il n’a pas de mode de compatibilité comme tel.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-133">Because the VMR-9 is not the default renderer, it does not have a compatibility mode as such.</span></span> <span data-ttu-id="4c7dd-134">Au lieu de cela, VMR-9 passe par défaut au mode fenêtre avec quatre broches d’entrée.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-134">Instead, the VMR-9 defaults to windowed mode with four input pins.</span></span> <span data-ttu-id="4c7dd-135">Vous pouvez utiliser ce mode pour mélanger jusqu’à quatre flux vidéo.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-135">You can use this mode to mix up to four video streams.</span></span> <span data-ttu-id="4c7dd-136">Si vous devez mélanger un plus grand nombre de flux, vous devez le configurer comme décrit dans [VMR avec plusieurs flux (mode de mixage)](vmr-with-multiple-streams--mixing-mode.md).</span><span class="sxs-lookup"><span data-stu-id="4c7dd-136">If you need to mix a larger number of streams, you must configure it as described in [VMR with Multiple Streams (Mixing Mode)](vmr-with-multiple-streams--mixing-mode.md).</span></span> <span data-ttu-id="4c7dd-137">Sinon, VMR-9 en mode fenêtre se comporte exactement comme VMR-7 en mode fenêtre/compatibilité.</span><span class="sxs-lookup"><span data-stu-id="4c7dd-137">Otherwise, the VMR-9 in windowed mode behaves exactly like the VMR-7 in windowed/compatibility mode.</span></span>

 

 



