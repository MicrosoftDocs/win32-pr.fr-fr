---
description: Flux facultatifs
ms.assetid: 94477a71-c267-4602-893b-1bd1256b34ef
title: Flux facultatifs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 940be49196396aa2d1fa71502213b0d4fbacb5ea
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "106513281"
---
# <a name="optional-streams"></a><span data-ttu-id="fb172-103">Flux facultatifs</span><span class="sxs-lookup"><span data-stu-id="fb172-103">Optional Streams</span></span>

<span data-ttu-id="fb172-104">Un DMO peut désigner certains de ses flux de sortie comme facultatifs.</span><span class="sxs-lookup"><span data-stu-id="fb172-104">A DMO can designate some of its output streams as optional.</span></span> <span data-ttu-id="fb172-105">Un flux facultatif produit des données que l’application peut ignorer, soit complètement, soit sur des échantillons occasionnels.</span><span class="sxs-lookup"><span data-stu-id="fb172-105">An optional stream produces data that the application can discard, either completely or on occasional samples.</span></span> <span data-ttu-id="fb172-106">Par exemple, un flux facultatif peut contenir des informations supplémentaires sur un flux principal.</span><span class="sxs-lookup"><span data-stu-id="fb172-106">For example, an optional stream might contain additional information about a primary stream.</span></span>

<span data-ttu-id="fb172-107">Pour déterminer si un flux est facultatif, appelez la méthode [**IMediaObject :: GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) et vérifiez le paramètre *pdwFlags* .</span><span class="sxs-lookup"><span data-stu-id="fb172-107">To query whether a stream is optional, call the [**IMediaObject::GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) method and check the *pdwFlags* parameter.</span></span> <span data-ttu-id="fb172-108">Les flux facultatifs renvoient \_ l' \_ indicateur Ignorable STREAMF de sortie DMO \_ ou \_ l' \_ indicateur facultatif STREAMF de sortie DMO \_ .</span><span class="sxs-lookup"><span data-stu-id="fb172-108">Optional streams return either the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag or the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag.</span></span> <span data-ttu-id="fb172-109">Ces indicateurs ont presque la même signification ; une différence mineure entre les deux sera expliquée sous peu.</span><span class="sxs-lookup"><span data-stu-id="fb172-109">These flags mean almost the same thing; one minor difference between them will be explained shortly.</span></span>

<span data-ttu-id="fb172-110">Si un flux est facultatif, le client peut demander à DMO d’ignorer les données de ce flux lors du traitement de la sortie.</span><span class="sxs-lookup"><span data-stu-id="fb172-110">If a stream is optional, the client can instruct the DMO to discard data from that stream when it processes the output.</span></span> <span data-ttu-id="fb172-111">Pour ce faire, appelez la méthode [**IMediaObject ::P rocessoutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) et affectez la **valeur null** à la mémoire tampon de sortie pour chaque flux que vous souhaitez ignorer.</span><span class="sxs-lookup"><span data-stu-id="fb172-111">To do so, call the [**IMediaObject::ProcessOutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) method and set the output buffer to **NULL** for each stream that you wish to discard.</span></span> <span data-ttu-id="fb172-112">(La mémoire tampon de sortie est spécifiée dans le membre **pbuffer** de la [**\_ \_ \_ mémoire tampon de données de sortie DMO**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) Définissez également la \_ sortie du processus DMO \_ \_ ignorée \_ quand \_ aucun \_ indicateur de mémoire tampon n’est défini dans le paramètre *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="fb172-112">(The output buffer is specified in the **pBuffer** member of the [**DMO\_OUTPUT\_DATA\_BUFFER**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) Also set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag in the *dwFlags* parameter.</span></span>

<span data-ttu-id="fb172-113">Pour chaque flux où le pointeur *pbuffer* a la **valeur null**, DMO tentera d’ignorer les données.</span><span class="sxs-lookup"><span data-stu-id="fb172-113">For each stream where the *pBuffer* pointer is **NULL**, the DMO will attempt to discard the data.</span></span> <span data-ttu-id="fb172-114">Si le flux est facultatif, il est garanti que les données sont rejetées par DMO.</span><span class="sxs-lookup"><span data-stu-id="fb172-114">If the stream is optional, the DMO is guaranteed to discard the data.</span></span> <span data-ttu-id="fb172-115">Si le flux n’est pas facultatif, DMO rejette les données lorsque cela est possible, mais n’est pas sûr de le faire.</span><span class="sxs-lookup"><span data-stu-id="fb172-115">If the stream is not optional, the DMO discards the data when possible, but is not guaranteed to do so.</span></span> <span data-ttu-id="fb172-116">S’il ne peut pas ignorer les données, il définit \_ l' \_ \_ indicateur BUFFERF Incomplete des données de sortie DMO \_ .</span><span class="sxs-lookup"><span data-stu-id="fb172-116">If it cannot discard the data, it sets the DMO\_OUTPUT\_DATA\_BUFFERF\_INCOMPLETE flag.</span></span> <span data-ttu-id="fb172-117">Si vous définissez un pointeur *pbuffer* sur la **valeur null** mais que vous ne définissez pas la \_ sortie du processus DMO \_ \_ ignorée \_ quand \_ aucun indicateur de \_ mémoire tampon n’est défini, DMO n’ignore pas les données.</span><span class="sxs-lookup"><span data-stu-id="fb172-117">If you set a *pBuffer* pointer to **NULL** but do not set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag, the DMO does not discard the data.</span></span> <span data-ttu-id="fb172-118">Dans ce cas, le DMO met en mémoire tampon la sortie en interne, ou fait simplement échouer l’appel **ProcessOutput** .</span><span class="sxs-lookup"><span data-stu-id="fb172-118">In that case, the DMO either buffers the output internally, or simply fails the **ProcessOutput** call.</span></span>

<span data-ttu-id="fb172-119">La seule différence fonctionnelle entre l' \_ indicateur facultatif de sortie DMO \_ STREAMF \_ et l' \_ indicateur de suppression STREAMF de sortie DMO \_ \_ est le suivant :</span><span class="sxs-lookup"><span data-stu-id="fb172-119">The only functional difference between the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag and the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag is the following:</span></span>

-   <span data-ttu-id="fb172-120">L' \_ \_ indicateur facultatif STREAMF de sortie DMO \_ indique que le client n’a pas besoin de définir un type de média sur ce flux.</span><span class="sxs-lookup"><span data-stu-id="fb172-120">The DMO\_OUTPUT\_STREAMF\_OPTIONAL flag indicates that the client does not have to set a media type on that stream.</span></span> <span data-ttu-id="fb172-121">Toutefois, si le client commence à traiter des données sans définir le type de média pour ce flux, il doit ignorer les données de ce flux pour toute la durée de la diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="fb172-121">However, if the client begins processing data without setting the media type for that stream, then it must discard the data from that stream for the entire duration of streaming.</span></span> <span data-ttu-id="fb172-122">Si vous souhaitez ignorer les échantillons de manière sélective, vous devez définir le type de média.</span><span class="sxs-lookup"><span data-stu-id="fb172-122">If you want to discard samples selectively, then you must set the media type.</span></span>
-   <span data-ttu-id="fb172-123">L' \_ indicateur de \_ suppression STREAMF de sortie DMO \_ indique que, bien que le flux soit facultatif, il requiert toujours un type de média.</span><span class="sxs-lookup"><span data-stu-id="fb172-123">The DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag indicates that, although the stream is optional, it always requires a media type.</span></span>

## <a name="related-topics"></a><span data-ttu-id="fb172-124">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="fb172-124">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fb172-125">Hébergement direct d’un DMO</span><span class="sxs-lookup"><span data-stu-id="fb172-125">Directly Hosting a DMO</span></span>](directly-hosting-a-dmo.md)
</dt> </dl>

 

 



