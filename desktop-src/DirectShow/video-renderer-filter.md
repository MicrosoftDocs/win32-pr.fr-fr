---
description: Filtre de convertisseur vidéo
ms.assetid: 7719ed9d-e3b9-4c84-b587-4e120b5cabf8
title: Filtre de convertisseur vidéo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c71e72375a43a57ce94b38d01f48abba9309e603
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104201838"
---
# <a name="video-renderer-filter"></a><span data-ttu-id="cf6b8-103">Filtre de convertisseur vidéo</span><span class="sxs-lookup"><span data-stu-id="cf6b8-103">Video Renderer Filter</span></span>

<span data-ttu-id="cf6b8-104">Le filtre de convertisseur vidéo est un convertisseur vidéo robuste et polyvalent.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-104">The Video Renderer filter is a robust, all-purpose video renderer.</span></span>

> [!Note]  
> <span data-ttu-id="cf6b8-105">Sur Windows XP et versions ultérieures, le convertisseur vidéo par défaut est le [filtre de convertisseur de mixage vidéo 7](video-mixing-renderer-filter-7.md) (VMR-7).</span><span class="sxs-lookup"><span data-stu-id="cf6b8-105">On Windows XP and later, the default video renderer is the [Video Mixing Renderer Filter 7](video-mixing-renderer-filter-7.md) (VMR-7).</span></span> <span data-ttu-id="cf6b8-106">VMR-7 et le convertisseur vidéo ont tous les deux le nom convivial « Render vidéo ».</span><span class="sxs-lookup"><span data-stu-id="cf6b8-106">The VMR-7 and the Video Renderer both have the friendly name "Video Renderer."</span></span> <span data-ttu-id="cf6b8-107">Sur les plateformes antérieures, le convertisseur vidéo est le convertisseur par défaut.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-107">On earlier platforms, the Video Renderer is the default renderer.</span></span> <span data-ttu-id="cf6b8-108">Consultez [choix du convertisseur approprié](choosing-the-right-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="cf6b8-108">See [Choosing the Right Renderer](choosing-the-right-renderer.md).</span></span>

 

<span data-ttu-id="cf6b8-109">Le convertisseur vidéo utilise DirectDraw et des surfaces de recouvrement, si la carte vidéo les prend en charge.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-109">The Video Renderer uses DirectDraw and overlay surfaces, if the video card supports them.</span></span> <span data-ttu-id="cf6b8-110">Le gestionnaire de graphique de filtre expose l’interface [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) , qui permet aux applications de définir et de récupérer des propriétés sur le convertisseur vidéo.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-110">The Filter Graph Manager exposes the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) interface, which enables applications to set and retrieve properties on the Video Renderer.</span></span> <span data-ttu-id="cf6b8-111">Avec les cartes vidéo plus récentes, le convertisseur vidéo prend en charge le rendu plein écran.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-111">With newer video cards, the Video Renderer supports full-screen rendering.</span></span> <span data-ttu-id="cf6b8-112">Dans le cas contraire, le gestionnaire de graphique de filtre bascule automatiquement vers le filtre de [convertisseur plein écran](full-screen-renderer-filter.md) pour le mode plein écran.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-112">Otherwise, the Filter Graph Manager automatically switches to the [Full Screen Renderer](full-screen-renderer-filter.md) filter for full-screen mode.</span></span> <span data-ttu-id="cf6b8-113">Pour plus d’informations, consultez [**IVideoWindow ::p ut \_ FullScreenMode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) .</span><span class="sxs-lookup"><span data-stu-id="cf6b8-113">See [**IVideoWindow::put\_FullScreenMode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) for more information.</span></span>

-   <span data-ttu-id="cf6b8-114">\[! Précieuse\]</span><span class="sxs-lookup"><span data-stu-id="cf6b8-114">\[!Important\]</span></span>  
    > <span data-ttu-id="cf6b8-115">Normalement, la fenêtre vidéo de ce filtre traite les messages sur un thread de travail créé par le gestionnaire de graphique de filtre.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-115">Normally, this filter's video window processes messages on a worker thread created by the Filter Graph Manager.</span></span> <span data-ttu-id="cf6b8-116">Cependant, si une application crée directement le filtre à l’aide de **CoCreateInstance**, la fenêtre vidéo traite les messages sur le thread d’application.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-116">Howerver, if an application directly creates the filter using **CoCreateInstance**, the video window processes messages on the application thread.</span></span> <span data-ttu-id="cf6b8-117">Dans ce cas, le thread d’application doit avoir une boucle de message pour distribuer les messages dans la fenêtre vidéo.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-117">In that case, the application thread must have a message loop, to dispatch messages to the video window.</span></span> <span data-ttu-id="cf6b8-118">En outre, le thread ne doit pas quitter jusqu’à l’appel de la **version** finale du convertisseur vidéo, qui se produit lorsque le gestionnaire de graphique de filtre s’arrête.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-118">Also, the thread must not exit until the final **Release** call to the Video Renderer, which occurs when the Filter Graph Manager shuts down.</span></span> <span data-ttu-id="cf6b8-119">Dans le cas contraire, l’application peut se bloquer.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-119">Otherwise, the application might deadlock.</span></span>

     



|                                          |                                                                                                                                                                                                                                                                                                                                                                                                          |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cf6b8-120">Interfaces de filtre</span><span class="sxs-lookup"><span data-stu-id="cf6b8-120">Filter Interfaces</span></span>                        | <span data-ttu-id="cf6b8-121">[**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo), [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2), [**IDirectDrawVideo**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo), [**IKsPropertySet**](ikspropertyset.md), [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span><span class="sxs-lookup"><span data-stu-id="cf6b8-121">[**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo), [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2), [**IDirectDrawVideo**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo), [**IKsPropertySet**](ikspropertyset.md), [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span></span> |
| <span data-ttu-id="cf6b8-122">Types de média de broche d’entrée</span><span class="sxs-lookup"><span data-stu-id="cf6b8-122">Input Pin Media Types</span></span>                    | <span data-ttu-id="cf6b8-123">Formats vidéo non compressés.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-123">Uncompressed video formats.</span></span>                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="cf6b8-124">Interfaces pin d’entrée</span><span class="sxs-lookup"><span data-stu-id="cf6b8-124">Input Pin Interfaces</span></span>                     | <span data-ttu-id="cf6b8-125">[**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay), [**IPIN**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="cf6b8-125">[**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span>                                                                                                                                                                                                                           |
| <span data-ttu-id="cf6b8-126">Types de média de broche de sortie</span><span class="sxs-lookup"><span data-stu-id="cf6b8-126">Output Pin Media Types</span></span>                   | <span data-ttu-id="cf6b8-127">Non applicable.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-127">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="cf6b8-128">Interfaces de broche de sortie</span><span class="sxs-lookup"><span data-stu-id="cf6b8-128">Output Pin Interfaces</span></span>                    | <span data-ttu-id="cf6b8-129">Non applicable.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-129">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="cf6b8-130">CLSID du filtre</span><span class="sxs-lookup"><span data-stu-id="cf6b8-130">Filter CLSID</span></span>                             | <span data-ttu-id="cf6b8-131">CLSID \_ VideoRenderer</span><span class="sxs-lookup"><span data-stu-id="cf6b8-131">CLSID\_VideoRenderer</span></span>                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="cf6b8-132">CLSID de page de propriétés</span><span class="sxs-lookup"><span data-stu-id="cf6b8-132">Property Page CLSID</span></span>                      | <span data-ttu-id="cf6b8-133">Aucune page de propriétés.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-133">No property page.</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="cf6b8-134">Exécutable</span><span class="sxs-lookup"><span data-stu-id="cf6b8-134">Executable</span></span>                               | <span data-ttu-id="cf6b8-135">quartz.dll</span><span class="sxs-lookup"><span data-stu-id="cf6b8-135">quartz.dll</span></span>                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="cf6b8-136">Mérite</span><span class="sxs-lookup"><span data-stu-id="cf6b8-136">Merit</span></span>](merit.md)                       | <span data-ttu-id="cf6b8-137">Windows XP et versions ultérieures : **méritent \_ peu probable**</span><span class="sxs-lookup"><span data-stu-id="cf6b8-137">Windows XP and later: **MERIT\_UNLIKELY**</span></span>                                                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="cf6b8-138">Catégorie de filtre</span><span class="sxs-lookup"><span data-stu-id="cf6b8-138">Filter Category</span></span>](filter-categories.md) | <span data-ttu-id="cf6b8-139">**CLSID \_ LegacyAmFilterCategory**</span><span class="sxs-lookup"><span data-stu-id="cf6b8-139">**CLSID\_LegacyAmFilterCategory**</span></span>                                                                                                                                                                                                                                                                                                                                                                        |



 

## <a name="remarks"></a><span data-ttu-id="cf6b8-140">Notes</span><span class="sxs-lookup"><span data-stu-id="cf6b8-140">Remarks</span></span>

<span data-ttu-id="cf6b8-141">Dans la version Debug de Quartz.dll, si le \_ niveau de débogage de trace du journal est défini à 5 ou plus, le convertisseur vidéo affiche les horodatages de chaque image dans la fenêtre vidéo.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-141">In the debug version of Quartz.dll, if the LOG\_TRACE debug level is set to 5 or higher, the Video Renderer displays each frame's time stamps on the video window.</span></span> <span data-ttu-id="cf6b8-142">Ces chiffres n’apparaissent pas dans la version commercialisée de la DLL.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-142">These numbers do not appear in the retail version of the DLL.</span></span> <span data-ttu-id="cf6b8-143">Pour plus d’informations, consultez [fonctions de sortie de débogage](debug-output-functions.md).</span><span class="sxs-lookup"><span data-stu-id="cf6b8-143">For more information, see [Debug Output Functions](debug-output-functions.md).</span></span>

<span data-ttu-id="cf6b8-144">Les remarques suivantes sont destinées aux développeurs de filtres :</span><span class="sxs-lookup"><span data-stu-id="cf6b8-144">The following remarks are intended for filter developers:</span></span>

<span data-ttu-id="cf6b8-145">Le convertisseur vidéo accepte les formats YUV si la carte vidéo graphique prend en charge les surfaces de recouvrement YUV.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-145">The Video Renderer accepts YUV formats if the video graphics card supports YUV overlay surfaces.</span></span> <span data-ttu-id="cf6b8-146">Toutefois, lorsqu’il se connecte pour la première fois au filtre en amont, le convertisseur vidéo requiert un format RVB qui correspond à la profondeur des couleurs des paramètres actuels de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-146">When it first connects to the upstream filter, however, the Video Renderer requires an RGB format that matches the color depth of the current monitor settings.</span></span> <span data-ttu-id="cf6b8-147">Par exemple, si le paramètre d’affichage actuel est couleur 24 bits, le filtre en amont doit être en mesure de fournir une vidéo RGB de 24 bits.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-147">For example, if the current display setting is 24-bit color, the upstream filter must be able to provide 24-bit RGB video.</span></span> <span data-ttu-id="cf6b8-148">Lorsque le graphique de filtre passe à l’État en exécution, le convertisseur vidéo négocie une modification de format dynamique vers l’espace de couleurs YUV approprié.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-148">When the filter graph switches to a runing state, the Video Renderer negotiates a dynamic format change to the appropriate YUV color space.</span></span>

<span data-ttu-id="cf6b8-149">En se connectant avec un type RGB, le convertisseur vidéo s’assure qu’il peut utiliser GDI au cas où DirectDraw n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-149">By connecting with an RGB type, the Video Renderer ensures that it can use GDI in case DirectDraw is not available.</span></span> <span data-ttu-id="cf6b8-150">Il bascule sur GDI si une autre application utilise la mémoire vidéo, si le rectangle vidéo chevauche deux moniteurs sur un système à plusieurs écrans, ou si le rectangle vidéo est complètement masqué par une autre fenêtre.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-150">It will switch to GDI if another application is using the video memory, if the video rectangle straddles two monitors on a multi-monitor system, or if the video rectangle is completely obscured by another window.</span></span>

> [!Note]  
> <span data-ttu-id="cf6b8-151">Le convertisseur de mixage vidéo n’effectue pas ce type de modification de format dynamique et ne nécessite pas de type de média RVB, car il n’utilise jamais GDI pour le rendu.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-151">The Video Mixing Renderer does not perform this type of dynamic format change, and does not require an RGB media type, because it never uses GDI for rendering.</span></span>

 

<span data-ttu-id="cf6b8-152">Pour négocier une modification de format, le convertisseur vidéo appelle [**IPIN :: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) avec le nouveau type de média.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-152">To negotiate a format change, the Video Renderer calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) with the new media type.</span></span> <span data-ttu-id="cf6b8-153">Si le filtre amont retourne la valeur \_ OK, le convertisseur vidéo joint le nouveau support à l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-153">If the upstream filter returns S\_OK, the Video Renderer attaches the new media to the next sample.</span></span> <span data-ttu-id="cf6b8-154">Le filtre amont doit appeler [**IMediaSample :: GetMediaType**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) sur chaque échantillon.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-154">The upstream filter should call [**IMediaSample::GetMediaType**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) on each sample.</span></span> <span data-ttu-id="cf6b8-155">Si **GetMediaType** retourne une valeur non **null** , il indique une modification de format et le filtre amont doit répondre en basculant les types de sortie.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-155">If **GetMediaType** returns a non-**NULL** value, it indicates a format change, and the upstream filter should respond by switching output types.</span></span> <span data-ttu-id="cf6b8-156">(Ne pas basculer entre les types dans la méthode **QueryAccept** .) Le filtre amont doit accepter au moins les types RVB principaux et, idéalement, doit prendre en charge les types YUV courants.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-156">(Do not switch types in the **QueryAccept** method.) The upstream filter should accept at least the major RGB types, and ideally should support the common YUV types.</span></span> <span data-ttu-id="cf6b8-157">Pendant la diffusion en continu, le convertisseur vidéo peut basculer entre les types YUV et RVB un nombre quelconque de fois.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-157">During streaming, the Video Renderer might switch back and forth between YUV and RGB types any number of times.</span></span> <span data-ttu-id="cf6b8-158">Le convertisseur vidéo n’accepte pas les modifications de format dynamique initiées par le filtre amont.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-158">The Video Renderer does not accept dynamic format changes initiated by the upstream filter.</span></span>

<span data-ttu-id="cf6b8-159">Quand le convertisseur vidéo dessine sur une surface de superposition DirectDraw, il alloue une seule mémoire tampon pour sa broche d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-159">When the Video Renderer draws to a DirectDraw overlay surface, it allocates a single buffer for its input pin.</span></span> <span data-ttu-id="cf6b8-160">Si le filtre amont tente de forcer une connexion à l’aide de plusieurs mémoires tampons, le convertisseur vidéo ne pourra pas utiliser la surface de recouvrement.</span><span class="sxs-lookup"><span data-stu-id="cf6b8-160">If the upstream filter attempts to force a connection using multiple buffers, the Video Renderer will be unable to use the overlay surface.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cf6b8-161">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="cf6b8-161">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cf6b8-162">Filtres DirectShow</span><span class="sxs-lookup"><span data-stu-id="cf6b8-162">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 



