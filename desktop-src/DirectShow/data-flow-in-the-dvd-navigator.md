---
description: Data Flow dans le navigateur DVD
ms.assetid: 14f9cfa3-5ef6-419c-9196-2e4060549c03
title: Data Flow dans le navigateur DVD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29a981d2d7b528163abb53478e9e8f2ab88d46c0
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "103747428"
---
# <a name="data-flow-in-the-dvd-navigator"></a><span data-ttu-id="30753-103">Data Flow dans le navigateur DVD</span><span class="sxs-lookup"><span data-stu-id="30753-103">Data Flow in the DVD Navigator</span></span>

<span data-ttu-id="30753-104">Le navigateur DVD comporte des méthodes pour arrêter et suspendre la lecture.</span><span class="sxs-lookup"><span data-stu-id="30753-104">The DVD Navigator has methods to stop and pause playback.</span></span> <span data-ttu-id="30753-105">Ces méthodes sont similaires, mais pas identiques, aux méthodes **Stop** et **Pause** dans [**IMediaControl**](/windows/desktop/api/Control/nn-control-imediacontrol).</span><span class="sxs-lookup"><span data-stu-id="30753-105">These methods are similar — but not identical — to the **Stop** and **Pause** methods in [**IMediaControl**](/windows/desktop/api/Control/nn-control-imediacontrol).</span></span> <span data-ttu-id="30753-106">Voici la différence entre les deux :</span><span class="sxs-lookup"><span data-stu-id="30753-106">Here is the difference between them:</span></span>

-   <span data-ttu-id="30753-107">Les méthodes **IDvdControl2** changent ce que le navigateur DVD lit à partir du disque.</span><span class="sxs-lookup"><span data-stu-id="30753-107">The **IDvdControl2** methods change what the DVD Navigator reads from the disk.</span></span> <span data-ttu-id="30753-108">Elles ne modifient pas l’état du graphique.</span><span class="sxs-lookup"><span data-stu-id="30753-108">They do not change the state of the graph.</span></span>
-   <span data-ttu-id="30753-109">Les méthodes **IMediaControl** modifient l’état du graphique.</span><span class="sxs-lookup"><span data-stu-id="30753-109">The **IMediaControl** methods change the state of the graph.</span></span> <span data-ttu-id="30753-110">Ils ne changent pas ce que le navigateur DVD lit à partir du disque.</span><span class="sxs-lookup"><span data-stu-id="30753-110">They do not change what the DVD Navigator reads from the disk.</span></span> <span data-ttu-id="30753-111">(Il existe une exception importante, décrite dans la section suivante, associée à la méthode **Stop** .)</span><span class="sxs-lookup"><span data-stu-id="30753-111">(There is one important exception, explained in the next section, related to the **Stop** method.)</span></span>

<span data-ttu-id="30753-112">Par exemple, [**IDvdControl2 ::P méthode ause**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-pause) émet la commande « pause on » de l’annexe J \_ , mais n’interrompt pas le graphique de filtre.</span><span class="sxs-lookup"><span data-stu-id="30753-112">For example, [**IDvdControl2::Pause**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-pause) method issues the Annex J "Pause\_On" command, but does not pause the filter graph.</span></span> <span data-ttu-id="30753-113">La méthode [**IMediaControl ::P ause**](/windows/desktop/api/Control/nf-control-imediacontrol-pause) , en revanche, interrompt le graphique mais n’émet pas de commande de DVD.</span><span class="sxs-lookup"><span data-stu-id="30753-113">The [**IMediaControl::Pause**](/windows/desktop/api/Control/nf-control-imediacontrol-pause) method, on the other hand, pauses the graph but does not issue any DVD command.</span></span>

<span data-ttu-id="30753-114">En général, utilisez les méthodes **IMediaControl ::P ause** et **Stop** à la place des méthodes **IDvdControl2** correspondantes.</span><span class="sxs-lookup"><span data-stu-id="30753-114">In general, use the **IMediaControl::Pause** and **Stop** methods instead of the corresponding **IDvdControl2** methods.</span></span> <span data-ttu-id="30753-115">Les méthodes **IMediaControl** présentent des latences très faibles, tandis que les méthodes **IDvdControl2** peuvent avoir jusqu’à deux secondes de latence.</span><span class="sxs-lookup"><span data-stu-id="30753-115">The **IMediaControl** methods have very small latencies, whereas the **IDvdControl2** methods can have up to two seconds of latency.</span></span>

<span data-ttu-id="30753-116">Arrêt de la lecture</span><span class="sxs-lookup"><span data-stu-id="30753-116">Stopping Playback</span></span>

<span data-ttu-id="30753-117">Le comportement de [**IMediaControl :: Stop**](/windows/desktop/api/Control/nf-control-imediacontrol-stop) dépend d’un indicateur que vous pouvez définir avec la méthode [**IDvdControl2 :: SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) .</span><span class="sxs-lookup"><span data-stu-id="30753-117">The behavior of [**IMediaControl::Stop**](/windows/desktop/api/Control/nf-control-imediacontrol-stop) depends on a flag that you can set with the [**IDvdControl2::SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) method.</span></span>

-   <span data-ttu-id="30753-118">Si l' \_ indicateur RESETONSTOP DVD est **false**, **IMediaControl :: Stop** arrête le graphique, mais ne modifie pas le domaine du navigateur DVD.</span><span class="sxs-lookup"><span data-stu-id="30753-118">If the DVD\_ResetOnStop flag is **FALSE**, **IMediaControl::Stop** stops the graph, but does not change the DVD Navigator's domain.</span></span> <span data-ttu-id="30753-119">Lorsque vous appelez à nouveau exécuter, la lecture reprend à partir de la position actuelle.</span><span class="sxs-lookup"><span data-stu-id="30753-119">When you call run again, playback resumes from the current position.</span></span>
-   <span data-ttu-id="30753-120">Si \_ le DVD ResetOnStop a la **valeur true**, **IMediaControl :: Stop** provoque la réinitialisation du navigateur DVD.</span><span class="sxs-lookup"><span data-stu-id="30753-120">If DVD\_ResetOnStop is **TRUE**, **IMediaControl::Stop** causes the DVD Navigator to reset.</span></span> <span data-ttu-id="30753-121">Quand vous appelez [**IMediaControl :: Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run) à nouveau, le navigateur DVD est lu à partir du premier domaine Play, comme si vous aviez inséré le DVD pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="30753-121">When you call [**IMediaControl::Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run) again, the DVD Navigator plays from the First Play domain, as if you were inserting the DVD for the first time.</span></span>

<span data-ttu-id="30753-122">L' \_ indicateur RESETONSTOP DVD est **true** par défaut, pour la compatibilité avec les applications plus anciennes.</span><span class="sxs-lookup"><span data-stu-id="30753-122">The DVD\_ResetOnStop flag is **TRUE** by default, for compatibility with older applications.</span></span> <span data-ttu-id="30753-123">En règle générale, toutefois, vous devez remplacer la valeur par défaut et définir l’indicateur sur **false**.</span><span class="sxs-lookup"><span data-stu-id="30753-123">Generally, however, you should override the default and set the flag to **FALSE**.</span></span> <span data-ttu-id="30753-124">En effet, certains événements peuvent entraîner l’arrêt du graphique pendant la lecture.</span><span class="sxs-lookup"><span data-stu-id="30753-124">The reason is that certain events can cause the graph to stop during playback.</span></span> <span data-ttu-id="30753-125">Par exemple, si la résolution d’affichage change, le graphique de filtre s’arrête, reconnecte le convertisseur vidéo et redémarre.</span><span class="sxs-lookup"><span data-stu-id="30753-125">For example, if the display resolution changes, the filter graph stops, reconnects the video renderer, and restarts.</span></span> <span data-ttu-id="30753-126">Si le DVD \_ ResetOnStop a la **valeur true**, la lecture redémarrera à partir du début du disque. Ce n’est probablement pas ce que l’utilisateur attend.</span><span class="sxs-lookup"><span data-stu-id="30753-126">If DVD\_ResetOnStop is **TRUE**, playback will restart from the beginning of the disc. That is probably not what the user expects.</span></span>

<span data-ttu-id="30753-127">Par conséquent, au début de votre application, appelez la fonction **SetOption** avec DVD \_ ResetOnStop défini sur **false**.</span><span class="sxs-lookup"><span data-stu-id="30753-127">At the beginning of your application, therefore, call **SetOption** with DVD\_ResetOnStop set to **FALSE**.</span></span> <span data-ttu-id="30753-128">Si vous souhaitez arrêter la lecture et la reprendre à partir du même emplacement, appelez **IMediaControl :: Stop** ou **IMediaControl ::P ause**.</span><span class="sxs-lookup"><span data-stu-id="30753-128">If you want to stop playback and have it resume from the same location, call **IMediaControl::Stop** or **IMediaControl::Pause**.</span></span> <span data-ttu-id="30753-129">Si vous souhaitez arrêter la lecture et réinitialiser le disque, appelez **SetOption** avec DVD \_ ResetOnStop égal à **true**, puis appelez **IMediaControl :: Stop**; Enfin, appelez la fonction **SetOption** à nouveau et réinitialisez le DVD \_ ResetOnStop sur **false**.</span><span class="sxs-lookup"><span data-stu-id="30753-129">If you want to stop playback and reset the disk, call **SetOption** with DVD\_ResetOnStop equal to **TRUE**; then call **IMediaControl::Stop**; finally, call **SetOption** again and reset DVD\_ResetOnStop to **FALSE**.</span></span>

<span data-ttu-id="30753-130">Suspension de la lecture</span><span class="sxs-lookup"><span data-stu-id="30753-130">Pausing Playback</span></span>

<span data-ttu-id="30753-131">Si vous transmettez au navigateur DVD une commande alors que le graphique est en pause, la commande peut ne pas se terminer tant que le graphique n’est pas réexécuté.</span><span class="sxs-lookup"><span data-stu-id="30753-131">If you give the DVD Navigator a command while the graph is paused, the command may not complete until the graph runs again.</span></span> <span data-ttu-id="30753-132">Dans certains cas, cela peut provoquer un blocage dans votre application.</span><span class="sxs-lookup"><span data-stu-id="30753-132">In some situations, this can cause a deadlock in your application.</span></span> <span data-ttu-id="30753-133">Pour éviter les blocages, vous devez suivre deux règles :</span><span class="sxs-lookup"><span data-stu-id="30753-133">There are two rules you should follow to avoid deadlocks:</span></span>

-   <span data-ttu-id="30753-134">Pendant la suspension, n’émettez pas plus d’une commande de DVD asynchrone.</span><span class="sxs-lookup"><span data-stu-id="30753-134">While paused, do not issue more than one asynchronous DVD command.</span></span>
-   <span data-ttu-id="30753-135">Pendant la suspension, ne bloquez pas le thread d’interface utilisateur de l’application ou le thread qui modifie l’état du graphique.</span><span class="sxs-lookup"><span data-stu-id="30753-135">While paused, do not block the application's UI thread or the thread that changes the state of the graph.</span></span>

<span data-ttu-id="30753-136">La deuxième règle mérite d’être examinée plus en détail.</span><span class="sxs-lookup"><span data-stu-id="30753-136">The second rule is worth examining in more detail.</span></span> <span data-ttu-id="30753-137">Voici quelques scénarios spécifiques qui peuvent provoquer un interblocage :</span><span class="sxs-lookup"><span data-stu-id="30753-137">Here are some specific scenarios that may cause a deadlock:</span></span>

-   <span data-ttu-id="30753-138">**Scénario**: lorsqu’il est suspendu, l’application émet une commande DVD avec l’indicateur de blocage.</span><span class="sxs-lookup"><span data-stu-id="30753-138">**Scenario**: While paused, the application issues a DVD command with the blocking flag.</span></span> <span data-ttu-id="30753-139">Cela peut provoquer un blocage si le thread qui émet la commande DVD est le même que celui qui émet la commande Run.</span><span class="sxs-lookup"><span data-stu-id="30753-139">This can cause a deadlock if the thread that issues the DVD command is the same thread that issues the run command.</span></span> <span data-ttu-id="30753-140">La commande DVD est bloquée jusqu’à ce que le graphique s’exécute, mais le graphique ne peut pas s’exécuter tant que la commande n’est pas terminée.</span><span class="sxs-lookup"><span data-stu-id="30753-140">The DVD command blocks until the graph runs, but the graph cannot run until the command completes.</span></span>

    <span data-ttu-id="30753-141">**Recommandation**: émettez la commande DVD sur un thread de travail distinct ou n’utilisez pas l’indicateur de blocage.</span><span class="sxs-lookup"><span data-stu-id="30753-141">**Recommendation**: Issue the DVD command on a separate worker thread, or don't use the blocking flag.</span></span>

-   <span data-ttu-id="30753-142">**Scénario**: lorsqu’il est suspendu, l’application émet une commande de DVD, puis appelle [**IDvdCmd :: WaitForEnd**](/windows/desktop/api/Strmif/nf-strmif-idvdcmd-waitforend) sur l’objet de commande.</span><span class="sxs-lookup"><span data-stu-id="30753-142">**Scenario**: While paused, the application issues a DVD command, then calls [**IDvdCmd::WaitForEnd**](/windows/desktop/api/Strmif/nf-strmif-idvdcmd-waitforend) on the command object.</span></span> <span data-ttu-id="30753-143">Cette situation est équivalente à l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="30753-143">This situation is equivalent to the previous example.</span></span> <span data-ttu-id="30753-144">Si vous appelez **Wait** à partir du thread d’interface utilisateur, le thread d’interface utilisateur ne peut pas exécuter le graphique tant que la méthode **Wait** n’est pas débloquée, mais la méthode **Wait** n’est pas débloquée tant que le graphique n’est pas exécuté.</span><span class="sxs-lookup"><span data-stu-id="30753-144">If you call **Wait** from the UI thread, the UI thread cannot run the graph until the **Wait** method unblocks, but the **Wait** method will not unblock until the graph runs.</span></span>

    <span data-ttu-id="30753-145">**Recommandation**: appelez **Wait** sur un thread de travail.</span><span class="sxs-lookup"><span data-stu-id="30753-145">**Recommendation**: Call **Wait** on a worker thread.</span></span>

-   <span data-ttu-id="30753-146">**Scénario**: pendant que le graphique est en cours d’exécution, l’application émet une commande de DVD avec l’indicateur de blocage, puis appelle la suspension d’un autre thread.</span><span class="sxs-lookup"><span data-stu-id="30753-146">**Scenario**: While the graph is running, the application issues a DVD command with the blocking flag, and then calls pause from another thread.</span></span> <span data-ttu-id="30753-147">Il s’agit d’une condition de concurrence possible, car le graphique peut s’interrompre avant l’émission de la commande.</span><span class="sxs-lookup"><span data-stu-id="30753-147">This is a possible race condition because the graph may pause before the command is issued.</span></span> <span data-ttu-id="30753-148">Si l’un des deux threads est le thread d’interface utilisateur, vous pouvez provoquer un blocage semblable aux deux exemples précédents.</span><span class="sxs-lookup"><span data-stu-id="30753-148">If one of the two threads is the UI thread, you may cause a deadlock similar to the previous two examples.</span></span> <span data-ttu-id="30753-149">Cet exemple illustre l’importance de l’écriture de code thread-safe si votre application utilise plusieurs threads.</span><span class="sxs-lookup"><span data-stu-id="30753-149">This example illustrates the importance of writing thread-safe code if your application uses multiple threads.</span></span>

    <span data-ttu-id="30753-150">**Recommandation**: Si vous utilisez des threads de travail, assurez-vous que votre code est thread-safe.</span><span class="sxs-lookup"><span data-stu-id="30753-150">**Recommendation**: If you use worker threads, make sure your code is thread-safe.</span></span>

-   <span data-ttu-id="30753-151">**Scénario**: lorsqu’il est suspendu, l’application désactive la commande exécuter à partir de l’interface utilisateur, puis émet une commande DVD asynchrone.</span><span class="sxs-lookup"><span data-stu-id="30753-151">**Scenario**: While paused, the application disables the run command from the UI, and then issues an asynchronous DVD command.</span></span> <span data-ttu-id="30753-152">Ce cas de figure n’est pas strictement un blocage, car le thread d’application est toujours en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="30753-152">This case is not strictly a deadlock, because the application thread is still running.</span></span> <span data-ttu-id="30753-153">Toutefois, l’utilisateur ne peut plus exécuter le graphique et par conséquent, la commande ne se termine pas.</span><span class="sxs-lookup"><span data-stu-id="30753-153">However, the user is now prevented from running the graph, and therefore the command will never complete.</span></span>

    <span data-ttu-id="30753-154">**Recommandation**: lors de la suspension, laissez toujours la commande exécuter activée.</span><span class="sxs-lookup"><span data-stu-id="30753-154">**Recommendation**: When pausing, always leave the run command enabled.</span></span>

<span data-ttu-id="30753-155">Recherche d’un DVD à une heure spécifiée</span><span class="sxs-lookup"><span data-stu-id="30753-155">Seeking a DVD to a Specified Time</span></span>

<span data-ttu-id="30753-156">Pour rechercher précisément une heure spécifique sur un disque, appelez [**IMediaControl :: Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run).</span><span class="sxs-lookup"><span data-stu-id="30753-156">To accurately seek to a specified time on a disc, call [**IMediaControl::Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run).</span></span> <span data-ttu-id="30753-157">Appelez ensuite [**IDvdControl2 ::P layattime**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-playattime), en spécifiant l’heure et en définissant *dwFlags* sur l' \_ indicateur de cmd DVD \_ \_ Flush.</span><span class="sxs-lookup"><span data-stu-id="30753-157">Then call [**IDvdControl2::PlayAtTime**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-playattime), specifying the time and setting *dwFlags* to DVD\_CMD\_FLAG\_Flush.</span></span>

## <a name="related-topics"></a><span data-ttu-id="30753-158">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="30753-158">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="30753-159">Applications DVD</span><span class="sxs-lookup"><span data-stu-id="30753-159">DVD Applications</span></span>](dvd-applications.md)
</dt> </dl>

 

 



