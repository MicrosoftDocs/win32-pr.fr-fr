---
description: Filtre d’enregistreur ASF WM
ms.assetid: 1b12f65f-8d77-4d38-aad9-92bb15cc0426
title: Filtre de rédacteur ASF WM (DirectShow)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 672996124c88632228fff3a84525c9d47f2276b0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104114342"
---
# <a name="wm-asf-writer-filter-directshow"></a><span data-ttu-id="3bfe2-103">Filtre de rédacteur ASF WM (DirectShow)</span><span class="sxs-lookup"><span data-stu-id="3bfe2-103">WM ASF Writer Filter (DirectShow)</span></span>

<span data-ttu-id="3bfe2-104">L’enregistreur ASF WM est un filtre de wrapper pour l’objet Writer fourni avec le kit de développement logiciel (SDK) du format Windows Media™.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-104">The WM ASF Writer is a wrapper filter for the writer object provided with the Windows Media™ Format SDK.</span></span> <span data-ttu-id="3bfe2-105">Le filtre accepte un nombre variable de flux d’entrée et crée un fichier ASF (Advanced Systems Format).</span><span class="sxs-lookup"><span data-stu-id="3bfe2-105">The filter accepts a variable number of input streams and creates an Advanced Systems Format (ASF) file.</span></span> <span data-ttu-id="3bfe2-106">Le filtre gère l’ensemble de la compression et du multiplexage (bien que le mécanisme de compression puisse être contourné).</span><span class="sxs-lookup"><span data-stu-id="3bfe2-106">The filter handles all compression and multiplexing (although the compression mechanism can be bypassed).</span></span> <span data-ttu-id="3bfe2-107">Vous pouvez utiliser l’enregistreur ASF WM dans différents scénarios, y compris la capture vidéo numérique (DV), la recompression audio et la conversion de fichiers multimédias Audio-Video entrelacés (AVI) ou MPEG pour la diffusion réseau.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-107">You can use the WM ASF Writer in various scenarios including digital video (DV) capture, audio recompression, and conversion of Audio-Video Interleaved (AVI) or MPEG multimedia files for network streaming.</span></span> <span data-ttu-id="3bfe2-108">Ce filtre offre la seule façon de créer des fichiers audio et Windows Media Video Microsoft® Windows Media™ dans Microsoft DirectShow.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-108">This filter provides the only way to create Microsoft® Windows Media™ Audio and Windows Media Video files in Microsoft DirectShow.</span></span>

<span data-ttu-id="3bfe2-109">Pour plus d’informations, consultez [création de fichiers ASF dans DirectShow](creating-asf-files-in-directshow.md).</span><span class="sxs-lookup"><span data-stu-id="3bfe2-109">For more information, see [Creating ASF Files in DirectShow](creating-asf-files-in-directshow.md).</span></span>



|                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3bfe2-110">Interfaces de filtre</span><span class="sxs-lookup"><span data-stu-id="3bfe2-110">Filter interfaces</span></span>                        | <span data-ttu-id="3bfe2-111">[**IAMFilterMiscFlags**](/windows/desktop/api/Strmif/nn-strmif-iamfiltermiscflags), [**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IConfigAsfWriter**](/previous-versions/windows/desktop/api/Dshowasf/nn-dshowasf-iconfigasfwriter), [**IConfigAsfWriter2**](/previous-versions/windows/desktop/api/dshowasf/nn-dshowasf-iconfigasfwriter2), [**IFileSinkFilter2**](/windows/desktop/api/Strmif/nn-strmif-ifilesinkfilter2), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), **IPersistStream**, **IServiceProvider**, **ISpecifyPropertyPages** de plus, le filtre expose les interfaces du kit de développement logiciel (SDK) du format Windows Media suivantes : **IWMIndexer2**, **IWMHeaderInfo**, **IWMWriterAdvanced2**</span><span class="sxs-lookup"><span data-stu-id="3bfe2-111">[**IAMFilterMiscFlags**](/windows/desktop/api/Strmif/nn-strmif-iamfiltermiscflags), [**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IConfigAsfWriter**](/previous-versions/windows/desktop/api/Dshowasf/nn-dshowasf-iconfigasfwriter), [**IConfigAsfWriter2**](/previous-versions/windows/desktop/api/dshowasf/nn-dshowasf-iconfigasfwriter2), [**IFileSinkFilter2**](/windows/desktop/api/Strmif/nn-strmif-ifilesinkfilter2), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), **IPersistStream**, **IServiceProvider**, **ISpecifyPropertyPages** In addition, the filter exposes the following Windows Media Format SDK interfaces: **IWMIndexer2**, **IWMHeaderInfo**, **IWMWriterAdvanced2**</span></span><br/> |
| <span data-ttu-id="3bfe2-112">Types de média de broche d’entrée</span><span class="sxs-lookup"><span data-stu-id="3bfe2-112">Input pin media types</span></span>                    | <span data-ttu-id="3bfe2-113">Dépend du profil ASF.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-113">Depends on the ASF profile.</span></span> <span data-ttu-id="3bfe2-114">En général, les types audio et vidéo non compressés, bien que le filtre accepte les types compressés s’ils correspondent au profil ASF.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-114">Typically uncompressed audio and video types, although the filter will accept compressed types if they match the ASF profile.</span></span>                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="3bfe2-115">Interfaces pin d’entrée</span><span class="sxs-lookup"><span data-stu-id="3bfe2-115">Input pin interfaces</span></span>                     | <span data-ttu-id="3bfe2-116">[**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig), [**IAMWMBufferPass**](/previous-versions/windows/desktop/api/Dshowasf/nn-dshowasf-iamwmbufferpass), [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IPIN**](/windows/desktop/api/Strmif/nn-strmif-ipin), **IServiceProvider** en outre, le code confidentiel expose l’interface du kit de développement logiciel (SDK) du format Windows Media suivante : **IWMStreamConfig2** (via **IServiceProvider**)</span><span class="sxs-lookup"><span data-stu-id="3bfe2-116">[**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig), [**IAMWMBufferPass**](/previous-versions/windows/desktop/api/Dshowasf/nn-dshowasf-iamwmbufferpass), [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), **IServiceProvider** In addition, the pin exposes the following Windows Media Format SDK interface: **IWMStreamConfig2** (through **IServiceProvider**)</span></span><br/>                                                                                                                                                                                 |
| <span data-ttu-id="3bfe2-117">Types de média de broche de sortie</span><span class="sxs-lookup"><span data-stu-id="3bfe2-117">Output pin media types</span></span>                   | <span data-ttu-id="3bfe2-118">Non applicable.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-118">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="3bfe2-119">Interfaces de broche de sortie</span><span class="sxs-lookup"><span data-stu-id="3bfe2-119">Output pin interfaces</span></span>                    | <span data-ttu-id="3bfe2-120">Non applicable.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-120">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="3bfe2-121">CLSID du filtre</span><span class="sxs-lookup"><span data-stu-id="3bfe2-121">Filter CLSID</span></span>                             | <span data-ttu-id="3bfe2-122">CLSID \_ WMAsfWriter</span><span class="sxs-lookup"><span data-stu-id="3bfe2-122">CLSID\_WMAsfWriter</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="3bfe2-123">CLSID de page de propriétés</span><span class="sxs-lookup"><span data-stu-id="3bfe2-123">Property page CLSID</span></span>                      | <span data-ttu-id="3bfe2-124">CLSID \_ AsfWriterProperties</span><span class="sxs-lookup"><span data-stu-id="3bfe2-124">CLSID\_AsfWriterProperties</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="3bfe2-125">Exécutable</span><span class="sxs-lookup"><span data-stu-id="3bfe2-125">Executable</span></span>                               | <span data-ttu-id="3bfe2-126">Qasf.dll</span><span class="sxs-lookup"><span data-stu-id="3bfe2-126">Qasf.dll</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="3bfe2-127">Mérite</span><span class="sxs-lookup"><span data-stu-id="3bfe2-127">Merit</span></span>](merit.md)                       | <span data-ttu-id="3bfe2-128">MÉRITE \_ n' \_ \_ utilise pas</span><span class="sxs-lookup"><span data-stu-id="3bfe2-128">MERIT\_DO\_NOT\_USE</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="3bfe2-129">Catégorie de filtre</span><span class="sxs-lookup"><span data-stu-id="3bfe2-129">Filter Category</span></span>](filter-categories.md) | <span data-ttu-id="3bfe2-130">Non spécifié</span><span class="sxs-lookup"><span data-stu-id="3bfe2-130">Not specified</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |



 

## <a name="remarks"></a><span data-ttu-id="3bfe2-131">Notes</span><span class="sxs-lookup"><span data-stu-id="3bfe2-131">Remarks</span></span>

<span data-ttu-id="3bfe2-132">Le filtre requiert le kit de développement logiciel (SDK) du format Windows Media et ses dépendances sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-132">The filter requires the Windows Media Format Software Development Kit (SDK) and its underlying dependencies.</span></span>

<span data-ttu-id="3bfe2-133">Le nombre de broches d’entrée sur le filtre dépend de l’identificateur de profil ou de profil du flux ASF.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-133">The number of input pins on the filter dependings on the profile or profile identifier of the ASF stream.</span></span>

<span data-ttu-id="3bfe2-134">Les broches d’entrée prennent en charge une méthode à partir de l’interface **IAMStreamConfig** : [**IAMStreamConfig :: GetFormat**](/windows/desktop/api/Strmif/nf-strmif-iamstreamconfig-getformat).</span><span class="sxs-lookup"><span data-stu-id="3bfe2-134">The input pins support one method from the **IAMStreamConfig** interface: [**IAMStreamConfig::GetFormat**](/windows/desktop/api/Strmif/nf-strmif-iamstreamconfig-getformat).</span></span> <span data-ttu-id="3bfe2-135">Toutes les autres méthodes retournent E \_ NOTIMPL.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-135">All other methods return E\_NOTIMPL.</span></span> <span data-ttu-id="3bfe2-136">Appelez la méthode **GetFormat** pour interroger le format de compression de destination du pin, qui est défini par le profil ASF actuel.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-136">Call the **GetFormat** method to query the pin's destination compression format, which is defined by the current ASF profile.</span></span> <span data-ttu-id="3bfe2-137">Utilisez l’interface [**IConfigAsfWriter**](/previous-versions/windows/desktop/api/Dshowasf/nn-dshowasf-iconfigasfwriter) pour définir le profil.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-137">Use the [**IConfigAsfWriter**](/previous-versions/windows/desktop/api/Dshowasf/nn-dshowasf-iconfigasfwriter) interface to set the profile.</span></span>

<span data-ttu-id="3bfe2-138">Vous pouvez utiliser l’interface **IServiceProvider** du filtre pour obtenir un pointeur vers l’interface **IWMWriterAdvanced2** , qui est définie dans le kit de développement logiciel (SDK) du format Windows Media.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-138">You can use the filter's **IServiceProvider** interface to get a pointer to the **IWMWriterAdvanced2** interface, which is defined in the Windows Media Format SDK.</span></span> <span data-ttu-id="3bfe2-139">Vous pouvez utiliser l’interface **IWMWriterAdvanced2** pour contrôler le désentrelacement vidéo lorsque la vidéo source est entrelacée.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-139">You can use the **IWMWriterAdvanced2** interface to control video deinterlacing when the source video is interlaced.</span></span> <span data-ttu-id="3bfe2-140">Pour définir le mode de désentrelacement, appelez **IWMWriterAdvanced2 :: SetInputSetting**.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-140">To set the deinterlacing mode, call **IWMWriterAdvanced2::SetInputSetting**.</span></span> <span data-ttu-id="3bfe2-141">Pour le paramètre *dwInputNum* , utilisez l’index de base zéro de la broche d’entrée vidéo, tel qu’il est énuméré par l’interface [**IEnumPins**](/windows/desktop/api/Strmif/nn-strmif-ienumpins) .</span><span class="sxs-lookup"><span data-stu-id="3bfe2-141">For the *dwInputNum* parameter, use the zero-based index of the video input pin, as enumerated by the [**IEnumPins**](/windows/desktop/api/Strmif/nn-strmif-ienumpins) interface.</span></span>

<span data-ttu-id="3bfe2-142">L’exemple suivant montre comment interroger cette interface :</span><span class="sxs-lookup"><span data-stu-id="3bfe2-142">The following example shows how to query for this interface:</span></span>


```C++
// Assume that pAsfWriter is a valid IBaseFilter pointer.
IServiceProvider *pProvider = NULL;
IWMWriterAdvanced2 *pWMWA2 = NULL;

hr = pAsfWriter->QueryInterface(
    IID_IServiceProvider, 
    (void**)&pProvider
    );
if (SUCCEEDED(hr))
{
    hr = pProvider->QueryService(
        IID_IWMWriterAdvanced2,
        IID_IWMWriterAdvanced2, 
        (void**)&pWMWA2
        );
    pProvider->Release();
    if (SUCCEEDED(hr))
    {
        // Use pWMWA2. (Not shown.)
        pWMWA2->Release();
    }
}
```



<span data-ttu-id="3bfe2-143">Les applications ne doivent pas utiliser les méthodes **IWMWriterAdvanced** héritées par l’interface **IWMWriterAdvanced2** .</span><span class="sxs-lookup"><span data-stu-id="3bfe2-143">Applications should not use any of the **IWMWriterAdvanced** methods that the **IWMWriterAdvanced2** interface inherits.</span></span> <span data-ttu-id="3bfe2-144">L’appel de ces méthodes pourrait interere avec le fonctionnement du filtre.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-144">Calling any these methods could interere with the operation of the filter.</span></span>

<span data-ttu-id="3bfe2-145">Le seul mode d’écriture de fichier pris en charge par ce filtre est le remplacement des \_ fichiers am \_ .</span><span class="sxs-lookup"><span data-stu-id="3bfe2-145">The only file-writing mode supported by this filter is AM\_FILE\_OVERWRITE.</span></span> <span data-ttu-id="3bfe2-146">Consultez [**IFileSinkFilter2 :: GetMode**](/windows/desktop/api/Strmif/nf-strmif-ifilesinkfilter2-getmode).</span><span class="sxs-lookup"><span data-stu-id="3bfe2-146">See [**IFileSinkFilter2::GetMode**](/windows/desktop/api/Strmif/nf-strmif-ifilesinkfilter2-getmode).</span></span>

<span data-ttu-id="3bfe2-147">Lorsque le runtime du SDK Windows Media format envoie des \_ messages d’État WMT au filtre de l’enregistreur ASF WM, le filtre les transfère en tant qu’événements d' [**\_ \_ événements**](ec-wmt-event.md) de l’échange de fichiers de la norme ec.</span><span class="sxs-lookup"><span data-stu-id="3bfe2-147">When the Windows Media Format SDK runtime sends WMT\_STATUS messages to the WM ASF Writer filter, the filter forwards them as [**EC\_WMT\_EVENT**](ec-wmt-event.md) events.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3bfe2-148">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="3bfe2-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3bfe2-149">Filtres DirectShow</span><span class="sxs-lookup"><span data-stu-id="3bfe2-149">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 




