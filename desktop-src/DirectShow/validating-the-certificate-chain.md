---
description: Validation de la chaîne de certificats
ms.assetid: e0c36f04-1694-40d8-94a1-06ee7de08777
title: Validation de la chaîne de certificats
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13436513ae9199feb7ba5fcba399537da198ba85
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104203618"
---
# <a name="validating-the-certificate-chain"></a><span data-ttu-id="6f0af-103">Validation de la chaîne de certificats</span><span class="sxs-lookup"><span data-stu-id="6f0af-103">Validating the Certificate Chain</span></span>

<span data-ttu-id="6f0af-104">Cette rubrique explique comment valider la chaîne de certificats du pilote lors de l’utilisation du protocole COPP (Certified Output Protection Protocol).</span><span class="sxs-lookup"><span data-stu-id="6f0af-104">This topic describes how to validate the driver's certificate chain when using Certified Output Protection Protocol (COPP).</span></span>

<span data-ttu-id="6f0af-105">La chaîne de certificats du pilote graphique est un document XML.</span><span class="sxs-lookup"><span data-stu-id="6f0af-105">The graphic driver's certificate chain is an XML document.</span></span> <span data-ttu-id="6f0af-106">La chaîne de certificats contient trois certificats.</span><span class="sxs-lookup"><span data-stu-id="6f0af-106">The certificate chain contains three certificates.</span></span> <span data-ttu-id="6f0af-107">Le premier certificat est appelé le *certificat feuille*, et est le certificat Copp du pilote.</span><span class="sxs-lookup"><span data-stu-id="6f0af-107">The first certificate is called the *leaf certificate*, and is the driver's COPP certificate.</span></span> <span data-ttu-id="6f0af-108">Le certificat suivant est le certificat de signature du fournisseur de matériel indépendant (IHV).</span><span class="sxs-lookup"><span data-stu-id="6f0af-108">The next certificate is the signing certificate of the Independent Hardware Vendor (IHV).</span></span> <span data-ttu-id="6f0af-109">Le dernier certificat est le certificat de signature de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="6f0af-109">The last certificate is Microsoft's signing certificate.</span></span> <span data-ttu-id="6f0af-110">Pour vous assurer que le pilote Graphics est un appareil COPP légitime, l’application doit valider les trois certificats.</span><span class="sxs-lookup"><span data-stu-id="6f0af-110">To ensure that the graphics driver is a legitimate COPP device, the application must validate all three of these certificates.</span></span> <span data-ttu-id="6f0af-111">Un programme malveillant peut empêcher COPP de fonctionner si une application ne valide pas correctement les certificats dans la chaîne.</span><span class="sxs-lookup"><span data-stu-id="6f0af-111">A malicious program can prevent COPP from working if an application does not correctly validate the certificates in the chain.</span></span>

<span data-ttu-id="6f0af-112">Les chaînes de certificats COPP utilisent le jeu de caractères UTF-8.</span><span class="sxs-lookup"><span data-stu-id="6f0af-112">COPP certificate chains use the UTF-8 character set.</span></span> <span data-ttu-id="6f0af-113">Les données binaires dans les certificats, telles que la clé publique RSA, sont encodées en base64 et stockées dans l’ordre de primauté des octets de poids fort (Big endian).</span><span class="sxs-lookup"><span data-stu-id="6f0af-113">Binary data in the certificates, such as the RSA public key, are base64-encoded and stored in big-endian order.</span></span> <span data-ttu-id="6f0af-114">(*Big-endian* signifie que l’octet le plus significatif est stocké dans l’emplacement de mémoire avec l’adresse la plus basse.)</span><span class="sxs-lookup"><span data-stu-id="6f0af-114">(*Big-endian* means that the most significant byte is stored in the memory location with the lowest address.)</span></span>

<span data-ttu-id="6f0af-115">Certains éléments d’un certificat contiennent des valeurs booléennes pour indiquer qu’il existe une fonctionnalité du certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-115">Some elements within a certificate contain Boolean values to denote that a feature of the certificate exists.</span></span> <span data-ttu-id="6f0af-116">Si la fonctionnalité existe, la valeur de l’élément enfant correspondant est définie sur 1.</span><span class="sxs-lookup"><span data-stu-id="6f0af-116">If the feature exists, the corresponding child element value is set to 1.</span></span> <span data-ttu-id="6f0af-117">Si une fonctionnalité n’est pas présente, cet élément enfant n’est pas présent dans le certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-117">If a feature is not present, that child element is not present in the certificate.</span></span>

### <a name="xml-element-definitions"></a><span data-ttu-id="6f0af-118">Définitions d’éléments XML</span><span class="sxs-lookup"><span data-stu-id="6f0af-118">XML Element Definitions</span></span>

<span data-ttu-id="6f0af-119">Voici les définitions des éléments du schéma de certificat :</span><span class="sxs-lookup"><span data-stu-id="6f0af-119">The following are definitions for elements in the certificate schema:</span></span>

-   <span data-ttu-id="6f0af-120">**CertificateCollection**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-120">**CertificateCollection**.</span></span> <span data-ttu-id="6f0af-121">Élément racine du document XML.</span><span class="sxs-lookup"><span data-stu-id="6f0af-121">The root element of the XML document.</span></span> <span data-ttu-id="6f0af-122">Il contient des éléments de certificat, un pour chaque certificat de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="6f0af-122">It contains Certificate elements, one for each certificate in the chain.</span></span>
-   <span data-ttu-id="6f0af-123">**Certificat**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-123">**Certificate**.</span></span> <span data-ttu-id="6f0af-124">Contient un seul certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-124">Contains one certificate.</span></span> <span data-ttu-id="6f0af-125">Cet élément contient des données et des éléments de signature.</span><span class="sxs-lookup"><span data-stu-id="6f0af-125">This element contains Data and Signature elements.</span></span>
-   <span data-ttu-id="6f0af-126">**Data**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-126">**Data**.</span></span> <span data-ttu-id="6f0af-127">Contient des informations sur le certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-127">Contains information about the certificate.</span></span> <span data-ttu-id="6f0af-128">En particulier, il contient la clé et le type publics du certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-128">In particular, it contains the certificate's public key and type.</span></span> <span data-ttu-id="6f0af-129">L’élément de données contient les éléments enfants suivants :</span><span class="sxs-lookup"><span data-stu-id="6f0af-129">The Data element contains the following child elements:</span></span>
    -   <span data-ttu-id="6f0af-130">**PublicKey**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-130">**PublicKey**.</span></span> <span data-ttu-id="6f0af-131">Contient la clé publique RSA du certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-131">Contains the certificate's RSA public key.</span></span> <span data-ttu-id="6f0af-132">L’élément PublicKey contient un élément KeyValue, qui contient un élément RSAKeyValue.</span><span class="sxs-lookup"><span data-stu-id="6f0af-132">The PublicKey element contains a KeyValue element, which contains an RSAKeyValue element.</span></span> <span data-ttu-id="6f0af-133">L’élément RSAKeyValue possède deux éléments enfants, le modulo et l’exposant, et ceux-ci définissent la clé publique.</span><span class="sxs-lookup"><span data-stu-id="6f0af-133">The RSAKeyValue element has two child elements, Modulus and Exponent, and these define the public key.</span></span> <span data-ttu-id="6f0af-134">Les éléments modulo et Exponent sont encodés en base64 et stockés dans l’ordre Big-endian.</span><span class="sxs-lookup"><span data-stu-id="6f0af-134">The Modulus and Exponent elements are base64-encoded and stored in big-endian order.</span></span>
    -   <span data-ttu-id="6f0af-135">**Utilisation de KeyUsage**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-135">**KeyUsage**.</span></span> <span data-ttu-id="6f0af-136">Si le certificat est le certificat COPP du pilote, cet élément doit contenir un élément enfant appelé EncryptKey.</span><span class="sxs-lookup"><span data-stu-id="6f0af-136">If the certificate is the driver's COPP certificate, this element should contain a child element called EncryptKey.</span></span> <span data-ttu-id="6f0af-137">Si le certificat est le certificat de signature du IHV ou le certificat de signature de Microsoft, il doit contenir un élément enfant appelé SignCertificate.</span><span class="sxs-lookup"><span data-stu-id="6f0af-137">If the certificate is the IHV's signing certificate or Microsoft's signing certificate, it should contain a child element called SignCertificate.</span></span> <span data-ttu-id="6f0af-138">Ces deux éléments enfants contiennent des valeurs booléennes.</span><span class="sxs-lookup"><span data-stu-id="6f0af-138">Both of these child elements contain Boolean values.</span></span>
    -   <span data-ttu-id="6f0af-139">**SecurityLevel**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-139">**SecurityLevel**.</span></span> <span data-ttu-id="6f0af-140">Cet élément doit être ignoré.</span><span class="sxs-lookup"><span data-stu-id="6f0af-140">This element should be ignored.</span></span>
    -   <span data-ttu-id="6f0af-141">**ManufacturerData**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-141">**ManufacturerData**.</span></span> <span data-ttu-id="6f0af-142">Spécifie le fabricant et le modèle de l’appareil graphique.</span><span class="sxs-lookup"><span data-stu-id="6f0af-142">Specifies the manufacturer and model of the graphics device.</span></span> <span data-ttu-id="6f0af-143">Cet élément est informatif uniquement.</span><span class="sxs-lookup"><span data-stu-id="6f0af-143">This element is informational only.</span></span>
    -   <span data-ttu-id="6f0af-144">**Features**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-144">**Features**.</span></span> <span data-ttu-id="6f0af-145">Contient des éléments enfants qui spécifient l’utilisation du certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-145">Contains child elements that specify the usage of the certificate.</span></span> <span data-ttu-id="6f0af-146">Le seul élément pertinent pour COPP est l’élément COPPCertificate.</span><span class="sxs-lookup"><span data-stu-id="6f0af-146">The only one relevant to COPP is the COPPCertificate element.</span></span> <span data-ttu-id="6f0af-147">D’autres éléments enfants peuvent être présents ; dans ce cas, ils doivent être ignorés.</span><span class="sxs-lookup"><span data-stu-id="6f0af-147">Other child elements might be present; if so, they should be ignored.</span></span> <span data-ttu-id="6f0af-148">Si l’élément COPPCertificate existe, le certificat est un certificat COPP.</span><span class="sxs-lookup"><span data-stu-id="6f0af-148">If the COPPCertificate element exists, the certificate is a COPP certificate.</span></span> <span data-ttu-id="6f0af-149">Cet élément doit être présent dans le nœud terminal d’un certificat COPP valide.</span><span class="sxs-lookup"><span data-stu-id="6f0af-149">This element must be present in the leaf node of a valid COPP certificate.</span></span> <span data-ttu-id="6f0af-150">Cet élément contient une valeur booléenne.</span><span class="sxs-lookup"><span data-stu-id="6f0af-150">This element contains a Boolean value.</span></span>
-   <span data-ttu-id="6f0af-151">**Signature**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-151">**Signature**.</span></span> <span data-ttu-id="6f0af-152">Contient la signature pour ce certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-152">Contains the signature for this certificate.</span></span> <span data-ttu-id="6f0af-153">Il contient les éléments enfants suivants :</span><span class="sxs-lookup"><span data-stu-id="6f0af-153">It contains the following child elements:</span></span>
    -   <span data-ttu-id="6f0af-154">**SignedInfo**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-154">**SignedInfo**.</span></span> <span data-ttu-id="6f0af-155">Contient des informations sur la signature.</span><span class="sxs-lookup"><span data-stu-id="6f0af-155">Contains information about the signature.</span></span> <span data-ttu-id="6f0af-156">L’élément enfant important de cet élément est l’élément DigestValue, qui contient la valeur encodée en base64 du hachage SHA-1 sur l’élément de données.</span><span class="sxs-lookup"><span data-stu-id="6f0af-156">The important child element of this element is the DigestValue element, which contains the base64-encoded value of the SHA-1 hash over the Data element.</span></span> <span data-ttu-id="6f0af-157">La valeur Digest est utilisée lors de la vérification du certificat par rapport à la liste de révocation de certificats (CRL).</span><span class="sxs-lookup"><span data-stu-id="6f0af-157">The digest value is used when checking the certificate against the certificate revocation list (CRL).</span></span>
    -   <span data-ttu-id="6f0af-158">**SignatureValue**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-158">**SignatureValue**.</span></span> <span data-ttu-id="6f0af-159">Cette valeur est calculée à partir de l’élément de données et est calculée selon le schéma de signature numérique RSASSA-PSS défini dans Public-Key Cryptography Standards (PKCS) \# 1 (version 2,1).</span><span class="sxs-lookup"><span data-stu-id="6f0af-159">This value is computed over the Data element and is computed according to the RSASSA-PSS digital signature scheme defined in Public-Key Cryptography Standards (PKCS) \#1 (version 2.1).</span></span> <span data-ttu-id="6f0af-160">Pour plus d’informations sur PKCS \# 1, visitez [https://www.rsa.com/](https://www.rsa.com/) .</span><span class="sxs-lookup"><span data-stu-id="6f0af-160">For information about PKCS \#1, visit [https://www.rsa.com/](https://www.rsa.com/).</span></span>
    -   <span data-ttu-id="6f0af-161">**KeyInfo**.</span><span class="sxs-lookup"><span data-stu-id="6f0af-161">**KeyInfo**.</span></span> <span data-ttu-id="6f0af-162">Contient la clé publique RSA du certificat suivant dans la chaîne.</span><span class="sxs-lookup"><span data-stu-id="6f0af-162">Contains the RSA public key of the next certificate in the chain.</span></span> <span data-ttu-id="6f0af-163">Cet élément est utilisé pour vérifier que les données de l’élément de données n’ont pas été falsifiées.</span><span class="sxs-lookup"><span data-stu-id="6f0af-163">This element is used to verify that the data in the Data element has not been tampered with.</span></span> <span data-ttu-id="6f0af-164">Cet élément a le même format que l’élément PublicKey.</span><span class="sxs-lookup"><span data-stu-id="6f0af-164">This element has the same format as the PublicKey element.</span></span>

### <a name="certificate-validation"></a><span data-ttu-id="6f0af-165">Validation de certificat</span><span class="sxs-lookup"><span data-stu-id="6f0af-165">Certificate Validation</span></span>

<span data-ttu-id="6f0af-166">L’application doit effectuer les étapes suivantes pour valider correctement la chaîne de certificats.</span><span class="sxs-lookup"><span data-stu-id="6f0af-166">The application must perform the following steps to correctly validate the certificate chain.</span></span> <span data-ttu-id="6f0af-167">Si une étape échoue, ou si un élément référencé dans ces procédures n’existe pas, la validation échoue.</span><span class="sxs-lookup"><span data-stu-id="6f0af-167">If any step fails, or if any element referred to in these procedures does not exist, the validation fails.</span></span>

### <a name="validate-certificate-collection-procedure"></a><span data-ttu-id="6f0af-168">Procédure valider la collecte des certificats</span><span class="sxs-lookup"><span data-stu-id="6f0af-168">Validate Certificate Collection Procedure</span></span>

<span data-ttu-id="6f0af-169">Pour valider la chaîne de certificats, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6f0af-169">To validate the certificate chain, perform the following steps:</span></span>

1.  <span data-ttu-id="6f0af-170">Vérifiez que le code XML CertificateCollection est bien formé.</span><span class="sxs-lookup"><span data-stu-id="6f0af-170">Verify that the CertificateCollection is well-formed XML.</span></span>
2.  <span data-ttu-id="6f0af-171">Vérifiez que CertificateCollection est encodé au format UTF-8.</span><span class="sxs-lookup"><span data-stu-id="6f0af-171">Verify that the CertificateCollection is encoded in UTF-8 format.</span></span>
3.  <span data-ttu-id="6f0af-172">Vérifiez que l’attribut version de l’élément CertificateCollection est 2,0 ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="6f0af-172">Check that the Version attribute in the CertificateCollection element is 2.0 or later.</span></span>
4.  <span data-ttu-id="6f0af-173">Vérifiez que la chaîne de certificats contient exactement trois éléments de certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-173">Verify that the certificate chain contains exactly three Certificate elements.</span></span>
5.  <span data-ttu-id="6f0af-174">Parcourez chaque élément de certificat de la chaîne de certificats et exécutez la procédure valider le certificat, décrite ci-dessous, sur chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="6f0af-174">Loop through each Certificate element in the certificate chain and perform the Validate Certificate procedure, described below, on each.</span></span>

### <a name="validate-certificate-procedure"></a><span data-ttu-id="6f0af-175">Procédure valider le certificat</span><span class="sxs-lookup"><span data-stu-id="6f0af-175">Validate Certificate Procedure</span></span>

<span data-ttu-id="6f0af-176">Pour valider un certificat dans la chaîne, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6f0af-176">To validate a certificate in the chain, perform the following steps:</span></span>

1.  <span data-ttu-id="6f0af-177">Vérifiez qu’aucun des éléments enfants de l’élément de données n’est dupliqué.</span><span class="sxs-lookup"><span data-stu-id="6f0af-177">Verify that none of the child elements in the Data element is duplicated.</span></span> <span data-ttu-id="6f0af-178">Par exemple, il ne doit y avoir qu’un seul élément PublicKey.</span><span class="sxs-lookup"><span data-stu-id="6f0af-178">For example, there should be only one PublicKey element.</span></span>
2.  <span data-ttu-id="6f0af-179">Assurez-vous que l’élément Data/PublicKey/KeyValue/RSAKeyValue/modulo existe.</span><span class="sxs-lookup"><span data-stu-id="6f0af-179">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Modulus element exists.</span></span> <span data-ttu-id="6f0af-180">La valeur décodée en base64 doit avoir une longueur de 256 octets pour tous les certificats, à l’exception de la racine.</span><span class="sxs-lookup"><span data-stu-id="6f0af-180">The base64-decoded value must be 256 bytes long for all certificates except the root.</span></span> <span data-ttu-id="6f0af-181">Dans le certificat racine, cet élément doit avoir une longueur de 128 octets.</span><span class="sxs-lookup"><span data-stu-id="6f0af-181">In the root certificate, this element must be 128 bytes long.</span></span>
3.  <span data-ttu-id="6f0af-182">Assurez-vous que l’élément Data/PublicKey/KeyValue/RSAKeyValue/Exponent existe.</span><span class="sxs-lookup"><span data-stu-id="6f0af-182">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Exponent element exists.</span></span> <span data-ttu-id="6f0af-183">La valeur décodée en base64 ne doit pas être supérieure à 4 octets.</span><span class="sxs-lookup"><span data-stu-id="6f0af-183">The base64-decoded value must not be larger than 4 bytes.</span></span>
4.  <span data-ttu-id="6f0af-184">Si ce certificat est le certificat feuille, vérifiez les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6f0af-184">If this certificate is the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="6f0af-185">L’élément KeyUsage contient un élément EncryptKey avec la valeur 1.</span><span class="sxs-lookup"><span data-stu-id="6f0af-185">The KeyUsage element contains an EncryptKey element with the value 1.</span></span>
    -   <span data-ttu-id="6f0af-186">L’élément features contient un élément COPPCertificate avec la valeur 1.</span><span class="sxs-lookup"><span data-stu-id="6f0af-186">The Features element contains a COPPCertificate element with the value 1.</span></span>
5.  <span data-ttu-id="6f0af-187">Si ce certificat n’est pas le certificat feuille, vérifiez les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6f0af-187">If this certificate is not the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="6f0af-188">Le modulo et l’exposant de l’élément Data/PublicKey correspondent exactement au modulo et à l’exposant de l’élément signature/KeyInfo du certificat précédent.</span><span class="sxs-lookup"><span data-stu-id="6f0af-188">The modulus and exponent from the Data/PublicKey element exactly match the modulus and exponent from the Signature/KeyInfo element of the previous certificate.</span></span>
    -   <span data-ttu-id="6f0af-189">L’élément KeyUsage contient un élément SignCertificate, avec la valeur 1.</span><span class="sxs-lookup"><span data-stu-id="6f0af-189">The KeyUsage element contains a SignCertificate element, with the value 1.</span></span>
6.  <span data-ttu-id="6f0af-190">Utilisez l’algorithme de hachage SHA-1 pour hacher chaque octet dans l’élément de données du certificat.</span><span class="sxs-lookup"><span data-stu-id="6f0af-190">Use the SHA-1 hash algorithm to hash every byte in the certificate's Data element.</span></span> <span data-ttu-id="6f0af-191">Chaque octet du premier caractère de la <Data> balise jusqu’au dernier caractère de la </Data> balise de fermeture doit être haché.</span><span class="sxs-lookup"><span data-stu-id="6f0af-191">Every byte from the first character in the <Data> tag to the last character in the closing </Data> tag should be hashed.</span></span> <span data-ttu-id="6f0af-192">La valeur de hachage est utilisée pour vérifier le certificat par rapport à la liste de révocation de certificats, comme décrit dans [listes de révocation de certificats](certificate-revocation-lists.md) .</span><span class="sxs-lookup"><span data-stu-id="6f0af-192">The hash value is used to check the certificate against the certificate revocation list (CRL), as described in [Certificate Revocation Lists](certificate-revocation-lists.md)</span></span>
7.  <span data-ttu-id="6f0af-193">Comparez la valeur de hachage de l’étape 6 à la valeur décodée en base64 de l’élément signature/SignedInfo/Reference/DigestValue.</span><span class="sxs-lookup"><span data-stu-id="6f0af-193">Compare the hash value from step 6 with the base64-decoded value of the Signature/SignedInfo/Reference/DigestValue element.</span></span> <span data-ttu-id="6f0af-194">Ces valeurs doivent correspondre.</span><span class="sxs-lookup"><span data-stu-id="6f0af-194">These values must match.</span></span>
8.  <span data-ttu-id="6f0af-195">Effectuez la procédure de vérification de la signature, décrite ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="6f0af-195">Perform the Verify Signature procedure, described below.</span></span>
9.  <span data-ttu-id="6f0af-196">Si ce certificat n’est pas le certificat final dans la chaîne, enregistrez la valeur de signature/KeyInfo/KeyValue/RSAKeyValue pour la prochaine itération de la boucle.</span><span class="sxs-lookup"><span data-stu-id="6f0af-196">If this certificate is not the final certificate in the chain, save the Signature/KeyInfo/KeyValue/RSAKeyValue value for the next iteration of the loop.</span></span>
10. <span data-ttu-id="6f0af-197">Si ce certificat est le certificat final dans la chaîne, assurez-vous que la valeur de signature/KeyInfo/KeyValue/RSAKeyValue correspond à la clé publique de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="6f0af-197">If this certificate is the final certificate in the chain, ensure that the value of Signature/KeyInfo/KeyValue/RSAKeyValue matches Microsoft's public key.</span></span> <span data-ttu-id="6f0af-198">La clé publique Microsoft a les valeurs encodées en base64 suivantes :</span><span class="sxs-lookup"><span data-stu-id="6f0af-198">The Microsoft public key has the following base64-encoded values:</span></span>
    -   <span data-ttu-id="6f0af-199">Young</span><span class="sxs-lookup"><span data-stu-id="6f0af-199">Modulus:</span></span>

        `pjoeWLSTLDonQG8She6QhkYbYott9fPZ8tHdB128ZETcghn5KHoyin7HkJEcPJ0Eg4UdSv a0KDIYDjA3EXd69R3CN2Wp/QyOo0ZPYWYp3NXpJ700tKPgIplzo5wVd/69g7j+j8M66W7V NmDwaNs9mDc1p2+VVMsDhOsV/Au6E+E=`

    -   <span data-ttu-id="6f0af-200">Positifs `AQAB`</span><span class="sxs-lookup"><span data-stu-id="6f0af-200">Exponent: `AQAB`</span></span>

### <a name="verify-signature-procedure"></a><span data-ttu-id="6f0af-201">Vérifier la procédure de signature</span><span class="sxs-lookup"><span data-stu-id="6f0af-201">Verify Signature Procedure</span></span>

<span data-ttu-id="6f0af-202">La valeur de l’élément SignatureValue est calculée sur l’élément de données en fonction du schéma de signature numérique RSASSA-PSS défini dans la \# version 2,1 de PKCS 1 (ci-après, appelée PKCS).</span><span class="sxs-lookup"><span data-stu-id="6f0af-202">The value of the SignatureValue element is computed over the Data element according to the RSASSA-PSS digital signature scheme defined in PKCS \#1 version 2.1 (hereinafter referred to as PKCS).</span></span> <span data-ttu-id="6f0af-203">Pour vérifier cette signature, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6f0af-203">To verify this signature, perform the following steps:</span></span>

1.  <span data-ttu-id="6f0af-204">Décodez les valeurs du modulo et de l’exposant dans l’élément signature/KeyInfo/KeyValue/RSAKeyValue.</span><span class="sxs-lookup"><span data-stu-id="6f0af-204">Decode the Modulus and Exponent values in the Signature/KeyInfo/KeyValue/RSAKeyValue element.</span></span> <span data-ttu-id="6f0af-205">Ces valeurs définissent la clé publique RSA du certificat de signature.</span><span class="sxs-lookup"><span data-stu-id="6f0af-205">These values define the RSA public key of the signing certificate.</span></span>
2.  <span data-ttu-id="6f0af-206">Décodez l’élément signature/SignatureValue.</span><span class="sxs-lookup"><span data-stu-id="6f0af-206">Decode the Signature/SignatureValue element.</span></span>
3.  <span data-ttu-id="6f0af-207">Calculez l’opération RSASSA-PSS-Verify, définie dans la section 8.1.2 de PKCS.</span><span class="sxs-lookup"><span data-stu-id="6f0af-207">Compute the RSASSA-PSS-Verify operation, defined in section 8.1.2 of PKCS.</span></span>

<span data-ttu-id="6f0af-208">Pour l’opération RSASSA-PSS-Verify, utilisez les entrées suivantes :</span><span class="sxs-lookup"><span data-stu-id="6f0af-208">For the RSASSA-PSS-Verify operation, use the following inputs:</span></span>

-   <span data-ttu-id="6f0af-209">(*n*,*e*) est la clé publique de l’étape 1.</span><span class="sxs-lookup"><span data-stu-id="6f0af-209">(*n*,*e*) is the public key from step 1.</span></span>
-   <span data-ttu-id="6f0af-210">*M* correspond à tous les octets de l’élément de données, y compris les balises <Data> et</Data> qui encadrent l’élément.</span><span class="sxs-lookup"><span data-stu-id="6f0af-210">*M* is all of the bytes in the Data element, including the <Data> and </Data> tags that enclose the element.</span></span>
-   <span data-ttu-id="6f0af-211">*S* est la valeur de signature décodée de l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="6f0af-211">*S* is the decoded signature value from step 2.</span></span>

<span data-ttu-id="6f0af-212">L’opération RSASSA-PSS-Verify utilise l’opération EMSA-PSS-ENCODE, définie dans la section 9.1.1.</span><span class="sxs-lookup"><span data-stu-id="6f0af-212">The RSASSA-PSS-Verify operation uses the EMSA-PSS-ENCODE operation, defined in section 9.1.1.</span></span> <span data-ttu-id="6f0af-213">de PKCS.</span><span class="sxs-lookup"><span data-stu-id="6f0af-213">of PKCS.</span></span> <span data-ttu-id="6f0af-214">Pour cette opération, COPP utilise les options suivantes :</span><span class="sxs-lookup"><span data-stu-id="6f0af-214">For this operation, COPP uses the following options:</span></span>

-   <span data-ttu-id="6f0af-215">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="6f0af-215">Hash = SHA-1</span></span>
-   <span data-ttu-id="6f0af-216">*hLen* = 20</span><span class="sxs-lookup"><span data-stu-id="6f0af-216">*hLen* = 20</span></span>
-   <span data-ttu-id="6f0af-217">MGF (fonction de génération de masque) = MGF1</span><span class="sxs-lookup"><span data-stu-id="6f0af-217">MGF (mask generation function) = MGF1</span></span>
-   <span data-ttu-id="6f0af-218">*sLen* = 0</span><span class="sxs-lookup"><span data-stu-id="6f0af-218">*sLen* = 0</span></span>

<span data-ttu-id="6f0af-219">La fonction de génération de masque MGF1 est définie dans l’annexe B. 2 de PKCS.</span><span class="sxs-lookup"><span data-stu-id="6f0af-219">The mask generation function MGF1 is defined in Appendix B.2 of PKCS.</span></span> <span data-ttu-id="6f0af-220">Pour cette fonction, COPP utilise les options suivantes :</span><span class="sxs-lookup"><span data-stu-id="6f0af-220">For this function, COPP uses the following options:</span></span>

-   <span data-ttu-id="6f0af-221">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="6f0af-221">Hash = SHA-1</span></span>
-   <span data-ttu-id="6f0af-222">*hLen* = 20</span><span class="sxs-lookup"><span data-stu-id="6f0af-222">*hLen* = 20</span></span>

<span data-ttu-id="6f0af-223">La sortie de l’opération RSASSA-PSS-Verify indique si la signature est valide ou non valide.</span><span class="sxs-lookup"><span data-stu-id="6f0af-223">The output of the RSASSA-PSS-Verify operation indicates whether the signature is valid or invalid.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6f0af-224">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="6f0af-224">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6f0af-225">Utilisation du protocole COPP (Certified Output Protection Protocol)</span><span class="sxs-lookup"><span data-stu-id="6f0af-225">Using Certified Output Protection Protocol (COPP)</span></span>](using-certified-output-protection-protocol--copp.md)
</dt> </dl>

 

 



