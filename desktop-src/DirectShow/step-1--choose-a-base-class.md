---
description: Étape 1.
ms.assetid: 4b2d3add-0430-480b-ad5f-bb1aa19fef21
title: Étape 1. Choisir une classe de base
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4679873e78e75b350335b5294db63579fd41f36
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103866477"
---
# <a name="step-1-choose-a-base-class"></a><span data-ttu-id="07c74-104">Étape 1.</span><span class="sxs-lookup"><span data-stu-id="07c74-104">Step 1.</span></span> <span data-ttu-id="07c74-105">Choisir une classe de base</span><span class="sxs-lookup"><span data-stu-id="07c74-105">Choose a Base Class</span></span>

<span data-ttu-id="07c74-106">Il s’agit de l’étape 1 du didacticiel [écriture de filtres de transformation](writing-transform-filters.md).</span><span class="sxs-lookup"><span data-stu-id="07c74-106">This is step 1 of the tutorial [Writing Transform Filters](writing-transform-filters.md).</span></span>

<span data-ttu-id="07c74-107">En supposant que vous décidiez d’écrire un filtre et non un DMO, la première étape consiste à choisir la classe de base à utiliser.</span><span class="sxs-lookup"><span data-stu-id="07c74-107">Assuming that you decide to write a filter and not a DMO, the first step is choosing which base class to use.</span></span> <span data-ttu-id="07c74-108">Les classes suivantes sont appropriées pour les filtres de transformation :</span><span class="sxs-lookup"><span data-stu-id="07c74-108">The following classes are appropriate for transform filters:</span></span>

-   <span data-ttu-id="07c74-109">[**CTransformFilter**](ctransformfilter.md) est conçu pour les filtres de transformation qui utilisent des mémoires tampons d’entrée et de sortie distinctes.</span><span class="sxs-lookup"><span data-stu-id="07c74-109">[**CTransformFilter**](ctransformfilter.md) is designed for transform filters that use separate input and output buffers.</span></span> <span data-ttu-id="07c74-110">Ce type de filtre est parfois appelé filtre de transformation de copie.</span><span class="sxs-lookup"><span data-stu-id="07c74-110">This kind of filter is sometimes called a copy-transform filter.</span></span> <span data-ttu-id="07c74-111">Lorsqu’un filtre de transformation de copie reçoit un exemple d’entrée, il écrit de nouvelles données dans un exemple de sortie et remet l’exemple de sortie au filtre suivant.</span><span class="sxs-lookup"><span data-stu-id="07c74-111">When a copy-transform filter receives an input sample, it writes new data to an output sample and delivers the output sample to the next filter.</span></span>
-   <span data-ttu-id="07c74-112">[**CTransInPlaceFilter**](ctransinplacefilter.md) est conçu pour les filtres qui modifient les données dans la mémoire tampon d’origine, également appelées filtres de transfert sur place.</span><span class="sxs-lookup"><span data-stu-id="07c74-112">[**CTransInPlaceFilter**](ctransinplacefilter.md) is designed for filters that modify data in the original buffer, also called trans-in-place filters.</span></span> <span data-ttu-id="07c74-113">Lorsqu’un filtre TRANS-in-place reçoit un échantillon, il modifie les données de cet exemple et remet le même échantillon en aval.</span><span class="sxs-lookup"><span data-stu-id="07c74-113">When a trans-in-place filter receives a sample, it changes the data inside that sample and delivers the same sample downstream.</span></span> <span data-ttu-id="07c74-114">La broche d’entrée et la broche de sortie du filtre se connectent toujours aux types de médias correspondants.</span><span class="sxs-lookup"><span data-stu-id="07c74-114">The filter's input pin and output pin always connect with matching media types.</span></span>
-   <span data-ttu-id="07c74-115">[**CVideoTransformFilter**](cvideotransformfilter.md) est principalement conçu pour les décodeurs vidéo.</span><span class="sxs-lookup"><span data-stu-id="07c74-115">[**CVideoTransformFilter**](cvideotransformfilter.md) is designed primarily for video decoders.</span></span> <span data-ttu-id="07c74-116">Il dérive de **CTransformFilter**, mais il comprend des fonctionnalités permettant de supprimer des frames si le convertisseur en aval se trouve en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="07c74-116">It derives from **CTransformFilter**, but includes functionality for dropping frames if the downstream renderer falls behind.</span></span>
-   <span data-ttu-id="07c74-117">[**CBaseFilter**](cbasefilter.md) est une classe de filtre générique.</span><span class="sxs-lookup"><span data-stu-id="07c74-117">[**CBaseFilter**](cbasefilter.md) is a generic filter class.</span></span> <span data-ttu-id="07c74-118">Les autres classes de cette liste dérivent toutes de **CBaseFilter**.</span><span class="sxs-lookup"><span data-stu-id="07c74-118">The other classes in this list all derive from **CBaseFilter**.</span></span> <span data-ttu-id="07c74-119">Si aucun de ces éléments ne convient, vous pouvez revenir sur cette classe.</span><span class="sxs-lookup"><span data-stu-id="07c74-119">If none of them is suitable, you can fall back on this class.</span></span> <span data-ttu-id="07c74-120">Toutefois, cette classe nécessite également le plus de travail de votre part.</span><span class="sxs-lookup"><span data-stu-id="07c74-120">However, this class also requires the most work on your part.</span></span>
-   <span data-ttu-id="07c74-121">\[! Précieuse\]</span><span class="sxs-lookup"><span data-stu-id="07c74-121">\[!Important\]</span></span>  
    > <span data-ttu-id="07c74-122">Les transformations vidéo sur place peuvent avoir un impact sérieux sur les performances de rendu.</span><span class="sxs-lookup"><span data-stu-id="07c74-122">In-place video transforms can have a serious impact on rendering performance.</span></span> <span data-ttu-id="07c74-123">Les transformations sur place nécessitent des opérations de lecture-modification-écriture sur la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="07c74-123">In-place transforms require read-modify-write operations on the buffer.</span></span> <span data-ttu-id="07c74-124">Si la mémoire réside sur une carte graphique, les opérations de lecture sont beaucoup plus lentes.</span><span class="sxs-lookup"><span data-stu-id="07c74-124">If the memory resides on a graphics card, read operations are significantly slower.</span></span> <span data-ttu-id="07c74-125">En outre, même une transformation de copie peut entraîner des opérations de lecture involontaires si vous ne l’implémentez pas avec prudence.</span><span class="sxs-lookup"><span data-stu-id="07c74-125">Moreover, even a copy transform can cause unintended read operations if you do not implement it carefully.</span></span> <span data-ttu-id="07c74-126">Par conséquent, vous devez toujours effectuer des tests de performances si vous écrivez une transformation vidéo.</span><span class="sxs-lookup"><span data-stu-id="07c74-126">Therefore, you should always do performance testing if you write a video transform.</span></span>

     

<span data-ttu-id="07c74-127">Pour l’exemple d’encodeur RLE, le meilleur choix est **CTransformFilter** ou **CVideoTransformFilter**.</span><span class="sxs-lookup"><span data-stu-id="07c74-127">For the example RLE encoder, the best choice is either **CTransformFilter** or **CVideoTransformFilter**.</span></span> <span data-ttu-id="07c74-128">En fait, les différences entre elles sont en grande partie internes. il est donc facile de les convertir de l’une à l’autre.</span><span class="sxs-lookup"><span data-stu-id="07c74-128">In fact, the differences between them are largely internal, so it is easy to convert from one to the other.</span></span> <span data-ttu-id="07c74-129">Étant donné que les types de médias doivent être différents sur les deux codes confidentiels, la classe **CTransInPlaceFilter** n’est pas appropriée pour ce filtre.</span><span class="sxs-lookup"><span data-stu-id="07c74-129">Because the media types must be different on the two pins, the **CTransInPlaceFilter** class is not appropriate for this filter.</span></span> <span data-ttu-id="07c74-130">Cet exemple utilise **CTransformFilter**.</span><span class="sxs-lookup"><span data-stu-id="07c74-130">This example will use **CTransformFilter**.</span></span>

<span data-ttu-id="07c74-131">Suivant : [étape 2. Déclarez la classe de filtre](step-2--declare-the-filter-class.md).</span><span class="sxs-lookup"><span data-stu-id="07c74-131">Next: [Step 2. Declare the Filter Class](step-2--declare-the-filter-class.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="07c74-132">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="07c74-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="07c74-133">Écriture de filtres DirectShow</span><span class="sxs-lookup"><span data-stu-id="07c74-133">Writing DirectShow Filters</span></span>](writing-directshow-filters.md)
</dt> </dl>

 

 



