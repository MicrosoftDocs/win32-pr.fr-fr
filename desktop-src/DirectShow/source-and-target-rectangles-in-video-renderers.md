---
description: Rectangles source et cible dans les convertisseurs vidéo
ms.assetid: fdddbffb-c44f-4364-9e2e-b721ba39c74f
title: Rectangles source et cible dans les convertisseurs vidéo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 556aea6aad22e5ea6df61c74ed0a46d2e3984d67
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104521871"
---
# <a name="source-and-target-rectangles-in-video-renderers"></a><span data-ttu-id="82318-103">Rectangles source et cible dans les convertisseurs vidéo</span><span class="sxs-lookup"><span data-stu-id="82318-103">Source and Target Rectangles in Video Renderers</span></span>

<span data-ttu-id="82318-104">Trois tailles sont disponibles dans les structures de format [**VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader)et [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) des types de média vidéo.</span><span class="sxs-lookup"><span data-stu-id="82318-104">There are three sizes found in the [**VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader), and [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) format structures of video media types.</span></span> <span data-ttu-id="82318-105">Cet article explique ce qu’ils sont et comment ils fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="82318-105">This article explains what they are and how they work.</span></span>

<span data-ttu-id="82318-106">Tout d’abord, il y a une taille dans le membre **bmiHeader** de ces structures.</span><span class="sxs-lookup"><span data-stu-id="82318-106">First, there is a size in the **bmiHeader** member of these structures.</span></span> <span data-ttu-id="82318-107">Le membre **bmiHeader** est une structure [**BITMAPINFOHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader) avec ses propres membres Width et Height, **BmiHeader. diwidth** et **bmiHeader. diheight**.</span><span class="sxs-lookup"><span data-stu-id="82318-107">The **bmiHeader** member is a [**BITMAPINFOHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader) structure with its own width and height members, **bmiHeader.biWidth** and **bmiHeader.biHeight**.</span></span>

<span data-ttu-id="82318-108">Deuxièmement, il existe un rectangle dans le membre **rcSource** de ces structures ; Enfin, il existe un rectangle dans le membre **rcTarget** de ces structures.</span><span class="sxs-lookup"><span data-stu-id="82318-108">Second, there is a rectangle in the **rcSource** member of these structures; and last, there is a rectangle in the **rcTarget** member of these structures.</span></span>

<span data-ttu-id="82318-109">Supposons que vous disposez de deux filtres, A et B, et que ces filtres soient connectés les uns aux autres (à gauche, en amont, et B à droite, ou en aval) avec un certain type de média vidéo.</span><span class="sxs-lookup"><span data-stu-id="82318-109">Assume you have two filters, A and B, and that these filters are connected to each other (A on the left, or upstream, and B on the right, or downstream) with a certain video media type.</span></span>

<span data-ttu-id="82318-110">Les mémoires tampons qui passent entre les filtres A et B ont la taille (**bmiHeader. bilargeur**, **BmiHeader. bihauteur**).</span><span class="sxs-lookup"><span data-stu-id="82318-110">The buffers that pass between filters A and B have the size (**bmiHeader.biWidth**, **bmiHeader.biHeight**).</span></span> <span data-ttu-id="82318-111">Le filtre A doit prendre une partie de sa vidéo d’entrée déterminée par **rcSource** et étirer cette vidéo pour remplir la partie **rcTarget** de la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="82318-111">Filter A should take a portion of its input video determined by **rcSource** and stretch that video to fill the **rcTarget** portion of the buffer.</span></span> <span data-ttu-id="82318-112">La partie de la vidéo d’entrée à utiliser est basée sur la façon dont **rcSource** compare à la taille (**bilargeur**, **bihauteur**) du type de média qui filtre A et B connectés à l’origine.</span><span class="sxs-lookup"><span data-stu-id="82318-112">The portion of the input video to use is based on how **rcSource** compares to the (**biWidth**, **biHeight**) size of the media type that filters A and B originally connected with.</span></span> <span data-ttu-id="82318-113">Si **rcSource** est vide, le filtre a utilise sa vidéo d’entrée entière.</span><span class="sxs-lookup"><span data-stu-id="82318-113">If **rcSource** is empty, filter A uses its entire input video.</span></span> <span data-ttu-id="82318-114">Si **rcTarget** est vide, le filtre a remplit l’intégralité de la mémoire tampon de sortie.</span><span class="sxs-lookup"><span data-stu-id="82318-114">If **rcTarget** is empty, filter A fills the entire output buffer.</span></span>

<span data-ttu-id="82318-115">Par exemple, supposons que le filtre A reçoit des données vidéo de 160 x 120 pixels.</span><span class="sxs-lookup"><span data-stu-id="82318-115">For example, assume filter A is receiving video data that is 160 x 120 pixels.</span></span> <span data-ttu-id="82318-116">Supposons également que le filtre A est connecté au filtre B avec le type de média suivant.</span><span class="sxs-lookup"><span data-stu-id="82318-116">Assume also that filter A is connected to filter B with the following media type.</span></span>

-   <span data-ttu-id="82318-117">(**bilargeur**, **bihauteur**) : 320, 240</span><span class="sxs-lookup"><span data-stu-id="82318-117">(**biWidth**, **biHeight**): 320, 240</span></span>
-   <span data-ttu-id="82318-118">**rcSource**: (0, 0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="82318-118">**rcSource**: (0, 0, 0, 0)</span></span>
-   <span data-ttu-id="82318-119">**rcTarget**: (0, 0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="82318-119">**rcTarget**: (0, 0, 0, 0)</span></span>

<span data-ttu-id="82318-120">Cela signifie que le filtre A étire la vidéo qu’il reçoit de 2 dans les directions x et y, et remplit une mémoire tampon de sortie 320 x 240.</span><span class="sxs-lookup"><span data-stu-id="82318-120">This means that filter A will stretch the video it receives by 2 in both the x and y directions, and fill a 320 x 240 output buffer.</span></span>

<span data-ttu-id="82318-121">Autre exemple : Supposons que le filtre A reçoit des données vidéo 160 x 120 et qu’il soit connecté au filtre B avec le type de média suivant.</span><span class="sxs-lookup"><span data-stu-id="82318-121">As another example, assume filter A is receiving 160 x 120 video data, and that it is connected to filter B with the following media type.</span></span>

-   <span data-ttu-id="82318-122">(**bilargeur**, **bihauteur**) : 320, 240</span><span class="sxs-lookup"><span data-stu-id="82318-122">(**biWidth**, **biHeight**): 320, 240</span></span>
-   <span data-ttu-id="82318-123">**rcSource**: (0, 0, 160, 240)</span><span class="sxs-lookup"><span data-stu-id="82318-123">**rcSource**: (0, 0, 160, 240)</span></span>
-   <span data-ttu-id="82318-124">**rcTarget**: (0, 0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="82318-124">**rcTarget**: (0, 0, 0, 0)</span></span>

<span data-ttu-id="82318-125">Le membre **rcSource** est relatif à la taille de mémoire tampon connectée 320, 240.</span><span class="sxs-lookup"><span data-stu-id="82318-125">The **rcSource** member is relative to the connected buffer size of 320, 240.</span></span> <span data-ttu-id="82318-126">Car le **rcSource** spécifié (0, 0, 160, 240) est la moitié gauche de la mémoire tampon, le filtre a prend la moitié gauche de sa vidéo d’entrée, ou la partie (0, 0, 80, 120) et étire la vidéo sur une taille de (320, 240) (de 4 sur l’axe x et de 2 sur la direction y) et remplit la mémoire tampon de sortie 320 x 240.</span><span class="sxs-lookup"><span data-stu-id="82318-126">Because the specified **rcSource** (0, 0, 160, 240) is the left half of the buffer, filter A will take the left half of its input video, or the (0, 0, 80, 120) portion, and stretch the video to a size of (320, 240) (by 4 in the x direction, and by 2 in the y direction) and filling the 320 x 240 output buffer.</span></span>

<span data-ttu-id="82318-127">Supposons à présent que Filter A appelle [**CBaseAllocator :: GetBuffer**](cbaseallocator-getbuffer.md)et que l’exemple de support retourné a un type de média associé, ce qui signifie que le filtre B souhaite filtrer un pour fournir une taille ou un type de vidéo différent de celui qu’il avait précédemment fourni.</span><span class="sxs-lookup"><span data-stu-id="82318-127">Now assume that filter A calls [**CBaseAllocator::GetBuffer**](cbaseallocator-getbuffer.md), and the media sample returned has a media type attached to it, signifying that filter B wants filter A to provide a different size or kind of video than it has previously been providing.</span></span> <span data-ttu-id="82318-128">Supposons que le nouveau type de média est :</span><span class="sxs-lookup"><span data-stu-id="82318-128">Assume the new media type is:</span></span>

-   <span data-ttu-id="82318-129">(**bilargeur**, **bihauteur**) : 640, 480</span><span class="sxs-lookup"><span data-stu-id="82318-129">(**biWidth**, **biHeight**): 640, 480</span></span>
-   <span data-ttu-id="82318-130">**rcSource**: (0, 0, 160, 120)</span><span class="sxs-lookup"><span data-stu-id="82318-130">**rcSource**: (0, 0, 160, 120)</span></span>
-   <span data-ttu-id="82318-131">**rcTarget**: (0, 0, 80, 60)</span><span class="sxs-lookup"><span data-stu-id="82318-131">**rcTarget**: (0, 0, 80, 60)</span></span>

<span data-ttu-id="82318-132">Cela signifie que l’exemple de support a une mémoire tampon dont la taille est de 640 x 480.</span><span class="sxs-lookup"><span data-stu-id="82318-132">This means that the media sample has a buffer that is 640 x 480 in size.</span></span> <span data-ttu-id="82318-133">Le membre **rcSource** est relatif au type de support de connexion d’origine (320, 240) et non au nouveau type de média (640, 480), donc **rcSource** spécifie que l’angle supérieur gauche (25%) de la vidéo d’entrée doit être utilisé.</span><span class="sxs-lookup"><span data-stu-id="82318-133">The **rcSource** member is relative to the original connected media type (320, 240) not to the new media type of (640, 480), so **rcSource** specifies that the top-left corner (25%) of the input video is to be used.</span></span> <span data-ttu-id="82318-134">Cette partie de la vidéo d’entrée est placée en haut à gauche (80, 60) pixels de la mémoire tampon de sortie 640 x 480, comme spécifié par **rcTarget** (0, 0, 80, 60).</span><span class="sxs-lookup"><span data-stu-id="82318-134">This portion of the input video is placed in the top-left (80, 60) pixels of the 640 x 480 output buffer, as specified by **rcTarget** of (0, 0, 80, 60).</span></span> <span data-ttu-id="82318-135">Étant donné que le filtre A reçoit une vidéo 160 x 120, le coin supérieur gauche de la vidéo d’entrée est un élément (80, 60), dont la taille est identique à celle de la bitmap de sortie et aucun étirement n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="82318-135">Because filter A is receiving 160 x 120 video, the top-left corner of the input video is an (80, 60) piece, the same size of the output bitmap, and no stretching is required.</span></span>

<span data-ttu-id="82318-136">Le filtre A n’placera aucune donnée dans les autres pixels de la mémoire tampon de sortie et laisse ces bits intacts.</span><span class="sxs-lookup"><span data-stu-id="82318-136">Filter A will place no data in the other pixels of the output buffer, and will leave those bits untouched.</span></span> <span data-ttu-id="82318-137">Le membre **rcSource** est limité par la **bilargeur** et la **bihauteur** du type de média connecté d’origine entre les filtres A et B, et **rcTarget** est délimité par la nouvelle **largeur** et la **bihauteur** de l’échantillon de support.</span><span class="sxs-lookup"><span data-stu-id="82318-137">The **rcSource** member is bounded by the **biWidth** and **biHeight** of the original connected media type between filters A and B, and **rcTarget** is bounded by the new **biWidth** and **biHeight** of the media sample.</span></span> <span data-ttu-id="82318-138">Dans l’exemple précédent, **rcSource** n’a pas pu aller en dehors des limites de (0, 0, 320, 240) et **rcTarget** n’a pas pu sortir des limites de (0, 0, 640, 480).</span><span class="sxs-lookup"><span data-stu-id="82318-138">In the preceding example, **rcSource** could not go outside the boundaries of (0, 0, 320, 240) and **rcTarget** could not go outside the boundaries of (0, 0, 640, 480).</span></span>

 

 



