---
description: La classe CMediaSample définit un exemple de support qui prend en charge l’interface IMediaSample2. L’exemple de support contient un pointeur vers une mémoire tampon et diverses propriétés stockées en tant que variables membres protégées.
ms.assetid: 1e609c7c-3200-4540-904e-7659976df0da
title: CMediaSample, classe (Amfilter. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CMediaSample
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: 72cfe0f86ff6b6643f2f7793822899136a5c6454
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/22/2021
ms.locfileid: "106532703"
---
# <a name="cmediasample-class"></a><span data-ttu-id="b1864-104">CMediaSample, classe</span><span class="sxs-lookup"><span data-stu-id="b1864-104">CMediaSample class</span></span>

![hiérarchie de la classe cmediasample](images/wutil03.png)

<span data-ttu-id="b1864-106">La `CMediaSample` classe définit un exemple de média qui prend en charge l’interface [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) .</span><span class="sxs-lookup"><span data-stu-id="b1864-106">The `CMediaSample` class defines a media sample that supports the [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) interface.</span></span> <span data-ttu-id="b1864-107">L’exemple de support contient un pointeur vers une mémoire tampon et diverses propriétés stockées en tant que variables membres protégées.</span><span class="sxs-lookup"><span data-stu-id="b1864-107">The media sample contains a pointer to a memory buffer, and various properties stored as protected member variables.</span></span>

<span data-ttu-id="b1864-108">Les exemples de média sont créés par des allocateurs, qui sont dérivés de la classe [**CBaseAllocator**](cbaseallocator.md) .</span><span class="sxs-lookup"><span data-stu-id="b1864-108">Media samples are created by allocators, which are derived from the [**CBaseAllocator**](cbaseallocator.md) class.</span></span> <span data-ttu-id="b1864-109">Le `CMediaSample` constructeur reçoit un pointeur vers une mémoire tampon allouée, ainsi que la taille de la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="b1864-109">The `CMediaSample` constructor receives a pointer to an allocated buffer, along with the size of the buffer.</span></span> <span data-ttu-id="b1864-110">D’autres propriétés sont généralement définies et récupérées par le biais de méthodes d’interface [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) .</span><span class="sxs-lookup"><span data-stu-id="b1864-110">Other properties are typically set and retrieved through [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) interface methods.</span></span>

<span data-ttu-id="b1864-111">Le cycle de vie d’un exemple de média diffère de celui de la plupart des objets COM :</span><span class="sxs-lookup"><span data-stu-id="b1864-111">The life cycle of a media sample differs from that of most COM objects:</span></span>

-   <span data-ttu-id="b1864-112">L’Allocator contient une liste d’échantillons gratuits.</span><span class="sxs-lookup"><span data-stu-id="b1864-112">The allocator holds a list of free samples.</span></span> <span data-ttu-id="b1864-113">Lorsqu’un filtre a besoin d’un nouvel exemple, il appelle la méthode [**IMemAllocator :: GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) de l’allocateur.</span><span class="sxs-lookup"><span data-stu-id="b1864-113">When a filter needs a new sample, it calls the allocator's [**IMemAllocator::GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) method.</span></span> <span data-ttu-id="b1864-114">L’Allocator récupère un exemple à partir de sa liste libre, incrémente le décompte de références de l’exemple et retourne un pointeur vers l’exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-114">The allocator retrieves a sample from its free list, increments the sample's reference count, and returns a pointer to the sample.</span></span>
-   <span data-ttu-id="b1864-115">Une fois le filtre terminé avec l’exemple, il appelle la méthode **IUnknown :: Release** sur l’exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-115">After the filter is done with the sample, it calls the **IUnknown::Release** method on the sample.</span></span> <span data-ttu-id="b1864-116">Contrairement à la plupart des objets, l’exemple ne se supprime pas quand son décompte de références atteint zéro.</span><span class="sxs-lookup"><span data-stu-id="b1864-116">Unlike most objects, the sample does not delete itself when its reference count reaches zero.</span></span> <span data-ttu-id="b1864-117">Au lieu de cela, il appelle la méthode [**IMemAllocator :: ReleaseBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-releasebuffer) sur l’allocateur, et l’allocateur retourne l’exemple à sa liste libre.</span><span class="sxs-lookup"><span data-stu-id="b1864-117">Instead, it calls the [**IMemAllocator::ReleaseBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-releasebuffer) method on the allocator, and the allocator returns the sample to its free list.</span></span>
-   <span data-ttu-id="b1864-118">L’Allocator ne détruit pas les exemples tant que la méthode [**IMemAllocator ::D ecommit**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-decommit) est appelée.</span><span class="sxs-lookup"><span data-stu-id="b1864-118">The allocator does not destroy samples until the [**IMemAllocator::Decommit**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-decommit) method is called.</span></span>



| <span data-ttu-id="b1864-119">Variables membres protégées</span><span class="sxs-lookup"><span data-stu-id="b1864-119">Protected Member Variables</span></span>                                           | <span data-ttu-id="b1864-120">Description</span><span class="sxs-lookup"><span data-stu-id="b1864-120">Description</span></span>                                                                                     |
|----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b1864-121">**m \_ dwFlags**</span><span class="sxs-lookup"><span data-stu-id="b1864-121">**m\_dwFlags**</span></span>](cmediasample-m-dwflags.md)                         | <span data-ttu-id="b1864-122">Exemples d’indicateurs de propriété.</span><span class="sxs-lookup"><span data-stu-id="b1864-122">Sample property flags.</span></span>                                                                          |
| [<span data-ttu-id="b1864-123">**m \_ dwTypeSpecificFlags**</span><span class="sxs-lookup"><span data-stu-id="b1864-123">**m\_dwTypeSpecificFlags**</span></span>](cmediasample-m-dwtypespecificflags.md) | <span data-ttu-id="b1864-124">Indicateurs spécifiques au type.</span><span class="sxs-lookup"><span data-stu-id="b1864-124">Type-specific flags.</span></span>                                                                            |
| [<span data-ttu-id="b1864-125">**m \_ pbuffer**</span><span class="sxs-lookup"><span data-stu-id="b1864-125">**m\_pBuffer**</span></span>](cmediasample-m-pbuffer.md)                         | <span data-ttu-id="b1864-126">Pointeur vers la mémoire tampon qui contient les données multimédia.</span><span class="sxs-lookup"><span data-stu-id="b1864-126">Pointer to the memory buffer that contains the media data.</span></span>                                      |
| [<span data-ttu-id="b1864-127">**m \_ lActual**</span><span class="sxs-lookup"><span data-stu-id="b1864-127">**m\_lActual**</span></span>](cmediasample-m-lactual.md)                         | <span data-ttu-id="b1864-128">Longueur des données valides dans la mémoire tampon, en octets.</span><span class="sxs-lookup"><span data-stu-id="b1864-128">Length of the valid data in the buffer, in bytes.</span></span>                                               |
| [<span data-ttu-id="b1864-129">**m \_ cbBuffer**</span><span class="sxs-lookup"><span data-stu-id="b1864-129">**m\_cbBuffer**</span></span>](cmediasample-m-cbbuffer.md)                       | <span data-ttu-id="b1864-130">Taille de la mémoire tampon, en octets.</span><span class="sxs-lookup"><span data-stu-id="b1864-130">Size of the buffer, in bytes.</span></span>                                                                   |
| [<span data-ttu-id="b1864-131">**m \_ pAllocator**</span><span class="sxs-lookup"><span data-stu-id="b1864-131">**m\_pAllocator**</span></span>](cmediasample-m-pallocator.md)                   | <span data-ttu-id="b1864-132">Pointeur vers l’allocateur qui a créé cet exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-132">Pointer to the allocator that created this sample.</span></span>                                              |
| [<span data-ttu-id="b1864-133">**m \_ pNext**</span><span class="sxs-lookup"><span data-stu-id="b1864-133">**m\_pNext**</span></span>](cmediasample-m-pnext.md)                             | <span data-ttu-id="b1864-134">Pointeur vers l’exemple suivant dans la liste des exemples de l’allocateur.</span><span class="sxs-lookup"><span data-stu-id="b1864-134">Pointer to the next sample in the allocator's list of samples.</span></span>                                  |
| [<span data-ttu-id="b1864-135">**\_début m**</span><span class="sxs-lookup"><span data-stu-id="b1864-135">**m\_Start**</span></span>](cmediasample-m-start.md)                             | <span data-ttu-id="b1864-136">Heure de début de l’exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-136">Sample start time.</span></span>                                                                              |
| [<span data-ttu-id="b1864-137">**\_fin m**</span><span class="sxs-lookup"><span data-stu-id="b1864-137">**m\_End**</span></span>](cmediasample-m-end.md)                                 | <span data-ttu-id="b1864-138">Heure de fin de l’exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-138">Sample end time.</span></span>                                                                                |
| [<span data-ttu-id="b1864-139">**m \_ MediaStart**</span><span class="sxs-lookup"><span data-stu-id="b1864-139">**m\_MediaStart**</span></span>](cmediasample-m-mediastart.md)                   | <span data-ttu-id="b1864-140">Heure de début du média.</span><span class="sxs-lookup"><span data-stu-id="b1864-140">Media start time.</span></span>                                                                               |
| [<span data-ttu-id="b1864-141">**m \_ MediaEnd**</span><span class="sxs-lookup"><span data-stu-id="b1864-141">**m\_MediaEnd**</span></span>](cmediasample-m-mediaend.md)                       | <span data-ttu-id="b1864-142">Heure d’arrêt du support.</span><span class="sxs-lookup"><span data-stu-id="b1864-142">Media stop time.</span></span>                                                                                |
| [<span data-ttu-id="b1864-143">**m \_ pMediaType**</span><span class="sxs-lookup"><span data-stu-id="b1864-143">**m\_pMediaType**</span></span>](cmediasample-m-pmediatype.md)                   | <span data-ttu-id="b1864-144">Pointeur vers le type de média, si le type a été modifié par rapport à l’exemple précédent dans le flux de données.</span><span class="sxs-lookup"><span data-stu-id="b1864-144">Pointer to the media type, if the type has changed from the previous sample in the data stream.</span></span> |
| [<span data-ttu-id="b1864-145">**m \_ dwStreamId**</span><span class="sxs-lookup"><span data-stu-id="b1864-145">**m\_dwStreamId**</span></span>](cmediasample-m-dwstreamid.md)                   | <span data-ttu-id="b1864-146">Identificateur de flux.</span><span class="sxs-lookup"><span data-stu-id="b1864-146">Stream identifier.</span></span>                                                                              |
| <span data-ttu-id="b1864-147">Variables membres publiques</span><span class="sxs-lookup"><span data-stu-id="b1864-147">Public Member Variables</span></span>                                              | <span data-ttu-id="b1864-148">Description</span><span class="sxs-lookup"><span data-stu-id="b1864-148">Description</span></span>                                                                                     |
| [<span data-ttu-id="b1864-149">**m \_ cref**</span><span class="sxs-lookup"><span data-stu-id="b1864-149">**m\_cRef**</span></span>](cmediasample-m-cref.md)                               | <span data-ttu-id="b1864-150">Nombre de références.</span><span class="sxs-lookup"><span data-stu-id="b1864-150">Reference count.</span></span>                                                                                |
| <span data-ttu-id="b1864-151">M&#233;thodes publiques</span><span class="sxs-lookup"><span data-stu-id="b1864-151">Public Methods</span></span>                                                       | <span data-ttu-id="b1864-152">Description</span><span class="sxs-lookup"><span data-stu-id="b1864-152">Description</span></span>                                                                                     |
| [<span data-ttu-id="b1864-153">**CMediaSample**</span><span class="sxs-lookup"><span data-stu-id="b1864-153">**CMediaSample**</span></span>](cmediasample-cmediasample.md)                    | <span data-ttu-id="b1864-154">Méthode de constructeur.</span><span class="sxs-lookup"><span data-stu-id="b1864-154">Constructor method.</span></span>                                                                             |
| [<span data-ttu-id="b1864-155">**~ CMediaSample**</span><span class="sxs-lookup"><span data-stu-id="b1864-155">**~ CMediaSample**</span></span>](cmediasample--cmediasample.md)                 | <span data-ttu-id="b1864-156">Méthode de destructeur.</span><span class="sxs-lookup"><span data-stu-id="b1864-156">Destructor method.</span></span> <span data-ttu-id="b1864-157">Virtuels.</span><span class="sxs-lookup"><span data-stu-id="b1864-157">Virtual.</span></span>                                                                     |
| [<span data-ttu-id="b1864-158">**SetPoint**</span><span class="sxs-lookup"><span data-stu-id="b1864-158">**SetPointer**</span></span>](cmediasample-setpointer.md)                        | <span data-ttu-id="b1864-159">Définit le pointeur sur la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="b1864-159">Sets the pointer to the memory buffer.</span></span>                                                          |
| <span data-ttu-id="b1864-160">Méthodes IMediaSample</span><span class="sxs-lookup"><span data-stu-id="b1864-160">IMediaSample Methods</span></span>                                                 | <span data-ttu-id="b1864-161">Description</span><span class="sxs-lookup"><span data-stu-id="b1864-161">Description</span></span>                                                                                     |
| [<span data-ttu-id="b1864-162">**GetPointer**</span><span class="sxs-lookup"><span data-stu-id="b1864-162">**GetPointer**</span></span>](cmediasample-getpointer.md)                        | <span data-ttu-id="b1864-163">Récupère un pointeur en lecture/écriture dans la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="b1864-163">Retrieves a read/write pointer to the buffer.</span></span>                                                   |
| [<span data-ttu-id="b1864-164">**GetSize,**</span><span class="sxs-lookup"><span data-stu-id="b1864-164">**GetSize**</span></span>](cmediasample-getsize.md)                              | <span data-ttu-id="b1864-165">Récupère la taille de la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="b1864-165">Retrieves the size of the buffer.</span></span>                                                               |
| [<span data-ttu-id="b1864-166">**GetTime**</span><span class="sxs-lookup"><span data-stu-id="b1864-166">**GetTime**</span></span>](cmediasample-gettime.md)                              | <span data-ttu-id="b1864-167">Récupère les temps de flux auxquels cet exemple doit commencer et se terminer.</span><span class="sxs-lookup"><span data-stu-id="b1864-167">Retrieves the stream times at which this sample should begin and finish.</span></span>                        |
| [<span data-ttu-id="b1864-168">**SetTime**</span><span class="sxs-lookup"><span data-stu-id="b1864-168">**SetTime**</span></span>](cmediasample-settime.md)                              | <span data-ttu-id="b1864-169">Définit les temps de flux auxquels cet exemple doit commencer et se terminer.</span><span class="sxs-lookup"><span data-stu-id="b1864-169">Sets the stream times at which this sample should start and finish.</span></span>                             |
| [<span data-ttu-id="b1864-170">**IsSyncPoint**</span><span class="sxs-lookup"><span data-stu-id="b1864-170">**IsSyncPoint**</span></span>](cmediasample-issyncpoint.md)                      | <span data-ttu-id="b1864-171">Détermine si le début de l’exemple est un point de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="b1864-171">Determines if the beginning of the sample is a synchronization point.</span></span>                           |
| [<span data-ttu-id="b1864-172">**SetSyncPoint**</span><span class="sxs-lookup"><span data-stu-id="b1864-172">**SetSyncPoint**</span></span>](cmediasample-setsyncpoint.md)                    | <span data-ttu-id="b1864-173">Spécifie si le début de cet exemple est un point de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="b1864-173">Specifies whether the beginning of this sample is a synchronization point.</span></span>                      |
| [<span data-ttu-id="b1864-174">**IsPreroll**</span><span class="sxs-lookup"><span data-stu-id="b1864-174">**IsPreroll**</span></span>](cmediasample-ispreroll.md)                          | <span data-ttu-id="b1864-175">Détermine si cet exemple est un exemple de préroll.</span><span class="sxs-lookup"><span data-stu-id="b1864-175">Determines if this sample is a preroll sample.</span></span>                                                  |
| [<span data-ttu-id="b1864-176">**SetPreroll**</span><span class="sxs-lookup"><span data-stu-id="b1864-176">**SetPreroll**</span></span>](cmediasample-setpreroll.md)                        | <span data-ttu-id="b1864-177">Spécifie si cet exemple est un exemple de préroll.</span><span class="sxs-lookup"><span data-stu-id="b1864-177">Specifies whether this sample is a preroll sample.</span></span>                                              |
| [<span data-ttu-id="b1864-178">**GetActualDataLength**</span><span class="sxs-lookup"><span data-stu-id="b1864-178">**GetActualDataLength**</span></span>](cmediasample-getactualdatalength.md)      | <span data-ttu-id="b1864-179">Récupère la longueur des données valides dans la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="b1864-179">Retrieves the length of the valid data in the buffer.</span></span>                                           |
| [<span data-ttu-id="b1864-180">**SetActualDataLength**</span><span class="sxs-lookup"><span data-stu-id="b1864-180">**SetActualDataLength**</span></span>](cmediasample-setactualdatalength.md)      | <span data-ttu-id="b1864-181">Définit la longueur des données valides dans la mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="b1864-181">Sets the length of the valid data in the buffer.</span></span>                                                |
| [<span data-ttu-id="b1864-182">**GetMediaType**</span><span class="sxs-lookup"><span data-stu-id="b1864-182">**GetMediaType**</span></span>](cmediasample-getmediatype.md)                    | <span data-ttu-id="b1864-183">Récupère le type de média si le type de média diffère de l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="b1864-183">Retrieves the media type, if the media type differs from the previous sample.</span></span>                   |
| [<span data-ttu-id="b1864-184">**SetMediaType**</span><span class="sxs-lookup"><span data-stu-id="b1864-184">**SetMediaType**</span></span>](cmediasample-setmediatype.md)                    | <span data-ttu-id="b1864-185">Définit le type de média pour l’exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-185">Sets the media type for the sample.</span></span>                                                             |
| [<span data-ttu-id="b1864-186">**IsDiscontinuity**</span><span class="sxs-lookup"><span data-stu-id="b1864-186">**IsDiscontinuity**</span></span>](cmediasample-isdiscontinuity.md)              | <span data-ttu-id="b1864-187">Détermine si cet exemple représente une rupture dans le flux de données.</span><span class="sxs-lookup"><span data-stu-id="b1864-187">Determines if this sample represents a break in the data stream.</span></span>                                |
| [<span data-ttu-id="b1864-188">**SetDiscontinuity**</span><span class="sxs-lookup"><span data-stu-id="b1864-188">**SetDiscontinuity**</span></span>](cmediasample-setdiscontinuity.md)            | <span data-ttu-id="b1864-189">Spécifie si cet exemple représente une rupture dans le flux de données.</span><span class="sxs-lookup"><span data-stu-id="b1864-189">Specifies whether this sample represents a break in the data stream.</span></span>                            |
| [<span data-ttu-id="b1864-190">**GetMediaTime**</span><span class="sxs-lookup"><span data-stu-id="b1864-190">**GetMediaTime**</span></span>](cmediasample-getmediatime.md)                    | <span data-ttu-id="b1864-191">Récupère les temps de support pour cet exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-191">Retrieves the media times for this sample.</span></span>                                                      |
| [<span data-ttu-id="b1864-192">**SetMediaTime**</span><span class="sxs-lookup"><span data-stu-id="b1864-192">**SetMediaTime**</span></span>](cmediasample-setmediatime.md)                    | <span data-ttu-id="b1864-193">Définit les durées de support pour cet exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-193">Sets the media times for this sample.</span></span>                                                           |
| <span data-ttu-id="b1864-194">Méthodes IMediaSample2</span><span class="sxs-lookup"><span data-stu-id="b1864-194">IMediaSample2 Methods</span></span>                                                | <span data-ttu-id="b1864-195">Description</span><span class="sxs-lookup"><span data-stu-id="b1864-195">Description</span></span>                                                                                     |
| [<span data-ttu-id="b1864-196">**GetProperties**</span><span class="sxs-lookup"><span data-stu-id="b1864-196">**GetProperties**</span></span>](cmediasample-getproperties.md)                  | <span data-ttu-id="b1864-197">Récupère les propriétés de l’exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-197">Retrieves the properties of the sample.</span></span>                                                         |
| [<span data-ttu-id="b1864-198">**SetProperties**</span><span class="sxs-lookup"><span data-stu-id="b1864-198">**SetProperties**</span></span>](cmediasample-setproperties.md)                  | <span data-ttu-id="b1864-199">Définit les propriétés de l’exemple.</span><span class="sxs-lookup"><span data-stu-id="b1864-199">Sets the properties of the sample.</span></span>                                                              |



 

## <a name="requirements"></a><span data-ttu-id="b1864-200">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="b1864-200">Requirements</span></span>



| <span data-ttu-id="b1864-201">Condition requise</span><span class="sxs-lookup"><span data-stu-id="b1864-201">Requirement</span></span> | <span data-ttu-id="b1864-202">Valeur</span><span class="sxs-lookup"><span data-stu-id="b1864-202">Value</span></span> |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b1864-203">En-tête</span><span class="sxs-lookup"><span data-stu-id="b1864-203">Header</span></span><br/>  | <dl> <span data-ttu-id="b1864-204"><dt>Amfilter. h (include streams. h)</dt></span><span class="sxs-lookup"><span data-stu-id="b1864-204"><dt>Amfilter.h (include Streams.h)</dt></span></span> </dl>                                                                                  |
| <span data-ttu-id="b1864-205">Bibliothèque</span><span class="sxs-lookup"><span data-stu-id="b1864-205">Library</span></span><br/> | <dl> <span data-ttu-id="b1864-206"><dt>Strmbase. lib (versions commerciales); </dt> <dt>Strmbasd. lib (versions Debug)</dt></span><span class="sxs-lookup"><span data-stu-id="b1864-206"><dt>Strmbase.lib (retail builds); </dt> <dt>Strmbasd.lib (debug builds)</dt></span></span> </dl> |



 

 




