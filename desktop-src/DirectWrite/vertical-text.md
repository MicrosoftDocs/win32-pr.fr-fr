---
title: Texte vertical
description: À compter de Windows 8, DirectWrite possède un certain nombre de nouvelles API qui vous permettent d’utiliser du texte vertical dans vos applications.
ms.assetid: F40A79AE-F7BF-4CAC-9480-1489CD212DA8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0db8788a6be97a55911694942a930e17dc69976a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103941035"
---
# <a name="vertical-text"></a><span data-ttu-id="c2a62-103">Texte vertical</span><span class="sxs-lookup"><span data-stu-id="c2a62-103">Vertical Text</span></span>

<span data-ttu-id="c2a62-104">À compter de Windows 8, [DirectWrite](direct-write-portal.md) possède un certain nombre de nouvelles API qui vous permettent d’utiliser du texte vertical dans vos applications.</span><span class="sxs-lookup"><span data-stu-id="c2a62-104">Starting with the Windows 8, [DirectWrite](direct-write-portal.md) has a number of new APIs that allow you to use vertical text in your apps.</span></span>

## <a name="drawing-vertical-text"></a><span data-ttu-id="c2a62-105">Dessiner du texte vertical</span><span class="sxs-lookup"><span data-stu-id="c2a62-105">Drawing vertical text</span></span>

<span data-ttu-id="c2a62-106">Vous pouvez dessiner du texte vertical avec Direct2D à l’aide des méthodes [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) .</span><span class="sxs-lookup"><span data-stu-id="c2a62-106">You can draw vertical text with Direct2D by using the [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) methods.</span></span> <span data-ttu-id="c2a62-107">Pour dessiner le texte verticalement, transmettez le [**sens de lecture DWRITE de \_ \_ \_ haut \_ en \_ bas**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) à la méthode [**IDWriteTextFormat :: SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) et le sens du déroulement de l' [**DWRITE de droite à \_ \_ \_ \_ \_ gauche**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) à la méthode [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) .</span><span class="sxs-lookup"><span data-stu-id="c2a62-107">To draw the text vertically, pass [**DWRITE\_READING\_DIRECTION\_TOP\_TO\_BOTTOM**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) to the [**IDWriteTextFormat::SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) method and [**DWRITE\_FLOW\_DIRECTION\_RIGHT\_TO\_LEFT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) to the [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) method.</span></span> <span data-ttu-id="c2a62-108">Vous pouvez ensuite créer et dessiner un objet [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) vertical.</span><span class="sxs-lookup"><span data-stu-id="c2a62-108">Then you can create and draw a vertical [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) object.</span></span>

## <a name="analyzing-character-orientation"></a><span data-ttu-id="c2a62-109">Analyser l’orientation des caractères</span><span class="sxs-lookup"><span data-stu-id="c2a62-109">Analyzing character orientation</span></span>

<span data-ttu-id="c2a62-110">Chaque caractère a une orientation de caractère par défaut, ou la direction dans laquelle le caractère doit être orienté dans n’importe quelle disposition directionnelle.</span><span class="sxs-lookup"><span data-stu-id="c2a62-110">Every character has a preferred character orientation, or the direction that the character should be oriented in any directional layout.</span></span> <span data-ttu-id="c2a62-111">Par exemple, dans une disposition horizontale traditionnelle, le texte latin et le texte chinois sont orientés verticalement.</span><span class="sxs-lookup"><span data-stu-id="c2a62-111">For example, in traditional horizontal layout, both the Latin text and the Chinese text are oriented vertically.</span></span> <span data-ttu-id="c2a62-112">D’un autre côté, dans une disposition verticale, le texte chinois reste debout et le texte latin est pivoté de 90 degrés.</span><span class="sxs-lookup"><span data-stu-id="c2a62-112">On the other hand, in a vertical layout, the Chinese text remains upright, and the Latin text is rotated 90 degrees.</span></span> <span data-ttu-id="c2a62-113">Cette différence d’orientation est visible dans l’exemple ici.</span><span class="sxs-lookup"><span data-stu-id="c2a62-113">This difference in orientation is seen in the example here.</span></span>

![image de texte en anglais et en chinois dans les dispositions horizontales et verticales.](images/vertical-text.png)

<span data-ttu-id="c2a62-115">Pour déterminer l’orientation du texte dont vous disposez, vous devez implémenter les interfaces [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) et [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="c2a62-115">To determine the orientation of the text you have, you need to implement the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) interfaces.</span></span> <span data-ttu-id="c2a62-116">La source et le récepteur prennent le glyphe s’exécute et vous permettent de vérifier s’ils sont orientés verticalement ou non.</span><span class="sxs-lookup"><span data-stu-id="c2a62-116">The source and sink take in the glyph runs and let you check if they are oriented vertically or not.</span></span>

<span data-ttu-id="c2a62-117">Après avoir implémenté votre source et votre récepteur, vous appelez la méthode [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) .</span><span class="sxs-lookup"><span data-stu-id="c2a62-117">After you implement your source and sink, you call the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method.</span></span> <span data-ttu-id="c2a62-118">Dans l’exemple d’image, cette fonction retourne 3 exécutions : « English », « 中国 » et « English ».</span><span class="sxs-lookup"><span data-stu-id="c2a62-118">In the example image, this function returns 3 runs: "English", "中国", and "English."</span></span>

## <a name="going-from-characters-to-glyphs"></a><span data-ttu-id="c2a62-119">Passage de caractères aux glyphes</span><span class="sxs-lookup"><span data-stu-id="c2a62-119">Going from characters to glyphs</span></span>

<span data-ttu-id="c2a62-120">Maintenant que vous savez que l’exécution contient des glyphes verticaux, vous devez avoir accès à ces glyphes.</span><span class="sxs-lookup"><span data-stu-id="c2a62-120">Now that you know the run contains vertical glyphs, you need to get access to those glyphs.</span></span> <span data-ttu-id="c2a62-121">Dans l’exemple jusqu’à présent, il y a 3 exécutions : une avec des glyphes verticaux et deux sans.</span><span class="sxs-lookup"><span data-stu-id="c2a62-121">In the example so far, there are 3 runs: one with vertical glyphs and two without.</span></span> <span data-ttu-id="c2a62-122">Pour passer des caractères aux glyphes, vous devez appeler [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span><span class="sxs-lookup"><span data-stu-id="c2a62-122">To transition from characters to glyphs, you call [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span></span> <span data-ttu-id="c2a62-123">Cette méthode retourne les index de glyphe correspondants pour les caractères de l’exemple.</span><span class="sxs-lookup"><span data-stu-id="c2a62-123">This method returns the corresponding glyph indices for the characters in the example.</span></span> <span data-ttu-id="c2a62-124">Étant donné que la méthode [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) retourne une exécution avec des glyphes verticaux, vous devez appeler [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), qui retourne les ID de glyphes orientés verticalement à la place des ID de glyphes actuels.</span><span class="sxs-lookup"><span data-stu-id="c2a62-124">Because the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method returns a run with vertical glyphs, you need to call [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), which returns the vertically oriented glyph IDs in place of the current glyph IDs.</span></span>

## <a name="drawing-text-vertically"></a><span data-ttu-id="c2a62-125">Dessiner du texte verticalement</span><span class="sxs-lookup"><span data-stu-id="c2a62-125">Drawing text vertically</span></span>

<span data-ttu-id="c2a62-126">Enfin, vous devez disposer et dessiner le texte.</span><span class="sxs-lookup"><span data-stu-id="c2a62-126">Finally, you need to lay out and draw the text.</span></span> <span data-ttu-id="c2a62-127">Étant donné que vous dessinez le texte verticalement, vous devez obtenir davantage d’informations pour que le texte latin soit dessiné correctement.</span><span class="sxs-lookup"><span data-stu-id="c2a62-127">Because you're drawing the text vertically, you need to get some more info so that the Latin text is drawn correctly.</span></span> <span data-ttu-id="c2a62-128">Si vous dessinez tout le texte le long de la ligne de base centrale, le texte latin apparaît comme flottant au milieu de la ligne.</span><span class="sxs-lookup"><span data-stu-id="c2a62-128">If you draw all of the text along the central baseline, the Latin text appears to float in the middle of the line.</span></span> <span data-ttu-id="c2a62-129">Vous devez avoir accès à la ligne de base centrale et romaine pour aligner correctement le texte.</span><span class="sxs-lookup"><span data-stu-id="c2a62-129">You need access to both the central and Roman baseline to align the text correctly.</span></span> <span data-ttu-id="c2a62-130">Utilisez la méthode [**IDWriteTextAnalyzer1 :: GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) pour récupérer les valeurs numériques des lignes de base que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="c2a62-130">Use the [**IDWriteTextAnalyzer1::GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) method to get the numerical values of the baselines you specify.</span></span> <span data-ttu-id="c2a62-131">Vous pouvez soustraire la ligne de base romaine de la ligne de base centrale pour récupérer le décalage entre les deux.</span><span class="sxs-lookup"><span data-stu-id="c2a62-131">You can subtract the Roman baseline from the central baseline to get the offset between the two.</span></span>

<span data-ttu-id="c2a62-132">Avec toutes ces informations, vous pouvez dessiner le texte à l’écran.</span><span class="sxs-lookup"><span data-stu-id="c2a62-132">With all this info, you can draw the text on the screen.</span></span> <span data-ttu-id="c2a62-133">Tout d’abord, appelez la méthode [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) avec les résultats des objets [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) et [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="c2a62-133">First, call the [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) method with the results from the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) objects.</span></span>

<span data-ttu-id="c2a62-134">Si vous utilisez [Direct2D](rendering-by-using-direct2d.md) , vous devez également définir la transformation universelle sur la cible de rendu Direct2D pour le rendu vertical.</span><span class="sxs-lookup"><span data-stu-id="c2a62-134">If you’re using [Direct2D](rendering-by-using-direct2d.md) you also need to set the world transform on the Direct2D render target for vertical rendering.</span></span>

<span data-ttu-id="c2a62-135">Enfin, appelez [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) trois fois, une fois sur chaque bloc de texte.</span><span class="sxs-lookup"><span data-stu-id="c2a62-135">Finally, call [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) three times, once on each block of text.</span></span> <span data-ttu-id="c2a62-136">Dans les deux blocs de texte en anglais, vous devez appliquer le décalage que nous avons calculé entre les lignes de base romanes et centrales.</span><span class="sxs-lookup"><span data-stu-id="c2a62-136">On the two blocks of text that are in English, you need to apply the offset that we calculated between the Roman and central baselines.</span></span>

<span data-ttu-id="c2a62-137">À présent, le texte de votre application est dessiné verticalement, avec l’orientation de glyphe correcte.</span><span class="sxs-lookup"><span data-stu-id="c2a62-137">Now, the text in your app will be drawn vertically, with the correct glyph orientation.</span></span>

 

 