---
title: IDXCoreAdapterFactory::RegisterEventNotification
description: S’inscrit pour recevoir des notifications de conditions spécifiques à partir d’un adaptateur DXCore ou d’une liste d’adaptateurs.
ms.localizationpriority: low
ms.topic: reference
ms.date: 06/20/2019
ms.openlocfilehash: 3643fbb01fc955049c297a577f18d4d276e73f46
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104463507"
---
# <a name="idxcoreadapterfactoryregistereventnotification-method"></a><span data-ttu-id="63e14-103">IDXCoreAdapterFactory :: RegisterEventNotification, méthode</span><span class="sxs-lookup"><span data-stu-id="63e14-103">IDXCoreAdapterFactory::RegisterEventNotification method</span></span>

<span data-ttu-id="63e14-104">S’inscrit pour recevoir des notifications de conditions spécifiques à partir d’un adaptateur DXCore ou d’une liste d’adaptateurs.</span><span class="sxs-lookup"><span data-stu-id="63e14-104">Registers to receive notifications of specific conditions from a DXCore adapter or adapter list.</span></span> <span data-ttu-id="63e14-105">Pour obtenir des conseils de programmation et des exemples de code, consultez [utilisation de dxcore pour énumérer des adaptateurs](../dxcore-enum-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="63e14-105">For programming guidance, and code examples, see [Using DXCore to enumerate adapters](../dxcore-enum-adapters.md).</span></span>

## <a name="syntax"></a><span data-ttu-id="63e14-106">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="63e14-106">Syntax</span></span>

```cpp
virtual HRESULT STDMETHODCALLTYPE RegisterEventNotification(
  _In_ IUnknown *dxCoreObject,
  DXCoreNotificationType notificationType,
  _In_ PFN_DXCORE_NOTIFICATION_CALLBACK callbackFunction,
  _In_opt_ void *callbackContext,
  _Out_ uint32_t *eventCookie) = 0;
```

## <a name="parameters"></a><span data-ttu-id="63e14-107">Paramètres</span><span class="sxs-lookup"><span data-stu-id="63e14-107">Parameters</span></span>

### <a name="dxcoreobject-in"></a><span data-ttu-id="63e14-108">dxCoreObject [in]</span><span class="sxs-lookup"><span data-stu-id="63e14-108">dxCoreObject [in]</span></span>

<span data-ttu-id="63e14-109">Type : **[IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown)\***</span><span class="sxs-lookup"><span data-stu-id="63e14-109">Type: **[IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown)\***</span></span>

<span data-ttu-id="63e14-110">Objet DXCore ([IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md) ou [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md)) dont vous êtes abonné aux notifications.</span><span class="sxs-lookup"><span data-stu-id="63e14-110">The DXCore object ([IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md) or [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md)) whose notifications you're subscribing to.</span></span>

### <a name="notificationtype"></a><span data-ttu-id="63e14-111">notificationType</span><span class="sxs-lookup"><span data-stu-id="63e14-111">notificationType</span></span>

<span data-ttu-id="63e14-112">Type : **[DXCoreNotificationType](./ne-dxcore_interface-dxcorenotificationtype.md)**</span><span class="sxs-lookup"><span data-stu-id="63e14-112">Type: **[DXCoreNotificationType](./ne-dxcore_interface-dxcorenotificationtype.md)**</span></span>

<span data-ttu-id="63e14-113">Type de notification pour laquelle vous effectuez l’inscription.</span><span class="sxs-lookup"><span data-stu-id="63e14-113">The type of notification that you're registering for.</span></span> <span data-ttu-id="63e14-114">Consultez le tableau dans [DXCoreNotificationType](./ne-dxcore_interface-dxcorenotificationtype.md) pour plus d’informations sur les types qui sont valides avec les genres d’objets.</span><span class="sxs-lookup"><span data-stu-id="63e14-114">See the table in [DXCoreNotificationType](./ne-dxcore_interface-dxcorenotificationtype.md) for info about what types are valid with which kinds of objects.</span></span>

### <a name="callbackfunction-in"></a><span data-ttu-id="63e14-115">callbackFunction [in]</span><span class="sxs-lookup"><span data-stu-id="63e14-115">callbackFunction [in]</span></span>

<span data-ttu-id="63e14-116">Type : **[PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md)**</span><span class="sxs-lookup"><span data-stu-id="63e14-116">Type: **[PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md)**</span></span>

<span data-ttu-id="63e14-117">Pointeur vers une fonction de rappel (implémentée par votre application), qui est appelée par l’objet DXCore pour les événements de notification.</span><span class="sxs-lookup"><span data-stu-id="63e14-117">A pointer to a callback function (implemented by your application), which is called by the DXCore object for notification events.</span></span> <span data-ttu-id="63e14-118">Pour obtenir la signature de la fonction, consultez [PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md).</span><span class="sxs-lookup"><span data-stu-id="63e14-118">For the signature of the function, see [PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md).</span></span>

### <a name="callbackcontext-in"></a><span data-ttu-id="63e14-119">callbackContext [in]</span><span class="sxs-lookup"><span data-stu-id="63e14-119">callbackContext [in]</span></span>

<span data-ttu-id="63e14-120">Type : **void \***</span><span class="sxs-lookup"><span data-stu-id="63e14-120">Type: **void\***</span></span>

<span data-ttu-id="63e14-121">Pointeur facultatif vers un objet contenant des informations de contexte.</span><span class="sxs-lookup"><span data-stu-id="63e14-121">An optional pointer to an object containing context info.</span></span> <span data-ttu-id="63e14-122">Cet objet est passé à votre fonction de rappel lorsque la notification est déclenchée.</span><span class="sxs-lookup"><span data-stu-id="63e14-122">This object is passed to your callback function when the notification is raised.</span></span>

### <a name="eventcookie-out"></a><span data-ttu-id="63e14-123">eventCookie [out]</span><span class="sxs-lookup"><span data-stu-id="63e14-123">eventCookie [out]</span></span>

<span data-ttu-id="63e14-124">Type : **uint32_t \***</span><span class="sxs-lookup"><span data-stu-id="63e14-124">Type: **uint32_t\***</span></span>

<span data-ttu-id="63e14-125">Pointeur vers une valeur **uint32_t** .</span><span class="sxs-lookup"><span data-stu-id="63e14-125">A pointer to a **uint32_t** value.</span></span> <span data-ttu-id="63e14-126">En cas de réussite, la fonction déréférence le pointeur et définit la valeur sur une valeur de cookie différente de zéro représentant cette inscription.</span><span class="sxs-lookup"><span data-stu-id="63e14-126">If successful, the function dereferences the pointer and sets the value to a non-zero cookie value representing this registration.</span></span> <span data-ttu-id="63e14-127">Utilisez cette valeur de cookie pour annuler l’inscription de la notification en appelant [IDXCoreAdapterFactory :: UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span><span class="sxs-lookup"><span data-stu-id="63e14-127">Use this cookie value to unregister from the notification by calling [IDXCoreAdapterFactory::UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span></span> <span data-ttu-id="63e14-128">Consultez la **section Notes**.</span><span class="sxs-lookup"><span data-stu-id="63e14-128">See **Remarks**.</span></span>

<span data-ttu-id="63e14-129">En cas d’échec, la fonction déréférence le pointeur et définit la valeur sur zéro, ce qui représente une valeur de cookie non valide.</span><span class="sxs-lookup"><span data-stu-id="63e14-129">If unsuccessful, the function dereferences the pointer and sets the value to zero, which represents an invalid cookie value.</span></span>

## <a name="returns"></a><span data-ttu-id="63e14-130">Retours</span><span class="sxs-lookup"><span data-stu-id="63e14-130">Returns</span></span>

<span data-ttu-id="63e14-131">Type : **[HRESULT](../../com/structure-of-com-error-codes.md)**</span><span class="sxs-lookup"><span data-stu-id="63e14-131">Type: **[HRESULT](../../com/structure-of-com-error-codes.md)**</span></span>

<span data-ttu-id="63e14-132">Si la fonction est réussie, elle retourne **S_OK**.</span><span class="sxs-lookup"><span data-stu-id="63e14-132">If the function succeeds, it returns **S_OK**.</span></span> <span data-ttu-id="63e14-133">Sinon, elle retourne un [](../../com/structure-of-com-error-codes.md) [code d’erreur](../../com/com-error-codes-10.md)HRESULT.</span><span class="sxs-lookup"><span data-stu-id="63e14-133">Otherwise, it returns an [**HRESULT**](../../com/structure-of-com-error-codes.md) [error code](../../com/com-error-codes-10.md).</span></span>

|<span data-ttu-id="63e14-134">Valeur retournée</span><span class="sxs-lookup"><span data-stu-id="63e14-134">Return value</span></span>|<span data-ttu-id="63e14-135">Description</span><span class="sxs-lookup"><span data-stu-id="63e14-135">Description</span></span>|
|-|-|
|<span data-ttu-id="63e14-136">DXGI_ERROR_INVALID_CALL</span><span class="sxs-lookup"><span data-stu-id="63e14-136">DXGI_ERROR_INVALID_CALL</span></span>|<span data-ttu-id="63e14-137">*NotificationType* n’est pas pris en charge par le système d’exploitation (OS).</span><span class="sxs-lookup"><span data-stu-id="63e14-137">*notificationType* is unsupported by the operating system (OS).</span></span>|
|<span data-ttu-id="63e14-138">E_INVALIDARG</span><span class="sxs-lookup"><span data-stu-id="63e14-138">E_INVALIDARG</span></span>|<span data-ttu-id="63e14-139">`nullptr` a été fourni pour *dxCoreObject* ou si une combinaison *NotificationType* et *dxCoreObject* non valide a été fournie.</span><span class="sxs-lookup"><span data-stu-id="63e14-139">`nullptr` was provided for *dxCoreObject*, or if an invalid *notificationType* and *dxCoreObject* combination was provided.</span></span>|
|<span data-ttu-id="63e14-140">E_POINTER</span><span class="sxs-lookup"><span data-stu-id="63e14-140">E_POINTER</span></span>|<span data-ttu-id="63e14-141">`nullptr` a été fourni pour *callbackFunction* ou *eventCookie*.</span><span class="sxs-lookup"><span data-stu-id="63e14-141">`nullptr` was provided for either *callbackFunction* or *eventCookie*.</span></span>|

## <a name="remarks"></a><span data-ttu-id="63e14-142">Notes</span><span class="sxs-lookup"><span data-stu-id="63e14-142">Remarks</span></span>

<span data-ttu-id="63e14-143">Vous utilisez **RegisterEventNotification** pour vous inscrire aux événements déclenchés par les interfaces [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md) et [IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md) .</span><span class="sxs-lookup"><span data-stu-id="63e14-143">You use **RegisterEventNotification** to register for events raised by [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md) and [IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md) interfaces.</span></span> <span data-ttu-id="63e14-144">Ces types de notifications sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="63e14-144">These notification types are supported.</span></span>

|[<span data-ttu-id="63e14-145">DXCoreNotificationType</span><span class="sxs-lookup"><span data-stu-id="63e14-145">DXCoreNotificationType</span></span>](./ne-dxcore_interface-dxcorenotificationtype.md)|<span data-ttu-id="63e14-146">*DxCoreObject* pris en charge</span><span class="sxs-lookup"><span data-stu-id="63e14-146">Supported *dxCoreObject*</span></span>|<span data-ttu-id="63e14-147">Notes</span><span class="sxs-lookup"><span data-stu-id="63e14-147">Notes</span></span>|
|-|-|-|
|<span data-ttu-id="63e14-148">AdapterListStale</span><span class="sxs-lookup"><span data-stu-id="63e14-148">AdapterListStale</span></span>|<span data-ttu-id="63e14-149">**IDXCoreAdapterList**</span><span class="sxs-lookup"><span data-stu-id="63e14-149">**IDXCoreAdapterList**</span></span>|<span data-ttu-id="63e14-150">Indique que la liste des adaptateurs répondant à vos critères de filtre a changé.</span><span class="sxs-lookup"><span data-stu-id="63e14-150">Indicates that the list of adapters meeting your filter criteria has changed.</span></span> <span data-ttu-id="63e14-151">Si la liste des adaptateurs est périmée au moment de l’inscription, votre rappel est immédiatement appelé.</span><span class="sxs-lookup"><span data-stu-id="63e14-151">If the adapter list is stale at the time of registration, then your callback is immediately called.</span></span> <span data-ttu-id="63e14-152">Ce rappel se produit au plus une fois par inscription.</span><span class="sxs-lookup"><span data-stu-id="63e14-152">This callback occurs at most one time per registration.</span></span>|
|<span data-ttu-id="63e14-153">AdapterNoLongerValid</span><span class="sxs-lookup"><span data-stu-id="63e14-153">AdapterNoLongerValid</span></span>|<span data-ttu-id="63e14-154">**IDXCoreAdapter**</span><span class="sxs-lookup"><span data-stu-id="63e14-154">**IDXCoreAdapter**</span></span>|<span data-ttu-id="63e14-155">Indique que l’adaptateur n’est plus valide.</span><span class="sxs-lookup"><span data-stu-id="63e14-155">Indicates that the adapter is no longer valid.</span></span> <span data-ttu-id="63e14-156">Si l’adaptateur n’est pas valide au moment de l’inscription, votre rappel est immédiatement appelé.</span><span class="sxs-lookup"><span data-stu-id="63e14-156">If the adapter is invalid at registration time, then your callback is immediately called.</span></span>|
|<span data-ttu-id="63e14-157">AdapterBudgetChange</span><span class="sxs-lookup"><span data-stu-id="63e14-157">AdapterBudgetChange</span></span>|<span data-ttu-id="63e14-158">**IDXCoreAdapter**</span><span class="sxs-lookup"><span data-stu-id="63e14-158">**IDXCoreAdapter**</span></span>|<span data-ttu-id="63e14-159">Indique qu’un événement de budgétisation de mémoire s’est produit et que vous devez appeler [IDXCoreAdapter :: QueryState](./nf-dxcore_interface-idxcoreadapter-querystate.md) (avec [DXCoreAdapterState :: AdapterMemoryBudget](./ne-dxcore_interface-dxcoreadapterstate.md)) pour évaluer l’état actuel du budget de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="63e14-159">Indicates that a memory budgeting event has occurred, and that you should call [IDXCoreAdapter::QueryState](./nf-dxcore_interface-idxcoreadapter-querystate.md) (with [DXCoreAdapterState::AdapterMemoryBudget](./ne-dxcore_interface-dxcoreadapterstate.md)) to evaluate the current memory budget state.</span></span> <span data-ttu-id="63e14-160">Lors de l’inscription, un rappel initial se produira toujours pour vous permettre d’interroger l’état initial.</span><span class="sxs-lookup"><span data-stu-id="63e14-160">Upon registration, an initial callback will always occur to allow you to query the initial state.</span></span>|
|<span data-ttu-id="63e14-161">AdapterHardwareContentProtectionTeardown</span><span class="sxs-lookup"><span data-stu-id="63e14-161">AdapterHardwareContentProtectionTeardown</span></span>|<span data-ttu-id="63e14-162">**IDXCoreAdapter**</span><span class="sxs-lookup"><span data-stu-id="63e14-162">**IDXCoreAdapter**</span></span>|<span data-ttu-id="63e14-163">Indique que vous devez réévaluer l’état actuel de la session de chiffrement. par exemple, en appelant [ID3D11VideoContext1 :: CheckCryptoSessionStatus](/windows/win32/api/d3d11_1/nf-d3d11_1-id3d11videocontext1-checkcryptosessionstatus) pour déterminer l’impact de la démontage du matériel pour une interface [ID3D11CryptoSession](/windows/win32/api/d3d11/nn-d3d11-id3d11cryptosession) spécifique.</span><span class="sxs-lookup"><span data-stu-id="63e14-163">Indicates that you should re-evaluate the current crypto session status; for example, by calling [ID3D11VideoContext1::CheckCryptoSessionStatus](/windows/win32/api/d3d11_1/nf-d3d11_1-id3d11videocontext1-checkcryptosessionstatus) to determine the impact of the hardware teardown for a specific [ID3D11CryptoSession](/windows/win32/api/d3d11/nn-d3d11-id3d11cryptosession) interface.</span></span> <span data-ttu-id="63e14-164">Lors de l’inscription, un rappel initial se produira toujours pour vous permettre d’interroger l’état initial.</span><span class="sxs-lookup"><span data-stu-id="63e14-164">Upon registration, an initial callback will always occur to allow you to query the initial state.</span></span>|

<span data-ttu-id="63e14-165">Un appel à la fonction que vous fournissez dans *callbackFunction* est effectué de façon asynchrone sur un thread d’arrière-plan par dxcore lorsque l’événement détecté se produit.</span><span class="sxs-lookup"><span data-stu-id="63e14-165">A call to the function that you provide in *callbackFunction* is made asynchronously on a background thread by DXCore when the detected event occurs.</span></span> <span data-ttu-id="63e14-166">Aucune garantie n’est établie en ce qui concerne le classement ou le minutage des rappels &mdash; . plusieurs rappels peuvent se produire dans n’importe quel ordre, voire simultanément.</span><span class="sxs-lookup"><span data-stu-id="63e14-166">No guarantee is made as to the ordering or timing of callbacks&mdash;multiple callbacks may occur in any order, or even simultaneously.</span></span> <span data-ttu-id="63e14-167">Il est même possible d’appeler votre rappel avant la fin de **RegisterEventNotification** .</span><span class="sxs-lookup"><span data-stu-id="63e14-167">It's even possible for your callback to be invoked before **RegisterEventNotification** has completed.</span></span> <span data-ttu-id="63e14-168">Dans ce cas, DXCore garantit que votre *eventCookie* est défini avant l’appel de votre rappel.</span><span class="sxs-lookup"><span data-stu-id="63e14-168">In that case, DXCore guarantees that your *eventCookie* is set before your callback is called.</span></span> <span data-ttu-id="63e14-169">Plusieurs rappels pour une inscription spécifique sont sérialisés dans l’ordre.</span><span class="sxs-lookup"><span data-stu-id="63e14-169">Multiple callbacks for a specific registration will be serialized in order.</span></span>

<span data-ttu-id="63e14-170">Les rappels peuvent se produire à tout moment jusqu’à ce que vous appeliez [UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md)et qu’il se termine.</span><span class="sxs-lookup"><span data-stu-id="63e14-170">Callbacks may occur at any time until you call [UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md), and it completes.</span></span> <span data-ttu-id="63e14-171">Les rappels se produisent sur leurs propres threads, et vous pouvez effectuer des appels dans l’API DXCore sur ces threads, y compris **UnregisterEventNotification**.</span><span class="sxs-lookup"><span data-stu-id="63e14-171">Callbacks occur on their own threads, and you may make calls into the DXCore API on those threads, including **UnregisterEventNotification**.</span></span> <span data-ttu-id="63e14-172">Toutefois, vous ne devez pas libérer la dernière référence à *dxCoreObject* sur ce thread.</span><span class="sxs-lookup"><span data-stu-id="63e14-172">However, you must not release the last reference to the *dxCoreObject* on this thread.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="63e14-173">Avant de détruire l’objet DXCore représenté par l’argument *dxCoreObject* passé à **RegisterEventNotification**, vous devez utiliser la valeur cookie pour annuler l’inscription de cet objet dans les notifications en appelant [IDXCoreAdapterFactory :: UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span><span class="sxs-lookup"><span data-stu-id="63e14-173">Before you destroy the DXCore object represented by the *dxCoreObject* argument passed to **RegisterEventNotification**, you must use the cookie value to unregister that object from notifications by calling [IDXCoreAdapterFactory::UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span></span> <span data-ttu-id="63e14-174">Si vous ne le faites pas, une exception irrécupérable est générée lorsque la situation est détectée.</span><span class="sxs-lookup"><span data-stu-id="63e14-174">If you don't do that, then a fatal exception is raised when the situation is detected.</span></span>

## <a name="see-also"></a><span data-ttu-id="63e14-175">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="63e14-175">See also</span></span>

<span data-ttu-id="63e14-176">[IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md), [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md), [IDXCoreAdapterFactory :: UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md), [DXCore Reference](../dxcore-reference.md), [à l’aide de dxcore pour énumérer les adaptateurs](../dxcore-enum-adapters.md)</span><span class="sxs-lookup"><span data-stu-id="63e14-176">[IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md), [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md), [IDXCoreAdapterFactory::UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md), [DXCore Reference](../dxcore-reference.md), [Using DXCore to enumerate adapters](../dxcore-enum-adapters.md)</span></span>