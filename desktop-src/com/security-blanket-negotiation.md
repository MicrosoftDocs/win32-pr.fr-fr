---
title: Négociation de sécurité permanente
description: Négociation de sécurité permanente
ms.assetid: 5a01912d-611c-4a6e-ab9d-0243cba331f1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e51407de908eaaf0f79eea452046f8e424ccf900
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "104031931"
---
# <a name="security-blanket-negotiation"></a><span data-ttu-id="946a5-103">Négociation de sécurité permanente</span><span class="sxs-lookup"><span data-stu-id="946a5-103">Security Blanket Negotiation</span></span>

<span data-ttu-id="946a5-104">Une couverture de sécurité est un groupe de valeurs qui décrivent les paramètres de sécurité qui s’appliquent à tous les proxies d’un processus ou uniquement à un proxy d’interface particulier.</span><span class="sxs-lookup"><span data-stu-id="946a5-104">A security blanket is a group of values that describe the security settings that apply to all proxies in a process or to just a particular interface proxy.</span></span> <span data-ttu-id="946a5-105">Une couverture de sécurité comprend les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="946a5-105">A security blanket comprises the following values:</span></span>

-   <span data-ttu-id="946a5-106">Service d’authentification</span><span class="sxs-lookup"><span data-stu-id="946a5-106">Authentication service</span></span>
-   <span data-ttu-id="946a5-107">Service d’autorisation</span><span class="sxs-lookup"><span data-stu-id="946a5-107">Authorization service</span></span>
-   <span data-ttu-id="946a5-108">Nom principal</span><span class="sxs-lookup"><span data-stu-id="946a5-108">Principal name</span></span>
-   <span data-ttu-id="946a5-109">Niveau d’authentification</span><span class="sxs-lookup"><span data-stu-id="946a5-109">Authentication level</span></span>
-   <span data-ttu-id="946a5-110">Niveau d'emprunt d'identité</span><span class="sxs-lookup"><span data-stu-id="946a5-110">Impersonation level</span></span>
-   <span data-ttu-id="946a5-111">Identité d’authentification</span><span class="sxs-lookup"><span data-stu-id="946a5-111">Authentication identity</span></span>
-   <span data-ttu-id="946a5-112">Fonctions</span><span class="sxs-lookup"><span data-stu-id="946a5-112">Capabilities</span></span>
-   <span data-ttu-id="946a5-113">Liste de contrôle d’accès (ACL) (serveurs uniquement)</span><span class="sxs-lookup"><span data-stu-id="946a5-113">An access control list (ACL) (servers only)</span></span>

<span data-ttu-id="946a5-114">La négociation permanente de sécurité est le processus utilisé par COM pour choisir les paramètres de sécurité d’un proxy lors de sa création.</span><span class="sxs-lookup"><span data-stu-id="946a5-114">Security blanket negotiation is the process that COM uses to choose the security settings for a proxy when it is created.</span></span> <span data-ttu-id="946a5-115">Ce processus implique la comparaison de la couverture de sécurité du serveur avec la couverture de sécurité du client et l’utilisation de ces valeurs pour créer une couverture de sécurité par défaut appropriée pour le proxy.</span><span class="sxs-lookup"><span data-stu-id="946a5-115">This process involves comparing the server's security blanket with the client's security blanket and using those values to create an appropriate default security blanket for the proxy.</span></span> <span data-ttu-id="946a5-116">Les paragraphes suivants expliquent l’origine des préversions de sécurité du client et du serveur, et décrivent comment COM négocie la couverture de sécurité pour le proxy à l’aide des couvertures de sécurité du client et du serveur.</span><span class="sxs-lookup"><span data-stu-id="946a5-116">The following paragraphs explain where the client's and the server's security blankets come from and describe how COM negotiates the security blanket for the proxy using the client's and server's security blankets.</span></span>

<span data-ttu-id="946a5-117">Le client et le serveur peuvent chacun appeler [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) pour spécifier leurs couvertures de sécurité respectives.</span><span class="sxs-lookup"><span data-stu-id="946a5-117">The client and the server can each call [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) to specify their respective security blankets.</span></span> <span data-ttu-id="946a5-118">Si une application n’appelle pas **CoInitializeSecurity** explicitement, com l’appelle implicitement pour l’application, en utilisant les valeurs par défaut appropriées.</span><span class="sxs-lookup"><span data-stu-id="946a5-118">If an application doesn't call **CoInitializeSecurity** explicitly, COM calls it implicitly for the application, using appropriate default values.</span></span> <span data-ttu-id="946a5-119">Pour plus d’informations sur ces valeurs par défaut, consultez valeurs [par défaut de la sécurité com](com-security-defaults.md).</span><span class="sxs-lookup"><span data-stu-id="946a5-119">For more information about these default values, see [COM Security Defaults](com-security-defaults.md).</span></span>

<span data-ttu-id="946a5-120">Certains paramètres de [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) s’appliquent lorsque l’application est un serveur, et d’autres s’appliquent lorsque l’application est un client.</span><span class="sxs-lookup"><span data-stu-id="946a5-120">Some parameters to [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) apply when the application is a server, and some apply when the application is a client.</span></span> <span data-ttu-id="946a5-121">Lorsque l’application agit en tant que serveur, ces paramètres sont pertinents : une liste de contrôle d’accès, une liste de tuples de service/d’autorisation d’authentification/nom de principal et un niveau d’authentification.</span><span class="sxs-lookup"><span data-stu-id="946a5-121">When the application is acting as a server, these parameters are relevant: an ACL, a list of authentication service/authorization service/principal name tuples, and an authentication level.</span></span> <span data-ttu-id="946a5-122">L’appel d’un serveur à **CoInitializeSecurity**, implicite ou explicite, détermine la couverture de sécurité du serveur, qui reste fixe.</span><span class="sxs-lookup"><span data-stu-id="946a5-122">A server's call to **CoInitializeSecurity**, whether implicit or explicit, determines the server's security blanket, which remains fixed.</span></span>

<span data-ttu-id="946a5-123">Lorsque l’application agit en tant que client, les valeurs suivantes transmises à [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) sont pertinentes : un niveau d’authentification, un niveau d’emprunt d’identité, l’identité d’authentification et des fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="946a5-123">When the application is acting as a client, the following values passed to [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) are relevant: an authentication level, an impersonation level, the authentication identity, and capabilities.</span></span> <span data-ttu-id="946a5-124">L’appel implicite ou explicite d’un client à **CoInitializeSecurity** indique la couverture de sécurité souhaitée par le client.</span><span class="sxs-lookup"><span data-stu-id="946a5-124">A client's implicit or explicit call to **CoInitializeSecurity** indicates the security blanket that the client wants.</span></span>

<span data-ttu-id="946a5-125">Lorsqu’un proxy est créé, COM utilise les valeurs spécifiées par la couverture de sécurité du serveur et la couverture de sécurité du client pour négocier une couverture de sécurité par défaut appropriée pour le proxy.</span><span class="sxs-lookup"><span data-stu-id="946a5-125">When a proxy is created, COM uses the values specified by the server's security blanket and the client's security blanket to negotiate a default security blanket that is appropriate for the proxy.</span></span> <span data-ttu-id="946a5-126">COM choisit un service d’authentification qui fonctionne à la fois sur le client et sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="946a5-126">COM picks an authentication service that works on both the client and server.</span></span> <span data-ttu-id="946a5-127">Le service d’autorisation et le nom principal sont choisis pour fonctionner avec le service d’authentification.</span><span class="sxs-lookup"><span data-stu-id="946a5-127">The authorization service and principal name are chosen to work with the authentication service.</span></span> <span data-ttu-id="946a5-128">Pour le niveau d’authentification, COM choisit le plus élevé des niveaux d’authentification spécifiés par le client et le serveur.</span><span class="sxs-lookup"><span data-stu-id="946a5-128">For the authentication level, COM chooses the higher of the authentication levels specified by the client and the server.</span></span> <span data-ttu-id="946a5-129">Le niveau d’emprunt d’identité et les fonctionnalités choisies par COM sont ceux qui sont spécifiés par le client.</span><span class="sxs-lookup"><span data-stu-id="946a5-129">The impersonation level and the capabilities chosen by COM are the ones specified by the client.</span></span> <span data-ttu-id="946a5-130">L’identité d’authentification est celle spécifiée par le client pour le service d’authentification choisi.</span><span class="sxs-lookup"><span data-stu-id="946a5-130">The authentication identity is the one specified by the client for the chosen authentication service.</span></span>

<span data-ttu-id="946a5-131">Une fois que la couverture de sécurité par défaut a été calculée, ses valeurs sont assignées au proxy nouvellement créé.</span><span class="sxs-lookup"><span data-stu-id="946a5-131">Once the default security blanket has been computed, its values are assigned to the newly created proxy.</span></span> <span data-ttu-id="946a5-132">Le client peut remplacer les paramètres de sécurité du proxy en appelant [**IClientSecurity :: SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket).</span><span class="sxs-lookup"><span data-stu-id="946a5-132">The client can override the security settings for the proxy by calling [**IClientSecurity::SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket).</span></span> <span data-ttu-id="946a5-133">Les valeurs spécifiées à **SetBlanket** ne sont pas négociées ; ils sont simplement affectés au proxy spécifié.</span><span class="sxs-lookup"><span data-stu-id="946a5-133">The values specified to **SetBlanket** are not negotiated; they are simply assigned to the specified proxy.</span></span> <span data-ttu-id="946a5-134">Toutefois, si les paramètres par défaut (tels que les paramètres \_ \_ \_ par défaut du niveau d’IMP RPC \_ ) sont passés à **SetBlanket**, com utilise l’algorithme de négociation permanente de sécurité décrit précédemment pour calculer les paramètres par défaut.</span><span class="sxs-lookup"><span data-stu-id="946a5-134">However, if default parameters (such as RPC\_C\_IMP\_LEVEL\_DEFAULT) are passed to **SetBlanket**, COM uses the previously described security blanket negotiation algorithm to compute the default parameters.</span></span>

## <a name="related-topics"></a><span data-ttu-id="946a5-135">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="946a5-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="946a5-136">Sécurité dans COM</span><span class="sxs-lookup"><span data-stu-id="946a5-136">Security in COM</span></span>](security-in-com.md)
</dt> </dl>

 

 