---
title: Emprunt d'identité
description: L’emprunt d’identité est la capacité d’un thread à s’exécuter dans un contexte de sécurité différent du contexte du processus qui possède le thread.
ms.assetid: b33ca3b0-0423-4338-b3d6-4bb3db3d3e1b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a735fa12e175ecec5dc2a7ed741843d713532e19
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "104031933"
---
# <a name="impersonation"></a><span data-ttu-id="6ddc1-103">Emprunt d'identité</span><span class="sxs-lookup"><span data-stu-id="6ddc1-103">Impersonation</span></span>

<span data-ttu-id="6ddc1-104">L’emprunt d’identité est la capacité d’un thread à s’exécuter dans un contexte de sécurité différent du contexte du processus qui possède le thread.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-104">Impersonation is the ability of a thread to execute in a security context that is different from the context of the process that owns the thread.</span></span> <span data-ttu-id="6ddc1-105">En cas d’exécution dans le contexte de sécurité du client, le serveur « est » le client, dans une certaine mesure.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-105">When running in the client's security context, the server "is" the client, to some degree.</span></span> <span data-ttu-id="6ddc1-106">Le thread serveur utilise un jeton d’accès qui représente les informations d’identification du client pour obtenir l’accès aux objets auxquels le client a accès.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-106">The server thread uses an access token representing the client's credentials to obtain access to the objects to which the client has access.</span></span>

<span data-ttu-id="6ddc1-107">La raison principale de l’emprunt d’identité est de faire en sorte que les vérifications d’accès soient effectuées sur l’identité du client.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-107">The primary reason for impersonation is to cause access checks to be performed against the client's identity.</span></span> <span data-ttu-id="6ddc1-108">L’utilisation de l’identité du client pour les vérifications d’accès peut entraîner une restriction ou une extension de l’accès, en fonction de ce que le client est autorisé à faire.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-108">Using the client's identity for access checks can cause access to be either restricted or expanded, depending on what the client has permission to do.</span></span> <span data-ttu-id="6ddc1-109">Par exemple, supposons qu’un serveur de fichiers possède des fichiers contenant des informations confidentielles et que chacun de ces fichiers soit protégé par une liste de contrôle d’accès.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-109">For example, suppose a file server has files containing confidential information and that each of these files is protected by an ACL.</span></span> <span data-ttu-id="6ddc1-110">Pour empêcher un client d’obtenir un accès non autorisé aux informations contenues dans ces fichiers, le serveur peut emprunter l’identité du client avant d’accéder aux fichiers.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-110">To help prevent a client from obtaining unauthorized access to information in these files, the server can impersonate the client before accessing the files.</span></span>

## <a name="access-tokens-for-impersonation"></a><span data-ttu-id="6ddc1-111">Jetons d’accès pour l’emprunt d’identité</span><span class="sxs-lookup"><span data-stu-id="6ddc1-111">Access Tokens for Impersonation</span></span>

<span data-ttu-id="6ddc1-112">Les jetons d’accès sont des objets qui décrivent le contexte de sécurité d’un processus ou d’un thread.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-112">Access tokens are objects that describe the security context of a process or thread.</span></span> <span data-ttu-id="6ddc1-113">Ils fournissent des informations qui incluent l’identité d’un compte d’utilisateur et un sous-ensemble des privilèges disponibles pour le compte d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-113">They provide information that includes the identity of a user account and a subset of the privileges available to the user account.</span></span> <span data-ttu-id="6ddc1-114">Chaque processus a un *jeton d’accès principal* qui décrit le contexte de sécurité du compte d’utilisateur associé au processus.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-114">Every process has a *primary access token* that describes the security context of the user account associated with the process.</span></span> <span data-ttu-id="6ddc1-115">Par défaut, le système utilise le jeton principal lorsqu’un thread du processus interagit avec un objet sécurisable.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-115">By default, the system uses the primary token when a thread of the process interacts with a securable object.</span></span> <span data-ttu-id="6ddc1-116">Toutefois, lorsqu’un thread emprunte l’identité d’un client, le thread d’emprunt d’identité dispose à la fois d’un jeton d’accès principal et d’un *jeton d’emprunt d’identité*.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-116">However, when a thread impersonates a client, the impersonating thread has both a primary access token and an *impersonation token*.</span></span> <span data-ttu-id="6ddc1-117">Le jeton d’emprunt d’identité représente le contexte de sécurité du client, et ce jeton d’accès est celui utilisé pour les vérifications d’accès pendant l’emprunt d’identité.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-117">The impersonation token represents the client's security context, and this access token is the one that is used for access checks during impersonation.</span></span> <span data-ttu-id="6ddc1-118">Lorsque l’emprunt d’identité est terminé, le thread revient à utiliser uniquement le jeton d’accès principal.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-118">When impersonation is over, the thread reverts to using only the primary access token.</span></span>

<span data-ttu-id="6ddc1-119">Vous pouvez utiliser la fonction [**OpenProcessToken**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) pour obtenir un handle vers le jeton principal d’un processus.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-119">You can use the [**OpenProcessToken**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) function to get a handle to the primary token of a process.</span></span> <span data-ttu-id="6ddc1-120">Utilisez la fonction [**OpenThreadToken**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) pour obtenir un handle pour le jeton d’emprunt d’identité d’un thread.</span><span class="sxs-lookup"><span data-stu-id="6ddc1-120">Use the [**OpenThreadToken**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) function to get a handle to the impersonation token of a thread.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6ddc1-121">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="6ddc1-121">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6ddc1-122">Jetons d’accès</span><span class="sxs-lookup"><span data-stu-id="6ddc1-122">Access Tokens</span></span>](/windows/desktop/SecAuthZ/access-tokens)
</dt> <dt>

[<span data-ttu-id="6ddc1-123">Délégation et emprunt d’identité</span><span class="sxs-lookup"><span data-stu-id="6ddc1-123">Delegation and Impersonation</span></span>](delegation-and-impersonation.md)
</dt> </dl>

 

 