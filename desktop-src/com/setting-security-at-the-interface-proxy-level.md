---
title: Définition de la sécurité au niveau du proxy d’interface
description: Parfois, le client a besoin d’un contrôle affiné sur la sécurité des appels à des interfaces particulières.
ms.assetid: 72925ca2-78c9-47d9-8760-63f6379326d2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b38fe83e8ce8841cc9029808a6947ec67d4eaf4
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "106509473"
---
# <a name="setting-security-at-the-interface-proxy-level"></a><span data-ttu-id="e6bb1-103">Définition de la sécurité au niveau du proxy d’interface</span><span class="sxs-lookup"><span data-stu-id="e6bb1-103">Setting Security at the Interface Proxy Level</span></span>

<span data-ttu-id="e6bb1-104">Parfois, le client a besoin d’un contrôle affiné sur la sécurité des appels à des interfaces particulières.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-104">Sometimes the client needs fine-grained control over the security on calls to particular interfaces.</span></span> <span data-ttu-id="e6bb1-105">Par exemple, la sécurité peut être définie à un niveau bas pour le processus, mais les appels à une interface particulière peuvent nécessiter un niveau d’authentification plus élevé, tel que le chiffrement.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-105">For example, security might be set at a low level for the process but calls to a particular interface might require a higher authentication level, such as encryption.</span></span> <span data-ttu-id="e6bb1-106">Les méthodes de l’interface [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) permettent au client de modifier les paramètres de sécurité associés aux appels à une interface particulière en contrôlant les paramètres de sécurité au niveau de l’interface-proxy.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-106">The methods of the [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) interface allow the client to change the security settings associated with calls to a particular interface by controlling the security settings at the interface-proxy level.</span></span>

<span data-ttu-id="e6bb1-107">Le client peut interroger un objet existant pour [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) , puis appeler la méthode [**IClientSecurity :: QueryBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-queryblanket) pour connaître les paramètres de sécurité actuels pour un proxy d’interface particulier.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-107">The client can query an existing object for [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) and then call the [**IClientSecurity::QueryBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-queryblanket) method to find out what the current security settings are for a particular interface proxy.</span></span> <span data-ttu-id="e6bb1-108">La méthode [**IClientSecurity :: SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) peut être utilisée pour modifier les paramètres de sécurité d’un proxy d’interface individuel sur l’objet avant d’appeler l’une des méthodes de l’interface.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-108">The [**IClientSecurity::SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) method can be used to modify the security settings for an individual interface proxy on the object before calling one of the interface's methods.</span></span> <span data-ttu-id="e6bb1-109">Les nouveaux paramètres s’appliquent à tous les appelants ultérieurs de cette interface particulière.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-109">The new settings apply to any future callers of this particular interface.</span></span> <span data-ttu-id="e6bb1-110">La méthode [**IClientSecurity :: CopyProxy**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-copyproxy) permet au client de copier un proxy d’interface afin que les appels suivants à **SetBlanket** sur la copie n’affectent pas les appelants du proxy d’origine.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-110">The [**IClientSecurity::CopyProxy**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-copyproxy) method provides a way for the client to copy an interface proxy so that subsequent calls to **SetBlanket** on the copy do not affect callers of the original proxy.</span></span>

<span data-ttu-id="e6bb1-111">[**SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) est couramment utilisé pour élever le niveau d’authentification d’un proxy d’interface particulier à un niveau de protection de sécurité plus élevé.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-111">[**SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) is commonly used to raise the authentication level for a particular interface proxy to a higher level of security protection.</span></span> <span data-ttu-id="e6bb1-112">Toutefois, dans certaines situations, il peut également être utile de réduire le niveau d’authentification pour un proxy d’interface particulier.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-112">However, in some situations, it might also be helpful to lower the authentication level for a particular interface proxy.</span></span> <span data-ttu-id="e6bb1-113">Par exemple, supposons que le niveau d’authentification par défaut pour le processus soit une valeur autre que le niveau d’authentification RPC \_ C \_ \_ \_ aucun et que le client et le serveur se trouvent dans des domaines distincts qui ne s’approuvent pas mutuellement.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-113">For instance, suppose the default authentication level for the process is some value other than RPC\_C\_AUTHN\_LEVEL\_NONE and the client and server are in separate domains that do not trust each other.</span></span> <span data-ttu-id="e6bb1-114">Dans ce cas, les appels au serveur échouent, à moins que le client n’appelle **SetBlanket** pour réduire le niveau d’authentification au niveau d’authentification RPC \_ C « aucun » \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="e6bb1-114">In this case, calls to the server will fail unless the client calls **SetBlanket** to lower the authentication level to RPC\_C\_AUTHN\_LEVEL\_NONE.</span></span>

<span data-ttu-id="e6bb1-115">Les clients qui utilisent l’implémentation par défaut de [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) fournie par le gestionnaire proxy peuvent appeler les fonctions d’assistance [**CoQueryProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryproxyblanket), [**CoSetProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket)et [**CoCopyProxy**](/windows/desktop/api/combaseapi/nf-combaseapi-cocopyproxy) au lieu d’appeler directement les méthodes **IClientSecurity** .</span><span class="sxs-lookup"><span data-stu-id="e6bb1-115">Clients using the default implementation of [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) provided by the proxy manager can call the [**CoQueryProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryproxyblanket), [**CoSetProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket), and [**CoCopyProxy**](/windows/desktop/api/combaseapi/nf-combaseapi-cocopyproxy) helper functions instead of calling **IClientSecurity** methods directly.</span></span> <span data-ttu-id="e6bb1-116">Les fonctions d’assistance simplifient le code, mais sont légèrement moins efficaces que l’appel direct des méthodes **IClientSecurity** correspondantes.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-116">The helper functions simplify the code but are slightly less efficient than calling the corresponding **IClientSecurity** methods directly.</span></span>

<span data-ttu-id="e6bb1-117">L’interface [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) est implémentée localement pour le client par le gestionnaire proxy.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-117">The [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) interface is implemented locally for the client by the proxy manager.</span></span> <span data-ttu-id="e6bb1-118">Certains objets marshalés personnalisés ne prennent peut-être pas en charge **IClientSecurity**.</span><span class="sxs-lookup"><span data-stu-id="e6bb1-118">Some custom marshaled objects might not support **IClientSecurity**.</span></span>

<span data-ttu-id="e6bb1-119">[**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) fonctionne avec tous les services d’authentification pris en charge (actuellement NTLMSSP, Schannel et le protocole Kerberos V5).</span><span class="sxs-lookup"><span data-stu-id="e6bb1-119">[**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) works with all supported authentication services (currently NTLMSSP, Schannel, and the Kerberos v5 protocol).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e6bb1-120">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="e6bb1-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e6bb1-121">Définition de la sécurité pour les applications COM</span><span class="sxs-lookup"><span data-stu-id="e6bb1-121">Setting Security for COM Applications</span></span>](setting-security-for-com-applications.md)
</dt> </dl>

 

 