---
title: Mise en route (DirectXMath)
description: La bibliothèque DirectXMath implémente une interface optimale et portable pour les opérations algébriques arithmétiques et linéaires sur des vecteurs à virgule flottante simple précision (2D, 3D et 4D) ou des matrices (3 × 3 et 4 × 4).
ms.assetid: 9972e382-7a0f-88a7-ad44-18521af3520d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 05e599acfc498e28b33acfc5bbbba2bea5669d2a
ms.sourcegitcommit: 3bdf30edb314e0fcd17dc4ddbc70e4ec7d3596e6
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/10/2021
ms.locfileid: "104321385"
---
# <a name="getting-started-directxmath"></a><span data-ttu-id="fc844-103">Mise en route (DirectXMath)</span><span class="sxs-lookup"><span data-stu-id="fc844-103">Getting started (DirectXMath)</span></span>

<span data-ttu-id="fc844-104">La bibliothèque DirectXMath implémente une interface optimale et portable pour les opérations algébriques arithmétiques et linéaires sur des vecteurs à virgule flottante simple précision (2D, 3D et 4D) ou des matrices (3 × 3 et 4 × 4).</span><span class="sxs-lookup"><span data-stu-id="fc844-104">The DirectXMath Library implements an optimal and portable interface for arithmetic and linear algebra operations on single-precision floating-point vectors (2D, 3D, and 4D) or matrices (3×3 and 4×4).</span></span> <span data-ttu-id="fc844-105">La bibliothèque dispose d’une prise en charge limitée pour les opérations de vecteur entier.</span><span class="sxs-lookup"><span data-stu-id="fc844-105">The library has some limited support for integer vector operations.</span></span> <span data-ttu-id="fc844-106">Ces opérations sont largement utilisées pour le rendu et l’animation par les programmes graphiques.</span><span class="sxs-lookup"><span data-stu-id="fc844-106">These operations are used extensively in rendering and animation by graphics programs.</span></span> <span data-ttu-id="fc844-107">Il n’existe aucune prise en charge des vecteurs à double précision (y compris les longs, les shorts ou les octets) et les opérations de vecteur d’entiers limitées.</span><span class="sxs-lookup"><span data-stu-id="fc844-107">There is no support for double-precision vectors (including longs, shorts, or bytes), and only limited integer vector operations.</span></span>

<span data-ttu-id="fc844-108">La bibliothèque est disponible sur diverses plateformes Windows.</span><span class="sxs-lookup"><span data-stu-id="fc844-108">The library is available on a variety of Windows platforms.</span></span> <span data-ttu-id="fc844-109">Étant donné que la bibliothèque fournit des fonctionnalités qui ne sont pas disponibles précédemment, cette version remplace les bibliothèques suivantes :</span><span class="sxs-lookup"><span data-stu-id="fc844-109">Because the library provides functionality not available previously, this version supersedes the following libraries:</span></span>

-   <span data-ttu-id="fc844-110">Bibliothèque mathématique Xbox fournie par l’en-tête Xboxmath. h</span><span class="sxs-lookup"><span data-stu-id="fc844-110">Xbox Math library provided by the Xboxmath.h header</span></span>
-   <span data-ttu-id="fc844-111">Bibliothèque D3DX 9 fournie par les dll D3DX 9</span><span class="sxs-lookup"><span data-stu-id="fc844-111">D3DX 9 library provided by the D3DX 9 DLLs</span></span>
-   <span data-ttu-id="fc844-112">Bibliothèque mathématique D3DX 10 fournie par le biais des dll D3DX 10</span><span class="sxs-lookup"><span data-stu-id="fc844-112">D3DX 10 math library provided through the D3DX 10 DLLs</span></span>
-   <span data-ttu-id="fc844-113">Bibliothèque mathématique XNA fournie par l’en-tête xnamath. h dans le kit de développement logiciel (SDK) DirectX et Xbox 360 XDK</span><span class="sxs-lookup"><span data-stu-id="fc844-113">XNA Math library provided by the xnamath.h header in the DirectX SDK and Xbox 360 XDK</span></span>

<span data-ttu-id="fc844-114">Ces sections décrivent les principes fondamentaux de la mise en route.</span><span class="sxs-lookup"><span data-stu-id="fc844-114">These sections outline the basics of getting started.</span></span>

-   [<span data-ttu-id="fc844-115">Télécharger</span><span class="sxs-lookup"><span data-stu-id="fc844-115">Download</span></span>](#download)
-   [<span data-ttu-id="fc844-116">Configuration système requise pour l’exécution</span><span class="sxs-lookup"><span data-stu-id="fc844-116">Run-Time System Requirements</span></span>](#run-time-system-requirements)
-   [<span data-ttu-id="fc844-117">Vue d’ensemble de la conception</span><span class="sxs-lookup"><span data-stu-id="fc844-117">Design Overview</span></span>](#design-overview)
-   [<span data-ttu-id="fc844-118">Convention de matrice</span><span class="sxs-lookup"><span data-stu-id="fc844-118">Matrix convention</span></span>](#matrix-convention)
-   [<span data-ttu-id="fc844-119">Utilisation de base</span><span class="sxs-lookup"><span data-stu-id="fc844-119">Basic Usage</span></span>](#basic-usage)
-   [<span data-ttu-id="fc844-120">Instructions d’utilisation de type</span><span class="sxs-lookup"><span data-stu-id="fc844-120">Type Usage Guidelines</span></span>](#type-usage-guidelines)
-   [<span data-ttu-id="fc844-121">Création de vecteurs</span><span class="sxs-lookup"><span data-stu-id="fc844-121">Creating Vectors</span></span>](#creating-vectors)
    -   [<span data-ttu-id="fc844-122">VECTEURS DE CONSTANTE</span><span class="sxs-lookup"><span data-stu-id="fc844-122">CONSTANT VECTORS</span></span>](#constant-vectors)
    -   [<span data-ttu-id="fc844-123">VECTEURS DE VARIABLES</span><span class="sxs-lookup"><span data-stu-id="fc844-123">VECTORS FROM VARIABLES</span></span>](#vectors-from-variables)
    -   [<span data-ttu-id="fc844-124">VECTEURS À PARTIR DE VECTEURS</span><span class="sxs-lookup"><span data-stu-id="fc844-124">VECTORS FROM VECTORS</span></span>](#vectors-from-vectors)
    -   [<span data-ttu-id="fc844-125">VECTEURS DE LA MÉMOIRE</span><span class="sxs-lookup"><span data-stu-id="fc844-125">VECTORS FROM MEMORY</span></span>](#vectors-from-memory)
-   [<span data-ttu-id="fc844-126">Extraction de composants à partir de vecteurs</span><span class="sxs-lookup"><span data-stu-id="fc844-126">Extracting Components from Vectors</span></span>](#extracting-components-from-vectors)
-   [<span data-ttu-id="fc844-127">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="fc844-127">Related topics</span></span>](#related-topics)

## <a name="download"></a><span data-ttu-id="fc844-128">Télécharger</span><span class="sxs-lookup"><span data-stu-id="fc844-128">Download</span></span>

<span data-ttu-id="fc844-129">La bibliothèque DirectXMath est incluse dans le SDK Windows.</span><span class="sxs-lookup"><span data-stu-id="fc844-129">The DirectXMath library is included in the Windows SDK.</span></span> <span data-ttu-id="fc844-130">Vous pouvez également le télécharger à partir de [GitHub/Microsoft/DirectXMath](https://github.com/Microsoft/DirectXMath).</span><span class="sxs-lookup"><span data-stu-id="fc844-130">Alternatively you can download it from [GitHub/Microsoft/DirectXMath](https://github.com/Microsoft/DirectXMath).</span></span> <span data-ttu-id="fc844-131">Ce site contient également des exemples de projets associés.</span><span class="sxs-lookup"><span data-stu-id="fc844-131">This site also contains related sample projects.</span></span>

## <a name="run-time-system-requirements"></a><span data-ttu-id="fc844-132">Configuration système requise pour Run-Time</span><span class="sxs-lookup"><span data-stu-id="fc844-132">Run-Time System Requirements</span></span>

<span data-ttu-id="fc844-133">La bibliothèque DirectXMath utilise des instructions de processeur spécialisées pour les opérations vectorielles lorsqu’elles sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="fc844-133">The DirectXMath Library uses specialized processor instructions for vector operations when they are available.</span></span> <span data-ttu-id="fc844-134">Pour éviter qu’un programme ne génère des erreurs « exception d’instruction inconnue », vérifiez la prise en charge du processeur en appelant [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport) avant d’utiliser la bibliothèque DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="fc844-134">To avoid having a program generate "unknown instruction exception" faults, check for processor support by calling [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport) before using the DirectXMath Library.</span></span>

<span data-ttu-id="fc844-135">Voici les spécifications de base de la prise en charge de l’exécution de la bibliothèque DirectXMath :</span><span class="sxs-lookup"><span data-stu-id="fc844-135">These are the basic DirectXMath Library run-time support requirements:</span></span>

-   <span data-ttu-id="fc844-136">La compilation par défaut sur une plateforme Windows (x86/x64) requiert la prise en charge des instructions SSE/SSE2.</span><span class="sxs-lookup"><span data-stu-id="fc844-136">Default compilation on a Windows (x86/x64) platform requires SSE/SSE2 instruction support.</span></span>
-   <span data-ttu-id="fc844-137">La prise en charge par défaut sur une plateforme Windows RT nécessite une prise en charge des instructions ARM-néon.</span><span class="sxs-lookup"><span data-stu-id="fc844-137">Default compliation on a Windows RT platform requires ARM-NEON instruction support.</span></span>
-   <span data-ttu-id="fc844-138">La compilation avec [**\_ XM \_ aucune \_ intrinsèque \_**](ovw-xnamath-reference-directives.md) définie requiert uniquement la prise en charge de l’opération de calcul en virgule flottante standard.</span><span class="sxs-lookup"><span data-stu-id="fc844-138">Compilation with [**\_XM\_NO\_INTRINSICS\_**](ovw-xnamath-reference-directives.md) defined requires only standard floating-point operation support.</span></span>

> [!Note]  
> <span data-ttu-id="fc844-139">Quand vous appelez [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport), incluez <Windows. h> avant d’inclure <> DirectXMath. h.</span><span class="sxs-lookup"><span data-stu-id="fc844-139">When you call [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport), include <windows.h> before you include <DirectXMath.h>.</span></span> <span data-ttu-id="fc844-140">Il s’agit de la seule fonction de la bibliothèque qui requiert tout contenu de <Windows. h> vous n’êtes donc pas obligé d’inclure <> Windows. h dans chaque module qui utilise <DirectXMath. h>.</span><span class="sxs-lookup"><span data-stu-id="fc844-140">This is the only function in the library that requires any content from <windows.h> so you aren't required to include <windows.h> in every module that uses <DirectXMath.h>.</span></span>

 

## <a name="design-overview"></a><span data-ttu-id="fc844-141">Vue d’ensemble de la conception</span><span class="sxs-lookup"><span data-stu-id="fc844-141">Design Overview</span></span>

<span data-ttu-id="fc844-142">La bibliothèque DirectXMath prend principalement en charge le langage de programmation C++.</span><span class="sxs-lookup"><span data-stu-id="fc844-142">The DirectXMath Library primarily supports the C++ programming language.</span></span> <span data-ttu-id="fc844-143">La bibliothèque est implémentée à l’aide de routines inline dans les fichiers d’en-tête, DirectXMath \* . inl, DirectXPackedVector. inl et DirectXCollision. inl.</span><span class="sxs-lookup"><span data-stu-id="fc844-143">The library is implemented using inline routines in the header files, DirectXMath\*.inl, DirectXPackedVector.inl and DirectXCollision.inl.</span></span> <span data-ttu-id="fc844-144">Cette implémentation utilise des intrinsèques du compilateur hautes performances.</span><span class="sxs-lookup"><span data-stu-id="fc844-144">This implementation makes use of high-performance compiler intrinsics.</span></span>

<span data-ttu-id="fc844-145">La bibliothèque DirectXMath fournit les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="fc844-145">The DirectXMath Library provides:</span></span>

-   <span data-ttu-id="fc844-146">Implémentation utilisant des intrinsèques SSE/SSE2.</span><span class="sxs-lookup"><span data-stu-id="fc844-146">An implementation using SSE/SSE2 intrinsics.</span></span>
-   <span data-ttu-id="fc844-147">Implémentation sans intrinsèques.</span><span class="sxs-lookup"><span data-stu-id="fc844-147">An implementation without intrinsics.</span></span>
-   <span data-ttu-id="fc844-148">Implémentation utilisant des intrinsèques ARM-néon.</span><span class="sxs-lookup"><span data-stu-id="fc844-148">An implementation using ARM-NEON intrinsics.</span></span>

<span data-ttu-id="fc844-149">Étant donné que la bibliothèque est distribuée à l’aide de fichiers d’en-tête, utilisez le code source pour personnaliser et optimiser pour votre propre application.</span><span class="sxs-lookup"><span data-stu-id="fc844-149">Because the library is delivered using header files, use the source code to customize and optimize for your own app.</span></span>

## <a name="matrix-convention"></a><span data-ttu-id="fc844-150">Convention de matrice</span><span class="sxs-lookup"><span data-stu-id="fc844-150">Matrix convention</span></span>

<span data-ttu-id="fc844-151">DirectXMath utilise des matrices de lignes-principales, des vecteurs de ligne et la pré-multiplication.</span><span class="sxs-lookup"><span data-stu-id="fc844-151">DirectXMath uses row-major matrices, row vectors, and pre-multiplication.</span></span> <span data-ttu-id="fc844-152">La main est déterminée par la version de fonction utilisée (RH et LH). sinon, la fonction fonctionne avec les coordonnées de la gauche ou de la main droite.</span><span class="sxs-lookup"><span data-stu-id="fc844-152">Handedness is determined by which function version is used (RH vs. LH), otherwise the function works with either left-handed or right-handed view coordinates.</span></span>

<span data-ttu-id="fc844-153">Pour référence, Direct3D a utilisé historiquement le système de coordonnées de gauche, les matrices de lignes principales, les vecteurs de ligne et la pré-multiplication.</span><span class="sxs-lookup"><span data-stu-id="fc844-153">For reference, Direct3D has historically used left-handed coordinate system, row-major matrices, row vectors, and pre-multiplication.</span></span> <span data-ttu-id="fc844-154">Direct3D moderne n’a pas d’exigence forte pour les coordonnées Left et Right-droitier, et en général, les nuanceurs HLSL utilisent par défaut des matrices de colonnes-principales.</span><span class="sxs-lookup"><span data-stu-id="fc844-154">Modern Direct3D does not have a strong requirement for left vs. right-handed coordinates, and typically HLSL shaders default to consuming column-major matrices.</span></span> <span data-ttu-id="fc844-155">Pour plus d’informations, consultez [classement de matrices HLSL](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-per-component-math) .</span><span class="sxs-lookup"><span data-stu-id="fc844-155">See [HLSL Matrix Ordering](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-per-component-math) for details.</span></span>

## <a name="basic-usage"></a><span data-ttu-id="fc844-156">Utilisation de base</span><span class="sxs-lookup"><span data-stu-id="fc844-156">Basic Usage</span></span>

<span data-ttu-id="fc844-157">Pour utiliser les fonctions de la bibliothèque DirectXMath, incluez les en-têtes DirectXMath. h, DirectXPackedVector. h, DirectXColors. h et/ou DirectXCollision. h.</span><span class="sxs-lookup"><span data-stu-id="fc844-157">To use DirectXMath Library functions, include the DirectXMath.h, DirectXPackedVector.h, DirectXColors.h, and/or DirectXCollision.h headers.</span></span> <span data-ttu-id="fc844-158">Les en-têtes se trouvent dans le kit de développement logiciel Windows pour les applications du Windows Store.</span><span class="sxs-lookup"><span data-stu-id="fc844-158">The headers are found in the Windows Software Development Kit for Windows Store apps.</span></span>

## <a name="type-usage-guidelines"></a><span data-ttu-id="fc844-159">Instructions d’utilisation de type</span><span class="sxs-lookup"><span data-stu-id="fc844-159">Type Usage Guidelines</span></span>

<span data-ttu-id="fc844-160">Les types [**XMVECTOR**](xmvector-data-type.md) et [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) sont les chevaux de travail de la bibliothèque DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="fc844-160">The [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types are the work horses for the DirectXMath Library.</span></span> <span data-ttu-id="fc844-161">Chaque opération consomme ou produit des données de ces types.</span><span class="sxs-lookup"><span data-stu-id="fc844-161">Every operation consumes or produces data of these types.</span></span> <span data-ttu-id="fc844-162">Leur utilisation est essentielle à l’utilisation de la bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="fc844-162">Working with them is key to using the library.</span></span> <span data-ttu-id="fc844-163">Toutefois, étant donné que DirectXMath utilise les jeux d’instructions SIMD, ces types de données sont soumis à un certain nombre de restrictions.</span><span class="sxs-lookup"><span data-stu-id="fc844-163">However, since DirectXMath makes use of the SIMD instruction sets, these data types are subject to a number of restrictions.</span></span> <span data-ttu-id="fc844-164">Il est essentiel que vous compreniez ces restrictions si vous souhaitez utiliser correctement les fonctions DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="fc844-164">It is critical that you understand these restrictions if you want to make good use of the DirectXMath functions.</span></span>

<span data-ttu-id="fc844-165">Vous devez considérer [**XMVECTOR**](xmvector-data-type.md) comme un proxy pour un registre matériel SIMD et [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) en tant que proxy pour un regroupement logique de quatre registres matériels SIMD.</span><span class="sxs-lookup"><span data-stu-id="fc844-165">You should think of [**XMVECTOR**](xmvector-data-type.md) as a proxy for a SIMD hardware register, and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) as a proxy for a logical grouping of four SIMD hardware registers.</span></span> <span data-ttu-id="fc844-166">Ces types sont annotés pour indiquer qu’ils nécessitent un alignement sur 16 octets pour fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="fc844-166">These types are annotated to indicate they require 16-byte alignment to work correctly.</span></span> <span data-ttu-id="fc844-167">Le compilateur les place automatiquement correctement sur la pile lorsqu’ils sont utilisés en tant que variable locale, ou les place dans le segment de données lorsqu’ils sont utilisés en tant que variable globale.</span><span class="sxs-lookup"><span data-stu-id="fc844-167">The compiler will automatically place them correctly on the stack when they are used as a local variable, or place them in the data segment when they are used as a global variable.</span></span> <span data-ttu-id="fc844-168">Avec les conventions appropriées, elles peuvent également être transmises en toute sécurité en tant que paramètres d’une fonction (consultez [conventions d’appel](pg-xnamath-internals.md) pour plus d’informations).</span><span class="sxs-lookup"><span data-stu-id="fc844-168">With proper conventions, they can also be passed safely as parameters to a function (see [Calling Conventions](pg-xnamath-internals.md) for details).</span></span>

<span data-ttu-id="fc844-169">Toutefois, les allocations à partir du tas sont plus compliquées.</span><span class="sxs-lookup"><span data-stu-id="fc844-169">Allocations from the heap, however, are more complicated.</span></span> <span data-ttu-id="fc844-170">Par conséquent, vous devez faire attention lorsque vous utilisez [**XMVECTOR**](xmvector-data-type.md) ou [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) en tant que membre d’une classe ou d’une structure à allouer à partir du tas.</span><span class="sxs-lookup"><span data-stu-id="fc844-170">As such, you need to be careful whenever you use either [**XMVECTOR**](xmvector-data-type.md) or [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) as a member of a class or structure to be allocated from the heap.</span></span> <span data-ttu-id="fc844-171">Sur Windows x64, toutes les allocations de tas sont alignées sur 16 octets, mais pour Windows x86, elles sont uniquement alignées sur 8 octets.</span><span class="sxs-lookup"><span data-stu-id="fc844-171">On Windows x64, all heap allocations are 16-byte aligned, but for Windows x86, they are only 8-byte aligned.</span></span> <span data-ttu-id="fc844-172">Il existe des options pour allouer des structures à partir du tas avec alignement sur 16 octets (consultez [aligner correctement les allocations](pg-xnamath-optimizing.md)).</span><span class="sxs-lookup"><span data-stu-id="fc844-172">There are options for allocating structures from the heap with 16-byte alignment (see [Properly Align Allocations](pg-xnamath-optimizing.md)).</span></span> <span data-ttu-id="fc844-173">Pour les programmes C++, vous pouvez utiliser les surcharges opérateur New/Delete/New \[ \] /Delete \[ \] (globalement ou propre à la classe) pour appliquer l’alignement optimal si vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="fc844-173">For C++ programs, you can use operator new/delete/new\[\]/delete\[\] overloads (either globally or class-specific) to enforce optimal alignment if desired.</span></span>

> [!Note]  
> <span data-ttu-id="fc844-174">Comme alternative à l’application de l’alignement dans votre classe C++ directement par la surcharge de New/Delete, vous pouvez utiliser l' [idiome pImpl](https://en.wikipedia.org/wiki/Opaque_pointer).</span><span class="sxs-lookup"><span data-stu-id="fc844-174">As an alternative to enforcing alignment in your C++ class directly by overloading new/delete, you can use the [pImpl idiom](https://en.wikipedia.org/wiki/Opaque_pointer).</span></span> <span data-ttu-id="fc844-175">Si vous vous assurez que votre classe **IMPL** est alignée par le biais de [**\_ \_ malloc**](/cpp/c-runtime-library/reference/aligned-malloc) en interne aligné, vous pouvez utiliser librement les types alignés dans l’implémentation interne.</span><span class="sxs-lookup"><span data-stu-id="fc844-175">If you ensure your **Impl** class is aligned via [**\_aligned\_malloc**](/cpp/c-runtime-library/reference/aligned-malloc) internally, you can then freely use aligned types within the internal implementation.</span></span> <span data-ttu-id="fc844-176">Il s’agit d’une bonne option lorsque la classe « public » est une classe ref Windows Runtime ou prévue pour une utilisation avec le [**ptr std :: shared \_<>**](/cpp/standard-library/shared-ptr-class), ce qui peut autrement perturber l’alignement.</span><span class="sxs-lookup"><span data-stu-id="fc844-176">This is a good option when the 'public' class is a Windows Runtime ref class or intended for use with [**std::shared\_ptr<>**](/cpp/standard-library/shared-ptr-class), which can otherwise disrupt careful alignment.</span></span>

 

<span data-ttu-id="fc844-177">Toutefois, il est souvent plus facile et plus compact d’éviter d’utiliser [**XMVECTOR**](xmvector-data-type.md) ou [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) directement dans une classe ou une structure.</span><span class="sxs-lookup"><span data-stu-id="fc844-177">However, often it is easier and more compact to avoid using [**XMVECTOR**](xmvector-data-type.md) or [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) directly in a class or structure.</span></span> <span data-ttu-id="fc844-178">Utilisez plutôt les [**XMFLOAT3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat3), [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4), [**XMFLOAT4X3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x3), [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4), etc., en tant que membres de votre structure.</span><span class="sxs-lookup"><span data-stu-id="fc844-178">Instead, make use of the [**XMFLOAT3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat3), [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4), [**XMFLOAT4X3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x3), [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4), and so on, as members of your structure.</span></span> <span data-ttu-id="fc844-179">En outre, vous pouvez utiliser les fonctions de [chargement de vecteur](ovw-xnamath-reference-functions-load.md) et de [stockage vectoriel](ovw-xnamath-reference-functions-storage.md) pour déplacer efficacement les données dans des variables locales **XMVECTOR** ou **XMMATRIX** , effectuer des calculs et stocker les résultats.</span><span class="sxs-lookup"><span data-stu-id="fc844-179">Further, you can use the [Vector Loading](ovw-xnamath-reference-functions-load.md) and [Vector Storage](ovw-xnamath-reference-functions-storage.md) functions to move the data efficiently into **XMVECTOR** or **XMMATRIX** local variables, perform computations, and store the results.</span></span> <span data-ttu-id="fc844-180">Il existe également des fonctions de diffusion en continu ([**XMVector3TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector3transformstream), [**XMVector4TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector4transformstream), etc.) qui fonctionnent efficacement directement sur les tableaux de ces types de données.</span><span class="sxs-lookup"><span data-stu-id="fc844-180">There are also streaming functions ([**XMVector3TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector3transformstream), [**XMVector4TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector4transformstream), and so on) that efficiently operate directly on arrays of these data types.</span></span>

## <a name="creating-vectors"></a><span data-ttu-id="fc844-181">Création de vecteurs</span><span class="sxs-lookup"><span data-stu-id="fc844-181">Creating Vectors</span></span>

### <a name="constant-vectors"></a><span data-ttu-id="fc844-182">VECTEURS DE CONSTANTE</span><span class="sxs-lookup"><span data-stu-id="fc844-182">CONSTANT VECTORS</span></span>

<span data-ttu-id="fc844-183">De nombreuses opérations requièrent l’utilisation de constantes dans les calculs vectoriels, et il existe plusieurs façons de charger un [**XMVECTOR**](xmvector-data-type.md) avec les valeurs souhaitées.</span><span class="sxs-lookup"><span data-stu-id="fc844-183">Many operations require the use of constants in vector computations, and there are a number of ways to load an [**XMVECTOR**](xmvector-data-type.md) with the desired values.</span></span>

-   <span data-ttu-id="fc844-184">Si vous chargez une constante scalaire dans tous les éléments d’un [**XMVECTOR**](xmvector-data-type.md), utilisez [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) ou [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span><span class="sxs-lookup"><span data-stu-id="fc844-184">If loading a scalar constant into all elements of an [**XMVECTOR**](xmvector-data-type.md), use [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) or [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span></span>
    ```
    XMVECTOR vFive = XMVectorReplicate( 5.f );
    ```

    

-   <span data-ttu-id="fc844-185">Si vous utilisez une constante Vector avec des valeurs fixes différentes en tant que [**XMVECTOR**](xmvector-data-type.md), utilisez les structures [**XMVECTORF32**](xmvectorf32-data-type.md), [**XMVECTORU32**](xmvectoru32-data-type.md), **XMVECTORI32** ou [**XMVECTORU8**](xmvectoru8-data-type.md) .</span><span class="sxs-lookup"><span data-stu-id="fc844-185">If using a vector constant with different fixed values as an [**XMVECTOR**](xmvector-data-type.md), use the [**XMVECTORF32**](xmvectorf32-data-type.md), [**XMVECTORU32**](xmvectoru32-data-type.md), **XMVECTORI32**, or [**XMVECTORU8**](xmvectoru8-data-type.md) structures.</span></span> <span data-ttu-id="fc844-186">Ils peuvent ensuite être référencés directement partout où vous transmettez une valeur **XMVECTOR** .</span><span class="sxs-lookup"><span data-stu-id="fc844-186">These can be then referenced directly anywhere you would pass an **XMVECTOR** value.</span></span>
    ```
    static const XMVECTORF32 vFactors = { 1.0f, 2.0f, 3.0f, 4.0f };
    ```

    

    > [!Note]  
    > <span data-ttu-id="fc844-187">N’utilisez pas de listes d’initialiseurs directement avec [**XMVECTOR**](xmvector-data-type.md) (c’est-à-dire XMVECTOR v = {1.0 f, 2.0 f, 3.0 f, 4.0 f}).</span><span class="sxs-lookup"><span data-stu-id="fc844-187">Do not use initializer lists directly with [**XMVECTOR**](xmvector-data-type.md) (that is, XMVECTOR v = { 1.0f, 2.0f, 3.0f, 4.0f }).</span></span> <span data-ttu-id="fc844-188">Ce code est inefficace et n’est pas portable sur toutes les plateformes prises en charge par DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="fc844-188">Such code is inefficient and is not portable across all platforms that are supported by DirectXMath.</span></span>

     

-   <span data-ttu-id="fc844-189">DirectXMath comprend un certain nombre de constantes globales prédéfinies que vous pouvez utiliser dans votre code (g \_ XMOne, g \_ XMOne3, g \_ XMTwo, g \_ XMOneHalf, g XMHalfPi, \_ g \_ XMPi, etc.).</span><span class="sxs-lookup"><span data-stu-id="fc844-189">DirectXMath includes a number of pre-defined global constants you can make use of in your code (g\_XMOne, g\_XMOne3, g\_XMTwo, g\_XMOneHalf, g\_XMHalfPi, g\_XMPi, and so on).</span></span> <span data-ttu-id="fc844-190">Recherchez les valeurs **XMGLOBALCONSTANT** dans l’en-tête DirectXMath. h.</span><span class="sxs-lookup"><span data-stu-id="fc844-190">Search the DirectXMath.h header for the **XMGLOBALCONSTANT** values.</span></span>
-   <span data-ttu-id="fc844-191">Il existe un ensemble de constantes vectorielles pour les couleurs RVB courantes (rouge, vert, bleu, jaune, etc.).</span><span class="sxs-lookup"><span data-stu-id="fc844-191">There are a set of vector constants for common RGB colors (Red, Green, Blue, Yellow, and so on).</span></span> <span data-ttu-id="fc844-192">Pour plus d’informations sur ces constantes vectorielles, consultez DirectXColors. h et l’espace de noms DirectX :: Colors.</span><span class="sxs-lookup"><span data-stu-id="fc844-192">For more info about these vector constants, see DirectXColors.h and the DirectX::Colors namespace.</span></span>

### <a name="vectors-from-variables"></a><span data-ttu-id="fc844-193">VECTEURS DE VARIABLES</span><span class="sxs-lookup"><span data-stu-id="fc844-193">VECTORS FROM VARIABLES</span></span>

-   <span data-ttu-id="fc844-194">Si vous créez un vecteur à partir d’une variable scalaire unique, consultez [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) et [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span><span class="sxs-lookup"><span data-stu-id="fc844-194">If creating a vector from a single scalar variable, see [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) and [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span></span>
    ```
    XMVECTOR v = XMVectorReplicate( f  );
    ```

    

-   <span data-ttu-id="fc844-195">Si vous créez un vecteur à partir de quatre variables scalaires, consultez [**XMVectorSet**](/windows/win32/api/directxmath/nf-directxmath-xmvectorset) et [**XMVectorSetInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsetint).</span><span class="sxs-lookup"><span data-stu-id="fc844-195">If creating a vector from four scalar variables, see [**XMVectorSet**](/windows/win32/api/directxmath/nf-directxmath-xmvectorset) and [**XMVectorSetInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsetint).</span></span>
    ```
    XMVECTOR v = XMVectorSet( fx, fy, fz, fw );
    ```

    

### <a name="vectors-from-vectors"></a><span data-ttu-id="fc844-196">VECTEURS À PARTIR DE VECTEURS</span><span class="sxs-lookup"><span data-stu-id="fc844-196">VECTORS FROM VECTORS</span></span>

-   <span data-ttu-id="fc844-197">Si vous créez un vecteur à partir d’un autre vecteur avec un composant spécifique défini sur une variable, vous pouvez envisager d’utiliser des [fonctions d’accesseur Vector](ovw-xnamath-reference-functions-accessors.md).</span><span class="sxs-lookup"><span data-stu-id="fc844-197">If creating a vector from another vector with a specific component set to a variable, you can consider using [Vector Accessor Functions](ovw-xnamath-reference-functions-accessors.md).</span></span>
    ```
    XMVECTOR v2 = XMVectorSetW( v1, fw );
    ```

    

-   <span data-ttu-id="fc844-198">Si vous créez un vecteur à partir d’un autre vecteur avec un seul composant répliqué, utilisez [**XMVectorSplatX**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatx), [**XMVectorSplatY**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplaty), [**XMVectorSplatZ**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatz)et [**XMVectorSplatW**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatw).</span><span class="sxs-lookup"><span data-stu-id="fc844-198">If creating a vector from another vector with a single component replicated, use [**XMVectorSplatX**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatx), [**XMVectorSplatY**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplaty), [**XMVectorSplatZ**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatz), and [**XMVectorSplatW**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatw).</span></span>
    ```
    XMVECTOR vz = XMVectorSplatZ( v );
    ```

    

-   <span data-ttu-id="fc844-199">Si vous créez un vecteur à partir d’un autre vecteur ou d’une paire de vecteurs avec des composants réorganisés, consultez [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle) et [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute).</span><span class="sxs-lookup"><span data-stu-id="fc844-199">If creating a vector from another vector or pair of vectors with reordered components, see [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle) and [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute).</span></span>
    ```
    XMVECTOR v2 = XMVectorSwizzle<XM_SWIZZLE_Z, XM_SWIZZLE_Y, XM_SWIZZLE_W, XM_SWIZZLE_X>( v1 );

    XMVECTOR v3 = XMVectorPermute<XM_PERMUTE_0W, XM_PERMUTE_1X, XM_PERMUTE_0X, XM_PERMUTE_1Z>( v1, v2 );
    ```

    

### <a name="vectors-from-memory"></a><span data-ttu-id="fc844-200">VECTEURS DE LA MÉMOIRE</span><span class="sxs-lookup"><span data-stu-id="fc844-200">VECTORS FROM MEMORY</span></span>

-   <span data-ttu-id="fc844-201">Pour charger une valeur float unique à partir de la mémoire, consultez [**XMVectorReplicatePtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateptr), [**XMVectorReplicateIntPtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateintptr), [**XMLoadFloat**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat)et [**XMLoadInt**](/windows/win32/api/directxmath/nf-directxmath-xmloadint).</span><span class="sxs-lookup"><span data-stu-id="fc844-201">For loading a single float value from memory, see [**XMVectorReplicatePtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateptr), [**XMVectorReplicateIntPtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateintptr), [**XMLoadFloat**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat), and [**XMLoadInt**](/windows/win32/api/directxmath/nf-directxmath-xmloadint).</span></span>
-   <span data-ttu-id="fc844-202">Les façons courantes de charger des tableaux de valeurs float sont les suivantes : [**XMLoadFloat2**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat2), [**XMLoadFloat3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3), [**XMLoadFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4), [**XMLoadFloat3x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3x3), [**XMLoadFloat4x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x3)et [**XMLoadFloat4x4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x4).</span><span class="sxs-lookup"><span data-stu-id="fc844-202">Common ways to load float arrays are: [**XMLoadFloat2**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat2), [**XMLoadFloat3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3), [**XMLoadFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4), [**XMLoadFloat3x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3x3), [**XMLoadFloat4x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x3), and [**XMLoadFloat4x4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x4).</span></span>
-   <span data-ttu-id="fc844-203">DirectXMath comprend un ensemble complet de types et de charges et de magasins associés pour gérer plusieurs structures de données et formats GPU courants.</span><span class="sxs-lookup"><span data-stu-id="fc844-203">DirectXMath includes a rich set of types and related loads and stores for handling various data-structures and common GPU formats.</span></span> <span data-ttu-id="fc844-204">Consultez [Load Vector](ovw-xnamath-reference-functions-load.md) and [Vector Store](ovw-xnamath-reference-functions-storage.md).</span><span class="sxs-lookup"><span data-stu-id="fc844-204">See [Vector Load](ovw-xnamath-reference-functions-load.md) and [Vector Store](ovw-xnamath-reference-functions-storage.md).</span></span>

## <a name="extracting-components-from-vectors"></a><span data-ttu-id="fc844-205">Extraction de composants à partir de vecteurs</span><span class="sxs-lookup"><span data-stu-id="fc844-205">Extracting Components from Vectors</span></span>

<span data-ttu-id="fc844-206">Le traitement SIMD est plus efficace lorsque les données sont chargées dans les registres SIMD et entièrement traitées avant l’extraction des résultats.</span><span class="sxs-lookup"><span data-stu-id="fc844-206">SIMD processing is most efficient when data is loaded into the SIMD registers and fully processed before extracting the results.</span></span> <span data-ttu-id="fc844-207">La conversion entre les formes scalaire et vectorielle est inefficace. nous vous recommandons donc de le faire uniquement lorsque cela est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="fc844-207">Conversion between scalar and vector forms is inefficient, so we recommend that you do it only when required.</span></span> <span data-ttu-id="fc844-208">Pour cette raison, les fonctions de la bibliothèque DirectXMath qui produisent une valeur scalaire sont retournées sous la forme d’un vecteur, où le résultat scalaire est répliqué dans le vecteur résultant (c’est-à-dire, [**XMVector2Dot**](/windows/win32/api/directxmath/nf-directxmath-xmvector2dot), [**XMVector3Length**](/windows/win32/api/directxmath/nf-directxmath-xmvector3length), etc.).</span><span class="sxs-lookup"><span data-stu-id="fc844-208">For this reason, functions in the DirectXMath library that produce a scalar value are returned in a vector form where the scalar result is replicated across the resulting vector (that is, [**XMVector2Dot**](/windows/win32/api/directxmath/nf-directxmath-xmvector2dot), [**XMVector3Length**](/windows/win32/api/directxmath/nf-directxmath-xmvector3length), and so on).</span></span> <span data-ttu-id="fc844-209">Toutefois, lorsque vous avez besoin de valeurs scalaires, voici quelques options pour y accéder :</span><span class="sxs-lookup"><span data-stu-id="fc844-209">However, when you need scalar values, here are a few choices on how to go about it:</span></span>

-   <span data-ttu-id="fc844-210">Si une réponse scalaire unique est calculée, l’utilisation des [fonctions d’accesseur de vecteur](ovw-xnamath-reference-functions-accessors.md) est appropriée :</span><span class="sxs-lookup"><span data-stu-id="fc844-210">If a single scalar answer is computed, use of the [Vector Accessor Functions](ovw-xnamath-reference-functions-accessors.md) is appropriate:</span></span>
    ```
    float f = XMVectorGetX( v );
    ```

    

-   <span data-ttu-id="fc844-211">Si plusieurs composants du vecteur doivent être extraits, envisagez de stocker le vecteur dans une structure de mémoire et de le lire de nouveau.</span><span class="sxs-lookup"><span data-stu-id="fc844-211">If multiple components of the vector are required to be extracted, consider storing the vector in a memory structure and reading it back.</span></span> <span data-ttu-id="fc844-212">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="fc844-212">For example:</span></span>
    ```
    XMFLOAT4A t;
    XMStoreFloat4A( &t, v );
    // t.x, t.y, t.z, and t.w can be individually accessed now
    ```

    

-   <span data-ttu-id="fc844-213">La forme la plus efficace du traitement vectoriel consiste à utiliser la diffusion en continu de la mémoire vers la mémoire où les données d’entrée sont chargées à partir de la mémoire (à l’aide des [fonctions de chargement de vecteur](ovw-xnamath-reference-functions-load.md)), traitées entièrement sous forme de SIMD, puis écrites en mémoire (à l’aide des [fonctions Vector Store](ovw-xnamath-reference-functions-storage.md)).</span><span class="sxs-lookup"><span data-stu-id="fc844-213">The most efficient form of vector processing is to use memory-to-memory streaming where the input data is loaded from memory (using [Vector Load Functions](ovw-xnamath-reference-functions-load.md)), processed fully in SIMD form, and then written to memory (using [Vector Store Functions](ovw-xnamath-reference-functions-storage.md)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="fc844-214">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="fc844-214">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fc844-215">Guide de programmation DirectXMath</span><span class="sxs-lookup"><span data-stu-id="fc844-215">DirectXMath Programming Guide</span></span>](ovw-xnamath-progguide.md)
</dt> </dl>

 

 