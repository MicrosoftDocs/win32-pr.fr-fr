---
description: Cette rubrique présente l’effet des dispositifs de stockage de format avancés sur les logiciels, explique ce que les applications peuvent faire pour aider à prendre en charge ce type de média et présente l’infrastructure que Microsoft a introduite avec Windows 7 SP1 et Windows Server 2008 R2 SP1 pour permettre aux développeurs de prendre en charge ces types d’appareils.
ms.assetid: 1D2847A7-15E9-42E0-90EB-7F43E76D3E44
title: Mise à jour de la compatibilité des disques Émulation 512 octets (512e)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 94fbdce2937e2d121d892d8566755dfcb7f20f01
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104042803"
---
# <a name="512-byte-emulation-512e-disk-compatibility-update"></a><span data-ttu-id="57aec-103">Mise à jour de la compatibilité des disques Émulation 512 octets (512e)</span><span class="sxs-lookup"><span data-stu-id="57aec-103">512-byte Emulation (512e) Disk Compatibility Update</span></span>

## <a name="platform"></a><span data-ttu-id="57aec-104">Plateforme</span><span class="sxs-lookup"><span data-stu-id="57aec-104">Platform</span></span>

 <span data-ttu-id="57aec-105">**Clients** -Windows Vista Windows 7 Windows 7 \| \| SP1</span><span class="sxs-lookup"><span data-stu-id="57aec-105">**Clients** - Windows Vista \| Windows 7 \| Windows 7 SP1</span></span>  
<span data-ttu-id="57aec-106">**Serveurs** -windows Server 2008 \| Windows Server 2008 r2 \| Windows Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="57aec-106">**Servers** - Windows Server 2008 \| Windows Server 2008 R2 \| Windows Server 2008 R2 SP1</span></span>  

## <a name="feature-impact"></a><span data-ttu-id="57aec-107">Impact sur les fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="57aec-107">Feature Impact</span></span>

<span data-ttu-id="57aec-108">**Gravité** -haute</span><span class="sxs-lookup"><span data-stu-id="57aec-108">**Severity** - High</span></span>  
<span data-ttu-id="57aec-109">**Fréquence** -élevée</span><span class="sxs-lookup"><span data-stu-id="57aec-109">**Frequency** - High</span></span>  









## <a name="description"></a><span data-ttu-id="57aec-110">Description</span><span class="sxs-lookup"><span data-stu-id="57aec-110">Description</span></span>

<span data-ttu-id="57aec-111">Les densités de zone sont de plus en plus annuelles et, avec l’avènement récente de disques de 3 to, les mécanismes de correction d’erreur utilisés pour gérer le quotient de signal à bruit (SNR) diminuent l’efficacité de l’espace, c’est-à-dire qu’une quantité accrue de surcharge est nécessaire pour s’assurer que le média est utilisable.</span><span class="sxs-lookup"><span data-stu-id="57aec-111">Areal densities are increasing yearly, and with the recent advent of 3 TB disks, the error correction mechanisms used to deal with the decreasing Signal-to-Noise-Ratio (SNR) are becoming space inefficient – that is, an increased amount of overhead is required to ensure the media is usable.</span></span> <span data-ttu-id="57aec-112">L’une des solutions de l’industrie du stockage pour améliorer ce mécanisme de correction des erreurs consiste à introduire un format de support physique différent qui comprend une plus grande taille de secteur physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-112">One of the storage industry solutions for improving this error correction mechanism is to introduce a different physical media format that includes a larger physical sector size.</span></span> <span data-ttu-id="57aec-113">Ce nouveau format de média physique est appelé *format avancé*.</span><span class="sxs-lookup"><span data-stu-id="57aec-113">This new physical media format is called *Advanced Format*.</span></span> <span data-ttu-id="57aec-114">Par conséquent, il n’est plus sûr de faire des hypothèses concernant la taille des secteurs des appareils de stockage modernes, et les développeurs doivent étudier les hypothèses sous-jacentes de leur code pour déterminer s’il y a un impact.</span><span class="sxs-lookup"><span data-stu-id="57aec-114">Therefore, it is no longer safe to make any assumptions regarding the sector size of modern storage devices, and developers will need to study the assumptions underlying their code to determine if there is an impact.</span></span>

<span data-ttu-id="57aec-115">Cette rubrique présente l’effet des dispositifs de stockage de format avancés sur les logiciels, explique ce que les applications peuvent faire pour aider à prendre en charge ce type de média et discute de l’infrastructure pour permettre aux développeurs de prendre en charge ces types d’appareils.</span><span class="sxs-lookup"><span data-stu-id="57aec-115">This topic introduces the effect of Advanced Format storage devices on software, discusses what applications can do to help support this type of media, and discusses the infrastructure to enable developers to support these types of devices.</span></span> <span data-ttu-id="57aec-116">Bien que les éléments présentés dans cette rubrique fournissent des instructions pour améliorer la compatibilité avec les disques au format avancé, les informations s’appliquent généralement à tous les systèmes avec des disques au format avancé.</span><span class="sxs-lookup"><span data-stu-id="57aec-116">While the material presented in this topic provides guidelines for improving compatibility with Advanced Format disks, the information applies generally to all systems with Advanced Format disks.</span></span> <span data-ttu-id="57aec-117">Les versions suivantes de Windows assurent la prise en charge de l’interrogation de la taille des secteurs physiques :</span><span class="sxs-lookup"><span data-stu-id="57aec-117">The following versions of Windows provide support for querying the physical sector size:</span></span>

-   <span data-ttu-id="57aec-118">Windows 7 avec Microsoft KB 982018</span><span class="sxs-lookup"><span data-stu-id="57aec-118">Windows 7 with Microsoft KB 982018</span></span>
-   <span data-ttu-id="57aec-119">Windows 7 SP1</span><span class="sxs-lookup"><span data-stu-id="57aec-119">Windows 7 SP1</span></span>
-   <span data-ttu-id="57aec-120">Windows Server 2008 R2 avec Microsoft KB 982018</span><span class="sxs-lookup"><span data-stu-id="57aec-120">Windows Server 2008 R2 with Microsoft KB 982018</span></span>
-   <span data-ttu-id="57aec-121">Windows Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="57aec-121">Windows Server 2008 R2 SP1</span></span>
-   <span data-ttu-id="57aec-122">Windows Vista avec Microsoft KB 2553708</span><span class="sxs-lookup"><span data-stu-id="57aec-122">Windows Vista with Microsoft KB 2553708</span></span>
-   <span data-ttu-id="57aec-123">Windows Server 2008 avec Microsoft KB 2553708</span><span class="sxs-lookup"><span data-stu-id="57aec-123">Windows Server 2008 with Microsoft KB 2553708</span></span>

<span data-ttu-id="57aec-124">Pour plus d’informations, consultez [informations sur la politique de support Microsoft pour les lecteurs à grands secteurs dans Windows](https://support.microsoft.com/kb/2510009).</span><span class="sxs-lookup"><span data-stu-id="57aec-124">For additional details, see [Information about Microsoft support policy for large-sector drives in Windows](https://support.microsoft.com/kb/2510009).</span></span>

<span data-ttu-id="57aec-125">Pour plus d’informations sur les disques au format avancé, contactez votre fournisseur de stockage.</span><span class="sxs-lookup"><span data-stu-id="57aec-125">For more information about Advanced Format disks, please contact your storage vendor.</span></span>

## <a name="logical-vs-physical-sector-size"></a><span data-ttu-id="57aec-126">Taille logique et taille de secteur physique</span><span class="sxs-lookup"><span data-stu-id="57aec-126">Logical vs. Physical Sector Size</span></span>

<span data-ttu-id="57aec-127">L’un des problèmes liés à l’introduction de cette modification dans le format multimédia est la compatibilité avec les logiciels et matériels actuellement disponibles sur le marché dès aujourd’hui.</span><span class="sxs-lookup"><span data-stu-id="57aec-127">One of the concerns in introducing this change in the media format is compatibility with the software and hardware currently available in the market today.</span></span> <span data-ttu-id="57aec-128">En guise de solution temporaire, le secteur du stockage est à l’origine d’introduire des disques qui émulent un disque de secteur standard de 512 octets, mais qui rendent disponibles des informations sur la taille réelle des secteurs via des commandes ATA et SCSI standard.</span><span class="sxs-lookup"><span data-stu-id="57aec-128">As a temporary solution, the storage industry is initially introducing disks that emulate a regular 512-byte sector disk, but make available information about the true sector size through standard ATA and SCSI commands.</span></span> <span data-ttu-id="57aec-129">À la suite de cette émulation, il existe deux tailles de secteur :</span><span class="sxs-lookup"><span data-stu-id="57aec-129">As a result of this emulation, there are two sector sizes:</span></span>

-   <span data-ttu-id="57aec-130">**Secteur logique**: unité utilisée pour l’adressage de bloc logique pour le média.</span><span class="sxs-lookup"><span data-stu-id="57aec-130">**Logical Sector**: The unit that is used for logical block addressing for the media.</span></span> <span data-ttu-id="57aec-131">Nous pouvons également considérer qu’il s’agit de la plus petite unité d’écriture que le stockage peut accepter.</span><span class="sxs-lookup"><span data-stu-id="57aec-131">We can also think of it as the smallest unit of write that the storage can accept.</span></span> <span data-ttu-id="57aec-132">Il s’agit de l’émulation.</span><span class="sxs-lookup"><span data-stu-id="57aec-132">This is the emulation.</span></span>

-   <span data-ttu-id="57aec-133">**Secteur physique**: l’unité pour laquelle les opérations de lecture et d’écriture sur l’appareil sont effectuées en une seule opération.</span><span class="sxs-lookup"><span data-stu-id="57aec-133">**Physical Sector**: The unit for which read and write operations to the device are completed in a single operation.</span></span> <span data-ttu-id="57aec-134">Il s’agit de l’unité d’écriture atomique.</span><span class="sxs-lookup"><span data-stu-id="57aec-134">This is the unit of atomic write.</span></span>

<span data-ttu-id="57aec-135">La plupart des API Windows actuelles, telles que le **\_ disque IOCTL \_ obtiennent une \_ \_ géométrie de lecteur** , retournent la taille de secteur logique, mais la taille de secteur physique peut être récupérée par le biais du code de contrôle de [ \_ \_ \_ propriété de requête de stockage IOCTL](/windows-hardware/drivers/ddi/content/ntddstor/ni-ntddstor-ioctl_storage_query_property) , avec les informations pertinentes contenues dans le champ **BytesPerPhysicalSector** de la structure du [ \_ \_ \_ descripteur d’alignement de l’accès au stockage](/windows/desktop/api/winioctl/ns-winioctl-storage_access_alignment_descriptor) .</span><span class="sxs-lookup"><span data-stu-id="57aec-135">Most current Windows APIs, such as **IOCTL\_DISK\_GET\_DRIVE\_GEOMETRY** will return the logical sector size, but the physical sector size can be retrieved through the [IOCTL\_STORAGE\_QUERY\_PROPERTY](/windows-hardware/drivers/ddi/content/ntddstor/ni-ntddstor-ioctl_storage_query_property) control code, with the relevant information contained in the **BytesPerPhysicalSector** field in the [STORAGE\_ACCESS\_ALIGNMENT\_DESCRIPTOR](/windows/desktop/api/winioctl/ns-winioctl-storage_access_alignment_descriptor) structure.</span></span> <span data-ttu-id="57aec-136">Ce sujet est abordé plus en détail plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="57aec-136">This is discussed in more detail later in the article.</span></span>

## <a name="initial-types-of-large-sector-media"></a><span data-ttu-id="57aec-137">Types initiaux des médias de grands secteurs</span><span class="sxs-lookup"><span data-stu-id="57aec-137">Initial Types of Large Sector Media</span></span>

<span data-ttu-id="57aec-138">Le secteur du stockage est rapidement en train de migrer vers ce nouveau type de stockage avancé pour les médias avec des tailles de secteur physique de 4 Ko.</span><span class="sxs-lookup"><span data-stu-id="57aec-138">The storage industry is quickly ramping up efforts to transition to this new Advanced Format type of storage for media with 4 KB physical sector sizes.</span></span> <span data-ttu-id="57aec-139">Deux types de médias seront publiés sur le marché :</span><span class="sxs-lookup"><span data-stu-id="57aec-139">Two types of media will be released to the market:</span></span>

-   <span data-ttu-id="57aec-140">**4 Ko natifs**: ce support n’a pas de couche d’émulation et expose directement 4 Ko comme taille de secteur logique et physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-140">**4 KB Native**: This media has no emulation layer and directly exposes 4 KB as its logical and physical sector size.</span></span> <span data-ttu-id="57aec-141">Ce support n’est actuellement pas pris en charge par Windows et la plupart des autres systèmes d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="57aec-141">This media is currently not supported by Windows and most other operating systems.</span></span> <span data-ttu-id="57aec-142">Toutefois, Microsoft effectue une investigation sur la faisabilité de la prise en charge de ce type de média dans une future version de Windows et émet un article de la base de connaissances le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="57aec-142">However, Microsoft is conducting an investigation into the feasibility of supporting this type of media in a future version of Windows and will issue a Knowledge Base article when appropriate.</span></span>
-   <span data-ttu-id="57aec-143">**émulation de 512 octets (émulation)**: ce média a une couche d’émulation comme indiqué dans la section précédente et expose 512 octets comme taille de secteur logique (semblable à un disque normal aujourd’hui), mais rend ses informations de taille de secteur physique (4 Ko) disponibles.</span><span class="sxs-lookup"><span data-stu-id="57aec-143">**512-byte Emulation (512e)**: This media has an emulation layer as discussed in the previous section and exposes 512-bytes as its logical sector size (similar to a regular disk today), but makes its physical sector size information (4 KB) available.</span></span> <span data-ttu-id="57aec-144">C’est ce que plusieurs fournisseurs de stockage sont actuellement en train d’introduire sur le marché.</span><span class="sxs-lookup"><span data-stu-id="57aec-144">This is what several storage vendors are currently introducing to the market.</span></span> <span data-ttu-id="57aec-145">Ce problème global avec ce nouveau type de média est que la majorité des applications et des systèmes d’exploitation ne comprennent pas l’existence de la taille de secteur physique, ce qui peut entraîner un certain nombre de problèmes, comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="57aec-145">This overall issue with this new type of media is that the majority of application and operating systems do not understand the existence of the physical sector size, which can result in a number of issues as will be discussed below.</span></span>

## <a name="how-emulation-works-read-modify-write-rmw"></a><span data-ttu-id="57aec-146">Fonctionnement de l’émulation : lecture-modification-écriture (RMW)</span><span class="sxs-lookup"><span data-stu-id="57aec-146">How Emulation Works: Read-Modify-Write (RMW)</span></span>

<span data-ttu-id="57aec-147">Un support de stockage a une certaine unité dans laquelle le support physique peut être modifié.</span><span class="sxs-lookup"><span data-stu-id="57aec-147">A storage medium has a certain unit within which the physical medium can be modified.</span></span> <span data-ttu-id="57aec-148">Autrement dit, le support peut uniquement être écrit, ou réécrit, dans des unités de la taille de secteur physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-148">That is, the media can only be written, or rewritten, in units of the physical sector size.</span></span> <span data-ttu-id="57aec-149">Par conséquent, les écritures qui ne sont pas exécutées à ce niveau d’unité nécessitent des étapes supplémentaires, que nous allons examiner dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="57aec-149">Thus, writes that are not performed at this unit level would require additional steps, which we will walk through in the following example.</span></span>

<span data-ttu-id="57aec-150">Dans ce scénario, une application doit mettre à jour le contenu d’un enregistrement DataStor situé dans un secteur logique de 512 octets.</span><span class="sxs-lookup"><span data-stu-id="57aec-150">In this scenario, an application needs to update the contents of a Datastor record located within a 512-byte logical sector.</span></span> <span data-ttu-id="57aec-151">Le diagramme suivant illustre les étapes nécessaires pour que le périphérique de stockage termine l’écriture :</span><span class="sxs-lookup"><span data-stu-id="57aec-151">The following diagram illustrates the steps necessary for the storage device to complete the write:</span></span>

![étapes nécessaires à la mise à niveau d’un enregistrement DataStor dans un secteur logique de 512 octets](images/512ermwsteps.png)

<span data-ttu-id="57aec-153">Comme illustré ci-dessus, ce processus implique un travail du dispositif de stockage qui peut entraîner une perte de performances.</span><span class="sxs-lookup"><span data-stu-id="57aec-153">As illustrated above, this process involves some work by the storage device that can result in a performance loss.</span></span> <span data-ttu-id="57aec-154">Pour éviter ce travail supplémentaire, les applications doivent être mises à jour pour effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="57aec-154">To avoid this additional work, applications must be updated to do the following:</span></span>

-   <span data-ttu-id="57aec-155">Recherchez la taille de secteur physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-155">Query for the physical sector size.</span></span>
-   <span data-ttu-id="57aec-156">Vérifiez que les écritures sont alignées sur la taille de secteur physique indiquée.</span><span class="sxs-lookup"><span data-stu-id="57aec-156">Ensure writes are aligned to that reported physical sector size.</span></span>

## <a name="the-resiliency-impact-of-read-modify-write"></a><span data-ttu-id="57aec-157">Impact de la résilience de lecture-modification-écriture</span><span class="sxs-lookup"><span data-stu-id="57aec-157">The Resiliency Impact of Read-Modify-Write</span></span>

<span data-ttu-id="57aec-158">La résilience permet à une application de récupérer l’état entre les sessions.</span><span class="sxs-lookup"><span data-stu-id="57aec-158">Resiliency speaks of the ability for an application to recover state between sessions.</span></span> <span data-ttu-id="57aec-159">Nous avons vu ce qui est nécessaire pour qu’un dispositif de stockage émulation effectue une écriture de secteur de 512 octets : le cycle de lecture-modification-écriture.</span><span class="sxs-lookup"><span data-stu-id="57aec-159">We have seen what is necessary for a 512e storage device to perform a 512-byte sector write – the Read-Modify-Write cycle.</span></span> <span data-ttu-id="57aec-160">Examinons ce qui se passerait si le processus de remplacement du secteur physique précédent sur le support était interrompu.</span><span class="sxs-lookup"><span data-stu-id="57aec-160">Let’s look at what would happen if the process of overwriting the previous physical sector on the media was interrupted.</span></span> <span data-ttu-id="57aec-161">Quelles sont les conséquences ?</span><span class="sxs-lookup"><span data-stu-id="57aec-161">What would be the consequences?</span></span>

-   <span data-ttu-id="57aec-162">Étant donné que la plupart des lecteurs de disque dur mettent à jour sur place, le secteur physique, c’est-à-dire la partie du support où se trouvait le secteur physique, aurait pu être endommagé avec des informations incomplètes en raison d’un remplacement partiel.</span><span class="sxs-lookup"><span data-stu-id="57aec-162">Because most hard disk drives update in place, the physical sector – that is, the portion of the media where the physical sector was located – could have been corrupted with incomplete information due to a partial overwrite.</span></span> <span data-ttu-id="57aec-163">En d’autres termes, vous pouvez le considérer comme susceptible d’avoir perdu les 8 secteurs logiques que le secteur physique contient logiquement.</span><span class="sxs-lookup"><span data-stu-id="57aec-163">Put another way, you can think of it as potentially having lost all 8 logical sectors (which the physical sector logically contains).</span></span>

-   <span data-ttu-id="57aec-164">Alors que la plupart des applications avec un magasin de données sont conçues avec la possibilité de récupérer à partir d’erreurs de support, la perte de huit secteurs ou d’une autre façon, la perte de huit enregistrements de validation, peut potentiellement empêcher la récupération normale de la Banque de données.</span><span class="sxs-lookup"><span data-stu-id="57aec-164">While most applications with a data store are designed with the capability to recover from media errors, the loss of eight sectors, or put another way, the loss of eight commit records, can potentially make it impossible for the data store to recover gracefully.</span></span> <span data-ttu-id="57aec-165">Un administrateur peut avoir besoin de restaurer manuellement la base de données à partir d’une sauvegarde ou de devoir effectuer une reconstruction longue.</span><span class="sxs-lookup"><span data-stu-id="57aec-165">An administrator may need to manually restore the database from a backup or may even need to perform a lengthy rebuild.</span></span>

-   <span data-ttu-id="57aec-166">Un impact plus important est que l’acte d’une autre application entraînant un cycle de lecture-modification-écriture peut potentiellement entraîner la perte de vos données, même si votre application n’est pas en cours d’exécution !</span><span class="sxs-lookup"><span data-stu-id="57aec-166">One more important impact is that the act of another application causing a Read-Modify-Write cycle can potentially cause your data to be lost – even if your application is not running!</span></span> <span data-ttu-id="57aec-167">Cela est tout simplement dû au fait que vos données et les données de l’autre application peuvent se trouver dans le même secteur physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-167">This is simply because your data and the other application’s data could be located within the same physical sector.</span></span>

<span data-ttu-id="57aec-168">En tenant compte de cela, il est important que les logiciels d’application réévaluent les hypothèses prises dans le code et qu’ils soient conscients de la distinction entre la taille des secteurs physiques et logiques, ainsi que certains scénarios clients intéressants décrits plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="57aec-168">With this in mind, it is important that application software reevaluate any assumptions taken in the code, and be aware of the logical-physical sector size distinction, along with some interesting customer scenarios discussed later in this article.</span></span>

<span data-ttu-id="57aec-169">Ce problème est plus susceptible de se produire si votre application s’appuie sur une banque de données de structure de journaux.</span><span class="sxs-lookup"><span data-stu-id="57aec-169">This issue is more likely to occur if your application relies on a log structure data store.</span></span>

## <a name="avoiding-read-modify-write"></a><span data-ttu-id="57aec-170">Éviter la lecture-modification-écriture</span><span class="sxs-lookup"><span data-stu-id="57aec-170">Avoiding Read-Modify-Write</span></span>

<span data-ttu-id="57aec-171">Alors que certains fournisseurs de stockage peuvent introduire des niveaux d’atténuation au sein de certains dispositifs de stockage émulation pour essayer de faciliter les problèmes de performances et de résilience du cycle de lecture-modification-écriture, il n’y a que peu d’atténuation pouvant être gérée en termes de charge de travail.</span><span class="sxs-lookup"><span data-stu-id="57aec-171">While some storage vendors may be introducing some levels of mitigation within certain 512e storage devices to try and help ease the performance and resiliency issues of the Read-Modify-Write cycle, there is only so much any mitigation can handle in terms of workload.</span></span> <span data-ttu-id="57aec-172">Par conséquent, les applications ne doivent pas s’appuyer sur cette atténuation comme une solution à long terme.</span><span class="sxs-lookup"><span data-stu-id="57aec-172">As such, applications should not rely on this mitigation as a long-term solution.</span></span>

<span data-ttu-id="57aec-173">La solution à cela n’est pas une atténuation dans le lecteur, mais pour que les applications fassent le bon ensemble de choses pour éviter le cycle de lecture-modification-écriture.</span><span class="sxs-lookup"><span data-stu-id="57aec-173">The solution to this is not in-drive mitigation, but to have applications do the right set of things to avoid the Read-Modify-Write cycle.</span></span> <span data-ttu-id="57aec-174">Cette section décrit les scénarios courants dans lesquels les applications peuvent rencontrer des problèmes avec les disques de secteurs importants et suggère un moyen d’investigation pour essayer et résoudre chaque problème.</span><span class="sxs-lookup"><span data-stu-id="57aec-174">This section discusses common scenarios where applications may have issues with large sector disks, and suggests an avenue of investigation to try and resolve each issue.</span></span>

### <a name="issue-1-the-partition-is-not-aligned-to-a-physical-sector-boundary"></a><span data-ttu-id="57aec-175">Problème 1 : la partition n’est pas alignée sur une limite de secteur physique</span><span class="sxs-lookup"><span data-stu-id="57aec-175">Issue 1: The partition is not aligned to a physical sector boundary</span></span>

<span data-ttu-id="57aec-176">Lorsque l’administrateur/l’utilisateur partitionne le disque, la première partition n’a peut-être pas été créée sur une limite alignée.</span><span class="sxs-lookup"><span data-stu-id="57aec-176">When the administrator/user partitions the disk, the first partition may not have been created on an aligned boundary.</span></span> <span data-ttu-id="57aec-177">Cela peut entraîner la non-alignement de toutes les écritures suivantes sur les limites du secteur physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-177">This may cause all subsequent writes to become unaligned to physical sector boundaries.</span></span> <span data-ttu-id="57aec-178">À compter de Windows Vista SP1 et de Windows Server 2008, la première partition est placée au premier 1024 Ko du disque (pour les disques 4 Go ou plus, sinon l’alignement est de 64 Ko) qui est aligné sur une limite de secteur physique de 4 Ko.</span><span class="sxs-lookup"><span data-stu-id="57aec-178">As of Windows Vista SP1, and Windows Server 2008, the first partition is placed at the first 1024 KB of the disk (for disks 4GB or larger, otherwise the alignment is 64 KB) that is aligned to a 4 KB physical sector boundary.</span></span> <span data-ttu-id="57aec-179">Toutefois, étant donné le partitionnement par défaut dans Windows XP, un utilitaire de partitionnement tiers ou une utilisation incorrecte des API Windows, les partitions créées peuvent ne pas être alignées sur une limite de secteur physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-179">However, given the default partitioning in Windows XP, a 3rd party partitioning utility or incorrect usage of Windows APIs, created partitions may not be aligned to a physical sector boundary.</span></span> <span data-ttu-id="57aec-180">Les développeurs doivent s’assurer que les API correctes sont utilisées pour garantir l’alignement.</span><span class="sxs-lookup"><span data-stu-id="57aec-180">Developers will need to ensure that the correct APIs are used to help ensure alignment.</span></span> <span data-ttu-id="57aec-181">Les API recommandées pour garantir l’alignement des partitions sont décrites ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="57aec-181">The recommended APIs to help ensure partition alignment are outlined below.</span></span>

<span data-ttu-id="57aec-182">Les API **IVdsPack :: CreateVolume** et **IVdsPack2 :: CreateVolume2** n’utilisent pas le paramètre d’alignement spécifié lorsqu’un nouveau volume est créé, et utilisent à la place la valeur d’alignement par défaut pour le système d’exploitation (pré-Windows Vista SP1 utilise 63 octets et la version ultérieure de Windows Vista SP1 utilise les valeurs par défaut indiquées ci-dessus).</span><span class="sxs-lookup"><span data-stu-id="57aec-182">The **IVdsPack::CreateVolume** and **IVdsPack2::CreateVolume2** APIs do not use the specified alignment parameter when a new volume is created, and instead use the alignment value default for the operating system (Pre-Windows Vista SP1 will use 63 bytes, and post Windows Vista SP1 will use the defaults stated above).</span></span> <span data-ttu-id="57aec-183">Par conséquent, il est recommandé que les applications qui doivent créer des partitions utilisent les API **IVdsCreatePartitionEx :: CreatePartitionEx** ou **IVdsAdvancedDisk :: CreatePartition** à la place, qui utilisent le paramètre d’alignement spécifié.</span><span class="sxs-lookup"><span data-stu-id="57aec-183">Thus, it is recommended that applications that need to create partitions use the **IVdsCreatePartitionEx::CreatePartitionEx** or **IVdsAdvancedDisk::CreatePartition** APIs instead, which use the specified alignment parameter.</span></span>

<span data-ttu-id="57aec-184">La meilleure façon de s’assurer que l’alignement est correct est de le faire juste lors de la création initiale de la partition.</span><span class="sxs-lookup"><span data-stu-id="57aec-184">The best way to help ensure that alignment is correct is to do it right when initially creating the partition.</span></span> <span data-ttu-id="57aec-185">Dans le cas contraire, votre application devra prendre en compte l’alignement lors de l’exécution d’écritures ou de l’initialisation, ce qui peut être très complexe.</span><span class="sxs-lookup"><span data-stu-id="57aec-185">Otherwise your application will need to take alignment into account when performing writes or at initialization – which can be a very complex matter.</span></span> <span data-ttu-id="57aec-186">À compter de Windows Vista SP1, ce n’est généralement pas un problème. Toutefois, les versions antérieures de Windows peuvent créer des partitions non alignées qui peuvent entraîner des problèmes de performances avec certains disques de format avancé.</span><span class="sxs-lookup"><span data-stu-id="57aec-186">As of Windows Vista SP1, this is generally not an issue; however, older versions of Windows can create unaligned partitions that can potentially lead to performance issues with some Advanced Format disks.</span></span>

### <a name="issue-2-unbuffered-writes-not-aligned-to-physical-sector-size"></a><span data-ttu-id="57aec-187">Problème 2 : écritures non mises en mémoire tampon non alignées sur la taille de secteur physique</span><span class="sxs-lookup"><span data-stu-id="57aec-187">Issue 2: Unbuffered Writes not aligned to Physical Sector Size</span></span>

<span data-ttu-id="57aec-188">Le problème de base est que les écritures non mises en mémoire tampon ne sont pas alignées sur la taille de secteur physique indiquée du support de stockage, ce qui déclenche une lecture-modification-écriture dans le lecteur qui peut entraîner des problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="57aec-188">The basic issue is that unbuffered writes are not aligned to the reported physical sector size of the storage media, which triggers a Read-Modify-Write in the drive that can result in performance issues.</span></span> <span data-ttu-id="57aec-189">Les écritures mises en mémoire tampon, en revanche, sont alignées sur la taille de la page, soit 4 Ko, ce qui est par conséquent la taille de secteur physique de la première génération de médias de grands secteurs.</span><span class="sxs-lookup"><span data-stu-id="57aec-189">Buffered writes, on the other hand, are aligned to the page size – 4 KB – which coincidently is the physical sector size of the first generation of large sector media.</span></span> <span data-ttu-id="57aec-190">Toutefois, la plupart des applications avec un magasin de données effectuent des écritures non mises en mémoire tampon et doivent donc s’assurer que ces écritures sont effectuées dans des unités de la taille de secteur physique.</span><span class="sxs-lookup"><span data-stu-id="57aec-190">However, most applications with a data store perform unbuffered writes, and thus will need to ensure these writes are performed in units of the physical sector size.</span></span>

<span data-ttu-id="57aec-191">Pour déterminer si votre application émet des e/s non mises en mémoire tampon, vérifiez que vous incluez l’indicateur de **fichier aucun indicateur de \_ mise en \_ \_ mémoire tampon** dans le paramètre *DwFlagsAndAttributes* lorsque vous appelez la fonction **CreateFile** .</span><span class="sxs-lookup"><span data-stu-id="57aec-191">To help determine if your application issues unbuffered I/O, check to see that you include the **FILE\_FLAG\_NO\_BUFFERING** flag in the *dwFlagsAndAttributes* parameter when you are calling the **CreateFile** function.</span></span>

<span data-ttu-id="57aec-192">En outre, si vous alignez actuellement les écritures sur la taille de secteur, cette taille de secteur est très probablement la taille de secteur *logique* , car la plupart des API existantes qui interrogent la taille de secteur du média interrogent vraiment l’unité d’adressage, c’est-à-dire la taille de secteur logique.</span><span class="sxs-lookup"><span data-stu-id="57aec-192">Moreover, if you are currently aligning the writes to the sector size, this sector size is most likely just the *logical* sector size, as most existing APIs that query for the sector size of the media really just query the unit of addressing – that is, the logical sector size.</span></span> <span data-ttu-id="57aec-193">La taille de secteur d’intérêt ici est la taille de secteur physique, qui est l’unité réelle d’atomicité.</span><span class="sxs-lookup"><span data-stu-id="57aec-193">The sector size of interest here is the physical sector size, which is the real unit of atomicity.</span></span> <span data-ttu-id="57aec-194">Voici quelques exemples d’API qui récupèrent la taille de secteur logique :</span><span class="sxs-lookup"><span data-stu-id="57aec-194">Some examples of APIs that retrieve the logical sector size are:</span></span>

-   <span data-ttu-id="57aec-195">**GetDiskFreeSpace**, **GetDiskFreeSpaceEx**</span><span class="sxs-lookup"><span data-stu-id="57aec-195">**GetDiskFreeSpace**, **GetDiskFreeSpaceEx**</span></span>
-   <span data-ttu-id="57aec-196">**FileFsVolumeInformation**</span><span class="sxs-lookup"><span data-stu-id="57aec-196">**FileFsVolumeInformation**</span></span>
-   <span data-ttu-id="57aec-197">**IOCTL \_ DISQUE \_ Obtient \_ la \_ géométrie du lecteur**, **IOCTL \_ Disk obtient la géométrie du \_ \_ lecteur \_ \_ ex**</span><span class="sxs-lookup"><span data-stu-id="57aec-197">**IOCTL\_DISK\_GET\_DRIVE\_GEOMETRY**, **IOCTL\_DISK\_GET\_DRIVE\_GEOMETRY\_EX**</span></span>
-   <span data-ttu-id="57aec-198">**IVdsDisk :: GetProperties**, **IVdsDisk3 :: GetProperties2**</span><span class="sxs-lookup"><span data-stu-id="57aec-198">**IVdsDisk::GetProperties**, **IVdsDisk3::GetProperties2**</span></span>

<span data-ttu-id="57aec-199">**Comment interroger la taille de secteur physique**</span><span class="sxs-lookup"><span data-stu-id="57aec-199">**How to Query for the Physical Sector Size**</span></span>

<span data-ttu-id="57aec-200">Microsoft a fourni un exemple de code sur MSDN détaillant comment une application peut interroger la taille de secteur physique du volume.</span><span class="sxs-lookup"><span data-stu-id="57aec-200">Microsoft has provided a code sample on MSDN detailing how an application can query for the physical sector size of the volume.</span></span> <span data-ttu-id="57aec-201">L’exemple de code se trouve à l’emplacement <https://msdn.microsoft.com/library/ff800831.aspx> .</span><span class="sxs-lookup"><span data-stu-id="57aec-201">The code sample is located at <https://msdn.microsoft.com/library/ff800831.aspx>.</span></span>

<span data-ttu-id="57aec-202">Bien que l’exemple de code ci-dessus vous permette d’obtenir la taille de secteur physique du volume, vous devez effectuer une vérification de l’intégrité de base sur la taille de secteur physique indiquée avant de l’utiliser, car il a été observé que certains pilotes peuvent ne pas retourner des données correctement mises en forme :</span><span class="sxs-lookup"><span data-stu-id="57aec-202">While the code sample above allows you to get the physical sector size of the volume, you should do some basic sanity checking on the reported physical sector size before using it, as it has been observed that some drivers may not return correctly formatted data:</span></span>

-   <span data-ttu-id="57aec-203">Assurez-vous que la taille de secteur physique indiquée est >= la taille de secteur logique signalée.</span><span class="sxs-lookup"><span data-stu-id="57aec-203">Make sure that the reported physical sector size is >= the reported logical sector size.</span></span> <span data-ttu-id="57aec-204">Si ce n’est pas le cas, votre application doit utiliser une taille de secteur physique égale à la taille de secteur logique signalée.</span><span class="sxs-lookup"><span data-stu-id="57aec-204">If it is not, your application should use a physical sector size equal to the reported logical sector size.</span></span>
-   <span data-ttu-id="57aec-205">Assurez-vous que la taille de secteur physique indiquée est une puissance de deux.</span><span class="sxs-lookup"><span data-stu-id="57aec-205">Make sure that the reported physical sector size is a power of two.</span></span> <span data-ttu-id="57aec-206">Si ce n’est pas le cas, votre application doit utiliser une taille de secteur physique égale à la taille de secteur logique signalée.</span><span class="sxs-lookup"><span data-stu-id="57aec-206">If it is not, your application should use a physical sector size equal to the reported logical sector size.</span></span>
-   <span data-ttu-id="57aec-207">Si la taille de secteur physique est une valeur Power-of-Two comprise entre 512 octets et 4 Ko, vous devez envisager d’utiliser une taille de secteur physique arrondie à la taille de secteur logique signalée.</span><span class="sxs-lookup"><span data-stu-id="57aec-207">If the physical sector size is a power-of-two value between 512-bytes and 4 KB, you should consider using a physical sector size rounded down to the reported logical sector size.</span></span>
-   <span data-ttu-id="57aec-208">Si la taille de secteur physique est une valeur Power-of-Two supérieure à 4 Ko, vous devez évaluer la capacité de votre application à gérer ce scénario avant d’utiliser cette valeur.</span><span class="sxs-lookup"><span data-stu-id="57aec-208">If the physical sector size is a power-of-two value greater than 4 KB, you should evaluate your application’s ability to handle this scenario before using that value.</span></span> <span data-ttu-id="57aec-209">Dans le cas contraire, vous devez envisager d’utiliser une taille de secteur physique arrondie à 4 Ko.</span><span class="sxs-lookup"><span data-stu-id="57aec-209">Otherwise, you should consider using a physical sector size rounded down to 4 KB.</span></span>

<span data-ttu-id="57aec-210">L’utilisation de cette IOCTL pour obtenir la taille de secteur physique présente plusieurs limites :</span><span class="sxs-lookup"><span data-stu-id="57aec-210">Using this IOCTL to get the physical sector size does have several limitations:</span></span>

-   <span data-ttu-id="57aec-211">Requiert des privilèges élevés.</span><span class="sxs-lookup"><span data-stu-id="57aec-211">Requires elevated privilege.</span></span> <span data-ttu-id="57aec-212">Si votre application ne s’exécute pas avec des privilèges, vous devrez peut-être écrire une application de service Windows comme indiqué ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="57aec-212">If your application is not running with privilege, you may need to write a Windows Service Application as noted above.</span></span>

-   <span data-ttu-id="57aec-213">Ne prend pas en charge les volumes SMB.</span><span class="sxs-lookup"><span data-stu-id="57aec-213">Does not support SMB volumes.</span></span> <span data-ttu-id="57aec-214">Vous devrez peut-être également écrire une application de service Windows pour prendre en charge l’interrogation de la taille des secteurs physiques sur ces volumes.</span><span class="sxs-lookup"><span data-stu-id="57aec-214">You may also need to write a Windows Service Application to support physical sector size querying on these volumes.</span></span>

-   <span data-ttu-id="57aec-215">Ne peut pas être émis pour un handle de fichier (l’IOCTL doit être délivré à un handle de volume).</span><span class="sxs-lookup"><span data-stu-id="57aec-215">Cannot be issued to any file handle (the IOCTL must be issued to a Volume Handle).</span></span>

-   <span data-ttu-id="57aec-216">Pris en charge uniquement dans les versions de Windows mentionnées au début de cet article.</span><span class="sxs-lookup"><span data-stu-id="57aec-216">Supported only in Windows versions listed near the beginning of this article.</span></span>

<span data-ttu-id="57aec-217">**Les enregistrements de validation sont remplis pour les secteurs de 512 octets**</span><span class="sxs-lookup"><span data-stu-id="57aec-217">**Commit records are padded to 512-byte sectors**</span></span>

<span data-ttu-id="57aec-218">Les applications avec un magasin de données ont généralement une forme d’enregistrement de validation qui conserve les informations sur les modifications des métadonnées ou gère la structure du magasin de données.</span><span class="sxs-lookup"><span data-stu-id="57aec-218">Applications with a data store typically have some form of commit record that either maintains information about metadata changes or maintains the structure of the data store.</span></span> <span data-ttu-id="57aec-219">Pour éviter que la perte d’un secteur n’affecte plusieurs enregistrements, cet enregistrement de validation est généralement rempli à une taille de secteur.</span><span class="sxs-lookup"><span data-stu-id="57aec-219">In order to ensure that the loss of a sector does not affect multiple records, this commit record is typically padded out to a sector size.</span></span> <span data-ttu-id="57aec-220">Avec un disque avec une plus grande taille de secteur physique, l’application doit interroger la taille de secteur physique comme indiqué dans la section précédente et vérifier que chaque enregistrement de validation est rempli à cette taille.</span><span class="sxs-lookup"><span data-stu-id="57aec-220">With a disk with a larger physical sector size, the application will need to query for the physical sector size as shown in the prior section, and ensure each commit record is padded to that size.</span></span> <span data-ttu-id="57aec-221">Non seulement cela évite le cycle de lecture-modification-écriture, mais il permet de s’assurer qu’en cas de perte d’un secteur physique, un seul enregistrement de validation est perdu.</span><span class="sxs-lookup"><span data-stu-id="57aec-221">Not only does this avoid the Read-Modify-Write cycle, it helps ensure that in case a physical sector was lost, only one Commit Record would be lost.</span></span>

<span data-ttu-id="57aec-222">**Les fichiers journaux sont écrits dans des blocs non alignés**</span><span class="sxs-lookup"><span data-stu-id="57aec-222">**Log files are written to in unaligned chunks**</span></span>

<span data-ttu-id="57aec-223">Les e/s non mises en mémoire tampon sont généralement utilisées lors de la mise à jour ou de l’ajout d’un fichier journal.</span><span class="sxs-lookup"><span data-stu-id="57aec-223">Unbuffered I/O is typically used when updating or appending to a log file.</span></span> <span data-ttu-id="57aec-224">Il existe plusieurs façons de s’assurer que ces mises à jour sont correctement alignées :</span><span class="sxs-lookup"><span data-stu-id="57aec-224">There are several ways to help ensure these updates are correctly aligned:</span></span>

-   <span data-ttu-id="57aec-225">Mettre à jour en interne les journaux des mises à jour de la taille de secteur physique indiquée du support d’exploitation et émettre des écritures de journal uniquement lorsqu’une unité de secteur physique est pleine</span><span class="sxs-lookup"><span data-stu-id="57aec-225">Internally buffer log updates to the reported physical sector size of the operating media, and issue log writes only when a physical sector unit is full</span></span>
-   <span data-ttu-id="57aec-226">Utiliser des e/s mises en mémoire tampon</span><span class="sxs-lookup"><span data-stu-id="57aec-226">Use buffered I/O</span></span>

### <a name="issue-3-file-formats-relying-on-512-byte-sectors"></a><span data-ttu-id="57aec-227">Problème 3 : formats de fichiers basés sur des secteurs de 512 octets</span><span class="sxs-lookup"><span data-stu-id="57aec-227">Issue 3: File Formats relying on 512-byte Sectors</span></span>

<span data-ttu-id="57aec-228">Certaines applications avec des formats de fichier standard (tels que VHD 1,0) peuvent avoir des fichiers codés en dur pour supposer une taille de secteur de 512 octets.</span><span class="sxs-lookup"><span data-stu-id="57aec-228">Some applications with standard file formats (such as VHD 1.0) may have these files hard-coded to assume a 512-byte sector size.</span></span> <span data-ttu-id="57aec-229">Ainsi, les mises à jour et les écritures dans ce fichier entraîneraient un cycle de lecture-modification-écriture sur l’appareil, ce qui peut entraîner des problèmes de performances et de résilience pour vos clients.</span><span class="sxs-lookup"><span data-stu-id="57aec-229">Thus, updates and writes to this file would result in a Read-Modify-Write cycle on the device– which will potentially result in performance and resiliency concerns for your customers.</span></span> <span data-ttu-id="57aec-230">Toutefois, il existe des moyens pour une application d’assurer la prise en charge de l’utilisation de ce type de média, par exemple :</span><span class="sxs-lookup"><span data-stu-id="57aec-230">However, there are ways for an application to provide support for operating on this type of media, for example:</span></span>

-   <span data-ttu-id="57aec-231">Utilisez la mise en mémoire tampon pour vous assurer que les écritures sont effectuées dans les unités de la taille de secteur physique</span><span class="sxs-lookup"><span data-stu-id="57aec-231">Use buffering to ensure that writes are performed in units of the physical sector size</span></span>
-   <span data-ttu-id="57aec-232">Implémentez une lecture-modification-écriture interne qui peut aider à garantir que les mises à jour sont effectuées dans les unités de la taille de secteur physique indiquée.</span><span class="sxs-lookup"><span data-stu-id="57aec-232">Implement an internal Read-Modify-Write that can help ensure that updates are performed in units of the reported physical sector size</span></span>
-   <span data-ttu-id="57aec-233">Si possible, compléter les enregistrements dans un secteur physique, de telle sorte que le remplissage soit interprété comme un espace vide</span><span class="sxs-lookup"><span data-stu-id="57aec-233">If possible, pad records out to a physical sector, in such a way that the padding would be interpreted as empty space</span></span>
-   <span data-ttu-id="57aec-234">Envisagez de reconcevoir une nouvelle version de la structure de données de l’application avec prise en charge des secteurs plus grands</span><span class="sxs-lookup"><span data-stu-id="57aec-234">Consider redesigning a new version of the application data structure with support for larger sectors</span></span>

### <a name="issue-4-the-reported-physical-sector-size-can-change-between-sessions"></a><span data-ttu-id="57aec-235">Problème 4 : la taille de secteur physique signalée peut changer d’une session à l’autre</span><span class="sxs-lookup"><span data-stu-id="57aec-235">Issue 4: The reported Physical Sector size can change between sessions</span></span>

<span data-ttu-id="57aec-236">Il existe de nombreux scénarios dans lesquels la taille de secteur physique signalée du stockage sous-jacent qui héberge le DataStor peut changer.</span><span class="sxs-lookup"><span data-stu-id="57aec-236">There are many scenarios where the reported physical sector size of the underlying storage that hosts the Datastor may change.</span></span> <span data-ttu-id="57aec-237">Le plus souvent, c’est lorsque vous migrez le DataStor vers un autre volume, ou même sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="57aec-237">The most common of these is when you migrate the Datastor to another volume, or even across the network.</span></span> <span data-ttu-id="57aec-238">Une modification de la taille de secteur physique signalée peut être un événement inattendu pour de nombreuses applications et peut potentiellement entraîner l’échec de la réinitialisation de certaines applications.</span><span class="sxs-lookup"><span data-stu-id="57aec-238">A change in the reported physical sector size may be an unexpected event for many applications and can potentially result in some applications even failing to re-initialize.</span></span>

<span data-ttu-id="57aec-239">Il ne s’agit pas du scénario le plus simple pour prendre en charge et est mentionné ici comme un avis.</span><span class="sxs-lookup"><span data-stu-id="57aec-239">This is not the easiest scenario to support, and is mentioned here as an advisory.</span></span> <span data-ttu-id="57aec-240">Vous devez prendre en compte les besoins de mobilité de vos clients et ajuster votre support en conséquence pour vous assurer que les clients ne sont pas affectés négativement à l’aide d’un média émulation.</span><span class="sxs-lookup"><span data-stu-id="57aec-240">You should consider the mobility requirements of your customers and adjust your support accordingly to help ensure customers are not negatively impacted by using 512e media.</span></span>

## <a name="4-kb-native-media"></a><span data-ttu-id="57aec-241">Support natif de 4 Ko</span><span class="sxs-lookup"><span data-stu-id="57aec-241">4 KB Native Media</span></span>

<span data-ttu-id="57aec-242">le support d’émulation de 512 octets est une étape de transition entre le support natif de 512 octets et le média natif de 4 Ko. nous pensons que le support natif de 4 Ko a été publié peu de temps après la disponibilité de émulation.</span><span class="sxs-lookup"><span data-stu-id="57aec-242">512-byte emulation media is meant as a transitional step between 512-byte native and 4 KB-native media, and we expect to see 4 KB-native media released soon after 512e is available.</span></span> <span data-ttu-id="57aec-243">Il y a plusieurs implications importantes avec ce support, qui doivent être notées :</span><span class="sxs-lookup"><span data-stu-id="57aec-243">There are several important implications with this media which should be noted:</span></span>

-   <span data-ttu-id="57aec-244">Les tailles de secteur logique et physique sont toutes les deux de 4 Ko</span><span class="sxs-lookup"><span data-stu-id="57aec-244">The logical and physical sector sizes are both 4 KB</span></span>
-   <span data-ttu-id="57aec-245">Étant donné qu’il n’existe aucune couche d’émulation, les écritures non alignées sont en échec par le stockage</span><span class="sxs-lookup"><span data-stu-id="57aec-245">Because there is no emulation layer, unaligned writes will be failed by the storage</span></span>
-   <span data-ttu-id="57aec-246">Aucune résilience cachée : les applications fonctionnent ou elles ne fonctionnent pas</span><span class="sxs-lookup"><span data-stu-id="57aec-246">No hidden resiliency hit – applications either work or they don’t work</span></span>

<span data-ttu-id="57aec-247">Même si Microsoft étudie actuellement la prise en charge de ces types de médias dans une future version de Windows et émet un article de la base de connaissances le cas échéant, les développeurs d’applications doivent prendre en compte la prise en charge de ces types de médias.</span><span class="sxs-lookup"><span data-stu-id="57aec-247">Although Microsoft is currently investigating support for these types of media in a future version of Windows and will issue a KB article when appropriate, application developers should consider preemptively providing support for these types of media.</span></span>

## <a name="closing"></a><span data-ttu-id="57aec-248">Fermeture</span><span class="sxs-lookup"><span data-stu-id="57aec-248">Closing</span></span>

<span data-ttu-id="57aec-249">Dans cet article, nous avons abordé les conséquences de la présentation de nombreux supports de grands secteurs avec un grand nombre de scénarios de déploiement courants.</span><span class="sxs-lookup"><span data-stu-id="57aec-249">In this article we have discussed the affects that large sector media introduces with many common deployment scenarios.</span></span> <span data-ttu-id="57aec-250">Nous avons vu l’impact des performances et de la résilience sur la lecture-modification-écriture, certains des scénarios intéressants que ce support peut introduire, et l’ensemble des problèmes qu’ils peuvent potentiellement causer avec les logiciels, ce qui affecte finalement l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="57aec-250">We have seen the performance and resiliency impact of Read-Modify-Write, some of the interesting scenarios that this media can introduce, and the set of issues they can potentially cause with software, which ultimately affects the end-user.</span></span> <span data-ttu-id="57aec-251">Le secteur du stockage est rapidement transféré vers des supports avec des tailles de secteur supérieures, et les clients ne seront pas en mesure d’acheter des disques avec des tailles de secteur de 512 octets traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="57aec-251">The storage industry is rapidly transitioning to media with larger sector sizes, and very soon customers will not be able to purchase disks with traditional 512-byte sector sizes.</span></span>

<span data-ttu-id="57aec-252">Il s’agit d’un document vivant qui est destiné aux développeurs pour mieux comprendre cette transition.</span><span class="sxs-lookup"><span data-stu-id="57aec-252">This is a living document, and is meant as an aid for developers to help understand this transition.</span></span> <span data-ttu-id="57aec-253">Vous devez entamer une conversation avec vos organisations respectives, avec les clients, les professionnels de l’informatique et les fournisseurs de matériel pour discuter de la transition de secteurs importants et de la façon dont elle affecte les scénarios qui sont importants pour vous.</span><span class="sxs-lookup"><span data-stu-id="57aec-253">You should start a conversation with your respective organizations, with customers, IT Pros, and your hardware vendors to talk about the large sector transition and how it affects the scenarios that are important to you.</span></span>

## <a name="links-to-other-resources"></a><span data-ttu-id="57aec-254">Liens vers d’autres ressources</span><span class="sxs-lookup"><span data-stu-id="57aec-254">Links to Other Resources</span></span>

-   <span data-ttu-id="57aec-255">**Déclaration de support générale de Windows**: <https://support.microsoft.com/kb/2510009></span><span class="sxs-lookup"><span data-stu-id="57aec-255">**Windows General Support Statement**: <https://support.microsoft.com/kb/2510009></span></span>
-   <span data-ttu-id="57aec-256">**Correctif logiciel pour Windows 7 et Windows Server 2008 R2**: <https://support.microsoft.com/kb/982018></span><span class="sxs-lookup"><span data-stu-id="57aec-256">**Hotfix for Windows 7 and Windows Server 2008 R2**: <https://support.microsoft.com/kb/982018></span></span>
-   <span data-ttu-id="57aec-257">**Correctif pour Windows Vista et Windows Server 2008**: <https://support.microsoft.com/kb/2470478></span><span class="sxs-lookup"><span data-stu-id="57aec-257">**Hotfix for Windows Vista and Windows Server 2008**: <https://support.microsoft.com/kb/2470478></span></span>
-   <span data-ttu-id="57aec-258">**Instruction de prise en charge HyperV**: <https://support.microsoft.com/kb/2515143></span><span class="sxs-lookup"><span data-stu-id="57aec-258">**HyperV Support Statement**: <https://support.microsoft.com/kb/2515143></span></span>
-   <span data-ttu-id="57aec-259">**Informations générales sur l’IOCTL \_ \_Code de \_ contrôle de propriété de requête de stockage**: [https://msdn.microsoft.com/library/ff560590.aspx](/windows-hardware/drivers/ddi/ntddstor/ni-ntddstor-ioctl_storage_query_property)</span><span class="sxs-lookup"><span data-stu-id="57aec-259">**General information about the IOCTL\_STORAGE\_QUERY\_PROPERTY control code**: [https://msdn.microsoft.com/library/ff560590.aspx](/windows-hardware/drivers/ddi/ntddstor/ni-ntddstor-ioctl_storage_query_property)</span></span>
-   <span data-ttu-id="57aec-260">**IOCTL \_ \_Code de \_ contrôle de propriété de requête de stockage**: [https://msdn.microsoft.com/library/ff800830.aspx](/windows/win32/api/winioctl/ni-winioctl-ioctl_storage_query_property)</span><span class="sxs-lookup"><span data-stu-id="57aec-260">**IOCTL\_STORAGE\_QUERY\_PROPERTY Control Code**: [https://msdn.microsoft.com/library/ff800830.aspx](/windows/win32/api/winioctl/ni-winioctl-ioctl_storage_query_property)</span></span>
-   <span data-ttu-id="57aec-261">**Informations générales sur le stockage \_ \_Structure du \_ descripteur d’alignement d’accès**: [https://msdn.microsoft.com/library/ff566344.aspx](/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_access_alignment_descriptor)</span><span class="sxs-lookup"><span data-stu-id="57aec-261">**General information about the STORAGE\_ACCESS\_ALIGNMENT\_DESCRIPTOR structure**: [https://msdn.microsoft.com/library/ff566344.aspx](/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_access_alignment_descriptor)</span></span>
-   <span data-ttu-id="57aec-262">**Description de la terminologie standard utilisée pour décrire les mises à jour logicielles Microsoft**: <https://support.microsoft.com/kb/824684/></span><span class="sxs-lookup"><span data-stu-id="57aec-262">**Description of the standard terminology used to describe Microsoft software updates**: <https://support.microsoft.com/kb/824684/></span></span>
-   <span data-ttu-id="57aec-263">**Exemple de code WDK** avec des détails sur la façon d’extraire les informations d’alignement de l’accès de stockage signalées à partir de la structure du **\_ \_ \_ descripteur d’alignement** de l’accès au stockage lors d’un appel au code de contrôle de **propriété de \_ requête de stockage \_ \_ IOCTL** : [/Windows/Desktop/API/winioctl/NS-winioctl-STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR](/windows/desktop/api/winioctl/ns-winioctl-storage_access_alignment_descriptor)</span><span class="sxs-lookup"><span data-stu-id="57aec-263">**WDK sample code** with details for how to extract the reported storage access alignment information from the **STORAGE\_ACCESS\_ALIGNMENT\_DESCRIPTOR** structure when making a call to the **IOCTL\_STORAGE\_QUERY\_PROPERTY** control code: [/windows/desktop/api/winioctl/ns-winioctl-storage_access_alignment_descriptor](/windows/desktop/api/winioctl/ns-winioctl-storage_access_alignment_descriptor)</span></span>
-   <span data-ttu-id="57aec-264">**Informations générales sur les options d’imagex Command-Line**: <https://technet.microsoft.com/library/dd799302(WS.10).aspx></span><span class="sxs-lookup"><span data-stu-id="57aec-264">**General information about ImageX Command-Line Options**: <https://technet.microsoft.com/library/dd799302(WS.10).aspx></span></span>
-   <span data-ttu-id="57aec-265">**Pilotes de chipset Intel requis pour prendre en charge les lecteurs de secteur de 4 Ko**: <https://www.intel.com/support/chipsets/imsm/sb/CS-031502.htm></span><span class="sxs-lookup"><span data-stu-id="57aec-265">**Intel Chipset driver requirements to support 4 KB Sector Drives**: <https://www.intel.com/support/chipsets/imsm/sb/CS-031502.htm></span></span>
-   <span data-ttu-id="57aec-266">Pour plus d’informations sur les disques au format avancé, visitez les IDEMs sites Web suivants :</span><span class="sxs-lookup"><span data-stu-id="57aec-266">For more information on Advanced Format Disks, visit the following IDEMA websites:</span></span>
    -   <http://idema.org/?page_id=2172>
    -   <http://idema.org/?download=7926>

 

 
