---
title: Libération des descripteurs WinSNMP
description: L’environnement de programmation WinSNMP affecte la désallocation des ressources du descripteur à l’implémentation WinSNMP ou à l’application WinSNMP, en fonction du composant qui alloue la mémoire pour le descripteur.
ms.assetid: 3e4cbbc5-18bc-4731-971c-6e533d904f56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f97828c55d59932b7f4bdb75cbcf98964edd4a7e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104102277"
---
# <a name="freeing-winsnmp-descriptors"></a><span data-ttu-id="b0312-103">Libération des descripteurs WinSNMP</span><span class="sxs-lookup"><span data-stu-id="b0312-103">Freeing WinSNMP Descriptors</span></span>

<span data-ttu-id="b0312-104">L’environnement de programmation WinSNMP affecte la désallocation des ressources du descripteur à l’implémentation WinSNMP ou à l’application WinSNMP, en fonction du composant qui alloue la mémoire pour le descripteur.</span><span class="sxs-lookup"><span data-stu-id="b0312-104">The WinSNMP programming environment assigns the deallocation of descriptor resources to the WinSNMP implementation or the WinSNMP application, depending on which component allocates the memory for the descriptor.</span></span>

<span data-ttu-id="b0312-105">Pour libérer les ressources pour un [**smiOID**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioid) ou un descripteur [**smiOCTETS**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioctets) , les règles suivantes s’appliquent :</span><span class="sxs-lookup"><span data-stu-id="b0312-105">To free the resources for an [**smiOID**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioid) or an [**smiOCTETS**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioctets) descriptor, the following rules apply:</span></span>

-   <span data-ttu-id="b0312-106">Pour les paramètres d’entrée</span><span class="sxs-lookup"><span data-stu-id="b0312-106">For input parameters</span></span>

    <span data-ttu-id="b0312-107">Étant donné que l’application WinSNMP alloue la mémoire pour les objets d’entrée avec des longueurs variables, l’application doit libérer cette mémoire à l’aide d’une fonction appropriée.</span><span class="sxs-lookup"><span data-stu-id="b0312-107">Because the WinSNMP application allocates the memory for input objects with variable lengths, the application must free that memory using an appropriate function.</span></span> <span data-ttu-id="b0312-108">Par exemple, si l’application a alloué les ressources avec un appel à la fonction [**GlobalAlloc**](/windows/desktop/api/winbase/nf-winbase-globalalloc) , elle doit utiliser la fonction [**GlobalFree**](/windows/desktop/api/winbase/nf-winbase-globalfree) pour libérer les ressources.</span><span class="sxs-lookup"><span data-stu-id="b0312-108">For example, if the application allocated the resources with a call to the [**GlobalAlloc**](/windows/desktop/api/winbase/nf-winbase-globalalloc) function, it should use the [**GlobalFree**](/windows/desktop/api/winbase/nf-winbase-globalfree) function to deallocate the resources.</span></span> <span data-ttu-id="b0312-109">Si l’application a alloué les ressources avec un appel à la fonction [**HeapAlloc**](/windows/desktop/api/heapapi/nf-heapapi-heapalloc) , elle doit appeler la fonction [**HeapFree**](/windows/desktop/api/heapapi/nf-heapapi-heapfree) .</span><span class="sxs-lookup"><span data-stu-id="b0312-109">If the application allocated the resources with a call to the [**HeapAlloc**](/windows/desktop/api/heapapi/nf-heapapi-heapalloc) function, it should call the [**HeapFree**](/windows/desktop/api/heapapi/nf-heapapi-heapfree) function.</span></span>

-   <span data-ttu-id="b0312-110">Pour les paramètres de sortie</span><span class="sxs-lookup"><span data-stu-id="b0312-110">For output parameters</span></span>

    <span data-ttu-id="b0312-111">Un appel à l’une des fonctions suivantes permet à l’implémentation d’allouer de la mémoire pour un [**smiOID**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioid) ou un descripteur [**smiOCTETS**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioctets) : [**SnmpGetVb**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpgetvb), [**SnmpEncodeMsg**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpencodemsg), [**SnmpOidCopy**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpoidcopy), [**SnmpContextToStr**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpcontexttostr)et [**SnmpStrToOid**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpstrtooid).</span><span class="sxs-lookup"><span data-stu-id="b0312-111">A call to any of the following functions results in the implementation allocating memory for an [**smiOID**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioid) or an [**smiOCTETS**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioctets) descriptor: [**SnmpGetVb**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpgetvb), [**SnmpEncodeMsg**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpencodemsg), [**SnmpOidCopy**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpoidcopy), [**SnmpContextToStr**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpcontexttostr), and [**SnmpStrToOid**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpstrtooid).</span></span>

    <span data-ttu-id="b0312-112">Étant donné que l’implémentation alloue la mémoire pour ces objets de sortie, l’application doit appeler la fonction [**SnmpFreeDescriptor**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpfreedescriptor) pour libérer les ressources.</span><span class="sxs-lookup"><span data-stu-id="b0312-112">Because the implementation allocates the memory for these output objects, the application must call the [**SnmpFreeDescriptor**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpfreedescriptor) function to deallocate the resources.</span></span> <span data-ttu-id="b0312-113">Cette fonction permet à l’implémentation de libérer la mémoire allouée pour le membre **ptr** de ces structures.</span><span class="sxs-lookup"><span data-stu-id="b0312-113">This function enables the implementation to free the memory allocated for the **ptr** member of these structures.</span></span>

<span data-ttu-id="b0312-114">Pour libérer les ressources d’une structure [**smiVALUE**](/windows/desktop/api/Winsnmp/ns-winsnmp-smivalue) , une application WinSNMP doit vérifier le membre de **syntaxe** d’une structure [**smiVALUE**](/windows/desktop/api/Winsnmp/ns-winsnmp-smivalue) pour évaluer correctement le membre **value** de la structure.</span><span class="sxs-lookup"><span data-stu-id="b0312-114">To free the resources for an [**smiVALUE**](/windows/desktop/api/Winsnmp/ns-winsnmp-smivalue) structure, a WinSNMP application must check the **syntax** member of an [**smiVALUE**](/windows/desktop/api/Winsnmp/ns-winsnmp-smivalue) structure to correctly evaluate the **value** member of the structure.</span></span> <span data-ttu-id="b0312-115">Si le membre de **syntaxe** indique que le membre de **valeur** est un descripteur [**smiOCTETS**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioctets) ou [**smiOID**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioid) , et que l’implémentation a alloué les ressources pour le descripteur, l’application doit appeler [**SnmpFreeDescriptor**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpfreedescriptor).</span><span class="sxs-lookup"><span data-stu-id="b0312-115">If the **syntax** member indicates that the **value** member is an [**smiOCTETS**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioctets) or an [**smiOID**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioid) descriptor, and the implementation allocated the resources for the descriptor, the application must call [**SnmpFreeDescriptor**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpfreedescriptor).</span></span> <span data-ttu-id="b0312-116">Cela permet à l’implémentation de libérer de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="b0312-116">This enables the implementation to free the memory.</span></span> <span data-ttu-id="b0312-117">Si l’application a alloué les ressources, elle doit libérer la mémoire à l’aide d’une fonction appropriée, comme indiqué plus haut.</span><span class="sxs-lookup"><span data-stu-id="b0312-117">If the application allocated the resources, it must free the memory using an appropriate function, as indicated earlier.</span></span>

<span data-ttu-id="b0312-118">Pour plus d’informations, consultez [allocation d’objets mémoire WinSNMP](allocating-winsnmp-memory-objects.md).</span><span class="sxs-lookup"><span data-stu-id="b0312-118">For more information, see [Allocating WinSNMP Memory Objects](allocating-winsnmp-memory-objects.md).</span></span>

 

 